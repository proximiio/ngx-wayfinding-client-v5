(self.webpackChunkngx_wayfinding_client=self.webpackChunkngx_wayfinding_client||[]).push([[179],{40120:(Ae,y,w)=>{"use strict";function k(t){return"function"==typeof t}let G=!1;const I={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const n=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+n.stack)}else G&&console.log("RxJS: Back to a better error behavior. Thank you. <3");G=t},get useDeprecatedSynchronousErrorHandling(){return G}};function u(t){setTimeout(()=>{throw t},0)}const h={closed:!0,next(t){},error(t){if(I.useDeprecatedSynchronousErrorHandling)throw t;u(t)},complete(){}},g=Array.isArray||(t=>t&&"number"==typeof t.length);function v(t){return null!==t&&"object"==typeof t}const f=(()=>{function t(n){return Error.call(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((e,i)=>`${i+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n,this}return t.prototype=Object.create(Error.prototype),t})();class _{constructor(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:i,_unsubscribe:r,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof _)e.remove(this);else if(null!==e)for(let c=0;c<e.length;++c)e[c].remove(this);if(k(r)){i&&(this._unsubscribe=void 0);try{r.call(this)}catch(c){n=c instanceof f?S(c.errors):[c]}}if(g(o)){let c=-1,x=o.length;for(;++c<x;){const z=o[c];if(v(z))try{z.unsubscribe()}catch(O){n=n||[],O instanceof f?n=n.concat(S(O.errors)):n.push(O)}}}if(n)throw new f(n)}add(n){let e=n;if(!n)return _.EMPTY;switch(typeof n){case"function":e=new _(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof _)){const o=e;e=new _,e._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}let{_parentOrParents:i}=e;if(null===i)e._parentOrParents=this;else if(i instanceof _){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(n){const e=this._subscriptions;if(e){const i=e.indexOf(n);-1!==i&&e.splice(i,1)}}}var t;function S(t){return t.reduce((n,e)=>n.concat(e instanceof f?e.errors:e),[])}_.EMPTY=((t=new _).closed=!0,t);const M="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class R extends _{constructor(n,e,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=h;break;case 1:if(!n){this.destination=h;break}if("object"==typeof n){n instanceof R?(this.syncErrorThrowable=n.syncErrorThrowable,this.destination=n,n.add(this)):(this.syncErrorThrowable=!0,this.destination=new V(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new V(this,n,e,i)}}[M](){return this}static create(n,e,i){const r=new R(n,e,i);return r.syncErrorThrowable=!1,r}next(n){this.isStopped||this._next(n)}error(n){this.isStopped||(this.isStopped=!0,this._error(n))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(n){this.destination.next(n)}_error(n){this.destination.error(n),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:n}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=n,this}}class V extends R{constructor(n,e,i,r){super(),this._parentSubscriber=n;let o,c=this;k(e)?o=e:e&&(o=e.next,i=e.error,r=e.complete,e!==h&&(c=Object.create(e),k(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=o,this._error=i,this._complete=r}next(n){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;I.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}}error(n){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:i}=I;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=n,e.syncErrorThrown=!0):u(n),this.unsubscribe();else{if(this.unsubscribe(),i)throw n;u(n)}}}complete(){if(!this.isStopped){const{_parentSubscriber:n}=this;if(this._complete){const e=()=>this._complete.call(this._context);I.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(n,e){try{n.call(this._context,e)}catch(i){if(this.unsubscribe(),I.useDeprecatedSynchronousErrorHandling)throw i;u(i)}}__tryOrSetError(n,e,i){if(!I.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(r){return I.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=r,n.syncErrorThrown=!0,!0):(u(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:n}=this;this._context=null,this._parentSubscriber=null,n.unsubscribe()}}const F="function"==typeof Symbol&&Symbol.observable||"@@observable";function j(t){return t}function Q(t){return 0===t.length?j:1===t.length?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}let $=(()=>{class t{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){const{operator:o}=this,c=function U(t,n,e){if(t){if(t instanceof R)return t;if(t[M])return t[M]()}return t||n||e?new R(t,n,e):new R(h)}(e,i,r);if(c.add(o?o.call(c,this.source):this.source||I.useDeprecatedSynchronousErrorHandling&&!c.syncErrorThrowable?this._subscribe(c):this._trySubscribe(c)),I.useDeprecatedSynchronousErrorHandling&&c.syncErrorThrowable&&(c.syncErrorThrowable=!1,c.syncErrorThrown))throw c.syncErrorValue;return c}_trySubscribe(e){try{return this._subscribe(e)}catch(i){I.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=i),function B(t){for(;t;){const{closed:n,destination:e,isStopped:i}=t;if(n||i)return!1;t=e&&e instanceof R?e:null}return!0}(e)?e.error(i):console.warn(i)}}forEach(e,i){return new(i=oe(i))((r,o)=>{let c;c=this.subscribe(x=>{try{e(x)}catch(z){o(z),c&&c.unsubscribe()}},o,r)})}_subscribe(e){const{source:i}=this;return i&&i.subscribe(e)}[F](){return this}pipe(...e){return 0===e.length?this:Q(e)(this)}toPromise(e){return new(e=oe(e))((i,r)=>{let o;this.subscribe(c=>o=c,c=>r(c),()=>i(o))})}}return t.create=n=>new t(n),t})();function oe(t){if(t||(t=I.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const ie=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class q extends _{constructor(n,e){super(),this.subject=n,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const n=this.subject,e=n.observers;if(this.subject=null,!e||0===e.length||n.isStopped||n.closed)return;const i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}class se extends R{constructor(n){super(n),this.destination=n}}let ne=(()=>{class t extends ${constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[M](){return new se(this)}lift(e){const i=new Ce(this,this);return i.operator=e,i}next(e){if(this.closed)throw new ie;if(!this.isStopped){const{observers:i}=this,r=i.length,o=i.slice();for(let c=0;c<r;c++)o[c].next(e)}}error(e){if(this.closed)throw new ie;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:i}=this,r=i.length,o=i.slice();for(let c=0;c<r;c++)o[c].error(e);this.observers.length=0}complete(){if(this.closed)throw new ie;this.isStopped=!0;const{observers:e}=this,i=e.length,r=e.slice();for(let o=0;o<i;o++)r[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new ie;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new ie;return this.hasError?(e.error(this.thrownError),_.EMPTY):this.isStopped?(e.complete(),_.EMPTY):(this.observers.push(e),new q(this,e))}asObservable(){const e=new $;return e.source=this,e}}return t.create=(n,e)=>new Ce(n,e),t})();class Ce extends ne{constructor(n,e){super(),this.destination=n,this.source=e}next(n){const{destination:e}=this;e&&e.next&&e.next(n)}error(n){const{destination:e}=this;e&&e.error&&this.destination.error(n)}complete(){const{destination:n}=this;n&&n.complete&&this.destination.complete()}_subscribe(n){const{source:e}=this;return e?this.source.subscribe(n):_.EMPTY}}function xe(t){return t&&"function"==typeof t.schedule}function ue(t,n){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new fe(t,n))}}class fe{constructor(n,e){this.project=n,this.thisArg=e}call(n,e){return e.subscribe(new ee(n,this.project,this.thisArg))}}class ee extends R{constructor(n,e,i){super(n),this.project=e,this.count=0,this.thisArg=i||this}_next(n){let e;try{e=this.project.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const de=t=>n=>{for(let e=0,i=t.length;e<i&&!n.closed;e++)n.next(t[e]);n.complete()},ae=function ce(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Fe=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ue(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const Ge=t=>{if(t&&"function"==typeof t[F])return(t=>n=>{const e=t[F]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(n)})(t);if(Fe(t))return de(t);if(Ue(t))return(t=>n=>(t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,u),n))(t);if(t&&"function"==typeof t[ae])return(t=>n=>{const e=t[ae]();for(;;){let i;try{i=e.next()}catch(r){return n.error(r),n}if(i.done){n.complete();break}if(n.next(i.value),n.closed)break}return"function"==typeof e.return&&n.add(()=>{e.return&&e.return()}),n})(t);{const e=`You provided ${v(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function Pe(t,n){return new $(e=>{const i=new _;let r=0;return i.add(n.schedule(function(){r!==t.length?(e.next(t[r++]),e.closed||i.add(this.schedule())):e.complete()})),i})}function it(t,n){return n?function tt(t,n){if(null!=t){if(function ht(t){return t&&"function"==typeof t[F]}(t))return function $e(t,n){return new $(e=>{const i=new _;return i.add(n.schedule(()=>{const r=t[F]();i.add(r.subscribe({next(o){i.add(n.schedule(()=>e.next(o)))},error(o){i.add(n.schedule(()=>e.error(o)))},complete(){i.add(n.schedule(()=>e.complete()))}}))})),i})}(t,n);if(Ue(t))return function He(t,n){return new $(e=>{const i=new _;return i.add(n.schedule(()=>t.then(r=>{i.add(n.schedule(()=>{e.next(r),i.add(n.schedule(()=>e.complete()))}))},r=>{i.add(n.schedule(()=>e.error(r)))}))),i})}(t,n);if(Fe(t))return Pe(t,n);if(function Re(t){return t&&"function"==typeof t[ae]}(t)||"string"==typeof t)return function je(t,n){if(!t)throw new Error("Iterable cannot be null");return new $(e=>{const i=new _;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(n.schedule(()=>{r=t[ae](),i.add(n.schedule(function(){if(e.closed)return;let o,c;try{const x=r.next();o=x.value,c=x.done}catch(x){return void e.error(x)}c?e.complete():(e.next(o),this.schedule())}))})),i})}(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,n):t instanceof $?t:new $(Ge(t))}class qe extends R{constructor(n){super(),this.parent=n}_next(n){this.parent.notifyNext(n)}_error(n){this.parent.notifyError(n),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Te extends R{notifyNext(n){this.destination.next(n)}notifyError(n){this.destination.error(n)}notifyComplete(){this.destination.complete()}}function rt(t,n){if(n.closed)return;if(t instanceof $)return t.subscribe(n);let e;try{e=Ge(t)(n)}catch(i){n.error(i)}return e}function xt(t,n,e=Number.POSITIVE_INFINITY){return"function"==typeof n?i=>i.pipe(xt((r,o)=>it(t(r,o)).pipe(ue((c,x)=>n(r,c,o,x))),e)):("number"==typeof n&&(e=n),i=>i.lift(new gt(t,e)))}class gt{constructor(n,e=Number.POSITIVE_INFINITY){this.project=n,this.concurrent=e}call(n,e){return e.subscribe(new on(n,this.project,this.concurrent))}}class on extends Te{constructor(n,e,i=Number.POSITIVE_INFINITY){super(n),this.project=e,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(n){this.active<this.concurrent?this._tryNext(n):this.buffer.push(n)}_tryNext(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(n){const e=new qe(this),i=this.destination;i.add(e);const r=rt(n,e);r!==e&&i.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(n){this.destination.next(n)}notifyComplete(){const n=this.buffer;this.active--,n.length>0?this._next(n.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Gt(t=Number.POSITIVE_INFINITY){return xt(j,t)}function Vn(t,n){return n?Pe(t,n):new $(de(t))}function un(...t){let n=Number.POSITIVE_INFINITY,e=null,i=t[t.length-1];return xe(i)?(e=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===e&&1===t.length&&t[0]instanceof $?t[0]:Gt(n)(Vn(t,e))}class an extends ne{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return e&&!e.closed&&n.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ie;return this._value}next(n){super.next(this._value=n)}}function cn(...t){let n=t[t.length-1];return xe(n)?(t.pop(),Pe(t,n)):Vn(t)}function _i(){return function(n){return n.lift(new vi(n))}}class vi{constructor(n){this.connectable=n}call(n,e){const{connectable:i}=this;i._refCount++;const r=new qn(n,i),o=e.subscribe(r);return r.closed||(r.connection=i.connect()),o}}class qn extends R{constructor(n,e){super(n),this.connectable=e}_unsubscribe(){const{connectable:n}=this;if(!n)return void(this.connection=null);this.connectable=null;const e=n._refCount;if(e<=0)return void(this.connection=null);if(n._refCount=e-1,e>1)return void(this.connection=null);const{connection:i}=this,r=n._connection;this.connection=null,r&&(!i||r===i)&&r.unsubscribe()}}class Pi extends ${constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let n=this._connection;return n||(this._isComplete=!1,n=this._connection=new _,n.add(this.source.subscribe(new Ei(this.getSubject(),this))),n.closed&&(this._connection=null,n=_.EMPTY)),n}refCount(){return _i()(this)}}const ci=(()=>{const t=Pi.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Ei extends se{constructor(n,e){super(n),this.connectable=e}_error(n){this._unsubscribe(),super._error(n)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const n=this.connectable;if(n){this.connectable=null;const e=n._connection;n._refCount=0,n._subject=null,n._connection=null,e&&e.unsubscribe()}}}class $i{constructor(n,e){this.subjectFactory=n,this.selector=e}call(n,e){const{selector:i}=this,r=this.subjectFactory(),o=i(r).subscribe(n);return o.add(e.subscribe(r)),o}}function so(){return new ne}function Zn(){return t=>_i()(function ji(t,n){return function(i){let r;if(r="function"==typeof t?t:function(){return t},"function"==typeof n)return i.lift(new $i(r,n));const o=Object.create(i,ci);return o.source=i,o.subjectFactory=r,o}}(so)(t))}function zt(t,n){return"function"==typeof n?e=>e.pipe(zt((i,r)=>it(t(i,r)).pipe(ue((o,c)=>n(i,o,r,c))))):e=>e.lift(new Je(t))}class Je{constructor(n){this.project=n}call(n,e){return e.subscribe(new nt(n,this.project))}}class nt extends Te{constructor(n,e){super(n),this.project=e,this.index=0}_next(n){let e;const i=this.index++;try{e=this.project(n,i)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(n){const e=this.innerSubscription;e&&e.unsubscribe();const i=new qe(this),r=this.destination;r.add(i),this.innerSubscription=rt(n,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}function Se(t,n){return e=>e.lift(new Qe(t,n))}class Qe{constructor(n,e){this.compare=n,this.keySelector=e}call(n,e){return e.subscribe(new ot(n,this.compare,this.keySelector))}}class ot extends R{constructor(n,e,i){super(n),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(n,e){return n===e}_next(n){let e;try{const{keySelector:r}=this;e=r?r(n):n}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=e,this.destination.next(n))}}function dt(t){for(let n in t)if(t[n]===dt)return n;throw Error("Could not find renamed property on target object.")}function Pt(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function At(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(At).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Wt(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Yt=dt({__forward_ref__:dt});function Bt(t){return t.__forward_ref__=Bt,t.toString=function(){return At(this())},t}function $t(t){return vn(t)?t():t}function vn(t){return"function"==typeof t&&t.hasOwnProperty(Yt)&&t.__forward_ref__===Bt}function Cn(t){return t&&!!t.\u0275providers}const jn="https://g.co/ng/security#xss";class jt extends Error{constructor(n,e){super(function Dn(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,e)),this.code=n}}function Ke(t){return"string"==typeof t?t:null==t?"":String(t)}function or(t,n){throw new jt(-201,!1)}function Nn(t,n){null==t&&function Rn(t,n,e,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${e} ${i} ${n} <=Actual]`))}(n,t,null,"!=")}function Ot(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function St(t){return{providers:t.providers||[],imports:t.imports||[]}}function Kt(t){return rn(t,La)||rn(t,Ui)}function rn(t,n){return t.hasOwnProperty(n)?t[n]:null}function Gi(t){return t&&(t.hasOwnProperty(Di)||t.hasOwnProperty(nr))?t[Di]:null}const La=dt({\u0275prov:dt}),Di=dt({\u0275inj:dt}),Ui=dt({ngInjectableDef:dt}),nr=dt({ngInjectorDef:dt});var Be=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Be||{});let _t;function nn(t){const n=_t;return _t=t,n}function Pn(t,n,e){const i=Kt(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:e&Be.Optional?null:void 0!==n?n:void or(At(t))}const ri=globalThis,aa={},Ja="__NG_DI_FLAG__",Da="ngTempTokenPath",Zs=/\n/gm,Io="__source";let u1;function Yr(t){const n=u1;return u1=t,n}function To(t,n=Be.Default){if(void 0===u1)throw new jt(-203,!1);return null===u1?Pn(t,void 0,n):u1.get(t,n&Be.Optional?null:void 0,n)}function Sn(t,n=Be.Default){return(function Lt(){return _t}()||To)($t(t),n)}function li(t,n=Be.Default){return Sn(t,Sc(n))}function Sc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vc(t){const n=[];for(let e=0;e<t.length;e++){const i=$t(t[e]);if(Array.isArray(i)){if(0===i.length)throw new jt(900,!1);let r,o=Be.Default;for(let c=0;c<i.length;c++){const x=i[c],z=ps(x);"number"==typeof z?-1===z?r=x.token:o|=z:r=x}n.push(Sn(r,o))}else n.push(Sn(i))}return n}function Oa(t,n){return t[Ja]=n,t.prototype[Ja]=n,t}function ps(t){return t[Ja]}function Mo(t){return{toString:t}.toString()}var d1=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(d1||{}),Xr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Xr||{});const zi={},Hr=[],ks=dt({\u0275cmp:dt}),ja=dt({\u0275dir:dt}),ts=dt({\u0275pipe:dt}),$s=dt({\u0275mod:dt}),Ns=dt({\u0275fac:dt}),j1=dt({__NG_ELEMENT_ID__:dt}),Br=dt({__NG_ENV_ID__:dt});function jr(t,n,e){let i=t.length;for(;;){const r=t.indexOf(n,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const o=n.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}e=r+1}}function I1(t,n,e){let i=0;for(;i<e.length;){const r=e[i];if("number"==typeof r){if(0!==r)break;i++;const o=e[i++],c=e[i++],x=e[i++];t.setAttribute(n,c,x,o)}else{const o=r,c=e[++i];T1(o)?t.setProperty(n,o,c):t.setAttribute(n,o,c),i++}}return i}function Lo(t){return 3===t||4===t||6===t}function T1(t){return 64===t.charCodeAt(0)}function ns(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){const r=n[i];"number"==typeof r?e=r:0===e||Ec(t,e,r,null,-1===e||2===e?n[++i]:null)}}return t}function Ec(t,n,e,i,r){let o=0,c=t.length;if(-1===n)c=-1;else for(;o<t.length;){const x=t[o++];if("number"==typeof x){if(x===n){c=-1;break}if(x>n){c=o-1;break}}}for(;o<t.length;){const x=t[o];if("number"==typeof x)break;if(x===e){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==c&&(t.splice(c,0,n),o=c+1),t.splice(o++,0,e),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}const Or="ng-template";function U1(t,n,e){let i=0,r=!0;for(;i<t.length;){let o=t[i++];if("string"==typeof o&&r){const c=t[i++];if(e&&"class"===o&&-1!==jr(c.toLowerCase(),n,0))return!0}else{if(1===o){for(;i<t.length&&"string"==typeof(o=t[i++]);)if(o.toLowerCase()===n)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function vr(t){return 4===t.type&&t.value!==Or}function Ac(t,n,e){return n===(4!==t.type||e?t.value:Or)}function hr(t,n,e){let i=4;const r=t.attrs||[],o=function Ua(t){for(let n=0;n<t.length;n++)if(Lo(t[n]))return n;return t.length}(r);let c=!1;for(let x=0;x<n.length;x++){const z=n[x];if("number"!=typeof z){if(!c)if(4&i){if(i=2|1&i,""!==z&&!Ac(t,z,e)||""===z&&1===n.length){if(za(i))return!1;c=!0}}else{const O=8&i?z:n[++x];if(8&i&&null!==t.attrs){if(!U1(t.attrs,O,e)){if(za(i))return!1;c=!0}continue}const le=Do(8&i?"class":z,r,vr(t),e);if(-1===le){if(za(i))return!1;c=!0;continue}if(""!==O){let be;be=le>o?"":r[le+1].toLowerCase();const Ee=8&i?be:null;if(Ee&&-1!==jr(Ee,O,0)||2&i&&O!==be){if(za(i))return!1;c=!0}}}}else{if(!c&&!za(i)&&!za(z))return!1;if(c&&za(z))continue;c=!1,i=z|1&i}}return za(i)||c}function za(t){return 0==(1&t)}function Do(t,n,e,i){if(null===n)return-1;let r=0;if(i||!e){let o=!1;for(;r<n.length;){const c=n[r];if(c===t)return r;if(3===c||6===c)o=!0;else{if(1===c||2===c){let x=n[++r];for(;"string"==typeof x;)x=n[++r];continue}if(4===c)break;if(0===c){r+=4;continue}}r+=o?1:2}return-1}return function G1(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const i=t[e];if("number"==typeof i)return-1;if(i===n)return e;e++}return-1}(n,t)}function $r(t,n,e=!1){for(let i=0;i<n.length;i++)if(hr(t,n[i],e))return!0;return!1}function Rs(t,n){e:for(let e=0;e<n.length;e++){const i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function is(t,n){return t?":not("+n.trim()+")":n}function Ga(t){let n=t[0],e=1,i=2,r="",o=!1;for(;e<t.length;){let c=t[e];if("string"==typeof c)if(2&i){const x=t[++e];r+="["+c+(x.length>0?'="'+x+'"':"")+"]"}else 8&i?r+="."+c:4&i&&(r+=" "+c);else""!==r&&!za(c)&&(n+=is(o,r),r=""),i=c,o=o||!za(i);e++}return""!==r&&(n+=is(o,r)),n}function ar(t){return Mo(()=>{const n=Kc(t),e={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===d1.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Xr.Emulated,styles:t.styles||Hr,_:null,schemas:t.schemas||null,tView:null,id:""};Wa(e);const i=t.dependencies;return e.directiveDefs=Qc(i,!1),e.pipeDefs=Qc(i,!0),e.id=function yc(t){let n=0;const e=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of e)n=Math.imul(31,n)+r.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(e),e})}function rs(t){return Lr(t)||os(t)}function ca(t){return null!==t}function wi(t){return Mo(()=>({type:t.type,bootstrap:t.bootstrap||Hr,declarations:t.declarations||Hr,imports:t.imports||Hr,exports:t.exports||Hr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Tr(t,n){if(null==t)return zi;const e={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),e[r]=i,n&&(n[r]=o)}return e}function In(t){return Mo(()=>{const n=Kc(t);return Wa(n),n})}function kr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Lr(t){return t[ks]||null}function os(t){return t[ja]||null}function uo(t){return t[ts]||null}function bo(t,n){const e=t[$s]||null;if(!e&&!0===n)throw new Error(`Type ${At(t)} does not have '\u0275mod' property.`);return e}function Kc(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||zi,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Hr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Tr(t.inputs,n),outputs:Tr(t.outputs)}}function Wa(t){t.features?.forEach(n=>n(t))}function Qc(t,n){if(!t)return null;const e=n?uo:rs;return()=>("function"==typeof t?t():t).map(i=>e(i)).filter(ca)}const la=0,Si=1,ur=2,ho=3,fo=4,cc=5,po=6,Fs=7,pa=8,y1=9,h1=10,qi=11,vo=12,ka=13,Ia=14,Gr=15,L2=16,Vs=17,Es=18,ma=19,Ea=20,ua=21,ui=22,lc=23,f1=24,Ar=25,gi=1,So=2,_1=7,da=9,ga=11;function Ta(t){return Array.isArray(t)&&"object"==typeof t[gi]}function Ya(t){return Array.isArray(t)&&!0===t[gi]}function Va(t){return 0!=(4&t.flags)}function Xa(t){return t.componentOffset>-1}function Eo(t){return 1==(1&t.flags)}function Na(t){return!!t.template}function W1(t){return 0!=(512&t[ur])}function ms(t,n){return t.hasOwnProperty(Ns)?t[Ns]:null}let ct=null,Mt=!1;function Vt(t){const n=ct;return ct=t,n}const hn={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function kn(t){if(!Z(t)||t.dirty){if(!t.producerMustRecompute(t)&&!a(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function An(t){t.dirty=!0,function Xn(t){if(void 0===t.liveConsumerNode)return;const n=Mt;Mt=!0;try{for(const e of t.liveConsumerNode)e.dirty||An(e)}finally{Mt=n}}(t),t.consumerMarkedDirty?.(t)}function Tn(t){return t&&(t.nextProducerIndex=0),Vt(t)}function Un(t,n){if(Vt(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Z(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)T(t.producerNode[e],t.producerIndexOfThis[e]);for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function a(t){me(t);for(let n=0;n<t.producerNode.length;n++){const e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(kn(e),i!==e.version))return!0}return!1}function d(t){if(me(t),Z(t))for(let n=0;n<t.producerNode.length;n++)T(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function T(t,n){if(function Ie(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),me(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)T(t.producerNode[i],t.producerIndexOfThis[i]);const e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[n],r=t.liveConsumerNode[n];me(r),r.producerIndexOfThis[i]=n}}function Z(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function me(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let K=null;function ln(t){const n=Vt(null);try{return t()}finally{Vt(n)}}const Xt=()=>{},fn={...hn,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Xt};class Hn{constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}}function Bn(){return ii}function ii(t){return t.type.prototype.ngOnChanges&&(t.setInput=hi),ti}function ti(){const t=qr(this),n=t?.current;if(n){const e=t.previous;if(e===zi)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function hi(t,n,e,i){const r=this.declaredInputs[e],o=qr(t)||function bi(t,n){return t[Wi]=n}(t,{previous:zi,current:null}),c=o.current||(o.current={}),x=o.previous,z=x[r];c[r]=new Hn(z&&z.currentValue,n,x===zi),t[i]=n}Bn.ngInherit=!0;const Wi="__ngSimpleChanges__";function qr(t){return t[Wi]||null}const ha=function(t,n,e){},Kr="svg";function ir(t){for(;Array.isArray(t);)t=t[la];return t}function va(t,n){return ir(n[t])}function ls(t,n){return ir(n[t.index])}function As(t,n){return t.data[n]}function x1(t,n){return t[n]}function Bs(t,n){const e=n[t];return Ta(e)?e:e[la]}function bc(t,n){return null==n?null:t[n]}function k2(t){t[Vs]=0}function Js(t){1024&t[ur]||(t[ur]|=1024,Z1(t,1))}function p1(t){1024&t[ur]&&(t[ur]&=-1025,Z1(t,-1))}function Z1(t,n){let e=t[ho];if(null===e)return;e[cc]+=n;let i=e;for(e=e[ho];null!==e&&(1===n&&1===i[cc]||-1===n&&0===i[cc]);)e[cc]+=n,i=e,e=e[ho]}const er={lFrame:e8(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function n4(){return er.bindingsEnabled}function Jc(){return null!==er.skipHydrationRootTNode}function Jn(){return er.lFrame.lView}function no(){return er.lFrame.tView}function Qr(t){return er.lFrame.contextLView=t,t[pa]}function xo(t){return er.lFrame.contextLView=null,t}function uc(){let t=Oh();for(;null!==t&&64===t.type;)t=t.parent;return t}function Oh(){return er.lFrame.currentTNode}function sl(t,n){const e=er.lFrame;e.currentTNode=t,e.isParent=n}function o4(){return er.lFrame.isParent}function X3(){er.lFrame.isParent=!1}function O1(){const t=er.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function El(){return er.lFrame.bindingIndex++}function N2(t){const n=er.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function a7(t,n){const e=er.lFrame;e.bindingIndex=e.bindingRootIndex=t,Yl(n)}function Yl(t){er.lFrame.currentDirectiveIndex=t}function K3(){return er.lFrame.currentQueryIndex}function m0(t){er.lFrame.currentQueryIndex=t}function s7(t){const n=t[Si];return 2===n.type?n.declTNode:1===n.type?t[po]:null}function s4(t,n,e){if(e&Be.SkipSelf){let r=n,o=t;for(;!(r=r.parent,null!==r||e&Be.Host||(r=s7(o),null===r||(o=o[Ia],10&r.type))););if(null===r)return!1;n=r,t=o}const i=er.lFrame=J3();return i.currentTNode=n,i.lView=t,!0}function Q3(t){const n=J3(),e=t[Si];er.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function J3(){const t=er.lFrame,n=null===t?null:t.child;return null===n?e8(t):n}function e8(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function t8(){const t=er.lFrame;return er.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Nh=t8;function c4(){const t=t8();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function q1(){return er.lFrame.selectedIndex}function K1(t){er.lFrame.selectedIndex=t}function js(){const t=er.lFrame;return As(t.tView,t.selectedIndex)}function l4(){er.lFrame.currentNamespace=Kr}let Hh=!0;function ou(){return Hh}function X2(t){Hh=t}function cl(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){const o=t.data[e].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:x,ngAfterViewInit:z,ngAfterViewChecked:O,ngOnDestroy:J}=o;c&&(t.contentHooks??=[]).push(-e,c),x&&((t.contentHooks??=[]).push(e,x),(t.contentCheckHooks??=[]).push(e,x)),z&&(t.viewHooks??=[]).push(-e,z),O&&((t.viewHooks??=[]).push(e,O),(t.viewCheckHooks??=[]).push(e,O)),null!=J&&(t.destroyHooks??=[]).push(e,J)}}function Xl(t,n,e){jh(t,n,3,e)}function m6(t,n,e,i){(3&t[ur])===e&&jh(t,n,e,i)}function o8(t,n){let e=t[ur];(3&e)===n&&(e&=8191,e+=1,t[ur]=e)}function jh(t,n,e,i){const o=i??-1,c=n.length-1;let x=0;for(let z=void 0!==i?65535&t[Vs]:0;z<c;z++)if("number"==typeof n[z+1]){if(x=n[z],null!=i&&x>=i)break}else n[z]<0&&(t[Vs]+=65536),(x<o||-1==o)&&(l7(t,e,n,z),t[Vs]=(4294901760&t[Vs])+z+2),z++}function Uh(t,n){ha(4,t,n);const e=Vt(null);try{n.call(t)}finally{Vt(e),ha(5,t,n)}}function l7(t,n,e,i){const r=e[i]<0,o=e[i+1],x=t[r?-e[i]:e[i]];r?t[ur]>>13<t[Vs]>>16&&(3&t[ur])===n&&(t[ur]+=8192,Uh(x,o)):Uh(x,o)}const au=-1;class u4{constructor(n,e,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}}function su(t){return t!==au}function Al(t){return 32767&t}function cu(t,n){let e=function Gh(t){return t>>16}(t),i=n;for(;e>0;)i=i[Ia],e--;return i}let g0=!0;function lu(t){const n=g0;return g0=t,n}const c8=255,Yh=5;let Xh=0;const e2={};function uu(t,n){const e=v6(t,n);if(-1!==e)return e;const i=n[Si];i.firstCreatePass&&(t.injectorIndex=n.length,l8(i.data,t),l8(n,null),l8(i.blueprint,null));const r=du(t,n),o=t.injectorIndex;if(su(r)){const c=Al(r),x=cu(r,n),z=x[Si].data;for(let O=0;O<8;O++)n[o+O]=x[c+O]|z[c+O]}return n[o+8]=r,o}function l8(t,n){t.push(0,0,0,0,0,0,0,0,n)}function v6(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function du(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;null!==r;){if(i=Jh(r),null===i)return au;if(e++,r=r[Ia],-1!==i.injectorIndex)return i.injectorIndex|e<<16}return au}function d4(t,n,e){!function d7(t,n,e){let i;"string"==typeof e?i=e.charCodeAt(0)||0:e.hasOwnProperty(j1)&&(i=e[j1]),null==i&&(i=e[j1]=Xh++);const r=i&c8;n.data[t+(r>>Yh)]|=1<<r}(t,n,e)}function u8(t,n,e){if(e&Be.Optional||void 0!==t)return t;or()}function $h(t,n,e,i){if(e&Be.Optional&&void 0===i&&(i=null),!(e&(Be.Self|Be.Host))){const r=t[y1],o=nn(void 0);try{return r?r.get(n,i,e&Be.Optional):Pn(n,i,e&Be.Optional)}finally{nn(o)}}return u8(i,0,e)}function qh(t,n,e,i=Be.Default,r){if(null!==t){if(2048&n[ur]&&!(i&Be.Self)){const c=function m7(t,n,e,i,r){let o=t,c=n;for(;null!==o&&null!==c&&2048&c[ur]&&!(512&c[ur]);){const x=Kh(o,c,e,i|Be.Self,e2);if(x!==e2)return x;let z=o.parent;if(!z){const O=c[Ea];if(O){const J=O.get(e,e2,i);if(J!==e2)return J}z=Jh(c),c=c[Ia]}o=z}return r}(t,n,e,i,e2);if(c!==e2)return c}const o=Kh(t,n,e,i,e2);if(o!==e2)return o}return $h(n,e,i,r)}function Kh(t,n,e,i,r){const o=function f7(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(j1)?t[j1]:void 0;return"number"==typeof n?n>=0?n&c8:Qh:n}(e);if("function"==typeof o){if(!s4(n,t,i))return i&Be.Host?u8(r,0,i):$h(n,e,i,r);try{let c;if(c=o(i),null!=c||i&Be.Optional)return c;or()}finally{Nh()}}else if("number"==typeof o){let c=null,x=v6(t,n),z=au,O=i&Be.Host?n[Gr][po]:null;for((-1===x||i&Be.SkipSelf)&&(z=-1===x?du(t,n):n[x+8],z!==au&&v0(i,!1)?(c=n[Si],x=Al(z),n=cu(z,n)):x=-1);-1!==x;){const J=n[Si];if(d8(o,x,J.data)){const le=h7(x,n,e,c,i,O);if(le!==e2)return le}z=n[x+8],z!==au&&v0(i,n[Si].data[x+8]===O)&&d8(o,x,n)?(c=J,x=Al(z),n=cu(z,n)):x=-1}}return r}function h7(t,n,e,i,r,o){const c=n[Si],x=c.data[t+8],J=y6(x,c,e,null==i?Xa(x)&&g0:i!=c&&0!=(3&x.type),r&Be.Host&&o===x);return null!==J?t2(n,c,J,x):e2}function y6(t,n,e,i,r){const o=t.providerIndexes,c=n.data,x=1048575&o,z=t.directiveStart,J=o>>20,be=r?x+J:t.directiveEnd;for(let Ee=i?x:x+J;Ee<be;Ee++){const ut=c[Ee];if(Ee<z&&e===ut||Ee>=z&&ut.type===e)return Ee}if(r){const Ee=c[z];if(Ee&&Na(Ee)&&Ee.type===e)return z}return null}function t2(t,n,e,i){let r=t[e];const o=n.data;if(function a8(t){return t instanceof u4}(r)){const c=r;c.resolving&&function xr(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new jt(-200,`Circular dependency in DI detected for ${t}${e}`)}(function si(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ke(t)}(o[e]));const x=lu(c.canSeeViewProviders);c.resolving=!0;const O=c.injectImpl?nn(c.injectImpl):null;s4(t,i,Be.Default);try{r=t[e]=c.factory(void 0,o,t,i),n.firstCreatePass&&e>=i.directiveStart&&function Bh(t,n,e){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){const c=ii(n);(e.preOrderHooks??=[]).push(t,c),(e.preOrderCheckHooks??=[]).push(t,c)}r&&(e.preOrderHooks??=[]).push(0-t,r),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}(e,o[e],n)}finally{null!==O&&nn(O),lu(x),c.resolving=!1,Nh()}}return r}function d8(t,n,e){return!!(e[n+(t>>Yh)]&1<<t)}function v0(t,n){return!(t&Be.Self||t&Be.Host&&n)}class Gc{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return qh(this._tNode,this._lView,n,Sc(i),e)}}function Qh(){return new Gc(uc(),Jn())}function io(t){return Mo(()=>{const n=t.prototype.constructor,e=n[Ns]||h8(n),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const o=r[Ns]||h8(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function h8(t){return vn(t)?()=>{const n=h8($t(t));return n&&n()}:ms(t)}function Jh(t){const n=t[Si],e=n.type;return 2===e?n.declTNode:1===e?t[po]:null}function ll(t){return function Zh(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const e=t.attrs;if(e){const i=e.length;let r=0;for(;r<i;){const o=e[r];if(Lo(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof e[r];)r++;else{if(o===n)return e[r+1];r+=2}}}return null}(uc(),t)}const ul="__parameters__";function y0(t,n,e){return Mo(()=>{const i=function f8(t){return function(...e){if(t){const i=t(...e);for(const r in i)this[r]=i[r]}}}(n);function r(...o){if(this instanceof r)return i.apply(this,o),this;const c=new r(...o);return x.annotation=c,x;function x(z,O,J){const le=z.hasOwnProperty(ul)?z[ul]:Object.defineProperty(z,ul,{value:[]})[ul];for(;le.length<=J;)le.push(null);return(le[J]=le[J]||[]).push(c),z}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function zl(t,n){t.forEach(e=>Array.isArray(e)?zl(e,n):n(e))}function af(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function f4(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function p4(t,n){const e=[];for(let i=0;i<t;i++)e.push(n);return e}function m2(t,n,e){let i=Ms(t,n);return i>=0?t[1|i]=e:(i=~i,function sf(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(1===r)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;)t[r]=t[r-2],r--;t[n]=e,t[n+1]=i}}(t,i,n,e)),i}function _0(t,n){const e=Ms(t,n);if(e>=0)return t[1|e]}function Ms(t,n){return function p8(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){const o=i+(r-i>>1),c=t[o<<e];if(n===c)return o<<e;c>n?r=o:i=o+1}return~(r<<e)}(t,n,1)}const Il=Oa(y0("Optional"),8),b0=Oa(y0("SkipSelf"),4);function E6(t){return 128==(128&t.flags)}var dl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(dl||{});const yu=/^>|^->|<!--|-->|--!>|<!-$/g,_f=/(<|>)/g,bf="\u200b$1\u200b";const z6=new Map;let P6=0;const w4="__ngContext__";function t1(t,n){Ta(n)?(t[w4]=n[ma],function P7(t){z6.set(t[ma],t)}(n)):t[w4]=n}let C0;function T6(t,n){return C0(t,n)}function bu(t){const n=t[ho];return Ya(n)?n[ho]:n}function E8(t){return A8(t[vo])}function Tf(t){return A8(t[fo])}function A8(t){for(;null!==t&&!Ya(t);)t=t[fo];return t}function y2(t,n,e,i,r){if(null!=i){let o,c=!1;Ya(i)?o=i:Ta(i)&&(c=!0,i=i[la]);const x=ir(i);0===t&&null!==e?null==r?Q1(n,e,x):F2(n,e,x,r||null,!0):1===t&&null!==e?F2(n,e,x,r||null,!0):2===t?function Su(t,n,e){const i=E4(t,n);i&&function T8(t,n,e,i){t.removeChild(n,e,i)}(t,i,n,e)}(n,x,c):3===t&&n.destroyNode(x),null!=o&&function V8(t,n,e,i,r){const o=e[_1];o!==ir(e)&&y2(n,t,i,o,r);for(let x=ga;x<e.length;x++){const z=e[x];Ql(z[Si],z,t,n,i,o)}}(n,t,o,e,r)}}function L6(t,n){return t.createComment(function A6(t){return t.replace(yu,n=>n.replace(_f,bf))}(n))}function S4(t,n,e){return t.createElement(n,e)}function P8(t,n){const e=t[da],i=e.indexOf(n);p1(n),e.splice(i,1)}function M0(t,n){if(t.length<=ga)return;const e=ga+n,i=t[e];if(i){const r=i[L2];null!==r&&r!==t&&P8(r,i),n>0&&(t[e-1][fo]=i[fo]);const o=f4(t,ga+n);!function T7(t,n){Ql(t,n,n[qi],2,null,null),n[la]=null,n[po]=null}(i[Si],i);const c=o[Es];null!==c&&c.detachView(o[Si]),i[ho]=null,i[fo]=null,i[ur]&=-129}return i}function wu(t,n){if(!(256&n[ur])){const e=n[qi];n[lc]&&d(n[lc]),n[f1]&&d(n[f1]),e.destroyNode&&Ql(t,n,e,3,null,null),function xu(t){let n=t[vo];if(!n)return Cu(t[Si],t);for(;n;){let e=null;if(Ta(n))e=n[vo];else{const i=n[ga];i&&(e=i)}if(!e){for(;n&&!n[fo]&&n!==t;)Ta(n)&&Cu(n[Si],n),n=n[ho];null===n&&(n=t),Ta(n)&&Cu(n[Si],n),e=n&&n[fo]}n=e}}(n)}}function Cu(t,n){if(!(256&n[ur])){n[ur]&=-129,n[ur]|=256,function O7(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let i=0;i<e.length;i+=2){const r=n[e[i]];if(!(r instanceof u4)){const o=e[i+1];if(Array.isArray(o))for(let c=0;c<o.length;c+=2){const x=r[o[c]],z=o[c+1];ha(4,x,z);try{z.call(x)}finally{ha(5,x,z)}}else{ha(4,r,o);try{o.call(r)}finally{ha(5,r,o)}}}}}(t,n),function D7(t,n){const e=t.cleanup,i=n[Fs];if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const c=e[o+3];c>=0?i[c]():i[-c].unsubscribe(),o+=2}else e[o].call(i[e[o+1]]);null!==i&&(n[Fs]=null);const r=n[ua];if(null!==r){n[ua]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(t,n),1===n[Si].type&&n[qi].destroy();const e=n[L2];if(null!==e&&Ya(n[ho])){e!==n[ho]&&P8(e,n);const i=n[Es];null!==i&&i.detachView(t)}!function Cf(t){z6.delete(t[ma])}(n)}}function I8(t,n,e){return function Of(t,n,e){let i=n;for(;null!==i&&40&i.type;)i=(n=i).parent;if(null===i)return e[la];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=t.data[i.directiveStart+r];if(o===Xr.None||o===Xr.Emulated)return null}return ls(i,e)}}(t,n.parent,e)}function F2(t,n,e,i,r){t.insertBefore(n,e,i,r)}function Q1(t,n,e){t.appendChild(n,e)}function Ll(t,n,e,i,r){null!==i?F2(t,n,e,i,r):Q1(t,n,e)}function E4(t,n){return t.parentNode(n)}function kf(t,n,e){return O8(t,n,e)}let k8,b,ke,st,O8=function D8(t,n,e){return 40&t.type?ls(t,e):null};function Mu(t,n,e,i){const r=I8(t,i,n),o=n[qi],x=kf(i.parent||n[po],i,n);if(null!=r)if(Array.isArray(e))for(let z=0;z<e.length;z++)Ll(o,r,e[z],x,!1);else Ll(o,r,e,x,!1);void 0!==k8&&k8(o,i,n,e,r)}function S0(t,n){if(null!==n){const e=n.type;if(3&e)return ls(n,t);if(4&e)return E0(-1,t[n.index]);if(8&e){const i=n.child;if(null!==i)return S0(t,i);{const r=t[n.index];return Ya(r)?E0(-1,r):ir(r)}}if(32&e)return T6(n,t)()||ir(t[n.index]);{const i=R8(t,n);return null!==i?Array.isArray(i)?i[0]:S0(bu(t[Gr]),i):S0(t,n.next)}}return null}function R8(t,n){return null!==n?t[Gr][po].projection[n.projection]:null}function E0(t,n){const e=ga+t+1;if(e<n.length){const i=n[e],r=i[Si].firstChild;if(null!==r)return S0(i,r)}return n[_1]}function A4(t,n,e,i,r,o,c){for(;null!=e;){const x=i[e.index],z=e.type;if(c&&0===n&&(x&&t1(ir(x),i),e.flags|=2),32!=(32&e.flags))if(8&z)A4(t,n,e.child,i,r,o,!1),y2(n,t,r,x,o);else if(32&z){const O=T6(e,i);let J;for(;J=O();)y2(n,t,r,J,o);y2(n,t,r,x,o)}else 16&z?O6(t,n,i,e,r,o):y2(n,t,r,x,o);e=c?e.projectionNext:e.next}}function Ql(t,n,e,i,r,o){A4(e,i,t.firstChild,n,r,o,!1)}function O6(t,n,e,i,r,o){const c=e[Gr],z=c[po].projection[i.projection];if(Array.isArray(z))for(let O=0;O<z.length;O++)y2(n,t,r,z[O],o);else{let O=z;const J=c[ho];E6(i)&&(O.flags|=128),A4(t,n,O,J,r,o,!0)}}function p(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function l(t,n,e){const{mergedAttrs:i,classes:r,styles:o}=e;null!==i&&I1(t,n,i),null!==r&&p(t,n,r),null!==o&&function N7(t,n,e){t.setAttribute(n,"style",e)}(t,n,o)}function Y(t){return function L(){if(void 0===b&&(b=null,ri.trustedTypes))try{b=ri.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return b}()?.createHTML(t)||t}function et(){if(void 0!==ke)return ke;if(typeof document<"u")return document;throw new jt(210,!1)}function Ct(t){return function bt(){if(void 0===st&&(st=null,ri.trustedTypes))try{st=ri.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return st}()?.createHTML(t)||t}class Jt{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jn})`}}class yn extends Jt{getTypeName(){return"HTML"}}class sn extends Jt{getTypeName(){return"Style"}}class Mn extends Jt{getTypeName(){return"Script"}}class Ln extends Jt{getTypeName(){return"URL"}}class Qn extends Jt{getTypeName(){return"ResourceURL"}}function pi(t){return t instanceof Jt?t.changingThisBreaksApplicationSecurity:t}function Oi(t,n){const e=function Ai(t){return t instanceof Jt&&t.getTypeName()||null}(t);if(null!=e&&e!==n){if("ResourceURL"===e&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${jn})`)}return e===n}class tr{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const e=(new window.DOMParser).parseFromString(Y(n),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(n):(e.removeChild(e.firstChild),e)}catch{return null}}}class Jr{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const e=this.inertDocument.createElement("template");return e.innerHTML=Y(n),e}}const gs=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Us(t){return(t=String(t)).match(gs)?t:"unsafe:"+t}function m1(t){const n={};for(const e of t.split(","))n[e]=!0;return n}function k1(...t){const n={};for(const e of t)for(const i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}const n1=m1("area,br,col,hr,img,wbr"),M1=m1("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),J1=m1("rp,rt"),r1=k1(n1,k1(M1,m1("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),k1(J1,m1("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),k1(J1,M1)),ec=m1("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Tc=k1(ec,m1("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),m1("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gs=m1("script,style,template");class dc{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let e=n.firstChild,i=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(n){const e=n.nodeName.toLowerCase();if(!r1.hasOwnProperty(e))return this.sanitizedSomething=!0,!Gs.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const i=n.attributes;for(let r=0;r<i.length;r++){const o=i.item(r),c=o.name,x=c.toLowerCase();if(!Tc.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let z=o.value;ec[x]&&(z=Us(z)),this.buf.push(" ",c,'="',tc(z),'"')}return this.buf.push(">"),!0}endElement(n){const e=n.nodeName.toLowerCase();r1.hasOwnProperty(e)&&!n1.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(tc(n))}checkClobberedElement(n,e){if(e&&(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return e}}const mo=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a2=/([^\#-~ |!])/g;function tc(t){return t.replace(/&/g,"&amp;").replace(mo,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(a2,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let nc;function _2(t,n){let e=null;try{nc=nc||function pr(t){const n=new Jr(t);return function us(){try{return!!(new window.DOMParser).parseFromString(Y(""),"text/html")}catch{return!1}}()?new tr(n):n}(t);let i=n?String(n):"";e=nc.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=nc.getInertBodyElement(i)}while(i!==o);return Y((new dc).sanitizeChildren(b2(e)||e))}finally{if(e){const i=b2(e)||e;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function b2(t){return"content"in t&&function $2(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Is=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Is||{});function x2(t){const n=I4();return n?Ct(n.sanitize(Is.HTML,t)||""):Oi(t,"HTML")?Ct(pi(t)):_2(et(),Ke(t))}function E1(t){const n=I4();return n?n.sanitize(Is.URL,t)||"":Oi(t,"URL")?pi(t):Us(Ke(t))}function I4(){const t=Jn();return t&&t[h1].sanitizer}class Gn{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Ot({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const T4=new Gn("ENVIRONMENT_INITIALIZER"),Rf=new Gn("INJECTOR",-1),Ff=new Gn("INJECTOR_DEF_TYPES");class U8{get(n,e=aa){if(e===aa){const i=new Error(`NullInjectorError: No provider for ${At(n)}!`);throw i.name="NullInjectorError",i}return e}}function V7(...t){return{\u0275providers:V2(0,t),\u0275fromNgModule:!0}}function V2(t,...n){const e=[],i=new Set;let r;const o=c=>{e.push(c)};return zl(n,c=>{const x=c;D4(x,o,[],i)&&(r||=[],r.push(x))}),void 0!==r&&L4(r,o),e}function L4(t,n){for(let e=0;e<t.length;e++){const{ngModule:i,providers:r}=t[e];W8(r,o=>{n(o,i)})}}function D4(t,n,e,i){if(!(t=$t(t)))return!1;let r=null,o=Gi(t);const c=!o&&Lr(t);if(o||c){if(c&&!c.standalone)return!1;r=t}else{const z=t.ngModule;if(o=Gi(z),!o)return!1;r=z}const x=i.has(r);if(c){if(x)return!1;if(i.add(r),c.dependencies){const z="function"==typeof c.dependencies?c.dependencies():c.dependencies;for(const O of z)D4(O,n,e,i)}}else{if(!o)return!1;{if(null!=o.imports&&!x){let O;i.add(r);try{zl(o.imports,J=>{D4(J,n,e,i)&&(O||=[],O.push(J))})}finally{}void 0!==O&&L4(O,n)}if(!x){const O=ms(r)||(()=>new r);n({provide:r,useFactory:O,deps:Hr},r),n({provide:Ff,useValue:r,multi:!0},r),n({provide:T4,useValue:()=>Sn(r),multi:!0},r)}const z=o.providers;if(null!=z&&!x){const O=t;W8(z,J=>{n(J,O)})}}}return r!==t&&void 0!==t.providers}function W8(t,n){for(let e of t)Cn(e)&&(e=e.\u0275providers),Array.isArray(e)?W8(e,n):n(e)}const H7=dt({provide:String,useValue:dt});function ic(t){return null!==t&&"object"==typeof t&&H7 in t}function xc(t){return"function"==typeof t}const H2=new Gn("Set Injector scope."),Vf={},vk={};let B7;function Hf(){return void 0===B7&&(B7=new U8),B7}class q2{}class Bf extends q2{get destroyed(){return this._destroyed}constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,U7(n,c=>this.processProvider(c)),this.records.set(Rf,k6(void 0,this)),r.has("environment")&&this.records.set(q2,k6(void 0,this));const o=this.records.get(H2);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ff.multi,Hr,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of n)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const e=Yr(this),i=nn(void 0);try{return n()}finally{Yr(e),nn(i)}}get(n,e=aa,i=Be.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Br))return n[Br](this);i=Sc(i);const o=Yr(this),c=nn(void 0);try{if(!(i&Be.SkipSelf)){let z=this.records.get(n);if(void 0===z){const O=function wk(t){return"function"==typeof t||"object"==typeof t&&t instanceof Gn}(n)&&Kt(n);z=O&&this.injectableDefInScope(O)?k6(j7(n),Vf):null,this.records.set(n,z)}if(null!=z)return this.hydrate(n,z)}return(i&Be.Self?Hf():this.parent).get(n,e=i&Be.Optional&&e===aa?null:e)}catch(x){if("NullInjectorError"===x.name){if((x[Da]=x[Da]||[]).unshift(At(n)),o)throw x;return function sa(t,n,e,i){const r=t[Da];throw n[Io]&&r.unshift(n[Io]),t.message=function es(t,n,e,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=At(n);if(Array.isArray(n))r=n.map(At).join(" -> ");else if("object"==typeof n){let o=[];for(let c in n)if(n.hasOwnProperty(c)){let x=n[c];o.push(c+":"+("string"==typeof x?JSON.stringify(x):At(x)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(Zs,"\n  ")}`}("\n"+t.message,r,e,i),t.ngTokenPath=r,t[Da]=null,t}(x,n,"R3InjectorError",this.source)}throw x}finally{nn(c),Yr(o)}}resolveInjectorInitializers(){const n=Yr(this),e=nn(void 0);try{const r=this.get(T4.multi,Hr,Be.Self);for(const o of r)o()}finally{Yr(n),nn(e)}}toString(){const n=[],e=this.records;for(const i of e.keys())n.push(At(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new jt(205,!1)}processProvider(n){let e=xc(n=$t(n))?n:$t(n&&n.provide);const i=function _k(t){return ic(t)?k6(void 0,t.useValue):k6(Xb(t),Vf)}(n);if(xc(n)||!0!==n.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=k6(void 0,Vf,!0),r.factory=()=>Vc(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e){return e.value===Vf&&(e.value=vk,e.value=e.factory()),"object"==typeof e.value&&e.value&&function xk(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=$t(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){const e=this._onDestroyHooks.indexOf(n);-1!==e&&this._onDestroyHooks.splice(e,1)}}function j7(t){const n=Kt(t),e=null!==n?n.factory:ms(t);if(null!==e)return e;if(t instanceof Gn)throw new jt(204,!1);if(t instanceof Function)return function yk(t){const n=t.length;if(n>0)throw p4(n,"?"),new jt(204,!1);const e=function P1(t){return t&&(t[La]||t[Ui])||null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new jt(204,!1)}function Xb(t,n,e){let i;if(xc(t)){const r=$t(t);return ms(r)||j7(r)}if(ic(t))i=()=>$t(t.useValue);else if(function Jl(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Vc(t.deps||[]));else if(function s2(t){return!(!t||!t.useExisting)}(t))i=()=>Sn($t(t.useExisting));else{const r=$t(t&&(t.useClass||t.provide));if(!function bk(t){return!!t.deps}(t))return ms(r)||j7(r);i=()=>new r(...Vc(t.deps))}return i}function k6(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function U7(t,n){for(const e of t)Array.isArray(e)?U7(e,n):e&&Cn(e)?U7(e.\u0275providers,n):n(e)}const jf=new Gn("AppId",{providedIn:"root",factory:()=>Ck}),Ck="ng",Zb=new Gn("Platform Initializer"),Eu=new Gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),B2=new Gn("AnimationModuleType"),G7=new Gn("CSP nonce",{providedIn:"root",factory:()=>et().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let $b=(t,n,e)=>null;function Q7(t,n,e=!1){return $b(t,n,e)}class Dk{}class Qb{}class kk{resolveComponentFactory(n){throw function Ok(t){const n=Error(`No component factory found for ${At(t)}.`);return n.ngComponent=t,n}(n)}}let F6=(()=>{class t{static#e=this.NULL=new kk}return t})();function Nk(){return V6(uc(),Jn())}function V6(t,n){return new zr(ls(t,n))}let zr=(()=>{class t{constructor(e){this.nativeElement=e}static#e=this.__NG_ELEMENT_ID__=Nk}return t})();function Rk(t){return t instanceof zr?t.nativeElement:t}class Z8{}let pl=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Fk(){const t=Jn(),e=Bs(uc().index,t);return(Ta(e)?e:t)[qi]}()}return t})(),Vk=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>null})}return t})();class O4{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Hk=new O4("16.2.4"),t9={};function ix(t,n=null,e=null,i){const r=rx(t,n,e,i);return r.resolveInjectorInitializers(),r}function rx(t,n=null,e=null,i,r=new Set){const o=[e||Hr,V7(t)];return i=i||("object"==typeof t?void 0:At(t)),new Bf(o,n||Hf(),i||null,r)}let hc=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=aa;static#t=this.NULL=new U8;static create(e,i){if(Array.isArray(e))return ix({name:""},i,e,"");{const r=e.name??"";return ix({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Ot({token:t,providedIn:"any",factory:()=>Sn(Rf)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();function r9(t){return n=>{setTimeout(t,void 0,n)}}const Cr=class Xk extends ne{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,i){let r=n,o=e||(()=>null),c=i;if(n&&"object"==typeof n){const z=n;r=z.next?.bind(z),o=z.error?.bind(z),c=z.complete?.bind(z)}this.__isAsync&&(o=r9(o),r&&(r=r9(r)),c&&(c=r9(c)));const x=super.subscribe({next:r,error:o,complete:c});return n instanceof _&&n.add(x),x}};function ox(...t){}class Sr{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cr(!1),this.onMicrotaskEmpty=new Cr(!1),this.onStable=new Cr(!1),this.onError=new Cr(!1),typeof Zone>"u")throw new jt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&e,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Zk(){const t="function"==typeof ri.requestAnimationFrame;let n=ri[t?"requestAnimationFrame":"setTimeout"],e=ri[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&e){const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Kk(t){const n=()=>{!function qk(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ri,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,a9(t),t.isCheckStableRunning=!0,o9(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),a9(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,i,r,o,c,x)=>{if(function Jk(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(x))return e.invokeTask(r,o,c,x);try{return ax(t),e.invokeTask(r,o,c,x)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&n(),sx(t)}},onInvoke:(e,i,r,o,c,x,z)=>{try{return ax(t),e.invoke(r,o,c,x,z)}finally{t.shouldCoalesceRunChangeDetection&&n(),sx(t)}},onHasTask:(e,i,r,o)=>{e.hasTask(r,o),i===r&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,a9(t),o9(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,i,r,o)=>(e.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sr.isInAngularZone())throw new jt(909,!1)}static assertNotInAngularZone(){if(Sr.isInAngularZone())throw new jt(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){const o=this._inner,c=o.scheduleEventTask("NgZoneEvent: "+r,n,$k,ox,ox);try{return o.runTask(c,e,i)}finally{o.cancelTask(c)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}}const $k={};function o9(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function a9(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ax(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sx(t){t._nesting--,o9(t)}class Qk{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cr,this.onMicrotaskEmpty=new Cr,this.onStable=new Cr,this.onError=new Cr}run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}}const cx=new Gn("",{providedIn:"root",factory:lx});function lx(){const t=li(Sr);let n=!0;return un(new $(r=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(n),r.complete()})}),new $(r=>{let o;t.runOutsideAngular(()=>{o=t.onStable.subscribe(()=>{Sr.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,r.next(!0))})})});const c=t.onUnstable.subscribe(()=>{Sr.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),c.unsubscribe()}}).pipe(Zn()))}function z0(t){return t instanceof Function?t():t}let s9=(()=>{class t{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new jt(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const e of this.callbacks)e.invoke()}finally{this.runningCallbacks=!1;for(const e of this.deferredCallbacks)this.callbacks.add(e);this.deferredCallbacks.clear()}}register(e){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(e)}unregister(e){this.callbacks.delete(e),this.deferredCallbacks.delete(e)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new t})}return t})();function $8(t){for(;t;){t[ur]|=64;const n=bu(t);if(W1(t)&&!n)return t;t=n}return null}function c9(t){return t.ngOriginalError}class P0{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&c9(n);for(;e&&c9(e);)e=c9(e);return e||null}}const px=new Gn("",{providedIn:"root",factory:()=>!1});let $f=null;function yx(t,n){return t[n]??xx()}function _x(t,n){const e=xx();e.producerNode?.length&&(t[n]=$f,e.lView=t,$f=bx())}const lN={...hn,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{$8(t.lView)},lView:null};function bx(){return Object.create(lN)}function xx(){return $f??=bx(),$f}const oo={};function tn(t){wx(no(),Jn(),q1()+t,!1)}function wx(t,n,e,i){if(!i)if(3==(3&n[ur])){const o=t.preOrderCheckHooks;null!==o&&Xl(n,o,e)}else{const o=t.preOrderHooks;null!==o&&m6(n,o,0,e)}K1(e)}function Et(t,n=Be.Default){const e=Jn();return null===e?Sn(t,n):qh(uc(),e,$t(t),n)}function j6(){throw new Error("invalid")}function qf(t,n,e,i,r,o,c,x,z,O,J){const le=n.blueprint.slice();return le[la]=r,le[ur]=140|i,(null!==O||t&&2048&t[ur])&&(le[ur]|=2048),k2(le),le[ho]=le[Ia]=t,le[pa]=e,le[h1]=c||t&&t[h1],le[qi]=x||t&&t[qi],le[y1]=z||t&&t[y1]||null,le[po]=o,le[ma]=function xf(){return P6++}(),le[ui]=J,le[Ea]=O,le[Gr]=2==n.type?t[Gr]:le,le}function U6(t,n,e,i,r){let o=t.data[n];if(null===o)o=function l9(t,n,e,i,r){const o=Oh(),c=o4(),z=t.data[n]=function vN(t,n,e,i,r,o){let c=n?n.injectorIndex:-1,x=0;return Jc()&&(x|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:c,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:x,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,c?o:o&&o.parent,e,n,i,r);return null===t.firstChild&&(t.firstChild=z),null!==o&&(c?null==o.child&&null!==z.parent&&(o.child=z):null===o.next&&(o.next=z,z.prev=o)),z}(t,n,e,i,r),function kh(){return er.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=i,o.attrs=r;const c=function iu(){const t=er.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();o.injectorIndex=null===c?-1:c.injectorIndex}return sl(o,!0),o}function q8(t,n,e,i){if(0===e)return-1;const r=n.length;for(let o=0;o<e;o++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function Cx(t,n,e,i,r){const o=yx(n,lc),c=q1(),x=2&i;try{K1(-1),x&&n.length>Ar&&wx(t,n,Ar,!1),ha(x?2:0,r);const O=x?o:null,J=Tn(O);try{null!==O&&(O.dirty=!1),e(i,r)}finally{Un(O,J)}}finally{x&&null===n[lc]&&_x(n,lc),K1(c),ha(x?3:1,r)}}function u9(t,n,e){if(Va(n)){const i=Vt(null);try{const o=n.directiveEnd;for(let c=n.directiveStart;c<o;c++){const x=t.data[c];x.contentQueries&&x.contentQueries(1,e[c],c)}}finally{Vt(i)}}}function d9(t,n,e){n4()&&(function MN(t,n,e,i){const r=e.directiveStart,o=e.directiveEnd;Xa(e)&&function TN(t,n,e){const i=ls(n,t),r=Mx(e);let c=16;e.signals?c=4096:e.onPush&&(c=64);const x=Kf(t,qf(t,r,null,c,i,n,null,t[h1].rendererFactory.createRenderer(i,e),null,null,null));t[n.index]=x}(n,e,t.data[r+e.componentOffset]),t.firstCreatePass||uu(e,n),t1(i,n);const c=e.initialInputs;for(let x=r;x<o;x++){const z=t.data[x],O=t2(n,t,x,e);t1(O,n),null!==c&&LN(0,x-r,O,z,0,c),Na(z)&&(Bs(e.index,n)[pa]=t2(n,t,x,e))}}(t,n,e,ls(e,n)),64==(64&e.flags)&&Px(t,n,e))}function h9(t,n,e=ls){const i=n.localNames;if(null!==i){let r=n.index+1;for(let o=0;o<i.length;o+=2){const c=i[o+1],x=-1===c?e(n,t):t[c];t[r++]=x}}}function Mx(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=f9(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function f9(t,n,e,i,r,o,c,x,z,O,J){const le=Ar+i,be=le+r,Ee=function dN(t,n){const e=[];for(let i=0;i<n;i++)e.push(i<t?null:oo);return e}(le,be),ut="function"==typeof O?O():O;return Ee[Si]={type:t,blueprint:Ee,template:e,queries:null,viewQuery:x,declTNode:n,data:Ee.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:be,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof c?c():c,firstChild:null,schemas:z,consts:ut,incompleteFirstPass:!1,ssrId:J}}let Sx=t=>null;function Ex(t,n,e,i){for(let r in t)if(t.hasOwnProperty(r)){e=null===e?{}:e;const o=t[r];null===i?Ax(e,n,r,o):i.hasOwnProperty(r)&&Ax(e,n,i[r],o)}return e}function Ax(t,n,e,i){t.hasOwnProperty(e)?t[e].push(n,i):t[e]=[n,i]}function K2(t,n,e,i,r,o,c,x){const z=ls(n,e);let J,O=n.inputs;!x&&null!=O&&(J=O[i])?(y9(t,e,J,i,r),Xa(n)&&function bN(t,n){const e=Bs(n,t);16&e[ur]||(e[ur]|=64)}(e,n.index)):3&n.type&&(i=function _N(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=c?c(r,n.value||"",i):r,o.setProperty(z,i,r))}function p9(t,n,e,i){if(n4()){const r=null===i?null:{"":-1},o=function EN(t,n){const e=t.directiveRegistry;let i=null,r=null;if(e)for(let o=0;o<e.length;o++){const c=e[o];if($r(n,c.selectors,!1))if(i||(i=[]),Na(c))if(null!==c.findHostDirectiveDefs){const x=[];r=r||new Map,c.findHostDirectiveDefs(c,x,r),i.unshift(...x,c),m9(t,n,x.length)}else i.unshift(c),m9(t,n,0);else r=r||new Map,c.findHostDirectiveDefs?.(c,i,r),i.push(c)}return null===i?null:[i,r]}(t,e);let c,x;null===o?c=x=null:[c,x]=o,null!==c&&zx(t,n,e,c,r,x),r&&function AN(t,n,e){if(n){const i=t.localNames=[];for(let r=0;r<n.length;r+=2){const o=e[n[r+1]];if(null==o)throw new jt(-301,!1);i.push(n[r],o)}}}(e,i,r)}e.mergedAttrs=ns(e.mergedAttrs,e.attrs)}function zx(t,n,e,i,r,o){for(let O=0;O<i.length;O++)d4(uu(e,n),t,i[O].type);!function PN(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,i.length);for(let O=0;O<i.length;O++){const J=i[O];J.providersResolver&&J.providersResolver(J)}let c=!1,x=!1,z=q8(t,n,i.length,null);for(let O=0;O<i.length;O++){const J=i[O];e.mergedAttrs=ns(e.mergedAttrs,J.hostAttrs),IN(t,e,n,z,J),zN(z,J,r),null!==J.contentQueries&&(e.flags|=4),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(e.flags|=64);const le=J.type.prototype;!c&&(le.ngOnChanges||le.ngOnInit||le.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),c=!0),!x&&(le.ngOnChanges||le.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),x=!0),z++}!function yN(t,n,e){const r=n.directiveEnd,o=t.data,c=n.attrs,x=[];let z=null,O=null;for(let J=n.directiveStart;J<r;J++){const le=o[J],be=e?e.get(le):null,ut=be?be.outputs:null;z=Ex(le.inputs,J,z,be?be.inputs:null),O=Ex(le.outputs,J,O,ut);const mt=null===z||null===c||vr(n)?null:DN(z,J,c);x.push(mt)}null!==z&&(z.hasOwnProperty("class")&&(n.flags|=8),z.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=x,n.inputs=z,n.outputs=O}(t,e,o)}function Px(t,n,e){const i=e.directiveStart,r=e.directiveEnd,o=e.index,c=function Ic(){return er.lFrame.currentDirectiveIndex}();try{K1(o);for(let x=i;x<r;x++){const z=t.data[x],O=n[x];Yl(x),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&SN(z,O)}}finally{K1(-1),Yl(c)}}function SN(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function m9(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function zN(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;Na(n)&&(e[""]=t)}}function IN(t,n,e,i,r){t.data[i]=r;const o=r.factory||(r.factory=ms(r.type)),c=new u4(o,Na(r),Et);t.blueprint[i]=c,e[i]=c,function wN(t,n,e,i,r){const o=r.hostBindings;if(o){let c=t.hostBindingOpCodes;null===c&&(c=t.hostBindingOpCodes=[]);const x=~n.index;(function CN(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(c)!=x&&c.push(x),c.push(e,i,o)}}(t,n,i,q8(t,e,r.hostVars,oo),r)}function e0(t,n,e,i,r,o){const c=ls(t,n);!function g9(t,n,e,i,r,o,c){if(null==o)t.removeAttribute(n,r,e);else{const x=null==c?Ke(o):c(o,i||"",r);t.setAttribute(n,r,x,e)}}(n[qi],c,o,t.value,e,i,r)}function LN(t,n,e,i,r,o){const c=o[n];if(null!==c)for(let x=0;x<c.length;)Ix(i,e,c[x++],c[x++],c[x++])}function Ix(t,n,e,i,r){const o=Vt(null);try{const c=t.inputTransforms;null!==c&&c.hasOwnProperty(i)&&(r=c[i].call(n,r)),null!==t.setInput?t.setInput(n,r,e,i):n[i]=r}finally{Vt(o)}}function DN(t,n,e){let i=null,r=0;for(;r<e.length;){const o=e[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===i&&(i=[]);const c=t[o];for(let x=0;x<c.length;x+=2)if(c[x]===n){i.push(o,c[x+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function Tx(t,n,e,i){return[t,!0,!1,n,null,0,i,e,null,null,null]}function Lx(t,n){const e=t.contentQueries;if(null!==e)for(let i=0;i<e.length;i+=2){const o=e[i+1];if(-1!==o){const c=t.data[o];m0(e[i]),c.contentQueries(2,n[o],o)}}}function Kf(t,n){return t[vo]?t[ka][fo]=n:t[vo]=n,t[ka]=n,n}function v9(t,n,e){m0(0);const i=Vt(null);try{n(t,e)}finally{Vt(i)}}function Dx(t){return t[Fs]||(t[Fs]=[])}function Ox(t){return t.cleanup||(t.cleanup=[])}function Nx(t,n){const e=t[y1],i=e?e.get(P0,null):null;i&&i.handleError(n)}function y9(t,n,e,i,r){for(let o=0;o<e.length;){const c=e[o++],x=e[o++];Ix(t.data[c],n[c],i,x,r)}}function I0(t,n,e){const i=va(n,t);!function z8(t,n,e){t.setValue(n,e)}(t[qi],i,e)}function ON(t,n){const e=Bs(n,t),i=e[Si];!function kN(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}(i,e);const r=e[la];null!==r&&null===e[ui]&&(e[ui]=Q7(r,e[y1])),_9(i,e,e[pa])}function _9(t,n,e){Q3(n);try{const i=t.viewQuery;null!==i&&v9(1,i,e);const r=t.template;null!==r&&Cx(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Lx(t,n),t.staticViewQueries&&v9(2,t.viewQuery,e);const o=t.components;null!==o&&function NN(t,n){for(let e=0;e<n.length;e++)ON(t,n[e])}(n,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[ur]&=-5,c4()}}let Rx=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(e,i,r){const o=typeof Zone>"u"?null:Zone.current,c=function zn(t,n,e){const i=Object.create(fn);e&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=n;const r=c=>{i.cleanupFn=c};return i.ref={notify:()=>An(i),run:()=>{if(i.dirty=!1,i.hasRun&&!a(i))return;i.hasRun=!0;const c=Tn(i);try{i.cleanupFn(),i.cleanupFn=Xt,i.fn(r)}finally{Un(i,c)}},cleanup:()=>i.cleanupFn()},i.ref}(e,O=>{this.all.has(O)&&this.queue.set(O,o)},r);let x;this.all.add(c),c.notify();const z=()=>{c.cleanup(),x?.(),this.all.delete(c),this.queue.delete(c)};return x=i?.onDestroy(z),{destroy:z}}flush(){if(0!==this.queue.size)for(const[e,i]of this.queue)this.queue.delete(e),i?i.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new t})}return t})();function Qf(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,o=0;if(null!==n)for(let c=0;c<n.length;c++){const x=n[c];"number"==typeof x?o=x:1==o?r=Wt(r,x):2==o&&(i=Wt(i,x+": "+n[++c]+";"))}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function K8(t,n,e,i,r=!1){for(;null!==e;){const o=n[e.index];null!==o&&i.push(ir(o)),Ya(o)&&Fx(o,i);const c=e.type;if(8&c)K8(t,n,e.child,i);else if(32&c){const x=T6(e,n);let z;for(;z=x();)i.push(z)}else if(16&c){const x=R8(n,e);if(Array.isArray(x))i.push(...x);else{const z=bu(n[Gr]);K8(z[Si],z,x,i,!0)}}e=r?e.projectionNext:e.next}return i}function Fx(t,n){for(let e=ga;e<t.length;e++){const i=t[e],r=i[Si].firstChild;null!==r&&K8(i[Si],i,r,n)}t[_1]!==t[la]&&n.push(t[_1])}function Jf(t,n,e,i=!0){const r=n[h1],o=r.rendererFactory,c=r.afterRenderEventManager;o.begin?.(),c?.begin();try{Vx(t,n,t.template,e)}catch(z){throw i&&Nx(n,z),z}finally{o.end?.(),r.effectManager?.flush(),c?.end()}}function Vx(t,n,e,i){const r=n[ur];if(256!=(256&r)){n[h1].effectManager?.flush(),Q3(n);try{k2(n),function ru(t){return er.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Cx(t,n,e,2,i);const c=3==(3&r);if(c){const O=t.preOrderCheckHooks;null!==O&&Xl(n,O,null)}else{const O=t.preOrderHooks;null!==O&&m6(n,O,0,null),o8(n,0)}if(function VN(t){for(let n=E8(t);null!==n;n=Tf(n)){if(!n[So])continue;const e=n[da];for(let i=0;i<e.length;i++){Js(e[i])}}}(n),Hx(n,2),null!==t.contentQueries&&Lx(t,n),c){const O=t.contentCheckHooks;null!==O&&Xl(n,O)}else{const O=t.contentHooks;null!==O&&m6(n,O,1),o8(n,1)}!function uN(t,n){const e=t.hostBindingOpCodes;if(null===e)return;const i=yx(n,f1);try{for(let r=0;r<e.length;r++){const o=e[r];if(o<0)K1(~o);else{const c=o,x=e[++r],z=e[++r];a7(x,c),i.dirty=!1;const O=Tn(i);try{z(2,n[c])}finally{Un(i,O)}}}}finally{null===n[f1]&&_x(n,f1),K1(-1)}}(t,n);const x=t.components;null!==x&&jx(n,x,0);const z=t.viewQuery;if(null!==z&&v9(2,z,i),c){const O=t.viewCheckHooks;null!==O&&Xl(n,O)}else{const O=t.viewHooks;null!==O&&m6(n,O,2),o8(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[ur]&=-73,p1(n)}finally{c4()}}}function Hx(t,n){for(let e=E8(t);null!==e;e=Tf(e))for(let i=ga;i<e.length;i++)Bx(e[i],n)}function HN(t,n,e){Bx(Bs(n,t),e)}function Bx(t,n){if(!function O2(t){return 128==(128&t[ur])}(t))return;const e=t[Si],i=t[ur];if(80&i&&0===n||1024&i||2===n)Vx(e,t,e.template,t[pa]);else if(t[cc]>0){Hx(t,1);const r=e.components;null!==r&&jx(t,r,1)}}function jx(t,n,e){for(let i=0;i<n.length;i++)HN(t,n[i],e)}class Q8{get rootNodes(){const n=this._lView,e=n[Si];return K8(e,n,e.firstChild,[])}constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pa]}set context(n){this._lView[pa]=n}get destroyed(){return 256==(256&this._lView[ur])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[ho];if(Ya(n)){const e=n[8],i=e?e.indexOf(this):-1;i>-1&&(M0(n,i),f4(e,i))}this._attachedToViewContainer=!1}wu(this._lView[Si],this._lView)}onDestroy(n){!function Cl(t,n){if(256==(256&t[ur]))throw new jt(911,!1);null===t[ua]&&(t[ua]=[]),t[ua].push(n)}(this._lView,n)}markForCheck(){$8(this._cdRefInjectingView||this._lView)}detach(){this._lView[ur]&=-129}reattach(){this._lView[ur]|=128}detectChanges(){Jf(this._lView[Si],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new jt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lf(t,n){Ql(t,n,n[qi],2,null,null)}(this._lView[Si],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new jt(902,!1);this._appRef=n}}class BN extends Q8{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Jf(n[Si],n,n[pa],!1)}checkNoChanges(){}get context(){return null}}class Ux extends F6{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=Lr(n);return new J8(e,this.ngModule)}}function Gx(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class UN{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=Sc(i);const r=this.injector.get(n,t9,i);return r!==t9||e===t9?r:this.parentInjector.get(n,e,i)}}class J8 extends Qb{get inputs(){const n=this.componentDef,e=n.inputTransforms,i=Gx(n.inputs);if(null!==e)for(const r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return Gx(this.componentDef.outputs)}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function Hc(t){return t.map(Ga).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}create(n,e,i,r){let o=(r=r||this.ngModule)instanceof q2?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const c=o?new UN(n,o):n,x=c.get(Z8,null);if(null===x)throw new jt(407,!1);const le={rendererFactory:x,sanitizer:c.get(Vk,null),effectManager:c.get(Rx,null),afterRenderEventManager:c.get(s9,null)},be=x.createRenderer(null,this.componentDef),Ee=this.componentDef.selectors[0][0]||"div",ut=i?function hN(t,n,e,i){const o=i.get(px,!1)||e===Xr.ShadowDom,c=t.selectRootElement(n,o);return function fN(t){Sx(t)}(c),c}(be,i,this.componentDef.encapsulation,c):S4(be,Ee,function jN(t){const n=t.toLowerCase();return"svg"===n?Kr:"math"===n?"math":null}(Ee)),Ht=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let vt=null;null!==ut&&(vt=Q7(ut,c,!0));const Zt=f9(0,null,null,1,0,null,null,null,null,null,null),gn=qf(null,Zt,null,Ht,null,null,le,be,c,null,vt);let bn,ni;Q3(gn);try{const $n=this.componentDef;let oi,dn=null;$n.findHostDirectiveDefs?(oi=[],dn=new Map,$n.findHostDirectiveDefs($n,oi,dn),oi.push($n)):oi=[$n];const Fa=function WN(t,n){const e=t[Si],i=Ar;return t[i]=n,U6(e,i,2,"#host",null)}(gn,ut),Ka=function YN(t,n,e,i,r,o,c){const x=r[Si];!function XN(t,n,e,i){for(const r of t)n.mergedAttrs=ns(n.mergedAttrs,r.hostAttrs);null!==n.mergedAttrs&&(Qf(n,n.mergedAttrs,!0),null!==e&&l(i,e,n))}(i,t,n,c);let z=null;null!==n&&(z=Q7(n,r[y1]));const O=o.rendererFactory.createRenderer(n,e);let J=16;e.signals?J=4096:e.onPush&&(J=64);const le=qf(r,Mx(e),null,J,r[t.index],t,o,O,null,null,z);return x.firstCreatePass&&m9(x,t,i.length-1),Kf(r,le),r[t.index]=le}(Fa,ut,$n,oi,gn,le,be);ni=As(Zt,Ar),ut&&function $N(t,n,e,i){if(i)I1(t,e,["ng-version",Hk.full]);else{const{attrs:r,classes:o}=function Bc(t){const n=[],e=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&n.push(o,t[++i]):8===r&&e.push(o);else{if(!za(r))break;r=o}i++}return{attrs:n,classes:e}}(n.selectors[0]);r&&I1(t,e,r),o&&o.length>0&&p(t,e,o.join(" "))}}(be,$n,ut,i),void 0!==e&&function qN(t,n,e){const i=t.projection=[];for(let r=0;r<n.length;r++){const o=e[r];i.push(null!=o?Array.from(o):null)}}(ni,this.ngContentSelectors,e),bn=function ZN(t,n,e,i,r,o){const c=uc(),x=r[Si],z=ls(c,r);zx(x,r,c,e,null,i);for(let J=0;J<e.length;J++)t1(t2(r,x,c.directiveStart+J,c),r);Px(x,r,c),z&&t1(z,r);const O=t2(r,x,c.directiveStart+c.componentOffset,c);if(t[pa]=r[pa]=O,null!==o)for(const J of o)J(O,n);return u9(x,c,t),O}(Ka,$n,oi,dn,gn,[KN]),_9(Zt,gn,null)}finally{c4()}return new GN(this.componentType,bn,V6(ni,gn),gn,ni)}}class GN extends Dk{constructor(n,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new BN(r),this.componentType=n}setInput(n,e){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;const o=this._rootLView;y9(o[Si],o,r,n,e),this.previousInputValues.set(n,e),$8(Bs(this._tNode.index,o))}}get injector(){return new Gc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function KN(){const t=uc();cl(Jn()[Si],t)}function Qi(t){let n=function Wx(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const i=[t];for(;n;){let r;if(Na(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new jt(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);const c=t;c.inputs=e5(t.inputs),c.inputTransforms=e5(t.inputTransforms),c.declaredInputs=e5(t.declaredInputs),c.outputs=e5(t.outputs);const x=r.hostBindings;x&&tR(t,x);const z=r.viewQuery,O=r.contentQueries;if(z&&JN(t,z),O&&eR(t,O),Pt(t.inputs,r.inputs),Pt(t.declaredInputs,r.declaredInputs),Pt(t.outputs,r.outputs),null!==r.inputTransforms&&(null===c.inputTransforms&&(c.inputTransforms={}),Pt(c.inputTransforms,r.inputTransforms)),Na(r)&&r.data.animation){const J=t.data;J.animation=(J.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let c=0;c<o.length;c++){const x=o[c];x&&x.ngInherit&&x(t),x===Qi&&(e=!1)}}n=Object.getPrototypeOf(n)}!function QN(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=ns(r.hostAttrs,e=ns(e,r.hostAttrs))}}(i)}function e5(t){return t===zi?{}:t===Hr?[]:t}function JN(t,n){const e=t.viewQuery;t.viewQuery=e?(i,r)=>{n(i,r),e(i,r)}:n}function eR(t,n){const e=t.contentQueries;t.contentQueries=e?(i,r,o)=>{n(i,r,o),e(i,r,o)}:n}function tR(t,n){const e=t.hostBindings;t.hostBindings=e?(i,r)=>{n(i,r),e(i,r)}:n}function t5(t){return!!b9(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function b9(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function t0(t,n,e){return t[n]=e}function c2(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function k4(t,n,e,i){const r=c2(t,n,e);return c2(t,n+1,i)||r}function zo(t,n,e,i){const r=Jn();return c2(r,El(),n)&&(no(),e0(js(),r,t,n,e,i)),zo}function W6(t,n,e,i){return c2(t,El(),e)?n+Ke(e)+i:oo}function Y6(t,n,e,i,r,o){const x=k4(t,function Sl(){return er.lFrame.bindingIndex}(),e,r);return N2(2),x?n+Ke(e)+i+Ke(r)+o:oo}function ei(t,n,e,i,r,o,c,x){const z=Jn(),O=no(),J=t+Ar,le=O.firstCreatePass?function ER(t,n,e,i,r,o,c,x,z){const O=n.consts,J=U6(n,t,4,c||null,bc(O,x));p9(n,e,J,bc(O,z)),cl(n,J);const le=J.tView=f9(2,J,i,r,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,O,null);return null!==n.queries&&(n.queries.template(n,J),le.queries=n.queries.embeddedTView(J)),J}(J,O,z,n,e,i,r,o,c):O.data[J];sl(le,!1);const be=cw(O,z,le,t);ou()&&Mu(O,z,be,le),t1(be,z),Kf(z,z[J]=Tx(be,z,be,le)),Eo(le)&&d9(O,z,le),null!=c&&h9(z,le,x)}let cw=function lw(t,n,e,i){return X2(!0),n[qi].createComment("")};function Ts(t){return x1(function Z3(){return er.lFrame.contextLView}(),Ar+t)}function _n(t,n,e){const i=Jn();return c2(i,El(),n)&&K2(no(),js(),i,t,n,i[qi],e,!1),_n}function E9(t,n,e,i,r){const c=r?"class":"style";y9(t,e,n.inputs[c],c,i)}function mn(t,n,e,i){const r=Jn(),o=no(),c=Ar+t,x=r[qi],z=o.firstCreatePass?function IR(t,n,e,i,r,o){const c=n.consts,z=U6(n,t,2,i,bc(c,r));return p9(n,e,z,bc(c,o)),null!==z.attrs&&Qf(z,z.attrs,!1),null!==z.mergedAttrs&&Qf(z,z.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,z),z}(c,o,r,n,e,i):o.data[c],O=uw(o,r,z,x,n,t);r[c]=O;const J=Eo(z);return sl(z,!0),l(x,O,z),32!=(32&z.flags)&&ou()&&Mu(o,r,O,z),0===function Y2(){return er.lFrame.elementDepthCount}()&&t1(O,r),function p2(){er.lFrame.elementDepthCount++}(),J&&(d9(o,r,z),u9(o,z,r)),null!==i&&h9(r,z),mn}function wn(){let t=uc();o4()?X3():(t=t.parent,sl(t,!1));const n=t;(function Y3(t){return er.skipHydrationRootTNode===t})(n)&&function r4(){er.skipHydrationRootTNode=null}(),function al(){er.lFrame.elementDepthCount--}();const e=no();return e.firstCreatePass&&(cl(e,t),Va(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function e1(t){return 0!=(8&t.flags)}(n)&&E9(e,n,Jn(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function g6(t){return 0!=(16&t.flags)}(n)&&E9(e,n,Jn(),n.stylesWithoutHost,!1),wn}function Ni(t,n,e,i){return mn(t,n,e,i),wn(),Ni}let uw=(t,n,e,i,r,o)=>(X2(!0),S4(i,r,function Vh(){return er.lFrame.currentNamespace}()));function l2(t,n,e){const i=Jn(),r=no(),o=t+Ar,c=r.firstCreatePass?function DR(t,n,e,i,r){const o=n.consts,c=bc(o,i),x=U6(n,t,8,"ng-container",c);return null!==c&&Qf(x,c,!0),p9(n,e,x,bc(o,r)),null!==n.queries&&n.queries.elementStart(n,x),x}(o,r,i,n,e):r.data[o];sl(c,!0);const x=dw(r,i,c,t);return i[o]=x,ou()&&Mu(r,i,x,c),t1(x,i),Eo(c)&&(d9(r,i,c),u9(r,c,i)),null!=e&&h9(i,c),l2}function u2(){let t=uc();const n=no();return o4()?X3():(t=t.parent,sl(t,!1)),n.firstCreatePass&&(cl(n,t),Va(t)&&n.queries.elementEnd(t)),u2}function C2(t,n,e){return l2(t,n,e),u2(),C2}let dw=(t,n,e,i)=>(X2(!0),L6(n[qi],""));function o1(){return Jn()}function rd(t){return!!t&&"function"==typeof t.then}function hw(t){return!!t&&"function"==typeof t.subscribe}function Ki(t,n,e,i){const r=Jn(),o=no(),c=uc();return function pw(t,n,e,i,r,o,c){const x=Eo(i),O=t.firstCreatePass&&Ox(t),J=n[pa],le=Dx(n);let be=!0;if(3&i.type||c){const mt=ls(i,n),Nt=c?c(mt):mt,Ht=le.length,vt=c?gn=>c(ir(gn[i.index])):i.index;let Zt=null;if(!c&&x&&(Zt=function NR(t,n,e,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const c=r[o];if(c===e&&r[o+1]===i){const x=n[Fs],z=r[o+2];return x.length>z?x[z]:null}"string"==typeof c&&(o+=2)}return null}(t,n,r,i.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=o,Zt.__ngLastListenerFn__=o,be=!1;else{o=gw(i,n,J,o,!1);const gn=e.listen(Nt,r,o);le.push(o,gn),O&&O.push(r,vt,Ht,Ht+1)}}else o=gw(i,n,J,o,!1);const Ee=i.outputs;let ut;if(be&&null!==Ee&&(ut=Ee[r])){const mt=ut.length;if(mt)for(let Nt=0;Nt<mt;Nt+=2){const bn=n[ut[Nt]][ut[Nt+1]].subscribe(o),ni=le.length;le.push(o,bn),O&&O.push(r,i.index,ni,-(ni+1))}}}(o,r,r[qi],c,t,n,i),Ki}function mw(t,n,e,i){try{return ha(6,n,e),!1!==e(i)}catch(r){return Nx(t,r),!1}finally{ha(7,n,e)}}function gw(t,n,e,i,r){return function o(c){if(c===Function)return i;$8(t.componentOffset>-1?Bs(t.index,n):n);let z=mw(n,e,i,c),O=o.__ngNextListenerFn__;for(;O;)z=mw(n,e,O,c)&&z,O=O.__ngNextListenerFn__;return r&&!1===z&&c.preventDefault(),z}}function di(t=1){return function Rh(t){return(er.lFrame.contextLView=function n8(t,n){for(;t>0;)n=n[Ia],t--;return n}(t,er.lFrame.contextLView))[pa]}(t)}function RR(t,n){let e=null;const i=function Ir(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(!(1&e))return n[e+1]}return null}(t);for(let r=0;r<n.length;r++){const o=n[r];if("*"!==o){if(null===i?$r(t,o,!0):Rs(i,o))return r}else e=r}return e}function Lc(t){const n=Jn()[Gr][po];if(!n.projection){const i=n.projection=p4(t?t.length:1,null),r=i.slice();let o=n.child;for(;null!==o;){const c=t?RR(o,t):0;null!==c&&(r[c]?r[c].projectionNext=o:i[c]=o,r[c]=o),o=o.next}}}function Oo(t,n=0,e){const i=Jn(),r=no(),o=U6(r,Ar+t,16,null,e||null);null===o.projection&&(o.projection=n),X3(),(!i[ui]||Jc())&&32!=(32&o.flags)&&function z4(t,n,e){O6(n[qi],0,n,e,I8(t,e,n),kf(e.parent||n[po],e,n))}(r,i,o)}function A9(t,n,e){return z9(t,"",n,"",e),A9}function z9(t,n,e,i,r){const o=Jn(),c=W6(o,n,e,i);return c!==oo&&K2(no(),js(),o,t,c,o[qi],r,!1),z9}function s5(t,n){return t<<17|n<<2}function Au(t){return t>>17&32767}function P9(t){return 2|t}function N4(t){return(131068&t)>>2}function I9(t,n){return-131069&t|n<<2}function T9(t){return 1|t}function Sw(t,n,e,i,r){const o=t[e+1],c=null===n;let x=i?Au(o):N4(o),z=!1;for(;0!==x&&(!1===z||c);){const J=t[x+1];UR(t[x],n)&&(z=!0,t[x+1]=i?T9(J):P9(J)),x=i?Au(J):N4(J)}z&&(t[e+1]=i?P9(o):T9(o))}function UR(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Ms(t,n)>=0}const wc={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ew(t){return t.substring(wc.key,wc.keyEnd)}function Aw(t,n){const e=wc.textEnd;return e===n?-1:(n=wc.keyEnd=function XR(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,wc.key=n,e),J6(t,n,e))}function J6(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function T0(t,n,e){return Dl(t,n,e,!1),T0}function go(t,n){return Dl(t,n,null,!0),go}function L9(t){!function Ol(t,n,e,i){const r=no(),o=N2(2);r.firstUpdatePass&&Dw(r,null,o,i);const c=Jn();if(e!==oo&&c2(c,o,e)){const x=r.data[q1()];if(Rw(x,i)&&!Lw(r,o)){let z=i?x.classesWithoutHost:x.stylesWithoutHost;null!==z&&(e=Wt(z,e||"")),E9(r,x,c,e,i)}else!function iF(t,n,e,i,r,o,c,x){r===oo&&(r=Hr);let z=0,O=0,J=0<r.length?r[0]:null,le=0<o.length?o[0]:null;for(;null!==J||null!==le;){const be=z<r.length?r[z+1]:void 0,Ee=O<o.length?o[O+1]:void 0;let mt,ut=null;J===le?(z+=2,O+=2,be!==Ee&&(ut=le,mt=Ee)):null===le||null!==J&&J<le?(z+=2,ut=J):(O+=2,ut=le,mt=Ee),null!==ut&&kw(t,n,e,i,ut,mt,c,x),J=z<r.length?r[z]:null,le=O<o.length?o[O]:null}}(r,x,c,c[qi],c[o+1],c[o+1]=function tF(t,n,e){if(null==e||""===e)return Hr;const i=[],r=pi(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&n(i,r);return i}(t,n,e),i,o)}}(nF,r0,t,!0)}function r0(t,n){for(let e=function WR(t){return function Pw(t){wc.key=0,wc.keyEnd=0,wc.value=0,wc.valueEnd=0,wc.textEnd=t.length}(t),Aw(t,J6(t,0,wc.textEnd))}(n);e>=0;e=Aw(n,e))m2(t,Ew(n),!0)}function Dl(t,n,e,i){const r=Jn(),o=no(),c=N2(2);o.firstUpdatePass&&Dw(o,t,c,i),n!==oo&&c2(r,c,n)&&kw(o,o.data[q1()],r,r[qi],t,r[c+1]=function rF(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=At(pi(t)))),t}(n,e),i,c)}function Lw(t,n){return n>=t.expandoStartIndex}function Dw(t,n,e,i){const r=t.data;if(null===r[e+1]){const o=r[q1()],c=Lw(t,e);Rw(o,i)&&null===n&&!c&&(n=!1),n=function KR(t,n,e,i){const r=function a4(t){const n=er.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let o=i?n.residualClasses:n.residualStyles;if(null===r)0===(i?n.classBindings:n.styleBindings)&&(e=od(e=D9(null,t,n,e,i),n.attrs,i),o=null);else{const c=n.directiveStylingLast;if(-1===c||t[c]!==r)if(e=D9(r,t,n,e,i),null===o){let z=function QR(t,n,e){const i=e?n.classBindings:n.styleBindings;if(0!==N4(i))return t[Au(i)]}(t,n,i);void 0!==z&&Array.isArray(z)&&(z=D9(null,t,n,z[1],i),z=od(z,n.attrs,i),function JR(t,n,e,i){t[Au(e?n.classBindings:n.styleBindings)]=i}(t,n,i,z))}else o=function eF(t,n,e){let i;const r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++)i=od(i,t[o].hostAttrs,e);return od(i,n.attrs,e)}(t,n,i)}return void 0!==o&&(i?n.residualClasses=o:n.residualStyles=o),e}(r,o,n,i),function BR(t,n,e,i,r,o){let c=o?n.classBindings:n.styleBindings,x=Au(c),z=N4(c);t[i]=e;let J,O=!1;if(Array.isArray(e)?(J=e[1],(null===J||Ms(e,J)>0)&&(O=!0)):J=e,r)if(0!==z){const be=Au(t[x+1]);t[i+1]=s5(be,x),0!==be&&(t[be+1]=I9(t[be+1],i)),t[x+1]=function VR(t,n){return 131071&t|n<<17}(t[x+1],i)}else t[i+1]=s5(x,0),0!==x&&(t[x+1]=I9(t[x+1],i)),x=i;else t[i+1]=s5(z,0),0===x?x=i:t[z+1]=I9(t[z+1],i),z=i;O&&(t[i+1]=P9(t[i+1])),Sw(t,J,i,!0),Sw(t,J,i,!1),function jR(t,n,e,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof n&&Ms(o,n)>=0&&(e[i+1]=T9(e[i+1]))}(n,J,t,i,o),c=s5(x,z),o?n.classBindings=c:n.styleBindings=c}(r,o,n,e,c,i)}}function D9(t,n,e,i,r){let o=null;const c=e.directiveEnd;let x=e.directiveStylingLast;for(-1===x?x=e.directiveStart:x++;x<c&&(o=n[x],i=od(i,o.hostAttrs,r),o!==t);)x++;return null!==t&&(e.directiveStylingLast=x),i}function od(t,n,e){const i=e?1:2;let r=-1;if(null!==n)for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?r=c:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),m2(t,c,!!e||n[++o]))}return void 0===t?null:t}function nF(t,n,e){const i=String(n);""!==i&&!i.includes(" ")&&m2(t,i,e)}function kw(t,n,e,i,r,o,c,x){if(!(3&n.type))return;const z=t.data,O=z[x+1],J=function HR(t){return 1==(1&t)}(O)?Nw(z,n,e,r,N4(O),c):void 0;c5(J)||(c5(o)||function FR(t){return 2==(2&t)}(O)&&(o=Nw(z,null,e,r,x,c)),function H8(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let o=-1===i.indexOf("-")?void 0:dl.DashCase;null==r?t.removeStyle(e,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=dl.Important),t.setStyle(e,i,r,o))}}(i,c,va(q1(),e),r,o))}function Nw(t,n,e,i,r,o){const c=null===n;let x;for(;r>0;){const z=t[r],O=Array.isArray(z),J=O?z[1]:z,le=null===J;let be=e[r+1];be===oo&&(be=le?Hr:void 0);let Ee=le?_0(be,i):J===i?be:void 0;if(O&&!c5(Ee)&&(Ee=_0(z,i)),c5(Ee)&&(x=Ee,c))return x;const ut=t[r+1];r=c?Au(ut):N4(ut)}if(null!==n){let z=o?n.residualClasses:n.residualStyles;null!=z&&(x=_0(z,i))}return x}function c5(t){return void 0!==t}function Rw(t,n){return 0!=(t.flags&(n?8:16))}function Ci(t,n=""){const e=Jn(),i=no(),r=t+Ar,o=i.firstCreatePass?U6(i,r,1,n,null):i.data[r],c=Fw(i,e,o,n,t);e[r]=c,ou()&&Mu(i,e,c,o),sl(o,!1)}let Fw=(t,n,e,i,r)=>(X2(!0),function M4(t,n){return t.createText(n)}(n[qi],i));function wo(t){return Ca("",t,""),wo}function Ca(t,n,e){const i=Jn(),r=W6(i,t,n,e);return r!==oo&&I0(i,q1(),r),Ca}function Q2(t,n,e,i,r){const o=Jn(),c=Y6(o,t,n,e,i,r);return c!==oo&&I0(o,q1(),c),Q2}function kl(t,n,e){const i=Jn();return c2(i,El(),n)&&K2(no(),js(),i,t,n,i[qi],e,!0),kl}const R4=void 0;var EF=["en",[["a","p"],["AM","PM"],R4],[["AM","PM"],R4,R4],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],R4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],R4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",R4,"{1} 'at' {0}",R4],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function SF(t){const e=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===i?1:5}];let e3={};function M2(t){const n=function AF(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=iC(n);if(e)return e;const i=n.split("-")[0];if(e=iC(i),e)return e;if("en"===i)return EF;throw new jt(701,!1)}function iC(t){return t in e3||(e3[t]=ri.ng&&ri.ng.common&&ri.ng.common.locales&&ri.ng.common.locales[t]),e3[t]}var Ws=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ws||{});const t3="en-US";let rC=t3;function N9(t,n,e,i,r){if(t=$t(t),Array.isArray(t))for(let o=0;o<t.length;o++)N9(t[o],n,e,i,r);else{const o=no(),c=Jn(),x=uc();let z=xc(t)?t:$t(t.provide);const O=Xb(t),J=1048575&x.providerIndexes,le=x.directiveStart,be=x.providerIndexes>>20;if(xc(t)||!t.multi){const Ee=new u4(O,r,Et),ut=F9(z,n,r?J:J+be,le);-1===ut?(d4(uu(x,c),o,z),R9(o,t,n.length),n.push(z),x.directiveStart++,x.directiveEnd++,r&&(x.providerIndexes+=1048576),e.push(Ee),c.push(Ee)):(e[ut]=Ee,c[ut]=Ee)}else{const Ee=F9(z,n,J+be,le),ut=F9(z,n,J,J+be),Nt=ut>=0&&e[ut];if(r&&!Nt||!r&&!(Ee>=0&&e[Ee])){d4(uu(x,c),o,z);const Ht=function SV(t,n,e,i,r){const o=new u4(t,e,Et);return o.multi=[],o.index=n,o.componentProviders=0,PC(o,r,i&&!e),o}(r?MV:CV,e.length,r,i,O);!r&&Nt&&(e[ut].providerFactory=Ht),R9(o,t,n.length,0),n.push(z),x.directiveStart++,x.directiveEnd++,r&&(x.providerIndexes+=1048576),e.push(Ht),c.push(Ht)}else R9(o,t,Ee>-1?Ee:ut,PC(e[r?ut:Ee],O,!r&&i));!r&&i&&Nt&&e[ut].componentProviders++}}}function R9(t,n,e,i){const r=xc(n),o=function A0(t){return!!t.useClass}(n);if(r||o){const z=(o?$t(n.useClass):n).prototype.ngOnDestroy;if(z){const O=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){const J=O.indexOf(e);-1===J?O.push(e,[i,z]):O[J+1].push(i,z)}else O.push(e,z)}}}function PC(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function F9(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function CV(t,n,e,i){return V9(this.multi,[])}function MV(t,n,e,i){const r=this.multi;let o;if(this.providerFactory){const c=this.providerFactory.componentProviders,x=t2(e,e[Si],this.providerFactory.index,i);o=x.slice(0,c),V9(r,o);for(let z=c;z<x.length;z++)o.push(x[z])}else o=[],V9(r,o);return o}function V9(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function Fr(t,n=[]){return e=>{e.providersResolver=(i,r)=>function wV(t,n,e){const i=no();if(i.firstCreatePass){const r=Na(t);N9(e,i.data,i.blueprint,r,!0),N9(n,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,n)}}class F4{}class IC{}class H9 extends F4{constructor(n,e,i){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ux(this);const r=bo(n);this._bootstrapComponents=z0(r.bootstrap),this._r3Injector=rx(n,e,[{provide:F4,useValue:this},{provide:F6,useValue:this.componentFactoryResolver},...i],At(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class B9 extends IC{constructor(n){super(),this.moduleType=n}create(n){return new H9(this.moduleType,n,[])}}class TC extends F4{constructor(n){super(),this.componentFactoryResolver=new Ux(this),this.instance=null;const e=new Bf([...n.providers,{provide:F4,useValue:this},{provide:F6,useValue:this.componentFactoryResolver}],n.parent||Hf(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function j9(t,n,e=null){return new TC({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}let zV=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const i=V2(0,e.type),r=i.length>0?j9([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ot({token:t,providedIn:"environment",factory:()=>new t(Sn(q2))})}return t})();function LC(t){t.getStandaloneInjector=n=>n.get(zV).getOrCreateStandaloneInjector(t)}function A1(t,n,e){const i=O1()+t,r=Jn();return r[i]===oo?t0(r,i,e?n.call(e):n()):function ed(t,n){return t[n]}(r,i)}function gl(t,n,e,i){return BC(Jn(),O1(),t,n,e,i)}function f5(t,n,e,i,r){return jC(Jn(),O1(),t,n,e,i,r)}function HC(t,n,e,i,r,o,c){return function GC(t,n,e,i,r,o,c,x,z){const O=n+e;return function ml(t,n,e,i,r,o){const c=k4(t,n,e,i);return k4(t,n+2,r,o)||c}(t,O,r,o,c,x)?t0(t,O+4,z?i.call(z,r,o,c,x):i(r,o,c,x)):dd(t,O+4)}(Jn(),O1(),t,n,e,i,r,o,c)}function dd(t,n){const e=t[n];return e===oo?void 0:e}function BC(t,n,e,i,r,o){const c=n+e;return c2(t,c,r)?t0(t,c+1,o?i.call(o,r):i(r)):dd(t,c+1)}function jC(t,n,e,i,r,o,c){const x=n+e;return k4(t,x,r,o)?t0(t,x+2,c?i.call(c,r,o):i(r,o)):dd(t,x+2)}function UC(t,n,e,i,r,o,c,x){const z=n+e;return function n5(t,n,e,i,r){const o=k4(t,n,e,i);return c2(t,n+2,r)||o}(t,z,r,o,c)?t0(t,z+3,x?i.call(x,r,o,c):i(r,o,c)):dd(t,z+3)}function Ti(t,n){const e=no();let i;const r=t+Ar;e.firstCreatePass?(i=function jV(t,n){if(n)for(let e=n.length-1;e>=0;e--){const i=n[e];if(t===i.name)return i}}(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];const o=i.factory||(i.factory=ms(i.type)),x=nn(Et);try{const z=lu(!1),O=o();return lu(z),function PR(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}(e,Jn(),r,O),O}finally{nn(x)}}function Fi(t,n,e){const i=t+Ar,r=Jn(),o=x1(r,i);return hd(r,i)?BC(r,O1(),n,o.transform,e,o):o.transform(e)}function G9(t,n,e,i){const r=t+Ar,o=Jn(),c=x1(o,r);return hd(o,r)?jC(o,O1(),n,c.transform,e,i,c):c.transform(e,i)}function W9(t,n,e,i,r){const o=t+Ar,c=Jn(),x=x1(c,o);return hd(c,o)?UC(c,O1(),n,x.transform,e,i,r,x):x.transform(e,i,r)}function hd(t,n){return t[Si].data[n].pure}function WV(){return this._results[Symbol.iterator]()}class fd{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Cr)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=fd.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=WV)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const i=this;i.dirty=!1;const r=function R2(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function rf(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=n[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}(i._results,r,e))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function XV(t,n,e,i=!0){const r=n[Si];if(function Df(t,n,e,i){const r=ga+i,o=e.length;i>0&&(e[r-1][fo]=n),i<o-ga?(n[fo]=e[r],af(e,ga+i,n)):(e.push(n),n[fo]=null),n[ho]=e;const c=n[L2];null!==c&&e!==c&&function D6(t,n){const e=t[da];n[Gr]!==n[ho][ho][Gr]&&(t[So]=!0),null===e?t[da]=[n]:e.push(n)}(c,n);const x=n[Es];null!==x&&x.insertView(t),n[ur]|=128}(r,n,t,e),i){const o=E0(e,t),c=n[qi],x=E4(c,t[_1]);null!==x&&function L7(t,n,e,i,r,o){i[la]=r,i[po]=n,Ql(t,i,e,1,r,o)}(r,t[po],c,n,x,o)}}let Co=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=qV}return t})();const ZV=Co,$V=class extends ZV{constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){const r=function YV(t,n,e,i){const r=n.tView,x=qf(t,r,e,4096&t[ur]?4096:16,null,n,null,null,null,i?.injector??null,i?.hydrationInfo??null);x[L2]=t[n.index];const O=t[Es];return null!==O&&(x[Es]=O.createEmbeddedView(r)),_9(r,x,e),x}(this._declarationLView,this._declarationTContainer,n,{injector:e,hydrationInfo:i});return new Q8(r)}};function qV(){return p5(uc(),Jn())}function p5(t,n){return 4&t.type?new $V(n,t,V6(t,n)):null}let Dc=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=nH}return t})();function nH(){return QC(uc(),Jn())}const iH=Dc,qC=class extends iH{constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return V6(this._hostTNode,this._hostLView)}get injector(){return new Gc(this._hostTNode,this._hostLView)}get parentInjector(){const n=du(this._hostTNode,this._hostLView);if(su(n)){const e=cu(n,this._hostLView),i=Al(n);return new Gc(e[Si].data[i+8],e)}return new Gc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=KC(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-ga}createEmbeddedView(n,e,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const x=n.createEmbeddedViewImpl(e||{},o,null);return this.insertImpl(x,r,false),x}createComponent(n,e,i,r,o){const c=n&&!function fu(t){return"function"==typeof t}(n);let x;if(c)x=e;else{const mt=e||{};x=mt.index,i=mt.injector,r=mt.projectableNodes,o=mt.environmentInjector||mt.ngModuleRef}const z=c?n:new J8(Lr(n)),O=i||this.parentInjector;if(!o&&null==z.ngModule){const Nt=(c?O:this.parentInjector).get(q2,null);Nt&&(o=Nt)}Lr(z.componentType??{});const Ee=z.create(O,r,null,o);return this.insertImpl(Ee.hostView,x,false),Ee}insert(n,e){return this.insertImpl(n,e,!1)}insertImpl(n,e,i){const r=n._lView;if(function Wl(t){return Ya(t[ho])}(r)){const z=this.indexOf(n);if(-1!==z)this.detach(z);else{const O=r[ho],J=new qC(O,O[po],O[ho]);J.detach(J.indexOf(n))}}const c=this._adjustIndex(e),x=this._lContainer;return XV(x,r,c,!i),n.attachToViewContainerRef(),af(Y9(x),c,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=KC(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),i=M0(this._lContainer,e);i&&(f4(Y9(this._lContainer),e),wu(i[Si],i))}detach(n){const e=this._adjustIndex(n,-1),i=M0(this._lContainer,e);return i&&null!=f4(Y9(this._lContainer),e)?new Q8(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function KC(t){return t[8]}function Y9(t){return t[8]||(t[8]=[])}function QC(t,n){let e;const i=n[t.index];return Ya(i)?e=i:(e=Tx(i,n,null,t),n[t.index]=e,Kf(n,e)),JC(e,n,t,i),new qC(e,t,n)}let JC=function eM(t,n,e,i){if(t[_1])return;let r;r=8&e.type?ir(i):function rH(t,n){const e=t[qi],i=e.createComment(""),r=ls(n,t);return F2(e,E4(e,r),i,function L8(t,n){return t.nextSibling(n)}(e,r),!1),i}(n,e),t[_1]=r};class X9{constructor(n){this.queryList=n,this.matches=null}clone(){return new X9(this.queryList)}setDirty(){this.queryList.setDirty()}}class Z9{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const i=null!==n.contentQueries?n.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){const c=e.getByIndex(o);r.push(this.queries[c.indexInDeclarationView].clone())}return new Z9(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==oM(n,e).matches&&this.queries[e].setDirty()}}class tM{constructor(n,e,i=null){this.predicate=n,this.flags=e,this.read=i}}class $9{constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){const r=null!==e?e.length:0,o=this.getByIndex(i).embeddedTView(n,r);o&&(o.indexInDeclarationView=i,null!==e?e.push(o):e=[o])}return null!==e?new $9(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class q9{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new q9(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let i=n.parent;for(;null!==i&&8&i.type&&i.index!==e;)i=i.parent;return e===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(n,e,sH(e,o)),this.matchTNodeWithReadOption(n,e,y6(e,n,o,!1,!1))}else i===Co?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,y6(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===zr||r===Dc||r===Co&&4&e.type)this.addMatch(e.index,-2);else{const o=y6(e,n,r,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function sH(t,n){const e=t.localNames;if(null!==e)for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1];return null}function lH(t,n,e,i){return-1===e?function cH(t,n){return 11&t.type?V6(t,n):4&t.type?p5(t,n):null}(n,t):-2===e?function uH(t,n,e){return e===zr?V6(n,t):e===Co?p5(n,t):e===Dc?QC(n,t):void 0}(t,n,i):t2(t,t[Si],e,n)}function nM(t,n,e,i){const r=n[Es].queries[i];if(null===r.matches){const o=t.data,c=e.matches,x=[];for(let z=0;z<c.length;z+=2){const O=c[z];x.push(O<0?null:lH(n,o[O],c[z+1],e.metadata.read))}r.matches=x}return r.matches}function K9(t,n,e,i){const r=t.queries.getByIndex(e),o=r.matches;if(null!==o){const c=nM(t,n,r,e);for(let x=0;x<o.length;x+=2){const z=o[x];if(z>0)i.push(c[x/2]);else{const O=o[x+1],J=n[-z];for(let le=ga;le<J.length;le++){const be=J[le];be[L2]===be[ho]&&K9(be[Si],be,O,i)}if(null!==J[da]){const le=J[da];for(let be=0;be<le.length;be++){const Ee=le[be];K9(Ee[Si],Ee,O,i)}}}}}return i}function mr(t){const n=Jn(),e=no(),i=K3();m0(i+1);const r=oM(e,i);if(t.dirty&&function f2(t){return 4==(4&t[ur])}(n)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?K9(e,n,i,[]):nM(e,n,r,i);t.reset(o,Rk),t.notifyOnChanges()}return!0}return!1}function ds(t,n,e){const i=no();i.firstCreatePass&&(rM(i,new tM(t,n,e),-1),2==(2&n)&&(i.staticViewQueries=!0)),iM(i,Jn(),n)}function ya(t,n,e,i){const r=no();if(r.firstCreatePass){const o=uc();rM(r,new tM(n,e,i),o.index),function hH(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}iM(r,Jn(),e)}function gr(){return function dH(t,n){return t[Es].queries[n].queryList}(Jn(),K3())}function iM(t,n,e){const i=new fd(4==(4&e));(function gN(t,n,e,i){const r=Dx(n);r.push(e),t.firstCreatePass&&Ox(t).push(i,r.length-1)})(t,n,i,i.destroy),null===n[Es]&&(n[Es]=new Z9),n[Es].queries.push(new X9(i))}function rM(t,n,e){null===t.queries&&(t.queries=new $9),t.queries.track(new q9(n,e))}function oM(t,n){return t.queries.getByIndex(n)}function J2(t,n){return p5(t,n)}const ig=new Gn("Application Initializer");let rg=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=li(ig,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const o=r();if(rd(o))e.push(o);else if(hw(o)){const c=new Promise((x,z)=>{o.subscribe({complete:x,error:z})});e.push(c)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),0===e.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wM=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const o0=new Gn("LocaleId",{providedIn:"root",factory:()=>li(o0,Be.Optional|Be.SkipSelf)||function DH(){return typeof $localize<"u"&&$localize.locale||t3}()});let v5=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new an(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class NH{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let CM=(()=>{class t{compileModuleSync(e){return new B9(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const i=this.compileModuleSync(e),o=z0(bo(e).declarations).reduce((c,x)=>{const z=Lr(x);return z&&c.push(new J8(z)),c},[]);return new NH(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const AM=new Gn(""),_5=new Gn("");let lg,sg=(()=>{class t{constructor(e,i,r){this._ngZone=e,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,lg||(function nB(t){lg=t}(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(e)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(c=>c.timeoutId!==o),e(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Sr),Sn(cg),Sn(_5))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),cg=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return lg?.findTestabilityInTree(this,e,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),zu=null;const zM=new Gn("AllowMultipleToken"),ug=new Gn("PlatformDestroyListeners"),dg=new Gn("appBootstrapListener");class IM{constructor(n,e){this.name=n,this.token=e}}function LM(t,n,e=[]){const i=`Platform: ${n}`,r=new Gn(i);return(o=[])=>{let c=hg();if(!c||c.injector.get(zM,!1)){const x=[...e,...o,{provide:r,useValue:!0}];t?t(x):function oB(t){if(zu&&!zu.get(zM,!1))throw new jt(400,!1);(function PM(){!function ge(t){K=t}(()=>{throw new jt(600,!1)})})(),zu=t;const n=t.get(OM);(function TM(t){t.get(Zb,null)?.forEach(e=>e())})(t)}(function DM(t=[],n){return hc.create({name:n,providers:[{provide:H2,useValue:"platform"},{provide:ug,useValue:new Set([()=>zu=null])},...t]})}(x,i))}return function sB(t){const n=hg();if(!n)throw new jt(401,!1);return n}()}}function hg(){return zu?.get(OM)??null}let OM=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,i){const r=function cB(t="zone.js",n){return"noop"===t?new Qk:"zone.js"===t?new Sr(n):t}(i?.ngZone,function kM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const o=function AV(t,n,e){return new H9(t,n,e)}(e.moduleType,this.injector,function HM(t){return[{provide:Sr,useFactory:t},{provide:T4,multi:!0,useFactory:()=>{const n=li(uB,{optional:!0});return()=>n.initialize()}},{provide:VM,useFactory:lB},{provide:cx,useFactory:lx}]}(()=>r)),c=o.injector.get(P0,null);return r.runOutsideAngular(()=>{const x=r.onError.subscribe({next:z=>{c.handleError(z)}});o.onDestroy(()=>{b5(this._modules,o),x.unsubscribe()})}),function NM(t,n,e){try{const i=e();return rd(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}(c,r,()=>{const x=o.injector.get(rg);return x.runInitializers(),x.donePromise.then(()=>(function oC(t){Nn(t,"Expected localeId to be defined"),"string"==typeof t&&(rC=t.toLowerCase().replace(/_/g,"-"))}(o.injector.get(o0,t3)||t3),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,i=[]){const r=RM({},i);return function iB(t,n,e){const i=new B9(e);return Promise.resolve(i)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){const i=e.injector.get(Pu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new jt(-403,!1);e.instance.ngDoBootstrap(i)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new jt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const e=this._injector.get(ug,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(hc))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function RM(t,n){return Array.isArray(n)?n.reduce(RM,t):{...t,...n}}let Pu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=li(VM),this.zoneIsStable=li(cx),this.componentTypes=[],this.components=[],this.isStable=li(v5).hasPendingTasks.pipe(zt(e=>e?cn(!1):this.zoneIsStable),Se(),Zn()),this._injector=li(q2)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,i){const r=e instanceof Qb;if(!this._injector.get(rg).done)throw!r&&function qs(t){const n=Lr(t)||os(t)||uo(t);return null!==n&&n.standalone}(e),new jt(405,!1);let c;c=r?e:this._injector.get(F6).resolveComponentFactory(e),this.componentTypes.push(c.componentType);const x=function rB(t){return t.isBoundToModule}(c)?void 0:this._injector.get(F4),O=c.create(hc.NULL,[],i||c.selector,x),J=O.location.nativeElement,le=O.injector.get(AM,null);return le?.registerApplication(J),O.onDestroy(()=>{this.detachView(O.hostView),b5(this.components,O),le?.unregisterApplication(J)}),this._loadComponent(O),O}tick(){if(this._runningTick)throw new jt(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){const i=e;b5(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const i=this._injector.get(dg,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>b5(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new jt(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function b5(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const VM=new Gn("",{providedIn:"root",factory:()=>li(P0).handleError.bind(void 0)});function lB(){const t=li(Sr),n=li(P0);return e=>t.runOutsideAngular(()=>n.handleError(e))}let uB=(()=>{class t{constructor(){this.zone=li(Sr),this.applicationRef=li(Pu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();let E2=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=hB}return t})();function hB(t){return function fB(t,n,e){if(Xa(t)&&!e){const i=Bs(t.index,n);return new Q8(i,i)}return 47&t.type?new Q8(n[Gr],n):null}(uc(),Jn(),16==(16&t))}class GM{constructor(){}supports(n){return t5(n)}create(n){return new _B(n)}}const yB=(t,n)=>n;class _B{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||yB}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){const c=!i||e&&e.currentIndex<YM(i,r,o)?e:i,x=YM(c,r,o),z=c.currentIndex;if(c===i)r--,i=i._nextRemoved;else if(e=e._next,null==c.previousIndex)r++;else{o||(o=[]);const O=x-r,J=z-r;if(O!=J){for(let be=0;be<O;be++){const Ee=be<o.length?o[be]:o[be]=0,ut=Ee+be;J<=ut&&ut<O&&(o[be]=Ee+1)}o[c.previousIndex]=J-O}}x!==z&&n(c,x,z)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!t5(n))throw new jt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r,o,c,e=this._itHead,i=!1;if(Array.isArray(n)){this.length=n.length;for(let x=0;x<this.length;x++)o=n[x],c=this._trackByFn(x,o),null!==e&&Object.is(e.trackById,c)?(i&&(e=this._verifyReinsertion(e,o,c,x)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,c,x),i=!0),e=e._next}else r=0,function cR(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[Symbol.iterator]();let i;for(;!(i=e.next()).done;)n(i.value)}}(n,x=>{c=this._trackByFn(r,x),null!==e&&Object.is(e.trackById,c)?(i&&(e=this._verifyReinsertion(e,x,c,r)),Object.is(e.item,x)||this._addIdentityChange(e,x)):(e=this._mismatch(e,x,c,r),i=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let o;return null===n?o=this._itTail:(o=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,r)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,r)):n=this._addAfter(new bB(e,i),o,r),n}_verifyReinsertion(n,e,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const r=n._prevRemoved,o=n._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){const r=null===e?this._itHead:e._next;return n._next=r,n._prev=e,null===r?this._itTail=n:r._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new WM),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,i=n._next;return null===e?this._itHead=i:e._next=i,null===i?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WM),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class bB{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xB{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===e||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){const e=n._prevDup,i=n._nextDup;return null===e?this._head=i:e._nextDup=i,null===i?this._tail=e:i._prevDup=e,null===this._head}}class WM{constructor(){this.map=new Map}put(n){const e=n.trackById;let i=this.map.get(e);i||(i=new xB,this.map.set(e,i)),i.add(n)}get(n,e){const r=this.map.get(n);return r?r.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YM(t,n,e){const i=t.previousIndex;if(null===i)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}class XM{constructor(){}supports(n){return n instanceof Map||b9(n)}create(){return new wB}}class wB{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||b9(n)))throw new jt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const i=n._prev;return e._next=n,e._prev=i,n._prev=e,i&&(i._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const r=this._records.get(n);this._maybeAddToChanges(r,e);const o=r._prev,c=r._next;return o&&(o._next=c),c&&(c._prev=o),r._next=null,r._prev=null,r}const i=new CB(n);return this._records.set(n,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(i=>e(n[i],i))}}class CB{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ZM(){return new L0([new GM])}let L0=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:ZM});constructor(e){this.factories=e}static create(e,i){if(null!=i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||ZM()),deps:[[t,new b0,new Il]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(null!=i)return i;throw new jt(901,!1)}}return t})();function $M(){return new gd([new XM])}let gd=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:$M});constructor(e){this.factories=e}static create(e,i){if(i){const r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||$M()),deps:[[t,new b0,new Il]]}}find(e){const i=this.factories.find(r=>r.supports(e));if(i)return i;throw new jt(901,!1)}}return t})();const EB=LM(null,"core",[]);let AB=(()=>{class t{constructor(e){}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Pu))};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})();let yg=null;function Iu(){return yg}class BB{}const ao=new Gn("DocumentToken");let _g=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(){return li(UB)},providedIn:"platform"})}return t})();const jB=new Gn("Location Initialized");let UB=(()=>{class t extends _g{constructor(){super(),this._doc=li(ao),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Iu().getBaseHref(this._doc)}onPopState(e){const i=Iu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=Iu().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(){return new t},providedIn:"platform"})}return t})();function bg(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function rS(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function D0(t){return t&&"?"!==t[0]?"?"+t:t}let H4=(()=>{class t{historyGo(e){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(){return li(aS)},providedIn:"root"})}return t})();const oS=new Gn("appBaseHref");let aS=(()=>{class t extends H4{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??li(ao).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return bg(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+D0(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){const c=this.prepareExternalUrl(r+D0(o));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,o){const c=this.prepareExternalUrl(r+D0(o));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(_g),Sn(oS,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),GB=(()=>{class t extends H4{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=bg(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let c=this.prepareExternalUrl(r+D0(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,o){let c=this.prepareExternalUrl(r+D0(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(_g),Sn(oS,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),vd=(()=>{class t{constructor(e){this._subject=new Cr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function XB(t){if(new RegExp("^(https?:)?//").test(t)){const[,e]=t.split(/\/\/[^\/]+/);return e}return t}(rS(sS(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+D0(i))}normalize(e){return t.stripTrailingSlash(function YB(t,n){if(!t||!n.startsWith(t))return n;const e=n.substring(t.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,sS(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+D0(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+D0(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static#e=this.normalizeQueryParams=D0;static#t=this.joinWithSlash=bg;static#n=this.stripTrailingSlash=rS;static#i=this.\u0275fac=function(i){return new(i||t)(Sn(H4))};static#r=this.\u0275prov=Ot({token:t,factory:function(){return function WB(){return new vd(Sn(H4))}()},providedIn:"root"})}return t})();function sS(t){return t.replace(/\/index.html$/,"")}var M5=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(M5||{}),rc=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(rc||{});function vl(t,n){const e=M2(t),i=e[Ws.NumberSymbols][n];if(typeof i>"u"){if(n===rc.CurrencyDecimal)return e[Ws.NumberSymbols][rc.Decimal];if(n===rc.CurrencyGroup)return e[Ws.NumberSymbols][rc.Group]}return i}const bj=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function zg(t){const n=parseInt(t);if(isNaN(n))throw new Error("Invalid integer literal when parsing "+t);return n}function gS(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const i=e.indexOf("="),[r,o]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}const Ig=/\s+/,vS=[];let B4=(()=>{class t{constructor(e,i,r,o){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=o,this.initialClasses=vS,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(Ig):vS}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(Ig):e}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const i of e)this._updateState(i,!0);else if(null!=e)for(const i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){(e=e.trim()).length>0&&e.split(Ig).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(L0),Et(gd),Et(zr),Et(pl))};static#t=this.\u0275dir=In({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class Lj{constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N0=(()=>{class t{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,o,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Lj(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===o?void 0:o);else if(null!==o){const x=i.get(o);i.move(x,c),_S(x,r)}});for(let r=0,o=i.length;r<o;r++){const x=i.get(r).context;x.index=r,x.count=o,x.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{_S(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Dc),Et(Co),Et(L0))};static#t=this.\u0275dir=In({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function _S(t,n){t.context.$implicit=n.item}let z2=(()=>{class t{constructor(e,i){this._viewContainer=e,this._context=new Dj,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){bS("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){bS("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Dc),Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class Dj{constructor(){this.$implicit=null,this.ngIf=null}}function bS(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${At(n)}'.`)}class Tg{constructor(n,e){this._viewContainerRef=n,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let O5=(()=>{class t{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const i of this._defaultViews)i.enforceState(e)}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return t})(),xS=(()=>{class t{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new Tg(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Dc),Et(Co),Et(O5,9))};static#t=this.\u0275dir=In({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return t})(),s3=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:c}=this;this._viewRef=i.createEmbeddedView(r,o,c?{injector:c}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Dc))};static#t=this.\u0275dir=In({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Bn]})}return t})();function Rl(t,n){return new jt(2100,!1)}class Rj{createSubscription(n,e){return ln(()=>n.subscribe({next:e,error:i=>{throw i}}))}dispose(n){ln(()=>n.unsubscribe())}}class Fj{createSubscription(n,e){return n.then(e,i=>{throw i})}dispose(n){}}const Vj=new Fj,Hj=new Rj;let Lg=(()=>{class t{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(rd(e))return Vj;if(hw(e))return Hj;throw Rl()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(E2,16))};static#t=this.\u0275pipe=kr({name:"async",type:t,pure:!1,standalone:!0})}return t})(),MS=(()=>{class t{constructor(e){this._locale=e}transform(e,i,r){if(!function Dg(t){return!(null==t||""===t||t!=t)}(e))return null;r=r||this._locale;try{return function Ej(t,n,e){return function Eg(t,n,e,i,r,o,c=!1){let x="",z=!1;if(isFinite(t)){let O=function zj(t){let i,r,o,c,x,n=Math.abs(t)+"",e=0;for((r=n.indexOf("."))>-1&&(n=n.replace(".","")),(o=n.search(/e/i))>0?(r<0&&(r=o),r+=+n.slice(o+1),n=n.substring(0,o)):r<0&&(r=n.length),o=0;"0"===n.charAt(o);o++);if(o===(x=n.length))i=[0],r=1;else{for(x--;"0"===n.charAt(x);)x--;for(r-=o,i=[],c=0;o<=x;o++,c++)i[c]=Number(n.charAt(o))}return r>22&&(i=i.splice(0,21),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}(t);c&&(O=function Aj(t){if(0===t.digits[0])return t;const n=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===n?t.digits.push(0,0):1===n&&t.digits.push(0),t.integerLen+=2),t}(O));let J=n.minInt,le=n.minFrac,be=n.maxFrac;if(o){const vt=o.match(bj);if(null===vt)throw new Error(`${o} is not a valid digit info`);const Zt=vt[1],gn=vt[3],bn=vt[5];null!=Zt&&(J=zg(Zt)),null!=gn&&(le=zg(gn)),null!=bn?be=zg(bn):null!=gn&&le>be&&(be=le)}!function Pj(t,n,e){if(n>e)throw new Error(`The minimum number of digits after fraction (${n}) is higher than the maximum (${e}).`);let i=t.digits,r=i.length-t.integerLen;const o=Math.min(Math.max(n,r),e);let c=o+t.integerLen,x=i[c];if(c>0){i.splice(Math.max(t.integerLen,c));for(let le=c;le<i.length;le++)i[le]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,c=o+1),i[0]=0;for(let le=1;le<c;le++)i[le]=0}if(x>=5)if(c-1<0){for(let le=0;le>c;le--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[c-1]++;for(;r<Math.max(0,o);r++)i.push(0);let z=0!==o;const O=n+t.integerLen,J=i.reduceRight(function(le,be,Ee,ut){return ut[Ee]=(be+=le)<10?be:be-10,z&&(0===ut[Ee]&&Ee>=O?ut.pop():z=!1),be>=10?1:0},0);J&&(i.unshift(J),t.integerLen++)}(O,le,be);let Ee=O.digits,ut=O.integerLen;const mt=O.exponent;let Nt=[];for(z=Ee.every(vt=>!vt);ut<J;ut++)Ee.unshift(0);for(;ut<0;ut++)Ee.unshift(0);ut>0?Nt=Ee.splice(ut,Ee.length):(Nt=Ee,Ee=[0]);const Ht=[];for(Ee.length>=n.lgSize&&Ht.unshift(Ee.splice(-n.lgSize,Ee.length).join(""));Ee.length>n.gSize;)Ht.unshift(Ee.splice(-n.gSize,Ee.length).join(""));Ee.length&&Ht.unshift(Ee.join("")),x=Ht.join(vl(e,i)),Nt.length&&(x+=vl(e,r)+Nt.join("")),mt&&(x+=vl(e,rc.Exponential)+"+"+mt)}else x=vl(e,rc.Infinity);return x=t<0&&!z?n.negPre+x+n.negSuf:n.posPre+x+n.posSuf,x}(t,function Ag(t,n="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],o=i[1],c=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],x=c[0],z=c[1]||"";e.posPre=x.substring(0,x.indexOf("#"));for(let J=0;J<z.length;J++){const le=z.charAt(J);"0"===le?e.minFrac=e.maxFrac=J+1:"#"===le?e.maxFrac=J+1:e.posSuf+=le}const O=x.split(",");if(e.gSize=O[1]?O[1].length:0,e.lgSize=O[2]||O[1]?(O[2]||O[1]).length:0,o){const J=r.length-e.posPre.length-e.posSuf.length,le=o.indexOf("#");e.negPre=o.substring(0,le).replace(/'/g,""),e.negSuf=o.slice(le+J).replace(/'/g,"")}else e.negPre=n+e.posPre,e.negSuf=e.posSuf;return e}(function xg(t,n){return M2(t)[Ws.NumberFormats][n]}(n,M5.Decimal),vl(n,rc.MinusSign)),n,rc.Group,rc.Decimal,e)}(function Og(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),r,i)}catch(o){throw Rl()}}static#e=this.\u0275fac=function(i){return new(i||t)(Et(o0,16))};static#t=this.\u0275pipe=kr({name:"number",type:t,pure:!0,standalone:!0})}return t})();let SS=(()=>{class t{transform(e,i,r){if(null==e)return null;if(!this.supports(e))throw Rl();return e.slice(i,r)}supports(e){return"string"==typeof e||Array.isArray(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=kr({name:"slice",type:t,pure:!1,standalone:!0})}return t})(),pc=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})();const ES="browser";function AS(t){return"server"===t}let sU=(()=>{class t{static#e=this.\u0275prov=Ot({token:t,providedIn:"root",factory:()=>new cU(Sn(ao),window)})}return t})();class cU{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function lU(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const c=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){this.supportsScrolling()&&(this.window.history.scrollRestoration=n)}scrollToElement(n){const e=n.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class zS{}class LU extends BB{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Rg extends LU{static makeCurrent(){!function HB(t){yg||(yg=t)}(new Rg)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function DU(){return xd=xd||document.querySelector("base"),xd?xd.getAttribute("href"):null}();return null==e?null:function OU(t){R5=R5||document.createElement("a"),R5.setAttribute("href",t);const n=R5.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){xd=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return gS(document.cookie,n)}}let R5,xd=null,NU=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const Fg=new Gn("EventManagerPlugins");let DS=(()=>{class t{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new jt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Fg),Sn(Sr))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class OS{constructor(n){this._doc=n}}const Vg="ng-app-id";let kS=(()=>{class t{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=AS(o),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${Vg}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){const r=this.styleRef;if(r.has(e)){const o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(Vg),o;{const c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(Vg,this.appId),c}}addStyleToHost(e,i){const r=this.getStyleElement(e,i);e.appendChild(r);const o=this.styleRef,c=o.get(i)?.elements;c?c.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao),Sn(jf),Sn(G7,8),Sn(Eu))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const Hg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bg=/%COMP%/g,HU=new Gn("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function RS(t,n){return n.map(e=>e.replace(Bg,t))}let jg=(()=>{class t{constructor(e,i,r,o,c,x,z,O=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=x,this.ngZone=z,this.nonce=O,this.rendererByCompId=new Map,this.platformIsServer=AS(x),this.defaultRenderer=new Ug(e,c,z,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Xr.ShadowDom&&(i={...i,encapsulation:Xr.Emulated});const r=this.getOrCreateRenderer(e,i);return r instanceof VS?r.applyToHost(e):r instanceof Gg&&r.applyStyles(),r}getOrCreateRenderer(e,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const c=this.doc,x=this.ngZone,z=this.eventManager,O=this.sharedStylesHost,J=this.removeStylesOnCompDestroy,le=this.platformIsServer;switch(i.encapsulation){case Xr.Emulated:o=new VS(z,O,i,this.appId,J,c,x,le);break;case Xr.ShadowDom:return new GU(z,O,e,i,c,x,this.nonce,le);default:o=new Gg(z,O,i,J,c,x,le)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(DS),Sn(kS),Sn(jf),Sn(HU),Sn(ao),Sn(Eu),Sn(Sr),Sn(G7))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class Ug{constructor(n,e,i,r){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(Hg[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(FS(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(FS(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new jt(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;const o=Hg[r];o?n.setAttributeNS(o,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const r=Hg[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(dl.DashCase|dl.Important)?n.style.setProperty(e,i,r&dl.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&dl.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n[e]=i}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=Iu().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function FS(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class GU extends Ug{constructor(n,e,i,r,o,c,x,z){super(n,o,c,z),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const O=RS(r.id,r.styles);for(const J of O){const le=document.createElement("style");x&&le.setAttribute("nonce",x),le.textContent=J,this.shadowRoot.appendChild(le)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gg extends Ug{constructor(n,e,i,r,o,c,x,z){super(n,o,c,x),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=z?RS(z,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class VS extends Gg{constructor(n,e,i,r,o,c,x,z){const O=r+"-"+i.id;super(n,e,i,o,c,x,z,O),this.contentAttr=function BU(t){return"_ngcontent-%COMP%".replace(Bg,t)}(O),this.hostAttr=function jU(t){return"_nghost-%COMP%".replace(Bg,t)}(O)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let WU=(()=>{class t extends OS{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const HS=["alt","control","meta","shift"],YU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},XU={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ZU=(()=>{class t extends OS{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,i,r){const o=t.parseEventName(i),c=t.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Iu().onAndCancel(e,o.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=t._normalizeKey(i.pop());let c="",x=i.indexOf("code");if(x>-1&&(i.splice(x,1),c="code."),HS.forEach(O=>{const J=i.indexOf(O);J>-1&&(i.splice(J,1),c+=O+".")}),c+=o,0!=i.length||0===o.length)return null;const z={};return z.domEventName=r,z.fullKey=c,z}static matchEventFullKeyCode(e,i){let r=YU[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),HS.forEach(c=>{c!==r&&(0,XU[c])(e)&&(o+=c+".")}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{t.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const jS=[{provide:Eu,useValue:ES},{provide:Zb,useValue:function $U(){Rg.makeCurrent()},multi:!0},{provide:ao,useFactory:function KU(){return function Ze(t){ke=t}(document),document},deps:[]}],QU=LM(EB,"browser",jS),JU=new Gn(""),US=[{provide:_5,useClass:class kU{addToWindow(n){ri.getAngularTestability=(i,r=!0)=>{const o=n.findTestabilityInTree(i,r);if(null==o)throw new jt(5103,!1);return o},ri.getAllAngularTestabilities=()=>n.getAllTestabilities(),ri.getAllAngularRootElements=()=>n.getAllRootElements(),ri.frameworkStabilizers||(ri.frameworkStabilizers=[]),ri.frameworkStabilizers.push(i=>{const r=ri.getAllAngularTestabilities();let o=r.length,c=!1;const x=function(z){c=c||z,o--,0==o&&i(c)};r.forEach(z=>{z.whenStable(x)})})}findTestabilityInTree(n,e,i){return null==e?null:n.getTestability(e)??(i?Iu().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:AM,useClass:sg,deps:[Sr,cg,_5]},{provide:sg,useClass:sg,deps:[Sr,cg,_5]}],GS=[{provide:H2,useValue:"root"},{provide:P0,useFactory:function qU(){return new P0},deps:[]},{provide:Fg,useClass:WU,multi:!0,deps:[ao,Sr,Eu]},{provide:Fg,useClass:ZU,multi:!0,deps:[ao]},jg,kS,DS,{provide:Z8,useExisting:jg},{provide:zS,useClass:NU,deps:[]},[]];let WS=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:jf,useValue:e.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(JU,12))};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[...GS,...US],imports:[pc,AB]})}return t})(),YS=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:function(i){let r=null;return r=i?new i:function tG(){return new YS(Sn(ao))}(),r},providedIn:"root"})}return t})();typeof window<"u"&&window;let wd=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(i){let r=null;return r=i?new(i||t):Sn($S),r},providedIn:"root"})}return t})(),$S=(()=>{class t extends wd{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case Is.NONE:return i;case Is.HTML:return Oi(i,"HTML")?pi(i):_2(this._doc,String(i)).toString();case Is.STYLE:return Oi(i,"Style")?pi(i):i;case Is.SCRIPT:if(Oi(i,"Script"))return pi(i);throw new jt(5200,!1);case Is.URL:return Oi(i,"URL")?pi(i):Us(String(i));case Is.RESOURCE_URL:if(Oi(i,"ResourceURL"))return pi(i);throw new jt(5201,!1);default:throw new jt(5202,!1)}}bypassSecurityTrustHtml(e){return function xi(t){return new yn(t)}(e)}bypassSecurityTrustStyle(e){return function mi(t){return new sn(t)}(e)}bypassSecurityTrustScript(e){return function Bi(t){return new Mn(t)}(e)}bypassSecurityTrustUrl(e){return function yi(t){return new Ln(t)}(e)}bypassSecurityTrustResourceUrl(e){return function ai(t){return new Qn(t)}(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:function(i){let r=null;return r=i?new i:function oG(t){return new $S(t.get(ao))}(Sn(hc)),r},providedIn:"root"})}return t})();function j4(t,n){return xt(t,n,1)}function oc(t,n){return function(i){return i.lift(new aG(t,n))}}w(57271);class aG{constructor(n,e){this.predicate=n,this.thisArg=e}call(n,e){return e.subscribe(new sG(n,this.predicate,this.thisArg))}}class sG extends R{constructor(n,e,i){super(n),this.predicate=e,this.thisArg=i,this.count=0}_next(n){let e;try{e=this.predicate.call(this.thisArg,n,this.count++)}catch(i){return void this.destination.error(i)}e&&this.destination.next(n)}}function c3(t){return n=>n.lift(new cG(t))}class cG{constructor(n){this.callback=n}call(n,e){return e.subscribe(new lG(n,this.callback))}}class lG extends R{constructor(n,e){super(n),this.add(new _(e))}}class F5{}class V5{}class a0{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),o=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof a0?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new a0;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof a0?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const r=("a"===n.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const o=n.value;if(o){let c=this.headers.get(e);if(!c)return;c=c.filter(x=>-1===o.indexOf(x)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class uG{encodeKey(n){return KS(n)}encodeValue(n){return KS(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const hG=/%(\d[a-f0-9])/gi,fG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function KS(t){return encodeURIComponent(t).replace(hG,(n,e)=>fG[e]??n)}function H5(t){return`${t}`}class Lu{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new uG,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function dG(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[c,x]=-1==o?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],z=e.get(c)||[];z.push(x),e.set(c,z)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],r=Array.isArray(i)?i.map(H5):[H5(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const r=n[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Lu({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(H5(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const r=i.indexOf(H5(n.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class pG{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function QS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function JS(t){return typeof Blob<"u"&&t instanceof Blob}function eE(t){return typeof FormData<"u"&&t instanceof FormData}class Cd{constructor(n,e,i,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function mG(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new a0),this.context||(this.context=new pG),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const x=e.indexOf("?");this.urlWithParams=e+(-1===x?"?":x<e.length-1?"&":"")+c}}else this.params=new Lu,this.urlWithParams=e}serializeBody(){return null===this.body?null:QS(this.body)||JS(this.body)||eE(this.body)||function gG(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Lu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||eE(this.body)?null:JS(this.body)?this.body.type||null:QS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Lu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=void 0!==n.body?n.body:this.body,c=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,x=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let z=n.headers||this.headers,O=n.params||this.params;const J=n.context??this.context;return void 0!==n.setHeaders&&(z=Object.keys(n.setHeaders).reduce((le,be)=>le.set(be,n.setHeaders[be]),z)),n.setParams&&(O=Object.keys(n.setParams).reduce((le,be)=>le.set(be,n.setParams[be]),O)),new Cd(e,i,o,{params:O,headers:z,context:J,reportProgress:x,responseType:r,withCredentials:c})}}var l3=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(l3||{});class Yg{constructor(n,e=200,i="OK"){this.headers=n.headers||new a0,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Xg extends Yg{constructor(n={}){super(n),this.type=l3.ResponseHeader}clone(n={}){return new Xg({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class u3 extends Yg{constructor(n={}){super(n),this.type=l3.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new u3({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class tE extends Yg{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function Zg(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let B5=(()=>{class t{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof Cd)o=e;else{let z,O;z=r.headers instanceof a0?r.headers:new a0(r.headers),r.params&&(O=r.params instanceof Lu?r.params:new Lu({fromObject:r.params})),o=new Cd(e,i,void 0!==r.body?r.body:null,{headers:z,context:r.context,params:O,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=cn(o).pipe(j4(z=>this.handler.handle(z)));if(e instanceof Cd||"events"===r.observe)return c;const x=c.pipe(oc(z=>z instanceof u3));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return x.pipe(ue(z=>{if(null!==z.body&&!(z.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return z.body}));case"blob":return x.pipe(ue(z=>{if(null!==z.body&&!(z.body instanceof Blob))throw new Error("Response is not a Blob.");return z.body}));case"text":return x.pipe(ue(z=>{if(null!==z.body&&"string"!=typeof z.body)throw new Error("Response is not a string.");return z.body}));default:return x.pipe(ue(z=>z.body))}case"response":return x;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Lu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Zg(r,i))}post(e,i,r={}){return this.request("POST",e,Zg(r,i))}put(e,i,r={}){return this.request("PUT",e,Zg(r,i))}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(F5))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();function rE(t,n){return n(t)}function yG(t,n){return(e,i)=>n.intercept(e,{handle:r=>t(r,i)})}const bG=new Gn(""),Md=new Gn(""),oE=new Gn("");function xG(){let t=null;return(n,e)=>{null===t&&(t=(li(bG,{optional:!0})??[]).reduceRight(yG,rE));const i=li(v5),r=i.add();return t(n,e).pipe(c3(()=>i.remove(r)))}}let aE=(()=>{class t extends F5{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=li(v5)}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Md),...this.injector.get(oE,[])]));this.chain=r.reduceRight((o,c)=>function _G(t,n,e){return(i,r)=>e.runInContext(()=>n(i,o=>t(o,r)))}(o,c,this.injector),rE)}const i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(c3(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(V5),Sn(q2))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const SG=/^\)\]\}',?\n/;let cE=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new jt(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?it(i.\u0275loadImpl()):cn(null)).pipe(zt(()=>new $(o=>{const c=i.build();if(c.open(e.method,e.urlWithParams),e.withCredentials&&(c.withCredentials=!0),e.headers.forEach((mt,Nt)=>c.setRequestHeader(mt,Nt.join(","))),e.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const mt=e.detectContentTypeHeader();null!==mt&&c.setRequestHeader("Content-Type",mt)}if(e.responseType){const mt=e.responseType.toLowerCase();c.responseType="json"!==mt?mt:"text"}const x=e.serializeBody();let z=null;const O=()=>{if(null!==z)return z;const mt=c.statusText||"OK",Nt=new a0(c.getAllResponseHeaders()),Ht=function EG(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(c)||e.url;return z=new Xg({headers:Nt,status:c.status,statusText:mt,url:Ht}),z},J=()=>{let{headers:mt,status:Nt,statusText:Ht,url:vt}=O(),Zt=null;204!==Nt&&(Zt=typeof c.response>"u"?c.responseText:c.response),0===Nt&&(Nt=Zt?200:0);let gn=Nt>=200&&Nt<300;if("json"===e.responseType&&"string"==typeof Zt){const bn=Zt;Zt=Zt.replace(SG,"");try{Zt=""!==Zt?JSON.parse(Zt):null}catch(ni){Zt=bn,gn&&(gn=!1,Zt={error:ni,text:Zt})}}gn?(o.next(new u3({body:Zt,headers:mt,status:Nt,statusText:Ht,url:vt||void 0})),o.complete()):o.error(new tE({error:Zt,headers:mt,status:Nt,statusText:Ht,url:vt||void 0}))},le=mt=>{const{url:Nt}=O(),Ht=new tE({error:mt,status:c.status||0,statusText:c.statusText||"Unknown Error",url:Nt||void 0});o.error(Ht)};let be=!1;const Ee=mt=>{be||(o.next(O()),be=!0);let Nt={type:l3.DownloadProgress,loaded:mt.loaded};mt.lengthComputable&&(Nt.total=mt.total),"text"===e.responseType&&c.responseText&&(Nt.partialText=c.responseText),o.next(Nt)},ut=mt=>{let Nt={type:l3.UploadProgress,loaded:mt.loaded};mt.lengthComputable&&(Nt.total=mt.total),o.next(Nt)};return c.addEventListener("load",J),c.addEventListener("error",le),c.addEventListener("timeout",le),c.addEventListener("abort",le),e.reportProgress&&(c.addEventListener("progress",Ee),null!==x&&c.upload&&c.upload.addEventListener("progress",ut)),c.send(x),o.next({type:l3.Sent}),()=>{c.removeEventListener("error",le),c.removeEventListener("abort",le),c.removeEventListener("load",J),c.removeEventListener("timeout",le),e.reportProgress&&(c.removeEventListener("progress",Ee),null!==x&&c.upload&&c.upload.removeEventListener("progress",ut)),c.readyState!==c.DONE&&c.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(zS))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const $g=new Gn("XSRF_ENABLED"),lE=new Gn("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),uE=new Gn("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class dE{}let PG=(()=>{class t{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=gS(e,this.cookieName),this.lastCookieString=e),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao),Sn(Eu),Sn(lE))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();function IG(t,n){const e=t.url.toLowerCase();if(!li($g)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const i=li(dE).getToken(),r=li(uE);return null!=i&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),n(t)}var Du=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Du||{});function TG(...t){const n=[B5,cE,aE,{provide:F5,useExisting:aE},{provide:V5,useExisting:cE},{provide:Md,useValue:IG,multi:!0},{provide:$g,useValue:!0},{provide:dE,useClass:PG}];for(const e of t)n.push(...e.\u0275providers);return function G8(t){return{\u0275providers:t}}(n)}const hE=new Gn("LEGACY_INTERCEPTOR_FN");function LG(){return function U4(t,n){return{\u0275kind:t,\u0275providers:n}}(Du.LegacyInterceptors,[{provide:hE,useFactory:xG},{provide:Md,useExisting:hE,multi:!0}])}let DG=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[TG(LG())]})}return t})();function R0(t){return!!t&&(t instanceof $||"function"==typeof t.lift&&"function"==typeof t.subscribe)}class VG extends R{notifyNext(n,e,i,r,o){this.destination.next(e)}notifyError(n,e){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class HG extends R{constructor(n,e,i){super(),this.parent=n,this.outerValue=e,this.outerIndex=i,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function BG(t,n,e,i,r=new HG(t,e,i)){if(!r.closed)return n instanceof $?n.subscribe(r):Ge(n)(r)}const fE={};function U5(...t){let n,e;return xe(t[t.length-1])&&(e=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&g(t[0])&&(t=t[0]),Vn(t,e).lift(new jG(n))}class jG{constructor(n){this.resultSelector=n}call(n,e){return e.subscribe(new UG(n,this.resultSelector))}}class UG extends VG{constructor(n,e){super(n),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(fE),this.observables.push(n)}_complete(){const n=this.observables,e=n.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let i=0;i<e;i++)this.add(BG(this,n[i],void 0,i))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,e,i){const r=this.values,c=this.toRespond?r[i]===fE?--this.toRespond:this.toRespond:0;r[i]=e,0===c&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(n){let e;try{e=this.resultSelector.apply(this,n)}catch(i){return void this.destination.error(i)}this.destination.next(e)}}const G5=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function d3(...t){return function GG(){return Gt(1)}()(cn(...t))}const Ou=new $(t=>t.complete());function W5(t){return t?function WG(t){return new $(n=>t.schedule(()=>n.complete()))}(t):Ou}function G4(t){return new $(n=>{let e;try{e=t()}catch(r){return void n.error(r)}return(e?it(e):W5()).subscribe(n)})}function W4(t,n){return new $(n?e=>n.schedule(YG,0,{error:t,subscriber:e}):e=>e.error(t))}function YG({error:t,subscriber:n}){n.error(t)}const pE=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function R1(t){return n=>0===t?W5():n.lift(new XG(t))}class XG{constructor(n){if(this.total=n,this.total<0)throw new pE}call(n,e){return e.subscribe(new ZG(n,this.total))}}class ZG extends R{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){const e=this.total,i=++this.count;i<=e&&(this.destination.next(n),i===e&&(this.destination.complete(),this.unsubscribe()))}}function s0(...t){const n=t[t.length-1];return xe(n)?(t.pop(),e=>d3(t,e,n)):e=>d3(t,e)}function Y5(t=null){return n=>n.lift(new $G(t))}class $G{constructor(n){this.defaultValue=n}call(n,e){return e.subscribe(new qG(n,this.defaultValue))}}class qG extends R{constructor(n,e){super(n),this.defaultValue=e,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function mE(t=JG){return n=>n.lift(new KG(t))}class KG{constructor(n){this.errorFactory=n}call(n,e){return e.subscribe(new QG(n,this.errorFactory))}}class QG extends R{constructor(n,e){super(n),this.errorFactory=e,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(e){n=e}this.destination.error(n)}}}function JG(){return new G5}function Y4(t,n){const e=arguments.length>=2;return i=>i.pipe(t?oc((r,o)=>t(r,o,i)):j,R1(1),e?Y5(n):mE(()=>new G5))}function ku(){}function F1(t,n,e){return function(r){return r.lift(new eW(t,n,e))}}class eW{constructor(n,e,i){this.nextOrObserver=n,this.error=e,this.complete=i}call(n,e){return e.subscribe(new tW(n,this.nextOrObserver,this.error,this.complete))}}class tW extends R{constructor(n,e,i,r){super(n),this._tapNext=ku,this._tapError=ku,this._tapComplete=ku,this._tapError=i||ku,this._tapComplete=r||ku,k(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||ku,this._tapError=e.error||ku,this._tapComplete=e.complete||ku)}_next(n){try{this._tapNext.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.next(n)}_error(n){try{this._tapError.call(this._context,n)}catch(e){return void this.destination.error(e)}this.destination.error(n)}_complete(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()}}function X4(t){return function(e){const i=new nW(t),r=e.lift(i);return i.caught=r}}class nW{constructor(n){this.selector=n}call(n,e){return e.subscribe(new iW(n,this.selector,this.caught))}}class iW extends Te{constructor(n,e,i){super(n),this.selector=e,this.caught=i}error(n){if(!this.isStopped){let e;try{e=this.selector(n,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const i=new qe(this);this.add(i);const r=rt(e,i);r!==i&&this.add(r)}}}class oW{constructor(n,e,i=!1){this.accumulator=n,this.seed=e,this.hasSeed=i}call(n,e){return e.subscribe(new aW(n,this.accumulator,this.seed,this.hasSeed))}}class aW extends R{constructor(n,e,i,r){super(n),this.accumulator=e,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const e=this.index++;let i;try{i=this.accumulator(this.seed,n,e)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function qg(t){return function(e){return 0===t?W5():e.lift(new sW(t))}}class sW{constructor(n){if(this.total=n,this.total<0)throw new pE}call(n,e){return e.subscribe(new cW(n,this.total))}}class cW extends R{constructor(n,e){super(n),this.total=e,this.ring=new Array,this.count=0}_next(n){const e=this.ring,i=this.total,r=this.count++;e.length<i?e.push(n):e[r%i]=n}_complete(){const n=this.destination;let e=this.count;if(e>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let o=0;o<i;o++){const c=e++%i;n.next(r[c])}}n.complete()}}class dW{constructor(n){this.value=n}call(n,e){return e.subscribe(new hW(n,this.value))}}class hW extends R{constructor(n,e){super(n),this.value=e}_next(n){this.destination.next(this.value)}}function V1(t){return n=>n.lift(new fW(t))}class fW{constructor(n){this.notifier=n}call(n,e){const i=new pW(n),r=rt(this.notifier,new qe(i));return r&&!i.seenValue?(i.add(r),e.subscribe(i)):i}}class pW extends Te{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}const yo="primary",Sd=Symbol("RouteTitle");class mW{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function h3(t){return new mW(t)}function gW(t,n,e){const i=e.path.split("/");if(i.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<t.length))return null;const r={};for(let o=0;o<i.length;o++){const c=i[o],x=t[o];if(c.startsWith(":"))r[c.substring(1)]=x;else if(c!==x.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function c0(t,n){const e=t?Object.keys(t):void 0,i=n?Object.keys(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!gE(t[r],n[r]))return!1;return!0}function gE(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),i=[...n].sort();return e.every((r,o)=>i[o]===r)}return t===n}function vE(t){return t.length>0?t[t.length-1]:null}function Nu(t){return R0(t)?t:rd(t)?it(Promise.resolve(t)):cn(t)}const yW={exact:function bE(t,n,e){if(!Z4(t.segments,n.segments)||!X5(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!bE(t.children[i],n.children[i],e))return!1;return!0},subset:xE},yE={exact:function _W(t,n){return c0(t,n)},subset:function bW(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>gE(t[e],n[e]))},ignored:()=>!0};function _E(t,n,e){return yW[e.paths](t.root,n.root,e.matrixParams)&&yE[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function xE(t,n,e){return wE(t,n,n.segments,e)}function wE(t,n,e,i){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!Z4(r,e)||n.hasChildren()||!X5(r,e,i))}if(t.segments.length===e.length){if(!Z4(t.segments,e)||!X5(t.segments,e,i))return!1;for(const r in n.children)if(!t.children[r]||!xE(t.children[r],n.children[r],i))return!1;return!0}{const r=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!!(Z4(t.segments,r)&&X5(t.segments,r,i)&&t.children[yo])&&wE(t.children[yo],n,o,i)}}function X5(t,n,e){return n.every((i,r)=>yE[e](t[r].parameters,i.parameters))}class f3{constructor(n=new vs([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=h3(this.queryParams)),this._queryParamMap}toString(){return CW.serialize(this)}}class vs{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Z5(this)}}class Ed{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=h3(this.parameters)),this._parameterMap}toString(){return SE(this)}}function Z4(t,n){return t.length===n.length&&t.every((e,i)=>e.path===n[i].path)}let Ad=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(){return new Kg},providedIn:"root"})}return t})();class Kg{parse(n){const e=new OW(n);return new f3(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${zd(n.root,!0)}`,i=function EW(t){const n=Object.keys(t).map(e=>{const i=t[e];return Array.isArray(i)?i.map(r=>`${$5(e)}=${$5(r)}`).join("&"):`${$5(e)}=${$5(i)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams),r="string"==typeof n.fragment?`#${function MW(t){return encodeURI(t)}(n.fragment)}`:"";return`${e}${i}${r}`}}const CW=new Kg;function Z5(t){return t.segments.map(n=>SE(n)).join("/")}function zd(t,n){if(!t.hasChildren())return Z5(t);if(n){const e=t.children[yo]?zd(t.children[yo],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==yo&&i.push(`${r}:${zd(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function wW(t,n){let e=[];return Object.entries(t.children).forEach(([i,r])=>{i===yo&&(e=e.concat(n(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==yo&&(e=e.concat(n(r,i)))}),e}(t,(i,r)=>r===yo?[zd(t.children[yo],!1)]:[`${r}:${zd(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[yo]?`${Z5(t)}/${e[0]}`:`${Z5(t)}/(${e.join("//")})`}}function CE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $5(t){return CE(t).replace(/%3B/gi,";")}function Qg(t){return CE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function q5(t){return decodeURIComponent(t)}function ME(t){return q5(t.replace(/\+/g,"%20"))}function SE(t){return`${Qg(t.path)}${function SW(t){return Object.keys(t).map(n=>`;${Qg(n)}=${Qg(t[n])}`).join("")}(t.parameters)}`}const AW=/^[^\/()?;#]+/;function Jg(t){const n=t.match(AW);return n?n[0]:""}const zW=/^[^\/()?;=#]+/,IW=/^[^=?&#]+/,LW=/^[^&#]+/;class OW{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vs([],{}):new vs([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[yo]=new vs(n,e)),i}parseSegment(){const n=Jg(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new jt(4009,!1);return this.capture(n),new Ed(q5(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function PW(t){const n=t.match(zW);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Jg(this.remaining);r&&(i=r,this.capture(i))}n[q5(e)]=q5(i)}parseQueryParam(n){const e=function TW(t){const n=t.match(IW);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function DW(t){const n=t.match(LW);return n?n[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=ME(e),o=ME(i);if(n.hasOwnProperty(r)){let c=n[r];Array.isArray(c)||(c=[c],n[r]=c),c.push(o)}else n[r]=o}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Jg(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new jt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=yo);const c=this.parseChildren();e[o]=1===Object.keys(c).length?c[yo]:new vs([],c),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new jt(4011,!1)}}function EE(t){return t.segments.length>0?new vs([],{[yo]:t}):t}function AE(t){const n={};for(const i of Object.keys(t.children)){const o=AE(t.children[i]);if(i===yo&&0===o.segments.length&&o.hasChildren())for(const[c,x]of Object.entries(o.children))n[c]=x;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}return function kW(t){if(1===t.numberOfChildren&&t.children[yo]){const n=t.children[yo];return new vs(t.segments.concat(n.segments),n.children)}return t}(new vs(t.segments,n))}function $4(t){return t instanceof f3}function zE(t){let n;const r=EE(function e(o){const c={};for(const z of o.children){const O=e(z);c[z.outlet]=O}const x=new vs(o.url,c);return o===t&&(n=x),x}(t.root));return n??r}function PE(t,n,e,i){let r=t;for(;r.parent;)r=r.parent;if(0===n.length)return ev(r,r,r,e,i);const o=function RW(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new TE(!0,0,t);let n=0,e=!1;const i=t.reduce((r,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const x={};return Object.entries(o.outlets).forEach(([z,O])=>{x[z]="string"==typeof O?O.split("/"):O}),[...r,{outlets:x}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===c?(o.split("/").forEach((x,z)=>{0==z&&"."===x||(0==z&&""===x?e=!0:".."===x?n++:""!=x&&r.push(x))}),r):[...r,o]},[]);return new TE(e,n,i)}(n);if(o.toRoot())return ev(r,r,new vs([],{}),e,i);const c=function FW(t,n,e){if(t.isAbsolute)return new Q5(n,!0,0);if(!e)return new Q5(n,!1,NaN);if(null===e.parent)return new Q5(e,!0,0);const i=K5(t.commands[0])?0:1;return function VW(t,n,e){let i=t,r=n,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new jt(4005,!1);r=i.segments.length}return new Q5(i,!1,r-o)}(e,e.segments.length-1+i,t.numberOfDoubleDots)}(o,r,t),x=c.processChildren?Id(c.segmentGroup,c.index,o.commands):LE(c.segmentGroup,c.index,o.commands);return ev(r,c.segmentGroup,x,e,i)}function K5(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pd(t){return"object"==typeof t&&null!=t&&t.outlets}function ev(t,n,e,i,r){let c,o={};i&&Object.entries(i).forEach(([z,O])=>{o[z]=Array.isArray(O)?O.map(J=>`${J}`):`${O}`}),c=t===n?e:IE(t,n,e);const x=EE(AE(c));return new f3(x,o,r)}function IE(t,n,e){const i={};return Object.entries(t.children).forEach(([r,o])=>{i[r]=o===n?e:IE(o,n,e)}),new vs(t.segments,i)}class TE{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&K5(i[0]))throw new jt(4003,!1);const r=i.find(Pd);if(r&&r!==vE(i))throw new jt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Q5{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function LE(t,n,e){if(t||(t=new vs([],{})),0===t.segments.length&&t.hasChildren())return Id(t,n,e);const i=function BW(t,n,e){let i=0,r=n;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return o;const c=t.segments[r],x=e[i];if(Pd(x))break;const z=`${x}`,O=i<e.length-1?e[i+1]:null;if(r>0&&void 0===z)break;if(z&&O&&"object"==typeof O&&void 0===O.outlets){if(!OE(z,O,c))return o;i+=2}else{if(!OE(z,{},c))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const o=new vs(t.segments.slice(0,i.pathIndex),{});return o.children[yo]=new vs(t.segments.slice(i.pathIndex),t.children),Id(o,0,r)}return i.match&&0===r.length?new vs(t.segments,{}):i.match&&!t.hasChildren()?tv(t,n,e):i.match?Id(t,0,r):tv(t,n,e)}function Id(t,n,e){if(0===e.length)return new vs(t.segments,{});{const i=function HW(t){return Pd(t[0])?t[0].outlets:{[yo]:t}}(e),r={};if(Object.keys(i).some(o=>o!==yo)&&t.children[yo]&&1===t.numberOfChildren&&0===t.children[yo].segments.length){const o=Id(t.children[yo],n,e);return new vs(t.segments,o.children)}return Object.entries(i).forEach(([o,c])=>{"string"==typeof c&&(c=[c]),null!==c&&(r[o]=LE(t.children[o],n,c))}),Object.entries(t.children).forEach(([o,c])=>{void 0===i[o]&&(r[o]=c)}),new vs(t.segments,r)}}function tv(t,n,e){const i=t.segments.slice(0,n);let r=0;for(;r<e.length;){const o=e[r];if(Pd(o)){const z=jW(o.outlets);return new vs(i,z)}if(0===r&&K5(e[0])){i.push(new Ed(t.segments[n].path,DE(e[0]))),r++;continue}const c=Pd(o)?o.outlets[yo]:`${o}`,x=r<e.length-1?e[r+1]:null;c&&x&&K5(x)?(i.push(new Ed(c,DE(x))),r+=2):(i.push(new Ed(c,{})),r++)}return new vs(i,{})}function jW(t){const n={};return Object.entries(t).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[e]=tv(new vs([],{}),0,i))}),n}function DE(t){const n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function OE(t,n,e){return t==e.path&&c0(n,e.parameters)}const Td="imperative";class l0{constructor(n,e){this.id=n,this.url=e}}class J5 extends l0{constructor(n,e,i="imperative",r=null){super(n,e),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ru extends l0{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ld extends l0{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class p3 extends l0{constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r,this.type=16}}class ep extends l0{constructor(n,e,i,r){super(n,e),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kE extends l0{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UW extends l0{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GW extends l0{constructor(n,e,i,r,o){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class WW extends l0{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YW extends l0{constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XW{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ZW{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $W{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qW{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KW{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QW{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NE{constructor(n,e,i){this.routerEvent=n,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class nv{}class iv{constructor(n){this.url=n}}class JW{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Dd,this.attachRef=null}}let Dd=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new JW,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class RE{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=rv(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=rv(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=ov(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return ov(n,this._root).map(e=>e.value)}}function rv(t,n){if(t===n.value)return n;for(const e of n.children){const i=rv(t,e);if(i)return i}return null}function ov(t,n){if(t===n.value)return[n];for(const e of n.children){const i=ov(t,e);if(i.length)return i.unshift(n),i}return[]}class F0{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function m3(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class FE extends RE{constructor(n,e){super(n),this.snapshot=e,av(this,n)}toString(){return this.snapshot.toString()}}function VE(t,n){const e=function eY(t,n){const c=new tp([],{},{},"",{},yo,n,null,{});return new BE("",new F0(c,[]))}(0,n),i=new an([new Ed("",{})]),r=new an({}),o=new an({}),c=new an({}),x=new an(""),z=new g3(i,r,c,x,o,yo,n,e.root);return z.snapshot=e.root,new FE(new F0(z,[]),e)}class g3{constructor(n,e,i,r,o,c,x,z){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=c,this.component=x,this._futureSnapshot=z,this.title=this.dataSubject?.pipe(ue(O=>O[Sd]))??cn(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ue(n=>h3(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ue(n=>h3(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function HE(t,n="emptyOnly"){const e=t.pathFromRoot;let i=0;if("always"!==n)for(i=e.length-1;i>=1;){const r=e[i],o=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function tY(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class tp{get title(){return this.data?.[Sd]}constructor(n,e,i,r,o,c,x,z,O){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=c,this.component=x,this.routeConfig=z,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=h3(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=h3(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class BE extends RE{constructor(n,e){super(e),this.url=n,av(this,e)}toString(){return jE(this._root)}}function av(t,n){n.value._routerState=t,n.children.forEach(e=>av(t,e))}function jE(t){const n=t.children.length>0?` { ${t.children.map(jE).join(", ")} } `:"";return`${t.value}${n}`}function sv(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,c0(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),c0(n.params,e.params)||t.paramsSubject.next(e.params),function vW(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!c0(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.urlSubject.next(e.url),c0(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function cv(t,n){const e=c0(t.params,n.params)&&function xW(t,n){return Z4(t,n)&&t.every((e,i)=>c0(e.parameters,n[i].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||cv(t.parent,n.parent))}let UE=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=yo,this.activateEvents=new Cr,this.deactivateEvents=new Cr,this.attachEvents=new Cr,this.detachEvents=new Cr,this.parentContexts=li(Dd),this.location=li(Dc),this.changeDetector=li(E2),this.environmentInjector=li(q2),this.inputBinder=li(np,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new jt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new jt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new jt(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new jt(4013,!1);this._activatedRoute=e;const r=this.location,c=e.snapshot.component,x=this.parentContexts.getOrCreateContext(this.name).children,z=new nY(e,x,r.injector);this.activated=r.createComponent(c,{index:r.length,injector:z,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bn]})}return t})();class nY{constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===g3?this.route:n===Dd?this.childContexts:this.parent.get(n,e)}}const np=new Gn("");let GE=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:i}=e,r=U5([i.queryParams,i.params,i.data]).pipe(zt(([o,c,x],z)=>(x={...o,...c,...x},0===z?cn(x):Promise.resolve(x)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(e);const c=function VB(t){const n=Lr(t);if(!n)return null;const e=new J8(n);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(i.component);if(c)for(const{templateName:x}of c.inputs)e.activatedComponentRef.setInput(x,o[x]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();function Od(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const r=function rY(t,n,e){return n.children.map(i=>{for(const r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Od(t,i,r);return Od(t,i)})}(t,n,e);return new F0(i,r)}{if(t.shouldAttach(n.value)){const o=t.retrieve(n.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=n.value,c.children=n.children.map(x=>Od(t,x)),c}}const i=function oY(t){return new g3(new an(t.url),new an(t.params),new an(t.queryParams),new an(t.fragment),new an(t.data),t.outlet,t.component,t)}(n.value),r=n.children.map(o=>Od(t,o));return new F0(i,r)}}const lv="ngNavigationCancelingError";function WE(t,n){const{redirectTo:e,navigationBehaviorOptions:i}=$4(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=YE(!1,0,n);return r.url=e,r.navigationBehaviorOptions=i,r}function YE(t,n,e){const i=new Error("NavigationCancelingError: "+(t||""));return i[lv]=!0,i.cancellationCode=n,e&&(i.url=e),i}function XE(t){return t&&t[lv]}let ZE=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=ar({type:t,selectors:[["ng-component"]],standalone:!0,features:[LC],decls:1,vars:0,template:function(i,r){1&i&&Ni(0,"router-outlet")},dependencies:[UE],encapsulation:2})}return t})();function uv(t){const n=t.children&&t.children.map(uv),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==yo&&(e.component=ZE),e}function Fl(t){return t.outlet||yo}function kd(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class fY{constructor(n,e,i,r,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),sv(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const r=m3(e);n.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,r[c],i),delete r[c]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,e,i){const r=n.value,o=e?e.value:null;if(r===o)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(n,e,c.children)}else this.deactivateChildRoutes(n,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=m3(n);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],r);if(i&&i.outlet){const c=i.outlet.detach(),x=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:c,route:n,contexts:x})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=m3(n);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){const r=m3(e);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new QW(o.value.snapshot))}),n.children.length&&this.forwardEvent(new qW(n.value.snapshot))}activateRoutes(n,e,i){const r=n.value,o=e?e.value:null;if(sv(r),r===o)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,c.children)}else this.activateChildRoutes(n,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const x=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(x.contexts),c.attachRef=x.componentRef,c.route=x.route.value,c.outlet&&c.outlet.attach(x.componentRef,x.route.value),sv(x.route.value),this.activateChildRoutes(n,null,c.children)}else{const x=kd(r.snapshot);c.attachRef=null,c.route=r,c.injector=x,c.outlet&&c.outlet.activateWith(r,c.injector),this.activateChildRoutes(n,null,c.children)}}else this.activateChildRoutes(n,null,i)}}class $E{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class ip{constructor(n,e){this.component=n,this.route=e}}function pY(t,n,e){const i=t._root;return Nd(i,n?n._root:null,e,[i.value])}function v3(t,n){const e=Symbol(),i=n.get(t,e);return i===e?"function"!=typeof t||function Ut(t){return null!==Kt(t)}(t)?n.get(t):t:i}function Nd(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=m3(n);return t.children.forEach(c=>{(function gY(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,c=n?n.value:null,x=e?e.getContext(t.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const z=function vY(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!Z4(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Z4(t.url,n.url)||!c0(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cv(t,n)||!c0(t.queryParams,n.queryParams);default:return!cv(t,n)}}(c,o,o.routeConfig.runGuardsAndResolvers);z?r.canActivateChecks.push(new $E(i)):(o.data=c.data,o._resolvedData=c._resolvedData),Nd(t,n,o.component?x?x.children:null:e,i,r),z&&x&&x.outlet&&x.outlet.isActivated&&r.canDeactivateChecks.push(new ip(x.outlet.component,c))}else c&&Rd(n,x,r),r.canActivateChecks.push(new $E(i)),Nd(t,null,o.component?x?x.children:null:e,i,r)})(c,o[c.value.outlet],e,i.concat([c.value]),r),delete o[c.value.outlet]}),Object.entries(o).forEach(([c,x])=>Rd(x,e.getContext(c),r)),r}function Rd(t,n,e){const i=m3(t),r=t.value;Object.entries(i).forEach(([o,c])=>{Rd(c,r.component?n?n.children.getContext(o):null:n,e)}),e.canDeactivateChecks.push(new ip(r.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,r))}function Fd(t){return"function"==typeof t}function qE(t){return t instanceof G5||"EmptyError"===t?.name}const rp=Symbol("INITIAL_VALUE");function y3(){return zt(t=>U5(t.map(n=>n.pipe(R1(1),s0(rp)))).pipe(ue(n=>{for(const e of n)if(!0!==e){if(e===rp)return rp;if(!1===e||e instanceof f3)return e}return!0}),oc(n=>n!==rp),R1(1)))}function KE(t){return function P(...t){return Q(t)}(F1(n=>{if($4(n))throw WE(0,n)}),ue(n=>!0===n))}class op{constructor(n){this.segmentGroup=n||null}}class QE{constructor(n){this.urlTree=n}}function _3(t){return W4(new op(t))}function JE(t){return W4(new QE(t))}class RY{constructor(n,e){this.urlSerializer=n,this.urlTree=e}noMatchError(n){return new jt(4002,!1)}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return cn(i);if(r.numberOfChildren>1||!r.children[yo])return W4(new jt(4e3,!1));r=r.children[yo]}}applyRedirectCommands(n,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i)}applyRedirectCreateUrlTree(n,e,i,r){const o=this.createSegmentGroup(n,e.root,i,r);return new f3(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Object.entries(n).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const x=o.substring(1);i[r]=e[x]}else i[r]=o}),i}createSegmentGroup(n,e,i,r){const o=this.createSegments(n,e.segments,i,r);let c={};return Object.entries(e.children).forEach(([x,z])=>{c[x]=this.createSegmentGroup(n,z,i,r)}),new vs(o,c)}createSegments(n,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,e,i){const r=i[e.path.substring(1)];if(!r)throw new jt(4001,!1);return r}findOrReturn(n,e){let i=0;for(const r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}}const dv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function FY(t,n,e,i,r){const o=hv(t,n,e);return o.matched?(i=function sY(t,n){return t.providers&&!t._injector&&(t._injector=j9(t.providers,n,`Route: ${t.path}`)),t._injector??n}(n,i),function OY(t,n,e,i){const r=n.canMatch;return r&&0!==r.length?cn(r.map(c=>{const x=v3(c,t);return Nu(function CY(t){return t&&Fd(t.canMatch)}(x)?x.canMatch(n,e):t.runInContext(()=>x(n,e)))})).pipe(y3(),KE()):cn(!0)}(i,n,e).pipe(ue(c=>!0===c?o:{...dv}))):cn(o)}function hv(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...dv}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(n.matcher||gW)(e,t,n);if(!r)return{...dv};const o={};Object.entries(r.posParams??{}).forEach(([x,z])=>{o[x]=z.path});const c=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:c,positionalParamSegments:r.posParams??{}}}function eA(t,n,e,i){return e.length>0&&function BY(t,n,e){return e.some(i=>ap(t,n,i)&&Fl(i)!==yo)}(t,e,i)?{segmentGroup:new vs(n,HY(i,new vs(e,t.children))),slicedSegments:[]}:0===e.length&&function jY(t,n,e){return e.some(i=>ap(t,n,i))}(t,e,i)?{segmentGroup:new vs(t.segments,VY(t,0,e,i,t.children)),slicedSegments:e}:{segmentGroup:new vs(t.segments,t.children),slicedSegments:e}}function VY(t,n,e,i,r){const o={};for(const c of i)if(ap(t,e,c)&&!r[Fl(c)]){const x=new vs([],{});o[Fl(c)]=x}return{...r,...o}}function HY(t,n){const e={};e[yo]=n;for(const i of t)if(""===i.path&&Fl(i)!==yo){const r=new vs([],{});e[Fl(i)]=r}return e}function ap(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class YY{constructor(n,e,i,r,o,c,x){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=c,this.urlSerializer=x,this.allowRedirects=!0,this.applyRedirects=new RY(this.urlSerializer,this.urlTree)}noMatchError(n){return new jt(4002,!1)}recognize(){const n=eA(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,yo).pipe(X4(e=>{if(e instanceof QE)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof op?this.noMatchError(e):e}),ue(e=>{const i=new tp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},yo,this.rootComponentType,null,{}),r=new F0(i,e),o=new BE("",r),c=function NW(t,n,e=null,i=null){return PE(zE(t),n,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(c),this.inheritParamsAndData(o._root),{state:o,tree:c}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,yo).pipe(X4(i=>{throw i instanceof op?this.noMatchError(i):i}))}inheritParamsAndData(n){const e=n.value,i=HE(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),n.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(n,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i):this.processSegment(n,e,i,i.segments,r,!0)}processChildren(n,e,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return it(r).pipe(j4(o=>{const c=i.children[o],x=function dY(t,n){const e=t.filter(i=>Fl(i)===n);return e.push(...t.filter(i=>Fl(i)!==n)),e}(e,o);return this.processSegmentGroup(n,x,c,o)}),function rW(t,n){let e=!1;return arguments.length>=2&&(e=!0),function(r){return r.lift(new oW(t,n,e))}}((o,c)=>(o.push(...c),o)),Y5(null),function lW(t,n){const e=arguments.length>=2;return i=>i.pipe(t?oc((r,o)=>t(r,o,i)):j,qg(1),e?Y5(n):mE(()=>new G5))}(),xt(o=>{if(null===o)return _3(i);const c=tA(o);return function XY(t){t.sort((n,e)=>n.value.outlet===yo?-1:e.value.outlet===yo?1:n.value.outlet.localeCompare(e.value.outlet))}(c),cn(c)}))}processSegment(n,e,i,r,o,c){return it(e).pipe(j4(x=>this.processSegmentAgainstRoute(x._injector??n,e,x,i,r,o,c).pipe(X4(z=>{if(z instanceof op)return cn(null);throw z}))),Y4(x=>!!x),X4(x=>{if(qE(x))return function GY(t,n,e){return 0===n.length&&!t.children[e]}(i,r,o)?cn([]):_3(i);throw x}))}processSegmentAgainstRoute(n,e,i,r,o,c,x){return function UY(t,n,e,i){return!!(Fl(t)===i||i!==yo&&ap(n,e,t))&&("**"===t.path||hv(n,t,e).matched)}(i,r,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,r,i,o,c,x):x&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,e,i,o,c):_3(r):_3(r)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,o,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?JE(o):this.applyRedirects.lineralizeSegments(i,o).pipe(xt(c=>{const x=new vs(c,{});return this.processSegment(n,e,x,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,i,r,o,c){const{matched:x,consumedSegments:z,remainingSegments:O,positionalParamSegments:J}=hv(e,r,o);if(!x)return _3(e);const le=this.applyRedirects.applyRedirectCommands(z,r.redirectTo,J);return r.redirectTo.startsWith("/")?JE(le):this.applyRedirects.lineralizeSegments(r,le).pipe(xt(be=>this.processSegment(n,i,e,be.concat(O),c,!1)))}matchSegmentAgainstRoute(n,e,i,r,o,c){let x;if("**"===i.path){const z=r.length>0?vE(r).parameters:{};x=cn({snapshot:new tp(r,z,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nA(i),Fl(i),i.component??i._loadedComponent??null,i,iA(i)),consumedSegments:[],remainingSegments:[]}),e.children={}}else x=FY(e,i,r,n).pipe(ue(({matched:z,consumedSegments:O,remainingSegments:J,parameters:le})=>z?{snapshot:new tp(O,le,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nA(i),Fl(i),i.component??i._loadedComponent??null,i,iA(i)),consumedSegments:O,remainingSegments:J}:null));return x.pipe(zt(z=>null===z?_3(e):this.getChildConfig(n=i._injector??n,i,r).pipe(zt(({routes:O})=>{const J=i._loadedInjector??n,{snapshot:le,consumedSegments:be,remainingSegments:Ee}=z,{segmentGroup:ut,slicedSegments:mt}=eA(e,be,Ee,O);if(0===mt.length&&ut.hasChildren())return this.processChildren(J,O,ut).pipe(ue(Ht=>null===Ht?null:[new F0(le,Ht)]));if(0===O.length&&0===mt.length)return cn([new F0(le,[])]);const Nt=Fl(i)===o;return this.processSegment(J,O,ut,mt,Nt?yo:o,!0).pipe(ue(Ht=>[new F0(le,Ht)]))}))))}getChildConfig(n,e,i){return e.children?cn({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?cn({routes:e._loadedRoutes,injector:e._loadedInjector}):function DY(t,n,e,i){const r=n.canLoad;return void 0===r||0===r.length?cn(!0):cn(r.map(c=>{const x=v3(c,t);return Nu(function _Y(t){return t&&Fd(t.canLoad)}(x)?x.canLoad(n,e):t.runInContext(()=>x(n,e)))})).pipe(y3(),KE())}(n,e,i).pipe(xt(r=>r?this.configLoader.loadChildren(n,e).pipe(F1(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function NY(t){return W4(YE(!1,3))}())):cn({routes:[],injector:n})}}function ZY(t){const n=t.value.routeConfig;return n&&""===n.path}function tA(t){const n=[],e=new Set;for(const i of t){if(!ZY(i)){n.push(i);continue}const r=n.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):n.push(i)}for(const i of e){const r=tA(i.children);n.push(new F0(i.value,r))}return n.filter(i=>!e.has(i))}function nA(t){return t.data||{}}function iA(t){return t.resolve||{}}function rA(t){return"string"==typeof t.title||null===t.title}function fv(t){return zt(n=>{const e=t(n);return e?it(e).pipe(ue(()=>n)):cn(n)})}const b3=new Gn("ROUTES");let pv=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=li(CM)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return cn(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Nu(e.loadComponent()).pipe(ue(oA),F1(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),c3(()=>{this.componentLoaders.delete(e)})),r=new Pi(i,()=>new ne).pipe(_i());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return cn({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(ue(x=>{this.onLoadEndListener&&this.onLoadEndListener(i);let z,O;return Array.isArray(x)?O=x:(z=x.create(e).injector,O=z.get(b3,[],Be.Self|Be.Optional).flat()),{routes:O.map(uv),injector:z}}),c3(()=>{this.childrenLoaders.delete(i)})),c=new Pi(o,()=>new ne).pipe(_i());return this.childrenLoaders.set(i,c),c}loadModuleFactoryOrRoutes(e){return Nu(e()).pipe(ue(oA),xt(i=>i instanceof IC||Array.isArray(i)?cn(i):it(this.compiler.compileModuleAsync(i))))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oA(t){return function tX(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let sp=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ne,this.transitionAbortSubject=new ne,this.configLoader=li(pv),this.environmentInjector=li(q2),this.urlSerializer=li(Ad),this.rootContexts=li(Dd),this.inputBindingEnabled=null!==li(np,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>cn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new ZW(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new XW(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,r){return this.transitions=new an({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:e.urlHandlingStrategy.extract(i),urlAfterRedirects:e.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Td,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(oc(o=>0!==o.id),ue(o=>({...o,extractedUrl:e.urlHandlingStrategy.extract(o.rawUrl)})),zt(o=>{this.currentTransition=o;let c=!1,x=!1;return cn(o).pipe(F1(z=>{this.currentNavigation={id:z.id,initialUrl:z.rawUrl,extractedUrl:z.extractedUrl,trigger:z.source,extras:z.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zt(z=>{const O=z.currentBrowserUrl.toString(),J=!e.navigated||z.extractedUrl.toString()!==O||O!==z.currentUrlTree.toString();if(!J&&"reload"!==(z.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const be="";return this.events.next(new p3(z.id,this.urlSerializer.serialize(z.rawUrl),be,0)),z.resolve(null),Ou}if(e.urlHandlingStrategy.shouldProcessUrl(z.rawUrl))return cn(z).pipe(zt(be=>{const Ee=this.transitions?.getValue();return this.events.next(new J5(be.id,this.urlSerializer.serialize(be.extractedUrl),be.source,be.restoredState)),Ee!==this.transitions?.getValue()?Ou:Promise.resolve(be)}),function $Y(t,n,e,i,r,o){return xt(c=>function WY(t,n,e,i,r,o,c="emptyOnly"){return new YY(t,n,e,i,r,c,o).recognize()}(t,n,e,i,c.extractedUrl,r,o).pipe(ue(({state:x,tree:z})=>({...c,targetSnapshot:x,urlAfterRedirects:z}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),F1(be=>{o.targetSnapshot=be.targetSnapshot,o.urlAfterRedirects=be.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:be.urlAfterRedirects};const Ee=new kE(be.id,this.urlSerializer.serialize(be.extractedUrl),this.urlSerializer.serialize(be.urlAfterRedirects),be.targetSnapshot);this.events.next(Ee)}));if(J&&e.urlHandlingStrategy.shouldProcessUrl(z.currentRawUrl)){const{id:be,extractedUrl:Ee,source:ut,restoredState:mt,extras:Nt}=z,Ht=new J5(be,this.urlSerializer.serialize(Ee),ut,mt);this.events.next(Ht);const vt=VE(0,this.rootComponentType).snapshot;return this.currentTransition=o={...z,targetSnapshot:vt,urlAfterRedirects:Ee,extras:{...Nt,skipLocationChange:!1,replaceUrl:!1}},cn(o)}{const be="";return this.events.next(new p3(z.id,this.urlSerializer.serialize(z.extractedUrl),be,1)),z.resolve(null),Ou}}),F1(z=>{const O=new UW(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot);this.events.next(O)}),ue(z=>(this.currentTransition=o={...z,guards:pY(z.targetSnapshot,z.currentSnapshot,this.rootContexts)},o)),function SY(t,n){return xt(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:c}}=e;return 0===c.length&&0===o.length?cn({...e,guardsResult:!0}):function EY(t,n,e,i){return it(t).pipe(xt(r=>function LY(t,n,e,i,r){const o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return o&&0!==o.length?cn(o.map(x=>{const z=kd(n)??r,O=v3(x,z);return Nu(function wY(t){return t&&Fd(t.canDeactivate)}(O)?O.canDeactivate(t,n,e,i):z.runInContext(()=>O(t,n,e,i))).pipe(Y4())})).pipe(y3()):cn(!0)}(r.component,r.route,e,n,i)),Y4(r=>!0!==r,!0))}(c,i,r,t).pipe(xt(x=>x&&function yY(t){return"boolean"==typeof t}(x)?function AY(t,n,e,i){return it(n).pipe(j4(r=>d3(function PY(t,n){return null!==t&&n&&n(new $W(t)),cn(!0)}(r.route.parent,i),function zY(t,n){return null!==t&&n&&n(new KW(t)),cn(!0)}(r.route,i),function TY(t,n,e){const i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(c=>function mY(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(c)).filter(c=>null!==c).map(c=>G4(()=>cn(c.guards.map(z=>{const O=kd(c.node)??e,J=v3(z,O);return Nu(function xY(t){return t&&Fd(t.canActivateChild)}(J)?J.canActivateChild(i,t):O.runInContext(()=>J(i,t))).pipe(Y4())})).pipe(y3())));return cn(o).pipe(y3())}(t,r.path,e),function IY(t,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return cn(!0);const r=i.map(o=>G4(()=>{const c=kd(n)??e,x=v3(o,c);return Nu(function bY(t){return t&&Fd(t.canActivate)}(x)?x.canActivate(n,t):c.runInContext(()=>x(n,t))).pipe(Y4())}));return cn(r).pipe(y3())}(t,r.route,e))),Y4(r=>!0!==r,!0))}(i,o,t,n):cn(x)),ue(x=>({...e,guardsResult:x})))})}(this.environmentInjector,z=>this.events.next(z)),F1(z=>{if(o.guardsResult=z.guardsResult,$4(z.guardsResult))throw WE(0,z.guardsResult);const O=new GW(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects),z.targetSnapshot,!!z.guardsResult);this.events.next(O)}),oc(z=>!!z.guardsResult||(this.cancelNavigationTransition(z,"",3),!1)),fv(z=>{if(z.guards.canActivateChecks.length)return cn(z).pipe(F1(O=>{const J=new WW(O.id,this.urlSerializer.serialize(O.extractedUrl),this.urlSerializer.serialize(O.urlAfterRedirects),O.targetSnapshot);this.events.next(J)}),zt(O=>{let J=!1;return cn(O).pipe(function qY(t,n){return xt(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return cn(e);let o=0;return it(r).pipe(j4(c=>function KY(t,n,e,i){const r=t.routeConfig,o=t._resolve;return void 0!==r?.title&&!rA(r)&&(o[Sd]=r.title),function QY(t,n,e,i){const r=function JY(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return cn({});const o={};return it(r).pipe(xt(c=>function eX(t,n,e,i){const r=kd(n)??i,o=v3(t,r);return Nu(o.resolve?o.resolve(n,e):r.runInContext(()=>o(n,e)))}(t[c],n,e,i).pipe(Y4(),F1(x=>{o[c]=x}))),qg(1),function uW(t){return n=>n.lift(new dW(t))}(o),X4(c=>qE(c)?Ou:W4(c)))}(o,t,n,i).pipe(ue(c=>(t._resolvedData=c,t.data=HE(t,e).resolve,r&&rA(r)&&(t.data[Sd]=r.title),null)))}(c.route,i,t,n)),F1(()=>o++),qg(1),xt(c=>o===r.length?cn(e):Ou))})}(e.paramsInheritanceStrategy,this.environmentInjector),F1({next:()=>J=!0,complete:()=>{J||this.cancelNavigationTransition(O,"",2)}}))}),F1(O=>{const J=new YW(O.id,this.urlSerializer.serialize(O.extractedUrl),this.urlSerializer.serialize(O.urlAfterRedirects),O.targetSnapshot);this.events.next(J)}))}),fv(z=>{const O=J=>{const le=[];J.routeConfig?.loadComponent&&!J.routeConfig._loadedComponent&&le.push(this.configLoader.loadComponent(J.routeConfig).pipe(F1(be=>{J.component=be}),ue(()=>{})));for(const be of J.children)le.push(...O(be));return le};return U5(O(z.targetSnapshot.root)).pipe(Y5(),R1(1))}),fv(()=>this.afterPreactivation()),ue(z=>{const O=function iY(t,n,e){const i=Od(t,n._root,e?e._root:void 0);return new FE(i,n)}(e.routeReuseStrategy,z.targetSnapshot,z.currentRouterState);return this.currentTransition=o={...z,targetRouterState:O},o}),F1(()=>{this.events.next(new nv)}),((t,n,e,i)=>ue(r=>(new fY(n,r.targetRouterState,r.currentRouterState,e,i).activate(t),r)))(this.rootContexts,e.routeReuseStrategy,z=>this.events.next(z),this.inputBindingEnabled),R1(1),F1({next:z=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ru(z.id,this.urlSerializer.serialize(z.extractedUrl),this.urlSerializer.serialize(z.urlAfterRedirects))),e.titleStrategy?.updateTitle(z.targetRouterState.snapshot),z.resolve(!0)},complete:()=>{c=!0}}),V1(this.transitionAbortSubject.pipe(F1(z=>{throw z}))),c3(()=>{c||x||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),X4(z=>{if(x=!0,XE(z))this.events.next(new Ld(o.id,this.urlSerializer.serialize(o.extractedUrl),z.message,z.cancellationCode)),function aY(t){return XE(t)&&$4(t.url)}(z)?this.events.next(new iv(z.url)):o.resolve(!1);else{this.events.next(new ep(o.id,this.urlSerializer.serialize(o.extractedUrl),z,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(z))}catch(O){o.reject(O)}}return Ou}))}))}cancelNavigationTransition(e,i,r){const o=new Ld(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aA(t){return t!==Td}let sA=(()=>{class t{buildTitle(e){let i,r=e.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===yo);return i}getResolvedTitleForRoute(e){return e.data[Sd]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(){return li(nX)},providedIn:"root"})}return t})(),nX=(()=>{class t extends sA{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(YS))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iX=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(){return li(oX)},providedIn:"root"})}return t})();class rX{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let oX=(()=>{class t extends rX{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const cp=new Gn("",{providedIn:"root",factory:()=>({})});let aX=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:function(){return li(sX)},providedIn:"root"})}return t})(),sX=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Vd=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Vd||{});function cA(t,n){t.events.pipe(oc(e=>e instanceof Ru||e instanceof Ld||e instanceof ep||e instanceof p3),ue(e=>e instanceof Ru||e instanceof p3?Vd.COMPLETE:e instanceof Ld&&(0===e.code||1===e.code)?Vd.REDIRECTING:Vd.FAILED),oc(e=>e!==Vd.REDIRECTING),R1(1)).subscribe(()=>{n()})}function cX(t){throw t}function lX(t,n,e){return n.parse("/")}const uX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _l=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=li(wM),this.isNgZoneEnabled=!1,this._events=new ne,this.options=li(cp,{optional:!0})||{},this.pendingTasks=li(v5),this.errorHandler=this.options.errorHandler||cX,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||lX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=li(aX),this.routeReuseStrategy=li(iX),this.titleStrategy=li(sA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=li(b3,{optional:!0})?.flat()??[],this.navigationTransitions=li(sp),this.urlSerializer=li(Ad),this.location=li(vd),this.componentInputBindingEnabled=!!li(np,{optional:!0}),this.eventsSubscription=new _,this.isNgZoneEnabled=li(Sr)instanceof Sr&&Sr.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new f3,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=VE(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(lA(i)&&this._events.next(i));if(i instanceof J5)aA(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof p3)this.rawUrlTree=r.rawUrl;else if(i instanceof kE){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof nv)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof Ld)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof iv){const o=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||aA(r.source)};this.scheduleNavigation(o,Td,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof ep&&this.restoreHistory(r,!0),i instanceof Ru&&(this.navigated=!0),lA(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Td,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,i,e.state)},0)}))}navigateToSyncWithBrowser(e,i,r){const o={replaceUrl:!0},c=r?.navigationId?r:null;if(r){const z={...r};delete z.navigationId,delete z.\u0275routerPageId,0!==Object.keys(z).length&&(o.state=z)}const x=this.parseUrl(e);this.scheduleNavigation(x,i,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(uv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:r,queryParams:o,fragment:c,queryParamsHandling:x,preserveFragment:z}=i,O=z?this.currentUrlTree.fragment:c;let le,J=null;switch(x){case"merge":J={...this.currentUrlTree.queryParams,...o};break;case"preserve":J=this.currentUrlTree.queryParams;break;default:J=o||null}null!==J&&(J=this.removeEmptyProps(J));try{le=zE(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),le=this.currentUrlTree.root}return PE(le,e,J,O??null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=$4(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Td,null,i)}navigate(e,i={skipLocationChange:!1}){return function hX(t){for(let n=0;n<t.length;n++)if(null==t[n])throw new jt(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?{...uX}:!1===i?{...dX}:i,$4(e))return _E(this.currentUrlTree,e,r);const o=this.parseUrl(e);return _E(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const o=e[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(e,i,r,o,c){if(this.disposed)return Promise.resolve(!1);let x,z,O;c?(x=c.resolve,z=c.reject,O=c.promise):O=new Promise((le,be)=>{x=le,z=be});const J=this.pendingTasks.add();return cA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(J))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:o,resolve:x,reject:z,promise:O,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),O.catch(le=>Promise.reject(le))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const c={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",c)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lA(t){return!(t instanceof nv||t instanceof iv)}class uA{}let mX=(()=>{class t{constructor(e,i,r,o,c){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(oc(e=>e instanceof Ru),j4(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=j9(o.providers,e,`Route: ${o.path}`));const c=o._injector??e,x=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(x,o.children??o._loadedRoutes))}return it(r).pipe(Gt())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):cn(null);const o=r.pipe(xt(c=>null===c?cn(void 0):(i._loadedRoutes=c.routes,i._loadedInjector=c.injector,this.processRoutes(c.injector??e,c.routes))));return i.loadComponent&&!i._loadedComponent?it([o,this.loader.loadComponent(i)]).pipe(Gt()):o})}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(_l),Sn(CM),Sn(q2),Sn(uA),Sn(pv))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const gv=new Gn("");let dA=(()=>{class t{constructor(e,i,r,o,c={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof J5?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ru?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof p3&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof NE&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new NE(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){j6()};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();function V0(t,n){return{\u0275kind:t,\u0275providers:n}}function fA(){const t=li(hc);return n=>{const e=t.get(Pu);if(n!==e.components[0])return;const i=t.get(_l),r=t.get(pA);1===t.get(vv)&&i.initialNavigation(),t.get(mA,null,Be.Optional)?.setUpPreloading(),t.get(gv,null,Be.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const pA=new Gn("",{factory:()=>new ne}),vv=new Gn("",{providedIn:"root",factory:()=>1}),mA=new Gn("");function _X(t){return V0(0,[{provide:mA,useExisting:mX},{provide:uA,useExisting:t}])}const gA=new Gn("ROUTER_FORROOT_GUARD"),xX=[vd,{provide:Ad,useClass:Kg},_l,Dd,{provide:g3,useFactory:function hA(t){return t.routerState.root},deps:[_l]},pv,[]];function wX(){return new IM("Router",_l)}let Hd=(()=>{class t{constructor(e){}static forRoot(e,i){return{ngModule:t,providers:[xX,[],{provide:b3,multi:!0,useValue:e},{provide:gA,useFactory:EX,deps:[[_l,new Il,new b0]]},{provide:cp,useValue:i||{}},i?.useHash?{provide:H4,useClass:GB}:{provide:H4,useClass:aS},{provide:gv,useFactory:()=>{const t=li(sU),n=li(Sr),e=li(cp),i=li(sp),r=li(Ad);return e.scrollOffset&&t.setOffset(e.scrollOffset),new dA(r,i,t,n,e)}},i?.preloadingStrategy?_X(i.preloadingStrategy).\u0275providers:[],{provide:IM,multi:!0,useFactory:wX},i?.initialNavigation?AX(i):[],i?.bindToComponentInputs?V0(8,[GE,{provide:np,useExisting:GE}]).\u0275providers:[],[{provide:vA,useFactory:fA},{provide:dg,multi:!0,useExisting:vA}]]}}static forChild(e){return{ngModule:t,providers:[{provide:b3,multi:!0,useValue:e}]}}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(gA,8))};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})();function EX(t){return"guarded"}function AX(t){return["disabled"===t.initialNavigation?V0(3,[{provide:ig,multi:!0,useFactory:()=>{const n=li(_l);return()=>{n.setUpLocationChangeListener()}}},{provide:vv,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?V0(2,[{provide:vv,useValue:0},{provide:ig,multi:!0,deps:[hc],useFactory:n=>{const e=n.get(jB,Promise.resolve());return()=>e.then(()=>new Promise(i=>{const r=n.get(_l),o=n.get(pA);cA(r,()=>{i(!0)}),n.get(sp).afterPreactivation=()=>(i(!0),o.closed?cn(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const vA=new Gn(""),PX=[{path:"**",redirectTo:"/map",pathMatch:"full"}];let IX=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[Hd.forRoot(PX),Hd]})}return t})();var TX=w(42284),LX=w.n(TX),yv={set:function(t,n,e,i){var r="",o="";if(e){var c=new Date;c.setTime(c.getTime()+60*e*1e3),r="; expires="+c.toGMTString()}i&&(o="; domain="+i),document.cookie=t+"="+escape(n)+r+o+"; path=/; samesite=lax"},get:function(t){var n,e,i=t+"=",r=document.cookie.split(";");for(n=0;n<r.length;n++){for(e=r[n];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(i))return unescape(e.substring(i.length,e.length))}return null}},hs={urlPrefix:"",visitsUrl:"/ahoy/visits",eventsUrl:"/ahoy/events",page:null,platform:"Web",useBeacon:!0,startOnReady:!0,trackVisits:!0,cookies:!0,cookieDomain:null,headers:{},visitParams:{},withCredentials:!1,visitDuration:240,visitorDuration:1051200},Ma=window.ahoy||window.Ahoy||{};Ma.configure=function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(hs[n]=t[n])},Ma.configure(Ma);var x3,w3,yA,_v=window.jQuery||window.Zepto||window.$,bv=!1,_A=[],xv=typeof JSON<"u"&&typeof JSON.stringify<"u",Fu=[];function bA(){return hs.urlPrefix+hs.eventsUrl}function lp(t,n,e){yv.set(t,n,e,hs.cookieDomain||hs.domain)}function C3(t){return yv.get(t)}function M3(t){yv.set(t,"",-1)}function Vu(t){C3("ahoy_debug")&&window.console.log(t)}function up(){for(var t;t=_A.shift();)t();bv=!0}function xA(t,n){var e=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?e.apply(t,[n])?t:t.parentElement?xA(t.parentElement,n):null:(Vu("Unable to match"),null)}function wv(t,n,e){document.addEventListener(t,function(i){var r=xA(i.target,n);if(r){var o=IA(r,"data-ahoy-skip");if(null!==o&&"false"!==o)return;e.call(r,i)}})}function Cv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)})}function wA(){hs.cookies&&xv&&lp("ahoy_events",JSON.stringify(Fu),1)}function CA(){var t=document.querySelector("meta[name=csrf-token]");return t&&t.content}function MA(t){var n=CA();n&&t.setRequestHeader("X-CSRF-Token",n)}function SA(t,n,e){if(xv)if(_v&&_v.ajax)_v.ajax({type:"POST",url:t,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:MA,success:e,headers:hs.headers,xhrFields:{withCredentials:hs.withCredentials}});else{var i=new XMLHttpRequest;for(var r in i.open("POST",t,!0),i.withCredentials=hs.withCredentials,i.setRequestHeader("Content-Type","application/json"),hs.headers)Object.prototype.hasOwnProperty.call(hs.headers,r)&&i.setRequestHeader(r,hs.headers[r]);i.onload=function(){200===i.status&&e()},MA(i),i.send(JSON.stringify(n))}}function EA(t){var n={events:[t]};return hs.cookies&&(n.visit_token=t.visit_token,n.visitor_token=t.visitor_token),delete t.visit_token,delete t.visitor_token,n}function AA(t){Ma.ready(function(){SA(bA(),EA(t),function(){for(var n=0;n<Fu.length;n++)if(Fu[n].id===t.id){Fu.splice(n,1);break}wA()})})}function zA(){return hs.page||window.location.pathname}function PA(t){return t&&t.length>0?t:null}function Mv(){return function HX(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&null===t[n]&&delete t[n];return t}({tag:this.tagName.toLowerCase(),id:PA(this.id),class:PA(this.className),page:zA(),section:IA(this,"data-section")})}function IA(t,n){for(;t&&t!==document;t=t.parentNode)if(t.hasAttribute(n))return t.getAttribute(n);return null}function TA(){if(bv=!1,x3=Ma.getVisitId(),w3=Ma.getVisitorId(),yA=C3("ahoy_track"),!1===hs.cookies||!1===hs.trackVisits)Vu("Visit tracking disabled"),up();else if(x3&&w3&&!yA)Vu("Active visit"),up();else if(x3||lp("ahoy_visit",x3=Cv(),hs.visitDuration),C3("ahoy_visit")){Vu("Visit started"),w3||lp("ahoy_visitor",w3=Cv(),hs.visitorDuration);var t={visit_token:x3,visitor_token:w3,platform:hs.platform,landing_page:window.location.href,screen_width:window.screen.width,screen_height:window.screen.height,js:!0};for(var n in document.referrer.length>0&&(t.referrer=document.referrer),hs.visitParams)Object.prototype.hasOwnProperty.call(hs.visitParams,n)&&(t[n]=hs.visitParams[n]);Vu(t),SA(function DX(){return hs.urlPrefix+hs.visitsUrl}(),t,function(){M3("ahoy_track"),up()})}else Vu("Cookies disabled"),up()}Ma.ready=function(t){bv?t():_A.push(t)},Ma.getVisitId=Ma.getVisitToken=function(){return C3("ahoy_visit")},Ma.getVisitorId=Ma.getVisitorToken=function(){return C3("ahoy_visitor")},Ma.reset=function(){return M3("ahoy_visit"),M3("ahoy_visitor"),M3("ahoy_events"),M3("ahoy_track"),!0},Ma.debug=function(t){return!1===t?M3("ahoy_debug"):lp("ahoy_debug","t",525600),!0},Ma.track=function(t,n){var e={name:t,properties:n||{},time:(new Date).getTime()/1e3,id:Cv(),js:!0};return Ma.ready(function(){hs.cookies&&!Ma.getVisitId()&&TA(),Ma.ready(function(){Vu(e),e.visit_token=Ma.getVisitId(),e.visitor_token=Ma.getVisitorId(),function kX(){return(hs.useBeacon||hs.trackNow)&&function OX(t){return 0===Object.keys(t).length}(hs.headers)&&xv&&typeof window.navigator.sendBeacon<"u"&&!hs.withCredentials}()?function VX(t){Ma.ready(function(){var n=EA(t),e=function FX(){var t=document.querySelector("meta[name=csrf-param]");return t&&t.content}(),i=CA();e&&i&&(n[e]=i),n.events_json=JSON.stringify(n.events),delete n.events,window.navigator.sendBeacon(bA(),function NX(t){var n=new FormData;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.append(e,t[e]);return n}(n))})}(e):(Fu.push(e),wA(),setTimeout(function(){AA(e)},1e3))})}),!0},Ma.trackView=function(t){var n={url:window.location.href,title:document.title,page:zA()};if(t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);Ma.track("$view",n)},Ma.trackClicks=function(t){if(void 0===t)throw new Error("Missing selector");wv("click",t,function(n){var e=Mv.call(this,n);e.text="input"===e.tag?this.value:(this.textContent||this.innerText||this.innerHTML).replace(/[\s\r\n]+/g," ").trim(),e.href=this.href,Ma.track("$click",e)})},Ma.trackSubmits=function(t){if(void 0===t)throw new Error("Missing selector");wv("submit",t,function(n){var e=Mv.call(this,n);Ma.track("$submit",e)})},Ma.trackChanges=function(t){if(Vu("trackChanges is deprecated and will be removed in 0.5.0"),void 0===t)throw new Error("Missing selector");wv("change",t,function(n){var e=Mv.call(this,n);Ma.track("$change",e)})};try{Fu=JSON.parse(C3("ahoy_events")||"[]")}catch{}for(var Sv=0;Sv<Fu.length;Sv++)AA(Fu[Sv]);Ma.start=function(){TA(),Ma.start=function(){}},function RX(t){"interactive"===document.readyState||"complete"===document.readyState?setTimeout(t,0):document.addEventListener("DOMContentLoaded",t)}(function(){hs.startOnReady&&Ma.start()});const dp_ahoyUrl="http://localhost:6001/wayfinding/analytics";var Ev=w(22529),BX=w(94182),jX=w(85482),UX=w(60370),GX=w.n(UX),WX=w(97009);let u0=(()=>{class t{constructor(){this.state={initializing:!0,floor:new BX.FloorModel({}),floors:[],place:new jX.PlaceModel({}),places:[],style:new(GX())({}),styles:[],allFeatures:new WX.FeatureCollection({}),amenities:[],loadingRoute:!1,noPlaces:!1,options:{zoom:19,pitch:40,bearing:10},defaultLocation:{coordinates:[51.48091652702158,25.336680584406395],level:0},textNavigation:null,routeDetails:null,accessibleRoute:!1,kioskMode:!1,kiosks:[{name:"kiosk1",latitude:25.33766469,longitude:51.4814541,level:0,pitch:0,bearing:179.2,bounds:[[51.478472777,25.336273415],[51.482695283,25.338782543]]},{name:"kiosk2",latitude:25.33687709,longitude:51.4814541,level:2,pitch:0,bearing:-91.2,bounds:[[51.479646637,25.335341258],[51.482528207,25.339278794]]}],startPoiId:"44010f6f-9963-4433-ad86-40b89b829c41:f6ea1437-e372-4348-9b96-b1304c8a8952",startPoi:null,defaultPlaceId:"da2152c9-48bc-437d-a19d-ceb6a3a0f02a",entranceFeatureId:"44010f6f-9963-4433-ad86-40b89b829c41:f6ea1437-e372-4348-9b96-b1304c8a8952",parkingAmenityId:"44010f6f-9963-4433-ad86-40b89b829c41:adf1071e-81cb-4134-ae55-2e0e0005d2b7"}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _a(t){return null!=t&&"false"!=`${t}`}function Hu(t,n=0){return function YX(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):n}function hp(t){return Array.isArray(t)?t:[t]}function mc(t){return null==t?"":"string"==typeof t?t:`${t}px`}function H0(t){return t instanceof zr?t.nativeElement:t}function B0(t,n,e,i){return k(e)&&(i=e,e=void 0),i?B0(t,n,e).pipe(ue(r=>g(r)?i(...r):i(r))):new $(r=>{LA(t,n,function o(c){r.next(arguments.length>1?Array.prototype.slice.call(arguments):c)},r,e)})}function LA(t,n,e,i,r){let o;if(function qX(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const c=t;t.addEventListener(n,e,r),o=()=>c.removeEventListener(n,e,r)}else if(function $X(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const c=t;t.on(n,e),o=()=>c.off(n,e)}else if(function ZX(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const c=t;t.addListener(n,e),o=()=>c.removeListener(n,e)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let c=0,x=t.length;c<x;c++)LA(t[c],n,e,i,r)}i.add(o)}class KX extends _{constructor(n,e){super()}schedule(n,e=0){return this}}class fp extends KX{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){if(this.closed)return this;this.state=n;const i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(n,e,i=0){return setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(n,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let r,i=!1;try{this.work(n)}catch(o){i=!0,r=!!o&&o||new Error(o)}if(i)return this.unsubscribe(),r}_unsubscribe(){const n=this.id,e=this.scheduler,i=e.actions,r=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&i.splice(r,1),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null}}let DA=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(e,i=0,r){return new this.SchedulerAction(this,e).schedule(r,i)}}return t.now=()=>Date.now(),t})();class Vl extends DA{constructor(n,e=DA.now){super(n,()=>Vl.delegate&&Vl.delegate!==this?Vl.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(n,e=0,i){return Vl.delegate&&Vl.delegate!==this?Vl.delegate.schedule(n,e,i):super.schedule(n,e,i)}flush(n){const{actions:e}=this;if(this.active)return void e.push(n);let i;this.active=!0;do{if(i=n.execute(n.state,n.delay))break}while(n=e.shift());if(this.active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}}const OA=new class JX extends Vl{flush(n){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,r=-1,o=e.length;n=n||e.shift();do{if(i=n.execute(n.state,n.delay))break}while(++r<o&&(n=e.shift()));if(this.active=!1,i){for(;++r<o&&(n=e.shift());)n.unsubscribe();throw i}}}(class QX extends fp{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n.scheduled||(n.scheduled=requestAnimationFrame(()=>n.flush(null))))}recycleAsyncId(n,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(n,e,i);0===n.actions.length&&(cancelAnimationFrame(e),n.scheduled=void 0)}});let eZ=1;const tZ=Promise.resolve(),pp={};function kA(t){return t in pp&&(delete pp[t],!0)}const NA={setImmediate(t){const n=eZ++;return pp[n]=!0,tZ.then(()=>kA(n)&&t()),n},clearImmediate(t){kA(t)}},RA=new class iZ extends Vl{flush(n){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,r=-1,o=e.length;n=n||e.shift();do{if(i=n.execute(n.state,n.delay))break}while(++r<o&&(n=e.shift()));if(this.active=!1,i){for(;++r<o&&(n=e.shift());)n.unsubscribe();throw i}}}(class nZ extends fp{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}requestAsyncId(n,e,i=0){return null!==i&&i>0?super.requestAsyncId(n,e,i):(n.actions.push(this),n.scheduled||(n.scheduled=NA.setImmediate(n.flush.bind(n,null))))}recycleAsyncId(n,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(n,e,i);0===n.actions.length&&(NA.clearImmediate(e),n.scheduled=void 0)}}),mp=new Vl(fp);class oZ{constructor(n){this.durationSelector=n}call(n,e){return e.subscribe(new aZ(n,this.durationSelector))}}class aZ extends Te{constructor(n,e){super(n),this.durationSelector=e,this.hasValue=!1}_next(n){if(this.value=n,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:r}=this;e=r(n)}catch(r){return this.destination.error(r)}const i=rt(e,new qe(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:n,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function FA(t){return!g(t)&&t-parseFloat(t)+1>=0}function cZ(t){const{index:n,period:e,subscriber:i}=t;if(i.next(n),!i.closed){if(-1===e)return i.complete();t.index=n+1,this.schedule(t,e)}}function Av(t,n=mp){return function rZ(t){return function(e){return e.lift(new oZ(t))}}(()=>function sZ(t=0,n,e){let i=-1;return FA(n)?i=Number(n)<1?1:Number(n):xe(n)&&(e=n),xe(e)||(e=mp),new $(r=>{const o=FA(t)?t:+t-e.now();return e.schedule(cZ,o,{index:0,period:i,subscriber:r})})}(t,n))}let zv;try{zv=typeof Intl<"u"&&Intl.v8BreakIterator}catch{zv=!1}let S3,gc=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function aU(t){return t===ES}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zv)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Eu))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const VA=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function HA(){if(S3)return S3;if("object"!=typeof document||!document)return S3=new Set(VA),S3;let t=document.createElement("input");return S3=new Set(VA.filter(n=>(t.setAttribute("type",n),t.type===n))),S3}let Bd,K4,Pv;function q4(t){return function lZ(){if(null==Bd&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Bd=!0}))}finally{Bd=Bd||!1}return Bd}()?t:!!t.capture}function uZ(){if(null==K4){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return K4=!1,K4;if("scrollBehavior"in document.documentElement.style)K4=!0;else{const t=Element.prototype.scrollTo;K4=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return K4}function vp(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function j0(t){return t.composedPath?t.composedPath()[0]:t.target}function Iv(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const fZ=new Gn("cdk-dir-doc",{providedIn:"root",factory:function pZ(){return li(ao)}}),mZ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let E3=(()=>{class t{constructor(e){this.value="ltr",this.change=new Cr,e&&(this.value=function gZ(t){const n=t?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?mZ.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(fZ,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jd=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})(),yZ=(()=>{class t{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new ne,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new $(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(Av(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):cn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(oc(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=H0(i),o=e.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>B0(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Sr),Sn(gc),Sn(ao,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yp=(()=>{class t{constructor(e,i,r){this._platform=e,this._change=new ne,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Av(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(gc),Sn(Sr),Sn(ao,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bu=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})(),Tv=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[jd,Bu,jd,Bu]})}return t})();class Lv{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class Dv extends Lv{constructor(n,e,i,r,o){super(),this.component=n,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class Ov extends Lv{constructor(n,e,i,r){super(),this.templateRef=n,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class bZ extends Lv{constructor(n){super(),this.element=n instanceof zr?n.nativeElement:n}}class kv{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof Dv?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof Ov?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof bZ?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class xZ extends kv{constructor(n,e,i,r,o){super(),this.outletElement=n,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const x=c.element,z=this._document.createComment("dom-portal");x.parentNode.insertBefore(z,x),this.outletElement.appendChild(x),this._attachedPortal=c,super.setDisposeFn(()=>{z.parentNode&&z.parentNode.replaceChild(x,z)})},this._document=o}attachComponentPortal(n){const i=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let r;return n.viewContainerRef?(r=n.viewContainerRef.createComponent(i,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(n.injector||this._defaultInjector||hc.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=n,r}attachTemplatePortal(n){let e=n.viewContainerRef,i=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=n,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let Nv=(()=>{class t extends kv{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Cr,this.attachDomPortal=o=>{const c=o.element,x=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(x,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{x.parentNode&&x.parentNode.replaceChild(c,x)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(o,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static#e=this.\u0275fac=function(i){return new(i||t)(Et(F6),Et(Dc),Et(ao))};static#t=this.\u0275dir=In({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Qi]})}return t})(),A3=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})();const BA=uZ();class wZ{constructor(n,e){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=mc(-this._previousScrollPosition.left),n.style.top=mc(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,i=n.style,r=this._document.body.style,o=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),BA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),BA&&(i.scrollBehavior=o,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class CZ{constructor(n,e,i,r){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0).pipe(oc(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class jA{enable(){}disable(){}attach(){}}function Rv(t,n){return n.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function UA(t,n){return n.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class MZ{constructor(n,e,i,r){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Rv(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let SZ=(()=>{class t{constructor(e,i,r,o){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new jA,this.close=c=>new CZ(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new wZ(this._viewportRuler,this._document),this.reposition=c=>new MZ(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(yZ),Sn(yp),Sn(Sr),Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Fv{constructor(n){if(this.scrollStrategy=new jA,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const e=Object.keys(n);for(const i of e)void 0!==n[i]&&(this[i]=n[i])}}}class EZ{constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}}let GA=(()=>{class t{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),AZ=(()=>{class t extends GA{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){const x=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>x.next(r)):x.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao),Sn(Sr,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zZ=(()=>{class t extends GA{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=j0(o)},this._clickListener=o=>{const c=j0(o),x="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const z=this._attachedOverlays.slice();for(let O=z.length-1;O>-1;O--){const J=z[O];if(J._outsidePointerEvents.observers.length<1||!J.hasAttached())continue;if(J.overlayElement.contains(c)||J.overlayElement.contains(x))break;const le=J._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>le.next(o)):le.next(o)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao),Sn(gc),Sn(Sr,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ud=(()=>{class t{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Iv()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(e),Iv()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao),Sn(gc))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class Gd{constructor(n,e,i,r,o,c,x,z,O,J=!1){this._portalOutlet=n,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=c,this._document=x,this._location=z,this._outsideClickDispatcher=O,this._animationsDisabled=J,this._backdropElement=null,this._backdropClick=new ne,this._attachments=new ne,this._detachments=new ne,this._locationChanges=_.EMPTY,this._backdropClickHandler=le=>this._backdropClick.next(le),this._backdropTransitionendHandler=le=>{this._disposeBackdrop(le.target)},this._keydownEvents=new ne,this._outsidePointerEvents=new ne,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(R1(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=mc(this._config.width),n.height=mc(this._config.height),n.minWidth=mc(this._config.minWidth),n.minHeight=mc(this._config.minHeight),n.maxWidth=mc(this._config.maxWidth),n.maxHeight=mc(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,e,i){const r=hp(e||[]).filter(o=>!!o);r.length&&(i?n.classList.add(...r):n.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(V1(un(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const WA="cdk-overlay-connected-position-bounding-box",PZ=/([A-Za-z%]+)$/;class IZ{get positions(){return this._preferredPositions}constructor(n,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ne,this._resizeSubscription=_.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._validatePositions(),n.hostElement.classList.add(WA),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let c;for(let x of this._preferredPositions){let z=this._getOriginPoint(n,r,x),O=this._getOverlayPoint(z,e,x),J=this._getOverlayFit(O,e,i,x);if(J.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(x,z);this._canFitWithFlexibleDimensions(J,O,i)?o.push({position:x,origin:z,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(z,x)}):(!c||c.overlayFit.visibleArea<J.visibleArea)&&(c={overlayFit:J,overlayPoint:O,originPoint:z,position:x,overlayRect:e})}if(o.length){let x=null,z=-1;for(const O of o){const J=O.boundingBoxRect.width*O.boundingBoxRect.height*(O.position.weight||1);J>z&&(z=J,x=O)}return this._isPushed=!1,void this._applyPosition(x.position,x.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Q4(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(WA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,i){let r,o;if("center"==i.originX)r=n.left+n.width/2;else{const c=this._isRtl()?n.right:n.left,x=this._isRtl()?n.left:n.right;r="start"==i.originX?c:x}return e.left<0&&(r-=e.left),o="center"==i.originY?n.top+n.height/2:"top"==i.originY?n.top:n.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(n,e,i){let r,o;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:n.x+r,y:n.y+o}}_getOverlayFit(n,e,i,r){const o=XA(e);let{x:c,y:x}=n,z=this._getOffset(r,"x"),O=this._getOffset(r,"y");z&&(c+=z),O&&(x+=O);let be=0-x,Ee=x+o.height-i.height,ut=this._subtractOverflows(o.width,0-c,c+o.width-i.width),mt=this._subtractOverflows(o.height,be,Ee),Nt=ut*mt;return{visibleArea:Nt,isCompletelyWithinViewport:o.width*o.height===Nt,fitsInViewportVertically:mt===o.height,fitsInViewportHorizontally:ut==o.width}}_canFitWithFlexibleDimensions(n,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,o=i.right-e.x,c=YA(this._overlayRef.getConfig().minHeight),x=YA(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=c&&c<=r)&&(n.fitsInViewportHorizontally||null!=x&&x<=o)}return!1}_pushOverlayOnScreen(n,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const r=XA(e),o=this._viewportRect,c=Math.max(n.x+r.width-o.width,0),x=Math.max(n.y+r.height-o.height,0),z=Math.max(o.top-i.top-n.y,0),O=Math.max(o.left-i.left-n.x,0);let J=0,le=0;return J=r.width<=o.width?O||-c:n.x<this._viewportMargin?o.left-i.left-n.x:0,le=r.height<=o.height?z||-x:n.y<this._viewportMargin?o.top-i.top-n.y:0,this._previousPushAmount={x:J,y:le},{x:n.x+J,y:n.y+le}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new EZ(n,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=n.overlayY;i="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(n,e){const i=this._viewportRect,r=this._isRtl();let o,c,x,J,le,be;if("top"===e.overlayY)c=n.y,o=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)x=i.height-n.y+2*this._viewportMargin,o=i.height-x+this._viewportMargin;else{const Ee=Math.min(i.bottom-n.y+i.top,n.y),ut=this._lastBoundingBoxSize.height;o=2*Ee,c=n.y-Ee,o>ut&&!this._isInitialRender&&!this._growAfterOpen&&(c=n.y-ut/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)be=i.width-n.x+this._viewportMargin,J=n.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)le=n.x,J=i.right-n.x;else{const Ee=Math.min(i.right-n.x+i.left,n.x),ut=this._lastBoundingBoxSize.width;J=2*Ee,le=n.x-Ee,J>ut&&!this._isInitialRender&&!this._growAfterOpen&&(le=n.x-ut/2)}return{top:c,left:le,bottom:x,right:be,width:J,height:o}}_setBoundingBoxStyles(n,e){const i=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=mc(i.height),r.top=mc(i.top),r.bottom=mc(i.bottom),r.width=mc(i.width),r.left=mc(i.left),r.right=mc(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=mc(o)),c&&(r.maxWidth=mc(c))}this._lastBoundingBoxSize=i,Q4(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Q4(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Q4(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const J=this._viewportRuler.getViewportScrollPosition();Q4(i,this._getExactOverlayY(e,n,J)),Q4(i,this._getExactOverlayX(e,n,J))}else i.position="static";let x="",z=this._getOffset(e,"x"),O=this._getOffset(e,"y");z&&(x+=`translateX(${z}px) `),O&&(x+=`translateY(${O}px)`),i.transform=x.trim(),c.maxHeight&&(r?i.maxHeight=mc(c.maxHeight):o&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=mc(c.maxWidth):o&&(i.maxWidth="")),Q4(this._pane.style,i)}_getExactOverlayY(n,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===n.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=mc(o.y),r}_getExactOverlayX(n,e,i){let c,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,n);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),c=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=mc(o.x),r}_getScrollVisibility(){const n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:UA(n,i),isOriginOutsideView:Rv(n,i),isOverlayClipped:UA(e,i),isOverlayOutsideView:Rv(e,i)}}_subtractOverflows(n,...e){return e.reduce((i,r)=>i-Math.max(r,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+n-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return"x"===e?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&hp(n).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof zr)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const e=n.width||0,i=n.height||0;return{top:n.y,bottom:n.y+i,left:n.x,right:n.x+e,height:i,width:e}}}function Q4(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function YA(t){if("number"!=typeof t&&null!=t){const[n,e]=t.split(PZ);return e&&"px"!==e?null:parseFloat(n)}return t||null}function XA(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const ZA="cdk-global-overlay-wrapper";class TZ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(ZA),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:c,maxHeight:x}=i,z=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),O=!("100%"!==o&&"100vh"!==o||x&&"100%"!==x&&"100vh"!==x),J=this._xPosition,le=this._xOffset,be="rtl"===this._overlayRef.getConfig().direction;let Ee="",ut="",mt="";z?mt="flex-start":"center"===J?(mt="center",be?ut=le:Ee=le):be?"left"===J||"end"===J?(mt="flex-end",Ee=le):("right"===J||"start"===J)&&(mt="flex-start",ut=le):"left"===J||"start"===J?(mt="flex-start",Ee=le):("right"===J||"end"===J)&&(mt="flex-end",ut=le),n.position=this._cssPosition,n.marginLeft=z?"0":Ee,n.marginTop=O?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=z?"0":ut,e.justifyContent=mt,e.alignItems=O?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(ZA),i.justifyContent=i.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let LZ=(()=>{class t{constructor(e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new TZ}flexibleConnectedTo(e){return new IZ(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(yp),Sn(ao),Sn(gc),Sn(Ud))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),DZ=0,Hl=(()=>{class t{constructor(e,i,r,o,c,x,z,O,J,le,be,Ee){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=x,this._ngZone=z,this._document=O,this._directionality=J,this._location=le,this._outsideClickDispatcher=be,this._animationsModuleType=Ee}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),c=new Fv(e);return c.direction=c.direction||this._directionality.value,new Gd(o,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+DZ++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Pu)),new xZ(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(SZ),Sn(Ud),Sn(F6),Sn(LZ),Sn(AZ),Sn(hc),Sn(Sr),Sn(ao),Sn(E3),Sn(vd),Sn(zZ),Sn(B2,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const NZ={provide:new Gn("cdk-connected-overlay-scroll-strategy"),deps:[Hl],useFactory:function kZ(t){return()=>t.scrollStrategies.reposition()}};let J4=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[Hl,NZ],imports:[jd,A3,Tv,Tv]})}return t})();function Vv(...t){if(1===t.length){const n=t[0];if(g(n))return _p(n,null);if(v(n)&&Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);return _p(e.map(i=>n[i]),e)}}if("function"==typeof t[t.length-1]){const n=t.pop();return _p(t=1===t.length&&g(t[0])?t[0]:t,null).pipe(ue(e=>n(...e)))}return _p(t,null)}function _p(t,n){return new $(e=>{const i=t.length;if(0===i)return void e.complete();const r=new Array(i);let o=0,c=0;for(let x=0;x<i;x++){const z=it(t[x]);let O=!1;e.add(z.subscribe({next:J=>{O||(O=!0,c++),r[x]=J},error:J=>e.error(J),complete:()=>{o++,(o===i||!O)&&(c===i&&e.next(n?n.reduce((J,le,be)=>(J[le]=r[be],J),{}):r),e.complete())}}))}})}const VZ=new class FZ extends Vl{}(class RZ extends fp{constructor(n,e){super(n,e),this.scheduler=n,this.work=e}schedule(n,e=0){return e>0?super.schedule(n,e):(this.delay=e,this.state=n,this.scheduler.flush(this),this)}execute(n,e){return e>0||this.closed?super.execute(n,e):this._execute(n,e)}requestAsyncId(n,e,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(n,e,i):n.flush(this)}});class G2{constructor(n,e,i){this.kind=n,this.value=e,this.error=i,this.hasValue="N"===n}observe(n){switch(this.kind){case"N":return n.next&&n.next(this.value);case"E":return n.error&&n.error(this.error);case"C":return n.complete&&n.complete()}}do(n,e,i){switch(this.kind){case"N":return n&&n(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(n,e,i){return n&&"function"==typeof n.next?this.observe(n):this.do(n,e,i)}toObservable(){switch(this.kind){case"N":return cn(this.value);case"E":return W4(this.error);case"C":return W5()}throw new Error("unexpected notification kind value")}static createNext(n){return typeof n<"u"?new G2("N",n):G2.undefinedValueNotification}static createError(n){return new G2("E",void 0,n)}static createComplete(){return G2.completeNotification}}G2.completeNotification=new G2("C"),G2.undefinedValueNotification=new G2("N",void 0);class bp extends R{constructor(n,e,i=0){super(n),this.scheduler=e,this.delay=i}static dispatch(n){const{notification:e,destination:i}=n;e.observe(i),this.unsubscribe()}scheduleMessage(n){this.destination.add(this.scheduler.schedule(bp.dispatch,this.delay,new jZ(n,this.destination)))}_next(n){this.scheduleMessage(G2.createNext(n))}_error(n){this.scheduleMessage(G2.createError(n)),this.unsubscribe()}_complete(){this.scheduleMessage(G2.createComplete()),this.unsubscribe()}}class jZ{constructor(n,e){this.notification=n,this.destination=e}}class UZ extends ne{constructor(n=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const e=this._events;e.push(n),e.length>this._bufferSize&&e.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new GZ(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const e=this._infiniteTimeWindow,i=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,o=i.length;let c;if(this.closed)throw new ie;if(this.isStopped||this.hasError?c=_.EMPTY:(this.observers.push(n),c=new q(this,n)),r&&n.add(n=new bp(n,r)),e)for(let x=0;x<o&&!n.closed;x++)n.next(i[x]);else for(let x=0;x<o&&!n.closed;x++)n.next(i[x].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),c}_getNow(){return(this.scheduler||VZ).now()}_trimBufferThenGetEvents(){const n=this._getNow(),e=this._bufferSize,i=this._windowTime,r=this._events,o=r.length;let c=0;for(;c<o&&!(n-r[c].time<i);)c++;return o>e&&(c=Math.max(c,o-e)),c>0&&r.splice(0,c),r}}class GZ{constructor(n,e){this.time=n,this.value=e}}function Hv(t,n,e){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:n,refCount:!1,scheduler:e},r=>r.lift(function WZ({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:e,scheduler:i}){let r,c,o=0,x=!1,z=!1;return function(J){let le;o++,!r||x?(x=!1,r=new UZ(t,n,i),le=r.subscribe(this),c=J.subscribe({next(be){r.next(be)},error(be){x=!0,r.error(be)},complete(){z=!0,c=void 0,r.complete()}}),z&&(c=void 0)):le=r.subscribe(this),this.add(()=>{o--,le.unsubscribe(),le=void 0,c&&!z&&e&&0===o&&(c.unsubscribe(),c=void 0,r=void 0)})}}(i))}class Wd{}let $A=(()=>{class t extends Wd{getTranslation(e){return cn({})}static \u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static \u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class Bv{}let qA=(()=>{class t{handle(e){return e.key}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();function xp(t,n){if(t===n)return!0;if(null===t||null===n)return!1;if(t!=t&&n!=n)return!0;let r,o,c,e=typeof t;if(e==typeof n&&"object"==e){if(!Array.isArray(t)){if(Array.isArray(n))return!1;for(o in c=Object.create(null),t){if(!xp(t[o],n[o]))return!1;c[o]=!0}for(o in n)if(!(o in c)&&typeof n[o]<"u")return!1;return!0}if(!Array.isArray(n))return!1;if((r=t.length)==n.length){for(o=0;o<r;o++)if(!xp(t[o],n[o]))return!1;return!0}}return!1}function ju(t){return typeof t<"u"&&null!==t}function jv(t){return t&&"object"==typeof t&&!Array.isArray(t)}function KA(t,n){let e=Object.assign({},t);return jv(t)&&jv(n)&&Object.keys(n).forEach(i=>{jv(n[i])?i in t?e[i]=KA(t[i],n[i]):Object.assign(e,{[i]:n[i]}):Object.assign(e,{[i]:n[i]})}),e}class wp{}let QA=(()=>{class t extends wp{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,i){let r;return r="string"==typeof e?this.interpolateString(e,i):"function"==typeof e?this.interpolateFunction(e,i):e,r}getValue(e,i){let r="string"==typeof i?i.split("."):[i];i="";do{i+=r.shift(),!ju(e)||!ju(e[i])||"object"!=typeof e[i]&&r.length?r.length?i+=".":e=void 0:(e=e[i],i="")}while(r.length);return e}interpolateFunction(e,i){return e(i)}interpolateString(e,i){return i?e.replace(this.templateMatcher,(r,o)=>{let c=this.getValue(i,o);return ju(c)?c:r}):e}static \u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static \u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class Cp{}let JA=(()=>{class t extends Cp{compile(e,i){return e}compileTranslations(e,i){return e}static \u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static \u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class ez{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Cr;onLangChange=new Cr;onDefaultLangChange=new Cr}const Uv=new Gn("USE_STORE"),Gv=new Gn("USE_DEFAULT_LANG"),Wv=new Gn("DEFAULT_LANGUAGE"),Yv=new Gn("USE_EXTEND");let Bl=(()=>{class t{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new Cr;_onLangChange=new Cr;_onDefaultLangChange=new Cr;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(e){this.isolate?this._defaultLang=e:this.store.defaultLang=e}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(e){this.isolate?this._currentLang=e:this.store.currentLang=e}get langs(){return this.isolate?this._langs:this.store.langs}set langs(e){this.isolate?this._langs=e:this.store.langs=e}get translations(){return this.isolate?this._translations:this.store.translations}set translations(e){this.isolate?this._translations=e:this.store.translations=e}constructor(e,i,r,o,c,x=!0,z=!1,O=!1,J){this.store=e,this.currentLoader=i,this.compiler=r,this.parser=o,this.missingTranslationHandler=c,this.useDefaultLang=x,this.isolate=z,this.extend=O,J&&this.setDefaultLang(J)}setDefaultLang(e){if(e===this.defaultLang)return;let i=this.retrieveTranslations(e);typeof i<"u"?(null==this.defaultLang&&(this.defaultLang=e),i.pipe(R1(1)).subscribe(r=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(e===this.currentLang)return cn(this.translations[e]);let i=this.retrieveTranslations(e);return typeof i<"u"?(this.currentLang||(this.currentLang=e),i.pipe(R1(1)).subscribe(r=>{this.changeLang(e)}),i):(this.changeLang(e),cn(this.translations[e]))}retrieveTranslations(e){let i;return(typeof this.translations[e]>"u"||this.extend)&&(this._translationRequests[e]=this._translationRequests[e]||this.getTranslation(e),i=this._translationRequests[e]),i}getTranslation(e){this.pending=!0;const i=this.currentLoader.getTranslation(e).pipe(Hv(1),R1(1));return this.loadingTranslations=i.pipe(ue(r=>this.compiler.compileTranslations(r,e)),Hv(1),R1(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[e]=this.extend&&this.translations[e]?{...r,...this.translations[e]}:r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),i}setTranslation(e,i,r=!1){i=this.compiler.compileTranslations(i,e),this.translations[e]=(r||this.extend)&&this.translations[e]?KA(this.translations[e],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){e.forEach(i=>{-1===this.langs.indexOf(i)&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(e,i,r){let o;if(i instanceof Array){let c={},x=!1;for(let z of i)c[z]=this.getParsedResult(e,z,r),R0(c[z])&&(x=!0);return x?Vv(i.map(O=>R0(c[O])?c[O]:cn(c[O]))).pipe(ue(O=>{let J={};return O.forEach((le,be)=>{J[i[be]]=le}),J})):c}if(e&&(o=this.parser.interpolate(this.parser.getValue(e,i),r)),typeof o>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(o=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),r)),typeof o>"u"){let c={key:i,translateService:this};typeof r<"u"&&(c.interpolateParams=r),o=this.missingTranslationHandler.handle(c)}return typeof o<"u"?o:i}get(e,i){if(!ju(e)||!e.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(j4(r=>R0(r=this.getParsedResult(r,e,i))?r:cn(r)));{let r=this.getParsedResult(this.translations[this.currentLang],e,i);return R0(r)?r:cn(r)}}getStreamOnTranslationChange(e,i){if(!ju(e)||!e.length)throw new Error('Parameter "key" required');return d3(G4(()=>this.get(e,i)),this.onTranslationChange.pipe(zt(r=>{const o=this.getParsedResult(r.translations,e,i);return"function"==typeof o.subscribe?o:cn(o)})))}stream(e,i){if(!ju(e)||!e.length)throw new Error('Parameter "key" required');return d3(G4(()=>this.get(e,i)),this.onLangChange.pipe(zt(r=>{const o=this.getParsedResult(r.translations,e,i);return R0(o)?o:cn(o)})))}instant(e,i){if(!ju(e)||!e.length)throw new Error('Parameter "key" required');let r=this.getParsedResult(this.translations[this.currentLang],e,i);if(R0(r)){if(e instanceof Array){let o={};return e.forEach((c,x)=>{o[e[x]]=e[x]}),o}return e}return r}set(e,i,r=this.currentLang){this.translations[r][e]=this.compiler.compile(i,r),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeLang(e){this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e)}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.getTranslation(e)}resetLang(e){this._translationRequests[e]=void 0,this.translations[e]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof e>"u"?void 0:(-1!==e.indexOf("-")&&(e=e.split("-")[0]),-1!==e.indexOf("_")&&(e=e.split("_")[0]),e)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let e=window.navigator.languages?window.navigator.languages[0]:null;return e=e||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,e}static \u0275fac=function(i){return new(i||t)(Sn(ez),Sn(Wd),Sn(Cp),Sn(wp),Sn(Bv),Sn(Gv),Sn(Uv),Sn(Yv),Sn(Wv))};static \u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),U0=(()=>{class t{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(e,i){this.translate=e,this._ref=i}updateValue(e,i,r){let o=c=>{this.value=void 0!==c?c:e,this.lastKey=e,this._ref.markForCheck()};if(r){let c=this.translate.getParsedResult(r,e,i);R0(c.subscribe)?c.subscribe(o):o(c)}this.translate.get(e,i).subscribe(o)}transform(e,...i){if(!e||!e.length)return e;if(xp(e,this.lastKey)&&xp(i,this.lastParams))return this.value;let r;if(ju(i[0])&&i.length)if("string"==typeof i[0]&&i[0].length){let o=i[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{r=JSON.parse(o)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${i[0]}`)}}else"object"==typeof i[0]&&!Array.isArray(i[0])&&(r=i[0]);return this.lastKey=e,this.lastParams=i,this.updateValue(e,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(o=>{this.lastKey&&o.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,r,o.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(o=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r,o.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(i){return new(i||t)(Et(Bl,16),Et(E2,16))};static \u0275pipe=kr({name:"translate",type:t,pure:!1});static \u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),tz=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:Wd,useClass:$A},e.compiler||{provide:Cp,useClass:JA},e.parser||{provide:wp,useClass:QA},e.missingTranslationHandler||{provide:Bv,useClass:qA},ez,{provide:Uv,useValue:e.isolate},{provide:Gv,useValue:e.useDefaultLang},{provide:Yv,useValue:e.extend},{provide:Wv,useValue:e.defaultLanguage},Bl]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:Wd,useClass:$A},e.compiler||{provide:Cp,useClass:JA},e.parser||{provide:wp,useClass:QA},e.missingTranslationHandler||{provide:Bv,useClass:qA},{provide:Uv,useValue:e.isolate},{provide:Gv,useValue:e.useDefaultLang},{provide:Yv,useValue:e.extend},{provide:Wv,useValue:e.defaultLanguage},Bl]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=wi({type:t});static \u0275inj=St({})}return t})(),e6=(()=>{class t{constructor(){this.showingRoute=!1,this.mapReady=!1,this.routeFoundListener=new ne,this.showRouteListener=new ne,this.mapReadyListener=new ne,this.resetViewListener=new ne}getRouteFoundListener(){return this.routeFoundListener.asObservable()}getMapReadyListener(){return this.mapReadyListener.asObservable()}getShowRouteListener(){return this.showRouteListener.asObservable()}getResetViewListener(){return this.resetViewListener.asObservable()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var YZ=w(80939);let d0=(()=>{class t{constructor(e){this.stateService=e,this.showRoutePicker=!1,this.showClosestAmenityPicker=!1,this.filteredShop=null,this.filteredAmenity=null,this.startPointListener=new ne,this.endPointListener=new ne,this.accessibleOnlyToggleListener=new ne,this.amenityToggleListener=new ne,this.floorChangeListener=new ne,this.centerToFeatureListener=new ne,this.routeToClosestAmenityListener=new ne,this.stepChangeListener=new ne}getStartPointListener(){return this.startPointListener.asObservable()}getEndPointListener(){return this.endPointListener.asObservable()}getAccessibleOnlyToggleListener(){return this.accessibleOnlyToggleListener.asObservable()}getAmenityToggleListener(){return this.amenityToggleListener.asObservable()}getFloorChangeListener(){return this.floorChangeListener.asObservable()}getCenterToFeatureListener(){return this.centerToFeatureListener.asObservable()}getRouteToClosestAmenityListener(){return this.routeToClosestAmenityListener.asObservable()}getStepChangeListener(){return this.stepChangeListener.asObservable()}onSetStartPoi(e){this.selectedStartPoi=this.stateService.state.allFeatures.features.find(i=>i.id===e?.id),this.startPointListener.next(this.selectedStartPoi)}onSetEndPoi(e){this.selectedEndPoi=this.stateService.state.allFeatures.features.find(i=>i.id===e?.id),this.endPointListener.next(this.selectedEndPoi)}onAccessibleRouteToggle(){this.stateService.state.accessibleRoute=!this.stateService.state.accessibleRoute,this.accessibleOnlyToggleListener.next()}onAmenityToggle(e,i){"shop"===e?this.filteredShop=this.filteredShop===i?null:i:"amenities"===e&&(this.filteredAmenity=this.filteredAmenity===i?null:i),this.amenityToggleListener.next({category:e,amenityId:i})}onRouteToClosestAmenity(){this.routeToClosestAmenityListener.next()}onStepChangeListener(e){this.stepChangeListener.next(e)}get sortedPOIs(){return this.stateService.state.allFeatures.features.filter(e=>("poi"===e.properties.usecase||"poi"===e.properties.type)&&"escalator"!==e.properties.type&&"elevator"!==e.properties.type&&"staircase"!==e.properties.type&&e.properties.place_id===this.stateService.state.defaultPlaceId).sort((e,i)=>e.properties.title>i.properties.title?-1:1).sort((e,i)=>e.properties.level>i.properties.level?1:-1).map(e=>{const i=(0,YZ.isPointWithinRadius)({lat:e.geometry.coordinates[1],lng:e.geometry.coordinates[0]},{lat:this.stateService.state.place.location.lat,lng:this.stateService.state.place.location.lng},1e4);return{...e,icon:this.stateService.state.amenities.filter(r=>r.id===e.properties.amenity)[0]?this.stateService.state.amenities.filter(r=>r.id===e.properties.amenity)[0].icon:"",category:this.stateService.state.amenities.filter(r=>r.id===e.properties.amenity)[0]?this.stateService.state.amenities.filter(r=>r.id===e.properties.amenity)[0].title:"",search_query:e.properties.title+" "+e.properties.level,coordinates:e.geometry.coordinates,isInside:i,score:0,foundInDescription:!1}}).filter(e=>e.isInside)}getFloorName(e,i){return e.metadata&&e.metadata["title_"+i]?e.metadata["title_"+i]:e.name}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(u0))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nz(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,i)}return e}function dr(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?nz(Object(e),!0).forEach(function(i){Cc(t,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):nz(Object(e)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}return t}function Mp(t){return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function iz(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Cc(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function Xv(t,n){return function KZ(t){if(Array.isArray(t))return t}(t)||function JZ(t,n){var e=null==t?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var c,x,i=[],r=!0,o=!1;try{for(e=e.call(t);!(r=(c=e.next()).done)&&(i.push(c.value),!n||i.length!==n);r=!0);}catch(z){o=!0,x=z}finally{try{!r&&null!=e.return&&e.return()}finally{if(o)throw x}}return i}}(t,n)||rz(t,n)||function t$(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xd(t){return function qZ(t){if(Array.isArray(t))return Zv(t)}(t)||function QZ(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rz(t)||function e$(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rz(t,n){if(t){if("string"==typeof t)return Zv(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Zv(t,n)}}function Zv(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}var oz=function(){},$v={},az={},sz=null,cz={mark:oz,measure:oz};try{typeof window<"u"&&($v=window),typeof document<"u"&&(az=document),typeof MutationObserver<"u"&&(sz=MutationObserver),typeof performance<"u"&&(cz=performance)}catch{}var Ap,zp,Pp,Ip,Tp,lz=($v.navigator||{}).userAgent,uz=void 0===lz?"":lz,Uu=$v,a1=az,dz=sz,Ep=cz,G0=!!a1.documentElement&&!!a1.head&&"function"==typeof a1.addEventListener&&"function"==typeof a1.createElement,hz=~uz.indexOf("MSIE")||~uz.indexOf("Trident/"),W0="___FONT_AWESOME___",fz="fa",pz="svg-inline--fa",t6="data-fa-i2svg",Kv="data-fa-pseudo-element",i$="data-fa-pseudo-element-pending",Qv="data-prefix",Jv="data-icon",mz="fontawesome-i2svg",r$="async",o$=["HTML","HEAD","STYLE","SCRIPT"],gz=function(){try{return!0}catch{return!1}}(),s1="classic",H1="sharp",ey=[s1,H1];function Zd(t){return new Proxy(t,{get:function(e,i){return i in e?e[i]:e[s1]}})}var $d=Zd((Cc(Ap={},s1,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Cc(Ap,H1,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),Ap)),qd=Zd((Cc(zp={},s1,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Cc(zp,H1,{solid:"fass",regular:"fasr",light:"fasl"}),zp)),Kd=Zd((Cc(Pp={},s1,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Cc(Pp,H1,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),Pp)),a$=Zd((Cc(Ip={},s1,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Cc(Ip,H1,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),Ip)),s$=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,vz="fa-layers-text",c$=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,l$=Zd((Cc(Tp={},s1,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Cc(Tp,H1,{900:"fass",400:"fasr",300:"fasl"}),Tp)),yz=[1,2,3,4,5,6,7,8,9,10],u$=yz.concat([11,12,13,14,15,16,17,18,19,20]),d$=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],n6={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Qd=new Set;Object.keys(qd[s1]).map(Qd.add.bind(Qd)),Object.keys(qd[H1]).map(Qd.add.bind(Qd));var h$=[].concat(ey,Xd(Qd),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",n6.GROUP,n6.SWAP_OPACITY,n6.PRIMARY,n6.SECONDARY]).concat(yz.map(function(t){return"".concat(t,"x")})).concat(u$.map(function(t){return"w-".concat(t)})),Jd=Uu.FontAwesomeConfig||{};a1&&"function"==typeof a1.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var n=Xv(t,2),i=n[1],r=function p$(t){return""===t||"false"!==t&&("true"===t||t)}(function f$(t){var n=a1.querySelector("script["+t+"]");if(n)return n.getAttribute(t)}(n[0]));null!=r&&(Jd[i]=r)});var _z={styleDefault:"solid",familyDefault:"classic",cssPrefix:fz,replacementClass:pz,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Jd.familyPrefix&&(Jd.cssPrefix=Jd.familyPrefix);var z3=dr(dr({},_z),Jd);z3.autoReplaceSvg||(z3.observeMutations=!1);var Er={};Object.keys(_z).forEach(function(t){Object.defineProperty(Er,t,{enumerable:!0,set:function(e){z3[t]=e,eh.forEach(function(i){return i(Er)})},get:function(){return z3[t]}})}),Object.defineProperty(Er,"familyPrefix",{enumerable:!0,set:function(n){z3.cssPrefix=n,eh.forEach(function(e){return e(Er)})},get:function(){return z3.cssPrefix}}),Uu.FontAwesomeConfig=Er;var eh=[],h0={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},y$="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function th(){for(var t=12,n="";t-- >0;)n+=y$[62*Math.random()|0];return n}function P3(t){for(var n=[],e=(t||[]).length>>>0;e--;)n[e]=t[e];return n}function ty(t){return t.classList?P3(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(n){return n})}function bz(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Lp(t){return Object.keys(t||{}).reduce(function(n,e){return n+"".concat(e,": ").concat(t[e].trim(),";")},"")}function ny(t){return t.size!==h0.size||t.x!==h0.x||t.y!==h0.y||t.rotate!==h0.rotate||t.flipX||t.flipY}var w$=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function xz(){var t=fz,n=pz,e=Er.cssPrefix,i=Er.replacementClass,r=w$;if(e!==t||i!==n){var o=new RegExp("\\.".concat(t,"\\-"),"g"),c=new RegExp("\\--".concat(t,"\\-"),"g"),x=new RegExp("\\.".concat(n),"g");r=r.replace(o,".".concat(e,"-")).replace(c,"--".concat(e,"-")).replace(x,".".concat(i))}return r}var wz=!1;function iy(){Er.autoAddCss&&!wz&&(function v$(t){if(t&&G0){var n=a1.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t;for(var e=a1.head.childNodes,i=null,r=e.length-1;r>-1;r--){var o=e[r],c=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(c)>-1&&(i=o)}a1.head.insertBefore(n,i)}}(xz()),wz=!0)}var C$={mixout:function(){return{dom:{css:xz,insertCss:iy}}},hooks:function(){return{beforeDOMElementCreation:function(){iy()},beforeI2svg:function(){iy()}}}},Y0=Uu||{};Y0[W0]||(Y0[W0]={}),Y0[W0].styles||(Y0[W0].styles={}),Y0[W0].hooks||(Y0[W0].hooks={}),Y0[W0].shims||(Y0[W0].shims=[]);var jl=Y0[W0],Cz=[],Dp=!1;function nh(t){var n=t.tag,e=t.attributes,i=void 0===e?{}:e,r=t.children,o=void 0===r?[]:r;return"string"==typeof t?bz(t):"<".concat(n," ").concat(function _$(t){return Object.keys(t||{}).reduce(function(n,e){return n+"".concat(e,'="').concat(bz(t[e]),'" ')},"").trim()}(i),">").concat(o.map(nh).join(""),"</").concat(n,">")}function Mz(t,n,e){if(t&&t[n]&&t[n][e])return{prefix:n,iconName:e,icon:t[n][e]}}G0&&((Dp=(a1.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(a1.readyState))||a1.addEventListener("DOMContentLoaded",function t(){a1.removeEventListener("DOMContentLoaded",t),Dp=1,Cz.map(function(n){return n()})}));var ry=function(n,e,i,r){var z,O,J,o=Object.keys(n),c=o.length,x=void 0!==r?function(n,e){return function(i,r,o,c){return n.call(e,i,r,o,c)}}(e,r):e;for(void 0===i?(z=1,J=n[o[0]]):(z=0,J=i);z<c;z++)J=x(J,n[O=o[z]],O,n);return J};function oy(t){var n=function A$(t){for(var n=[],e=0,i=t.length;e<i;){var r=t.charCodeAt(e++);if(r>=55296&&r<=56319&&e<i){var o=t.charCodeAt(e++);56320==(64512&o)?n.push(((1023&r)<<10)+(1023&o)+65536):(n.push(r),e--)}else n.push(r)}return n}(t);return 1===n.length?n[0].toString(16):null}function Sz(t){return Object.keys(t).reduce(function(n,e){var i=t[e];return i.icon?n[i.iconName]=i.icon:n[e]=i,n},{})}function ay(t,n){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==i&&i,o=Sz(n);"function"!=typeof jl.hooks.addPack||r?jl.styles[t]=dr(dr({},jl.styles[t]||{}),o):jl.hooks.addPack(t,Sz(n)),"fas"===t&&ay("fa",n)}var Op,kp,Np,I3=jl.styles,P$=jl.shims,I$=(Cc(Op={},s1,Object.values(Kd[s1])),Cc(Op,H1,Object.values(Kd[H1])),Op),sy=null,Ez={},Az={},zz={},Pz={},Iz={},T$=(Cc(kp={},s1,Object.keys($d[s1])),Cc(kp,H1,Object.keys($d[H1])),kp);var Tz=function(){var n=function(o){return ry(I3,function(c,x,z){return c[z]=ry(x,o,{}),c},{})};Ez=n(function(r,o,c){return o[3]&&(r[o[3]]=c),o[2]&&o[2].filter(function(z){return"number"==typeof z}).forEach(function(z){r[z.toString(16)]=c}),r}),Az=n(function(r,o,c){return r[c]=c,o[2]&&o[2].filter(function(z){return"string"==typeof z}).forEach(function(z){r[z]=c}),r}),Iz=n(function(r,o,c){var x=o[2];return r[c]=c,x.forEach(function(z){r[z]=c}),r});var e="far"in I3||Er.autoFetchSvg,i=ry(P$,function(r,o){var c=o[0],x=o[1],z=o[2];return"far"===x&&!e&&(x="fas"),"string"==typeof c&&(r.names[c]={prefix:x,iconName:z}),"number"==typeof c&&(r.unicodes[c.toString(16)]={prefix:x,iconName:z}),r},{names:{},unicodes:{}});zz=i.names,Pz=i.unicodes,sy=Rp(Er.styleDefault,{family:Er.familyDefault})};function cy(t,n){return(Ez[t]||{})[n]}function r6(t,n){return(Iz[t]||{})[n]}function Lz(t){return zz[t]||{prefix:null,iconName:null}}function Wu(){return sy}(function g$(t){eh.push(t)})(function(t){sy=Rp(t.styleDefault,{family:Er.familyDefault})}),Tz();var ly=function(){return{prefix:null,iconName:null,rest:[]}};function Rp(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,i=void 0===e?s1:e;return qd[i][t]||qd[i][$d[i][t]]||(t in jl.styles?t:null)||null}var Dz=(Cc(Np={},s1,Object.keys(Kd[s1])),Cc(Np,H1,Object.keys(Kd[H1])),Np);function Fp(t){var n,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==i&&i,o=(Cc(n={},s1,"".concat(Er.cssPrefix,"-").concat(s1)),Cc(n,H1,"".concat(Er.cssPrefix,"-").concat(H1)),n),c=null,x=s1;(t.includes(o[s1])||t.some(function(O){return Dz[s1].includes(O)}))&&(x=s1),(t.includes(o[H1])||t.some(function(O){return Dz[H1].includes(O)}))&&(x=H1);var z=t.reduce(function(O,J){var le=function D$(t,n){var e=n.split("-"),i=e[0],r=e.slice(1).join("-");return i!==t||""===r||function L$(t){return~h$.indexOf(t)}(r)?null:r}(Er.cssPrefix,J);if(I3[J]?(J=I$[x].includes(J)?a$[x][J]:J,c=J,O.prefix=J):T$[x].indexOf(J)>-1?(c=J,O.prefix=Rp(J,{family:x})):le?O.iconName=le:J!==Er.replacementClass&&J!==o[s1]&&J!==o[H1]&&O.rest.push(J),!r&&O.prefix&&O.iconName){var be="fa"===c?Lz(O.iconName):{},Ee=r6(O.prefix,O.iconName);be.prefix&&(c=null),O.iconName=be.iconName||Ee||O.iconName,O.prefix=be.prefix||O.prefix,"far"===O.prefix&&!I3.far&&I3.fas&&!Er.autoFetchSvg&&(O.prefix="fas")}return O},ly());return(t.includes("fa-brands")||t.includes("fab"))&&(z.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(z.prefix="fad"),!z.prefix&&x===H1&&(I3.fass||Er.autoFetchSvg)&&(z.prefix="fass",z.iconName=r6(z.prefix,z.iconName)||z.iconName),("fa"===z.prefix||"fa"===c)&&(z.prefix=Wu()||"fas"),z}var N$=function(){function t(){(function XZ(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")})(this,t),this.definitions={}}return function ZZ(t,n,e){n&&iz(t.prototype,n),e&&iz(t,e),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"add",value:function(){for(var e=this,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var c=r.reduce(this._pullDefinitions,{});Object.keys(c).forEach(function(x){e.definitions[x]=dr(dr({},e.definitions[x]||{}),c[x]),ay(x,c[x]);var z=Kd[s1][x];z&&ay(z,c[x]),Tz()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(o){var c=r[o],x=c.prefix,z=c.iconName,O=c.icon,J=O[2];e[x]||(e[x]={}),J.length>0&&J.forEach(function(le){"string"==typeof le&&(e[x][le]=O)}),e[x][z]=O}),e}}]),t}(),Oz=[],T3={},L3={},R$=Object.keys(L3);function uy(t,n){for(var e=arguments.length,i=new Array(e>2?e-2:0),r=2;r<e;r++)i[r-2]=arguments[r];return(T3[t]||[]).forEach(function(c){n=c.apply(null,[n].concat(i))}),n}function o6(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];(T3[t]||[]).forEach(function(o){o.apply(null,e)})}function X0(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);return L3[t]?L3[t].apply(null,n):void 0}function dy(t){"fa"===t.prefix&&(t.prefix="fas");var n=t.iconName,e=t.prefix||Wu();if(n)return n=r6(e,n)||n,Mz(kz.definitions,e,n)||Mz(jl.styles,e,n)}var kz=new N$,H$={i2svg:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return G0?(o6("beforeI2svg",n),X0("pseudoElements2svg",n),X0("i2svg",n)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.autoReplaceSvgRoot;!1===Er.autoReplaceSvg&&(Er.autoReplaceSvg=!0),Er.observeMutations=!0,function S$(t){G0&&(Dp?setTimeout(t,0):Cz.push(t))}(function(){j$({autoReplaceSvgRoot:e}),o6("watch",n)})}},tl={noAuto:function(){Er.autoReplaceSvg=!1,Er.observeMutations=!1,o6("noAuto")},config:Er,dom:H$,parse:{icon:function(n){if(null===n)return null;if("object"===Mp(n)&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:r6(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&2===n.length){var e=0===n[1].indexOf("fa-")?n[1].slice(3):n[1],i=Rp(n[0]);return{prefix:i,iconName:r6(i,e)||e}}if("string"==typeof n&&(n.indexOf("".concat(Er.cssPrefix,"-"))>-1||n.match(s$))){var r=Fp(n.split(" "),{skipLookups:!0});return{prefix:r.prefix||Wu(),iconName:r6(r.prefix,r.iconName)||r.iconName}}if("string"==typeof n){var o=Wu();return{prefix:o,iconName:r6(o,n)||n}}}},library:kz,findIconDefinition:dy,toHtml:nh},j$=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,i=void 0===e?a1:e;(Object.keys(jl.styles).length>0||Er.autoFetchSvg)&&G0&&Er.autoReplaceSvg&&tl.dom.i2svg({node:i})};function Vp(t,n){return Object.defineProperty(t,"abstract",{get:n}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(i){return nh(i)})}}),Object.defineProperty(t,"node",{get:function(){if(G0){var i=a1.createElement("div");return i.innerHTML=t.html,i.children}}}),t}function hy(t){var n=t.icons,e=n.main,i=n.mask,r=t.prefix,o=t.iconName,c=t.transform,x=t.symbol,z=t.title,O=t.maskId,J=t.titleId,le=t.extra,be=t.watchable,Ee=void 0!==be&&be,ut=i.found?i:e,mt=ut.width,Nt=ut.height,Ht="fak"===r,vt=[Er.replacementClass,o?"".concat(Er.cssPrefix,"-").concat(o):""].filter(function(dn){return-1===le.classes.indexOf(dn)}).filter(function(dn){return""!==dn||!!dn}).concat(le.classes).join(" "),Zt={children:[],attributes:dr(dr({},le.attributes),{},{"data-prefix":r,"data-icon":o,class:vt,role:le.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(mt," ").concat(Nt)})},gn=Ht&&!~le.classes.indexOf("fa-fw")?{width:"".concat(mt/Nt*16*.0625,"em")}:{};Ee&&(Zt.attributes[t6]=""),z&&(Zt.children.push({tag:"title",attributes:{id:Zt.attributes["aria-labelledby"]||"title-".concat(J||th())},children:[z]}),delete Zt.attributes.title);var bn=dr(dr({},Zt),{},{prefix:r,iconName:o,main:e,mask:i,maskId:O,transform:c,symbol:x,styles:dr(dr({},gn),le.styles)}),ni=i.found&&e.found?X0("generateAbstractMask",bn)||{children:[],attributes:{}}:X0("generateAbstractIcon",bn)||{children:[],attributes:{}},oi=ni.attributes;return bn.children=ni.children,bn.attributes=oi,x?function G$(t){var e=t.iconName,i=t.children,r=t.attributes,o=t.symbol,c=!0===o?"".concat(t.prefix,"-").concat(Er.cssPrefix,"-").concat(e):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:dr(dr({},r),{},{id:c}),children:i}]}]}(bn):function U$(t){var n=t.children,e=t.main,i=t.mask,r=t.attributes,o=t.styles,c=t.transform;if(ny(c)&&e.found&&!i.found){var O={x:e.width/e.height/2,y:.5};r.style=Lp(dr(dr({},o),{},{"transform-origin":"".concat(O.x+c.x/16,"em ").concat(O.y+c.y/16,"em")}))}return[{tag:"svg",attributes:r,children:n}]}(bn)}function Nz(t){var n=t.content,e=t.width,i=t.height,r=t.transform,o=t.title,c=t.extra,x=t.watchable,z=void 0!==x&&x,O=dr(dr(dr({},c.attributes),o?{title:o}:{}),{},{class:c.classes.join(" ")});z&&(O[t6]="");var J=dr({},c.styles);ny(r)&&(J.transform=function x$(t){var n=t.transform,e=t.width,r=t.height,o=void 0===r?16:r,c=t.startCentered,x=void 0!==c&&c,z="";return z+=x&&hz?"translate(".concat(n.x/16-(void 0===e?16:e)/2,"em, ").concat(n.y/16-o/2,"em) "):x?"translate(calc(-50% + ".concat(n.x/16,"em), calc(-50% + ").concat(n.y/16,"em)) "):"translate(".concat(n.x/16,"em, ").concat(n.y/16,"em) "),(z+="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "))+"rotate(".concat(n.rotate,"deg) ")}({transform:r,startCentered:!0,width:e,height:i}),J["-webkit-transform"]=J.transform);var le=Lp(J);le.length>0&&(O.style=le);var be=[];return be.push({tag:"span",attributes:O,children:[n]}),o&&be.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),be}var fy=jl.styles;function py(t){var n=t[0],e=t[1],o=Xv(t.slice(4),1)[0];return{found:!0,width:n,height:e,icon:Array.isArray(o)?{tag:"g",attributes:{class:"".concat(Er.cssPrefix,"-").concat(n6.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Er.cssPrefix,"-").concat(n6.SECONDARY),fill:"currentColor",d:o[0]}},{tag:"path",attributes:{class:"".concat(Er.cssPrefix,"-").concat(n6.PRIMARY),fill:"currentColor",d:o[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:o}}}}var Y$={found:!1,width:512,height:512};function my(t,n){var e=n;return"fa"===n&&null!==Er.styleDefault&&(n=Wu()),new Promise(function(i,r){if(X0("missingIconAbstract"),"fa"===e){var c=Lz(t)||{};t=c.iconName||t,n=c.prefix||n}if(t&&n&&fy[n]&&fy[n][t])return i(py(fy[n][t]));(function X$(t,n){!gz&&!Er.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(n,'" is missing.'))})(t,n),i(dr(dr({},Y$),{},{icon:Er.showMissingIcons&&t&&X0("missingIconAbstract")||{}}))})}var Rz=function(){},gy=Er.measurePerformance&&Ep&&Ep.mark&&Ep.measure?Ep:{mark:Rz,measure:Rz},ih='FA "6.4.2"',Fz=function(n){gy.mark("".concat(ih," ").concat(n," ends")),gy.measure("".concat(ih," ").concat(n),"".concat(ih," ").concat(n," begins"),"".concat(ih," ").concat(n," ends"))},vy={begin:function(n){return gy.mark("".concat(ih," ").concat(n," begins")),function(){return Fz(n)}},end:Fz},Hp=function(){};function Vz(t){return"string"==typeof(t.getAttribute?t.getAttribute(t6):null)}function Q$(t){return a1.createElementNS("http://www.w3.org/2000/svg",t)}function J$(t){return a1.createElement(t)}function Hz(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,i=void 0===e?"svg"===t.tag?Q$:J$:e;if("string"==typeof t)return a1.createTextNode(t);var r=i(t.tag);return Object.keys(t.attributes||[]).forEach(function(c){r.setAttribute(c,t.attributes[c])}),(t.children||[]).forEach(function(c){r.appendChild(Hz(c,{ceFn:i}))}),r}var Bp={replace:function(n){var e=n[0];if(e.parentNode)if(n[1].forEach(function(r){e.parentNode.insertBefore(Hz(r),e)}),null===e.getAttribute(t6)&&Er.keepOriginalSource){var i=a1.createComment(function eq(t){var n=" ".concat(t.outerHTML," ");return"".concat(n,"Font Awesome fontawesome.com ")}(e));e.parentNode.replaceChild(i,e)}else e.remove()},nest:function(n){var e=n[0],i=n[1];if(~ty(e).indexOf(Er.replacementClass))return Bp.replace(n);var r=new RegExp("".concat(Er.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var o=i[0].attributes.class.split(" ").reduce(function(x,z){return z===Er.replacementClass||z.match(r)?x.toSvg.push(z):x.toNode.push(z),x},{toNode:[],toSvg:[]});i[0].attributes.class=o.toSvg.join(" "),0===o.toNode.length?e.removeAttribute("class"):e.setAttribute("class",o.toNode.join(" "))}var c=i.map(function(x){return nh(x)}).join("\n");e.setAttribute(t6,""),e.innerHTML=c}};function Bz(t){t()}function jz(t,n){var e="function"==typeof n?n:Hp;if(0===t.length)e();else{var i=Bz;Er.mutateApproach===r$&&(i=Uu.requestAnimationFrame||Bz),i(function(){var r=function K$(){return!0===Er.autoReplaceSvg?Bp.replace:Bp[Er.autoReplaceSvg]||Bp.replace}(),o=vy.begin("mutate");t.map(r),o(),e()})}}var yy=!1;function Uz(){yy=!0}function _y(){yy=!1}var jp=null;function Gz(t){if(dz&&Er.observeMutations){var n=t.treeCallback,e=void 0===n?Hp:n,i=t.nodeCallback,r=void 0===i?Hp:i,o=t.pseudoElementsCallback,c=void 0===o?Hp:o,x=t.observeMutationsRoot,z=void 0===x?a1:x;jp=new dz(function(O){if(!yy){var J=Wu();P3(O).forEach(function(le){if("childList"===le.type&&le.addedNodes.length>0&&!Vz(le.addedNodes[0])&&(Er.searchPseudoElements&&c(le.target),e(le.target)),"attributes"===le.type&&le.target.parentNode&&Er.searchPseudoElements&&c(le.target.parentNode),"attributes"===le.type&&Vz(le.target)&&~d$.indexOf(le.attributeName))if("class"===le.attributeName&&function $$(t){var n=t.getAttribute?t.getAttribute(Qv):null,e=t.getAttribute?t.getAttribute(Jv):null;return n&&e}(le.target)){var be=Fp(ty(le.target)),ut=be.iconName;le.target.setAttribute(Qv,be.prefix||J),ut&&le.target.setAttribute(Jv,ut)}else(function q$(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Er.replacementClass)})(le.target)&&r(le.target)})}}),G0&&jp.observe(z,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Wz(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},e=function iq(t){var n=t.getAttribute("data-prefix"),e=t.getAttribute("data-icon"),i=void 0!==t.innerText?t.innerText.trim():"",r=Fp(ty(t));return r.prefix||(r.prefix=Wu()),n&&e&&(r.prefix=n,r.iconName=e),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function O$(t,n){return(Az[t]||{})[n]}(r.prefix,t.innerText)||cy(r.prefix,oy(t.innerText))),!r.iconName&&Er.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}(t),i=e.iconName,r=e.prefix,o=e.rest,c=function rq(t){var n=P3(t.attributes).reduce(function(r,o){return"class"!==r.name&&"style"!==r.name&&(r[o.name]=o.value),r},{}),e=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Er.autoA11y&&(e?n["aria-labelledby"]="".concat(Er.replacementClass,"-title-").concat(i||th()):(n["aria-hidden"]="true",n.focusable="false")),n}(t),x=uy("parseNodeAttributes",{},t),z=n.styleParser?function nq(t){var n=t.getAttribute("style"),e=[];return n&&(e=n.split(";").reduce(function(i,r){var o=r.split(":"),c=o[0],x=o.slice(1);return c&&x.length>0&&(i[c]=x.join(":").trim()),i},{})),e}(t):[];return dr({iconName:i,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:h0,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:o,styles:z,attributes:c}},x)}var aq=jl.styles;function Yz(t){var n="nest"===Er.autoReplaceSvg?Wz(t,{styleParser:!1}):Wz(t);return~n.extra.classes.indexOf(vz)?X0("generateLayersText",t,n):X0("generateSvgReplacementMutation",t,n)}var Yu=new Set;function Xz(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!G0)return Promise.resolve();var e=a1.documentElement.classList,i=function(le){return e.add("".concat(mz,"-").concat(le))},r=function(le){return e.remove("".concat(mz,"-").concat(le))},o=Er.autoFetchSvg?Yu:ey.map(function(J){return"fa-".concat(J)}).concat(Object.keys(aq));o.includes("fa")||o.push("fa");var c=[".".concat(vz,":not([").concat(t6,"])")].concat(o.map(function(J){return".".concat(J,":not([").concat(t6,"])")})).join(", ");if(0===c.length)return Promise.resolve();var x=[];try{x=P3(t.querySelectorAll(c))}catch{}if(!(x.length>0))return Promise.resolve();i("pending"),r("complete");var z=vy.begin("onTree"),O=x.reduce(function(J,le){try{var be=Yz(le);be&&J.push(be)}catch(Ee){gz||"MissingIcon"===Ee.name&&console.error(Ee)}return J},[]);return new Promise(function(J,le){Promise.all(O).then(function(be){jz(be,function(){i("active"),i("complete"),r("pending"),"function"==typeof n&&n(),z(),J()})}).catch(function(be){z(),le(be)})})}function sq(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Yz(t).then(function(e){e&&jz([e],n)})}function cq(t){return function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(n||{}).icon?n:dy(n||{}),r=e.mask;return r&&(r=(r||{}).icon?r:dy(r||{})),t(i,dr(dr({},e),{},{mask:r}))}}ey.map(function(t){Yu.add("fa-".concat(t))}),Object.keys($d[s1]).map(Yu.add.bind(Yu)),Object.keys($d[H1]).map(Yu.add.bind(Yu)),Yu=Xd(Yu);var lq=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,r=void 0===i?h0:i,o=e.symbol,c=void 0!==o&&o,x=e.mask,z=void 0===x?null:x,O=e.maskId,J=void 0===O?null:O,le=e.title,be=void 0===le?null:le,Ee=e.titleId,ut=void 0===Ee?null:Ee,mt=e.classes,Nt=void 0===mt?[]:mt,Ht=e.attributes,vt=void 0===Ht?{}:Ht,Zt=e.styles,gn=void 0===Zt?{}:Zt;if(n){var bn=n.prefix,ni=n.iconName,$n=n.icon;return Vp(dr({type:"icon"},n),function(){return o6("beforeDOMElementCreation",{iconDefinition:n,params:e}),Er.autoA11y&&(be?vt["aria-labelledby"]="".concat(Er.replacementClass,"-title-").concat(ut||th()):(vt["aria-hidden"]="true",vt.focusable="false")),hy({icons:{main:py($n),mask:z?py(z.icon):{found:!1,width:null,height:null,icon:{}}},prefix:bn,iconName:ni,transform:dr(dr({},h0),r),symbol:c,title:be,maskId:J,titleId:ut,extra:{attributes:vt,styles:gn,classes:Nt}})})}},uq={mixout:function(){return{icon:cq(lq)}},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=Xz,e.nodeCallback=sq,e}}},provides:function(n){n.i2svg=function(e){var i=e.node,o=e.callback;return Xz(void 0===i?a1:i,void 0===o?function(){}:o)},n.generateSvgReplacementMutation=function(e,i){var r=i.iconName,o=i.title,c=i.titleId,x=i.prefix,z=i.transform,O=i.symbol,J=i.mask,le=i.maskId,be=i.extra;return new Promise(function(Ee,ut){Promise.all([my(r,x),J.iconName?my(J.iconName,J.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(mt){var Nt=Xv(mt,2);Ee([e,hy({icons:{main:Nt[0],mask:Nt[1]},prefix:x,iconName:r,transform:z,symbol:O,maskId:le,title:o,titleId:c,extra:be,watchable:!0})])}).catch(ut)})},n.generateAbstractIcon=function(e){var O,i=e.children,r=e.attributes,o=e.main,c=e.transform,z=Lp(e.styles);return z.length>0&&(r.style=z),ny(c)&&(O=X0("generateAbstractTransformGrouping",{main:o,transform:c,containerWidth:o.width,iconWidth:o.width})),i.push(O||o.icon),{children:i,attributes:r}}}},dq={mixout:function(){return{layer:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,o=void 0===r?[]:r;return Vp({type:"layer"},function(){o6("beforeDOMElementCreation",{assembler:e,params:i});var c=[];return e(function(x){Array.isArray(x)?x.map(function(z){c=c.concat(z.abstract)}):c=c.concat(x.abstract)}),[{tag:"span",attributes:{class:["".concat(Er.cssPrefix,"-layers")].concat(Xd(o)).join(" ")},children:c}]})}}}},hq={mixout:function(){return{counter:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,o=void 0===r?null:r,c=i.classes,x=void 0===c?[]:c,z=i.attributes,O=void 0===z?{}:z,J=i.styles,le=void 0===J?{}:J;return Vp({type:"counter",content:e},function(){return o6("beforeDOMElementCreation",{content:e,params:i}),function W$(t){var n=t.content,e=t.title,i=t.extra,r=dr(dr(dr({},i.attributes),e?{title:e}:{}),{},{class:i.classes.join(" ")}),o=Lp(i.styles);o.length>0&&(r.style=o);var c=[];return c.push({tag:"span",attributes:r,children:[n]}),e&&c.push({tag:"span",attributes:{class:"sr-only"},children:[e]}),c}({content:e.toString(),title:o,extra:{attributes:O,styles:le,classes:["".concat(Er.cssPrefix,"-layers-counter")].concat(Xd(x))}})})}}}},fq={mixout:function(){return{text:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,o=void 0===r?h0:r,c=i.title,x=void 0===c?null:c,z=i.classes,O=void 0===z?[]:z,J=i.attributes,le=void 0===J?{}:J,be=i.styles,Ee=void 0===be?{}:be;return Vp({type:"text",content:e},function(){return o6("beforeDOMElementCreation",{content:e,params:i}),Nz({content:e,transform:dr(dr({},h0),o),title:x,extra:{attributes:le,styles:Ee,classes:["".concat(Er.cssPrefix,"-layers-text")].concat(Xd(O))}})})}}},provides:function(n){n.generateLayersText=function(e,i){var r=i.title,o=i.transform,c=i.extra,x=null,z=null;if(hz){var O=parseInt(getComputedStyle(e).fontSize,10),J=e.getBoundingClientRect();x=J.width/O,z=J.height/O}return Er.autoA11y&&!r&&(c.attributes["aria-hidden"]="true"),Promise.resolve([e,Nz({content:e.innerHTML,width:x,height:z,transform:o,title:r,extra:c,watchable:!0})])}}},pq=new RegExp('"',"ug"),Zz=[1105920,1112319];function $z(t,n){var e="".concat(i$).concat(n.replace(":","-"));return new Promise(function(i,r){if(null!==t.getAttribute(e))return i();var c=P3(t.children).filter(function($n){return $n.getAttribute(Kv)===n})[0],x=Uu.getComputedStyle(t,n),z=x.getPropertyValue("font-family").match(c$),O=x.getPropertyValue("font-weight"),J=x.getPropertyValue("content");if(c&&!z)return t.removeChild(c),i();if(z&&"none"!==J&&""!==J){var le=x.getPropertyValue("content"),be=~["Sharp"].indexOf(z[2])?H1:s1,Ee=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(z[2])?qd[be][z[2].toLowerCase()]:l$[be][O],ut=function mq(t){var n=t.replace(pq,""),e=function z$(t,n){var r,e=t.length,i=t.charCodeAt(n);return i>=55296&&i<=56319&&e>n+1&&(r=t.charCodeAt(n+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(n,0),i=e>=Zz[0]&&e<=Zz[1],r=2===n.length&&n[0]===n[1];return{value:oy(r?n[0]:n),isSecondary:i||r}}(le),mt=ut.value,Nt=ut.isSecondary,Ht=z[0].startsWith("FontAwesome"),vt=cy(Ee,mt),Zt=vt;if(Ht){var gn=function k$(t){var n=Pz[t],e=cy("fas",t);return n||(e?{prefix:"fas",iconName:e}:null)||{prefix:null,iconName:null}}(mt);gn.iconName&&gn.prefix&&(vt=gn.iconName,Ee=gn.prefix)}if(!vt||Nt||c&&c.getAttribute(Qv)===Ee&&c.getAttribute(Jv)===Zt)i();else{t.setAttribute(e,Zt),c&&t.removeChild(c);var bn=function oq(){return{iconName:null,title:null,titleId:null,prefix:null,transform:h0,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),ni=bn.extra;ni.attributes[Kv]=n,my(vt,Ee).then(function($n){var oi=hy(dr(dr({},bn),{},{icons:{main:$n,mask:ly()},prefix:Ee,iconName:Zt,extra:ni,watchable:!0})),dn=a1.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===n?t.insertBefore(dn,t.firstChild):t.appendChild(dn),dn.outerHTML=oi.map(function(Fa){return nh(Fa)}).join("\n"),t.removeAttribute(e),i()}).catch(r)}}else i()})}function gq(t){return Promise.all([$z(t,"::before"),$z(t,"::after")])}function vq(t){return!(t.parentNode===document.head||~o$.indexOf(t.tagName.toUpperCase())||t.getAttribute(Kv)||t.parentNode&&"svg"===t.parentNode.tagName)}function qz(t){if(G0)return new Promise(function(n,e){var i=P3(t.querySelectorAll("*")).filter(vq).map(gq),r=vy.begin("searchPseudoElements");Uz(),Promise.all(i).then(function(){r(),_y(),n()}).catch(function(){r(),_y(),e()})})}var Kz=!1,Qz=function(n){return n.toLowerCase().split(" ").reduce(function(i,r){var o=r.toLowerCase().split("-"),c=o[0],x=o.slice(1).join("-");if(c&&"h"===x)return i.flipX=!0,i;if(c&&"v"===x)return i.flipY=!0,i;if(x=parseFloat(x),isNaN(x))return i;switch(c){case"grow":i.size=i.size+x;break;case"shrink":i.size=i.size-x;break;case"left":i.x=i.x-x;break;case"right":i.x=i.x+x;break;case"up":i.y=i.y-x;break;case"down":i.y=i.y+x;break;case"rotate":i.rotate=i.rotate+x}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},by={x:0,y:0,width:"100%",height:"100%"};function Jz(t){return t.attributes&&(t.attributes.fill||!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.attributes.fill="black"),t}function xq(t){return"g"===t.tag?t.children:[t]}var wq={hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-mask"),o=r?Fp(r.split(" ").map(function(c){return c.trim()})):ly();return o.prefix||(o.prefix=Wu()),e.mask=o,e.maskId=i.getAttribute("data-fa-mask-id"),e}}},provides:function(n){n.generateAbstractMask=function(e){var i=e.children,r=e.attributes,o=e.main,c=e.mask,x=e.maskId,J=o.icon,be=c.icon,Ee=function b$(t){var n=t.transform,i=t.iconWidth,r={transform:"translate(".concat(t.containerWidth/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),c="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),x="rotate(".concat(n.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(o," ").concat(c," ").concat(x)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:e.transform,containerWidth:c.width,iconWidth:o.width}),ut={tag:"rect",attributes:dr(dr({},by),{},{fill:"white"})},mt=J.children?{children:J.children.map(Jz)}:{},Nt={tag:"g",attributes:dr({},Ee.inner),children:[Jz(dr({tag:J.tag,attributes:dr(dr({},J.attributes),Ee.path)},mt))]},Ht={tag:"g",attributes:dr({},Ee.outer),children:[Nt]},vt="mask-".concat(x||th()),Zt="clip-".concat(x||th()),gn={tag:"mask",attributes:dr(dr({},by),{},{id:vt,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ut,Ht]},bn={tag:"defs",children:[{tag:"clipPath",attributes:{id:Zt},children:xq(be)},gn]};return i.push(bn,{tag:"rect",attributes:dr({fill:"currentColor","clip-path":"url(#".concat(Zt,")"),mask:"url(#".concat(vt,")")},by)}),{children:i,attributes:r}}}};!function F$(t,n){var e=n.mixoutsTo;Oz=t,T3={},Object.keys(L3).forEach(function(i){-1===R$.indexOf(i)&&delete L3[i]}),Oz.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(c){"function"==typeof r[c]&&(e[c]=r[c]),"object"===Mp(r[c])&&Object.keys(r[c]).forEach(function(x){e[c]||(e[c]={}),e[c][x]=r[c][x]})}),i.hooks){var o=i.hooks();Object.keys(o).forEach(function(c){T3[c]||(T3[c]=[]),T3[c].push(o[c])})}i.provides&&i.provides(L3)})}([C$,uq,dq,hq,fq,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=qz,e}}},provides:function(n){n.pseudoElements2svg=function(e){var i=e.node;Er.searchPseudoElements&&qz(void 0===i?a1:i)}}},{mixout:function(){return{dom:{unwatch:function(){Uz(),Kz=!0}}}},hooks:function(){return{bootstrap:function(){Gz(uy("mutationObserverCallbacks",{}))},noAuto:function(){!function tq(){jp&&jp.disconnect()}()},watch:function(e){var i=e.observeMutationsRoot;Kz?_y():Gz(uy("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},{mixout:function(){return{parse:{transform:function(e){return Qz(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-transform");return r&&(e.transform=Qz(r)),e}}},provides:function(n){n.generateAbstractTransformGrouping=function(e){var i=e.main,r=e.transform,c=e.iconWidth,x={transform:"translate(".concat(e.containerWidth/2," 256)")},z="translate(".concat(32*r.x,", ").concat(32*r.y,") "),O="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),J="rotate(".concat(r.rotate," 0 0)"),Ee={outer:x,inner:{transform:"".concat(z," ").concat(O," ").concat(J)},path:{transform:"translate(".concat(c/2*-1," -256)")}};return{tag:"g",attributes:dr({},Ee.outer),children:[{tag:"g",attributes:dr({},Ee.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:dr(dr({},i.icon.attributes),Ee.path)}]}]}}}},wq,{provides:function(n){var e=!1;Uu.matchMedia&&(e=Uu.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},o={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:dr(dr({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var c=dr(dr({},o),{},{attributeName:"opacity"}),x={tag:"circle",attributes:dr(dr({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||x.children.push({tag:"animate",attributes:dr(dr({},o),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:dr(dr({},c),{},{values:"1;0;1;1;0;1;"})}),i.push(x),i.push({tag:"path",attributes:dr(dr({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:dr(dr({},c),{},{values:"1;0;0;0;0;1;"})}]}),e||i.push({tag:"path",attributes:dr(dr({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:dr(dr({},c),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},{hooks:function(){return{parseNodeAttributes:function(e,i){var r=i.getAttribute("data-fa-symbol");return e.symbol=null!==r&&(""===r||r),e}}}}],{mixoutsTo:tl});var Eq=tl.parse,Aq=tl.icon;const zq=["*"],Tq=t=>{const n={[`fa-${t.animation}`]:null!=t.animation&&!t.animation.startsWith("spin"),"fa-spin":"spin"===t.animation||"spin-reverse"===t.animation,"fa-spin-pulse":"spin-pulse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-spin-reverse":"spin-reverse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-pulse":"spin-pulse"===t.animation||"spin-pulse-reverse"===t.animation,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-inverse":t.inverse,"fa-layers-counter":t.counter,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip,[`fa-${t.size}`]:null!==t.size,[`fa-rotate-${t.rotate}`]:null!==t.rotate,[`fa-pull-${t.pull}`]:null!==t.pull,[`fa-stack-${t.stackItemSize}`]:null!=t.stackItemSize};return Object.keys(n).map(e=>n[e]?e:null).filter(e=>e)};let Oq=(()=>{class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eP=(()=>{class t{constructor(){this.definitions={}}addIcons(...e){for(const i of e){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...e){for(const i of e){const r=Object.keys(i).map(o=>i[o]);this.addIcons(...r)}}getIconDefinition(e,i){return e in this.definitions&&i in this.definitions[e]?this.definitions[e][i]:null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kq=(()=>{class t{constructor(){this.stackItemSize="1x"}ngOnChanges(e){if("size"in e)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[Bn]})}return t})(),Nq=(()=>{class t{constructor(e,i){this.renderer=e,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(e){"size"in e&&(null!=e.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${e.size.currentValue}`),null!=e.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${e.size.previousValue}`))}static#e=this.\u0275fac=function(i){return new(i||t)(Et(pl),Et(zr))};static#t=this.\u0275cmp=ar({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},features:[Bn],ngContentSelectors:zq,decls:1,vars:0,template:function(i,r){1&i&&(Lc(),Oo(0))},encapsulation:2})}return t})(),Xu=(()=>{class t{set spin(e){this.animation=e?"spin":void 0}set pulse(e){this.animation=e?"spin-pulse":void 0}constructor(e,i,r,o,c){this.sanitizer=e,this.config=i,this.iconLibrary=r,this.stackItem=o,this.classes=[],null!=c&&null==o&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(e){if(null!=this.icon||null!=this.config.fallbackIcon){if(e){const r=this.findIconDefinition(null!=this.icon?this.icon:this.config.fallbackIcon);if(null!=r){const o=this.buildParams();this.renderIcon(r,o)}}}else(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})()}render(){this.ngOnChanges({})}findIconDefinition(e){const i=((t,n)=>(t=>void 0!==t.prefix&&void 0!==t.iconName)(t)?t:"string"==typeof t?{prefix:n,iconName:t}:{prefix:t[0],iconName:t[1]})(e,this.config.defaultPrefix);return"icon"in i?i:this.iconLibrary.getIconDefinition(i.prefix,i.iconName)??((t=>{throw new Error(`Could not find icon with iconName=${t.iconName} and prefix=${t.prefix} in the icon library.`)})(i),null)}buildParams(){const e={flip:this.flip,animation:this.animation,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?Eq.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...Tq(e),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(e,i){const r=Aq(e,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}static#e=this.\u0275fac=function(i){return new(i||t)(Et(wd),Et(Oq),Et(eP),Et(kq,8),Et(Nq,8))};static#t=this.\u0275cmp=ar({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(i,r){2&i&&(kl("innerHTML",r.renderedIconHTML,x2),zo("title",r.title))},inputs:{icon:"icon",title:"title",animation:"animation",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[Bn],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return t})(),tP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})();const Rq=function(t){return{active:t}};function Fq(t,n){if(1&t){const e=o1();mn(0,"button",3),Ki("click",function(){const o=Qr(e).$implicit;return xo(di().onFloorPick(o))}),Ci(1),wn()}if(2&t){const e=n.$implicit,i=di();_n("ngClass",gl(2,Rq,e.level===i.stateService.state.floor.level)),tn(1),Ca(" ",1===e.name.length?"L"+e.name:i.getFloorName(e)," ")}}let Vq=(()=>{class t{constructor(e,i,r){this.sidebarService=e,this.stateService=i,this.translateService=r}ngOnInit(){}onFloorPick(e){this.sidebarService.floorChangeListener.next(e)}getFloorName(e){return this.sidebarService.getFloorName(e,this.translateService.currentLang)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0),Et(u0),Et(Bl))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-floor-picker"]],decls:3,vars:1,consts:[[1,"container"],[1,"picker"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(i,r){1&i&&(mn(0,"div",0)(1,"div",1),ei(2,Fq,2,4,"button",2),wn()()),2&i&&(tn(2),_n("ngForOf",r.stateService.state.floors))},dependencies:[B4,N0],styles:[".container[_ngcontent-%COMP%]{position:absolute;left:calc(50% - 140px);top:85px;z-index:2}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]{display:flex;justify-content:center;width:280px}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:22px;font-weight:700;background-color:#6b50d0;border-radius:10px;border:0;color:#fff;cursor:pointer;transition:all .25s linear;margin-right:5px}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#000}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.active){background-color:#5234c3}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{top:210px}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;font-size:16px;font-weight:400;border-radius:5px}}"]})}return t})();function Hq(t,n){1&t&&Ni(0,"fa-icon",8),2&t&&_n("icon",di().$implicit.icon)}function Bq(t,n){if(1&t&&(Ni(0,"img",9),Ti(1,"translate")),2&t){const e=di().$implicit;_n("src",e.iconImage,E1)("alt",Fi(1,2,e.title))}}function jq(t,n){if(1&t){const e=o1();mn(0,"li",4),Ki("click",function(){const o=Qr(e).$implicit;return xo(di().onFilterClick(o))}),mn(1,"div",5),ei(2,Hq,1,1,"fa-icon",6),ei(3,Bq,2,4,"img",7),wn(),mn(4,"p"),Ci(5),Ti(6,"translate"),wn()()}if(2&t){const e=n.$implicit;go("active",e.active),tn(2),_n("ngIf",e.icon),tn(1),_n("ngIf",e.iconImage),tn(2),wo(Fi(6,5,e.title))}}let Uq=(()=>{class t{constructor(e){this.sidebarService=e,this.sidebarOpened=!0,this.data=[{title:"toilet",icon:["fal","toilet"],id:"amenity-id",active:!0}],this.subs=[],this.subs.push(this.sidebarService.getAmenityToggleListener().subscribe(i=>{if(i){const r=this.data.find(o=>o.id===i.amenityId);r&&(this.data=this.data.map(o=>(o.active=!(!r.active||this.sidebarService.filteredShop)||r.id===o.id,o)))}}))}ngOnInit(){}onFilterClick(e){this.sidebarService.onAmenityToggle("shop",e.id),this.sidebarService.activeListItem=e}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-shop-picker"]],decls:6,vars:4,consts:[[1,"container"],[1,"title"],[1,"categories"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],[1,"icon"],[3,"icon",4,"ngIf"],[3,"src","alt",4,"ngIf"],[3,"icon"],[3,"src","alt"]],template:function(i,r){1&i&&(mn(0,"div",0)(1,"h3",1),Ci(2),Ti(3,"translate"),wn(),mn(4,"ul",2),ei(5,jq,7,7,"li",3),wn()()),2&i&&(tn(2),wo(Fi(3,2,"shops")),tn(3),_n("ngForOf",r.data))},dependencies:[N0,z2,Xu,U0],styles:[".container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;color:#6b50d0;transition:all .25s linear}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-right:10px;width:60px;vertical-align:top;cursor:pointer}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#868686;color:#fff;font-size:22px;border-radius:10px;width:60px;height:60px;line-height:60px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px;width:40px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{background-color:#6d6d6d}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#6b50d0;color:#fff}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{background-color:#4f32bb}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{display:inline-block}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{width:44px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:44px;height:44px;line-height:44px;font-size:16px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:7px;width:30px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}}"]})}return t})();function Gq(t,n){1&t&&Ni(0,"fa-icon",8),2&t&&_n("icon",di().$implicit.icon)}function Wq(t,n){if(1&t&&(Ni(0,"img",9),Ti(1,"translate")),2&t){const e=di().$implicit;_n("src",e.iconImage,E1)("alt",Fi(1,2,e.title))}}function Yq(t,n){if(1&t){const e=o1();mn(0,"li",4),Ki("click",function(){const o=Qr(e).$implicit;return xo(di().onFilterClick(o))}),mn(1,"div",5),ei(2,Gq,1,1,"fa-icon",6),ei(3,Wq,2,4,"img",7),wn(),mn(4,"p"),Ci(5),Ti(6,"translate"),wn()()}if(2&t){const e=n.$implicit;go("active",e.active),tn(2),_n("ngIf",e.icon),tn(1),_n("ngIf",e.iconImage),tn(2),wo(Fi(6,5,e.title))}}const nP=[{title:"cafes",icon:["fal","coffee"],id:"another-amenity-id",active:!0}];let Xq=(()=>{class t{constructor(e){this.sidebarService=e,this.sidebarOpened=!0,this.data=nP,this.subs=[],this.subs.push(this.sidebarService.getAmenityToggleListener().subscribe(i=>{if(i){const r=this.data.find(o=>o.id===i.amenityId);r&&(this.data=this.data.map(o=>(o.active=!(!r.active||this.sidebarService.filteredAmenity)||r.id===o.id,o)))}}))}ngOnInit(){}onFilterClick(e){this.sidebarService.onAmenityToggle("amenities",e.id),this.sidebarService.activeListItem=e}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-amenity-picker"]],decls:6,vars:4,consts:[[1,"container"],[1,"title"],[1,"categories"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"],[1,"icon"],[3,"icon",4,"ngIf"],[3,"src","alt",4,"ngIf"],[3,"icon"],[3,"src","alt"]],template:function(i,r){1&i&&(mn(0,"div",0)(1,"h3",1),Ci(2),Ti(3,"translate"),wn(),mn(4,"ul",2),ei(5,Yq,7,7,"li",3),wn()()),2&i&&(tn(2),wo(Fi(3,2,"showTheClosest")),tn(3),_n("ngForOf",r.data))},dependencies:[N0,z2,Xu,U0],styles:[".container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;color:#bd52ff;transition:all .25s linear}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-right:10px;width:60px;vertical-align:top;cursor:pointer}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#868686;color:#fff;font-size:22px;border-radius:10px;width:60px;height:60px;line-height:60px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px;width:40px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{background-color:#6d6d6d}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#bd52ff;color:#fff}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{background-color:#aa1fff}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{display:inline-block}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{margin:0;padding:0}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{width:44px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:44px;height:44px;line-height:44px;font-size:16px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:7px;width:30px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}}"]})}return t})();var D3=w(62354),Zq=w(45156),iP=w.n(Zq);let rP=(()=>{class t{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(pl),Et(zr))};static#t=this.\u0275dir=In({type:t})}return t})(),a6=(()=>{class t extends rP{static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static#t=this.\u0275dir=In({type:t,features:[Qi]})}return t})();const P2=new Gn("NgValueAccessor"),qq={provide:P2,useExisting:Bt(()=>O3),multi:!0},Qq=new Gn("CompositionEventMode");let O3=(()=>{class t extends rP{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Kq(){const t=Iu()?Iu().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(pl),Et(zr),Et(Qq,8))};static#t=this.\u0275dir=In({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&Ki("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[Fr([qq]),Qi]})}return t})();function Zu(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function aP(t){return null!=t&&"number"==typeof t.length}const Zc=new Gn("NgValidators"),$u=new Gn("NgAsyncValidators"),Jq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $c{static min(n){return function sP(t){return n=>{if(Zu(n.value)||Zu(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function cP(t){return n=>{if(Zu(n.value)||Zu(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return function lP(t){return Zu(t.value)?{required:!0}:null}(n)}static requiredTrue(n){return function uP(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function dP(t){return Zu(t.value)||Jq.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function hP(t){return n=>Zu(n.value)||!aP(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function fP(t){return n=>aP(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static pattern(n){return function pP(t){if(!t)return Up;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(Zu(i.value))return null;const r=i.value;return n.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(n)}static nullValidator(n){return null}static compose(n){return bP(n)}static composeAsync(n){return xP(n)}}function Up(t){return null}function mP(t){return null!=t}function gP(t){return rd(t)?it(t):t}function vP(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function yP(t,n){return n.map(e=>e(t))}function _P(t){return t.map(n=>function eK(t){return!t.validate}(n)?n:e=>n.validate(e))}function bP(t){if(!t)return null;const n=t.filter(mP);return 0==n.length?null:function(e){return vP(yP(e,n))}}function xy(t){return null!=t?bP(_P(t)):null}function xP(t){if(!t)return null;const n=t.filter(mP);return 0==n.length?null:function(e){return Vv(yP(e,n).map(gP)).pipe(ue(vP))}}function wy(t){return null!=t?xP(_P(t)):null}function wP(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function CP(t){return t._rawValidators}function MP(t){return t._rawAsyncValidators}function Cy(t){return t?Array.isArray(t)?t:[t]:[]}function Gp(t,n){return Array.isArray(t)?t.includes(n):t===n}function SP(t,n){const e=Cy(n);return Cy(t).forEach(r=>{Gp(e,r)||e.push(r)}),e}function EP(t,n){return Cy(n).filter(e=>!Gp(t,e))}class AP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=xy(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=wy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class I2 extends AP{get formDirective(){return null}get path(){return null}}class f0 extends AP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zP{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let k3=(()=>{class t extends zP{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(f0,2))};static#t=this.\u0275dir=In({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&go("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Qi]})}return t})(),Wp=(()=>{class t extends zP{constructor(e){super(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(I2,10))};static#t=this.\u0275dir=In({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&go("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Qi]})}return t})();const rh="VALID",Xp="INVALID",N3="PENDING",oh="DISABLED";function Ey(t){return(Zp(t)?t.validators:t)||null}function Ay(t,n){return(Zp(n)?n.asyncValidators:t)||null}function Zp(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function IP(t,n,e){const i=t.controls;if(!(n?Object.keys(i):i).length)throw new jt(1e3,"");if(!i[e])throw new jt(1001,"")}function TP(t,n,e){t._forEachChild((i,r)=>{if(void 0===e[r])throw new jt(1002,"")})}class $p{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===rh}get invalid(){return this.status===Xp}get pending(){return this.status==N3}get disabled(){return this.status===oh}get enabled(){return this.status!==oh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(SP(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(SP(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(EP(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(EP(n,this._rawAsyncValidators))}hasValidator(n){return Gp(this._rawValidators,n)}hasAsyncValidator(n){return Gp(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=N3,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=oh,this.errors=null,this._forEachChild(i=>{i.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=rh,this._forEachChild(i=>{i.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rh||this.status===N3)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oh:rh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=N3,this._hasOwnPendingAsyncValidator=!0;const e=gP(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(n,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Cr,this.statusChanges=new Cr}_calculateStatus(){return this._allControlsDisabled()?oh:this.errors?Xp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(N3)?N3:this._anyControlsHaveStatus(Xp)?Xp:rh}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){Zp(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function rK(t){return Array.isArray(t)?xy(t):t||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function oK(t){return Array.isArray(t)?wy(t):t||null}(this._rawAsyncValidators)}}class ah extends $p{constructor(n,e,i){super(Ey(e),Ay(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){TP(this,0,n),Object.keys(n).forEach(i=>{IP(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(i=>{const r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class LP extends ah{}const s6=new Gn("CallSetDisabledState",{providedIn:"root",factory:()=>sh}),sh="always";function qp(t,n){return[...n.path,t]}function ch(t,n,e=sh){zy(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function sK(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&DP(t,n)})}(t,n),function lK(t,n){const e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function cK(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&DP(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function aK(t,n){if(n.valueAccessor.setDisabledState){const e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function Kp(t,n,e=!0){const i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),Jp(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Qp(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function zy(t,n){const e=CP(t);null!==n.validator?t.setValidators(wP(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const i=MP(t);null!==n.asyncValidator?t.setAsyncValidators(wP(i,n.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();Qp(n._rawValidators,r),Qp(n._rawAsyncValidators,r)}function Jp(t,n){let e=!1;if(null!==t){if(null!==n.validator){const r=CP(t);if(Array.isArray(r)&&r.length>0){const o=r.filter(c=>c!==n.validator);o.length!==r.length&&(e=!0,t.setValidators(o))}}if(null!==n.asyncValidator){const r=MP(t);if(Array.isArray(r)&&r.length>0){const o=r.filter(c=>c!==n.asyncValidator);o.length!==r.length&&(e=!0,t.setAsyncValidators(o))}}}const i=()=>{};return Qp(n._rawValidators,i),Qp(n._rawAsyncValidators,i),e}function DP(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function OP(t,n){zy(t,n)}function Iy(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function kP(t,n){t._syncPendingControls(),n.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Ty(t,n){if(!n)return null;let e,i,r;return Array.isArray(n),n.forEach(o=>{o.constructor===O3?e=o:function hK(t){return Object.getPrototypeOf(t.constructor)===a6}(o)?i=o:r=o}),r||i||e||null}const pK={provide:I2,useExisting:Bt(()=>uh)},lh=(()=>Promise.resolve())();let uh=(()=>{class t extends I2{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Cr,this.form=new ah({},xy(e),wy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){lh.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),ch(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){lh.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){lh.then(()=>{const i=this._findContainer(e.path),r=new ah({});OP(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){lh.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){lh.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,kP(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Zc,10),Et($u,10),Et(s6,8))};static#t=this.\u0275dir=In({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&Ki("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fr([pK]),Qi]})}return t})();function NP(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function RP(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const dh=class extends $p{constructor(n=null,e,i){super(Ey(e),Ay(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zp(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=RP(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){NP(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){NP(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){RP(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},vK={provide:f0,useExisting:Bt(()=>em)},HP=(()=>Promise.resolve())();let em=(()=>{class t extends f0{constructor(e,i,r,o,c,x){super(),this._changeDetectorRef=c,this.callSetDisabledState=x,this.control=new dh,this._registered=!1,this.name="",this.update=new Cr,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ty(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Iy(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ch(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){HP.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=0!==i&&function o3(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(i);HP.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?qp(e,this._parent):[e]}static#e=this.\u0275fac=function(i){return new(i||t)(Et(I2,9),Et(Zc,10),Et($u,10),Et(P2,10),Et(E2,8),Et(s6,8))};static#t=this.\u0275dir=In({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fr([vK]),Qi,Bn]})}return t})(),tm=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const yK={provide:P2,useExisting:Bt(()=>Ly),multi:!0};let Ly=(()=>{class t extends a6{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=i=>{e(""==i?null:parseFloat(i))}}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static#t=this.\u0275dir=In({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){1&i&&Ki("input",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},features:[Fr([yK]),Qi]})}return t})(),BP=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})();const Dy=new Gn("NgModelWithFormControlWarning"),CK={provide:I2,useExisting:Bt(()=>qu)};let qu=(()=>{class t extends I2{constructor(e,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Cr,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Jp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return ch(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Kp(e.control||null,e,!1),function fK(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,kP(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(Kp(i||null,e),(t=>t instanceof dh)(r)&&(ch(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);OP(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function uK(t,n){return Jp(t,n)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zy(this.form,this),this._oldForm&&Jp(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Zc,10),Et($u,10),Et(s6,8))};static#t=this.\u0275dir=In({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&Ki("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fr([CK]),Qi,Bn]})}return t})();const EK={provide:f0,useExisting:Bt(()=>hh)};let hh=(()=>{class t extends f0{set isDisabled(e){}static#e=this._ngModelWarningSentOnce=!1;constructor(e,i,r,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new Cr,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ty(0,o)}ngOnChanges(e){this._added||this._setUpControl(),Iy(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return qp(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(i){return new(i||t)(Et(I2,13),Et(Zc,10),Et($u,10),Et(P2,10),Et(Dy,8))};static#n=this.\u0275dir=In({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Fr([EK]),Qi,Bn]})}return t})(),nI=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[BP]})}return t})();class iI extends $p{constructor(n,e,i){super(Ey(e),Ay(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,e={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(n,e,i={}){this.controls.splice(n,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(n,e={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(n,e,i={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,e={}){TP(this,0,n),n.forEach((i,r)=>{IP(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(n.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n=[],e={}){this._forEachChild((i,r)=>{i.reset(n[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((e,i)=>{n(e,i)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(e=>e.enabled&&n(e))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function rI(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let BK=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new t;return e.useNonNullable=!0,e}group(e,i=null){const r=this._reduceControls(e);let o={};return rI(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new ah(r,o)}record(e,i=null){const r=this._reduceControls(e);return new LP(r,i)}control(e,i,r){let o={};return this.useNonNullable?(rI(i)?o=i:(o.validators=i,o.asyncValidators=r),new dh(e,{...o,nonNullable:!0})):new dh(e,i,r)}array(e,i,r){const o=e.map(c=>this._createControl(c));return new iI(o,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return e instanceof dh||e instanceof $p?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Hy=(()=>{class t extends BK{group(e,i=null){return super.group(e,i)}control(e,i,r){return super.control(e,i,r)}array(e,i,r){return super.array(e,i,r)}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oI=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:s6,useValue:e.callSetDisabledState??sh}]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[nI]})}return t})(),By=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Dy,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:s6,useValue:e.callSetDisabledState??sh}]}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[nI]})}return t})();function nm(t,n=mp){return e=>e.lift(new jK(t,n))}class jK{constructor(n,e){this.dueTime=n,this.scheduler=e}call(n,e){return e.subscribe(new UK(n,this.dueTime,this.scheduler))}}class UK extends R{constructor(n,e,i){super(n),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(n){this.clearDebounce(),this.lastValue=n,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(GK,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:n}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(n)}}clearDebounce(){const n=this.debouncedSubscription;null!==n&&(this.remove(n),n.unsubscribe(),this.debouncedSubscription=null)}}function GK(t){t.debouncedNext()}const WK=["content"],YK=["scroll"],XK=["padding"],fh=function(t){return{searchTerm:t}};function ZK(t,n){if(1&t&&(mn(0,"div",6),C2(1,7),wn()),2&t){const e=di();tn(1),_n("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",gl(2,fh,e.filterValue))}}function $K(t,n){if(1&t&&(mn(0,"div",8),C2(1,7),wn()),2&t){const e=di();tn(1),_n("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",gl(2,fh,e.filterValue))}}const aI=["*"],qK=["searchInput"];function KK(t,n){if(1&t){const e=o1();mn(0,"span",15),Ki("click",function(){Qr(e);const r=di().$implicit;return xo(di(2).unselect(r))}),Ci(1,"\xd7"),wn(),Ni(2,"span",16)}if(2&t){const e=di().$implicit,i=di(2);tn(2),_n("ngItemLabel",e.label)("escape",i.escapeHTML)}}function QK(t,n){}const JK=function(t,n,e){return{item:t,clear:n,label:e}};function eQ(t,n){if(1&t&&(mn(0,"div",12),ei(1,KK,3,2,"ng-template",null,13,J2),ei(3,QK,0,0,"ng-template",14),wn()),2&t){const e=n.$implicit,i=Ts(2),r=di(2);go("ng-value-disabled",e.disabled),tn(3),_n("ngTemplateOutlet",r.labelTemplate||i)("ngTemplateOutletContext",function VC(t,n,e,i,r,o){return UC(Jn(),O1(),t,n,e,i,r,o)}(4,JK,e.value,r.clearItem,e.label))}}function tQ(t,n){if(1&t&&(l2(0),ei(1,eQ,4,8,"div",11),u2()),2&t){const e=di();tn(1),_n("ngForOf",e.selectedItems)("ngForTrackBy",e.trackByOption)}}function nQ(t,n){}const iQ=function(t,n){return{items:t,clear:n}};function rQ(t,n){if(1&t&&ei(0,nQ,0,0,"ng-template",14),2&t){const e=di();_n("ngTemplateOutlet",e.multiLabelTemplate)("ngTemplateOutletContext",f5(2,iQ,e.selectedValues,e.clearItem))}}function oQ(t,n){1&t&&Ni(0,"div",19)}function aQ(t,n){}function sQ(t,n){if(1&t&&(l2(0),ei(1,oQ,1,0,"ng-template",null,17,J2),ei(3,aQ,0,0,"ng-template",18),u2()),2&t){const e=Ts(2),i=di();tn(3),_n("ngTemplateOutlet",i.loadingSpinnerTemplate||e)}}function cQ(t,n){1&t&&(mn(0,"span",20)(1,"span",21),Ci(2,"\xd7"),wn()()),2&t&&A9("title",di().clearAllText)}function lQ(t,n){if(1&t&&Ni(0,"span",27),2&t){const e=di().$implicit,i=di(2);_n("ngItemLabel",e.label)("escape",i.escapeHTML)}}function uQ(t,n){}const dQ=function(t,n,e,i){return{item:t,item$:n,index:e,searchTerm:i}};function hQ(t,n){if(1&t){const e=o1();mn(0,"div",25),Ki("click",function(){const o=Qr(e).$implicit;return xo(di(2).toggleItem(o))})("mouseover",function(){const o=Qr(e).$implicit;return xo(di(2).onItemHover(o))}),ei(1,lQ,1,2,"ng-template",null,26,J2),ei(3,uQ,0,0,"ng-template",14),wn()}if(2&t){const e=n.$implicit,i=Ts(2),r=di(2);go("ng-option-disabled",e.disabled)("ng-option-selected",e.selected)("ng-optgroup",e.children)("ng-option",!e.children)("ng-option-child",!!e.parent)("ng-option-marked",e===r.itemsList.markedItem),zo("role",e.children?"group":"option")("aria-selected",e.selected)("id",null==e?null:e.htmlId),tn(3),_n("ngTemplateOutlet",e.children?r.optgroupTemplate||i:r.optionTemplate||i)("ngTemplateOutletContext",HC(17,dQ,e.value,e,e.index,r.searchTerm))}}function fQ(t,n){if(1&t&&(mn(0,"span")(1,"span",30),Ci(2),wn(),Ci(3),wn()),2&t){const e=di(3);tn(2),wo(e.addTagText),tn(1),Ca('"',e.searchTerm,'"')}}function pQ(t,n){}function mQ(t,n){if(1&t){const e=o1();mn(0,"div",28),Ki("mouseover",function(){return Qr(e),xo(di(2).itemsList.unmarkItem())})("click",function(){return Qr(e),xo(di(2).selectTag())}),ei(1,fQ,4,2,"ng-template",null,29,J2),ei(3,pQ,0,0,"ng-template",14),wn()}if(2&t){const e=Ts(2),i=di(2);go("ng-option-marked",!i.itemsList.markedItem),tn(3),_n("ngTemplateOutlet",i.tagTemplate||e)("ngTemplateOutletContext",gl(4,fh,i.searchTerm))}}function gQ(t,n){if(1&t&&(mn(0,"div",32),Ci(1),wn()),2&t){const e=di(3);tn(1),wo(e.notFoundText)}}function vQ(t,n){}function yQ(t,n){if(1&t&&(l2(0),ei(1,gQ,2,1,"ng-template",null,31,J2),ei(3,vQ,0,0,"ng-template",14),u2()),2&t){const e=Ts(2),i=di(2);tn(3),_n("ngTemplateOutlet",i.notFoundTemplate||e)("ngTemplateOutletContext",gl(2,fh,i.searchTerm))}}function _Q(t,n){if(1&t&&(mn(0,"div",32),Ci(1),wn()),2&t){const e=di(3);tn(1),wo(e.typeToSearchText)}}function bQ(t,n){}function xQ(t,n){if(1&t&&(l2(0),ei(1,_Q,2,1,"ng-template",null,33,J2),ei(3,bQ,0,0,"ng-template",18),u2()),2&t){const e=Ts(2),i=di(2);tn(3),_n("ngTemplateOutlet",i.typeToSearchTemplate||e)}}function wQ(t,n){if(1&t&&(mn(0,"div",32),Ci(1),wn()),2&t){const e=di(3);tn(1),wo(e.loadingText)}}function CQ(t,n){}function MQ(t,n){if(1&t&&(l2(0),ei(1,wQ,2,1,"ng-template",null,34,J2),ei(3,CQ,0,0,"ng-template",14),u2()),2&t){const e=Ts(2),i=di(2);tn(3),_n("ngTemplateOutlet",i.loadingTextTemplate||e)("ngTemplateOutletContext",gl(2,fh,i.searchTerm))}}function SQ(t,n){if(1&t){const e=o1();mn(0,"ng-dropdown-panel",22),Ki("update",function(r){return Qr(e),xo(di().viewPortItems=r)})("scroll",function(r){return Qr(e),xo(di().scroll.emit(r))})("scrollToEnd",function(r){return Qr(e),xo(di().scrollToEnd.emit(r))})("outsideClick",function(){return Qr(e),xo(di().close())}),l2(1),ei(2,hQ,4,22,"div",23),ei(3,mQ,4,6,"div",24),u2(),ei(4,yQ,4,4,"ng-container",3),ei(5,xQ,4,1,"ng-container",3),ei(6,MQ,4,4,"ng-container",3),wn()}if(2&t){const e=di();go("ng-select-multiple",e.multiple),_n("virtualScroll",e.virtualScroll)("bufferAmount",e.bufferAmount)("appendTo",e.appendTo)("position",e.dropdownPosition)("headerTemplate",e.headerTemplate)("footerTemplate",e.footerTemplate)("filterValue",e.searchTerm)("items",e.itemsList.filteredItems)("markedItem",e.itemsList.markedItem)("ngClass",e.appendTo?e.classes:null)("id",e.dropdownId),tn(2),_n("ngForOf",e.viewPortItems)("ngForTrackBy",e.trackByOption),tn(1),_n("ngIf",e.showAddTag),tn(1),_n("ngIf",e.showNoItemsFound()),tn(1),_n("ngIf",e.showTypeToSearch()),tn(1),_n("ngIf",e.loading&&0===e.itemsList.filteredItems.length)}}const sI=/[&<>"']/g,EQ=RegExp(sI.source),AQ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function z1(t){return null!=t}function ph(t){return"object"==typeof t&&z1(t)}function im(t){return t instanceof Function}let IQ=(()=>{class t{constructor(e){this.element=e,this.escape=!0}ngOnChanges(e){this.element.nativeElement.innerHTML=this.escape?function zQ(t){return t&&EQ.test(t)?t.replace(sI,n=>AQ[n]):t}(this.ngItemLabel):this.ngItemLabel}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr))};static#t=this.\u0275dir=In({type:t,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[Bn]})}return t})(),TQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-option-tmp",""]]})}return t})(),cI=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-optgroup-tmp",""]]})}return t})(),LQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-label-tmp",""]]})}return t})(),DQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-multi-label-tmp",""]]})}return t})(),OQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-header-tmp",""]]})}return t})(),kQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-footer-tmp",""]]})}return t})(),NQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-notfound-tmp",""]]})}return t})(),RQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-typetosearch-tmp",""]]})}return t})(),FQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-loadingtext-tmp",""]]})}return t})(),VQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-tag-tmp",""]]})}return t})(),HQ=(()=>{class t{constructor(e){this.template=e}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Co))};static#t=this.\u0275dir=In({type:t,selectors:[["","ng-loadingspinner-tmp",""]]})}return t})();function lI(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16))}const BQ={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"};function rm(t){return t.replace(/[^\u0000-\u007E]/g,e=>BQ[e]||e)}class jQ{constructor(n,e){this._ngSelect=n,this._selectionModel=e,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let n=this.selectedItems.length-1;for(;n>=0;n--){const e=this.selectedItems[n];if(!e.disabled)return e}return null}setItems(n){this._items=n.map((e,i)=>this.mapItem(e,i)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(n){if(n.selected||this.maxItemsSelected)return;const e=this._ngSelect.multiple;e||this.clearSelected(),this._selectionModel.select(n,e,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(n)}unselect(n){n.selected&&(this._selectionModel.unselect(n,this._ngSelect.multiple),this._ngSelect.hideSelected&&z1(n.index)&&this._ngSelect.multiple&&this._showSelected(n))}findItem(n){let e;return e=this._ngSelect.compareWith?i=>this._ngSelect.compareWith(i.value,n):this._ngSelect.bindValue?i=>!i.children&&this.resolveNested(i.value,this._ngSelect.bindValue)===n:i=>i.value===n||!i.children&&i.label&&i.label===this.resolveNested(n,this._ngSelect.bindLabel),this._items.find(i=>e(i))}addItem(n){const e=this.mapItem(n,this._items.length);return this._items.push(e),this._filteredItems.push(e),e}clearSelected(n=!1){this._selectionModel.clear(n),this._items.forEach(e=>{e.selected=n&&e.selected&&e.disabled,e.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(n){return n=rm(n).toLocaleLowerCase(),this.filteredItems.find(e=>rm(e.label).toLocaleLowerCase().substr(0,n.length)===n)}filter(n){if(!n)return void this.resetFilteredItems();this._filteredItems=[],n=this._ngSelect.searchFn?n:rm(n).toLocaleLowerCase();const e=this._ngSelect.searchFn||this._defaultSearchFn,i=this._ngSelect.hideSelected;for(const r of Array.from(this._groups.keys())){const o=[];for(const c of this._groups.get(r))i&&(c.parent&&c.parent.selected||c.selected)||e(n,this._ngSelect.searchFn?c.value:c)&&o.push(c);if(o.length>0){const[c]=o.slice(-1);if(c.parent){const x=this._items.find(z=>z===c.parent);this._filteredItems.push(x)}this._filteredItems.push(...o)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(n=>!n.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(n){this._markedIndex=this._filteredItems.indexOf(n)}markSelectedOrDefault(n){if(0===this._filteredItems.length)return;const e=this._getLastMarkedIndex();this._markedIndex=e>-1?e:n?this.filteredItems.findIndex(i=>!i.disabled):-1}resolveNested(n,e){if(!ph(n))return n;if(-1===e.indexOf("."))return n[e];{const i=e.split(".");let r=n;for(let o=0,c=i.length;o<c;++o){if(null==r)return null;r=r[i[o]]}return r}}mapItem(n,e){const i=z1(n.$ngOptionLabel)?n.$ngOptionLabel:this.resolveNested(n,this._ngSelect.bindLabel),r=z1(n.$ngOptionValue)?n.$ngOptionValue:n;return{index:e,label:z1(i)?i.toString():"",value:r,disabled:n.disabled,htmlId:`${this._ngSelect.dropdownId}-${e}`}}mapSelectedItems(){const n=this._ngSelect.multiple;for(const e of this.selectedItems){const i=this._ngSelect.bindValue?this.resolveNested(e.value,this._ngSelect.bindValue):e.value,r=z1(i)?this.findItem(i):null;this._selectionModel.unselect(e,n),this._selectionModel.select(r||e,n,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(e=>-1===this.selectedItems.indexOf(e)))}_showSelected(n){if(this._filteredItems.push(n),n.parent){const e=n.parent;this._filteredItems.find(r=>r===e)||this._filteredItems.push(e)}else if(n.children)for(const e of n.children)e.selected=!1,this._filteredItems.push(e);this._filteredItems=[...this._filteredItems.sort((e,i)=>e.index-i.index)]}_hideSelected(n){this._filteredItems=this._filteredItems.filter(e=>e!==n),n.parent?n.parent.children.every(i=>i.selected)&&(this._filteredItems=this._filteredItems.filter(i=>i!==n.parent)):n.children&&(this._filteredItems=this.filteredItems.filter(e=>e.parent!==n))}_defaultSearchFn(n,e){return rm(e.label).toLocaleLowerCase().indexOf(n)>-1}_getNextItemIndex(n){return n>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(n){0===this._filteredItems.length||this._filteredItems.every(e=>e.disabled)||(this._markedIndex=this._getNextItemIndex(n),this.markedItem.disabled&&this._stepToItem(n))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&void 0===this.markedItem)return-1;const n=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&n<0?-1:Math.max(this.markedIndex,n)}_groupBy(n,e){const i=new Map;if(0===n.length)return i;if(Array.isArray(n[0].value[e])){for(const c of n){const x=(c.value[e]||[]).map((z,O)=>this.mapItem(z,O));i.set(c,x)}return i}const r=im(this._ngSelect.groupBy),o=c=>{const x=r?e(c.value):c.value[e];return z1(x)?x:void 0};for(const c of n){const x=o(c),z=i.get(x);z?z.push(c):i.set(x,[c])}return i}_flatten(n){const e=im(this._ngSelect.groupBy),i=[];for(const r of Array.from(n.keys())){let o=i.length;if(void 0===r){const le=n.get(void 0)||[];i.push(...le.map(be=>(be.index=o++,be)));continue}const c=ph(r),x={label:c?"":String(r),children:void 0,parent:null,index:o++,disabled:!this._ngSelect.selectableGroup,htmlId:lI()},z=e?this._ngSelect.bindLabel:this._ngSelect.groupBy,O=this._ngSelect.groupValue||(()=>c?r.value:{[z]:r}),J=n.get(r).map(le=>(le.parent=x,le.children=void 0,le.index=o++,le));x.children=J,x.value=O(r,J.map(le=>le.value)),i.push(x),i.push(...J)}return i}}var Z0=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Esc=27]="Esc",t[t.Space=32]="Space",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowDown=40]="ArrowDown",t[t.Backspace=8]="Backspace",t}(Z0||{});let uI=(()=>{class t{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(e,i,r){const o=this._dimensions,c=o.itemHeight*i,z=Math.max(0,e)/c*i;let O=Math.min(i,Math.ceil(z)+(o.itemsPerViewport+1));const le=Math.max(0,O-o.itemsPerViewport);let be=Math.min(le,Math.floor(z)),Ee=o.itemHeight*Math.ceil(be)-o.itemHeight*Math.min(be,r);return Ee=isNaN(Ee)?0:Ee,be=isNaN(be)?-1:be,O=isNaN(O)?-1:O,be-=r,be=Math.max(0,be),O+=r,O=Math.min(i,O),{topPadding:Ee,scrollHeight:c,start:be,end:O}}setDimensions(e,i){const r=Math.max(1,Math.floor(i/e));this._dimensions={itemHeight:e,panelHeight:i,itemsPerViewport:r}}getScrollTo(e,i,r){const{panelHeight:o}=this.dimensions,c=e+i,z=r+o;return o>=c&&r===e?null:c>z?r+c-z:e<=r?e:null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const dI=["top","right","bottom","left"],UQ=typeof requestAnimationFrame<"u"?OA:RA;let hI=(()=>{class t{constructor(e,i,r,o,c){this._renderer=e,this._zone=i,this._panelService=r,this._document=c,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new Cr,this.scroll=new Cr,this.scrollToEnd=new Cr,this.outsideClick=new Cr,this._destroy$=new ne,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=o.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(e){e!==this._itemsLength&&(this._itemsLength=e,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:e,panelHeight:i}=this._panelService.dimensions,r=this.markedItem.index*e;return i>r?0:r}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(e){if(e.items){const i=e.items;this._onItemsChange(i.currentValue,i.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(e,i=!1){if(!e)return;const r=this.items.indexOf(e);if(r<0||r>=this.itemsLength)return;let o;if(this.virtualScroll){const c=this._panelService.dimensions.itemHeight;o=this._panelService.getScrollTo(r*c,c,this._lastScrollPosition)}else{const c=this._dropdown.querySelector(`#${e.htmlId}`);o=this._panelService.getScrollTo(c.offsetTop,c.clientHeight,i?c.offsetTop:this._lastScrollPosition)}z1(o)&&(this._scrollablePanel.scrollTop=o)}scrollToTag(){const e=this._scrollablePanel;e.scrollTop=e.scrollHeight-e.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),dI.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(e){dI.forEach(r=>{const o=`ng-select-${r}`;this._renderer.removeClass(this._dropdown,o),this._renderer.removeClass(this._select,o)});const i=`ng-select-${e}`;this._renderer.addClass(this._dropdown,i),this._renderer.addClass(this._select,i)}_handleScroll(){this._zone.runOutsideAngular(()=>{B0(this.scrollElementRef.nativeElement,"scroll").pipe(V1(this._destroy$),Av(0,UQ)).subscribe(e=>{const i=e.path||e.composedPath&&e.composedPath();this._onContentScrolled(i&&0!==i.length?i[0].scrollTop:e.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{un(B0(this._document,"touchstart",{capture:!0}),B0(this._document,"mousedown",{capture:!0})).pipe(V1(this._destroy$)).subscribe(e=>this._checkToClose(e))})}_checkToClose(e){if(this._select.contains(e.target)||this._dropdown.contains(e.target))return;const i=e.path||e.composedPath&&e.composedPath();e.target&&e.target.shadowRoot&&i&&i[0]&&this._select.contains(i[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(e,i){this.items=e||[],this._scrollToEndFired=!1,this.itemsLength=e.length,this.virtualScroll?this._updateItemsRange(i):(this._setVirtualHeight(),this._updateItems(i))}_updateItems(e){this.update.emit(this.items),!1!==e&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,e)})})}_updateItemsRange(e){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{e?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(e){this.virtualScroll&&this._renderItemsRange(e),this._lastScrollPosition=e,this._fireScrollToEnd(e)}_updateVirtualHeight(e){this._updateScrollHeight&&(this._virtualPadding.style.height=`${e}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(e=null){if(e&&this._lastScrollPosition===e)return;const i=this._panelService.calculateItems(e=e||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(i.scrollHeight),this._contentPanel.style.transform=`translateY(${i.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(i.start,i.end)),this.scroll.emit({start:i.start,end:i.end})}),z1(e)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=e,this._lastScrollPosition=e)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[e]=this.items;return this.update.emit([e]),Promise.resolve().then(()=>{const r=this._dropdown.querySelector(`#${e.htmlId}`).clientHeight;return this._virtualPadding.style.height=r*this.itemsLength+"px",this._panelService.setDimensions(r,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(e){this._scrollToEndFired||0===e||e+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(e){if("auto"!==this.position)return this.position;const i=this._select.getBoundingClientRect(),r=document.documentElement.scrollTop||document.body.scrollTop;return i.top+window.pageYOffset+i.height+e.getBoundingClientRect().height>r+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const e=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect();this._dropdown.style.left=e.left-i.left+"px",this._dropdown.style.width=e.width+"px",this._dropdown.style.minWidth=e.width+"px"}_updateYPosition(){const e=this._select.getBoundingClientRect(),i=this._parent.getBoundingClientRect(),r=e.height;"top"===this._currentPosition?(this._dropdown.style.bottom=i.bottom-e.bottom+r+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=e.top-i.top+r+"px",this._dropdown.style.bottom="auto")}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{B0(this._dropdown,"mousedown").pipe(V1(this._destroy$)).subscribe(e=>{"INPUT"!==e.target.tagName&&e.preventDefault()})})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(pl),Et(Sr),Et(uI),Et(zr),Et(ao,8))};static#t=this.\u0275cmp=ar({type:t,selectors:[["ng-dropdown-panel"]],viewQuery:function(i,r){if(1&i&&(ds(WK,7,zr),ds(YK,7,zr),ds(XK,7,zr)),2&i){let o;mr(o=gr())&&(r.contentElementRef=o.first),mr(o=gr())&&(r.scrollElementRef=o.first),mr(o=gr())&&(r.paddingElementRef=o.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[Bn],ngContentSelectors:aI,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(i,r){1&i&&(Lc(),ei(0,ZK,2,4,"div",0),mn(1,"div",1,2),Ni(3,"div",null,3),mn(5,"div",null,4),Oo(7),wn()(),ei(8,$K,2,4,"div",5)),2&i&&(_n("ngIf",r.headerTemplate),tn(3),go("total-padding",r.virtualScroll),tn(2),go("scrollable-content",r.virtualScroll&&r.items.length),tn(3),_n("ngIf",r.footerTemplate))},dependencies:[z2,s3],encapsulation:2,changeDetection:0})}return t})(),fI=(()=>{class t{get disabled(){return this._disabled}set disabled(e){this._disabled=this._isDisabled(e)}constructor(e){this.elementRef=e,this.stateChange$=new ne,this._disabled=!1}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(e){e.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(e){return null!=e&&"false"!=`${e}`}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr))};static#t=this.\u0275cmp=ar({type:t,selectors:[["ng-option"]],inputs:{value:"value",disabled:"disabled"},features:[Bn],ngContentSelectors:aI,decls:1,vars:0,template:function(i,r){1&i&&(Lc(),Oo(0))},encapsulation:2,changeDetection:0})}return t})(),GQ=(()=>{class t{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),WQ=(()=>{class t{warn(e){console.warn(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const pI=new Gn("ng-select-selection-model");let mI=(()=>{class t{get items(){return this._items}set items(e){null===e&&(e=[]),this._itemsAreUsed=!0,this._items=e}get compareWith(){return this._compareWith}set compareWith(e){if(null!=e&&!im(e))throw Error("`compareWith` must be a function.");this._compareWith=e}get clearSearchOnAdd(){return z1(this._clearSearchOnAdd)?this._clearSearchOnAdd:z1(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(e){this._clearSearchOnAdd=e}get deselectOnClick(){return z1(this._deselectOnClick)?this._deselectOnClick:z1(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(e){this._deselectOnClick=e}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(e,i,r,o,c,x,z){this.classes=e,this.autoFocus=i,this.config=r,this._cd=x,this._console=z,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=O=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new Cr,this.focusEvent=new Cr,this.changeEvent=new Cr,this.openEvent=new Cr,this.closeEvent=new Cr,this.searchEvent=new Cr,this.clearEvent=new Cr,this.addEvent=new Cr,this.removeEvent=new Cr,this.scroll=new Cr,this.scrollToEnd=new Cr,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=lI(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new ne,this._keyPress$=new ne,this._onChange=O=>{},this._onTouched=()=>{},this.clearItem=O=>{const J=this.selectedItems.find(le=>le.value===O);this.unselect(J)},this.trackByOption=(O,J)=>this.trackByFn?this.trackByFn(J.value):J,this._mergeGlobalConfig(r),this.itemsList=new jQ(this,o()),this.element=c.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(e=>e.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(e){e.multiple&&this.itemsList.clearSelected(),e.items&&this._setItems(e.items.currentValue||[]),e.isOpen&&(this._manualOpen=z1(e.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),z1(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(e){if(Z0[e.which]){if(!1===this.keyDownFn(e))return;this.handleKeyCode(e)}else e.key&&1===e.key.length&&this._keyPress$.next(e.key.toLocaleLowerCase())}handleKeyCode(e){switch(e.which){case Z0.ArrowDown:this._handleArrowDown(e);break;case Z0.ArrowUp:this._handleArrowUp(e);break;case Z0.Space:this._handleSpace(e);break;case Z0.Enter:this._handleEnter(e);break;case Z0.Tab:this._handleTab(e);break;case Z0.Esc:this.close(),e.preventDefault();break;case Z0.Backspace:this._handleBackspace()}}handleMousedown(e){const i=e.target;"INPUT"!==i.tagName&&e.preventDefault(),i.classList.contains("ng-clear-wrapper")?this.handleClearClick():i.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():i.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(e){this.itemsList.clearSelected(),this._handleWriteValue(e),this._cd.markForCheck()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabled=e,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(e){!e||e.disabled||this.disabled||(this.deselectOnClick&&e.selected?this.unselect(e):this.select(e),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(e){e.selected||(this.itemsList.select(e),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(e.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.readOnly||this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(e){e&&(this.itemsList.unselect(e),this.focus(),this._updateNgModel(),this.removeEvent.emit(e))}selectTag(){let e;e=im(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const i=r=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(r,null):this.itemsList.addItem(r);!function PQ(t){return t instanceof Promise}(e)?e&&this.select(i(e)):e.then(r=>this.select(i(r))).catch(()=>{})}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}get showAddTag(){if(!this._validTerm)return!1;const e=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(i=>i.label.toLowerCase()===e)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(i=>i.label.toLowerCase()===e))&&!this.loading}showNoItemsFound(){const e=0===this.itemsList.filteredItems.length;return(e&&!this._isTypeahead&&!this.loading||e&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(e){this._isComposing=!1,!this.searchWhileComposing&&this.filter(e)}filter(e){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=e,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(e),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:e,items:this.itemsList.filteredItems.map(i=>i.value)}),this.open())}onInputFocus(e){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(e),this.focused=!0)}onInputBlur(e){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(e),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(e){e.disabled||this.itemsList.markItem(e)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const e=this.selectedItems&&this.selectedItems[0];this.searchTerm=e&&e.label||null}_setItems(e){const i=e[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=z1(i)?!ph(i):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(e),e.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&z1(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const e=r=>{this.items=r.map(o=>({$ngOptionValue:o.value,$ngOptionLabel:o.elementRef.nativeElement.innerHTML,disabled:o.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},i=()=>{const r=un(this.ngOptions.changes,this._destroy$);un(...this.ngOptions.map(o=>o.stateChange$)).pipe(V1(r)).subscribe(o=>{const c=this.itemsList.findItem(o.value);c.disabled=o.disabled,c.label=o.label||c.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe(s0(this.ngOptions),V1(this._destroy$)).subscribe(r=>{this.bindLabel=this._defaultLabel,e(r),i()})}_isValidWriteValue(e){if(!z1(e)||this.multiple&&""===e||Array.isArray(e)&&0===e.length)return!1;const i=r=>!(!z1(this.compareWith)&&ph(r)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(r)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(e)?e.every(r=>i(r)):(this._console.warn("Multiple select ngModel should be array."),!1):i(e)}_handleWriteValue(e){if(!this._isValidWriteValue(e))return;const i=r=>{let o=this.itemsList.findItem(r);if(o)this.itemsList.select(o);else{const c=ph(r);c||!c&&!this.bindValue?this.itemsList.select(this.itemsList.mapItem(r,null)):this.bindValue&&(o={[this.bindLabel]:null,[this.bindValue]:r},this.itemsList.select(this.itemsList.mapItem(o,null)))}};this.multiple?e.forEach(r=>i(r)):i(e)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(V1(this._destroy$),F1(e=>this._pressedKeys.push(e)),nm(200),oc(()=>this._pressedKeys.length>0),ue(()=>this._pressedKeys.join(""))).subscribe(e=>{const i=this.itemsList.findByLabel(e);i&&(this.isOpen?(this.itemsList.markItem(i),this._scrollToMarked(),this._cd.markForCheck()):this.select(i)),this._pressedKeys=[]})}_setInputAttributes(){const e=this.searchInput.nativeElement,i={type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId,...this.inputAttrs};for(const r of Object.keys(i))e.setAttribute(r,i[r])}_updateNgModel(){const e=[];for(const r of this.selectedItems)if(this.bindValue){let o=null;o=r.children?r.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(r.value,this.bindValue),e.push(o)}else e.push(r.value);const i=this.selectedItems.map(r=>r.value);this.multiple?(this._onChange(e),this.changeEvent.emit(i)):(this._onChange(z1(e[0])?e[0]:null),this.changeEvent.emit(i[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(e){this.searchTerm=e,this._isTypeahead&&this.typeahead.next(e)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(e){!1===this.isOpen&&!this.addTag||(this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),e.preventDefault()):this.showAddTag?(this.selectTag(),e.preventDefault()):this.close():this.close())}_handleEnter(e){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}e.preventDefault()}_handleSpace(e){this.isOpen||this._manualOpen||(this.open(),e.preventDefault())}_handleArrowDown(e){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),e.preventDefault()}_handleArrowUp(e){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),e.preventDefault())}_nextItemIsTag(e){const i=this.itemsList.markedIndex+e;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(i<0||i===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const e=this.searchTerm&&this.searchTerm.trim();return e&&e.length>=this.minTermLength}_mergeGlobalConfig(e){this.placeholder=this.placeholder||e.placeholder,this.notFoundText=this.notFoundText||e.notFoundText,this.typeToSearchText=this.typeToSearchText||e.typeToSearchText,this.addTagText=this.addTagText||e.addTagText,this.loadingText=this.loadingText||e.loadingText,this.clearAllText=this.clearAllText||e.clearAllText,this.virtualScroll=z1(this.virtualScroll)?this.virtualScroll:!!z1(e.disableVirtualScroll)&&!e.disableVirtualScroll,this.openOnEnter=z1(this.openOnEnter)?this.openOnEnter:e.openOnEnter,this.appendTo=this.appendTo||e.appendTo,this.bindValue=this.bindValue||e.bindValue,this.bindLabel=this.bindLabel||e.bindLabel,this.appearance=this.appearance||e.appearance}static#e=this.\u0275fac=function(i){return new(i||t)(ll("class"),ll("autofocus"),Et(GQ),Et(pI),Et(zr),Et(E2),Et(WQ))};static#t=this.\u0275cmp=ar({type:t,selectors:[["ng-select"]],contentQueries:function(i,r,o){if(1&i&&(ya(o,TQ,5,Co),ya(o,cI,5,Co),ya(o,LQ,5,Co),ya(o,DQ,5,Co),ya(o,OQ,5,Co),ya(o,kQ,5,Co),ya(o,NQ,5,Co),ya(o,RQ,5,Co),ya(o,FQ,5,Co),ya(o,VQ,5,Co),ya(o,HQ,5,Co),ya(o,fI,5)),2&i){let c;mr(c=gr())&&(r.optionTemplate=c.first),mr(c=gr())&&(r.optgroupTemplate=c.first),mr(c=gr())&&(r.labelTemplate=c.first),mr(c=gr())&&(r.multiLabelTemplate=c.first),mr(c=gr())&&(r.headerTemplate=c.first),mr(c=gr())&&(r.footerTemplate=c.first),mr(c=gr())&&(r.notFoundTemplate=c.first),mr(c=gr())&&(r.typeToSearchTemplate=c.first),mr(c=gr())&&(r.loadingTextTemplate=c.first),mr(c=gr())&&(r.tagTemplate=c.first),mr(c=gr())&&(r.loadingSpinnerTemplate=c.first),mr(c=gr())&&(r.ngOptions=c)}},viewQuery:function(i,r){if(1&i&&(ds(hI,5),ds(qK,7)),2&i){let o;mr(o=gr())&&(r.dropdownPanel=o.first),mr(o=gr())&&(r.searchInput=o.first)}},hostVars:20,hostBindings:function(i,r){1&i&&Ki("keydown",function(c){return r.handleKeyDown(c)}),2&i&&go("ng-select-typeahead",r.typeahead)("ng-select-multiple",r.multiple)("ng-select-taggable",r.addTag)("ng-select-searchable",r.searchable)("ng-select-clearable",r.clearable)("ng-select-opened",r.isOpen)("ng-select",r.useDefaultClass)("ng-select-disabled",r.disabled)("ng-select-filtered",r.filtered)("ng-select-single",r.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:"markFirst",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",openOnEnter:"openOnEnter",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",bufferAmount:"bufferAmount",virtualScroll:"virtualScroll",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:"tabIndex",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[Fr([{provide:P2,useExisting:Bt(()=>t),multi:!0},uI]),Bn],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],[1,"ng-clear-wrapper",3,"title"],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(i,r){if(1&i){const o=o1();mn(0,"div",0),Ki("mousedown",function(x){return r.handleMousedown(x)}),mn(1,"div",1)(2,"div",2),Ci(3),wn(),ei(4,tQ,2,2,"ng-container",3),ei(5,rQ,1,5,null,3),mn(6,"div",4)(7,"input",5,6),Ki("input",function(){Qr(o);const x=Ts(8);return xo(r.filter(x.value))})("compositionstart",function(){return r.onCompositionStart()})("compositionend",function(){Qr(o);const x=Ts(8);return xo(r.onCompositionEnd(x.value))})("focus",function(x){return r.onInputFocus(x)})("blur",function(x){return r.onInputBlur(x)})("change",function(x){return x.stopPropagation()}),wn()()(),ei(9,sQ,4,1,"ng-container",3),ei(10,cQ,3,1,"span",7),mn(11,"span",8),Ni(12,"span",9),wn()(),ei(13,SQ,7,19,"ng-dropdown-panel",10)}2&i&&(go("ng-appearance-outline","outline"===r.appearance)("ng-has-value",r.hasValue),tn(3),wo(r.placeholder),tn(1),_n("ngIf",(!r.multiLabelTemplate||!r.multiple)&&r.selectedItems.length>0),tn(1),_n("ngIf",r.multiple&&r.multiLabelTemplate&&r.selectedValues.length>0),tn(1),zo("aria-expanded",r.isOpen)("aria-owns",r.isOpen?r.dropdownId:null),tn(1),_n("readOnly",!r.searchable||r.itemsList.maxItemsSelected)("disabled",r.disabled)("value",r.searchTerm?r.searchTerm:""),zo("id",r.labelForId)("tabindex",r.tabIndex)("aria-activedescendant",r.isOpen?null==r.itemsList||null==r.itemsList.markedItem?null:r.itemsList.markedItem.htmlId:null)("aria-controls",r.isOpen?r.dropdownId:null),tn(2),_n("ngIf",r.loading),tn(1),_n("ngIf",r.showClear()),tn(3),_n("ngIf",r.isOpen))},dependencies:[B4,N0,z2,s3,hI,IQ],styles:['@charset "UTF-8";.ng-select{position:relative;display:block;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@keyframes load8{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}\n'],encapsulation:2,changeDetection:0})}return t})();function YQ(){return new XQ}class XQ{constructor(){this._selected=[]}get value(){return this._selected}select(n,e,i){if(n.selected=!0,(!n.children||!e&&i)&&this._selected.push(n),e)if(n.parent){const r=n.parent.children.length,o=n.parent.children.filter(c=>c.selected).length;n.parent.selected=r===o}else n.children&&(this._setChildrenSelectedState(n.children,!0),this._removeChildren(n),this._selected=i&&this._activeChildren(n)?[...this._selected.filter(r=>r.parent!==n),n]:[...this._selected,...n.children.filter(r=>!r.disabled)])}unselect(n,e){if(this._selected=this._selected.filter(i=>i!==n),n.selected=!1,e)if(n.parent&&n.parent.selected){const i=n.parent.children;this._removeParent(n.parent),this._removeChildren(n.parent),this._selected.push(...i.filter(r=>r!==n&&!r.disabled)),n.parent.selected=!1}else n.children&&(this._setChildrenSelectedState(n.children,!1),this._removeChildren(n))}clear(n){this._selected=n?this._selected.filter(e=>e.disabled):[]}_setChildrenSelectedState(n,e){for(const i of n)i.disabled||(i.selected=e)}_removeChildren(n){this._selected=[...this._selected.filter(e=>e.parent!==n),...n.children.filter(e=>e.parent===n&&e.disabled&&e.selected)]}_removeParent(n){this._selected=this._selected.filter(e=>e!==n)}_activeChildren(n){return n.children.every(e=>!e.disabled||e.selected)}}let gI=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[{provide:pI,useValue:YQ}],imports:[pc]})}return t})();class ZQ{constructor(n){this._box=n,this._destroyed=new ne,this._resizeSubject=new ne,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(n){return this._elementObservables.has(n)||this._elementObservables.set(n,new $(e=>{const i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(n,{box:this._box}),()=>{this._resizeObserver?.unobserve(n),i.unsubscribe(),this._elementObservables.delete(n)}}).pipe(oc(e=>e.some(i=>i.target===n)),Hv({bufferSize:1,refCount:!0}),V1(this._destroyed))),this._elementObservables.get(n)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let $Q=(()=>{class t{constructor(){this._observers=new Map,this._ngZone=li(Sr)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new ZQ(r)),this._observers.get(r).observe(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class vI{}class qQ{}const $0="*";function Oc(t,n){return{type:7,name:t,definitions:n,options:{}}}function Ss(t,n=null){return{type:4,styles:n,timings:t}}function jy(t,n=null){return{type:3,steps:t,options:n}}function yI(t,n=null){return{type:2,steps:t,options:n}}function Ur(t){return{type:6,styles:t,offset:null}}function ys(t,n,e){return{type:0,name:t,styles:n,options:e}}function _s(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}class mh{constructor(n=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class _I{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let e=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==o&&this._onFinish()}),c.onDestroy(()=>{++i==o&&this._onDestroy()}),c.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,x)=>Math.max(c,x.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const e=n*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const n=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const e="start"==n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}let bI=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Gy=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[bI]})}return t})();function Ku(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function SI(t){return n=>n.lift(new fJ(t))}class fJ{constructor(n){this.total=n}call(n,e){return e.subscribe(new pJ(n,this.total))}}class pJ extends R{constructor(n,e){super(n),this.total=e,this.count=0}_next(n){++this.count>this.total&&this.destination.next(n)}}const EI=new Set;let l6,mJ=(()=>{class t{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):vJ}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function gJ(t,n){if(!EI.has(t))try{l6||(l6=document.createElement("style"),n&&(l6.nonce=n),l6.setAttribute("type","text/css"),document.head.appendChild(l6)),l6.sheet&&(l6.sheet.insertRule(`@media ${t} {body{ }}`,0),EI.add(t))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(gc),Sn(G7,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vJ(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let AI=(()=>{class t{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new ne}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return zI(hp(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let o=U5(zI(hp(e)).map(c=>this._registerQuery(c).observable));return o=d3(o.pipe(R1(1)),o.pipe(SI(1),nm(0))),o.pipe(ue(c=>{const x={matches:!1,breakpoints:{}};return c.forEach(({matches:z,query:O})=>{x.matches=x.matches||z,x.breakpoints[O]=z}),x}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),o={observable:new $(c=>{const x=z=>this._zone.run(()=>c.next(z));return i.addListener(x),()=>{i.removeListener(x)}}).pipe(s0(i),ue(({matches:c})=>({query:e,matches:c})),V1(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(mJ),Sn(Sr))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zI(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}function II(t,n,e){const r=TI(t,n).filter(o=>o!=e.trim());r.length?t.setAttribute(n,r.join(" ")):t.removeAttribute(n)}function TI(t,n){return(t.getAttribute(n)||"").match(/\S+/g)||[]}class LI{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ne,this._typeaheadSubscription=_.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new ne,this.change=new ne,n instanceof fd&&(this._itemChangesSubscription=n.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(F1(e=>this._pressedLetters.push(e)),nm(n),oc(()=>this._pressedLetters.length>0),ue(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const o=(this._activeItemIndex+r)%i.length,c=i[o];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){const e=this._activeItem;this.updateActiveItem(n),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){const e=n.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!n[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const o=this._activeItemIndex+this._pageUpAndDown.delta,c=this._getItemsArray().length;this._setActiveItemByIndex(o<c?o:c-1,-1);break}return;default:return void((r||Ku(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const e=this._getItemsArray(),i="number"==typeof n?n:e.indexOf(n);this._activeItem=e[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+n*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){const i=this._getItemsArray();if(i[n]){for(;this._skipPredicateFn(i[n]);)if(!i[n+=e])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof fd?this._items.toArray():this._items}}class wJ extends LI{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}let lm=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function SJ(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function MJ(t){try{return t.frameElement}catch{return null}}(function DJ(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(i&&(-1===OI(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),o=OI(e);return e.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function TJ(t){let n=t.nodeName.toLowerCase(),e="input"===n&&t.type;return"text"===e||"password"===e||"select"===n||"textarea"===n}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function LJ(t){return!function AJ(t){return function PJ(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function EJ(t){let n=t.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(t)||function zJ(t){return function IJ(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||DI(t))}(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(gc))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function DI(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let n=t.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function OI(t){if(!DI(t))return null;const n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class OJ{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,e,i,r,o=!1){this._element=n,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){const e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const e=n.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(R1(1)).subscribe(n)}}let Xy=(()=>{class t{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new OJ(e,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(lm),Sn(Sr),Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kI(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function NI(t){const n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const kJ=new Gn("cdk-input-modality-detector-options"),NJ={ignoreKeys:[18,17,224,91,16]},R3=q4({passive:!0,capture:!0});let RJ=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(e,i,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new an(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(x=>x===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=j0(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(kI(c)?"keyboard":"mouse"),this._mostRecentTarget=j0(c))},this._onTouchstart=c=>{NI(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=j0(c))},this._options={...NJ,...o},this.modalityDetected=this._modality.pipe(SI(1)),this.modalityChanged=this.modalityDetected.pipe(Se()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,R3),r.addEventListener("mousedown",this._onMousedown,R3),r.addEventListener("touchstart",this._onTouchstart,R3)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,R3),document.removeEventListener("mousedown",this._onMousedown,R3),document.removeEventListener("touchstart",this._onTouchstart,R3))}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(gc),Sn(Sr),Sn(ao),Sn(kJ,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const VJ=new Gn("cdk-focus-monitor-default-options"),um=q4({passive:!0,capture:!0});let F3=(()=>{class t{constructor(e,i,r,o,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ne,this._rootNodeFocusAndBlurListener=x=>{for(let O=j0(x);O;O=O.parentElement)"focus"===x.type?this._onFocus(x,O):this._onBlur(x,O)},this._document=o,this._detectionMode=c?.detectionMode||0}monitor(e,i=!1){const r=H0(e);if(!this._platform.isBrowser||1!==r.nodeType)return cn();const o=function hZ(t){if(function dZ(){if(null==Pv){const t=typeof document<"u"?document.head:null;Pv=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Pv}()){const n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const x={checkChildren:i,subject:new ne,rootNode:o};return this._elementInfo.set(r,x),this._registerGlobalListeners(x),x.subject}stopMonitoring(e){const i=H0(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const o=H0(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([x,z])=>this._originChanged(x,i,z)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),o=j0(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,um),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,um)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(V1(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,um),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,um),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const o=e.labels;if(o)for(let c=0;c<o.length;c++)if(o[c].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Sr),Sn(gc),Sn(RJ),Sn(ao,8),Sn(VJ,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const FI="cdk-high-contrast-black-on-white",VI="cdk-high-contrast-white-on-black",Zy="cdk-high-contrast-active";let HI=(()=>{class t{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=li(AI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Zy,FI,VI),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(Zy,FI):2===i&&e.add(Zy,VI)}}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(gc),Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),BI=(()=>{class t{constructor(e){e._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(HI))};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[Gy]})}return t})();const HJ=["text"];function BJ(t,n){if(1&t&&Ni(0,"mat-pseudo-checkbox",6),2&t){const e=di();_n("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function jJ(t,n){1&t&&Ni(0,"mat-pseudo-checkbox",7),2&t&&_n("disabled",di().disabled)}function UJ(t,n){if(1&t&&(mn(0,"span",8),Ci(1),wn()),2&t){const e=di();tn(1),Ca("(",e.group.label,")")}}const GJ=[[["mat-icon"]],"*"],WJ=["mat-icon","*"],$J=new Gn("mat-sanity-checks",{providedIn:"root",factory:function ZJ(){return!0}});let _o=(()=>{class t{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Iv()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(HI),Sn($J,8),Sn(ao))};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[jd,jd]})}return t})();function GI(t){return class extends t{get disabled(){return this._disabled}set disabled(n){this._disabled=_a(n)}constructor(...n){super(...n),this._disabled=!1}}}function $y(t,n){return class extends t{get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...e){super(...e),this.defaultColor=n,this.color=n}}}function dm(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=_a(n)}constructor(...n){super(...n),this._disableRipple=!1}}}function KJ(t){return class extends t{updateErrorState(){const n=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==n&&(this.errorState=o,this.stateChanges.next())}constructor(...n){super(...n),this.errorState=!1}}}let JJ=(()=>{class t{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class eee{constructor(n,e,i,r=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const WI=q4({passive:!0,capture:!0});class tee{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const e=j0(n);e&&this._events.get(n.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(n))})}}addHandler(n,e,i,r){const o=this._events.get(e);if(o){const c=o.get(i);c?c.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,WI)})}removeHandler(n,e,i){const r=this._events.get(n);if(!r)return;const o=r.get(e);o&&(o.delete(i),0===o.size&&r.delete(e),0===r.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,WI)))}}const YI={enterDuration:225,exitDuration:150},XI=q4({passive:!0,capture:!0}),ZI=["mousedown","touchstart"],$I=["mouseup","mouseleave","touchend","touchcancel"];class vh{static#e=this._eventManager=new tee;constructor(n,e,i,r){this._target=n,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=H0(i))}fadeInRipple(n,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...YI,...i.animation};i.centered&&(n=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function iee(t,n,e){const i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+r*r)}(n,e,r),x=n-r.left,z=e-r.top,O=o.enterDuration,J=document.createElement("div");J.classList.add("mat-ripple-element"),J.style.left=x-c+"px",J.style.top=z-c+"px",J.style.height=2*c+"px",J.style.width=2*c+"px",null!=i.color&&(J.style.backgroundColor=i.color),J.style.transitionDuration=`${O}ms`,this._containerElement.appendChild(J);const le=window.getComputedStyle(J),Ee=le.transitionDuration,ut="none"===le.transitionProperty||"0s"===Ee||"0s, 0s"===Ee||0===r.width&&0===r.height,mt=new eee(this,J,i,ut);J.style.transform="scale3d(1, 1, 1)",mt.state=0,i.persistent||(this._mostRecentTransientRipple=mt);let Nt=null;return!ut&&(O||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ht=()=>this._finishRippleTransition(mt),vt=()=>this._destroyRipple(mt);J.addEventListener("transitionend",Ht),J.addEventListener("transitioncancel",vt),Nt={onTransitionEnd:Ht,onTransitionCancel:vt}}),this._activeRipples.set(mt,Nt),(ut||!O)&&this._finishRippleTransition(mt),mt}fadeOutRipple(n){if(2===n.state||3===n.state)return;const e=n.element,i={...YI,...n.config.animation};e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const e=H0(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,ZI.forEach(i=>{vh._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{$I.forEach(e=>{this._triggerElement.addEventListener(e,this,XI)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=1,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==e&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel)),n.element.remove()}_onMousedown(n){const e=kI(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!NI(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=n.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(ZI.forEach(e=>vh._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&$I.forEach(e=>n.removeEventListener(e,this,XI)))}}const hm=new Gn("mat-ripple-global-options");let fm=(()=>{class t{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,o,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new vh(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(Sr),Et(gc),Et(hm,8),Et(B2,8))};static#t=this.\u0275dir=In({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&go("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})(),V3=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,_o]})}return t})(),ree=(()=>{class t{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||t)(Et(B2,8))};static#t=this.\u0275cmp=ar({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&go("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return t})(),qI=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o]})}return t})();const KI=new Gn("MAT_OPTION_PARENT_COMPONENT"),QI=new Gn("MatOptgroup");let oee=0;class JI{constructor(n,e=!1){this.source=n,this.isUserInput=e}}let aee=(()=>{class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=_a(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,i,r,o){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+oee++,this.onSelectionChange=new Cr,this._stateChanges=new ne}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Ku(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new JI(this,e))}static#e=this.\u0275fac=function(i){j6()};static#t=this.\u0275dir=In({type:t,viewQuery:function(i,r){if(1&i&&ds(HJ,7),2&i){let o;mr(o=gr())&&(r._text=o.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}})}return t})(),qy=(()=>{class t extends aee{constructor(e,i,r,o){super(e,i,r,o)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(E2),Et(KI,8),Et(QI,8))};static#t=this.\u0275cmp=ar({type:t,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){1&i&&Ki("click",function(){return r._selectViaInteraction()})("keydown",function(c){return r._handleKeydown(c)}),2&i&&(kl("id",r.id),zo("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),go("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},exportAs:["matOption"],features:[Qi],ngContentSelectors:WJ,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox","aria-hidden","true",3,"disabled","state",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","aria-hidden","true","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(i,r){1&i&&(Lc(GJ),ei(0,BJ,1,2,"mat-pseudo-checkbox",0),Oo(1),mn(2,"span",1,2),Oo(4,1),wn(),ei(5,jJ,1,1,"mat-pseudo-checkbox",3),ei(6,UJ,2,1,"span",4),Ni(7,"div",5)),2&i&&(_n("ngIf",r.multiple),tn(5),_n("ngIf",!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator),tn(1),_n("ngIf",r.group&&r.group._inert),tn(1),_n("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[fm,z2,ree],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),pm=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[V3,pc,_o,qI]})}return t})();const eT={capture:!0},tT=["focus","click","mouseenter","touchstart"],Ky="mat-ripple-loader-uninitialized",Qy="mat-ripple-loader-class-name",nT="mat-ripple-loader-centered",mm="mat-ripple-loader-disabled";let lee=(()=>{class t{constructor(){this._document=li(ao,{optional:!0}),this._animationMode=li(B2,{optional:!0}),this._globalRippleOptions=li(hm,{optional:!0}),this._platform=li(gc),this._ngZone=li(Sr),this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;const r=e.target.closest(`[${Ky}]`);r&&this.createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const e of tT)this._document?.addEventListener(e,this._onInteraction,eT)})}ngOnDestroy(){for(const e of tT)this._document?.removeEventListener(e,this._onInteraction,eT)}configureRipple(e,i){e.setAttribute(Ky,""),(i.className||!e.hasAttribute(Qy))&&e.setAttribute(Qy,i.className||""),i.centered&&e.setAttribute(nT,""),i.disabled&&e.setAttribute(mm,"")}getRipple(e){return e.matRipple?e.matRipple:this.createRipple(e)}setDisabled(e,i){const r=e.matRipple;r?r.disabled=i:i?e.setAttribute(mm,""):e.removeAttribute(mm)}createRipple(e){if(!this._document)return;e.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(Qy)),e.append(i);const r=new fm(new zr(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=e,r.centered=e.hasAttribute(nT),r.disabled=e.hasAttribute(mm),this.attachRipple(e,r),r}attachRipple(e,i){e.removeAttribute(Ky),e.matRipple=i}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const uee=["notch"],dee=["matFormFieldNotchedOutline",""],hee=["*"],fee=["textField"],pee=["iconPrefixContainer"],mee=["textPrefixContainer"];function gee(t,n){1&t&&Ni(0,"span",19)}function vee(t,n){if(1&t&&(mn(0,"label",17),Oo(1,1),ei(2,gee,1,0,"span",18),wn()),2&t){const e=di(2);_n("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),zo("for",e._control.id),tn(2),_n("ngIf",!e.hideRequiredMarker&&e._control.required)}}function yee(t,n){1&t&&ei(0,vee,3,5,"label",16),2&t&&_n("ngIf",di()._hasFloatingLabel())}function _ee(t,n){1&t&&Ni(0,"div",20)}function bee(t,n){}function xee(t,n){1&t&&ei(0,bee,0,0,"ng-template",22),2&t&&(di(2),_n("ngTemplateOutlet",Ts(1)))}function wee(t,n){if(1&t&&(mn(0,"div",21),ei(1,xee,1,1,"ng-template",9),wn()),2&t){const e=di();_n("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),tn(1),_n("ngIf",!e._forceDisplayInfixLabel())}}function Cee(t,n){1&t&&(mn(0,"div",23,24),Oo(2,2),wn())}function Mee(t,n){1&t&&(mn(0,"div",25,26),Oo(2,3),wn())}function See(t,n){}function Eee(t,n){1&t&&ei(0,See,0,0,"ng-template",22),2&t&&(di(),_n("ngTemplateOutlet",Ts(1)))}function Aee(t,n){1&t&&(mn(0,"div",27),Oo(1,4),wn())}function zee(t,n){1&t&&(mn(0,"div",28),Oo(1,5),wn())}function Pee(t,n){1&t&&Ni(0,"div",29)}function Iee(t,n){1&t&&(mn(0,"div",30),Oo(1,6),wn()),2&t&&_n("@transitionMessages",di()._subscriptAnimationState)}function Tee(t,n){if(1&t&&(mn(0,"mat-hint",34),Ci(1),wn()),2&t){const e=di(2);_n("id",e._hintLabelId),tn(1),wo(e.hintLabel)}}function Lee(t,n){if(1&t&&(mn(0,"div",31),ei(1,Tee,2,2,"mat-hint",32),Oo(2,7),Ni(3,"div",33),Oo(4,8),wn()),2&t){const e=di();_n("@transitionMessages",e._subscriptAnimationState),tn(1),_n("ngIf",e.hintLabel)}}const Dee=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Oee=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let yh=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t,selectors:[["mat-label"]]})}return t})(),kee=0;const iT=new Gn("MatError");let Jy=(()=>{class t{constructor(e,i){this.id="mat-mdc-error-"+kee++,e||i.nativeElement.setAttribute("aria-live","polite")}static#e=this.\u0275fac=function(i){return new(i||t)(ll("aria-live"),Et(zr))};static#t=this.\u0275dir=In({type:t,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(i,r){2&i&&kl("id",r.id)},inputs:{id:"id"},features:[Fr([{provide:iT,useExisting:t}])]})}return t})(),Nee=0,rT=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+Nee++}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(kl("id",r.id),zo("align",null),go("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}return t})();const Ree=new Gn("MatPrefix"),Fee=new Gn("MatSuffix"),oT=new Gn("FloatingLabelParent");let aT=(()=>{class t{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=li($Q),this._ngZone=li(Sr),this._parent=li(oT),this._resizeSubscription=new _}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function Vee(t){if(null!==t.offsetParent)return t.scrollWidth;const e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const i=e.scrollWidth;return e.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr))};static#t=this.\u0275dir=In({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&go("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return t})();const sT="mdc-line-ripple--active",gm="mdc-line-ripple--deactivating";let cT=(()=>{class t{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=r=>{const o=this._elementRef.nativeElement.classList,c=o.contains(gm);"opacity"===r.propertyName&&c&&o.remove(sT,gm)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(gm),e.add(sT)}deactivate(){this._elementRef.nativeElement.classList.add(gm)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(Sr))};static#t=this.\u0275dir=In({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return t})(),lT=(()=>{class t{constructor(e,i){this._elementRef=e,this._ngZone=i,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(Sr))};static#t=this.\u0275cmp=ar({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&ds(uee,5),2&i){let o;mr(o=gr())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&go("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:dee,ngContentSelectors:hee,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(Lc(),Ni(0,"div",0),mn(1,"div",1,2),Oo(3),wn(),Ni(4,"div",3))},encapsulation:2,changeDetection:0})}return t})();const Hee={transitionMessages:Oc("transitionMessages",[ys("enter",Ur({opacity:1,transform:"translateY(0%)"})),_s("void => enter",[Ur({opacity:0,transform:"translateY(-5px)"}),Ss("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let e_=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t})}return t})();const t_=new Gn("MatFormField"),Bee=new Gn("MAT_FORM_FIELD_DEFAULT_OPTIONS");let uT=0,n_=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=_a(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,r,o,c,x,z,O){this._elementRef=e,this._changeDetectorRef=i,this._ngZone=r,this._dir=o,this._platform=c,this._defaults=x,this._animationMode=z,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+uT++,this._hintLabelId="mat-mdc-hint-"+uT++,this._subscriptAnimationState="",this._destroyed=new ne,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,x&&(x.appearance&&(this.appearance=x.appearance),this._hideRequiredMarker=!!x?.hideRequiredMarker,x.color&&(this.color=x.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(V1(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),un(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(V1(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(V1(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,r=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=i?.getBoundingClientRect().width??0,c=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+c}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(E2),Et(Sr),Et(E3),Et(gc),Et(Bee,8),Et(B2,8),Et(ao))};static#t=this.\u0275cmp=ar({type:t,selectors:[["mat-form-field"]],contentQueries:function(i,r,o){if(1&i&&(ya(o,yh,5),ya(o,yh,7),ya(o,e_,5),ya(o,Ree,5),ya(o,Fee,5),ya(o,iT,5),ya(o,rT,5)),2&i){let c;mr(c=gr())&&(r._labelChildNonStatic=c.first),mr(c=gr())&&(r._labelChildStatic=c.first),mr(c=gr())&&(r._formFieldControl=c.first),mr(c=gr())&&(r._prefixChildren=c),mr(c=gr())&&(r._suffixChildren=c),mr(c=gr())&&(r._errorChildren=c),mr(c=gr())&&(r._hintChildren=c)}},viewQuery:function(i,r){if(1&i&&(ds(fee,5),ds(pee,5),ds(mee,5),ds(aT,5),ds(lT,5),ds(cT,5)),2&i){let o;mr(o=gr())&&(r._textField=o.first),mr(o=gr())&&(r._iconPrefixContainer=o.first),mr(o=gr())&&(r._textPrefixContainer=o.first),mr(o=gr())&&(r._floatingLabel=o.first),mr(o=gr())&&(r._notchedOutline=o.first),mr(o=gr())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&go("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Fr([{provide:t_,useExisting:t},{provide:oT,useExisting:t}])],ngContentSelectors:Oee,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(i,r){1&i&&(Lc(Dee),ei(0,yee,1,1,"ng-template",null,0,J2),mn(2,"div",1,2),Ki("click",function(c){return r._control.onContainerClick(c)}),ei(4,_ee,1,0,"div",3),mn(5,"div",4),ei(6,wee,2,2,"div",5),ei(7,Cee,3,0,"div",6),ei(8,Mee,3,0,"div",7),mn(9,"div",8),ei(10,Eee,1,1,"ng-template",9),Oo(11),wn(),ei(12,Aee,2,0,"div",10),ei(13,zee,2,0,"div",11),wn(),ei(14,Pee,1,0,"div",12),wn(),mn(15,"div",13),ei(16,Iee,2,1,"div",14),ei(17,Lee,5,2,"div",15),wn()),2&i&&(tn(2),go("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),tn(2),_n("ngIf",!r._hasOutline()&&!r._control.disabled),tn(2),_n("ngIf",r._hasOutline()),tn(1),_n("ngIf",r._hasIconPrefix),tn(1),_n("ngIf",r._hasTextPrefix),tn(2),_n("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),tn(2),_n("ngIf",r._hasTextSuffix),tn(1),_n("ngIf",r._hasIconSuffix),tn(1),_n("ngIf",!r._hasOutline()),tn(1),go("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),_n("ngSwitch",r._getDisplayedMessages()),tn(1),_n("ngSwitchCase","error"),tn(1),_n("ngSwitchCase","hint"))},dependencies:[z2,s3,O5,xS,rT,aT,lT,cT],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Hee.transitionMessages]},changeDetection:0})}return t})(),i_=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,pc,Gy,_o]})}return t})();function fT(t){return"function"==typeof t}const _h=(t,n="ngOnDestroy")=>e=>{const i=t[n];if(!1===fT(i))throw new Error(`${t.constructor.name} is using untilDestroyed but doesn't implement ${n}`);return t.__takeUntilDestroy||(t.__takeUntilDestroy=new ne,t[n]=function(){fT(i)&&i.apply(this,arguments),t.__takeUntilDestroy.next(!0),t.__takeUntilDestroy.complete()}),e.pipe(V1(t.__takeUntilDestroy))};class Gee{constructor(n){this.ngSelect=n}isErrorState(n,e){return n?!!(n&&n.invalid&&(n.touched||e&&e.submitted)):this.ngSelect.required&&this.ngSelect.empty}}let Wee=(()=>{class t{static#e=this.nextId=0;get empty(){return null==this._value}get shouldLabelFloat(){return this.focused||!this.empty}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=_a(e),this.stateChanges.next()}get disabled(){return this._disabled}set disabled(e){this._disabled=_a(e),this.stateChanges.next()}get value(){return this._value}set value(e){this._value=e,this.stateChanges.next()}constructor(e,i,r,o){this.host=e,this.ngControl=i,this._parentForm=r,this._parentFormGroup=o,this.id="ng-select-"+t.nextId++,this.describedBy="",this.errorState=!1,this._defaultErrorStateMatcher=new Gee(this),this.stateChanges=new ne,this.focused=!1,this._required=!1,this._disabled=!1,e.focusEvent.asObservable().pipe(_h(this)).subscribe(c=>{this.focused=!0,this.stateChanges.next()}),e.blurEvent.asObservable().pipe(_h(this)).subscribe(c=>{this.focused=!1,this.stateChanges.next()})}ngOnInit(){this.ngControl?(this._value=this.ngControl.value,this._disabled=this.ngControl.disabled,this.ngControl.statusChanges.pipe(_h(this)).subscribe(e=>{const i="DISABLED"===e;i!==this._disabled&&(this.disabled=i)}),this.ngControl.valueChanges.pipe(_h(this)).subscribe(e=>{this._value=e,this.host.detectChanges(),this.stateChanges.next()})):this.host.changeEvent.asObservable().pipe(_h(this)).subscribe(e=>{this._value=e,this.host.detectChanges(),this.stateChanges.next()})}ngOnDestroy(){}ngDoCheck(){this.updateErrorState()}updateErrorState(){const e=this.errorState,c=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);c!==e&&(this.errorState=c,this.stateChanges.next())}setDescribedByIds(e){this.describedBy=e.join(" ")}onContainerClick(e){e.target.classList.contains("mat-form-field-infix")&&(this.host.focus(),this.host.open())}static#t=this.\u0275fac=function(i){return new(i||t)(Et(mI),Et(f0,10),Et(uh,8),Et(qu,8))};static#n=this.\u0275dir=In({type:t,selectors:[["","ngSelectMat",""]],hostVars:2,hostBindings:function(i,r){2&i&&(kl("id",r.id),zo("aria-describedby",r.describedBy))},inputs:{id:"id",errorStateMatcher:"errorStateMatcher",placeholder:"placeholder",required:"required",disabled:"disabled",value:"value"},features:[Fr([{provide:e_,useExisting:t}])]})}return t})();const Yee=["select"],Xee=function(){return["fal","times"]};function Zee(t,n){if(1&t){const e=o1();mn(0,"fa-icon",8),Ki("click",function(){Qr(e);const r=di(),o=Ts(5);return xo(r.onClose(o))}),wn()}2&t&&_n("icon",A1(1,Xee))}function $ee(t,n){if(1&t&&(mn(0,"div",9),Ci(1),wn()),2&t){const e=n.item;_n("hidden",!e.foundInDescription),tn(1),wo(e.foundInDescription?"Found in description":"")}}function qee(t,n){if(1&t&&(l2(0),mn(1,"ng-option",10),Ci(2),wn(),u2()),2&t){const e=n.$implicit;tn(1),_n("value",e),tn(1),wo(e.properties.title)}}const Kee=function(t){return{"search-opened":t}},Qee=function(){return["fal","search"]};let r_="en",Jee=(()=>{class t{constructor(e,i,r,o,c){this.sidebarService=e,this.elRef=i,this.mapService=r,this.translateService=o,this.stateService=c,this.searchOpen=!1,this.optionsOpen=!1,this.onChange=x=>{this.ngSelect.filter(x)},this.onKeyPress=x=>{("{shift}"===x||"{lock}"===x)&&this.handleShift()},this.handleShift=()=>{this.keyboard.setOptions({layoutName:"default"===this.keyboard.options.layoutName?"shift":"default"})},r_=this.translateService.currentLang}ngOnInit(){const e=this.elRef.nativeElement.children[0].children[2].children[0].children[0].children[1].children[0];this.elRef.nativeElement.children[0].children[2].children[0].children[0].children[0].id="inputLabel",e.title="Search",e.setAttribute("aria-labelledby","inputLabel")}onSearchOpen(){this.mapService.mapReady&&(this.searchOpen=!0),this.stateService.state.kioskMode&&!this.keyboard?.initialized&&(this.keyboard=new(iP())({preventMouseDownDefault:!0,onChange:e=>this.onChange(e),onKeyPress:e=>this.onKeyPress(e)}))}onSearch(e){this.stateService.state.kioskMode&&this.keyboard?.initialized&&this.keyboard.setInput(e.term),this.optionsOpen=e.term.length>0,this.pois=this.sidebarService.sortedPOIs.map(i=>{const r=i.properties?.description_i18n&&i.properties?.description_i18n[r_]?i.properties.description_i18n[r_]:i.properties.description_i18n?.en,o=D3(i.properties?.title),c=D3(e.term.toLowerCase());if(o.toLowerCase().indexOf(c)>-1||r?.toLowerCase().indexOf(c)>-1)return o.toLowerCase().startsWith(c)?i.score=9:o.toLowerCase().indexOf(c)>-1?i.score=1:r?.toLowerCase().indexOf(c)>-1&&(i.score=0,i.foundInDescription=!0),i}).filter(i=>i).sort((i,r)=>r.score-i.score||(i.properties.title>r.properties.title?1:-1))}onSelect(e,i){this.sidebarService.onSetEndPoi(e),setTimeout(()=>{this.selectedPoi=null,this.searchOpen=!1,this.optionsOpen=!1,i.blur(),this.stateService.state.kioskMode&&this.keyboard.destroy()})}onClose(e){e.close(),e.blur(),e.searchTerm=null,this.searchOpen=!1,this.optionsOpen=!1,this.stateService.state.kioskMode&&this.keyboard.destroy()}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0),Et(zr),Et(e6),Et(Bl),Et(u0))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-search"]],viewQuery:function(i,r){if(1&i&&ds(Yee,7),2&i){let o;mr(o=gr())&&(r.ngSelect=o.first)}},decls:9,vars:16,consts:[[1,"container",3,"ngClass"],[1,"overlay"],[1,"search-icon",3,"icon","size"],["size","2x","class","close-icon",3,"icon","click",4,"ngIf"],["ngSelectMat","","dropdownPosition","bottom","groupBy","foundInDescription",1,"custom",3,"placeholder","ngModel","isOpen","closeOnSelect","clearSearchOnAdd","disabled","ngModelChange","click","search","change"],["select",""],["ng-optgroup-tmp",""],[4,"ngFor","ngForOf"],["size","2x",1,"close-icon",3,"icon","click"],[3,"hidden"],[3,"value"]],template:function(i,r){if(1&i){const o=o1();mn(0,"div",0),Ni(1,"div",1)(2,"fa-icon",2),ei(3,Zee,1,2,"fa-icon",3),mn(4,"ng-select",4,5),Ki("ngModelChange",function(x){return r.selectedPoi=x})("click",function(){return r.onSearchOpen()})("search",function(x){return r.onSearch(x)})("change",function(x){Qr(o);const z=Ts(5);return xo(r.onSelect(x,z))}),Ti(6,"translate"),ei(7,$ee,2,2,"ng-template",6),ei(8,qee,3,2,"ng-container",7),wn()()}2&i&&(_n("ngClass",gl(13,Kee,r.searchOpen)),tn(2),_n("icon",A1(15,Qee))("size",r.searchOpen?"2x":"lg"),tn(1),_n("ngIf",r.searchOpen),tn(1),_n("placeholder",Fi(6,11,"searchPlaceholder"))("ngModel",r.selectedPoi)("isOpen",r.optionsOpen)("closeOnSelect",!0)("clearSearchOnAdd",!0)("disabled",!r.mapService.mapReady),tn(4),_n("ngForOf",r.pois))},dependencies:[B4,N0,z2,mI,fI,cI,k3,em,Xu,Wee,U0],styles:[".container[_ngcontent-%COMP%]{position:absolute;top:2rem;left:1rem}.container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background-color:#fff0;transition:all .2s linear;z-index:10}.container[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{color:#6b50d0;position:absolute;z-index:13;top:12px;transition:all .3s linear}.container[_ngcontent-%COMP%]   fa-icon.search-icon[_ngcontent-%COMP%]{left:15px}.container[_ngcontent-%COMP%]   fa-icon.close-icon[_ngcontent-%COMP%]{right:85px;top:55px;position:fixed;opacity:0;cursor:pointer}.container[_ngcontent-%COMP%]   fa-icon.close-icon[_ngcontent-%COMP%]:hover{color:#e7265b}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]    {min-width:428px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container{cursor:pointer;width:428px;min-height:0px;border-radius:50px;height:46px;background-color:#ffffffe6;border:2px solid rgba(0,0,0,.15);box-shadow:0 5px 10px #0000000d;transition:all .3s linear}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container:hover{border:2px solid rgba(0,0,0,.25);box-shadow:0 5px 10px #00000014}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container{cursor:pointer;padding-left:50px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-placeholder, .container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input input{cursor:pointer;color:#6b50d0}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input{transition:all .3s linear}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input input{padding-left:65px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-arrow-wrapper, .container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-clear-wrapper{display:none}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel{border:0;border-radius:0;background-color:transparent;box-shadow:none}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items{max-height:420px;overflow:hidden}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{background-color:transparent;color:#6b50d0;padding-left:65px;font-size:28px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items .ng-option.ng-option-marked{font-weight:700}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{padding:0}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup>div{background-color:#0006;color:#fff;font-size:22px;font-weight:300;max-width:420px;padding:8px 10px}.container.search-opened[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{display:block;background-color:#ffffffbf;bottom:0}.container.search-opened[_ngcontent-%COMP%]   fa-icon.search-icon[_ngcontent-%COMP%]{top:23px;left:40px}.container.search-opened[_ngcontent-%COMP%]   fa-icon.close-icon[_ngcontent-%COMP%]{opacity:1}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]    {position:fixed;left:2rem;right:2rem;z-index:12}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container{width:100%;border-radius:80px;height:80px;border-width:3px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container{padding-left:75px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-placeholder, .container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input input{font-size:28px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input{top:20px}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{position:static;height:42px}.container[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:12px;top:28px;z-index:13}.container[_ngcontent-%COMP%]   fa-icon.close-icon[_ngcontent-%COMP%]{right:50px;top:37px}.container[_ngcontent-%COMP%]   fa-icon.search-icon[_ngcontent-%COMP%]{left:38px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]    {top:1rem;left:1.5rem;right:1.5rem;position:fixed;min-width:260px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container{width:100%;height:40px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container{padding-left:35px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input input{padding-left:35px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{padding-left:35px;font-size:18px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup>div{font-size:16px;max-width:100%}.container.search-opened[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:10px;top:30px}.container.search-opened[_ngcontent-%COMP%]   fa-icon.search-icon[_ngcontent-%COMP%]{top:30px;left:42px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]    {left:1.5rem;right:1.5rem}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container{height:46px;border-width:2px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container{padding-left:50px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-placeholder, .container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input input{font-size:18px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-placeholder{margin-top:2px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input{top:10px}}"]})}return t})();var pT=w(41690),T2=6371008.8,mT={centimeters:100*T2,centimetres:100*T2,degrees:T2/111325,feet:3.28084*T2,inches:39.37*T2,kilometers:T2/1e3,kilometres:T2/1e3,meters:T2,metres:T2,miles:T2/1609.344,millimeters:1e3*T2,millimetres:1e3*T2,nauticalmiles:T2/1852,radians:1,yards:1.0936*T2};function q0(t,n,e){void 0===e&&(e={});var i={type:"Feature"};return(0===e.id||e.id)&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.properties=n||{},i.geometry=t,i}function bh(t,n,e){if(void 0===e&&(e={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s_(t[0])||!s_(t[1]))throw new Error("coordinates must contain numbers");return q0({type:"Point",coordinates:t},n,e)}function vm(t,n,e){void 0===e&&(e={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var c=0;c<o[o.length-1].length;c++)if(o[o.length-1][c]!==o[0][c])throw new Error("First and last Position are not equivalent.")}return q0({type:"Polygon",coordinates:t},n,e)}function ym(t){return t%360*Math.PI/180}function s_(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function xh(t,n,e){if(null!==t)for(var i,r,o,c,x,z,O,be,J=0,le=0,Ee=t.type,ut="FeatureCollection"===Ee,mt="Feature"===Ee,Nt=ut?t.features.length:1,Ht=0;Ht<Nt;Ht++){x=(be=!!(O=ut?t.features[Ht].geometry:mt?t.geometry:t)&&"GeometryCollection"===O.type)?O.geometries.length:1;for(var vt=0;vt<x;vt++){var Zt=0,gn=0;if(null!==(c=be?O.geometries[vt]:O)){z=c.coordinates;var bn=c.type;switch(J=!e||"Polygon"!==bn&&"MultiPolygon"!==bn?0:1,bn){case null:break;case"Point":if(!1===n(z,le,Ht,Zt,gn))return!1;le++,Zt++;break;case"LineString":case"MultiPoint":for(i=0;i<z.length;i++){if(!1===n(z[i],le,Ht,Zt,gn))return!1;le++,"MultiPoint"===bn&&Zt++}"LineString"===bn&&Zt++;break;case"Polygon":case"MultiLineString":for(i=0;i<z.length;i++){for(r=0;r<z[i].length-J;r++){if(!1===n(z[i][r],le,Ht,Zt,gn))return!1;le++}"MultiLineString"===bn&&Zt++,"Polygon"===bn&&gn++}"Polygon"===bn&&Zt++;break;case"MultiPolygon":for(i=0;i<z.length;i++){for(gn=0,r=0;r<z[i].length;r++){for(o=0;o<z[i][r].length-J;o++){if(!1===n(z[i][r][o],le,Ht,Zt,gn))return!1;le++}gn++}Zt++}break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===xh(c.geometries[i],n,e))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function _m(t,n){!function xT(t,n){var e,i,r,o,c,x,z,O,J,le,be=0,Ee="FeatureCollection"===t.type,ut="Feature"===t.type,mt=Ee?t.features.length:1;for(e=0;e<mt;e++){for(O=Ee?t.features[e].properties:ut?t.properties:{},J=Ee?t.features[e].bbox:ut?t.bbox:void 0,le=Ee?t.features[e].id:ut?t.id:void 0,c=(z=!!(x=Ee?t.features[e].geometry:ut?t.geometry:t)&&"GeometryCollection"===x.type)?x.geometries.length:1,r=0;r<c;r++)if(null!==(o=z?x.geometries[r]:x))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===n(o,be,O,J,le))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===n(o.geometries[i],be,O,J,le))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===n(null,be,O,J,le))return!1;be++}}(t,function(e,i,r,o,c){var z,x=null===e?null:e.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return!1!==n(q0(e,r,{bbox:o,id:c}),i,0)&&void 0}switch(x){case"MultiPoint":z="Point";break;case"MultiLineString":z="LineString";break;case"MultiPolygon":z="Polygon"}for(var O=0;O<e.coordinates.length;O++)if(!1===n(q0({type:z,coordinates:e.coordinates[O]},r),i,O))return!1})}function c_(t){var n=[1/0,1/0,-1/0,-1/0];return xh(t,function(e){n[0]>e[0]&&(n[0]=e[0]),n[1]>e[1]&&(n[1]=e[1]),n[2]<e[0]&&(n[2]=e[0]),n[3]<e[1]&&(n[3]=e[1])}),n}c_.default=c_;const ste=c_;function l_(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ST(t,n,e){if(void 0===e&&(e={}),!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");var i=l_(t),r=function ute(t){return"Feature"===t.type?t.geometry:t}(n),o=r.type,c=n.bbox,x=r.coordinates;if(c&&!1===function bte(t,n){return n[0]<=t[0]&&n[1]<=t[1]&&n[2]>=t[0]&&n[3]>=t[1]}(i,c))return!1;"Polygon"===o&&(x=[x]);for(var z=!1,O=0;O<x.length&&!z;O++)if(ET(i,x[O][0],e.ignoreBoundary)){for(var J=!1,le=1;le<x[O].length&&!J;)ET(i,x[O][le],!e.ignoreBoundary)&&(J=!0),le++;J||(z=!0)}return z}function ET(t,n,e){var i=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var r=0,o=n.length-1;r<n.length;o=r++){var c=n[r][0],x=n[r][1],z=n[o][0],O=n[o][1];if(t[1]*(c-z)+x*(z-t[0])+O*(t[0]-c)==0&&(c-t[0])*(z-t[0])<=0&&(x-t[1])*(O-t[1])<=0)return!e;x>t[1]!=O>t[1]&&t[0]<(z-c)*(t[1]-x)/(O-x)+c&&(i=!i)}return i}w(64772),w(93664);const wte=function xte(t,n,e){void 0===e&&(e={});var i=l_(t),r=l_(n),o=ym(r[1]-i[1]),c=ym(r[0]-i[0]),x=ym(i[1]),z=ym(r[1]),O=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(x)*Math.cos(z);return function yT(t,n){void 0===n&&(n="kilometers");var e=mT[n];if(!e)throw new Error(n+" units is invalid");return t*e}(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)),e.units)};w(79828),w(7861),function(){function t(n){this.points=n.points||[],this.duration=n.duration||1e4,this.sharpness=n.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=n.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var i=this.points[e],r=this.points[e+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var o=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,c=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,x=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+o),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+c),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+x)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+o),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+c),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+x)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(n){var e=[],i=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var o=this.pos(r);Math.sqrt((o.x-i.x)*(o.x-i.x)+(o.y-i.y)*(o.y-i.y)+(o.z-i.z)*(o.z-i.z))>n&&(e.push(r),i=o)}return e},t.prototype.vector=function(n){var e=this.pos(n+10),i=this.pos(n-10);return{angle:180*Math.atan2(e.y-i.y,e.x-i.x)/3.14,speed:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)+(i.z-e.z)*(i.z-e.z))}},t.prototype.pos=function(n){var e=n-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var i=e/this.duration;if(i>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*i);return function kte(t,n,e,i,r){var o=function Nte(t){var n=t*t;return[n*t,3*n*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+e.x*o[2]+n.x*o[3],y:r.y*o[0]+i.y*o[1]+e.y*o[2]+n.y*o[3],z:r.z*o[0]+i.z*o[1]+e.z*o[2]+n.z*o[3]}}((this.length-1)*i-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}();function DT(t){var n={type:"Feature"};return Object.keys(t).forEach(function(e){switch(e){case"type":case"properties":case"geometry":return;default:n[e]=t[e]}}),n.properties=OT(t.properties),n.geometry=p_(t.geometry),n}function OT(t){var n={};return t&&Object.keys(t).forEach(function(e){var i=t[e];n[e]="object"==typeof i?null===i?null:Array.isArray(i)?i.map(function(r){return r}):OT(i):i}),n}function p_(t){var n={type:t.type};return t.bbox&&(n.bbox=t.bbox),"GeometryCollection"===t.type?(n.geometries=t.geometries.map(function(e){return p_(e)}),n):(n.coordinates=kT(t.coordinates),n)}function kT(t){var n=t;return"object"!=typeof n[0]?n.slice():n.map(function(e){return kT(e)})}w(29145);const $te=function Zte(t,n){if(!t)throw new Error("targetPoint is required");if(!n)throw new Error("points is required");var e,i=1/0,r=0;return function bT(t,n){if("Feature"===t.type)n(t,0);else if("FeatureCollection"===t.type)for(var e=0;e<t.features.length&&!1!==n(t.features[e],e);e++);}(n,function(o,c){var x=wte(t,o);x<i&&(r=c,i=x)}),(e=function Wte(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return DT(t);case"FeatureCollection":return function Yte(t){var n={type:"FeatureCollection"};return Object.keys(t).forEach(function(e){switch(e){case"type":case"features":return;default:n[e]=t[e]}}),n.features=t.features.map(function(e){return DT(e)}),n}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return p_(t);default:throw new Error("unknown GeoJSON type")}}(n.features[r])).properties.featureIndex=r,e.properties.distanceToPoint=i,e};w(55665);var YT=Math.PI/180,XT=180/Math.PI,Mh=function(t,n){this.lon=t,this.lat=n,this.x=YT*t,this.y=YT*n};Mh.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Mh.prototype.antipode=function(){return new Mh(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var ZT=function(){this.coords=[],this.length=0};ZT.prototype.move_to=function(t){this.length++,this.coords.push(t)};var v_=function(t){this.properties=t||{},this.geometries=[]};v_.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],n=0;n<this.geometries.length;n++)t.push(this.geometries[n].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},v_.prototype.wkt=function(){for(var t="",n="LINESTRING(",e=function(o){n+=o[0]+" "+o[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(e),t+=n.substring(0,n.length-1)+")"}return t};var y_=function(t,n,e){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!n||void 0===n.x||void 0===n.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Mh(t.x,t.y),this.end=new Mh(n.x,n.y),this.properties=e||{};var i=this.start.x-this.end.x,o=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+n.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+n)};y_.prototype.interpolate=function(t){var n=Math.sin((1-t)*this.g)/Math.sin(this.g),e=Math.sin(t*this.g)/Math.sin(this.g),i=n*Math.cos(this.start.y)*Math.cos(this.start.x)+e*Math.cos(this.end.y)*Math.cos(this.end.x),r=n*Math.cos(this.start.y)*Math.sin(this.start.x)+e*Math.cos(this.end.y)*Math.sin(this.end.x),o=n*Math.sin(this.start.y)+e*Math.sin(this.end.y),c=XT*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[XT*Math.atan2(r,i),c]},y_.prototype.Arc=function(t,n){var e=[];if(!t||t<=2)e.push([this.start.lon,this.start.lat]),e.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var c=this.interpolate(i*r);e.push(c)}for(var x=!1,z=0,O=n&&n.offset?n.offset:10,J=180-O,le=-180+O,be=360-O,Ee=1;Ee<e.length;++Ee){var ut=e[Ee-1][0],mt=e[Ee][0],Nt=Math.abs(mt-ut);Nt>be&&(mt>J&&ut<le||ut>J&&mt<le)?x=!0:Nt>z&&(z=Nt)}var Ht=[];if(x&&z<O){var vt=[];Ht.push(vt);for(var Zt=0;Zt<e.length;++Zt){var gn=parseFloat(e[Zt][0]);if(Zt>0&&Math.abs(gn-e[Zt-1][0])>be){var bn=parseFloat(e[Zt-1][0]),ni=parseFloat(e[Zt-1][1]),$n=parseFloat(e[Zt][0]),oi=parseFloat(e[Zt][1]);if(bn>-180&&bn<le&&180===$n&&Zt+1<e.length&&e[Zt-1][0]>-180&&e[Zt-1][0]<le){vt.push([-180,e[Zt][1]]),Zt++,vt.push([e[Zt][0],e[Zt][1]]);continue}if(bn>J&&bn<180&&-180===$n&&Zt+1<e.length&&e[Zt-1][0]>J&&e[Zt-1][0]<180){vt.push([180,e[Zt][1]]),Zt++,vt.push([e[Zt][0],e[Zt][1]]);continue}if(bn<le&&$n>J){var dn=bn;bn=$n,$n=dn;var Fa=ni;ni=oi,oi=Fa}if(bn>J&&$n<le&&($n+=360),bn<=180&&$n>=180&&bn<$n){var Ka=(180-bn)/($n-bn),c1=Ka*oi+(1-Ka)*ni;vt.push([e[Zt-1][0]>J?180:-180,c1]),(vt=[]).push([e[Zt-1][0]>J?-180:180,c1]),Ht.push(vt)}else Ht.push(vt=[]);vt.push([gn,e[Zt][1]])}else vt.push([e[Zt][0],e[Zt][1]])}}else{var g1=[];Ht.push(g1);for(var Nc=0;Nc<e.length;++Nc)g1.push([e[Nc][0],e[Nc][1]])}for(var ac=new v_(this.properties),fi=0;fi<Ht.length;++fi){var sr=new ZT;ac.geometries.push(sr);for(var rr=Ht[fi],br=0;br<rr.length;++br)sr.move_to(rr[br])}return ac},w(83970);var ko=[],No=[],Ro=[],Fo=[],Vo=[],Ho=[],Bo=[],jo=[],Uo=[],Go=[],Wo=[],Yo=[],Xo=[],Zo=[],$o=[],qo=[],Ko=[],Qo=[],Jo=[],ea=[],ta=[],na=[],ia=[],ra=[];Bo[85]=Go[85]=-1,jo[85]=Wo[85]=0,Uo[85]=Yo[85]=1,Jo[85]=na[85]=1,ea[85]=ia[85]=0,ta[85]=ra[85]=1,ko[85]=Fo[85]=0,No[85]=Vo[85]=-1,Ro[85]=$o[85]=0,qo[85]=Xo[85]=0,Ko[85]=Zo[85]=1,Ho[85]=Qo[85]=1,na[1]=na[169]=0,ia[1]=ia[169]=-1,ra[1]=ra[169]=0,Xo[1]=Xo[169]=-1,Zo[1]=Zo[169]=0,$o[1]=$o[169]=0,Go[4]=Go[166]=0,Wo[4]=Wo[166]=-1,Yo[4]=Yo[166]=1,qo[4]=qo[166]=1,Ko[4]=Ko[166]=0,Qo[4]=Qo[166]=0,Bo[16]=Bo[154]=0,jo[16]=jo[154]=1,Uo[16]=Uo[154]=1,Fo[16]=Fo[154]=1,Vo[16]=Vo[154]=0,Ho[16]=Ho[154]=1,Jo[64]=Jo[106]=0,ea[64]=ea[106]=1,ta[64]=ta[106]=0,ko[64]=ko[106]=-1,No[64]=No[106]=0,Ro[64]=Ro[106]=1,Jo[2]=Jo[168]=0,ea[2]=ea[168]=-1,ta[2]=ta[168]=1,na[2]=na[168]=0,ia[2]=ia[168]=-1,ra[2]=ra[168]=0,Xo[2]=Xo[168]=-1,Zo[2]=Zo[168]=0,$o[2]=$o[168]=0,qo[2]=qo[168]=-1,Ko[2]=Ko[168]=0,Qo[2]=Qo[168]=1,Bo[8]=Bo[162]=0,jo[8]=jo[162]=-1,Uo[8]=Uo[162]=0,Go[8]=Go[162]=0,Wo[8]=Wo[162]=-1,Yo[8]=Yo[162]=1,Xo[8]=Xo[162]=1,Zo[8]=Zo[162]=0,$o[8]=$o[162]=1,qo[8]=qo[162]=1,Ko[8]=Ko[162]=0,Qo[8]=Qo[162]=0,Bo[32]=Bo[138]=0,jo[32]=jo[138]=1,Uo[32]=Uo[138]=1,Go[32]=Go[138]=0,Wo[32]=Wo[138]=1,Yo[32]=Yo[138]=0,ko[32]=ko[138]=1,No[32]=No[138]=0,Ro[32]=Ro[138]=0,Fo[32]=Fo[138]=1,Vo[32]=Vo[138]=0,Ho[32]=Ho[138]=1,na[128]=na[42]=0,ia[128]=ia[42]=1,ra[128]=ra[42]=1,Jo[128]=Jo[42]=0,ea[128]=ea[42]=1,ta[128]=ta[42]=0,ko[128]=ko[42]=-1,No[128]=No[42]=0,Ro[128]=Ro[42]=1,Fo[128]=Fo[42]=-1,Vo[128]=Vo[42]=0,Ho[128]=Ho[42]=0,Go[5]=Go[165]=-1,Wo[5]=Wo[165]=0,Yo[5]=Yo[165]=0,na[5]=na[165]=1,ia[5]=ia[165]=0,ra[5]=ra[165]=0,qo[20]=qo[150]=0,Ko[20]=Ko[150]=1,Qo[20]=Qo[150]=1,Fo[20]=Fo[150]=0,Vo[20]=Vo[150]=-1,Ho[20]=Ho[150]=1,Bo[80]=Bo[90]=-1,jo[80]=jo[90]=0,Uo[80]=Uo[90]=1,Jo[80]=Jo[90]=1,ea[80]=ea[90]=0,ta[80]=ta[90]=1,Xo[65]=Xo[105]=0,Zo[65]=Zo[105]=1,$o[65]=$o[105]=0,ko[65]=ko[105]=0,No[65]=No[105]=-1,Ro[65]=Ro[105]=0,Bo[160]=Bo[10]=-1,jo[160]=jo[10]=0,Uo[160]=Uo[10]=1,Go[160]=Go[10]=-1,Wo[160]=Wo[10]=0,Yo[160]=Yo[10]=0,na[160]=na[10]=1,ia[160]=ia[10]=0,ra[160]=ra[10]=0,Jo[160]=Jo[10]=1,ea[160]=ea[10]=0,ta[160]=ta[10]=1,qo[130]=qo[40]=0,Ko[130]=Ko[40]=1,Qo[130]=Qo[40]=1,Xo[130]=Xo[40]=0,Zo[130]=Zo[40]=1,$o[130]=$o[40]=0,ko[130]=ko[40]=0,No[130]=No[40]=-1,Ro[130]=Ro[40]=0,Fo[130]=Fo[40]=0,Vo[130]=Vo[40]=-1,Ho[130]=Ho[40]=1,Go[37]=Go[133]=0,Wo[37]=Wo[133]=1,Yo[37]=Yo[133]=1,na[37]=na[133]=0,ia[37]=ia[133]=1,ra[37]=ra[133]=0,ko[37]=ko[133]=-1,No[37]=No[133]=0,Ro[37]=Ro[133]=0,Fo[37]=Fo[133]=1,Vo[37]=Vo[133]=0,Ho[37]=Ho[133]=0,qo[148]=qo[22]=-1,Ko[148]=Ko[22]=0,Qo[148]=Qo[22]=0,na[148]=na[22]=0,ia[148]=ia[22]=-1,ra[148]=ra[22]=1,Jo[148]=Jo[22]=0,ea[148]=ea[22]=1,ta[148]=ta[22]=1,Fo[148]=Fo[22]=-1,Vo[148]=Vo[22]=0,Ho[148]=Ho[22]=1,Bo[82]=Bo[88]=0,jo[82]=jo[88]=-1,Uo[82]=Uo[88]=1,qo[82]=qo[88]=1,Ko[82]=Ko[88]=0,Qo[82]=Qo[88]=1,Xo[82]=Xo[88]=-1,Zo[82]=Zo[88]=0,$o[82]=$o[88]=1,Jo[82]=Jo[88]=0,ea[82]=ea[88]=-1,ta[82]=ta[88]=0,Bo[73]=Bo[97]=0,jo[73]=jo[97]=1,Uo[73]=Uo[97]=0,Go[73]=Go[97]=0,Wo[73]=Wo[97]=-1,Yo[73]=Yo[97]=0,Xo[73]=Xo[97]=1,Zo[73]=Zo[97]=0,$o[73]=$o[97]=0,ko[73]=ko[97]=1,No[73]=No[97]=0,Ro[73]=Ro[97]=1,Bo[145]=Bo[25]=0,jo[145]=jo[25]=-1,Uo[145]=Uo[25]=0,Xo[145]=Xo[25]=1,Zo[145]=Zo[25]=0,$o[145]=$o[25]=1,na[145]=na[25]=0,ia[145]=ia[25]=1,ra[145]=ra[25]=1,Fo[145]=Fo[25]=-1,Vo[145]=Vo[25]=0,Ho[145]=Ho[25]=0,Go[70]=Go[100]=0,Wo[70]=Wo[100]=1,Yo[70]=Yo[100]=0,qo[70]=qo[100]=-1,Ko[70]=Ko[100]=0,Qo[70]=Qo[100]=1,Jo[70]=Jo[100]=0,ea[70]=ea[100]=-1,ta[70]=ta[100]=1,ko[70]=ko[100]=1,No[70]=No[100]=0,Ro[70]=Ro[100]=0,Go[101]=Go[69]=0,Wo[101]=Wo[69]=1,Yo[101]=Yo[69]=0,ko[101]=ko[69]=1,No[101]=No[69]=0,Ro[101]=Ro[69]=0,na[149]=na[21]=0,ia[149]=ia[21]=1,ra[149]=ra[21]=1,Fo[149]=Fo[21]=-1,Vo[149]=Vo[21]=0,Ho[149]=Ho[21]=0,qo[86]=qo[84]=-1,Ko[86]=Ko[84]=0,Qo[86]=Qo[84]=1,Jo[86]=Jo[84]=0,ea[86]=ea[84]=-1,ta[86]=ta[84]=1,Bo[89]=Bo[81]=0,jo[89]=jo[81]=-1,Uo[89]=Uo[81]=0,Xo[89]=Xo[81]=1,Zo[89]=Zo[81]=0,$o[89]=$o[81]=1,Bo[96]=Bo[74]=0,jo[96]=jo[74]=1,Uo[96]=Uo[74]=0,Go[96]=Go[74]=-1,Wo[96]=Wo[74]=0,Yo[96]=Yo[74]=1,Jo[96]=Jo[74]=1,ea[96]=ea[74]=0,ta[96]=ta[74]=0,ko[96]=ko[74]=1,No[96]=No[74]=0,Ro[96]=Ro[74]=1,Bo[24]=Bo[146]=0,jo[24]=jo[146]=-1,Uo[24]=Uo[146]=1,qo[24]=qo[146]=1,Ko[24]=Ko[146]=0,Qo[24]=Qo[146]=1,Xo[24]=Xo[146]=0,Zo[24]=Zo[146]=1,$o[24]=$o[146]=1,Fo[24]=Fo[146]=0,Vo[24]=Vo[146]=-1,Ho[24]=Ho[146]=0,Go[6]=Go[164]=-1,Wo[6]=Wo[164]=0,Yo[6]=Yo[164]=1,qo[6]=qo[164]=-1,Ko[6]=Ko[164]=0,Qo[6]=Qo[164]=0,na[6]=na[164]=0,ia[6]=ia[164]=-1,ra[6]=ra[164]=1,Jo[6]=Jo[164]=1,ea[6]=ea[164]=0,ta[6]=ta[164]=0,Xo[129]=Xo[41]=0,Zo[129]=Zo[41]=1,$o[129]=$o[41]=1,na[129]=na[41]=0,ia[129]=ia[41]=1,ra[129]=ra[41]=0,ko[129]=ko[41]=-1,No[129]=No[41]=0,Ro[129]=Ro[41]=0,Fo[129]=Fo[41]=0,Vo[129]=Vo[41]=-1,Ho[129]=Ho[41]=0,qo[66]=qo[104]=0,Ko[66]=Ko[104]=1,Qo[66]=Qo[104]=0,Xo[66]=Xo[104]=-1,Zo[66]=Zo[104]=0,$o[66]=$o[104]=1,Jo[66]=Jo[104]=0,ea[66]=ea[104]=-1,ta[66]=ta[104]=0,ko[66]=ko[104]=0,No[66]=No[104]=-1,Ro[66]=Ro[104]=1,Bo[144]=Bo[26]=-1,jo[144]=jo[26]=0,Uo[144]=Uo[26]=0,na[144]=na[26]=1,ia[144]=ia[26]=0,ra[144]=ra[26]=1,Jo[144]=Jo[26]=0,ea[144]=ea[26]=1,ta[144]=ta[26]=1,Fo[144]=Fo[26]=-1,Vo[144]=Vo[26]=0,Ho[144]=Ho[26]=1,Go[36]=Go[134]=0,Wo[36]=Wo[134]=1,Yo[36]=Yo[134]=1,qo[36]=qo[134]=0,Ko[36]=Ko[134]=1,Qo[36]=Qo[134]=0,ko[36]=ko[134]=0,No[36]=No[134]=-1,Ro[36]=Ro[134]=1,Fo[36]=Fo[134]=1,Vo[36]=Vo[134]=0,Ho[36]=Ho[134]=0,Bo[9]=Bo[161]=-1,jo[9]=jo[161]=0,Uo[9]=Uo[161]=0,Go[9]=Go[161]=0,Wo[9]=Wo[161]=-1,Yo[9]=Yo[161]=0,Xo[9]=Xo[161]=1,Zo[9]=Zo[161]=0,$o[9]=$o[161]=0,na[9]=na[161]=1,ia[9]=ia[161]=0,ra[9]=ra[161]=1,Bo[136]=0,jo[136]=1,Uo[136]=1,Go[136]=0,Wo[136]=1,Yo[136]=0,qo[136]=-1,Ko[136]=0,Qo[136]=1,Xo[136]=-1,Zo[136]=0,$o[136]=0,na[136]=0,ia[136]=-1,ra[136]=0,Jo[136]=0,ea[136]=-1,ta[136]=1,ko[136]=1,No[136]=0,Ro[136]=0,Fo[136]=1,Vo[136]=0,Ho[136]=1,Bo[34]=0,jo[34]=-1,Uo[34]=0,Go[34]=0,Wo[34]=-1,Yo[34]=1,qo[34]=1,Ko[34]=0,Qo[34]=0,Xo[34]=1,Zo[34]=0,$o[34]=1,na[34]=0,ia[34]=1,ra[34]=1,Jo[34]=0,ea[34]=1,ta[34]=0,ko[34]=-1,No[34]=0,Ro[34]=1,Fo[34]=-1,Vo[34]=0,Ho[34]=0,Bo[35]=0,jo[35]=1,Uo[35]=1,Go[35]=0,Wo[35]=-1,Yo[35]=1,qo[35]=1,Ko[35]=0,Qo[35]=0,Xo[35]=-1,Zo[35]=0,$o[35]=0,na[35]=0,ia[35]=-1,ra[35]=0,Jo[35]=0,ea[35]=1,ta[35]=0,ko[35]=-1,No[35]=0,Ro[35]=1,Fo[35]=1,Vo[35]=0,Ho[35]=1,Bo[153]=0,jo[153]=1,Uo[153]=1,Xo[153]=-1,Zo[153]=0,$o[153]=0,na[153]=0,ia[153]=-1,ra[153]=0,Fo[153]=1,Vo[153]=0,Ho[153]=1,Go[102]=0,Wo[102]=-1,Yo[102]=1,qo[102]=1,Ko[102]=0,Qo[102]=0,Jo[102]=0,ea[102]=1,ta[102]=0,ko[102]=-1,No[102]=0,Ro[102]=1,Bo[155]=0,jo[155]=-1,Uo[155]=0,Xo[155]=1,Zo[155]=0,$o[155]=1,na[155]=0,ia[155]=1,ra[155]=1,Fo[155]=-1,Vo[155]=0,Ho[155]=0,Go[103]=0,Wo[103]=1,Yo[103]=0,qo[103]=-1,Ko[103]=0,Qo[103]=1,Jo[103]=0,ea[103]=-1,ta[103]=1,ko[103]=1,No[103]=0,Ro[103]=0,Bo[152]=0,jo[152]=1,Uo[152]=1,qo[152]=-1,Ko[152]=0,Qo[152]=1,Xo[152]=-1,Zo[152]=0,$o[152]=0,na[152]=0,ia[152]=-1,ra[152]=0,Jo[152]=0,ea[152]=-1,ta[152]=1,Fo[152]=1,Vo[152]=0,Ho[152]=1,Bo[156]=0,jo[156]=-1,Uo[156]=1,qo[156]=1,Ko[156]=0,Qo[156]=1,Xo[156]=-1,Zo[156]=0,$o[156]=0,na[156]=0,ia[156]=-1,ra[156]=0,Jo[156]=0,ea[156]=1,ta[156]=1,Fo[156]=-1,Vo[156]=0,Ho[156]=1,Bo[137]=0,jo[137]=1,Uo[137]=1,Go[137]=0,Wo[137]=1,Yo[137]=0,Xo[137]=-1,Zo[137]=0,$o[137]=0,na[137]=0,ia[137]=-1,ra[137]=0,ko[137]=1,No[137]=0,Ro[137]=0,Fo[137]=1,Vo[137]=0,Ho[137]=1,Bo[139]=0,jo[139]=1,Uo[139]=1,Go[139]=0,Wo[139]=-1,Yo[139]=0,Xo[139]=1,Zo[139]=0,$o[139]=0,na[139]=0,ia[139]=1,ra[139]=0,ko[139]=-1,No[139]=0,Ro[139]=0,Fo[139]=1,Vo[139]=0,Ho[139]=1,Bo[98]=0,jo[98]=-1,Uo[98]=0,Go[98]=0,Wo[98]=-1,Yo[98]=1,qo[98]=1,Ko[98]=0,Qo[98]=0,Xo[98]=1,Zo[98]=0,$o[98]=1,Jo[98]=0,ea[98]=1,ta[98]=0,ko[98]=-1,No[98]=0,Ro[98]=1,Bo[99]=0,jo[99]=1,Uo[99]=0,Go[99]=0,Wo[99]=-1,Yo[99]=1,qo[99]=1,Ko[99]=0,Qo[99]=0,Xo[99]=-1,Zo[99]=0,$o[99]=1,Jo[99]=0,ea[99]=-1,ta[99]=0,ko[99]=1,No[99]=0,Ro[99]=1,Go[38]=0,Wo[38]=-1,Yo[38]=1,qo[38]=1,Ko[38]=0,Qo[38]=0,na[38]=0,ia[38]=1,ra[38]=1,Jo[38]=0,ea[38]=1,ta[38]=0,ko[38]=-1,No[38]=0,Ro[38]=1,Fo[38]=-1,Vo[38]=0,Ho[38]=0,Go[39]=0,Wo[39]=1,Yo[39]=1,qo[39]=-1,Ko[39]=0,Qo[39]=0,na[39]=0,ia[39]=-1,ra[39]=1,Jo[39]=0,ea[39]=1,ta[39]=0,ko[39]=-1,No[39]=0,Ro[39]=1,Fo[39]=1,Vo[39]=0,Ho[39]=0;var w_=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},C_=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},M_=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},S_=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},E_=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},A_=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},z_=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},P_=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ji=[],Xi=[],Pr=[],wr=[],Rr=[],Nr=[],oa=[],fa=[];wr[1]=Rr[1]=18,wr[169]=Rr[169]=18,Pr[4]=Xi[4]=12,Pr[166]=Xi[166]=12,Ji[16]=fa[16]=4,Ji[154]=fa[154]=4,Nr[64]=oa[64]=22,Nr[106]=oa[106]=22,Pr[2]=Nr[2]=17,wr[2]=Rr[2]=18,Pr[168]=Nr[168]=17,wr[168]=Rr[168]=18,Ji[8]=wr[8]=9,Xi[8]=Pr[8]=12,Ji[162]=wr[162]=9,Xi[162]=Pr[162]=12,Ji[32]=fa[32]=4,Xi[32]=oa[32]=1,Ji[138]=fa[138]=4,Xi[138]=oa[138]=1,Rr[128]=fa[128]=21,Nr[128]=oa[128]=22,Rr[42]=fa[42]=21,Nr[42]=oa[42]=22,Xi[5]=Rr[5]=14,Xi[165]=Rr[165]=14,Pr[20]=fa[20]=6,Pr[150]=fa[150]=6,Ji[80]=Nr[80]=11,Ji[90]=Nr[90]=11,wr[65]=oa[65]=3,wr[105]=oa[105]=3,Ji[160]=Nr[160]=11,Xi[160]=Rr[160]=14,Ji[10]=Nr[10]=11,Xi[10]=Rr[10]=14,Pr[130]=fa[130]=6,wr[130]=oa[130]=3,Pr[40]=fa[40]=6,wr[40]=oa[40]=3,Xi[101]=oa[101]=1,Xi[69]=oa[69]=1,Rr[149]=fa[149]=21,Rr[21]=fa[21]=21,Pr[86]=Nr[86]=17,Pr[84]=Nr[84]=17,Ji[89]=wr[89]=9,Ji[81]=wr[81]=9,Ji[96]=oa[96]=0,Xi[96]=Nr[96]=15,Ji[74]=oa[74]=0,Xi[74]=Nr[74]=15,Ji[24]=Pr[24]=8,wr[24]=fa[24]=7,Ji[146]=Pr[146]=8,wr[146]=fa[146]=7,Xi[6]=Nr[6]=15,Pr[6]=Rr[6]=16,Xi[164]=Nr[164]=15,Pr[164]=Rr[164]=16,wr[129]=fa[129]=7,Rr[129]=oa[129]=20,wr[41]=fa[41]=7,Rr[41]=oa[41]=20,Pr[66]=oa[66]=2,wr[66]=Nr[66]=19,Pr[104]=oa[104]=2,wr[104]=Nr[104]=19,Ji[144]=Rr[144]=10,Nr[144]=fa[144]=23,Ji[26]=Rr[26]=10,Nr[26]=fa[26]=23,Xi[36]=fa[36]=5,Pr[36]=oa[36]=2,Xi[134]=fa[134]=5,Pr[134]=oa[134]=2,Ji[9]=Rr[9]=10,Xi[9]=wr[9]=13,Ji[161]=Rr[161]=10,Xi[161]=wr[161]=13,Xi[37]=fa[37]=5,Rr[37]=oa[37]=20,Xi[133]=fa[133]=5,Rr[133]=oa[133]=20,Pr[148]=Rr[148]=16,Nr[148]=fa[148]=23,Pr[22]=Rr[22]=16,Nr[22]=fa[22]=23,Ji[82]=Pr[82]=8,wr[82]=Nr[82]=19,Ji[88]=Pr[88]=8,wr[88]=Nr[88]=19,Ji[73]=oa[73]=0,Xi[73]=wr[73]=13,Ji[97]=oa[97]=0,Xi[97]=wr[97]=13,Ji[145]=wr[145]=9,Rr[145]=fa[145]=21,Ji[25]=wr[25]=9,Rr[25]=fa[25]=21,Xi[70]=oa[70]=1,Pr[70]=Nr[70]=17,Xi[100]=oa[100]=1,Pr[100]=Nr[100]=17,Ji[34]=wr[34]=9,Xi[34]=Pr[34]=12,Rr[34]=fa[34]=21,Nr[34]=oa[34]=22,Ji[136]=fa[136]=4,Xi[136]=oa[136]=1,Pr[136]=Nr[136]=17,wr[136]=Rr[136]=18,Ji[35]=fa[35]=4,Xi[35]=Pr[35]=12,wr[35]=Rr[35]=18,Nr[35]=oa[35]=22,Ji[153]=fa[153]=4,wr[153]=Rr[153]=18,Xi[102]=Pr[102]=12,Nr[102]=oa[102]=22,Ji[155]=wr[155]=9,Rr[155]=fa[155]=23,Xi[103]=oa[103]=1,Pr[103]=Nr[103]=17,Ji[152]=fa[152]=4,Pr[152]=Nr[152]=17,wr[152]=Rr[152]=18,Ji[156]=Pr[156]=8,wr[156]=Rr[156]=18,Nr[156]=fa[156]=23,Ji[137]=fa[137]=4,Xi[137]=oa[137]=1,wr[137]=Rr[137]=18,Ji[139]=fa[139]=4,Xi[139]=wr[139]=13,Rr[139]=oa[139]=20,Ji[98]=wr[98]=9,Xi[98]=Pr[98]=12,Nr[98]=oa[98]=22,Ji[99]=oa[99]=0,Xi[99]=Pr[99]=12,wr[99]=Nr[99]=19,Xi[38]=Pr[38]=12,Rr[38]=fa[38]=21,Nr[38]=oa[38]=22,Xi[39]=fa[39]=5,Pr[39]=Rr[39]=16,Nr[39]=oa[39]=22;var ki=[];function L_(t,n,e){return function Pie(t){return(t>0)-(t<0)||+t}((n[0]-t[0])*(e[1]-n[1])-(e[0]-n[0])*(n[1]-t[1]))}function uL(t,n){return n.geometry.coordinates[0].every(function(e){return ST(bh(e),t)})}ki[1]=ki[169]=w_,ki[4]=ki[166]=C_,ki[16]=ki[154]=M_,ki[64]=ki[106]=S_,ki[168]=ki[2]=E_,ki[162]=ki[8]=A_,ki[138]=ki[32]=z_,ki[42]=ki[128]=P_,ki[5]=ki[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},ki[20]=ki[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},ki[80]=ki[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},ki[65]=ki[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ki[160]=ki[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},ki[130]=ki[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},ki[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ki[101]=ki[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},ki[149]=ki[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},ki[86]=ki[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ki[89]=ki[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},ki[96]=ki[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},ki[24]=ki[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ki[6]=ki[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},ki[129]=ki[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},ki[66]=ki[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ki[144]=ki[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ki[36]=ki[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ki[9]=ki[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ki[37]=ki[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ki[148]=ki[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ki[82]=ki[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},ki[73]=ki[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ki[145]=ki[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ki[70]=ki[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ki[34]=function(t){return[P_(t),A_(t)]},ki[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ki[136]=function(t){return[z_(t),E_(t)]},ki[153]=function(t){return[M_(t),w_(t)]},ki[102]=function(t){return[C_(t),S_(t)]},ki[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ki[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ki[152]=function(t){return[M_(t),E_(t)]},ki[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ki[137]=function(t){return[z_(t),w_(t)]},ki[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ki[98]=function(t){return[A_(t),S_(t)]},ki[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ki[38]=function(t){return[C_(t),P_(t)]},ki[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Lie=function(){function t(n){this.id=t.buildId(n),this.coordinates=n,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(n){return n.join(",")},t.prototype.removeInnerEdge=function(n){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==n.from.id})},t.prototype.removeOuterEdge=function(n){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==n.to.id})},t.prototype.addOuterEdge=function(n){this.outerEdges.push(n),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var n=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,i){var r=e.to,o=i.to;if(r.coordinates[0]-n.coordinates[0]>=0&&o.coordinates[0]-n.coordinates[0]<0)return 1;if(r.coordinates[0]-n.coordinates[0]<0&&o.coordinates[0]-n.coordinates[0]>=0)return-1;if(r.coordinates[0]-n.coordinates[0]==0&&o.coordinates[0]-n.coordinates[0]==0)return r.coordinates[1]-n.coordinates[1]>=0||o.coordinates[1]-n.coordinates[1]>=0?r.coordinates[1]-o.coordinates[1]:o.coordinates[1]-r.coordinates[1];var c=L_(n.coordinates,r.coordinates,o.coordinates);return c<0?1:c>0?-1:Math.pow(r.coordinates[0]-n.coordinates[0],2)+Math.pow(r.coordinates[1]-n.coordinates[1],2)-(Math.pow(o.coordinates[0]-n.coordinates[0],2)+Math.pow(o.coordinates[1]-n.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(n){return this.sortOuterEdges(),this.outerEdges[n]},t.prototype.addInnerEdge=function(n){this.innerEdges.push(n)},t}();const dL=Lie;var Die=function(){function t(n,e){this.from=n,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(n){return this.from.id===n.from.id&&this.to.id===n.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return function o_(t,n,e){if(void 0===e&&(e={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return q0({type:"LineString",coordinates:t},n,e)}([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(n){return L_(n.from.coordinates,n.to.coordinates,this.to.coordinates)},t}();const Oie=Die;var kie=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(n){this.edges.push(n),this.polygon=this.envelope=void 0},t.prototype.get=function(n){return this.edges[n]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(n){this.edges.forEach(n)},t.prototype.map=function(n){return this.edges.map(n)},t.prototype.some=function(n){return this.edges.some(n)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var n=this,e=this.edges.reduce(function(c,x,z){return x.from.coordinates[1]>n.edges[c].from.coordinates[1]&&(c=z),c},0),i=(0===e?this.length:e)-1,r=(e+1)%this.length,o=L_(this.edges[i].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===o?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:o>0},t.prototype.toMultiPoint=function(){return function vT(t,n,e){return void 0===e&&(e={}),q0({type:"MultiPoint",coordinates:t},n,e)}(this.edges.map(function(n){return n.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var n=this.edges.map(function(e){return e.from.coordinates});return n.push(this.edges[0].from.coordinates),this.polygon=vm([n])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=function Vte(t){return function Fte(t,n){void 0===n&&(n={});var e=Number(t[0]),i=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var c=[e,i];return vm([[c,[r,i],[r,o],[e,o],c]],n.properties,{bbox:t,id:n.id})}(ste(t))}(this.toPolygon())},t.findEdgeRingContaining=function(n,e){var r,o,i=n.getEnvelope();return e.forEach(function(c){var x=c.getEnvelope();if(o&&(r=o.getEnvelope()),!function Iie(t,n){var e=t.geometry.coordinates[0].map(function(c){return c[0]}),i=t.geometry.coordinates[0].map(function(c){return c[1]}),r=n.geometry.coordinates[0].map(function(c){return c[0]}),o=n.geometry.coordinates[0].map(function(c){return c[1]});return Math.max.apply(null,e)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,o)&&Math.min.apply(null,e)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,o)}(x,i)&&uL(x,i)){for(var z=n.map(function(ut){return ut.from.coordinates}),O=void 0,J=function(ut){c.some(function(mt){return function Tie(t,n){return t[0]===n[0]&&t[1]===n[1]}(ut,mt.from.coordinates)})||(O=ut)},le=0,be=z;le<be.length;le++)J(be[le]);O&&c.inside(bh(O))&&(!o||uL(r,x))&&(o=c)}}),o},t.prototype.inside=function(n){return ST(n,this.toPolygon())},t}();const Nie=kie;function bL(t){for(var n=t,e=[];n.parent;)e.unshift(n),n=n.parent;return e}!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(n){!function Rie(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(n);var e=new t;return _m(n,function(i){(function lte(t,n,e){if(!t)throw new Error("No feature passed");if(!e)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+e+", Feature with geometry required");if(!t.geometry||t.geometry.type!==n)throw new Error("Invalid input to "+e+": must be a "+n+", given "+t.geometry.type)})(i,"LineString","Graph::fromGeoJson"),function ite(t,n,e,i){var r=e;xh(t,function(o,c,x,z,O){r=0===c&&void 0===e?o:n(r,o,c,x,z,O)},i)}(i,function(r,o){if(r){var c=e.getNode(r),x=e.getNode(o);e.addEdge(c,x)}return o})}),e},t.prototype.getNode=function(n){var e=dL.buildId(n),i=this.nodes[e];return i||(i=this.nodes[e]=new dL(n)),i},t.prototype.addEdge=function(n,e){var i=new Oie(n,e),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},t.prototype.deleteDangles=function(){var n=this;Object.keys(this.nodes).map(function(e){return n.nodes[e]}).forEach(function(e){return n._removeIfDangle(e)})},t.prototype._removeIfDangle=function(n){var e=this;if(n.innerEdges.length<=1){var i=n.getOuterEdges().map(function(r){return r.to});this.removeNode(n),i.forEach(function(r){return e._removeIfDangle(r)})}},t.prototype.deleteCutEdges=function(){var n=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(n.removeEdge(e.symetric),n.removeEdge(e))})},t.prototype._computeNextCWEdges=function(n){var e=this;typeof n>"u"?Object.keys(this.nodes).forEach(function(i){return e._computeNextCWEdges(e.nodes[i])}):n.getOuterEdges().forEach(function(i,r){n.getOuterEdge((0===r?n.getOuterEdges().length:r)-1).symetric.next=i})},t.prototype._computeNextCCWEdges=function(n,e){for(var r,o,i=n.getOuterEdges(),c=i.length-1;c>=0;--c){var x=i[c],z=x.symetric,O=void 0,J=void 0;x.label===e&&(O=x),z.label===e&&(J=z),O&&J&&(J&&(o=J),O&&(o&&(o.next=O,o=void 0),r||(r=O)))}o&&(o.next=r)},t.prototype._findLabeledEdgeRings=function(){var n=[],e=0;return this.edges.forEach(function(i){if(!(i.label>=0)){n.push(i);var r=i;do{r.label=e,r=r.next}while(!i.isEqual(r));e++}}),n},t.prototype.getEdgeRings=function(){var n=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){n._findIntersectionNodes(i).forEach(function(r){n._computeNextCCWEdges(r,i.label)})});var e=[];return this.edges.forEach(function(i){i.ring||e.push(n._findEdgeRing(i))}),e},t.prototype._findIntersectionNodes=function(n){var e=[],i=n,r=function(){var o=0;i.from.getOuterEdges().forEach(function(c){c.label===n.label&&++o}),o>1&&e.push(i.from),i=i.next};do{r()}while(!n.isEqual(i));return e},t.prototype._findEdgeRing=function(n){var e=n,i=new Nie;do{i.push(e),e.ring=i,e=e.next}while(!n.isEqual(e));return i},t.prototype.removeNode=function(n){var e=this;n.getOuterEdges().forEach(function(i){return e.removeEdge(i)}),n.innerEdges.forEach(function(i){return e.removeEdge(i)}),delete this.nodes[n.id]},t.prototype.removeEdge=function(n){this.edges=this.edges.filter(function(e){return!e.isEqual(n)}),n.deleteEdge()}}(),w(73198),w(33367),w(93282);var Sm={search:function(t,n,e,i){t.cleanDirty();var r=(i=i||{}).heuristic||Sm.heuristics.manhattan,o=i.closest||!1,c=function Jie(){return new xL(function(t){return t.f})}(),x=n;for(n.h=r(n,e),c.push(n);c.size()>0;){var z=c.pop();if(z===e)return bL(z);z.closed=!0;for(var O=t.neighbors(z),J=0,le=O.length;J<le;++J){var be=O[J];if(!be.closed&&!be.isWall()){var Ee=z.g+be.getCost(z),ut=be.visited;(!ut||Ee<be.g)&&(be.visited=!0,be.parent=z,be.h=be.h||r(be,e),be.g=Ee,be.f=be.g+be.h,t.markDirty(be),o&&(be.h<x.h||be.h===x.h&&be.g<x.g)&&(x=be),ut?c.rescoreElement(be):c.push(be))}}}return o?bL(x):[]},heuristics:{manhattan:function(t,n){return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)},diagonal:function(t,n){var i=Math.sqrt(2),r=Math.abs(n.x-t.x),o=Math.abs(n.y-t.y);return 1*(r+o)+(i-2)*Math.min(r,o)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function B3(t,n){n=n||{},this.nodes=[],this.diagonal=!!n.diagonal,this.grid=[];for(var e=0;e<t.length;e++){this.grid[e]=[];for(var i=0,r=t[e];i<r.length;i++){var o=new Em(e,i,r[i]);this.grid[e][i]=o,this.nodes.push(o)}}this.init()}function Em(t,n,e){this.x=t,this.y=n,this.weight=e}function xL(t){this.content=[],this.scoreFunction=t}B3.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Sm.cleanNode(this.nodes[t])},B3.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Sm.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},B3.prototype.markDirty=function(t){this.dirtyNodes.push(t)},B3.prototype.neighbors=function(t){var n=[],e=t.x,i=t.y,r=this.grid;return r[e-1]&&r[e-1][i]&&n.push(r[e-1][i]),r[e+1]&&r[e+1][i]&&n.push(r[e+1][i]),r[e]&&r[e][i-1]&&n.push(r[e][i-1]),r[e]&&r[e][i+1]&&n.push(r[e][i+1]),this.diagonal&&(r[e-1]&&r[e-1][i-1]&&n.push(r[e-1][i-1]),r[e+1]&&r[e+1][i-1]&&n.push(r[e+1][i-1]),r[e-1]&&r[e-1][i+1]&&n.push(r[e-1][i+1]),r[e+1]&&r[e+1][i+1]&&n.push(r[e+1][i+1])),n},B3.prototype.toString=function(){for(var e,i,r,o,t=[],n=this.grid,c=0,x=n.length;c<x;c++){for(e=[],r=0,o=(i=n[c]).length;r<o;r++)e.push(i[r].weight);t.push(e.join(" "))}return t.join("\n")},Em.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Em.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Em.prototype.isWall=function(){return 0===this.weight},xL.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t},remove:function(t){var n=this.content.indexOf(t),e=this.content.pop();n!==this.content.length-1&&(this.content[n]=e,this.scoreFunction(e)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var n=this.content[t];t>0;){var e=(t+1>>1)-1,i=this.content[e];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[e]=n,this.content[t]=i,t=e}},bubbleUp:function(t){for(var n=this.content.length,e=this.content[t],i=this.scoreFunction(e);;){var x,r=t+1<<1,o=r-1,c=null;if(o<n&&(x=this.scoreFunction(this.content[o]))<i&&(c=o),r<n&&this.scoreFunction(this.content[r])<(null===c?i:x)&&(c=r),null===c)break;this.content[t]=this.content[c],this.content[c]=e,t=c}}},w(49863),w(98464),w(24855),w(31016);class N_{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,e,i=!0,r){this._multiple=n,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ne,e&&e.length&&(n?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(i=>this._markSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(i=>this._unmarkSelected(i));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);const e=this.selected,i=new Set(n);n.forEach(o=>this._markSelected(o)),e.filter(o=>!i.has(o)).forEach(o=>this._unmarkSelected(o));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(n){if(this.compareWith){for(let e of this._selection)if(this.compareWith(n,e))return e;return n}return n}}const _re=["button"],bre=["*"],FL=new Gn("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),VL=new Gn("MatButtonToggleGroup"),xre={provide:P2,useExisting:Bt(()=>jL),multi:!0};let HL=0;class BL{constructor(n,e){this.source=n,this.value=e}}let jL=(()=>{class t{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get vertical(){return this._vertical}set vertical(e){this._vertical=_a(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(i=>i.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=_a(e),this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=_a(e),this._markButtonsForCheck()}constructor(e,i){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+HL++,this.valueChange=new Cr,this.change=new Cr,this.appearance=i&&i.appearance?i.appearance:"standard"}ngOnInit(){this._selectionModel=new N_(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(e){const i=new BL(e,this.value);this._rawValue=i.value,this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(e,i,r=!1,o=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(e):this._selectionModel.deselect(e):o=!0,o?Promise.resolve().then(()=>this._updateModelValue(e,r)):this._updateModelValue(e,r)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>null!=e.value&&i===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const i=this._buttonToggles.find(r=>null!=r.value&&r.value===e);i&&(i.checked=!0,this._selectionModel.select(i))}_updateModelValue(e,i){i&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(E2),Et(FL,8))};static#t=this.\u0275dir=In({type:t,selectors:[["mat-button-toggle-group"]],contentQueries:function(i,r,o){if(1&i&&ya(o,UL,5),2&i){let c;mr(c=gr())&&(r._buttonToggles=c)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(i,r){2&i&&(zo("aria-disabled",r.disabled),go("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard","standard"===r.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Fr([xre,{provide:VL,useExisting:t}])]})}return t})();const wre=dm(class{});let UL=(()=>{class t extends wre{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const i=_a(e);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=_a(e)}constructor(e,i,r,o,c,x){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=o,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Cr;const z=Number(c);this.tabIndex=z||0===z?z:null,this.buttonToggleGroup=e,this.appearance=x&&x.appearance?x.appearance:"standard"}ngOnInit(){const e=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+HL++,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector()||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new BL(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static#e=this.\u0275fac=function(i){return new(i||t)(Et(VL,8),Et(E2),Et(zr),Et(F3),ll("tabindex"),Et(FL,8))};static#t=this.\u0275cmp=ar({type:t,selectors:[["mat-button-toggle"]],viewQuery:function(i,r){if(1&i&&ds(_re,5),2&i){let o;mr(o=gr())&&(r._buttonElement=o.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(i,r){1&i&&Ki("focus",function(){return r.focus()}),2&i&&(zo("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),go("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-appearance-standard","standard"===r.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Qi],ngContentSelectors:bre,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){if(1&i&&(Lc(),mn(0,"button",0,1),Ki("click",function(){return r._onButtonClick()}),mn(2,"span",2),Oo(3),wn()(),Ni(4,"span",3)(5,"span",4)),2&i){const o=Ts(1);_n("id",r.buttonId)("disabled",r.disabled||null),zo("tabindex",r.disabled?-1:r.tabIndex)("aria-pressed",r.checked)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),tn(5),_n("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[fm],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{--mat-legacy-button-toggle-height:36px;--mat-legacy-button-toggle-shape:2px;--mat-legacy-button-toggle-focus-state-layer-opacity:1;position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{--mat-standard-button-toggle-shape:4px;--mat-standard-button-toggle-hover-state-layer-opacity:0.04;--mat-standard-button-toggle-focus-state-layer-opacity:0.12;border-radius:var(--mat-standard-button-toggle-shape);border:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-text-font)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard{--mat-standard-button-toggle-shape:4px;--mat-standard-button-toggle-hover-state-layer-opacity:0.04;--mat-standard-button-toggle-focus-state-layer-opacity:0.12;color:var(--mat-standard-button-toggle-text-color);background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-text-font)}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color)}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color);background-color:var(--mat-standard-button-toggle-selected-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color)}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity)}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity)}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}"],encapsulation:2,changeDetection:0})}return t})(),Cre=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,V3,_o]})}return t})();function GL(t,n,e,i,r,o,c){try{var x=t[o](c),z=x.value}catch(O){return void e(O)}x.done?n(z):Promise.resolve(z).then(i,r)}function WL(t){return function(){var n=this,e=arguments;return new Promise(function(i,r){var o=t.apply(n,e);function c(z){GL(o,i,r,c,x,"next",z)}function x(z){GL(o,i,r,c,x,"throw",z)}c(void 0)})}}var R_=w(28251);const Mre=["qrcElement"];let Sre=(()=>{class t{constructor(e,i){this.renderer=e,this.sanitizer=i,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Cr,this.context=null}ngOnChanges(){var e=this;return WL(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((i,r)=>{(0,R_.hz)(this.qrdata,e,(o,c)=>{o?r(o):i(c)})})}toCanvas(e,i){return new Promise((r,o)=>{(0,R_.rT)(e,this.qrdata,i,c=>{c?o(c):r("success")})})}toSVG(e){return new Promise((i,r)=>{(0,R_.toString)(this.qrdata,e,(o,c)=>{o?r(o):i(c)})})}renderElement(e){for(const i of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,i);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return WL(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const i={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},r=e.imageSrc,o=e.imageHeight||40,c=e.imageWidth||40;switch(e.elementType){case"canvas":{const x=e.renderer.createElement("canvas");e.context=x.getContext("2d"),e.toCanvas(x,i).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute(x,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute(x,"title",`${e.title}`),r&&e.context){e.centerImage=new Image(c,o),r!==e.centerImage.src&&(e.centerImage.src=r),o!==e.centerImage.height&&(e.centerImage.height=o),c!==e.centerImage.width&&(e.centerImage.width=c);const z=e.centerImage;z&&(z.onload=()=>{e.context?.drawImage(z,x.width/2-c/2,x.height/2-o/2,c,o)})}e.renderElement(x),e.emitQRCodeURL(x)}).catch(z=>{console.error("[angularx-qrcode] canvas error:",z)});break}case"svg":{const x=e.renderer.createElement("div");e.toSVG(i).then(z=>{e.renderer.setProperty(x,"innerHTML",z);const O=x.firstChild;e.renderer.setAttribute(O,"height",`${e.width}`),e.renderer.setAttribute(O,"width",`${e.width}`),e.renderElement(O),e.emitQRCodeURL(O)}).catch(z=>{console.error("[angularx-qrcode] svg error:",z)});break}default:{const x=e.renderer.createElement("img");e.toDataURL(i).then(z=>{e.alt&&x.setAttribute("alt",e.alt),e.ariaLabel&&x.setAttribute("aria-label",e.ariaLabel),x.setAttribute("src",z),e.title&&x.setAttribute("title",e.title),e.renderElement(x),e.emitQRCodeURL(x)}).catch(z=>{console.error("[angularx-qrcode] img/url error:",z)})}}}catch(i){console.error("[angularx-qrcode] Error generating QR Code:",i.message)}})()}emitQRCodeURL(e){const i=e.constructor.name;if(i===SVGSVGElement.name){const c=new Blob([e.outerHTML],{type:"image/svg+xml"}),x=URL.createObjectURL(c),z=this.sanitizer.bypassSecurityTrustUrl(x);return void this.qrCodeURL.emit(z)}let r="";i===HTMLCanvasElement.name&&(r=e.toDataURL("image/png")),i===HTMLImageElement.name&&(r=e.src),fetch(r).then(o=>o.blob()).then(o=>URL.createObjectURL(o)).then(o=>this.sanitizer.bypassSecurityTrustUrl(o)).then(o=>{this.qrCodeURL.emit(o)}).catch(o=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+o)})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(pl),Et(wd))};static#t=this.\u0275cmp=ar({type:t,selectors:[["qrcode"]],viewQuery:function(i,r){if(1&i&&ds(Mre,7),2&i){let o;mr(o=gr())&&(r.qrcElement=o.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[Bn],decls:2,vars:2,consts:[["qrcElement",""]],template:function(i,r){1&i&&Ni(0,"div",null,0),2&i&&L9(r.cssClass)},encapsulation:2,changeDetection:0})}return t})(),YL=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})();const F_=["th","st","nd","rd"];let Ere=(()=>{class t{transform(e,i=!0){const r=e%100;return(i?e:"")+(F_[(r-20)%10]||F_[r]||F_[0])}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275pipe=kr({name:"ordinal",type:t,pure:!0})}return t})();function Are(t,n){if(1&t&&(mn(0,"div",18),Ni(1,"img",19),wn()),2&t){const e=di(2);tn(1),_n("src",e.poi.properties.images[0]?e.getImageUrl():"https://picsum.photos/500/300",E1)("alt",e.poi.properties.title)}}function zre(t,n){if(1&t&&(mn(0,"div",20),Ni(1,"qrcode",21),mn(2,"p"),Ci(3),Ti(4,"translate"),wn()()),2&t){const e=di(2);tn(1),_n("qrdata",e.qrCodeUrl)("width",120)("errorCorrectionLevel","M")("allowEmptyString",!0),tn(2),wo(Fi(4,5,"scan-qr-code"))}}function Pre(t,n){if(1&t&&(mn(0,"h4",22),Ci(1),wn()),2&t){const e=di(2);tn(1),Ca(" ",e.getOpenHours()," ")}}const XL=function(){return["fal","angle-down"]};function Ire(t,n){if(1&t){const e=o1();mn(0,"a",24),Ki("click",function(){Qr(e);const r=di(3);return r.limit=r.details.length,xo(r.showingMore=!0)}),Ci(1),Ti(2,"translate"),Ni(3,"fa-icon",3),wn()}2&t&&(tn(1),Ca("",Fi(2,2,"showMore")," "),tn(2),_n("icon",A1(4,XL)))}const ZL=function(){return["fal","angle-up"]};function Tre(t,n){if(1&t){const e=o1();mn(0,"a",24),Ki("click",function(){Qr(e);const r=di(3);return r.limit=200,xo(r.showingMore=!1)}),Ci(1),Ti(2,"translate"),Ni(3,"fa-icon",3),wn()}2&t&&(tn(1),Ca("",Fi(2,2,"showLess")," "),tn(2),_n("icon",A1(4,ZL)))}function Lre(t,n){if(1&t&&(mn(0,"p"),Ci(1),Ti(2,"slice"),ei(3,Ire,4,5,"a",23),ei(4,Tre,4,5,"a",23),wn()),2&t){const e=di(2);tn(1),Q2(" ",W9(2,4,e.details,0,e.limit)," ",e.details.length>e.limit?"...":""," "),tn(2),_n("ngIf",e.details.length>e.limit),tn(1),_n("ngIf",e.showingMore)}}function Dre(t,n){if(1&t&&(mn(0,"p"),Ci(1),Ti(2,"translate"),mn(3,"a",25),Ci(4),wn()()),2&t){const e=di(2);tn(1),Ca(" ",Fi(2,3,"link"),": "),tn(2),_n("href",e.linkUrl,E1),tn(1),wo(e.linkUrl)}}function Ore(t,n){if(1&t&&(mn(0,"p",26)(1,"strong"),Ci(2),Ti(3,"translate"),wn(),Ci(4),Ti(5,"number"),wn()),2&t){const e=di(2);tn(2),wo(Fi(3,3,"distance")),tn(2),Q2(": ",G9(5,5,e.distanceInMeters,"1.0-0"),"m / ",e.distanceInMinutes," ")}}const $L=function(){return["fal","walking"]};function kre(t,n){if(1&t){const e=o1();mn(0,"button",27),Ki("click",function(){return Qr(e),xo(di(2).onShowRoute())}),Ni(1,"fa-icon",3),Ci(2),Ti(3,"translate"),wn()}2&t&&(tn(1),_n("icon",A1(4,$L)),tn(1),Ca(" ",Fi(3,2,"takeMeThere")," "))}const qL=function(){return["fal","chevron-double-right"]},KL=function(){return["fal","pennant"]};function Nre(t,n){if(1&t){const e=o1();mn(0,"div")(1,"mat-button-toggle-group",28),Ki("ngModelChange",function(r){return Qr(e),xo(di(2).routeType=r)})("change",function(){return Qr(e),xo(di(2).toggleAccessibleRoute())}),mn(2,"mat-button-toggle",29),Ni(3,"img",30),mn(4,"span"),Ci(5),Ti(6,"translate"),wn()(),mn(7,"mat-button-toggle",31),Ni(8,"img",32),mn(9,"span"),Ci(10),Ti(11,"translate"),wn()()(),mn(12,"div",33)(13,"div",34)(14,"p"),Ci(15),wn()(),mn(16,"div",35),Ki("click",function(){return Qr(e),xo(di(2).onNextStep())}),Ni(17,"fa-icon",3),mn(18,"p"),Ci(19),Ti(20,"translate"),Ti(21,"translate"),wn()()()()}if(2&t){const e=di(2);tn(1),_n("ngModel",e.routeType),tn(4),wo(Fi(6,6,"fast-route")),tn(5),wo(Fi(11,8,"use-elevators")),tn(5),wo(e.steps[e.currentStep].description),tn(2),_n("icon",e.currentStep!==e.steps.length-1?A1(14,qL):A1(15,KL)),tn(2),Ca(" ",e.currentStep!==e.steps.length-1?Fi(20,10,"next"):Fi(21,12,"arrived")," ")}}function Rre(t,n){if(1&t){const e=o1();mn(0,"a",24),Ki("click",function(){Qr(e);const r=di(3);return r.limit=r.details.length,xo(r.showingMore=!0)}),Ci(1),Ti(2,"translate"),Ni(3,"fa-icon",3),wn()}2&t&&(tn(1),Ca("",Fi(2,2,"showMore")," "),tn(2),_n("icon",A1(4,XL)))}function Fre(t,n){if(1&t){const e=o1();mn(0,"a",24),Ki("click",function(){Qr(e);const r=di(3);return r.limit=200,xo(r.showingMore=!1)}),Ci(1),Ti(2,"translate"),Ni(3,"fa-icon",3),wn()}2&t&&(tn(1),Ca("",Fi(2,2,"showLess")," "),tn(2),_n("icon",A1(4,ZL)))}function Vre(t,n){if(1&t&&(mn(0,"p"),Ci(1),Ti(2,"slice"),ei(3,Rre,4,5,"a",23),ei(4,Fre,4,5,"a",23),wn()),2&t){const e=di(2);tn(1),Q2(" ",W9(2,4,e.details,0,e.limit)," ",e.details.length>e.limit?"...":""," "),tn(2),_n("ngIf",e.details.length>e.limit),tn(1),_n("ngIf",e.showingMore)}}function Hre(t,n){if(1&t&&(mn(0,"p"),Ci(1),Ti(2,"translate"),mn(3,"a",25),Ci(4),wn()()),2&t){const e=di(2);tn(1),Ca(" ",Fi(2,3,"link"),": "),tn(2),_n("href",e.linkUrl,E1),tn(1),wo(e.linkUrl)}}function Bre(t,n){if(1&t){const e=o1();mn(0,"button",27),Ki("click",function(){return Qr(e),xo(di(2).onShowRoute())}),Ni(1,"fa-icon",3),Ci(2),Ti(3,"translate"),wn()}2&t&&(tn(1),_n("icon",A1(4,$L)),tn(1),Ca(" ",Fi(3,2,"takeMeThere")," "))}function jre(t,n){if(1&t){const e=o1();mn(0,"mat-button-toggle-group",28),Ki("ngModelChange",function(r){return Qr(e),xo(di(2).routeType=r)})("change",function(){return Qr(e),xo(di(2).toggleAccessibleRoute())}),mn(1,"mat-button-toggle",29),Ni(2,"img",30),mn(3,"span"),Ci(4),Ti(5,"translate"),wn()(),mn(6,"mat-button-toggle",31),Ni(7,"img",32),mn(8,"span"),Ci(9),Ti(10,"translate"),wn()()()}2&t&&(_n("ngModel",di(2).routeType),tn(4),wo(Fi(5,3,"fast-route")),tn(5),wo(Fi(10,5,"use-elevators")))}function Ure(t,n){if(1&t&&(mn(0,"p",26)(1,"strong"),Ci(2),Ti(3,"translate"),wn(),Ci(4),Ti(5,"number"),wn()),2&t){const e=di(2);tn(2),wo(Fi(3,3,"distance")),tn(2),Q2(": ",G9(5,5,e.distanceInMeters,"1.0-0"),"m / ",e.distanceInMinutes," ")}}function Gre(t,n){if(1&t){const e=o1();mn(0,"div")(1,"div",33)(2,"div",34)(3,"p"),Ci(4),wn()(),mn(5,"div",35),Ki("click",function(){return Qr(e),xo(di(2).onNextStep())}),Ni(6,"fa-icon",3),mn(7,"p"),Ci(8),Ti(9,"translate"),Ti(10,"translate"),wn()()()()}if(2&t){const e=di(2);tn(4),wo(e.steps[e.currentStep].description),tn(2),_n("icon",e.currentStep!==e.steps.length-1?A1(7,qL):A1(8,KL)),tn(2),Ca(" ",e.currentStep!==e.steps.length-1?Fi(9,3,"next"):Fi(10,5,"arrived")," ")}}function Wre(t,n){if(1&t){const e=o1();mn(0,"p",43),Ki("click",function(){return Qr(e),xo(di(3).onCenterToParking())}),mn(1,"strong"),Ci(2),Ti(3,"translate"),wn(),Ci(4),wn()}if(2&t){const e=di(3);tn(2),Ca("",Fi(3,2,"closest-parking"),"::"),tn(2),Ca(" ",e.closestParkingFeature.properties.title," ")}}function Yre(t,n){if(1&t){const e=o1();mn(0,"div",36),ei(1,Wre,5,4,"p",37),mn(2,"div",38)(3,"button",39),Ki("click",function(){return Qr(e),xo(di(2).onRouteFromParking())}),Ni(4,"img",40),Ci(5),Ti(6,"translate"),wn(),mn(7,"button",39),Ki("click",function(){return Qr(e),xo(di(2).onRouteFromEntrance())}),Ni(8,"img",41),Ci(9),Ti(10,"translate"),wn(),mn(11,"button",39),Ki("click",function(){return Qr(e),xo(di(2).onOtherRoute())}),Ni(12,"img",42),Ci(13),Ti(14,"translate"),wn()()()}if(2&t){const e=di(2);tn(1),_n("ngIf",e.closestParkingFeature),tn(4),Ca(" ",Fi(6,4,"route-from-parking")," "),tn(4),Ca(" ",Fi(10,6,"route-from-entrance")," "),tn(4),Ca(" ",Fi(14,8,"other-route")," ")}}const Xre=function(t,n){return{haveRoute:t,open:n}},Zre=function(){return["fal","chevron-left"]},$re=function(){return["fal","chevron-right"]},qre=function(){return["fal","times"]},QL=function(t){return{accessibleOnly:t}};function Kre(t,n){if(1&t){const e=o1();mn(0,"div",1)(1,"div",2),Ki("click",function(){Qr(e);const r=di();return xo(r.sidebarOpened=!r.sidebarOpened)}),Ni(2,"fa-icon",3),wn(),mn(3,"button",4),Ki("click",function(){return Qr(e),xo(di().onDetailsClose())}),Ni(4,"fa-icon",3),wn(),ei(5,Are,2,2,"div",5),mn(6,"div",6)(7,"h2",7),Ci(8),wn(),ei(9,zre,5,7,"div",8),ei(10,Pre,2,1,"h4",9),mn(11,"h4",10),Ci(12),Ti(13,"translate"),Ti(14,"ordinal"),wn()(),mn(15,"div",11),ei(16,Lre,5,8,"p",12),ei(17,Dre,5,5,"p",12),ei(18,Ore,6,8,"p",13),ei(19,kre,4,5,"button",14),ei(20,Nre,22,16,"div",12),wn(),mn(21,"div",15),ei(22,Vre,5,8,"p",12),ei(23,Hre,5,5,"p",12),ei(24,Bre,4,5,"button",14),ei(25,jre,11,7,"mat-button-toggle-group",16),ei(26,Ure,6,8,"p",13),ei(27,Gre,11,9,"div",12),wn(),ei(28,Yre,15,10,"div",17),wn()}if(2&t){const e=di();_n("ngClass",f5(27,Xre,e.haveRouteDetails,e.sidebarOpened)),tn(2),_n("icon",e.sidebarOpened?A1(30,Zre):A1(31,$re)),tn(2),_n("icon",A1(32,qre)),tn(1),_n("ngIf",!e.sidebarService.filteredAmenity),tn(3),wo(e.poi.properties.title),tn(1),_n("ngIf",e.haveRouteDetails),tn(1),_n("ngIf",!e.sidebarService.filteredAmenity),tn(2),Q2(" ",Fi(13,23,"level"),": ",null!=e.poi.properties._dynamic.floor&&e.poi.properties._dynamic.floor.name?e.getFloorName(e.poi.properties._dynamic.floor):Fi(14,25,e.poi.properties.level+1)," "),tn(3),_n("ngClass",gl(33,QL,e.stateService.state.accessibleRoute)),tn(1),_n("ngIf",e.details&&!e.sidebarService.filteredAmenity),tn(1),_n("ngIf",e.linkUrl),tn(1),_n("ngIf",e.haveRouteDetails),tn(1),_n("ngIf",e.stateService.state.kioskMode),tn(1),_n("ngIf",e.haveRouteDetails),tn(1),_n("ngClass",gl(35,QL,e.stateService.state.accessibleRoute)),tn(1),_n("ngIf",e.details&&!e.sidebarService.filteredAmenity),tn(1),_n("ngIf",e.linkUrl),tn(1),_n("ngIf",e.stateService.state.kioskMode),tn(1),_n("ngIf",e.haveRouteDetails),tn(1),_n("ngIf",e.haveRouteDetails),tn(1),_n("ngIf",e.haveRouteDetails),tn(1),_n("ngIf",!e.stateService.state.kioskMode&&!e.sidebarService.filteredAmenity)}}const V_="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";let Qre=(()=>{class t{constructor(e,i,r,o){this.sidebarService=e,this.mapService=i,this.stateService=r,this.translateService=o,this.sidebarOpened=!1,this.showInstructions=!1,this.steps=[],this.details=V_,this.limit=200,this.showingMore=!1,this.averageWalkSpeed=4.5,this.haveRouteDetails=!1,this.parkingAmenityId=this.stateService.state.parkingAmenityId,this.entrancePoiId=this.stateService.state.entranceFeatureId,this.currentStep=0,this.destinationFromUrl=!1,this.subs=[];const x=new URLSearchParams(window.location.search).get("destinationFeature");this.poi=this.sidebarService.selectedEndPoi,this.routeType=!0===this.stateService.state.accessibleRoute?"accessible":"fastest",x&&(this.destinationFromUrl=!0)}ngOnInit(){this.subs.push(this.sidebarService.getEndPointListener().subscribe(e=>{this.details=V_,this.linkUrl=null,this.steps=this.stateService.state.kioskMode&&this.destinationFromUrl?this.steps:[],e?this.definePoi(e):(this.haveRouteDetails=!1,this.mapService.showingRoute=this.haveRouteDetails,this.currentStep=0),this.destinationFromUrl=!1}),this.sidebarService.getAccessibleOnlyToggleListener().subscribe(()=>{setTimeout(()=>{this.currentStep=0,this.routeType=!0===this.stateService.state.accessibleRoute?"accessible":"fastest"})}),this.sidebarService.getStepChangeListener().subscribe(e=>{this.currentStep=e}),this.mapService.getRouteFoundListener().subscribe(e=>{e&&this.stateService.state.textNavigation&&(this.poi||this.definePoi(this.stateService.state.textNavigation.destination),this.buildNavigationSteps(this.stateService.state.textNavigation.steps),this.distanceInMeters=this.stateService.state.routeDetails.distance?this.stateService.state.routeDetails.distance:this.stateService.state.textNavigation.distanceMeters,this.distanceInMinutes=pT(1e3*this.stateService.state.routeDetails.duration.realistic,{delimiter:` ${this.translateService.instant("and")} `,round:!0,language:this.currentLanguage}),this.haveRouteDetails=!0,this.mapService.showingRoute=this.haveRouteDetails,this.generateQrCode(this.sidebarService.selectedEndPoi,this.sidebarService.selectedStartPoi))}),this.mapService.getMapReadyListener().subscribe(e=>{e&&this.setStartPoi()}),this.translateService.onLangChange.subscribe(e=>{this.currentLanguage=e.lang,this.poi&&(this.definePoi(this.poi),this.distanceInMinutes=pT(1e3*this.stateService.state.routeDetails.duration.realistic,{delimiter:" and ",round:!0,language:this.currentLanguage}),this.buildNavigationSteps(this.stateService.state.textNavigation.steps))}))}onDetailsClose(){this.sidebarService.onSetStartPoi(null),this.sidebarService.onSetEndPoi(null),this.poi=null,this.details=V_,this.sidebarService.filteredAmenity&&(this.sidebarService.onAmenityToggle("amenities",this.sidebarService.filteredAmenity),this.sidebarService.showClosestAmenityPicker=!1,this.sidebarService.activeListItem=null)}toggleInstructions(){this.showInstructions=!this.showInstructions}toggleAccessibleRoute(){this.sidebarService.onAccessibleRouteToggle()}getImageUrl(){return`https://api.proximi.fi/v5/geo/${this.poi.properties.images[0]}?token=${Ev.token}`}getOpenHours(){const i=(new Date).getDay();return this.poi.properties.workingHours&&this.poi.properties.workingHours[i]?`${this.poi.properties.workingHours[i][0]} - ${this.poi.properties.workingHours[i][1]}`:this.poi.properties.metadata&&this.poi.properties.metadata.openHours&&this.poi.properties.metadata.openHours[i].en?this.poi.properties.metadata.openHours[i][this.currentLanguage]?this.poi.properties.metadata.openHours[i][this.currentLanguage]:this.poi.properties.metadata.openHours[i].en:this.translateService.instant("noOpenHours")}buildNavigationSteps(e){let i=0;this.steps=e.filter((r,o,c)=>{const x=r.direction.split("_")[0];if(r.levelChangerId&&("UP"===x||"DOWN"===x)||"FINISH"===r.direction)return r.stepsUntil=c.slice(i,o),i=o+1,r}).map(r=>{const o=r.direction.split("_")[0]?r.direction.split("_")[0]:r.direction,c=r.direction.split("_")[1],x=this.stateService.state.floors.filter(le=>le.level===r.destinationLevel)?this.stateService.state.floors.filter(le=>le.level===r.destinationLevel)[0]:this.stateService.state.floor,z=r.stepsUntil.reduce((le,be)=>le+be.distanceFromLastStep,0),O=r.distanceFromLastStep+z;let J;return J="FINISH"===o?"fi"===this.currentLanguage?`${this.translateService.instant("you-will-arrive")} ${0|O}m ${this.translateService.instant("in")}.`:`${this.translateService.instant("in")} ${0|O}m ${this.translateService.instant("you-will-arrive")}.`:`${this.translateService.instant("go")} ${0|O}m ${this.translateService.instant("and-take-the")} ${this.translateService.instant(c)} ${this.translateService.instant(o)} ${this.translateService.instant("TO_FLOOR")} ${x.name?this.getFloorName(x):r.destinationLevel}.`,{totalDistance:O,description:J,destinationFloor:x,...r}})}onNextStep(){this.currentStep!==this.steps.length-1?(this.currentStep++,this.sidebarService.stepChangeListener.next(this.currentStep)):(this.currentStep=0,this.sidebarService.stepChangeListener.next(this.currentStep))}setStartPoi(){if(!this.stateService.state.kioskMode){const e=this.sidebarService.sortedPOIs.find(i=>i.id===this.stateService.state.startPoiId);e&&(this.stateService.state={...this.stateService.state,startPoi:e},this.stateService.state.defaultLocation.coordinates=e.coordinates,this.stateService.state.defaultLocation.level=e.properties.level,this.sidebarService.onSetStartPoi(e))}}onShowRoute(){this.mapService.showRouteListener.next()}definePoi(e){this.poi=e,this.poi.properties._dynamic||(this.poi.properties._dynamic={}),this.poi.geometry.type||(this.poi.geometry.type="Point"),this.poi.properties.title=this.poi.properties.title_i18n&&this.poi.properties.title_i18n[this.currentLanguage]?this.poi.properties.title_i18n[this.currentLanguage]:this.poi.properties.title,this.poi.properties._dynamic.floor=this.poi.properties.floor_id?this.stateService.state.floors.find(i=>i.id===this.poi.properties.floor_id):null,this.poi.properties.description_i18n&&(this.details=this.poi.properties.description_i18n[this.currentLanguage]?this.poi.properties.description_i18n[this.currentLanguage]:this.poi.properties.description_i18n.en),this.getClosestParking(),this.getUrl(),this.stateService.state.textNavigation?.steps&&this.buildNavigationSteps(this.stateService.state.textNavigation.steps)}getClosestParking(){let e={type:"FeatureCollection",features:this.stateService.state.allFeatures.features.filter(o=>o.properties.amenity===this.parkingAmenityId&&"Point"===o.geometry.type&&o.properties.level===this.poi.properties.level)},i={type:"FeatureCollection",features:this.stateService.state.allFeatures.features.filter(o=>o.properties.amenity===this.parkingAmenityId&&"Point"===o.geometry.type)};this.stateService.state.defaultPlaceId&&(e.features=e.features.filter(o=>o.properties.place_id===this.stateService.state.defaultPlaceId),i.features=i.features.filter(o=>o.properties.place_id===this.stateService.state.defaultPlaceId));const r=bh(this.poi.geometry.coordinates);i.features.length>0&&(this.closestParkingFeature=$te(r,e.features.length>0?e:i),this.closestParkingFeature.properties.title=this.closestParkingFeature.properties.title_i18n&&this.closestParkingFeature.properties.title_i18n[this.currentLanguage]?this.closestParkingFeature.properties.title_i18n[this.currentLanguage]:this.closestParkingFeature.properties.title)}onRouteFromParking(){this.sidebarService.onSetStartPoi(this.closestParkingFeature)}onRouteFromEntrance(){this.sidebarService.onSetStartPoi(this.stateService.state.allFeatures.features.find(e=>e.id===this.entrancePoiId))}onOtherRoute(){this.sidebarService.showRoutePicker=!0}onCenterToParking(){this.sidebarService.centerToFeatureListener.next(this.closestParkingFeature)}generateQrCode(e,i){const r=new URL(window.location.href),o=r.searchParams;!i&&e&&o.set("destinationFeature",e.properties.id),e&&i&&(o.set("destinationFeature",e.properties.id),o.set("startFeature",i.properties.id)),this.qrCodeUrl=r.href}getUrl(){const e=typeof this.poi.properties.url>"u"?typeof this.poi.properties.metadata<"u"?this.poi.properties.metadata.url:"yolo":this.poi.properties.url;if(e){let i=e.startsWith("http://")?1:0;0===i&&(i=e.startsWith("https://")?2:0),this.linkUrl=0===i?`http://${e}`:e}}getFloorName(e){return this.sidebarService.getFloorName(e,this.currentLanguage)}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0),Et(e6),Et(u0),Et(Bl))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-details"]],decls:1,vars:1,consts:[["class","container",3,"ngClass",4,"ngIf"],[1,"container",3,"ngClass"],[1,"toggle",3,"click"],[3,"icon"],[1,"close",3,"click"],["class","img-holder",4,"ngIf"],[1,"content","header"],[1,"title"],["class","qr-code",4,"ngIf"],["class","open-hours",4,"ngIf"],[1,"level"],[1,"content","large-viewport-only",3,"ngClass"],[4,"ngIf"],["class","distance",4,"ngIf"],["class","show-route",3,"click",4,"ngIf"],[1,"content","small-viewport-only",3,"ngClass"],["aria-label","Route type","class","accessible-toggle-group",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","start-box",4,"ngIf"],[1,"img-holder"],[3,"src","alt"],[1,"qr-code"],[3,"qrdata","width","errorCorrectionLevel","allowEmptyString"],[1,"open-hours"],["href","javascript:;",3,"click",4,"ngIf"],["href","javascript:;",3,"click"],["target","_blank",2,"display","inline",3,"href"],[1,"distance"],[1,"show-route",3,"click"],["aria-label","Route type",1,"accessible-toggle-group",3,"ngModel","ngModelChange","change"],["value","fastest"],["src","https://img.icons8.com/ios/36/ffffff/walking--v1.png"],["value","accessible"],["src","https://img.icons8.com/wired/36/ffffff/elevator.png"],[1,"step-nav"],[1,"description"],[1,"next",3,"click"],[1,"start-box"],["class","closest-parking",3,"click",4,"ngIf"],[1,"buttons"],["type","button",3,"click"],["src","https://img.icons8.com/ios-filled/50/ffffff/people-in-car.png"],["src","https://img.icons8.com/ios/50/ffffff/walking--v1.png"],["src","https://img.icons8.com/external-kiranshastry-lineal-kiranshastry/64/ffffff/external-route-interface-kiranshastry-lineal-kiranshastry.png"],[1,"closest-parking",3,"click"]],template:function(i,r){1&i&&ei(0,Kre,29,37,"div",0),2&i&&_n("ngIf",r.poi)},dependencies:[B4,z2,jL,UL,k3,em,Xu,Sre,SS,MS,U0,Ere],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 15px #0000001a;border-radius:0 10px 10px 0;margin-bottom:1rem;position:absolute;left:0;top:110px;transition:all .25s linear;min-height:143px;z-index:4;max-height:calc(100vh - 110px);overflow-x:hidden;overflow-y:auto;width:451px}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;color:#fff;background:#6b50d0;border:0;border-radius:15px;padding:.5rem .8rem;font-size:20px;z-index:4}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background:#6144cd}.container[_ngcontent-%COMP%]   .img-holder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1rem 2rem;background:white;position:relative;top:-20px;border-radius:0 20px 0 0}.container[_ngcontent-%COMP%]   .content.small-viewport-only[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .content.header[_ngcontent-%COMP%]{padding-bottom:0}.container[_ngcontent-%COMP%]   .content.header[_ngcontent-%COMP%]   .qr-code[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .content.header[_ngcontent-%COMP%]   .qr-code[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b50d0;font-weight:600;font-size:20px;padding-left:1.5rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#6b50d0;margin-bottom:5px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   a.url[_ngcontent-%COMP%]{display:inline-block;background:white;border:2px solid #6b50d0;text-align:center;border-radius:50px;font-weight:500;transition:all .25s linear;color:#6b50d0;text-decoration:none;font-size:18px;width:36px;height:36px;line-height:39px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   a.url[_ngcontent-%COMP%]:hover{background:#6b50d0;border-color:#6b50d0;color:#fff}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .open-hours[_ngcontent-%COMP%]{color:#6b50d0;margin-bottom:0;font-weight:400}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;font-size:14px;margin-bottom:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:14px;letter-spacing:.5px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-weight:500;color:#222;margin-top:10px;text-decoration:none}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#6b50d0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .show-route[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:.5rem;cursor:pointer;background:white;text-align:center;border-radius:5px;font-weight:500;padding:.5rem;outline:0;transition:all .25s linear}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .show-route[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:.5rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .show-route[_ngcontent-%COMP%]:hover{opacity:.7;transform:scale(1.05)}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]{border:2px solid #6b50d0;color:#6b50d0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]{border:0;color:#bd52ff}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .show-route[_ngcontent-%COMP%]{border:2px solid #6b50d0;background-color:#6b50d0;color:#fff}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]{display:flex;border:0;border-radius:16px;margin-bottom:.8rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]{flex:1 1 1px;color:#fff;background-color:#b8b0af;padding:.8rem;white-space:normal}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#6b50d0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle.mat-button-toggle-checked[_ngcontent-%COMP%]     .mat-button-toggle-focus-overlay{border:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:0 auto}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:normal;letter-spacing:-.25px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-nav[_ngcontent-%COMP%]{display:flex;align-items:stretch;margin-bottom:.5rem;border-radius:5px;overflow:hidden}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-nav[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{background-color:#b8b0af;color:#fff;padding:1rem;flex:1;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-nav[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-nav[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]{background-color:#000;color:#fff;cursor:pointer;padding:1rem;text-align:center;font-size:24px;text-transform:uppercase}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-nav[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;margin-top:.25rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-nav[_ngcontent-%COMP%]   .next[_ngcontent-%COMP%]:hover{background-color:#222}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]    {box-shadow:none;background:white}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-mdc-list-item{border-top:1px dashed #6b50d0;color:#222}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-mdc-list-item .mat-list-item-content{padding:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-mdc-list-item .mat-list-item-content .mat-list-text p:first-child{color:#6b50d0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-mdc-list-item .mat-list-item-content .mat-list-text p:first-child fa-icon{margin-right:5px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-mdc-list-item .mat-list-item-content .mat-list-text p:last-child{margin-top:5px}.container[_ngcontent-%COMP%]   .content.accessibleOnly[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]{border-color:#bd52ff;color:#bd52ff}.container[_ngcontent-%COMP%]   .content.accessibleOnly[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]{color:#6b50d0}.container[_ngcontent-%COMP%]   .content.accessibleOnly[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-mdc-list-item{border-color:#bd52ff}.container[_ngcontent-%COMP%]   .content.accessibleOnly[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-mdc-list-item .mat-list-text p:first-child{color:#bd52ff}.container[_ngcontent-%COMP%]   .content.small-viewport-only[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]{border:2px solid #bd52ff;color:#bd52ff}.container[_ngcontent-%COMP%]   .content.small-viewport-only.accessibleOnly[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]{border:2px solid #6b50d0;color:#6b50d0}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{position:absolute;display:none;font-size:30px;color:#6b50d0;padding:.5rem;cursor:pointer;transform:rotate(-90deg);z-index:6}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:hover{color:#6144cd}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]{margin-top:-2rem;padding:1rem 2rem;padding-top:0;position:relative}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .closest-parking[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;color:#6b50d0}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .closest-parking[_ngcontent-%COMP%]:hover{color:#472da7}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{flex:1 1 0px;text-align:center;background-color:#6b50d0;color:#fff;border-radius:6px;max-width:120px;border:0;padding:.5rem}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:#472da7}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto;display:block;width:30px}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .mat-mdc-dialog-content[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{inset:auto 0 0;position:fixed;width:100%;margin-bottom:0;border-radius:10px 10px 0 0;max-height:100%;z-index:16}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{display:block;left:calc(50% - 18px)}.container[_ngcontent-%COMP%]   .img-holder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:0}.container[_ngcontent-%COMP%]   .content.large-viewport-only[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .content.small-viewport-only[_ngcontent-%COMP%]{display:block;padding-bottom:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .open-hours[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]{display:none;border-radius:8px;margin-bottom:.8rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]{padding:.4rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-label-content{line-height:normal;font-size:14px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .step-nav[_ngcontent-%COMP%]{padding-bottom:0}.container.open[_ngcontent-%COMP%]{max-height:100%}.container.open[_ngcontent-%COMP%]   .img-holder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto}.container.open[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:block}.container.open[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .open-hours[_ngcontent-%COMP%]{display:none}.container.open[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle-group[_ngcontent-%COMP%]{display:flex}.container.haveRoute[_ngcontent-%COMP%]{max-height:245px}.container.haveRoute[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .qr-code[_ngcontent-%COMP%], .container.haveRoute[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .show-route[_ngcontent-%COMP%], .container.haveRoute[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]{display:none}.container.haveRoute.open[_ngcontent-%COMP%]{max-height:100%}.container.haveRoute.open[_ngcontent-%COMP%]   .img-holder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto}.container.haveRoute.open[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .distance[_ngcontent-%COMP%]{display:block}.container.haveRoute.open[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .qr-code[_ngcontent-%COMP%]{right:.5rem}.container.haveRoute.open[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]{display:block}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:12px;max-width:80px}.container[_ngcontent-%COMP%]   .start-box[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}}"]})}return t})();function Jre(t,n){if(1&t){const e=o1();mn(0,"li",7),Ki("click",function(){const o=Qr(e).$implicit;return xo(di().onSelect(o))}),mn(1,"span",2),Ci(2),wn(),mn(3,"span",8),Ci(4),wn()()}if(2&t){const e=n.$implicit;tn(2),wo(e.properties.title),tn(2),wo(e.properties.floor_name)}}const eoe=function(){return["fal","times"]};let toe=(()=>{class t{constructor(e,i,r){this.sidebarService=e,this.stateService=i,this.translateService=r,this.subs=[],this.currentLanguage=this.translateService.currentLang,this.subs.push(this.sidebarService.getAmenityToggleListener().subscribe(o=>{o&&"shop"===o.category&&(this.data=this.stateService.state.allFeatures.features.filter(c=>(Array.isArray(o.amenityId)?o.amenityId.includes(c.properties.amenity):c.properties.amenity===o.amenityId)&&"poi"===c.properties.type&&c.properties.place_id===this.stateService.state.defaultPlaceId).sort((c,x)=>c.properties.title>x.properties.title?1:-1).map(c=>{const x=this.stateService.state.floors.find(z=>z.id===c.properties.floor_id);return c.properties.title=c.properties.title_i18n&&c.properties.title_i18n[this.currentLanguage]?c.properties.title_i18n[this.currentLanguage]:c.properties.title,c.properties.floor_name=x?this.sidebarService.getFloorName(x,this.currentLanguage):"",c}))}))}ngOnInit(){}onClose(){this.sidebarService.onAmenityToggle("shop",this.sidebarService.filteredShop),this.sidebarService.activeListItem=null}onSelect(e){this.sidebarService.onSetEndPoi(e)}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0),Et(u0),Et(Bl))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-list-view"]],decls:9,vars:6,consts:[[1,"container"],[1,"content"],[1,"title"],[1,"close",3,"click"],[3,"icon"],[1,"list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"floor"]],template:function(i,r){1&i&&(mn(0,"div",0)(1,"div",1)(2,"h3",2),Ci(3),Ti(4,"translate"),wn(),mn(5,"button",3),Ki("click",function(){return r.onClose()}),Ni(6,"fa-icon",4),wn(),mn(7,"ul",5),ei(8,Jre,5,2,"li",6),wn()()()),2&i&&(tn(3),wo(Fi(4,3,null==r.sidebarService.activeListItem?null:r.sidebarService.activeListItem.title)),tn(3),_n("icon",A1(5,eoe)),tn(2),_n("ngForOf",r.data))},dependencies:[N0,Xu,U0],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 15px #0000001a;border-radius:0 10px 10px 0;margin-bottom:1rem;position:absolute;left:0;top:110px;transition:all .25s linear;z-index:3;max-height:calc(100vh - 110px);overflow-x:hidden;overflow-y:auto;width:451px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1rem 2rem}.container[_ngcontent-%COMP%]   h3.title[_ngcontent-%COMP%]{position:relative;color:#6b50d0;transition:all .25s linear}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid rgba(0,0,0,.4);padding:.8rem .2rem;cursor:pointer;align-items:center}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:auto}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .floor[_ngcontent-%COMP%]{background-color:#000000bf;color:#fff;width:26px;height:26px;line-height:27px;border-radius:4px;text-align:center}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{color:#6b50d0;border-color:#6b50d0}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover   .floor[_ngcontent-%COMP%]{background-color:#6b50d0}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{border:0}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;color:#fff;background:#6b50d0;border:0;border-radius:15px;padding:.5rem .8rem;font-size:20px;z-index:4}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background:#6144cd}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{inset:auto 0 0;position:fixed;width:100%;margin-bottom:0;border-radius:10px 10px 0 0;max-height:100%;z-index:15}}"]})}return t})();const JL=q4({passive:!0});let noe=(()=>{class t{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Ou;const i=H0(e),r=this._monitoredElements.get(i);if(r)return r.subject;const o=new ne,c="cdk-text-field-autofilled",x=z=>{"cdk-text-field-autofill-start"!==z.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===z.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>o.next({target:z.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>o.next({target:z.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",x,JL),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:o,unlisten:()=>{i.removeEventListener("animationstart",x,JL)}}),o}stopMonitoring(e){const i=H0(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(gc),Sn(Sr))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ioe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})();const roe=new Gn("MAT_INPUT_VALUE_ACCESSOR"),ooe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let aoe=0;const soe=KJ(class{constructor(t,n,e,i){this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new ne}});let H_=(()=>{class t extends soe{get disabled(){return this._disabled}set disabled(e){this._disabled=_a(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator($c.required)??!1}set required(e){this._required=_a(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&HA().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=_a(e)}constructor(e,i,r,o,c,x,z,O,J,le){super(x,o,c,r),this._elementRef=e,this._platform=i,this._autofillMonitor=O,this._formField=le,this._uid="mat-input-"+aoe++,this.focused=!1,this.stateChanges=new ne,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ut=>HA().has(ut)),this._iOSKeyupListener=ut=>{const mt=ut.target;!mt.value&&0===mt.selectionStart&&0===mt.selectionEnd&&(mt.setSelectionRange(1,1),mt.setSelectionRange(0,0))};const be=this._elementRef.nativeElement,Ee=be.nodeName.toLowerCase();this._inputValueAccessor=z||be,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&J.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Ee,this._isTextarea="textarea"===Ee,this._isInFormField=!!le,this._isNativeSelect&&(this.controlType=be.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){ooe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(gc),Et(f0,10),Et(uh,8),Et(qu,8),Et(JJ),Et(roe,10),Et(noe),Et(Sr),Et(t_,8))};static#t=this.\u0275dir=In({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&Ki("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(kl("id",r.id)("disabled",r.disabled)("required",r.required),zo("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),go("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Fr([{provide:e_,useExisting:t}]),Qi,Bn]})}return t})(),coe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,i_,i_,ioe,_o]})}return t})();class doe{constructor(n,e){this.delay=n,this.scheduler=e}call(n,e){return e.subscribe(new B_(n,this.delay,this.scheduler))}}class B_ extends R{constructor(n,e,i){super(n),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(n){const e=n.source,i=e.queue,r=n.scheduler,o=n.destination;for(;i.length>0&&i[0].time-r.now()<=0;)i.shift().notification.observe(o);if(i.length>0){const c=Math.max(0,i[0].time-r.now());this.schedule(n,c)}else this.unsubscribe(),e.active=!1}_schedule(n){this.active=!0,this.destination.add(n.schedule(B_.dispatch,this.delay,{source:this,destination:this.destination,scheduler:n}))}scheduleNotification(n){if(!0===this.errored)return;const e=this.scheduler,i=new hoe(e.now()+this.delay,n);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(n){this.scheduleNotification(G2.createNext(n))}_error(n){this.errored=!0,this.queue=[],this.destination.error(n),this.unsubscribe()}_complete(){this.scheduleNotification(G2.createComplete()),this.unsubscribe()}}class hoe{constructor(n,e){this.time=n,this.notification=e}}const foe=["panel"];function poe(t,n){if(1&t){const e=o1();mn(0,"div",0,1),Ki("@panelAnimation.done",function(r){return Qr(e),xo(di()._animationDone.next(r))}),Oo(2),wn()}if(2&t){const e=n.id,i=di();_n("id",i.id)("ngClass",i._classList)("@panelAnimation",i.isOpen?"visible":"hidden"),zo("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(e))}}const moe=["*"],goe=Oc("panelAnimation",[ys("void, hidden",Ur({opacity:0,transform:"scaleY(0.8)"})),_s(":enter, hidden => visible",[jy([Ss("0.03s linear",Ur({opacity:1})),Ss("0.12s cubic-bezier(0, 0, 0.2, 1)",Ur({transform:"scaleY(1)"}))])]),_s(":leave, visible => hidden",[Ss("0.075s linear",Ur({opacity:0}))])]);let voe=0;class yoe{constructor(n,e){this.source=n,this.option=e}}const _oe=dm(class{}),eD=new Gn("mat-autocomplete-default-options",{providedIn:"root",factory:function boe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let xoe=(()=>{class t extends _oe{get isOpen(){return this._isOpen&&this.showPanel}_setColor(e){this._color=e,this._setThemeClasses(this._classList)}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=_a(e)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(e){this._autoSelectActiveOption=_a(e)}get requireSelection(){return this._requireSelection}set requireSelection(e){this._requireSelection=_a(e)}set classList(e){this._classList=e&&e.length?function XX(t,n=/\s+/){const e=[];if(null!=t){const i=Array.isArray(t)?t:`${t}`.split(n);for(const r of i){const o=`${r}`.trim();o&&e.push(o)}}return e}(e).reduce((i,r)=>(i[r]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}constructor(e,i,r,o){super(),this._changeDetectorRef=e,this._elementRef=i,this._defaults=r,this._activeOptionChanges=_.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new Cr,this.opened=new Cr,this.closed=new Cr,this.optionActivated=new Cr,this._classList={},this.id="mat-autocomplete-"+voe++,this.inertGroups=o?.SAFARI||!1,this._autoActiveFirstOption=!!r.autoActiveFirstOption,this._autoSelectActiveOption=!!r.autoSelectActiveOption,this._requireSelection=!!r.requireSelection}ngAfterContentInit(){this._keyManager=new wJ(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const i=new yoe(this,e);this.optionSelected.emit(i)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}_setThemeClasses(e){e["mat-primary"]="primary"===this._color,e["mat-warn"]="warn"===this._color,e["mat-accent"]="accent"===this._color}_skipPredicate(e){return e.disabled}static#e=this.\u0275fac=function(i){return new(i||t)(Et(E2),Et(zr),Et(eD),Et(gc))};static#t=this.\u0275dir=In({type:t,viewQuery:function(i,r){if(1&i&&(ds(Co,7),ds(foe,5)),2&i){let o;mr(o=gr())&&(r.template=o.first),mr(o=gr())&&(r.panel=o.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",requireSelection:"requireSelection",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[Qi]})}return t})(),tD=(()=>{class t extends xoe{constructor(){super(...arguments),this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._animationDone=new Cr,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=_a(e),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}ngOnDestroy(){super.ngOnDestroy(),this._animationDone.complete()}_skipPredicate(e){return!1}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static#t=this.\u0275cmp=ar({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(i,r,o){if(1&i&&(ya(o,QI,5),ya(o,qy,5)),2&i){let c;mr(c=gr())&&(r.optionGroups=c),mr(c=gr())&&(r.options=c)}},hostAttrs:["ngSkipHydration","",1,"mat-mdc-autocomplete"],inputs:{disableRipple:"disableRipple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matAutocomplete"],features:[Fr([{provide:KI,useExisting:t}]),Qi],ngContentSelectors:moe,decls:1,vars:0,consts:[["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"],["panel",""]],template:function(i,r){1&i&&(Lc(),ei(0,poe,3,5,"ng-template"))},dependencies:[B4],styles:["div.mat-mdc-autocomplete-panel{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12);width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[goe]},changeDetection:0})}return t})();const woe={provide:P2,useExisting:Bt(()=>j_),multi:!0},nD=new Gn("mat-autocomplete-scroll-strategy"),Moe={provide:nD,deps:[Hl],useFactory:function Coe(t){return()=>t.scrollStrategies.reposition()}};let Soe=(()=>{class t{get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=_a(e)}constructor(e,i,r,o,c,x,z,O,J,le,be){this._element=e,this._overlay=i,this._viewContainerRef=r,this._zone=o,this._changeDetectorRef=c,this._dir=z,this._formField=O,this._document=J,this._viewportRuler=le,this._defaults=be,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=_.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new ne,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=G4(()=>{const Ee=this.autocomplete?this.autocomplete.options:null;return Ee?Ee.changes.pipe(s0(Ee),zt(()=>un(...Ee.map(ut=>ut.onSelectionChange)))):this._zone.onStable.pipe(R1(1),zt(()=>this.optionSelections))}),this._handlePanelKeydown=Ee=>{(27===Ee.keyCode&&!Ku(Ee)||38===Ee.keyCode&&Ku(Ee,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),Ee.stopPropagation(),Ee.preventDefault())},this._trackedModal=null,this._scrollStrategy=x}ngAfterViewInit(){const e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return un(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(oc(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(oc(()=>this._overlayAttached)):cn()).pipe(ue(e=>e instanceof JI?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return un(B0(this._document,"click"),B0(this._document,"auxclick"),B0(this._document,"touchend")).pipe(oc(e=>{const i=j0(e),r=this._formField?this._formField._elementRef.nativeElement:null,o=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(i))&&(!o||!o.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const i=e.keyCode,r=Ku(e);if(27===i&&!r&&e.preventDefault(),this.activeOption&&13===i&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const o=this.autocomplete._keyManager.activeItem,c=38===i||40===i;9===i||c&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):c&&this._canOpen()&&this.openPanel(),(c||this.autocomplete._keyManager.activeItem!==o)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let i=e.target,r=i.value;"number"===i.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r&&(this._previousValue=r,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(r),r||this._clearPreviousSelectedOption(null,!1),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return un(this._zone.onStable.pipe(R1(1)),this.autocomplete.options.changes.pipe(F1(()=>this._positionStrategy.reapplyLastPosition()),function uoe(t,n=mp){const i=function loe(t){return t instanceof Date&&!isNaN(+t)}(t)?+t-n.now():Math.abs(t);return r=>r.lift(new doe(i,n))}(0))).pipe(zt(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),r!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit())}),this.panelClosingActions)),R1(1)).subscribe(r=>this._setValueAndClose(r))}_emitOpened(){this._valueOnOpen=this._element.nativeElement.value,this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(e){const i=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e;this._updateNativeInputValue(i??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){const i=this.autocomplete,r=e?e.source:this._pendingAutoselectedOption;r?(this._clearPreviousSelectedOption(r),this._assignOptionValue(r.value),this._onChange(r.value),i._emitSelectEvent(r),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnOpen&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(R1(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,i){this.autocomplete?.options?.forEach(r=>{r!==e&&r.selected&&r.deselect(i)})}_attachOverlay(){let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new Ov(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&e&&e.updateSize({width:this._getPanelWidth()})})),e&&!e.hasAttached()&&(e.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new Fv({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,o=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let c;c="above"===this.position?o:"below"===this.position?i:[...i,...o],e.withPositions(c)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;if(e.autoActiveFirstOption){let i=-1;for(let r=0;r<e.options.length;r++)if(!e.options.get(r).disabled){i=r;break}e._keyManager.setActiveItem(i)}else e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){const i=this.autocomplete,r=function see(t,n,e){if(e.length){let i=n.toArray(),r=e.toArray(),o=0;for(let c=0;c<t+1;c++)i[c].group&&i[c].group===r[o]&&o++;return o}return 0}(e,i.options,i.optionGroups);if(0===e&&1===r)i._setScrollTop(0);else if(i.panel){const o=i.options.toArray()[e];if(o){const c=o._getHostElement(),x=function cee(t,n,e,i){return t<e?t:t+n>e+i?Math.max(0,t-i+n):e}(c.offsetTop,c.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(x)}}}_applyModalPanelOwnership(){const e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;const i=this.autocomplete.id;this._trackedModal&&II(this._trackedModal,"aria-owns",i),function _J(t,n,e){const i=TI(t,n);i.some(r=>r.trim()==e.trim())||(i.push(e.trim()),t.setAttribute(n,i.join(" ")))}(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){this._trackedModal&&(II(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(Hl),Et(Dc),Et(Sr),Et(E2),Et(nD),Et(E3,8),Et(t_,9),Et(ao,8),Et(yp),Et(eD,8))};static#t=this.\u0275dir=In({type:t,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[Bn]})}return t})(),j_=(()=>{class t extends Soe{constructor(){super(...arguments),this._aboveClass="mat-mdc-autocomplete-panel-above"}static#e=this.\u0275fac=function(){let e;return function(r){return(e||(e=io(t)))(r||t)}}();static#t=this.\u0275dir=In({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,r){1&i&&Ki("focusin",function(){return r._handleFocus()})("blur",function(){return r._onTouched()})("input",function(c){return r._handleInput(c)})("keydown",function(c){return r._handleKeydown(c)})("click",function(){return r._handleClick()}),2&i&&zo("autocomplete",r.autocompleteAttribute)("role",r.autocompleteDisabled?null:"combobox")("aria-autocomplete",r.autocompleteDisabled?null:"list")("aria-activedescendant",r.panelOpen&&r.activeOption?r.activeOption.id:null)("aria-expanded",r.autocompleteDisabled?null:r.panelOpen.toString())("aria-controls",r.autocompleteDisabled||!r.panelOpen||null==r.autocomplete?null:r.autocomplete.id)("aria-haspopup",r.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[Fr([woe]),Qi]})}return t})(),Eoe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[Moe],imports:[J4,pm,_o,pc,Bu,pm,_o]})}return t})();function Aoe(t,n){if(1&t&&(mn(0,"mat-option",16),Ci(1),wn()),2&t){const e=n.$implicit;_n("value",e),tn(1),Ca(" ",e.properties.title+" - Floor: "+e.properties.level," ")}}function zoe(t,n){1&t&&(mn(0,"mat-error"),Ci(1,"Please enter a valid start poi."),wn())}function Poe(t,n){if(1&t&&(mn(0,"mat-option",16),Ci(1),wn()),2&t){const e=n.$implicit;_n("value",e),tn(1),Ca(" ",e.properties.title+" - Floor: "+e.properties.level," ")}}function Ioe(t,n){1&t&&(mn(0,"mat-error"),Ci(1,"Please enter a valid destination poi."),wn())}const Toe=function(){return["fal","times"]};let Loe=(()=>{class t{constructor(e,i,r,o,c){this.sidebarService=e,this.stateService=i,this.translateService=r,this.mapService=o,this.fb=c,this.options=[],this.routeForm=this.fb.group({startPoi:[this.stateService.state.startPoi,$c.required],destinationPoi:[null,$c.required]}),this.subs=[],this.currentLanguage=this.translateService.currentLang,this.subs.push(this.sidebarService.getEndPointListener().subscribe(x=>{x&&!this.stateService.state.kioskMode&&(this.destinationPoiId=x.id,this.routeForm.get("destinationPoi").setValue(x))}),this.mapService.getMapReadyListener().subscribe(x=>{x&&(this.filteredStartPois=this.routeForm.get("startPoi").valueChanges.pipe(s0(""),ue(z=>"string"==typeof z?z:z.properties.title),ue(z=>z?this._filter(z):this.options.slice())),this.options=this.sidebarService.sortedPOIs,this.setStartPoi())}))}ngOnInit(){this.filteredDestinationPois=this.routeForm.get("destinationPoi").valueChanges.pipe(s0(""),ue(e=>"string"==typeof e?e:e.properties.title),ue(e=>e?this._filter(e):this.options.slice()))}onClose(){this.sidebarService.showRoutePicker=!1,this.startPoiId=null,this.setStartPoi()}onStartPoiSelect(e){this.startPoiId=e.option.value.id,this.setStartPoi()}setStartPoi(){this.stateService.state.kioskMode||(this.startPoi=this.sidebarService.sortedPOIs.find(e=>e.id===(this.startPoiId?this.startPoiId:this.stateService.state.startPoiId)),this.startPoi&&this.routeForm.get("startPoi").setValue(this.startPoi))}onDestinationSelect(e){const i=e.option.value;this.destinationPoiId=i.id,this.sidebarService.onSetEndPoi(i)}displayPoi(e){return e&&e.properties&&e.properties.title?`${e.properties.title} - Floor: ${e.properties.level}`:""}onSubmit(){this.sidebarService.onSetStartPoi(this.startPoi),this.sidebarService.showRoutePicker=!1}_filter(e){const i=D3(e.toLowerCase());return this.options.filter(r=>D3(r.properties.title).toLowerCase().includes(i))}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0),Et(u0),Et(Bl),Et(e6),Et(Hy))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-route-picker"]],decls:34,vars:34,consts:[[1,"container"],[1,"content"],[1,"title"],[1,"close",3,"click"],[3,"icon"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","formControlName","startPoi",3,"placeholder","matAutocomplete"],[3,"displayWith","optionSelected"],["start","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","text","formControlName","destinationPoi",3,"placeholder","matAutocomplete"],["destination","matAutocomplete"],["type","submit",3,"disabled"],["src","https://img.icons8.com/ios/50/ffffff/walking--v1.png"],[3,"value"]],template:function(i,r){if(1&i&&(mn(0,"div",0)(1,"div",1)(2,"h3",2),Ci(3),Ti(4,"translate"),wn(),mn(5,"button",3),Ki("click",function(){return r.onClose()}),Ni(6,"fa-icon",4),wn(),mn(7,"form",5),Ki("ngSubmit",function(){return r.onSubmit()}),mn(8,"mat-form-field",6)(9,"mat-label"),Ci(10),Ti(11,"translate"),wn(),Ni(12,"input",7),Ti(13,"translate"),mn(14,"mat-autocomplete",8,9),Ki("optionSelected",function(c){return r.onStartPoiSelect(c)}),ei(16,Aoe,2,2,"mat-option",10),Ti(17,"async"),wn(),ei(18,zoe,2,0,"mat-error",11),wn(),mn(19,"mat-form-field",6)(20,"mat-label"),Ci(21),Ti(22,"translate"),wn(),Ni(23,"input",12),Ti(24,"translate"),mn(25,"mat-autocomplete",8,13),Ki("optionSelected",function(c){return r.onDestinationSelect(c)}),ei(27,Poe,2,2,"mat-option",10),Ti(28,"async"),wn(),ei(29,Ioe,2,0,"mat-error",11),wn(),mn(30,"button",14),Ni(31,"img",15),Ci(32),Ti(33,"translate"),wn()()()()),2&i){const o=Ts(15),c=Ts(26);tn(3),Ca(" ",Fi(4,17,null==r.sidebarService.selectedEndPoi?null:r.sidebarService.selectedEndPoi.properties.title)," "),tn(3),_n("icon",A1(33,Toe)),tn(1),_n("formGroup",r.routeForm),tn(3),wo(Fi(11,19,"startingPoint")),tn(2),_n("placeholder",Fi(13,21,"startingPoint"))("matAutocomplete",o),tn(2),_n("displayWith",r.displayPoi),tn(2),_n("ngForOf",Fi(17,23,r.filteredStartPois)),tn(2),_n("ngIf",r.routeForm.get("startPoi").invalid),tn(3),wo(Fi(22,25,"destination")),tn(2),_n("placeholder",Fi(24,27,"destination"))("matAutocomplete",c),tn(2),_n("displayWith",r.displayPoi),tn(2),_n("ngForOf",Fi(28,29,r.filteredDestinationPois)),tn(2),_n("ngIf",r.routeForm.get("destinationPoi").invalid),tn(1),_n("disabled",r.routeForm.invalid),tn(2),Ca(" ",Fi(33,31,"takeMeThere")," ")}},dependencies:[N0,z2,H_,n_,yh,Jy,qy,tD,j_,tm,O3,k3,Wp,Xu,qu,hh,Lg,U0],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 15px #0000001a;border-radius:0 10px 10px 0;margin-bottom:1rem;position:absolute;left:0;top:110px;transition:all .25s linear;z-index:3;max-height:calc(100vh - 110px);overflow-x:hidden;overflow-y:auto;width:451px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1rem 2rem}.container[_ngcontent-%COMP%]   h3.title[_ngcontent-%COMP%]{position:relative;color:#6b50d0;transition:all .25s linear}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;display:block}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:.5rem;cursor:pointer;border:0;background-color:#6b50d0;color:#fff;text-align:center;border-radius:5px;font-weight:500;padding:.5rem;outline:0;transition:all .25s linear}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:26px;vertical-align:middle}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.7;transform:scale(1.05)}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:10px;top:10px;color:#fff;background:#6b50d0;border:0;border-radius:15px;padding:.5rem .8rem;font-size:20px;z-index:4}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background:#6144cd}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{inset:auto 0 0;position:fixed;width:100%;margin-bottom:0;border-radius:10px 10px 0 0;max-height:100%;z-index:15}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:auto}}"]})}return t})();function Doe(t,n){if(1&t&&(mn(0,"mat-option",16),Ci(1),wn()),2&t){const e=n.$implicit;_n("value",e),tn(1),Ca(" ",e.properties.title+" - Floor: "+e.properties.level," ")}}function Ooe(t,n){1&t&&(mn(0,"mat-error"),Ci(1,"Please enter a valid start poi."),wn())}function koe(t,n){if(1&t&&(mn(0,"mat-option",16),Ci(1),Ti(2,"translate"),wn()),2&t){const e=n.$implicit;_n("value",e),tn(1),Ca(" ","Closest "+Fi(2,2,e.title)," ")}}function Noe(t,n){1&t&&(mn(0,"mat-error"),Ci(1,"Please enter a valid destination poi."),wn())}const Roe=function(){return["fal","times"]};let Foe=(()=>{class t{constructor(e,i,r,o,c){this.sidebarService=e,this.stateService=i,this.translateService=r,this.mapService=o,this.fb=c,this.options=[],this.amenityOptions=nP,this.routeForm=this.fb.group({startPoi:[this.stateService.state.startPoi,$c.required],destinationPoi:[null,$c.required]}),this.subs=[],this.displayAmenity=x=>x&&x.title?`Closest ${this.translateService.instant(x.title)}`:"",this.currentLanguage=this.translateService.currentLang,this.subs.push(this.sidebarService.getAmenityToggleListener().subscribe(x=>{x&&"amenities"===x.category&&!this.stateService.state.kioskMode&&(this.destinationAmenityId=x.amenityId,this.sidebarService.showClosestAmenityPicker=!0,this.routeForm.get("destinationPoi").setValue(this.amenityOptions.find(z=>z.id===x.amenityId)))}),this.mapService.getMapReadyListener().subscribe(x=>{x&&(this.filteredPois=this.routeForm.get("startPoi").valueChanges.pipe(s0(""),ue(z=>"string"==typeof z?z:z.properties.title),ue(z=>z?this._filter(z,"pois"):this.options.slice())),this.options=this.sidebarService.sortedPOIs,this.setStartPoi())}))}ngOnInit(){this.filteredAmenities=this.routeForm.get("destinationPoi").valueChanges.pipe(s0(""),ue(e=>"string"==typeof e?e:e.title),ue(e=>e?this._filter(e,"amenities"):this.amenityOptions.slice()))}onClose(){this.sidebarService.onAmenityToggle("amenities",this.sidebarService.filteredAmenity),this.sidebarService.showClosestAmenityPicker=!1,this.sidebarService.activeListItem=null,this.startPoiId=null,this.setStartPoi(),this.sidebarService.onSetEndPoi(null)}onStartPoiSelect(e){this.startPoiId=e.option.value.id,this.setStartPoi()}setStartPoi(){if(!this.stateService.state.kioskMode){const e=this.sidebarService.sortedPOIs.find(i=>i.id===(this.startPoiId?this.startPoiId:this.stateService.state.startPoiId));e&&(this.routeForm.get("startPoi").setValue(e),this.sidebarService.onSetStartPoi(e))}}onDestinationSelect(e){this.destinationAmenityId=e.option.value.id,this.sidebarService.filteredAmenity!==this.destinationAmenityId&&(this.sidebarService.onAmenityToggle("amenities",this.destinationAmenityId),this.sidebarService.activeListItem=e.option.value)}displayPoi(e){return e&&e.properties&&e.properties.title?`${e.properties.title} - Floor: ${e.properties.level}`:""}onSubmit(){this.sidebarService.onRouteToClosestAmenity()}_filter(e,i){const r=e.toLowerCase();return"pois"===i?this.options.filter(o=>D3(o.properties.title).toLowerCase().includes(D3(r))):"amenities"===i?this.amenityOptions.filter(o=>`Closest ${this.translateService.instant(o.title)}`.toLowerCase().includes(r)):void 0}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0),Et(u0),Et(Bl),Et(e6),Et(Hy))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-closest-amenity"]],decls:34,vars:34,consts:[[1,"container"],[1,"content"],[1,"title"],[1,"close",3,"click"],[3,"icon"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","formControlName","startPoi",3,"placeholder","matAutocomplete"],[3,"displayWith","optionSelected"],["start","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","text","formControlName","destinationPoi",3,"placeholder","matAutocomplete"],["destination","matAutocomplete"],["type","submit",3,"disabled"],["src","https://img.icons8.com/ios/50/ffffff/walking--v1.png"],[3,"value"]],template:function(i,r){if(1&i&&(mn(0,"div",0)(1,"div",1)(2,"h3",2),Ci(3),Ti(4,"translate"),wn(),mn(5,"button",3),Ki("click",function(){return r.onClose()}),Ni(6,"fa-icon",4),wn(),mn(7,"form",5),Ki("ngSubmit",function(){return r.onSubmit()}),mn(8,"mat-form-field",6)(9,"mat-label"),Ci(10),Ti(11,"translate"),wn(),Ni(12,"input",7),Ti(13,"translate"),mn(14,"mat-autocomplete",8,9),Ki("optionSelected",function(c){return r.onStartPoiSelect(c)}),ei(16,Doe,2,2,"mat-option",10),Ti(17,"async"),wn(),ei(18,Ooe,2,0,"mat-error",11),wn(),mn(19,"mat-form-field",6)(20,"mat-label"),Ci(21),Ti(22,"translate"),wn(),Ni(23,"input",12),Ti(24,"translate"),mn(25,"mat-autocomplete",8,13),Ki("optionSelected",function(c){return r.onDestinationSelect(c)}),ei(27,koe,3,4,"mat-option",10),Ti(28,"async"),wn(),ei(29,Noe,2,0,"mat-error",11),wn(),mn(30,"button",14),Ni(31,"img",15),Ci(32),Ti(33,"translate"),wn()()()()),2&i){const o=Ts(15),c=Ts(26);tn(3),Ca(" ",Fi(4,17,null==r.sidebarService.activeListItem?null:r.sidebarService.activeListItem.title)," "),tn(3),_n("icon",A1(33,Roe)),tn(1),_n("formGroup",r.routeForm),tn(3),wo(Fi(11,19,"startingPoint")),tn(2),_n("placeholder",Fi(13,21,"startingPoint"))("matAutocomplete",o),tn(2),_n("displayWith",r.displayPoi),tn(2),_n("ngForOf",Fi(17,23,r.filteredPois)),tn(2),_n("ngIf",r.routeForm.get("startPoi").invalid),tn(3),wo(Fi(22,25,"destination")),tn(2),_n("placeholder",Fi(24,27,"destination"))("matAutocomplete",c),tn(2),_n("displayWith",r.displayAmenity),tn(2),_n("ngForOf",Fi(28,29,r.filteredAmenities)),tn(2),_n("ngIf",r.routeForm.get("destinationPoi").invalid),tn(1),_n("disabled",r.routeForm.invalid),tn(2),Ca(" ",Fi(33,31,"takeMeThere")," ")}},dependencies:[N0,z2,H_,n_,yh,Jy,qy,tD,j_,tm,O3,k3,Wp,Xu,qu,hh,Lg,U0],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 15px #0000001a;border-radius:0 10px 10px 0;margin-bottom:1rem;position:absolute;left:0;top:110px;transition:all .25s linear;z-index:3;max-height:calc(100vh - 110px);overflow-x:hidden;overflow-y:auto;width:451px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1rem 2rem}.container[_ngcontent-%COMP%]   h3.title[_ngcontent-%COMP%]{position:relative;color:#6b50d0;transition:all .25s linear}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;display:block}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:.5rem;cursor:pointer;border:0;background-color:#6b50d0;color:#fff;text-align:center;border-radius:5px;font-weight:500;padding:.5rem;outline:0;transition:all .25s linear}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:26px;vertical-align:middle}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.7;transform:scale(1.05)}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:10px;top:10px;color:#fff;background:#6b50d0;border:0;border-radius:15px;padding:.5rem .8rem;font-size:20px;z-index:4}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background:#6144cd}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{inset:auto 0 0;position:fixed;width:100%;margin-bottom:0;border-radius:10px 10px 0 0;max-height:100%;z-index:15}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:auto}}"]})}return t})();const Voe=function(t,n){return{open:t,haveRoute:n}},iD=function(t){return{open:t}},rD=function(){return["fal","chevron-double-left"]},oD=function(){return["fal","chevron-double-right"]};let Hoe=(()=>{class t{constructor(e,i){this.sidebarService=e,this.mapService=i,this.filtersOpened=!0}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||t)(Et(d0),Et(e6))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-sidebar"]],decls:25,vars:21,consts:[[1,"container",3,"ngClass"],[1,"menu-section"],[3,"ngClass"],[1,"filters",3,"hidden","ngClass"],[1,"inner"],[1,"toggle",3,"click"],[3,"icon"],[3,"hidden"]],template:function(i,r){1&i&&(mn(0,"main",0)(1,"nav"),Ni(2,"app-search"),mn(3,"div",1),Ni(4,"app-floor-picker",2),wn(),mn(5,"div",3)(6,"div",4),Ni(7,"app-shop-picker")(8,"app-amenity-picker"),mn(9,"div",5),Ki("click",function(){return r.filtersOpened=!r.filtersOpened}),Ni(10,"fa-icon",6),wn()()(),mn(11,"div",5),Ki("click",function(){return r.filtersOpened=!r.filtersOpened}),Ni(12,"fa-icon",6),wn()(),l2(13),mn(14,"nav",7),Ni(15,"app-details"),wn(),u2(),l2(16),mn(17,"nav",7),Ni(18,"app-list-view"),wn(),u2(),l2(19),mn(20,"nav",7),Ni(21,"app-closest-amenity"),wn(),u2(),l2(22),mn(23,"nav",7),Ni(24,"app-route-picker"),wn(),u2(),wn()),2&i&&(_n("ngClass",f5(10,Voe,r.filtersOpened,r.mapService.showingRoute)),tn(4),_n("ngClass",gl(13,iD,r.filtersOpened)),tn(1),_n("hidden",r.sidebarService.selectedEndPoi||r.sidebarService.filteredShop||r.sidebarService.showRoutePicker||r.sidebarService.showClosestAmenityPicker||r.mapService.showingRoute)("ngClass",gl(15,iD,r.filtersOpened)),tn(5),_n("icon",r.filtersOpened?A1(17,rD):A1(18,oD)),tn(2),_n("icon",r.filtersOpened?A1(19,rD):A1(20,oD)),tn(2),_n("hidden",!r.mapService.showingRoute&&!r.sidebarService.selectedEndPoi||r.sidebarService.showRoutePicker),tn(3),_n("hidden",!r.sidebarService.filteredShop||r.sidebarService.selectedEndPoi),tn(3),_n("hidden",!r.sidebarService.showClosestAmenityPicker),tn(3),_n("hidden",!r.sidebarService.showRoutePicker))},dependencies:[B4,Xu,Vq,Uq,Xq,Jee,Qre,toe,Loe,Foe],styles:[".container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:calc(50% - 20px);font-size:26px;color:#6b50d0;padding:.5rem;cursor:pointer}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:hover{color:#6144cd}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%] > .toggle[_ngcontent-%COMP%]{display:none}.filters[_ngcontent-%COMP%]{padding:1rem 4rem 1rem 2rem;background-color:#ffffffe6;box-shadow:0 0 15px #0000001a;border-radius:0 10px 10px 0;margin-bottom:1rem;position:absolute;left:0;top:110px;transition:all .25s linear;min-height:143px;z-index:2;width:355px}.filters[_ngcontent-%COMP%]:not(.open){left:-400px}.menu-dropdown[_ngcontent-%COMP%]{display:none;position:absolute;right:.5rem;top:210px;gap:5px}.menu-dropdown[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{background:black;font-size:16px;line-height:35px;color:#fff}.brand[_ngcontent-%COMP%]{position:fixed;top:0;right:100px;width:180px;z-index:1}.brand[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}@media only screen and (max-width: 959.98px){.container[_ngcontent-%COMP%]{position:fixed;padding:1.5rem;border-radius:0 0 10px 10px;margin-bottom:1rem;left:0;top:0;right:0;min-height:70px;z-index:1;width:auto;background-color:#ffffffe6;box-shadow:0 0 15px #0000001a}.container[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%] > .toggle[_ngcontent-%COMP%]{display:block;top:auto;bottom:0rem;right:calc(50% - 18px);padding:.5rem;transform:rotate(-90deg);font-size:18px}.container[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{overflow:auto;white-space:nowrap;margin-bottom:1.5rem;-ms-overflow-style:none;scrollbar-width:none}.container[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:3px;background:#ccc}.container[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#bd52ff}.container[_ngcontent-%COMP%]     app-floor-picker:not(.open) .container{top:105px}.container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:none;top:188px;right:calc(50% - 155px)}.container[_ngcontent-%COMP%]:not(.open){padding-bottom:0}.container[_ngcontent-%COMP%]:not(.open)   .menu-dropdown[_ngcontent-%COMP%]{top:110px}.container[_ngcontent-%COMP%]:not(.open)   .brand[_ngcontent-%COMP%]{top:94px}.container.haveRoute[_ngcontent-%COMP%]{padding:0;min-height:0}.container.haveRoute[_ngcontent-%COMP%]   app-search[_ngcontent-%COMP%], .container.haveRoute[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%], .container.haveRoute[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{display:none!important}.container.haveRoute[_ngcontent-%COMP%]     app-floor-picker{display:none}.container.haveRoute[_ngcontent-%COMP%]     app-floor-picker .container{top:20px}.filters[_ngcontent-%COMP%]{position:static;background:none;box-shadow:none;border-radius:0;min-height:auto;width:auto;padding:0;display:block!important}.filters[_ngcontent-%COMP%]:not(.open)   app-shop-picker[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]:not(.open)   app-amenity-picker[_ngcontent-%COMP%]{display:none}.filters[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{display:none}}"]})}return t})();var aD=w(53094),Boe=w(15624);function joe(t,n){}class zm{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let sD=(()=>{class t extends kv{constructor(e,i,r,o,c,x,z,O){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=c,this._ngZone=x,this._overlayRef=z,this._focusMonitor=O,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=J=>{this._portalOutlet.hasAttached();const le=this._portalOutlet.attachDomPortal(J);return this._contentAttached(),le},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let i=null;if("string"==typeof e?i=this._document.querySelector(e):"boolean"==typeof e?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=vp(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=vp();return e===i||e.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=vp())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(Xy),Et(ao,8),Et(zm),Et(lm),Et(Sr),Et(Gd),Et(F3))};static#t=this.\u0275cmp=ar({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&ds(Nv,7),2&i){let o;mr(o=gr())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&zo("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Qi],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&ei(0,joe,0,0,"ng-template",0)},dependencies:[Nv],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})();class U_{constructor(n,e){this.overlayRef=n,this.config=e,this.closed=new ne,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Ku(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(n,e){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(n),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}}const cD=new Gn("DialogScrollStrategy"),Uoe=new Gn("DialogData"),Goe=new Gn("DefaultDialogConfig"),Yoe={provide:cD,deps:[Hl],useFactory:function Woe(t){return()=>t.scrollStrategies.block()}};let Xoe=0,lD=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,r,o,c,x){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ne,this._afterOpenedAtThisLevel=new ne,this._ariaHiddenElements=new Map,this.afterAllClosed=G4(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(s0(void 0))),this._scrollStrategy=x}open(e,i){(i={...this._defaultOptions||new zm,...i}).id=i.id||"cdk-dialog-"+Xoe++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),c=this._overlay.create(o),x=new U_(c,i),z=this._attachContainer(c,x,i);return x.containerInstance=z,this._attachDialogContent(e,x,z,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(x),x.closed.subscribe(()=>this._removeOpenDialog(x,!0)),this.afterOpened.next(x),x}closeAll(){G_(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){G_(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),G_(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const i=new Fv({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){const o=r.injector||r.viewContainerRef?.injector,c=[{provide:zm,useValue:r},{provide:U_,useValue:i},{provide:Gd,useValue:e}];let x;r.container?"function"==typeof r.container?x=r.container:(x=r.container.type,c.push(...r.container.providers(r))):x=sD;const z=new Dv(x,r.viewContainerRef,hc.create({parent:o||this._injector,providers:c}),r.componentFactoryResolver);return e.attach(z).instance}_attachDialogContent(e,i,r,o){if(e instanceof Co){const c=this._createInjector(o,i,r,void 0);let x={$implicit:o.data,dialogRef:i};o.templateContext&&(x={...x,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new Ov(e,null,x,c))}else{const c=this._createInjector(o,i,r,this._injector),x=r.attachComponentPortal(new Dv(e,o.viewContainerRef,c,o.componentFactoryResolver));i.componentRef=x,i.componentInstance=x.instance}}_createInjector(e,i,r,o){const c=e.injector||e.viewContainerRef?.injector,x=[{provide:Uoe,useValue:e.data},{provide:U_,useValue:i}];return e.providers&&("function"==typeof e.providers?x.push(...e.providers(i,e,r)):x.push(...e.providers)),e.direction&&(!c||!c.get(E3,null,{optional:!0}))&&x.push({provide:E3,useValue:{value:e.direction,change:cn()}}),hc.create({parent:c||o,providers:x})}_removeOpenDialog(e,i){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,c)=>{o?c.setAttribute("aria-hidden",o):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Hl),Sn(hc),Sn(Goe,8),Sn(t,12),Sn(Ud),Sn(cD))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();function G_(t,n){let e=t.length;for(;e--;)n(t[e])}let Zoe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[lD,Yoe],imports:[J4,A3,BI,A3]})}return t})();function $oe(t,n){}class Pm{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const W_="mdc-dialog--open",uD="mdc-dialog--opening",dD="mdc-dialog--closing";let Qoe=(()=>{class t extends sD{constructor(e,i,r,o,c,x,z,O){super(e,i,r,o,c,x,z,O),this._animationStateChanged=new Cr}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(Xy),Et(ao,8),Et(Pm),Et(lm),Et(Sr),Et(Gd),Et(F3))};static#t=this.\u0275cmp=ar({type:t,selectors:[["ng-component"]],features:[Qi],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return t})();const hD="--mat-dialog-transition-duration";function fD(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?Hu(t.substring(0,t.length-2)):t.endsWith("s")?1e3*Hu(t.substring(0,t.length-1)):"0"===t?0:null}let Joe=(()=>{class t extends Qoe{constructor(e,i,r,o,c,x,z,O,J){super(e,i,r,o,c,x,z,J),this._animationMode=O,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?fD(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?fD(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(hD,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(uD,W_)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(W_),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(W_),this._animationsEnabled?(this._hostElement.style.setProperty(hD,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(dD)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(uD,dD)}_waitForAnimationToComplete(e,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(Xy),Et(ao,8),Et(Pm),Et(lm),Et(Sr),Et(Gd),Et(B2,8),Et(F3))};static#t=this.\u0275cmp=ar({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(i,r){2&i&&(kl("id",r._config.id),zo("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),go("_mat-animation-noopable",!r._animationsEnabled))},features:[Qi],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(mn(0,"div",0)(1,"div",1),ei(2,$oe,0,0,"ng-template",2),wn()())},dependencies:[Nv],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return t})();class Im{constructor(n,e,i){this._ref=n,this._containerInstance=i,this._afterOpened=new ne,this._beforeClosed=new ne,this._state=0,this.disableClose=e.disableClose,this.id=n.id,i._animationStateChanged.pipe(oc(r=>"opened"===r.state),R1(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(oc(r=>"closed"===r.state),R1(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),un(this.backdropClick(),this.keydownEvents().pipe(oc(r=>27===r.keyCode&&!this.disableClose&&!Ku(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),pD(this,"keydown"===r.type?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(oc(e=>"closing"===e.state),R1(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function pD(t,n,e){return t._closeInteractionType=n,t.close(e)}const eae=new Gn("MatMdcDialogData"),tae=new Gn("mat-mdc-dialog-default-options"),mD=new Gn("mat-mdc-dialog-scroll-strategy"),iae={provide:mD,deps:[Hl],useFactory:function nae(t){return()=>t.scrollStrategies.block()}};let rae=0,oae=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,r,o,c,x,z,O,J,le){this._overlay=e,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=z,this._dialogContainerType=O,this._dialogDataToken=J,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ne,this._afterOpenedAtThisLevel=new ne,this._idPrefix="mat-dialog-",this.dialogConfigClass=Pm,this.afterAllClosed=G4(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(s0(void 0))),this._scrollStrategy=x,this._dialog=i.get(lD)}open(e,i){let r;(i={...this._defaultOptions||new Pm,...i}).id=i.id||`${this._idPrefix}${rae++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(e,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:zm,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(c,x,z)=>(r=new this._dialogRefConstructor(c,i,z),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:z},{provide:this._dialogDataToken,useValue:x.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const c=this.openDialogs.indexOf(r);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static#e=this.\u0275fac=function(i){j6()};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),Tm=(()=>{class t extends oae{constructor(e,i,r,o,c,x,z,O){super(e,i,o,x,z,c,Im,Joe,eae,O),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Hl),Sn(hc),Sn(vd,8),Sn(tae,8),Sn(mD),Sn(t,12),Sn(Ud),Sn(B2,8))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),aae=0,sae=(()=>{class t{constructor(e,i,r){this.dialogRef=e,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=gD(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){pD(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Im,8),Et(zr),Et(Tm))};static#t=this.\u0275dir=In({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,r){1&i&&Ki("click",function(c){return r._onButtonClick(c)}),2&i&&zo("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Bn]})}return t})(),cae=(()=>{class t{constructor(e,i,r){this._dialogRef=e,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+aae++}ngOnInit(){this._dialogRef||(this._dialogRef=gD(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const e=this._dialogRef?._containerInstance?._ariaLabelledByQueue;e&&Promise.resolve().then(()=>{const i=e.indexOf(this.id);i>-1&&e.splice(i,1)})}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Im,8),Et(zr),Et(Tm))};static#t=this.\u0275dir=In({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&kl("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]})}return t})(),lae=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]})}return t})(),uae=(()=>{class t{constructor(){this.align="start"}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=In({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(i,r){2&i&&go("mat-mdc-dialog-actions-align-center","center"===r.align)("mat-mdc-dialog-actions-align-end","end"===r.align)},inputs:{align:"align"}})}return t})();function gD(t,n){let e=t.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?n.find(i=>i.id===e.id):null}let dae=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[Tm,iae],imports:[Zoe,J4,A3,_o,_o]})}return t})();const hae=["mat-button",""],fae=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],pae=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],mae=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],gae=$y(GI(dm(class{constructor(t){this._elementRef=t}})));let vae=(()=>{class t extends gae{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=_a(e),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=_a(e),this._updateRippleDisabled()}constructor(e,i,r,o){super(e),this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=li(F3),this._rippleLoader=li(lee),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const c=e.nativeElement.classList;for(const x of mae)this._hasHostAttributes(x.selector)&&x.mdcClasses.forEach(z=>{c.add(z)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...e){return e.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(i){j6()};static#t=this.\u0275dir=In({type:t,features:[Qi]})}return t})(),_ae=(()=>{class t extends vae{constructor(e,i,r,o){super(e,i,r,o)}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(gc),Et(Sr),Et(B2,8))};static#t=this.\u0275cmp=ar({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(i,r){2&i&&(zo("disabled",r.disabled||null),go("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Qi],attrs:hae,ngContentSelectors:pae,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){1&i&&(Lc(fae),Ni(0,"span",0),Oo(1),mn(2,"span",1),Oo(3,1),wn(),Oo(4,2),Ni(5,"span",2)(6,"span",3)),2&i&&go("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return t})(),Y_=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,V3,_o]})}return t})();function xae(t,n){1&t&&(mn(0,"mat-error"),Ci(1),Ti(2,"translate"),Ti(3,"translate"),wn()),2&t&&(tn(1),Q2("",Fi(2,2,"enterValid")," ",Fi(3,4,"latitude"),"."))}function wae(t,n){1&t&&(mn(0,"mat-error"),Ci(1),Ti(2,"translate"),Ti(3,"translate"),wn()),2&t&&(tn(1),Q2("",Fi(2,2,"enterValid")," ",Fi(3,4,"longitude"),"."))}function Cae(t,n){1&t&&(mn(0,"mat-error"),Ci(1),Ti(2,"translate"),Ti(3,"translate"),wn()),2&t&&(tn(1),Q2("",Fi(2,2,"enterValid")," ",Fi(3,4,"level"),"."))}function Mae(t,n){1&t&&(mn(0,"mat-error"),Ci(1),Ti(2,"translate"),Ti(3,"translate"),wn()),2&t&&(tn(1),Q2("",Fi(2,2,"enterValid")," ",Fi(3,4,"zoom"),"."))}function Sae(t,n){1&t&&(mn(0,"mat-error"),Ci(1),Ti(2,"translate"),Ti(3,"translate"),wn()),2&t&&(tn(1),Q2("",Fi(2,2,"enterValid")," ",Fi(3,4,"bearing"),"."))}function Eae(t,n){1&t&&(mn(0,"mat-error"),Ci(1),Ti(2,"translate"),Ti(3,"translate"),wn()),2&t&&(tn(1),Q2("",Fi(2,2,"enterValid")," ",Fi(3,4,"pitch"),"."))}let Aae=(()=>{class t{constructor(e,i,r){this.dialogRef=e,this.fb=i,this.stateService=r,this.settingsForm=this.fb.group({latitude:[this.stateService.state.defaultLocation.coordinates[1],$c.required],longitude:[this.stateService.state.defaultLocation.coordinates[0],$c.required],level:[this.stateService.state.defaultLocation.level,$c.required],zoom:[this.stateService.state.options.zoom,[$c.required,$c.min(0),$c.max(24)]],bearing:[this.stateService.state.options.bearing,[$c.required,$c.min(-180),$c.max(180)]],pitch:[this.stateService.state.options.pitch,[$c.required,$c.min(0),$c.max(85)]]}),this.onChange=o=>{this.settingsForm.controls[this.activeField].setValue(o)},this.stateService.state.kioskMode&&!this.keyboard?.initialized&&(this.keyboard=new(iP())({layout:{default:["- 1 2 3 4 5 6 7 8 9 0 {bksp}"]},theme:"hg-theme-default hg-layout-numeric numeric-theme",preventMouseDownDefault:!0,onChange:o=>this.onChange(o)})),e.beforeClosed().subscribe(()=>{this.stateService.state.kioskMode&&this.keyboard.destroy()})}onFieldSelect(e){this.activeField=e,this.stateService.state.kioskMode&&this.keyboard?.initialized&&this.keyboard.setInput(this.settingsForm.value[this.activeField])}onCancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Im),Et(Hy),Et(u0))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-settings-dialog"]],decls:54,vars:54,consts:[["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content",""],["appearance","outline"],["matInput","","type","number","formControlName","latitude",3,"placeholder","click"],[4,"ngIf"],["matInput","","type","number","formControlName","longitude",3,"placeholder","click"],["matInput","","type","number","formControlName","level",3,"placeholder","click"],["matInput","","type","number","formControlName","zoom",3,"placeholder","click"],["matInput","","type","number","formControlName","bearing",3,"placeholder","click"],["matInput","","type","number","formControlName","pitch",3,"placeholder","click"],["mat-dialog-actions",""],["mat-button","","color","warn",1,"cancel",3,"click"],["type","submit","mat-button","","cdkFocusInitial","","color","primary",1,"submit",3,"disabled","mat-dialog-close"]],template:function(i,r){1&i&&(mn(0,"h1",0),Ci(1),Ti(2,"translate"),wn(),mn(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),Ci(7),Ti(8,"translate"),wn(),mn(9,"input",4),Ki("click",function(){return r.onFieldSelect("latitude")}),Ti(10,"translate"),wn(),ei(11,xae,4,6,"mat-error",5),wn(),mn(12,"mat-form-field",3)(13,"mat-label"),Ci(14),Ti(15,"translate"),wn(),mn(16,"input",6),Ki("click",function(){return r.onFieldSelect("longitude")}),Ti(17,"translate"),wn(),ei(18,wae,4,6,"mat-error",5),wn(),mn(19,"mat-form-field",3)(20,"mat-label"),Ci(21),Ti(22,"translate"),wn(),mn(23,"input",7),Ki("click",function(){return r.onFieldSelect("level")}),Ti(24,"translate"),wn(),ei(25,Cae,4,6,"mat-error",5),wn(),mn(26,"mat-form-field",3)(27,"mat-label"),Ci(28),Ti(29,"translate"),wn(),mn(30,"input",8),Ki("click",function(){return r.onFieldSelect("zoom")}),Ti(31,"translate"),wn(),ei(32,Mae,4,6,"mat-error",5),wn(),mn(33,"mat-form-field",3)(34,"mat-label"),Ci(35),Ti(36,"translate"),wn(),mn(37,"input",9),Ki("click",function(){return r.onFieldSelect("bearing")}),Ti(38,"translate"),wn(),ei(39,Sae,4,6,"mat-error",5),wn(),mn(40,"mat-form-field",3)(41,"mat-label"),Ci(42),Ti(43,"translate"),wn(),mn(44,"input",10),Ki("click",function(){return r.onFieldSelect("pitch")}),Ti(45,"translate"),wn(),ei(46,Eae,4,6,"mat-error",5),wn()(),mn(47,"div",11)(48,"button",12),Ki("click",function(){return r.onCancel()}),Ci(49),Ti(50,"translate"),wn(),mn(51,"button",13),Ci(52),Ti(53,"translate"),wn()()()),2&i&&(tn(1),wo(Fi(2,24,"kioskSettings")),tn(2),_n("formGroup",r.settingsForm),tn(4),wo(Fi(8,26,"latitude")),tn(2),_n("placeholder",Fi(10,28,"latitude")),tn(2),_n("ngIf",r.settingsForm.get("latitude").invalid),tn(3),wo(Fi(15,30,"longitude")),tn(2),_n("placeholder",Fi(17,32,"longitude")),tn(2),_n("ngIf",r.settingsForm.get("longitude").invalid),tn(3),wo(Fi(22,34,"level")),tn(2),_n("placeholder",Fi(24,36,"level")),tn(2),_n("ngIf",r.settingsForm.get("level").invalid),tn(3),wo(Fi(29,38,"zoom")),tn(2),_n("placeholder",Fi(31,40,"zoom")),tn(2),_n("ngIf",r.settingsForm.get("zoom").invalid),tn(3),wo(Fi(36,42,"bearing")),tn(2),_n("placeholder",Fi(38,44,"bearing")),tn(2),_n("ngIf",r.settingsForm.get("bearing").invalid),tn(3),wo(Fi(43,46,"pitch")),tn(2),_n("placeholder",Fi(45,48,"pitch")),tn(2),_n("ngIf",r.settingsForm.get("pitch").invalid),tn(3),Ca(" ",Fi(50,50,"cancel")," "),tn(2),_n("disabled",!r.settingsForm.valid)("mat-dialog-close",r.settingsForm.value),tn(1),Ca(" ",Fi(53,52,"submit")," "))},dependencies:[z2,_ae,H_,n_,yh,Jy,sae,cae,lae,uae,tm,O3,Ly,k3,Wp,qu,hh,U0],styles:["pre[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(0,0,0,.05);border-radius:4px;white-space:pre-wrap}.mat-mdc-dialog-title[_ngcontent-%COMP%], .mat-mdc-dialog-content[_ngcontent-%COMP%]{text-align:center}.mat-mdc-dialog-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-mdc-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}.mat-mdc-dialog-title[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .mat-mdc-dialog-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}button.mat-mdc-button[_ngcontent-%COMP%]{border-radius:50px;padding:.5rem 2rem;margin:0 auto 1rem}button.mat-mdc-button.cancel[_ngcontent-%COMP%]{margin-left:0}button.mat-mdc-button.submit[_ngcontent-%COMP%]{margin-right:0}  .mat-mdc-dialog-container{background-color:#fff!important;color:#444!important}"]})}return t})();const zae=["determinateSpinner"];function Pae(t,n){if(1&t&&(l4(),mn(0,"svg",11),Ni(1,"circle",12),wn()),2&t){const e=di();zo("viewBox",e._viewBox()),tn(1),T0("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),zo("r",e._circleRadius())}}const Iae=$y(class{constructor(t){this._elementRef=t}},"primary"),Tae=new Gn("mat-progress-spinner-default-options",{providedIn:"root",factory:function Lae(){return{diameter:yD}}}),yD=100;let Oae=(()=>{class t extends Iae{constructor(e,i,r){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=yD,this._noopAnimations="NoopAnimations"===i&&!!r&&!r._forceAnimations,r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Hu(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=Hu(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=Hu(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static#e=this.\u0275fac=function(i){return new(i||t)(Et(zr),Et(B2,8),Et(Tae))};static#t=this.\u0275cmp=ar({type:t,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,r){if(1&i&&ds(zae,5),2&i){let o;mr(o=gr())&&(r._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:16,hostBindings:function(i,r){2&i&&(zo("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===r.mode?r.value:null)("mode",r.mode),T0("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),go("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===r.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Qi],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,r){if(1&i&&(ei(0,Pae,2,8,"ng-template",null,0,J2),mn(2,"div",1,2),l4(),mn(4,"svg",3),Ni(5,"circle",4),wn()(),function r8(){!function c7(){er.lFrame.currentNamespace=null}()}(),mn(6,"div",5)(7,"div",6)(8,"div",7),C2(9,8),wn(),mn(10,"div",9),C2(11,8),wn(),mn(12,"div",10),C2(13,8),wn()()()),2&i){const o=Ts(1);tn(4),zo("viewBox",r._viewBox()),tn(1),T0("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),zo("r",r._circleRadius()),tn(4),_n("ngTemplateOutlet",o),tn(2),_n("ngTemplateOutlet",o),tn(2),_n("ngTemplateOutlet",o)}},dependencies:[s3],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{--mdc-circular-progress-active-indicator-width:4px;--mdc-circular-progress-size:48px}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0})}return t})(),kae=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[pc,_o]})}return t})();function Nae(t,n){1&t&&(mn(0,"main",4),Ni(1,"mat-spinner",5),mn(2,"h1"),Ci(3),Ti(4,"translate"),wn()()),2&t&&(tn(3),wo(Fi(4,1,"welcomeMessage")))}let _D=(()=>{class t{constructor(e,i,r,o,c,x){this.mapService=e,this.sidebarService=i,this.stateService=r,this.dialog=o,this.breakpointObserver=c,this.translateService=x,this.mapLoaded=!1,this.startFromUrl=!1,this.destinationFromUrl=!1,this.mapPadding={top:250,bottom:250,left:500,right:250},this.wayfindingConfig={avoidElevators:!0,avoidEscalators:!1,avoidStaircases:!1,avoidRamps:!1,avoidNarrowPaths:!1,avoidRevolvingDoors:!1,avoidTicketGates:!1,avoidBarriers:!1,avoidHills:!1},this.subs=[];const z=new URLSearchParams(window.location.search);this.startParam=z.get("startFeature"),this.destinationParam=z.get("destinationFeature"),this.placeParam=z.get("defaultPlace"),this.startParam&&(this.startFromUrl=!0),this.destinationParam&&(this.destinationFromUrl=!0),this.placeParam&&(this.stateService.state.defaultPlaceId=this.placeParam),this.kiosk=this.stateService.state.kiosks.find(O=>O.name===z.get("kiosk")),this.subs.push(this.sidebarService.getStartPointListener().subscribe(O=>{this.mapLoaded&&this.map.getMapboxInstance().resize(),O?this.setStartPoi(O):this.startPoiId=this.stateService.state.startPoiId}),this.sidebarService.getEndPointListener().subscribe(O=>{this.endPoi=O,this.map&&(O&&!this.destinationFromUrl?(this.map.getMapboxInstance().flyTo({center:O.geometry.coordinates,zoom:19}),this.map.setFloorByLevel(O.properties.level),this.map.handlePolygonSelection(O)):O||this.map.cancelRoute())}),this.sidebarService.getFloorChangeListener().subscribe(O=>{O.id?this.map.setFloorById(O.id):this.map.setFloorByWay(O)}),this.sidebarService.getAccessibleOnlyToggleListener().subscribe(()=>{const O=this.endPoi?this.endPoi:this.stateService.state.textNavigation.destination;O&&!this.routeCache&&this.findRoute(O.id,this.stateService.state.kioskMode?null:this.startPoiId)}),this.sidebarService.getAmenityToggleListener().subscribe(O=>{O&&("shop"===O.category&&!this.sidebarService.filteredShop||"amenities"===O.category&&!this.sidebarService.filteredAmenity?(this.map.removeAmenityFilter(O.amenityId,O.category),"amenities"===O.category&&(this.map.cancelRoute(),this.onMyLocation())):(this.map.setAmenityFilter(O.amenityId,O.category),"amenities"===O.category&&this.stateService.state.kioskMode&&this.map.findRouteToNearestFeature(O.amenityId)))}),this.mapService.getShowRouteListener().subscribe(()=>{this.onShowRoute()}),this.mapService.getResetViewListener().subscribe(()=>{this.onResetView()}),this.sidebarService.getCenterToFeatureListener().subscribe(O=>{this.map&&this.map.centerToFeature(O.id)}),this.sidebarService.getRouteToClosestAmenityListener().subscribe(()=>{this.map&&this.findRoute(this.sidebarService.activeListItem.id,this.startPoiId,"amenity")}),this.sidebarService.getStepChangeListener().subscribe(O=>{this.map&&this.map.setNavStep(O)})),this.breakpointObserver.observe(["(max-width: 599.98px)"]).subscribe(O=>{O.matches?(this.mapPadding={top:0,bottom:100,left:0,right:0},this.map&&this.map.setBoundsPadding(this.mapPadding)):(this.mapPadding={top:250,bottom:250,left:450,right:250},this.map&&this.map.setBoundsPadding(this.mapPadding))})}ngOnInit(){aD.Z.Auth.loginWithToken(Ev.token).then(()=>{this.map=new aD.Z.Map({mapboxOptions:{zoom:this.stateService.state.options.zoom,pitch:this.stateService.state.options.pitch,bearing:this.stateService.state.options.bearing},defaultPlaceId:this.stateService.state.defaultPlaceId,isKiosk:this.stateService.state.kioskMode,kioskSettings:{coordinates:this.stateService.state.defaultLocation.coordinates,level:this.stateService.state.defaultLocation.level},fitBoundsPadding:this.mapPadding,handleUrlParams:!0,language:this.translateService.currentLang,showLevelDirectionIcon:!0,initPolygons:!0,animatedRoute:!0,blockFeatureClickWhileRouting:!0}),this.map.getMapReadyListener().subscribe(e=>{if(this.mapService.mapReadyListener.next(!0),this.mapLoaded=!0,this.mapService.mapReady=!0,this.map.getMapboxInstance().addControl(new Boe.NavigationControl({showZoom:!1})),this.kiosk){const i=this.kiosk.poiId?this.stateService.state.allFeatures.features.find(r=>r.id===this.kiosk.poiId):null;this.stateService.state.options.bearing=this.kiosk.bearing,this.stateService.state.options.pitch=this.kiosk.pitch,this.stateService.state.defaultLocation.coordinates=i?i.geometry.coordinates:[this.kiosk.longitude,this.kiosk.latitude],this.stateService.state.defaultLocation.level=i?i.properties.level:this.kiosk.level,this.kiosk.bounds&&this.map.getMapboxInstance().setMaxBounds(this.kiosk.bounds),this.map.setKiosk(this.stateService.state.defaultLocation.coordinates[1],this.stateService.state.defaultLocation.coordinates[0],this.stateService.state.defaultLocation.level)}if(this.destinationFromUrl){const i=this.placeParam?this.stateService.state.places.find(o=>o.id===this.placeParam||o.name===this.placeParam):this.stateService.state.place,r=this.stateService.state.allFeatures.features.find(o=>o.properties.title&&o.properties.place_id===i.id&&(o.id===this.destinationParam||o.properties.id===this.destinationParam||o.properties.title===this.destinationParam));this.sidebarService.onSetEndPoi(r),this.map.handlePolygonSelection(r)}if(this.startFromUrl){const i=this.stateService.state.allFeatures.features.find(r=>r.id===this.startParam||r.properties.id===this.startParam||r.properties.title===this.startParam);this.sidebarService.onSetStartPoi(i)}}),this.map.getRouteFoundListener().subscribe(e=>{this.stateService.state={...this.stateService.state,textNavigation:e.TBTNav,routeDetails:e.details},this.mapService.routeFoundListener.next(!0),this.destinationFromUrl&&(this.sidebarService.onSetEndPoi(e.end),setTimeout(()=>{this.map.centerToRoute()},1e3),this.destinationFromUrl=!1),this.routeCache=null}),this.map.getRouteFailedListener().subscribe(e=>{this.routeCache&&(this.sidebarService.onAccessibleRouteToggle(),this.findRoute(this.routeCache.destination,this.routeCache.start,this.routeCache.type)),this.routeCache=null}),this.map.getPolygonClickListener().subscribe(e=>{this.map.state.textNavigation&&this.map.cancelRoute(),this.sidebarService.onSetEndPoi(e)}),this.map.getNavStepSetListener().subscribe(e=>{this.sidebarService.stepChangeListener.next(e)}),this.map.getPlaceSelectListener().subscribe(e=>{const i=this.map.state;this.stateService.state={...this.stateService.state,places:i.places,place:i.place,floors:i.floors,floor:i.floor,allFeatures:i.allFeatures,amenities:i.amenities}}),this.map.getFloorSelectListener().subscribe(e=>{const i=this.map.state;this.stateService.state={...this.stateService.state,places:i.places,place:i.place,floors:i.floors,floor:i.floor,allFeatures:i.allFeatures,amenities:i.amenities}})})}setStartPoi(e){if(!this.stateService.state.kioskMode){const i=e;this.startPoiId=e.id,this.map.getMapboxInstance().flyTo({center:i.geometry.coordinates,bearing:this.stateService.state.options.bearing,pitch:this.stateService.state.options.pitch,zoom:this.stateService.state.options.zoom}),this.map.setFloorByLevel(i.properties.level),this.endPoi&&this.findRoute(this.endPoi.id,this.startPoiId)}}onMyLocation(){this.map&&(this.map.getMapboxInstance().flyTo({center:this.stateService.state.defaultLocation.coordinates,bearing:this.stateService.state.options.bearing,pitch:this.stateService.state.options.pitch,zoom:this.stateService.state.options.zoom}),this.map.setFloorByLevel(this.stateService.state.defaultLocation.level))}onSettings(){this.dialog.open(Aae,{width:"420px"}).afterClosed().subscribe(i=>{i&&this.map&&(this.stateService.state.options={zoom:i.zoom,bearing:i.bearing,pitch:i.pitch},this.stateService.state.defaultLocation={coordinates:[i.longitude,i.latitude],level:i.level},this.map.getMapboxInstance().flyTo({center:[i.longitude,i.latitude],bearing:i.bearing,pitch:i.pitch,zoom:i.zoom}),this.map.setKiosk(i.latitude,i.longitude,i.level))})}onShowRoute(){this.map&&this.findRoute(this.endPoi.id,this.stateService.state.kioskMode?null:this.startPoiId)}findRoute(e,i,r){this.routeCache={...this.routeCache,destination:e,start:i,type:r};const o={...this.wayfindingConfig,avoidElevators:!this.stateService.state.accessibleRoute,avoidRamps:!this.stateService.state.accessibleRoute,avoidEscalators:!!this.stateService.state.accessibleRoute,avoidStaircases:!!this.stateService.state.accessibleRoute,avoidBarriers:!!this.stateService.state.accessibleRoute,avoidNarrowPaths:!!this.stateService.state.accessibleRoute,avoidRevolvingDoors:!!this.stateService.state.accessibleRoute,avoidTicketGates:!!this.stateService.state.accessibleRoute};"amenity"!==r?this.map.findRouteByIds(e,i,this.stateService.state.accessibleRoute,o):this.map.findRouteToNearestFeature(e,i,this.stateService.state.accessibleRoute,o)}onResetView(){this.map&&(this.sidebarService.onSetEndPoi(null),this.sidebarService.filteredAmenity&&(this.sidebarService.onAmenityToggle("amenities",this.sidebarService.filteredAmenity),this.sidebarService.showClosestAmenityPicker=!1,this.sidebarService.activeListItem=null),this.map.refetch())}hideAmenityFeatures(){}ngOnDestroy(){this.subs.forEach(e=>e.unsubscribe())}static#e=this.\u0275fac=function(i){return new(i||t)(Et(e6),Et(d0),Et(u0),Et(Tm),Et(AI),Et(Bl))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-map"]],decls:5,vars:1,consts:[["aria-label","My Location","title","My Location",1,"my-location",3,"click"],["aria-hidden","true",1,"icon"],["id","proximiioMap"],["class","loading",4,"ngIf"],[1,"loading"],["diameter","150","strokeWidth","1","color","primary"]],template:function(i,r){1&i&&(mn(0,"main")(1,"button",0),Ki("click",function(){return r.onMyLocation()}),Ni(2,"span",1),wn(),Ni(3,"div",2),wn(),ei(4,Nae,5,3,"main",3)),2&i&&(tn(4),_n("ngIf",!r.mapLoaded))},dependencies:[z2,Oae,U0],styles:["[_nghost-%COMP%]{position:relative;display:block;width:100vw;height:calc(100vh - (100vh - 100%));min-height:320px;z-index:0}[_nghost-%COMP%] > main[_ngcontent-%COMP%]{height:calc(100vh - (100vh - 100%))}#proximiioMap[_ngcontent-%COMP%]{width:100vw;height:calc(100vh - (100vh - 100%));min-height:320px}#proximiioMap[_ngcontent-%COMP%]     .maplibregl-ctrl-top-right{top:100px;right:20px}#proximiioMap[_ngcontent-%COMP%]     .maplibregl-ctrl-group{background-color:#6b50d0;color:#fff;box-shadow:none;border-radius:48px}#proximiioMap[_ngcontent-%COMP%]     .maplibregl-ctrl-group>button{width:48px!important;height:48px!important;padding:.8rem;border-radius:48px!important}#proximiioMap[_ngcontent-%COMP%]     .maplibregl-ctrl-group>button.maplibregl-ctrl-compass, #proximiioMap[_ngcontent-%COMP%]     .maplibregl-ctrl-group>button.maplibregl-ctrl-geolocate{margin:.1em 2px!important}#proximiioMap[_ngcontent-%COMP%]     .maplibregl-ctrl-group>button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(compass-regular.76ddde3a61e01c24.svg)}.my-location[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]{background-color:#6b50d0;color:#fff;box-shadow:none;border-radius:48px;border:0;position:fixed;right:30px;top:45px;z-index:5;width:52px;height:52px;padding:.9rem;cursor:pointer;outline:none}.my-location[_ngcontent-%COMP%]:hover, .settings[_ngcontent-%COMP%]:hover{background-color:#6144cd}.my-location[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-image:url(location-regular.4567441f5f4f87c8.svg);background-repeat:no-repeat;display:block;height:48px;width:48px;background-size:24px}.settings[_ngcontent-%COMP%]{top:auto;bottom:45px}.map-floors[_ngcontent-%COMP%]{position:fixed;z-index:9;right:10px;top:10px}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;background-color:#fff;display:block;width:20px;height:20px;line-height:20px;font-size:12px;text-align:center;border-radius:50%;left:-5px;top:-5px;font-weight:700;color:#222}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.current-floor[_ngcontent-%COMP%]{display:block;width:45px;height:45px;line-height:45px;background-color:#10283f;border-radius:50%;color:#fff;text-align:center}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.current-floor[_ngcontent-%COMP%]{margin:10px 0;font-size:26px;font-weight:300;background-color:#10283fa1}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:#183c5e}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a.blinking[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_anim;animation-duration:1s;animation-iteration-count:infinite;animation-direction:alternate;animation-timing-function:linear}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child > a[_ngcontent-%COMP%]{line-height:48px}@keyframes _ngcontent-%COMP%_anim{to{background-color:#3daa55}}.toggle-sidebar[_ngcontent-%COMP%]{position:absolute;z-index:9;left:10px;top:10px;display:block;width:45px;height:45px;line-height:45px;background-color:#10283f;border-radius:50%;color:#ffffffde;text-align:center}.toggle-sidebar[_ngcontent-%COMP%]:hover{background-color:#183c5e;color:#fff}.loading[_ngcontent-%COMP%]{text-align:center;position:fixed;inset:0;padding-top:20%;background-color:#fff}.loading[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:2rem auto}@media only screen and (max-width: 959.98px){#proximiioMap[_ngcontent-%COMP%]     .maplibregl-ctrl-top-right{display:none}.my-location[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]{right:.5rem;width:36px;height:36px;padding:.6rem}.my-location[_ngcontent-%COMP%]{top:auto;bottom:4.25rem}.my-location[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:32px;width:32px;background-size:17px}.settings[_ngcontent-%COMP%]{bottom:1.5rem}.loading[_ngcontent-%COMP%]{padding-top:50%}}"]})}return t})(),Rae=(()=>{class t{constructor(e,i,r,o){this.translate=i,this.mapService=r,this.stateService=o,this.isLoading=!1,this.theme$="custom-theme",this.sendAnalytics=!0;const c=new URLSearchParams(window.location.search);e.getContainerElement().classList.add(this.theme$),this.stateService.state.kioskMode=!!c.get("kiosk");let x=window.document.URL.split("/").pop();"en"!==x&&"fi"!==x&&"ar"!==x&&"it"!==x&&(x=c.get("lang")),i.addLangs(["en","fi","ar","it"]),i.setDefaultLang(x||"en"),i.use(x||"en")}ngOnInit(){this.startAhoyTracking(),this.stateService.state.kioskMode&&this.idleTime()}idleTime(){let e;const i=()=>{this.mapService.resetViewListener.next(!0)},r=()=>{clearTimeout(e),e=setTimeout(i,6e4)};window.onload=r,window.onmousemove=r,window.onmousedown=r,window.ontouchstart=r,window.ontouchmove=r,window.onclick=r,window.onkeydown=r,window.addEventListener("scroll",r,!0)}startAhoyTracking(){if(this.sendAnalytics){const e={excludes:{canvas:!0,webgl:!0}};LX().get(e,i=>{this.fingerprint=i,Ma.configure({urlPrefix:"",visitsUrl:`${dp_ahoyUrl}/ahoy/visits`,eventsUrl:`${dp_ahoyUrl}/ahoy/events`,page:null,platform:"Web",useBeacon:!0,startOnReady:!0,trackVisits:!0,cookies:!0,cookieDomain:null,headers:{Authorization:`Bearer ${Ev.token}`},visitParams:{fingerprint:i},withCredentials:!1}),Ma.trackView(),Ma.trackClicks("a, button, input[type=submit]"),Ma.trackSubmits("form"),Ma.trackChanges("input, textarea, select")})}}static#e=this.\u0275fac=function(i){return new(i||t)(Et(Ud),Et(Bl),Et(e6),Et(u0))};static#t=this.\u0275cmp=ar({type:t,selectors:[["app-root"]],decls:4,vars:2,consts:[[1,"content"]],template:function(i,r){1&i&&(mn(0,"div")(1,"main",0),Ni(2,"app-sidebar")(3,"app-map"),wn()()),2&i&&L9("theme-wrapper "+r.theme$+" "+r.translate.currentLang)},dependencies:[Hoe,_D],styles:["app-sidebar[_ngcontent-%COMP%]{position:absolute;left:0;top:0;right:0;z-index:1}.content[_ngcontent-%COMP%]{height:calc(100vh - (100vh - 100%));position:static}"]})}return t})();const Fae=[{path:"",redirectTo:"/map",pathMatch:"full"},{path:"map",component:_D,data:{breadcrumb:"Map"},pathMatch:"full"}];let Vae=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[Hd.forChild(Fae),Hd]})}return t})();function bD(t){return new jt(3e3,!1)}function Qu(t){switch(t.length){case 0:return new mh;case 1:return t[0];default:return new _I(t)}}function xD(t,n,e=new Map,i=new Map){const r=[],o=[];let c=-1,x=null;if(n.forEach(z=>{const O=z.get("offset"),J=O==c,le=J&&x||new Map;z.forEach((be,Ee)=>{let ut=Ee,mt=be;if("offset"!==Ee)switch(ut=t.normalizePropertyName(ut,r),mt){case"!":mt=e.get(Ee);break;case $0:mt=i.get(Ee);break;default:mt=t.normalizeStyleValue(Ee,ut,mt,r)}le.set(ut,mt)}),J||o.push(le),x=le,c=O}),r.length)throw function cse(t){return new jt(3502,!1)}();return o}function X_(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&Z_(e,"start",t)));break;case"done":t.onDone(()=>i(e&&Z_(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&Z_(e,"destroy",t)))}}function Z_(t,n,e){const o=$_(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),c=t._data;return null!=c&&(o._data=c),o}function $_(t,n,e,i,r="",o=0,c){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!c}}function nl(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function wD(t){const n=t.indexOf(":");return[t.substring(1,n),t.slice(n+1)]}const bse=(()=>typeof document>"u"?null:document.documentElement)();function q_(t){const n=t.parentNode||t.host||null;return n===bse?null:n}let d6=null,CD=!1;function MD(t,n){for(;n;){if(n===t)return!0;n=q_(n)}return!1}function SD(t,n,e){if(e)return Array.from(t.querySelectorAll(n));const i=t.querySelector(n);return i?[i]:[]}let ED=(()=>{class t{validateStyleProperty(e){return function wse(t){d6||(d6=function Cse(){return typeof document<"u"?document.body:null}()||{},CD=!!d6.style&&"WebkitAppearance"in d6.style);let n=!0;return d6.style&&!function xse(t){return"ebkit"==t.substring(1,6)}(t)&&(n=t in d6.style,!n&&CD&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in d6.style)),n}(e)}matchesElement(e,i){return!1}containsElement(e,i){return MD(e,i)}getParentElement(e){return q_(e)}query(e,i,r){return SD(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,c,x=[],z){return new mh(r,o)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})(),K_=(()=>{class t{static#e=this.NOOP=new ED}return t})();const Mse=1e3,Q_="ng-enter",Lm="ng-leave",Dm="ng-trigger",Om=".ng-trigger",zD="ng-animating",J_=".ng-animating";function K0(t){if("number"==typeof t)return t;const n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:eb(parseFloat(n[1]),n[2])}function eb(t,n){return"s"===n?t*Mse:t}function km(t,n,e){return t.hasOwnProperty("duration")?t:function Ese(t,n,e){let r,o=0,c="";if("string"==typeof t){const x=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===x)return n.push(bD()),{duration:0,delay:0,easing:""};r=eb(parseFloat(x[1]),x[2]);const z=x[3];null!=z&&(o=eb(parseFloat(z),x[4]));const O=x[5];O&&(c=O)}else r=t;if(!e){let x=!1,z=n.length;r<0&&(n.push(function Hae(){return new jt(3100,!1)}()),x=!0),o<0&&(n.push(function Bae(){return new jt(3101,!1)}()),x=!0),x&&n.splice(z,0,bD())}return{duration:r,delay:o,easing:c}}(t,n,e)}function Ah(t,n={}){return Object.keys(t).forEach(e=>{n[e]=t[e]}),n}function PD(t){const n=new Map;return Object.keys(t).forEach(e=>{n.set(e,t[e])}),n}function Ju(t,n=new Map,e){if(e)for(let[i,r]of e)n.set(i,r);for(let[i,r]of t)n.set(i,r);return n}function p0(t,n,e){n.forEach((i,r)=>{const o=nb(r);e&&!e.has(r)&&e.set(r,t.style[o]),t.style[o]=i})}function h6(t,n){n.forEach((e,i)=>{const r=nb(i);t.style[r]=""})}function zh(t){return Array.isArray(t)?1==t.length?t[0]:yI(t):t}const tb=new RegExp("{{\\s*(.+?)\\s*}}","g");function TD(t){let n=[];if("string"==typeof t){let e;for(;e=tb.exec(t);)n.push(e[1]);tb.lastIndex=0}return n}function Ph(t,n,e){const i=t.toString(),r=i.replace(tb,(o,c)=>{let x=n[c];return null==x&&(e.push(function Uae(t){return new jt(3003,!1)}()),x=""),x.toString()});return r==i?t:r}function Nm(t){const n=[];let e=t.next();for(;!e.done;)n.push(e.value),e=t.next();return n}const Pse=/-+([a-z0-9])/g;function nb(t){return t.replace(Pse,(...n)=>n[1].toUpperCase())}function il(t,n,e){switch(n.type){case 7:return t.visitTrigger(n,e);case 0:return t.visitState(n,e);case 1:return t.visitTransition(n,e);case 2:return t.visitSequence(n,e);case 3:return t.visitGroup(n,e);case 4:return t.visitAnimate(n,e);case 5:return t.visitKeyframes(n,e);case 6:return t.visitStyle(n,e);case 8:return t.visitReference(n,e);case 9:return t.visitAnimateChild(n,e);case 10:return t.visitAnimateRef(n,e);case 11:return t.visitQuery(n,e);case 12:return t.visitStagger(n,e);default:throw function Gae(t){return new jt(3004,!1)}()}}function LD(t,n){return window.getComputedStyle(t)[n]}const Rm="*";function Lse(t,n){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(i=>function Dse(t,n,e){if(":"==t[0]){const z=function Ose(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(function rse(t){return new jt(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof z)return void n.push(z);t=z}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function ise(t){return new jt(3015,!1)}()),n;const r=i[1],o=i[2],c=i[3];n.push(DD(r,c));"<"==o[0]&&!(r==Rm&&c==Rm)&&n.push(DD(c,r))}(i,e,n)):e.push(t),e}const Fm=new Set(["true","1"]),Vm=new Set(["false","0"]);function DD(t,n){const e=Fm.has(t)||Vm.has(t),i=Fm.has(n)||Vm.has(n);return(r,o)=>{let c=t==Rm||t==r,x=n==Rm||n==o;return!c&&e&&"boolean"==typeof r&&(c=r?Fm.has(t):Vm.has(t)),!x&&i&&"boolean"==typeof o&&(x=o?Fm.has(n):Vm.has(n)),c&&x}}const kse=new RegExp("s*:selfs*,?","g");function ib(t,n,e,i){return new Nse(t).build(n,e,i)}class Nse{constructor(n){this._driver=n}build(n,e,i){const r=new Vse(e);return this._resetContextStyleTimingState(r),il(this,zh(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0;const o=[],c=[];return"@"==n.name.charAt(0)&&e.errors.push(function Yae(){return new jt(3006,!1)}()),n.definitions.forEach(x=>{if(this._resetContextStyleTimingState(e),0==x.type){const z=x,O=z.name;O.toString().split(/\s*,\s*/).forEach(J=>{z.name=J,o.push(this.visitState(z,e))}),z.name=O}else if(1==x.type){const z=this.visitTransition(x,e);i+=z.queryCount,r+=z.depCount,c.push(z)}else e.errors.push(function Xae(){return new jt(3007,!1)}())}),{type:7,name:n.name,states:o,transitions:c,queryCount:i,depCount:r,options:null}}visitState(n,e){const i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){const o=new Set,c=r||{};i.styles.forEach(x=>{x instanceof Map&&x.forEach(z=>{TD(z).forEach(O=>{c.hasOwnProperty(O)||o.add(O)})})}),o.size&&(Nm(o.values()),e.errors.push(function Zae(t,n){return new jt(3008,!1)}()))}return{type:0,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;const i=il(this,zh(n.animation),e);return{type:1,matchers:Lse(n.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:f6(n.options)}}visitSequence(n,e){return{type:2,steps:n.steps.map(i=>il(this,i,e)),options:f6(n.options)}}visitGroup(n,e){const i=e.currentTime;let r=0;const o=n.steps.map(c=>{e.currentTime=i;const x=il(this,c,e);return r=Math.max(r,e.currentTime),x});return e.currentTime=r,{type:3,steps:o,options:f6(n.options)}}visitAnimate(n,e){const i=function Bse(t,n){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return rb(km(t,n).duration,0,"");const e=t;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=rb(0,0,"");return o.dynamic=!0,o.strValue=e,o}const r=km(e,n);return rb(r.duration,r.delay,r.easing)}(n.timings,e.errors);e.currentAnimateTimings=i;let r,o=n.styles?n.styles:Ur({});if(5==o.type)r=this.visitKeyframes(o,e);else{let c=n.styles,x=!1;if(!c){x=!0;const O={};i.easing&&(O.easing=i.easing),c=Ur(O)}e.currentTime+=i.duration+i.delay;const z=this.visitStyle(c,e);z.isEmptyStep=x,r=z}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(n,e){const i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){const i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let x of r)"string"==typeof x?x===$0?i.push(x):e.errors.push(new jt(3002,!1)):i.push(PD(x));let o=!1,c=null;return i.forEach(x=>{if(x instanceof Map&&(x.has("easing")&&(c=x.get("easing"),x.delete("easing")),!o))for(let z of x.values())if(z.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:c,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,e){const i=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),n.styles.forEach(c=>{"string"!=typeof c&&c.forEach((x,z)=>{const O=e.collectedStyles.get(e.currentQuerySelector),J=O.get(z);let le=!0;J&&(o!=r&&o>=J.startTime&&r<=J.endTime&&(e.errors.push(function qae(t,n,e,i,r){return new jt(3010,!1)}()),le=!1),o=J.startTime),le&&O.set(z,{startTime:o,endTime:r}),e.options&&function zse(t,n,e){const i=n.params||{},r=TD(t);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(function jae(t){return new jt(3001,!1)}())})}(x,e.options,e.errors)})})}visitKeyframes(n,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Kae(){return new jt(3011,!1)}()),i;let o=0;const c=[];let x=!1,z=!1,O=0;const J=n.steps.map(Ht=>{const vt=this._makeStyleAst(Ht,e);let Zt=null!=vt.offset?vt.offset:function Hse(t){if("string"==typeof t)return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}(vt.styles),gn=0;return null!=Zt&&(o++,gn=vt.offset=Zt),z=z||gn<0||gn>1,x=x||gn<O,O=gn,c.push(gn),vt});z&&e.errors.push(function Qae(){return new jt(3012,!1)}()),x&&e.errors.push(function Jae(){return new jt(3200,!1)}());const le=n.steps.length;let be=0;o>0&&o<le?e.errors.push(function ese(){return new jt(3202,!1)}()):0==o&&(be=1/(le-1));const Ee=le-1,ut=e.currentTime,mt=e.currentAnimateTimings,Nt=mt.duration;return J.forEach((Ht,vt)=>{const Zt=be>0?vt==Ee?1:be*vt:c[vt],gn=Zt*Nt;e.currentTime=ut+mt.delay+gn,mt.duration=gn,this._validateStyleAst(Ht,e),Ht.offset=Zt,i.styles.push(Ht)}),i}visitReference(n,e){return{type:8,animation:il(this,zh(n.animation),e),options:f6(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:9,options:f6(n.options)}}visitAnimateRef(n,e){return{type:10,animation:this.visitReference(n.animation,e),options:f6(n.options)}}visitQuery(n,e){const i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;const[o,c]=function Rse(t){const n=!!t.split(/\s*,\s*/).find(e=>":self"==e);return n&&(t=t.replace(kse,"")),t=t.replace(/@\*/g,Om).replace(/@\w+/g,e=>Om+"-"+e.slice(1)).replace(/:animating/g,J_),[t,n]}(n.selector);e.currentQuerySelector=i.length?i+" "+o:o,nl(e.collectedStyles,e.currentQuerySelector,new Map);const x=il(this,zh(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:x,originalSelector:n.selector,options:f6(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(function tse(){return new jt(3013,!1)}());const i="full"===n.timings?{duration:0,delay:0,easing:"full"}:km(n.timings,e.errors,!0);return{type:12,animation:il(this,zh(n.animation),e),timings:i,options:null}}}class Vse{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function f6(t){return t?(t=Ah(t)).params&&(t.params=function Fse(t){return t?Ah(t):null}(t.params)):t={},t}function rb(t,n,e){return{duration:t,delay:n,easing:e}}function ob(t,n,e,i,r,o,c=null,x=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:c,subTimeline:x}}class Hm{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const Gse=new RegExp(":enter","g"),Yse=new RegExp(":leave","g");function ab(t,n,e,i,r,o=new Map,c=new Map,x,z,O=[]){return(new Xse).buildKeyframes(t,n,e,i,r,o,c,x,z,O)}class Xse{buildKeyframes(n,e,i,r,o,c,x,z,O,J=[]){O=O||new Hm;const le=new sb(n,e,O,r,o,J,[]);le.options=z;const be=z.delay?K0(z.delay):0;le.currentTimeline.delayNextStep(be),le.currentTimeline.setStyles([c],null,le.errors,z),il(this,i,le);const Ee=le.timelines.filter(ut=>ut.containsAnimation());if(Ee.length&&x.size){let ut;for(let mt=Ee.length-1;mt>=0;mt--){const Nt=Ee[mt];if(Nt.element===e){ut=Nt;break}}ut&&!ut.allowOnlyTimelineStyles()&&ut.setStyles([x],null,le.errors,z)}return Ee.length?Ee.map(ut=>ut.buildKeyframes()):[ob(e,[],[],[],0,be,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(n.options),o=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);o!=c&&e.transformIntoNewTimeline(c)}e.previousNode=n}visitAnimateRef(n,e){const i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(const r of n){const o=r?.delay;if(o){const c="number"==typeof o?o:K0(Ph(o,r?.params??{},e.errors));i.delayNextStep(c)}}}_visitSubInstructions(n,e,i){let o=e.currentTimeline.currentTime;const c=null!=i.duration?K0(i.duration):null,x=null!=i.delay?K0(i.delay):null;return 0!==c&&n.forEach(z=>{const O=e.appendInstructionToTimeline(z,c,x);o=Math.max(o,O.duration+O.delay)}),o}visitReference(n,e){e.updateOptions(n.options,!0),il(this,n.animation,e),e.previousNode=n}visitSequence(n,e){const i=e.subContextCount;let r=e;const o=n.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Bm);const c=K0(o.delay);r.delayNextStep(c)}n.steps.length&&(n.steps.forEach(c=>il(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){const i=[];let r=e.currentTimeline.currentTime;const o=n.options&&n.options.delay?K0(n.options.delay):0;n.steps.forEach(c=>{const x=e.createSubContext(n.options);o&&x.delayNextStep(o),il(this,c,x),r=Math.max(r,x.currentTimeline.currentTime),i.push(x.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){const i=n.strValue;return km(e.params?Ph(i,e.params,e.errors):i,e.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){const i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const o=n.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(o):i.setStyles(n.styles,o,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,x=e.createSubContext().currentTimeline;x.easing=i.easing,n.styles.forEach(z=>{x.forwardTime((z.offset||0)*o),x.setStyles(z.styles,z.easing,e.errors,e.options),x.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(x),e.transformIntoNewTimeline(r+o),e.previousNode=n}visitQuery(n,e){const i=e.currentTimeline.currentTime,r=n.options||{},o=r.delay?K0(r.delay):0;o&&(6===e.previousNode.type||0==i&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Bm);let c=i;const x=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=x.length;let z=null;x.forEach((O,J)=>{e.currentQueryIndex=J;const le=e.createSubContext(n.options,O);o&&le.delayNextStep(o),O===e.element&&(z=le.currentTimeline),il(this,n.animation,le),le.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,le.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),z&&(e.currentTimeline.mergeTimelineCollectedStyles(z),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){const i=e.parentContext,r=e.currentTimeline,o=n.timings,c=Math.abs(o.duration),x=c*(e.currentQueryTotal-1);let z=c*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":z=x-z;break;case"full":z=i.currentStaggerTime}const J=e.currentTimeline;z&&J.delayNextStep(z);const le=J.currentTime;il(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-le+(r.startTime-i.currentTimeline.startTime)}}const Bm={};class sb{constructor(n,e,i,r,o,c,x,z){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=c,this.timelines=x,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Bm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=z||new jm(this._driver,e,0),x.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;const i=n;let r=this.options;null!=i.duration&&(r.duration=K0(i.duration)),null!=i.delay&&(r.delay=K0(i.delay));const o=i.params;if(o){let c=r.params;c||(c=this.options.params={}),Object.keys(o).forEach(x=>{(!e||!c.hasOwnProperty(x))&&(c[x]=Ph(o[x],c,this.errors))})}}_copyOptions(){const n={};if(this.options){const e=this.options.params;if(e){const i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){const r=e||this.element,o=new sb(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=Bm,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){const r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},o=new Zse(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,o,c){let x=[];if(r&&x.push(this.element),n.length>0){n=(n=n.replace(Gse,"."+this._enterClassName)).replace(Yse,"."+this._leaveClassName);let O=this._driver.query(this.element,n,1!=i);0!==i&&(O=i<0?O.slice(O.length+i,O.length):O.slice(0,i)),x.push(...O)}return!o&&0==x.length&&c.push(function nse(t){return new jt(3014,!1)}()),x}}class jm{constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new jm(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||$0),this._currentKeyframe.set(e,$0);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);const o=r&&r.params||{},c=function $se(t,n){const e=new Map;let i;return t.forEach(r=>{if("*"===r){i=i||n.keys();for(let o of i)e.set(o,$0)}else Ju(r,e)}),e}(n,this._globalTimelineStyles);for(let[x,z]of c){const O=Ph(z,o,i);this._pendingStyles.set(x,O),this._localTimelineStyles.has(x)||this._backFill.set(x,this._globalTimelineStyles.get(x)??$0),this._updateStyle(x,O)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{const r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((x,z)=>{const O=Ju(x,new Map,this._backFill);O.forEach((J,le)=>{"!"===J?n.add(le):J===$0&&e.add(le)}),i||O.set("offset",z/this.duration),r.push(O)});const o=n.size?Nm(n.values()):[],c=e.size?Nm(e.values()):[];if(i){const x=r[0],z=new Map(x);x.set("offset",0),z.set("offset",1),r=[x,z]}return ob(this.element,r,o,c,this.duration,this.startTime,this.easing,!1)}}class Zse extends jm{constructor(n,e,i,r,o,c,x=!1){super(n,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=x,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],c=i+e,x=e/c,z=Ju(n[0]);z.set("offset",0),o.push(z);const O=Ju(n[0]);O.set("offset",ND(x)),o.push(O);const J=n.length-1;for(let le=1;le<=J;le++){let be=Ju(n[le]);const Ee=be.get("offset");be.set("offset",ND((e+Ee*i)/c)),o.push(be)}i=c,e=0,r="",n=o}return ob(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function ND(t,n=3){const e=Math.pow(10,n-1);return Math.round(t*e)/e}class cb{}const qse=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Kse extends cb{normalizePropertyName(n,e){return nb(n)}normalizeStyleValue(n,e,i,r){let o="";const c=i.toString().trim();if(qse.has(e)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const x=i.match(/^[+-]?[\d\.]+([a-z]*)$/);x&&0==x[1].length&&r.push(function Wae(t,n){return new jt(3005,!1)}())}return c+o}}function RD(t,n,e,i,r,o,c,x,z,O,J,le,be){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:c,timelines:x,queriedElements:z,preStyleProps:O,postStyleProps:J,totalTime:le,errors:be}}const lb={};class FD{constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return function Qse(t,n,e,i,r){return t.some(o=>o(n,e,i,r))}(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return void 0!==n&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,o,c,x,z,O,J){const le=[],be=this.ast.options&&this.ast.options.params||lb,ut=this.buildStyles(i,x&&x.params||lb,le),mt=z&&z.params||lb,Nt=this.buildStyles(r,mt,le),Ht=new Set,vt=new Map,Zt=new Map,gn="void"===r,bn={params:Jse(mt,be),delay:this.ast.options?.delay},ni=J?[]:ab(n,e,this.ast.animation,o,c,ut,Nt,bn,O,le);let $n=0;if(ni.forEach(dn=>{$n=Math.max(dn.duration+dn.delay,$n)}),le.length)return RD(e,this._triggerName,i,r,gn,ut,Nt,[],[],vt,Zt,$n,le);ni.forEach(dn=>{const Fa=dn.element,Ka=nl(vt,Fa,new Set);dn.preStyleProps.forEach(g1=>Ka.add(g1));const c1=nl(Zt,Fa,new Set);dn.postStyleProps.forEach(g1=>c1.add(g1)),Fa!==e&&Ht.add(Fa)});const oi=Nm(Ht.values());return RD(e,this._triggerName,i,r,gn,ut,Nt,ni,oi,vt,Zt,$n)}}function Jse(t,n){const e=Ah(n);for(const i in t)t.hasOwnProperty(i)&&null!=t[i]&&(e[i]=t[i]);return e}class e1e{constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){const i=new Map,r=Ah(this.defaultParams);return Object.keys(n).forEach(o=>{const c=n[o];null!==c&&(r[o]=c)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,x)=>{c&&(c=Ph(c,r,e));const z=this.normalizer.normalizePropertyName(x,e);c=this.normalizer.normalizeStyleValue(x,z,c,e),i.set(x,c)})}),i}}class n1e{constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new e1e(r.style,r.options&&r.options.params||{},i))}),VD(this.states,"true","1"),VD(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new FD(n,r,this.states))}),this.fallbackTransition=function i1e(t,n,e){return new FD(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,x)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(c=>c.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}}function VD(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}const r1e=new Hm;class o1e{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,e){const i=[],o=ib(this._driver,e,i,[]);if(i.length)throw function lse(t){return new jt(3503,!1)}();this._animations.set(n,o)}_buildPlayer(n,e,i){const r=n.element,o=xD(this._normalizer,n.keyframes,e,i);return this._driver.animate(r,o,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){const r=[],o=this._animations.get(n);let c;const x=new Map;if(o?(c=ab(this._driver,e,o,Q_,Lm,new Map,new Map,i,r1e,r),c.forEach(J=>{const le=nl(x,J.element,new Map);J.postStyleProps.forEach(be=>le.set(be,null))})):(r.push(function use(){return new jt(3300,!1)}()),c=[]),r.length)throw function dse(t){return new jt(3504,!1)}();x.forEach((J,le)=>{J.forEach((be,Ee)=>{J.set(Ee,this._driver.computeStyle(le,Ee,$0))})});const O=Qu(c.map(J=>{const le=x.get(J.element);return this._buildPlayer(J,new Map,le)}));return this._playersById.set(n,O),O.onDestroy(()=>this.destroy(n)),this.players.push(O),O}destroy(n){const e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){const e=this._playersById.get(n);if(!e)throw function hse(t){return new jt(3301,!1)}();return e}listen(n,e,i,r){const o=$_(e,"","","");return X_(this._getPlayer(n),i,o,r),()=>{}}command(n,e,i,r){if("register"==i)return void this.register(n,r[0]);if("create"==i)return void this.create(n,e,r[0]||{});const o=this._getPlayer(n);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n)}}}const HD="ng-animate-queued",ub="ng-animate-disabled",u1e=[],BD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},d1e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ul="__ng_removed";class db{get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;const i=n&&n.hasOwnProperty("value");if(this.value=function m1e(t){return t??null}(i?n.value:n),i){const o=Ah(n);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const e=n.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const Ih="void",hb=new db(Ih);class h1e{constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,xl(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw function fse(t,n){return new jt(3302,!1)}();if(null==i||0==i.length)throw function pse(t){return new jt(3303,!1)}();if(!function g1e(t){return"start"==t||"done"==t}(i))throw function mse(t,n){return new jt(3400,!1)}();const o=nl(this._elementListeners,n,[]),c={name:e,phase:i,callback:r};o.push(c);const x=nl(this._engine.statesByElement,n,new Map);return x.has(e)||(xl(n,Dm),xl(n,Dm+"-"+e),x.set(e,hb)),()=>{this._engine.afterFlush(()=>{const z=o.indexOf(c);z>=0&&o.splice(z,1),this._triggers.has(e)||x.delete(e)})}}register(n,e){return!this._triggers.has(n)&&(this._triggers.set(n,e),!0)}_getTrigger(n){const e=this._triggers.get(n);if(!e)throw function gse(t){return new jt(3401,!1)}();return e}trigger(n,e,i,r=!0){const o=this._getTrigger(e),c=new fb(this.id,e,n);let x=this._engine.statesByElement.get(n);x||(xl(n,Dm),xl(n,Dm+"-"+e),this._engine.statesByElement.set(n,x=new Map));let z=x.get(e);const O=new db(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&z&&O.absorbOptions(z.options),x.set(e,O),z||(z=hb),O.value!==Ih&&z.value===O.value){if(!function _1e(t,n){const e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!n.hasOwnProperty(o)||t[o]!==n[o])return!1}return!0}(z.params,O.params)){const mt=[],Nt=o.matchStyles(z.value,z.params,mt),Ht=o.matchStyles(O.value,O.params,mt);mt.length?this._engine.reportError(mt):this._engine.afterFlush(()=>{h6(n,Nt),p0(n,Ht)})}return}const be=nl(this._engine.playersByElement,n,[]);be.forEach(mt=>{mt.namespaceId==this.id&&mt.triggerName==e&&mt.queued&&mt.destroy()});let Ee=o.matchTransition(z.value,O.value,n,O.params),ut=!1;if(!Ee){if(!r)return;Ee=o.fallbackTransition,ut=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:Ee,fromState:z,toState:O,player:c,isFallbackTransition:ut}),ut||(xl(n,HD),c.onStart(()=>{j3(n,HD)})),c.onDone(()=>{let mt=this.players.indexOf(c);mt>=0&&this.players.splice(mt,1);const Nt=this._engine.playersByElement.get(n);if(Nt){let Ht=Nt.indexOf(c);Ht>=0&&Nt.splice(Ht,1)}}),this.players.push(c),be.push(c),c}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){const i=this._engine.driver.query(n,Om,!0);i.forEach(r=>{if(r[Ul])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){const o=this._engine.statesByElement.get(n),c=new Map;if(o){const x=[];if(o.forEach((z,O)=>{if(c.set(O,z.value),this._triggers.has(O)){const J=this.trigger(n,O,Ih,r);J&&x.push(J)}}),x.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,c),i&&Qu(x).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){const r=new Set;e.forEach(o=>{const c=o.name;if(r.has(c))return;r.add(c);const z=this._triggers.get(c).fallbackTransition,O=i.get(c)||hb,J=new db(Ih),le=new fb(this.id,c,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:c,transition:z,fromState:O,toState:J,player:le,isFallbackTransition:!0})})}}removeNode(n,e){const i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(n):[];if(o&&o.length)r=!0;else{let c=n;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{const o=n[Ul];(!o||o===BD)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){xl(n,this._hostClassName)}drainQueuedTransitions(n){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,c=this._elementListeners.get(o);c&&c.forEach(x=>{if(x.name==i.triggerName){const z=$_(o,i.triggerName,i.fromState.value,i.toState.value);z._data=n,X_(i.player,x.phase,z,x.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const o=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class f1e{_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){const i=new h1e(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let c=!1,x=this.driver.getParentElement(e);for(;x;){const z=r.get(x);if(z){const O=i.indexOf(z);i.splice(O+1,0,n),c=!0;break}x=this.driver.getParentElement(x)}c||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const e=new Set,i=this.statesByElement.get(n);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}return e}trigger(n,e,i,r){if(Um(e)){const o=this._fetchNamespace(n);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!Um(e))return;const o=e[Ul];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(n){const c=this._fetchNamespace(n);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),xl(n,ub)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),j3(n,ub))}removeNode(n,e,i){if(Um(e)){const r=n?this._fetchNamespace(n):null;r?r.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);const o=this.namespacesByHostElement.get(e);o&&o.id!==n&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,r,o){this.collectedLeaveElements.push(e),e[Ul]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,e,i,r,o){return Um(e)?this._fetchNamespace(n).listen(e,i,r,o):()=>{}}_buildInstruction(n,e,i,r,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,o)}destroyInnerAnimations(n){let e=this.driver.query(n,Om,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(n,J_,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){const e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){const e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Qu(this.players).onDone(()=>n());n()})}processLeaveNode(n){const e=n[Ul];if(e&&e.setForRemoval){if(n[Ul]=BD,e.namespaceId){this.destroyInnerAnimations(n);const i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(ub)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)xl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Qu(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw function vse(t){return new jt(3402,!1)}()}_flushAnimations(n,e){const i=new Hm,r=[],o=new Map,c=[],x=new Map,z=new Map,O=new Map,J=new Set;this.disabledNodes.forEach(fi=>{J.add(fi);const sr=this.driver.query(fi,".ng-animate-queued",!0);for(let rr=0;rr<sr.length;rr++)J.add(sr[rr])});const le=this.bodyNode,be=Array.from(this.statesByElement.keys()),Ee=GD(be,this.collectedEnterElements),ut=new Map;let mt=0;Ee.forEach((fi,sr)=>{const rr=Q_+mt++;ut.set(sr,rr),fi.forEach(br=>xl(br,rr))});const Nt=[],Ht=new Set,vt=new Set;for(let fi=0;fi<this.collectedLeaveElements.length;fi++){const sr=this.collectedLeaveElements[fi],rr=sr[Ul];rr&&rr.setForRemoval&&(Nt.push(sr),Ht.add(sr),rr.hasAnimation?this.driver.query(sr,".ng-star-inserted",!0).forEach(br=>Ht.add(br)):vt.add(sr))}const Zt=new Map,gn=GD(be,Array.from(Ht));gn.forEach((fi,sr)=>{const rr=Lm+mt++;Zt.set(sr,rr),fi.forEach(br=>xl(br,rr))}),n.push(()=>{Ee.forEach((fi,sr)=>{const rr=ut.get(sr);fi.forEach(br=>j3(br,rr))}),gn.forEach((fi,sr)=>{const rr=Zt.get(sr);fi.forEach(br=>j3(br,rr))}),Nt.forEach(fi=>{this.processLeaveNode(fi)})});const bn=[],ni=[];for(let fi=this._namespaceList.length-1;fi>=0;fi--)this._namespaceList[fi].drainQueuedTransitions(e).forEach(rr=>{const br=rr.player,bs=rr.element;if(bn.push(br),this.collectedEnterElements.length){const Ds=bs[Ul];if(Ds&&Ds.setForMove){if(Ds.previousTriggersValues&&Ds.previousTriggersValues.has(rr.triggerName)){const Gl=Ds.previousTriggersValues.get(rr.triggerName),Rc=this.statesByElement.get(rr.element);if(Rc&&Rc.has(rr.triggerName)){const eu=Rc.get(rr.triggerName);eu.value=Gl,Rc.set(rr.triggerName,eu)}}return void br.destroy()}}const sc=!le||!this.driver.containsElement(le,bs),v1=Zt.get(bs),fs=ut.get(bs),eo=this._buildInstruction(rr,i,fs,v1,sc);if(eo.errors&&eo.errors.length)return void ni.push(eo);if(sc)return br.onStart(()=>h6(bs,eo.fromStyles)),br.onDestroy(()=>p0(bs,eo.toStyles)),void r.push(br);if(rr.isFallbackTransition)return br.onStart(()=>h6(bs,eo.fromStyles)),br.onDestroy(()=>p0(bs,eo.toStyles)),void r.push(br);const vc=[];eo.timelines.forEach(Ds=>{Ds.stretchStartingKeyframe=!0,this.disabledNodes.has(Ds.element)||vc.push(Ds)}),eo.timelines=vc,i.append(bs,eo.timelines),c.push({instruction:eo,player:br,element:bs}),eo.queriedElements.forEach(Ds=>nl(x,Ds,[]).push(br)),eo.preStyleProps.forEach((Ds,Gl)=>{if(Ds.size){let Rc=z.get(Gl);Rc||z.set(Gl,Rc=new Set),Ds.forEach((eu,t4)=>Rc.add(t4))}}),eo.postStyleProps.forEach((Ds,Gl)=>{let Rc=O.get(Gl);Rc||O.set(Gl,Rc=new Set),Ds.forEach((eu,t4)=>Rc.add(t4))})});if(ni.length){const fi=[];ni.forEach(sr=>{fi.push(function yse(t,n){return new jt(3505,!1)}())}),bn.forEach(sr=>sr.destroy()),this.reportError(fi)}const $n=new Map,oi=new Map;c.forEach(fi=>{const sr=fi.element;i.has(sr)&&(oi.set(sr,sr),this._beforeAnimationBuild(fi.player.namespaceId,fi.instruction,$n))}),r.forEach(fi=>{const sr=fi.element;this._getPreviousPlayers(sr,!1,fi.namespaceId,fi.triggerName,null).forEach(br=>{nl($n,sr,[]).push(br),br.destroy()})});const dn=Nt.filter(fi=>YD(fi,z,O)),Fa=new Map;UD(Fa,this.driver,vt,O,$0).forEach(fi=>{YD(fi,z,O)&&dn.push(fi)});const c1=new Map;Ee.forEach((fi,sr)=>{UD(c1,this.driver,new Set(fi),z,"!")}),dn.forEach(fi=>{const sr=Fa.get(fi),rr=c1.get(fi);Fa.set(fi,new Map([...sr?.entries()??[],...rr?.entries()??[]]))});const g1=[],Nc=[],ac={};c.forEach(fi=>{const{element:sr,player:rr,instruction:br}=fi;if(i.has(sr)){if(J.has(sr))return rr.onDestroy(()=>p0(sr,br.toStyles)),rr.disabled=!0,rr.overrideTotalTime(br.totalTime),void r.push(rr);let bs=ac;if(oi.size>1){let v1=sr;const fs=[];for(;v1=v1.parentNode;){const eo=oi.get(v1);if(eo){bs=eo;break}fs.push(v1)}fs.forEach(eo=>oi.set(eo,bs))}const sc=this._buildAnimation(rr.namespaceId,br,$n,o,c1,Fa);if(rr.setRealPlayer(sc),bs===ac)g1.push(rr);else{const v1=this.playersByElement.get(bs);v1&&v1.length&&(rr.parentPlayer=Qu(v1)),r.push(rr)}}else h6(sr,br.fromStyles),rr.onDestroy(()=>p0(sr,br.toStyles)),Nc.push(rr),J.has(sr)&&r.push(rr)}),Nc.forEach(fi=>{const sr=o.get(fi.element);if(sr&&sr.length){const rr=Qu(sr);fi.setRealPlayer(rr)}}),r.forEach(fi=>{fi.parentPlayer?fi.syncPlayerEvents(fi.parentPlayer):fi.destroy()});for(let fi=0;fi<Nt.length;fi++){const sr=Nt[fi],rr=sr[Ul];if(j3(sr,Lm),rr&&rr.hasAnimation)continue;let br=[];if(x.size){let sc=x.get(sr);sc&&sc.length&&br.push(...sc);let v1=this.driver.query(sr,J_,!0);for(let fs=0;fs<v1.length;fs++){let eo=x.get(v1[fs]);eo&&eo.length&&br.push(...eo)}}const bs=br.filter(sc=>!sc.destroyed);bs.length?v1e(this,sr,bs):this.processLeaveNode(sr)}return Nt.length=0,g1.forEach(fi=>{this.players.push(fi),fi.onDone(()=>{fi.destroy();const sr=this.players.indexOf(fi);this.players.splice(sr,1)}),fi.play()}),g1}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,o){let c=[];if(e){const x=this.playersByQueriedElement.get(n);x&&(c=x)}else{const x=this.playersByElement.get(n);if(x){const z=!o||o==Ih;x.forEach(O=>{O.queued||!z&&O.triggerName!=r||c.push(O)})}}return(i||r)&&(c=c.filter(x=>!(i&&i!=x.namespaceId||r&&r!=x.triggerName))),c}_beforeAnimationBuild(n,e,i){const o=e.element,c=e.isRemovalTransition?void 0:n,x=e.isRemovalTransition?void 0:e.triggerName;for(const z of e.timelines){const O=z.element,J=O!==o,le=nl(i,O,[]);this._getPreviousPlayers(O,J,c,x,e.toState).forEach(Ee=>{const ut=Ee.getRealPlayer();ut.beforeDestroy&&ut.beforeDestroy(),Ee.destroy(),le.push(Ee)})}h6(o,e.fromStyles)}_buildAnimation(n,e,i,r,o,c){const x=e.triggerName,z=e.element,O=[],J=new Set,le=new Set,be=e.timelines.map(ut=>{const mt=ut.element;J.add(mt);const Nt=mt[Ul];if(Nt&&Nt.removedBeforeQueried)return new mh(ut.duration,ut.delay);const Ht=mt!==z,vt=function y1e(t){const n=[];return WD(t,n),n}((i.get(mt)||u1e).map($n=>$n.getRealPlayer())).filter($n=>!!$n.element&&$n.element===mt),Zt=o.get(mt),gn=c.get(mt),bn=xD(this._normalizer,ut.keyframes,Zt,gn),ni=this._buildPlayer(ut,bn,vt);if(ut.subTimeline&&r&&le.add(mt),Ht){const $n=new fb(n,x,mt);$n.setRealPlayer(ni),O.push($n)}return ni});O.forEach(ut=>{nl(this.playersByQueriedElement,ut.element,[]).push(ut),ut.onDone(()=>function p1e(t,n,e){let i=t.get(n);if(i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&t.delete(n)}return i}(this.playersByQueriedElement,ut.element,ut))}),J.forEach(ut=>xl(ut,zD));const Ee=Qu(be);return Ee.onDestroy(()=>{J.forEach(ut=>j3(ut,zD)),p0(z,e.toStyles)}),le.forEach(ut=>{nl(r,ut,[]).push(Ee)}),Ee}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new mh(n.duration,n.delay)}}class fb{constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i,this._player=new mh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>X_(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){nl(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const e=this._player;e.triggerCallback&&e.triggerCallback(n)}}function Um(t){return t&&1===t.nodeType}function jD(t,n){const e=t.style.display;return t.style.display=n??"none",e}function UD(t,n,e,i,r){const o=[];e.forEach(z=>o.push(jD(z)));const c=[];i.forEach((z,O)=>{const J=new Map;z.forEach(le=>{const be=n.computeStyle(O,le,r);J.set(le,be),(!be||0==be.length)&&(O[Ul]=d1e,c.push(O))}),t.set(O,J)});let x=0;return e.forEach(z=>jD(z,o[x++])),c}function GD(t,n){const e=new Map;if(t.forEach(x=>e.set(x,[])),0==n.length)return e;const r=new Set(n),o=new Map;function c(x){if(!x)return 1;let z=o.get(x);if(z)return z;const O=x.parentNode;return z=e.has(O)?O:r.has(O)?1:c(O),o.set(x,z),z}return n.forEach(x=>{const z=c(x);1!==z&&e.get(z).push(x)}),e}function xl(t,n){t.classList?.add(n)}function j3(t,n){t.classList?.remove(n)}function v1e(t,n,e){Qu(e).onDone(()=>t.processLeaveNode(n))}function WD(t,n){for(let e=0;e<t.length;e++){const i=t[e];i instanceof _I?WD(i.players,n):n.push(i)}}function YD(t,n,e){const i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(o=>r.add(o)):n.set(t,i),e.delete(t),!0}class Gm{constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new f1e(n,e,i),this._timelineEngine=new o1e(n,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(n,e,i,r,o){const c=n+"-"+r;let x=this._triggerCache[c];if(!x){const z=[],J=ib(this._driver,o,z,[]);if(z.length)throw function sse(t,n){return new jt(3404,!1)}();x=function t1e(t,n,e){return new n1e(t,n,e)}(r,J,this._normalizer),this._triggerCache[c]=x}this._transitionEngine.registerTrigger(e,r,x)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if("@"==i.charAt(0)){const[o,c]=wD(i);this._timelineEngine.command(o,e,c,r)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,o){if("@"==i.charAt(0)){const[c,x]=wD(i);return this._timelineEngine.listen(c,e,x,o)}return this._transitionEngine.listen(n,e,i,r,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let x1e=(()=>{class t{static#e=this.initialStylesByElement=new WeakMap;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let o=t.initialStylesByElement.get(e);o||t.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&p0(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(p0(this._element,this._initialStyles),this._endStyles&&(p0(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(h6(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(h6(this._element,this._endStyles),this._endStyles=null),p0(this._element,this._initialStyles),this._state=3)}}return t})();function pb(t){let n=null;return t.forEach((e,i)=>{(function w1e(t){return"display"===t||"position"===t})(i)&&(n=n||new Map,n.set(i,e))}),n}class XD{constructor(n,e,i,r){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&n.set(r,this._finished?i:LD(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){const e="start"===n?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class C1e{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,e){return!1}containsElement(n,e){return MD(n,e)}getParentElement(n){return q_(n)}query(n,e,i){return SD(n,e,i)}computeStyle(n,e,i){return window.getComputedStyle(n)[e]}animate(n,e,i,r,o,c=[]){const z={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(z.easing=o);const O=new Map,J=c.filter(Ee=>Ee instanceof XD);(function Ise(t,n){return 0===t||0===n})(i,r)&&J.forEach(Ee=>{Ee.currentSnapshot.forEach((ut,mt)=>O.set(mt,ut))});let le=function Ase(t){return t.length?t[0]instanceof Map?t:t.map(n=>PD(n)):[]}(e).map(Ee=>Ju(Ee));le=function Tse(t,n,e){if(e.size&&n.length){let i=n[0],r=[];if(e.forEach((o,c)=>{i.has(c)||r.push(c),i.set(c,o)}),r.length)for(let o=1;o<n.length;o++){let c=n[o];r.forEach(x=>c.set(x,LD(t,x)))}}return n}(n,le,O);const be=function b1e(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=pb(n[0]),n.length>1&&(i=pb(n[n.length-1]))):n instanceof Map&&(e=pb(n)),e||i?new x1e(t,e,i):null}(n,le);return new XD(n,le,z,be)}}let M1e=(()=>{class t extends vI{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:Xr.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?yI(e):e;return ZD(this._renderer,null,i,"register",[r]),new S1e(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Z8),Sn(ao))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class S1e extends qQ{constructor(n,e){super(),this._id=n,this._renderer=e}create(n,e){return new E1e(this._id,n,e||{},this._renderer)}}class E1e{constructor(n,e,i,r){this.id=n,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(n,e){return this._renderer.listen(this.element,`@@${this.id}:${n}`,e)}_command(n,...e){return ZD(this._renderer,this.element,this.id,n,e)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ZD(t,n,e,i,r){return t.setProperty(n,`@@${e}:${i}`,r)}const $D="@.disabled";let A1e=(()=>{class t{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,c)=>{const x=c?.parentNode(o);x&&c.removeChild(x,o)}}createRenderer(e,i){const o=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let J=this._rendererCache.get(o);return J||(J=new qD("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,J)),J}const c=i.id,x=i.id+"-"+this._currentId;this._currentId++,this.engine.register(x,e);const z=J=>{Array.isArray(J)?J.forEach(z):this.engine.registerTrigger(c,x,e,J.name,J)};return i.data.animation.forEach(z),new z1e(this,x,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,x]=o;c(x)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(Z8),Sn(Gm),Sn(Sr))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();class qD{constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){"@"==e.charAt(0)&&e==$D?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i){return this.delegate.listen(n,e,i)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}}class z1e extends qD{constructor(n,e,i,r,o){super(e,i,r,o),this.factory=n,this.namespaceId=e}setProperty(n,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==$D?this.disableAnimations(n,i=void 0===i||!!i):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i){if("@"==e.charAt(0)){const r=function P1e(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(n);let o=e.slice(1),c="";return"@"!=o.charAt(0)&&([o,c]=function I1e(t){const n=t.indexOf(".");return[t.substring(0,n),t.slice(n+1)]}(o)),this.engine.listen(this.namespaceId,r,o,c,x=>{this.factory.scheduleListenerCallback(x._data||-1,i,x)})}return this.delegate.listen(n,e,i)}}let T1e=(()=>{class t extends Gm{constructor(e,i,r,o){super(e.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(ao),Sn(K_),Sn(cb),Sn(Pu))};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac})}return t})();const KD=[{provide:vI,useClass:M1e},{provide:cb,useFactory:function L1e(){return new Kse}},{provide:Gm,useClass:T1e},{provide:Z8,useFactory:function D1e(t,n,e){return new A1e(t,n,e)},deps:[jg,Gm,Sr]}],mb=[{provide:K_,useFactory:()=>new C1e},{provide:B2,useValue:"BrowserAnimations"},...KD],QD=[{provide:K_,useClass:ED},{provide:B2,useValue:"NoopAnimations"},...KD];let O1e=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?QD:mb}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:mb,imports:[WS]})}return t})(),B1e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,pc,_o]})}return t})(),X1e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,_o]})}return t})(),Z1e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,_o]})}return t})(),Mce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[Gy,pc,_o,V3,qI,Z1e]})}return t})();const zce={provide:new Gn("mat-menu-scroll-strategy"),deps:[Hl],useFactory:function Ace(t){return()=>t.scrollStrategies.reposition()}};let Pce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[zce],imports:[pc,V3,_o,J4,Bu,_o]})}return t})();const Oce={provide:new Gn("mat-select-scroll-strategy"),deps:[Hl],useFactory:function Dce(t){return()=>t.scrollStrategies.reposition()}};let cO=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[Oce],imports:[pc,J4,pm,_o,Bu,i_,pm,_o]})}return t})();const Fce={provide:new Gn("mat-tooltip-scroll-strategy"),deps:[Hl],useFactory:function Rce(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}};let lO=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[Fce],imports:[BI,pc,J4,_o,_o,Bu]})}return t})(),yb=(()=>{class t{constructor(){this.changes=new ne,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const o=e*i;return`${o+1} \u2013 ${o<(r=Math.max(r,0))?Math.min(o+i,r):o+i} of ${r}`}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Gce={provide:yb,deps:[[new Il,new b0,yb]],useFactory:function Uce(t){return t||new yb}};let Wce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[Gce],imports:[pc,Y_,cO,lO]})}return t})(),Xce=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[pc,_o,Bu,Bu,_o]})}return t})(),dO=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})(),o2e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[dO,_o,V3,pc,dO,_o]})}return t})(),c2e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[J4,A3,pc,Y_,_o,_o]})}return t})(),_b=(()=>{class t{constructor(){this.changes=new ne}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Ot({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const d2e={provide:_b,deps:[[new Il,new b0,_b]],useFactory:function u2e(t){return t||new _b}};let h2e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({providers:[d2e],imports:[pc,_o]})}return t})(),E2e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[Tv]})}return t})(),k2e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,E2e,_o]})}return t})(),R2e=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[_o,_o]})}return t})(),r7=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[Xce,R2e,Mce,X1e,Y_,Pce,kae,coe,B1e,k2e,Wce,lO,h2e,cO,c2e,dae,o2e,Eoe,Cre]})}return t})();var wO={prefix:"fal",iconName:"angle-double-left",icon:[320,512,[],"f100","M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"]},CO={prefix:"fal",iconName:"angle-double-right",icon:[320,512,[],"f101","M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"]},MO={prefix:"fal",iconName:"angle-down",icon:[256,512,[],"f107","M119.5 326.9L3.5 209.1c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0L128 287.3l100.4-102.2c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L136.5 327c-4.7 4.6-12.3 4.6-17-.1z"]},SO={prefix:"fal",iconName:"angle-left",icon:[192,512,[],"f104","M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z"]},EO={prefix:"fal",iconName:"angle-right",icon:[192,512,[],"f105","M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z"]},AO={prefix:"fal",iconName:"angle-up",icon:[256,512,[],"f106","M136.5 185.1l116 117.8c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L128 224.7 27.6 326.9c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17l116-117.8c4.7-4.6 12.3-4.6 17 .1z"]},zO={prefix:"fal",iconName:"arrow-down",icon:[448,512,[],"f063","M443.5 248.5l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L241 419.9V44c0-6.6-5.4-12-12-12h-10c-6.6 0-12 5.4-12 12v375.9L28.5 241.4c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l211 211.1c4.7 4.7 12.3 4.7 17 0l211-211.1c4.8-4.8 4.8-12.3.1-17z"]},PO={prefix:"fal",iconName:"arrow-left",icon:[448,512,[],"f060","M231.536 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L60.113 273H436c6.627 0 12-5.373 12-12v-10c0-6.627-5.373-12-12-12H60.113L238.607 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L3.515 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"]},IO={prefix:"fal",iconName:"arrow-right",icon:[448,512,[],"f061","M216.464 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L387.887 239H12c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h375.887L209.393 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L233.434 36.465c-4.686-4.687-12.284-4.687-16.97 0z"]},TO={prefix:"fal",iconName:"arrow-up",icon:[448,512,[],"f062","M4.465 263.536l7.07 7.071c4.686 4.686 12.284 4.686 16.971 0L207 92.113V468c0 6.627 5.373 12 12 12h10c6.627 0 12-5.373 12-12V92.113l178.494 178.493c4.686 4.686 12.284 4.686 16.971 0l7.07-7.071c4.686-4.686 4.686-12.284 0-16.97l-211.05-211.05c-4.686-4.686-12.284-4.686-16.971 0L4.465 246.566c-4.687 4.686-4.687 12.284 0 16.97z"]},LO={prefix:"fal",iconName:"baby",icon:[384,512,[],"f77c","M374.2 160.3c-17.4-25.2-52-32.1-77.9-14.5l-36.4 25c-29.4 20.2-86 34.3-135.9 0l-36.4-25C61.9 128.2 27.2 135 9.8 160.3c-17.5 25.5-11 60.4 14.4 77.9l36.4 24.9c10.9 7.5 22.8 14.1 35.4 19.8v22.6l-54.3 56.2c-19.2 17.8-23.5 46.4-10 69.3L70 487.1c10.3 15.4 27.9 24.9 46.6 24.9 10 0 19.8-2.7 28.4-7.8 13-7.7 52.3-40.5 2-96.5l18.4-11.6c15.1 5.3 37.9 5.3 53.1 0l18.4 11.6c-50.3 56-11 88.8 2 96.5 8.6 5.1 18.4 7.8 28.4 7.8 18.7 0 36.2-9.5 46.6-24.9l38.3-56.1c13.5-22.9 9.1-51.5-10-69.3L288 305.5v-22.6c12.6-5.6 24.4-12.3 35.4-19.8l36.4-24.9c25.4-17.5 31.9-52.5 14.4-77.9zm-237 283.5c6.7 11.4 2.9 26.1-8.5 32.9-3.8 2.3-8 3.3-12.2 3.3-8.2 0-16.2-4.2-20.7-11.8l-36.6-53.4c-6-10.2-3.7-23.3 5.5-30.8l38.8-41.2c.7.8 1 1.8 1.7 2.6l35.2 35.2-29.4 27.7 26.2 35.5zm82.9-85.2c-13.2 13.2-43.5 12.8-56.2 0L128 322.7V312h128v10.7l-35.9 35.9zm99.1 25.4c9.2 7.5 11.5 20.6 5.5 30.8l-36.6 53.4c-4.5 7.6-12.5 11.8-20.7 11.8-4.1 0-8.3-1.1-12.2-3.3-11.4-6.7-15.2-21.5-8.5-32.9l26.1-35.6-29.4-27.7 35.2-35.2c.7-.7 1.1-1.8 1.7-2.6l38.9 41.3zm22.4-172.2l-36.3 24.9c-15.4 10.5-32 18.5-49.3 24.4V280H128v-18.9c-17.3-5.9-33.9-13.8-49.3-24.4l-36.3-24.9c-26.4-18.2 1.2-57.3 27.2-39.6l36.3 24.9c47.2 32.4 117.3 37.7 172.1 0l36.3-24.9c26.1-17.7 53.7 21.4 27.3 39.6zM192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm0-128c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48z"]},DO={prefix:"fal",iconName:"bars",icon:[448,512,[],"f0c9","M442 114H6a6 6 0 0 1-6-6V84a6 6 0 0 1 6-6h436a6 6 0 0 1 6 6v24a6 6 0 0 1-6 6zm0 160H6a6 6 0 0 1-6-6v-24a6 6 0 0 1 6-6h436a6 6 0 0 1 6 6v24a6 6 0 0 1-6 6zm0 160H6a6 6 0 0 1-6-6v-24a6 6 0 0 1 6-6h436a6 6 0 0 1 6 6v24a6 6 0 0 1-6 6z"]},OO={prefix:"fal",iconName:"boot",icon:[512,512,[],"f782","M415 247.8L352 232V128c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H32C14.3 0 0 14.3 0 32v434.7c0 8.5 3.4 16.6 9.4 22.6l13.3 13.3c6 6 14.1 9.4 22.6 9.4h37.5c8.5 0 16.6-3.4 22.6-9.4L128 480l22.6 22.6c6 6 14.1 9.4 22.6 9.4h37.5c8.5 0 16.6-3.4 22.6-9.4L256 480l22.6 22.6c6 6 14.1 9.4 22.6 9.4h37.5c8.5 0 16.6-3.4 22.6-9.4L384 480l22.6 22.6c6 6 14.1 9.4 22.6 9.4h37.5c8.5 0 16.6-3.4 22.6-9.4l13.3-13.3c6-6 9.4-14.1 9.4-22.6v-94.8c0-58.7-40-109.9-97-124.1zM32 32h320v64H32V32zm448 434.7L466.7 480h-37.5l-22.6-22.6c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4L338.7 480h-37.5l-22.6-22.6c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4L210.7 480h-37.5l-22.6-22.6c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4L82.7 480H45.3L32 466.7V416h448v50.7zm0-82.7H32V128h288v32h-88c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h88v32h-88c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h88l87.3 22.8c42.8 10.7 72.7 49 72.7 93.1V384z"]},kO={prefix:"fal",iconName:"caret-square-down",icon:[448,512,[],"f150","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm16 400c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V80c0-8.8 7.2-16 16-16h352c8.8 0 16 7.2 16 16v352zm-96-208l-96 96-96-96h192m-192-32c-28.4 0-42.8 34.5-22.6 54.6l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c20.1-20.1 5.9-54.6-22.6-54.6H128z"]},NO={prefix:"fal",iconName:"caret-square-up",icon:[448,512,[],"f151","M48 480h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48zM32 80c0-8.8 7.2-16 16-16h352c8.8 0 16 7.2 16 16v352c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V80zm96 208l96-96 96 96H128m192 32c28.4 0 42.8-34.5 22.6-54.6l-96-96c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-20 20.1-5.8 54.6 22.7 54.6h192z"]},RO={prefix:"fal",iconName:"chevron-double-left",icon:[384,512,[],"f323","M349.5 475.5l-211.1-211c-4.7-4.7-4.7-12.3 0-17l211.1-211c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L178.1 256l195.5 195.5c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.6-12.3 4.6-17-.1zm-111 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L50.1 256 245.5 60.5c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0l-211.1 211c-4.7 4.7-4.7 12.3 0 17l211.1 211c4.8 4.8 12.4 4.8 17.1.1z"]},FO={prefix:"fal",iconName:"chevron-double-right",icon:[384,512,[],"f324","M34.5 36.5l211.1 211c4.7 4.7 4.7 12.3 0 17l-211.1 211c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L205.9 256 10.5 60.5c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.6-4.6 12.2-4.6 16.9.1zm111 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L333.9 256 138.5 451.5c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l211.1-211c4.7-4.7 4.7-12.3 0-17l-211.1-211c-4.8-4.8-12.4-4.8-17.1-.1z"]},VO={prefix:"fal",iconName:"chevron-down",icon:[448,512,[],"f078","M443.5 162.6l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L224 351 28.5 155.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l211 211.1c4.7 4.7 12.3 4.7 17 0l211-211.1c4.8-4.7 4.8-12.3.1-17z"]},HO={prefix:"fal",iconName:"chevron-left",icon:[256,512,[],"f053","M238.475 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L50.053 256 245.546 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L10.454 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"]},Ib={prefix:"fal",iconName:"chevron-right",icon:[256,512,[],"f054","M17.525 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L205.947 256 10.454 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L34.495 36.465c-4.686-4.687-12.284-4.687-16.97 0z"]},BO={prefix:"fal",iconName:"chevron-up",icon:[448,512,[],"f077","M4.465 366.475l7.07 7.071c4.686 4.686 12.284 4.686 16.971 0L224 178.053l195.494 195.493c4.686 4.686 12.284 4.686 16.971 0l7.07-7.071c4.686-4.686 4.686-12.284 0-16.97l-211.05-211.051c-4.686-4.686-12.284-4.686-16.971 0L4.465 349.505c-4.687 4.686-4.687 12.284 0 16.97z"]},jO={prefix:"fal",iconName:"coffee",icon:[576,512,[],"f0f4","M517.9 448H26.1c-24.5 0-33.1-32-20-32h531.8c13.1 0 4.5 32-20 32zM576 159.1c.5 53.4-42.7 96.9-96 96.9h-32v32c0 53-43 96-96 96H160c-53 0-96-43-96-96V76c0-6.6 5.4-12 12-12h402.8c52.8 0 96.7 42.2 97.2 95.1zM416 96H96v192c0 35.3 28.7 64 64 64h192c35.3 0 64-28.7 64-64V96zm128 64c0-35.3-28.7-64-64-64h-32v128h32c35.3 0 64-28.7 64-64z"]},UO={prefix:"fal",iconName:"cog",icon:[512,512,[],"f013","M482.696 299.276l-32.61-18.827a195.168 195.168 0 0 0 0-48.899l32.61-18.827c9.576-5.528 14.195-16.902 11.046-27.501-11.214-37.749-31.175-71.728-57.535-99.595-7.634-8.07-19.817-9.836-29.437-4.282l-32.562 18.798a194.125 194.125 0 0 0-42.339-24.48V38.049c0-11.13-7.652-20.804-18.484-23.367-37.644-8.909-77.118-8.91-114.77 0-10.831 2.563-18.484 12.236-18.484 23.367v37.614a194.101 194.101 0 0 0-42.339 24.48L105.23 81.345c-9.621-5.554-21.804-3.788-29.437 4.282-26.36 27.867-46.321 61.847-57.535 99.595-3.149 10.599 1.47 21.972 11.046 27.501l32.61 18.827a195.168 195.168 0 0 0 0 48.899l-32.61 18.827c-9.576 5.528-14.195 16.902-11.046 27.501 11.214 37.748 31.175 71.728 57.535 99.595 7.634 8.07 19.817 9.836 29.437 4.283l32.562-18.798a194.08 194.08 0 0 0 42.339 24.479v37.614c0 11.13 7.652 20.804 18.484 23.367 37.645 8.909 77.118 8.91 114.77 0 10.831-2.563 18.484-12.236 18.484-23.367v-37.614a194.138 194.138 0 0 0 42.339-24.479l32.562 18.798c9.62 5.554 21.803 3.788 29.437-4.283 26.36-27.867 46.321-61.847 57.535-99.595 3.149-10.599-1.47-21.972-11.046-27.501zm-65.479 100.461l-46.309-26.74c-26.988 23.071-36.559 28.876-71.039 41.059v53.479a217.145 217.145 0 0 1-87.738 0v-53.479c-33.621-11.879-43.355-17.395-71.039-41.059l-46.309 26.74c-19.71-22.09-34.689-47.989-43.929-75.958l46.329-26.74c-6.535-35.417-6.538-46.644 0-82.079l-46.329-26.74c9.24-27.969 24.22-53.869 43.929-75.969l46.309 26.76c27.377-23.434 37.063-29.065 71.039-41.069V44.464a216.79 216.79 0 0 1 87.738 0v53.479c33.978 12.005 43.665 17.637 71.039 41.069l46.309-26.76c19.709 22.099 34.689 47.999 43.929 75.969l-46.329 26.74c6.536 35.426 6.538 46.644 0 82.079l46.329 26.74c-9.24 27.968-24.219 53.868-43.929 75.957zM256 160c-52.935 0-96 43.065-96 96s43.065 96 96 96 96-43.065 96-96-43.065-96-96-96zm0 160c-35.29 0-64-28.71-64-64s28.71-64 64-64 64 28.71 64 64-28.71 64-64 64z"]},GO={prefix:"fal",iconName:"compass",icon:[496,512,[],"f14e","M264.97 272.97c9.38-9.37 9.38-24.57 0-33.94-9.37-9.37-24.57-9.37-33.94 0-9.38 9.37-9.38 24.57 0 33.94 9.37 9.37 24.57 9.37 33.94 0zM351.44 125c-2.26 0-4.51.37-6.71 1.16l-154.9 55.85c-7.49 2.7-13.1 8.31-15.8 15.8l-55.85 154.91c-5.65 15.67 10.33 34.27 26.4 34.27 2.26 0 4.51-.37 6.71-1.16l154.9-55.85c7.49-2.7 13.1-8.31 15.8-15.8l55.85-154.9c5.64-15.67-10.33-34.28-26.4-34.28zm-58.65 175.79l-140.1 50.51 50.51-140.11 140.11-50.51-50.52 140.11zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm0 464c-119.1 0-216-96.9-216-216S128.9 40 248 40s216 96.9 216 216-96.9 216-216 216z"]},WO={prefix:"fal",iconName:"dot-circle",icon:[512,512,[],"f192","M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 464c-118.663 0-216-96.055-216-216 0-118.663 96.055-216 216-216 118.663 0 216 96.055 216 216 0 118.663-96.055 216-216 216zm0-296c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80zm0 128c-26.467 0-48-21.533-48-48s21.533-48 48-48 48 21.533 48 48-21.533 48-48 48z"]},YO={prefix:"fal",iconName:"ellipsis-h",icon:[320,512,[],"f141","M192 256c0 17.7-14.3 32-32 32s-32-14.3-32-32 14.3-32 32-32 32 14.3 32 32zm88-32c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm-240 0c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"]},XO={prefix:"fal",iconName:"ellipsis-v",icon:[64,512,[],"f142","M32 224c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM0 136c0 17.7 14.3 32 32 32s32-14.3 32-32-14.3-32-32-32-32 14.3-32 32zm0 240c0 17.7 14.3 32 32 32s32-14.3 32-32-14.3-32-32-32-32 14.3-32 32z"]},ZO={prefix:"fal",iconName:"ellipsis-v-alt",icon:[192,512,[],"f39c","M96 152c39.8 0 72-32.2 72-72S135.8 8 96 8 24 40.2 24 80s32.2 72 72 72zm0-112c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm0 144c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 112c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm0 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 112c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40z"]},$O={prefix:"fal",iconName:"map-marker-alt",icon:[384,512,[],"f3c5","M192 96c-52.935 0-96 43.065-96 96s43.065 96 96 96 96-43.065 96-96-43.065-96-96-96zm0 160c-35.29 0-64-28.71-64-64s28.71-64 64-64 64 28.71 64 64-28.71 64-64 64zm0-256C85.961 0 0 85.961 0 192c0 77.413 26.97 99.031 172.268 309.67 9.534 13.772 29.929 13.774 39.465 0C357.03 291.031 384 269.413 384 192 384 85.961 298.039 0 192 0zm0 473.931C52.705 272.488 32 256.494 32 192c0-42.738 16.643-82.917 46.863-113.137S149.262 32 192 32s82.917 16.643 113.137 46.863S352 149.262 352 192c0 64.49-20.692 80.47-160 281.931z"]},qO={prefix:"fal",iconName:"money-bill",icon:[640,512,[],"f0d6","M320 144c-53 0-96 50.1-96 112 0 61.8 43 112 96 112s96-50.1 96-112-43-112-96-112zm0 192c-35.3 0-64-35.9-64-80s28.7-80 64-80 64 35.9 64 80-28.7 80-64 80zM608 64H32C14.3 64 0 78.3 0 96v320c0 17.7 14.3 32 32 32h576c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zM32 96h64c0 35.3-28.7 64-64 64V96zm0 320v-64c35.3 0 64 28.7 64 64H32zm576 0h-64c0-35.3 28.7-64 64-64v64zm0-96c-52.9 0-96 43.1-96 96H128c0-52.9-43.1-96-96-96V192c52.9 0 96-43.1 96-96h384c0 52.9 43.1 96 96 96v128zm0-160c-35.3 0-64-28.7-64-64h64v64z"]},KO={prefix:"fal",iconName:"pennant",icon:[576,512,[],"f456","M552 191.3c-30 6.2-115.6 12.5-260.7-63.6-87-45.7-158.1-51.8-210-45.2 9-8.8 14.7-21 14.7-34.5C96 21.5 74.5 0 48 0S0 21.5 0 48c0 20.8 13.4 38.4 32 45.1V504c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-79.6c40.2-27.2 102-56.4 179.5-60.2 28.7-1.4 76-5.8 137.9-18.8 4.4-.9 109.4-23.8 190-121.7 11.8-14.3-.7-36.2-19.4-32.4zM48 32c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm326.9 282.1c-59.9 12.5-105.4 16.8-133 18.2-84.8 4.2-145.3 35.1-177.9 54.2V117.7c47.2-10.6 119.5-10.5 212.4 38.3 118.9 62.4 202.3 72.4 249.5 70.4-69.5 69.7-150.1 87.5-151 87.7z"]},QO={prefix:"fal",iconName:"redo",icon:[512,512,[],"f01e","M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"]},JO={prefix:"fal",iconName:"route",icon:[512,512,[],"f4d7","M432 352H320c-26.5 0-48-21.5-48-48s21.5-48 48-48h96s96-107 96-160-43-96-96-96-96 43-96 96c0 34.6 40.9 92.2 69.3 128H320c-44.1 0-80 35.9-80 80s35.9 80 80 80h112c26.5 0 48 21.5 48 48s-21.5 48-48 48H122.7c28.4-35.8 69.3-93.4 69.3-128 0-53-43-96-96-96S0 299 0 352s96 160 96 160h336c44.1 0 80-35.9 80-80s-35.9-80-80-80zM352 96c0-35.3 28.7-64 64-64s64 28.7 64 64c0 20.4-30.1 68-64 110.4-34-42.6-64-90.6-64-110.4zM32 352c0-35.3 28.7-64 64-64s64 28.7 64 64c0 20.4-30.1 68-64 110.4-34-42.6-64-90.6-64-110.4zm64-16c-21.2 0-21.1 32 0 32 21.2 0 21.1-32 0-32zM416 80c-21.2 0-21.1 32 0 32 21.2 0 21.1-32 0-32z"]},ek={prefix:"fal",iconName:"search",icon:[512,512,[],"f002","M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395 312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5 0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17 0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208 32s176 78.7 176 176-78.7 176-176 176z"]},tk={prefix:"fal",iconName:"search-location",icon:[512,512,[],"f689","M208 96c-49.53 0-89.81 40.3-89.81 89.83 0 34.66 38.34 87.2 70.53 125.2 4.81 5.7 11.84 8.97 19.28 8.97s14.47-3.27 19.31-8.97c32.16-38 70.5-90.55 70.5-125.2C297.81 136.3 257.53 96 208 96zm0 188.23c-35.31-42.7-57.81-80.89-57.81-98.41 0-31.89 25.94-57.83 57.81-57.83s57.81 25.94 57.81 57.83c0 17.52-22.5 55.71-57.81 98.41zM208 160c-13.25 0-24 10.74-24 24 0 13.25 10.75 24 24 24s24-10.75 24-24c0-13.26-10.75-24-24-24zm300.47 321.58l-128.99-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3c34.3-37.1 55.3-86.6 55.3-141.09C415.98 93.1 322.88 0 207.99 0S0 93.1 0 207.99c0 114.89 93.1 207.99 207.99 207.99 54.5 0 103.99-21 141.09-55.2v10.2c0 3.2 1.3 6.2 3.5 8.5l128.99 128.99c4.7 4.7 12.3 4.7 17 0l9.9-9.9c4.71-4.69 4.71-12.29 0-16.99zm-300.48-97.6C110.7 383.98 32 305.29 32 207.99 32 110.69 110.7 32 207.99 32s175.99 78.7 175.99 175.99c0 97.3-78.69 175.99-175.99 175.99z"]},nk={prefix:"fal",iconName:"shoe-prints",icon:[640,512,[],"f54b","M337.46 272c-34.91 0-76.16 14.06-104.73 34.29-24.79 17.55-44.52 34.29-104.73 34.29H64c-35.35 0-64 30.7-64 68.57S28.65 480 64 480h64l57.53 14.82C217.42 504.3 250.17 512 293.3 512 403.84 512 512 456.84 512 374.86 512 306.29 427.82 272 337.46 272zM112 448H64c-17.05 0-32-18.16-32-38.86 0-20.17 14.36-36.57 32-36.57h48V448zm81.51 15.84L144 451.08v-79.11c55.33-2.95 80.75-20.66 103.08-36.62C338.33 270.38 480 316.73 480 374.86c0 62.15-121.49 137.92-286.49 88.98zM421.29 0c-43.42 0-76.17 7.78-107.77 17.17L256 32h-64c-35.35 0-64 32.98-64 70.86 0 37.87 28.65 68.57 64 68.57h64c60.2 0 79.94 16.73 104.73 34.29C389.3 225.94 430.54 240 465.46 240 555.82 240 640 205.71 640 137.14 640 55.84 533.12 0 421.29 0zM240 139.43h-48c-17.64 0-32-16.4-32-36.57C160 82.16 174.95 64 192 64h48v75.43zM465.46 208c-27.58 0-62.24-11.41-86.24-28.4-23.71-16.89-48.76-36.45-107.22-39.56V60.92l50.65-13.07C352.05 39.1 381.72 32 421.29 32 473.38 32 608 58.02 608 137.14c0 46.52-71.71 70.86-142.54 70.86z"]},ik={prefix:"fal",iconName:"shopping-cart",icon:[576,512,[],"f07a","M551.991 64H129.28l-8.329-44.423C118.822 8.226 108.911 0 97.362 0H12C5.373 0 0 5.373 0 12v8c0 6.627 5.373 12 12 12h78.72l69.927 372.946C150.305 416.314 144 431.42 144 448c0 35.346 28.654 64 64 64s64-28.654 64-64a63.681 63.681 0 0 0-8.583-32h145.167a63.681 63.681 0 0 0-8.583 32c0 35.346 28.654 64 64 64 35.346 0 64-28.654 64-64 0-17.993-7.435-34.24-19.388-45.868C506.022 391.891 496.76 384 485.328 384H189.28l-12-64h331.381c11.368 0 21.177-7.976 23.496-19.105l43.331-208C578.592 77.991 567.215 64 551.991 64zM240 448c0 17.645-14.355 32-32 32s-32-14.355-32-32 14.355-32 32-32 32 14.355 32 32zm224 32c-17.645 0-32-14.355-32-32s14.355-32 32-32 32 14.355 32 32-14.355 32-32 32zm38.156-192H171.28l-36-192h406.876l-40 192z"]},rk={prefix:"fal",iconName:"sort",icon:[320,512,[],"f0dc","M288 288H32c-28.4 0-42.8 34.5-22.6 54.6l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c20-20.1 5.7-54.6-22.7-54.6zM160 448L32 320h256L160 448zM32 224h256c28.4 0 42.8-34.5 22.6-54.6l-128-128c-12.5-12.5-32.8-12.5-45.3 0l-128 128C-10.7 189.5 3.6 224 32 224zM160 64l128 128H32L160 64z"]},ok={prefix:"fal",iconName:"stethoscope",icon:[512,512,[],"f0f1","M430.1 96.5c-43.6 1-78.7 37.5-78.1 81.1.5 38.2 27.8 69.9 64 77.2v105.6c0 65.9-57.4 119.5-128 119.5s-128-53.6-128-119.5v-8.9c71.9-8 128-69.1 128-143.1V25.8c0-5.5-3.7-10.3-9.1-11.6L223.5.4c-6.4-1.6-12.9 2.3-14.6 8.7l-1.9 7.8c-1.6 6.4 2.3 12.9 8.7 14.6l40.3 10v165.8c0 61.8-49.5 112.9-111.3 113.2-62.1.4-112.7-50-112.7-112v-167l40.2-10.1c6.4-1.6 10.3-8.1 8.7-14.6L79 9.1C77.4 2.7 70.9-1.2 64.4.4L9.1 14.2C3.7 15.5 0 20.3 0 25.8v182.6c0 74 56.1 135.1 128 143.1v8.9C128 444 199.8 512 288 512s160-68 160-151.5V254.9c36.5-7.4 64-39.7 64-78.4 0-44.9-36.9-81.1-81.9-80zm1.9 128c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm23.5-48c0 13-10.5 23.5-23.5 23.5s-23.5-10.5-23.5-23.5S419 153 432 153s23.5 10.5 23.5 23.5z"]},ak={prefix:"fal",iconName:"times",icon:[320,512,[],"f00d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]},sk={prefix:"fal",iconName:"times-circle",icon:[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 464c-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216 0 118.7-96.1 216-216 216zm94.8-285.3L281.5 256l69.3 69.3c4.7 4.7 4.7 12.3 0 17l-8.5 8.5c-4.7 4.7-12.3 4.7-17 0L256 281.5l-69.3 69.3c-4.7 4.7-12.3 4.7-17 0l-8.5-8.5c-4.7-4.7-4.7-12.3 0-17l69.3-69.3-69.3-69.3c-4.7-4.7-4.7-12.3 0-17l8.5-8.5c4.7-4.7 12.3-4.7 17 0l69.3 69.3 69.3-69.3c4.7-4.7 12.3-4.7 17 0l8.5 8.5c4.6 4.7 4.6 12.3 0 17z"]},ck={prefix:"fal",iconName:"toggle-off",icon:[576,512,[],"f204","M384 96c42.738 0 82.917 16.643 113.137 46.863S544 213.262 544 256s-16.643 82.917-46.863 113.137S426.738 416 384 416H192c-42.738 0-82.917-16.643-113.137-46.863S32 298.738 32 256s16.643-82.917 46.863-113.137S149.262 96 192 96h192m0-32H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zm-192 96c52.935 0 96 43.065 96 96s-43.065 96-96 96-96-43.065-96-96 43.065-96 96-96m0-32c-70.692 0-128 57.307-128 128s57.308 128 128 128 128-57.307 128-128-57.308-128-128-128z"]},lk={prefix:"fal",iconName:"toggle-on",icon:[576,512,[],"f205","M384 96c88.426 0 160 71.561 160 160 0 88.426-71.561 160-160 160H192c-88.426 0-160-71.561-160-160 0-88.425 71.561-160 160-160h192m0-32H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zm0 304c61.856 0 112-50.144 112-112s-50.144-112-112-112-112 50.144-112 112c0 28.404 10.574 54.339 27.999 74.082C320.522 353.335 350.548 368 384 368z"]},uk={prefix:"fal",iconName:"toilet",icon:[384,512,[],"f7d8","M376 32c4.4 0 8-3.6 8-8V8c0-4.4-3.6-8-8-8H8C3.6 0 0 3.6 0 8v16c0 4.4 3.6 8 8 8h24v172.7C11.8 214.8 0 226.9 0 240c0 67.2 34.6 126.2 86.8 160.5l-21.4 70.2C59.1 491.2 74.5 512 96 512h192c21.5 0 36.9-20.8 30.6-41.3l-21.4-70.2C349.4 366.2 384 307.2 384 240c0-13.1-11.8-25.2-32-35.3V32h24zM64 32h256v160.4c-34-10.2-78.8-16.4-128-16.4s-94 6.2-128 16.4V32zm128 176c83.9 0 152 14.3 152 32s-68.1 32-152 32-152-14.3-152-32 68.1-32 152-32zM96 480l19.5-63.9C139 426.3 164.8 432 192 432s53-5.7 76.5-15.9L288 480H96zm96-80c-75.2 0-138.1-52.3-155.1-122.4 34.9 16 91.3 26.4 155.1 26.4s120.2-10.4 155.1-26.4C330.1 347.7 267.2 400 192 400zM152 64h-48c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V72c0-4.4-3.6-8-8-8z"]},dk={prefix:"fal",iconName:"tshirt",icon:[608,512,[],"f553","M606.4 111.6c-2.6-7.8-8-14.1-15.2-17.8L403.8 0l-7.9 11.1c-15.7 22-51.8 36.2-91.9 36.2s-76.2-14.2-91.9-36.2L204.2 0 16.8 93.8c-7.3 3.7-12.7 10-15.2 17.8-2.6 7.8-2 16.1 1.7 23.4l51.5 104c3.6 7.4 9.8 12.9 17.5 15.4 7.7 2.7 16 2 23.2-1.6l48.6-24v237.8c0 25 20.1 45.3 44.8 45.3h230.4c24.7 0 44.8-20.3 44.8-45.3V228.9l48.5 24c7.2 3.7 15.5 4.3 23.3 1.6 7.7-2.6 13.9-8.1 17.5-15.4L604.9 135c3.5-7.3 4.1-15.6 1.5-23.4zm-79.7 112.3L432 177.1v289.7c0 7.1-5.7 12.9-12.8 12.9H188.8c-7.1 0-12.8-5.8-12.8-12.9V177.1l-92.6 47.6-52.3-101.9 164.1-82.2c24 24.3 64.2 39 108.9 39S389 64.9 413 40.6L575.5 122l-48.8 101.9z"]},hk={prefix:"fal",iconName:"utensils",icon:[480,512,[],"f2e7","M344.1 470.3l14.2-164.8c-42.1-33.1-70.4-77-70.4-129.5C288 81.7 376.1 0 440 0c22.1 0 40 17.3 40 38.5v435c0 21.2-17.9 38.5-40 38.5h-56c-22.8 0-41.8-18.7-39.9-41.7zM320 176c0 51 32.2 85.5 71.8 114.5L376 473.1c-.3 3.7 3.4 6.9 8 6.9h56c4.3 0 8-3 8-6.5v-435c0-3.5-3.7-6.5-8-6.5-44.6 0-120 65.8-120 144zM240.7 33.8C237.4 14.3 219.5 0 194.6 0c-11.9 0-24.1 3.4-33.3 11.2C152.9 4.1 141.3 0 128 0s-24.9 4.1-33.3 11.2C85.5 3.4 73.3 0 61.4 0 36.2 0 18.6 14.5 15.3 33.8 13.5 43.2 0 118.4 0 149.9c0 50.9 26.7 91.6 71 110.7L59.6 471.4C58.4 493.4 75.9 512 98 512h60c22 0 39.6-18.5 38.4-40.6L185 260.6c44.2-19.1 71-59.8 71-110.7 0-31.5-13.5-106.7-15.3-116.1zM152.3 240l12.2 233.1c.2 3.7-2.7 6.9-6.5 6.9H98c-3.7 0-6.7-3.1-6.5-6.9L103.7 240C61.3 231.2 32 197 32 149.9c0-29.7 14.8-110.6 14.8-110.6 1.6-9.9 28.3-9.7 29.5.2V162c.9 11.5 28.2 11.7 29.5.2l7.4-122.9c1.6-9.7 27.9-9.7 29.5 0l7.4 122.9c1.3 11.4 28.6 11.2 29.5-.2V39.6c1.2-9.9 27.9-10.1 29.5-.2 0 0 14.8 80.9 14.8 110.6.1 46.8-29 81.2-71.6 90z"]},fk={prefix:"fal",iconName:"walking",icon:[320,512,[],"f554","M305.5 247.3l-19.6-21.1-8.7-28.5c-7.9-26.1-23.3-47.8-43.2-62.8 19.3-13.4 32-35.7 32-60.9 0-40.8-33.2-74-74-74s-74 33.2-74 74c0 15.7 4.9 30.3 13.3 42.3-14.7 3.8-28.4 9.8-45.3 17.4l-8.6 3.8c-24 10.5-43.4 30.1-54.9 55.2l-11.8 28c-7.3 17.2-5.7 35.7 4.2 50.7C24.6 286 41.2 295 58.4 295c12.5 0 24-4.7 32.9-12.9.2 1.4.4 2.7.6 4.1l-14.2 38.9-16.3 44.6L14 422.1c-18.7 20.4-18.7 52.4 0 72.9 9.6 10.5 23.2 16.6 37.2 16.6 14 0 27.6-6 37.2-16.6l46.7-51.2c9.6-10.6 17-22.9 22-36.5l8.7-23.9 10.6 10.7c.5.5.8 1.3.9 1.9l15.6 74.2C198 494.5 219 512 242.8 512c4 0 8.1-.5 12.1-1.5 27.4-6.9 44-34.6 38-62.9l-15.6-74.1c-2.8-13.2-7.8-25.6-14.7-36.7 1.8.2 3.6.3 5.5.3 20.3 0 38.9-12.6 47.4-32.2 8.6-19.5 4.7-41.6-10-57.6zM192 32c23.2 0 42 18.8 42 42s-18.8 42-42 42-42-18.8-42-42 18.8-42 42-42zm-65 364.3c-3.5 9.7-8.8 18.4-15.6 25.9l-46.7 51.2c-3.7 4.1-8.6 6.2-13.6 6.2-4.9 0-9.8-2.1-13.6-6.2-7.5-8.2-7.5-21.5 0-29.7l46.7-51.2c3.1-3.4 5.5-7.4 7.1-11.8l16.3-44.6.1.1 1 1.2 29 29.3-10.7 29.6zm141.1-91.1c-4.4 0-9-1.8-13-6.2l-23.5-25.3c-5-5.4-8.8-12.1-11-19.4-11.4-37.5-11.5-39.9-17.5-48.5l-20.9 91.7 43 43.4c10.4 10.6 17.7 24.2 20.8 39.3l15.6 74.1c2.4 11.3-4 22.6-14.4 25.2-1.5.4-3 .5-4.4.5-9.4 0-16.7-7.6-18.6-16.3l-15.6-74.2c-1.4-6.9-4.7-13-9.5-17.8L136 307.8c-11.6-13.8-15.7-31.2-11.9-47.7l15.8-69.3c-9 3.2-18.1 7.3-35.4 15-8 3.5-14.5 10-18.3 18.4L75 250.8c-3.7 8.7-10.1 12.3-16.6 12.3-12.5 0-25.2-13.4-18.2-29.9L51.7 206c8.3-18.2 21.9-31.9 38.6-39.2 34.2-15.1 48.7-22.8 76.6-22.8 36.3 0 68.3 25.3 79.8 63l10.3 33.9c.3 1 .8 2 1.6 2.8L282 269c14.1 15.3.9 36.2-13.9 36.2z"]},pk={prefix:"fal",iconName:"wheelchair",icon:[448,512,[],"f193","M443.875 396.323l3.151 7.353c2.611 6.092-.211 13.146-6.303 15.757l-42.421 19.273c-7.658 3.284-17.345.3-21.175-8.797L317.376 288H176a16 16 0 0 1-15.839-13.737C125.779 33.586 128.211 51.165 128 48c0-27.13 22.508-49.003 49.87-47.964 24.878.945 45.15 21.216 46.095 46.094C225.004 73.491 203.131 96 176 96c-3.115 0-6.156-.307-9.105-.874L176.162 160H308c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12H180.734l9.143 64H328a16 16 0 0 1 14.746 9.791l57.752 137.159 27.621-12.929c6.091-2.611 13.146.211 15.756 6.302zm-127.488-28.211C301.755 432.107 244.366 480 176 480c-79.401 0-144-64.599-144-144 0-58.714 35.326-109.325 85.836-131.717l-4.671-32.679C47.059 196.957 0 261.081 0 336c0 97.047 78.953 176 176 176 69.906 0 130.418-40.969 158.801-100.155l-18.414-43.733z"]};let Tb=(()=>{class t{constructor(e){e.addIcons(BO,VO,Ib,HO,RO,FO,ek,WO,ZO,YO,XO,sk,ak,tk,$O,pk,ck,lk,jO,dk,ik,hk,OO,uk,LO,ok,qO,TO,zO,PO,IO,SO,EO,wO,CO,kO,NO,nk,rk,KO,JO,MO,AO,fk,UO,GO,Ib,DO,QO)}static#e=this.\u0275fac=function(i){return new(i||t)(Sn(eP))};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[tP]})}return t})(),Lb=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[pc,O1e,oI,By,gI,Hd,Tb,r7,YL,tz,By,YL]})}return t})(),vIe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[pc,Lb,Tb,Vae,r7]})}return t})(),yIe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({})}return t})(),_Ie=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[pc,_o,yIe,A3]})}return t})(),bIe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t});static#n=this.\u0275inj=St({imports:[pc,gI,r7,oI,tP,Lb,_Ie]})}return t})();class xIe{http;prefix;suffix;constructor(n,e="/assets/i18n/",i=".json"){this.http=n,this.prefix=e,this.suffix=i}getTranslation(n){return this.http.get(`${this.prefix}${n}${this.suffix}`)}}function wIe(t){return new xIe(t,"./assets/i18n/")}let CIe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=wi({type:t,bootstrap:[Rae]});static#n=this.\u0275inj=St({imports:[WS,DG,tz.forRoot({loader:{provide:Wd,useFactory:wIe,deps:[B5]}}),Tb,r7,Lb,bIe,vIe,IX,By]})}return t})();QU().bootstrapModule(CIe).catch(t=>console.error(t))},19317:function(Ae){var w;w=function(){"use strict";function k(ue,fe){var ee=Object.keys(ue);if(Object.getOwnPropertySymbols){var de=Object.getOwnPropertySymbols(ue);fe&&(de=de.filter(function(pe){return Object.getOwnPropertyDescriptor(ue,pe).enumerable})),ee.push.apply(ee,de)}return ee}function G(ue){for(var fe=1;fe<arguments.length;fe++){var ee=null!=arguments[fe]?arguments[fe]:{};fe%2?k(Object(ee),!0).forEach(function(de){u(ue,de,ee[de])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(ee)):k(Object(ee)).forEach(function(de){Object.defineProperty(ue,de,Object.getOwnPropertyDescriptor(ee,de))})}return ue}function I(ue){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fe){return typeof fe}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(ue)}function u(ue,fe,ee){return fe in ue?Object.defineProperty(ue,fe,{value:ee,enumerable:!0,configurable:!0,writable:!0}):ue[fe]=ee,ue}function h(ue){return function(fe){if(Array.isArray(fe))return v(fe)}(ue)||function(fe){if(typeof Symbol<"u"&&null!=fe[Symbol.iterator]||null!=fe["@@iterator"])return Array.from(fe)}(ue)||g(ue)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(ue,fe){if(ue){if("string"==typeof ue)return v(ue,fe);var ee=Object.prototype.toString.call(ue).slice(8,-1);return"Object"===ee&&ue.constructor&&(ee=ue.constructor.name),"Map"===ee||"Set"===ee?Array.from(ue):"Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee)?v(ue,fe):void 0}}function v(ue,fe){(null==fe||fe>ue.length)&&(fe=ue.length);for(var ee=0,de=new Array(fe);ee<fe;ee++)de[ee]=ue[ee];return de}var m=function(ue){return"string"==typeof ue?document.querySelector(ue):ue()},f=function(ue,fe){var ee="string"==typeof ue?document.createElement(ue):ue;for(var de in fe){var pe=fe[de];if("inside"===de)pe.append(ee);else if("dest"===de)m(pe[0]).insertAdjacentElement(pe[1],ee);else if("around"===de){var ce=pe;ce.parentNode.insertBefore(ee,ce),ee.append(ce),null!=ce.getAttribute("autofocus")&&ce.focus()}else de in ee?ee[de]=pe:ee.setAttribute(de,pe)}return ee},_=function(ue,fe){return ue=String(ue).toLowerCase(),fe?ue.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):ue},S=function(ue,fe){return f("mark",G({innerHTML:ue},"string"==typeof fe&&{class:fe})).outerHTML},M=function(ue,fe){fe.input.dispatchEvent(new CustomEvent(ue,{bubbles:!0,detail:fe.feedback,cancelable:!0}))},D=function(ue,fe,ee){var de=ee||{},pe=de.mode,ce=de.diacritics,ae=de.highlight,ye=_(fe,ce);if(fe=String(fe),ue=_(ue,ce),"loose"===pe){var Me=(ue=ue.replace(/ /g,"")).length,_e=0,Fe=Array.from(fe).map(function(Ge,$e){return _e<Me&&ye[$e]===ue[_e]&&(Ge=ae?S(Ge,ae):Ge,_e++),Ge}).join("");if(_e===Me)return Fe}else{var Ue=ye.indexOf(ue);if(~Ue)return ue=fe.substring(Ue,Ue+ue.length),ae?fe.replace(ue,S(ue,ae)):fe}},R=function(ue,fe){return new Promise(function(ee,de){var pe;return(pe=ue.data).cache&&pe.store?ee():new Promise(function(ce,ae){return"function"==typeof pe.src?pe.src(fe).then(ce,ae):ce(pe.src)}).then(function(ce){try{return ue.feedback=pe.store=ce,M("response",ue),ee()}catch(ae){return de(ae)}},de)})},V=function(ue,fe){var ee=fe.data,de=fe.searchEngine,pe=[];ee.store.forEach(function(ae,ye){var Me=function(Ue){var Ge=Ue?ae[Ue]:ae,$e="function"==typeof de?de(ue,Ge):D(ue,Ge,{mode:de,diacritics:fe.diacritics,highlight:fe.resultItem.highlight});if($e){var He={match:$e,value:ae};Ue&&(He.key=Ue),pe.push(He)}};if(ee.keys){var _e,Fe=function(Ue,Ge){var $e=typeof Symbol<"u"&&Ue[Symbol.iterator]||Ue["@@iterator"];if(!$e){if(Array.isArray(Ue)||($e=g(Ue))){$e&&(Ue=$e);var He=0,Pe=function(){};return{s:Pe,n:function(){return He>=Ue.length?{done:!0}:{done:!1,value:Ue[He++]}},e:function(tt){throw tt},f:Pe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je,ht=!0,Re=!1;return{s:function(){$e=$e.call(Ue)},n:function(){var tt=$e.next();return ht=tt.done,tt},e:function(tt){Re=!0,je=tt},f:function(){try{ht||null==$e.return||$e.return()}finally{if(Re)throw je}}}}(ee.keys);try{for(Fe.s();!(_e=Fe.n()).done;)Me(_e.value)}catch(Ue){Fe.e(Ue)}finally{Fe.f()}}else Me()}),ee.filter&&(pe=ee.filter(pe));var ce=pe.slice(0,fe.resultsList.maxResults);fe.feedback={query:ue,matches:pe,results:ce},M("results",fe)},B="aria-expanded",U="aria-activedescendant",F="aria-selected",j=function(ue,fe){ue.feedback.selection=G({index:fe},ue.feedback.results[fe])},P=function(ue){ue.isOpen||((ue.wrapper||ue.input).setAttribute(B,!0),ue.list.removeAttribute("hidden"),ue.isOpen=!0,M("open",ue))},Q=function(ue){ue.isOpen&&((ue.wrapper||ue.input).setAttribute(B,!1),ue.input.setAttribute(U,""),ue.list.setAttribute("hidden",""),ue.isOpen=!1,M("close",ue))},$=function(ue,fe){var ee=fe.resultItem,de=fe.list.getElementsByTagName(ee.tag),pe=!!ee.selected&&ee.selected.split(" ");if(fe.isOpen&&de.length){var ce,ae,ye=fe.cursor;ue>=de.length&&(ue=0),ue<0&&(ue=de.length-1),fe.cursor=ue,ye>-1&&(de[ye].removeAttribute(F),pe&&(ae=de[ye].classList).remove.apply(ae,h(pe))),de[ue].setAttribute(F,!0),pe&&(ce=de[ue].classList).add.apply(ce,h(pe)),fe.input.setAttribute(U,de[fe.cursor].id),fe.list.scrollTop=de[ue].offsetTop-fe.list.clientHeight+de[ue].clientHeight+5,fe.feedback.cursor=fe.cursor,j(fe,ue),M("navigate",fe)}},oe=function(ue){$(ue.cursor+1,ue)},X=function(ue){$(ue.cursor-1,ue)},ie=function(ue,fe,ee){(ee=ee>=0?ee:ue.cursor)<0||(ue.feedback.event=fe,j(ue,ee),M("selection",ue),Q(ue))};function q(ue,fe){var ee=this;return new Promise(function(de,pe){var ce,ae,Me,_e,Fe;return ce=fe||((ae=ue.input)instanceof HTMLInputElement||ae instanceof HTMLTextAreaElement?ae.value:ae.innerHTML),Me=ce=ue.query?ue.query(ce):ce,Fe=ue.threshold,((_e=ue.trigger)?_e(Me):Me.length>=Fe)?R(ue,ce).then(function(Me){try{return ue.feedback instanceof Error?de():(V(ce,ue),ue.resultsList&&function(_e){var Fe=_e.resultsList,Ue=_e.list,Ge=_e.resultItem,$e=_e.feedback,He=$e.matches,Pe=$e.results;if(_e.cursor=-1,Ue.innerHTML="",He.length||Fe.noResults){var je=new DocumentFragment;Pe.forEach(function(ht,Re){var tt=f(Ge.tag,G({id:"".concat(Ge.id,"_").concat(Re),role:"option",innerHTML:ht.match,inside:je},Ge.class&&{class:Ge.class}));Ge.element&&Ge.element(tt,ht)}),Ue.append(je),Fe.element&&Fe.element(Ue,$e),P(_e)}else Q(_e)}(ue),ye.call(ee))}catch(_e){return pe(_e)}},pe):(Q(ue),ye.call(ee));function ye(){return de()}})}var se=function(ue,fe){for(var ee in ue)for(var de in ue[ee])fe(ee,de)},ne=function(ue){var fe,ee,de,pe=ue.events,ce=(fe=function(){return q(ue)},ee=ue.debounce,function(){clearTimeout(de),de=setTimeout(function(){return fe()},ee)}),ae=ue.events=G({input:G({},pe&&pe.input)},ue.resultsList&&{list:pe?G({},pe.list):{}}),ye={input:{input:function(){ce()},keydown:function(Me){!function(_e,Fe){switch(_e.keyCode){case 40:case 38:_e.preventDefault(),40===_e.keyCode?oe(Fe):X(Fe);break;case 13:Fe.submit||_e.preventDefault(),Fe.cursor>=0&&ie(Fe,_e);break;case 9:Fe.resultsList.tabSelect&&Fe.cursor>=0&&ie(Fe,_e);break;case 27:Fe.input.value="",Q(Fe)}}(Me,ue)},blur:function(){Q(ue)}},list:{mousedown:function(Me){Me.preventDefault()},click:function(Me){var _e,Fe,Ue,Ge,$e;_e=Me,Ue=(Fe=ue).resultItem.tag.toUpperCase(),Ge=Array.from(Fe.list.querySelectorAll(Ue)),($e=_e.target.closest(Ue))&&$e.nodeName===Ue&&ie(Fe,_e,Ge.indexOf($e))}}};se(ye,function(Me,_e){(ue.resultsList||"input"===_e)&&(ae[Me][_e]||(ae[Me][_e]=ye[Me][_e]))}),se(ae,function(Me,_e){ue[Me].addEventListener(_e,ae[Me][_e])})};function Ce(ue){var fe=this;return new Promise(function(ee,de){var pe,ce,ae;if(ae={role:"combobox","aria-owns":(ce=ue.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},f(ue.input,G(G({"aria-controls":ce.id,"aria-autocomplete":"both"},(pe=ue.placeHolder)&&{placeholder:pe}),!ue.wrapper&&G({},ae))),ue.wrapper&&(ue.wrapper=f("div",G({around:ue.input,class:ue.name+"_wrapper"},ae))),ce&&(ue.list=f(ce.tag,G({dest:[ce.destination,ce.position],id:ce.id,role:"listbox",hidden:"hidden"},ce.class&&{class:ce.class}))),ne(ue),ue.data.cache)return R(ue).then(function(Me){try{return ye.call(fe)}catch(_e){return de(_e)}},de);function ye(){return M("init",ue),ee()}return ye.call(fe)})}function xe(ue){var fe=ue.prototype;fe.init=function(){Ce(this)},fe.start=function(ee){q(this,ee)},fe.unInit=function(){if(this.wrapper){var ee=this.wrapper.parentNode;ee.insertBefore(this.input,this.wrapper),ee.removeChild(this.wrapper)}var de;se((de=this).events,function(pe,ce){de[pe].removeEventListener(ce,de.events[pe][ce])})},fe.open=function(){P(this)},fe.close=function(){Q(this)},fe.goTo=function(ee){$(ee,this)},fe.next=function(){oe(this)},fe.previous=function(){X(this)},fe.select=function(ee){ie(this,null,ee)},fe.search=function(ee,de,pe){return D(ee,de,pe)}}return function ue(fe){this.options=fe,this.id=ue.instances=(ue.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(ee){var de=ee.name,pe=ee.options,ce=ee.resultsList,ae=ee.resultItem;for(var ye in pe)if("object"===I(pe[ye]))for(var Me in ee[ye]||(ee[ye]={}),pe[ye])ee[ye][Me]=pe[ye][Me];else ee[ye]=pe[ye];ee.selector=ee.selector||"#"+de,ce.destination=ce.destination||ee.selector,ce.id=ce.id||de+"_list_"+ee.id,ae.id=ae.id||de+"_result",ee.input=m(ee.selector)}(this),xe.call(this,ue),Ce(this)}},Ae.exports=w()},48801:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(2952)),I=k(w(73026)),u=k(w(36512)),h=w(90621),g=w(45943);y.default=function v(m,f,_){void 0===_&&(_={});for(var M=g.getGeom(m).coordinates,D=0,R=0;R<M.length&&!(f>=D&&R===M.length-1);R++){if(D>=f){var V=f-D;if(V){var B=G.default(M[R],M[R-1])-180;return I.default(M[R],V,B,_)}return h.point(M[R])}D+=u.default(M[R],M[R+1],_)}return h.point(M[M.length-1])}},90201:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(2952)),I=w(90621),u=k(w(77459));y.default=function h(g,v,m,f){if(void 0===f&&(f={}),!I.isObject(f))throw new Error("options is invalid");if(!g)throw new Error("startPoint is required");if(!v)throw new Error("midPoint is required");if(!m)throw new Error("endPoint is required");var _=g,S=v,M=m,D=I.bearingToAzimuth(!0!==f.mercator?G.default(_,S):u.default(_,S)),R=I.bearingToAzimuth(!0!==f.mercator?G.default(M,S):u.default(M,S)),V=Math.abs(D-R);return!0===f.explementary?360-V:V}},45441:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(58570),G=6378137;function h(m){var f=0;if(m&&m.length>0){f+=Math.abs(g(m[0]));for(var _=1;_<m.length;_++)f-=Math.abs(g(m[_]))}return f}function g(m){var f,_,M,D,R,V,B=0,U=m.length;if(U>2){for(V=0;V<U;V++)V===U-2?(M=U-2,D=U-1,R=0):V===U-1?(M=U-1,D=0,R=1):(M=V,D=V+1,R=V+2),f=m[M],_=m[D],B+=(v(m[R][0])-v(f[0]))*Math.sin(v(_[1]));B=B*G*G/2}return B}function v(m){return m*Math.PI/180}y.default=function I(m){return k.geomReduce(m,function(f,_){return f+function u(m){var _,f=0;switch(m.type){case"Polygon":return h(m.coordinates);case"MultiPolygon":for(_=0;_<m.coordinates.length;_++)f+=h(m.coordinates[_]);return f;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(_)},0)}},65361:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943),I=w(8032);function h(g,v){for(var m=[],f=0,_=g;f<_.length;f++){var M=I.polygonclip(_[f],v);M.length>0&&((M[0][0]!==M[M.length-1][0]||M[0][1]!==M[M.length-1][1])&&M.push(M[0]),M.length>=4&&m.push(M))}return m}y.default=function u(g,v){var m=G.getGeom(g),f=m.type,_="Feature"===g.type?g.properties:{},S=m.coordinates;switch(f){case"LineString":case"MultiLineString":var M=[];return"LineString"===f&&(S=[S]),S.forEach(function(D){I.lineclip(D,v,M)}),1===M.length?k.lineString(M[0],_):k.multiLineString(M,_);case"Polygon":return k.polygon(h(S,v),_);case"MultiPolygon":return k.multiPolygon(S.map(function(D){return h(D,v)}),_);default:throw new Error("geometry "+f+" not supported")}}},8032:(Ae,y)=>{"use strict";function G(u,h,g,v){return 8&g?[u[0]+(h[0]-u[0])*(v[3]-u[1])/(h[1]-u[1]),v[3]]:4&g?[u[0]+(h[0]-u[0])*(v[1]-u[1])/(h[1]-u[1]),v[1]]:2&g?[v[2],u[1]+(h[1]-u[1])*(v[2]-u[0])/(h[0]-u[0])]:1&g?[v[0],u[1]+(h[1]-u[1])*(v[0]-u[0])/(h[0]-u[0])]:null}function I(u,h){var g=0;return u[0]<h[0]?g|=1:u[0]>h[2]&&(g|=2),u[1]<h[1]?g|=4:u[1]>h[3]&&(g|=8),g}Object.defineProperty(y,"__esModule",{value:!0}),y.lineclip=function w(u,h,g){var _,S,M,D,R,v=u.length,m=I(u[0],h),f=[];for(g||(g=[]),_=1;_<v;_++){for(D=u[_-1],S=M=I(R=u[_],h);;){if(!(m|S)){f.push(D),S!==M?(f.push(R),_<v-1&&(g.push(f),f=[])):_===v-1&&f.push(R);break}if(m&S)break;m?m=I(D=G(D,R,m,h),h):S=I(R=G(D,R,S,h),h)}m=M}return f.length&&g.push(f),g},y.polygonclip=function k(u,h){var g,v,m,f,_,S,M;for(v=1;v<=8;v*=2){for(g=[],f=!(I(m=u[u.length-1],h)&v),_=0;_<u.length;_++)(M=!(I(S=u[_],h)&v))!==f&&g.push(G(m,S,v,h)),M&&g.push(S),m=S,f=M;if(!(u=g).length)break}return g}},298:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621);y.default=function G(I,u){void 0===u&&(u={});var h=Number(I[0]),g=Number(I[1]),v=Number(I[2]),m=Number(I[3]);if(6===I.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var f=[h,g];return k.polygon([[f,[v,g],[v,m],[h,m],f]],u.properties,{bbox:I,id:u.id})}},11568:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(58570);function G(I){var u=[1/0,1/0,-1/0,-1/0];return k.coordEach(I,function(h){u[0]>h[0]&&(u[0]=h[0]),u[1]>h[1]&&(u[1]=h[1]),u[2]<h[0]&&(u[2]=h[0]),u[3]<h[1]&&(u[3]=h[1])}),u}G.default=G,y.default=G},2952:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943);y.default=function I(h,g,v){if(void 0===v&&(v={}),!0===v.final)return function u(h,g){var v=I(g,h);return v=(v+180)%360}(h,g);var m=G.getCoord(h),f=G.getCoord(g),_=k.degreesToRadians(m[0]),S=k.degreesToRadians(f[0]),M=k.degreesToRadians(m[1]),D=k.degreesToRadians(f[1]),R=Math.sin(S-_)*Math.cos(D),V=Math.cos(M)*Math.sin(D)-Math.sin(M)*Math.cos(D)*Math.cos(S-_);return k.radiansToDegrees(Math.atan2(R,V))}},69205:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(90621),I=w(45943),u=k(w(13492));y.default=function h(g,v){void 0===v&&(v={});for(var m=v.resolution||1e4,f=v.sharpness||.85,_=[],S=I.getGeom(g).coordinates.map(function(V){return{x:V[0],y:V[1]}}),M=new u.default({duration:m,points:S,sharpness:f}),D=function(V){var B=M.pos(V);Math.floor(V/100)%2==0&&_.push([B.x,B.y])},R=0;R<M.duration;R+=10)D(R);return D(M.duration),G.lineString(_,v.properties)}},13492:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var w=function(){function I(u){this.points=u.points||[],this.duration=u.duration||1e4,this.sharpness=u.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=u.stepLength||60,this.length=this.points.length,this.delay=0;for(var h=0;h<this.length;h++)this.points[h].z=this.points[h].z||0;for(h=0;h<this.length-1;h++){var g=this.points[h],v=this.points[h+1];this.centers.push({x:(g.x+v.x)/2,y:(g.y+v.y)/2,z:(g.z+v.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),h=0;h<this.centers.length-1;h++){var m=this.points[h+1].x-(this.centers[h].x+this.centers[h+1].x)/2,f=this.points[h+1].y-(this.centers[h].y+this.centers[h+1].y)/2,_=this.points[h+1].z-(this.centers[h].y+this.centers[h+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[h+1].x+this.sharpness*(this.centers[h].x+m),y:(1-this.sharpness)*this.points[h+1].y+this.sharpness*(this.centers[h].y+f),z:(1-this.sharpness)*this.points[h+1].z+this.sharpness*(this.centers[h].z+_)},{x:(1-this.sharpness)*this.points[h+1].x+this.sharpness*(this.centers[h+1].x+m),y:(1-this.sharpness)*this.points[h+1].y+this.sharpness*(this.centers[h+1].y+f),z:(1-this.sharpness)*this.points[h+1].z+this.sharpness*(this.centers[h+1].z+_)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return I.prototype.cacheSteps=function(u){var h=[],g=this.pos(0);h.push(0);for(var v=0;v<this.duration;v+=10){var m=this.pos(v);Math.sqrt((m.x-g.x)*(m.x-g.x)+(m.y-g.y)*(m.y-g.y)+(m.z-g.z)*(m.z-g.z))>u&&(h.push(v),g=m)}return h},I.prototype.vector=function(u){var h=this.pos(u+10),g=this.pos(u-10);return{angle:180*Math.atan2(h.y-g.y,h.x-g.x)/3.14,speed:Math.sqrt((g.x-h.x)*(g.x-h.x)+(g.y-h.y)*(g.y-h.y)+(g.z-h.z)*(g.z-h.z))}},I.prototype.pos=function(u){var h=u-this.delay;h<0&&(h=0),h>this.duration&&(h=this.duration-1);var g=h/this.duration;if(g>=1)return this.points[this.length-1];var v=Math.floor((this.points.length-1)*g);return function k(I,u,h,g,v){var m=function G(I){var u=I*I;return[u*I,3*u*(1-I),3*I*(1-I)*(1-I),(1-I)*(1-I)*(1-I)]}(I);return{x:v.x*m[0]+g.x*m[1]+h.x*m[2]+u.x*m[3],y:v.y*m[0]+g.y*m[1]+h.y*m[2]+u.y*m[3],z:v.z*m[0]+g.z*m[1]+h.z*m[2]+u.z*m[3]}}((this.length-1)*g-v,this.points[v],this.controls[v][1],this.controls[v+1][0],this.points[v+1])},I}();y.default=w},13673:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(45943);y.default=function G(I){for(var v,m,u=k.getCoords(I),h=0,g=1;g<u.length;)v=m||u[0],h+=((m=u[g])[0]-v[0])*(m[1]+v[1]),g++;return h>0}},24177:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(11568)),I=k(w(40940)),u=k(w(63106)),h=w(45943);function v(U,F){var j,P=!1;for(j=0;j<U.coordinates.length;j++)if(V(U.coordinates[j],F.coordinates)){P=!0;break}return P}function m(U,F){for(var j=0,P=F.coordinates;j<P.length;j++){for(var Q=P[j],$=!1,oe=0,X=U.coordinates;oe<X.length;oe++)if(V(Q,X[oe])){$=!0;break}if(!$)return!1}return!0}function f(U,F){for(var j=!1,P=0,Q=F.coordinates;P<Q.length;P++){var $=Q[P];if(u.default($,U,{ignoreEndVertices:!0})&&(j=!0),!u.default($,U))return!1}return!!j}function _(U,F){for(var j=0,P=F.coordinates;j<P.length;j++)if(!I.default(P[j],U,{ignoreBoundary:!0}))return!1;return!0}function S(U,F){for(var j=!1,P=0,Q=F.coordinates;P<Q.length;P++){var $=Q[P];if(u.default({type:"Point",coordinates:$},U,{ignoreEndVertices:!0})&&(j=!0),!u.default({type:"Point",coordinates:$},U,{ignoreEndVertices:!1}))return!1}return j}function M(U,F){var j=!1,P=0;if(!R(G.default(U),G.default(F)))return!1;for(;P<F.coordinates.length-1;P++){var oe=B(F.coordinates[P],F.coordinates[P+1]);if(I.default({type:"Point",coordinates:oe},U,{ignoreBoundary:!0})){j=!0;break}}return j}function D(U,F){if("Feature"===U.type&&null===U.geometry||"Feature"===F.type&&null===F.geometry)return!1;if(!R(G.default(U),G.default(F)))return!1;for(var $=0,oe=h.getGeom(F).coordinates;$<oe.length;$++)for(var ie=0,q=oe[$];ie<q.length;ie++)if(!I.default(q[ie],U))return!1;return!0}function R(U,F){return!(U[0]>F[0]||U[2]<F[2]||U[1]>F[1]||U[3]<F[3])}function V(U,F){return U[0]===F[0]&&U[1]===F[1]}function B(U,F){return[(U[0]+F[0])/2,(U[1]+F[1])/2]}y.default=function g(U,F){var j=h.getGeom(U),P=h.getGeom(F),Q=j.type,$=P.type,oe=j.coordinates,X=P.coordinates;switch(Q){case"Point":if("Point"===$)return V(oe,X);throw new Error("feature2 "+$+" geometry not supported");case"MultiPoint":switch($){case"Point":return v(j,P);case"MultiPoint":return m(j,P);default:throw new Error("feature2 "+$+" geometry not supported")}case"LineString":switch($){case"Point":return u.default(P,j,{ignoreEndVertices:!0});case"LineString":return S(j,P);case"MultiPoint":return f(j,P);default:throw new Error("feature2 "+$+" geometry not supported")}case"Polygon":switch($){case"Point":return I.default(P,j,{ignoreBoundary:!0});case"LineString":return M(j,P);case"Polygon":return D(j,P);case"MultiPoint":return _(j,P);default:throw new Error("feature2 "+$+" geometry not supported")}default:throw new Error("feature1 "+Q+" geometry not supported")}},y.isPointInMultiPoint=v,y.isMultiPointInMultiPoint=m,y.isMultiPointOnLine=f,y.isMultiPointInPoly=_,y.isLineOnLine=S,y.isLineInPoly=M,y.isPolyInPoly=D,y.doBBoxOverlap=R,y.compareCoords=V,y.getMidpoint=B},11637:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(51730)),I=w(26766),u=k(w(40940)),h=w(45943),g=w(90621);function m(D,R){for(var V=!1,B=!1,U=D.coordinates.length,F=0;F<U&&!V&&!B;){for(var j=0;j<R.coordinates.length-1;j++){var P=!0;(0===j||j===R.coordinates.length-2)&&(P=!1),M(R.coordinates[j],R.coordinates[j+1],D.coordinates[F],P)?V=!0:B=!0}F++}return V&&B}function _(D,R){var V=I.polygonToLine(R);return G.default(D,V).features.length>0}function S(D,R){for(var V=!1,B=!1,U=D.coordinates.length,F=0;F<U&&(!V||!B);F++)u.default(g.point(D.coordinates[F]),R)?V=!0:B=!0;return B&&V}function M(D,R,V,B){var j=R[0]-D[0],P=R[1]-D[1];return 0==(V[0]-D[0])*P-(V[1]-D[1])*j&&(B?Math.abs(j)>=Math.abs(P)?j>0?D[0]<=V[0]&&V[0]<=R[0]:R[0]<=V[0]&&V[0]<=D[0]:P>0?D[1]<=V[1]&&V[1]<=R[1]:R[1]<=V[1]&&V[1]<=D[1]:Math.abs(j)>=Math.abs(P)?j>0?D[0]<V[0]&&V[0]<R[0]:R[0]<V[0]&&V[0]<D[0]:P>0?D[1]<V[1]&&V[1]<R[1]:R[1]<V[1]&&V[1]<D[1])}y.default=function v(D,R){var V=h.getGeom(D),B=h.getGeom(R),U=V.type,F=B.type;switch(U){case"MultiPoint":switch(F){case"LineString":return m(V,B);case"Polygon":return S(V,B);default:throw new Error("feature2 "+F+" geometry not supported")}case"LineString":switch(F){case"MultiPoint":return m(B,V);case"LineString":return function f(D,R){if(G.default(D,R).features.length>0)for(var B=0;B<D.coordinates.length-1;B++)for(var U=0;U<R.coordinates.length-1;U++){var F=!0;if((0===U||U===R.coordinates.length-2)&&(F=!1),M(D.coordinates[B],D.coordinates[B+1],R.coordinates[U],F))return!0}return!1}(V,B);case"Polygon":return _(V,B);default:throw new Error("feature2 "+F+" geometry not supported")}case"Polygon":switch(F){case"MultiPoint":return S(B,V);case"LineString":return _(B,V);default:throw new Error("feature2 "+F+" geometry not supported")}default:throw new Error("feature1 "+U+" geometry not supported")}}},97599:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(40940)),I=k(w(51730)),u=w(58570),h=k(w(26766));function m(R,V){for(var B=0;B<R.coordinates.length-1;B++)if(M(R.coordinates[B],R.coordinates[B+1],V.coordinates))return!0;return!1}function _(R,V){for(var B=0,U=V.coordinates;B<U.length;B++)if(G.default(U[B],R))return!0;return I.default(V,h.default(R)).features.length>0}function M(R,V,B){var j=V[0]-R[0],P=V[1]-R[1];return 0==(B[0]-R[0])*P-(B[1]-R[1])*j&&(Math.abs(j)>=Math.abs(P)?j>0?R[0]<=B[0]&&B[0]<=V[0]:V[0]<=B[0]&&B[0]<=R[0]:P>0?R[1]<=B[1]&&B[1]<=V[1]:V[1]<=B[1]&&B[1]<=R[1])}y.default=function g(R,V){var B=!0;return u.flattenEach(R,function(U){u.flattenEach(V,function(F){if(!1===B)return!1;B=function v(R,V){switch(R.type){case"Point":switch(V.type){case"Point":return!function D(R,V){return R[0]===V[0]&&R[1]===V[1]}(R.coordinates,V.coordinates);case"LineString":return!m(V,R);case"Polygon":return!G.default(R,V)}break;case"LineString":switch(V.type){case"Point":return!m(R,V);case"LineString":return!function f(R,V){return I.default(R,V).features.length>0}(R,V);case"Polygon":return!_(V,R)}break;case"Polygon":switch(V.type){case"Point":return!G.default(V,R);case"LineString":return!_(R,V);case"Polygon":return!function S(R,V){for(var B=0,U=R.coordinates[0];B<U.length;B++)if(G.default(U[B],V))return!0;for(var j=0,P=V.coordinates[0];j<P.length;j++)if(G.default(P[j],R))return!0;return I.default(h.default(R),h.default(V)).features.length>0}(V,R)}}return!1}(U.geometry,F.geometry)})}),B}},80187:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(73198)),I=k(w(65010)),u=w(45943);y.default=function h(g,v){return u.getGeom(g).type===u.getGeom(v).type&&new G.default({precision:6}).compare(I.default(g),I.default(v))}},46437:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(97599)),I=w(58570);y.default=function u(h,g){var v=!1;return I.flattenEach(h,function(m){I.flattenEach(g,function(f){if(!0===v)return!0;v=!G.default(m.geometry,f.geometry)})}),v}},44314:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(58570),I=w(45943),u=k(w(71512)),h=k(w(51730)),g=k(w(73198));y.default=function v(m,f){var _=I.getGeom(m),S=I.getGeom(f),M=_.type,D=S.type;if("MultiPoint"===M&&"MultiPoint"!==D||("LineString"===M||"MultiLineString"===M)&&"LineString"!==D&&"MultiLineString"!==D||("Polygon"===M||"MultiPolygon"===M)&&"Polygon"!==D&&"MultiPolygon"!==D)throw new Error("features must be of the same type");if("Point"===M)throw new Error("Point geometry not supported");if(new g.default({precision:6}).compare(m,f))return!1;var V=0;switch(M){case"MultiPoint":for(var B=0;B<_.coordinates.length;B++)for(var U=0;U<S.coordinates.length;U++){var F=_.coordinates[B],j=S.coordinates[U];if(F[0]===j[0]&&F[1]===j[1])return!0}return!1;case"LineString":case"MultiLineString":G.segmentEach(m,function(P){G.segmentEach(f,function(Q){u.default(P,Q).features.length&&V++})});break;case"Polygon":case"MultiPolygon":G.segmentEach(m,function(P){G.segmentEach(f,function(Q){h.default(P,Q).features.length&&V++})})}return V>0}},10279:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(65010)),I=k(w(91306)),u=k(w(77459)),h=w(90621);function v(f,_){return h.bearingToAzimuth(u.default(f[0],f[1]))===h.bearingToAzimuth(u.default(_[0],_[1]))}function m(f,_){if(f.geometry&&f.geometry.type)return f.geometry.type;if(f.type)return f.type;throw new Error("Invalid GeoJSON object for "+_)}y.default=function g(f,_){if(!f)throw new Error("line1 is required");if(!_)throw new Error("line2 is required");if("LineString"!==m(f,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==m(_,"line2"))throw new Error("line2 must be a LineString");for(var D=I.default(G.default(f)).features,R=I.default(G.default(_)).features,V=0;V<D.length;V++){var B=D[V].geometry.coordinates;if(!R[V])break;if(!v(B,R[V].geometry.coordinates))return!1}return!0}},40940:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(45943);function I(h,g,v){var m=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var f=0,_=g.length-1;f<g.length;_=f++){var S=g[f][0],M=g[f][1],D=g[_][0],R=g[_][1];if(h[1]*(S-D)+M*(D-h[0])+R*(h[0]-S)==0&&(S-h[0])*(D-h[0])<=0&&(M-h[1])*(R-h[1])<=0)return!v;M>h[1]!=R>h[1]&&h[0]<(D-S)*(h[1]-M)/(R-M)+S&&(m=!m)}return m}y.default=function G(h,g,v){if(void 0===v&&(v={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var m=k.getCoord(h),f=k.getGeom(g),_=f.type,S=g.bbox,M=f.coordinates;if(S&&!1===function u(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}(m,S))return!1;"Polygon"===_&&(M=[M]);for(var D=!1,R=0;R<M.length&&!D;R++)if(I(m,M[R][0],v.ignoreBoundary)){for(var V=!1,B=1;B<M[R].length&&!V;)I(m,M[R][B],!v.ignoreBoundary)&&(V=!0),B++;V||(D=!0)}return D}},63106:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(45943);function I(u,h,g,v,m){var f=g[0],_=g[1],S=u[0],M=u[1],D=h[0],R=h[1],U=D-S,F=R-M,j=(g[0]-S)*F-(g[1]-M)*U;if(null!==m){if(Math.abs(j)>m)return!1}else if(0!==j)return!1;return v?"start"===v?Math.abs(U)>=Math.abs(F)?U>0?S<f&&f<=D:D<=f&&f<S:F>0?M<_&&_<=R:R<=_&&_<M:"end"===v?Math.abs(U)>=Math.abs(F)?U>0?S<=f&&f<D:D<f&&f<=S:F>0?M<=_&&_<R:R<_&&_<=M:"both"===v&&(Math.abs(U)>=Math.abs(F)?U>0?S<f&&f<D:D<f&&f<S:F>0?M<_&&_<R:R<_&&_<M):Math.abs(U)>=Math.abs(F)?U>0?S<=f&&f<=D:D<=f&&f<=S:F>0?M<=_&&_<=R:R<=_&&_<=M}y.default=function G(u,h,g){void 0===g&&(g={});for(var v=k.getCoord(u),m=k.getCoords(h),f=0;f<m.length-1;f++){var _=!1;if(g.ignoreEndVertices&&(0===f&&(_="start"),f===m.length-2&&(_="end"),0===f&&f+1===m.length-1&&(_="both")),I(m[f],m[f+1],v,_,typeof g.epsilon>"u"?null:g.epsilon))return!0}return!1}},67680:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(11568)),I=k(w(63106)),u=k(w(40940)),h=w(45943);function R(U,F){return!(U[0]>F[0]||U[2]<F[2]||U[1]>F[1]||U[3]<F[3])}function V(U,F){return U[0]===F[0]&&U[1]===F[1]}function B(U,F){return[(U[0]+F[0])/2,(U[1]+F[1])/2]}y.default=function g(U,F){var j=h.getGeom(U),P=h.getGeom(F),Q=j.type,$=P.type;switch(Q){case"Point":switch($){case"MultiPoint":return function v(U,F){var j,P=!1;for(j=0;j<F.coordinates.length;j++)if(V(F.coordinates[j],U.coordinates)){P=!0;break}return P}(j,P);case"LineString":return I.default(j,P,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return u.default(j,P,{ignoreBoundary:!0});default:throw new Error("feature2 "+$+" geometry not supported")}case"MultiPoint":switch($){case"MultiPoint":return function m(U,F){for(var j=0;j<U.coordinates.length;j++){for(var P=!1,Q=0;Q<F.coordinates.length;Q++)V(U.coordinates[j],F.coordinates[Q])&&(P=!0);if(!P)return!1}return!0}(j,P);case"LineString":return function f(U,F){for(var j=!1,P=0;P<U.coordinates.length;P++){if(!I.default(U.coordinates[P],F))return!1;j||(j=I.default(U.coordinates[P],F,{ignoreEndVertices:!0}))}return j}(j,P);case"Polygon":case"MultiPolygon":return function _(U,F){for(var j=!0,Q=!1,$=0;$<U.coordinates.length;$++){if(!(Q=u.default(U.coordinates[1],F))){j=!1;break}Q=u.default(U.coordinates[1],F,{ignoreBoundary:!0})}return j&&Q}(j,P);default:throw new Error("feature2 "+$+" geometry not supported")}case"LineString":switch($){case"LineString":return function S(U,F){for(var j=0;j<U.coordinates.length;j++)if(!I.default(U.coordinates[j],F))return!1;return!0}(j,P);case"Polygon":case"MultiPolygon":return function M(U,F){if(!R(G.default(F),G.default(U)))return!1;for(var Q=!1,$=0;$<U.coordinates.length-1;$++){if(!u.default(U.coordinates[$],F))return!1;if(Q||(Q=u.default(U.coordinates[$],F,{ignoreBoundary:!0})),!Q){var oe=B(U.coordinates[$],U.coordinates[$+1]);Q=u.default(oe,F,{ignoreBoundary:!0})}}return Q}(j,P);default:throw new Error("feature2 "+$+" geometry not supported")}case"Polygon":switch($){case"Polygon":case"MultiPolygon":return function D(U,F){var j=G.default(U);if(!R(G.default(F),j))return!1;for(var Q=0;Q<U.coordinates[0].length;Q++)if(!u.default(U.coordinates[0][Q],F))return!1;return!0}(j,P);default:throw new Error("feature2 "+$+" geometry not supported")}default:throw new Error("feature1 "+Q+" geometry not supported")}}},44032:(Ae,y,w)=>{"use strict";var k=w(49360),G=w(24855),I=w(58570),u=w(31016),h=w(90621);function g(R){return R&&"object"==typeof R&&"default"in R?R:{default:R}}var v=g(k);function m(R,V,B){var U=(B=B||{}).units||"kilometers",F=B.steps||8;if(!R)throw new Error("geojson is required");if("object"!=typeof B)throw new Error("options must be an object");if("number"!=typeof F)throw new Error("steps must be an number");if(void 0===V)throw new Error("radius is required");if(F<=0)throw new Error("steps must be greater than 0");var j=[];switch(R.type){case"GeometryCollection":return I.geomEach(R,function(P){var Q=f(P,V,U,F);Q&&j.push(Q)}),h.featureCollection(j);case"FeatureCollection":return I.featureEach(R,function(P){var Q=f(P,V,U,F);Q&&I.featureEach(Q,function($){$&&j.push($)})}),h.featureCollection(j)}return f(R,V,U,F)}function f(R,V,B,U){var F=R.properties||{},j="Feature"===R.type?R.geometry:R;if("GeometryCollection"===j.type){var P=[];return I.geomEach(R,function(Ce){var xe=f(Ce,V,B,U);xe&&P.push(xe)}),h.featureCollection(P)}var Q=function D(R){var V=v.default(R).geometry.coordinates,B=[-V[0],-V[1]];return u.geoAzimuthalEquidistant().rotate(B).scale(h.earthRadius)}(j),$={type:j.type,coordinates:S(j.coordinates,Q)},X=(new G.GeoJSONReader).read($),ie=h.radiansToLength(h.lengthToRadians(V,B),"meters"),q=G.BufferOp.bufferOp(X,ie,U);if(!_((q=(new G.GeoJSONWriter).write(q)).coordinates)){var ne={type:q.type,coordinates:M(q.coordinates,Q)};return h.feature(ne,F)}}function _(R){return Array.isArray(R[0])?_(R[0]):isNaN(R[0])}function S(R,V){return"object"!=typeof R[0]?V(R):R.map(function(B){return S(B,V)})}function M(R,V){return"object"!=typeof R[0]?V.invert(R):R.map(function(B){return M(B,V)})}Ae.exports=m,Ae.exports.default=m},81285:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(58570),G=w(90621);y.default=function I(u,h){void 0===h&&(h={});var g=0,v=0,m=0;return k.geomEach(u,function(f,_,S){var M=h.weight?S?.[h.weight]:void 0;if(!G.isNumber(M=M??1))throw new Error("weight value must be a number for feature index "+_);(M=Number(M))>0&&k.coordEach(f,function(D){g+=D[0]*M,v+=D[1]*M,m+=M})}),G.point([g/m,v/m],h.properties,h)}},36188:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(81285)),I=k(w(36512)),u=k(w(19673)),h=w(90621),g=w(58570);function m(f,_,S,M,D){var R=M.tolerance||.001,V=0,B=0,U=0,F=0;if(g.featureEach(S,function(Q){var $,X=(null===($=Q.properties)||void 0===$?void 0:$.weight)??1;if(X=Number(X),!h.isNumber(X))throw new Error("weight value must be a number");if(X>0){F+=1;var ie=X*I.default(Q,f);0===ie&&(ie=1);var q=X/ie;V+=Q.geometry.coordinates[0]*q,B+=Q.geometry.coordinates[1]*q,U+=q}}),F<1)throw new Error("no features to measure");var j=V/U,P=B/U;return 1===F||0===D||Math.abs(j-_[0])<R&&Math.abs(P-_[1])<R?h.point([j,P],{medianCandidates:M.medianCandidates}):(M.medianCandidates.push([j,P]),m([j,P],f,S,M,D-1))}y.default=function v(f,_){if(void 0===_&&(_={}),!h.isObject(_=_||{}))throw new Error("options is invalid");var S=_.counter||10;if(!h.isNumber(S))throw new Error("counter must be a number");var M=_.weight,D=G.default(f,{weight:_.weight}),R=h.featureCollection([]);return g.featureEach(f,function(B){var U;R.features.push(u.default(B,{properties:{weight:null===(U=B.properties)||void 0===U?void 0:U[M]}}))}),m(D.geometry.coordinates,[0,0],R,{tolerance:_.tolerance,medianCandidates:[]},S)}},63929:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(98649)),I=k(w(19673)),u=w(90621),h=w(45943),g=w(58570);y.default=function v(m,f){switch(void 0===f&&(f={}),h.getType(m)){case"Point":return u.point(h.getCoord(m),f.properties);case"Polygon":var _=[];g.coordEach(m,function(ne){_.push(ne)});var B,U,F,j,P,Q,$,oe,S=I.default(m,{properties:f.properties}),M=S.geometry.coordinates,D=0,R=0,V=0,X=_.map(function(ne){return[ne[0]-M[0],ne[1]-M[1]]});for(B=0;B<_.length-1;B++)V+=oe=(j=(U=X[B])[0])*($=(F=X[B+1])[1])-(P=F[0])*(Q=U[1]),D+=(j+P)*oe,R+=(Q+$)*oe;if(0===V)return S;var q=1/(.5*V*6);return u.point([M[0]+q*D,M[1]+q*R],f.properties);default:var se=G.default(m);return se?v(se,{properties:f.properties}):I.default(m,{properties:f.properties})}}},49360:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(11568)),I=w(90621);y.default=function u(h,g){void 0===g&&(g={});var v=G.default(h);return I.point([(v[0]+v[2])/2,(v[1]+v[3])/2],g.properties,g)}},19673:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(58570),G=w(90621);y.default=function I(u,h){void 0===h&&(h={});var g=0,v=0,m=0;return k.coordEach(u,function(f){g+=f[0],v+=f[1],m++},!0),G.point([g/m,v/m],h.properties)}},92631:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(73026)),I=w(90621);y.default=function u(h,g,v){void 0===v&&(v={});for(var m=v.steps||64,f=v.properties?v.properties:!Array.isArray(h)&&"Feature"===h.type&&h.properties?h.properties:{},_=[],S=0;S<m;S++)_.push(G.default(h,g,-360*S/m,v).geometry.coordinates);return _.push(_[0]),I.polygon([_],f)}},65010:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943);function u(v){var m=G.getCoords(v);if(2===m.length&&!h(m[0],m[1]))return m;var f=[],_=m.length-1,S=f.length;f.push(m[0]);for(var M=1;M<_;M++){var D=f[f.length-1];m[M][0]===D[0]&&m[M][1]===D[1]||(f.push(m[M]),(S=f.length)>2&&g(f[S-3],f[S-1],f[S-2])&&f.splice(f.length-2,1))}if(f.push(m[m.length-1]),S=f.length,h(m[0],m[m.length-1])&&S<4)throw new Error("invalid polygon");return g(f[S-3],f[S-1],f[S-2])&&f.splice(f.length-2,1),f}function h(v,m){return v[0]===m[0]&&v[1]===m[1]}function g(v,m,f){var _=f[0],S=f[1],M=v[0],D=v[1],R=m[0],V=m[1],F=R-M,j=V-D;return 0==(_-M)*j-(S-D)*F&&(Math.abs(F)>=Math.abs(j)?F>0?M<=_&&_<=R:R<=_&&_<=M:j>0?D<=S&&S<=V:V<=S&&S<=D)}y.default=function I(v,m){void 0===m&&(m={});var f="object"==typeof m?m.mutate:m;if(!v)throw new Error("geojson is required");var _=G.getType(v),S=[];switch(_){case"LineString":S=u(v);break;case"MultiLineString":case"Polygon":G.getCoords(v).forEach(function(D){S.push(u(D))});break;case"MultiPolygon":G.getCoords(v).forEach(function(D){var R=[];D.forEach(function(V){R.push(u(V))}),S.push(R)});break;case"Point":return v;case"MultiPoint":var M={};G.getCoords(v).forEach(function(D){var R=D.join("-");Object.prototype.hasOwnProperty.call(M,R)||(S.push(D),M[R]=!0)});break;default:throw new Error(_+" geometry not supported")}return v.coordinates?!0===f?(v.coordinates=S,v):{type:_,coordinates:S}:!0===f?(v.geometry.coordinates=S,v):k.feature({type:_,coordinates:S},v.properties,{bbox:v.bbox,id:v.id})}},97408:(Ae,y)=>{"use strict";function k(g){var v={type:"Feature"};return Object.keys(g).forEach(function(m){switch(m){case"type":case"properties":case"geometry":return;default:v[m]=g[m]}}),v.properties=G(g.properties),v.geometry=u(g.geometry),v}function G(g){var v={};return g&&Object.keys(g).forEach(function(m){var f=g[m];v[m]="object"==typeof f?null===f?null:Array.isArray(f)?f.map(function(_){return _}):G(f):f}),v}function u(g){var v={type:g.type};return g.bbox&&(v.bbox=g.bbox),"GeometryCollection"===g.type?(v.geometries=g.geometries.map(function(m){return u(m)}),v):(v.coordinates=h(g.coordinates),v)}function h(g){var v=g;return"object"!=typeof v[0]?v.slice():v.map(function(m){return h(m)})}Object.defineProperty(y,"__esModule",{value:!0}),y.default=function w(g){if(!g)throw new Error("geojson is required");switch(g.type){case"Feature":return k(g);case"FeatureCollection":return function I(g){var v={type:"FeatureCollection"};return Object.keys(g).forEach(function(m){switch(m){case"type":case"features":return;default:v[m]=g[m]}}),v.features=g.features.map(function(m){return k(m)}),v}(g);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return u(g);default:throw new Error("unknown GeoJSON type")}}},91912:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(97408)),I=k(w(36512)),u=w(58570),h=w(90621),g=k(w(33367));y.default=function v(m,f,_){void 0===_&&(_={}),!0!==_.mutate&&(m=G.default(m)),_.minPoints=_.minPoints||3;var S=new g.default.DBSCAN,M=S.run(u.coordAll(m),h.convertLength(f,_.units),_.minPoints,I.default),D=-1;return M.forEach(function(R){D++,R.forEach(function(V){var B=m.features[V];B.properties||(B.properties={}),B.properties.cluster=D,B.properties.dbscan="core"})}),S.noise.forEach(function(R){var V=m.features[R];V.properties||(V.properties={}),V.properties.dbscan=V.properties.cluster?"edge":"noise"}),m}},43034:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(97408)),I=w(58570),u=k(w(93282));y.default=function h(g,v){void 0===v&&(v={});var m=g.features.length;v.numberOfClusters=v.numberOfClusters||Math.round(Math.sqrt(m/2)),v.numberOfClusters>m&&(v.numberOfClusters=m),!0!==v.mutate&&(g=G.default(g));var f=I.coordAll(g),_=f.slice(0,v.numberOfClusters),S=u.default(f,v.numberOfClusters,_),M={};return S.centroids.forEach(function(D,R){M[R]=D}),I.featureEach(g,function(D,R){var V=S.idxs[R];D.properties.cluster=V,D.properties.centroid=M[V]}),g}},23563:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(58570),G=w(90621);function u(_,S,M){if(!_)throw new Error("geojson is required");if("FeatureCollection"!==_.type)throw new Error("geojson must be a FeatureCollection");if(null==S)throw new Error("property is required");for(var D=g(_,S),R=Object.keys(D),V=0;V<R.length;V++){for(var B=R[V],U=D[B],F=[],j=0;j<U.length;j++)F.push(_.features[U[j]]);M(G.featureCollection(F),B,V)}}function g(_,S){var M={};return k.featureEach(_,function(D,R){var V=D.properties||{};if(Object.prototype.hasOwnProperty.call(V,String(S))){var B=V[S];Object.prototype.hasOwnProperty.call(M,B)?M[B].push(R):M[B]=[R]}}),M}function v(_,S){if(void 0===_)return!1;var M=typeof S;if("number"===M||"string"===M)return Object.prototype.hasOwnProperty.call(_,S);if(Array.isArray(S)){for(var D=0;D<S.length;D++)if(!v(_,S[D]))return!1;return!0}return m(_,S)}function m(_,S){for(var M=Object.keys(S),D=0;D<M.length;D++){var R=M[D];if(_[R]!==S[R])return!1}return!0}y.getCluster=function I(_,S){if(!_)throw new Error("geojson is required");if("FeatureCollection"!==_.type)throw new Error("geojson must be a FeatureCollection");if(null==S)throw new Error("filter is required");var M=[];return k.featureEach(_,function(D){v(D.properties,S)&&M.push(D)}),G.featureCollection(M)},y.clusterEach=u,y.clusterReduce=function h(_,S,M,D){var R=D;return u(_,S,function(V,B,U){R=0===U&&void 0===D?V:M(R,V,B,U)}),R},y.createBins=g,y.applyFilter=v,y.propertiesContainsFilter=m,y.filterProperties=function f(_,S){if(!S)return{};if(!S.length)return{};for(var M={},D=0;D<S.length;D++){var R=S[D];Object.prototype.hasOwnProperty.call(_,R)&&(M[R]=_[R])}return M}},81022:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(11568)),I=k(w(40940)),u=k(w(7861));y.default=function h(g,v,m,f){var _=u.default(6),S=v.features.map(function(M){var D;return{minX:M.geometry.coordinates[0],minY:M.geometry.coordinates[1],maxX:M.geometry.coordinates[0],maxY:M.geometry.coordinates[1],property:null===(D=M.properties)||void 0===D?void 0:D[m]}});return _.load(S),g.features.forEach(function(M){M.properties||(M.properties={});var D=G.default(M),R=_.search({minX:D[0],minY:D[1],maxX:D[2],maxY:D[3]}),V=[];R.forEach(function(B){I.default([B.minX,B.minY],M)&&V.push(B.property)}),M.properties[f]=V}),g}},36324:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(58570);y.default=function I(u){var h={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return G.featureEach(u,function(g){var v,m,f,_;switch(null===(_=g.geometry)||void 0===_?void 0:_.type){case"Point":h.MultiPoint.coordinates.push(g.geometry.coordinates),h.MultiPoint.properties.push(g.properties);break;case"MultiPoint":(v=h.MultiPoint.coordinates).push.apply(v,g.geometry.coordinates),h.MultiPoint.properties.push(g.properties);break;case"LineString":h.MultiLineString.coordinates.push(g.geometry.coordinates),h.MultiLineString.properties.push(g.properties);break;case"MultiLineString":(m=h.MultiLineString.coordinates).push.apply(m,g.geometry.coordinates),h.MultiLineString.properties.push(g.properties);break;case"Polygon":h.MultiPolygon.coordinates.push(g.geometry.coordinates),h.MultiPolygon.properties.push(g.properties);break;case"MultiPolygon":(f=h.MultiPolygon.coordinates).push.apply(f,g.geometry.coordinates),h.MultiPolygon.properties.push(g.properties)}}),k.featureCollection(Object.keys(h).filter(function(g){return h[g].coordinates.length}).sort().map(function(g){return k.feature({type:g,coordinates:h[g].coordinates},{collectedProperties:h[g].properties})}))}},99021:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(36512)),I=w(90621),u=w(58570),h=k(w(45714)),g=k(w(19696));y.default=function v(f,_){void 0===_&&(_={});var S=_.maxEdge||1/0,M=function m(f){var _=[],S={};return u.featureEach(f,function(M){if(M.geometry){var D=M.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(S,D)||(_.push(M),S[D]=!0)}}),I.featureCollection(_)}(f),D=h.default(M);if(D.features=D.features.filter(function(V){var B=V.geometry.coordinates[0][0],U=V.geometry.coordinates[0][1],F=V.geometry.coordinates[0][2],j=G.default(B,U,_),P=G.default(U,F,_),Q=G.default(B,F,_);return j<=S&&P<=S&&Q<=S}),D.features.length<1)return null;var R=g.default(D);return 1===R.coordinates.length&&(R.coordinates=R.coordinates[0],R.type="Polygon"),I.feature(R)}},19696:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(97408)),I=w(90621),u=w(45943),h=w(58570),g=k(w(35994)),v=k(w(67114));y.default=function m(_,S){if(void 0===S&&(S={}),!I.isObject(S=S||{}))throw new Error("options is invalid");var M=S.mutate;if("FeatureCollection"!==u.getType(_))throw new Error("geojson must be a FeatureCollection");if(!_.features.length)throw new Error("geojson is empty");(!1===M||void 0===M)&&(_=G.default(_));var D=function f(_){var S={};h.flattenEach(_,function(D){S[D.geometry.type]=!0});var M=Object.keys(S);return 1===M.length?M[0]:null}(_);if(!D)throw new Error("geojson must be homogenous");var R=_;switch(D){case"LineString":return g.default(R,S);case"Polygon":return v.default(R,S);default:throw new Error(D+" is not supported")}}},35994:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(97408)),I=w(90621),u=w(45943),h=w(58570);function v(f){return f[0].toString()+","+f[1].toString()}y.default=function g(f,_){if(void 0===_&&(_={}),!I.isObject(_=_||{}))throw new Error("options is invalid");var S=_.mutate;if("FeatureCollection"!==u.getType(f))throw new Error("geojson must be a FeatureCollection");if(!f.features.length)throw new Error("geojson is empty");(!1===S||void 0===S)&&(f=G.default(f));var M=[],D=h.lineReduce(f,function(R,V){var B=function m(f,_){var U,S=f.geometry.coordinates,M=_.geometry.coordinates,D=v(S[0]),R=v(S[S.length-1]),V=v(M[0]),B=v(M[M.length-1]);if(D===B)U=M.concat(S.slice(1));else if(V===R)U=S.concat(M.slice(1));else if(D===V)U=S.slice(1).reverse().concat(M);else{if(R!==B)return null;U=S.concat(M.reverse().slice(1))}return I.lineString(U)}(R,V);return B||(M.push(R),V)});return D&&M.push(D),M.length?1===M.length?M[0]:I.multiLineString(M.map(function(R){return R.coordinates})):null}},67114:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(97408)),I=w(90621),u=w(45943),h=w(58570),g=w(14338),v=w(79828);y.default=function m(f,_){if(void 0===_&&(_={}),"FeatureCollection"!==u.getType(f))throw new Error("geojson must be a FeatureCollection");if(!f.features.length)throw new Error("geojson is empty");(!1===_.mutate||void 0===_.mutate)&&(f=G.default(f));var S=[];h.flattenEach(f,function(R){S.push(R.geometry)});var M=v.topology({geoms:I.geometryCollection(S).geometry});return g.merge(M,M.objects.geoms.geometries)}},98649:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(90621),I=w(58570),u=k(w(93664));y.default=function h(g,v){void 0===v&&(v={}),v.concavity=v.concavity||1/0;var m=[];if(I.coordEach(g,function(_){m.push([_[0],_[1]])}),!m.length)return null;var f=u.default(m,v.concavity);return f.length>3?G.polygon([f]):null}},73026:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943);y.default=function I(u,h,g,v){void 0===v&&(v={});var m=G.getCoord(u),f=k.degreesToRadians(m[0]),_=k.degreesToRadians(m[1]),S=k.degreesToRadians(g),M=k.lengthToRadians(h,v.units),D=Math.asin(Math.sin(_)*Math.cos(M)+Math.cos(_)*Math.sin(M)*Math.cos(S)),R=f+Math.atan2(Math.sin(S)*Math.sin(M)*Math.cos(_),Math.cos(M)-Math.sin(_)*Math.sin(D)),V=k.radiansToDegrees(R),B=k.radiansToDegrees(D);return k.point([V,B],v.properties)}},29362:(Ae,y,w)=>{"use strict";var k=w(98464),G=w(90621),I=w(45943);function u(v){return v&&"object"==typeof v&&"default"in v?v:{default:v}}var h=u(k);function g(v,m){var f=I.getGeom(v),_=I.getGeom(m),S=v.properties||{},M=h.default.difference(f.coordinates,_.coordinates);return 0===M.length?null:1===M.length?G.polygon(M[0],S):G.multiPolygon(M,S)}Ae.exports=g,Ae.exports.default=g},2843:(Ae,y,w)=>{"use strict";var k=w(90621),G=w(45943),I=w(58570),u=w(14313),h=w(98464);function g(_){return _&&"object"==typeof _&&"default"in _?_:{default:_}}var v=g(u),m=g(h);function f(_,S){if(!k.isObject(S=S||{}))throw new Error("options is invalid");var M=S.propertyName;G.collectionOf(_,"Polygon","dissolve");var D=[];if(!S.propertyName)return v.default(k.multiPolygon(m.default.union.apply(null,_.features.map(function(F){return F.geometry.coordinates}))));var R={};I.featureEach(_,function(F){Object.prototype.hasOwnProperty.call(R,F.properties[M])||(R[F.properties[M]]=[]),R[F.properties[M]].push(F)});for(var V=Object.keys(R),B=0;B<V.length;B++){var U=k.multiPolygon(m.default.union.apply(null,R[V[B]].map(function(F){return F.geometry.coordinates})));U.properties[M]=V[B],D.push(U)}return v.default(k.featureCollection(D))}Ae.exports=f,Ae.exports.default=f},41802:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(19673)),I=w(45943),u=w(58570);function h(v,m,f){void 0===f&&(f=2);var _=I.getCoord(v),S=I.getCoord(m),M=_[0]-S[0],D=_[1]-S[1];return 1===f?Math.abs(M)+Math.abs(D):Math.pow(Math.pow(M,f)+Math.pow(D,f),1/f)}y.pNormDistance=h,y.default=function g(v,m){var f=(m=m||{}).threshold||1e4,_=m.p||2,S=m.binary||!1,M=m.alpha||-1,D=m.standardization||!1,R=[];u.featureEach(v,function(P){R.push(G.default(P))});for(var V=[],B=0;B<R.length;B++)V[B]=[];for(B=0;B<R.length;B++)for(var U=B;U<R.length;U++){B===U&&(V[B][U]=0);var F=h(R[B],R[U],_);V[B][U]=F,V[U][B]=F}for(B=0;B<R.length;B++)for(U=0;U<R.length;U++)0!==(F=V[B][U])&&(V[B][U]=S?F<=f?1:0:F<=f?Math.pow(F,M):0);if(D)for(B=0;B<R.length;B++){var j=V[B].reduce(function(Q,$){return Q+$},0);for(U=0;U<R.length;U++)V[B][U]=V[B][U]/j}return V}},36512:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(45943),G=w(90621);y.default=function I(u,h,g){void 0===g&&(g={});var v=k.getCoord(u),m=k.getCoord(h),f=G.degreesToRadians(m[1]-v[1]),_=G.degreesToRadians(m[0]-v[0]),S=G.degreesToRadians(v[1]),M=G.degreesToRadians(m[1]),D=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(S)*Math.cos(M);return G.radiansToLength(2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D)),g.units)}},17868:(Ae,y,w)=>{"use strict";var k=w(90621),G=w(3993),I=w(32118),u=w(45943);function h(_){return _&&"object"==typeof _&&"default"in _?_:{default:_}}var g=h(G),v=h(I);function m(_,S,M,D){var R=(D=D||{}).steps||64,V=D.units||"kilometers",B=D.angle||0,U=D.pivot||_,F=D.properties||_.properties||{};if(!_)throw new Error("center is required");if(!S)throw new Error("xSemiAxis is required");if(!M)throw new Error("ySemiAxis is required");if(!k.isObject(D))throw new Error("options must be an object");if(!k.isNumber(R))throw new Error("steps must be a number");if(!k.isNumber(B))throw new Error("angle must be a number");var j=u.getCoord(_);if("degrees"===V)var P=k.degreesToRadians(B);else S=g.default(_,S,90,{units:V}),M=g.default(_,M,0,{units:V}),S=u.getCoord(S)[0]-j[0],M=u.getCoord(M)[1]-j[1];for(var Q=[],$=0;$<R;$+=1){var oe=-360*$/R,X=S*M/Math.sqrt(Math.pow(M,2)+Math.pow(S,2)*Math.pow(f(oe),2)),ie=S*M/Math.sqrt(Math.pow(S,2)+Math.pow(M,2)/Math.pow(f(oe),2));if(oe<-90&&oe>=-270&&(X=-X),oe<-180&&oe>=-360&&(ie=-ie),"degrees"===V){var q=X*Math.cos(P)+ie*Math.sin(P),se=ie*Math.cos(P)-X*Math.sin(P);X=q,ie=se}Q.push([X+j[0],ie+j[1]])}return Q.push(Q[0]),"degrees"===V?k.polygon([Q],F):v.default(k.polygon([Q],F),B,{pivot:U})}function f(_){var S=_*Math.PI/180;return Math.tan(S)}Ae.exports=m,Ae.exports.default=m},41522:(Ae,y,w)=>{"use strict";var k=w(11568),G=w(298);function I(v){return v&&"object"==typeof v&&"default"in v?v:{default:v}}var u=I(k),h=I(G);function g(v){return h.default(u.default(v))}Ae.exports=g,Ae.exports.default=g},41044:(Ae,y,w)=>{"use strict";var k=w(58570),G=w(90621);function I(u){var h=[];return"FeatureCollection"===u.type?k.featureEach(u,function(g){k.coordEach(g,function(v){h.push(G.point(v,g.properties))})}):k.coordEach(u,function(g){h.push(G.point(g,u.properties))}),G.featureCollection(h)}Ae.exports=I,Ae.exports.default=I},14313:(Ae,y,w)=>{"use strict";var k=w(58570),G=w(90621);function I(u){if(!u)throw new Error("geojson is required");var h=[];return k.flattenEach(u,function(g){h.push(g)}),G.featureCollection(h)}Ae.exports=I,Ae.exports.default=I},1045:(Ae,y,w)=>{"use strict";var k=w(58570),G=w(90621);function u(v){return v&&"object"==typeof v&&"default"in v?v:{default:v}}var h=u(w(97408));function g(v,m){if(!G.isObject(m=m||{}))throw new Error("options is invalid");var f=m.mutate;if(!v)throw new Error("geojson is required");return(!1===f||void 0===f)&&(v=h.default(v)),k.coordEach(v,function(_){var S=_[0];_[0]=_[1],_[1]=S}),v}Ae.exports=g,Ae.exports.default=g},26780:(Ae,y,w)=>{"use strict";var k=w(45943),G=Math.PI/180,I=180/Math.PI,u=function(f,_){this.lon=f,this.lat=_,this.x=G*f,this.y=G*_};u.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},u.prototype.antipode=function(){return new u(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var h=function(){this.coords=[],this.length=0};h.prototype.move_to=function(f){this.length++,this.coords.push(f)};var g=function(f){this.properties=f||{},this.geometries=[]};g.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var f=[],_=0;_<this.geometries.length;_++)f.push(this.geometries[_].coords);return{geometry:{type:"MultiLineString",coordinates:f},type:"Feature",properties:this.properties}},g.prototype.wkt=function(){for(var f="",_="LINESTRING(",S=function(R){_+=R[0]+" "+R[1]+","},M=0;M<this.geometries.length;M++){if(0===this.geometries[M].coords.length)return"LINESTRING(empty)";this.geometries[M].coords.forEach(S),f+=_.substring(0,_.length-1)+")"}return f};var v=function(f,_,S){if(!f||void 0===f.x||void 0===f.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!_||void 0===_.x||void 0===_.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new u(f.x,f.y),this.end=new u(_.x,_.y),this.properties=S||{};var M=this.start.x-this.end.x,R=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(M/2),2);if(this.g=2*Math.asin(Math.sqrt(R)),this.g===Math.PI)throw new Error("it appears "+f.view()+" and "+_.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+f+" and "+_)};function m(f,_,S){if("object"!=typeof(S=S||{}))throw new Error("options is invalid");var M=S.properties,D=S.npoints,R=S.offset;return f=k.getCoord(f),_=k.getCoord(_),D=D||100,R=R||10,new v({x:f[0],y:f[1]},{x:_[0],y:_[1]},M=M||{}).Arc(D,{offset:R}).json()}v.prototype.interpolate=function(f){var _=Math.sin((1-f)*this.g)/Math.sin(this.g),S=Math.sin(f*this.g)/Math.sin(this.g),M=_*Math.cos(this.start.y)*Math.cos(this.start.x)+S*Math.cos(this.end.y)*Math.cos(this.end.x),D=_*Math.cos(this.start.y)*Math.sin(this.start.x)+S*Math.cos(this.end.y)*Math.sin(this.end.x),R=_*Math.sin(this.start.y)+S*Math.sin(this.end.y),V=I*Math.atan2(R,Math.sqrt(Math.pow(M,2)+Math.pow(D,2)));return[I*Math.atan2(D,M),V]},v.prototype.Arc=function(f,_){var S=[];if(!f||f<=2)S.push([this.start.lon,this.start.lat]),S.push([this.end.lon,this.end.lat]);else for(var M=1/(f-1),D=0;D<f;++D){var V=this.interpolate(M*D);S.push(V)}for(var B=!1,U=0,F=_&&_.offset?_.offset:10,j=180-F,P=-180+F,Q=360-F,$=1;$<S.length;++$){var oe=S[$-1][0],X=S[$][0],ie=Math.abs(X-oe);ie>Q&&(X>j&&oe<P||oe>j&&X<P)?B=!0:ie>U&&(U=ie)}var q=[];if(B&&U<F){var se=[];q.push(se);for(var ne=0;ne<S.length;++ne){var Ce=parseFloat(S[ne][0]);if(ne>0&&Math.abs(Ce-S[ne-1][0])>Q){var xe=parseFloat(S[ne-1][0]),ue=parseFloat(S[ne-1][1]),fe=parseFloat(S[ne][0]),ee=parseFloat(S[ne][1]);if(xe>-180&&xe<P&&180===fe&&ne+1<S.length&&S[ne-1][0]>-180&&S[ne-1][0]<P){se.push([-180,S[ne][1]]),ne++,se.push([S[ne][0],S[ne][1]]);continue}if(xe>j&&xe<180&&-180===fe&&ne+1<S.length&&S[ne-1][0]>j&&S[ne-1][0]<180){se.push([180,S[ne][1]]),ne++,se.push([S[ne][0],S[ne][1]]);continue}if(xe<P&&fe>j){var de=xe;xe=fe,fe=de;var pe=ue;ue=ee,ee=pe}if(xe>j&&fe<P&&(fe+=360),xe<=180&&fe>=180&&xe<fe){var ce=(180-xe)/(fe-xe),ae=ce*ee+(1-ce)*ue;se.push([S[ne-1][0]>j?180:-180,ae]),(se=[]).push([S[ne-1][0]>j?-180:180,ae]),q.push(se)}else q.push(se=[]);se.push([Ce,S[ne][1]])}else se.push([S[ne][0],S[ne][1]])}}else{var ye=[];q.push(ye);for(var Me=0;Me<S.length;++Me)ye.push([S[Me][0],S[Me][1]])}for(var _e=new g(this.properties),Fe=0;Fe<q.length;++Fe){var Ue=new h;_e.geometries.push(Ue);for(var Ge=q[Fe],$e=0;$e<Ge.length;++$e)Ue.move_to(Ge[$e])}return _e},Ae.exports=m,Ae.exports.default=m},90621:(Ae,y)=>{"use strict";function w(q,se,ne){void 0===ne&&(ne={});var Ce={type:"Feature"};return(0===ne.id||ne.id)&&(Ce.id=ne.id),ne.bbox&&(Ce.bbox=ne.bbox),Ce.properties=se||{},Ce.geometry=q,Ce}function G(q,se,ne){if(void 0===ne&&(ne={}),!q)throw new Error("coordinates is required");if(!Array.isArray(q))throw new Error("coordinates must be an Array");if(q.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!$(q[0])||!$(q[1]))throw new Error("coordinates must contain numbers");return w({type:"Point",coordinates:q},se,ne)}function u(q,se,ne){void 0===ne&&(ne={});for(var Ce=0,xe=q;Ce<xe.length;Ce++){var ue=xe[Ce];if(ue.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var fe=0;fe<ue[ue.length-1].length;fe++)if(ue[ue.length-1][fe]!==ue[0][fe])throw new Error("First and last Position are not equivalent.")}return w({type:"Polygon",coordinates:q},se,ne)}function g(q,se,ne){if(void 0===ne&&(ne={}),q.length<2)throw new Error("coordinates must be an array of two or more positions");return w({type:"LineString",coordinates:q},se,ne)}function m(q,se){void 0===se&&(se={});var ne={type:"FeatureCollection"};return se.id&&(ne.id=se.id),se.bbox&&(ne.bbox=se.bbox),ne.features=q,ne}function f(q,se,ne){return void 0===ne&&(ne={}),w({type:"MultiLineString",coordinates:q},se,ne)}function _(q,se,ne){return void 0===ne&&(ne={}),w({type:"MultiPoint",coordinates:q},se,ne)}function S(q,se,ne){return void 0===ne&&(ne={}),w({type:"MultiPolygon",coordinates:q},se,ne)}function R(q,se){void 0===se&&(se="kilometers");var ne=y.factors[se];if(!ne)throw new Error(se+" units is invalid");return q*ne}function V(q,se){void 0===se&&(se="kilometers");var ne=y.factors[se];if(!ne)throw new Error(se+" units is invalid");return q/ne}function F(q){return q%(2*Math.PI)*180/Math.PI}function $(q){return!isNaN(q)&&null!==q&&!Array.isArray(q)}Object.defineProperty(y,"__esModule",{value:!0}),y.earthRadius=6371008.8,y.factors={centimeters:100*y.earthRadius,centimetres:100*y.earthRadius,degrees:y.earthRadius/111325,feet:3.28084*y.earthRadius,inches:39.37*y.earthRadius,kilometers:y.earthRadius/1e3,kilometres:y.earthRadius/1e3,meters:y.earthRadius,metres:y.earthRadius,miles:y.earthRadius/1609.344,millimeters:1e3*y.earthRadius,millimetres:1e3*y.earthRadius,nauticalmiles:y.earthRadius/1852,radians:1,yards:1.0936*y.earthRadius},y.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/y.earthRadius,yards:1.0936133},y.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},y.feature=w,y.geometry=function k(q,se,ne){switch(void 0===ne&&(ne={}),q){case"Point":return G(se).geometry;case"LineString":return g(se).geometry;case"Polygon":return u(se).geometry;case"MultiPoint":return _(se).geometry;case"MultiLineString":return f(se).geometry;case"MultiPolygon":return S(se).geometry;default:throw new Error(q+" is invalid")}},y.point=G,y.points=function I(q,se,ne){return void 0===ne&&(ne={}),m(q.map(function(Ce){return G(Ce,se)}),ne)},y.polygon=u,y.polygons=function h(q,se,ne){return void 0===ne&&(ne={}),m(q.map(function(Ce){return u(Ce,se)}),ne)},y.lineString=g,y.lineStrings=function v(q,se,ne){return void 0===ne&&(ne={}),m(q.map(function(Ce){return g(Ce,se)}),ne)},y.featureCollection=m,y.multiLineString=f,y.multiPoint=_,y.multiPolygon=S,y.geometryCollection=function M(q,se,ne){return void 0===ne&&(ne={}),w({type:"GeometryCollection",geometries:q},se,ne)},y.round=function D(q,se){if(void 0===se&&(se=0),se&&!(se>=0))throw new Error("precision must be a positive number");var ne=Math.pow(10,se||0);return Math.round(q*ne)/ne},y.radiansToLength=R,y.lengthToRadians=V,y.lengthToDegrees=function B(q,se){return F(V(q,se))},y.bearingToAzimuth=function U(q){var se=q%360;return se<0&&(se+=360),se},y.radiansToDegrees=F,y.degreesToRadians=function j(q){return q%360*Math.PI/180},y.convertLength=function P(q,se,ne){if(void 0===se&&(se="kilometers"),void 0===ne&&(ne="kilometers"),!(q>=0))throw new Error("length must be a positive number");return R(V(q,se),ne)},y.convertArea=function Q(q,se,ne){if(void 0===se&&(se="meters"),void 0===ne&&(ne="kilometers"),!(q>=0))throw new Error("area must be a positive number");var Ce=y.areaFactors[se];if(!Ce)throw new Error("invalid original units");var xe=y.areaFactors[ne];if(!xe)throw new Error("invalid final units");return q/Ce*xe},y.isNumber=$,y.isObject=function oe(q){return!!q&&q.constructor===Object},y.validateBBox=function X(q){if(!q)throw new Error("bbox is required");if(!Array.isArray(q))throw new Error("bbox must be an Array");if(4!==q.length&&6!==q.length)throw new Error("bbox must be an Array of 4 or 6 numbers");q.forEach(function(se){if(!$(se))throw new Error("bbox must only contain numbers")})},y.validateId=function ie(q){if(!q)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof q))throw new Error("id must be a number or a string")}},9698:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(36512)),I=k(w(6977)),u=w(90621);function g(m,f,_,S,M,D){for(var R=[],V=0;V<6;V++)R.push([m[0]+f*M[V],m[1]+_*D[V]]);return R.push(R[0].slice()),u.polygon([R],S)}function v(m,f,_,S,M,D){for(var R=[],V=0;V<6;V++){var B=[];B.push(m),B.push([m[0]+f*M[V],m[1]+_*D[V]]),B.push([m[0]+f*M[(V+1)%6],m[1]+_*D[(V+1)%6]]),B.push(m),R.push(u.polygon([B],S))}return R}y.default=function h(m,f,_){void 0===_&&(_={});var S=JSON.stringify(_.properties||{}),M=m[0],D=m[1],R=m[2],V=m[3],B=(D+V)/2,U=(M+R)/2,j=2*f/G.default([M,B],[R,B],_)*(R-M),Q=2*f/G.default([U,D],[U,V],_)*(V-D),$=j/2,oe=2*$,X=Math.sqrt(3)/2*Q,ie=R-M,q=V-D,se=3/4*oe,ne=X,xe=Math.floor((ie-oe)/(oe-$/2)),ue=(xe*se-$/2-ie)/2-$/2+se/2,fe=Math.floor((q-X)/X),ee=(q-fe*X)/2,de=fe*X-q>X/2;de&&(ee-=X/4);for(var pe=[],ce=[],ae=0;ae<6;ae++){var ye=2*Math.PI/6*ae;pe.push(Math.cos(ye)),ce.push(Math.sin(ye))}for(var Me=[],_e=0;_e<=xe;_e++)for(var Fe=0;Fe<=fe;Fe++){var Ue=_e%2==1;if(!(0===Fe&&Ue||0===Fe&&de)){var Ge=_e*se+M-ue,$e=Fe*ne+D+ee;if(Ue&&($e-=X/2),!0===_.triangles)v([Ge,$e],j/2,Q/2,JSON.parse(S),pe,ce).forEach(function(Pe){_.mask?I.default(_.mask,Pe)&&Me.push(Pe):Me.push(Pe)});else{var He=g([Ge,$e],j/2,Q/2,JSON.parse(S),pe,ce);_.mask?I.default(_.mask,He)&&Me.push(He):Me.push(He)}}}return u.featureCollection(Me)}},22396:(Ae,y,w)=>{"use strict";var k=w(11568),G=w(9698),I=w(2702),u=w(36512),h=w(19673),g=w(90698),v=w(87468),m=w(97408),f=w(90621),_=w(58570),S=w(45943);function M($){return $&&"object"==typeof $&&"default"in $?$:{default:$}}var D=M(k),R=M(G),V=M(I),B=M(u),U=M(h),F=M(g),j=M(v),P=M(m);function Q($,oe,X){if("object"!=typeof(X=X||{}))throw new Error("options is invalid");var ie=X.gridType,q=X.property,se=X.weight;if(!$)throw new Error("points is required");if(S.collectionOf($,"Point","input must contain Points"),!oe)throw new Error("cellSize is required");if(void 0!==se&&"number"!=typeof se)throw new Error("weight must be a number");q=q||"elevation",ie=ie||"square",se=se||1;var Ce,ne=D.default($);switch(ie){case"point":case"points":Ce=V.default(ne,oe,X);break;case"square":case"squares":Ce=F.default(ne,oe,X);break;case"hex":case"hexes":Ce=R.default(ne,oe,X);break;case"triangle":case"triangles":Ce=j.default(ne,oe,X);break;default:throw new Error("invalid gridType")}var xe=[];return _.featureEach(Ce,function(ue){var fe=0,ee=0;_.featureEach($,function(pe){var ye,ce="point"===ie?ue:U.default(ue),ae=B.default(ce,pe,X);if(void 0!==q&&(ye=pe.properties[q]),void 0===ye&&(ye=pe.geometry.coordinates[2]),void 0===ye)throw new Error("zValue is missing");0===ae&&(fe=ye);var Me=1/Math.pow(ae,se);ee+=Me,fe+=Me*ye});var de=P.default(ue);de.properties[q]=fe/ee,xe.push(de)}),f.featureCollection(xe)}Ae.exports=Q,Ae.exports.default=Q},6977:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(90621),I=w(45943),u=k(w(98464));y.default=function h(g,v,m){void 0===m&&(m={});var f=I.getGeom(g),_=I.getGeom(v),S=u.default.intersection(f.coordinates,_.coordinates);return 0===S.length?null:1===S.length?G.polygon(S[0],m.properties):G.multiPolygon(S,m.properties)}},45943:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621);y.getCoord=function G(_){if(!_)throw new Error("coord is required");if(!Array.isArray(_)){if("Feature"===_.type&&null!==_.geometry&&"Point"===_.geometry.type)return _.geometry.coordinates;if("Point"===_.type)return _.coordinates}if(Array.isArray(_)&&_.length>=2&&!Array.isArray(_[0])&&!Array.isArray(_[1]))return _;throw new Error("coord must be GeoJSON Point or an Array of numbers")},y.getCoords=function I(_){if(Array.isArray(_))return _;if("Feature"===_.type){if(null!==_.geometry)return _.geometry.coordinates}else if(_.coordinates)return _.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},y.containsNumber=function u(_){if(_.length>1&&k.isNumber(_[0])&&k.isNumber(_[1]))return!0;if(Array.isArray(_[0])&&_[0].length)return u(_[0]);throw new Error("coordinates must only contain numbers")},y.geojsonType=function h(_,S,M){if(!S||!M)throw new Error("type and name required");if(!_||_.type!==S)throw new Error("Invalid input to "+M+": must be a "+S+", given "+_.type)},y.featureOf=function g(_,S,M){if(!_)throw new Error("No feature passed");if(!M)throw new Error(".featureOf() requires a name");if(!_||"Feature"!==_.type||!_.geometry)throw new Error("Invalid input to "+M+", Feature with geometry required");if(!_.geometry||_.geometry.type!==S)throw new Error("Invalid input to "+M+": must be a "+S+", given "+_.geometry.type)},y.collectionOf=function v(_,S,M){if(!_)throw new Error("No featureCollection passed");if(!M)throw new Error(".collectionOf() requires a name");if(!_||"FeatureCollection"!==_.type)throw new Error("Invalid input to "+M+", FeatureCollection required");for(var D=0,R=_.features;D<R.length;D++){var V=R[D];if(!V||"Feature"!==V.type||!V.geometry)throw new Error("Invalid input to "+M+", Feature with geometry required");if(!V.geometry||V.geometry.type!==S)throw new Error("Invalid input to "+M+": must be a "+S+", given "+V.geometry.type)}},y.getGeom=function m(_){return"Feature"===_.type?_.geometry:_},y.getType=function f(_,S){return"FeatureCollection"===_.type?"FeatureCollection":"GeometryCollection"===_.type?"GeometryCollection":"Feature"===_.type&&null!==_.geometry?_.geometry.type:_.type}},8525:(Ae,y,w)=>{"use strict";var k=w(11568),G=w(45441),I=w(40940),u=w(41044),h=w(45943),g=w(90621),v=w(64772),m=w(58570);function f(at){return at&&"object"==typeof at&&"default"in at?at:{default:at}}var _=f(k),S=f(G),M=f(I),D=f(u),R=f(v);var U={successCallback:null,verbose:!1,polygons:!1},F={};function j(at,wt,On,Nn){Nn=Nn||{};for(var Rn=Object.keys(U),Yn=0;Yn<Rn.length;Yn++){var Dt=Rn[Yn],Kn=Nn[Dt];F[Dt]=Kn=typeof Kn<"u"&&null!==Kn?Kn:U[Dt]}F.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+wt+":"+(wt+On)+"]");var ft,Ot=function xr(at,wt,On){for(var Nn=at.length-1,Rn=at[0].length-1,Yn={rows:Nn,cols:Rn,cells:[]},Dt=wt+Math.abs(On),Kn=0;Kn<Nn;++Kn){Yn.cells[Kn]=[];for(var Ot=0;Ot<Rn;++Ot){var ft=0,St=at[Kn+1][Ot],Kt=at[Kn+1][Ot+1],Ut=at[Kn][Ot+1],rn=at[Kn][Ot];if(!(isNaN(St)||isNaN(Kt)||isNaN(Ut)||isNaN(rn))){ft|=St<wt?0:St>Dt?128:64,ft|=Kt<wt?0:Kt>Dt?32:16,ft|=Ut<wt?0:Ut>Dt?8:4;var P1=+(ft|=rn<wt?0:rn>Dt?2:1),Gi=0;if(17===ft||18===ft||33===ft||34===ft||38===ft||68===ft||72===ft||98===ft||102===ft||132===ft||136===ft||137===ft||152===ft||153===ft){var La=(St+Kt+Ut+rn)/4;Gi=La>Dt?2:La<wt?0:1,34===ft?1===Gi?ft=35:0===Gi&&(ft=136):136===ft?1===Gi?(ft=35,Gi=4):0===Gi&&(ft=34):17===ft?1===Gi?(ft=155,Gi=4):0===Gi&&(ft=153):68===ft?1===Gi?(ft=103,Gi=4):0===Gi&&(ft=102):153===ft?1===Gi&&(ft=155):102===ft?1===Gi&&(ft=103):152===ft?Gi<2&&(ft=156,Gi=1):137===ft?Gi<2&&(ft=139,Gi=1):98===ft?Gi<2&&(ft=99,Gi=1):38===ft?Gi<2&&(ft=39,Gi=1):18===ft?Gi>0?(ft=156,Gi=4):ft=152:33===ft?Gi>0?(ft=139,Gi=4):ft=137:72===ft?Gi>0?(ft=99,Gi=4):ft=98:132===ft&&(Gi>0?(ft=39,Gi=4):ft=38)}if(0!=ft&&170!=ft){var Di,Ui,nr,Be,_t,Lt,nn,Pn;Di=Ui=nr=Be=_t=Lt=nn=Pn=.5;var en=[];1===ft?(nr=1-Ke(wt,Ut,rn),Pn=1-Ke(wt,St,rn),en.push(vn[ft])):169===ft?(nr=Ke(Dt,rn,Ut),Pn=Ke(Dt,rn,St),en.push(vn[ft])):4===ft?(Lt=1-Ke(wt,Kt,Ut),Be=Ke(wt,rn,Ut),en.push(Bt[ft])):166===ft?(Lt=Ke(Dt,Ut,Kt),Be=1-Ke(Dt,Ut,rn),en.push(Bt[ft])):16===ft?(_t=Ke(wt,Ut,Kt),Ui=Ke(wt,St,Kt),en.push(Yt[ft])):154===ft?(_t=1-Ke(Dt,Kt,Ut),Ui=1-Ke(Dt,Kt,St),en.push(Yt[ft])):64===ft?(nn=Ke(wt,rn,St),Di=1-Ke(wt,Kt,St),en.push(xn[ft])):106===ft?(nn=1-Ke(Dt,St,rn),Di=Ke(Dt,St,Kt),en.push(xn[ft])):168===ft?(Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),en.push($t[ft]),en.push(vn[ft])):2===ft?(Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),en.push($t[ft]),en.push(vn[ft])):162===ft?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),en.push($t[ft]),en.push(vn[ft])):8===ft?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),en.push(Yt[ft]),en.push(Bt[ft])):138===ft?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St),en.push(Yt[ft]),en.push(Bt[ft])):32===ft?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt),en.push(Yt[ft]),en.push(Bt[ft])):42===ft?(Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt),en.push(Cn[ft]),en.push(xn[ft])):128===ft&&(Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St),en.push(Cn[ft]),en.push(xn[ft])),5===ft?(Lt=1-Ke(wt,Kt,Ut),Pn=1-Ke(wt,St,rn),en.push(Bt[ft])):165===ft?(Lt=Ke(Dt,Ut,Kt),Pn=Ke(Dt,rn,St),en.push(Bt[ft])):20===ft?(Be=Ke(wt,rn,Ut),Ui=Ke(wt,St,Kt),en.push($t[ft])):150===ft?(Be=1-Ke(Dt,Ut,rn),Ui=1-Ke(Dt,Kt,St),en.push($t[ft])):80===ft?(_t=Ke(wt,Ut,Kt),nn=Ke(wt,rn,St),en.push(Yt[ft])):90===ft?(_t=1-Ke(Dt,Kt,Ut),nn=1-Ke(Dt,St,rn),en.push(Yt[ft])):65===ft?(nr=1-Ke(wt,Ut,rn),Di=1-Ke(wt,Kt,St),en.push(vn[ft])):105===ft?(nr=Ke(Dt,rn,Ut),Di=Ke(Dt,St,Kt),en.push(vn[ft])):160===ft?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),en.push(Yt[ft]),en.push(Bt[ft])):10===ft?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),en.push(Yt[ft]),en.push(Bt[ft])):130===ft?(Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St),en.push($t[ft]),en.push(vn[ft])):40===ft?(Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt),en.push($t[ft]),en.push(vn[ft])):101===ft?(Lt=Ke(Dt,Ut,Kt),Di=Ke(Dt,St,Kt),en.push(Bt[ft])):69===ft?(Lt=1-Ke(wt,Kt,Ut),Di=1-Ke(wt,Kt,St),en.push(Bt[ft])):149===ft?(Pn=Ke(Dt,rn,St),Ui=1-Ke(Dt,Kt,St),en.push(Cn[ft])):21===ft?(Pn=1-Ke(wt,St,rn),Ui=Ke(wt,St,Kt),en.push(Cn[ft])):86===ft?(Be=1-Ke(Dt,Ut,rn),nn=1-Ke(Dt,St,rn),en.push($t[ft])):84===ft?(Be=Ke(wt,rn,Ut),nn=Ke(wt,rn,St),en.push($t[ft])):89===ft?(_t=1-Ke(Dt,Kt,Ut),nr=Ke(Dt,rn,Ut),en.push(vn[ft])):81===ft?(_t=Ke(wt,Ut,Kt),nr=1-Ke(wt,Ut,rn),en.push(vn[ft])):96===ft?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),nn=Ke(wt,rn,St),Di=Ke(Dt,St,Kt),en.push(Yt[ft]),en.push(Bt[ft])):74===ft?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),nn=1-Ke(Dt,St,rn),Di=1-Ke(wt,Kt,St),en.push(Yt[ft]),en.push(Bt[ft])):24===ft?(_t=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),Ui=Ke(wt,St,Kt),en.push(Yt[ft]),en.push(vn[ft])):146===ft?(_t=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),Ui=1-Ke(Dt,Kt,St),en.push(Yt[ft]),en.push(vn[ft])):6===ft?(Lt=1-Ke(wt,Kt,Ut),Be=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),en.push(Bt[ft]),en.push($t[ft])):164===ft?(Lt=Ke(Dt,Ut,Kt),Be=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),en.push(Bt[ft]),en.push($t[ft])):129===ft?(nr=1-Ke(wt,Ut,rn),Pn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St),en.push(vn[ft]),en.push(Cn[ft])):41===ft?(nr=Ke(Dt,rn,Ut),Pn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt),en.push(vn[ft]),en.push(Cn[ft])):66===ft?(Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),nn=1-Ke(Dt,St,rn),Di=1-Ke(wt,Kt,St),en.push($t[ft]),en.push(vn[ft])):104===ft?(Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),nn=Ke(wt,rn,St),Di=Ke(Dt,St,Kt),en.push(vn[ft]),en.push(jn[ft])):144===ft?(_t=Ke(wt,Ut,Kt),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Ui=1-Ke(Dt,Kt,St),en.push(Yt[ft]),en.push(xn[ft])):26===ft?(_t=1-Ke(Dt,Kt,Ut),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Ui=Ke(wt,St,Kt),en.push(Yt[ft]),en.push(xn[ft])):36===ft?(Lt=Ke(Dt,Ut,Kt),Be=Ke(wt,rn,Ut),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt),en.push(Bt[ft]),en.push($t[ft])):134===ft?(Lt=1-Ke(wt,Kt,Ut),Be=1-Ke(Dt,Ut,rn),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St),en.push(Bt[ft]),en.push($t[ft])):9===ft?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),nr=Ke(Dt,rn,Ut),Pn=1-Ke(wt,St,rn),en.push(Yt[ft]),en.push(Bt[ft])):161===ft?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),nr=1-Ke(wt,Ut,rn),Pn=Ke(Dt,rn,St),en.push(Yt[ft]),en.push(Bt[ft])):37===ft?(Lt=Ke(Dt,Ut,Kt),Pn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt),en.push(Bt[ft]),en.push(Cn[ft])):133===ft?(Lt=1-Ke(wt,Kt,Ut),Pn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St),en.push(Bt[ft]),en.push(Cn[ft])):148===ft?(Be=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Ui=1-Ke(Dt,Kt,St),en.push($t[ft]),en.push(xn[ft])):22===ft?(Be=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Ui=Ke(wt,St,Kt),en.push($t[ft]),en.push(xn[ft])):82===ft?(_t=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),nn=1-Ke(Dt,St,rn),en.push(Yt[ft]),en.push(vn[ft])):88===ft?(_t=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),nn=Ke(wt,rn,St),en.push(Yt[ft]),en.push(vn[ft])):73===ft?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),nr=Ke(Dt,rn,Ut),Di=1-Ke(wt,Kt,St),en.push(Yt[ft]),en.push(Bt[ft])):97===ft?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),nr=1-Ke(wt,Ut,rn),Di=Ke(Dt,St,Kt),en.push(Yt[ft]),en.push(Bt[ft])):145===ft?(_t=Ke(wt,Ut,Kt),nr=1-Ke(wt,Ut,rn),Pn=Ke(Dt,rn,St),Ui=1-Ke(Dt,Kt,St),en.push(Yt[ft]),en.push(Cn[ft])):25===ft?(_t=1-Ke(Dt,Kt,Ut),nr=Ke(Dt,rn,Ut),Pn=1-Ke(wt,St,rn),Ui=Ke(wt,St,Kt),en.push(Yt[ft]),en.push(Cn[ft])):70===ft?(Lt=1-Ke(wt,Kt,Ut),Be=1-Ke(Dt,Ut,rn),nn=1-Ke(Dt,St,rn),Di=1-Ke(wt,Kt,St),en.push(Bt[ft]),en.push($t[ft])):100===ft?(Lt=Ke(Dt,Ut,Kt),Be=Ke(wt,rn,Ut),nn=Ke(wt,rn,St),Di=Ke(Dt,St,Kt),en.push(Bt[ft]),en.push($t[ft])):34===ft?(0===Gi?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St)):(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt)),en.push(Yt[ft]),en.push(Bt[ft]),en.push(Cn[ft]),en.push(xn[ft])):35===ft?(4===Gi?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St)):(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt)),en.push(Yt[ft]),en.push(Bt[ft]),en.push(vn[ft]),en.push(xn[ft])):136===ft?(0===Gi?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt)):(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St)),en.push(Yt[ft]),en.push(Bt[ft]),en.push(Cn[ft]),en.push(xn[ft])):153===ft?(0===Gi?(_t=Ke(wt,Ut,Kt),nr=1-Ke(wt,Ut,rn),Pn=1-Ke(wt,St,rn),Ui=Ke(wt,St,Kt)):(_t=1-Ke(Dt,Kt,Ut),nr=Ke(Dt,rn,Ut),Pn=Ke(Dt,rn,St),Ui=1-Ke(Dt,Kt,St)),en.push(Yt[ft]),en.push(vn[ft])):102===ft?(0===Gi?(Lt=1-Ke(wt,Kt,Ut),Be=Ke(wt,rn,Ut),nn=Ke(wt,rn,St),Di=1-Ke(wt,Kt,St)):(Lt=Ke(Dt,Ut,Kt),Be=1-Ke(Dt,Ut,rn),nn=1-Ke(Dt,St,rn),Di=Ke(Dt,St,Kt)),en.push(Bt[ft]),en.push(xn[ft])):155===ft?(4===Gi?(_t=Ke(wt,Ut,Kt),nr=1-Ke(wt,Ut,rn),Pn=1-Ke(wt,St,rn),Ui=Ke(wt,St,Kt)):(_t=1-Ke(Dt,Kt,Ut),nr=Ke(Dt,rn,Ut),Pn=Ke(Dt,rn,St),Ui=1-Ke(Dt,Kt,St)),en.push(Yt[ft]),en.push(Cn[ft])):103===ft?(4===Gi?(Lt=1-Ke(wt,Kt,Ut),Be=Ke(wt,rn,Ut),nn=Ke(wt,rn,St),Di=1-Ke(wt,Kt,St)):(Lt=Ke(Dt,Ut,Kt),Be=1-Ke(Dt,Ut,rn),nn=1-Ke(Dt,St,rn),Di=Ke(Dt,St,Kt)),en.push(Bt[ft]),en.push($t[ft])):152===ft?(0===Gi?(_t=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Ui=Ke(wt,St,Kt)):(_t=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Ui=1-Ke(Dt,Kt,St)),en.push(Yt[ft]),en.push($t[ft]),en.push(vn[ft])):156===ft?(4===Gi?(_t=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Ui=Ke(wt,St,Kt)):(_t=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Ui=1-Ke(Dt,Kt,St)),en.push(Yt[ft]),en.push(vn[ft]),en.push(xn[ft])):137===ft?(0===Gi?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),nr=1-Ke(wt,Ut,rn),Pn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt)):(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),nr=Ke(Dt,rn,Ut),Pn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St)),en.push(Yt[ft]),en.push(Bt[ft]),en.push(vn[ft])):139===ft?(4===Gi?(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),nr=1-Ke(wt,Ut,rn),Pn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt)):(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),nr=Ke(Dt,rn,Ut),Pn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St)),en.push(Yt[ft]),en.push(Bt[ft]),en.push(Cn[ft])):98===ft?(0===Gi?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),nn=Ke(wt,rn,St),Di=1-Ke(wt,Kt,St)):(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),nn=1-Ke(Dt,St,rn),Di=Ke(Dt,St,Kt)),en.push(Yt[ft]),en.push(Bt[ft]),en.push(xn[ft])):99===ft?(4===Gi?(_t=1-Ke(wt,Kt,Ut),Lt=1-Ke(Dt,Kt,Ut),Be=Ke(Dt,rn,Ut),nr=Ke(wt,rn,Ut),nn=Ke(wt,rn,St),Di=1-Ke(wt,Kt,St)):(_t=Ke(Dt,Ut,Kt),Lt=Ke(wt,Ut,Kt),Be=1-Ke(wt,Ut,rn),nr=1-Ke(Dt,Ut,rn),nn=1-Ke(Dt,St,rn),Di=Ke(Dt,St,Kt)),en.push(Yt[ft]),en.push(Bt[ft]),en.push(vn[ft])):38===ft?(0===Gi?(Lt=1-Ke(wt,Kt,Ut),Be=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St)):(Lt=Ke(Dt,Ut,Kt),Be=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt)),en.push(Bt[ft]),en.push(Cn[ft]),en.push(xn[ft])):39===ft?(4===Gi?(Lt=1-Ke(wt,Kt,Ut),Be=Ke(wt,rn,Ut),Pn=Ke(wt,rn,St),nn=Ke(Dt,rn,St),Di=1-Ke(Dt,Kt,St),Ui=1-Ke(wt,Kt,St)):(Lt=Ke(Dt,Ut,Kt),Be=1-Ke(Dt,Ut,rn),Pn=1-Ke(Dt,St,rn),nn=1-Ke(wt,St,rn),Di=Ke(wt,St,Kt),Ui=Ke(Dt,St,Kt)),en.push(Bt[ft]),en.push($t[ft]),en.push(xn[ft])):85===ft&&(_t=1,Lt=0,Be=1,nr=0,Pn=0,nn=1,Di=0,Ui=1),(Di<0||Di>1||Ui<0||Ui>1||_t<0||_t>1||Be<0||Be>1||Pn<0||Pn>1||nn<0||nn>1)&&console.log("MarchingSquaresJS-isoBands: "+ft+" "+P1+" "+St+","+Kt+","+Ut+","+rn+" "+Gi+" "+Di+" "+Ui+" "+_t+" "+Lt+" "+Be+" "+nr+" "+Pn+" "+nn),Yn.cells[Kn][Ot]={cval:ft,cval_real:P1,flipped:Gi,topleft:Di,topright:Ui,righttop:_t,rightbottom:Lt,bottomright:Be,bottomleft:nr,leftbottom:Pn,lefttop:nn,edges:en}}}}}return Yn}(at,wt,On);return F.polygons?(F.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),ft=function Vi(at){var wt=[],On=0;return at.cells.forEach(function(Nn,Rn){Nn.forEach(function(Yn,Dt){if(typeof Yn<"u"){var Kn=Dn[Yn.cval](Yn);"object"==typeof Kn&&si(Kn)?"object"==typeof Kn[0]&&si(Kn[0])?"object"==typeof Kn[0][0]&&si(Kn[0][0])?Kn.forEach(function(Ot){Ot.forEach(function(ft){ft[0]+=Dt,ft[1]+=Rn}),wt[On++]=Ot}):(Kn.forEach(function(Ot){Ot[0]+=Dt,Ot[1]+=Rn}),wt[On++]=Kn):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),wt}(Ot)):(F.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),ft=function Zr(at){for(var wt=[],On=at.rows,Nn=at.cols,Rn=[],Yn=0;Yn<On;Yn++)for(var Dt=0;Dt<Nn;Dt++)if(typeof at.cells[Yn][Dt]<"u"&&at.cells[Yn][Dt].edges.length>0){var Ot=Ri(at.cells[Yn][Dt]),ft=null,St=Dt,Kt=Yn;null!==Ot&&Rn.push([Ot.p[0]+St,Ot.p[1]+Kt]);do{if(null===(ft=to(at.cells[Kt][St],Ot.x,Ot.y,Ot.o)))break;if(Rn.push([ft.p[0]+St,ft.p[1]+Kt]),St+=ft.x,Ot=ft,(Kt+=ft.y)<0||Kt>=On||St<0||St>=Nn||typeof at.cells[Kt][St]>"u"){var Ut=Li(at,St-=ft.x,Kt-=ft.y,ft.x,ft.y,ft.o);if(null===Ut)break;Ut.path.forEach(function(rn){Rn.push(rn)}),St=Ut.i,Kt=Ut.j,Ot=Ut}}while(typeof at.cells[Kt][St]<"u"&&at.cells[Kt][St].edges.length>0);wt.push(Rn),Rn=[],at.cells[Yn][Dt].edges.length>0&&Dt--}return wt}(Ot)),"function"==typeof F.successCallback&&F.successCallback(ft),ft}var P=64,Q=16,$=4,oe=1,X=[],ie=[],q=[],se=[],ne=[],Ce=[],xe=[],ue=[],fe=[],ee=[],de=[],pe=[],ce=[],ae=[],ye=[],Me=[],_e=[],Fe=[],Ue=[],Ge=[],$e=[],He=[],Pe=[],je=[];xe[85]=ee[85]=-1,ue[85]=de[85]=0,fe[85]=pe[85]=1,Ue[85]=He[85]=1,Ge[85]=Pe[85]=0,$e[85]=je[85]=1,X[85]=se[85]=0,ie[85]=ne[85]=-1,q[85]=ye[85]=0,Me[85]=ce[85]=0,_e[85]=ae[85]=1,Ce[85]=Fe[85]=1,He[1]=He[169]=0,Pe[1]=Pe[169]=-1,je[1]=je[169]=0,ce[1]=ce[169]=-1,ae[1]=ae[169]=0,ye[1]=ye[169]=0,ee[4]=ee[166]=0,de[4]=de[166]=-1,pe[4]=pe[166]=1,Me[4]=Me[166]=1,_e[4]=_e[166]=0,Fe[4]=Fe[166]=0,xe[16]=xe[154]=0,ue[16]=ue[154]=1,fe[16]=fe[154]=1,se[16]=se[154]=1,ne[16]=ne[154]=0,Ce[16]=Ce[154]=1,Ue[64]=Ue[106]=0,Ge[64]=Ge[106]=1,$e[64]=$e[106]=0,X[64]=X[106]=-1,ie[64]=ie[106]=0,q[64]=q[106]=1,Ue[2]=Ue[168]=0,Ge[2]=Ge[168]=-1,$e[2]=$e[168]=1,He[2]=He[168]=0,Pe[2]=Pe[168]=-1,je[2]=je[168]=0,ce[2]=ce[168]=-1,ae[2]=ae[168]=0,ye[2]=ye[168]=0,Me[2]=Me[168]=-1,_e[2]=_e[168]=0,Fe[2]=Fe[168]=1,xe[8]=xe[162]=0,ue[8]=ue[162]=-1,fe[8]=fe[162]=0,ee[8]=ee[162]=0,de[8]=de[162]=-1,pe[8]=pe[162]=1,ce[8]=ce[162]=1,ae[8]=ae[162]=0,ye[8]=ye[162]=1,Me[8]=Me[162]=1,_e[8]=_e[162]=0,Fe[8]=Fe[162]=0,xe[32]=xe[138]=0,ue[32]=ue[138]=1,fe[32]=fe[138]=1,ee[32]=ee[138]=0,de[32]=de[138]=1,pe[32]=pe[138]=0,X[32]=X[138]=1,ie[32]=ie[138]=0,q[32]=q[138]=0,se[32]=se[138]=1,ne[32]=ne[138]=0,Ce[32]=Ce[138]=1,He[128]=He[42]=0,Pe[128]=Pe[42]=1,je[128]=je[42]=1,Ue[128]=Ue[42]=0,Ge[128]=Ge[42]=1,$e[128]=$e[42]=0,X[128]=X[42]=-1,ie[128]=ie[42]=0,q[128]=q[42]=1,se[128]=se[42]=-1,ne[128]=ne[42]=0,Ce[128]=Ce[42]=0,ee[5]=ee[165]=-1,de[5]=de[165]=0,pe[5]=pe[165]=0,He[5]=He[165]=1,Pe[5]=Pe[165]=0,je[5]=je[165]=0,Me[20]=Me[150]=0,_e[20]=_e[150]=1,Fe[20]=Fe[150]=1,se[20]=se[150]=0,ne[20]=ne[150]=-1,Ce[20]=Ce[150]=1,xe[80]=xe[90]=-1,ue[80]=ue[90]=0,fe[80]=fe[90]=1,Ue[80]=Ue[90]=1,Ge[80]=Ge[90]=0,$e[80]=$e[90]=1,ce[65]=ce[105]=0,ae[65]=ae[105]=1,ye[65]=ye[105]=0,X[65]=X[105]=0,ie[65]=ie[105]=-1,q[65]=q[105]=0,xe[160]=xe[10]=-1,ue[160]=ue[10]=0,fe[160]=fe[10]=1,ee[160]=ee[10]=-1,de[160]=de[10]=0,pe[160]=pe[10]=0,He[160]=He[10]=1,Pe[160]=Pe[10]=0,je[160]=je[10]=0,Ue[160]=Ue[10]=1,Ge[160]=Ge[10]=0,$e[160]=$e[10]=1,Me[130]=Me[40]=0,_e[130]=_e[40]=1,Fe[130]=Fe[40]=1,ce[130]=ce[40]=0,ae[130]=ae[40]=1,ye[130]=ye[40]=0,X[130]=X[40]=0,ie[130]=ie[40]=-1,q[130]=q[40]=0,se[130]=se[40]=0,ne[130]=ne[40]=-1,Ce[130]=Ce[40]=1,ee[37]=ee[133]=0,de[37]=de[133]=1,pe[37]=pe[133]=1,He[37]=He[133]=0,Pe[37]=Pe[133]=1,je[37]=je[133]=0,X[37]=X[133]=-1,ie[37]=ie[133]=0,q[37]=q[133]=0,se[37]=se[133]=1,ne[37]=ne[133]=0,Ce[37]=Ce[133]=0,Me[148]=Me[22]=-1,_e[148]=_e[22]=0,Fe[148]=Fe[22]=0,He[148]=He[22]=0,Pe[148]=Pe[22]=-1,je[148]=je[22]=1,Ue[148]=Ue[22]=0,Ge[148]=Ge[22]=1,$e[148]=$e[22]=1,se[148]=se[22]=-1,ne[148]=ne[22]=0,Ce[148]=Ce[22]=1,xe[82]=xe[88]=0,ue[82]=ue[88]=-1,fe[82]=fe[88]=1,Me[82]=Me[88]=1,_e[82]=_e[88]=0,Fe[82]=Fe[88]=1,ce[82]=ce[88]=-1,ae[82]=ae[88]=0,ye[82]=ye[88]=1,Ue[82]=Ue[88]=0,Ge[82]=Ge[88]=-1,$e[82]=$e[88]=0,xe[73]=xe[97]=0,ue[73]=ue[97]=1,fe[73]=fe[97]=0,ee[73]=ee[97]=0,de[73]=de[97]=-1,pe[73]=pe[97]=0,ce[73]=ce[97]=1,ae[73]=ae[97]=0,ye[73]=ye[97]=0,X[73]=X[97]=1,ie[73]=ie[97]=0,q[73]=q[97]=1,xe[145]=xe[25]=0,ue[145]=ue[25]=-1,fe[145]=fe[25]=0,ce[145]=ce[25]=1,ae[145]=ae[25]=0,ye[145]=ye[25]=1,He[145]=He[25]=0,Pe[145]=Pe[25]=1,je[145]=je[25]=1,se[145]=se[25]=-1,ne[145]=ne[25]=0,Ce[145]=Ce[25]=0,ee[70]=ee[100]=0,de[70]=de[100]=1,pe[70]=pe[100]=0,Me[70]=Me[100]=-1,_e[70]=_e[100]=0,Fe[70]=Fe[100]=1,Ue[70]=Ue[100]=0,Ge[70]=Ge[100]=-1,$e[70]=$e[100]=1,X[70]=X[100]=1,ie[70]=ie[100]=0,q[70]=q[100]=0,ee[101]=ee[69]=0,de[101]=de[69]=1,pe[101]=pe[69]=0,X[101]=X[69]=1,ie[101]=ie[69]=0,q[101]=q[69]=0,He[149]=He[21]=0,Pe[149]=Pe[21]=1,je[149]=je[21]=1,se[149]=se[21]=-1,ne[149]=ne[21]=0,Ce[149]=Ce[21]=0,Me[86]=Me[84]=-1,_e[86]=_e[84]=0,Fe[86]=Fe[84]=1,Ue[86]=Ue[84]=0,Ge[86]=Ge[84]=-1,$e[86]=$e[84]=1,xe[89]=xe[81]=0,ue[89]=ue[81]=-1,fe[89]=fe[81]=0,ce[89]=ce[81]=1,ae[89]=ae[81]=0,ye[89]=ye[81]=1,xe[96]=xe[74]=0,ue[96]=ue[74]=1,fe[96]=fe[74]=0,ee[96]=ee[74]=-1,de[96]=de[74]=0,pe[96]=pe[74]=1,Ue[96]=Ue[74]=1,Ge[96]=Ge[74]=0,$e[96]=$e[74]=0,X[96]=X[74]=1,ie[96]=ie[74]=0,q[96]=q[74]=1,xe[24]=xe[146]=0,ue[24]=ue[146]=-1,fe[24]=fe[146]=1,Me[24]=Me[146]=1,_e[24]=_e[146]=0,Fe[24]=Fe[146]=1,ce[24]=ce[146]=0,ae[24]=ae[146]=1,ye[24]=ye[146]=1,se[24]=se[146]=0,ne[24]=ne[146]=-1,Ce[24]=Ce[146]=0,ee[6]=ee[164]=-1,de[6]=de[164]=0,pe[6]=pe[164]=1,Me[6]=Me[164]=-1,_e[6]=_e[164]=0,Fe[6]=Fe[164]=0,He[6]=He[164]=0,Pe[6]=Pe[164]=-1,je[6]=je[164]=1,Ue[6]=Ue[164]=1,Ge[6]=Ge[164]=0,$e[6]=$e[164]=0,ce[129]=ce[41]=0,ae[129]=ae[41]=1,ye[129]=ye[41]=1,He[129]=He[41]=0,Pe[129]=Pe[41]=1,je[129]=je[41]=0,X[129]=X[41]=-1,ie[129]=ie[41]=0,q[129]=q[41]=0,se[129]=se[41]=0,ne[129]=ne[41]=-1,Ce[129]=Ce[41]=0,Me[66]=Me[104]=0,_e[66]=_e[104]=1,Fe[66]=Fe[104]=0,ce[66]=ce[104]=-1,ae[66]=ae[104]=0,ye[66]=ye[104]=1,Ue[66]=Ue[104]=0,Ge[66]=Ge[104]=-1,$e[66]=$e[104]=0,X[66]=X[104]=0,ie[66]=ie[104]=-1,q[66]=q[104]=1,xe[144]=xe[26]=-1,ue[144]=ue[26]=0,fe[144]=fe[26]=0,He[144]=He[26]=1,Pe[144]=Pe[26]=0,je[144]=je[26]=1,Ue[144]=Ue[26]=0,Ge[144]=Ge[26]=1,$e[144]=$e[26]=1,se[144]=se[26]=-1,ne[144]=ne[26]=0,Ce[144]=Ce[26]=1,ee[36]=ee[134]=0,de[36]=de[134]=1,pe[36]=pe[134]=1,Me[36]=Me[134]=0,_e[36]=_e[134]=1,Fe[36]=Fe[134]=0,X[36]=X[134]=0,ie[36]=ie[134]=-1,q[36]=q[134]=1,se[36]=se[134]=1,ne[36]=ne[134]=0,Ce[36]=Ce[134]=0,xe[9]=xe[161]=-1,ue[9]=ue[161]=0,fe[9]=fe[161]=0,ee[9]=ee[161]=0,de[9]=de[161]=-1,pe[9]=pe[161]=0,ce[9]=ce[161]=1,ae[9]=ae[161]=0,ye[9]=ye[161]=0,He[9]=He[161]=1,Pe[9]=Pe[161]=0,je[9]=je[161]=1,xe[136]=0,ue[136]=1,fe[136]=1,ee[136]=0,de[136]=1,pe[136]=0,Me[136]=-1,_e[136]=0,Fe[136]=1,ce[136]=-1,ae[136]=0,ye[136]=0,He[136]=0,Pe[136]=-1,je[136]=0,Ue[136]=0,Ge[136]=-1,$e[136]=1,X[136]=1,ie[136]=0,q[136]=0,se[136]=1,ne[136]=0,Ce[136]=1,xe[34]=0,ue[34]=-1,fe[34]=0,ee[34]=0,de[34]=-1,pe[34]=1,Me[34]=1,_e[34]=0,Fe[34]=0,ce[34]=1,ae[34]=0,ye[34]=1,He[34]=0,Pe[34]=1,je[34]=1,Ue[34]=0,Ge[34]=1,$e[34]=0,X[34]=-1,ie[34]=0,q[34]=1,se[34]=-1,ne[34]=0,Ce[34]=0,xe[35]=0,ue[35]=1,fe[35]=1,ee[35]=0,de[35]=-1,pe[35]=1,Me[35]=1,_e[35]=0,Fe[35]=0,ce[35]=-1,ae[35]=0,ye[35]=0,He[35]=0,Pe[35]=-1,je[35]=0,Ue[35]=0,Ge[35]=1,$e[35]=0,X[35]=-1,ie[35]=0,q[35]=1,se[35]=1,ne[35]=0,Ce[35]=1,xe[153]=0,ue[153]=1,fe[153]=1,ce[153]=-1,ae[153]=0,ye[153]=0,He[153]=0,Pe[153]=-1,je[153]=0,se[153]=1,ne[153]=0,Ce[153]=1,ee[102]=0,de[102]=-1,pe[102]=1,Me[102]=1,_e[102]=0,Fe[102]=0,Ue[102]=0,Ge[102]=1,$e[102]=0,X[102]=-1,ie[102]=0,q[102]=1,xe[155]=0,ue[155]=-1,fe[155]=0,ce[155]=1,ae[155]=0,ye[155]=1,He[155]=0,Pe[155]=1,je[155]=1,se[155]=-1,ne[155]=0,Ce[155]=0,ee[103]=0,de[103]=1,pe[103]=0,Me[103]=-1,_e[103]=0,Fe[103]=1,Ue[103]=0,Ge[103]=-1,$e[103]=1,X[103]=1,ie[103]=0,q[103]=0,xe[152]=0,ue[152]=1,fe[152]=1,Me[152]=-1,_e[152]=0,Fe[152]=1,ce[152]=-1,ae[152]=0,ye[152]=0,He[152]=0,Pe[152]=-1,je[152]=0,Ue[152]=0,Ge[152]=-1,$e[152]=1,se[152]=1,ne[152]=0,Ce[152]=1,xe[156]=0,ue[156]=-1,fe[156]=1,Me[156]=1,_e[156]=0,Fe[156]=1,ce[156]=-1,ae[156]=0,ye[156]=0,He[156]=0,Pe[156]=-1,je[156]=0,Ue[156]=0,Ge[156]=1,$e[156]=1,se[156]=-1,ne[156]=0,Ce[156]=1,xe[137]=0,ue[137]=1,fe[137]=1,ee[137]=0,de[137]=1,pe[137]=0,ce[137]=-1,ae[137]=0,ye[137]=0,He[137]=0,Pe[137]=-1,je[137]=0,X[137]=1,ie[137]=0,q[137]=0,se[137]=1,ne[137]=0,Ce[137]=1,xe[139]=0,ue[139]=1,fe[139]=1,ee[139]=0,de[139]=-1,pe[139]=0,ce[139]=1,ae[139]=0,ye[139]=0,He[139]=0,Pe[139]=1,je[139]=0,X[139]=-1,ie[139]=0,q[139]=0,se[139]=1,ne[139]=0,Ce[139]=1,xe[98]=0,ue[98]=-1,fe[98]=0,ee[98]=0,de[98]=-1,pe[98]=1,Me[98]=1,_e[98]=0,Fe[98]=0,ce[98]=1,ae[98]=0,ye[98]=1,Ue[98]=0,Ge[98]=1,$e[98]=0,X[98]=-1,ie[98]=0,q[98]=1,xe[99]=0,ue[99]=1,fe[99]=0,ee[99]=0,de[99]=-1,pe[99]=1,Me[99]=1,_e[99]=0,Fe[99]=0,ce[99]=-1,ae[99]=0,ye[99]=1,Ue[99]=0,Ge[99]=-1,$e[99]=0,X[99]=1,ie[99]=0,q[99]=1,ee[38]=0,de[38]=-1,pe[38]=1,Me[38]=1,_e[38]=0,Fe[38]=0,He[38]=0,Pe[38]=1,je[38]=1,Ue[38]=0,Ge[38]=1,$e[38]=0,X[38]=-1,ie[38]=0,q[38]=1,se[38]=-1,ne[38]=0,Ce[38]=0,ee[39]=0,de[39]=1,pe[39]=1,Me[39]=-1,_e[39]=0,Fe[39]=0,He[39]=0,Pe[39]=-1,je[39]=1,Ue[39]=0,Ge[39]=1,$e[39]=0,X[39]=-1,ie[39]=0,q[39]=1,se[39]=1,ne[39]=0,Ce[39]=0;var ht=function(at){return[[at.bottomleft,0],[0,0],[0,at.leftbottom]]},Re=function(at){return[[1,at.rightbottom],[1,0],[at.bottomright,0]]},tt=function(at){return[[at.topright,1],[1,1],[1,at.righttop]]},it=function(at){return[[0,at.lefttop],[0,1],[at.topleft,1]]},qe=function(at){return[[at.bottomright,0],[at.bottomleft,0],[0,at.leftbottom],[0,at.lefttop]]},Oe=function(at){return[[at.bottomright,0],[at.bottomleft,0],[1,at.righttop],[1,at.rightbottom]]},Te=function(at){return[[1,at.righttop],[1,at.rightbottom],[at.topleft,1],[at.topright,1]]},Ne=function(at){return[[0,at.leftbottom],[0,at.lefttop],[at.topleft,1],[at.topright,1]]},Yt=[],Bt=[],$t=[],vn=[],Cn=[],xn=[],jn=[],jt=[];vn[1]=Cn[1]=18,vn[169]=Cn[169]=18,$t[4]=Bt[4]=12,$t[166]=Bt[166]=12,Yt[16]=jt[16]=4,Yt[154]=jt[154]=4,xn[64]=jn[64]=22,xn[106]=jn[106]=22,$t[2]=xn[2]=17,vn[2]=Cn[2]=18,$t[168]=xn[168]=17,vn[168]=Cn[168]=18,Yt[8]=vn[8]=9,Bt[8]=$t[8]=12,Yt[162]=vn[162]=9,Bt[162]=$t[162]=12,Yt[32]=jt[32]=4,Bt[32]=jn[32]=1,Yt[138]=jt[138]=4,Bt[138]=jn[138]=1,Cn[128]=jt[128]=21,xn[128]=jn[128]=22,Cn[42]=jt[42]=21,xn[42]=jn[42]=22,Bt[5]=Cn[5]=14,Bt[165]=Cn[165]=14,$t[20]=jt[20]=6,$t[150]=jt[150]=6,Yt[80]=xn[80]=11,Yt[90]=xn[90]=11,vn[65]=jn[65]=3,vn[105]=jn[105]=3,Yt[160]=xn[160]=11,Bt[160]=Cn[160]=14,Yt[10]=xn[10]=11,Bt[10]=Cn[10]=14,$t[130]=jt[130]=6,vn[130]=jn[130]=3,$t[40]=jt[40]=6,vn[40]=jn[40]=3,Bt[101]=jn[101]=1,Bt[69]=jn[69]=1,Cn[149]=jt[149]=21,Cn[21]=jt[21]=21,$t[86]=xn[86]=17,$t[84]=xn[84]=17,Yt[89]=vn[89]=9,Yt[81]=vn[81]=9,Yt[96]=jn[96]=0,Bt[96]=xn[96]=15,Yt[74]=jn[74]=0,Bt[74]=xn[74]=15,Yt[24]=$t[24]=8,vn[24]=jt[24]=7,Yt[146]=$t[146]=8,vn[146]=jt[146]=7,Bt[6]=xn[6]=15,$t[6]=Cn[6]=16,Bt[164]=xn[164]=15,$t[164]=Cn[164]=16,vn[129]=jt[129]=7,Cn[129]=jn[129]=20,vn[41]=jt[41]=7,Cn[41]=jn[41]=20,$t[66]=jn[66]=2,vn[66]=xn[66]=19,$t[104]=jn[104]=2,vn[104]=xn[104]=19,Yt[144]=Cn[144]=10,xn[144]=jt[144]=23,Yt[26]=Cn[26]=10,xn[26]=jt[26]=23,Bt[36]=jt[36]=5,$t[36]=jn[36]=2,Bt[134]=jt[134]=5,$t[134]=jn[134]=2,Yt[9]=Cn[9]=10,Bt[9]=vn[9]=13,Yt[161]=Cn[161]=10,Bt[161]=vn[161]=13,Bt[37]=jt[37]=5,Cn[37]=jn[37]=20,Bt[133]=jt[133]=5,Cn[133]=jn[133]=20,$t[148]=Cn[148]=16,xn[148]=jt[148]=23,$t[22]=Cn[22]=16,xn[22]=jt[22]=23,Yt[82]=$t[82]=8,vn[82]=xn[82]=19,Yt[88]=$t[88]=8,vn[88]=xn[88]=19,Yt[73]=jn[73]=0,Bt[73]=vn[73]=13,Yt[97]=jn[97]=0,Bt[97]=vn[97]=13,Yt[145]=vn[145]=9,Cn[145]=jt[145]=21,Yt[25]=vn[25]=9,Cn[25]=jt[25]=21,Bt[70]=jn[70]=1,$t[70]=xn[70]=17,Bt[100]=jn[100]=1,$t[100]=xn[100]=17,Yt[34]=vn[34]=9,Bt[34]=$t[34]=12,Cn[34]=jt[34]=21,xn[34]=jn[34]=22,Yt[136]=jt[136]=4,Bt[136]=jn[136]=1,$t[136]=xn[136]=17,vn[136]=Cn[136]=18,Yt[35]=jt[35]=4,Bt[35]=$t[35]=12,vn[35]=Cn[35]=18,xn[35]=jn[35]=22,Yt[153]=jt[153]=4,vn[153]=Cn[153]=18,Bt[102]=$t[102]=12,xn[102]=jn[102]=22,Yt[155]=vn[155]=9,Cn[155]=jt[155]=23,Bt[103]=jn[103]=1,$t[103]=xn[103]=17,Yt[152]=jt[152]=4,$t[152]=xn[152]=17,vn[152]=Cn[152]=18,Yt[156]=$t[156]=8,vn[156]=Cn[156]=18,xn[156]=jt[156]=23,Yt[137]=jt[137]=4,Bt[137]=jn[137]=1,vn[137]=Cn[137]=18,Yt[139]=jt[139]=4,Bt[139]=vn[139]=13,Cn[139]=jn[139]=20,Yt[98]=vn[98]=9,Bt[98]=$t[98]=12,xn[98]=jn[98]=22,Yt[99]=jn[99]=0,Bt[99]=$t[99]=12,vn[99]=xn[99]=19,Bt[38]=$t[38]=12,Cn[38]=jt[38]=21,xn[38]=jn[38]=22,Bt[39]=jt[39]=5,$t[39]=Cn[39]=16,xn[39]=jn[39]=22;var Dn=[];function Ke(at,wt,On){return(at-wt)/(On-wt)}function si(at){return at.constructor.toString().indexOf("Array")>-1}function Li(at,wt,On,Nn,Rn,Yn){for(var Dt=at.cells[On][wt],Kn=Dt.cval_real,Ot=wt+Nn,ft=On+Rn,St=[],Kt=!1;!Kt;){if(typeof at.cells[ft]>"u"||typeof at.cells[ft][Ot]>"u")if(Kn=(Dt=at.cells[ft-=Rn][Ot-=Nn]).cval_real,-1===Rn)if(0===Yn)if(Kn&oe)St.push([Ot,ft]),Nn=-1,Rn=0,Yn=0;else{if(!(Kn&$)){St.push([Ot+Dt.bottomright,ft]),Nn=0,Rn=1,Yn=1,Kt=!0;break}St.push([Ot+1,ft]),Nn=1,Rn=0,Yn=0}else{if(!(Kn&oe)){if(Kn&$){St.push([Ot+Dt.bottomright,ft]),Nn=0,Rn=1,Yn=1,Kt=!0;break}St.push([Ot+Dt.bottomleft,ft]),Nn=0,Rn=1,Yn=0,Kt=!0;break}St.push([Ot,ft]),Nn=-1,Rn=0,Yn=0}else if(1===Rn)if(0===Yn){if(!(Kn&Q)){if(Kn&P){St.push([Ot+Dt.topleft,ft+1]),Nn=0,Rn=-1,Yn=0,Kt=!0;break}St.push([Ot+Dt.topright,ft+1]),Nn=0,Rn=-1,Yn=1,Kt=!0;break}St.push([Ot+1,ft+1]),Nn=1,Rn=0,Yn=1}else St.push([Ot+1,ft+1]),Nn=1,Rn=0,Yn=1;else if(-1===Nn)if(0===Yn){if(!(Kn&P)){if(Kn&oe){St.push([Ot,ft+Dt.leftbottom]),Nn=1,Rn=0,Yn=0,Kt=!0;break}St.push([Ot,ft+Dt.lefttop]),Nn=1,Rn=0,Yn=1,Kt=!0;break}St.push([Ot,ft+1]),Nn=0,Rn=1,Yn=0}else{if(!(Kn&P)){console.log("MarchingSquaresJS-isoBands: wtf");break}St.push([Ot,ft+1]),Nn=0,Rn=1,Yn=0}else{if(1!==Nn){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===Yn){if(!(Kn&$)){St.push([Ot+1,ft+Dt.rightbottom]),Nn=-1,Rn=0,Yn=0,Kt=!0;break}St.push([Ot+1,ft]),Nn=0,Rn=-1,Yn=1}else{if(!(Kn&$)){if(Kn&Q){St.push([Ot+1,ft+Dt.righttop]),Nn=-1,Rn=0,Yn=1;break}St.push([Ot+1,ft+Dt.rightbottom]),Nn=-1,Rn=0,Yn=0,Kt=!0;break}St.push([Ot+1,ft]),Nn=0,Rn=-1,Yn=1}}else if(Kn=(Dt=at.cells[ft][Ot]).cval_real,-1===Nn)if(0===Yn)if(typeof at.cells[ft-1]<"u"&&typeof at.cells[ft-1][Ot]<"u")Nn=0,Rn=-1,Yn=1;else{if(!(Kn&oe)){St.push([Ot+Dt.bottomright,ft]),Nn=0,Rn=1,Yn=1,Kt=!0;break}St.push([Ot,ft])}else{if(!(Kn&P)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+Ot+","+ft);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===Nn){if(0===Yn){console.log("MarchingSquaresJS-isoBands: wtf");break}if(typeof at.cells[ft+1]<"u"&&typeof at.cells[ft+1][Ot]<"u")Nn=0,Rn=1,Yn=0;else{if(!(Kn&Q)){St.push([Ot+Dt.topleft,ft+1]),Nn=0,Rn=-1,Yn=0,Kt=!0;break}St.push([Ot+1,ft+1]),Nn=1,Rn=0,Yn=1}}else if(-1===Rn){if(1!==Yn){console.log("MarchingSquaresJS-isoBands: wtf");break}if(typeof at.cells[ft][Ot+1]<"u")Nn=1,Rn=0,Yn=1;else{if(!(Kn&$)){St.push([Ot+1,ft+Dt.righttop]),Nn=-1,Rn=0,Yn=1,Kt=!0;break}St.push([Ot+1,ft]),Nn=0,Rn=-1,Yn=1}}else{if(1!==Rn){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==Yn){console.log("MarchingSquaresJS-isoBands: wtf");break}if(typeof at.cells[ft][Ot-1]<"u")Nn=-1,Rn=0,Yn=0;else{if(!(Kn&P)){St.push([Ot,ft+Dt.leftbottom]),Nn=1,Rn=0,Yn=0,Kt=!0;break}St.push([Ot,ft+1]),Nn=0,Rn=1,Yn=0}}if(ft+=Rn,(Ot+=Nn)===wt&&ft===On)break}return{path:St,i:Ot,j:ft,x:Nn,y:Rn,o:Yn}}function Ri(at){if(at.edges.length>0){var On=at.cval_real;switch(at.edges[at.edges.length-1]){case 0:return On&Q?{p:[1,at.righttop],x:-1,y:0,o:1}:{p:[at.topleft,1],x:0,y:-1,o:0};case 1:return On&$?{p:[at.topleft,1],x:0,y:-1,o:0}:{p:[1,at.rightbottom],x:-1,y:0,o:0};case 2:return On&$?{p:[at.bottomright,0],x:0,y:1,o:1}:{p:[at.topleft,1],x:0,y:-1,o:0};case 3:return On&oe?{p:[at.topleft,1],x:0,y:-1,o:0}:{p:[at.bottomleft,0],x:0,y:1,o:0};case 4:return On&Q?{p:[1,at.righttop],x:-1,y:0,o:1}:{p:[at.topright,1],x:0,y:-1,o:1};case 5:return On&$?{p:[at.topright,1],x:0,y:-1,o:1}:{p:[1,at.rightbottom],x:-1,y:0,o:0};case 6:return On&$?{p:[at.bottomright,0],x:0,y:1,o:1}:{p:[at.topright,1],x:0,y:-1,o:1};case 7:return On&oe?{p:[at.topright,1],x:0,y:-1,o:1}:{p:[at.bottomleft,0],x:0,y:1,o:0};case 8:return On&$?{p:[at.bottomright,0],x:0,y:1,o:1}:{p:[1,at.righttop],x:-1,y:0,o:1};case 9:return On&oe?{p:[1,at.righttop],x:-1,y:0,o:1}:{p:[at.bottomleft,0],x:0,y:1,o:0};case 10:return On&oe?{p:[0,at.leftbottom],x:1,y:0,o:0}:{p:[1,at.righttop],x:-1,y:0,o:1};case 11:return On&P?{p:[1,at.righttop],x:-1,y:0,o:1}:{p:[0,at.lefttop],x:1,y:0,o:1};case 12:return On&$?{p:[at.bottomright,0],x:0,y:1,o:1}:{p:[1,at.rightbottom],x:-1,y:0,o:0};case 13:return On&oe?{p:[1,at.rightbottom],x:-1,y:0,o:0}:{p:[at.bottomleft,0],x:0,y:1,o:0};case 14:return On&oe?{p:[0,at.leftbottom],x:1,y:0,o:0}:{p:[1,at.rightbottom],x:-1,y:0,o:0};case 15:return On&P?{p:[1,at.rightbottom],x:-1,y:0,o:0}:{p:[0,at.lefttop],x:1,y:0,o:1};case 16:return On&$?{p:[at.bottomright,0],x:0,y:1,o:1}:{p:[0,at.leftbottom],x:1,y:0,o:0};case 17:return On&P?{p:[at.bottomright,0],x:0,y:1,o:1}:{p:[0,at.lefttop],x:1,y:0,o:1};case 18:return On&oe?{p:[0,at.leftbottom],x:1,y:0,o:0}:{p:[at.bottomleft,0],x:0,y:1,o:0};case 19:return On&P?{p:[at.bottomleft,0],x:0,y:1,o:0}:{p:[0,at.lefttop],x:1,y:0,o:1};case 20:return On&P?{p:[at.topleft,1],x:0,y:-1,o:0}:{p:[0,at.leftbottom],x:1,y:0,o:0};case 21:return On&Q?{p:[0,at.leftbottom],x:1,y:0,o:0}:{p:[at.topright,1],x:0,y:-1,o:1};case 22:return On&P?{p:[at.topleft,1],x:0,y:-1,o:0}:{p:[0,at.lefttop],x:1,y:0,o:1};case 23:return On&Q?{p:[0,at.lefttop],x:1,y:0,o:1}:{p:[at.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(at)}}return null}function to(at,wt,On,Nn){var Rn,Yn,Dt,Kn,ft,Ot=at.cval;switch(wt){case-1:0===Nn?(Rn=Bt[Ot],Dt=ee[Ot],Kn=de[Ot],ft=pe[Ot]):(Rn=Yt[Ot],Dt=xe[Ot],Kn=ue[Ot],ft=fe[Ot]);break;case 1:0===Nn?(Rn=Cn[Ot],Dt=He[Ot],Kn=Pe[Ot],ft=je[Ot]):(Rn=xn[Ot],Dt=Ue[Ot],Kn=Ge[Ot],ft=$e[Ot]);break;default:switch(On){case-1:0===Nn?(Rn=jn[Ot],Dt=X[Ot],Kn=ie[Ot],ft=q[Ot]):(Rn=jt[Ot],Dt=se[Ot],Kn=ne[Ot],ft=Ce[Ot]);break;case 1:0===Nn?(Rn=vn[Ot],Dt=ce[Ot],Kn=ae[Ot],ft=ye[Ot]):(Rn=$t[Ot],Dt=Me[Ot],Kn=_e[Ot],ft=Fe[Ot])}}if(Yn=at.edges.indexOf(Rn),!(typeof at.edges[Yn]<"u"))return null;switch(function or(at,wt){delete at.edges[wt];for(var On=wt+1;On<at.edges.length;On++)at.edges[On-1]=at.edges[On];at.edges.pop()}(at,Yn),Ot=at.cval_real,Rn){case 0:Ot&Q?(wt=at.topleft,On=1):(wt=1,On=at.righttop);break;case 1:Ot&$?(wt=1,On=at.rightbottom):(wt=at.topleft,On=1);break;case 2:Ot&$?(wt=at.topleft,On=1):(wt=at.bottomright,On=0);break;case 3:Ot&oe?(wt=at.bottomleft,On=0):(wt=at.topleft,On=1);break;case 4:Ot&Q?(wt=at.topright,On=1):(wt=1,On=at.righttop);break;case 5:Ot&$?(wt=1,On=at.rightbottom):(wt=at.topright,On=1);break;case 6:Ot&$?(wt=at.topright,On=1):(wt=at.bottomright,On=0);break;case 7:Ot&oe?(wt=at.bottomleft,On=0):(wt=at.topright,On=1);break;case 8:Ot&$?(wt=1,On=at.righttop):(wt=at.bottomright,On=0);break;case 9:Ot&oe?(wt=at.bottomleft,On=0):(wt=1,On=at.righttop);break;case 10:Ot&oe?(wt=1,On=at.righttop):(wt=0,On=at.leftbottom);break;case 11:Ot&P?(wt=0,On=at.lefttop):(wt=1,On=at.righttop);break;case 12:Ot&$?(wt=1,On=at.rightbottom):(wt=at.bottomright,On=0);break;case 13:Ot&oe?(wt=at.bottomleft,On=0):(wt=1,On=at.rightbottom);break;case 14:Ot&oe?(wt=1,On=at.rightbottom):(wt=0,On=at.leftbottom);break;case 15:Ot&P?(wt=0,On=at.lefttop):(wt=1,On=at.rightbottom);break;case 16:Ot&$?(wt=0,On=at.leftbottom):(wt=at.bottomright,On=0);break;case 17:Ot&P?(wt=0,On=at.lefttop):(wt=at.bottomright,On=0);break;case 18:Ot&oe?(wt=at.bottomleft,On=0):(wt=0,On=at.leftbottom);break;case 19:Ot&P?(wt=0,On=at.lefttop):(wt=at.bottomleft,On=0);break;case 20:Ot&P?(wt=0,On=at.leftbottom):(wt=at.topleft,On=1);break;case 21:Ot&Q?(wt=at.topright,On=1):(wt=0,On=at.leftbottom);break;case 22:Ot&P?(wt=0,On=at.lefttop):(wt=at.topleft,On=1);break;case 23:Ot&Q?(wt=at.topright,On=1):(wt=0,On=at.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(at),null}return(typeof wt>"u"||typeof On>"u"||typeof Dt>"u"||typeof Kn>"u"||typeof ft>"u")&&(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(at),console.log(wt+" "+On+" "+Dt+" "+Kn+" "+ft)),{p:[wt,On],x:Dt,y:Kn,o:ft}}function Wn(at,wt,On){if(!g.isObject(On=On||{}))throw new Error("options is invalid");var Nn=On.zProperty||"elevation",Rn=On.commonProperties||{},Yn=On.breaksProperties||[];if(h.collectionOf(at,"Point","Input must contain Points"),!wt)throw new Error("breaks is required");if(!Array.isArray(wt))throw new Error("breaks is not an Array");if(!g.isObject(Rn))throw new Error("commonProperties is not an Object");if(!Array.isArray(Yn))throw new Error("breaksProperties is not an Array");var Dt=function V(at,wt){if(!g.isObject(wt=wt||{}))throw new Error("options is invalid");var On=wt.zProperty||"elevation",Nn=wt.flip,Rn=wt.flags;h.collectionOf(at,"Point","input must contain Points");for(var Yn=function B(at,wt){var On={};m.featureEach(at,function(Yn){var Dt=h.getCoords(Yn)[1];On[Dt]||(On[Dt]=[]),On[Dt].push(Yn)});var Nn=Object.keys(On).map(function(Yn){var Kn=On[Yn].sort(function(Ot,ft){return h.getCoords(Ot)[0]-h.getCoords(ft)[0]});return Kn}),Rn=Nn.sort(function(Yn,Dt){return wt?h.getCoords(Yn[0])[1]-h.getCoords(Dt[0])[1]:h.getCoords(Dt[0])[1]-h.getCoords(Yn[0])[1]});return Rn}(at,Nn),Dt=[],Kn=0;Kn<Yn.length;Kn++){for(var Ot=Yn[Kn],ft=[],St=0;St<Ot.length;St++){var Kt=Ot[St];ft.push(Kt.properties[On]?Kt.properties[On]:0),!0===Rn&&(Kt.properties.matrixPosition=[Kn,St])}Dt.push(ft)}return Dt}(at,{zProperty:Nn,flip:!0}),Kn=function Ii(at,wt,On){for(var Nn=[],Rn=1;Rn<wt.length;Rn++){var Yn=+wt[Rn-1],Dt=+wt[Rn],ft=Po(ro(j(at,Yn,Dt-Yn))),St={};St.groupedRings=ft,St[On]=Yn+"-"+Dt,Nn.push(St)}return Nn}(Dt,wt,Nn);Kn=function co(at,wt,On){var Nn=_.default(On),Dt=Nn[0],Kn=Nn[1],St=(Nn[2]-Nn[0])/(wt[0].length-1),Kt=(Nn[3]-Nn[1])/(wt.length-1),Ut=function(rn){rn[0]=rn[0]*St+Dt,rn[1]=rn[1]*Kt+Kn};return at.forEach(function(rn){rn.groupedRings.forEach(function(P1){P1.forEach(function(Gi){Gi.forEach(Ut)})})}),at}(Kn,Dt,at);var Ot=Kn.map(function(ft,St){if(Yn[St]&&!g.isObject(Yn[St]))throw new Error("Each mappedProperty is required to be an Object");var Kt=R.default({},Rn,Yn[St]);return Kt[Nn]=ft[Nn],g.multiPolygon(ft.groupedRings,Kt)});return g.featureCollection(Ot)}function ro(at){var wt=[],On=[];at.forEach(function(Rn){var Yn=S.default(g.polygon([Rn]));On.push(Yn),wt.push({ring:Rn,area:Yn})}),On.sort(function(Rn,Yn){return Yn-Rn});var Nn=[];return On.forEach(function(Rn){for(var Yn=0;Yn<wt.length;Yn++)if(wt[Yn].area===Rn){Nn.push(wt[Yn].ring),wt.splice(Yn,1);break}}),Nn}function Po(at){for(var wt=at.map(function(Ot){return{lrCoordinates:Ot,grouped:!1}}),On=[];!ba(wt);)for(var Nn=0;Nn<wt.length;Nn++)if(!wt[Nn].grouped){var Rn=[];Rn.push(wt[Nn].lrCoordinates),wt[Nn].grouped=!0;for(var Yn=g.polygon([wt[Nn].lrCoordinates]),Dt=Nn+1;Dt<wt.length;Dt++)wt[Dt].grouped||Mr(g.polygon([wt[Dt].lrCoordinates]),Yn)&&(Rn.push(wt[Dt].lrCoordinates),wt[Dt].grouped=!0);On.push(Rn)}return On}function Mr(at,wt){for(var On=D.default(at),Nn=0;Nn<On.features.length;Nn++)if(!M.default(On.features[Nn],wt))return!1;return!0}function ba(at){for(var wt=0;wt<at.length;wt++)if(!1===at[wt].grouped)return!1;return!0}Dn[1]=Dn[169]=ht,Dn[4]=Dn[166]=Re,Dn[16]=Dn[154]=tt,Dn[64]=Dn[106]=it,Dn[168]=Dn[2]=qe,Dn[162]=Dn[8]=Oe,Dn[138]=Dn[32]=Te,Dn[42]=Dn[128]=Ne,Dn[5]=Dn[165]=function(at){return[[0,0],[0,at.leftbottom],[1,at.rightbottom],[1,0]]},Dn[20]=Dn[150]=function(at){return[[1,0],[at.bottomright,0],[at.topright,1],[1,1]]},Dn[80]=Dn[90]=function(at){return[[1,1],[1,at.righttop],[0,at.lefttop],[0,1]]},Dn[65]=Dn[105]=function(at){return[[at.bottomleft,0],[0,0],[0,1],[at.topleft,1]]},Dn[160]=Dn[10]=function(at){return[[1,at.righttop],[1,at.rightbottom],[0,at.leftbottom],[0,at.lefttop]]},Dn[130]=Dn[40]=function(at){return[[at.topleft,1],[at.topright,1],[at.bottomright,0],[at.bottomleft,0]]},Dn[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Dn[101]=Dn[69]=function(at){return[[1,at.rightbottom],[1,0],[0,0],[0,1],[at.topleft,1]]},Dn[149]=Dn[21]=function(at){return[[at.topright,1],[1,1],[1,0],[0,0],[0,at.leftbottom]]},Dn[86]=Dn[84]=function(at){return[[1,0],[at.bottomright,0],[0,at.lefttop],[0,1],[1,1]]},Dn[89]=Dn[81]=function(at){return[[1,1],[1,at.righttop],[at.bottomleft,0],[0,0],[0,1]]},Dn[96]=Dn[74]=function(at){return[[1,at.righttop],[1,at.rightbottom],[0,at.lefttop],[0,1],[at.topleft,1]]},Dn[24]=Dn[146]=function(at){return[[1,1],[1,at.righttop],[at.bottomright,0],[at.bottomleft,0],[at.topright,1]]},Dn[6]=Dn[164]=function(at){return[[1,at.rightbottom],[1,0],[at.bottomright,0],[0,at.leftbottom],[0,at.lefttop]]},Dn[129]=Dn[41]=function(at){return[[at.topright,1],[at.bottomleft,0],[0,0],[0,at.leftbottom],[at.topleft,1]]},Dn[66]=Dn[104]=function(at){return[[at.bottomright,0],[at.bottomleft,0],[0,at.lefttop],[0,1],[at.topleft,1]]},Dn[144]=Dn[26]=function(at){return[[1,1],[1,at.righttop],[0,at.leftbottom],[0,at.lefttop],[at.topright,1]]},Dn[36]=Dn[134]=function(at){return[[1,at.rightbottom],[1,0],[at.bottomright,0],[at.topleft,1],[at.topright,1]]},Dn[9]=Dn[161]=function(at){return[[1,at.righttop],[1,at.rightbottom],[at.bottomleft,0],[0,0],[0,at.leftbottom]]},Dn[37]=Dn[133]=function(at){return[[1,at.rightbottom],[1,0],[0,0],[0,at.leftbottom],[at.topleft,1],[at.topright,1]]},Dn[148]=Dn[22]=function(at){return[[1,1],[1,0],[at.bottomright,0],[0,at.leftbottom],[0,at.lefttop],[at.topright,1]]},Dn[82]=Dn[88]=function(at){return[[1,1],[1,at.righttop],[at.bottomright,0],[at.bottomleft,0],[0,at.lefttop],[0,1]]},Dn[73]=Dn[97]=function(at){return[[1,at.righttop],[1,at.rightbottom],[at.bottomleft,0],[0,0],[0,1],[at.topleft,1]]},Dn[145]=Dn[25]=function(at){return[[1,1],[1,at.righttop],[at.bottomleft,0],[0,0],[0,at.leftbottom],[at.topright,1]]},Dn[70]=Dn[100]=function(at){return[[1,at.rightbottom],[1,0],[at.bottomright,0],[0,at.lefttop],[0,1],[at.topleft,1]]},Dn[34]=function(at){return[Ne(at),Oe(at)]},Dn[35]=function(at){return[[1,at.righttop],[1,at.rightbottom],[at.bottomright,0],[at.bottomleft,0],[0,at.leftbottom],[0,at.lefttop],[at.topleft,1],[at.topright,1]]},Dn[136]=function(at){return[Te(at),qe(at)]},Dn[153]=function(at){return[tt(at),ht(at)]},Dn[102]=function(at){return[Re(at),it(at)]},Dn[155]=function(at){return[[1,1],[1,at.righttop],[at.bottomleft,0],[0,0],[0,at.leftbottom],[at.topright,1]]},Dn[103]=function(at){return[[1,at.rightbottom],[1,0],[at.bottomright,0],[0,at.lefttop],[0,1],[at.topleft,1]]},Dn[152]=function(at){return[tt(at),qe(at)]},Dn[156]=function(at){return[[1,1],[1,at.righttop],[at.bottomright,0],[at.bottomleft,0],[0,at.leftbottom],[0,at.lefttop],[at.topright,1]]},Dn[137]=function(at){return[Te(at),ht(at)]},Dn[139]=function(at){return[[1,at.righttop],[1,at.rightbottom],[at.bottomleft,0],[0,0],[0,at.leftbottom],[at.topleft,1],[at.topright,1]]},Dn[98]=function(at){return[Oe(at),it(at)]},Dn[99]=function(at){return[[1,at.righttop],[1,at.rightbottom],[at.bottomright,0],[at.bottomleft,0],[0,at.lefttop],[0,1],[at.topleft,1]]},Dn[38]=function(at){return[Re(at),Ne(at)]},Dn[39]=function(at){return[[1,at.rightbottom],[1,0],[at.bottomright,0],[0,at.leftbottom],[0,at.lefttop],[at.topleft,1],[at.topright,1]]},Ae.exports=Wn,Ae.exports.default=Wn},8875:(Ae,y,w)=>{"use strict";var k=w(11568),G=w(58570),I=w(45943),u=w(90621),h=w(64772);function g(ie){return ie&&"object"==typeof ie&&"default"in ie?ie:{default:ie}}var v=g(k),m=g(h),f={successCallback:null,verbose:!1},_={};function S(ie,q,se){se=se||{};for(var ne=Object.keys(f),Ce=0;Ce<ne.length;Ce++){var xe=ne[Ce],ue=se[xe];_[xe]=ue=typeof ue<"u"&&null!==ue?ue:f[xe]}_.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+q);var fe=function F(ie){var q=[],se=0;return ie.cells.forEach(function(Ce,xe){Ce.forEach(function(ue,fe){if(typeof ue<"u"&&!function R(ie){return 5===ie.cval||10===ie.cval}(ue)&&!V(ue)){var ee=function j(ie,q,se){var fe,ee,ne=ie.length,Ce=[],xe=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],ue=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],pe=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],ce=ie[q][se],ae=ce.cval,ye=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][ae],Me=U(ce,ye);Ce.push([se+Me[0],q+Me[1]]),Me=U(ce,ye=pe[ae]),Ce.push([se+Me[0],q+Me[1]]),B(ce);for(var _e=se+xe[ae],Fe=q+ue[ae],Ue=ae;_e>=0&&Fe>=0&&Fe<ne&&(_e!=se||Fe!=q)&&!(typeof(ce=ie[Fe][_e])>"u");){if(0===(ae=ce.cval)||15===ae)return{path:Ce,info:"mergeable"};ye=pe[ae],fe=xe[ae],ee=ue[ae],(5===ae||10===ae)&&(5===ae?ce.flipped?-1===ue[Ue]?(ye="left",fe=-1,ee=0):(ye="right",fe=1,ee=0):-1===xe[Ue]&&(ye="bottom",fe=0,ee=-1):10===ae&&(ce.flipped?-1===xe[Ue]?(ye="top",fe=0,ee=1):(ye="bottom",fe=0,ee=-1):1===ue[Ue]&&(ye="left",fe=-1,ee=0))),Me=U(ce,ye),Ce.push([_e+Me[0],Fe+Me[1]]),B(ce),_e+=fe,Fe+=ee,Ue=ae}return{path:Ce,info:"closed"}}(ie.cells,xe,fe),de=!1;if("mergeable"===ee.info)for(var pe=ee.path[ee.path.length-1][0],ce=ee.path[ee.path.length-1][1],ae=se-1;ae>=0;ae--)if(Math.abs(q[ae][0][0]-pe)<=1e-7&&Math.abs(q[ae][0][1]-ce)<=1e-7){for(var ye=ee.path.length-2;ye>=0;--ye)q[ae].unshift(ee.path[ye]);de=!0;break}de||(q[se++]=ee.path)}})}),q}(function D(ie,q){for(var se=ie.length-1,ne=ie[0].length-1,Ce={rows:se,cols:ne,cells:[]},xe=0;xe<se;++xe){Ce.cells[xe]=[];for(var ue=0;ue<ne;++ue){var fe=0,ee=ie[xe+1][ue],de=ie[xe+1][ue+1],pe=ie[xe][ue+1],ce=ie[xe][ue];if(!(isNaN(ee)||isNaN(de)||isNaN(pe)||isNaN(ce))){fe|=ee>=q?8:0,fe|=de>=q?4:0,fe|=pe>=q?2:0;var Me,_e,Fe,Ue,ae=!1;if(5==(fe|=ce>=q?1:0)||10===fe){var ye=(ee+de+pe+ce)/4;5===fe&&ye<q?(fe=10,ae=!0):10===fe&&ye<q&&(fe=5,ae=!0)}0!==fe&&15!==fe&&(Me=_e=Fe=Ue=.5,1===fe?(Fe=1-M(q,ee,ce),_e=1-M(q,pe,ce)):2===fe?(_e=M(q,ce,pe),Ue=1-M(q,de,pe)):3===fe?(Fe=1-M(q,ee,ce),Ue=1-M(q,de,pe)):4===fe?(Me=M(q,ee,de),Ue=M(q,pe,de)):5===fe?(Me=M(q,ee,de),Ue=M(q,pe,de),_e=1-M(q,pe,ce),Fe=1-M(q,ee,ce)):6===fe?(_e=M(q,ce,pe),Me=M(q,ee,de)):7===fe?(Fe=1-M(q,ee,ce),Me=M(q,ee,de)):8===fe?(Fe=M(q,ce,ee),Me=1-M(q,de,ee)):9===fe?(_e=1-M(q,pe,ce),Me=1-M(q,de,ee)):10===fe?(Me=1-M(q,de,ee),Ue=1-M(q,de,pe),_e=M(q,ce,pe),Fe=M(q,ce,ee)):11===fe?(Me=1-M(q,de,ee),Ue=1-M(q,de,pe)):12===fe?(Fe=M(q,ce,ee),Ue=M(q,pe,de)):13===fe?(_e=1-M(q,pe,ce),Ue=M(q,pe,de)):14===fe?(Fe=M(q,ce,ee),_e=M(q,ce,pe)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+fe),Ce.cells[xe][ue]={cval:fe,flipped:ae,top:Me,right:Ue,bottom:_e,left:Fe})}}}return Ce}(ie,q));return"function"==typeof _.successCallback&&_.successCallback(fe),fe}function M(ie,q,se){return(ie-q)/(se-q)}function V(ie){return 0===ie.cval||15===ie.cval}function B(ie){!V(ie)&&5!==ie.cval&&10!==ie.cval&&(ie.cval=15)}function U(ie,q){return"top"===q?[ie.top,1]:"bottom"===q?[ie.bottom,0]:"right"===q?[1,ie.right]:"left"===q?[0,ie.left]:void 0}function $(ie,q,se){if(!u.isObject(se=se||{}))throw new Error("options is invalid");var ne=se.zProperty||"elevation",Ce=se.commonProperties||{},xe=se.breaksProperties||[];if(I.collectionOf(ie,"Point","Input must contain Points"),!q)throw new Error("breaks is required");if(!Array.isArray(q))throw new Error("breaks must be an Array");if(!u.isObject(Ce))throw new Error("commonProperties must be an Object");if(!Array.isArray(xe))throw new Error("breaksProperties must be an Array");var ue=function P(ie,q){if(!u.isObject(q=q||{}))throw new Error("options is invalid");var se=q.zProperty||"elevation",ne=q.flip,Ce=q.flags;I.collectionOf(ie,"Point","input must contain Points");for(var xe=function Q(ie,q){var se={};G.featureEach(ie,function(xe){var ue=I.getCoords(xe)[1];se[ue]||(se[ue]=[]),se[ue].push(xe)});var ne=Object.keys(se).map(function(xe){var fe=se[xe].sort(function(ee,de){return I.getCoords(ee)[0]-I.getCoords(de)[0]});return fe}),Ce=ne.sort(function(xe,ue){return q?I.getCoords(xe[0])[1]-I.getCoords(ue[0])[1]:I.getCoords(ue[0])[1]-I.getCoords(xe[0])[1]});return Ce}(ie,ne),ue=[],fe=0;fe<xe.length;fe++){for(var ee=xe[fe],de=[],pe=0;pe<ee.length;pe++){var ce=ee[pe];de.push(ce.properties[se]?ce.properties[se]:0),!0===Ce&&(ce.properties.matrixPosition=[fe,pe])}ue.push(de)}return ue}(ie,{zProperty:ne,flip:!0}),fe=function oe(ie,q,se,ne,Ce){for(var xe=[],ue=1;ue<q.length;ue++){var fe=+q[ue],ee=m.default({},ne,Ce[ue]);ee[se]=fe;var de=u.multiLineString(S(ie,fe),ee);xe.push(de)}return xe}(ue,q,ne,Ce,xe),ee=function X(ie,q,se){var ne=v.default(se),ue=ne[0],fe=ne[1],pe=(ne[2]-ne[0])/(q[0].length-1),ce=(ne[3]-ne[1])/(q.length-1),ae=function(ye){ye[0]=ye[0]*pe+ue,ye[1]=ye[1]*ce+fe};return ie.forEach(function(ye){G.coordEach(ye,ae)}),ie}(fe,ue,ie);return u.featureCollection(ee)}Ae.exports=$,Ae.exports.default=$},13127:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621);function I(u,h,g,v,m,f,_,S){var M,D,R,V,U={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(M=(S-f)*(g-u)-(_-m)*(v-h))?null!==U.x&&null!==U.y&&U:(V=(_-m)*(D=h-f)-(S-f)*(R=u-m),R=((g-u)*D-(v-h)*R)/M,U.x=u+(D=V/M)*(g-u),U.y=h+D*(v-h),D>=0&&D<=1&&(U.onLine1=!0),R>=0&&R<=1&&(U.onLine2=!0),!(!U.onLine1||!U.onLine2)&&[U.x,U.y])}y.default=function G(u){var h,g,v={type:"FeatureCollection",features:[]};if("LineString"===(g="Feature"===u.type?u.geometry:u).type)h=[g.coordinates];else if("MultiLineString"===g.type)h=g.coordinates;else if("MultiPolygon"===g.type)h=[].concat.apply([],g.coordinates);else{if("Polygon"!==g.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");h=g.coordinates}return h.forEach(function(m){h.forEach(function(f){for(var _=0;_<m.length-1;_++)for(var S=_;S<f.length-1;S++)if(m!==f||1!==Math.abs(_-S)&&(0!==_||S!==m.length-2||m[_][0]!==m[m.length-1][0]||m[_][1]!==m[m.length-1][1])){var M=I(m[_][0],m[_][1],m[_+1][0],m[_+1][1],f[S][0],f[S][1],f[S+1][0],f[S+1][1]);M&&v.features.push(k.point([M[0],M[1]]))}})}),v}},35677:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(36512)),I=w(58570);y.default=function u(h,g){return void 0===g&&(g={}),I.segmentReduce(h,function(v,m){var f=m.geometry.coordinates;return v+G.default(f[0],f[1],g)},0)}},17525:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(92631)),I=k(w(73026)),u=w(90621);function g(v){var m=v%360;return m<0&&(m+=360),m}y.default=function h(v,m,f,_,S){void 0===S&&(S={});var M=S.steps||64,D=g(f),R=g(_),V=Array.isArray(v)||"Feature"!==v.type?{}:v.properties;if(D===R)return u.lineString(G.default(v,m,S).geometry.coordinates[0],V);for(var B=D,U=D<R?R:R+360,F=B,j=[],P=0;F<U;)j.push(I.default(v,m,F,S).geometry.coordinates),F=B+360*++P/M;return F>U&&j.push(I.default(v,m,U,S).geometry.coordinates),u.lineString(j,V)}},44536:(Ae,y,w)=>{"use strict";var k=w(35677),G=w(77612),I=w(58570),u=w(90621);function h(_){return _&&"object"==typeof _&&"default"in _?_:{default:_}}var g=h(k),v=h(G);function m(_,S,M){if(!u.isObject(M=M||{}))throw new Error("options is invalid");var D=M.units,R=M.reverse;if(!_)throw new Error("geojson is required");if(S<=0)throw new Error("segmentLength must be greater than 0");var V=[];return I.flattenEach(_,function(B){R&&(B.geometry.coordinates=B.geometry.coordinates.reverse()),function f(_,S,M,D){var R=g.default(_,{units:M});if(R<=S)return D(_);var V=R/S;Number.isInteger(V)||(V=Math.floor(V)+1);for(var B=0;B<V;B++)D(v.default(_,S*B,S*(B+1),{units:M}),B)}(B,S,D,function(U){V.push(U)})}),u.featureCollection(V)}Ae.exports=m,Ae.exports.default=m},51730:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(90621),I=w(45943),u=k(w(91306)),h=w(58570),g=k(w(55665));function m(f,_){var S=I.getCoords(f),M=I.getCoords(_);if(2!==S.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==M.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var D=S[0][0],R=S[0][1],V=S[1][0],B=S[1][1],U=M[0][0],F=M[0][1],j=M[1][0],P=M[1][1],Q=(P-F)*(V-D)-(j-U)*(B-R);if(0===Q)return null;var X=((j-U)*(R-F)-(P-F)*(D-U))/Q,ie=((V-D)*(R-F)-(B-R)*(D-U))/Q;return X>=0&&X<=1&&ie>=0&&ie<=1?G.point([D+X*(V-D),R+X*(B-R)]):null}y.default=function v(f,_){var S={},M=[];if("LineString"===f.type&&(f=G.feature(f)),"LineString"===_.type&&(_=G.feature(_)),"Feature"===f.type&&"Feature"===_.type&&null!==f.geometry&&null!==_.geometry&&"LineString"===f.geometry.type&&"LineString"===_.geometry.type&&2===f.geometry.coordinates.length&&2===_.geometry.coordinates.length){var D=m(f,_);return D&&M.push(D),G.featureCollection(M)}var R=g.default();return R.load(u.default(_)),h.featureEach(u.default(f),function(V){h.featureEach(R.search(V),function(B){var U=m(V,B);if(U){var F=I.getCoords(U).join(",");S[F]||(S[F]=!0,M.push(U))}})}),G.featureCollection(M)}},9088:(Ae,y,w)=>{"use strict";var k=w(58570),G=w(45943),I=w(90621);function u(V){var B=V[0],U=V[1];return[U[0]-B[0],U[1]-B[1]]}function h(V,B){return V[0]*B[1]-B[0]*V[1]}function M(V,B,U){if(!I.isObject(U=U||{}))throw new Error("options is invalid");var F=U.units;if(!V)throw new Error("geojson is required");if(null==B||isNaN(B))throw new Error("distance is required");var j=G.getType(V),P=V.properties;switch(j){case"LineString":return D(V,B,F);case"MultiLineString":var Q=[];return k.flattenEach(V,function($){Q.push(D($,B,F).geometry.coordinates)}),I.multiLineString(Q,P);default:throw new Error("geometry "+j+" is not supported")}}function D(V,B,U){var F=[],j=I.lengthToDegrees(B,U),P=G.getCoords(V),Q=[];return P.forEach(function($,oe){if(oe!==P.length-1){var X=function R(V,B,U){var F=Math.sqrt((V[0]-B[0])*(V[0]-B[0])+(V[1]-B[1])*(V[1]-B[1]));return[[V[0]+U*(B[1]-V[1])/F,V[1]+U*(V[0]-B[0])/F],[B[0]+U*(B[1]-V[1])/F,B[1]+U*(V[0]-B[0])/F]]}($,P[oe+1],j);if(F.push(X),oe>0){var ie=F[oe-1],q=function S(V,B){return!function _(V,B){return 0===h(u(V),u(B))}(V,B)&&function f(V,B){var U=V[0],F=u(V),j=B[0],P=u(B),Q=h(F,P),$=function v(V,B){return[V[0]-B[0],V[1]-B[1]]}(j,U),ie=function g(V,B){return[V[0]+B[0],V[1]+B[1]]}(U,function m(V,B){return[V*B[0],V*B[1]]}(h($,P)/Q,F));return ie}(V,B)}(X,ie);!1!==q&&(ie[1]=q,X[0]=q),Q.push(ie[0]),oe===P.length-2&&(Q.push(X[0]),Q.push(X[1]))}2===P.length&&(Q.push(X[0]),Q.push(X[1]))}}),I.lineString(Q,V.properties)}Ae.exports=M,Ae.exports.default=M},71512:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(55665)),I=k(w(91306)),u=k(w(8217)),h=k(w(63106)),g=w(45943),v=w(58570),m=w(90621),f=k(w(83970));function S(M,D){var R=g.getCoords(D),V=g.getCoords(M),B=V[0],U=V[V.length-1],F=M.geometry.coordinates;return f.default(R[0],B)?F.unshift(R[1]):f.default(R[0],U)?F.push(R[1]):f.default(R[1],B)?F.unshift(R[0]):f.default(R[1],U)&&F.push(R[0]),M}y.default=function _(M,D,R){if(void 0===R&&(R={}),!m.isObject(R=R||{}))throw new Error("options is invalid");var j,V=R.tolerance||0,B=[],U=G.default(),F=I.default(M);return U.load(F),v.segmentEach(D,function(P){var Q=!1;P&&(v.featureEach(U.search(P),function($){if(!1===Q){var oe=g.getCoords(P).sort(),X=g.getCoords($).sort();f.default(oe,X)||(0===V?h.default(oe[0],$)&&h.default(oe[1],$):u.default($,oe[0]).properties.dist<=V&&u.default($,oe[1]).properties.dist<=V)?(Q=!0,j=j?S(j,P):P):(0===V?h.default(X[0],P)&&h.default(X[1],P):u.default(P,X[0]).properties.dist<=V&&u.default(P,X[1]).properties.dist<=V)&&(j=j?S(j,$):$)}}),!1===Q&&j&&(B.push(j),j=void 0))}),j&&B.push(j),m.featureCollection(B)}},91306:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943),I=w(58570);y.default=function u(m){if(!m)throw new Error("geojson is required");var f=[];return I.flattenEach(m,function(_){!function h(m,f){var _=[],S=m.geometry;if(null!==S){switch(S.type){case"Polygon":_=G.getCoords(S);break;case"LineString":_=[G.getCoords(S)]}_.forEach(function(M){var D=function g(m,f){var _=[];return m.reduce(function(S,M){var D=k.lineString([S,M],f);return D.bbox=function v(m,f){var _=m[0],S=m[1],M=f[0],D=f[1];return[_<M?_:M,S<D?S:D,_>M?_:M,S>D?S:D]}(S,M),_.push(D),M}),_}(M,m.properties);D.forEach(function(R){R.id=f.length,f.push(R)})})}}(_,f)}),k.featureCollection(f)}},77612:(Ae,y,w)=>{"use strict";var k=w(2952),G=w(36512),I=w(73026),u=w(90621);function h(_){return _&&"object"==typeof _&&"default"in _?_:{default:_}}var g=h(k),v=h(G),m=h(I);function f(_,S,M,D){if(!u.isObject(D=D||{}))throw new Error("options is invalid");var R,V=[];if("Feature"===_.type)R=_.geometry.coordinates;else{if("LineString"!==_.type)throw new Error("input must be a LineString Feature or Geometry");R=_.coordinates}for(var F,j,P,B=R.length,U=0,Q=0;Q<R.length&&!(S>=U&&Q===R.length-1);Q++){if(U>S&&0===V.length){if(!(F=S-U))return V.push(R[Q]),u.lineString(V);j=g.default(R[Q],R[Q-1])-180,P=m.default(R[Q],F,j,D),V.push(P.geometry.coordinates)}if(U>=M)return(F=M-U)?(j=g.default(R[Q],R[Q-1])-180,P=m.default(R[Q],F,j,D),V.push(P.geometry.coordinates),u.lineString(V)):(V.push(R[Q]),u.lineString(V));if(U>=S&&V.push(R[Q]),Q===R.length-1)return u.lineString(V);U+=v.default(R[Q],R[Q+1],D)}if(U<S&&R.length===B)throw new Error("Start position is beyond line");var $=R[R.length-1];return u.lineString([$,$])}Ae.exports=f,Ae.exports.default=f},96589:(Ae,y,w)=>{"use strict";var k=w(45943),G=w(90621);function u(v){return v&&"object"==typeof v&&"default"in v?v:{default:v}}var h=u(w(8217));function g(v,m,f){var _=k.getCoords(f);if("LineString"!==k.getType(f))throw new Error("line must be a LineString");for(var D,S=h.default(f,v),M=h.default(f,m),R=[(D=S.properties.index<=M.properties.index?[S,M]:[M,S])[0].geometry.coordinates],V=D[0].properties.index+1;V<D[1].properties.index+1;V++)R.push(_[V]);return R.push(D[1].geometry.coordinates),G.lineString(R,f.properties)}Ae.exports=g,Ae.exports.default=g},96582:(Ae,y,w)=>{"use strict";var k=w(55665),G=w(77655),I=w(11568),u=w(74070),h=w(91306),g=w(51730),v=w(8217),m=w(45943),f=w(58570),_=w(90621);function S(X){return X&&"object"==typeof X&&"default"in X?X:{default:X}}var M=S(k),D=S(G),R=S(I),V=S(u),B=S(h),U=S(g),F=S(v);function j(X,ie){if(!X)throw new Error("line is required");if(!ie)throw new Error("splitter is required");var q=m.getType(X),se=m.getType(ie);if("LineString"!==q)throw new Error("line must be LineString");if("FeatureCollection"===se)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===se)throw new Error("splitter cannot be a GeometryCollection");var ne=V.default(ie,{precision:7});switch(se){case"Point":return Q(X,ne);case"MultiPoint":return P(X,ne);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return P(X,U.default(X,ne))}}function P(X,ie){var q=[],se=M.default();return f.flattenEach(ie,function(ne){if(q.forEach(function(ue,fe){ue.id=fe}),q.length){var Ce=se.search(ne);if(Ce.features.length){var xe=$(ne,Ce);q=q.filter(function(ue){return ue.id!==xe.id}),se.remove(xe),f.featureEach(Q(xe,ne),function(ue){q.push(ue),se.insert(ue)})}}else(q=Q(X,ne).features).forEach(function(ue){ue.bbox||(ue.bbox=D.default(R.default(ue)))}),se.load(_.featureCollection(q))}),_.featureCollection(q)}function Q(X,ie){var q=[],se=m.getCoords(X)[0],ne=m.getCoords(X)[X.geometry.coordinates.length-1];if(oe(se,m.getCoord(ie))||oe(ne,m.getCoord(ie)))return _.featureCollection([X]);var Ce=M.default(),xe=B.default(X);Ce.load(xe);var ue=Ce.search(ie);if(!ue.features.length)return _.featureCollection([X]);var fe=$(ie,ue),de=f.featureReduce(xe,function(pe,ce,ae){var ye=m.getCoords(ce)[1],Me=m.getCoord(ie);return ae===fe.id?(pe.push(Me),q.push(_.lineString(pe)),oe(Me,ye)?[Me]:[Me,ye]):(pe.push(ye),pe)},[se]);return de.length>1&&q.push(_.lineString(de)),_.featureCollection(q)}function $(X,ie){if(!ie.features.length)throw new Error("lines must contain features");if(1===ie.features.length)return ie.features[0];var q,se=1/0;return f.featureEach(ie,function(ne){var xe=F.default(ne,X).properties.dist;xe<se&&(q=ne,se=xe)}),q}function oe(X,ie){return X[0]===ie[0]&&X[1]===ie[1]}Ae.exports=j,Ae.exports.default=j},32237:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(11568)),I=w(45943),u=w(90621),h=k(w(97408));function v(_,S,M,D){S=S||("Feature"===_.type?_.properties:{});var R=I.getGeom(_),V=R.coordinates,B=R.type;if(!V.length)throw new Error("line must contain coordinates");switch(B){case"LineString":return M&&(V=m(V)),u.polygon([V],S);case"MultiLineString":var U=[],F=0;return V.forEach(function(j){if(M&&(j=m(j)),D){var P=function f(_){var M=_[1],R=_[3];return Math.abs(_[0]-_[2])*Math.abs(M-R)}(G.default(u.lineString(j)));P>F?(U.unshift(j),F=P):U.push(j)}else U.push(j)}),u.polygon(U,S);default:throw new Error("geometry type "+B+" is not supported")}}function m(_){var S=_[0],R=_[_.length-1];return(S[0]!==R[0]||S[1]!==R[1])&&_.push(S),_}y.default=function g(_,S){void 0===S&&(S={});var M,D,R,V=S.properties,B=null===(M=S.autoComplete)||void 0===M||M,U=null===(D=S.orderCoords)||void 0===D||D;if("FeatureCollection"===(null!==(R=S.mutate)&&void 0!==R&&R||(_=h.default(_)),_.type)){var j=[];return _.features.forEach(function(P){j.push(I.getCoords(v(P,{},B,U)))}),u.multiPolygon(j,V)}return v(_,V,B,U)}},75498:(Ae,y,w)=>{"use strict";var k=w(90621);function I(f){return f&&"object"==typeof f&&"default"in f?f:{default:f}}var u=I(w(98464));function h(f,_){var S=function m(f){return k.polygon(f&&f.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(_),M=null;return M="FeatureCollection"===f.type?function g(f){var _=2===f.features.length?u.default.union(f.features[0].geometry.coordinates,f.features[1].geometry.coordinates):u.default.union.apply(u.default,f.features.map(function(S){return S.geometry.coordinates}));return v(_)}(f):v(u.default.union(f.geometry.coordinates)),M.geometry.coordinates.forEach(function(D){S.geometry.coordinates.push(D[0])}),S}function v(f){return k.multiPolygon(f)}Ae.exports=h,Ae.exports.default=h},58570:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621);function G(j,P,Q){if(null!==j)for(var $,oe,X,ie,q,se,ne,ue,Ce=0,xe=0,fe=j.type,ee="FeatureCollection"===fe,de="Feature"===fe,pe=ee?j.features.length:1,ce=0;ce<pe;ce++){q=(ue=!!(ne=ee?j.features[ce].geometry:de?j.geometry:j)&&"GeometryCollection"===ne.type)?ne.geometries.length:1;for(var ae=0;ae<q;ae++){var ye=0,Me=0;if(null!==(ie=ue?ne.geometries[ae]:ne)){se=ie.coordinates;var _e=ie.type;switch(Ce=!Q||"Polygon"!==_e&&"MultiPolygon"!==_e?0:1,_e){case null:break;case"Point":if(!1===P(se,xe,ce,ye,Me))return!1;xe++,ye++;break;case"LineString":case"MultiPoint":for($=0;$<se.length;$++){if(!1===P(se[$],xe,ce,ye,Me))return!1;xe++,"MultiPoint"===_e&&ye++}"LineString"===_e&&ye++;break;case"Polygon":case"MultiLineString":for($=0;$<se.length;$++){for(oe=0;oe<se[$].length-Ce;oe++){if(!1===P(se[$][oe],xe,ce,ye,Me))return!1;xe++}"MultiLineString"===_e&&ye++,"Polygon"===_e&&Me++}"Polygon"===_e&&ye++;break;case"MultiPolygon":for($=0;$<se.length;$++){for(Me=0,oe=0;oe<se[$].length;oe++){for(X=0;X<se[$][oe].length-Ce;X++){if(!1===P(se[$][oe][X],xe,ce,ye,Me))return!1;xe++}Me++}ye++}break;case"GeometryCollection":for($=0;$<ie.geometries.length;$++)if(!1===G(ie.geometries[$],P,Q))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(j,P){var Q;switch(j.type){case"FeatureCollection":for(Q=0;Q<j.features.length&&!1!==P(j.features[Q].properties,Q);Q++);break;case"Feature":P(j.properties,0)}}function g(j,P){if("Feature"===j.type)P(j,0);else if("FeatureCollection"===j.type)for(var Q=0;Q<j.features.length&&!1!==P(j.features[Q],Q);Q++);}function f(j,P){var Q,$,oe,X,ie,q,se,ne,Ce,xe,ue=0,fe="FeatureCollection"===j.type,ee="Feature"===j.type,de=fe?j.features.length:1;for(Q=0;Q<de;Q++){for(ne=fe?j.features[Q].properties:ee?j.properties:{},Ce=fe?j.features[Q].bbox:ee?j.bbox:void 0,xe=fe?j.features[Q].id:ee?j.id:void 0,ie=(se=!!(q=fe?j.features[Q].geometry:ee?j.geometry:j)&&"GeometryCollection"===q.type)?q.geometries.length:1,oe=0;oe<ie;oe++)if(null!==(X=se?q.geometries[oe]:q))switch(X.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===P(X,ue,ne,Ce,xe))return!1;break;case"GeometryCollection":for($=0;$<X.geometries.length;$++)if(!1===P(X.geometries[$],ue,ne,Ce,xe))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===P(null,ue,ne,Ce,xe))return!1;ue++}}function S(j,P){f(j,function(Q,$,oe,X,ie){var se,q=null===Q?null:Q.type;switch(q){case null:case"Point":case"LineString":case"Polygon":return!1!==P(k.feature(Q,oe,{bbox:X,id:ie}),$,0)&&void 0}switch(q){case"MultiPoint":se="Point";break;case"MultiLineString":se="LineString";break;case"MultiPolygon":se="Polygon"}for(var ne=0;ne<Q.coordinates.length;ne++)if(!1===P(k.feature({type:se,coordinates:Q.coordinates[ne]},oe),$,ne))return!1})}function D(j,P){S(j,function(Q,$,oe){var X=0;if(Q.geometry){var ie=Q.geometry.type;if("Point"!==ie&&"MultiPoint"!==ie){var q,se=0,ne=0,Ce=0;if(!1===G(Q,function(xe,ue,fe,ee,de){if(void 0===q||$>se||ee>ne||de>Ce)return q=xe,se=$,ne=ee,Ce=de,void(X=0);var pe=k.lineString([q,xe],Q.properties);if(!1===P(pe,$,oe,de,X))return!1;X++,q=xe}))return!1}}})}function V(j,P){if(!j)throw new Error("geojson is required");S(j,function(Q,$,oe){if(null!==Q.geometry){var ie=Q.geometry.coordinates;switch(Q.geometry.type){case"LineString":if(!1===P(Q,$,oe,0,0))return!1;break;case"Polygon":for(var q=0;q<ie.length;q++)if(!1===P(k.lineString(ie[q],Q.properties),$,oe,q))return!1}}})}y.coordAll=function m(j){var P=[];return G(j,function(Q){P.push(Q)}),P},y.coordEach=G,y.coordReduce=function I(j,P,Q,$){var oe=Q;return G(j,function(X,ie,q,se,ne){oe=0===ie&&void 0===Q?X:P(oe,X,ie,q,se,ne)},$),oe},y.featureEach=g,y.featureReduce=function v(j,P,Q){var $=Q;return g(j,function(oe,X){$=0===X&&void 0===Q?oe:P($,oe,X)}),$},y.findPoint=function F(j,P){if(!k.isObject(P=P||{}))throw new Error("options is invalid");var q,Q=P.featureIndex||0,$=P.multiFeatureIndex||0,oe=P.geometryIndex||0,X=P.coordIndex||0,ie=P.properties;switch(j.type){case"FeatureCollection":Q<0&&(Q=j.features.length+Q),ie=ie||j.features[Q].properties,q=j.features[Q].geometry;break;case"Feature":ie=ie||j.properties,q=j.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":q=j;break;default:throw new Error("geojson is invalid")}if(null===q)return null;var se=q.coordinates;switch(q.type){case"Point":return k.point(se,ie,P);case"MultiPoint":return $<0&&($=se.length+$),k.point(se[$],ie,P);case"LineString":return X<0&&(X=se.length+X),k.point(se[X],ie,P);case"Polygon":return oe<0&&(oe=se.length+oe),X<0&&(X=se[oe].length+X),k.point(se[oe][X],ie,P);case"MultiLineString":return $<0&&($=se.length+$),X<0&&(X=se[$].length+X),k.point(se[$][X],ie,P);case"MultiPolygon":return $<0&&($=se.length+$),oe<0&&(oe=se[$].length+oe),X<0&&(X=se[$][oe].length-X),k.point(se[$][oe][X],ie,P)}throw new Error("geojson is invalid")},y.findSegment=function U(j,P){if(!k.isObject(P=P||{}))throw new Error("options is invalid");var q,Q=P.featureIndex||0,$=P.multiFeatureIndex||0,oe=P.geometryIndex||0,X=P.segmentIndex||0,ie=P.properties;switch(j.type){case"FeatureCollection":Q<0&&(Q=j.features.length+Q),ie=ie||j.features[Q].properties,q=j.features[Q].geometry;break;case"Feature":ie=ie||j.properties,q=j.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":q=j;break;default:throw new Error("geojson is invalid")}if(null===q)return null;var se=q.coordinates;switch(q.type){case"Point":case"MultiPoint":return null;case"LineString":return X<0&&(X=se.length+X-1),k.lineString([se[X],se[X+1]],ie,P);case"Polygon":return oe<0&&(oe=se.length+oe),X<0&&(X=se[oe].length+X-1),k.lineString([se[oe][X],se[oe][X+1]],ie,P);case"MultiLineString":return $<0&&($=se.length+$),X<0&&(X=se[$].length+X-1),k.lineString([se[$][X],se[$][X+1]],ie,P);case"MultiPolygon":return $<0&&($=se.length+$),oe<0&&(oe=se[$].length+oe),X<0&&(X=se[$][oe].length-X-1),k.lineString([se[$][oe][X],se[$][oe][X+1]],ie,P)}throw new Error("geojson is invalid")},y.flattenEach=S,y.flattenReduce=function M(j,P,Q){var $=Q;return S(j,function(oe,X,ie){$=0===X&&0===ie&&void 0===Q?oe:P($,oe,X,ie)}),$},y.geomEach=f,y.geomReduce=function _(j,P,Q){var $=Q;return f(j,function(oe,X,ie,q,se){$=0===X&&void 0===Q?oe:P($,oe,X,ie,q,se)}),$},y.lineEach=V,y.lineReduce=function B(j,P,Q){var $=Q;return V(j,function(oe,X,ie,q){$=0===X&&void 0===Q?oe:P($,oe,X,ie,q)}),$},y.propEach=u,y.propReduce=function h(j,P,Q){var $=Q;return u(j,function(oe,X){$=0===X&&void 0===Q?oe:P($,oe,X)}),$},y.segmentEach=D,y.segmentReduce=function R(j,P,Q){var $=Q,oe=!1;return D(j,function(X,ie,q,se,ne){$=!1===oe&&void 0===Q?X:P($,X,ie,q,se,ne),oe=!0}),$}},55166:(Ae,y,w)=>{"use strict";var k=w(2952),G=w(73026),I=w(36512);function u(f){return f&&"object"==typeof f&&"default"in f?f:{default:f}}var h=u(k),g=u(G),v=u(I);function m(f,_){var S=v.default(f,_),M=h.default(f,_);return g.default(f,S/2,M)}Ae.exports=m,Ae.exports.default=m},26396:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(41802)),I=w(58570);function h(v){for(var m=0,f=0,_=v;f<_.length;f++)m+=_[f];return m/v.length}y.default=function u(v,m){var f=m.inputField,V=G.default(v,{alpha:m.alpha||-1,binary:m.binary||!1,p:m.p||2,standardization:m.standardization||!0,threshold:m.threshold||1e5}),B=[];I.featureEach(v,function(de){B.push((de.properties||{})[f])});for(var U=h(B),F=function g(v){for(var m=h(v),f=0,_=0,S=v;_<S.length;_++)f+=Math.pow(S[_]-m,2);return f/v.length}(B),j=0,P=0,Q=0,$=0,oe=V.length,X=0;X<oe;X++){for(var ie=0,q=0;q<oe;q++)j+=V[X][q]*(B[X]-U)*(B[q]-U),P+=V[X][q],Q+=Math.pow(V[X][q]+V[q][X],2),ie+=V[X][q]+V[q][X];$+=Math.pow(ie,2)}Q*=.5;var se=j/P/F,ne=-1/(oe-1),fe=Math.sqrt((oe*oe*Q-oe*$+P*P*3)/((oe-1)*(oe+1)*(P*P))-ne*ne);return{expectedMoranIndex:ne,moranIndex:se,stdNorm:fe,zNorm:(se-ne)/fe}}},8217:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(2952)),I=k(w(36512)),u=k(w(73026)),h=k(w(51730)),g=w(58570),v=w(90621),m=w(45943);y.default=function f(_,S,M){void 0===M&&(M={});var D=v.point([1/0,1/0],{dist:1/0}),R=0;return g.flattenEach(_,function(V){for(var B=m.getCoords(V),U=0;U<B.length-1;U++){var F=v.point(B[U]);F.properties.dist=I.default(S,F,M);var j=v.point(B[U+1]);j.properties.dist=I.default(S,j,M);var P=I.default(F,j,M),Q=Math.max(F.properties.dist,j.properties.dist),$=G.default(F,j),oe=u.default(S,Q,$+90,M),X=u.default(S,Q,$-90,M),ie=h.default(v.lineString([oe.geometry.coordinates,X.geometry.coordinates]),v.lineString([F.geometry.coordinates,j.geometry.coordinates])),q=null;ie.features.length>0&&((q=ie.features[0]).properties.dist=I.default(S,q,M),q.properties.location=R+I.default(F,q,M)),F.properties.dist<D.properties.dist&&((D=F).properties.index=U,D.properties.location=R),j.properties.dist<D.properties.dist&&((D=j).properties.index=U+1,D.properties.location=R+P),q&&q.properties.dist<D.properties.dist&&((D=q).properties.index=U),R+=P}}),D}},94301:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(45943),I=w(58570),u=k(w(42059)),h=k(w(64772));y.default=function g(m,f,_){void 0===_&&(_={});var S=_.units,M=_.properties||{},D=function v(m){var f=[];switch(m.geometry?m.geometry.type:m.type){case"GeometryCollection":return I.geomEach(m,function(S){"Point"===S.type&&f.push({type:"Feature",properties:{},geometry:S})}),{type:"FeatureCollection",features:f};case"FeatureCollection":return m.features=m.features.filter(function(S){return"Point"===S.geometry.type}),m;default:throw new Error("points must be a Point Collection")}}(m);if(!D.features.length)throw new Error("points must contain features");if(!f)throw new Error("line is required");if("LineString"!==G.getType(f))throw new Error("line must be a LineString");var R=1/0,V=null;return I.featureEach(D,function(B){var U=u.default(B,f,{units:S});U<R&&(R=U,V=B)}),V&&(V.properties=h.default({dist:R},V.properties,M)),V}},17863:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(97408)),I=k(w(36512)),u=w(58570);y.default=function h(g,v){if(!g)throw new Error("targetPoint is required");if(!v)throw new Error("points is required");var m,f=1/0,_=0;return u.featureEach(v,function(S,M){var D=I.default(g,S);D<f&&(_=M,f=D)}),(m=G.default(v.features[_])).properties.featureIndex=_,m.properties.distanceToPoint=f,m}},87378:(Ae,y,w)=>{"use strict";var k=w(45943);function G(I,u){var h=k.getCoord(I),m=k.getGeom(u).coordinates[0];if(m.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var f=u.properties||{},_=f.a,S=f.b,M=f.c,D=h[0],R=h[1],V=m[0][0],B=m[0][1],U=void 0!==_?_:m[0][2],F=m[1][0],j=m[1][1],P=void 0!==S?S:m[1][2],Q=m[2][0],$=m[2][1],oe=void 0!==M?M:m[2][2];return(oe*(D-V)*(R-j)+U*(D-F)*(R-$)+P*(D-Q)*(R-B)-P*(D-V)*(R-$)-oe*(D-F)*(R-B)-U*(D-Q)*(R-j))/((D-V)*(R-j)+(D-F)*(R-$)+(D-Q)*(R-B)-(D-V)*(R-$)-(D-F)*(R-B)-(D-Q)*(R-j))}Ae.exports=G,Ae.exports.default=G},2702:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(67680)),I=k(w(36512)),u=w(90621);y.default=function h(g,v,m){void 0===m&&(m={}),m.mask&&!m.units&&(m.units="kilometers");for(var f=[],_=g[0],S=g[1],M=g[2],D=g[3],V=v/I.default([_,S],[M,S],m)*(M-_),U=v/I.default([_,S],[_,D],m)*(D-S),F=M-_,j=D-S,P=Math.floor(F/V),oe=(j-Math.floor(j/U)*U)/2,X=_+(F-P*V)/2;X<=M;){for(var ie=S+oe;ie<=D;){var q=u.point([X,ie],m.properties);m.mask?G.default(q,m.mask)&&f.push(q):f.push(q),ie+=U}X+=V}return u.featureCollection(f)}},95688:(Ae,y,w)=>{"use strict";var k=w(41044),G=w(49360),I=w(17863),u=w(40940),h=w(90621);function g(R){return R&&"object"==typeof R&&"default"in R?R:{default:R}}var v=g(k),m=g(G),f=g(I),_=g(u);function S(R){for(var V=function M(R){return"FeatureCollection"!==R.type?h.featureCollection("Feature"!==R.type?[h.feature(R)]:[R]):R}(R),B=m.default(V),U=!1,F=0;!U&&F<V.features.length;){var q,j=V.features[F].geometry,se=!1;if("Point"===j.type)B.geometry.coordinates[0]===j.coordinates[0]&&B.geometry.coordinates[1]===j.coordinates[1]&&(U=!0);else if("MultiPoint"===j.type){var ne=!1;for(q=0;!ne&&q<j.coordinates.length;)B.geometry.coordinates[0]===j.coordinates[q][0]&&B.geometry.coordinates[1]===j.coordinates[q][1]&&(U=!0,ne=!0),q++}else if("LineString"===j.type)for(q=0;!se&&q<j.coordinates.length-1;)D(B.geometry.coordinates[0],B.geometry.coordinates[1],j.coordinates[q][0],j.coordinates[q][1],j.coordinates[q+1][0],j.coordinates[q+1][1])&&(se=!0,U=!0),q++;else if("MultiLineString"===j.type)for(var Ce=0;Ce<j.coordinates.length;){se=!1,q=0;for(var xe=j.coordinates[Ce];!se&&q<xe.length-1;)D(B.geometry.coordinates[0],B.geometry.coordinates[1],xe[q][0],xe[q][1],xe[q+1][0],xe[q+1][1])&&(se=!0,U=!0),q++;Ce++}else("Polygon"===j.type||"MultiPolygon"===j.type)&&_.default(B,j)&&(U=!0);F++}if(U)return B;var ue=h.featureCollection([]);for(F=0;F<V.features.length;F++)ue.features=ue.features.concat(v.default(V.features[F]).features);return h.point(f.default(B,ue).geometry.coordinates)}function D(R,V,B,U,F,j){return Math.sqrt((F-B)*(F-B)+(j-U)*(j-U))===Math.sqrt((R-B)*(R-B)+(V-U)*(V-U))+Math.sqrt((F-R)*(F-R)+(j-V)*(j-V))}Ae.exports=S,Ae.exports.default=S},42059:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(36512)),I=w(90621),u=w(45943),h=w(58570),g=k(w(30));function f(S,M){return S[0]*M[0]+S[1]*M[1]}function _(S,M,D){return"planar"===D.method?g.default(S,M,D):G.default(S,M,D)}y.default=function v(S,M,D){if(void 0===D&&(D={}),D.method||(D.method="geodesic"),D.units||(D.units="kilometers"),!S)throw new Error("pt is required");if(Array.isArray(S)?S=I.point(S):"Point"===S.type?S=I.feature(S):u.featureOf(S,"Point","point"),!M)throw new Error("line is required");Array.isArray(M)?M=I.lineString(M):"LineString"===M.type?M=I.feature(M):u.featureOf(M,"LineString","line");var R=1/0,V=S.geometry.coordinates;return h.segmentEach(M,function(B){var j=function m(S,M,D,R){var V=[D[0]-M[0],D[1]-M[1]],U=f([S[0]-M[0],S[1]-M[1]],V);if(U<=0)return _(S,M,{method:R.method,units:"degrees"});var F=f(V,V);if(F<=U)return _(S,D,{method:R.method,units:"degrees"});var j=U/F;return _(S,[M[0]+j*V[0],M[1]+j*V[1]],{method:R.method,units:"degrees"})}(V,B.geometry.coordinates[0],B.geometry.coordinates[1],D);j<R&&(R=j)}),I.convertLength(R,"degrees",D.units)}},3923:(Ae,y,w)=>{"use strict";var k=w(40940),G=w(90621),I=w(58570);function u(v){return v&&"object"==typeof v&&"default"in v?v:{default:v}}var h=u(k);function g(v,m){var f=[];return I.featureEach(v,function(_){var S=!1;if("Point"===_.geometry.type)I.geomEach(m,function(D){h.default(_,D)&&(S=!0)}),S&&f.push(_);else{if("MultiPoint"!==_.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var M=[];I.geomEach(m,function(D){I.coordEach(_,function(R){h.default(R,D)&&(S=!0,M.push(R))})}),S&&f.push(G.multiPoint(M))}}),G.featureCollection(f)}Ae.exports=g,Ae.exports.default=g},47352:(Ae,y,w)=>{"use strict";var k=w(58570),G=w(90621);function I(g,v){var m=[],f=v.iterations||1;if(!g)throw new Error("inputPolys is required");return k.geomEach(g,function(_,S,M){var D,R,V;switch(_.type){case"Polygon":D=[[]];for(var B=0;B<f;B++)V=[[]],R=_,B>0&&(R=G.polygon(D).geometry),u(R,V),D=V.slice(0);m.push(G.polygon(D,M));break;case"MultiPolygon":D=[[[]]];for(var U=0;U<f;U++)V=[[[]]],R=_,U>0&&(R=G.multiPolygon(D).geometry),h(R,V),D=V.slice(0);m.push(G.multiPolygon(D,M));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),G.featureCollection(m)}function u(g,v){var m=0,f=0;k.coordEach(g,function(_,S,M,D,R){R>m&&(m=R,f=S,v.push([]));var B=g.coordinates[R][S-f+1],U=_[0],F=_[1],j=B[0],P=B[1];v[R].push([.75*U+.25*j,.75*F+.25*P]),v[R].push([.25*U+.75*j,.25*F+.75*P])},!0),v.forEach(function(_){_.push(_[0])})}function h(g,v){var m=0,f=0,_=0;k.coordEach(g,function(S,M,D,R,V){R>_&&(_=R,f=M,v.push([[]])),V>m&&(m=V,f=M,v[R].push([]));var U=g.coordinates[R][V][M-f+1],F=S[0],j=S[1],P=U[0],Q=U[1];v[R][V].push([.75*F+.25*P,.75*j+.25*Q]),v[R][V].push([.25*F+.75*P,.25*j+.75*Q])},!0),v.forEach(function(S){S.forEach(function(M){M.push(M[0])})})}Ae.exports=I,Ae.exports.default=I},41837:(Ae,y,w)=>{"use strict";var k=w(45943),G=w(90621),I=w(11568),u=w(41044),h=w(17863);function g(V){return V&&"object"==typeof V&&"default"in V?V:{default:V}}var v=g(I),m=g(u),f=g(h);function _(V,B){var j,P,Q,$,U=k.getCoords(V),F=k.getCoords(B),oe=v.default(B),X=0,ie=null;switch(U[0]>oe[0]&&U[0]<oe[2]&&U[1]>oe[1]&&U[1]<oe[3]&&(X=(ie=f.default(V,m.default(B))).properties.featureIndex),k.getType(B)){case"Polygon":j=F[0][X],P=F[0][0],null!==ie&&ie.geometry.coordinates[1]<U[1]&&(P=F[0][X]),$=R(F[0][0],F[0][F[0].length-1],U);var se=S(F[0],U,$,Q,j,P);j=se[0],P=se[1];break;case"MultiPolygon":for(var ne=0,Ce=0,xe=0,ue=0;ue<F[0].length;ue++){ne=ue;for(var fe=!1,ee=0;ee<F[0][ue].length;ee++){if(Ce=ee,xe===X){fe=!0;break}xe++}if(fe)break}j=F[0][ne][Ce],P=F[0][ne][Ce],$=R(F[0][0][0],F[0][0][F[0][0].length-1],U),F.forEach(function(de){var pe=S(de[0],U,$,Q,j,P);j=pe[0],P=pe[1]})}return G.featureCollection([G.point(j),G.point(P)])}function S(V,B,U,F,j,P){for(var Q=0;Q<V.length;Q++){var $=V[Q],oe=V[Q+1];Q===V.length-1&&(oe=V[0]),F=R($,oe,B),U<=0&&F>0?D(B,$,j)||(j=$):U>0&&F<=0&&(M(B,$,P)||(P=$)),U=F}return[j,P]}function M(V,B,U){return R(V,B,U)>0}function D(V,B,U){return R(V,B,U)<0}function R(V,B,U){return(B[0]-V[0])*(U[1]-V[1])-(U[0]-V[0])*(B[1]-V[1])}Ae.exports=_,Ae.exports.default=_},26766:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943);function u(v,m){return void 0===m&&(m={}),g(G.getGeom(v).coordinates,m.properties?m.properties:"Feature"===v.type?v.properties:{})}function h(v,m){void 0===m&&(m={});var f=G.getGeom(v),S=m.properties?m.properties:"Feature"===v.type?v.properties:{},M=[];return f.coordinates.forEach(function(D){M.push(g(D,S))}),k.featureCollection(M)}function g(v,m){return v.length>1?k.multiLineString(v,m):k.lineString(v[0],m)}y.default=function I(v,m){void 0===m&&(m={});var f=G.getGeom(v);switch(!m.properties&&"Feature"===v.type&&(m.properties=v.properties),f.type){case"Polygon":return u(f,m);case"MultiPolygon":return h(f,m);default:throw new Error("invalid poly")}},y.polygonToLine=u,y.multiPolygonToLine=h,y.coordsToLine=g},35101:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(90621),I=k(w(28608)),u=k(w(84491));y.default=function h(g){var v=I.default.fromGeoJson(g);v.deleteDangles(),v.deleteCutEdges();var m=[],f=[];return v.getEdgeRings().filter(function(_){return _.isValid()}).forEach(function(_){_.isHole()?m.push(_):f.push(_)}),m.forEach(function(_){u.default.findEdgeRingContaining(_,f)&&f.push(_)}),G.featureCollection(f.map(function(_){return _.toPolygon()}))}},81057:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(4570),I=function(){function u(h,g){this.from=h,this.to=g,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return u.prototype.getSymetric=function(){return this.symetric||(this.symetric=new u(this.to,this.from),this.symetric.symetric=this),this.symetric},u.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},u.prototype.isEqual=function(h){return this.from.id===h.from.id&&this.to.id===h.to.id},u.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},u.prototype.toLineString=function(){return k.lineString([this.from.coordinates,this.to.coordinates])},u.prototype.compareTo=function(h){return G.orientationIndex(h.from.coordinates,h.to.coordinates,this.to.coordinates)},u}();y.default=I},84491:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(4570),I=w(90621),u=k(w(41522)),h=k(w(40940)),g=function(){function v(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return v.prototype.push=function(m){this.edges.push(m),this.polygon=this.envelope=void 0},v.prototype.get=function(m){return this.edges[m]},Object.defineProperty(v.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),v.prototype.forEach=function(m){this.edges.forEach(m)},v.prototype.map=function(m){return this.edges.map(m)},v.prototype.some=function(m){return this.edges.some(m)},v.prototype.isValid=function(){return!0},v.prototype.isHole=function(){var m=this,f=this.edges.reduce(function(D,R,V){return R.from.coordinates[1]>m.edges[D].from.coordinates[1]&&(D=V),D},0),_=(0===f?this.length:f)-1,S=(f+1)%this.length,M=G.orientationIndex(this.edges[_].from.coordinates,this.edges[f].from.coordinates,this.edges[S].from.coordinates);return 0===M?this.edges[_].from.coordinates[0]>this.edges[S].from.coordinates[0]:M>0},v.prototype.toMultiPoint=function(){return I.multiPoint(this.edges.map(function(m){return m.from.coordinates}))},v.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var m=this.edges.map(function(f){return f.from.coordinates});return m.push(this.edges[0].from.coordinates),this.polygon=I.polygon([m])},v.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=u.default(this.toPolygon())},v.findEdgeRingContaining=function(m,f){var S,M,_=m.getEnvelope();return f.forEach(function(D){var R=D.getEnvelope();if(M&&(S=M.getEnvelope()),!G.envelopeIsEqual(R,_)&&G.envelopeContains(R,_)){for(var V=m.map(function(Q){return Q.from.coordinates}),B=void 0,U=function(Q){D.some(function($){return G.coordinatesEqual(Q,$.from.coordinates)})||(B=Q)},F=0,j=V;F<j.length;F++)U(j[F]);B&&D.inside(I.point(B))&&(!M||G.envelopeContains(S,R))&&(M=D)}}),M},v.prototype.inside=function(m){return h.default(m,this.toPolygon())},v}();y.default=g},28608:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(23601)),I=k(w(81057)),u=k(w(84491)),h=w(58570),g=w(45943),m=function(){function f(){this.edges=[],this.nodes={}}return f.fromGeoJson=function(_){!function v(f){if(!f)throw new Error("No geojson passed");if("FeatureCollection"!==f.type&&"GeometryCollection"!==f.type&&"MultiLineString"!==f.type&&"LineString"!==f.type&&"Feature"!==f.type)throw new Error("Invalid input type '"+f.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(_);var S=new f;return h.flattenEach(_,function(M){g.featureOf(M,"LineString","Graph::fromGeoJson"),h.coordReduce(M,function(D,R){if(D){var V=S.getNode(D),B=S.getNode(R);S.addEdge(V,B)}return R})}),S},f.prototype.getNode=function(_){var S=G.default.buildId(_),M=this.nodes[S];return M||(M=this.nodes[S]=new G.default(_)),M},f.prototype.addEdge=function(_,S){var M=new I.default(_,S),D=M.getSymetric();this.edges.push(M),this.edges.push(D)},f.prototype.deleteDangles=function(){var _=this;Object.keys(this.nodes).map(function(S){return _.nodes[S]}).forEach(function(S){return _._removeIfDangle(S)})},f.prototype._removeIfDangle=function(_){var S=this;if(_.innerEdges.length<=1){var M=_.getOuterEdges().map(function(D){return D.to});this.removeNode(_),M.forEach(function(D){return S._removeIfDangle(D)})}},f.prototype.deleteCutEdges=function(){var _=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(S){S.label===S.symetric.label&&(_.removeEdge(S.symetric),_.removeEdge(S))})},f.prototype._computeNextCWEdges=function(_){var S=this;typeof _>"u"?Object.keys(this.nodes).forEach(function(M){return S._computeNextCWEdges(S.nodes[M])}):_.getOuterEdges().forEach(function(M,D){_.getOuterEdge((0===D?_.getOuterEdges().length:D)-1).symetric.next=M})},f.prototype._computeNextCCWEdges=function(_,S){for(var D,R,M=_.getOuterEdges(),V=M.length-1;V>=0;--V){var B=M[V],U=B.symetric,F=void 0,j=void 0;B.label===S&&(F=B),U.label===S&&(j=U),F&&j&&(j&&(R=j),F&&(R&&(R.next=F,R=void 0),D||(D=F)))}R&&(R.next=D)},f.prototype._findLabeledEdgeRings=function(){var _=[],S=0;return this.edges.forEach(function(M){if(!(M.label>=0)){_.push(M);var D=M;do{D.label=S,D=D.next}while(!M.isEqual(D));S++}}),_},f.prototype.getEdgeRings=function(){var _=this;this._computeNextCWEdges(),this.edges.forEach(function(M){M.label=void 0}),this._findLabeledEdgeRings().forEach(function(M){_._findIntersectionNodes(M).forEach(function(D){_._computeNextCCWEdges(D,M.label)})});var S=[];return this.edges.forEach(function(M){M.ring||S.push(_._findEdgeRing(M))}),S},f.prototype._findIntersectionNodes=function(_){var S=[],M=_,D=function(){var R=0;M.from.getOuterEdges().forEach(function(V){V.label===_.label&&++R}),R>1&&S.push(M.from),M=M.next};do{D()}while(!_.isEqual(M));return S},f.prototype._findEdgeRing=function(_){var S=_,M=new u.default;do{M.push(S),S.ring=M,S=S.next}while(!_.isEqual(S));return M},f.prototype.removeNode=function(_){var S=this;_.getOuterEdges().forEach(function(M){return S.removeEdge(M)}),_.innerEdges.forEach(function(M){return S.removeEdge(M)}),delete this.nodes[_.id]},f.prototype.removeEdge=function(_){this.edges=this.edges.filter(function(S){return!S.isEqual(_)}),_.deleteEdge()},f}();y.default=m},23601:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(4570),G=function(){function I(u){this.id=I.buildId(u),this.coordinates=u,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return I.buildId=function(u){return u.join(",")},I.prototype.removeInnerEdge=function(u){this.innerEdges=this.innerEdges.filter(function(h){return h.from.id!==u.from.id})},I.prototype.removeOuterEdge=function(u){this.outerEdges=this.outerEdges.filter(function(h){return h.to.id!==u.to.id})},I.prototype.addOuterEdge=function(u){this.outerEdges.push(u),this.outerEdgesSorted=!1},I.prototype.sortOuterEdges=function(){var u=this;this.outerEdgesSorted||(this.outerEdges.sort(function(h,g){var v=h.to,m=g.to;if(v.coordinates[0]-u.coordinates[0]>=0&&m.coordinates[0]-u.coordinates[0]<0)return 1;if(v.coordinates[0]-u.coordinates[0]<0&&m.coordinates[0]-u.coordinates[0]>=0)return-1;if(v.coordinates[0]-u.coordinates[0]==0&&m.coordinates[0]-u.coordinates[0]==0)return v.coordinates[1]-u.coordinates[1]>=0||m.coordinates[1]-u.coordinates[1]>=0?v.coordinates[1]-m.coordinates[1]:m.coordinates[1]-v.coordinates[1];var f=k.orientationIndex(u.coordinates,v.coordinates,m.coordinates);return f<0?1:f>0?-1:Math.pow(v.coordinates[0]-u.coordinates[0],2)+Math.pow(v.coordinates[1]-u.coordinates[1],2)-(Math.pow(m.coordinates[0]-u.coordinates[0],2)+Math.pow(m.coordinates[1]-u.coordinates[1],2))}),this.outerEdgesSorted=!0)},I.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},I.prototype.getOuterEdge=function(u){return this.sortOuterEdges(),this.outerEdges[u]},I.prototype.addInnerEdge=function(u){this.innerEdges.push(u)},I}();y.default=G},4570:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(40940)),I=w(90621);y.orientationIndex=function h(f,_,S){return function u(f){return(f>0)-(f<0)||+f}((_[0]-f[0])*(S[1]-_[1])-(S[0]-_[0])*(_[1]-f[1]))},y.envelopeIsEqual=function g(f,_){var S=f.geometry.coordinates[0].map(function(V){return V[0]}),M=f.geometry.coordinates[0].map(function(V){return V[1]}),D=_.geometry.coordinates[0].map(function(V){return V[0]}),R=_.geometry.coordinates[0].map(function(V){return V[1]});return Math.max.apply(null,S)===Math.max.apply(null,D)&&Math.max.apply(null,M)===Math.max.apply(null,R)&&Math.min.apply(null,S)===Math.min.apply(null,D)&&Math.min.apply(null,M)===Math.min.apply(null,R)},y.envelopeContains=function v(f,_){return _.geometry.coordinates[0].every(function(S){return G.default(I.point(S),f)})},y.coordinatesEqual=function m(f,_){return f[0]===_[0]&&f[1]===_[1]}},3924:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(y,"__esModule",{value:!0});var G=w(58570),I=w(90621),u=k(w(97408));function v(S,M,D){void 0===D&&(D={});var R=(D=D||{}).mutate;if(!S)throw new Error("geojson is required");return Array.isArray(S)&&I.isNumber(S[0])?S="mercator"===M?m(S):f(S):(!0!==R&&(S=u.default(S)),G.coordEach(S,function(V){var B="mercator"===M?m(V):f(V);V[0]=B[0],V[1]=B[1]})),S}function m(S){var M=Math.PI/180,D=6378137,R=20037508.342789244,V=Math.abs(S[0])<=180?S[0]:S[0]-360*function _(S){return S<0?-1:S>0?1:0}(S[0]),B=[D*V*M,D*Math.log(Math.tan(.25*Math.PI+.5*S[1]*M))];return B[0]>R&&(B[0]=R),B[0]<-R&&(B[0]=-R),B[1]>R&&(B[1]=R),B[1]<-R&&(B[1]=-R),B}function f(S){var M=180/Math.PI,D=6378137;return[S[0]*M/D,(.5*Math.PI-2*Math.atan(Math.exp(-S[1]/D)))*M]}y.toMercator=function h(S,M){return void 0===M&&(M={}),v(S,"mercator",M)},y.toWgs84=function g(S,M){return void 0===M&&(M={}),v(S,"wgs84",M)}},70903:function(Ae,y,w){"use strict";var k=this&&this.__spreadArrays||function(){for(var M=0,D=0,R=arguments.length;D<R;D++)M+=arguments[D].length;var V=Array(M),B=0;for(D=0;D<R;D++)for(var U=arguments[D],F=0,j=U.length;F<j;F++,B++)V[B]=U[F];return V};Object.defineProperty(y,"__esModule",{value:!0});var G=w(90621);function I(M){return Array.isArray(M)?S(M):M&&M.bbox?S(M.bbox):[360*m(),180*m()]}function m(){return Math.random()-.5}function S(M){return[Math.random()*(M[2]-M[0])+M[0],Math.random()*(M[3]-M[1])+M[1]]}y.randomPosition=I,y.randomPoint=function u(M,D){void 0===D&&(D={}),null==M&&(M=1);for(var R=[],V=0;V<M;V++)R.push(G.point(I(D.bbox)));return G.featureCollection(R)},y.randomPolygon=function h(M,D){void 0===D&&(D={}),null==M&&(M=1),(!G.isNumber(D.num_vertices)||void 0===D.num_vertices)&&(D.num_vertices=10),(!G.isNumber(D.max_radial_length)||void 0===D.max_radial_length)&&(D.max_radial_length=10);for(var R=[],V=function(U){var F=[],j=k(Array(D.num_vertices+1)).map(Math.random);j.forEach(function(P,Q,$){$[Q]=Q>0?P+$[Q-1]:P}),j.forEach(function(P){P=2*P*Math.PI/j[j.length-1];var Q=Math.random();F.push([Q*(D.max_radial_length||10)*Math.sin(P),Q*(D.max_radial_length||10)*Math.cos(P)])}),F[F.length-1]=F[0],F=F.map(function v(M){return function(D){return[D[0]+M[0],D[1]+M[1]]}}(I(D.bbox))),R.push(G.polygon([F]))},B=0;B<M;B++)V();return G.featureCollection(R)},y.randomLineString=function g(M,D){if(void 0===D&&(D={}),!G.isObject(D=D||{}))throw new Error("options is invalid");var R=D.bbox,V=D.num_vertices,B=D.max_length,U=D.max_rotation;null==M&&(M=1),(!G.isNumber(V)||void 0===V||V<2)&&(V=10),(!G.isNumber(B)||void 0===B)&&(B=1e-4),(!G.isNumber(U)||void 0===U)&&(U=Math.PI/8);for(var F=[],j=0;j<M;j++){for(var Q=[I(R)],$=0;$<V-1;$++){var X=(0===$?2*Math.random()*Math.PI:Math.tan((Q[$][1]-Q[$-1][1])/(Q[$][0]-Q[$-1][0])))+(Math.random()-.5)*U*2,ie=Math.random()*B;Q.push([Q[$][0]+ie*Math.cos(X),Q[$][1]+ie*Math.sin(X)])}F.push(G.lineString(Q))}return G.featureCollection(F)}},16443:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(46437)),I=k(w(36512)),u=w(90621);y.default=function h(g,v,m,f){void 0===f&&(f={});for(var _=[],S=g[0],M=g[1],D=g[2],R=g[3],B=v/I.default([S,M],[D,M],f)*(D-S),F=m/I.default([S,M],[S,R],f)*(R-M),j=D-S,P=R-M,Q=Math.floor(j/B),$=Math.floor(P/F),X=(P-$*F)/2,ie=S+(j-Q*B)/2,q=0;q<Q;q++){for(var se=M+X,ne=0;ne<$;ne++){var Ce=u.polygon([[[ie,se],[ie,se+F],[ie+B,se+F],[ie+B,se],[ie,se]]],f.properties);f.mask?G.default(f.mask,Ce)&&_.push(Ce):_.push(Ce),se+=F}ie+=B}return u.featureCollection(_)}},93308:(Ae,y,w)=>{"use strict";var k=w(97408),G=w(13673),I=w(58570),u=w(45943),h=w(90621);function g(D){return D&&"object"==typeof D&&"default"in D?D:{default:D}}var v=g(k),m=g(G);function f(D,R){if(!h.isObject(R=R||{}))throw new Error("options is invalid");var V=R.reverse||!1,B=R.mutate||!1;if(!D)throw new Error("<geojson> is required");if("boolean"!=typeof V)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof B)throw new Error("<mutate> must be a boolean");!1===B&&(D=v.default(D));var U=[];switch(D.type){case"GeometryCollection":return I.geomEach(D,function(F){_(F,V)}),D;case"FeatureCollection":return I.featureEach(D,function(F){I.featureEach(_(F,V),function(j){U.push(j)})}),h.featureCollection(U)}return _(D,V)}function _(D,R){switch("Feature"===D.type?D.geometry.type:D.type){case"GeometryCollection":return I.geomEach(D,function(B){_(B,R)}),D;case"LineString":return S(u.getCoords(D),R),D;case"Polygon":return M(u.getCoords(D),R),D;case"MultiLineString":return u.getCoords(D).forEach(function(B){S(B,R)}),D;case"MultiPolygon":return u.getCoords(D).forEach(function(B){M(B,R)}),D;case"Point":case"MultiPoint":return D}}function S(D,R){m.default(D)===R&&D.reverse()}function M(D,R){m.default(D[0])!==R&&D[0].reverse();for(var V=1;V<D.length;V++)m.default(D[V])===R&&D[V].reverse()}Ae.exports=f,Ae.exports.default=f},77459:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943);function u(h,g){var v=k.degreesToRadians(h[1]),m=k.degreesToRadians(g[1]),f=k.degreesToRadians(g[0]-h[0]);f>Math.PI&&(f-=2*Math.PI),f<-Math.PI&&(f+=2*Math.PI);var _=Math.log(Math.tan(m/2+Math.PI/4)/Math.tan(v/2+Math.PI/4)),S=Math.atan2(f,_);return(k.radiansToDegrees(S)+360)%360}y.default=function I(h,g,v){var m;return void 0===v&&(v={}),(m=v.final?u(G.getCoord(g),G.getCoord(h)):u(G.getCoord(h),G.getCoord(g)))>180?-(360-m):m}},3993:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943);y.default=function I(h,g,v,m){void 0===m&&(m={});var f=g<0,_=k.convertLength(Math.abs(g),m.units,"meters");f&&(_=-Math.abs(_));var S=G.getCoord(h),M=function u(h,g,v,m){var f=g/(m=void 0===m?k.earthRadius:Number(m)),_=h[0]*Math.PI/180,S=k.degreesToRadians(h[1]),M=k.degreesToRadians(v),D=f*Math.cos(M),R=S+D;Math.abs(R)>Math.PI/2&&(R=R>0?Math.PI-R:-Math.PI-R);var V=Math.log(Math.tan(R/2+Math.PI/4)/Math.tan(S/2+Math.PI/4)),B=Math.abs(V)>1e-11?D/V:Math.cos(S);return[(180*(_+f*Math.sin(M)/B)/Math.PI+540)%360-180,180*R/Math.PI]}(S,_,v);return M[0]+=M[0]-S[0]>180?-360:S[0]-M[0]>180?360:0,k.point(M,m.properties)}},30:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621),G=w(45943);y.default=function I(h,g,v){void 0===v&&(v={});var m=G.getCoord(h),f=G.getCoord(g);f[0]+=f[0]-m[0]>180?-360:m[0]-f[0]>180?360:0;var _=function u(h,g,v){var m=v=void 0===v?k.earthRadius:Number(v),f=h[1]*Math.PI/180,_=g[1]*Math.PI/180,S=_-f,M=Math.abs(g[0]-h[0])*Math.PI/180;M>Math.PI&&(M-=2*Math.PI);var D=Math.log(Math.tan(_/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),R=Math.abs(D)>1e-11?S/D:Math.cos(f);return Math.sqrt(S*S+R*R*M*M)*m}(m,f);return k.convertLength(_,"meters",v.units)}},11075:(Ae,y,w)=>{"use strict";var k=w(90621);function G(u,h){if(!u)throw new Error("featurecollection is required");if(null==h)throw new Error("num is required");if("number"!=typeof h)throw new Error("num must be a number");var g=k.featureCollection(function I(u,h){for(var f,_,g=u.slice(0),v=u.length,m=v-h;v-- >m;)f=g[_=Math.floor((v+1)*Math.random())],g[_]=g[v],g[v]=f;return g.slice(m)}(u.features,h));return g}Ae.exports=G,Ae.exports.default=G},88886:(Ae,y,w)=>{"use strict";var k=w(92631),G=w(17525),I=w(58570),u=w(90621),h=w(45943);function g(S){return S&&"object"==typeof S&&"default"in S?S:{default:S}}var v=g(k),m=g(G);function f(S,M,D,R,V){if(!u.isObject(V=V||{}))throw new Error("options is invalid");var B=V.properties;if(!S)throw new Error("center is required");if(null==D)throw new Error("bearing1 is required");if(null==R)throw new Error("bearing2 is required");if(!M)throw new Error("radius is required");if("object"!=typeof V)throw new Error("options must be an object");if(_(D)===_(R))return v.default(S,M,V);var U=h.getCoords(S),F=m.default(S,M,D,R,V),j=[[U]];return I.coordEach(F,function(P){j[0].push(P)}),j[0].push(U),u.polygon(j,B)}function _(S){var M=S%360;return M<0&&(M+=360),M}Ae.exports=f,Ae.exports.default=f},13453:(Ae,y,w)=>{"use strict";var k=w(11568),G=w(40940),I=w(36512),u=w(46154),h=w(65010),g=w(298),v=w(45943),m=w(90621);function f(X){return X&&"object"==typeof X&&"default"in X?X:{default:X}}var _=f(k),S=f(G),M=f(I),D=f(u),R=f(h),V=f(g);function B(X){for(var ie=X,q=[];ie.parent;)q.unshift(ie),ie=ie.parent;return q}var F={search:function(X,ie,q,se){X.cleanDirty();var ne=(se=se||{}).heuristic||F.heuristics.manhattan,Ce=se.closest||!1,xe=function U(){return new Q(function(X){return X.f})}(),ue=ie;for(ie.h=ne(ie,q),xe.push(ie);xe.size()>0;){var fe=xe.pop();if(fe===q)return B(fe);fe.closed=!0;for(var ee=X.neighbors(fe),de=0,pe=ee.length;de<pe;++de){var ce=ee[de];if(!ce.closed&&!ce.isWall()){var ae=fe.g+ce.getCost(fe),ye=ce.visited;(!ye||ae<ce.g)&&(ce.visited=!0,ce.parent=fe,ce.h=ce.h||ne(ce,q),ce.g=ae,ce.f=ce.g+ce.h,X.markDirty(ce),Ce&&(ce.h<ue.h||ce.h===ue.h&&ce.g<ue.g)&&(ue=ce),ye?xe.rescoreElement(ce):xe.push(ce))}}}return Ce?B(ue):[]},heuristics:{manhattan:function(X,ie){return Math.abs(ie.x-X.x)+Math.abs(ie.y-X.y)},diagonal:function(X,ie){var se=Math.sqrt(2),ne=Math.abs(ie.x-X.x),Ce=Math.abs(ie.y-X.y);return 1*(ne+Ce)+(se-2)*Math.min(ne,Ce)}},cleanNode:function(X){X.f=0,X.g=0,X.h=0,X.visited=!1,X.closed=!1,X.parent=null}};function j(X,ie){ie=ie||{},this.nodes=[],this.diagonal=!!ie.diagonal,this.grid=[];for(var q=0;q<X.length;q++){this.grid[q]=[];for(var se=0,ne=X[q];se<ne.length;se++){var Ce=new P(q,se,ne[se]);this.grid[q][se]=Ce,this.nodes.push(Ce)}}this.init()}function P(X,ie,q){this.x=X,this.y=ie,this.weight=q}function Q(X){this.content=[],this.scoreFunction=X}function $(X,ie,q){if(!m.isObject(q=q||{}))throw new Error("options is invalid");var se=q.resolution,ne=q.minDistance,Ce=q.obstacles||m.featureCollection([]);if(!X)throw new Error("start is required");if(!ie)throw new Error("end is required");if(se&&!m.isNumber(se)||se<=0)throw new Error("options.resolution must be a number, greater than 0");if(ne)throw new Error("options.minDistance is not yet implemented");var xe=v.getCoord(X),ue=v.getCoord(ie);switch(X=m.point(xe),ie=m.point(ue),v.getType(Ce)){case"FeatureCollection":if(0===Ce.features.length)return m.lineString([xe,ue]);break;case"Polygon":Ce=m.featureCollection([m.feature(v.getGeom(Ce))]);break;default:throw new Error("invalid obstacles")}var fe=Ce;fe.features.push(X),fe.features.push(ie);var ee=_.default(D.default(V.default(_.default(fe)),1.15));se||(se=M.default([ee[0],ee[1]],[ee[2],ee[1]],q)/100),fe.features.pop(),fe.features.pop();for(var pe=ee[0],ce=ee[1],ae=ee[2],ye=ee[3],_e=se/M.default([pe,ce],[ae,ce],q)*(ae-pe),Ue=se/M.default([pe,ce],[pe,ye],q)*(ye-ce),Ge=ae-pe,$e=ye-ce,He=Math.floor(Ge/_e),Pe=Math.floor($e/Ue),je=(Ge-He*_e)/2,Re=[],tt=[],it=[],qe=[],Oe=1/0,Te=1/0,Ne=ye-($e-Pe*Ue)/2,rt=0;Ne>=ce;){for(var xt=[],gt=[],on=pe+je,Qt=0;on<=ae;){var Gt=m.point([on,Ne]),Vn=oe(Gt,Ce);xt.push(Vn?0:1),gt.push(on+"|"+Ne);var un=M.default(Gt,X);!Vn&&un<Oe&&(Oe=un,it={x:Qt,y:rt});var an=M.default(Gt,ie);!Vn&&an<Te&&(Te=an,qe={x:Qt,y:rt}),on+=_e,Qt++}tt.push(xt),Re.push(gt),Ne-=Ue,rt++}var cn=new j(tt,{diagonal:!0}),qn=F.search(cn,cn.grid[it.y][it.x],cn.grid[qe.y][qe.x]),Pi=[xe];return qn.forEach(function(ci){var Ei=Re[ci.x][ci.y].split("|");Pi.push([+Ei[0],+Ei[1]])}),Pi.push(ue),R.default(m.lineString(Pi))}function oe(X,ie){for(var q=0;q<ie.features.length;q++)if(S.default(X,ie.features[q]))return!0;return!1}j.prototype.init=function(){this.dirtyNodes=[];for(var X=0;X<this.nodes.length;X++)F.cleanNode(this.nodes[X])},j.prototype.cleanDirty=function(){for(var X=0;X<this.dirtyNodes.length;X++)F.cleanNode(this.dirtyNodes[X]);this.dirtyNodes=[]},j.prototype.markDirty=function(X){this.dirtyNodes.push(X)},j.prototype.neighbors=function(X){var ie=[],q=X.x,se=X.y,ne=this.grid;return ne[q-1]&&ne[q-1][se]&&ie.push(ne[q-1][se]),ne[q+1]&&ne[q+1][se]&&ie.push(ne[q+1][se]),ne[q]&&ne[q][se-1]&&ie.push(ne[q][se-1]),ne[q]&&ne[q][se+1]&&ie.push(ne[q][se+1]),this.diagonal&&(ne[q-1]&&ne[q-1][se-1]&&ie.push(ne[q-1][se-1]),ne[q+1]&&ne[q+1][se-1]&&ie.push(ne[q+1][se-1]),ne[q-1]&&ne[q-1][se+1]&&ie.push(ne[q-1][se+1]),ne[q+1]&&ne[q+1][se+1]&&ie.push(ne[q+1][se+1])),ie},j.prototype.toString=function(){for(var q,se,ne,Ce,X=[],ie=this.grid,xe=0,ue=ie.length;xe<ue;xe++){for(q=[],ne=0,Ce=(se=ie[xe]).length;ne<Ce;ne++)q.push(se[ne].weight);X.push(q.join(" "))}return X.join("\n")},P.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},P.prototype.getCost=function(X){return X&&X.x!==this.x&&X.y!==this.y?1.41421*this.weight:this.weight},P.prototype.isWall=function(){return 0===this.weight},Q.prototype={push:function(X){this.content.push(X),this.sinkDown(this.content.length-1)},pop:function(){var X=this.content[0],ie=this.content.pop();return this.content.length>0&&(this.content[0]=ie,this.bubbleUp(0)),X},remove:function(X){var ie=this.content.indexOf(X),q=this.content.pop();ie!==this.content.length-1&&(this.content[ie]=q,this.scoreFunction(q)<this.scoreFunction(X)?this.sinkDown(ie):this.bubbleUp(ie))},size:function(){return this.content.length},rescoreElement:function(X){this.sinkDown(this.content.indexOf(X))},sinkDown:function(X){for(var ie=this.content[X];X>0;){var q=(X+1>>1)-1,se=this.content[q];if(!(this.scoreFunction(ie)<this.scoreFunction(se)))break;this.content[q]=ie,this.content[X]=se,X=q}},bubbleUp:function(X){for(var ie=this.content.length,q=this.content[X],se=this.scoreFunction(q);;){var ue,ne=X+1<<1,Ce=ne-1,xe=null;if(Ce<ie&&(ue=this.scoreFunction(this.content[Ce]))<se&&(xe=Ce),ne<ie&&this.scoreFunction(this.content[ne])<(null===xe?se:ue)&&(xe=ne),null===xe)break;this.content[X]=this.content[xe],this.content[xe]=q,X=xe}}},Ae.exports=$,Ae.exports.default=$},59335:(Ae,y,w)=>{"use strict";var k=w(65010),G=w(97408),I=w(58570),u=w(90621);function h(j){return j&&"object"==typeof j&&"default"in j?j:{default:j}}var g=h(k),v=h(G);function m(j,P){var Q=j.x-P.x,$=j.y-P.y;return Q*Q+$*$}function f(j,P,Q){var $=P.x,oe=P.y,X=Q.x-$,ie=Q.y-oe;if(0!==X||0!==ie){var q=((j.x-$)*X+(j.y-oe)*ie)/(X*X+ie*ie);q>1?($=Q.x,oe=Q.y):q>0&&($+=X*q,oe+=ie*q)}return(X=j.x-$)*X+(ie=j.y-oe)*ie}function S(j,P,Q,$,oe){for(var ie,X=$,q=P+1;q<Q;q++){var se=f(j[q],j[P],j[Q]);se>X&&(ie=q,X=se)}X>$&&(ie-P>1&&S(j,P,ie,$,oe),oe.push(j[ie]),Q-ie>1&&S(j,ie,Q,$,oe))}function M(j,P){var Q=j.length-1,$=[j[0]];return S(j,0,Q,P,$),$.push(j[Q]),$}function D(j,P,Q){if(j.length<=2)return j;var $=void 0!==P?P*P:1;return j=Q?j:function _(j,P){for(var oe,Q=j[0],$=[Q],X=1,ie=j.length;X<ie;X++)m(oe=j[X],Q)>P&&($.push(oe),Q=oe);return Q!==oe&&$.push(oe),$}(j,$),M(j,$)}function R(j,P){if(!u.isObject(P=P||{}))throw new Error("options is invalid");var Q=void 0!==P.tolerance?P.tolerance:1,$=P.highQuality||!1,oe=P.mutate||!1;if(!j)throw new Error("geojson is required");if(Q&&Q<0)throw new Error("invalid tolerance");return!0!==oe&&(j=v.default(j)),I.geomEach(j,function(X){!function V(j,P,Q){var $=j.type;if("Point"===$||"MultiPoint"===$)return j;g.default(j,!0);var oe=j.coordinates;switch($){case"LineString":j.coordinates=B(oe,P,Q);break;case"MultiLineString":j.coordinates=oe.map(function(X){return B(X,P,Q)});break;case"Polygon":j.coordinates=U(oe,P,Q);break;case"MultiPolygon":j.coordinates=oe.map(function(X){return U(X,P,Q)})}}(X,Q,$)}),j}function B(j,P,Q){return D(j.map(function($){return{x:$[0],y:$[1],z:$[2]}}),P,Q).map(function($){return $.z?[$.x,$.y,$.z]:[$.x,$.y]})}function U(j,P,Q){return j.map(function($){var oe=$.map(function(ie){return{x:ie[0],y:ie[1]}});if(oe.length<4)throw new Error("invalid polygon");for(var X=D(oe,P,Q).map(function(ie){return[ie.x,ie.y]});!F(X);)X=D(oe,P-=.01*P,Q).map(function(ie){return[ie.x,ie.y]});return(X[X.length-1][0]!==X[0][0]||X[X.length-1][1]!==X[0][1])&&X.push(X[0]),X})}function F(j){return!(j.length<3||3===j.length&&j[2][0]===j[0][0]&&j[2][1]===j[0][1])}Ae.exports=R,Ae.exports.default=R},90698:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(16443));y.default=function I(u,h,g){return void 0===g&&(g={}),G.default(u,h,h,g)}},77655:(Ae,y,w)=>{"use strict";function G(h){return h&&"object"==typeof h&&"default"in h?h:{default:h}}var I=G(w(36512));function u(h){var g=h[0],v=h[1],m=h[2],f=h[3];if(I.default(h.slice(0,2),[m,v])>=I.default(h.slice(0,2),[g,f])){var M=(v+f)/2;return[g,M-(m-g)/2,m,M+(m-g)/2]}var D=(g+m)/2;return[D-(f-v)/2,v,D+(f-v)/2,f]}Ae.exports=u,Ae.exports.default=u},84916:(Ae,y,w)=>{"use strict";var k=w(58570),G=w(45943),I=w(90621),u=w(81285),h=w(3923),g=w(17868);function v(D){return D&&"object"==typeof D&&"default"in D?D:{default:D}}var m=v(u),f=v(h),_=v(g);function S(D,R){if(!I.isObject(R=R||{}))throw new Error("options is invalid");var V=R.steps||64,B=R.weight,U=R.properties||{};if(!I.isNumber(V))throw new Error("steps must be a number");if(!I.isObject(U))throw new Error("properties must be a number");var F=k.coordAll(D).length,j=m.default(D,{weight:B}),P=0,Q=0,$=0;k.featureEach(D,function(ce){var ae=ce.properties[B]||1,ye=M(G.getCoords(ce),G.getCoords(j));P+=Math.pow(ye.x,2)*ae,Q+=Math.pow(ye.y,2)*ae,$+=ye.x*ye.y*ae});var oe=P-Q,X=Math.sqrt(Math.pow(oe,2)+4*Math.pow($,2)),q=Math.atan((oe+X)/(2*$)),se=180*q/Math.PI,ne=0,Ce=0,xe=0;k.featureEach(D,function(ce){var ae=ce.properties[B]||1,ye=M(G.getCoords(ce),G.getCoords(j));ne+=Math.pow(ye.x*Math.cos(q)-ye.y*Math.sin(q),2)*ae,Ce+=Math.pow(ye.x*Math.sin(q)+ye.y*Math.cos(q),2)*ae,xe+=ae});var ue=Math.sqrt(2*ne/xe),fe=Math.sqrt(2*Ce/xe),ee=_.default(j,ue,fe,{units:"degrees",angle:se,steps:V,properties:U}),de=f.default(D,I.featureCollection([ee])),pe={meanCenterCoordinates:G.getCoords(j),semiMajorAxis:ue,semiMinorAxis:fe,numberOfFeatures:F,angle:se,percentageWithinEllipse:100*k.coordAll(de).length/F};return ee.properties.standardDeviationalEllipse=pe,ee}function M(D,R){return{x:D[0]-R[0],y:D[1]-R[1]}}Ae.exports=S,Ae.exports.default=S},47061:(Ae,y,w)=>{"use strict";var k=w(40940),G=w(97408),I=w(58570);function u(m){return m&&"object"==typeof m&&"default"in m?m:{default:m}}var h=u(k),g=u(G);function v(m,f,_,S){return m=g.default(m),f=g.default(f),I.featureEach(m,function(M){M.properties||(M.properties={}),I.featureEach(f,function(D){void 0===M.properties[S]&&h.default(M,D)&&(M.properties[S]=D.properties[_])})}),m}Ae.exports=v,Ae.exports.default=v},56245:(Ae,y,w)=>{"use strict";var k=w(29145),G=w(90621);function I(m){return m&&"object"==typeof m&&"default"in m?m:{default:m}}var u=I(k);function h(m){if(!m.geometry||"Polygon"!==m.geometry.type&&"MultiPolygon"!==m.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var f={type:"FeatureCollection",features:[]};return"Polygon"===m.geometry.type?f.features=g(m.geometry.coordinates):m.geometry.coordinates.forEach(function(_){f.features=f.features.concat(g(_))}),f}function g(m){var f=function v(m){for(var f=m[0][0].length,_={vertices:[],holes:[],dimensions:f},S=0,M=0;M<m.length;M++){for(var D=0;D<m[M].length;D++)for(var R=0;R<f;R++)_.vertices.push(m[M][D][R]);M>0&&_.holes.push(S+=m[M-1].length)}return _}(m),S=u.default(f.vertices,f.holes,2),M=[],D=[];S.forEach(function(B,U){var F=S[U];D.push([f.vertices[2*F],f.vertices[2*F+1]])});for(var R=0;R<D.length;R+=3){var V=D.slice(R,R+3);V.push(D[R]),M.push(G.polygon([V]))}return M}Ae.exports=h,Ae.exports.default=h},45714:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(90621);y.default=function G(v,m){var f=!1;return k.featureCollection(function g(v){if(v.length<3)return[];v.sort(u);for(var R,V,B,m=v.length-1,f=v[m].x,_=v[0].x,S=v[m].y,M=S;m--;)v[m].y<S&&(S=v[m].y),v[m].y>M&&(M=v[m].y);var ne,P=_-f,Q=M-S,$=P>Q?P:Q,oe=.5*(_+f),X=.5*(M+S),ie=[new I({__sentinel:!0,x:oe-20*$,y:X-$},{__sentinel:!0,x:oe,y:X+20*$},{__sentinel:!0,x:oe+20*$,y:X-$})],q=[],se=[];for(m=v.length;m--;){for(se.length=0,ne=ie.length;ne--;)(P=v[m].x-ie[ne].x)>0&&P*P>ie[ne].r?(q.push(ie[ne]),ie.splice(ne,1)):!(P*P+(Q=v[m].y-ie[ne].y)*Q>ie[ne].r)&&(se.push(ie[ne].a,ie[ne].b,ie[ne].b,ie[ne].c,ie[ne].c,ie[ne].a),ie.splice(ne,1));for(h(se),ne=se.length;ne;)V=se[--ne],R=se[--ne],B=v[m],Math.abs(2*((V.x-R.x)*(B.y-V.y)-(V.y-R.y)*(B.x-V.x)))>1e-12&&ie.push(new I(R,V,B))}for(Array.prototype.push.apply(q,ie),m=q.length;m--;)(q[m].a.__sentinel||q[m].b.__sentinel||q[m].c.__sentinel)&&q.splice(m,1);return q}(v.features.map(function(_){var S={x:_.geometry.coordinates[0],y:_.geometry.coordinates[1]};return m?S.z=_.properties[m]:3===_.geometry.coordinates.length&&(f=!0,S.z=_.geometry.coordinates[2]),S})).map(function(_){var S=[_.a.x,_.a.y],M=[_.b.x,_.b.y],D=[_.c.x,_.c.y],R={};return f?(S.push(_.a.z),M.push(_.b.z),D.push(_.c.z)):R={a:_.a.z,b:_.b.z,c:_.c.z},k.polygon([[S,M,D,S]],R)}))};var I=function v(m,f,_){this.a=m,this.b=f,this.c=_;var F,j,S=f.x-m.x,M=f.y-m.y,D=_.x-m.x,R=_.y-m.y,V=S*(m.x+f.x)+M*(m.y+f.y),B=D*(m.x+_.x)+R*(m.y+_.y),U=2*(S*(_.y-f.y)-M*(_.x-f.x));this.x=(R*V-M*B)/U,this.y=(S*B-D*V)/U,this.r=(F=this.x-m.x)*F+(j=this.y-m.y)*j};function u(v,m){return m.x-v.x}function h(v){var f,_,S,M,D,m=v.length;e:for(;m;)for(_=v[--m],f=v[--m],S=m;S;)if(D=v[--S],M=v[--S],f===M&&_===D||f===D&&_===M){v.splice(m,2),v.splice(S,2),m-=2;continue e}}},32118:(Ae,y,w)=>{"use strict";var k=w(19673),G=w(77459),I=w(30),u=w(3993),h=w(97408),g=w(58570),v=w(45943),m=w(90621);function f(B){return B&&"object"==typeof B&&"default"in B?B:{default:B}}var _=f(k),S=f(G),M=f(I),D=f(u),R=f(h);function V(B,U,F){if(!m.isObject(F=F||{}))throw new Error("options is invalid");var j=F.pivot,P=F.mutate;if(!B)throw new Error("geojson is required");if(null==U||isNaN(U))throw new Error("angle is required");return 0===U||(j||(j=_.default(B)),(!1===P||void 0===P)&&(B=R.default(B)),g.coordEach(B,function(Q){var oe=S.default(j,Q)+U,X=M.default(j,Q),ie=v.getCoords(D.default(j,X,oe));Q[0]=ie[0],Q[1]=ie[1]})),B}Ae.exports=V,Ae.exports.default=V},46154:(Ae,y,w)=>{"use strict";var k=w(97408),G=w(49360),I=w(19673),u=w(11568),h=w(77459),g=w(30),v=w(3993),m=w(58570),f=w(90621),_=w(45943);function S($){return $&&"object"==typeof $&&"default"in $?$:{default:$}}var M=S(k),D=S(G),R=S(I),V=S(u),B=S(h),U=S(g),F=S(v);function j($,oe,X){if(!f.isObject(X=X||{}))throw new Error("options is invalid");var ie=X.origin,q=X.mutate;if(!$)throw new Error("geojson required");if("number"!=typeof oe||0===oe)throw new Error("invalid factor");var se=Array.isArray(ie)||"object"==typeof ie;return!0!==q&&($=M.default($)),"FeatureCollection"!==$.type||se?P($,oe,ie):(m.featureEach($,function(ne,Ce){$.features[Ce]=P(ne,oe,ie)}),$)}function P($,oe,X){var ie="Point"===_.getType($);return X=function Q($,oe){if(null==oe&&(oe="centroid"),Array.isArray(oe)||"object"==typeof oe)return _.getCoord(oe);var X=$.bbox?$.bbox:V.default($),ie=X[0],q=X[1],se=X[2],ne=X[3];switch(oe){case"sw":case"southwest":case"westsouth":case"bottomleft":return f.point([ie,q]);case"se":case"southeast":case"eastsouth":case"bottomright":return f.point([se,q]);case"nw":case"northwest":case"westnorth":case"topleft":return f.point([ie,ne]);case"ne":case"northeast":case"eastnorth":case"topright":return f.point([se,ne]);case"center":return D.default($);case void 0:case null:case"centroid":return R.default($);default:throw new Error("invalid origin")}}($,X),1===oe||ie||m.coordEach($,function(q){var se=U.default(X,q),ne=B.default(X,q),xe=_.getCoords(F.default(X,se*oe,ne));q[0]=xe[0],q[1]=xe[1],3===q.length&&(q[2]*=oe)}),$}Ae.exports=j,Ae.exports.default=j},90125:(Ae,y,w)=>{"use strict";var k=w(58570),G=w(90621),I=w(45943),u=w(97408),h=w(3993);function g(_){return _&&"object"==typeof _&&"default"in _?_:{default:_}}var v=g(u),m=g(h);function f(_,S,M,D){if(!G.isObject(D=D||{}))throw new Error("options is invalid");var R=D.units,V=D.zTranslation,B=D.mutate;if(!_)throw new Error("geojson is required");if(null==S||isNaN(S))throw new Error("distance is required");if(V&&"number"!=typeof V&&isNaN(V))throw new Error("zTranslation is not a number");if(V=void 0!==V?V:0,0===S&&0===V)return _;if(null==M||isNaN(M))throw new Error("direction is required");return S<0&&(S=-S,M+=180),(!1===B||void 0===B)&&(_=v.default(_)),k.coordEach(_,function(U){var F=I.getCoords(m.default(U,S,M,{units:R}));U[0]=F[0],U[1]=F[1],V&&3===U.length&&(U[2]+=V)}),_}Ae.exports=f,Ae.exports.default=f},87468:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(36512)),I=k(w(6977)),u=w(90621);y.default=function h(g,v,m){void 0===m&&(m={});for(var f=[],S=v/G.default([g[0],g[1]],[g[2],g[1]],m)*(g[2]-g[0]),D=v/G.default([g[0],g[1]],[g[0],g[3]],m)*(g[3]-g[1]),R=0,V=g[0];V<=g[2];){for(var B=0,U=g[1];U<=g[3];){var F=null,j=null;R%2==0&&B%2==0?(F=u.polygon([[[V,U],[V,U+D],[V+S,U],[V,U]]],m.properties),j=u.polygon([[[V,U+D],[V+S,U+D],[V+S,U],[V,U+D]]],m.properties)):R%2==0&&B%2==1?(F=u.polygon([[[V,U],[V+S,U+D],[V+S,U],[V,U]]],m.properties),j=u.polygon([[[V,U],[V,U+D],[V+S,U+D],[V,U]]],m.properties)):B%2==0&&R%2==1?(F=u.polygon([[[V,U],[V,U+D],[V+S,U+D],[V,U]]],m.properties),j=u.polygon([[[V,U],[V+S,U+D],[V+S,U],[V,U]]],m.properties)):B%2==1&&R%2==1&&(F=u.polygon([[[V,U],[V,U+D],[V+S,U],[V,U]]],m.properties),j=u.polygon([[[V,U+D],[V+S,U+D],[V+S,U],[V,U+D]]],m.properties)),m.mask?(I.default(m.mask,F)&&f.push(F),I.default(m.mask,j)&&f.push(j)):(f.push(F),f.push(j)),U+=D,B++}R++,V+=S}return u.featureCollection(f)}},74070:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(58570);y.default=function G(u,h){void 0===h&&(h={});var g=h.precision,v=h.coordinates,m=h.mutate;if(g=null==g||isNaN(g)?6:g,v=null==v||isNaN(v)?3:v,!u)throw new Error("<geojson> is required");if("number"!=typeof g)throw new Error("<precision> must be a number");if("number"!=typeof v)throw new Error("<coordinates> must be a number");(!1===m||void 0===m)&&(u=JSON.parse(JSON.stringify(u)));var f=Math.pow(10,g);return k.coordEach(u,function(_){!function I(u,h,g){u.length>g&&u.splice(g,u.length);for(var v=0;v<u.length;v++)u[v]=Math.round(u[v]*h)/h}(_,f,v)}),u}},65627:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(8875),G=w(98649),I=w(3923),u=w(99021),h=w(81022),g=w(1045),v=w(59335),m=w(69205),f=w(47061),_=w(11075),S=w(41522),M=w(77655),D=w(92631),R=w(55166),V=w(49360),B=w(63929),U=w(19673),F=w(36324),j=w(36512),P=w(41044),Q=w(11568),$=w(56245),oe=w(298),X=w(40940),ie=w(17863),q=w(8217),se=w(94301),ne=w(87378),Ce=w(45714),xe=w(2952),ue=w(73026),fe=w(13127),ee=w(95688),de=w(45441),pe=w(48801),ce=w(35677),ae=w(96589),ye=w(77612),Me=w(2702),_e=w(74070),Fe=w(14313),Ue=w(51730),Ge=w(44536),$e=w(96659),He=w(26780),Pe=w(91306),je=w(96582),ht=w(17525),Re=w(26766),tt=w(32237),it=w(65361),qe=w(71512),Oe=w(88886),Te=w(77459),Ne=w(30),rt=w(3993),xt=w(41837),gt=w(93308),on=w(8525),Qt=w(32118),Gt=w(46154),Vn=w(90125),un=w(9088),an=w(35101),cn=w(97599),_i=w(24177),vi=w(11637),qn=w(13673),Pi=w(44314),ci=w(63106),Ei=w(80187),Mi=w(67680),Zi=w(46437),ji=w(97408),$i=w(65010),so=w(91912),Zn=w(43034),zt=w(42059),Je=w(10279),nt=w(13453),Se=w(29905),Qe=w(17868),ot=w(81285),dt=w(36188),Pt=w(84916),At=w(90201),Wt=w(47352),Yt=w(26396),Bt=w(41802),$t=w(3924),vn=w(70903),Cn=w(23563),xn=w(90621),jn=w(45943),jt=w(58570),Dn=w(29362),Ke=w(44032),si=w(2615),xr=w(6977),Zr=w(2843),Li=w(9698),or=w(75498),Ri=w(90698),to=w(87468),Vi=w(22396);function Wn(Tr){return Tr&&"object"==typeof Tr&&"default"in Tr?Tr:{default:Tr}}function Ii(Tr){if(Tr&&Tr.__esModule)return Tr;var In=Object.create(null);return Tr&&Object.keys(Tr).forEach(function(kr){if("default"!==kr){var Lr=Object.getOwnPropertyDescriptor(Tr,kr);Object.defineProperty(In,kr,Lr.get?Lr:{enumerable:!0,get:function(){return Tr[kr]}})}}),In.default=Tr,Object.freeze(In)}var co=Wn(k),ro=Wn(G),Po=Wn(I),Mr=Wn(u),ba=Wn(h),at=Wn(g),wt=Wn(v),On=Wn(m),Nn=Wn(f),Rn=Wn(_),Yn=Wn(S),Dt=Wn(M),Kn=Wn(D),Ot=Wn(R),ft=Wn(V),St=Wn(B),Kt=Wn(U),Ut=Wn(F),rn=Wn(j),P1=Wn(P),Gi=Wn(Q),La=Wn($),Di=Wn(oe),Ui=Wn(X),nr=Wn(ie),Be=Wn(q),_t=Wn(se),Lt=Wn(ne),nn=Wn(Ce),Pn=Wn(xe),en=Wn(ue),ri=Wn(fe),cr=Wn(ee),yr=Wn(de),xa=Wn(pe),Sa=Wn(ce),wa=Wn(ae),Xs=Wn(ye),Qa=Wn(Me),Vr=Wn(_e),l1=Wn(Fe),Aa=Wn(Ue),xs=Wn(Ge),Ba=Wn($e),lo=Wn(He),aa=Wn(Pe),Ja=Wn(je),Da=Wn(ht),Dr=Wn(Re),Zs=Wn(tt),B1=Wn(it),Io=Wn(qe),u1=Wn(Oe),Os=Wn(Te),Yr=Wn(Ne),To=Wn(rt),Sn=Wn(xt),Fc=Wn(gt),li=Wn(on),Sc=Wn(Qt),Vc=Wn(Gt),Oa=Wn(Vn),ps=Wn(un),sa=Wn(an),es=Wn(cn),Mo=Wn(_i),d1=Wn(vi),Xr=Wn(qn),zi=Wn(Pi),Hr=Wn(ci),ks=Wn(Ei),ja=Wn(Mi),ts=Wn(Zi),$s=Wn(ji),Ns=Wn($i),j1=Wn(so),Br=Wn(Zn),jr=Wn(zt),I1=Wn(Je),Lo=Wn(nt),T1=Wn(Se),ns=Wn(Qe),Ec=Wn(ot),Or=Wn(dt),U1=Wn(Pt),vr=Wn(At),Ac=Wn(Wt),hr=Wn(Yt),za=Wn(Bt),Do=Ii($t),$r=Ii(vn),Ir=Ii(Cn),Ua=Ii(xn),G1=Ii(jn),Rs=Ii(jt),is=Wn(Dn),Ga=Wn(Ke),Hc=Wn(si),Bc=Wn(xr),ar=Wn(Zr),Pa=Wn(Li),rs=Wn(or),ca=Wn(Ri),wi=Wn(to),L1=Wn(Vi);Object.keys($t).forEach(function(Tr){"default"!==Tr&&Object.defineProperty(y,Tr,{enumerable:!0,get:function(){return $t[Tr]}})}),Object.keys(vn).forEach(function(Tr){"default"!==Tr&&Object.defineProperty(y,Tr,{enumerable:!0,get:function(){return vn[Tr]}})}),Object.keys(Cn).forEach(function(Tr){"default"!==Tr&&Object.defineProperty(y,Tr,{enumerable:!0,get:function(){return Cn[Tr]}})}),Object.keys(xn).forEach(function(Tr){"default"!==Tr&&Object.defineProperty(y,Tr,{enumerable:!0,get:function(){return xn[Tr]}})}),Object.keys(jn).forEach(function(Tr){"default"!==Tr&&Object.defineProperty(y,Tr,{enumerable:!0,get:function(){return jn[Tr]}})}),Object.keys(jt).forEach(function(Tr){"default"!==Tr&&Object.defineProperty(y,Tr,{enumerable:!0,get:function(){return jt[Tr]}})}),Object.defineProperty(y,"isolines",{enumerable:!0,get:function(){return co.default}}),Object.defineProperty(y,"convex",{enumerable:!0,get:function(){return ro.default}}),Object.defineProperty(y,"pointsWithinPolygon",{enumerable:!0,get:function(){return Po.default}}),Object.defineProperty(y,"within",{enumerable:!0,get:function(){return Po.default}}),Object.defineProperty(y,"concave",{enumerable:!0,get:function(){return Mr.default}}),Object.defineProperty(y,"collect",{enumerable:!0,get:function(){return ba.default}}),Object.defineProperty(y,"flip",{enumerable:!0,get:function(){return at.default}}),Object.defineProperty(y,"simplify",{enumerable:!0,get:function(){return wt.default}}),Object.defineProperty(y,"bezier",{enumerable:!0,get:function(){return On.default}}),Object.defineProperty(y,"bezierSpline",{enumerable:!0,get:function(){return On.default}}),Object.defineProperty(y,"tag",{enumerable:!0,get:function(){return Nn.default}}),Object.defineProperty(y,"sample",{enumerable:!0,get:function(){return Rn.default}}),Object.defineProperty(y,"envelope",{enumerable:!0,get:function(){return Yn.default}}),Object.defineProperty(y,"square",{enumerable:!0,get:function(){return Dt.default}}),Object.defineProperty(y,"circle",{enumerable:!0,get:function(){return Kn.default}}),Object.defineProperty(y,"midpoint",{enumerable:!0,get:function(){return Ot.default}}),Object.defineProperty(y,"center",{enumerable:!0,get:function(){return ft.default}}),Object.defineProperty(y,"centerOfMass",{enumerable:!0,get:function(){return St.default}}),Object.defineProperty(y,"centroid",{enumerable:!0,get:function(){return Kt.default}}),Object.defineProperty(y,"combine",{enumerable:!0,get:function(){return Ut.default}}),Object.defineProperty(y,"distance",{enumerable:!0,get:function(){return rn.default}}),Object.defineProperty(y,"explode",{enumerable:!0,get:function(){return P1.default}}),Object.defineProperty(y,"bbox",{enumerable:!0,get:function(){return Gi.default}}),Object.defineProperty(y,"tesselate",{enumerable:!0,get:function(){return La.default}}),Object.defineProperty(y,"bboxPolygon",{enumerable:!0,get:function(){return Di.default}}),Object.defineProperty(y,"booleanPointInPolygon",{enumerable:!0,get:function(){return Ui.default}}),Object.defineProperty(y,"inside",{enumerable:!0,get:function(){return Ui.default}}),Object.defineProperty(y,"nearest",{enumerable:!0,get:function(){return nr.default}}),Object.defineProperty(y,"nearestPoint",{enumerable:!0,get:function(){return nr.default}}),Object.defineProperty(y,"nearestPointOnLine",{enumerable:!0,get:function(){return Be.default}}),Object.defineProperty(y,"pointOnLine",{enumerable:!0,get:function(){return Be.default}}),Object.defineProperty(y,"nearestPointToLine",{enumerable:!0,get:function(){return _t.default}}),Object.defineProperty(y,"planepoint",{enumerable:!0,get:function(){return Lt.default}}),Object.defineProperty(y,"tin",{enumerable:!0,get:function(){return nn.default}}),Object.defineProperty(y,"bearing",{enumerable:!0,get:function(){return Pn.default}}),Object.defineProperty(y,"destination",{enumerable:!0,get:function(){return en.default}}),Object.defineProperty(y,"kinks",{enumerable:!0,get:function(){return ri.default}}),Object.defineProperty(y,"pointOnFeature",{enumerable:!0,get:function(){return cr.default}}),Object.defineProperty(y,"pointOnSurface",{enumerable:!0,get:function(){return cr.default}}),Object.defineProperty(y,"area",{enumerable:!0,get:function(){return yr.default}}),Object.defineProperty(y,"along",{enumerable:!0,get:function(){return xa.default}}),Object.defineProperty(y,"length",{enumerable:!0,get:function(){return Sa.default}}),Object.defineProperty(y,"lineDistance",{enumerable:!0,get:function(){return Sa.default}}),Object.defineProperty(y,"lineSlice",{enumerable:!0,get:function(){return wa.default}}),Object.defineProperty(y,"lineSliceAlong",{enumerable:!0,get:function(){return Xs.default}}),Object.defineProperty(y,"pointGrid",{enumerable:!0,get:function(){return Qa.default}}),Object.defineProperty(y,"truncate",{enumerable:!0,get:function(){return Vr.default}}),Object.defineProperty(y,"flatten",{enumerable:!0,get:function(){return l1.default}}),Object.defineProperty(y,"lineIntersect",{enumerable:!0,get:function(){return Aa.default}}),Object.defineProperty(y,"lineChunk",{enumerable:!0,get:function(){return xs.default}}),Object.defineProperty(y,"unkinkPolygon",{enumerable:!0,get:function(){return Ba.default}}),Object.defineProperty(y,"greatCircle",{enumerable:!0,get:function(){return lo.default}}),Object.defineProperty(y,"lineSegment",{enumerable:!0,get:function(){return aa.default}}),Object.defineProperty(y,"lineSplit",{enumerable:!0,get:function(){return Ja.default}}),Object.defineProperty(y,"lineArc",{enumerable:!0,get:function(){return Da.default}}),Object.defineProperty(y,"polygonToLine",{enumerable:!0,get:function(){return Dr.default}}),Object.defineProperty(y,"polygonToLineString",{enumerable:!0,get:function(){return Dr.default}}),Object.defineProperty(y,"lineStringToPolygon",{enumerable:!0,get:function(){return Zs.default}}),Object.defineProperty(y,"lineToPolygon",{enumerable:!0,get:function(){return Zs.default}}),Object.defineProperty(y,"bboxClip",{enumerable:!0,get:function(){return B1.default}}),Object.defineProperty(y,"lineOverlap",{enumerable:!0,get:function(){return Io.default}}),Object.defineProperty(y,"sector",{enumerable:!0,get:function(){return u1.default}}),Object.defineProperty(y,"rhumbBearing",{enumerable:!0,get:function(){return Os.default}}),Object.defineProperty(y,"rhumbDistance",{enumerable:!0,get:function(){return Yr.default}}),Object.defineProperty(y,"rhumbDestination",{enumerable:!0,get:function(){return To.default}}),Object.defineProperty(y,"polygonTangents",{enumerable:!0,get:function(){return Sn.default}}),Object.defineProperty(y,"rewind",{enumerable:!0,get:function(){return Fc.default}}),Object.defineProperty(y,"isobands",{enumerable:!0,get:function(){return li.default}}),Object.defineProperty(y,"transformRotate",{enumerable:!0,get:function(){return Sc.default}}),Object.defineProperty(y,"transformScale",{enumerable:!0,get:function(){return Vc.default}}),Object.defineProperty(y,"transformTranslate",{enumerable:!0,get:function(){return Oa.default}}),Object.defineProperty(y,"lineOffset",{enumerable:!0,get:function(){return ps.default}}),Object.defineProperty(y,"polygonize",{enumerable:!0,get:function(){return sa.default}}),Object.defineProperty(y,"booleanDisjoint",{enumerable:!0,get:function(){return es.default}}),Object.defineProperty(y,"booleanContains",{enumerable:!0,get:function(){return Mo.default}}),Object.defineProperty(y,"booleanCrosses",{enumerable:!0,get:function(){return d1.default}}),Object.defineProperty(y,"booleanClockwise",{enumerable:!0,get:function(){return Xr.default}}),Object.defineProperty(y,"booleanOverlap",{enumerable:!0,get:function(){return zi.default}}),Object.defineProperty(y,"booleanPointOnLine",{enumerable:!0,get:function(){return Hr.default}}),Object.defineProperty(y,"booleanEqual",{enumerable:!0,get:function(){return ks.default}}),Object.defineProperty(y,"booleanWithin",{enumerable:!0,get:function(){return ja.default}}),Object.defineProperty(y,"booleanIntersects",{enumerable:!0,get:function(){return ts.default}}),Object.defineProperty(y,"clone",{enumerable:!0,get:function(){return $s.default}}),Object.defineProperty(y,"cleanCoords",{enumerable:!0,get:function(){return Ns.default}}),Object.defineProperty(y,"clustersDbscan",{enumerable:!0,get:function(){return j1.default}}),Object.defineProperty(y,"clustersKmeans",{enumerable:!0,get:function(){return Br.default}}),Object.defineProperty(y,"pointToLineDistance",{enumerable:!0,get:function(){return jr.default}}),Object.defineProperty(y,"booleanParallel",{enumerable:!0,get:function(){return I1.default}}),Object.defineProperty(y,"shortestPath",{enumerable:!0,get:function(){return Lo.default}}),Object.defineProperty(y,"voronoi",{enumerable:!0,get:function(){return T1.default}}),Object.defineProperty(y,"ellipse",{enumerable:!0,get:function(){return ns.default}}),Object.defineProperty(y,"centerMean",{enumerable:!0,get:function(){return Ec.default}}),Object.defineProperty(y,"centerMedian",{enumerable:!0,get:function(){return Or.default}}),Object.defineProperty(y,"standardDeviationalEllipse",{enumerable:!0,get:function(){return U1.default}}),Object.defineProperty(y,"angle",{enumerable:!0,get:function(){return vr.default}}),Object.defineProperty(y,"polygonSmooth",{enumerable:!0,get:function(){return Ac.default}}),Object.defineProperty(y,"moranIndex",{enumerable:!0,get:function(){return hr.default}}),Object.defineProperty(y,"distanceWeight",{enumerable:!0,get:function(){return za.default}}),y.projection=Do,y.random=$r,y.clusters=Ir,Object.defineProperty(y,"bearingToAngle",{enumerable:!0,get:function(){return xn.bearingToAzimuth}}),Object.defineProperty(y,"convertDistance",{enumerable:!0,get:function(){return xn.convertLength}}),Object.defineProperty(y,"degrees2radians",{enumerable:!0,get:function(){return xn.degreesToRadians}}),Object.defineProperty(y,"distanceToDegrees",{enumerable:!0,get:function(){return xn.lengthToDegrees}}),Object.defineProperty(y,"distanceToRadians",{enumerable:!0,get:function(){return xn.lengthToRadians}}),y.helpers=Ua,Object.defineProperty(y,"radians2degrees",{enumerable:!0,get:function(){return xn.radiansToDegrees}}),Object.defineProperty(y,"radiansToDistance",{enumerable:!0,get:function(){return xn.radiansToLength}}),y.invariant=G1,y.meta=Rs,Object.defineProperty(y,"difference",{enumerable:!0,get:function(){return is.default}}),Object.defineProperty(y,"buffer",{enumerable:!0,get:function(){return Ga.default}}),Object.defineProperty(y,"union",{enumerable:!0,get:function(){return Hc.default}}),Object.defineProperty(y,"intersect",{enumerable:!0,get:function(){return Bc.default}}),Object.defineProperty(y,"dissolve",{enumerable:!0,get:function(){return ar.default}}),Object.defineProperty(y,"hexGrid",{enumerable:!0,get:function(){return Pa.default}}),Object.defineProperty(y,"mask",{enumerable:!0,get:function(){return rs.default}}),Object.defineProperty(y,"squareGrid",{enumerable:!0,get:function(){return ca.default}}),Object.defineProperty(y,"triangleGrid",{enumerable:!0,get:function(){return wi.default}}),Object.defineProperty(y,"interpolate",{enumerable:!0,get:function(){return L1.default}})},2615:function(Ae,y,w){"use strict";var k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(y,"__esModule",{value:!0});var G=k(w(98464)),I=w(45943),u=w(90621);y.default=function h(g,v,m){void 0===m&&(m={});var f=I.getGeom(g),_=I.getGeom(v),S=G.default.union(f.coordinates,_.coordinates);return 0===S.length?null:1===S.length?u.polygon(S[0],m.properties):u.multiPolygon(S,m.properties)}},96659:(Ae,y,w)=>{"use strict";var k=w(58570),G=w(90621),I=w(7861),u=w(45441),h=w(40940);function g($){return $&&"object"==typeof $&&"default"in $?$:{default:$}}var v=g(I),m=g(u),f=g(h);function M($,oe){if(!$||!oe||$.length!==oe.length)return!1;for(var X=0,ie=$.length;X<ie;X++)if($[X]instanceof Array&&oe[X]instanceof Array){if(!M($[X],oe[X]))return!1}else if($[X]!==oe[X])return!1;return!0}function D($){if("Feature"!=$.type)throw new Error("The input must a geojson object of type Feature");if(void 0===$.geometry||null==$.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=$.geometry.type)throw new Error("The input must be a geojson Polygon");for(var oe=$.geometry.coordinates.length,X=[],_e=0;_e<oe;_e++){var ie=$.geometry.coordinates[_e];F(ie[0],ie[ie.length-1])||ie.push(ie[0]),X.push.apply(X,ie.slice(0,ie.length-1))}if(!function P($){for(var oe={},X=1,ie=0,q=$.length;ie<q;++ie){if(Object.prototype.hasOwnProperty.call(oe,$[ie])){X=0;break}oe[$[ie]]=1}return X}(X))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var q=X.length,se=function _($,oe,X){if("Polygon"!==$.geometry.type)throw new Error("The input feature must be a Polygon");void 0===X&&(X=1);var ie=$.geometry.coordinates,q=[],se={};if(X){for(var ne=[],Ce=0;Ce<ie.length;Ce++)for(var xe=0;xe<ie[Ce].length-1;xe++)ne.push(ye(Ce,xe));var ue=v.default();ue.load(ne)}for(var fe=0;fe<ie.length;fe++)for(var ee=0;ee<ie[fe].length-1;ee++)if(X)ue.search(ye(fe,ee)).forEach(function(Me){ae(fe,ee,Me.ring,Me.edge)});else for(var pe=0;pe<ie.length;pe++)for(var ce=0;ce<ie[pe].length-1;ce++)ae(fe,ee,pe,ce);return oe||(q={type:"Feature",geometry:{type:"MultiPoint",coordinates:q}}),q;function ae(Me,_e,Fe,Ue){var ht,Re,Ge=ie[Me][_e],$e=ie[Me][_e+1],He=ie[Fe][Ue],Pe=ie[Fe][Ue+1],je=function S($,oe,X,ie){if(M($,X)||M($,ie)||M(oe,X)||M(ie,X))return null;var q=$[0],se=$[1],ne=oe[0],Ce=oe[1],xe=X[0],ue=X[1],fe=ie[0],ee=ie[1],de=(q-ne)*(ue-ee)-(se-Ce)*(xe-fe);return 0===de?null:[((q*Ce-se*ne)*(xe-fe)-(q-ne)*(xe*ee-ue*fe))/de,((q*Ce-se*ne)*(ue-ee)-(se-Ce)*(xe*ee-ue*fe))/de]}(Ge,$e,He,Pe);if(null!==je&&(Re=Pe[0]!==He[0]?(je[0]-He[0])/(Pe[0]-He[0]):(je[1]-He[1])/(Pe[1]-He[1]),!((ht=$e[0]!==Ge[0]?(je[0]-Ge[0])/($e[0]-Ge[0]):(je[1]-Ge[1])/($e[1]-Ge[1]))>=1||ht<=0||Re>=1||Re<=0))){var it=!se[je];it&&(se[je]=!0),q.push(oe?oe(je,Me,_e,Ge,$e,ht,Fe,Ue,He,Pe,Re,it):je)}}function ye(Me,_e){var Ge,$e,He,Pe,Fe=ie[Me][_e],Ue=ie[Me][_e+1];return Fe[0]<Ue[0]?(Ge=Fe[0],$e=Ue[0]):(Ge=Ue[0],$e=Fe[0]),Fe[1]<Ue[1]?(He=Fe[1],Pe=Ue[1]):(He=Ue[1],Pe=Fe[1]),{minX:Ge,minY:He,maxX:$e,maxY:Pe,ring:Me,edge:_e}}}($,function(Vn,un,an,cn,_i,vi,qn,Pi,ci,Ei,Mi,Zi){return[Vn,un,an,cn,_i,vi,qn,Pi,ci,Ei,Mi,Zi]}),ne=se.length;if(0==ne){var He=[];for(_e=0;_e<oe;_e++)He.push(G.polygon([$.geometry.coordinates[_e]],{parent:-1,winding:U($.geometry.coordinates[_e])}));var xt=G.featureCollection(He);return gt(),on(),xt}var Ce=[],xe=[];for(_e=0;_e<oe;_e++){Ce.push([]);for(var ue=0;ue<$.geometry.coordinates[_e].length-1;ue++)Ce[_e].push([new R($.geometry.coordinates[_e][j(ue+1,$.geometry.coordinates[_e].length-1)],1,[_e,ue],[_e,j(ue+1,$.geometry.coordinates[_e].length-1)],void 0)]),xe.push(new V($.geometry.coordinates[_e][ue],[_e,j(ue-1,$.geometry.coordinates[_e].length-1)],[_e,ue],void 0,void 0,!1,!0))}for(_e=0;_e<ne;_e++)Ce[se[_e][1]][se[_e][2]].push(new R(se[_e][0],se[_e][5],[se[_e][1],se[_e][2]],[se[_e][6],se[_e][7]],void 0)),se[_e][11]&&xe.push(new V(se[_e][0],[se[_e][1],se[_e][2]],[se[_e][6],se[_e][7]],void 0,void 0,!0,!0));var fe=xe.length;for(_e=0;_e<Ce.length;_e++)for(ue=0;ue<Ce[_e].length;ue++)Ce[_e][ue].sort(function(un,an){return un.param<an.param?-1:1});var ee=[];for(_e=0;_e<fe;_e++)ee.push({minX:xe[_e].coord[0],minY:xe[_e].coord[1],maxX:xe[_e].coord[0],maxY:xe[_e].coord[1],index:_e});var de=v.default();for(de.load(ee),_e=0;_e<Ce.length;_e++)for(ue=0;ue<Ce[_e].length;ue++)for(var pe=0;pe<Ce[_e][ue].length;pe++){ce=pe==Ce[_e][ue].length-1?Ce[_e][j(ue+1,$.geometry.coordinates[_e].length-1)][0].coord:Ce[_e][ue][pe+1].coord;var ae=de.search({minX:ce[0],minY:ce[1],maxX:ce[0],maxY:ce[1]})[0];Ce[_e][ue][pe].nxtIsectAlongEdgeIn=ae.index}for(_e=0;_e<Ce.length;_e++)for(ue=0;ue<Ce[_e].length;ue++)for(pe=0;pe<Ce[_e][ue].length;pe++){var ce,ye=(ae=de.search({minX:(ce=Ce[_e][ue][pe].coord)[0],minY:ce[1],maxX:ce[0],maxY:ce[1]})[0]).index;ye<q?xe[ye].nxtIsectAlongRingAndEdge2=Ce[_e][ue][pe].nxtIsectAlongEdgeIn:F(xe[ye].ringAndEdge1,Ce[_e][ue][pe].ringAndEdgeIn)?xe[ye].nxtIsectAlongRingAndEdge1=Ce[_e][ue][pe].nxtIsectAlongEdgeIn:xe[ye].nxtIsectAlongRingAndEdge2=Ce[_e][ue][pe].nxtIsectAlongEdgeIn}var Me=[];for(_e=0,ue=0;ue<oe;ue++){var Fe=_e;for(pe=0;pe<$.geometry.coordinates[ue].length-1;pe++)xe[_e].coord[0]<xe[Fe].coord[0]&&(Fe=_e),_e++;var Ue=xe[Fe].nxtIsectAlongRingAndEdge2;for(pe=0;pe<xe.length;pe++)if(xe[pe].nxtIsectAlongRingAndEdge1==Fe||xe[pe].nxtIsectAlongRingAndEdge2==Fe){var Ge=pe;break}var $e=B([xe[Ge].coord,xe[Fe].coord,xe[Ue].coord],!0)?1:-1;Me.push({isect:Fe,parent:-1,winding:$e})}for(Me.sort(function(Gt,Vn){return xe[Gt.isect].coord>xe[Vn.isect].coord?-1:1}),He=[];Me.length>0;){var Pe=Me.pop(),je=Pe.isect,ht=Pe.parent,Re=Pe.winding,tt=He.length,it=[xe[je].coord],qe=je;if(xe[je].ringAndEdge1Walkable)var Oe=xe[je].ringAndEdge1,Te=xe[je].nxtIsectAlongRingAndEdge1;else Oe=xe[je].ringAndEdge2,Te=xe[je].nxtIsectAlongRingAndEdge2;for(;!F(xe[je].coord,xe[Te].coord);){it.push(xe[Te].coord);var Ne=void 0;for(_e=0;_e<Me.length;_e++)if(Me[_e].isect==Te){Ne=_e;break}if(null!=Ne&&Me.splice(Ne,1),F(Oe,xe[Te].ringAndEdge1)){if(Oe=xe[Te].ringAndEdge2,xe[Te].ringAndEdge2Walkable=!1,xe[Te].ringAndEdge1Walkable){var rt={isect:Te};B([xe[qe].coord,xe[Te].coord,xe[xe[Te].nxtIsectAlongRingAndEdge2].coord],1==Re)?(rt.parent=ht,rt.winding=-Re):(rt.parent=tt,rt.winding=Re),Me.push(rt)}qe=Te,Te=xe[Te].nxtIsectAlongRingAndEdge2}else Oe=xe[Te].ringAndEdge1,xe[Te].ringAndEdge1Walkable=!1,xe[Te].ringAndEdge2Walkable&&(rt={isect:Te},B([xe[qe].coord,xe[Te].coord,xe[xe[Te].nxtIsectAlongRingAndEdge1].coord],1==Re)?(rt.parent=ht,rt.winding=-Re):(rt.parent=tt,rt.winding=Re),Me.push(rt)),qe=Te,Te=xe[Te].nxtIsectAlongRingAndEdge1}it.push(xe[Te].coord),He.push(G.polygon([it],{index:tt,parent:ht,winding:Re,netWinding:void 0}))}function gt(){for(var Gt=[],Vn=0;Vn<xt.features.length;Vn++)-1==xt.features[Vn].properties.parent&&Gt.push(Vn);if(Gt.length>1)for(Vn=0;Vn<Gt.length;Vn++){for(var un=-1,cn=0;cn<xt.features.length;cn++)Gt[Vn]!=cn&&f.default(xt.features[Gt[Vn]].geometry.coordinates[0][0],xt.features[cn],{ignoreBoundary:!0})&&m.default(xt.features[cn])<1/0&&(un=cn);xt.features[Gt[Vn]].properties.parent=un}}function on(){for(var Gt=0;Gt<xt.features.length;Gt++)if(-1==xt.features[Gt].properties.parent){var Vn=xt.features[Gt].properties.winding;xt.features[Gt].properties.netWinding=Vn,Qt(Gt,Vn)}}function Qt(Gt,Vn){for(var un=0;un<xt.features.length;un++)if(xt.features[un].properties.parent==Gt){var an=Vn+xt.features[un].properties.winding;xt.features[un].properties.netWinding=an,Qt(un,an)}}return xt=G.featureCollection(He),gt(),on(),xt}var R=function($,oe,X,ie,q){this.coord=$,this.param=oe,this.ringAndEdgeIn=X,this.ringAndEdgeOut=ie,this.nxtIsectAlongEdgeIn=q},V=function($,oe,X,ie,q,se,ne){this.coord=$,this.ringAndEdge1=oe,this.ringAndEdge2=X,this.nxtIsectAlongRingAndEdge1=ie,this.nxtIsectAlongRingAndEdge2=q,this.ringAndEdge1Walkable=se,this.ringAndEdge2Walkable=ne};function B($,oe){if(typeof oe>"u"&&(oe=!0),3!=$.length)throw new Error("This function requires an array of three points [x,y]");return($[1][0]-$[0][0])*($[2][1]-$[0][1])-($[1][1]-$[0][1])*($[2][0]-$[0][0])>=0==oe}function U($){for(var oe=0,X=0;X<$.length-1;X++)$[X][0]<$[oe][0]&&(oe=X);if(B([$[j(oe-1,$.length-1)],$[oe],$[j(oe+1,$.length-1)]],!0))var ie=1;else ie=-1;return ie}function F($,oe){if(!$||!oe||$.length!=oe.length)return!1;for(var X=0,ie=$.length;X<ie;X++)if($[X]instanceof Array&&oe[X]instanceof Array){if(!F($[X],oe[X]))return!1}else if($[X]!=oe[X])return!1;return!0}function j($,oe){return($%oe+oe)%oe}function Q($){var oe=[];return k.flattenEach($,function(X){"Polygon"===X.geometry.type&&k.featureEach(D(X),function(ie){oe.push(G.polygon(ie.geometry.coordinates,X.properties))})}),G.featureCollection(oe)}Ae.exports=Q,Ae.exports.default=Q},29905:(Ae,y,w)=>{"use strict";var k=w(90621),G=w(45943),I=w(49863);function u(g){return(g=g.slice()).push(g[0]),k.polygon([g])}function h(g,v){if(!k.isObject(v=v||{}))throw new Error("options is invalid");var m=v.bbox||[-180,-85,180,85];if(!g)throw new Error("points is required");if(!Array.isArray(m))throw new Error("bbox is invalid");return G.collectionOf(g,"Point","points"),k.featureCollection(I.voronoi().x(function(f){return f.geometry.coordinates[0]}).y(function(f){return f.geometry.coordinates[1]}).extent([[m[0],m[1]],[m[2],m[3]]]).polygons(g.features).map(u))}Ae.exports=h,Ae.exports.default=h},41098:(Ae,y,w)=>{"use strict";var k=w(90491),G=w(35436),I=G(k("String.prototype.indexOf"));Ae.exports=function(h,g){var v=k(h,!!g);return"function"==typeof v&&I(h,".prototype.")>-1?G(v):v}},35436:(Ae,y,w)=>{"use strict";var k=w(45333),G=w(90491),I=G("%Function.prototype.apply%"),u=G("%Function.prototype.call%"),h=G("%Reflect.apply%",!0)||k.call(u,I),g=G("%Object.getOwnPropertyDescriptor%",!0),v=G("%Object.defineProperty%",!0),m=G("%Math.max%");if(v)try{v({},"a",{value:1})}catch{v=null}Ae.exports=function(S){var M=h(k,u,arguments);return g&&v&&g(M,"length").configurable&&v(M,"length",{value:1+m(0,S.length-(arguments.length-1))}),M};var f=function(){return h(k,I,arguments)};v?v(Ae.exports,"apply",{value:f}):Ae.exports.apply=f},93664:(Ae,y,w)=>{"use strict";var k=w(20938),G=w(77935),I=w(14179),u=w(26138).orient2d;function h(Q,$,oe){$=Math.max(0,void 0===$?2:$),oe=oe||0;var X=function R(Q){for(var $=Q[0],oe=Q[0],X=Q[0],ie=Q[0],q=0;q<Q.length;q++){var se=Q[q];se[0]<$[0]&&($=se),se[0]>X[0]&&(X=se),se[1]<oe[1]&&(oe=se),se[1]>ie[1]&&(ie=se)}var ne=[$,oe,X,ie],Ce=ne.slice();for(q=0;q<Q.length;q++)I(Q[q],ne)||Ce.push(Q[q]);return function P(Q){Q.sort(j);for(var $=[],oe=0;oe<Q.length;oe++){for(;$.length>=2&&S($[$.length-2],$[$.length-1],Q[oe])<=0;)$.pop();$.push(Q[oe])}for(var X=[],ie=Q.length-1;ie>=0;ie--){for(;X.length>=2&&S(X[X.length-2],X[X.length-1],Q[ie])<=0;)X.pop();X.push(Q[ie])}return X.pop(),$.pop(),$.concat(X)}(Ce)}(Q),ie=new k(16);ie.toBBox=function(Me){return{minX:Me[0],minY:Me[1],maxX:Me[0],maxY:Me[1]}},ie.compareMinX=function(Me,_e){return Me[0]-_e[0]},ie.compareMinY=function(Me,_e){return Me[1]-_e[1]},ie.load(Q);for(var ne,q=[],se=0;se<X.length;se++){var Ce=X[se];ie.remove(Ce),ne=V(Ce,ne),q.push(ne)}var xe=new k(16);for(se=0;se<q.length;se++)xe.insert(D(q[se]));for(var ue=$*$,fe=oe*oe;q.length;){var ee=q.shift(),de=ee.p,pe=ee.next.p,ce=B(de,pe);if(!(ce<fe)){var ae=ce/ue;(Ce=g(ie,ee.prev.p,de,pe,ee.next.next.p,ae,xe))&&Math.min(B(Ce,de),B(Ce,pe))<=ae&&(q.push(ee),q.push(V(Ce,ee)),ie.remove(Ce),xe.remove(ee),xe.insert(D(ee)),xe.insert(D(ee.next)))}}ee=ne;var ye=[];do{ye.push(ee.p),ee=ee.next}while(ee!==ne);return ye.push(ee.p),ye}function g(Q,$,oe,X,ie,q,se){for(var ne=new G([],v),Ce=Q.data;Ce;){for(var xe=0;xe<Ce.children.length;xe++){var ue=Ce.children[xe],fe=Ce.leaf?U(ue,oe,X):m(oe,X,ue);fe>q||ne.push({node:ue,dist:fe})}for(;ne.length&&!ne.peek().node.children;){var ee=ne.pop(),de=ee.node,pe=U(de,$,oe),ce=U(de,X,ie);if(ee.dist<pe&&ee.dist<ce&&_(oe,de,se)&&_(X,de,se))return de}(Ce=ne.pop())&&(Ce=Ce.node)}return null}function v(Q,$){return Q.dist-$.dist}function m(Q,$,oe){if(f(Q,oe)||f($,oe))return 0;var X=F(Q[0],Q[1],$[0],$[1],oe.minX,oe.minY,oe.maxX,oe.minY);if(0===X)return 0;var ie=F(Q[0],Q[1],$[0],$[1],oe.minX,oe.minY,oe.minX,oe.maxY);if(0===ie)return 0;var q=F(Q[0],Q[1],$[0],$[1],oe.maxX,oe.minY,oe.maxX,oe.maxY);if(0===q)return 0;var se=F(Q[0],Q[1],$[0],$[1],oe.minX,oe.maxY,oe.maxX,oe.maxY);return 0===se?0:Math.min(X,ie,q,se)}function f(Q,$){return Q[0]>=$.minX&&Q[0]<=$.maxX&&Q[1]>=$.minY&&Q[1]<=$.maxY}function _(Q,$,oe){for(var X=Math.min(Q[0],$[0]),ie=Math.min(Q[1],$[1]),q=Math.max(Q[0],$[0]),se=Math.max(Q[1],$[1]),ne=oe.search({minX:X,minY:ie,maxX:q,maxY:se}),Ce=0;Ce<ne.length;Ce++)if(M(ne[Ce].p,ne[Ce].next.p,Q,$))return!1;return!0}function S(Q,$,oe){return u(Q[0],Q[1],$[0],$[1],oe[0],oe[1])}function M(Q,$,oe,X){return Q!==X&&$!==oe&&S(Q,$,oe)>0!=S(Q,$,X)>0&&S(oe,X,Q)>0!=S(oe,X,$)>0}function D(Q){var $=Q.p,oe=Q.next.p;return Q.minX=Math.min($[0],oe[0]),Q.minY=Math.min($[1],oe[1]),Q.maxX=Math.max($[0],oe[0]),Q.maxY=Math.max($[1],oe[1]),Q}function V(Q,$){var oe={p:Q,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return $?(oe.next=$.next,oe.prev=$,$.next.prev=oe,$.next=oe):(oe.prev=oe,oe.next=oe),oe}function B(Q,$){var oe=Q[0]-$[0],X=Q[1]-$[1];return oe*oe+X*X}function U(Q,$,oe){var X=$[0],ie=$[1],q=oe[0]-X,se=oe[1]-ie;if(0!==q||0!==se){var ne=((Q[0]-X)*q+(Q[1]-ie)*se)/(q*q+se*se);ne>1?(X=oe[0],ie=oe[1]):ne>0&&(X+=q*ne,ie+=se*ne)}return(q=Q[0]-X)*q+(se=Q[1]-ie)*se}function F(Q,$,oe,X,ie,q,se,ne){var Fe,Ue,Ge,$e,Ce=oe-Q,xe=X-$,ue=se-ie,fe=ne-q,ee=Q-ie,de=$-q,pe=Ce*Ce+xe*xe,ce=Ce*ue+xe*fe,ae=ue*ue+fe*fe,ye=Ce*ee+xe*de,Me=ue*ee+fe*de,_e=pe*ae-ce*ce,He=_e,Pe=_e;0===_e?(Ue=0,He=1,$e=Me,Pe=ae):($e=pe*Me-ce*ye,(Ue=ce*Me-ae*ye)<0?(Ue=0,$e=Me,Pe=ae):Ue>He&&(Ue=He,$e=Me+ce,Pe=ae)),$e<0?($e=0,-ye<0?Ue=0:-ye>pe?Ue=He:(Ue=-ye,He=pe)):$e>Pe&&($e=Pe,-ye+ce<0?Ue=0:-ye+ce>pe?Ue=He:(Ue=-ye+ce,He=pe));var it=(1-(Ge=0===$e?0:$e/Pe))*ie+Ge*se-((1-(Fe=0===Ue?0:Ue/He))*Q+Fe*oe),qe=(1-Ge)*q+Ge*ne-((1-Fe)*$+Fe*X);return it*it+qe*qe}function j(Q,$){return Q[0]===$[0]?Q[1]-$[1]:Q[0]-$[0]}G.default&&(G=G.default),Ae.exports=h,Ae.exports.default=h},20938:function(Ae){Ae.exports=function(){"use strict";function y(V,B,U,F,j){!function P(Q,$,oe,X,ie){for(;X>oe;){if(X-oe>600){var q=X-oe+1,se=$-oe+1,ne=Math.log(q),Ce=.5*Math.exp(2*ne/3),xe=.5*Math.sqrt(ne*Ce*(q-Ce)/q)*(se-q/2<0?-1:1);P(Q,$,Math.max(oe,Math.floor($-se*Ce/q+xe)),Math.min(X,Math.floor($+(q-se)*Ce/q+xe)),ie)}var ee=Q[$],de=oe,pe=X;for(w(Q,oe,$),ie(Q[X],ee)>0&&w(Q,oe,X);de<pe;){for(w(Q,de,pe),de++,pe--;ie(Q[de],ee)<0;)de++;for(;ie(Q[pe],ee)>0;)pe--}0===ie(Q[oe],ee)?w(Q,oe,pe):w(Q,++pe,X),pe<=$&&(oe=pe+1),$<=pe&&(X=pe-1)}}(V,B,U||0,F||V.length-1,j||k)}function w(V,B,U){var F=V[B];V[B]=V[U],V[U]=F}function k(V,B){return V<B?-1:V>B?1:0}var G=function(V){void 0===V&&(V=9),this._maxEntries=Math.max(4,V),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function I(V,B,U){if(!U)return B.indexOf(V);for(var F=0;F<B.length;F++)if(U(V,B[F]))return F;return-1}function u(V,B){h(V,0,V.children.length,B,V)}function h(V,B,U,F,j){j||(j=D(null)),j.minX=1/0,j.minY=1/0,j.maxX=-1/0,j.maxY=-1/0;for(var P=B;P<U;P++){var Q=V.children[P];g(j,V.leaf?F(Q):Q)}return j}function g(V,B){return V.minX=Math.min(V.minX,B.minX),V.minY=Math.min(V.minY,B.minY),V.maxX=Math.max(V.maxX,B.maxX),V.maxY=Math.max(V.maxY,B.maxY),V}function v(V,B){return V.minX-B.minX}function m(V,B){return V.minY-B.minY}function f(V){return(V.maxX-V.minX)*(V.maxY-V.minY)}function _(V){return V.maxX-V.minX+(V.maxY-V.minY)}function S(V,B){return V.minX<=B.minX&&V.minY<=B.minY&&B.maxX<=V.maxX&&B.maxY<=V.maxY}function M(V,B){return B.minX<=V.maxX&&B.minY<=V.maxY&&B.maxX>=V.minX&&B.maxY>=V.minY}function D(V){return{children:V,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(V,B,U,F,j){for(var P=[B,U];P.length;)if(!((U=P.pop())-(B=P.pop())<=F)){var Q=B+Math.ceil((U-B)/F/2)*F;y(V,Q,B,U,j),P.push(B,Q,Q,U)}}return G.prototype.all=function(){return this._all(this.data,[])},G.prototype.search=function(V){var B=this.data,U=[];if(!M(V,B))return U;for(var F=this.toBBox,j=[];B;){for(var P=0;P<B.children.length;P++){var Q=B.children[P],$=B.leaf?F(Q):Q;M(V,$)&&(B.leaf?U.push(Q):S(V,$)?this._all(Q,U):j.push(Q))}B=j.pop()}return U},G.prototype.collides=function(V){var B=this.data;if(!M(V,B))return!1;for(var U=[];B;){for(var F=0;F<B.children.length;F++){var j=B.children[F],P=B.leaf?this.toBBox(j):j;if(M(V,P)){if(B.leaf||S(V,P))return!0;U.push(j)}}B=U.pop()}return!1},G.prototype.load=function(V){if(!V||!V.length)return this;if(V.length<this._minEntries){for(var B=0;B<V.length;B++)this.insert(V[B]);return this}var U=this._build(V.slice(),0,V.length-1,0);if(this.data.children.length)if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var F=this.data;this.data=U,U=F}this._insert(U,this.data.height-U.height-1,!0)}else this.data=U;return this},G.prototype.insert=function(V){return V&&this._insert(V,this.data.height-1),this},G.prototype.clear=function(){return this.data=D([]),this},G.prototype.remove=function(V,B){if(!V)return this;for(var U,F,j,P=this.data,Q=this.toBBox(V),$=[],oe=[];P||$.length;){if(P||(P=$.pop(),F=$[$.length-1],U=oe.pop(),j=!0),P.leaf){var X=I(V,P.children,B);if(-1!==X)return P.children.splice(X,1),$.push(P),this._condense($),this}j||P.leaf||!S(P,Q)?F?(U++,P=F.children[U],j=!1):P=null:($.push(P),oe.push(U),U=0,F=P,P=P.children[0])}return this},G.prototype.toBBox=function(V){return V},G.prototype.compareMinX=function(V,B){return V.minX-B.minX},G.prototype.compareMinY=function(V,B){return V.minY-B.minY},G.prototype.toJSON=function(){return this.data},G.prototype.fromJSON=function(V){return this.data=V,this},G.prototype._all=function(V,B){for(var U=[];V;)V.leaf?B.push.apply(B,V.children):U.push.apply(U,V.children),V=U.pop();return B},G.prototype._build=function(V,B,U,F){var j,P=U-B+1,Q=this._maxEntries;if(P<=Q)return u(j=D(V.slice(B,U+1)),this.toBBox),j;F||(F=Math.ceil(Math.log(P)/Math.log(Q)),Q=Math.ceil(P/Math.pow(Q,F-1))),(j=D([])).leaf=!1,j.height=F;var $=Math.ceil(P/Q),oe=$*Math.ceil(Math.sqrt(Q));R(V,B,U,oe,this.compareMinX);for(var X=B;X<=U;X+=oe){var ie=Math.min(X+oe-1,U);R(V,X,ie,$,this.compareMinY);for(var q=X;q<=ie;q+=$){var se=Math.min(q+$-1,ie);j.children.push(this._build(V,q,se,F-1))}}return u(j,this.toBBox),j},G.prototype._chooseSubtree=function(V,B,U,F){for(;F.push(B),!B.leaf&&F.length-1!==U;){for(var j=1/0,P=1/0,Q=void 0,$=0;$<B.children.length;$++){var oe=B.children[$],X=f(oe),ie=(q=V,se=oe,(Math.max(se.maxX,q.maxX)-Math.min(se.minX,q.minX))*(Math.max(se.maxY,q.maxY)-Math.min(se.minY,q.minY))-X);ie<P?(P=ie,j=X<j?X:j,Q=oe):ie===P&&X<j&&(j=X,Q=oe)}B=Q||B.children[0]}var q,se;return B},G.prototype._insert=function(V,B,U){var F=U?V:this.toBBox(V),j=[],P=this._chooseSubtree(F,this.data,B,j);for(P.children.push(V),g(P,F);B>=0&&j[B].children.length>this._maxEntries;)this._split(j,B),B--;this._adjustParentBBoxes(F,j,B)},G.prototype._split=function(V,B){var U=V[B],F=U.children.length,j=this._minEntries;this._chooseSplitAxis(U,j,F);var P=this._chooseSplitIndex(U,j,F),Q=D(U.children.splice(P,U.children.length-P));Q.height=U.height,Q.leaf=U.leaf,u(U,this.toBBox),u(Q,this.toBBox),B?V[B-1].children.push(Q):this._splitRoot(U,Q)},G.prototype._splitRoot=function(V,B){this.data=D([V,B]),this.data.height=V.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},G.prototype._chooseSplitIndex=function(V,B,U){for(var F,j,P,Q,$,oe,X,ie=1/0,q=1/0,se=B;se<=U-B;se++){var ne=h(V,0,se,this.toBBox),Ce=h(V,se,U,this.toBBox),xe=(j=ne,P=Ce,void 0,void 0,void 0,void 0,Q=Math.max(j.minX,P.minX),$=Math.max(j.minY,P.minY),oe=Math.min(j.maxX,P.maxX),X=Math.min(j.maxY,P.maxY),Math.max(0,oe-Q)*Math.max(0,X-$)),ue=f(ne)+f(Ce);xe<ie?(ie=xe,F=se,q=ue<q?ue:q):xe===ie&&ue<q&&(q=ue,F=se)}return F||U-B},G.prototype._chooseSplitAxis=function(V,B,U){var F=V.leaf?this.compareMinX:v,j=V.leaf?this.compareMinY:m;this._allDistMargin(V,B,U,F)<this._allDistMargin(V,B,U,j)&&V.children.sort(F)},G.prototype._allDistMargin=function(V,B,U,F){V.children.sort(F);for(var j=this.toBBox,P=h(V,0,B,j),Q=h(V,U-B,U,j),$=_(P)+_(Q),oe=B;oe<U-B;oe++){var X=V.children[oe];g(P,V.leaf?j(X):X),$+=_(P)}for(var ie=U-B-1;ie>=B;ie--){var q=V.children[ie];g(Q,V.leaf?j(q):q),$+=_(Q)}return $},G.prototype._adjustParentBBoxes=function(V,B,U){for(var F=U;F>=0;F--)g(B[F],V)},G.prototype._condense=function(V){for(var B=V.length-1,U=void 0;B>=0;B--)0===V[B].children.length?B>0?(U=V[B-1].children).splice(U.indexOf(V[B]),1):this.clear():u(V[B],this.toBBox)},G}()},31016:(Ae,y,w)=>{"use strict";function k(){return new G}function G(){this.reset()}w.r(y),w.d(y,{geoAlbers:()=>d2,geoAlbersUsa:()=>Ya,geoArea:()=>ht,geoAzimuthalEqualArea:()=>Na,geoAzimuthalEqualAreaRaw:()=>Eo,geoAzimuthalEquidistant:()=>ws,geoAzimuthalEquidistantRaw:()=>W1,geoBounds:()=>zt,geoCentroid:()=>Wn,geoCircle:()=>Rn,geoClipExtent:()=>Vr,geoConicConformal:()=>Wr,geoConicConformalRaw:()=>Ao,geoConicEqualArea:()=>ga,geoConicEqualAreaRaw:()=>as,geoConicEquidistant:()=>D2,geoConicEquidistantRaw:()=>ol,geoContains:()=>sa,geoDistance:()=>Yr,geoEquirectangular:()=>Cs,geoEquirectangularRaw:()=>_c,geoGnomonic:()=>tu,geoGnomonicRaw:()=>ss,geoGraticule:()=>d1,geoGraticule10:()=>Xr,geoIdentity:()=>W2,geoInterpolate:()=>zi,geoLength:()=>Io,geoMercator:()=>rl,geoMercatorRaw:()=>b1,geoNaturalEarth1:()=>_r,geoNaturalEarth1Raw:()=>Hi,geoOrthographic:()=>D1,geoOrthographicRaw:()=>h2,geoPath:()=>pa,geoProjection:()=>So,geoProjectionMutator:()=>_1,geoRotation:()=>wt,geoStereographic:()=>Hs,geoStereographicRaw:()=>Uc,geoStream:()=>pe,geoTransform:()=>Vs,geoTransverseMercator:()=>ms,geoTransverseMercatorRaw:()=>Pc}),G.prototype={constructor:G,reset:function(){this.s=this.t=0},add:function(De){u(I,De,this.t),u(this,I.s,this.s),this.s?this.t+=I.t:this.s=I.t},valueOf:function(){return this.s}};var I=new G;function u(De,Ye,pt){var ct=De.s=Ye+pt,Mt=ct-Ye;De.t=Ye-(ct-Mt)+(pt-Mt)}var h=1e-6,g=1e-12,v=Math.PI,m=v/2,f=v/4,_=2*v,S=180/v,M=v/180,D=Math.abs,R=Math.atan,V=Math.atan2,B=Math.cos,U=Math.ceil,F=Math.exp,P=(Math,Math.log),Q=Math.pow,$=Math.sin,oe=Math.sign||function(De){return De>0?1:De<0?-1:0},X=Math.sqrt,ie=Math.tan;function q(De){return De>1?0:De<-1?v:Math.acos(De)}function se(De){return De>1?m:De<-1?-m:Math.asin(De)}function ne(De){return(De=$(De/2))*De}function Ce(){}function xe(De,Ye){De&&fe.hasOwnProperty(De.type)&&fe[De.type](De,Ye)}var ue={Feature:function(De,Ye){xe(De.geometry,Ye)},FeatureCollection:function(De,Ye){for(var pt=De.features,ct=-1,Mt=pt.length;++ct<Mt;)xe(pt[ct].geometry,Ye)}},fe={Sphere:function(De,Ye){Ye.sphere()},Point:function(De,Ye){Ye.point((De=De.coordinates)[0],De[1],De[2])},MultiPoint:function(De,Ye){for(var pt=De.coordinates,ct=-1,Mt=pt.length;++ct<Mt;)Ye.point((De=pt[ct])[0],De[1],De[2])},LineString:function(De,Ye){ee(De.coordinates,Ye,0)},MultiLineString:function(De,Ye){for(var pt=De.coordinates,ct=-1,Mt=pt.length;++ct<Mt;)ee(pt[ct],Ye,0)},Polygon:function(De,Ye){de(De.coordinates,Ye)},MultiPolygon:function(De,Ye){for(var pt=De.coordinates,ct=-1,Mt=pt.length;++ct<Mt;)de(pt[ct],Ye)},GeometryCollection:function(De,Ye){for(var pt=De.geometries,ct=-1,Mt=pt.length;++ct<Mt;)xe(pt[ct],Ye)}};function ee(De,Ye,pt){var Vt,ct=-1,Mt=De.length-pt;for(Ye.lineStart();++ct<Mt;)Ye.point((Vt=De[ct])[0],Vt[1],Vt[2]);Ye.lineEnd()}function de(De,Ye){var pt=-1,ct=De.length;for(Ye.polygonStart();++pt<ct;)ee(De[pt],Ye,1);Ye.polygonEnd()}function pe(De,Ye){De&&ue.hasOwnProperty(De.type)?ue[De.type](De,Ye):xe(De,Ye)}var ye,Me,_e,Fe,Ue,ce=k(),ae=k(),Ge={point:Ce,lineStart:Ce,lineEnd:Ce,polygonStart:function(){ce.reset(),Ge.lineStart=$e,Ge.lineEnd=He},polygonEnd:function(){var De=+ce;ae.add(De<0?_+De:De),this.lineStart=this.lineEnd=this.point=Ce},sphere:function(){ae.add(_)}};function $e(){Ge.point=Pe}function He(){je(ye,Me)}function Pe(De,Ye){Ge.point=je,ye=De,Me=Ye,_e=De*=M,Fe=B(Ye=(Ye*=M)/2+f),Ue=$(Ye)}function je(De,Ye){var pt=(De*=M)-_e,ct=pt>=0?1:-1,Mt=ct*pt,Vt=B(Ye=(Ye*=M)/2+f),hn=$(Ye),En=Ue*hn,kn=Fe*Vt+En*B(Mt),Xn=En*ct*$(Mt);ce.add(V(Xn,kn)),_e=De,Fe=Vt,Ue=hn}function ht(De){return ae.reset(),pe(De,Ge),2*ae}function Re(De){return[V(De[1],De[0]),se(De[2])]}function tt(De){var Ye=De[0],pt=De[1],ct=B(pt);return[ct*B(Ye),ct*$(Ye),$(pt)]}function it(De,Ye){return De[0]*Ye[0]+De[1]*Ye[1]+De[2]*Ye[2]}function qe(De,Ye){return[De[1]*Ye[2]-De[2]*Ye[1],De[2]*Ye[0]-De[0]*Ye[2],De[0]*Ye[1]-De[1]*Ye[0]]}function Oe(De,Ye){De[0]+=Ye[0],De[1]+=Ye[1],De[2]+=Ye[2]}function Te(De,Ye){return[De[0]*Ye,De[1]*Ye,De[2]*Ye]}function Ne(De){var Ye=X(De[0]*De[0]+De[1]*De[1]+De[2]*De[2]);De[0]/=Ye,De[1]/=Ye,De[2]/=Ye}var rt,xt,gt,on,Qt,Gt,Vn,un,cn,_i,an=k(),vi={point:qn,lineStart:ci,lineEnd:Ei,polygonStart:function(){vi.point=Mi,vi.lineStart=Zi,vi.lineEnd=ji,an.reset(),Ge.polygonStart()},polygonEnd:function(){Ge.polygonEnd(),vi.point=qn,vi.lineStart=ci,vi.lineEnd=Ei,ce<0?(rt=-(gt=180),xt=-(on=90)):an>h?on=90:an<-h&&(xt=-90),_i[0]=rt,_i[1]=gt}};function qn(De,Ye){cn.push(_i=[rt=De,gt=De]),Ye<xt&&(xt=Ye),Ye>on&&(on=Ye)}function Pi(De,Ye){var pt=tt([De*M,Ye*M]);if(un){var ct=qe(un,pt),Vt=qe([ct[1],-ct[0],0],ct);Ne(Vt),Vt=Re(Vt);var Xn,hn=De-Qt,En=hn>0?1:-1,kn=Vt[0]*S*En,pn=D(hn)>180;pn^(En*Qt<kn&&kn<En*De)?(Xn=Vt[1]*S)>on&&(on=Xn):pn^(En*Qt<(kn=(kn+360)%360-180)&&kn<En*De)?(Xn=-Vt[1]*S)<xt&&(xt=Xn):(Ye<xt&&(xt=Ye),Ye>on&&(on=Ye)),pn?De<Qt?$i(rt,De)>$i(rt,gt)&&(gt=De):$i(De,gt)>$i(rt,gt)&&(rt=De):gt>=rt?(De<rt&&(rt=De),De>gt&&(gt=De)):De>Qt?$i(rt,De)>$i(rt,gt)&&(gt=De):$i(De,gt)>$i(rt,gt)&&(rt=De)}else cn.push(_i=[rt=De,gt=De]);Ye<xt&&(xt=Ye),Ye>on&&(on=Ye),un=pt,Qt=De}function ci(){vi.point=Pi}function Ei(){_i[0]=rt,_i[1]=gt,vi.point=qn,un=null}function Mi(De,Ye){if(un){var pt=De-Qt;an.add(D(pt)>180?pt+(pt>0?360:-360):pt)}else Gt=De,Vn=Ye;Ge.point(De,Ye),Pi(De,Ye)}function Zi(){Ge.lineStart()}function ji(){Mi(Gt,Vn),Ge.lineEnd(),D(an)>h&&(rt=-(gt=180)),_i[0]=rt,_i[1]=gt,un=null}function $i(De,Ye){return(Ye-=De)<0?Ye+360:Ye}function so(De,Ye){return De[0]-Ye[0]}function Zn(De,Ye){return De[0]<=De[1]?De[0]<=Ye&&Ye<=De[1]:Ye<De[0]||De[1]<Ye}function zt(De){var Ye,pt,ct,Mt,Vt,hn,En;if(on=gt=-(rt=xt=1/0),cn=[],pe(De,vi),pt=cn.length){for(cn.sort(so),Ye=1,Vt=[ct=cn[0]];Ye<pt;++Ye)Zn(ct,(Mt=cn[Ye])[0])||Zn(ct,Mt[1])?($i(ct[0],Mt[1])>$i(ct[0],ct[1])&&(ct[1]=Mt[1]),$i(Mt[0],ct[1])>$i(ct[0],ct[1])&&(ct[0]=Mt[0])):Vt.push(ct=Mt);for(hn=-1/0,Ye=0,ct=Vt[pt=Vt.length-1];Ye<=pt;ct=Mt,++Ye)(En=$i(ct[1],(Mt=Vt[Ye])[0]))>hn&&(hn=En,rt=Mt[0],gt=ct[1])}return cn=_i=null,rt===1/0||xt===1/0?[[NaN,NaN],[NaN,NaN]]:[[rt,xt],[gt,on]]}var Je,nt,Se,Qe,ot,dt,Pt,At,Wt,Yt,Bt,$t,vn,Cn,xn,jn,jt={sphere:Ce,point:Dn,lineStart:si,lineEnd:Li,polygonStart:function(){jt.lineStart=or,jt.lineEnd=Ri},polygonEnd:function(){jt.lineStart=si,jt.lineEnd=Li}};function Dn(De,Ye){De*=M;var pt=B(Ye*=M);Ke(pt*B(De),pt*$(De),$(Ye))}function Ke(De,Ye,pt){++Je,Se+=(De-Se)/Je,Qe+=(Ye-Qe)/Je,ot+=(pt-ot)/Je}function si(){jt.point=xr}function xr(De,Ye){De*=M;var pt=B(Ye*=M);Cn=pt*B(De),xn=pt*$(De),jn=$(Ye),jt.point=Zr,Ke(Cn,xn,jn)}function Zr(De,Ye){De*=M;var pt=B(Ye*=M),ct=pt*B(De),Mt=pt*$(De),Vt=$(Ye),hn=V(X((hn=xn*Vt-jn*Mt)*hn+(hn=jn*ct-Cn*Vt)*hn+(hn=Cn*Mt-xn*ct)*hn),Cn*ct+xn*Mt+jn*Vt);nt+=hn,dt+=hn*(Cn+(Cn=ct)),Pt+=hn*(xn+(xn=Mt)),At+=hn*(jn+(jn=Vt)),Ke(Cn,xn,jn)}function Li(){jt.point=Dn}function or(){jt.point=to}function Ri(){Vi($t,vn),jt.point=Dn}function to(De,Ye){$t=De,vn=Ye,De*=M,Ye*=M,jt.point=Vi;var pt=B(Ye);Cn=pt*B(De),xn=pt*$(De),jn=$(Ye),Ke(Cn,xn,jn)}function Vi(De,Ye){De*=M;var pt=B(Ye*=M),ct=pt*B(De),Mt=pt*$(De),Vt=$(Ye),hn=xn*Vt-jn*Mt,En=jn*ct-Cn*Vt,kn=Cn*Mt-xn*ct,Xn=X(hn*hn+En*En+kn*kn),pn=se(Xn),An=Xn&&-pn/Xn;Wt+=An*hn,Yt+=An*En,Bt+=An*kn,nt+=pn,dt+=pn*(Cn+(Cn=ct)),Pt+=pn*(xn+(xn=Mt)),At+=pn*(jn+(jn=Vt)),Ke(Cn,xn,jn)}function Wn(De){Je=nt=Se=Qe=ot=dt=Pt=At=Wt=Yt=Bt=0,pe(De,jt);var Ye=Wt,pt=Yt,ct=Bt,Mt=Ye*Ye+pt*pt+ct*ct;return Mt<g&&(Ye=dt,pt=Pt,ct=At,nt<h&&(Ye=Se,pt=Qe,ct=ot),(Mt=Ye*Ye+pt*pt+ct*ct)<g)?[NaN,NaN]:[V(pt,Ye)*S,se(ct/X(Mt))*S]}function Ii(De){return function(){return De}}function co(De,Ye){function pt(ct,Mt){return ct=De(ct,Mt),Ye(ct[0],ct[1])}return De.invert&&Ye.invert&&(pt.invert=function(ct,Mt){return(ct=Ye.invert(ct,Mt))&&De.invert(ct[0],ct[1])}),pt}function ro(De,Ye){return[De>v?De-_:De<-v?De+_:De,Ye]}function Po(De,Ye,pt){return(De%=_)?Ye||pt?co(ba(De),at(Ye,pt)):ba(De):Ye||pt?at(Ye,pt):ro}function Mr(De){return function(Ye,pt){return[(Ye+=De)>v?Ye-_:Ye<-v?Ye+_:Ye,pt]}}function ba(De){var Ye=Mr(De);return Ye.invert=Mr(-De),Ye}function at(De,Ye){var pt=B(De),ct=$(De),Mt=B(Ye),Vt=$(Ye);function hn(En,kn){var Xn=B(kn),pn=B(En)*Xn,An=$(En)*Xn,Tn=$(kn),Un=Tn*pt+pn*ct;return[V(An*Mt-Un*Vt,pn*pt-Tn*ct),se(Un*Mt+An*Vt)]}return hn.invert=function(En,kn){var Xn=B(kn),pn=B(En)*Xn,An=$(En)*Xn,Tn=$(kn),Un=Tn*Mt-An*Vt;return[V(An*Mt+Tn*Vt,pn*pt+Un*ct),se(Un*pt-pn*ct)]},hn}function wt(De){function Ye(pt){return(pt=De(pt[0]*M,pt[1]*M))[0]*=S,pt[1]*=S,pt}return De=Po(De[0]*M,De[1]*M,De.length>2?De[2]*M:0),Ye.invert=function(pt){return(pt=De.invert(pt[0]*M,pt[1]*M))[0]*=S,pt[1]*=S,pt},Ye}function On(De,Ye,pt,ct,Mt,Vt){if(pt){var hn=B(Ye),En=$(Ye),kn=ct*pt;null==Mt?(Mt=Ye+ct*_,Vt=Ye-kn/2):(Mt=Nn(hn,Mt),Vt=Nn(hn,Vt),(ct>0?Mt<Vt:Mt>Vt)&&(Mt+=ct*_));for(var Xn,pn=Mt;ct>0?pn>Vt:pn<Vt;pn-=kn)Xn=Re([hn,-En*B(pn),-En*$(pn)]),De.point(Xn[0],Xn[1])}}function Nn(De,Ye){(Ye=tt(Ye))[0]-=De,Ne(Ye);var pt=q(-Ye[1]);return((-Ye[2]<0?-pt:pt)+_-h)%_}function Rn(){var ct,Mt,De=Ii([0,0]),Ye=Ii(90),pt=Ii(6),Vt={point:function hn(kn,Xn){ct.push(kn=Mt(kn,Xn)),kn[0]*=S,kn[1]*=S}};function En(){var kn=De.apply(this,arguments),Xn=Ye.apply(this,arguments)*M,pn=pt.apply(this,arguments)*M;return ct=[],Mt=Po(-kn[0]*M,-kn[1]*M,0).invert,On(Vt,Xn,pn,1),kn={type:"Polygon",coordinates:[ct]},ct=Mt=null,kn}return En.center=function(kn){return arguments.length?(De="function"==typeof kn?kn:Ii([+kn[0],+kn[1]]),En):De},En.radius=function(kn){return arguments.length?(Ye="function"==typeof kn?kn:Ii(+kn),En):Ye},En.precision=function(kn){return arguments.length?(pt="function"==typeof kn?kn:Ii(+kn),En):pt},En}function Yn(){var Ye,De=[];return{point:function(pt,ct){Ye.push([pt,ct])},lineStart:function(){De.push(Ye=[])},lineEnd:Ce,rejoin:function(){De.length>1&&De.push(De.pop().concat(De.shift()))},result:function(){var pt=De;return De=[],Ye=null,pt}}}function Kn(De,Ye){return D(De[0]-Ye[0])<h&&D(De[1]-Ye[1])<h}function Ot(De,Ye,pt,ct){this.x=De,this.z=Ye,this.o=pt,this.e=ct,this.v=!1,this.n=this.p=null}function ft(De,Ye,pt,ct,Mt){var En,kn,Vt=[],hn=[];if(De.forEach(function(a){if(!((d=a.length-1)<=0)){var d,Z,E=a[0],T=a[d];if(Kn(E,T)){for(Mt.lineStart(),En=0;En<d;++En)Mt.point((E=a[En])[0],E[1]);return void Mt.lineEnd()}Vt.push(Z=new Ot(E,a,null,!0)),hn.push(Z.o=new Ot(E,null,Z,!1)),Vt.push(Z=new Ot(T,a,null,!1)),hn.push(Z.o=new Ot(T,null,Z,!0))}}),Vt.length){for(hn.sort(Ye),St(Vt),St(hn),En=0,kn=hn.length;En<kn;++En)hn[En].e=pt=!pt;for(var pn,An,Xn=Vt[0];;){for(var Tn=Xn,Un=!0;Tn.v;)if((Tn=Tn.n)===Xn)return;pn=Tn.z,Mt.lineStart();do{if(Tn.v=Tn.o.v=!0,Tn.e){if(Un)for(En=0,kn=pn.length;En<kn;++En)Mt.point((An=pn[En])[0],An[1]);else ct(Tn.x,Tn.n.x,1,Mt);Tn=Tn.n}else{if(Un)for(En=(pn=Tn.p.z).length-1;En>=0;--En)Mt.point((An=pn[En])[0],An[1]);else ct(Tn.x,Tn.p.x,-1,Mt);Tn=Tn.p}pn=(Tn=Tn.o).z,Un=!Un}while(!Tn.v);Mt.lineEnd()}}}function St(De){if(Ye=De.length){for(var Ye,Mt,pt=0,ct=De[0];++pt<Ye;)ct.n=Mt=De[pt],Mt.p=ct,ct=Mt;ct.n=Mt=De[0],Mt.p=ct}}function Kt(De,Ye){return De<Ye?-1:De>Ye?1:De>=Ye?0:NaN}function xa(De){for(var pt,Vt,hn,Ye=De.length,ct=-1,Mt=0;++ct<Ye;)Mt+=De[ct].length;for(Vt=new Array(Mt);--Ye>=0;)for(pt=(hn=De[Ye]).length;--pt>=0;)Vt[--Mt]=hn[pt];return Vt}function Sa(De,Ye,pt){De=+De,Ye=+Ye,pt=(Mt=arguments.length)<2?(Ye=De,De=0,1):Mt<3?1:+pt;for(var ct=-1,Mt=0|Math.max(0,Math.ceil((Ye-De)/pt)),Vt=new Array(Mt);++ct<Mt;)Vt[ct]=De+ct*pt;return Vt}ro.invert=ro,function Ut(De){1===De.length&&(De=function rn(De){return function(Ye,pt){return Kt(De(Ye),pt)}}(De))}(Kt),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var wa=1e9,Xs=-wa;function Qa(De,Ye,pt,ct){function Mt(Xn,pn){return De<=Xn&&Xn<=pt&&Ye<=pn&&pn<=ct}function Vt(Xn,pn,An,Tn){var Un=0,a=0;if(null==Xn||(Un=hn(Xn,An))!==(a=hn(pn,An))||kn(Xn,pn)<0^An>0)do{Tn.point(0===Un||3===Un?De:pt,Un>1?ct:Ye)}while((Un=(Un+An+4)%4)!==a);else Tn.point(pn[0],pn[1])}function hn(Xn,pn){return D(Xn[0]-De)<h?pn>0?0:3:D(Xn[0]-pt)<h?pn>0?2:1:D(Xn[1]-Ye)<h?pn>0?1:0:pn>0?3:2}function En(Xn,pn){return kn(Xn.x,pn.x)}function kn(Xn,pn){var An=hn(Xn,1),Tn=hn(pn,1);return An!==Tn?An-Tn:0===An?pn[1]-Xn[1]:1===An?Xn[0]-pn[0]:2===An?Xn[1]-pn[1]:pn[0]-Xn[0]}return function(Xn){var Tn,Un,a,d,E,T,Z,me,Ie,Xe,H,pn=Xn,An=Yn(),s={point:C,lineStart:function he(){s.point=we,Un&&Un.push(a=[]),Xe=!0,Ie=!1,Z=me=NaN},lineEnd:function ge(){Tn&&(we(d,E),T&&Ie&&An.rejoin(),Tn.push(An.result())),s.point=C,Ie&&pn.lineEnd()},polygonStart:function W(){pn=An,Tn=[],Un=[],H=!0},polygonEnd:function K(){var Le=function N(){for(var Le=0,Ve=0,We=Un.length;Ve<We;++Ve)for(var It,ln,lt=Un[Ve],Tt=1,kt=lt.length,Ft=lt[0],zn=Ft[0],Xt=Ft[1];Tt<kt;++Tt)It=zn,ln=Xt,zn=(Ft=lt[Tt])[0],Xt=Ft[1],ln<=ct?Xt>ct&&(zn-It)*(ct-ln)>(Xt-ln)*(De-It)&&++Le:Xt<=ct&&(zn-It)*(ct-ln)<(Xt-ln)*(De-It)&&--Le;return Le}(),Ve=H&&Le,We=(Tn=xa(Tn)).length;(Ve||We)&&(Xn.polygonStart(),Ve&&(Xn.lineStart(),Vt(null,null,1,Xn),Xn.lineEnd()),We&&ft(Tn,En,Le,Vt,Xn),Xn.polygonEnd()),pn=Xn,Tn=Un=a=null}};function C(Le,Ve){Mt(Le,Ve)&&pn.point(Le,Ve)}function we(Le,Ve){var We=Mt(Le,Ve);if(Un&&a.push([Le,Ve]),Xe)d=Le,E=Ve,T=We,Xe=!1,We&&(pn.lineStart(),pn.point(Le,Ve));else if(We&&Ie)pn.point(Le,Ve);else{var lt=[Z=Math.max(Xs,Math.min(wa,Z)),me=Math.max(Xs,Math.min(wa,me))],Tt=[Le=Math.max(Xs,Math.min(wa,Le)),Ve=Math.max(Xs,Math.min(wa,Ve))];!function Dt(De,Ye,pt,ct,Mt,Vt){var a,hn=De[0],En=De[1],pn=0,An=1,Tn=Ye[0]-hn,Un=Ye[1]-En;if(a=pt-hn,Tn||!(a>0)){if(a/=Tn,Tn<0){if(a<pn)return;a<An&&(An=a)}else if(Tn>0){if(a>An)return;a>pn&&(pn=a)}if(a=Mt-hn,Tn||!(a<0)){if(a/=Tn,Tn<0){if(a>An)return;a>pn&&(pn=a)}else if(Tn>0){if(a<pn)return;a<An&&(An=a)}if(a=ct-En,Un||!(a>0)){if(a/=Un,Un<0){if(a<pn)return;a<An&&(An=a)}else if(Un>0){if(a>An)return;a>pn&&(pn=a)}if(a=Vt-En,Un||!(a<0)){if(a/=Un,Un<0){if(a>An)return;a>pn&&(pn=a)}else if(Un>0){if(a<pn)return;a<An&&(An=a)}return pn>0&&(De[0]=hn+pn*Tn,De[1]=En+pn*Un),An<1&&(Ye[0]=hn+An*Tn,Ye[1]=En+An*Un),!0}}}}}(lt,Tt,De,Ye,pt,ct)?We&&(pn.lineStart(),pn.point(Le,Ve),H=!1):(Ie||(pn.lineStart(),pn.point(lt[0],lt[1])),pn.point(Tt[0],Tt[1]),We||pn.lineEnd(),H=!1)}Z=Le,me=Ve,Ie=We}return s}}function Vr(){var Mt,Vt,hn,De=0,Ye=0,pt=960,ct=500;return hn={stream:function(En){return Mt&&Vt===En?Mt:Mt=Qa(De,Ye,pt,ct)(Vt=En)},extent:function(En){return arguments.length?(De=+En[0][0],Ye=+En[0][1],pt=+En[1][0],ct=+En[1][1],Mt=Vt=null,hn):[[De,Ye],[pt,ct]]}}}var l1=k();function Aa(De,Ye){var pt=Ye[0],ct=Ye[1],Mt=[$(pt),-B(pt),0],Vt=0,hn=0;l1.reset();for(var En=0,kn=De.length;En<kn;++En)if(pn=(Xn=De[En]).length)for(var Xn,pn,An=Xn[pn-1],Tn=An[0],Un=An[1]/2+f,a=$(Un),d=B(Un),E=0;E<pn;++E,Tn=Z,a=Ie,d=Xe,An=T){var T=Xn[E],Z=T[0],me=T[1]/2+f,Ie=$(me),Xe=B(me),H=Z-Tn,s=H>=0?1:-1,C=s*H,N=C>v,W=a*Ie;if(l1.add(V(W*s*$(C),d*Xe+W*B(C))),Vt+=N?H+s*_:H,N^Tn>=pt^Z>=pt){var K=qe(tt(An),tt(T));Ne(K);var he=qe(Mt,K);Ne(he);var ge=(N^H>=0?-1:1)*se(he[2]);(ct>ge||ct===ge&&(K[0]||K[1]))&&(hn+=N^H>=0?1:-1)}}return(Vt<-h||Vt<h&&l1<-h)^1&hn}var Ba,lo,aa,xs=k(),Ja={sphere:Ce,point:Ce,lineStart:function Da(){Ja.point=Zs,Ja.lineEnd=Dr},lineEnd:Ce,polygonStart:Ce,polygonEnd:Ce};function Dr(){Ja.point=Ja.lineEnd=Ce}function Zs(De,Ye){Ba=De*=M,lo=$(Ye*=M),aa=B(Ye),Ja.point=B1}function B1(De,Ye){De*=M;var pt=$(Ye*=M),ct=B(Ye),Mt=D(De-Ba),Vt=B(Mt),En=ct*$(Mt),kn=aa*pt-lo*ct*Vt,Xn=lo*pt+aa*ct*Vt;xs.add(V(X(En*En+kn*kn),Xn)),Ba=De,lo=pt,aa=ct}function Io(De){return xs.reset(),pe(De,Ja),+xs}var u1=[null,null],Os={type:"LineString",coordinates:u1};function Yr(De,Ye){return u1[0]=De,u1[1]=Ye,Io(Os)}var To={Feature:function(De,Ye){return Fc(De.geometry,Ye)},FeatureCollection:function(De,Ye){for(var pt=De.features,ct=-1,Mt=pt.length;++ct<Mt;)if(Fc(pt[ct].geometry,Ye))return!0;return!1}},Sn={Sphere:function(){return!0},Point:function(De,Ye){return li(De.coordinates,Ye)},MultiPoint:function(De,Ye){for(var pt=De.coordinates,ct=-1,Mt=pt.length;++ct<Mt;)if(li(pt[ct],Ye))return!0;return!1},LineString:function(De,Ye){return Sc(De.coordinates,Ye)},MultiLineString:function(De,Ye){for(var pt=De.coordinates,ct=-1,Mt=pt.length;++ct<Mt;)if(Sc(pt[ct],Ye))return!0;return!1},Polygon:function(De,Ye){return Vc(De.coordinates,Ye)},MultiPolygon:function(De,Ye){for(var pt=De.coordinates,ct=-1,Mt=pt.length;++ct<Mt;)if(Vc(pt[ct],Ye))return!0;return!1},GeometryCollection:function(De,Ye){for(var pt=De.geometries,ct=-1,Mt=pt.length;++ct<Mt;)if(Fc(pt[ct],Ye))return!0;return!1}};function Fc(De,Ye){return!(!De||!Sn.hasOwnProperty(De.type))&&Sn[De.type](De,Ye)}function li(De,Ye){return 0===Yr(De,Ye)}function Sc(De,Ye){var pt=Yr(De[0],De[1]);return Yr(De[0],Ye)+Yr(Ye,De[1])<=pt+h}function Vc(De,Ye){return!!Aa(De.map(Oa),ps(Ye))}function Oa(De){return(De=De.map(ps)).pop(),De}function ps(De){return[De[0]*M,De[1]*M]}function sa(De,Ye){return(De&&To.hasOwnProperty(De.type)?To[De.type]:Fc)(De,Ye)}function es(De,Ye,pt){var ct=Sa(De,Ye-h,pt).concat(Ye);return function(Mt){return ct.map(function(Vt){return[Mt,Vt]})}}function Mo(De,Ye,pt){var ct=Sa(De,Ye-h,pt).concat(Ye);return function(Mt){return ct.map(function(Vt){return[Vt,Mt]})}}function d1(){var De,Ye,pt,ct,Mt,Vt,hn,En,Tn,Un,a,d,kn=10,Xn=kn,pn=90,An=360,E=2.5;function T(){return{type:"MultiLineString",coordinates:Z()}}function Z(){return Sa(U(ct/pn)*pn,pt,pn).map(a).concat(Sa(U(En/An)*An,hn,An).map(d)).concat(Sa(U(Ye/kn)*kn,De,kn).filter(function(me){return D(me%pn)>h}).map(Tn)).concat(Sa(U(Vt/Xn)*Xn,Mt,Xn).filter(function(me){return D(me%An)>h}).map(Un))}return T.lines=function(){return Z().map(function(me){return{type:"LineString",coordinates:me}})},T.outline=function(){return{type:"Polygon",coordinates:[a(ct).concat(d(hn).slice(1),a(pt).reverse().slice(1),d(En).reverse().slice(1))]}},T.extent=function(me){return arguments.length?T.extentMajor(me).extentMinor(me):T.extentMinor()},T.extentMajor=function(me){return arguments.length?(En=+me[0][1],hn=+me[1][1],(ct=+me[0][0])>(pt=+me[1][0])&&(me=ct,ct=pt,pt=me),En>hn&&(me=En,En=hn,hn=me),T.precision(E)):[[ct,En],[pt,hn]]},T.extentMinor=function(me){return arguments.length?(Vt=+me[0][1],Mt=+me[1][1],(Ye=+me[0][0])>(De=+me[1][0])&&(me=Ye,Ye=De,De=me),Vt>Mt&&(me=Vt,Vt=Mt,Mt=me),T.precision(E)):[[Ye,Vt],[De,Mt]]},T.step=function(me){return arguments.length?T.stepMajor(me).stepMinor(me):T.stepMinor()},T.stepMajor=function(me){return arguments.length?(pn=+me[0],An=+me[1],T):[pn,An]},T.stepMinor=function(me){return arguments.length?(kn=+me[0],Xn=+me[1],T):[kn,Xn]},T.precision=function(me){return arguments.length?(E=+me,Tn=es(Vt,Mt,90),Un=Mo(Ye,De,E),a=es(En,hn,90),d=Mo(ct,pt,E),T):E},T.extentMajor([[-180,-90+h],[180,90-h]]).extentMinor([[-180,-80-h],[180,80+h]])}function Xr(){return d1()()}function zi(De,Ye){var pt=De[0]*M,ct=De[1]*M,Mt=Ye[0]*M,Vt=Ye[1]*M,hn=B(ct),En=$(ct),kn=B(Vt),Xn=$(Vt),pn=hn*B(pt),An=hn*$(pt),Tn=kn*B(Mt),Un=kn*$(Mt),a=2*se(X(ne(Vt-ct)+hn*kn*ne(Mt-pt))),d=$(a),E=a?function(T){var Z=$(T*=a)/d,me=$(a-T)/d,Ie=me*pn+Z*Tn,Xe=me*An+Z*Un,H=me*En+Z*Xn;return[V(Xe,Ie)*S,V(H,X(Ie*Ie+Xe*Xe))*S]}:function(){return[pt*S,ct*S]};return E.distance=a,E}function Hr(De){return De}var ts,$s,Ns,j1,ks=k(),ja=k(),Br={point:Ce,lineStart:Ce,lineEnd:Ce,polygonStart:function(){Br.lineStart=jr,Br.lineEnd=T1},polygonEnd:function(){Br.lineStart=Br.lineEnd=Br.point=Ce,ks.add(D(ja)),ja.reset()},result:function(){var De=ks/2;return ks.reset(),De}};function jr(){Br.point=I1}function I1(De,Ye){Br.point=Lo,ts=Ns=De,$s=j1=Ye}function Lo(De,Ye){ja.add(j1*De-Ns*Ye),Ns=De,j1=Ye}function T1(){Lo(ts,$s)}const ns=Br;var Ec=1/0,Or=Ec,U1=-Ec,vr=U1;const za={point:function hr(De,Ye){De<Ec&&(Ec=De),De>U1&&(U1=De),Ye<Or&&(Or=Ye),Ye>vr&&(vr=Ye)},lineStart:Ce,lineEnd:Ce,polygonStart:Ce,polygonEnd:Ce,result:function(){var De=[[Ec,Or],[U1,vr]];return U1=vr=-(Or=Ec=1/0),De}};var Bc,ar,Pa,rs,Do=0,$r=0,Ir=0,Ua=0,G1=0,Rs=0,is=0,Ga=0,Hc=0,ca={point:wi,lineStart:L1,lineEnd:kr,polygonStart:function(){ca.lineStart=Lr,ca.lineEnd=os},polygonEnd:function(){ca.point=wi,ca.lineStart=L1,ca.lineEnd=kr},result:function(){var De=Hc?[is/Hc,Ga/Hc]:Rs?[Ua/Rs,G1/Rs]:Ir?[Do/Ir,$r/Ir]:[NaN,NaN];return Do=$r=Ir=Ua=G1=Rs=is=Ga=Hc=0,De}};function wi(De,Ye){Do+=De,$r+=Ye,++Ir}function L1(){ca.point=Tr}function Tr(De,Ye){ca.point=In,wi(Pa=De,rs=Ye)}function In(De,Ye){var pt=De-Pa,ct=Ye-rs,Mt=X(pt*pt+ct*ct);Ua+=Mt*(Pa+De)/2,G1+=Mt*(rs+Ye)/2,Rs+=Mt,wi(Pa=De,rs=Ye)}function kr(){ca.point=wi}function Lr(){ca.point=uo}function os(){qs(Bc,ar)}function uo(De,Ye){ca.point=qs,wi(Bc=Pa=De,ar=rs=Ye)}function qs(De,Ye){var pt=De-Pa,ct=Ye-rs,Mt=X(pt*pt+ct*ct);Ua+=Mt*(Pa+De)/2,G1+=Mt*(rs+Ye)/2,Rs+=Mt,is+=(Mt=rs*De-Pa*Ye)*(Pa+De),Ga+=Mt*(rs+Ye),Hc+=3*Mt,wi(Pa=De,rs=Ye)}const bo=ca;function Kc(De){this._context=De}Kc.prototype={_radius:4.5,pointRadius:function(De){return this._radius=De,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(De,Ye){switch(this._point){case 0:this._context.moveTo(De,Ye),this._point=1;break;case 1:this._context.lineTo(De,Ye);break;default:this._context.moveTo(De+this._radius,Ye),this._context.arc(De,Ye,this._radius,0,_)}},result:Ce};var Qc,jc,yc,la,Si,Wa=k(),ur={point:Ce,lineStart:function(){ur.point=ho},lineEnd:function(){Qc&&fo(jc,yc),ur.point=Ce},polygonStart:function(){Qc=!0},polygonEnd:function(){Qc=null},result:function(){var De=+Wa;return Wa.reset(),De}};function ho(De,Ye){ur.point=fo,jc=la=De,yc=Si=Ye}function fo(De,Ye){Wa.add(X((la-=De)*la+(Si-=Ye)*Si)),la=De,Si=Ye}const cc=ur;function po(){this._string=[]}function Fs(De){return"m0,"+De+"a"+De+","+De+" 0 1,1 0,"+-2*De+"a"+De+","+De+" 0 1,1 0,"+2*De+"z"}function pa(De,Ye){var ct,Mt,pt=4.5;function Vt(hn){return hn&&("function"==typeof pt&&Mt.pointRadius(+pt.apply(this,arguments)),pe(hn,ct(Mt))),Mt.result()}return Vt.area=function(hn){return pe(hn,ct(ns)),ns.result()},Vt.measure=function(hn){return pe(hn,ct(cc)),cc.result()},Vt.bounds=function(hn){return pe(hn,ct(za)),za.result()},Vt.centroid=function(hn){return pe(hn,ct(bo)),bo.result()},Vt.projection=function(hn){return arguments.length?(ct=null==hn?(De=null,Hr):(De=hn).stream,Vt):De},Vt.context=function(hn){return arguments.length?(Mt=null==hn?(Ye=null,new po):new Kc(Ye=hn),"function"!=typeof pt&&Mt.pointRadius(pt),Vt):Ye},Vt.pointRadius=function(hn){return arguments.length?(pt="function"==typeof hn?hn:(Mt.pointRadius(+hn),+hn),Vt):pt},Vt.projection(De).context(Ye)}function y1(De,Ye,pt,ct){return function(Mt,Vt){var An,Tn,Un,hn=Ye(Vt),En=Mt.invert(ct[0],ct[1]),kn=Yn(),Xn=Ye(kn),pn=!1,a={point:d,lineStart:T,lineEnd:Z,polygonStart:function(){a.point=me,a.lineStart=Ie,a.lineEnd=Xe,Tn=[],An=[]},polygonEnd:function(){a.point=d,a.lineStart=T,a.lineEnd=Z,Tn=xa(Tn);var H=Aa(An,En);Tn.length?(pn||(Vt.polygonStart(),pn=!0),ft(Tn,qi,H,pt,Vt)):H&&(pn||(Vt.polygonStart(),pn=!0),Vt.lineStart(),pt(null,null,1,Vt),Vt.lineEnd()),pn&&(Vt.polygonEnd(),pn=!1),Tn=An=null},sphere:function(){Vt.polygonStart(),Vt.lineStart(),pt(null,null,1,Vt),Vt.lineEnd(),Vt.polygonEnd()}};function d(H,s){var C=Mt(H,s);De(H=C[0],s=C[1])&&Vt.point(H,s)}function E(H,s){var C=Mt(H,s);hn.point(C[0],C[1])}function T(){a.point=E,hn.lineStart()}function Z(){a.point=d,hn.lineEnd()}function me(H,s){Un.push([H,s]);var C=Mt(H,s);Xn.point(C[0],C[1])}function Ie(){Xn.lineStart(),Un=[]}function Xe(){me(Un[0][0],Un[0][1]),Xn.lineEnd();var C,W,K,he,H=Xn.clean(),s=kn.result(),N=s.length;if(Un.pop(),An.push(Un),Un=null,N){if(1&H){if((W=(K=s[0]).length-1)>0){for(pn||(Vt.polygonStart(),pn=!0),Vt.lineStart(),C=0;C<W;++C)Vt.point((he=K[C])[0],he[1]);Vt.lineEnd()}return}N>1&&2&H&&s.push(s.pop().concat(s.shift())),Tn.push(s.filter(h1))}}return a}}function h1(De){return De.length>1}function qi(De,Ye){return((De=De.x)[0]<0?De[1]-m-h:m-De[1])-((Ye=Ye.x)[0]<0?Ye[1]-m-h:m-Ye[1])}po.prototype={_radius:4.5,_circle:Fs(4.5),pointRadius:function(De){return(De=+De)!==this._radius&&(this._radius=De,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(De,Ye){switch(this._point){case 0:this._string.push("M",De,",",Ye),this._point=1;break;case 1:this._string.push("L",De,",",Ye);break;default:null==this._circle&&(this._circle=Fs(this._radius)),this._string.push("M",De,",",Ye,this._circle)}},result:function(){if(this._string.length){var De=this._string.join("");return this._string=[],De}return null}};const vo=y1(function(){return!0},function ka(De){var Mt,Ye=NaN,pt=NaN,ct=NaN;return{lineStart:function(){De.lineStart(),Mt=1},point:function(Vt,hn){var En=Vt>0?v:-v,kn=D(Vt-Ye);D(kn-v)<h?(De.point(Ye,pt=(pt+hn)/2>0?m:-m),De.point(ct,pt),De.lineEnd(),De.lineStart(),De.point(En,pt),De.point(Vt,pt),Mt=0):ct!==En&&kn>=v&&(D(Ye-ct)<h&&(Ye-=ct*h),D(Vt-En)<h&&(Vt-=En*h),pt=function Ia(De,Ye,pt,ct){var Mt,Vt,hn=$(De-pt);return D(hn)>h?R(($(Ye)*(Vt=B(ct))*$(pt)-$(ct)*(Mt=B(Ye))*$(De))/(Mt*Vt*hn)):(Ye+ct)/2}(Ye,pt,Vt,hn),De.point(ct,pt),De.lineEnd(),De.lineStart(),De.point(En,pt),Mt=0),De.point(Ye=Vt,pt=hn),ct=En},lineEnd:function(){De.lineEnd(),Ye=pt=NaN},clean:function(){return 2-Mt}}},function Gr(De,Ye,pt,ct){var Mt;if(null==De)ct.point(-v,Mt=pt*m),ct.point(0,Mt),ct.point(v,Mt),ct.point(v,0),ct.point(v,-Mt),ct.point(0,-Mt),ct.point(-v,-Mt),ct.point(-v,0),ct.point(-v,Mt);else if(D(De[0]-Ye[0])>h){var Vt=De[0]<Ye[0]?v:-v;ct.point(-Vt,Mt=pt*Vt/2),ct.point(0,Mt),ct.point(Vt,Mt)}else ct.point(Ye[0],Ye[1])},[-v,-m]);function Vs(De){return{stream:Es(De)}}function Es(De){return function(Ye){var pt=new ma;for(var ct in De)pt[ct]=De[ct];return pt.stream=Ye,pt}}function ma(){}function Ea(De,Ye,pt){var ct=Ye[1][0]-Ye[0][0],Mt=Ye[1][1]-Ye[0][1],Vt=De.clipExtent&&De.clipExtent();De.scale(150).translate([0,0]),null!=Vt&&De.clipExtent(null),pe(pt,De.stream(za));var hn=za.result(),En=Math.min(ct/(hn[1][0]-hn[0][0]),Mt/(hn[1][1]-hn[0][1])),kn=+Ye[0][0]+(ct-En*(hn[1][0]+hn[0][0]))/2,Xn=+Ye[0][1]+(Mt-En*(hn[1][1]+hn[0][1]))/2;return null!=Vt&&De.clipExtent(Vt),De.scale(150*En).translate([kn,Xn])}function ua(De,Ye,pt){return Ea(De,[[0,0],Ye],pt)}ma.prototype={constructor:ma,point:function(De,Ye){this.stream.point(De,Ye)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ui=16,lc=B(30*M);function f1(De,Ye){return+Ye?function Ks(De,Ye){function pt(ct,Mt,Vt,hn,En,kn,Xn,pn,An,Tn,Un,a,d,E){var T=Xn-ct,Z=pn-Mt,me=T*T+Z*Z;if(me>4*Ye&&d--){var Ie=hn+Tn,Xe=En+Un,H=kn+a,s=X(Ie*Ie+Xe*Xe+H*H),C=se(H/=s),N=D(D(H)-1)<h||D(Vt-An)<h?(Vt+An)/2:V(Xe,Ie),W=De(N,C),K=W[0],he=W[1],ge=K-ct,we=he-Mt,Le=Z*ge-T*we;(Le*Le/me>Ye||D((T*ge+Z*we)/me-.5)>.3||hn*Tn+En*Un+kn*a<lc)&&(pt(ct,Mt,Vt,hn,En,kn,K,he,N,Ie/=s,Xe/=s,H,d,E),E.point(K,he),pt(K,he,N,Ie,Xe,H,Xn,pn,An,Tn,Un,a,d,E))}}return function(ct){var Mt,Vt,hn,En,kn,Xn,pn,An,Tn,Un,a,d,E={point:T,lineStart:Z,lineEnd:Ie,polygonStart:function(){ct.polygonStart(),E.lineStart=Xe},polygonEnd:function(){ct.polygonEnd(),E.lineStart=Z}};function T(C,N){C=De(C,N),ct.point(C[0],C[1])}function Z(){An=NaN,E.point=me,ct.lineStart()}function me(C,N){var W=tt([C,N]),K=De(C,N);pt(An,Tn,pn,Un,a,d,An=K[0],Tn=K[1],pn=C,Un=W[0],a=W[1],d=W[2],ui,ct),ct.point(An,Tn)}function Ie(){E.point=T,ct.lineEnd()}function Xe(){Z(),E.point=H,E.lineEnd=s}function H(C,N){me(Mt=C,N),Vt=An,hn=Tn,En=Un,kn=a,Xn=d,E.point=me}function s(){pt(An,Tn,pn,Un,a,d,Vt,hn,Mt,En,kn,Xn,ui,ct),E.lineEnd=Ie,Ie()}return E}}(De,Ye):function Ar(De){return Es({point:function(Ye,pt){Ye=De(Ye,pt),this.stream.point(Ye[0],Ye[1])}})}(De)}var gi=Es({point:function(De,Ye){this.stream.point(De*M,Ye*M)}});function So(De){return _1(function(){return De})()}function _1(De){var Ye,Vt,hn,Tn,Un,T,Z,me,s,C,pt=150,ct=480,Mt=250,En=0,kn=0,Xn=0,pn=0,An=0,a=null,d=vo,E=null,Ie=Hr,Xe=.5,H=f1(K,Xe);function N(we){return[(we=Un(we[0]*M,we[1]*M))[0]*pt+Vt,hn-we[1]*pt]}function W(we){return(we=Un.invert((we[0]-Vt)/pt,(hn-we[1])/pt))&&[we[0]*S,we[1]*S]}function K(we,Le){return[(we=Ye(we,Le))[0]*pt+Vt,hn-we[1]*pt]}function he(){Un=co(Tn=Po(Xn,pn,An),Ye);var we=Ye(En,kn);return Vt=ct-we[0]*pt,hn=Mt+we[1]*pt,ge()}function ge(){return s=C=null,N}return N.stream=function(we){return s&&C===we?s:s=gi(d(Tn,H(Ie(C=we))))},N.clipAngle=function(we){return arguments.length?(d=+we?function L2(De,Ye){var pt=B(De),ct=pt>0,Mt=D(pt)>h;function hn(pn,An){return B(pn)*B(An)>pt}function kn(pn,An,Tn){var d=[1,0,0],E=qe(tt(pn),tt(An)),T=it(E,E),Z=E[0],me=T-Z*Z;if(!me)return!Tn&&pn;var Ie=pt*T/me,Xe=-pt*Z/me,H=qe(d,E),s=Te(d,Ie);Oe(s,Te(E,Xe));var N=H,W=it(s,N),K=it(N,N),he=W*W-K*(it(s,s)-1);if(!(he<0)){var ge=X(he),we=Te(N,(-W-ge)/K);if(Oe(we,s),we=Re(we),!Tn)return we;var Tt,Le=pn[0],Ve=An[0],We=pn[1],lt=An[1];Ve<Le&&(Tt=Le,Le=Ve,Ve=Tt);var kt=Ve-Le,Ft=D(kt-v)<h;if(!Ft&&lt<We&&(Tt=We,We=lt,lt=Tt),Ft||kt<h?Ft?We+lt>0^we[1]<(D(we[0]-Le)<h?We:lt):We<=we[1]&&we[1]<=lt:kt>v^(Le<=we[0]&&we[0]<=Ve)){var ln=Te(N,(-W+ge)/K);return Oe(ln,s),[we,Re(ln)]}}}function Xn(pn,An){var Tn=ct?De:v-De,Un=0;return pn<-Tn?Un|=1:pn>Tn&&(Un|=2),An<-Tn?Un|=4:An>Tn&&(Un|=8),Un}return y1(hn,function En(pn){var An,Tn,Un,a,d;return{lineStart:function(){a=Un=!1,d=1},point:function(E,T){var me,Z=[E,T],Ie=hn(E,T),Xe=ct?Ie?0:Xn(E,T):Ie?Xn(E+(E<0?v:-v),T):0;if(!An&&(a=Un=Ie)&&pn.lineStart(),Ie!==Un&&(!(me=kn(An,Z))||Kn(An,me)||Kn(Z,me))&&(Z[0]+=h,Z[1]+=h,Ie=hn(Z[0],Z[1])),Ie!==Un)d=0,Ie?(pn.lineStart(),me=kn(Z,An),pn.point(me[0],me[1])):(me=kn(An,Z),pn.point(me[0],me[1]),pn.lineEnd()),An=me;else if(Mt&&An&&ct^Ie){var H;!(Xe&Tn)&&(H=kn(Z,An,!0))&&(d=0,ct?(pn.lineStart(),pn.point(H[0][0],H[0][1]),pn.point(H[1][0],H[1][1]),pn.lineEnd()):(pn.point(H[1][0],H[1][1]),pn.lineEnd(),pn.lineStart(),pn.point(H[0][0],H[0][1])))}Ie&&(!An||!Kn(An,Z))&&pn.point(Z[0],Z[1]),An=Z,Un=Ie,Tn=Xe},lineEnd:function(){Un&&pn.lineEnd(),An=null},clean:function(){return d|(a&&Un)<<1}}},function Vt(pn,An,Tn,Un){On(Un,De,Ye,Tn,pn,An)},ct?[0,-De]:[-v,De-v])}(a=we*M,6*M):(a=null,vo),ge()):a*S},N.clipExtent=function(we){return arguments.length?(Ie=null==we?(E=T=Z=me=null,Hr):Qa(E=+we[0][0],T=+we[0][1],Z=+we[1][0],me=+we[1][1]),ge()):null==E?null:[[E,T],[Z,me]]},N.scale=function(we){return arguments.length?(pt=+we,he()):pt},N.translate=function(we){return arguments.length?(ct=+we[0],Mt=+we[1],he()):[ct,Mt]},N.center=function(we){return arguments.length?(En=we[0]%360*M,kn=we[1]%360*M,he()):[En*S,kn*S]},N.rotate=function(we){return arguments.length?(Xn=we[0]%360*M,pn=we[1]%360*M,An=we.length>2?we[2]%360*M:0,he()):[Xn*S,pn*S,An*S]},N.precision=function(we){return arguments.length?(H=f1(K,Xe=we*we),ge()):X(Xe)},N.fitExtent=function(we,Le){return Ea(N,we,Le)},N.fitSize=function(we,Le){return ua(N,we,Le)},function(){return Ye=De.apply(this,arguments),N.invert=Ye.invert&&W,he()}}function Qs(De){var Ye=0,pt=v/3,ct=_1(De),Mt=ct(Ye,pt);return Mt.parallels=function(Vt){return arguments.length?ct(Ye=Vt[0]*M,pt=Vt[1]*M):[Ye*S,pt*S]},Mt}function as(De,Ye){var pt=$(De),ct=(pt+$(Ye))/2;if(D(ct)<h)return function da(De){var Ye=B(De);function pt(ct,Mt){return[ct*Ye,$(Mt)/Ye]}return pt.invert=function(ct,Mt){return[ct/Ye,se(Mt*Ye)]},pt}(De);var Mt=1+pt*(2*ct-pt),Vt=X(Mt)/ct;function hn(En,kn){var Xn=X(Mt-2*ct*$(kn))/ct;return[Xn*$(En*=ct),Vt-Xn*B(En)]}return hn.invert=function(En,kn){var Xn=Vt-kn;return[V(En,D(Xn))/ct*oe(Xn),se((Mt-(En*En+Xn*Xn)*ct*ct)/(2*ct))]},hn}function ga(){return Qs(as).scale(155.424).center([0,33.6442])}function d2(){return ga().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ya(){var De,Ye,ct,Vt,En,kn,pt=d2(),Mt=ga().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hn=ga().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Xn={point:function(Tn,Un){kn=[Tn,Un]}};function pn(Tn){var Un=Tn[0],a=Tn[1];return kn=null,ct.point(Un,a),kn||(Vt.point(Un,a),kn)||(En.point(Un,a),kn)}function An(){return De=Ye=null,pn}return pn.invert=function(Tn){var Un=pt.scale(),a=pt.translate(),d=(Tn[0]-a[0])/Un,E=(Tn[1]-a[1])/Un;return(E>=.12&&E<.234&&d>=-.425&&d<-.214?Mt:E>=.166&&E<.234&&d>=-.214&&d<-.115?hn:pt).invert(Tn)},pn.stream=function(Tn){return De&&Ye===Tn?De:De=function Ta(De){var Ye=De.length;return{point:function(pt,ct){for(var Mt=-1;++Mt<Ye;)De[Mt].point(pt,ct)},sphere:function(){for(var pt=-1;++pt<Ye;)De[pt].sphere()},lineStart:function(){for(var pt=-1;++pt<Ye;)De[pt].lineStart()},lineEnd:function(){for(var pt=-1;++pt<Ye;)De[pt].lineEnd()},polygonStart:function(){for(var pt=-1;++pt<Ye;)De[pt].polygonStart()},polygonEnd:function(){for(var pt=-1;++pt<Ye;)De[pt].polygonEnd()}}}([pt.stream(Ye=Tn),Mt.stream(Tn),hn.stream(Tn)])},pn.precision=function(Tn){return arguments.length?(pt.precision(Tn),Mt.precision(Tn),hn.precision(Tn),An()):pt.precision()},pn.scale=function(Tn){return arguments.length?(pt.scale(Tn),Mt.scale(.35*Tn),hn.scale(Tn),pn.translate(pt.translate())):pt.scale()},pn.translate=function(Tn){if(!arguments.length)return pt.translate();var Un=pt.scale(),a=+Tn[0],d=+Tn[1];return ct=pt.translate(Tn).clipExtent([[a-.455*Un,d-.238*Un],[a+.455*Un,d+.238*Un]]).stream(Xn),Vt=Mt.translate([a-.307*Un,d+.201*Un]).clipExtent([[a-.425*Un+h,d+.12*Un+h],[a-.214*Un-h,d+.234*Un-h]]).stream(Xn),En=hn.translate([a-.205*Un,d+.212*Un]).clipExtent([[a-.214*Un+h,d+.166*Un+h],[a-.115*Un-h,d+.234*Un-h]]).stream(Xn),An()},pn.fitExtent=function(Tn,Un){return Ea(pn,Tn,Un)},pn.fitSize=function(Tn,Un){return ua(pn,Tn,Un)},pn.scale(1070)}function Va(De){return function(Ye,pt){var ct=B(Ye),Mt=B(pt),Vt=De(ct*Mt);return[Vt*Mt*$(Ye),Vt*$(pt)]}}function Xa(De){return function(Ye,pt){var ct=X(Ye*Ye+pt*pt),Mt=De(ct),Vt=$(Mt),hn=B(Mt);return[V(Ye*Vt,ct*hn),se(ct&&pt*Vt/ct)]}}var Eo=Va(function(De){return X(2/(1+De))});function Na(){return So(Eo).scale(124.75).clipAngle(179.999)}Eo.invert=Xa(function(De){return 2*se(De/2)});var W1=Va(function(De){return(De=q(De))&&De/$(De)});function ws(){return So(W1).scale(79.4188).clipAngle(179.999)}function b1(De,Ye){return[De,P(ie((m+Ye)/2))]}function rl(){return zc(b1).scale(961/_)}function zc(De){var En,kn,Xn,Ye=So(De),pt=Ye.center,ct=Ye.scale,Mt=Ye.translate,Vt=Ye.clipExtent,hn=null;function pn(){var An=v*ct(),Tn=Ye(wt(Ye.rotate()).invert([0,0]));return Vt(null==hn?[[Tn[0]-An,Tn[1]-An],[Tn[0]+An,Tn[1]+An]]:De===b1?[[Math.max(Tn[0]-An,hn),En],[Math.min(Tn[0]+An,kn),Xn]]:[[hn,Math.max(Tn[1]-An,En)],[kn,Math.min(Tn[1]+An,Xn)]])}return Ye.scale=function(An){return arguments.length?(ct(An),pn()):ct()},Ye.translate=function(An){return arguments.length?(Mt(An),pn()):Mt()},Ye.center=function(An){return arguments.length?(pt(An),pn()):pt()},Ye.clipExtent=function(An){return arguments.length?(null==An?hn=En=kn=Xn=null:(hn=+An[0][0],En=+An[0][1],kn=+An[1][0],Xn=+An[1][1]),pn()):null==hn?null:[[hn,En],[kn,Xn]]},pn()}function Y1(De){return ie((m+De)/2)}function Ao(De,Ye){var pt=B(De),ct=De===Ye?$(De):P(pt/B(Ye))/P(Y1(Ye)/Y1(De)),Mt=pt*Q(Y1(De),ct)/ct;if(!ct)return b1;function Vt(hn,En){Mt>0?En<-m+h&&(En=-m+h):En>m-h&&(En=m-h);var kn=Mt/Q(Y1(En),ct);return[kn*$(ct*hn),Mt-kn*B(ct*hn)]}return Vt.invert=function(hn,En){var kn=Mt-En,Xn=oe(ct)*X(hn*hn+kn*kn);return[V(hn,D(kn))/ct*oe(kn),2*R(Q(Mt/Xn,1/ct))-m]},Vt}function Wr(){return Qs(Ao).scale(109.5).parallels([30,30])}function _c(De,Ye){return[De,Ye]}function Cs(){return So(_c).scale(152.63)}function ol(De,Ye){var pt=B(De),ct=De===Ye?$(De):(pt-B(Ye))/(Ye-De),Mt=pt/ct+De;if(D(ct)<h)return _c;function Vt(hn,En){var kn=Mt-En,Xn=ct*hn;return[kn*$(Xn),Mt-kn*B(Xn)]}return Vt.invert=function(hn,En){var kn=Mt-En;return[V(hn,D(kn))/ct*oe(kn),Mt-oe(ct)*X(hn*hn+kn*kn)]},Vt}function D2(){return Qs(ol).scale(131.154).center([0,13.9389])}function ss(De,Ye){var pt=B(Ye),ct=B(De)*pt;return[pt*$(De)/ct,$(Ye)/ct]}function tu(){return So(ss).scale(144.049).clipAngle(60)}function Za(De,Ye,pt,ct){return 1===De&&1===Ye&&0===pt&&0===ct?Hr:Es({point:function(Mt,Vt){this.stream.point(Mt*De+pt,Vt*Ye+ct)}})}function W2(){var En,kn,Xn,An,Tn,Un,De=1,Ye=0,pt=0,ct=1,Mt=1,Vt=Hr,hn=null,pn=Hr;function a(){return An=Tn=null,Un}return Un={stream:function(d){return An&&Tn===d?An:An=Vt(pn(Tn=d))},clipExtent:function(d){return arguments.length?(pn=null==d?(hn=En=kn=Xn=null,Hr):Qa(hn=+d[0][0],En=+d[0][1],kn=+d[1][0],Xn=+d[1][1]),a()):null==hn?null:[[hn,En],[kn,Xn]]},scale:function(d){return arguments.length?(Vt=Za((De=+d)*ct,De*Mt,Ye,pt),a()):De},translate:function(d){return arguments.length?(Vt=Za(De*ct,De*Mt,Ye=+d[0],pt=+d[1]),a()):[Ye,pt]},reflectX:function(d){return arguments.length?(Vt=Za(De*(ct=d?-1:1),De*Mt,Ye,pt),a()):ct<0},reflectY:function(d){return arguments.length?(Vt=Za(De*ct,De*(Mt=d?-1:1),Ye,pt),a()):Mt<0},fitExtent:function(d,E){return Ea(Un,d,E)},fitSize:function(d,E){return ua(Un,d,E)}}}function Hi(De,Ye){var pt=Ye*Ye,ct=pt*pt;return[De*(.8707-.131979*pt+ct*(ct*(.003971*pt-.001529*ct)-.013791)),Ye*(1.007226+pt*(.015085+ct*(.028874*pt-.044475-.005916*ct)))]}function _r(){return So(Hi).scale(175.295)}function h2(De,Ye){return[B(Ye)*$(De),$(Ye)]}function D1(){return So(h2).scale(249.5).clipAngle(90+h)}function Uc(De,Ye){var pt=B(Ye),ct=1+B(De)*pt;return[pt*$(De)/ct,$(Ye)/ct]}function Hs(){return So(Uc).scale(250).clipAngle(142)}function Pc(De,Ye){return[P(ie((m+Ye)/2)),-De]}function ms(){var De=zc(Pc),Ye=De.center,pt=De.rotate;return De.center=function(ct){return arguments.length?Ye([-ct[1],ct[0]]):[(ct=Ye())[1],-ct[0]]},De.rotate=function(ct){return arguments.length?pt([ct[0],ct[1],ct.length>2?ct[2]+90:90]):[(ct=pt())[0],ct[1],ct[2]-90]},pt([0,0,90]).scale(159.155)}W1.invert=Xa(function(De){return De}),b1.invert=function(De,Ye){return[De,2*R(F(Ye))-m]},_c.invert=_c,ss.invert=Xa(R),Hi.invert=function(De,Ye){var Mt,pt=Ye,ct=25;do{var Vt=pt*pt,hn=Vt*Vt;pt-=Mt=(pt*(1.007226+Vt*(.015085+hn*(.028874*Vt-.044475-.005916*hn)))-Ye)/(1.007226+Vt*(.045255+hn*(.259866*Vt-.311325-.005916*11*hn)))}while(D(Mt)>h&&--ct>0);return[De/(.8707+(Vt=pt*pt)*(Vt*(Vt*Vt*Vt*(.003971-.001529*Vt)-.013791)-.131979)),pt]},h2.invert=Xa(se),Uc.invert=Xa(function(De){return 2*R(De)}),Pc.invert=function(De,Ye){return[-Ye,2*R(F(De))-m]}},49863:(Ae,y,w)=>{"use strict";function k(He){return function(){return He}}function G(He){return He[0]}function I(He){return He[1]}function u(){this._=null}function h(He){He.U=He.C=He.L=He.R=He.P=He.N=null}function g(He,Pe){var je=Pe,ht=Pe.R,Re=je.U;Re?Re.L===je?Re.L=ht:Re.R=ht:He._=ht,ht.U=Re,je.U=ht,je.R=ht.L,je.R&&(je.R.U=je),ht.L=je}function v(He,Pe){var je=Pe,ht=Pe.L,Re=je.U;Re?Re.L===je?Re.L=ht:Re.R=ht:He._=ht,ht.U=Re,je.U=ht,je.L=ht.R,je.L&&(je.L.U=je),ht.R=je}function m(He){for(;He.L;)He=He.L;return He}w.r(y),w.d(y,{voronoi:()=>$e}),u.prototype={constructor:u,insert:function(He,Pe){var je,ht,Re;if(He){if(Pe.P=He,Pe.N=He.N,He.N&&(He.N.P=Pe),He.N=Pe,He.R){for(He=He.R;He.L;)He=He.L;He.L=Pe}else He.R=Pe;je=He}else this._?(He=m(this._),Pe.P=null,Pe.N=He,He.P=He.L=Pe,je=He):(Pe.P=Pe.N=null,this._=Pe,je=null);for(Pe.L=Pe.R=null,Pe.U=je,Pe.C=!0,He=Pe;je&&je.C;)je===(ht=je.U).L?(Re=ht.R)&&Re.C?(je.C=Re.C=!1,ht.C=!0,He=ht):(He===je.R&&(g(this,je),je=(He=je).U),je.C=!1,ht.C=!0,v(this,ht)):(Re=ht.L)&&Re.C?(je.C=Re.C=!1,ht.C=!0,He=ht):(He===je.L&&(v(this,je),je=(He=je).U),je.C=!1,ht.C=!0,g(this,ht)),je=He.U;this._.C=!1},remove:function(He){He.N&&(He.N.P=He.P),He.P&&(He.P.N=He.N),He.N=He.P=null;var je,tt,it,Pe=He.U,ht=He.L,Re=He.R;if(tt=ht?Re?m(Re):ht:Re,Pe?Pe.L===He?Pe.L=tt:Pe.R=tt:this._=tt,ht&&Re?(it=tt.C,tt.C=He.C,tt.L=ht,ht.U=tt,tt!==Re?(Pe=tt.U,tt.U=He.U,Pe.L=He=tt.R,tt.R=Re,Re.U=tt):(tt.U=Pe,Pe=tt,He=tt.R)):(it=He.C,He=tt),He&&(He.U=Pe),!it){if(He&&He.C)return void(He.C=!1);do{if(He===this._)break;if(He===Pe.L){if((je=Pe.R).C&&(je.C=!1,Pe.C=!0,g(this,Pe),je=Pe.R),je.L&&je.L.C||je.R&&je.R.C){(!je.R||!je.R.C)&&(je.L.C=!1,je.C=!0,v(this,je),je=Pe.R),je.C=Pe.C,Pe.C=je.R.C=!1,g(this,Pe),He=this._;break}}else if((je=Pe.L).C&&(je.C=!1,Pe.C=!0,v(this,Pe),je=Pe.L),je.L&&je.L.C||je.R&&je.R.C){(!je.L||!je.L.C)&&(je.R.C=!1,je.C=!0,g(this,je),je=Pe.L),je.C=Pe.C,Pe.C=je.L.C=!1,v(this,Pe),He=this._;break}je.C=!0,He=Pe,Pe=Pe.U}while(!He.C);He&&(He.C=!1)}}};const f=u;function _(He,Pe,je,ht){var Re=[null,null],tt=_e.push(Re)-1;return Re.left=He,Re.right=Pe,je&&M(Re,He,Pe,je),ht&&M(Re,Pe,He,ht),ye[He.index].halfedges.push(tt),ye[Pe.index].halfedges.push(tt),Re}function S(He,Pe,je){var ht=[Pe,je];return ht.left=He,ht}function M(He,Pe,je,ht){He[0]||He[1]?He.left===je?He[1]=ht:He[0]=ht:(He[0]=ht,He.left=Pe,He.right=je)}function D(He,Pe,je,ht,Re){var Qt,tt=He[0],it=He[1],qe=tt[0],Oe=tt[1],rt=0,xt=1,gt=it[0]-qe,on=it[1]-Oe;if(Qt=Pe-qe,gt||!(Qt>0)){if(Qt/=gt,gt<0){if(Qt<rt)return;Qt<xt&&(xt=Qt)}else if(gt>0){if(Qt>xt)return;Qt>rt&&(rt=Qt)}if(Qt=ht-qe,gt||!(Qt<0)){if(Qt/=gt,gt<0){if(Qt>xt)return;Qt>rt&&(rt=Qt)}else if(gt>0){if(Qt<rt)return;Qt<xt&&(xt=Qt)}if(Qt=je-Oe,on||!(Qt>0)){if(Qt/=on,on<0){if(Qt<rt)return;Qt<xt&&(xt=Qt)}else if(on>0){if(Qt>xt)return;Qt>rt&&(rt=Qt)}if(Qt=Re-Oe,on||!(Qt<0)){if(Qt/=on,on<0){if(Qt>xt)return;Qt>rt&&(rt=Qt)}else if(on>0){if(Qt<rt)return;Qt<xt&&(xt=Qt)}return!(rt>0)&&!(xt<1)||(rt>0&&(He[0]=[qe+rt*gt,Oe+rt*on]),xt<1&&(He[1]=[qe+xt*gt,Oe+xt*on])),!0}}}}}function R(He,Pe,je,ht,Re){var tt=He[1];if(tt)return!0;var Qt,Gt,it=He[0],qe=He.left,Oe=He.right,Te=qe[0],Ne=qe[1],rt=Oe[0],xt=Oe[1],gt=(Te+rt)/2;if(xt===Ne){if(gt<Pe||gt>=ht)return;if(Te>rt){if(it){if(it[1]>=Re)return}else it=[gt,je];tt=[gt,Re]}else{if(it){if(it[1]<je)return}else it=[gt,Re];tt=[gt,je]}}else if(Gt=(Ne+xt)/2-(Qt=(Te-rt)/(xt-Ne))*gt,Qt<-1||Qt>1)if(Te>rt){if(it){if(it[1]>=Re)return}else it=[(je-Gt)/Qt,je];tt=[(Re-Gt)/Qt,Re]}else{if(it){if(it[1]<je)return}else it=[(Re-Gt)/Qt,Re];tt=[(je-Gt)/Qt,je]}else if(Ne<xt){if(it){if(it[0]>=ht)return}else it=[Pe,Qt*Pe+Gt];tt=[ht,Qt*ht+Gt]}else{if(it){if(it[0]<Pe)return}else it=[ht,Qt*ht+Gt];tt=[Pe,Qt*Pe+Gt]}return He[0]=it,He[1]=tt,!0}function U(He,Pe){var je=He.site,ht=Pe.left,Re=Pe.right;return je===Re&&(Re=ht,ht=je),Re?Math.atan2(Re[1]-ht[1],Re[0]-ht[0]):(je===ht?(ht=Pe[1],Re=Pe[0]):(ht=Pe[0],Re=Pe[1]),Math.atan2(ht[0]-Re[0],Re[1]-ht[1]))}function F(He,Pe){return Pe[+(Pe.left!==He.site)]}function j(He,Pe){return Pe[+(Pe.left===He.site)]}var oe,$=[];function X(){h(this),this.x=this.y=this.arc=this.site=this.cy=null}function ie(He){var Pe=He.P,je=He.N;if(Pe&&je){var ht=Pe.site,Re=He.site,tt=je.site;if(ht!==tt){var it=Re[0],qe=Re[1],Oe=ht[0]-it,Te=ht[1]-qe,Ne=tt[0]-it,rt=tt[1]-qe,xt=2*(Oe*rt-Te*Ne);if(!(xt>=-ce)){var gt=Oe*Oe+Te*Te,on=Ne*Ne+rt*rt,Qt=(rt*gt-Te*on)/xt,Gt=(Oe*on-Ne*gt)/xt,Vn=$.pop()||new X;Vn.arc=He,Vn.site=Re,Vn.x=Qt+it,Vn.y=(Vn.cy=Gt+qe)+Math.sqrt(Qt*Qt+Gt*Gt),He.circle=Vn;for(var un=null,an=Me._;an;)if(Vn.y<an.y||Vn.y===an.y&&Vn.x<=an.x){if(!an.L){un=an.P;break}an=an.L}else{if(!an.R){un=an;break}an=an.R}Me.insert(un,Vn),un||(oe=Vn)}}}}function q(He){var Pe=He.circle;Pe&&(Pe.P||(oe=Pe.N),Me.remove(Pe),$.push(Pe),h(Pe),He.circle=null)}var se=[];function ne(){h(this),this.edge=this.site=this.circle=null}function Ce(He){var Pe=se.pop()||new ne;return Pe.site=He,Pe}function xe(He){q(He),ae.remove(He),se.push(He),h(He)}function ue(He){var Pe=He.circle,je=Pe.x,ht=Pe.cy,Re=[je,ht],tt=He.P,it=He.N,qe=[He];xe(He);for(var Oe=tt;Oe.circle&&Math.abs(je-Oe.circle.x)<pe&&Math.abs(ht-Oe.circle.cy)<pe;)tt=Oe.P,qe.unshift(Oe),xe(Oe),Oe=tt;qe.unshift(Oe),q(Oe);for(var Te=it;Te.circle&&Math.abs(je-Te.circle.x)<pe&&Math.abs(ht-Te.circle.cy)<pe;)it=Te.N,qe.push(Te),xe(Te),Te=it;qe.push(Te),q(Te);var rt,Ne=qe.length;for(rt=1;rt<Ne;++rt)M((Te=qe[rt]).edge,(Oe=qe[rt-1]).site,Te.site,Re);(Te=qe[Ne-1]).edge=_((Oe=qe[0]).site,Te.site,null,Re),ie(Oe),ie(Te)}function fe(He){for(var ht,Re,tt,it,Pe=He[0],je=He[1],qe=ae._;qe;)if((tt=ee(qe,je)-Pe)>pe)qe=qe.L;else{if(!((it=Pe-de(qe,je))>pe)){tt>-pe?(ht=qe.P,Re=qe):it>-pe?(ht=qe,Re=qe.N):ht=Re=qe;break}if(!qe.R){ht=qe;break}qe=qe.R}!function B(He){ye[He.index]={site:He,halfedges:[]}}(He);var Oe=Ce(He);if(ae.insert(ht,Oe),ht||Re){if(ht===Re)return q(ht),Re=Ce(ht.site),ae.insert(Oe,Re),Oe.edge=Re.edge=_(ht.site,Oe.site),ie(ht),void ie(Re);if(!Re)return void(Oe.edge=_(ht.site,Oe.site));q(ht),q(Re);var Te=ht.site,Ne=Te[0],rt=Te[1],xt=He[0]-Ne,gt=He[1]-rt,on=Re.site,Qt=on[0]-Ne,Gt=on[1]-rt,Vn=2*(xt*Gt-gt*Qt),un=xt*xt+gt*gt,an=Qt*Qt+Gt*Gt,cn=[(Gt*un-gt*an)/Vn+Ne,(xt*an-Qt*un)/Vn+rt];M(Re.edge,Te,on,cn),Oe.edge=_(Te,He,null,cn),Re.edge=_(He,on,null,cn),ie(ht),ie(Re)}}function ee(He,Pe){var je=He.site,ht=je[0],Re=je[1],tt=Re-Pe;if(!tt)return ht;var it=He.P;if(!it)return-1/0;var qe=(je=it.site)[0],Oe=je[1],Te=Oe-Pe;if(!Te)return qe;var Ne=qe-ht,rt=1/tt-1/Te,xt=Ne/Te;return rt?(-xt+Math.sqrt(xt*xt-2*rt*(Ne*Ne/(-2*Te)-Oe+Te/2+Re-tt/2)))/rt+ht:(ht+qe)/2}function de(He,Pe){var je=He.N;if(je)return ee(je,Pe);var ht=He.site;return ht[1]===Pe?ht[0]:1/0}var ae,ye,Me,_e,pe=1e-6,ce=1e-12;function Fe(He,Pe,je){return(He[0]-je[0])*(Pe[1]-He[1])-(He[0]-Pe[0])*(je[1]-He[1])}function Ue(He,Pe){return Pe[1]-He[1]||Pe[0]-He[0]}function Ge(He,Pe){var ht,Re,tt,je=He.sort(Ue).pop();for(_e=[],ye=new Array(He.length),ae=new f,Me=new f;;)if(tt=oe,je&&(!tt||je[1]<tt.y||je[1]===tt.y&&je[0]<tt.x))(je[0]!==ht||je[1]!==Re)&&(fe(je),ht=je[0],Re=je[1]),je=He.pop();else{if(!tt)break;ue(tt.arc)}if(function P(){for(var je,ht,Re,tt,He=0,Pe=ye.length;He<Pe;++He)if((je=ye[He])&&(tt=(ht=je.halfedges).length)){var it=new Array(tt),qe=new Array(tt);for(Re=0;Re<tt;++Re)it[Re]=Re,qe[Re]=U(je,_e[ht[Re]]);for(it.sort(function(Oe,Te){return qe[Te]-qe[Oe]}),Re=0;Re<tt;++Re)qe[Re]=ht[it[Re]];for(Re=0;Re<tt;++Re)ht[Re]=qe[Re]}}(),Pe){var it=+Pe[0][0],qe=+Pe[0][1],Oe=+Pe[1][0],Te=+Pe[1][1];(function V(He,Pe,je,ht){for(var tt,Re=_e.length;Re--;)R(tt=_e[Re],He,Pe,je,ht)&&D(tt,He,Pe,je,ht)&&(Math.abs(tt[0][0]-tt[1][0])>pe||Math.abs(tt[0][1]-tt[1][1])>pe)||delete _e[Re]})(it,qe,Oe,Te),function Q(He,Pe,je,ht){var tt,it,qe,Oe,Te,Ne,rt,xt,gt,on,Qt,Gt,Re=ye.length,Vn=!0;for(tt=0;tt<Re;++tt)if(it=ye[tt]){for(qe=it.site,Oe=(Te=it.halfedges).length;Oe--;)_e[Te[Oe]]||Te.splice(Oe,1);for(Oe=0,Ne=Te.length;Oe<Ne;)Qt=(on=j(it,_e[Te[Oe]]))[0],Gt=on[1],xt=(rt=F(it,_e[Te[++Oe%Ne]]))[0],gt=rt[1],(Math.abs(Qt-xt)>pe||Math.abs(Gt-gt)>pe)&&(Te.splice(Oe,0,_e.push(S(qe,on,Math.abs(Qt-He)<pe&&ht-Gt>pe?[He,Math.abs(xt-He)<pe?gt:ht]:Math.abs(Gt-ht)<pe&&je-Qt>pe?[Math.abs(gt-ht)<pe?xt:je,ht]:Math.abs(Qt-je)<pe&&Gt-Pe>pe?[je,Math.abs(xt-je)<pe?gt:Pe]:Math.abs(Gt-Pe)<pe&&Qt-He>pe?[Math.abs(gt-Pe)<pe?xt:He,Pe]:null))-1),++Ne);Ne&&(Vn=!1)}if(Vn){var un,an,cn,_i=1/0;for(tt=0,Vn=null;tt<Re;++tt)(it=ye[tt])&&(cn=(un=(qe=it.site)[0]-He)*un+(an=qe[1]-Pe)*an)<_i&&(_i=cn,Vn=it);if(Vn){var vi=[He,Pe],qn=[He,ht],Pi=[je,ht],ci=[je,Pe];Vn.halfedges.push(_e.push(S(qe=Vn.site,vi,qn))-1,_e.push(S(qe,qn,Pi))-1,_e.push(S(qe,Pi,ci))-1,_e.push(S(qe,ci,vi))-1)}}for(tt=0;tt<Re;++tt)(it=ye[tt])&&(it.halfedges.length||delete ye[tt])}(it,qe,Oe,Te)}this.edges=_e,this.cells=ye,ae=Me=_e=ye=null}function $e(){var He=G,Pe=I,je=null;function ht(Re){return new Ge(Re.map(function(tt,it){var qe=[Math.round(He(tt,it,Re)/pe)*pe,Math.round(Pe(tt,it,Re)/pe)*pe];return qe.index=it,qe.data=tt,qe}),je)}return ht.polygons=function(Re){return ht(Re).polygons()},ht.links=function(Re){return ht(Re).links()},ht.triangles=function(Re){return ht(Re).triangles()},ht.x=function(Re){return arguments.length?(He="function"==typeof Re?Re:k(+Re),ht):He},ht.y=function(Re){return arguments.length?(Pe="function"==typeof Re?Re:k(+Re),ht):Pe},ht.extent=function(Re){return arguments.length?(je=null==Re?null:[[+Re[0][0],+Re[0][1]],[+Re[1][0],+Re[1][1]]],ht):je&&[[je[0][0],je[0][1]],[je[1][0],je[1][1]]]},ht.size=function(Re){return arguments.length?(je=null==Re?null:[[0,0],[+Re[0],+Re[1]]],ht):je&&[je[1][0]-je[0][0],je[1][1]-je[0][1]]},ht}Ge.prototype={constructor:Ge,polygons:function(){var He=this.edges;return this.cells.map(function(Pe){var je=Pe.halfedges.map(function(ht){return F(Pe,He[ht])});return je.data=Pe.site.data,je})},triangles:function(){var He=[],Pe=this.edges;return this.cells.forEach(function(je,ht){if(qe=(tt=je.halfedges).length)for(var tt,qe,Oe,Re=je.site,it=-1,Te=Pe[tt[qe-1]],Ne=Te.left===Re?Te.right:Te.left;++it<qe;)Oe=Ne,Ne=(Te=Pe[tt[it]]).left===Re?Te.right:Te.left,Oe&&Ne&&ht<Oe.index&&ht<Ne.index&&Fe(Re,Oe,Ne)<0&&He.push([Re.data,Oe.data,Ne.data])}),He},links:function(){return this.edges.filter(function(He){return He.right}).map(function(He){return{source:He.left.data,target:He.right.data}})},find:function(He,Pe,je){for(var Re,qe,ht=this,tt=ht._found||0,it=ht.cells.length;!(qe=ht.cells[tt]);)if(++tt>=it)return null;var Oe=He-qe.site[0],Te=Pe-qe.site[1],Ne=Oe*Oe+Te*Te;do{qe=ht.cells[Re=tt],tt=null,qe.halfedges.forEach(function(rt){var xt=ht.edges[rt],gt=xt.left;if(gt!==qe.site&&gt||(gt=xt.right)){var on=He-gt[0],Qt=Pe-gt[1],Gt=on*on+Qt*Qt;Gt<Ne&&(Ne=Gt,tt=gt.index)}})}while(null!==tt);return ht._found=Re,null==je||Ne<=je*je?qe.site:null}}},27024:function(Ae,y,w){var k,u;u=function(G){var I=["N","E","A","D"];function u(X,ie){X.super_=ie,X.prototype=Object.create(ie.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}})}function h(X,ie){Object.defineProperty(this,"kind",{value:X,enumerable:!0}),ie&&ie.length&&Object.defineProperty(this,"path",{value:ie,enumerable:!0})}function g(X,ie,q){g.super_.call(this,"E",X),Object.defineProperty(this,"lhs",{value:ie,enumerable:!0}),Object.defineProperty(this,"rhs",{value:q,enumerable:!0})}function v(X,ie){v.super_.call(this,"N",X),Object.defineProperty(this,"rhs",{value:ie,enumerable:!0})}function m(X,ie){m.super_.call(this,"D",X),Object.defineProperty(this,"lhs",{value:ie,enumerable:!0})}function f(X,ie,q){f.super_.call(this,"A",X),Object.defineProperty(this,"index",{value:ie,enumerable:!0}),Object.defineProperty(this,"item",{value:q,enumerable:!0})}function _(X,ie,q){var se=X.slice((q||ie)+1||X.length);return X.length=ie<0?X.length+ie:ie,X.push.apply(X,se),X}function S(X){var ie=typeof X;return"object"!==ie?ie:X===Math?"math":null===X?"null":Array.isArray(X)?"array":"[object Date]"===Object.prototype.toString.call(X)?"date":"function"==typeof X.toString&&/^\/.*\//.test(X.toString())?"regexp":"object"}function M(X){var ie=0;if(0===X.length)return ie;for(var q=0;q<X.length;q++)ie=(ie<<5)-ie+X.charCodeAt(q),ie&=ie;return ie}function D(X){var ie=0,q=S(X);if("array"===q)return X.forEach(function(ue){ie+=D(ue)}),ie+M("[type: array, hash: "+ie+"]");if("object"===q){for(var ne in X)if(X.hasOwnProperty(ne)){var Ce="[ type: object, key: "+ne+", value hash: "+D(X[ne])+"]";ie+=M(Ce)}return ie}return ie+M("[ type: "+q+" ; value: "+X+"]")}function R(X,ie,q,se,ne,Ce,xe,ue){q=q||[],xe=xe||[];var fe=(ne=ne||[]).slice(0);if(typeof Ce<"u"&&null!==Ce){if(se){if("function"==typeof se&&se(fe,Ce))return;if("object"==typeof se){if(se.prefilter&&se.prefilter(fe,Ce))return;if(se.normalize){var ee=se.normalize(fe,Ce,X,ie);ee&&(X=ee[0],ie=ee[1])}}}fe.push(Ce)}"regexp"===S(X)&&"regexp"===S(ie)&&(X=X.toString(),ie=ie.toString());var ce,ae,ye,Me,de=typeof X,pe=typeof ie,_e="undefined"!==de||xe&&xe.length>0&&xe[xe.length-1].lhs&&Object.getOwnPropertyDescriptor(xe[xe.length-1].lhs,Ce),Fe="undefined"!==pe||xe&&xe.length>0&&xe[xe.length-1].rhs&&Object.getOwnPropertyDescriptor(xe[xe.length-1].rhs,Ce);if(!_e&&Fe)q.push(new v(fe,ie));else if(!Fe&&_e)q.push(new m(fe,X));else if(S(X)!==S(ie))q.push(new g(fe,X,ie));else if("date"===S(X)&&X-ie!=0)q.push(new g(fe,X,ie));else if("object"===de&&null!==X&&null!==ie){for(ce=xe.length-1;ce>-1;--ce)if(xe[ce].lhs===X){Me=!0;break}if(Me)X!==ie&&q.push(new g(fe,X,ie));else{if(xe.push({lhs:X,rhs:ie}),Array.isArray(X)){for(ue&&(X.sort(function($e,He){return D($e)-D(He)}),ie.sort(function($e,He){return D($e)-D(He)})),ce=ie.length-1,ae=X.length-1;ce>ae;)q.push(new f(fe,ce,new v(void 0,ie[ce--])));for(;ae>ce;)q.push(new f(fe,ae,new m(void 0,X[ae--])));for(;ce>=0;--ce)R(X[ce],ie[ce],q,se,fe,ce,xe,ue)}else{var Ue=Object.keys(X),Ge=Object.keys(ie);for(ce=0;ce<Ue.length;++ce)(Me=Ge.indexOf(ye=Ue[ce]))>=0?(R(X[ye],ie[ye],q,se,fe,ye,xe,ue),Ge[Me]=null):R(X[ye],void 0,q,se,fe,ye,xe,ue);for(ce=0;ce<Ge.length;++ce)(ye=Ge[ce])&&R(void 0,ie[ye],q,se,fe,ye,xe,ue)}xe.length=xe.length-1}}else X!==ie&&("number"===de&&isNaN(X)&&isNaN(ie)||q.push(new g(fe,X,ie)))}function V(X,ie,q,se,ne){var Ce=[];if(R(X,ie,Ce,se,null,null,null,ne),q)for(var xe=0;xe<Ce.length;++xe)q(Ce[xe]);return Ce}function U(X,ie,q,se){var Ce=V(X,ie,se?function(xe){xe&&se.push(xe)}:void 0,q);return se||(Ce.length?Ce:void 0)}function j(X,ie,q){if(q.path&&q.path.length){var ne,se=X[ie],Ce=q.path.length-1;for(ne=0;ne<Ce;ne++)se=se[q.path[ne]];switch(q.kind){case"A":j(se[q.path[ne]],q.index,q.item);break;case"D":delete se[q.path[ne]];break;case"E":case"N":se[q.path[ne]]=q.rhs}}else switch(q.kind){case"A":j(X[ie],q.index,q.item);break;case"D":X=_(X,ie);break;case"E":case"N":X[ie]=q.rhs}return X}function P(X,ie,q){if(typeof q>"u"&&ie&&~I.indexOf(ie.kind)&&(q=ie),X&&q&&q.kind){for(var se=X,ne=-1,Ce=q.path?q.path.length-1:0;++ne<Ce;)typeof se[q.path[ne]]>"u"&&(se[q.path[ne]]=typeof q.path[ne+1]<"u"&&"number"==typeof q.path[ne+1]?[]:{}),se=se[q.path[ne]];switch(q.kind){case"A":q.path&&typeof se[q.path[ne]]>"u"&&(se[q.path[ne]]=[]),j(q.path?se[q.path[ne]]:se,q.index,q.item);break;case"D":delete se[q.path[ne]];break;case"E":case"N":se[q.path[ne]]=q.rhs}}}function Q(X,ie,q){if(q.path&&q.path.length){var ne,se=X[ie],Ce=q.path.length-1;for(ne=0;ne<Ce;ne++)se=se[q.path[ne]];switch(q.kind){case"A":Q(se[q.path[ne]],q.index,q.item);break;case"D":case"E":se[q.path[ne]]=q.lhs;break;case"N":delete se[q.path[ne]]}}else switch(q.kind){case"A":Q(X[ie],q.index,q.item);break;case"D":case"E":X[ie]=q.lhs;break;case"N":X=_(X,ie)}return X}return u(g,h),u(v,h),u(m,h),u(f,h),Object.defineProperties(U,{diff:{value:U,enumerable:!0},orderIndependentDiff:{value:function F(X,ie,q,se){var Ce=V(X,ie,se?function(xe){xe&&se.push(xe)}:void 0,q,!0);return se||(Ce.length?Ce:void 0)},enumerable:!0},observableDiff:{value:V,enumerable:!0},orderIndependentObservableDiff:{value:function B(X,ie,q,se,ne,Ce,xe){return R(X,ie,q,se,ne,Ce,xe,!0)},enumerable:!0},orderIndepHash:{value:D,enumerable:!0},applyDiff:{value:function oe(X,ie,q){X&&ie&&V(X,ie,function(ne){(!q||q(X,ie,ne))&&P(X,ie,ne)})},enumerable:!0},applyChange:{value:P,enumerable:!0},revertChange:{value:function $(X,ie,q){if(X&&ie&&q&&q.kind){var ne,Ce,se=X;for(Ce=q.path.length-1,ne=0;ne<Ce;ne++)typeof se[q.path[ne]]>"u"&&(se[q.path[ne]]={}),se=se[q.path[ne]];switch(q.kind){case"A":Q(se[q.path[ne]],q.index,q.item);break;case"D":case"E":se[q.path[ne]]=q.lhs;break;case"N":delete se[q.path[ne]]}}},enumerable:!0},isConflict:{value:function(){return typeof $conflict<"u"},enumerable:!0}}),U.DeepDiff=U,G&&(G.DeepDiff=U),U}(this),void 0!==(k=function(){return u}.call(y,w,y,Ae))&&(Ae.exports=k)},83970:(Ae,y,w)=>{var k=w(67809),G=w(98147),I=w(20314),u=w(34720),h=w(1139),g=w(32365),v=Date.prototype.getTime;function f(M){return null==M}function _(M){return!(!M||"object"!=typeof M||"number"!=typeof M.length||"function"!=typeof M.copy||"function"!=typeof M.slice||M.length>0&&"number"!=typeof M[0])}Ae.exports=function m(M,D,R){var V=R||{};return!!(V.strict?I(M,D):M===D)||(!M||!D||"object"!=typeof M&&"object"!=typeof D?V.strict?I(M,D):M==D:function S(M,D,R){var V,B;if(typeof M!=typeof D||f(M)||f(D)||M.prototype!==D.prototype||G(M)!==G(D))return!1;var U=u(M),F=u(D);if(U!==F)return!1;if(U||F)return M.source===D.source&&h(M)===h(D);if(g(M)&&g(D))return v.call(M)===v.call(D);var j=_(M),P=_(D);if(j!==P)return!1;if(j||P){if(M.length!==D.length)return!1;for(V=0;V<M.length;V++)if(M[V]!==D[V])return!1;return!0}if(typeof M!=typeof D)return!1;try{var Q=k(M),$=k(D)}catch{return!1}if(Q.length!==$.length)return!1;for(Q.sort(),$.sort(),V=Q.length-1;V>=0;V--)if(Q[V]!=$[V])return!1;for(V=Q.length-1;V>=0;V--)if(!m(M[B=Q[V]],D[B],R))return!1;return!0}(M,D,V))}},21648:(Ae,y,w)=>{"use strict";var k=w(67809),G="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),I=Object.prototype.toString,u=Array.prototype.concat,h=Object.defineProperty,v=w(2486)(),m=h&&v,f=function(S,M,D,R){if(M in S)if(!0===R){if(S[M]===D)return}else if(!function(S){return"function"==typeof S&&"[object Function]"===I.call(S)}(R)||!R())return;m?h(S,M,{configurable:!0,enumerable:!1,value:D,writable:!0}):S[M]=D},_=function(S,M){var D=arguments.length>2?arguments[2]:{},R=k(M);G&&(R=u.call(R,Object.getOwnPropertySymbols(M)));for(var V=0;V<R.length;V+=1)f(S,R[V],M[R[V]],D[R[V]])};_.supportsDescriptors=!!m,Ae.exports=_},37649:Ae=>{function y(w,k,G,I){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(w,k,G,I)}y.prototype.run=function(w,k,G,I){this._init(w,k,G,I);for(var u=0;u<this._datasetLength;u++)if(1!==this._visited[u]){this._visited[u]=1;var h=this._regionQuery(u);if(h.length<this.minPts)this.noise.push(u);else{var g=this.clusters.length;this.clusters.push([]),this._addToCluster(u,g),this._expandCluster(g,h)}}return this.clusters},y.prototype._init=function(w,k,G,I){if(w){if(!(w instanceof Array))throw Error("Dataset must be of type array, "+typeof w+" given");this.dataset=w,this.clusters=[],this.noise=[],this._datasetLength=w.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}k&&(this.epsilon=k),G&&(this.minPts=G),I&&(this.distance=I)},y.prototype._expandCluster=function(w,k){for(var G=0;G<k.length;G++){var I=k[G];if(1!==this._visited[I]){this._visited[I]=1;var u=this._regionQuery(I);u.length>=this.minPts&&(k=this._mergeArrays(k,u))}1!==this._assigned[I]&&this._addToCluster(I,w)}},y.prototype._addToCluster=function(w,k){this.clusters[k].push(w),this._assigned[w]=1},y.prototype._regionQuery=function(w){for(var k=[],G=0;G<this._datasetLength;G++)this.distance(this.dataset[w],this.dataset[G])<this.epsilon&&k.push(G);return k},y.prototype._mergeArrays=function(w,k){for(var G=k.length,I=0;I<G;I++){var u=k[I];w.indexOf(u)<0&&w.push(u)}return w},y.prototype._euclideanDistance=function(w,k){for(var G=0,I=Math.min(w.length,k.length);I--;)G+=(w[I]-k[I])*(w[I]-k[I]);return Math.sqrt(G)},Ae.exports&&(Ae.exports=y)},80442:Ae=>{function y(w,k,G){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(w,k,G)}y.prototype.init=function(w,k,G){this.assignments=[],this.centroids=[],typeof w<"u"&&(this.dataset=w),typeof k<"u"&&(this.k=k),typeof G<"u"&&(this.distance=G)},y.prototype.run=function(w,k){this.init(w,k);for(var G=this.dataset.length,I=0;I<this.k;I++)this.centroids[I]=this.randomCentroid();for(var u=!0;u;){u=this.assign();for(var h=0;h<this.k;h++){for(var g=new Array(_),v=0,m=0;m<_;m++)g[m]=0;for(var f=0;f<G;f++){var _=this.dataset[f].length;if(h===this.assignments[f]){for(m=0;m<_;m++)g[m]+=this.dataset[f][m];v++}}if(v>0){for(m=0;m<_;m++)g[m]/=v;this.centroids[h]=g}else this.centroids[h]=this.randomCentroid(),u=!0}}return this.getClusters()},y.prototype.randomCentroid=function(){var k,G,w=this.dataset.length-1;do{G=Math.round(Math.random()*w),k=this.dataset[G]}while(this.centroids.indexOf(k)>=0);return k},y.prototype.assign=function(){for(var G,w=!1,k=this.dataset.length,I=0;I<k;I++)(G=this.argmin(this.dataset[I],this.centroids,this.distance))!=this.assignments[I]&&(this.assignments[I]=G,w=!0);return w},y.prototype.getClusters=function(){for(var k,w=new Array(this.k),G=0;G<this.assignments.length;G++)typeof w[k=this.assignments[G]]>"u"&&(w[k]=[]),w[k].push(G);return w},y.prototype.argmin=function(w,k,G){for(var g,I=Number.MAX_VALUE,u=0,h=k.length,v=0;v<h;v++)(g=G(w,k[v]))<I&&(I=g,u=v);return u},y.prototype.distance=function(w,k){for(var G=0,I=Math.min(w.length,k.length);I--;){var u=w[I]-k[I];G+=u*u}return Math.sqrt(G)},Ae.exports&&(Ae.exports=y)},62195:(Ae,y,w)=>{if(Ae.exports)var k=w(96216);function G(I,u,h,g){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(I,u,h,g)}G.prototype.run=function(I,u,h,g){this._init(I,u,h,g);for(var v=0,m=this.dataset.length;v<m;v++)if(1!==this._processed[v]){this._processed[v]=1,this.clusters.push([v]);var f=this.clusters.length-1;this._orderedList.push(v);var _=new k(null,null,"asc"),S=this._regionQuery(v);void 0!==this._distanceToCore(v)&&(this._updateQueue(v,S,_),this._expandCluster(f,_))}return this.clusters},G.prototype.getReachabilityPlot=function(){for(var I=[],u=0,h=this._orderedList.length;u<h;u++){var g=this._orderedList[u];I.push([g,this._reachability[g]])}return I},G.prototype._init=function(I,u,h,g){if(I){if(!(I instanceof Array))throw Error("Dataset must be of type array, "+typeof I+" given");this.dataset=I,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}u&&(this.epsilon=u),h&&(this.minPts=h),g&&(this.distance=g)},G.prototype._updateQueue=function(I,u,h){var g=this;this._coreDistance=this._distanceToCore(I),u.forEach(function(v){if(void 0===g._processed[v]){var m=g.distance(g.dataset[I],g.dataset[v]),f=Math.max(g._coreDistance,m);void 0===g._reachability[v]?(g._reachability[v]=f,h.insert(v,f)):f<g._reachability[v]&&(g._reachability[v]=f,h.remove(v),h.insert(v,f))}})},G.prototype._expandCluster=function(I,u){for(var h=u.getElements(),g=0,v=h.length;g<v;g++){var m=h[g];if(void 0===this._processed[m]){var f=this._regionQuery(m);this._processed[m]=1,this.clusters[I].push(m),this._orderedList.push(m),void 0!==this._distanceToCore(m)&&(this._updateQueue(m,f,u),this._expandCluster(I,u))}}},G.prototype._distanceToCore=function(I){for(var u=this.epsilon,h=0;h<u;h++)if(this._regionQuery(I,h).length>=this.minPts)return h},G.prototype._regionQuery=function(I,u){u=u||this.epsilon;for(var h=[],g=0,v=this.dataset.length;g<v;g++)this.distance(this.dataset[I],this.dataset[g])<u&&h.push(g);return h},G.prototype._euclideanDistance=function(I,u){for(var h=0,g=Math.min(I.length,u.length);g--;)h+=(I[g]-u[g])*(I[g]-u[g]);return Math.sqrt(h)},Ae.exports&&(Ae.exports=G)},96216:Ae=>{function y(w,k,G){this._queue=[],this._priorities=[],this._sorting="desc",this._init(w,k,G)}y.prototype.insert=function(w,k){for(var G=this._queue.length,I=G;I--;){var u=this._priorities[I];"desc"===this._sorting?k>u&&(G=I):k<u&&(G=I)}this._insertAt(w,k,G)},y.prototype.remove=function(w){for(var k=this._queue.length;k--;)if(w===this._queue[k]){this._queue.splice(k,1),this._priorities.splice(k,1);break}},y.prototype.forEach=function(w){this._queue.forEach(w)},y.prototype.getElements=function(){return this._queue},y.prototype.getElementPriority=function(w){return this._priorities[w]},y.prototype.getPriorities=function(){return this._priorities},y.prototype.getElementsWithPriorities=function(){for(var w=[],k=0,G=this._queue.length;k<G;k++)w.push([this._queue[k],this._priorities[k]]);return w},y.prototype._init=function(w,k,G){if(w&&k){if(this._queue=[],this._priorities=[],w.length!==k.length)throw new Error("Arrays must have the same length");for(var I=0;I<w.length;I++)this.insert(w[I],k[I])}G&&(this._sorting=G)},y.prototype._insertAt=function(w,k,G){this._queue.length===G?(this._queue.push(w),this._priorities.push(k)):(this._queue.splice(G,0,w),this._priorities.splice(G,0,k))},Ae.exports&&(Ae.exports=y)},33367:(Ae,y,w)=>{Ae.exports&&(Ae.exports={DBSCAN:w(37649),KMEANS:w(80442),OPTICS:w(62195),PriorityQueue:w(96216)})},87206:Ae=>{"use strict";var y={single_source_shortest_paths:function(w,k,G){var I={},u={};u[k]=0;var g,v,m,f,_,M,h=y.PriorityQueue.make();for(h.push(k,0);!h.empty();)for(m in f=(g=h.pop()).cost,_=w[v=g.value]||{})_.hasOwnProperty(m)&&(M=f+_[m],(typeof u[m]>"u"||u[m]>M)&&(u[m]=M,h.push(m,M),I[m]=v));if(typeof G<"u"&&typeof u[G]>"u"){var V=["Could not find a path from ",k," to ",G,"."].join("");throw new Error(V)}return I},extract_shortest_path_from_predecessor_list:function(w,k){for(var G=[],I=k;I;)G.push(I),I=w[I];return G.reverse(),G},find_path:function(w,k,G){var I=y.single_source_shortest_paths(w,k,G);return y.extract_shortest_path_from_predecessor_list(I,G)},PriorityQueue:{make:function(w){var I,k=y.PriorityQueue,G={};for(I in w=w||{},k)k.hasOwnProperty(I)&&(G[I]=k[I]);return G.queue=[],G.sorter=w.sorter||k.default_sorter,G},default_sorter:function(w,k){return w.cost-k.cost},push:function(w,k){this.queue.push({value:w,cost:k}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};Ae.exports=y},29145:Ae=>{"use strict";function y(ue,fe,ee){ee=ee||2;var ye,Me,_e,Fe,Ue,Ge,$e,de=fe&&fe.length,pe=de?fe[0]*ee:ue.length,ce=w(ue,0,pe,ee,!0),ae=[];if(!ce||ce.next===ce.prev)return ae;if(de&&(ce=function v(ue,fe,ee,de){var ce,ae,_e,pe=[];for(ce=0,ae=fe.length;ce<ae;ce++)(_e=w(ue,fe[ce]*de,ce<ae-1?fe[ce+1]*de:ue.length,de,!1))===_e.next&&(_e.steiner=!0),pe.push(V(_e));for(pe.sort(m),ce=0;ce<pe.length;ce++)ee=f(pe[ce],ee);return ee}(ue,fe,ce,ee)),ue.length>80*ee){ye=_e=ue[0],Me=Fe=ue[1];for(var He=ee;He<pe;He+=ee)(Ue=ue[He])<ye&&(ye=Ue),(Ge=ue[He+1])<Me&&(Me=Ge),Ue>_e&&(_e=Ue),Ge>Fe&&(Fe=Ge);$e=0!==($e=Math.max(_e-ye,Fe-Me))?32767/$e:0}return G(ce,ae,ee,ye,Me,$e,0),ae}function w(ue,fe,ee,de,pe){var ce,ae;if(pe===xe(ue,fe,ee,de)>0)for(ce=fe;ce<ee;ce+=de)ae=se(ce,ue[ce],ue[ce+1],ae);else for(ce=ee-de;ce>=fe;ce-=de)ae=se(ce,ue[ce],ue[ce+1],ae);return ae&&j(ae,ae.next)&&(ne(ae),ae=ae.next),ae}function k(ue,fe){if(!ue)return ue;fe||(fe=ue);var de,ee=ue;do{if(de=!1,ee.steiner||!j(ee,ee.next)&&0!==F(ee.prev,ee,ee.next))ee=ee.next;else{if(ne(ee),(ee=fe=ee.prev)===ee.next)break;de=!0}}while(de||ee!==fe);return fe}function G(ue,fe,ee,de,pe,ce,ae){if(ue){!ae&&ce&&function M(ue,fe,ee,de){var pe=ue;do{0===pe.z&&(pe.z=R(pe.x,pe.y,fe,ee,de)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next}while(pe!==ue);pe.prevZ.nextZ=null,pe.prevZ=null,function D(ue){var fe,ee,de,pe,ce,ae,ye,Me,_e=1;do{for(ee=ue,ue=null,ce=null,ae=0;ee;){for(ae++,de=ee,ye=0,fe=0;fe<_e&&(ye++,de=de.nextZ);fe++);for(Me=_e;ye>0||Me>0&&de;)0!==ye&&(0===Me||!de||ee.z<=de.z)?(pe=ee,ee=ee.nextZ,ye--):(pe=de,de=de.nextZ,Me--),ce?ce.nextZ=pe:ue=pe,pe.prevZ=ce,ce=pe;ee=de}ce.nextZ=null,_e*=2}while(ae>1)}(pe)}(ue,de,pe,ce);for(var Me,_e,ye=ue;ue.prev!==ue.next;)if(Me=ue.prev,_e=ue.next,ce?u(ue,de,pe,ce):I(ue))fe.push(Me.i/ee|0),fe.push(ue.i/ee|0),fe.push(_e.i/ee|0),ne(ue),ue=_e.next,ye=_e.next;else if((ue=_e)===ye){ae?1===ae?G(ue=h(k(ue),fe,ee),fe,ee,de,pe,ce,2):2===ae&&g(ue,fe,ee,de,pe,ce):G(k(ue),fe,ee,de,pe,ce,1);break}}}function I(ue){var fe=ue.prev,ee=ue,de=ue.next;if(F(fe,ee,de)>=0)return!1;for(var pe=fe.x,ce=ee.x,ae=de.x,ye=fe.y,Me=ee.y,_e=de.y,Fe=pe<ce?pe<ae?pe:ae:ce<ae?ce:ae,Ue=ye<Me?ye<_e?ye:_e:Me<_e?Me:_e,Ge=pe>ce?pe>ae?pe:ae:ce>ae?ce:ae,$e=ye>Me?ye>_e?ye:_e:Me>_e?Me:_e,He=de.next;He!==fe;){if(He.x>=Fe&&He.x<=Ge&&He.y>=Ue&&He.y<=$e&&B(pe,ye,ce,Me,ae,_e,He.x,He.y)&&F(He.prev,He,He.next)>=0)return!1;He=He.next}return!0}function u(ue,fe,ee,de){var pe=ue.prev,ce=ue,ae=ue.next;if(F(pe,ce,ae)>=0)return!1;for(var ye=pe.x,Me=ce.x,_e=ae.x,Fe=pe.y,Ue=ce.y,Ge=ae.y,$e=ye<Me?ye<_e?ye:_e:Me<_e?Me:_e,He=Fe<Ue?Fe<Ge?Fe:Ge:Ue<Ge?Ue:Ge,Pe=ye>Me?ye>_e?ye:_e:Me>_e?Me:_e,je=Fe>Ue?Fe>Ge?Fe:Ge:Ue>Ge?Ue:Ge,ht=R($e,He,fe,ee,de),Re=R(Pe,je,fe,ee,de),tt=ue.prevZ,it=ue.nextZ;tt&&tt.z>=ht&&it&&it.z<=Re;){if(tt.x>=$e&&tt.x<=Pe&&tt.y>=He&&tt.y<=je&&tt!==pe&&tt!==ae&&B(ye,Fe,Me,Ue,_e,Ge,tt.x,tt.y)&&F(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,it.x>=$e&&it.x<=Pe&&it.y>=He&&it.y<=je&&it!==pe&&it!==ae&&B(ye,Fe,Me,Ue,_e,Ge,it.x,it.y)&&F(it.prev,it,it.next)>=0))return!1;it=it.nextZ}for(;tt&&tt.z>=ht;){if(tt.x>=$e&&tt.x<=Pe&&tt.y>=He&&tt.y<=je&&tt!==pe&&tt!==ae&&B(ye,Fe,Me,Ue,_e,Ge,tt.x,tt.y)&&F(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;it&&it.z<=Re;){if(it.x>=$e&&it.x<=Pe&&it.y>=He&&it.y<=je&&it!==pe&&it!==ae&&B(ye,Fe,Me,Ue,_e,Ge,it.x,it.y)&&F(it.prev,it,it.next)>=0)return!1;it=it.nextZ}return!0}function h(ue,fe,ee){var de=ue;do{var pe=de.prev,ce=de.next.next;!j(pe,ce)&&P(pe,de,de.next,ce)&&X(pe,ce)&&X(ce,pe)&&(fe.push(pe.i/ee|0),fe.push(de.i/ee|0),fe.push(ce.i/ee|0),ne(de),ne(de.next),de=ue=ce),de=de.next}while(de!==ue);return k(de)}function g(ue,fe,ee,de,pe,ce){var ae=ue;do{for(var ye=ae.next.next;ye!==ae.prev;){if(ae.i!==ye.i&&U(ae,ye)){var Me=q(ae,ye);return ae=k(ae,ae.next),Me=k(Me,Me.next),G(ae,fe,ee,de,pe,ce,0),void G(Me,fe,ee,de,pe,ce,0)}ye=ye.next}ae=ae.next}while(ae!==ue)}function m(ue,fe){return ue.x-fe.x}function f(ue,fe){var ee=function _(ue,fe){var ae,ee=fe,de=ue.x,pe=ue.y,ce=-1/0;do{if(pe<=ee.y&&pe>=ee.next.y&&ee.next.y!==ee.y){var ye=ee.x+(pe-ee.y)*(ee.next.x-ee.x)/(ee.next.y-ee.y);if(ye<=de&&ye>ce&&(ce=ye,ae=ee.x<ee.next.x?ee:ee.next,ye===de))return ae}ee=ee.next}while(ee!==fe);if(!ae)return null;var Ge,Me=ae,_e=ae.x,Fe=ae.y,Ue=1/0;ee=ae;do{de>=ee.x&&ee.x>=_e&&de!==ee.x&&B(pe<Fe?de:ce,pe,_e,Fe,pe<Fe?ce:de,pe,ee.x,ee.y)&&(Ge=Math.abs(pe-ee.y)/(de-ee.x),X(ee,ue)&&(Ge<Ue||Ge===Ue&&(ee.x>ae.x||ee.x===ae.x&&S(ae,ee)))&&(ae=ee,Ue=Ge)),ee=ee.next}while(ee!==Me);return ae}(ue,fe);if(!ee)return fe;var de=q(ee,ue);return k(de,de.next),k(ee,ee.next)}function S(ue,fe){return F(ue.prev,ue,fe.prev)<0&&F(fe.next,ue,ue.next)<0}function R(ue,fe,ee,de,pe){return(ue=1431655765&((ue=858993459&((ue=252645135&((ue=16711935&((ue=(ue-ee)*pe|0)|ue<<8))|ue<<4))|ue<<2))|ue<<1))|(fe=1431655765&((fe=858993459&((fe=252645135&((fe=16711935&((fe=(fe-de)*pe|0)|fe<<8))|fe<<4))|fe<<2))|fe<<1))<<1}function V(ue){var fe=ue,ee=ue;do{(fe.x<ee.x||fe.x===ee.x&&fe.y<ee.y)&&(ee=fe),fe=fe.next}while(fe!==ue);return ee}function B(ue,fe,ee,de,pe,ce,ae,ye){return(pe-ae)*(fe-ye)>=(ue-ae)*(ce-ye)&&(ue-ae)*(de-ye)>=(ee-ae)*(fe-ye)&&(ee-ae)*(ce-ye)>=(pe-ae)*(de-ye)}function U(ue,fe){return ue.next.i!==fe.i&&ue.prev.i!==fe.i&&!function oe(ue,fe){var ee=ue;do{if(ee.i!==ue.i&&ee.next.i!==ue.i&&ee.i!==fe.i&&ee.next.i!==fe.i&&P(ee,ee.next,ue,fe))return!0;ee=ee.next}while(ee!==ue);return!1}(ue,fe)&&(X(ue,fe)&&X(fe,ue)&&function ie(ue,fe){var ee=ue,de=!1,pe=(ue.x+fe.x)/2,ce=(ue.y+fe.y)/2;do{ee.y>ce!=ee.next.y>ce&&ee.next.y!==ee.y&&pe<(ee.next.x-ee.x)*(ce-ee.y)/(ee.next.y-ee.y)+ee.x&&(de=!de),ee=ee.next}while(ee!==ue);return de}(ue,fe)&&(F(ue.prev,ue,fe.prev)||F(ue,fe.prev,fe))||j(ue,fe)&&F(ue.prev,ue,ue.next)>0&&F(fe.prev,fe,fe.next)>0)}function F(ue,fe,ee){return(fe.y-ue.y)*(ee.x-fe.x)-(fe.x-ue.x)*(ee.y-fe.y)}function j(ue,fe){return ue.x===fe.x&&ue.y===fe.y}function P(ue,fe,ee,de){var pe=$(F(ue,fe,ee)),ce=$(F(ue,fe,de)),ae=$(F(ee,de,ue)),ye=$(F(ee,de,fe));return!!(pe!==ce&&ae!==ye||0===pe&&Q(ue,ee,fe)||0===ce&&Q(ue,de,fe)||0===ae&&Q(ee,ue,de)||0===ye&&Q(ee,fe,de))}function Q(ue,fe,ee){return fe.x<=Math.max(ue.x,ee.x)&&fe.x>=Math.min(ue.x,ee.x)&&fe.y<=Math.max(ue.y,ee.y)&&fe.y>=Math.min(ue.y,ee.y)}function $(ue){return ue>0?1:ue<0?-1:0}function X(ue,fe){return F(ue.prev,ue,ue.next)<0?F(ue,fe,ue.next)>=0&&F(ue,ue.prev,fe)>=0:F(ue,fe,ue.prev)<0||F(ue,ue.next,fe)<0}function q(ue,fe){var ee=new Ce(ue.i,ue.x,ue.y),de=new Ce(fe.i,fe.x,fe.y),pe=ue.next,ce=fe.prev;return ue.next=fe,fe.prev=ue,ee.next=pe,pe.prev=ee,de.next=ee,ee.prev=de,ce.next=de,de.prev=ce,de}function se(ue,fe,ee,de){var pe=new Ce(ue,fe,ee);return de?(pe.next=de.next,pe.prev=de,de.next.prev=pe,de.next=pe):(pe.prev=pe,pe.next=pe),pe}function ne(ue){ue.next.prev=ue.prev,ue.prev.next=ue.next,ue.prevZ&&(ue.prevZ.nextZ=ue.nextZ),ue.nextZ&&(ue.nextZ.prevZ=ue.prevZ)}function Ce(ue,fe,ee){this.i=ue,this.x=fe,this.y=ee,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xe(ue,fe,ee,de){for(var pe=0,ce=fe,ae=ee-de;ce<ee;ce+=de)pe+=(ue[ae]-ue[ce])*(ue[ce+1]+ue[ae+1]),ae=ce;return pe}Ae.exports=y,Ae.exports.default=y,y.deviation=function(ue,fe,ee,de){var pe=fe&&fe.length,ae=Math.abs(xe(ue,0,pe?fe[0]*ee:ue.length,ee));if(pe)for(var ye=0,Me=fe.length;ye<Me;ye++)ae-=Math.abs(xe(ue,fe[ye]*ee,ye<Me-1?fe[ye+1]*ee:ue.length,ee));var Ue=0;for(ye=0;ye<de.length;ye+=3){var Ge=de[ye]*ee,$e=de[ye+1]*ee,He=de[ye+2]*ee;Ue+=Math.abs((ue[Ge]-ue[He])*(ue[$e+1]-ue[Ge+1])-(ue[Ge]-ue[$e])*(ue[He+1]-ue[Ge+1]))}return 0===ae&&0===Ue?0:Math.abs((Ue-ae)/ae)},y.flatten=function(ue){for(var fe=ue[0][0].length,ee={vertices:[],holes:[],dimensions:fe},de=0,pe=0;pe<ue.length;pe++){for(var ce=0;ce<ue[pe].length;ce++)for(var ae=0;ae<fe;ae++)ee.vertices.push(ue[pe][ce][ae]);pe>0&&ee.holes.push(de+=ue[pe-1].length)}return ee}},76119:Ae=>{"use strict";Ae.exports=function(w){for(var k=[],G=w.length,I=0;I<G;I++){var u=w.charCodeAt(I);if(u>=55296&&u<=56319&&G>I+1){var h=w.charCodeAt(I+1);h>=56320&&h<=57343&&(u=1024*(u-55296)+h-56320+65536,I+=1)}u<128?k.push(u):u<2048?(k.push(u>>6|192),k.push(63&u|128)):u<55296||u>=57344&&u<65536?(k.push(u>>12|224),k.push(u>>6&63|128),k.push(63&u|128)):u>=65536&&u<=1114111?(k.push(u>>18|240),k.push(u>>12&63|128),k.push(u>>6&63|128),k.push(63&u|128)):k.push(239,191,189)}return new Uint8Array(k).buffer}},42284:function(Ae,y,w){var k,G;!function(I,u,h){"use strict";typeof window<"u"&&w.amdO?void 0!==(G="function"==typeof(k=h)?k.call(y,w,y,Ae):k)&&(Ae.exports=G):Ae.exports?Ae.exports=h():u.exports?u.exports=h():u.Fingerprint2=h()}(0,this,function(){"use strict";typeof Array.isArray>"u"&&(Array.isArray=function(Se){return"[object Array]"===Object.prototype.toString.call(Se)});var I=function(Se,Qe){var ot=[0,0,0,0];return ot[3]+=(Se=[Se[0]>>>16,65535&Se[0],Se[1]>>>16,65535&Se[1]])[3]+(Qe=[Qe[0]>>>16,65535&Qe[0],Qe[1]>>>16,65535&Qe[1]])[3],ot[2]+=ot[3]>>>16,ot[3]&=65535,ot[2]+=Se[2]+Qe[2],ot[1]+=ot[2]>>>16,ot[2]&=65535,ot[1]+=Se[1]+Qe[1],ot[0]+=ot[1]>>>16,ot[1]&=65535,ot[0]+=Se[0]+Qe[0],ot[0]&=65535,[ot[0]<<16|ot[1],ot[2]<<16|ot[3]]},u=function(Se,Qe){var ot=[0,0,0,0];return ot[3]+=(Se=[Se[0]>>>16,65535&Se[0],Se[1]>>>16,65535&Se[1]])[3]*(Qe=[Qe[0]>>>16,65535&Qe[0],Qe[1]>>>16,65535&Qe[1]])[3],ot[2]+=ot[3]>>>16,ot[3]&=65535,ot[2]+=Se[2]*Qe[3],ot[1]+=ot[2]>>>16,ot[2]&=65535,ot[2]+=Se[3]*Qe[2],ot[1]+=ot[2]>>>16,ot[2]&=65535,ot[1]+=Se[1]*Qe[3],ot[0]+=ot[1]>>>16,ot[1]&=65535,ot[1]+=Se[2]*Qe[2],ot[0]+=ot[1]>>>16,ot[1]&=65535,ot[1]+=Se[3]*Qe[1],ot[0]+=ot[1]>>>16,ot[1]&=65535,ot[0]+=Se[0]*Qe[3]+Se[1]*Qe[2]+Se[2]*Qe[1]+Se[3]*Qe[0],ot[0]&=65535,[ot[0]<<16|ot[1],ot[2]<<16|ot[3]]},h=function(Se,Qe){return 32==(Qe%=64)?[Se[1],Se[0]]:Qe<32?[Se[0]<<Qe|Se[1]>>>32-Qe,Se[1]<<Qe|Se[0]>>>32-Qe]:[Se[1]<<(Qe-=32)|Se[0]>>>32-Qe,Se[0]<<Qe|Se[1]>>>32-Qe]},g=function(Se,Qe){return 0==(Qe%=64)?Se:Qe<32?[Se[0]<<Qe|Se[1]>>>32-Qe,Se[1]<<Qe]:[Se[1]<<Qe-32,0]},v=function(Se,Qe){return[Se[0]^Qe[0],Se[1]^Qe[1]]},m=function(Se){return Se=v(Se,[0,Se[0]>>>1]),Se=u(Se,[4283543511,3981806797]),Se=v(Se,[0,Se[0]>>>1]),Se=u(Se,[3301882366,444984403]),v(Se,[0,Se[0]>>>1])},f=function(Se,Qe){for(var ot=(Se=Se||"").length%16,dt=Se.length-ot,Pt=[0,Qe=Qe||0],At=[0,Qe],Wt=[0,0],Yt=[0,0],Bt=[2277735313,289559509],$t=[1291169091,658871167],vn=0;vn<dt;vn+=16)Wt=[255&Se.charCodeAt(vn+4)|(255&Se.charCodeAt(vn+5))<<8|(255&Se.charCodeAt(vn+6))<<16|(255&Se.charCodeAt(vn+7))<<24,255&Se.charCodeAt(vn)|(255&Se.charCodeAt(vn+1))<<8|(255&Se.charCodeAt(vn+2))<<16|(255&Se.charCodeAt(vn+3))<<24],Yt=[255&Se.charCodeAt(vn+12)|(255&Se.charCodeAt(vn+13))<<8|(255&Se.charCodeAt(vn+14))<<16|(255&Se.charCodeAt(vn+15))<<24,255&Se.charCodeAt(vn+8)|(255&Se.charCodeAt(vn+9))<<8|(255&Se.charCodeAt(vn+10))<<16|(255&Se.charCodeAt(vn+11))<<24],Wt=u(Wt,Bt),Wt=h(Wt,31),Wt=u(Wt,$t),Pt=v(Pt,Wt),Pt=h(Pt,27),Pt=I(Pt,At),Pt=I(u(Pt,[0,5]),[0,1390208809]),Yt=u(Yt,$t),Yt=h(Yt,33),Yt=u(Yt,Bt),At=v(At,Yt),At=h(At,31),At=I(At,Pt),At=I(u(At,[0,5]),[0,944331445]);switch(Wt=[0,0],Yt=[0,0],ot){case 15:Yt=v(Yt,g([0,Se.charCodeAt(vn+14)],48));case 14:Yt=v(Yt,g([0,Se.charCodeAt(vn+13)],40));case 13:Yt=v(Yt,g([0,Se.charCodeAt(vn+12)],32));case 12:Yt=v(Yt,g([0,Se.charCodeAt(vn+11)],24));case 11:Yt=v(Yt,g([0,Se.charCodeAt(vn+10)],16));case 10:Yt=v(Yt,g([0,Se.charCodeAt(vn+9)],8));case 9:Yt=v(Yt,[0,Se.charCodeAt(vn+8)]),Yt=u(Yt,$t),Yt=h(Yt,33),Yt=u(Yt,Bt),At=v(At,Yt);case 8:Wt=v(Wt,g([0,Se.charCodeAt(vn+7)],56));case 7:Wt=v(Wt,g([0,Se.charCodeAt(vn+6)],48));case 6:Wt=v(Wt,g([0,Se.charCodeAt(vn+5)],40));case 5:Wt=v(Wt,g([0,Se.charCodeAt(vn+4)],32));case 4:Wt=v(Wt,g([0,Se.charCodeAt(vn+3)],24));case 3:Wt=v(Wt,g([0,Se.charCodeAt(vn+2)],16));case 2:Wt=v(Wt,g([0,Se.charCodeAt(vn+1)],8));case 1:Wt=v(Wt,[0,Se.charCodeAt(vn)]),Wt=u(Wt,Bt),Wt=h(Wt,31),Wt=u(Wt,$t),Pt=v(Pt,Wt)}return Pt=v(Pt,[0,Se.length]),At=v(At,[0,Se.length]),Pt=I(Pt,At),At=I(At,Pt),Pt=m(Pt),At=m(At),Pt=I(Pt,At),At=I(At,Pt),("00000000"+(Pt[0]>>>0).toString(16)).slice(-8)+("00000000"+(Pt[1]>>>0).toString(16)).slice(-8)+("00000000"+(At[0]>>>0).toString(16)).slice(-8)+("00000000"+(At[1]>>>0).toString(16)).slice(-8)},_={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0,adBlock:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},S=function(Se,Qe){if(Array.prototype.forEach&&Se.forEach===Array.prototype.forEach)Se.forEach(Qe);else if(Se.length===+Se.length)for(var ot=0,dt=Se.length;ot<dt;ot++)Qe(Se[ot],ot,Se);else for(var Pt in Se)Se.hasOwnProperty(Pt)&&Qe(Se[Pt],Pt,Se)},M=function(Se,Qe){var ot=[];return null==Se?ot:Array.prototype.map&&Se.map===Array.prototype.map?Se.map(Qe):(S(Se,function(dt,Pt,At){ot.push(Qe(dt,Pt,At))}),ot)},ht=function(Se){if(null==navigator.plugins)return Se.NOT_AVAILABLE;for(var Qe=[],ot=0,dt=navigator.plugins.length;ot<dt;ot++)navigator.plugins[ot]&&Qe.push(navigator.plugins[ot]);return tt(Se)&&(Qe=Qe.sort(function(Pt,At){return Pt.name>At.name?1:Pt.name<At.name?-1:0})),M(Qe,function(Pt){var At=M(Pt,function(Wt){return[Wt.type,Wt.suffixes]});return[Pt.name,Pt.description,At]})},tt=function(Se){for(var Qe=!1,ot=0,dt=Se.plugins.sortPluginsFor.length;ot<dt;ot++)if(navigator.userAgent.match(Se.plugins.sortPluginsFor[ot])){Qe=!0;break}return Qe},Pi=function(){var Se=document.createElement("canvas");return!(!Se.getContext||!Se.getContext("2d"))},ci=function(){if(!Pi())return!1;var Se=Zn(),Qe=!!window.WebGLRenderingContext&&!!Se;return zt(Se),Qe},Mi=function(){return("msWriteProfilerMark"in window)+("msLaunchUri"in navigator)+("msSaveBlob"in navigator)>=2},Zn=function(){var Se=document.createElement("canvas"),Qe=null;try{Qe=Se.getContext("webgl")||Se.getContext("experimental-webgl")}catch{}return Qe||(Qe=null),Qe},zt=function(Se){var Qe=Se.getExtension("WEBGL_lose_context");Qe?.loseContext()},Je=[{key:"userAgent",getData:function(Se){Se(navigator.userAgent)}},{key:"webdriver",getData:function(Se,Qe){Se(null==navigator.webdriver?Qe.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(Se,Qe){Se(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||Qe.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(Se,Qe){Se(window.screen.colorDepth||Qe.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(Se,Qe){Se(navigator.deviceMemory||Qe.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(Se,Qe){Se(window.devicePixelRatio||Qe.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(Se,Qe){Se(function(Se){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:Se.NOT_AVAILABLE}(Qe))}},{key:"screenResolution",getData:function(Se,Qe){Se(function(Se){var Qe=[window.screen.width,window.screen.height];return Se.screen.detectScreenOrientation&&Qe.sort().reverse(),Qe}(Qe))}},{key:"availableScreenResolution",getData:function(Se,Qe){Se(function(Se){if(window.screen.availWidth&&window.screen.availHeight){var Qe=[window.screen.availHeight,window.screen.availWidth];return Se.screen.detectScreenOrientation&&Qe.sort().reverse(),Qe}return Se.NOT_AVAILABLE}(Qe))}},{key:"timezoneOffset",getData:function(Se){Se((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(Se,Qe){window.Intl&&window.Intl.DateTimeFormat?Se((new window.Intl.DateTimeFormat).resolvedOptions().timeZone||Qe.NOT_AVAILABLE):Se(Qe.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(Se,Qe){Se(function(Se){try{return!!window.sessionStorage}catch{return Se.ERROR}}(Qe))}},{key:"localStorage",getData:function(Se,Qe){Se(function(Se){try{return!!window.localStorage}catch{return Se.ERROR}}(Qe))}},{key:"indexedDb",getData:function(Se,Qe){Se(function(Se){if(Mi())return Se.EXCLUDED;try{return!!window.indexedDB}catch{return Se.ERROR}}(Qe))}},{key:"addBehavior",getData:function(Se){Se(!!window.HTMLElement.prototype.addBehavior)}},{key:"openDatabase",getData:function(Se){Se(!!window.openDatabase)}},{key:"cpuClass",getData:function(Se,Qe){Se(function(Se){return navigator.cpuClass||Se.NOT_AVAILABLE}(Qe))}},{key:"platform",getData:function(Se,Qe){Se(function(Se){return navigator.platform?navigator.platform:Se.NOT_AVAILABLE}(Qe))}},{key:"doNotTrack",getData:function(Se,Qe){Se(function(Se){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:Se.NOT_AVAILABLE}(Qe))}},{key:"plugins",getData:function(Se,Qe){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?Se(Qe.plugins.excludeIE?Qe.EXCLUDED:function(Se){var Qe=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?Qe=M(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],function(dt){try{return new window.ActiveXObject(dt),dt}catch{return Se.ERROR}}):Qe.push(Se.NOT_AVAILABLE),navigator.plugins&&(Qe=Qe.concat(ht(Se))),Qe}(Qe)):Se(ht(Qe))}},{key:"canvas",getData:function(Se,Qe){Pi()?Se(function(Se){var Qe=[],ot=document.createElement("canvas");ot.width=2e3,ot.height=200,ot.style.display="inline";var dt=ot.getContext("2d");return dt.rect(0,0,10,10),dt.rect(2,2,6,6),Qe.push("canvas winding:"+(!1===dt.isPointInPath(5,5,"evenodd")?"yes":"no")),dt.textBaseline="alphabetic",dt.fillStyle="#f60",dt.fillRect(125,1,62,20),dt.fillStyle="#069",dt.font=Se.dontUseFakeFontInCanvas?"11pt Arial":"11pt no-real-font-123",dt.fillText("Cwm fjordbank glyphs vext quiz, \u{1f603}",2,15),dt.fillStyle="rgba(102, 204, 0, 0.2)",dt.font="18pt Arial",dt.fillText("Cwm fjordbank glyphs vext quiz, \u{1f603}",4,45),dt.globalCompositeOperation="multiply",dt.fillStyle="rgb(255,0,255)",dt.beginPath(),dt.arc(50,50,50,0,2*Math.PI,!0),dt.closePath(),dt.fill(),dt.fillStyle="rgb(0,255,255)",dt.beginPath(),dt.arc(100,50,50,0,2*Math.PI,!0),dt.closePath(),dt.fill(),dt.fillStyle="rgb(255,255,0)",dt.beginPath(),dt.arc(75,100,50,0,2*Math.PI,!0),dt.closePath(),dt.fill(),dt.fillStyle="rgb(255,0,255)",dt.arc(75,75,75,0,2*Math.PI,!0),dt.arc(75,75,25,0,2*Math.PI,!0),dt.fill("evenodd"),ot.toDataURL&&Qe.push("canvas fp:"+ot.toDataURL()),Qe}(Qe)):Se(Qe.NOT_AVAILABLE)}},{key:"webgl",getData:function(Se,Qe){ci()?Se(function(){var Se,Qe=function(xn){return Se.clearColor(0,0,0,1),Se.enable(Se.DEPTH_TEST),Se.depthFunc(Se.LEQUAL),Se.clear(Se.COLOR_BUFFER_BIT|Se.DEPTH_BUFFER_BIT),"["+xn[0]+", "+xn[1]+"]"};if(!(Se=Zn()))return null;var dt=[],Wt=Se.createBuffer();Se.bindBuffer(Se.ARRAY_BUFFER,Wt);var Yt=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);Se.bufferData(Se.ARRAY_BUFFER,Yt,Se.STATIC_DRAW),Wt.itemSize=3,Wt.numItems=3;var Bt=Se.createProgram(),$t=Se.createShader(Se.VERTEX_SHADER);Se.shaderSource($t,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),Se.compileShader($t);var vn=Se.createShader(Se.FRAGMENT_SHADER);Se.shaderSource(vn,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),Se.compileShader(vn),Se.attachShader(Bt,$t),Se.attachShader(Bt,vn),Se.linkProgram(Bt),Se.useProgram(Bt),Bt.vertexPosAttrib=Se.getAttribLocation(Bt,"attrVertex"),Bt.offsetUniform=Se.getUniformLocation(Bt,"uniformOffset"),Se.enableVertexAttribArray(Bt.vertexPosArray),Se.vertexAttribPointer(Bt.vertexPosAttrib,Wt.itemSize,Se.FLOAT,!1,0,0),Se.uniform2f(Bt.offsetUniform,1,1),Se.drawArrays(Se.TRIANGLE_STRIP,0,Wt.numItems);try{dt.push(Se.canvas.toDataURL())}catch{}dt.push("extensions:"+(Se.getSupportedExtensions()||[]).join(";")),dt.push("webgl aliased line width range:"+Qe(Se.getParameter(Se.ALIASED_LINE_WIDTH_RANGE))),dt.push("webgl aliased point size range:"+Qe(Se.getParameter(Se.ALIASED_POINT_SIZE_RANGE))),dt.push("webgl alpha bits:"+Se.getParameter(Se.ALPHA_BITS)),dt.push("webgl antialiasing:"+(Se.getContextAttributes().antialias?"yes":"no")),dt.push("webgl blue bits:"+Se.getParameter(Se.BLUE_BITS)),dt.push("webgl depth bits:"+Se.getParameter(Se.DEPTH_BITS)),dt.push("webgl green bits:"+Se.getParameter(Se.GREEN_BITS)),dt.push("webgl max anisotropy:"+function(xn){var jn=xn.getExtension("EXT_texture_filter_anisotropic")||xn.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||xn.getExtension("MOZ_EXT_texture_filter_anisotropic");if(jn){var jt=xn.getParameter(jn.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===jt&&(jt=2),jt}return null}(Se)),dt.push("webgl max combined texture image units:"+Se.getParameter(Se.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),dt.push("webgl max cube map texture size:"+Se.getParameter(Se.MAX_CUBE_MAP_TEXTURE_SIZE)),dt.push("webgl max fragment uniform vectors:"+Se.getParameter(Se.MAX_FRAGMENT_UNIFORM_VECTORS)),dt.push("webgl max render buffer size:"+Se.getParameter(Se.MAX_RENDERBUFFER_SIZE)),dt.push("webgl max texture image units:"+Se.getParameter(Se.MAX_TEXTURE_IMAGE_UNITS)),dt.push("webgl max texture size:"+Se.getParameter(Se.MAX_TEXTURE_SIZE)),dt.push("webgl max varying vectors:"+Se.getParameter(Se.MAX_VARYING_VECTORS)),dt.push("webgl max vertex attribs:"+Se.getParameter(Se.MAX_VERTEX_ATTRIBS)),dt.push("webgl max vertex texture image units:"+Se.getParameter(Se.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),dt.push("webgl max vertex uniform vectors:"+Se.getParameter(Se.MAX_VERTEX_UNIFORM_VECTORS)),dt.push("webgl max viewport dims:"+Qe(Se.getParameter(Se.MAX_VIEWPORT_DIMS))),dt.push("webgl red bits:"+Se.getParameter(Se.RED_BITS)),dt.push("webgl renderer:"+Se.getParameter(Se.RENDERER)),dt.push("webgl shading language version:"+Se.getParameter(Se.SHADING_LANGUAGE_VERSION)),dt.push("webgl stencil bits:"+Se.getParameter(Se.STENCIL_BITS)),dt.push("webgl vendor:"+Se.getParameter(Se.VENDOR)),dt.push("webgl version:"+Se.getParameter(Se.VERSION));try{var Cn=Se.getExtension("WEBGL_debug_renderer_info");Cn&&(dt.push("webgl unmasked vendor:"+Se.getParameter(Cn.UNMASKED_VENDOR_WEBGL)),dt.push("webgl unmasked renderer:"+Se.getParameter(Cn.UNMASKED_RENDERER_WEBGL)))}catch{}return Se.getShaderPrecisionFormat?(S(["FLOAT","INT"],function(xn){S(["VERTEX","FRAGMENT"],function(jn){S(["HIGH","MEDIUM","LOW"],function(jt){S(["precision","rangeMin","rangeMax"],function(Dn){var Ke=Se.getShaderPrecisionFormat(Se[jn+"_SHADER"],Se[jt+"_"+xn])[Dn];"precision"!==Dn&&(Dn="precision "+Dn);var si=["webgl ",jn.toLowerCase()," shader ",jt.toLowerCase()," ",xn.toLowerCase()," ",Dn,":",Ke].join("");dt.push(si)})})})}),zt(Se),dt):(zt(Se),dt)}()):Se(Qe.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(Se){ci()?Se(function(){try{var Se=Zn(),Qe=Se.getExtension("WEBGL_debug_renderer_info"),ot=Se.getParameter(Qe.UNMASKED_VENDOR_WEBGL)+"~"+Se.getParameter(Qe.UNMASKED_RENDERER_WEBGL);return zt(Se),ot}catch{return null}}()):Se()}},{key:"adBlock",getData:function(Se){Se(function(){var Se=document.createElement("div");Se.innerHTML="&nbsp;",Se.className="adsbox";var Qe=!1;try{document.body.appendChild(Se),Qe=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(Se)}catch{Qe=!1}return Qe}())}},{key:"hasLiedLanguages",getData:function(Se){Se(function(){if(typeof navigator.languages<"u")try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch{return!0}return!1}())}},{key:"hasLiedResolution",getData:function(Se){Se(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(Se){Se(function(){var dt,Se=navigator.userAgent.toLowerCase(),Qe=navigator.oscpu,ot=navigator.platform.toLowerCase();if(dt=Se.indexOf("windows phone")>=0?"Windows Phone":Se.indexOf("windows")>=0||Se.indexOf("win16")>=0||Se.indexOf("win32")>=0||Se.indexOf("win64")>=0||Se.indexOf("win95")>=0||Se.indexOf("win98")>=0||Se.indexOf("winnt")>=0||Se.indexOf("wow64")>=0?"Windows":Se.indexOf("android")>=0?"Android":Se.indexOf("linux")>=0||Se.indexOf("cros")>=0||Se.indexOf("x11")>=0?"Linux":Se.indexOf("iphone")>=0||Se.indexOf("ipad")>=0||Se.indexOf("ipod")>=0||Se.indexOf("crios")>=0||Se.indexOf("fxios")>=0?"iOS":Se.indexOf("macintosh")>=0||Se.indexOf("mac_powerpc)")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows"!==dt&&"Windows Phone"!==dt&&"Android"!==dt&&"iOS"!==dt&&"Other"!==dt&&-1===Se.indexOf("cros"))return!0;if(typeof Qe<"u"){if((Qe=Qe.toLowerCase()).indexOf("win")>=0&&"Windows"!==dt&&"Windows Phone"!==dt)return!0;if(Qe.indexOf("linux")>=0&&"Linux"!==dt&&"Android"!==dt)return!0;if(Qe.indexOf("mac")>=0&&"Mac"!==dt&&"iOS"!==dt)return!0;if((-1===Qe.indexOf("win")&&-1===Qe.indexOf("linux")&&-1===Qe.indexOf("mac"))!=("Other"===dt))return!0}return ot.indexOf("win")>=0&&"Windows"!==dt&&"Windows Phone"!==dt||(ot.indexOf("linux")>=0||ot.indexOf("android")>=0||ot.indexOf("pike")>=0)&&"Linux"!==dt&&"Android"!==dt||(ot.indexOf("mac")>=0||ot.indexOf("ipad")>=0||ot.indexOf("ipod")>=0||ot.indexOf("iphone")>=0)&&"Mac"!==dt&&"iOS"!==dt||!(ot.indexOf("arm")>=0&&"Windows Phone"===dt)&&!(ot.indexOf("pike")>=0&&Se.indexOf("opera mini")>=0)&&((ot.indexOf("win")<0&&ot.indexOf("linux")<0&&ot.indexOf("mac")<0&&ot.indexOf("iphone")<0&&ot.indexOf("ipad")<0&&ot.indexOf("ipod")<0)!=("Other"===dt)||typeof navigator.plugins>"u"&&"Windows"!==dt&&"Windows Phone"!==dt)}())}},{key:"hasLiedBrowser",getData:function(Se){Se(function(){var ot,Se=navigator.userAgent.toLowerCase(),Qe=navigator.productSub;if(Se.indexOf("edge/")>=0||Se.indexOf("iemobile/")>=0)return!1;if(Se.indexOf("opera mini")>=0)return!1;if(("Chrome"==(ot=Se.indexOf("firefox/")>=0?"Firefox":Se.indexOf("opera/")>=0||Se.indexOf(" opr/")>=0?"Opera":Se.indexOf("chrome/")>=0?"Chrome":Se.indexOf("safari/")>=0?Se.indexOf("android 1.")>=0||Se.indexOf("android 2.")>=0||Se.indexOf("android 3.")>=0||Se.indexOf("android 4.")>=0?"AOSP":"Safari":Se.indexOf("trident/")>=0?"Internet Explorer":"Other")||"Safari"===ot||"Opera"===ot)&&"20030107"!==Qe)return!0;var Pt,dt=eval.toString().length;if(37===dt&&"Safari"!==ot&&"Firefox"!==ot&&"Other"!==ot)return!0;if(39===dt&&"Internet Explorer"!==ot&&"Other"!==ot)return!0;if(33===dt&&"Chrome"!==ot&&"AOSP"!==ot&&"Opera"!==ot&&"Other"!==ot)return!0;try{throw"a"}catch(At){try{At.toSource(),Pt=!0}catch{Pt=!1}}return Pt&&"Firefox"!==ot&&"Other"!==ot}())}},{key:"touchSupport",getData:function(Se){Se(function(){var Qe,Se=0;typeof navigator.maxTouchPoints<"u"?Se=navigator.maxTouchPoints:typeof navigator.msMaxTouchPoints<"u"&&(Se=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),Qe=!0}catch{Qe=!1}return[Se,Qe,"ontouchstart"in window]}())}},{key:"fonts",getData:function(Se,Qe){var ot=["monospace","sans-serif","serif"],dt=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];Qe.fonts.extendedJsFonts&&(dt=dt.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),dt=(dt=dt.concat(Qe.fonts.userDefinedFonts)).filter(function(Vi,Wn){return dt.indexOf(Vi)===Wn});var Yt=document.getElementsByTagName("body")[0],Bt=document.createElement("div"),$t=document.createElement("div"),vn={},Cn={},xn=function(){var Vi=document.createElement("span");return Vi.style.position="absolute",Vi.style.left="-9999px",Vi.style.fontSize="72px",Vi.style.fontStyle="normal",Vi.style.fontWeight="normal",Vi.style.letterSpacing="normal",Vi.style.lineBreak="auto",Vi.style.lineHeight="normal",Vi.style.textTransform="none",Vi.style.textAlign="left",Vi.style.textDecoration="none",Vi.style.textShadow="none",Vi.style.whiteSpace="normal",Vi.style.wordBreak="normal",Vi.style.wordSpacing="normal",Vi.innerHTML="mmmmmmmmmmlli",Vi},jn=function(Vi,Wn){var Ii=xn();return Ii.style.fontFamily="'"+Vi+"',"+Wn,Ii},Ke=function(Vi){for(var Wn=!1,Ii=0;Ii<ot.length;Ii++)if(Wn=Vi[Ii].offsetWidth!==vn[ot[Ii]]||Vi[Ii].offsetHeight!==Cn[ot[Ii]])return Wn;return Wn},si=function(){for(var Vi=[],Wn=0,Ii=ot.length;Wn<Ii;Wn++){var co=xn();co.style.fontFamily=ot[Wn],Bt.appendChild(co),Vi.push(co)}return Vi}();Yt.appendChild(Bt);for(var xr=0,Zr=ot.length;xr<Zr;xr++)vn[ot[xr]]=si[xr].offsetWidth,Cn[ot[xr]]=si[xr].offsetHeight;var Li=function(){for(var Vi={},Wn=0,Ii=dt.length;Wn<Ii;Wn++){for(var co=[],ro=0,Po=ot.length;ro<Po;ro++){var Mr=jn(dt[Wn],ot[ro]);$t.appendChild(Mr),co.push(Mr)}Vi[dt[Wn]]=co}return Vi}();Yt.appendChild($t);for(var or=[],Ri=0,to=dt.length;Ri<to;Ri++)Ke(Li[dt[Ri]])&&or.push(dt[Ri]);Yt.removeChild($t),Yt.removeChild(Bt),Se(or)},pauseBefore:!0},{key:"fontsFlash",getData:function(Se,Qe){return typeof window.swfobject<"u"?window.swfobject.hasFlashPlayerVersion("9.0.0")?Qe.fonts.swfPath?void function(Se,Qe){var ot="___fp_swf_loaded";window[ot]=function(Wt){Se(Wt)};var dt=Qe.fonts.swfContainerId;!function(Se){var Qe=document.createElement("div");Qe.setAttribute("id",(void 0).fonts.swfContainerId),document.body.appendChild(Qe)}(),window.swfobject.embedSWF(Qe.fonts.swfPath,dt,"1","1","9.0.0",!1,{onReady:ot},{allowScriptAccess:"always",menu:"false"},{})}(function(ot){Se(ot)},Qe):Se("missing options.fonts.swfPath"):Se("flash not installed"):Se("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(Se,Qe){var ot=Qe.audio;if(ot.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return Se(Qe.EXCLUDED);var dt=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==dt)return Se(Qe.NOT_AVAILABLE);var Pt=new dt(1,44100,44100),At=Pt.createOscillator();At.type="triangle",At.frequency.setValueAtTime(1e4,Pt.currentTime);var Wt=Pt.createDynamicsCompressor();S([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],function(Bt){void 0!==Wt[Bt[0]]&&"function"==typeof Wt[Bt[0]].setValueAtTime&&Wt[Bt[0]].setValueAtTime(Bt[1],Pt.currentTime)}),At.connect(Wt),Wt.connect(Pt.destination),At.start(0),Pt.startRendering();var Yt=setTimeout(function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/fingerprintjs/fingerprintjs with your user agent: "'+navigator.userAgent+'".'),Pt.oncomplete=function(){},Pt=null,Se("audioTimeout")},ot.timeout);Pt.oncomplete=function(Bt){var $t;try{clearTimeout(Yt),$t=Bt.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce(function(vn,Cn){return vn+Math.abs(Cn)},0).toString(),At.disconnect(),Wt.disconnect()}catch(vn){return void Se(vn)}Se($t)}}},{key:"enumerateDevices",getData:function(Se,Qe){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return Se(Qe.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then(function(ot){Se(ot.map(function(dt){return"id="+dt.deviceId+";gid="+dt.groupId+";"+dt.kind+";"+dt.label}))}).catch(function(ot){Se(ot)})}}],nt=function(Se){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/fingerprintjs/fingerprintjs#upgrade-guide-from-182-to-200")};return nt.get=function(Se,Qe){Qe?Se||(Se={}):(Qe=Se,Se={}),function(Se,Qe){if(null==Qe)return Se;var ot,dt;for(dt in Qe)null!=(ot=Qe[dt])&&!Object.prototype.hasOwnProperty.call(Se,dt)&&(Se[dt]=ot)}(Se,_),Se.components=Se.extraComponents.concat(Je);var ot={data:[],addPreprocessedComponent:function(At,Wt){"function"==typeof Se.preprocessor&&(Wt=Se.preprocessor(At,Wt)),ot.data.push({key:At,value:Wt})}},dt=-1,Pt=function(At){if((dt+=1)>=Se.components.length)Qe(ot.data);else{var Wt=Se.components[dt];if(Se.excludes[Wt.key])Pt(!1);else{if(!At&&Wt.pauseBefore)return dt-=1,void setTimeout(function(){Pt(!0)},1);try{Wt.getData(function(Yt){ot.addPreprocessedComponent(Wt.key,Yt),Pt(!1)},Se)}catch(Yt){ot.addPreprocessedComponent(Wt.key,String(Yt)),Pt(!1)}}}};Pt(!1)},nt.getPromise=function(Se){return new Promise(function(Qe,ot){nt.get(Se,Qe)})},nt.getV18=function(Se,Qe){return null==Qe&&(Qe=Se,Se={}),nt.get(Se,function(ot){for(var dt=[],Pt=0;Pt<ot.length;Pt++){var At=ot[Pt];if(At.value===(Se.NOT_AVAILABLE||"not available"))dt.push({key:At.key,value:"unknown"});else if("plugins"===At.key)dt.push({key:"plugins",value:M(At.value,function(Yt){var Bt=M(Yt[2],function($t){return $t.join?$t.join("~"):$t}).join(",");return[Yt[0],Yt[1],Bt].join("::")})});else if(-1!==["canvas","webgl"].indexOf(At.key)&&Array.isArray(At.value))dt.push({key:At.key,value:At.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(At.key)){if(!At.value)continue;dt.push({key:At.key,value:1})}else dt.push(At.value?At.value.join?{key:At.key,value:At.value.join(";")}:At:{key:At.key,value:At.value})}var Wt=f(M(dt,function(Yt){return Yt.value}).join("~~~"),31);Qe(Wt,dt)})},nt.x64hash128=f,nt.VERSION="2.1.4",nt})},80238:Ae=>{"use strict";var w=Array.prototype.slice,k=Object.prototype.toString;Ae.exports=function(u){var h=this;if("function"!=typeof h||"[object Function]"!==k.call(h))throw new TypeError("Function.prototype.bind called on incompatible "+h);for(var v,g=w.call(arguments,1),f=Math.max(0,h.length-g.length),_=[],S=0;S<f;S++)_.push("$"+S);if(v=Function("binder","return function ("+_.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof v){var D=h.apply(this,g.concat(w.call(arguments)));return Object(D)===D?D:this}return h.apply(u,g.concat(w.call(arguments)))}),h.prototype){var M=function(){};M.prototype=h.prototype,v.prototype=new M,M.prototype=null}return v}},45333:(Ae,y,w)=>{"use strict";var k=w(80238);Ae.exports=Function.prototype.bind||k},31552:Ae=>{"use strict";var y=function(){return"string"==typeof function(){}.name},w=Object.getOwnPropertyDescriptor;if(w)try{w([],"length")}catch{w=null}y.functionsHaveConfigurableNames=function(){if(!y()||!w)return!1;var I=w(function(){},"name");return!!I&&!!I.configurable};var k=Function.prototype.bind;y.boundFunctionsHaveNames=function(){return y()&&"function"==typeof k&&""!==function(){}.bind().name},Ae.exports=y},73198:(Ae,y,w)=>{var k=w(83970),G=function(g){this.precision=g&&g.precision?g.precision:17,this.direction=!(!g||!g.direction)&&g.direction,this.pseudoNode=!(!g||!g.pseudoNode)&&g.pseudoNode,this.objectComparator=g&&g.objectComparator?g.objectComparator:h};function I(g){return g.coordinates.map(function(v){return{type:g.type.replace("Multi",""),coordinates:v}})}function u(g,v){return g.hasOwnProperty("coordinates")?g.coordinates.length===v.coordinates.length:g.length===v.length}function h(g,v){return k(g,v,{strict:!0})}G.prototype.compare=function(g,v){if(g.type!==v.type||!u(g,v))return!1;switch(g.type){case"Point":return this.compareCoord(g.coordinates,v.coordinates);case"LineString":return this.compareLine(g.coordinates,v.coordinates,0,!1);case"Polygon":return this.comparePolygon(g,v);case"Feature":return this.compareFeature(g,v);default:if(0===g.type.indexOf("Multi")){var m=this,f=I(g),_=I(v);return f.every(function(S){return this.some(function(M){return m.compare(S,M)})},_)}}return!1},G.prototype.compareCoord=function(g,v){if(g.length!==v.length)return!1;for(var m=0;m<g.length;m++)if(g[m].toFixed(this.precision)!==v[m].toFixed(this.precision))return!1;return!0},G.prototype.compareLine=function(g,v,m,f){if(!u(g,v))return!1;var _=this.pseudoNode?g:this.removePseudo(g),S=this.pseudoNode?v:this.removePseudo(v);if(!f||this.compareCoord(_[0],S[0])||(S=this.fixStartIndex(S,_))){var M=this.compareCoord(_[m],S[m]);return this.direction||M?this.comparePath(_,S):!!this.compareCoord(_[m],S[S.length-(1+m)])&&this.comparePath(_.slice().reverse(),S)}},G.prototype.fixStartIndex=function(g,v){for(var m,f=-1,_=0;_<g.length;_++)if(this.compareCoord(g[_],v[0])){f=_;break}return f>=0&&(m=[].concat(g.slice(f,g.length),g.slice(1,f+1))),m},G.prototype.comparePath=function(g,v){var m=this;return g.every(function(f,_){return m.compareCoord(f,this[_])},v)},G.prototype.comparePolygon=function(g,v){if(this.compareLine(g.coordinates[0],v.coordinates[0],1,!0)){var m=g.coordinates.slice(1,g.coordinates.length),f=v.coordinates.slice(1,v.coordinates.length),_=this;return m.every(function(S){return this.some(function(M){return _.compareLine(S,M,1,!0)})},f)}return!1},G.prototype.compareFeature=function(g,v){return!(g.id!==v.id||!this.objectComparator(g.properties,v.properties)||!this.compareBBox(g,v))&&this.compare(g.geometry,v.geometry)},G.prototype.compareBBox=function(g,v){return!!(!g.bbox&&!v.bbox||g.bbox&&v.bbox&&this.compareCoord(g.bbox,v.bbox))},G.prototype.removePseudo=function(g){return g},Ae.exports=G},55665:(Ae,y,w)=>{var k=w(17571),G=w(90621),I=w(58570),u=w(11568).default,h=I.featureEach,m=G.featureCollection;function f(_){var S=new k(_);return S.insert=function(M){if("Feature"!==M.type)throw new Error("invalid feature");return M.bbox=M.bbox?M.bbox:u(M),k.prototype.insert.call(this,M)},S.load=function(M){var D=[];return Array.isArray(M)?M.forEach(function(R){if("Feature"!==R.type)throw new Error("invalid features");R.bbox=R.bbox?R.bbox:u(R),D.push(R)}):h(M,function(R){if("Feature"!==R.type)throw new Error("invalid features");R.bbox=R.bbox?R.bbox:u(R),D.push(R)}),k.prototype.load.call(this,D)},S.remove=function(M,D){if("Feature"!==M.type)throw new Error("invalid feature");return M.bbox=M.bbox?M.bbox:u(M),k.prototype.remove.call(this,M,D)},S.clear=function(){return k.prototype.clear.call(this)},S.search=function(M){var D=k.prototype.search.call(this,this.toBBox(M));return m(D)},S.collides=function(M){return k.prototype.collides.call(this,this.toBBox(M))},S.all=function(){var M=k.prototype.all.call(this);return m(M)},S.toJSON=function(){return k.prototype.toJSON.call(this)},S.fromJSON=function(M){return k.prototype.fromJSON.call(this,M)},S.toBBox=function(M){var D;if(M.bbox)D=M.bbox;else if(Array.isArray(M)&&4===M.length)D=M;else if(Array.isArray(M)&&6===M.length)D=[M[0],M[1],M[3],M[4]];else if("Feature"===M.type)D=u(M);else{if("FeatureCollection"!==M.type)throw new Error("invalid geojson");D=u(M)}return{minX:D[0],minY:D[1],maxX:D[2],maxY:D[3]}},S}Ae.exports=f,Ae.exports.default=f},17571:function(Ae){Ae.exports=function(){"use strict";function y(V,B,U,F,j){!function P(Q,$,oe,X,ie){for(;X>oe;){if(X-oe>600){var q=X-oe+1,se=$-oe+1,ne=Math.log(q),Ce=.5*Math.exp(2*ne/3),xe=.5*Math.sqrt(ne*Ce*(q-Ce)/q)*(se-q/2<0?-1:1);P(Q,$,Math.max(oe,Math.floor($-se*Ce/q+xe)),Math.min(X,Math.floor($+(q-se)*Ce/q+xe)),ie)}var ee=Q[$],de=oe,pe=X;for(w(Q,oe,$),ie(Q[X],ee)>0&&w(Q,oe,X);de<pe;){for(w(Q,de,pe),de++,pe--;ie(Q[de],ee)<0;)de++;for(;ie(Q[pe],ee)>0;)pe--}0===ie(Q[oe],ee)?w(Q,oe,pe):w(Q,++pe,X),pe<=$&&(oe=pe+1),$<=pe&&(X=pe-1)}}(V,B,U||0,F||V.length-1,j||k)}function w(V,B,U){var F=V[B];V[B]=V[U],V[U]=F}function k(V,B){return V<B?-1:V>B?1:0}var G=function(V){void 0===V&&(V=9),this._maxEntries=Math.max(4,V),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function I(V,B,U){if(!U)return B.indexOf(V);for(var F=0;F<B.length;F++)if(U(V,B[F]))return F;return-1}function u(V,B){h(V,0,V.children.length,B,V)}function h(V,B,U,F,j){j||(j=D(null)),j.minX=1/0,j.minY=1/0,j.maxX=-1/0,j.maxY=-1/0;for(var P=B;P<U;P++){var Q=V.children[P];g(j,V.leaf?F(Q):Q)}return j}function g(V,B){return V.minX=Math.min(V.minX,B.minX),V.minY=Math.min(V.minY,B.minY),V.maxX=Math.max(V.maxX,B.maxX),V.maxY=Math.max(V.maxY,B.maxY),V}function v(V,B){return V.minX-B.minX}function m(V,B){return V.minY-B.minY}function f(V){return(V.maxX-V.minX)*(V.maxY-V.minY)}function _(V){return V.maxX-V.minX+(V.maxY-V.minY)}function S(V,B){return V.minX<=B.minX&&V.minY<=B.minY&&B.maxX<=V.maxX&&B.maxY<=V.maxY}function M(V,B){return B.minX<=V.maxX&&B.minY<=V.maxY&&B.maxX>=V.minX&&B.maxY>=V.minY}function D(V){return{children:V,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function R(V,B,U,F,j){for(var P=[B,U];P.length;)if(!((U=P.pop())-(B=P.pop())<=F)){var Q=B+Math.ceil((U-B)/F/2)*F;y(V,Q,B,U,j),P.push(B,Q,Q,U)}}return G.prototype.all=function(){return this._all(this.data,[])},G.prototype.search=function(V){var B=this.data,U=[];if(!M(V,B))return U;for(var F=this.toBBox,j=[];B;){for(var P=0;P<B.children.length;P++){var Q=B.children[P],$=B.leaf?F(Q):Q;M(V,$)&&(B.leaf?U.push(Q):S(V,$)?this._all(Q,U):j.push(Q))}B=j.pop()}return U},G.prototype.collides=function(V){var B=this.data;if(!M(V,B))return!1;for(var U=[];B;){for(var F=0;F<B.children.length;F++){var j=B.children[F],P=B.leaf?this.toBBox(j):j;if(M(V,P)){if(B.leaf||S(V,P))return!0;U.push(j)}}B=U.pop()}return!1},G.prototype.load=function(V){if(!V||!V.length)return this;if(V.length<this._minEntries){for(var B=0;B<V.length;B++)this.insert(V[B]);return this}var U=this._build(V.slice(),0,V.length-1,0);if(this.data.children.length)if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var F=this.data;this.data=U,U=F}this._insert(U,this.data.height-U.height-1,!0)}else this.data=U;return this},G.prototype.insert=function(V){return V&&this._insert(V,this.data.height-1),this},G.prototype.clear=function(){return this.data=D([]),this},G.prototype.remove=function(V,B){if(!V)return this;for(var U,F,j,P=this.data,Q=this.toBBox(V),$=[],oe=[];P||$.length;){if(P||(P=$.pop(),F=$[$.length-1],U=oe.pop(),j=!0),P.leaf){var X=I(V,P.children,B);if(-1!==X)return P.children.splice(X,1),$.push(P),this._condense($),this}j||P.leaf||!S(P,Q)?F?(U++,P=F.children[U],j=!1):P=null:($.push(P),oe.push(U),U=0,F=P,P=P.children[0])}return this},G.prototype.toBBox=function(V){return V},G.prototype.compareMinX=function(V,B){return V.minX-B.minX},G.prototype.compareMinY=function(V,B){return V.minY-B.minY},G.prototype.toJSON=function(){return this.data},G.prototype.fromJSON=function(V){return this.data=V,this},G.prototype._all=function(V,B){for(var U=[];V;)V.leaf?B.push.apply(B,V.children):U.push.apply(U,V.children),V=U.pop();return B},G.prototype._build=function(V,B,U,F){var j,P=U-B+1,Q=this._maxEntries;if(P<=Q)return u(j=D(V.slice(B,U+1)),this.toBBox),j;F||(F=Math.ceil(Math.log(P)/Math.log(Q)),Q=Math.ceil(P/Math.pow(Q,F-1))),(j=D([])).leaf=!1,j.height=F;var $=Math.ceil(P/Q),oe=$*Math.ceil(Math.sqrt(Q));R(V,B,U,oe,this.compareMinX);for(var X=B;X<=U;X+=oe){var ie=Math.min(X+oe-1,U);R(V,X,ie,$,this.compareMinY);for(var q=X;q<=ie;q+=$){var se=Math.min(q+$-1,ie);j.children.push(this._build(V,q,se,F-1))}}return u(j,this.toBBox),j},G.prototype._chooseSubtree=function(V,B,U,F){for(;F.push(B),!B.leaf&&F.length-1!==U;){for(var j=1/0,P=1/0,Q=void 0,$=0;$<B.children.length;$++){var oe=B.children[$],X=f(oe),ie=(q=V,se=oe,(Math.max(se.maxX,q.maxX)-Math.min(se.minX,q.minX))*(Math.max(se.maxY,q.maxY)-Math.min(se.minY,q.minY))-X);ie<P?(P=ie,j=X<j?X:j,Q=oe):ie===P&&X<j&&(j=X,Q=oe)}B=Q||B.children[0]}var q,se;return B},G.prototype._insert=function(V,B,U){var F=U?V:this.toBBox(V),j=[],P=this._chooseSubtree(F,this.data,B,j);for(P.children.push(V),g(P,F);B>=0&&j[B].children.length>this._maxEntries;)this._split(j,B),B--;this._adjustParentBBoxes(F,j,B)},G.prototype._split=function(V,B){var U=V[B],F=U.children.length,j=this._minEntries;this._chooseSplitAxis(U,j,F);var P=this._chooseSplitIndex(U,j,F),Q=D(U.children.splice(P,U.children.length-P));Q.height=U.height,Q.leaf=U.leaf,u(U,this.toBBox),u(Q,this.toBBox),B?V[B-1].children.push(Q):this._splitRoot(U,Q)},G.prototype._splitRoot=function(V,B){this.data=D([V,B]),this.data.height=V.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},G.prototype._chooseSplitIndex=function(V,B,U){for(var F,j,P,Q,$,oe,X,ie=1/0,q=1/0,se=B;se<=U-B;se++){var ne=h(V,0,se,this.toBBox),Ce=h(V,se,U,this.toBBox),xe=(j=ne,P=Ce,void 0,void 0,void 0,void 0,Q=Math.max(j.minX,P.minX),$=Math.max(j.minY,P.minY),oe=Math.min(j.maxX,P.maxX),X=Math.min(j.maxY,P.maxY),Math.max(0,oe-Q)*Math.max(0,X-$)),ue=f(ne)+f(Ce);xe<ie?(ie=xe,F=se,q=ue<q?ue:q):xe===ie&&ue<q&&(q=ue,F=se)}return F||U-B},G.prototype._chooseSplitAxis=function(V,B,U){var F=V.leaf?this.compareMinX:v,j=V.leaf?this.compareMinY:m;this._allDistMargin(V,B,U,F)<this._allDistMargin(V,B,U,j)&&V.children.sort(F)},G.prototype._allDistMargin=function(V,B,U,F){V.children.sort(F);for(var j=this.toBBox,P=h(V,0,B,j),Q=h(V,U-B,U,j),$=_(P)+_(Q),oe=B;oe<U-B;oe++){var X=V.children[oe];g(P,V.leaf?j(X):X),$+=_(P)}for(var ie=U-B-1;ie>=B;ie--){var q=V.children[ie];g(Q,V.leaf?j(q):q),$+=_(Q)}return $},G.prototype._adjustParentBBoxes=function(V,B,U){for(var F=U;F>=0;F--)g(B[F],V)},G.prototype._condense=function(V){for(var B=V.length-1,U=void 0;B>=0;B--)0===V[B].children.length?B>0?(U=V[B-1].children).splice(U.indexOf(V[B]),1):this.clear():u(V[B],this.toBBox)},G}()},11924:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=g(w(86953)),G=g(w(25794)),I=g(w(47176)),u=g(w(83620)),h=w(15419);function g(f){return f&&f.__esModule?f:{default:f}}y.default=function(_,S,M){var D=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,R=(0,k.default)(_),V=(0,G.default)(_),B=S/D,U=(0,I.default)(M),F=(0,I.default)(R),j=(0,I.default)(V),P=Math.asin(Math.sin(F)*Math.cos(B)+Math.cos(F)*Math.sin(B)*Math.cos(U)),Q=j+Math.atan2(Math.sin(U)*Math.sin(B)*Math.cos(F),Math.cos(B)-Math.sin(F)*Math.sin(P)),$=(0,u.default)(Q);return($<h.MINLON||$>h.MAXLON)&&(Q=(Q+3*Math.PI)%(2*Math.PI)-Math.PI,$=(0,u.default)(Q)),{latitude:(0,u.default)(P),longitude:$}}},15419:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.areaConversion=y.timeConversion=y.distanceConversion=y.altitudeKeys=y.latitudeKeys=y.longitudeKeys=y.MAXLON=y.MINLON=y.MAXLAT=y.MINLAT=y.earthRadius=y.sexagesimalPattern=void 0,y.sexagesimalPattern=/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['\u2032]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["\u2033]\s*)?([NEOSW]?)$/,y.earthRadius=6378137,y.MINLAT=-90,y.MAXLAT=90,y.MINLON=-180,y.MAXLON=180,y.longitudeKeys=["lng","lon","longitude",0],y.latitudeKeys=["lat","latitude",1],y.altitudeKeys=["alt","altitude","elevation","elev",2],y.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},y.timeConversion={m:60,h:3600,d:86400};var S={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};y.areaConversion=S,S.sqm=S.m2,S.sqkm=S.km2,S.sqft=S.ft2,S.sqyd=S.yd2,S.sqin=S.in2},1572:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=w(15419);y.default=function(h){var v=k.areaConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(v)return h*v;throw new Error("Invalid unit used for area conversion.")}},23394:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=w(15419);y.default=function(h){var v=k.distanceConversion[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m"];if(v)return h*v;throw new Error("Invalid unit used for distance conversion.")}},13418:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=w(15419);y.default=function(h){switch(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh"){case"kmh":return h*k.timeConversion.h*k.distanceConversion.km;case"mph":return h*k.timeConversion.h*k.distanceConversion.mi;default:return h}}},73370:(Ae,y)=>{"use strict";function w(f,_){return function h(f){if(Array.isArray(f))return f}(f)||function u(f,_){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(f)){var S=[],M=!0,D=!1,R=void 0;try{for(var B,V=f[Symbol.iterator]();!(M=(B=V.next()).done)&&(S.push(B.value),!_||S.length!==_);M=!0);}catch(U){D=!0,R=U}finally{try{!M&&null!=V.return&&V.return()}finally{if(D)throw R}}return S}}(f,_)||function G(f,_){if(f){if("string"==typeof f)return I(f,_);var S=Object.prototype.toString.call(f).slice(8,-1);if("Object"===S&&f.constructor&&(S=f.constructor.name),"Map"===S||"Set"===S)return Array.from(f);if("Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return I(f,_)}}(f,_)||function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(f,_){(null==_||_>f.length)&&(_=f.length);for(var S=0,M=new Array(_);S<_;S++)M[S]=f[S];return M}Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,y.default=function(_){var M=w(_.toString().split("."),2),R=M[1],V=Math.abs(Number(M[0])),B=60*+("0."+(R||0)),U=B.toString().split("."),F=Math.floor(B),j=function(_){var M=Math.pow(10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:4);return Math.round(_*M)/M}(60*+("0."+(U[1]||0))).toString(),Q=w(j.split("."),2),$=Q[0],oe=Q[1],X=void 0===oe?"0":oe;return V+"\xb0 "+F.toString().padStart(2,"0")+"' "+$.padStart(2,"0")+"."+X.padEnd(1,"0")+'"'}},60427:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(h){return h&&h.__esModule?h:{default:h}}(w(35548));y.default=function(g,v){return(0,k.default)(g,v)[0]}},59913:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=h(w(47176)),G=h(w(86953)),I=h(w(25794)),u=w(15419);function h(m){return m&&m.__esModule?m:{default:m}}y.default=function(f){var _=0;if(f.length>2){for(var S,M,D,R=0;R<f.length;R++){R===f.length-2?(S=f.length-2,M=f.length-1,D=0):R===f.length-1?(S=f.length-1,M=0,D=1):(S=R,M=R+1,D=R+2);var V=(0,I.default)(f[S]),B=(0,G.default)(f[M]),U=(0,I.default)(f[D]);_+=((0,k.default)(U)-(0,k.default)(V))*Math.sin((0,k.default)(B))}_=_*u.earthRadius*u.earthRadius/2}return Math.abs(_)}},12968:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=I(w(86953)),G=I(w(25794));function I(g){return g&&g.__esModule?g:{default:g}}y.default=function(v){if(!1===Array.isArray(v)||0===v.length)throw new Error("No points were given.");return v.reduce(function(m,f){var _=(0,k.default)(f),S=(0,G.default)(f);return{maxLat:Math.max(_,m.maxLat),minLat:Math.min(_,m.minLat),maxLng:Math.max(S,m.maxLng),minLng:Math.min(S,m.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}},82477:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=g(w(86953)),G=g(w(25794)),I=g(w(47176)),u=g(w(83620)),h=w(15419);function g(f){return f&&f.__esModule?f:{default:f}}y.default=function(_,S){var oe,X,M=(0,k.default)(_),D=(0,G.default)(_),R=(0,I.default)(M),V=(0,I.default)(D),B=S/h.earthRadius,U=R-B,F=R+B,j=(0,I.default)(h.MAXLAT),P=(0,I.default)(h.MINLAT),Q=(0,I.default)(h.MAXLON),$=(0,I.default)(h.MINLON);if(U>P&&F<j){var ie=Math.asin(Math.sin(B)/Math.cos(R));(oe=V-ie)<$&&(oe+=2*Math.PI),(X=V+ie)>Q&&(X-=2*Math.PI)}else U=Math.max(U,P),F=Math.min(F,j),oe=$,X=Q;return[{latitude:(0,u.default)(U),longitude:(0,u.default)(oe)},{latitude:(0,u.default)(F),longitude:(0,u.default)(X)}]}},67977:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=h(w(86953)),G=h(w(25794)),I=h(w(47176)),u=h(w(83620));function h(m){return m&&m.__esModule?m:{default:m}}y.default=function(f){if(!1===Array.isArray(f)||0===f.length)return!1;var _=f.length,S=f.reduce(function(V,B){var U=(0,I.default)((0,k.default)(B)),F=(0,I.default)((0,G.default)(B));return{X:V.X+Math.cos(U)*Math.cos(F),Y:V.Y+Math.cos(U)*Math.sin(F),Z:V.Z+Math.sin(U)}},{X:0,Y:0,Z:0}),M=S.X/_,D=S.Y/_,R=S.Z/_;return{longitude:(0,u.default)(Math.atan2(D,M)),latitude:(0,u.default)(Math.atan2(R,Math.sqrt(M*M+D*D)))}}},1102:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(h){return h&&h.__esModule?h:{default:h}}(w(12968));y.default=function(g){var v=(0,k.default)(g),f=v.minLng+(v.maxLng-v.minLng)/2;return{latitude:parseFloat((v.minLat+(v.maxLat-v.minLat)/2).toFixed(6)),longitude:parseFloat(f.toFixed(6))}}},21345:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(h){return h&&h.__esModule?h:{default:h}}(w(54539));y.default=function(g,v){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.default,f="function"==typeof m?m(g,v):(0,k.default)(g,v);if(isNaN(f))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(f/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}},28954:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,y.default=function(I,u){return u.reduce(function(h,g){if(typeof I>"u"||null===I)throw new Error("'".concat(I,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(I,g)&&typeof g<"u"&&typeof h>"u"?(h=g,g):h},void 0)}},80999:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=w(15419),G=function I(f){return f&&f.__esModule?f:{default:f}}(w(28954));function u(f,_){var S=Object.keys(f);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(f);_&&(M=M.filter(function(D){return Object.getOwnPropertyDescriptor(f,D).enumerable})),S.push.apply(S,M)}return S}function g(f,_,S){return _ in f?Object.defineProperty(f,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):f[_]=S,f}y.default=function(_){var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:k.longitudeKeys,latitude:k.latitudeKeys,altitude:k.altitudeKeys},M=(0,G.default)(_,S.longitude),D=(0,G.default)(_,S.latitude),R=(0,G.default)(_,S.altitude);return function h(f){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?u(Object(S),!0).forEach(function(M){g(f,M,S[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(S)):u(Object(S)).forEach(function(M){Object.defineProperty(f,M,Object.getOwnPropertyDescriptor(S,M))})}return f}({latitude:D,longitude:M},R?{altitude:R}:{})}},37842:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=g(w(86953)),G=g(w(25794)),I=g(w(47176)),u=g(w(55012)),h=w(15419);function g(f){return f&&f.__esModule?f:{default:f}}y.default=function(_,S){var M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;M=typeof M<"u"&&!isNaN(M)?M:1;var D=(0,k.default)(_),R=(0,G.default)(_),V=(0,k.default)(S),B=(0,G.default)(S),U=Math.acos((0,u.default)(Math.sin((0,I.default)(V))*Math.sin((0,I.default)(D))+Math.cos((0,I.default)(V))*Math.cos((0,I.default)(D))*Math.cos((0,I.default)(R)-(0,I.default)(B))))*h.earthRadius;return Math.round(U/M)*M}},55868:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=I(w(37842)),G=I(w(55012));function I(g){return g&&g.__esModule?g:{default:g}}y.default=function(v,m,f){var _=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,S=(0,k.default)(m,v,_),M=(0,k.default)(v,f,_),D=(0,k.default)(m,f,_),R=Math.acos((0,G.default)((S*S+D*D-M*M)/(2*S*D))),V=Math.acos((0,G.default)((M*M+D*D-S*S)/(2*M*D)));return R>Math.PI/2?S:V>Math.PI/2?M:Math.sin(R)*S}},73466:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=h(w(86953)),G=h(w(25794)),I=h(w(47176)),u=h(w(83620));function h(m){return m&&m.__esModule?m:{default:m}}y.default=function(f,_){var S=(0,k.default)(_),M=(0,G.default)(_),D=(0,k.default)(f),R=(0,G.default)(f);return((0,u.default)(Math.atan2(Math.sin((0,I.default)(M)-(0,I.default)(R))*Math.cos((0,I.default)(S)),Math.cos((0,I.default)(D))*Math.sin((0,I.default)(S))-Math.sin((0,I.default)(D))*Math.cos((0,I.default)(S))*Math.cos((0,I.default)(M)-(0,I.default)(R))))+360)%360}},86953:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=w(15419),G=u(w(28954)),I=u(w(76232));function u(v){return v&&v.__esModule?v:{default:v}}y.default=function(m,f){var _=(0,G.default)(m,k.latitudeKeys);if(!(typeof _>"u"||null===_)){var S=m[_];return!0===f?S:(0,I.default)(S)}}},25794:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=w(15419),G=u(w(28954)),I=u(w(76232));function u(v){return v&&v.__esModule?v:{default:v}}y.default=function(m,f){var _=(0,G.default)(m,k.longitudeKeys);if(!(typeof _>"u"||null===_)){var S=m[_];return!0===f?S:(0,I.default)(S)}}},61931:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(g){return g&&g.__esModule?g:{default:g}}(w(37842));function I(g){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(g)}y.default=function(v){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.default;return v.reduce(function(f,_){return"object"===I(f)&&null!==f.last&&(f.distance+=m(_,f.last)),f.last=_,f},{last:null,distance:0}).distance}},23502:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=h(w(86953)),G=h(w(25794)),I=h(w(47176)),u=w(15419);function h(m){return m&&m.__esModule?m:{default:m}}y.default=function(f,_){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;S=typeof S<"u"&&!isNaN(S)?S:1;var j,P,Q,$,oe,X,fe,M=(0,k.default)(f),D=(0,G.default)(f),R=(0,k.default)(_),V=(0,G.default)(_),B=6356752.314245,U=1/298.257223563,F=(0,I.default)(V-D),ie=Math.atan((1-U)*Math.tan((0,I.default)(parseFloat(M)))),q=Math.atan((1-U)*Math.tan((0,I.default)(parseFloat(R)))),se=Math.sin(ie),ne=Math.cos(ie),Ce=Math.sin(q),xe=Math.cos(q),ue=F,ee=100;do{var de=Math.sin(ue),pe=Math.cos(ue);if(0===(X=Math.sqrt(xe*de*(xe*de)+(ne*Ce-se*xe*pe)*(ne*Ce-se*xe*pe))))return 0;j=se*Ce+ne*xe*pe,P=Math.atan2(X,j),oe=j-2*se*Ce/($=1-(Q=ne*xe*de/X)*Q),isNaN(oe)&&(oe=0);var ce=U/16*$*(4+U*(4-3*$));fe=ue,ue=F+(1-ce)*U*Q*(P+ce*X*(oe+ce*j*(2*oe*oe-1)))}while(Math.abs(ue-fe)>1e-12&&--ee>0);if(0===ee)return NaN;var ae=$*(u.earthRadius*u.earthRadius-B*B)/(B*B),Me=ae/1024*(256+ae*(ae*(74-47*ae)-128));return Math.round(B*(1+ae/16384*(4096+ae*(ae*(320-175*ae)-768)))*(P-Me*X*(oe+Me/4*(j*(2*oe*oe-1)-Me/6*oe*(4*X*X-3)*(4*oe*oe-3))))/S)*S}},54539:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=h(w(86953)),G=h(w(25794)),I=h(w(47176)),u=h(w(83620));function h(m){return m&&m.__esModule?m:{default:m}}y.default=function(f,_){var S=(0,I.default)((0,G.default)(_))-(0,I.default)((0,G.default)(f)),M=Math.log(Math.tan((0,I.default)((0,k.default)(_))/2+Math.PI/4)/Math.tan((0,I.default)((0,k.default)(f))/2+Math.PI/4));return Math.abs(S)>Math.PI&&(S=S>0?-1*(2*Math.PI-S):2*Math.PI+S),((0,u.default)(Math.atan2(S,M))+360)%360}},3467:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,y.default=function(I){return/^(NNE|NE|NNW|N)$/.test(I)?"N":/^(ENE|E|ESE|SE)$/.test(I)?"E":/^(SSE|S|SSW|SW)$/.test(I)?"S":/^(WSW|W|WNW|NW)$/.test(I)?"W":void 0}},393:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(h){return h&&h.__esModule?h:{default:h}}(w(37842));y.default=function(g,v){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.default)(g,v)/(Number(v.time)-Number(g.time))*1e3}},80939:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(y,"computeDestinationPoint",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(y,"convertArea",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(y,"convertDistance",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(y,"convertSpeed",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(y,"decimalToSexagesimal",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(y,"findNearest",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(y,"getAreaOfPolygon",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(y,"getBounds",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(y,"getBoundsOfDistance",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(y,"getCenter",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(y,"getCenterOfBounds",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(y,"getCompassDirection",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(y,"getCoordinateKey",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(y,"getCoordinateKeys",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(y,"getDistance",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(y,"getDistanceFromLine",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(y,"getGreatCircleBearing",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(y,"getLatitude",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(y,"getLongitude",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(y,"getPathLength",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(y,"getPreciseDistance",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(y,"getRhumbLineBearing",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(y,"getRoughCompassDirection",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(y,"getSpeed",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(y,"isDecimal",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(y,"isPointInLine",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(y,"isPointInPolygon",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(y,"isPointNearLine",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(y,"isPointWithinRadius",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(y,"isSexagesimal",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(y,"isValidCoordinate",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(y,"isValidLatitude",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(y,"isValidLongitude",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(y,"orderByDistance",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(y,"sexagesimalToDecimal",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(y,"toDecimal",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(y,"toRad",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(y,"toDeg",{enumerable:!0,get:function(){return Me.default}}),Object.defineProperty(y,"wktToPolygon",{enumerable:!0,get:function(){return _e.default}});var G=Ue(w(11924)),I=Ue(w(1572)),u=Ue(w(23394)),h=Ue(w(13418)),g=Ue(w(73370)),v=Ue(w(60427)),m=Ue(w(59913)),f=Ue(w(12968)),_=Ue(w(82477)),S=Ue(w(67977)),M=Ue(w(1102)),D=Ue(w(21345)),R=Ue(w(28954)),V=Ue(w(80999)),B=Ue(w(37842)),U=Ue(w(55868)),F=Ue(w(73466)),j=Ue(w(86953)),P=Ue(w(25794)),Q=Ue(w(61931)),$=Ue(w(23502)),oe=Ue(w(54539)),X=Ue(w(3467)),ie=Ue(w(393)),q=Ue(w(8155)),se=Ue(w(60909)),ne=Ue(w(37349)),Ce=Ue(w(15942)),xe=Ue(w(23609)),ue=Ue(w(75099)),fe=Ue(w(69345)),ee=Ue(w(91041)),de=Ue(w(82816)),pe=Ue(w(35548)),ce=Ue(w(52402)),ae=Ue(w(76232)),ye=Ue(w(47176)),Me=Ue(w(83620)),_e=Ue(w(93498)),Fe=w(15419);function Ue(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}Object.keys(Fe).forEach(function(Ge){"default"===Ge||"__esModule"===Ge||Object.prototype.hasOwnProperty.call(k,Ge)||Object.defineProperty(y,Ge,{enumerable:!0,get:function(){return Fe[Ge]}})})},8155:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,y.default=function(I){var u=I.toString().trim();return!isNaN(parseFloat(u))&&parseFloat(u)===Number(u)}},60909:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(h){return h&&h.__esModule?h:{default:h}}(w(37842));y.default=function(g,v,m){return(0,k.default)(v,g)+(0,k.default)(g,m)===(0,k.default)(v,m)}},37349:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=I(w(86953)),G=I(w(25794));function I(g){return g&&g.__esModule?g:{default:g}}y.default=function(v,m){for(var f=!1,_=m.length,S=-1,M=_-1;++S<_;M=S)((0,G.default)(m[S])<=(0,G.default)(v)&&(0,G.default)(v)<(0,G.default)(m[M])||(0,G.default)(m[M])<=(0,G.default)(v)&&(0,G.default)(v)<(0,G.default)(m[S]))&&(0,k.default)(v)<((0,k.default)(m[M])-(0,k.default)(m[S]))*((0,G.default)(v)-(0,G.default)(m[S]))/((0,G.default)(m[M])-(0,G.default)(m[S]))+(0,k.default)(m[S])&&(f=!f);return f}},15942:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(h){return h&&h.__esModule?h:{default:h}}(w(55868));y.default=function(g,v,m,f){return(0,k.default)(g,v,m)<f}},23609:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(h){return h&&h.__esModule?h:{default:h}}(w(37842));y.default=function(g,v,m){return(0,k.default)(g,v,.01)<m}},75099:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=w(15419);y.default=function(h){return k.sexagesimalPattern.test(h.toString().trim())}},69345:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=u(w(80999)),G=u(w(91041)),I=u(w(82816));function u(v){return v&&v.__esModule?v:{default:v}}y.default=function(m){var f=(0,k.default)(m),_=f.latitude,S=f.longitude;if(Array.isArray(m)&&m.length>=2)return(0,I.default)(m[0])&&(0,G.default)(m[1]);if(typeof _>"u"||typeof S>"u")return!1;var M=m[S],D=m[_];return!(typeof D>"u"||typeof M>"u"||!1===(0,G.default)(D)||!1===(0,I.default)(M))}},91041:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=h(w(8155)),G=h(w(75099)),I=h(w(52402)),u=w(15419);function h(m){return m&&m.__esModule?m:{default:m}}y.default=function m(f){return(0,k.default)(f)?!(parseFloat(f)>u.MAXLAT||f<u.MINLAT):!!(0,G.default)(f)&&m((0,I.default)(f))}},82816:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=h(w(8155)),G=h(w(75099)),I=h(w(52402)),u=w(15419);function h(m){return m&&m.__esModule?m:{default:m}}y.default=function m(f){return(0,k.default)(f)?!(parseFloat(f)>u.MAXLON||f<u.MINLON):!!(0,G.default)(f)&&m((0,I.default)(f))}},35548:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=function G(h){return h&&h.__esModule?h:{default:h}}(w(37842));y.default=function(g,v){var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.default;return m="function"==typeof m?m:k.default,v.slice().sort(function(f,_){return m(g,f)-m(g,_)})}},55012:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,y.default=function(I){return I>1?1:I<-1?-1:I}},52402:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=w(15419);y.default=function(h){var g=new RegExp(k.sexagesimalPattern).exec(h.toString().trim());if(typeof g>"u"||null===g)throw new Error("Given value is not in sexagesimal format");var v=Number(g[2])/60||0,m=Number(g[4])/3600||0,f=parseFloat(g[1])+v+m;return["S","W"].includes(g[7])?-f:f}},76232:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var k=g(w(8155)),G=g(w(75099)),I=g(w(52402)),u=g(w(69345)),h=g(w(80999));function g(M){return M&&M.__esModule?M:{default:M}}function v(M,D){var R=Object.keys(M);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(M);D&&(V=V.filter(function(B){return Object.getOwnPropertyDescriptor(M,B).enumerable})),R.push.apply(R,V)}return R}function m(M){for(var D=1;D<arguments.length;D++){var R=null!=arguments[D]?arguments[D]:{};D%2?v(Object(R),!0).forEach(function(V){f(M,V,R[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(R)):v(Object(R)).forEach(function(V){Object.defineProperty(M,V,Object.getOwnPropertyDescriptor(R,V))})}return M}function f(M,D,R){return D in M?Object.defineProperty(M,D,{value:R,enumerable:!0,configurable:!0,writable:!0}):M[D]=R,M}y.default=function M(D){if((0,k.default)(D))return Number(D);if((0,G.default)(D))return(0,I.default)(D);if((0,u.default)(D)){var R=(0,h.default)(D);return Array.isArray(D)?D.map(function(V,B){return[0,1].includes(B)?M(V):V}):m(m(m({},D),R.latitude&&f({},R.latitude,M(D[R.latitude]))),R.longitude&&f({},R.longitude,M(D[R.longitude])))}return Array.isArray(D)?D.map(function(V){return(0,u.default)(V)?M(V):V}):D}},83620:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,y.default=function(I){return 180*I/Math.PI}},47176:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,y.default=function(I){return I*Math.PI/180}},93498:(Ae,y)=>{"use strict";function I(m,f){(null==f||f>m.length)&&(f=m.length);for(var _=0,S=new Array(f);_<f;_++)S[_]=m[_];return S}Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0,y.default=function(f){if(!f.startsWith("POLYGON"))throw new Error("Invalid wkt.");return f.slice(f.indexOf("(")+2,f.indexOf(")")).split(", ").map(function(M){var R=function w(m,f){return function h(m){if(Array.isArray(m))return m}(m)||function u(m,f){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(m)){var _=[],S=!0,M=!1,D=void 0;try{for(var V,R=m[Symbol.iterator]();!(S=(V=R.next()).done)&&(_.push(V.value),!f||_.length!==f);S=!0);}catch(B){M=!0,D=B}finally{try{!S&&null!=R.return&&R.return()}finally{if(M)throw D}}return _}}(m,f)||function G(m,f){if(m){if("string"==typeof m)return I(m,f);var _=Object.prototype.toString.call(m).slice(8,-1);if("Object"===_&&m.constructor&&(_=m.constructor.name),"Map"===_||"Set"===_)return Array.from(m);if("Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return I(m,f)}}(m,f)||function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(M.split(" "),2),B=R[1];return{longitude:parseFloat(R[0]),latitude:parseFloat(B)}})}},90491:(Ae,y,w)=>{"use strict";var k,G=SyntaxError,I=Function,u=TypeError,h=function(Ce){try{return I('"use strict"; return ('+Ce+").constructor;")()}catch{}},g=Object.getOwnPropertyDescriptor;if(g)try{g({},"")}catch{g=null}var v=function(){throw new u},m=g?function(){try{return v}catch{try{return g(arguments,"callee").get}catch{return v}}}():v,f=w(76152)(),_=w(39028)(),S=Object.getPrototypeOf||(_?function(Ce){return Ce.__proto__}:null),M={},D=typeof Uint8Array>"u"||!S?k:S(Uint8Array),R={"%AggregateError%":typeof AggregateError>"u"?k:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?k:ArrayBuffer,"%ArrayIteratorPrototype%":f&&S?S([][Symbol.iterator]()):k,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":M,"%AsyncGenerator%":M,"%AsyncGeneratorFunction%":M,"%AsyncIteratorPrototype%":M,"%Atomics%":typeof Atomics>"u"?k:Atomics,"%BigInt%":typeof BigInt>"u"?k:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?k:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?k:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?k:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?k:Float32Array,"%Float64Array%":typeof Float64Array>"u"?k:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?k:FinalizationRegistry,"%Function%":I,"%GeneratorFunction%":M,"%Int8Array%":typeof Int8Array>"u"?k:Int8Array,"%Int16Array%":typeof Int16Array>"u"?k:Int16Array,"%Int32Array%":typeof Int32Array>"u"?k:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f&&S?S(S([][Symbol.iterator]())):k,"%JSON%":"object"==typeof JSON?JSON:k,"%Map%":typeof Map>"u"?k:Map,"%MapIteratorPrototype%":typeof Map>"u"||!f||!S?k:S((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?k:Promise,"%Proxy%":typeof Proxy>"u"?k:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?k:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?k:Set,"%SetIteratorPrototype%":typeof Set>"u"||!f||!S?k:S((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?k:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f&&S?S(""[Symbol.iterator]()):k,"%Symbol%":f?Symbol:k,"%SyntaxError%":G,"%ThrowTypeError%":m,"%TypedArray%":D,"%TypeError%":u,"%Uint8Array%":typeof Uint8Array>"u"?k:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?k:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?k:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?k:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?k:WeakMap,"%WeakRef%":typeof WeakRef>"u"?k:WeakRef,"%WeakSet%":typeof WeakSet>"u"?k:WeakSet};if(S)try{null.error}catch(Ce){var V=S(S(Ce));R["%Error.prototype%"]=V}var B=function Ce(xe){var ue;if("%AsyncFunction%"===xe)ue=h("async function () {}");else if("%GeneratorFunction%"===xe)ue=h("function* () {}");else if("%AsyncGeneratorFunction%"===xe)ue=h("async function* () {}");else if("%AsyncGenerator%"===xe){var fe=Ce("%AsyncGeneratorFunction%");fe&&(ue=fe.prototype)}else if("%AsyncIteratorPrototype%"===xe){var ee=Ce("%AsyncGenerator%");ee&&S&&(ue=S(ee.prototype))}return R[xe]=ue,ue},U={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},F=w(45333),j=w(68533),P=F.call(Function.call,Array.prototype.concat),Q=F.call(Function.apply,Array.prototype.splice),$=F.call(Function.call,String.prototype.replace),oe=F.call(Function.call,String.prototype.slice),X=F.call(Function.call,RegExp.prototype.exec),ie=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,ne=function(xe,ue){var ee,fe=xe;if(j(U,fe)&&(fe="%"+(ee=U[fe])[0]+"%"),j(R,fe)){var de=R[fe];if(de===M&&(de=B(fe)),typeof de>"u"&&!ue)throw new u("intrinsic "+xe+" exists, but is not available. Please file an issue!");return{alias:ee,name:fe,value:de}}throw new G("intrinsic "+xe+" does not exist!")};Ae.exports=function(xe,ue){if("string"!=typeof xe||0===xe.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof ue)throw new u('"allowMissing" argument must be a boolean');if(null===X(/^%?[^%]*%?$/,xe))throw new G("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var fe=function(xe){var ue=oe(xe,0,1),fe=oe(xe,-1);if("%"===ue&&"%"!==fe)throw new G("invalid intrinsic syntax, expected closing `%`");if("%"===fe&&"%"!==ue)throw new G("invalid intrinsic syntax, expected opening `%`");var ee=[];return $(xe,ie,function(de,pe,ce,ae){ee[ee.length]=ce?$(ae,q,"$1"):pe||de}),ee}(xe),ee=fe.length>0?fe[0]:"",de=ne("%"+ee+"%",ue),pe=de.name,ce=de.value,ae=!1,ye=de.alias;ye&&(ee=ye[0],Q(fe,P([0,1],ye)));for(var Me=1,_e=!0;Me<fe.length;Me+=1){var Fe=fe[Me],Ue=oe(Fe,0,1),Ge=oe(Fe,-1);if(('"'===Ue||"'"===Ue||"`"===Ue||'"'===Ge||"'"===Ge||"`"===Ge)&&Ue!==Ge)throw new G("property names with quotes must have matching quotes");if(("constructor"===Fe||!_e)&&(ae=!0),j(R,pe="%"+(ee+="."+Fe)+"%"))ce=R[pe];else if(null!=ce){if(!(Fe in ce)){if(!ue)throw new u("base intrinsic for "+xe+" exists, but the property is not available.");return}if(g&&Me+1>=fe.length){var $e=g(ce,Fe);ce=(_e=!!$e)&&"get"in $e&&!("originalValue"in $e.get)?$e.get:ce[Fe]}else _e=j(ce,Fe),ce=ce[Fe];_e&&!ae&&(R[pe]=ce)}}return ce}},57271:(Ae,y,w)=>{var k;!function(G,I,u,h){"use strict";var B,g=["","webkit","Moz","MS","ms","o"],v=I.createElement("div"),m="function",f=Math.round,_=Math.abs,S=Date.now;function M(Be,_t,Lt){return setTimeout(P(Be,Lt),_t)}function D(Be,_t,Lt){return!!Array.isArray(Be)&&(R(Be,Lt[_t],Lt),!0)}function R(Be,_t,Lt){var nn;if(Be)if(Be.forEach)Be.forEach(_t,Lt);else if(Be.length!==h)for(nn=0;nn<Be.length;)_t.call(Lt,Be[nn],nn,Be),nn++;else for(nn in Be)Be.hasOwnProperty(nn)&&_t.call(Lt,Be[nn],nn,Be)}function V(Be,_t,Lt){var nn="DEPRECATED METHOD: "+_t+"\n"+Lt+" AT \n";return function(){var Pn=new Error("get-stack-trace"),en=Pn&&Pn.stack?Pn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ri=G.console&&(G.console.warn||G.console.log);return ri&&ri.call(G.console,nn,en),Be.apply(this,arguments)}}B="function"!=typeof Object.assign?function(_t){if(_t===h||null===_t)throw new TypeError("Cannot convert undefined or null to object");for(var Lt=Object(_t),nn=1;nn<arguments.length;nn++){var Pn=arguments[nn];if(Pn!==h&&null!==Pn)for(var en in Pn)Pn.hasOwnProperty(en)&&(Lt[en]=Pn[en])}return Lt}:Object.assign;var U=V(function(_t,Lt,nn){for(var Pn=Object.keys(Lt),en=0;en<Pn.length;)(!nn||nn&&_t[Pn[en]]===h)&&(_t[Pn[en]]=Lt[Pn[en]]),en++;return _t},"extend","Use `assign`."),F=V(function(_t,Lt){return U(_t,Lt,!0)},"merge","Use `assign`.");function j(Be,_t,Lt){var Pn,nn=_t.prototype;(Pn=Be.prototype=Object.create(nn)).constructor=Be,Pn._super=nn,Lt&&B(Pn,Lt)}function P(Be,_t){return function(){return Be.apply(_t,arguments)}}function Q(Be,_t){return typeof Be==m?Be.apply(_t&&_t[0]||h,_t):Be}function $(Be,_t){return Be===h?_t:Be}function oe(Be,_t,Lt){R(se(_t),function(nn){Be.addEventListener(nn,Lt,!1)})}function X(Be,_t,Lt){R(se(_t),function(nn){Be.removeEventListener(nn,Lt,!1)})}function ie(Be,_t){for(;Be;){if(Be==_t)return!0;Be=Be.parentNode}return!1}function q(Be,_t){return Be.indexOf(_t)>-1}function se(Be){return Be.trim().split(/\s+/g)}function ne(Be,_t,Lt){if(Be.indexOf&&!Lt)return Be.indexOf(_t);for(var nn=0;nn<Be.length;){if(Lt&&Be[nn][Lt]==_t||!Lt&&Be[nn]===_t)return nn;nn++}return-1}function Ce(Be){return Array.prototype.slice.call(Be,0)}function xe(Be,_t,Lt){for(var nn=[],Pn=[],en=0;en<Be.length;){var ri=_t?Be[en][_t]:Be[en];ne(Pn,ri)<0&&nn.push(Be[en]),Pn[en]=ri,en++}return Lt&&(nn=_t?nn.sort(function(yr,xa){return yr[_t]>xa[_t]}):nn.sort()),nn}function ue(Be,_t){for(var Lt,nn,Pn=_t[0].toUpperCase()+_t.slice(1),en=0;en<g.length;){if((nn=(Lt=g[en])?Lt+Pn:_t)in Be)return nn;en++}return h}var fe=1;function de(Be){var _t=Be.ownerDocument||Be;return _t.defaultView||_t.parentWindow||G}var ce="ontouchstart"in G,ae=ue(G,"PointerEvent")!==h,ye=ce&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Me="touch",Fe="mouse",Ge=25,$e=1,Pe=4,je=8,ht=1,Re=2,tt=4,it=8,qe=16,Oe=Re|tt,Te=it|qe,Ne=Oe|Te,rt=["x","y"],xt=["clientX","clientY"];function gt(Be,_t){var Lt=this;this.manager=Be,this.callback=_t,this.element=Be.element,this.target=Be.options.inputTarget,this.domHandler=function(nn){Q(Be.options.enable,[Be])&&Lt.handler(nn)},this.init()}function Qt(Be,_t,Lt){var nn=Lt.pointers.length,Pn=Lt.changedPointers.length,en=_t&$e&&nn-Pn==0,ri=_t&(Pe|je)&&nn-Pn==0;Lt.isFirst=!!en,Lt.isFinal=!!ri,en&&(Be.session={}),Lt.eventType=_t,function Gt(Be,_t){var Lt=Be.session,nn=_t.pointers,Pn=nn.length;Lt.firstInput||(Lt.firstInput=an(_t)),Pn>1&&!Lt.firstMultiple?Lt.firstMultiple=an(_t):1===Pn&&(Lt.firstMultiple=!1);var en=Lt.firstInput,ri=Lt.firstMultiple,cr=ri?ri.center:en.center,yr=_t.center=cn(nn);_t.timeStamp=S(),_t.deltaTime=_t.timeStamp-en.timeStamp,_t.angle=Pi(cr,yr),_t.distance=qn(cr,yr),function Vn(Be,_t){var Lt=_t.center,nn=Be.offsetDelta||{},Pn=Be.prevDelta||{},en=Be.prevInput||{};(_t.eventType===$e||en.eventType===Pe)&&(Pn=Be.prevDelta={x:en.deltaX||0,y:en.deltaY||0},nn=Be.offsetDelta={x:Lt.x,y:Lt.y}),_t.deltaX=Pn.x+(Lt.x-nn.x),_t.deltaY=Pn.y+(Lt.y-nn.y)}(Lt,_t),_t.offsetDirection=vi(_t.deltaX,_t.deltaY);var xa=_i(_t.deltaTime,_t.deltaX,_t.deltaY);_t.overallVelocityX=xa.x,_t.overallVelocityY=xa.y,_t.overallVelocity=_(xa.x)>_(xa.y)?xa.x:xa.y,_t.scale=ri?function Ei(Be,_t){return qn(_t[0],_t[1],xt)/qn(Be[0],Be[1],xt)}(ri.pointers,nn):1,_t.rotation=ri?function ci(Be,_t){return Pi(_t[1],_t[0],xt)+Pi(Be[1],Be[0],xt)}(ri.pointers,nn):0,_t.maxPointers=Lt.prevInput?_t.pointers.length>Lt.prevInput.maxPointers?_t.pointers.length:Lt.prevInput.maxPointers:_t.pointers.length,function un(Be,_t){var Pn,en,ri,cr,Lt=Be.lastInterval||_t,nn=_t.timeStamp-Lt.timeStamp;if(_t.eventType!=je&&(nn>Ge||Lt.velocity===h)){var yr=_t.deltaX-Lt.deltaX,xa=_t.deltaY-Lt.deltaY,Sa=_i(nn,yr,xa);en=Sa.x,ri=Sa.y,Pn=_(Sa.x)>_(Sa.y)?Sa.x:Sa.y,cr=vi(yr,xa),Be.lastInterval=_t}else Pn=Lt.velocity,en=Lt.velocityX,ri=Lt.velocityY,cr=Lt.direction;_t.velocity=Pn,_t.velocityX=en,_t.velocityY=ri,_t.direction=cr}(Lt,_t);var Sa=Be.element;ie(_t.srcEvent.target,Sa)&&(Sa=_t.srcEvent.target),_t.target=Sa}(Be,Lt),Be.emit("hammer.input",Lt),Be.recognize(Lt),Be.session.prevInput=Lt}function an(Be){for(var _t=[],Lt=0;Lt<Be.pointers.length;)_t[Lt]={clientX:f(Be.pointers[Lt].clientX),clientY:f(Be.pointers[Lt].clientY)},Lt++;return{timeStamp:S(),pointers:_t,center:cn(_t),deltaX:Be.deltaX,deltaY:Be.deltaY}}function cn(Be){var _t=Be.length;if(1===_t)return{x:f(Be[0].clientX),y:f(Be[0].clientY)};for(var Lt=0,nn=0,Pn=0;Pn<_t;)Lt+=Be[Pn].clientX,nn+=Be[Pn].clientY,Pn++;return{x:f(Lt/_t),y:f(nn/_t)}}function _i(Be,_t,Lt){return{x:_t/Be||0,y:Lt/Be||0}}function vi(Be,_t){return Be===_t?ht:_(Be)>=_(_t)?Be<0?Re:tt:_t<0?it:qe}function qn(Be,_t,Lt){Lt||(Lt=rt);var nn=_t[Lt[0]]-Be[Lt[0]],Pn=_t[Lt[1]]-Be[Lt[1]];return Math.sqrt(nn*nn+Pn*Pn)}function Pi(Be,_t,Lt){return Lt||(Lt=rt),180*Math.atan2(_t[Lt[1]]-Be[Lt[1]],_t[Lt[0]]-Be[Lt[0]])/Math.PI}gt.prototype={handler:function(){},init:function(){this.evEl&&oe(this.element,this.evEl,this.domHandler),this.evTarget&&oe(this.target,this.evTarget,this.domHandler),this.evWin&&oe(de(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&X(this.element,this.evEl,this.domHandler),this.evTarget&&X(this.target,this.evTarget,this.domHandler),this.evWin&&X(de(this.element),this.evWin,this.domHandler)}};var Mi={mousedown:$e,mousemove:2,mouseup:Pe},Zi="mousedown",ji="mousemove mouseup";function $i(){this.evEl=Zi,this.evWin=ji,this.pressed=!1,gt.apply(this,arguments)}j($i,gt,{handler:function(_t){var Lt=Mi[_t.type];Lt&$e&&0===_t.button&&(this.pressed=!0),2&Lt&&1!==_t.which&&(Lt=Pe),this.pressed&&(Lt&Pe&&(this.pressed=!1),this.callback(this.manager,Lt,{pointers:[_t],changedPointers:[_t],pointerType:Fe,srcEvent:_t}))}});var so={pointerdown:$e,pointermove:2,pointerup:Pe,pointercancel:je,pointerout:je},Zn={2:Me,3:"pen",4:Fe,5:"kinect"},zt="pointerdown",Je="pointermove pointerup pointercancel";function nt(){this.evEl=zt,this.evWin=Je,gt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}G.MSPointerEvent&&!G.PointerEvent&&(zt="MSPointerDown",Je="MSPointerMove MSPointerUp MSPointerCancel"),j(nt,gt,{handler:function(_t){var Lt=this.store,nn=!1,Pn=_t.type.toLowerCase().replace("ms",""),en=so[Pn],ri=Zn[_t.pointerType]||_t.pointerType,cr=ri==Me,yr=ne(Lt,_t.pointerId,"pointerId");en&$e&&(0===_t.button||cr)?yr<0&&(Lt.push(_t),yr=Lt.length-1):en&(Pe|je)&&(nn=!0),!(yr<0)&&(Lt[yr]=_t,this.callback(this.manager,en,{pointers:Lt,changedPointers:[_t],pointerType:ri,srcEvent:_t}),nn&&Lt.splice(yr,1))}});var Se={touchstart:$e,touchmove:2,touchend:Pe,touchcancel:je};function dt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,gt.apply(this,arguments)}function Pt(Be,_t){var Lt=Ce(Be.touches),nn=Ce(Be.changedTouches);return _t&(Pe|je)&&(Lt=xe(Lt.concat(nn),"identifier",!0)),[Lt,nn]}j(dt,gt,{handler:function(_t){var Lt=Se[_t.type];if(Lt===$e&&(this.started=!0),this.started){var nn=Pt.call(this,_t,Lt);Lt&(Pe|je)&&nn[0].length-nn[1].length==0&&(this.started=!1),this.callback(this.manager,Lt,{pointers:nn[0],changedPointers:nn[1],pointerType:Me,srcEvent:_t})}}});var At={touchstart:$e,touchmove:2,touchend:Pe,touchcancel:je},Wt="touchstart touchmove touchend touchcancel";function Yt(){this.evTarget=Wt,this.targetIds={},gt.apply(this,arguments)}function Bt(Be,_t){var Lt=Ce(Be.touches),nn=this.targetIds;if(_t&(2|$e)&&1===Lt.length)return nn[Lt[0].identifier]=!0,[Lt,Lt];var Pn,en,ri=Ce(Be.changedTouches),cr=[],yr=this.target;if(en=Lt.filter(function(xa){return ie(xa.target,yr)}),_t===$e)for(Pn=0;Pn<en.length;)nn[en[Pn].identifier]=!0,Pn++;for(Pn=0;Pn<ri.length;)nn[ri[Pn].identifier]&&cr.push(ri[Pn]),_t&(Pe|je)&&delete nn[ri[Pn].identifier],Pn++;return cr.length?[xe(en.concat(cr),"identifier",!0),cr]:void 0}j(Yt,gt,{handler:function(_t){var Lt=At[_t.type],nn=Bt.call(this,_t,Lt);nn&&this.callback(this.manager,Lt,{pointers:nn[0],changedPointers:nn[1],pointerType:Me,srcEvent:_t})}});var $t=2500;function Cn(){gt.apply(this,arguments);var Be=P(this.handler,this);this.touch=new Yt(this.manager,Be),this.mouse=new $i(this.manager,Be),this.primaryTouch=null,this.lastTouches=[]}function xn(Be,_t){Be&$e?(this.primaryTouch=_t.changedPointers[0].identifier,jn.call(this,_t)):Be&(Pe|je)&&jn.call(this,_t)}function jn(Be){var _t=Be.changedPointers[0];if(_t.identifier===this.primaryTouch){var Lt={x:_t.clientX,y:_t.clientY};this.lastTouches.push(Lt);var nn=this.lastTouches;setTimeout(function(){var en=nn.indexOf(Lt);en>-1&&nn.splice(en,1)},$t)}}function jt(Be){for(var _t=Be.srcEvent.clientX,Lt=Be.srcEvent.clientY,nn=0;nn<this.lastTouches.length;nn++){var Pn=this.lastTouches[nn],en=Math.abs(_t-Pn.x),ri=Math.abs(Lt-Pn.y);if(en<=25&&ri<=25)return!0}return!1}j(Cn,gt,{handler:function(_t,Lt,nn){var en=nn.pointerType==Fe;if(!(en&&nn.sourceCapabilities&&nn.sourceCapabilities.firesTouchEvents)){if(nn.pointerType==Me)xn.call(this,Lt,nn);else if(en&&jt.call(this,nn))return;this.callback(_t,Lt,nn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Dn=ue(v.style,"touchAction"),Ke=Dn!==h,si="compute",Zr="manipulation",Li="none",or="pan-x",Ri="pan-y",to=function Ii(){if(!Ke)return!1;var Be={},_t=G.CSS&&G.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Lt){Be[Lt]=!_t||G.CSS.supports("touch-action",Lt)}),Be}();function Vi(Be,_t){this.manager=Be,this.set(_t)}Vi.prototype={set:function(Be){Be==si&&(Be=this.compute()),Ke&&this.manager.element.style&&to[Be]&&(this.manager.element.style[Dn]=Be),this.actions=Be.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Be=[];return R(this.manager.recognizers,function(_t){Q(_t.options.enable,[_t])&&(Be=Be.concat(_t.getTouchAction()))}),function Wn(Be){if(q(Be,Li))return Li;var _t=q(Be,or),Lt=q(Be,Ri);return _t&&Lt?Li:_t||Lt?_t?or:Ri:q(Be,Zr)?Zr:"auto"}(Be.join(" "))},preventDefaults:function(Be){var _t=Be.srcEvent,Lt=Be.offsetDirection;if(!this.manager.session.prevented){var nn=this.actions,Pn=q(nn,Li)&&!to[Li],en=q(nn,Ri)&&!to[Ri],ri=q(nn,or)&&!to[or];if(Pn&&1===Be.pointers.length&&Be.distance<2&&Be.deltaTime<250)return;return ri&&en||!(Pn||en&&Lt&Oe||ri&&Lt&Te)?void 0:this.preventSrc(_t)}_t.preventDefault()},preventSrc:function(Be){this.manager.session.prevented=!0,Be.preventDefault()}};var co=1;function On(Be){this.options=B({},this.defaults,Be||{}),this.id=function ee(){return fe++}(),this.manager=null,this.options.enable=$(this.options.enable,!0),this.state=co,this.simultaneous={},this.requireFail=[]}function Nn(Be){return 16&Be?"cancel":8&Be?"end":4&Be?"move":2&Be?"start":""}function Rn(Be){return Be==qe?"down":Be==it?"up":Be==Re?"left":Be==tt?"right":""}function Yn(Be,_t){var Lt=_t.manager;return Lt?Lt.get(Be):Be}function Dt(){On.apply(this,arguments)}function Kn(){Dt.apply(this,arguments),this.pX=null,this.pY=null}function Ot(){Dt.apply(this,arguments)}function ft(){On.apply(this,arguments),this._timer=null,this._input=null}function St(){Dt.apply(this,arguments)}function Kt(){Dt.apply(this,arguments)}function Ut(){On.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function rn(Be,_t){return(_t=_t||{}).recognizers=$(_t.recognizers,rn.defaults.preset),new La(Be,_t)}function La(Be,_t){this.options=B({},rn.defaults,_t||{}),this.options.inputTarget=this.options.inputTarget||Be,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Be,this.input=function on(Be){return new(Be.options.inputClass||(ae?nt:ye?Yt:ce?Cn:$i))(Be,Qt)}(this),this.touchAction=new Vi(this,this.options.touchAction),Di(this,!0),R(this.options.recognizers,function(Lt){var nn=this.add(new Lt[0](Lt[1]));Lt[2]&&nn.recognizeWith(Lt[2]),Lt[3]&&nn.requireFailure(Lt[3])},this)}function Di(Be,_t){var nn,Lt=Be.element;Lt.style&&(R(Be.options.cssProps,function(Pn,en){nn=ue(Lt.style,en),_t?(Be.oldCssProps[nn]=Lt.style[nn],Lt.style[nn]=Pn):Lt.style[nn]=Be.oldCssProps[nn]||""}),_t||(Be.oldCssProps={}))}On.prototype={defaults:{},set:function(Be){return B(this.options,Be),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Be){if(D(Be,"recognizeWith",this))return this;var _t=this.simultaneous;return _t[(Be=Yn(Be,this)).id]||(_t[Be.id]=Be,Be.recognizeWith(this)),this},dropRecognizeWith:function(Be){return D(Be,"dropRecognizeWith",this)||(Be=Yn(Be,this),delete this.simultaneous[Be.id]),this},requireFailure:function(Be){if(D(Be,"requireFailure",this))return this;var _t=this.requireFail;return-1===ne(_t,Be=Yn(Be,this))&&(_t.push(Be),Be.requireFailure(this)),this},dropRequireFailure:function(Be){if(D(Be,"dropRequireFailure",this))return this;Be=Yn(Be,this);var _t=ne(this.requireFail,Be);return _t>-1&&this.requireFail.splice(_t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Be){return!!this.simultaneous[Be.id]},emit:function(Be){var _t=this,Lt=this.state;function nn(Pn){_t.manager.emit(Pn,Be)}Lt<8&&nn(_t.options.event+Nn(Lt)),nn(_t.options.event),Be.additionalEvent&&nn(Be.additionalEvent),Lt>=8&&nn(_t.options.event+Nn(Lt))},tryEmit:function(Be){if(this.canEmit())return this.emit(Be);this.state=32},canEmit:function(){for(var Be=0;Be<this.requireFail.length;){if(!(this.requireFail[Be].state&(32|co)))return!1;Be++}return!0},recognize:function(Be){var _t=B({},Be);if(!Q(this.options.enable,[this,_t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=co),this.state=this.process(_t),30&this.state&&this.tryEmit(_t)},process:function(Be){},getTouchAction:function(){},reset:function(){}},j(Dt,On,{defaults:{pointers:1},attrTest:function(Be){var _t=this.options.pointers;return 0===_t||Be.pointers.length===_t},process:function(Be){var _t=this.state,Lt=Be.eventType,nn=6&_t,Pn=this.attrTest(Be);return nn&&(Lt&je||!Pn)?16|_t:nn||Pn?Lt&Pe?8|_t:2&_t?4|_t:2:32}}),j(Kn,Dt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ne},getTouchAction:function(){var Be=this.options.direction,_t=[];return Be&Oe&&_t.push(Ri),Be&Te&&_t.push(or),_t},directionTest:function(Be){var _t=this.options,Lt=!0,nn=Be.distance,Pn=Be.direction,en=Be.deltaX,ri=Be.deltaY;return Pn&_t.direction||(_t.direction&Oe?(Pn=0===en?ht:en<0?Re:tt,Lt=en!=this.pX,nn=Math.abs(Be.deltaX)):(Pn=0===ri?ht:ri<0?it:qe,Lt=ri!=this.pY,nn=Math.abs(Be.deltaY))),Be.direction=Pn,Lt&&nn>_t.threshold&&Pn&_t.direction},attrTest:function(Be){return Dt.prototype.attrTest.call(this,Be)&&(2&this.state||!(2&this.state)&&this.directionTest(Be))},emit:function(Be){this.pX=Be.deltaX,this.pY=Be.deltaY;var _t=Rn(Be.direction);_t&&(Be.additionalEvent=this.options.event+_t),this._super.emit.call(this,Be)}}),j(Ot,Dt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Li]},attrTest:function(Be){return this._super.attrTest.call(this,Be)&&(Math.abs(Be.scale-1)>this.options.threshold||2&this.state)},emit:function(Be){1!==Be.scale&&(Be.additionalEvent=this.options.event+(Be.scale<1?"in":"out")),this._super.emit.call(this,Be)}}),j(ft,On,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Be){var _t=this.options,Lt=Be.pointers.length===_t.pointers,nn=Be.distance<_t.threshold,Pn=Be.deltaTime>_t.time;if(this._input=Be,!nn||!Lt||Be.eventType&(Pe|je)&&!Pn)this.reset();else if(Be.eventType&$e)this.reset(),this._timer=M(function(){this.state=8,this.tryEmit()},_t.time,this);else if(Be.eventType&Pe)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Be){8===this.state&&(Be&&Be.eventType&Pe?this.manager.emit(this.options.event+"up",Be):(this._input.timeStamp=S(),this.manager.emit(this.options.event,this._input)))}}),j(St,Dt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Li]},attrTest:function(Be){return this._super.attrTest.call(this,Be)&&(Math.abs(Be.rotation)>this.options.threshold||2&this.state)}}),j(Kt,Dt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Oe|Te,pointers:1},getTouchAction:function(){return Kn.prototype.getTouchAction.call(this)},attrTest:function(Be){var Lt,_t=this.options.direction;return _t&(Oe|Te)?Lt=Be.overallVelocity:_t&Oe?Lt=Be.overallVelocityX:_t&Te&&(Lt=Be.overallVelocityY),this._super.attrTest.call(this,Be)&&_t&Be.offsetDirection&&Be.distance>this.options.threshold&&Be.maxPointers==this.options.pointers&&_(Lt)>this.options.velocity&&Be.eventType&Pe},emit:function(Be){var _t=Rn(Be.offsetDirection);_t&&this.manager.emit(this.options.event+_t,Be),this.manager.emit(this.options.event,Be)}}),j(Ut,On,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Zr]},process:function(Be){var _t=this.options,Lt=Be.pointers.length===_t.pointers,nn=Be.distance<_t.threshold,Pn=Be.deltaTime<_t.time;if(this.reset(),Be.eventType&$e&&0===this.count)return this.failTimeout();if(nn&&Pn&&Lt){if(Be.eventType!=Pe)return this.failTimeout();var en=!this.pTime||Be.timeStamp-this.pTime<_t.interval,ri=!this.pCenter||qn(this.pCenter,Be.center)<_t.posThreshold;if(this.pTime=Be.timeStamp,this.pCenter=Be.center,ri&&en?this.count+=1:this.count=1,this._input=Be,0==this.count%_t.taps)return this.hasRequireFailures()?(this._timer=M(function(){this.state=8,this.tryEmit()},_t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=M(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),rn.VERSION="2.0.7",rn.defaults={domEvents:!1,touchAction:si,enable:!0,inputTarget:null,inputClass:null,preset:[[St,{enable:!1}],[Ot,{enable:!1},["rotate"]],[Kt,{direction:Oe}],[Kn,{direction:Oe},["swipe"]],[Ut],[Ut,{event:"doubletap",taps:2},["tap"]],[ft]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},La.prototype={set:function(Be){return B(this.options,Be),Be.touchAction&&this.touchAction.update(),Be.inputTarget&&(this.input.destroy(),this.input.target=Be.inputTarget,this.input.init()),this},stop:function(Be){this.session.stopped=Be?2:1},recognize:function(Be){var _t=this.session;if(!_t.stopped){this.touchAction.preventDefaults(Be);var Lt,nn=this.recognizers,Pn=_t.curRecognizer;(!Pn||Pn&&8&Pn.state)&&(Pn=_t.curRecognizer=null);for(var en=0;en<nn.length;)Lt=nn[en],2===_t.stopped||Pn&&Lt!=Pn&&!Lt.canRecognizeWith(Pn)?Lt.reset():Lt.recognize(Be),!Pn&&14&Lt.state&&(Pn=_t.curRecognizer=Lt),en++}},get:function(Be){if(Be instanceof On)return Be;for(var _t=this.recognizers,Lt=0;Lt<_t.length;Lt++)if(_t[Lt].options.event==Be)return _t[Lt];return null},add:function(Be){if(D(Be,"add",this))return this;var _t=this.get(Be.options.event);return _t&&this.remove(_t),this.recognizers.push(Be),Be.manager=this,this.touchAction.update(),Be},remove:function(Be){if(D(Be,"remove",this))return this;if(Be=this.get(Be)){var _t=this.recognizers,Lt=ne(_t,Be);-1!==Lt&&(_t.splice(Lt,1),this.touchAction.update())}return this},on:function(Be,_t){if(Be!==h&&_t!==h){var Lt=this.handlers;return R(se(Be),function(nn){Lt[nn]=Lt[nn]||[],Lt[nn].push(_t)}),this}},off:function(Be,_t){if(Be!==h){var Lt=this.handlers;return R(se(Be),function(nn){_t?Lt[nn]&&Lt[nn].splice(ne(Lt[nn],_t),1):delete Lt[nn]}),this}},emit:function(Be,_t){this.options.domEvents&&function Ui(Be,_t){var Lt=I.createEvent("Event");Lt.initEvent(Be,!0,!0),Lt.gesture=_t,_t.target.dispatchEvent(Lt)}(Be,_t);var Lt=this.handlers[Be]&&this.handlers[Be].slice();if(Lt&&Lt.length){_t.type=Be,_t.preventDefault=function(){_t.srcEvent.preventDefault()};for(var nn=0;nn<Lt.length;)Lt[nn](_t),nn++}},destroy:function(){this.element&&Di(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},B(rn,{INPUT_START:$e,INPUT_MOVE:2,INPUT_END:Pe,INPUT_CANCEL:je,STATE_POSSIBLE:co,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:ht,DIRECTION_LEFT:Re,DIRECTION_RIGHT:tt,DIRECTION_UP:it,DIRECTION_DOWN:qe,DIRECTION_HORIZONTAL:Oe,DIRECTION_VERTICAL:Te,DIRECTION_ALL:Ne,Manager:La,Input:gt,TouchAction:Vi,TouchInput:Yt,MouseInput:$i,PointerEventInput:nt,TouchMouseInput:Cn,SingleTouchInput:dt,Recognizer:On,AttrRecognizer:Dt,Tap:Ut,Pan:Kn,Swipe:Kt,Pinch:Ot,Rotate:St,Press:ft,on:oe,off:X,each:R,merge:F,extend:U,assign:B,inherit:j,bindFn:P,prefixed:ue}),(typeof G<"u"?G:typeof self<"u"?self:{}).Hammer=rn,(k=function(){return rn}.call(y,w,y,Ae))!==h&&(Ae.exports=k)}(window,document)},2486:(Ae,y,w)=>{"use strict";var G=w(90491)("%Object.defineProperty%",!0),I=function(){if(G)try{return G({},"a",{value:1}),!0}catch{return!1}return!1};I.hasArrayLengthDefineBug=function(){if(!I())return null;try{return 1!==G([],"length",{value:1}).length}catch{return!0}},Ae.exports=I},39028:Ae=>{"use strict";var y={foo:{}},w=Object;Ae.exports=function(){return{__proto__:y}.foo===y.foo&&!({__proto__:null}instanceof w)}},76152:(Ae,y,w)=>{"use strict";var k=typeof Symbol<"u"&&Symbol,G=w(65441);Ae.exports=function(){return"function"==typeof k&&"function"==typeof Symbol&&"symbol"==typeof k("foo")&&"symbol"==typeof Symbol("bar")&&G()}},65441:Ae=>{"use strict";Ae.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var w={},k=Symbol("test"),G=Object(k);if("string"==typeof k||"[object Symbol]"!==Object.prototype.toString.call(k)||"[object Symbol]"!==Object.prototype.toString.call(G))return!1;for(k in w[k]=42,w)return!1;if("function"==typeof Object.keys&&0!==Object.keys(w).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(w).length)return!1;var u=Object.getOwnPropertySymbols(w);if(1!==u.length||u[0]!==k||!Object.prototype.propertyIsEnumerable.call(w,k))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var h=Object.getOwnPropertyDescriptor(w,k);if(42!==h.value||!0!==h.enumerable)return!1}return!0}},78041:(Ae,y,w)=>{"use strict";var k=w(65441);Ae.exports=function(){return k()&&!!Symbol.toStringTag}},68533:(Ae,y,w)=>{"use strict";var k=w(45333);Ae.exports=k.call(Function.call,Object.prototype.hasOwnProperty)},41690:(Ae,y,w)=>{var k;!function(){var G=u(function(P){return 1===P?"\u03c7\u03c1\u03cc\u03bd\u03bf\u03c2":"\u03c7\u03c1\u03cc\u03bd\u03b9\u03b1"},function(P){return 1===P?"\u03bc\u03ae\u03bd\u03b1\u03c2":"\u03bc\u03ae\u03bd\u03b5\u03c2"},function(P){return 1===P?"\u03b5\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03b1":"\u03b5\u03b2\u03b4\u03bf\u03bc\u03ac\u03b4\u03b5\u03c2"},function(P){return 1===P?"\u03bc\u03ad\u03c1\u03b1":"\u03bc\u03ad\u03c1\u03b5\u03c2"},function(P){return 1===P?"\u03ce\u03c1\u03b1":"\u03ce\u03c1\u03b5\u03c2"},function(P){return 1===P?"\u03bb\u03b5\u03c0\u03c4\u03cc":"\u03bb\u03b5\u03c0\u03c4\u03ac"},function(P){return 1===P?"\u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03bf":"\u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03b1"},function(P){return(1===P?"\u03c7\u03b9\u03bb\u03b9\u03bf\u03c3\u03c4\u03cc":"\u03c7\u03b9\u03bb\u03b9\u03bf\u03c3\u03c4\u03ac")+" \u03c4\u03bf\u03c5 \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03bf\u03bb\u03ad\u03c0\u03c4\u03bf\u03c5"},","),I={af:u("jaar",function(P){return"maand"+(1===P?"":"e")},function(P){return 1===P?"week":"weke"},function(P){return 1===P?"dag":"dae"},function(P){return 1===P?"uur":"ure"},function(P){return 1===P?"minuut":"minute"},function(P){return"sekonde"+(1===P?"":"s")},function(P){return"millisekonde"+(1===P?"":"s")},","),ar:S(u(function(P){return["\u0633\u0646\u0629","\u0633\u0646\u062a\u0627\u0646","\u0633\u0646\u0648\u0627\u062a"][h(P)]},function(P){return["\u0634\u0647\u0631","\u0634\u0647\u0631\u0627\u0646","\u0623\u0634\u0647\u0631"][h(P)]},function(P){return["\u0623\u0633\u0628\u0648\u0639","\u0623\u0633\u0628\u0648\u0639\u064a\u0646","\u0623\u0633\u0627\u0628\u064a\u0639"][h(P)]},function(P){return["\u064a\u0648\u0645","\u064a\u0648\u0645\u064a\u0646","\u0623\u064a\u0627\u0645"][h(P)]},function(P){return["\u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u062a\u064a\u0646","\u0633\u0627\u0639\u0627\u062a"][h(P)]},function(P){return["\u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u0627\u0626\u0642"][h(P)]},function(P){return["\u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0648\u0627\u0646\u064a"][h(P)]},function(P){return["\u062c\u0632\u0621 \u0645\u0646 \u0627\u0644\u062b\u0627\u0646\u064a\u0629","\u062c\u0632\u0622\u0646 \u0645\u0646 \u0627\u0644\u062b\u0627\u0646\u064a\u0629","\u0623\u062c\u0632\u0627\u0621 \u0645\u0646 \u0627\u0644\u062b\u0627\u0646\u064a\u0629"][h(P)]},","),{delimiter:" \ufeed ",_digitReplacements:["\u06f0","\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669"]}),bg:u(function(P){return["\u0433\u043e\u0434\u0438\u043d\u0438","\u0433\u043e\u0434\u0438\u043d\u0430","\u0433\u043e\u0434\u0438\u043d\u0438"][v(P)]},function(P){return["\u043c\u0435\u0441\u0435\u0446\u0430","\u043c\u0435\u0441\u0435\u0446","\u043c\u0435\u0441\u0435\u0446\u0430"][v(P)]},function(P){return["\u0441\u0435\u0434\u043c\u0438\u0446\u0438","\u0441\u0435\u0434\u043c\u0438\u0446\u0430","\u0441\u0435\u0434\u043c\u0438\u0446\u0438"][v(P)]},function(P){return["\u0434\u043d\u0438","\u0434\u0435\u043d","\u0434\u043d\u0438"][v(P)]},function(P){return["\u0447\u0430\u0441\u0430","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][v(P)]},function(P){return["\u043c\u0438\u043d\u0443\u0442\u0438","\u043c\u0438\u043d\u0443\u0442\u0430","\u043c\u0438\u043d\u0443\u0442\u0438"][v(P)]},function(P){return["\u0441\u0435\u043a\u0443\u043d\u0434\u0438","\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u0438"][v(P)]},function(P){return["\u043c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0438","\u043c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u043c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0438"][v(P)]},","),bn:u("\u09ac\u099b\u09b0","\u09ae\u09be\u09b8","\u09b8\u09aa\u09cd\u09a4\u09be\u09b9","\u09a6\u09bf\u09a8","\u0998\u09a8\u09cd\u099f\u09be","\u09ae\u09bf\u09a8\u09bf\u099f","\u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1","\u09ae\u09bf\u09b2\u09bf\u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1"),ca:u(function(P){return"any"+(1===P?"":"s")},function(P){return"mes"+(1===P?"":"os")},function(P){return"setman"+(1===P?"a":"es")},function(P){return"di"+(1===P?"a":"es")},function(P){return"hor"+(1===P?"a":"es")},function(P){return"minut"+(1===P?"":"s")},function(P){return"segon"+(1===P?"":"s")},function(P){return"milisegon"+(1===P?"":"s")},","),cs:u(function(P){return["rok","roku","roky","let"][m(P)]},function(P){return["m\u011bs\xedc","m\u011bs\xedce","m\u011bs\xedce","m\u011bs\xedc\u016f"][m(P)]},function(P){return["t\xfdden","t\xfddne","t\xfddny","t\xfddn\u016f"][m(P)]},function(P){return["den","dne","dny","dn\xed"][m(P)]},function(P){return["hodina","hodiny","hodiny","hodin"][m(P)]},function(P){return["minuta","minuty","minuty","minut"][m(P)]},function(P){return["sekunda","sekundy","sekundy","sekund"][m(P)]},function(P){return["milisekunda","milisekundy","milisekundy","milisekund"][m(P)]},","),cy:u("flwyddyn","mis","wythnos","diwrnod","awr","munud","eiliad","milieiliad"),da:u("\xe5r",function(P){return"m\xe5ned"+(1===P?"":"er")},function(P){return"uge"+(1===P?"":"r")},function(P){return"dag"+(1===P?"":"e")},function(P){return"time"+(1===P?"":"r")},function(P){return"minut"+(1===P?"":"ter")},function(P){return"sekund"+(1===P?"":"er")},function(P){return"millisekund"+(1===P?"":"er")},","),de:u(function(P){return"Jahr"+(1===P?"":"e")},function(P){return"Monat"+(1===P?"":"e")},function(P){return"Woche"+(1===P?"":"n")},function(P){return"Tag"+(1===P?"":"e")},function(P){return"Stunde"+(1===P?"":"n")},function(P){return"Minute"+(1===P?"":"n")},function(P){return"Sekunde"+(1===P?"":"n")},function(P){return"Millisekunde"+(1===P?"":"n")},","),el:G,en:u(function(P){return"year"+(1===P?"":"s")},function(P){return"month"+(1===P?"":"s")},function(P){return"week"+(1===P?"":"s")},function(P){return"day"+(1===P?"":"s")},function(P){return"hour"+(1===P?"":"s")},function(P){return"minute"+(1===P?"":"s")},function(P){return"second"+(1===P?"":"s")},function(P){return"millisecond"+(1===P?"":"s")}),eo:u(function(P){return"jaro"+(1===P?"":"j")},function(P){return"monato"+(1===P?"":"j")},function(P){return"semajno"+(1===P?"":"j")},function(P){return"tago"+(1===P?"":"j")},function(P){return"horo"+(1===P?"":"j")},function(P){return"minuto"+(1===P?"":"j")},function(P){return"sekundo"+(1===P?"":"j")},function(P){return"milisekundo"+(1===P?"":"j")},","),es:u(function(P){return"a\xf1o"+(1===P?"":"s")},function(P){return"mes"+(1===P?"":"es")},function(P){return"semana"+(1===P?"":"s")},function(P){return"d\xeda"+(1===P?"":"s")},function(P){return"hora"+(1===P?"":"s")},function(P){return"minuto"+(1===P?"":"s")},function(P){return"segundo"+(1===P?"":"s")},function(P){return"milisegundo"+(1===P?"":"s")},","),et:u(function(P){return"aasta"+(1===P?"":"t")},function(P){return"kuu"+(1===P?"":"d")},function(P){return"n\xe4dal"+(1===P?"":"at")},function(P){return"p\xe4ev"+(1===P?"":"a")},function(P){return"tund"+(1===P?"":"i")},function(P){return"minut"+(1===P?"":"it")},function(P){return"sekund"+(1===P?"":"it")},function(P){return"millisekund"+(1===P?"":"it")},","),eu:u("urte","hilabete","aste","egun","ordu","minutu","segundo","milisegundo",","),fa:u("\u0633\u0627\u0644","\u0645\u0627\u0647","\u0647\u0641\u062a\u0647","\u0631\u0648\u0632","\u0633\u0627\u0639\u062a","\u062f\u0642\u06cc\u0642\u0647","\u062b\u0627\u0646\u06cc\u0647","\u0645\u06cc\u0644\u06cc \u062b\u0627\u0646\u06cc\u0647"),fi:u(function(P){return 1===P?"vuosi":"vuotta"},function(P){return 1===P?"kuukausi":"kuukautta"},function(P){return"viikko"+(1===P?"":"a")},function(P){return"p\xe4iv\xe4"+(1===P?"":"\xe4")},function(P){return"tunti"+(1===P?"":"a")},function(P){return"minuutti"+(1===P?"":"a")},function(P){return"sekunti"+(1===P?"":"a")},function(P){return"millisekunti"+(1===P?"":"a")},","),fo:u("\xe1r",function(P){return 1===P?"m\xe1na\xf0ur":"m\xe1na\xf0ir"},function(P){return 1===P?"vika":"vikur"},function(P){return 1===P?"dagur":"dagar"},function(P){return 1===P?"t\xedmi":"t\xedmar"},function(P){return 1===P?"minuttur":"minuttir"},"sekund","millisekund",","),fr:u(function(P){return"an"+(P>=2?"s":"")},"mois",function(P){return"semaine"+(P>=2?"s":"")},function(P){return"jour"+(P>=2?"s":"")},function(P){return"heure"+(P>=2?"s":"")},function(P){return"minute"+(P>=2?"s":"")},function(P){return"seconde"+(P>=2?"s":"")},function(P){return"milliseconde"+(P>=2?"s":"")},","),gr:G,he:u(function(P){return 1===P?"\u05e9\u05e0\u05d4":"\u05e9\u05e0\u05d9\u05dd"},function(P){return 1===P?"\u05d7\u05d5\u05d3\u05e9":"\u05d7\u05d5\u05d3\u05e9\u05d9\u05dd"},function(P){return 1===P?"\u05e9\u05d1\u05d5\u05e2":"\u05e9\u05d1\u05d5\u05e2\u05d5\u05ea"},function(P){return 1===P?"\u05d9\u05d5\u05dd":"\u05d9\u05de\u05d9\u05dd"},function(P){return 1===P?"\u05e9\u05e2\u05d4":"\u05e9\u05e2\u05d5\u05ea"},function(P){return 1===P?"\u05d3\u05e7\u05d4":"\u05d3\u05e7\u05d5\u05ea"},function(P){return 1===P?"\u05e9\u05e0\u05d9\u05d4":"\u05e9\u05e0\u05d9\u05d5\u05ea"},function(P){return 1===P?"\u05de\u05d9\u05dc\u05d9\u05e9\u05e0\u05d9\u05d9\u05d4":"\u05de\u05d9\u05dc\u05d9\u05e9\u05e0\u05d9\u05d5\u05ea"}),hr:u(function(P){return P%10==2||P%10==3||P%10==4?"godine":"godina"},function(P){return 1===P?"mjesec":2===P||3===P||4===P?"mjeseca":"mjeseci"},function(P){return P%10==1&&11!==P?"tjedan":"tjedna"},function(P){return 1===P?"dan":"dana"},function(P){return 1===P?"sat":2===P||3===P||4===P?"sata":"sati"},function(P){var Q=P%10;return 2!==Q&&3!==Q&&4!==Q||!(P<10||P>14)?"minuta":"minute"},function(P){var Q=P%10;return 5===Q||Math.floor(P)===P&&P>=10&&P<=19?"sekundi":1===Q?"sekunda":2===Q||3===Q||4===Q?"sekunde":"sekundi"},function(P){return 1===P?"milisekunda":P%10==2||P%10==3||P%10==4?"milisekunde":"milisekundi"},","),hi:u("\u0938\u093e\u0932",function(P){return 1===P?"\u092e\u0939\u0940\u0928\u093e":"\u092e\u0939\u0940\u0928\u0947"},function(P){return 1===P?"\u0939\u095e\u094d\u0924\u093e":"\u0939\u092b\u094d\u0924\u0947"},"\u0926\u093f\u0928",function(P){return 1===P?"\u0918\u0902\u091f\u093e":"\u0918\u0902\u091f\u0947"},"\u092e\u093f\u0928\u091f","\u0938\u0947\u0915\u0902\u0921","\u092e\u093f\u0932\u0940\u0938\u0947\u0915\u0902\u0921"),hu:u("\xe9v","h\xf3nap","h\xe9t","nap","\xf3ra","perc","m\xe1sodperc","ezredm\xe1sodperc",","),id:u("tahun","bulan","minggu","hari","jam","menit","detik","milidetik"),is:u("\xe1r",function(P){return"m\xe1nu\xf0"+(1===P?"ur":"ir")},function(P){return"vik"+(1===P?"a":"ur")},function(P){return"dag"+(1===P?"ur":"ar")},function(P){return"klukkut\xedm"+(1===P?"i":"ar")},function(P){return"m\xedn\xfat"+(1===P?"a":"ur")},function(P){return"sek\xfand"+(1===P?"a":"ur")},function(P){return"millisek\xfand"+(1===P?"a":"ur")}),it:u(function(P){return"ann"+(1===P?"o":"i")},function(P){return"mes"+(1===P?"e":"i")},function(P){return"settiman"+(1===P?"a":"e")},function(P){return"giorn"+(1===P?"o":"i")},function(P){return"or"+(1===P?"a":"e")},function(P){return"minut"+(1===P?"o":"i")},function(P){return"second"+(1===P?"o":"i")},function(P){return"millisecond"+(1===P?"o":"i")},","),ja:u("\u5e74","\u30f6\u6708","\u9031","\u65e5","\u6642\u9593","\u5206","\u79d2","\u30df\u30ea\u79d2"),km:u("\u1786\u17d2\u1793\u17b6\u17c6","\u1781\u17c2","\u179f\u1794\u17d2\u178f\u17b6\u17a0\u17cd","\u1790\u17d2\u1784\u17c3","\u1798\u17c9\u17c4\u1784","\u1793\u17b6\u1791\u17b8","\u179c\u17b7\u1793\u17b6\u1791\u17b8","\u1798\u17b7\u179b\u17d2\u179b\u17b8\u179c\u17b7\u1793\u17b6\u1791\u17b8"),kn:u(function(P){return 1===P?"\u0cb5\u0cb0\u0ccd\u0cb7":"\u0cb5\u0cb0\u0ccd\u0cb7\u0c97\u0cb3\u0cc1"},function(P){return 1===P?"\u0ca4\u0cbf\u0c82\u0c97\u0cb3\u0cc1":"\u0ca4\u0cbf\u0c82\u0c97\u0cb3\u0cc1\u0c97\u0cb3\u0cc1"},function(P){return 1===P?"\u0cb5\u0cbe\u0cb0":"\u0cb5\u0cbe\u0cb0\u0c97\u0cb3\u0cc1"},function(P){return 1===P?"\u0ca6\u0cbf\u0ca8":"\u0ca6\u0cbf\u0ca8\u0c97\u0cb3\u0cc1"},function(P){return 1===P?"\u0c97\u0c82\u0c9f\u0cc6":"\u0c97\u0c82\u0c9f\u0cc6\u0c97\u0cb3\u0cc1"},function(P){return 1===P?"\u0ca8\u0cbf\u0cae\u0cbf\u0cb7":"\u0ca8\u0cbf\u0cae\u0cbf\u0cb7\u0c97\u0cb3\u0cc1"},function(P){return 1===P?"\u0cb8\u0cc6\u0c95\u0cc6\u0c82\u0ca1\u0ccd":"\u0cb8\u0cc6\u0c95\u0cc6\u0c82\u0ca1\u0cc1\u0c97\u0cb3\u0cc1"},function(P){return 1===P?"\u0cae\u0cbf\u0cb2\u0cbf\u0cb8\u0cc6\u0c95\u0cc6\u0c82\u0ca1\u0ccd":"\u0cae\u0cbf\u0cb2\u0cbf\u0cb8\u0cc6\u0c95\u0cc6\u0c82\u0ca1\u0cc1\u0c97\u0cb3\u0cc1"}),ko:u("\ub144","\uac1c\uc6d4","\uc8fc\uc77c","\uc77c","\uc2dc\uac04","\ubd84","\ucd08","\ubc00\ub9ac \ucd08"),ku:u("sal","meh","hefte","roj","seet","deqe","saniye","m\xeel\xee\xe7irk",","),lo:u("\u0e9b\u0eb5","\u0ec0\u0e94\u0eb7\u0ead\u0e99","\u0ead\u0eb2\u0e97\u0eb4\u0e94","\u0ea1\u0eb7\u0ec9","\u0e8a\u0ebb\u0ec8\u0ea7\u0ec2\u0ea1\u0e87","\u0e99\u0eb2\u0e97\u0eb5","\u0ea7\u0eb4\u0e99\u0eb2\u0e97\u0eb5","\u0ea1\u0eb4\u0e99\u0ea5\u0eb4\u0ea7\u0eb4\u0e99\u0eb2\u0e97\u0eb5",","),lt:u(function(P){return P%10==0||P%100>=10&&P%100<=20?"met\u0173":"metai"},function(P){return["m\u0117nuo","m\u0117nesiai","m\u0117nesi\u0173"][f(P)]},function(P){return["savait\u0117","savait\u0117s","savai\u010di\u0173"][f(P)]},function(P){return["diena","dienos","dien\u0173"][f(P)]},function(P){return["valanda","valandos","valand\u0173"][f(P)]},function(P){return["minut\u0117","minut\u0117s","minu\u010di\u0173"][f(P)]},function(P){return["sekund\u0117","sekund\u0117s","sekund\u017ei\u0173"][f(P)]},function(P){return["milisekund\u0117","milisekund\u0117s","milisekund\u017ei\u0173"][f(P)]},","),lv:u(function(P){return _(P)?"gads":"gadi"},function(P){return _(P)?"m\u0113nesis":"m\u0113ne\u0161i"},function(P){return _(P)?"ned\u0113\u013ca":"ned\u0113\u013cas"},function(P){return _(P)?"diena":"dienas"},function(P){return _(P)?"stunda":"stundas"},function(P){return _(P)?"min\u016bte":"min\u016btes"},function(P){return _(P)?"sekunde":"sekundes"},function(P){return _(P)?"milisekunde":"milisekundes"},","),mk:u(function(P){return 1===P?"\u0433\u043e\u0434\u0438\u043d\u0430":"\u0433\u043e\u0434\u0438\u043d\u0438"},function(P){return 1===P?"\u043c\u0435\u0441\u0435\u0446":"\u043c\u0435\u0441\u0435\u0446\u0438"},function(P){return 1===P?"\u043d\u0435\u0434\u0435\u043b\u0430":"\u043d\u0435\u0434\u0435\u043b\u0438"},function(P){return 1===P?"\u0434\u0435\u043d":"\u0434\u0435\u043d\u0430"},function(P){return 1===P?"\u0447\u0430\u0441":"\u0447\u0430\u0441\u0430"},function(P){return 1===P?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0438"},function(P){return 1===P?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430":"\u0441\u0435\u043a\u0443\u043d\u0434\u0438"},function(P){return 1===P?"\u043c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430":"\u043c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0438"},","),mn:u("\u0436\u0438\u043b","\u0441\u0430\u0440","\u0434\u043e\u043b\u043e\u043e \u0445\u043e\u043d\u043e\u0433","\u04e9\u0434\u04e9\u0440","\u0446\u0430\u0433","\u043c\u0438\u043d\u0443\u0442","\u0441\u0435\u043a\u0443\u043d\u0434","\u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434"),mr:u(function(P){return 1===P?"\u0935\u0930\u094d\u0937":"\u0935\u0930\u094d\u0937\u0947"},function(P){return 1===P?"\u092e\u0939\u093f\u0928\u093e":"\u092e\u0939\u093f\u0928\u0947"},function(P){return 1===P?"\u0906\u0920\u0935\u0921\u093e":"\u0906\u0920\u0935\u0921\u0947"},"\u0926\u093f\u0935\u0938","\u0924\u093e\u0938",function(P){return 1===P?"\u092e\u093f\u0928\u093f\u091f":"\u092e\u093f\u0928\u093f\u091f\u0947"},"\u0938\u0947\u0915\u0902\u0926","\u092e\u093f\u0932\u093f\u0938\u0947\u0915\u0902\u0926"),ms:u("tahun","bulan","minggu","hari","jam","minit","saat","milisaat"),nl:u("jaar",function(P){return 1===P?"maand":"maanden"},function(P){return 1===P?"week":"weken"},function(P){return 1===P?"dag":"dagen"},"uur",function(P){return 1===P?"minuut":"minuten"},function(P){return 1===P?"seconde":"seconden"},function(P){return 1===P?"milliseconde":"milliseconden"},","),no:u("\xe5r",function(P){return"m\xe5ned"+(1===P?"":"er")},function(P){return"uke"+(1===P?"":"r")},function(P){return"dag"+(1===P?"":"er")},function(P){return"time"+(1===P?"":"r")},function(P){return"minutt"+(1===P?"":"er")},function(P){return"sekund"+(1===P?"":"er")},function(P){return"millisekund"+(1===P?"":"er")},","),pl:u(function(P){return["rok","roku","lata","lat"][g(P)]},function(P){return["miesi\u0105c","miesi\u0105ca","miesi\u0105ce","miesi\u0119cy"][g(P)]},function(P){return["tydzie\u0144","tygodnia","tygodnie","tygodni"][g(P)]},function(P){return["dzie\u0144","dnia","dni","dni"][g(P)]},function(P){return["godzina","godziny","godziny","godzin"][g(P)]},function(P){return["minuta","minuty","minuty","minut"][g(P)]},function(P){return["sekunda","sekundy","sekundy","sekund"][g(P)]},function(P){return["milisekunda","milisekundy","milisekundy","milisekund"][g(P)]},","),pt:u(function(P){return"ano"+(1===P?"":"s")},function(P){return 1===P?"m\xeas":"meses"},function(P){return"semana"+(1===P?"":"s")},function(P){return"dia"+(1===P?"":"s")},function(P){return"hora"+(1===P?"":"s")},function(P){return"minuto"+(1===P?"":"s")},function(P){return"segundo"+(1===P?"":"s")},function(P){return"milissegundo"+(1===P?"":"s")},","),ro:u(function(P){return 1===P?"an":"ani"},function(P){return 1===P?"lun\u0103":"luni"},function(P){return 1===P?"s\u0103pt\u0103m\xe2n\u0103":"s\u0103pt\u0103m\xe2ni"},function(P){return 1===P?"zi":"zile"},function(P){return 1===P?"or\u0103":"ore"},function(P){return 1===P?"minut":"minute"},function(P){return 1===P?"secund\u0103":"secunde"},function(P){return 1===P?"milisecund\u0103":"milisecunde"},","),ru:u(function(P){return["\u043b\u0435\u0442","\u0433\u043e\u0434","\u0433\u043e\u0434\u0430"][v(P)]},function(P){return["\u043c\u0435\u0441\u044f\u0446\u0435\u0432","\u043c\u0435\u0441\u044f\u0446","\u043c\u0435\u0441\u044f\u0446\u0430"][v(P)]},function(P){return["\u043d\u0435\u0434\u0435\u043b\u044c","\u043d\u0435\u0434\u0435\u043b\u044f","\u043d\u0435\u0434\u0435\u043b\u0438"][v(P)]},function(P){return["\u0434\u043d\u0435\u0439","\u0434\u0435\u043d\u044c","\u0434\u043d\u044f"][v(P)]},function(P){return["\u0447\u0430\u0441\u043e\u0432","\u0447\u0430\u0441","\u0447\u0430\u0441\u0430"][v(P)]},function(P){return["\u043c\u0438\u043d\u0443\u0442","\u043c\u0438\u043d\u0443\u0442\u0430","\u043c\u0438\u043d\u0443\u0442\u044b"][v(P)]},function(P){return["\u0441\u0435\u043a\u0443\u043d\u0434","\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u044b"][v(P)]},function(P){return["\u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434","\u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u044b"][v(P)]},","),sq:u(function(P){return 1===P?"vit":"vjet"},"muaj","jav\xeb","dit\xeb","or\xeb",function(P){return"minut"+(1===P?"\xeb":"a")},function(P){return"sekond"+(1===P?"\xeb":"a")},function(P){return"milisekond"+(1===P?"\xeb":"a")},","),sr:u(function(P){return["\u0433\u043e\u0434\u0438\u043d\u0438","\u0433\u043e\u0434\u0438\u043d\u0430","\u0433\u043e\u0434\u0438\u043d\u0435"][v(P)]},function(P){return["\u043c\u0435\u0441\u0435\u0446\u0438","\u043c\u0435\u0441\u0435\u0446","\u043c\u0435\u0441\u0435\u0446\u0430"][v(P)]},function(P){return["\u043d\u0435\u0434\u0435\u0459\u0438","\u043d\u0435\u0434\u0435\u0459\u0430","\u043d\u0435\u0434\u0435\u0459\u0435"][v(P)]},function(P){return["\u0434\u0430\u043d\u0438","\u0434\u0430\u043d","\u0434\u0430\u043d\u0430"][v(P)]},function(P){return["\u0441\u0430\u0442\u0438","\u0441\u0430\u0442","\u0441\u0430\u0442\u0430"][v(P)]},function(P){return["\u043c\u0438\u043d\u0443\u0442\u0430","\u043c\u0438\u043d\u0443\u0442","\u043c\u0438\u043d\u0443\u0442\u0430"][v(P)]},function(P){return["\u0441\u0435\u043a\u0443\u043d\u0434\u0438","\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u0435"][v(P)]},function(P){return["\u043c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0438","\u043c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u043c\u0438\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0435"][v(P)]},","),ta:u(function(P){return 1===P?"\u0bb5\u0bb0\u0bc1\u0b9f\u0bae\u0bcd":"\u0b86\u0ba3\u0bcd\u0b9f\u0bc1\u0b95\u0bb3\u0bcd"},function(P){return 1===P?"\u0bae\u0bbe\u0ba4\u0bae\u0bcd":"\u0bae\u0bbe\u0ba4\u0b99\u0bcd\u0b95\u0bb3\u0bcd"},function(P){return 1===P?"\u0bb5\u0bbe\u0bb0\u0bae\u0bcd":"\u0bb5\u0bbe\u0bb0\u0b99\u0bcd\u0b95\u0bb3\u0bcd"},function(P){return 1===P?"\u0ba8\u0bbe\u0bb3\u0bcd":"\u0ba8\u0bbe\u0b9f\u0bcd\u0b95\u0bb3\u0bcd"},function(P){return 1===P?"\u0bae\u0ba3\u0bbf":"\u0bae\u0ba3\u0bbf\u0ba8\u0bc7\u0bb0\u0bae\u0bcd"},function(P){return"\u0ba8\u0bbf\u0bae\u0bbf\u0b9f"+(1===P?"\u0bae\u0bcd":"\u0b99\u0bcd\u0b95\u0bb3\u0bcd")},function(P){return"\u0bb5\u0bbf\u0ba9\u0bbe\u0b9f\u0bbf"+(1===P?"":"\u0b95\u0bb3\u0bcd")},function(P){return"\u0bae\u0bbf\u0bb2\u0bcd\u0bb2\u0bbf \u0bb5\u0bbf\u0ba8\u0bbe\u0b9f\u0bbf"+(1===P?"":"\u0b95\u0bb3\u0bcd")}),te:u(function(P){return"\u0c38\u0c02\u0c35\u0c24\u0c4d\u0c38"+(1===P?"\u0c30\u0c02":"\u0c30\u0c3e\u0c32")},function(P){return"\u0c28\u0c46\u0c32"+(1===P?"":"\u0c32")},function(P){return 1===P?"\u0c35\u0c3e\u0c30\u0c02":"\u0c35\u0c3e\u0c30\u0c3e\u0c32\u0c41"},function(P){return"\u0c30\u0c4b\u0c1c\u0c41"+(1===P?"":"\u0c32\u0c41")},function(P){return"\u0c17\u0c02\u0c1f"+(1===P?"":"\u0c32\u0c41")},function(P){return 1===P?"\u0c28\u0c3f\u0c2e\u0c3f\u0c37\u0c02":"\u0c28\u0c3f\u0c2e\u0c3f\u0c37\u0c3e\u0c32\u0c41"},function(P){return 1===P?"\u0c38\u0c46\u0c15\u0c28\u0c41":"\u0c38\u0c46\u0c15\u0c28\u0c4d\u0c32\u0c41"},function(P){return 1===P?"\u0c2e\u0c3f\u0c32\u0c4d\u0c32\u0c40\u0c38\u0c46\u0c15\u0c28\u0c4d":"\u0c2e\u0c3f\u0c32\u0c4d\u0c32\u0c40\u0c38\u0c46\u0c15\u0c28\u0c4d\u0c32\u0c41"}),uk:u(function(P){return["\u0440\u043e\u043a\u0456\u0432","\u0440\u0456\u043a","\u0440\u043e\u043a\u0438"][v(P)]},function(P){return["\u043c\u0456\u0441\u044f\u0446\u0456\u0432","\u043c\u0456\u0441\u044f\u0446\u044c","\u043c\u0456\u0441\u044f\u0446\u0456"][v(P)]},function(P){return["\u0442\u0438\u0436\u043d\u0456\u0432","\u0442\u0438\u0436\u0434\u0435\u043d\u044c","\u0442\u0438\u0436\u043d\u0456"][v(P)]},function(P){return["\u0434\u043d\u0456\u0432","\u0434\u0435\u043d\u044c","\u0434\u043d\u0456"][v(P)]},function(P){return["\u0433\u043e\u0434\u0438\u043d","\u0433\u043e\u0434\u0438\u043d\u0430","\u0433\u043e\u0434\u0438\u043d\u0438"][v(P)]},function(P){return["\u0445\u0432\u0438\u043b\u0438\u043d","\u0445\u0432\u0438\u043b\u0438\u043d\u0430","\u0445\u0432\u0438\u043b\u0438\u043d\u0438"][v(P)]},function(P){return["\u0441\u0435\u043a\u0443\u043d\u0434","\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u0438"][v(P)]},function(P){return["\u043c\u0456\u043b\u0456\u0441\u0435\u043a\u0443\u043d\u0434","\u043c\u0456\u043b\u0456\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u043c\u0456\u043b\u0456\u0441\u0435\u043a\u0443\u043d\u0434\u0438"][v(P)]},","),ur:u("\u0633\u0627\u0644",function(P){return 1===P?"\u0645\u06c1\u06cc\u0646\u06c1":"\u0645\u06c1\u06cc\u0646\u06d2"},function(P){return 1===P?"\u06c1\u0641\u062a\u06c1":"\u06c1\u0641\u062a\u06d2"},"\u062f\u0646",function(P){return 1===P?"\u06af\u06be\u0646\u0679\u06c1":"\u06af\u06be\u0646\u0679\u06d2"},"\u0645\u0646\u0679","\u0633\u06cc\u06a9\u0646\u0688","\u0645\u0644\u06cc \u0633\u06cc\u06a9\u0646\u0688"),sk:u(function(P){return["rok","roky","roky","rokov"][m(P)]},function(P){return["mesiac","mesiace","mesiace","mesiacov"][m(P)]},function(P){return["t\xfd\u017ede\u0148","t\xfd\u017edne","t\xfd\u017edne","t\xfd\u017ed\u0148ov"][m(P)]},function(P){return["de\u0148","dni","dni","dn\xed"][m(P)]},function(P){return["hodina","hodiny","hodiny","hod\xedn"][m(P)]},function(P){return["min\xfata","min\xfaty","min\xfaty","min\xfat"][m(P)]},function(P){return["sekunda","sekundy","sekundy","sek\xfand"][m(P)]},function(P){return["milisekunda","milisekundy","milisekundy","milisek\xfand"][m(P)]},","),sl:u(function(P){return P%10==1?"leto":P%100==2?"leti":P%100==3||P%100==4||Math.floor(P)!==P&&P%100<=5?"leta":"let"},function(P){return P%10==1?"mesec":P%100==2||Math.floor(P)!==P&&P%100<=5?"meseca":P%10==3||P%10==4?"mesece":"mesecev"},function(P){return P%10==1?"teden":P%10==2||Math.floor(P)!==P&&P%100<=4?"tedna":P%10==3||P%10==4?"tedne":"tednov"},function(P){return P%100==1?"dan":"dni"},function(P){return P%10==1?"ura":P%100==2?"uri":P%10==3||P%10==4||Math.floor(P)!==P?"ure":"ur"},function(P){return P%10==1?"minuta":P%10==2?"minuti":P%10==3||P%10==4||Math.floor(P)!==P&&P%100<=4?"minute":"minut"},function(P){return P%10==1?"sekunda":P%100==2?"sekundi":P%100==3||P%100==4||Math.floor(P)!==P?"sekunde":"sekund"},function(P){return P%10==1?"milisekunda":P%100==2?"milisekundi":P%100==3||P%100==4||Math.floor(P)!==P?"milisekunde":"milisekund"},","),sv:u("\xe5r",function(P){return"m\xe5nad"+(1===P?"":"er")},function(P){return"veck"+(1===P?"a":"or")},function(P){return"dag"+(1===P?"":"ar")},function(P){return"timm"+(1===P?"e":"ar")},function(P){return"minut"+(1===P?"":"er")},function(P){return"sekund"+(1===P?"":"er")},function(P){return"millisekund"+(1===P?"":"er")},","),sw:S(u(function(P){return 1===P?"mwaka":"miaka"},function(P){return 1===P?"mwezi":"miezi"},"wiki",function(P){return 1===P?"siku":"masiku"},function(P){return 1===P?"saa":"masaa"},"dakika","sekunde","milisekunde"),{_numberFirst:!0}),tr:u("y\u0131l","ay","hafta","g\xfcn","saat","dakika","saniye","milisaniye",","),th:u("\u0e1b\u0e35","\u0e40\u0e14\u0e37\u0e2d\u0e19","\u0e2a\u0e31\u0e1b\u0e14\u0e32\u0e2b\u0e4c","\u0e27\u0e31\u0e19","\u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07","\u0e19\u0e32\u0e17\u0e35","\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35","\u0e21\u0e34\u0e25\u0e25\u0e34\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35"),vi:u("n\u0103m","th\xe1ng","tu\u1ea7n","ng\xe0y","gi\u1edd","ph\xfat","gi\xe2y","mili gi\xe2y",","),zh_CN:u("\u5e74","\u4e2a\u6708","\u5468","\u5929","\u5c0f\u65f6","\u5206\u949f","\u79d2","\u6beb\u79d2"),zh_TW:u("\u5e74","\u500b\u6708","\u5468","\u5929","\u5c0f\u6642","\u5206\u9418","\u79d2","\u6beb\u79d2")};function u(P,Q,$,oe,X,ie,q,se,ne){var Ce={y:P,mo:Q,w:$,d:oe,h:X,m:ie,s:q,ms:se};return typeof ne<"u"&&(Ce.decimal=ne),Ce}function h(P){return 2===P?1:P>2&&P<11?2:0}function g(P){return 1===P?0:Math.floor(P)!==P?1:P%10>=2&&P%10<=4&&!(P%100>10&&P%100<20)?2:3}function v(P){return Math.floor(P)!==P?2:P%100>=5&&P%100<=20||P%10>=5&&P%10<=9||P%10==0?0:P%10==1?1:P>1?2:0}function m(P){return 1===P?0:Math.floor(P)!==P?1:P%10>=2&&P%10<=4&&P%100<10?2:3}function f(P){return 1===P||P%10==1&&P%100>20?0:Math.floor(P)!==P||P%10>=2&&P%100>20||P%10>=2&&P%100<10?1:2}function _(P){return P%10==1&&P%100!=11}function S(P){for(var Q,$=1;$<arguments.length;$++)for(var oe in Q=arguments[$])D(Q,oe)&&(P[oe]=Q[oe]);return P}var M=Array.isArray||function(P){return"[object Array]"===Object.prototype.toString.call(P)};function D(P,Q){return Object.prototype.hasOwnProperty.call(P,Q)}function V(P,Q,$){var se,ne,oe=P.unitName,X=P.unitCount,ie=$.spacer,q=$.maxDecimalPoints;se=D($,"decimal")?$.decimal:D(Q,"decimal")?Q.decimal:".","digitReplacements"in $?ne=$.digitReplacements:"_digitReplacements"in Q&&(ne=Q._digitReplacements);var Ce,ue=(void 0===q?X:Math.floor(X*Math.pow(10,q))/Math.pow(10,q)).toString();if(ne){Ce="";for(var fe=0;fe<ue.length;fe++){var ee=ue[fe];Ce+="."===ee?se:ne[ee]}}else Ce=ue.replace(".",se);var pe,de=Q[oe];return pe="function"==typeof de?de(X):de,Q._numberFirst?pe+ie+Ce:Ce+ie+pe}function F(P){var Q=function(oe,X){oe=Math.abs(oe);var ie=S({},Q,X||{}),q=function B(P,Q){var $,oe,X,ie,q=Q.units,se=Q.unitMeasures,ne="largest"in Q?Q.largest:1/0;if(!q.length)return[];var Ce={};for(ie=P,oe=0;oe<q.length;oe++){var xe=se[$=q[oe]];X=oe===q.length-1?ie/xe:Math.floor(ie/xe),Ce[$]=X,ie-=X*xe}if(Q.round){var fe=ne;for(oe=0;oe<q.length;oe++)if(0!==(X=Ce[$=q[oe]])&&0==--fe){for(var ee=oe+1;ee<q.length;ee++){var de=q[ee];Ce[$]+=Ce[de]*se[de]/se[$],Ce[de]=0}break}for(oe=q.length-1;oe>=0;oe--)if(0!==(X=Ce[$=q[oe]])){var ce=Math.round(X);if(Ce[$]=ce,0===oe)break;var ae=q[oe-1],Me=Math.floor(ce*se[$]/se[ae]);if(!Me)break;Ce[ae]+=Me,Ce[$]=0}}var _e=[];for(oe=0;oe<q.length&&_e.length<ne;oe++)(X=Ce[$=q[oe]])&&_e.push({unitName:$,unitCount:X});return _e}(oe,ie);return function U(P,Q){var $=function R(P){var Q=[P.language];if(D(P,"fallbacks")){if(!M(P.fallbacks)||!P.fallbacks.length)throw new Error("fallbacks must be an array with at least one element");Q=Q.concat(P.fallbacks)}for(var $=0;$<Q.length;$++){var oe=Q[$];if(D(P.languages,oe))return P.languages[oe];if(D(I,oe))return I[oe]}throw new Error("No language found.")}(Q);if(!P.length){var oe=Q.units;return V({unitName:oe[oe.length-1],unitCount:0},$,Q)}var se,ie=Q.conjunction,q=Q.serialComma;se=D(Q,"delimiter")?Q.delimiter:D($,"delimiter")?$.delimiter:", ";for(var ne=[],Ce=0;Ce<P.length;Ce++)ne.push(V(P[Ce],$,Q));return ie&&1!==P.length?2===P.length?ne.join(ie):ne.slice(0,-1).join(se)+(q?",":"")+ie+ne.slice(-1):ne.join(se)}(q,ie)};return S(Q,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},P)}var j=F({});j.getSupportedLanguages=function(){var Q=[];for(var $ in I)D(I,$)&&"gr"!==$&&Q.push($);return Q},j.humanizer=F,void 0!==(k=function(){return j}.call(y,w,y,Ae))&&(Ae.exports=k)}()},98147:(Ae,y,w)=>{"use strict";var k=w(78041)(),I=w(41098)("Object.prototype.toString"),u=function(m){return!(k&&m&&"object"==typeof m&&Symbol.toStringTag in m)&&"[object Arguments]"===I(m)},h=function(m){return!!u(m)||null!==m&&"object"==typeof m&&"number"==typeof m.length&&m.length>=0&&"[object Array]"!==I(m)&&"[object Function]"===I(m.callee)},g=function(){return u(arguments)}();u.isLegacyArguments=h,Ae.exports=g?u:h},32365:(Ae,y,w)=>{"use strict";var k=Date.prototype.getDay,I=Object.prototype.toString,h=w(78041)();Ae.exports=function(v){return"object"==typeof v&&null!==v&&(h?function(v){try{return k.call(v),!0}catch{return!1}}(v):"[object Date]"===I.call(v))}},34720:(Ae,y,w)=>{"use strict";var I,u,h,g,k=w(41098),G=w(78041)();if(G){I=k("Object.prototype.hasOwnProperty"),u=k("RegExp.prototype.exec"),h={};var v=function(){throw h};g={toString:v,valueOf:v},"symbol"==typeof Symbol.toPrimitive&&(g[Symbol.toPrimitive]=v)}var m=k("Object.prototype.toString"),f=Object.getOwnPropertyDescriptor;Ae.exports=G?function(M){if(!M||"object"!=typeof M)return!1;var D=f(M,"lastIndex");if(!D||!I(D,"value"))return!1;try{u(M,g)}catch(V){return V===h}}:function(M){return!(!M||"object"!=typeof M&&"function"!=typeof M)&&"[object RegExp]"===m(M)}},64772:Ae=>{"use strict";var y=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;Ae.exports=function I(){try{if(!Object.assign)return!1;var u=new String("abc");if(u[5]="de","5"===Object.getOwnPropertyNames(u)[0])return!1;for(var h={},g=0;g<10;g++)h["_"+String.fromCharCode(g)]=g;if("0123456789"!==Object.getOwnPropertyNames(h).map(function(f){return h[f]}).join(""))return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(f){m[f]=f}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},m)).join("")}catch{return!1}}()?Object.assign:function(u,h){for(var g,m,v=function G(u){if(null==u)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(u)}(u),f=1;f<arguments.length;f++){for(var _ in g=Object(arguments[f]))w.call(g,_)&&(v[_]=g[_]);if(y){m=y(g);for(var S=0;S<m.length;S++)k.call(g,m[S])&&(v[m[S]]=g[m[S]])}}return v}},14246:Ae=>{"use strict";var y=function(w){return w!=w};Ae.exports=function(k,G){return 0===k&&0===G?1/k==1/G:!!(k===G||y(k)&&y(G))}},20314:(Ae,y,w)=>{"use strict";var k=w(21648),G=w(35436),I=w(14246),u=w(31353),h=w(13090),g=G(u(),Object);k(g,{getPolyfill:u,implementation:I,shim:h}),Ae.exports=g},31353:(Ae,y,w)=>{"use strict";var k=w(14246);Ae.exports=function(){return"function"==typeof Object.is?Object.is:k}},13090:(Ae,y,w)=>{"use strict";var k=w(31353),G=w(21648);Ae.exports=function(){var u=k();return G(Object,{is:u},{is:function(){return Object.is!==u}}),u}},77972:(Ae,y,w)=>{"use strict";var k;if(!Object.keys){var G=Object.prototype.hasOwnProperty,I=Object.prototype.toString,u=w(99637),h=Object.prototype.propertyIsEnumerable,g=!h.call({toString:null},"toString"),v=h.call(function(){},"prototype"),m=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(D){var R=D.constructor;return R&&R.prototype===D},_={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},S=function(){if(typeof window>"u")return!1;for(var D in window)try{if(!_["$"+D]&&G.call(window,D)&&null!==window[D]&&"object"==typeof window[D])try{f(window[D])}catch{return!0}}catch{return!0}return!1}();k=function(R){var V=null!==R&&"object"==typeof R,B="[object Function]"===I.call(R),U=u(R),F=V&&"[object String]"===I.call(R),j=[];if(!V&&!B&&!U)throw new TypeError("Object.keys called on a non-object");var P=v&&B;if(F&&R.length>0&&!G.call(R,0))for(var Q=0;Q<R.length;++Q)j.push(String(Q));if(U&&R.length>0)for(var $=0;$<R.length;++$)j.push(String($));else for(var oe in R)(!P||"prototype"!==oe)&&G.call(R,oe)&&j.push(String(oe));if(g)for(var X=function(D){if(typeof window>"u"||!S)return f(D);try{return f(D)}catch{return!1}}(R),ie=0;ie<m.length;++ie)(!X||"constructor"!==m[ie])&&G.call(R,m[ie])&&j.push(m[ie]);return j}}Ae.exports=k},67809:(Ae,y,w)=>{"use strict";var k=Array.prototype.slice,G=w(99637),I=Object.keys,u=I?function(v){return I(v)}:w(77972),h=Object.keys;u.shim=function(){if(Object.keys){var v=function(){var m=Object.keys(arguments);return m&&m.length===arguments.length}(1,2);v||(Object.keys=function(f){return G(f)?h(k.call(f)):h(f)})}else Object.keys=u;return Object.keys||u},Ae.exports=u},99637:Ae=>{"use strict";var y=Object.prototype.toString;Ae.exports=function(k){var G=y.call(k),I="[object Arguments]"===G;return I||(I="[object Array]"!==G&&null!==k&&"object"==typeof k&&"number"==typeof k.length&&k.length>=0&&"[object Function]"===y.call(k.callee)),I}},74018:Ae=>{Ae.exports=function(w,k,G,I){var u=w[0],h=w[1],g=!1;void 0===G&&(G=0),void 0===I&&(I=k.length);for(var v=(I-G)/2,m=0,f=v-1;m<v;f=m++){var _=k[G+2*m+0],S=k[G+2*m+1],D=k[G+2*f+1];S>h!=D>h&&u<(k[G+2*f+0]-_)*(h-S)/(D-S)+_&&(g=!g)}return g}},14179:(Ae,y,w)=>{var k=w(74018),G=w(18875);Ae.exports=function(u,h,g,v){return h.length>0&&Array.isArray(h[0])?G(u,h,g,v):k(u,h,g,v)},Ae.exports.nested=G,Ae.exports.flat=k},18875:Ae=>{Ae.exports=function(w,k,G,I){var u=w[0],h=w[1],g=!1;void 0===G&&(G=0),void 0===I&&(I=k.length);for(var v=I-G,m=0,f=v-1;m<v;f=m++){var _=k[m+G][0],S=k[m+G][1],D=k[f+G][1];S>h!=D>h&&u<(k[f+G][0]-_)*(h-S)/(D-S)+_&&(g=!g)}return g}},98464:function(Ae){Ae.exports=function(){"use strict";function y(qe,Oe){if(!(qe instanceof Oe))throw new TypeError("Cannot call a class as a function")}function w(qe,Oe){for(var Te=0;Te<Oe.length;Te++){var Ne=Oe[Te];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,"value"in Ne&&(Ne.writable=!0),Object.defineProperty(qe,Ne.key,Ne)}}function k(qe,Oe,Te){return Oe&&w(qe.prototype,Oe),Te&&w(qe,Te),qe}var G=function qe(Oe,Te){this.next=null,this.key=Oe,this.data=Te,this.left=null,this.right=null};function I(qe,Oe){return qe>Oe?1:qe<Oe?-1:0}function u(qe,Oe,Te){for(var Ne=new G(null,null),rt=Ne,xt=Ne;;){var gt=Te(qe,Oe.key);if(gt<0){if(null===Oe.left)break;if(Te(qe,Oe.left.key)<0&&(Oe.left=(on=Oe.left).right,on.right=Oe,null===(Oe=on).left))break;xt.left=Oe,xt=Oe,Oe=Oe.left}else{if(!(gt>0))break;if(null===Oe.right)break;var on;if(Te(qe,Oe.right.key)>0&&(Oe.right=(on=Oe.right).left,on.left=Oe,null===(Oe=on).right))break;rt.right=Oe,rt=Oe,Oe=Oe.right}}return rt.right=Oe.left,xt.left=Oe.right,Oe.left=Ne.right,Oe.right=Ne.left,Oe}function h(qe,Oe,Te,Ne){var rt=new G(qe,Oe);if(null===Te)return rt.left=rt.right=null,rt;var xt=Ne(qe,(Te=u(qe,Te,Ne)).key);return xt<0?(rt.left=Te.left,rt.right=Te,Te.left=null):xt>=0&&(rt.right=Te.right,rt.left=Te,Te.right=null),rt}function g(qe,Oe,Te){var Ne=null,rt=null;if(Oe){var xt=Te((Oe=u(qe,Oe,Te)).key,qe);0===xt?(Ne=Oe.left,rt=Oe.right):xt<0?(rt=Oe.right,Oe.right=null,Ne=Oe):(Ne=Oe.left,Oe.left=null,rt=Oe)}return{left:Ne,right:rt}}function m(qe,Oe,Te,Ne,rt){if(qe){Ne(Oe+(Te?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+rt(qe)+"\n");var xt=Oe+(Te?"    ":"\u2502   ");qe.left&&m(qe.left,xt,!1,Ne,rt),qe.right&&m(qe.right,xt,!0,Ne,rt)}}var f=function(){function qe(Oe){void 0===Oe&&(Oe=I),this._root=null,this._size=0,this._comparator=Oe}return qe.prototype.insert=function(Oe,Te){return this._size++,this._root=h(Oe,Te,this._root,this._comparator)},qe.prototype.add=function(Oe,Te){var Ne=new G(Oe,Te);null===this._root&&(Ne.left=Ne.right=null,this._size++,this._root=Ne);var rt=this._comparator,xt=u(Oe,this._root,rt),gt=rt(Oe,xt.key);return 0===gt?this._root=xt:(gt<0?(Ne.left=xt.left,Ne.right=xt,xt.left=null):gt>0&&(Ne.right=xt.right,Ne.left=xt,xt.right=null),this._size++,this._root=Ne),this._root},qe.prototype.remove=function(Oe){this._root=this._remove(Oe,this._root,this._comparator)},qe.prototype._remove=function(Oe,Te,Ne){var rt;return null===Te?null:0===Ne(Oe,(Te=u(Oe,Te,Ne)).key)?(null===Te.left?rt=Te.right:(rt=u(Oe,Te.left,Ne)).right=Te.right,this._size--,rt):Te},qe.prototype.pop=function(){var Oe=this._root;if(Oe){for(;Oe.left;)Oe=Oe.left;return this._root=u(Oe.key,this._root,this._comparator),this._root=this._remove(Oe.key,this._root,this._comparator),{key:Oe.key,data:Oe.data}}return null},qe.prototype.findStatic=function(Oe){for(var Te=this._root,Ne=this._comparator;Te;){var rt=Ne(Oe,Te.key);if(0===rt)return Te;Te=rt<0?Te.left:Te.right}return null},qe.prototype.find=function(Oe){return this._root&&(this._root=u(Oe,this._root,this._comparator),0!==this._comparator(Oe,this._root.key))?null:this._root},qe.prototype.contains=function(Oe){for(var Te=this._root,Ne=this._comparator;Te;){var rt=Ne(Oe,Te.key);if(0===rt)return!0;Te=rt<0?Te.left:Te.right}return!1},qe.prototype.forEach=function(Oe,Te){for(var Ne=this._root,rt=[],xt=!1;!xt;)null!==Ne?(rt.push(Ne),Ne=Ne.left):0!==rt.length?(Ne=rt.pop(),Oe.call(Te,Ne),Ne=Ne.right):xt=!0;return this},qe.prototype.range=function(Oe,Te,Ne,rt){for(var xt=[],gt=this._comparator,on=this._root;0!==xt.length||on;)if(on)xt.push(on),on=on.left;else{if(gt((on=xt.pop()).key,Te)>0)break;if(gt(on.key,Oe)>=0&&Ne.call(rt,on))return this;on=on.right}return this},qe.prototype.keys=function(){var Oe=[];return this.forEach(function(Te){return Oe.push(Te.key)}),Oe},qe.prototype.values=function(){var Oe=[];return this.forEach(function(Te){return Oe.push(Te.data)}),Oe},qe.prototype.min=function(){return this._root?this.minNode(this._root).key:null},qe.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},qe.prototype.minNode=function(Oe){if(void 0===Oe&&(Oe=this._root),Oe)for(;Oe.left;)Oe=Oe.left;return Oe},qe.prototype.maxNode=function(Oe){if(void 0===Oe&&(Oe=this._root),Oe)for(;Oe.right;)Oe=Oe.right;return Oe},qe.prototype.at=function(Oe){for(var Te=this._root,Ne=!1,rt=0,xt=[];!Ne;)if(Te)xt.push(Te),Te=Te.left;else if(xt.length>0){if(Te=xt.pop(),rt===Oe)return Te;rt++,Te=Te.right}else Ne=!0;return null},qe.prototype.next=function(Oe){var Te=this._root,Ne=null;if(Oe.right){for(Ne=Oe.right;Ne.left;)Ne=Ne.left;return Ne}for(var rt=this._comparator;Te;){var xt=rt(Oe.key,Te.key);if(0===xt)break;xt<0?(Ne=Te,Te=Te.left):Te=Te.right}return Ne},qe.prototype.prev=function(Oe){var Te=this._root,Ne=null;if(null!==Oe.left){for(Ne=Oe.left;Ne.right;)Ne=Ne.right;return Ne}for(var rt=this._comparator;Te;){var xt=rt(Oe.key,Te.key);if(0===xt)break;xt<0?Te=Te.left:(Ne=Te,Te=Te.right)}return Ne},qe.prototype.clear=function(){return this._root=null,this._size=0,this},qe.prototype.toList=function(){return function M(qe){for(var Oe=qe,Te=[],Ne=!1,rt=new G(null,null),xt=rt;!Ne;)Oe?(Te.push(Oe),Oe=Oe.left):Te.length>0?Oe=(Oe=xt=xt.next=Te.pop()).right:Ne=!0;return xt.next=null,rt.next}(this._root)},qe.prototype.load=function(Oe,Te,Ne){void 0===Te&&(Te=[]),void 0===Ne&&(Ne=!1);var rt=Oe.length,xt=this._comparator;if(Ne&&V(Oe,Te,0,rt-1,xt),null===this._root)this._root=_(Oe,Te,0,rt),this._size=rt;else{var gt=function R(qe,Oe,Te){for(var Ne=new G(null,null),rt=Ne,xt=qe,gt=Oe;null!==xt&&null!==gt;)Te(xt.key,gt.key)<0?(rt.next=xt,xt=xt.next):(rt.next=gt,gt=gt.next),rt=rt.next;return null!==xt?rt.next=xt:null!==gt&&(rt.next=gt),Ne.next}(this.toList(),function S(qe,Oe){for(var Te=new G(null,null),Ne=Te,rt=0;rt<qe.length;rt++)Ne=Ne.next=new G(qe[rt],Oe[rt]);return Ne.next=null,Te.next}(Oe,Te),xt);this._root=D({head:gt},0,rt=this._size+rt)}return this},qe.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(qe.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(qe.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),qe.prototype.toString=function(Oe){void 0===Oe&&(Oe=function(rt){return String(rt.key)});var Te=[];return m(this._root,"",!0,function(Ne){return Te.push(Ne)},Oe),Te.join("")},qe.prototype.update=function(Oe,Te,Ne){var rt=this._comparator,xt=g(Oe,this._root,rt),gt=xt.left,on=xt.right;rt(Oe,Te)<0?on=h(Te,Ne,on,rt):gt=h(Te,Ne,gt,rt),this._root=function v(qe,Oe,Te){return null===Oe?qe:(null===qe||((Oe=u(qe.key,Oe,Te)).left=qe),Oe)}(gt,on,rt)},qe.prototype.split=function(Oe){return g(Oe,this._root,this._comparator)},qe}();function _(qe,Oe,Te,Ne){var rt=Ne-Te;if(rt>0){var xt=Te+Math.floor(rt/2),Qt=new G(qe[xt],Oe[xt]);return Qt.left=_(qe,Oe,Te,xt),Qt.right=_(qe,Oe,xt+1,Ne),Qt}return null}function D(qe,Oe,Te){var Ne=Te-Oe;if(Ne>0){var rt=Oe+Math.floor(Ne/2),xt=D(qe,Oe,rt),gt=qe.head;return gt.left=xt,qe.head=qe.head.next,gt.right=D(qe,rt+1,Te),gt}return null}function V(qe,Oe,Te,Ne,rt){if(!(Te>=Ne)){for(var xt=qe[Te+Ne>>1],gt=Te-1,on=Ne+1;;){do{gt++}while(rt(qe[gt],xt)<0);do{on--}while(rt(qe[on],xt)>0);if(gt>=on)break;var Qt=qe[gt];qe[gt]=qe[on],qe[on]=Qt,Qt=Oe[gt],Oe[gt]=Oe[on],Oe[on]=Qt}V(qe,Oe,Te,on,rt),V(qe,Oe,on+1,Ne,rt)}}var B=function(Oe,Te){return Oe.ll.x<=Te.x&&Te.x<=Oe.ur.x&&Oe.ll.y<=Te.y&&Te.y<=Oe.ur.y},U=function(Oe,Te){return Te.ur.x<Oe.ll.x||Oe.ur.x<Te.ll.x||Te.ur.y<Oe.ll.y||Oe.ur.y<Te.ll.y?null:{ll:{x:Oe.ll.x<Te.ll.x?Te.ll.x:Oe.ll.x,y:Oe.ll.y<Te.ll.y?Te.ll.y:Oe.ll.y},ur:{x:Oe.ur.x<Te.ur.x?Oe.ur.x:Te.ur.x,y:Oe.ur.y<Te.ur.y?Oe.ur.y:Te.ur.y}}},F=Number.EPSILON;void 0===F&&(F=Math.pow(2,-52));var j=F*F,P=function(Oe,Te){if(-F<Oe&&Oe<F&&-F<Te&&Te<F)return 0;var Ne=Oe-Te;return Ne*Ne<j*Oe*Te?0:Oe<Te?-1:1},Q=function(){function qe(){y(this,qe),this.reset()}return k(qe,[{key:"reset",value:function(){this.xRounder=new $,this.yRounder=new $}},{key:"round",value:function(Te,Ne){return{x:this.xRounder.round(Te),y:this.yRounder.round(Ne)}}}]),qe}(),$=function(){function qe(){y(this,qe),this.tree=new f,this.round(0)}return k(qe,[{key:"round",value:function(Te){var Ne=this.tree.add(Te),rt=this.tree.prev(Ne);if(null!==rt&&0===P(Ne.key,rt.key))return this.tree.remove(Te),rt.key;var xt=this.tree.next(Ne);return null!==xt&&0===P(Ne.key,xt.key)?(this.tree.remove(Te),xt.key):Te}}]),qe}(),oe=new Q,X=function(Oe,Te){return Oe.x*Te.y-Oe.y*Te.x},ie=function(Oe,Te){return Oe.x*Te.x+Oe.y*Te.y},q=function(Oe,Te,Ne){var gt=X({x:Te.x-Oe.x,y:Te.y-Oe.y},{x:Ne.x-Oe.x,y:Ne.y-Oe.y});return P(gt,0)},se=function(Oe){return Math.sqrt(ie(Oe,Oe))},ne=function(Oe,Te,Ne){var rt={x:Te.x-Oe.x,y:Te.y-Oe.y},xt={x:Ne.x-Oe.x,y:Ne.y-Oe.y};return X(xt,rt)/se(xt)/se(rt)},Ce=function(Oe,Te,Ne){var rt={x:Te.x-Oe.x,y:Te.y-Oe.y},xt={x:Ne.x-Oe.x,y:Ne.y-Oe.y};return ie(xt,rt)/se(xt)/se(rt)},xe=function(Oe,Te,Ne){return 0===Te.y?null:{x:Oe.x+Te.x/Te.y*(Ne-Oe.y),y:Ne}},ue=function(Oe,Te,Ne){return 0===Te.x?null:{x:Ne,y:Oe.y+Te.y/Te.x*(Ne-Oe.x)}},ee=function(){function qe(Oe,Te){y(this,qe),void 0===Oe.events?Oe.events=[this]:Oe.events.push(this),this.point=Oe,this.isLeft=Te}return k(qe,null,[{key:"compare",value:function(Te,Ne){var rt=qe.comparePoints(Te.point,Ne.point);return 0!==rt?rt:(Te.point!==Ne.point&&Te.link(Ne),Te.isLeft!==Ne.isLeft?Te.isLeft?1:-1:pe.compare(Te.segment,Ne.segment))}},{key:"comparePoints",value:function(Te,Ne){return Te.x<Ne.x?-1:Te.x>Ne.x?1:Te.y<Ne.y?-1:Te.y>Ne.y?1:0}}]),k(qe,[{key:"link",value:function(Te){if(Te.point===this.point)throw new Error("Tried to link already linked events");for(var Ne=Te.point.events,rt=0,xt=Ne.length;rt<xt;rt++){var gt=Ne[rt];this.point.events.push(gt),gt.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var Te=this.point.events.length,Ne=0;Ne<Te;Ne++){var rt=this.point.events[Ne];if(void 0===rt.segment.consumedBy)for(var xt=Ne+1;xt<Te;xt++){var gt=this.point.events[xt];void 0===gt.consumedBy&&rt.otherSE.point.events===gt.otherSE.point.events&&rt.segment.consume(gt.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var Te=[],Ne=0,rt=this.point.events.length;Ne<rt;Ne++){var xt=this.point.events[Ne];xt!==this&&!xt.segment.ringOut&&xt.segment.isInResult()&&Te.push(xt)}return Te}},{key:"getLeftmostComparator",value:function(Te){var Ne=this,rt=new Map,xt=function(on){var Qt=on.otherSE;rt.set(on,{sine:ne(Ne.point,Te.point,Qt.point),cosine:Ce(Ne.point,Te.point,Qt.point)})};return function(gt,on){rt.has(gt)||xt(gt),rt.has(on)||xt(on);var Qt=rt.get(gt),Gt=Qt.sine,Vn=Qt.cosine,un=rt.get(on),an=un.sine,cn=un.cosine;return Gt>=0&&an>=0?Vn<cn?1:Vn>cn?-1:0:Gt<0&&an<0?Vn<cn?-1:Vn>cn?1:0:an<Gt?-1:an>Gt?1:0}}}]),qe}(),de=0,pe=function(){function qe(Oe,Te,Ne,rt){y(this,qe),this.id=++de,this.leftSE=Oe,Oe.segment=this,Oe.otherSE=Te,this.rightSE=Te,Te.segment=this,Te.otherSE=Oe,this.rings=Ne,this.windings=rt}return k(qe,null,[{key:"compare",value:function(Te,Ne){var rt=Te.leftSE.point.x,xt=Ne.leftSE.point.x,gt=Te.rightSE.point.x,on=Ne.rightSE.point.x;if(on<rt)return 1;if(gt<xt)return-1;var Qt=Te.leftSE.point.y,Gt=Ne.leftSE.point.y,Vn=Te.rightSE.point.y,un=Ne.rightSE.point.y;if(rt<xt){if(Gt<Qt&&Gt<Vn)return 1;if(Gt>Qt&&Gt>Vn)return-1;var an=Te.comparePoint(Ne.leftSE.point);if(an<0)return 1;if(an>0)return-1;var cn=Ne.comparePoint(Te.rightSE.point);return 0!==cn?cn:-1}if(rt>xt){if(Qt<Gt&&Qt<un)return-1;if(Qt>Gt&&Qt>un)return 1;var _i=Ne.comparePoint(Te.leftSE.point);if(0!==_i)return _i;var vi=Te.comparePoint(Ne.rightSE.point);return vi<0?1:vi>0?-1:1}if(Qt<Gt)return-1;if(Qt>Gt)return 1;if(gt<on){var qn=Ne.comparePoint(Te.rightSE.point);if(0!==qn)return qn}if(gt>on){var Pi=Te.comparePoint(Ne.rightSE.point);if(Pi<0)return 1;if(Pi>0)return-1}if(gt!==on){var ci=Vn-Qt,Ei=gt-rt,Mi=un-Gt,Zi=on-xt;if(ci>Ei&&Mi<Zi)return 1;if(ci<Ei&&Mi>Zi)return-1}return gt>on?1:gt<on||Vn<un?-1:Vn>un?1:Te.id<Ne.id?-1:Te.id>Ne.id?1:0}}]),k(qe,[{key:"replaceRightSE",value:function(Te){this.rightSE=Te,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var Te=this.leftSE.point.y,Ne=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:Te<Ne?Te:Ne},ur:{x:this.rightSE.point.x,y:Te>Ne?Te:Ne}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(Te){return Te.x===this.leftSE.point.x&&Te.y===this.leftSE.point.y||Te.x===this.rightSE.point.x&&Te.y===this.rightSE.point.y}},{key:"comparePoint",value:function(Te){if(this.isAnEndpoint(Te))return 0;var Ne=this.leftSE.point,rt=this.rightSE.point,xt=this.vector();if(Ne.x===rt.x)return Te.x===Ne.x?0:Te.x<Ne.x?1:-1;if(Te.x===Ne.x+(Te.y-Ne.y)/xt.y*xt.x)return 0;var Gt=Ne.y+(Te.x-Ne.x)/xt.x*xt.y;return Te.y===Gt?0:Te.y<Gt?-1:1}},{key:"getIntersection",value:function(Te){var Ne=this.bbox(),rt=Te.bbox(),xt=U(Ne,rt);if(null===xt)return null;var gt=this.leftSE.point,on=this.rightSE.point,Qt=Te.leftSE.point,Gt=Te.rightSE.point,Vn=B(Ne,Qt)&&0===this.comparePoint(Qt),un=B(rt,gt)&&0===Te.comparePoint(gt),an=B(Ne,Gt)&&0===this.comparePoint(Gt),cn=B(rt,on)&&0===Te.comparePoint(on);if(un&&Vn)return cn&&!an?on:!cn&&an?Gt:null;if(un)return an&&gt.x===Gt.x&&gt.y===Gt.y?null:gt;if(Vn)return cn&&on.x===Qt.x&&on.y===Qt.y?null:Qt;if(cn&&an)return null;if(cn)return on;if(an)return Gt;var _i=function(Oe,Te,Ne,rt){if(0===Te.x)return ue(Ne,rt,Oe.x);if(0===rt.x)return ue(Oe,Te,Ne.x);if(0===Te.y)return xe(Ne,rt,Oe.y);if(0===rt.y)return xe(Oe,Te,Ne.y);var xt=X(Te,rt);if(0==xt)return null;var gt={x:Ne.x-Oe.x,y:Ne.y-Oe.y},on=X(gt,Te)/xt,Qt=X(gt,rt)/xt;return{x:(Oe.x+Qt*Te.x+(Ne.x+on*rt.x))/2,y:(Oe.y+Qt*Te.y+(Ne.y+on*rt.y))/2}}(gt,this.vector(),Qt,Te.vector());return null!==_i&&B(xt,_i)?oe.round(_i.x,_i.y):null}},{key:"split",value:function(Te){var Ne=[],rt=void 0!==Te.events,xt=new ee(Te,!0),gt=new ee(Te,!1),on=this.rightSE;this.replaceRightSE(gt),Ne.push(gt),Ne.push(xt);var Qt=new qe(xt,on,this.rings.slice(),this.windings.slice());return ee.comparePoints(Qt.leftSE.point,Qt.rightSE.point)>0&&Qt.swapEvents(),ee.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),rt&&(xt.checkForConsuming(),gt.checkForConsuming()),Ne}},{key:"swapEvents",value:function(){var Te=this.rightSE;this.rightSE=this.leftSE,this.leftSE=Te,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var Ne=0,rt=this.windings.length;Ne<rt;Ne++)this.windings[Ne]*=-1}},{key:"consume",value:function(Te){for(var Ne=this,rt=Te;Ne.consumedBy;)Ne=Ne.consumedBy;for(;rt.consumedBy;)rt=rt.consumedBy;var xt=qe.compare(Ne,rt);if(0!==xt){if(xt>0){var gt=Ne;Ne=rt,rt=gt}if(Ne.prev===rt){var on=Ne;Ne=rt,rt=on}for(var Qt=0,Gt=rt.rings.length;Qt<Gt;Qt++){var Vn=rt.rings[Qt],un=rt.windings[Qt],an=Ne.rings.indexOf(Vn);-1===an?(Ne.rings.push(Vn),Ne.windings.push(un)):Ne.windings[an]+=un}rt.rings=null,rt.windings=null,rt.consumedBy=Ne,rt.leftSE.consumedBy=Ne.leftSE,rt.rightSE.consumedBy=Ne.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var Te=this.beforeState();this._afterState={rings:Te.rings.slice(0),windings:Te.windings.slice(0),multiPolys:[]};for(var Ne=this._afterState.rings,rt=this._afterState.windings,xt=this._afterState.multiPolys,gt=0,on=this.rings.length;gt<on;gt++){var Qt=this.rings[gt],Gt=this.windings[gt],Vn=Ne.indexOf(Qt);-1===Vn?(Ne.push(Qt),rt.push(Gt)):rt[Vn]+=Gt}for(var un=[],an=[],cn=0,_i=Ne.length;cn<_i;cn++)if(0!==rt[cn]){var vi=Ne[cn],qn=vi.poly;if(-1===an.indexOf(qn))if(vi.isExterior)un.push(qn);else{-1===an.indexOf(qn)&&an.push(qn);var Pi=un.indexOf(vi.poly);-1!==Pi&&un.splice(Pi,1)}}for(var ci=0,Ei=un.length;ci<Ei;ci++){var Mi=un[ci].multiPoly;-1===xt.indexOf(Mi)&&xt.push(Mi)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var Te=this.beforeState().multiPolys,Ne=this.afterState().multiPolys;switch(Pe.type){case"union":this._isInResult=0===Te.length!=(0===Ne.length);break;case"intersection":var gt,on;Te.length<Ne.length?(gt=Te.length,on=Ne.length):(gt=Ne.length,on=Te.length),this._isInResult=on===Pe.numMultiPolys&&gt<on;break;case"xor":var Qt=Math.abs(Te.length-Ne.length);this._isInResult=Qt%2==1;break;case"difference":var Gt=function(un){return 1===un.length&&un[0].isSubject};this._isInResult=Gt(Te)!==Gt(Ne);break;default:throw new Error("Unrecognized operation type found ".concat(Pe.type))}return this._isInResult}}],[{key:"fromRing",value:function(Te,Ne,rt){var xt,gt,on,Qt=ee.comparePoints(Te,Ne);if(Qt<0)xt=Te,gt=Ne,on=1;else{if(!(Qt>0))throw new Error("Tried to create degenerate segment at [".concat(Te.x,", ").concat(Te.y,"]"));xt=Ne,gt=Te,on=-1}return new qe(new ee(xt,!0),new ee(gt,!1),[rt],[on])}}]),qe}(),ce=function(){function qe(Oe,Te,Ne){if(y(this,qe),!Array.isArray(Oe)||0===Oe.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=Te,this.isExterior=Ne,this.segments=[],"number"!=typeof Oe[0][0]||"number"!=typeof Oe[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var rt=oe.round(Oe[0][0],Oe[0][1]);this.bbox={ll:{x:rt.x,y:rt.y},ur:{x:rt.x,y:rt.y}};for(var xt=rt,gt=1,on=Oe.length;gt<on;gt++){if("number"!=typeof Oe[gt][0]||"number"!=typeof Oe[gt][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Qt=oe.round(Oe[gt][0],Oe[gt][1]);Qt.x===xt.x&&Qt.y===xt.y||(this.segments.push(pe.fromRing(xt,Qt,this)),Qt.x<this.bbox.ll.x&&(this.bbox.ll.x=Qt.x),Qt.y<this.bbox.ll.y&&(this.bbox.ll.y=Qt.y),Qt.x>this.bbox.ur.x&&(this.bbox.ur.x=Qt.x),Qt.y>this.bbox.ur.y&&(this.bbox.ur.y=Qt.y),xt=Qt)}(rt.x!==xt.x||rt.y!==xt.y)&&this.segments.push(pe.fromRing(xt,rt,this))}return k(qe,[{key:"getSweepEvents",value:function(){for(var Te=[],Ne=0,rt=this.segments.length;Ne<rt;Ne++){var xt=this.segments[Ne];Te.push(xt.leftSE),Te.push(xt.rightSE)}return Te}}]),qe}(),ae=function(){function qe(Oe,Te){if(y(this,qe),!Array.isArray(Oe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ce(Oe[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var Ne=1,rt=Oe.length;Ne<rt;Ne++){var xt=new ce(Oe[Ne],this,!1);xt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=xt.bbox.ll.x),xt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=xt.bbox.ll.y),xt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=xt.bbox.ur.x),xt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=xt.bbox.ur.y),this.interiorRings.push(xt)}this.multiPoly=Te}return k(qe,[{key:"getSweepEvents",value:function(){for(var Te=this.exteriorRing.getSweepEvents(),Ne=0,rt=this.interiorRings.length;Ne<rt;Ne++)for(var xt=this.interiorRings[Ne].getSweepEvents(),gt=0,on=xt.length;gt<on;gt++)Te.push(xt[gt]);return Te}}]),qe}(),ye=function(){function qe(Oe,Te){if(y(this,qe),!Array.isArray(Oe))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof Oe[0][0][0]&&(Oe=[Oe])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var Ne=0,rt=Oe.length;Ne<rt;Ne++){var xt=new ae(Oe[Ne],this);xt.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=xt.bbox.ll.x),xt.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=xt.bbox.ll.y),xt.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=xt.bbox.ur.x),xt.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=xt.bbox.ur.y),this.polys.push(xt)}this.isSubject=Te}return k(qe,[{key:"getSweepEvents",value:function(){for(var Te=[],Ne=0,rt=this.polys.length;Ne<rt;Ne++)for(var xt=this.polys[Ne].getSweepEvents(),gt=0,on=xt.length;gt<on;gt++)Te.push(xt[gt]);return Te}}]),qe}(),Me=function(){function qe(Oe){y(this,qe),this.events=Oe;for(var Te=0,Ne=Oe.length;Te<Ne;Te++)Oe[Te].segment.ringOut=this;this.poly=null}return k(qe,null,[{key:"factory",value:function(Te){for(var Ne=[],rt=0,xt=Te.length;rt<xt;rt++){var gt=Te[rt];if(gt.isInResult()&&!gt.ringOut){for(var on=null,Qt=gt.leftSE,Gt=gt.rightSE,Vn=[Qt],un=Qt.point,an=[];on=Qt,Vn.push(Qt=Gt),Qt.point!==un;)for(;;){var cn=Qt.getAvailableLinkedEvents();if(0===cn.length){var _i=Vn[0].point,vi=Vn[Vn.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(_i.x,",")+" ".concat(_i.y,"]. Last matching segment found ends at")+" [".concat(vi.x,", ").concat(vi.y,"]."))}if(1===cn.length){Gt=cn[0].otherSE;break}for(var qn=null,Pi=0,ci=an.length;Pi<ci;Pi++)if(an[Pi].point===Qt.point){qn=Pi;break}if(null===qn){an.push({index:Vn.length,point:Qt.point});var Zi=Qt.getLeftmostComparator(on);Gt=cn.sort(Zi)[0].otherSE;break}var Ei=an.splice(qn)[0],Mi=Vn.splice(Ei.index);Mi.unshift(Mi[0].otherSE),Ne.push(new qe(Mi.reverse()))}Ne.push(new qe(Vn))}}return Ne}}]),k(qe,[{key:"getGeom",value:function(){for(var Te=this.events[0].point,Ne=[Te],rt=1,xt=this.events.length-1;rt<xt;rt++){var gt=this.events[rt].point;0!==q(gt,Te,this.events[rt+1].point)&&(Ne.push(gt),Te=gt)}if(1===Ne.length)return null;0===q(Ne[0],Te,Ne[1])&&Ne.shift(),Ne.push(Ne[0]);for(var Vn=this.isExteriorRing()?1:-1,un=this.isExteriorRing()?0:Ne.length-1,an=this.isExteriorRing()?Ne.length:-1,cn=[],_i=un;_i!=an;_i+=Vn)cn.push([Ne[_i].x,Ne[_i].y]);return cn}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var Te=this.enclosingRing();this._isExteriorRing=!Te||!Te.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var Te=this.events[0],Ne=1,rt=this.events.length;Ne<rt;Ne++){var xt=this.events[Ne];ee.compare(Te,xt)>0&&(Te=xt)}for(var gt=Te.segment.prevInResult(),on=gt?gt.prevInResult():null;;){if(!gt)return null;if(!on)return gt.ringOut;if(on.ringOut!==gt.ringOut)return on.ringOut.enclosingRing()!==gt.ringOut?gt.ringOut:gt.ringOut.enclosingRing();gt=on.prevInResult(),on=gt?gt.prevInResult():null}}}]),qe}(),_e=function(){function qe(Oe){y(this,qe),this.exteriorRing=Oe,Oe.poly=this,this.interiorRings=[]}return k(qe,[{key:"addInterior",value:function(Te){this.interiorRings.push(Te),Te.poly=this}},{key:"getGeom",value:function(){var Te=[this.exteriorRing.getGeom()];if(null===Te[0])return null;for(var Ne=0,rt=this.interiorRings.length;Ne<rt;Ne++){var xt=this.interiorRings[Ne].getGeom();null!==xt&&Te.push(xt)}return Te}}]),qe}(),Fe=function(){function qe(Oe){y(this,qe),this.rings=Oe,this.polys=this._composePolys(Oe)}return k(qe,[{key:"getGeom",value:function(){for(var Te=[],Ne=0,rt=this.polys.length;Ne<rt;Ne++){var xt=this.polys[Ne].getGeom();null!==xt&&Te.push(xt)}return Te}},{key:"_composePolys",value:function(Te){for(var Ne=[],rt=0,xt=Te.length;rt<xt;rt++){var gt=Te[rt];if(!gt.poly)if(gt.isExteriorRing())Ne.push(new _e(gt));else{var on=gt.enclosingRing();on.poly||Ne.push(new _e(on)),on.poly.addInterior(gt)}}return Ne}}]),qe}(),Ue=function(){function qe(Oe){var Te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe.compare;y(this,qe),this.queue=Oe,this.tree=new f(Te),this.segments=[]}return k(qe,[{key:"process",value:function(Te){var Ne=Te.segment,rt=[];if(Te.consumedBy)return Te.isLeft?this.queue.remove(Te.otherSE):this.tree.remove(Ne),rt;var xt=Te.isLeft?this.tree.insert(Ne):this.tree.find(Ne);if(!xt)throw new Error("Unable to find segment #".concat(Ne.id," ")+"[".concat(Ne.leftSE.point.x,", ").concat(Ne.leftSE.point.y,"] -> ")+"[".concat(Ne.rightSE.point.x,", ").concat(Ne.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var gt=xt,on=xt,Qt=void 0,Gt=void 0;void 0===Qt;)null===(gt=this.tree.prev(gt))?Qt=null:void 0===gt.key.consumedBy&&(Qt=gt.key);for(;void 0===Gt;)null===(on=this.tree.next(on))?Gt=null:void 0===on.key.consumedBy&&(Gt=on.key);if(Te.isLeft){var Vn=null;if(Qt){var un=Qt.getIntersection(Ne);if(null!==un&&(Ne.isAnEndpoint(un)||(Vn=un),!Qt.isAnEndpoint(un)))for(var an=this._splitSafely(Qt,un),cn=0,_i=an.length;cn<_i;cn++)rt.push(an[cn])}var vi=null;if(Gt){var qn=Gt.getIntersection(Ne);if(null!==qn&&(Ne.isAnEndpoint(qn)||(vi=qn),!Gt.isAnEndpoint(qn)))for(var Pi=this._splitSafely(Gt,qn),ci=0,Ei=Pi.length;ci<Ei;ci++)rt.push(Pi[ci])}if(null!==Vn||null!==vi){var Mi;Mi=null===Vn?vi:null===vi||ee.comparePoints(Vn,vi)<=0?Vn:vi,this.queue.remove(Ne.rightSE),rt.push(Ne.rightSE);for(var ji=Ne.split(Mi),$i=0,so=ji.length;$i<so;$i++)rt.push(ji[$i])}rt.length>0?(this.tree.remove(Ne),rt.push(Te)):(this.segments.push(Ne),Ne.prev=Qt)}else{if(Qt&&Gt){var Zn=Qt.getIntersection(Gt);if(null!==Zn){if(!Qt.isAnEndpoint(Zn))for(var zt=this._splitSafely(Qt,Zn),Je=0,nt=zt.length;Je<nt;Je++)rt.push(zt[Je]);if(!Gt.isAnEndpoint(Zn))for(var Se=this._splitSafely(Gt,Zn),Qe=0,ot=Se.length;Qe<ot;Qe++)rt.push(Se[Qe])}}this.tree.remove(Ne)}return rt}},{key:"_splitSafely",value:function(Te,Ne){this.tree.remove(Te);var rt=Te.rightSE;this.queue.remove(rt);var xt=Te.split(Ne);return xt.push(rt),void 0===Te.consumedBy&&this.tree.insert(Te),xt}}]),qe}(),Ge=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,$e=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Pe=new(function(){function qe(){y(this,qe)}return k(qe,[{key:"run",value:function(Te,Ne,rt){Pe.type=Te,oe.reset();for(var xt=[new ye(Ne,!0)],gt=0,on=rt.length;gt<on;gt++)xt.push(new ye(rt[gt],!1));if(Pe.numMultiPolys=xt.length,"difference"===Pe.type)for(var Qt=xt[0],Gt=1;Gt<xt.length;)null!==U(xt[Gt].bbox,Qt.bbox)?Gt++:xt.splice(Gt,1);if("intersection"===Pe.type)for(var Vn=0,un=xt.length;Vn<un;Vn++)for(var an=xt[Vn],cn=Vn+1,_i=xt.length;cn<_i;cn++)if(null===U(an.bbox,xt[cn].bbox))return[];for(var vi=new f(ee.compare),qn=0,Pi=xt.length;qn<Pi;qn++)for(var ci=xt[qn].getSweepEvents(),Ei=0,Mi=ci.length;Ei<Mi;Ei++)if(vi.insert(ci[Ei]),vi.size>Ge)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Zi=new Ue(vi),ji=vi.size,$i=vi.pop();$i;){var so=$i.key;if(vi.size===ji){var Zn=so.segment;throw new Error("Unable to pop() ".concat(so.isLeft?"left":"right"," SweepEvent ")+"[".concat(so.point.x,", ").concat(so.point.y,"] from segment #").concat(Zn.id," ")+"[".concat(Zn.leftSE.point.x,", ").concat(Zn.leftSE.point.y,"] -> ")+"[".concat(Zn.rightSE.point.x,", ").concat(Zn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(vi.size>Ge)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Zi.segments.length>$e)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var zt=Zi.process(so),Je=0,nt=zt.length;Je<nt;Je++){var Se=zt[Je];void 0===Se.consumedBy&&vi.insert(Se)}ji=vi.size,$i=vi.pop()}oe.reset();var Qe=Me.factory(Zi.segments);return new Fe(Qe).getGeom()}}]),qe}());return{union:function(Oe){for(var Te=arguments.length,Ne=new Array(Te>1?Te-1:0),rt=1;rt<Te;rt++)Ne[rt-1]=arguments[rt];return Pe.run("union",Oe,Ne)},intersection:function(Oe){for(var Te=arguments.length,Ne=new Array(Te>1?Te-1:0),rt=1;rt<Te;rt++)Ne[rt-1]=arguments[rt];return Pe.run("intersection",Oe,Ne)},xor:function(Oe){for(var Te=arguments.length,Ne=new Array(Te>1?Te-1:0),rt=1;rt<Te;rt++)Ne[rt-1]=arguments[rt];return Pe.run("xor",Oe,Ne)},difference:function(Oe){for(var Te=arguments.length,Ne=new Array(Te>1?Te-1:0),rt=1;rt<Te;rt++)Ne[rt-1]=arguments[rt];return Pe.run("difference",Oe,Ne)}}}()},48631:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Wayfinding=void 0;var k=function I(B,U){if(!U&&B&&B.__esModule)return B;if(null===B||"object"!==u(B)&&"function"!=typeof B)return{default:B};var F=G(U);if(F&&F.has(B))return F.get(B);var j={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in B)if("default"!==Q&&Object.prototype.hasOwnProperty.call(B,Q)){var $=P?Object.getOwnPropertyDescriptor(B,Q):null;$&&($.get||$.set)?Object.defineProperty(j,Q,$):j[Q]=B[Q]}return j.default=B,F&&F.set(B,j),j}(w(65627));function G(B){if("function"!=typeof WeakMap)return null;var U=new WeakMap,F=new WeakMap;return(G=function(P){return P?F:U})(B)}function u(B){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(U){return typeof U}:function(U){return U&&"function"==typeof Symbol&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(B)}function h(B){return function f(B){if(Array.isArray(B))return _(B)}(B)||function m(B){if(typeof Symbol<"u"&&null!=B[Symbol.iterator]||null!=B["@@iterator"])return Array.from(B)}(B)||function v(B,U){if(B){if("string"==typeof B)return _(B,U);var F=Object.prototype.toString.call(B).slice(8,-1);if("Object"===F&&B.constructor&&(F=B.constructor.name),"Map"===F||"Set"===F)return Array.from(B);if("Arguments"===F||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return _(B,U)}}(B)||function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(B,U){(null==U||U>B.length)&&(U=B.length);for(var F=0,j=new Array(U);F<U;F++)j[F]=B[F];return j}function M(B,U){for(var F=0;F<U.length;F++){var j=U[F];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(B,j.key,j)}}function R(B,U,F){return U in B?Object.defineProperty(B,U,{value:F,enumerable:!0,configurable:!0,writable:!0}):B[U]=F,B}y.Wayfinding=function(){function B(U){var F=this;(function S(B,U){if(!(B instanceof U))throw new TypeError("Cannot call a class as a function")})(this,B),R(this,"configuration",{avoidElevators:!1,avoidEscalators:!1,avoidStaircases:!1,avoidRamps:!1,avoidNarrowPaths:!1,avoidRevolvingDoors:!1,avoidTicketGates:!1,avoidBarriers:!1,avoidHills:!1}),R(this,"POI_TYPE",{ELEVATOR:"elevator",ESCALATOR:"escalator",STAIRCASE:"staircase",RAMP:"ramp",HILL:"hill",NARROW_PATH:"narrow_path",REVOLVING_DOOR:"door",TICKET_GATE:"ticket_gate",BARRIER:"barrier"}),R(this,"ACCESSIBILITY_POI_TYPE",["door","ticket_gate"]),R(this,"LEVEL_CHANGER_TYPE",["elevator","escalator","staircase","ramp","hill"]),R(this,"PATH_TYPE","path"),R(this,"LINE_STRING_TYPE","LineString"),R(this,"DIRECTION_UP","up"),R(this,"DIRECTION_DOWN","down"),R(this,"ROUTABLE_TYPE",["MultiPolygon","Polygon"]),R(this,"UNIT_TYPE","meters"),R(this,"pathFixDistance",1),R(this,"wallOffsetDistance",.5),R(this,"walkingSpeed",1.4),R(this,"floorHeight",4.5),R(this,"elevatorSpeed",.9),R(this,"elevatorWaiting",55),R(this,"escalatorSpeed",.24),R(this,"staircasesSpeed",.3);var j=U.features,P=this.extractMinMaxLevel(j),Q=P.minLevel,$=P.maxLevel;if(void 0===Q)throw"No feature with level was supplied!";for(var oe=j.filter(function(ne){return ne.properties.routable&&F.ROUTABLE_TYPE.includes(ne.geometry.type)}),X=new Map,ie=function(Ce){var xe=oe.filter(function(ue){return ue.properties.level===Ce});X.set(Ce,k.featureCollection(void 0!==xe?xe:[]))},q=Q;q<=$;q++)ie(q);this.floorList=X,this.corridors=j.filter(function(ne){return ne.properties.class===F.PATH_TYPE&&ne.geometry.type===F.LINE_STRING_TYPE});var se=j.filter(function(ne){return F.LEVEL_CHANGER_TYPE.includes(ne.properties.type)});se.forEach(function(ne){void 0===ne.id&&(ne.id=ne.properties.id)}),se.forEach(function(ne){if(void 0===ne.properties.levels&&(ne.properties.levels=[],void 0!==ne.properties.level_min&&void 0!==ne.properties.level_max))for(var Ce=ne.properties.level_min;Ce<=ne.properties.level_max;Ce++)ne.properties.levels.push(Ce)}),this.levelChangerList=se,this.accessibilityPoi=j.filter(function(ne){return F.ACCESSIBILITY_POI_TYPE.includes(ne.properties.type)}),this.rebuildData()}return function D(B,U,F){U&&M(B.prototype,U),F&&M(B,F),Object.defineProperty(B,"prototype",{writable:!1})}(B,[{key:"setConfiguration",value:function(F){var j=this,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object.keys(F).forEach(function(Q){j.configuration.hasOwnProperty(Q)&&(j.configuration[Q]=F[Q])}),this.pathFixDistance=P}},{key:"extractMinMaxLevel",value:function(F){var j=void 0,P=void 0;return F.forEach(function(Q){var $=Q.properties.level;(void 0===j||$<j)&&(j=$),(void 0===P||P<$)&&(P=$),void 0!==Q.properties.levels&&Q.properties.levels.forEach(function(oe){(void 0===j||oe<j)&&(j=oe),(void 0===P||P<oe)&&(P=oe)})}),{minLevel:j,maxLevel:P}}},{key:"rebuildData",value:function(){var F=this,j=new Map;this.floorList.forEach(function(ce,ae){var ye=[],Me=[],_e=[];ce.features.forEach(function(Fe){k.flatten(k.polygonToLine(Fe)).features.map(function(Ge){return Ge.geometry}).forEach(function(Ge){for(var $e,He,Pe=0;Pe<Ge.coordinates.length-1;Pe++){var je=void 0;0===Pe?(($e=k.point(Ge.coordinates[Pe])).properties.level=ae,$e.properties.neighbours=[],$e.properties.walkableAreaId=Fe.id,je=$e):je=He,Pe===Ge.coordinates.length-2?He=$e:((He=k.point(Ge.coordinates[Pe+1])).properties.level=ae,He.properties.neighbours=[],He.properties.walkableAreaId=Fe.id),je.properties.neighbours.push(He),He.properties.neighbours.push(je),ye.push(je),Me.push([je,He])}}),_e=_e.concat(k.flatten(Fe).features)}),j.set(ae,{areas:_e,points:ye,walls:Me,wallFeatures:Me.map(function(Fe){return k.lineString([Fe[0].geometry.coordinates,Fe[1].geometry.coordinates])})})}),this.bearingCache=new Map,this.floorData=j,this.floorData.forEach(function(ce,ae){F.accessibilityPoi.filter(function(Me){return ae===Me.properties.level}).filter(function(Me){return ce.areas.filter(function(_e){return k.booleanContains(_e,Me)}).length>0}).forEach(function(Me){var _e=[k.destination(Me.geometry.coordinates,Me.properties.radius+F.wallOffsetDistance,0,{units:F.UNIT_TYPE}),k.destination(Me.geometry.coordinates,Me.properties.radius+F.wallOffsetDistance,60,{units:F.UNIT_TYPE}),k.destination(Me.geometry.coordinates,Me.properties.radius+F.wallOffsetDistance,120,{units:F.UNIT_TYPE}),k.destination(Me.geometry.coordinates,Me.properties.radius+F.wallOffsetDistance,180,{units:F.UNIT_TYPE}),k.destination(Me.geometry.coordinates,Me.properties.radius+F.wallOffsetDistance,-120,{units:F.UNIT_TYPE}),k.destination(Me.geometry.coordinates,Me.properties.radius+F.wallOffsetDistance,-60,{units:F.UNIT_TYPE})].filter(function(Fe){return ce.areas.filter(function(Ue){return k.booleanContains(Ue,Fe)}).length>0});_e.forEach(function(Fe){Fe.properties.level=ae,Fe.properties.isDetourPoint=!0}),ce.points=ce.points.concat(_e),F.detourPointList=_e})});var P=[],Q=[];this.corridors.forEach(function(ce,ae){for(var ye=ce.geometry.coordinates,Me=null,_e=0;_e<ye.length-1;_e++){var Fe=void 0;null!=Me?Fe=Me:((Fe=k.point(ye[_e])).properties.neighbours=[],Fe.properties.level=ce.properties.level);var Ue=k.point(ye[_e+1]);Ue.properties.level=ce.properties.level,Ue.properties.neighbours=[];var Ge=F._checkTimeBased(ce)&&F._checkAvailablePath(ce),$e=void 0===ce.properties.bidirectional||!0===ce.properties.bidirectional,He=void 0!==ce.properties.swapDirection&&!0===ce.properties.swapDirection;Ge&&(($e||!He)&&Fe.properties.neighbours.push(Ue),($e||He)&&Ue.properties.neighbours.push(Fe));var Pe=k.lineString([Fe.geometry.coordinates,Ue.geometry.coordinates]);Pe.properties.level=ce.properties.level,Pe.properties.isAvailableNow=Ge,Pe.properties.bidirectional=$e,Pe.properties.swapDirection=He,!0==(!0===ce.properties.narrowPath)&&(Fe.properties.narrowPath=!0,Ue.properties.narrowPath=!0,Pe.properties.narrowPath=!0),!0==(!0===ce.properties.ramp)&&(Fe.properties.ramp=!0,Ue.properties.ramp=!0,Pe.properties.ramp=!0),!0==(!0===ce.properties.ramp)&&(Fe.properties.hill=!0,Ue.properties.hill=!0,Pe.properties.hill=!0),P.push([Fe,Ue]),Q.push(Pe),Me=Ue}});var $=[],oe=new Map,X=0;for(X=0;X<P.length;){var ie=P[X],q=Q[X];oe.has(X)||oe.set(X,[]);for(var se=X+1;se<P.length;se++){oe.has(se)||oe.set(se,[]);var ne=P[se];if(q.properties.level===Q[se].properties.level&&!ne.includes(ie[0])&&!ne.includes(ie[1])){var Ce=Q[se],xe=k.lineIntersect(q,Ce).features;if(xe.length>0){var ue=xe[0];ue.properties.level=ie[0].properties.level,ue.properties.isCorridorPoint=!0,(q.properties.narrowPath||Ce.properties.narrowPath)&&(ue.properties.narrowPath=!0),(q.properties.ramp||Ce.properties.ramp)&&(ue.properties.ramp=!0),(q.properties.hill||Ce.properties.hill)&&(ue.properties.hill=!0),oe.get(X).push(ue),oe.get(se).push(ue),$.push(ue)}}}X++}X=0;for(var fe=function(){var ae=P[X],ye=Q[X],Me=ae[0],_e=ae[1],Fe=oe.get(X);Fe.sort(function(Ue,Ge){return F._comparePointsByDistanceFromReference(Me,Ue,Ge)}),Fe?(Fe.forEach(function(Ue){F._setNeighbourhoodBasedOnCorridorDirectionality(ye,Me,_e,Ue);var He=void 0!==ye.properties.swapDirection&&!0===ye.properties.swapDirection;if(ye.properties.isAvailableNow)if(void 0===ye.properties.bidirectional||!0===ye.properties.bidirectional)Ue.properties.neighbours=Ue.properties.neighbours.concat(Fe.filter(function(tt){return tt!==Ue}));else if(He){var ht,Re=Fe.slice(0,Fe.indexOf(Ue));(ht=Ue.properties.neighbours).push.apply(ht,h(Re))}else{var Pe,je=Fe.slice(Fe.indexOf(Ue));(Pe=Ue.properties.neighbours).push.apply(Pe,h(je))}}),Q[X].properties.intersectionPointList=Fe):Q[X].properties.intersectionPointList=[],X++};X<P.length;)fe();var ee=[];X=0;for(var de=function(){var ae=P[X],ye=Q[X],Me=[],_e=F.floorData.get(ae[0].properties.level).walls;if(F.floorData.get(ae[0].properties.level).wallFeatures.forEach(function($e,He){var Pe=k.lineIntersect(ye,$e).features;if(Pe.length>0){var je=Pe[0];je.properties.level=ae[0].properties.level,je.properties.neighbours=[],je.properties.bordersArea=!0,je.properties.walkableAreaId=_e[0][0].properties.walkableAreaId,ye.properties.narrowPath&&(je.properties.narrowPath=!0),ye.properties.ramp&&(je.properties.ramp=!0),ye.properties.hill&&(je.properties.hill=!0);var ht=F._distance(ae[0],je);Me.push({point:je,distance:ht,wallIndex:He})}}),Me.length>0){Me.sort(function($e,He){return $e.distance-He.distance});var Ue=ae[0];Me.forEach(function($e,He){var Pe;Ue.properties.neighbours.push($e.point),_e[$e.wallIndex][0].properties.neighbours.push($e.point),_e[$e.wallIndex][1].properties.neighbours.push($e.point),$e.point.properties.neighbours.push(Ue,_e[$e.wallIndex][0],_e[$e.wallIndex][1]),(Pe=$e.point.properties.neighbours).push.apply(Pe,h(Q[X].properties.intersectionPointList)),Q[X].properties.intersectionPointList.forEach(function(je){return je.properties.neighbours.push($e.point)}),Ue=$e.point,Q[X].properties.intersectionPointList.push($e.point)}),k.lineString([Ue.geometry.coordinates,ae[1].geometry.coordinates]).properties.level=Ue.properties.level,ae[1].properties.neighbours.push(Ue),Ue.properties.neighbours.push(ae[1]),ee.push.apply(ee,h(Me.map(function($e){return $e.point})))}X++};X<P.length;)de();ee.forEach(function(ce){F.floorData.get(ce.properties.level).points.push(ce)}),ee.forEach(function(ce){var ae,ye=F._findNeighbours(ce,null,null,F.floorData.get(ce.properties.level).points);(ae=ce.properties.neighbours).push.apply(ae,h(ye))}),this.corridorLinePointPairs=P,this.corridorLineFeatures=Q,this.corridorLinePoints=[],this.corridorLinePointPairs.forEach(function(ce){ce[0].properties.isCorridorPoint=!0,ce[1].properties.isCorridorPoint=!0,F.corridorLinePoints.includes(ce[0])||F.corridorLinePoints.push(ce[0]),F.corridorLinePoints.includes(ce[1])||F.corridorLinePoints.push(ce[1])}),this.corridorLinePoints=this.corridorLinePoints.concat($);var pe=new Map;this.levelChangerList.forEach(function(ce){if(void 0!==ce.properties.group){var ae=ce.properties.group;pe.has(ae)||pe.set(ae,[]),pe.get(ae).push(ce)}else pe.set(ce.id,[ce]);ce.properties.fixedPointMap=new Map,ce.properties.levels.forEach(function(Me){var _e=F._copyPoint(ce);_e.properties.level=Me;var Fe=F._getFixPointInArea(_e);Fe.id=ce.id,Fe.properties.amenity=ce.properties.amenity,Fe.properties.direction=ce.properties.direction,Fe.properties.id=ce.properties.id,Fe.properties.level=Me,Fe.properties.type=ce.properties.type,void 0===Fe.properties.neighbours&&(Fe.properties.neighbours=[]),!(F._distance(_e,Fe)>5)&&(ce.properties.fixedPointMap.set(Me,Fe),Fe.properties.onCorridor&&void 0!==Fe.properties.neighboursLeadingTo&&(Fe.properties.neighboursLeadingTo.forEach(function(Ue){void 0===Ue.properties.neighbours&&(Ue.properties.neighbours=[]),Ue.properties.neighbours.push(Fe)}),F.corridorLineFeatures[Fe.properties.corridorIndex].properties.intersectionPointList.push(Fe)))})}),pe.forEach(function(ce,ae){var ye=ce.map(function(_e){return _e.properties.direction}).find(function(_e){return void 0!==_e}),Me=[];ce.forEach(function(_e){Me.push.apply(Me,h(_e.properties.fixedPointMap.values()))}),Me.forEach(function(_e){var Fe;if(null==_e.properties.neighbours&&(_e.properties.neighbours=[]),ye===F.DIRECTION_UP)(Fe=_e.properties.neighbours).push.apply(Fe,h(Me.filter(function($e){return $e.properties.level>_e.properties.level})));else if(ye===F.DIRECTION_DOWN){var Ue;(Ue=_e.properties.neighbours).push.apply(Ue,h(Me.filter(function($e){return $e.properties.level<_e.properties.level})))}else{var Ge;(Ge=_e.properties.neighbours).push.apply(Ge,h(Me.filter(function($e){return $e.properties.level!==_e.properties.level})))}})})}},{key:"_removeItemFromList",value:function(F,j){var P=F.indexOf(j);P>=0&&F.splice(P,1)}},{key:"load",value:function(F,j){var P=this;this.neighbourMap=F,this.rebuildData(),this.wallOffsets=j,this.wallOffsetLineList=[],this._getPointList().forEach(function(Q,$){var oe=P.wallOffsets[$];if(oe){var X=k.lineString([Q.geometry.coordinates,oe.geometry.coordinates]);X.properties.level=Q.properties.level,P.wallOffsetLineList.push(X)}})}},{key:"_isPointOnLevel",value:function(F,j){return void 0!==F.properties.fixedPointMap?F.properties.fixedPointMap.has(j):F.properties.level===j}},{key:"_getPointList",value:function(){var F=[];return this.floorData.forEach(function(j,P){F=F.concat(j.points)}),this.levelChangerList.forEach(function(j){var P;return(P=F).push.apply(P,h(j.properties.fixedPointMap.values()))}),F=(F=F.concat()).concat(this.corridorLinePoints)}},{key:"preprocess",value:function(){return{neighbourhood:this._generateNeighbourhoodMap(),wallOffsets:this._generateWallOffsets()}}},{key:"_generateNeighbourhoodMap",value:function(){var F=this,j=this._getPointList(),P={};return this.floorData.forEach(function(Q,$){var oe={},X=Q.points.concat(F.levelChangerList.filter(function(ie){return F._isPointOnLevel(ie,$)}).map(function(ie){return ie.properties.fixedPointMap.get($)}));X.forEach(function(ie){var q=j.indexOf(ie),se=F._unwrapLevelChangerPoint(ie,$),Ce=F._findNeighbours(se,se===ie?null:se,null,X);oe[q]=Ce.map(function(xe){return j.indexOf(xe)})}),P[$]=oe}),this.corridorLinePoints.forEach(function(Q){var X,$=j.indexOf(Q),oe=Q.properties.level,ie=P[oe];if(Q.properties.bordersArea){var q=F.floorData.get(oe).points.concat(F.levelChangerList.filter(function(se){return F._isPointOnLevel(se,oe)})).concat(F.corridorLinePoints.filter(function(se){return se.properties.bordersArea&&F._isPointOnLevel(se,oe)}));(X=F._findNeighbours(Q,Q,null,q)).forEach(function(se){var ne=j.indexOf(se);void 0===ie[ne]&&(ie[ne]=[]),ie[ne].includes($)||ie[ne].push($)})}else X=Q.properties.neighbours;void 0===ie[$]?ie[$]=X.map(function(se){return j.indexOf(se)}):X.forEach(function(se){return ie[$].push(j.indexOf(se))})}),this.neighbourMap=P,P}},{key:"_generateWallOffsets",value:function(){var F=this;this.wallOffsetLineList=[],this.wallOffsets={};var j=this._getPointList();return j.forEach(function(P){if(null!=P.properties.level){var Q=F.floorData.get(P.properties.level).walls.filter(function(ae){return ae.includes(P)});if(0!==Q.length){var oe=Q[1][0]===P?Q[1][1]:Q[1][0],X=k.bearing(P,Q[0][0]===P?Q[0][1]:Q[0][0]),ie=k.bearing(P,oe),q=F._averageBearing(X,ie),se=q>0?q-180:q+180,ne=k.destination(P.geometry.coordinates,.01,q,{units:F.UNIT_TYPE}),Ce=k.destination(P.geometry.coordinates,.01,se,{units:F.UNIT_TYPE}),xe=null;for(var ue in F.floorData.get(P.properties.level).areas){var fe=F.floorData.get(P.properties.level).areas[ue];if(k.booleanContains(fe,ne)){xe=ne;break}if(k.booleanContains(fe,Ce)){xe=Ce;break}}if(null!=xe){var ee=k.destination(P.geometry.coordinates,2*F.wallOffsetDistance,xe===ne?q:se,{units:F.UNIT_TYPE}),de=k.lineString([P.geometry.coordinates,ee.geometry.coordinates]);F.floorData.get(P.properties.level).walls.forEach(function(ae,ye){if(!Q.includes(ae)){var Me=F.floorData.get(P.properties.level).wallFeatures[ye],_e=k.lineIntersect(de,Me);_e.features.length>0&&(ee=k.point(_e.features[0].geometry.coordinates),de=k.lineString([P.geometry.coordinates,ee.geometry.coordinates]))}});var pe=k.midpoint(P.geometry.coordinates,ee.geometry.coordinates);pe.properties.level=P.properties.level,F.wallOffsets[j.indexOf(P)]=pe;var ce=k.lineString([P.geometry.coordinates,pe.geometry.coordinates]);ce.properties.level=P.properties.level,F.wallOffsetLineList.push(ce)}}}}),this.wallOffsets}},{key:"reconstructPath",value:function(F){var j=this,P=[],Q=F;do{if(this._calculateWallOffsetPointList(F,P.length>0?P[P.length-1]:Q).forEach(function(pe){if(Q===F||Q.geometry.coordinates[0]!==pe.geometry.coordinates[0]||Q.geometry.coordinates[1]!==pe.geometry.coordinates[1]){var ce=j._copyPoint(pe);ce.properties.level=F.properties.level,ce.properties.walkableAreaId=F.properties.walkableAreaId,ce.properties.bordersArea=F.properties.bordersArea,P.push(ce),Q=pe}}),F=F.properties.cameFrom,P.length>1e4)throw new Error("Too big route")}while(null!=F);P.reverse();for(var oe=[],X=0;X<P.length-1;X++){var ie=P[X],q=P[X+1];ie.properties.level===q.properties.level&&this._distance(ie,q)<.7&&oe.push(ie)}P=P.filter(function(pe){return!oe.includes(pe)}),oe=[];for(var ne=1;ne<P.length-1;ne++){var Ce=P[ne-1],xe=P[ne],ue=P[ne+1];if(Ce.properties.level===xe.properties.level&&Ce.properties.level===ue.properties.level){var fe=this.bearing(Ce.geometry.coordinates,xe.geometry.coordinates),ee=this.bearing(xe.geometry.coordinates,ue.geometry.coordinates),de=Math.abs(fe-ee);de>Math.PI&&(de-=Math.PI),de<.03488888&&oe.push(xe)}}return P=P.filter(function(pe){return!oe.includes(pe)})}},{key:"_calculateWallOffsetPointList",value:function(F,j){var P=this,Q=this._getPointList(),$=Q.indexOf(F),oe=Q.indexOf(j),X=[],ie=F;$>=0&&this.wallOffsets[$]&&(ie=this.wallOffsets[$]),X.push(ie);var q,se=function(){var Ce=k.lineString([j.geometry.coordinates,ie.geometry.coordinates]);q=[],P.wallOffsetLineList.forEach(function(xe,ue){if(xe.properties.level===F.properties.level&&ue!==oe&&ue!==$){var fe=k.lineIntersect(Ce,xe);if(fe.features.length>0){var ee=P.wallOffsets[ue];ee.properties.distance=P._distance(fe.features[0],ie),ee.properties.offsetIndex=ue,q.push(ee)}}}),q.length>0&&(q.sort(function(xe,ue){return xe.properties.distance-ue.properties.distance}),$=(ie=q[0]).properties.offsetIndex,X.push(ie))};do{se()}while(q.length>0);return X.reverse()}},{key:"_getIntersectingOffsetPoints",value:function(F,j){var P=this;if(F===j||F.properties.level!==j.properties.level)return[];var Q=k.lineString([F.geometry.coordinates,j.geometry.coordinates]),$=[];return this.wallOffsetLineList.forEach(function(oe,X){if(oe.properties.level===F.properties.level&&k.lineIntersect(Q,oe).features.length>0){var ie=P.wallOffsets[X];ie.properties.distance=k.pointToLineDistance(F.geometry.coordinates,oe,{units:P.UNIT_TYPE}),$.push(ie)}}),$.sort(function(oe,X){return X.properties.distance-X.properties.distance}),$}},{key:"clearData",value:function(){this.floorData.forEach(function(F,j){for(var P in F.points){var Q=F.points[P];delete Q.properties.cameFrom,delete Q.properties.gscore,delete Q.properties.fscore}}),this.levelChangerList.forEach(function(F){F.properties.fixedPointMap.forEach(function(j,P){delete j.properties.cameFrom,delete j.properties.gscore,delete j.properties.fscore})}),this.corridorLinePoints.forEach(function(F){delete F.properties.cameFrom,delete F.properties.gscore,delete F.properties.fscore})}},{key:"runAStar",value:function(F,j){var P=this.calculatePath(F,j);if(void 0===P||2!=P.length||this._checkShortPath(P[0],P[1]))return P}},{key:"runAStarWithDetails",value:function(F,j){var P=this.runAStar(F,j),Q=this.calculateDistance(P);return{path:P,distance:Q,duration:this.calculateTime(P,Q)}}},{key:"isPathElevator",value:function(F,j){return F[j].properties.type==this.POI_TYPE.ELEVATOR&&F[j+1].properties.type==this.POI_TYPE.ELEVATOR}},{key:"isPathEscalator",value:function(F,j){return F[j].properties.type==this.POI_TYPE.ESCALATOR&&F[j+1].properties.type==this.POI_TYPE.ESCALATOR}},{key:"isPathStaircase",value:function(F,j){return F[j].properties.type==this.POI_TYPE.STAIRCASE&&F[j+1].properties.type==this.POI_TYPE.STAIRCASE}},{key:"isPathFlat",value:function(F,j){return!this.isPathElevator(F,j)&&!this.isPathEscalator(F,j)&&!this.isPathStaircase(F,j)}},{key:"calculateDistance",value:function(F){var j=this,P=0;return void 0===F||0===F.length||F.forEach(function(Q,$){void 0!==F[$+1]&&(P+=k.distance(F[$],F[$+1],{units:j.UNIT_TYPE}))}),P}},{key:"calculateTime",value:function(F,j){var P=this,Q=j/this.walkingSpeed,$=0,oe=0,X=0;return void 0===F&&(F=[]),F.forEach(function(q,se){if(P.isPathElevator(F,se)){var ne=Math.abs(F[se].properties.level-F[se+1].properties.level);$+=ne*P.floorHeight/P.elevatorSpeed+P.elevatorWaiting}if(P.isPathEscalator(F,se)){var Ce=Math.abs(F[se].properties.level-F[se+1].properties.level),xe=P.floorHeight*P.floorHeight;oe+=Ce*Math.sqrt(xe+xe)/P.escalatorSpeed}if(P.isPathStaircase(F,se)){var ue=Math.abs(F[se].properties.level-F[se+1].properties.level),fe=P.floorHeight*P.floorHeight;X+=ue*Math.sqrt(fe+fe)/P.staircasesSpeed}}),{shortest:Q,elevator:$,escalator:oe,staircase:X,realistic:Q+$+oe+X}}},{key:"calculatePath",value:function(F,j){var P=this;this.clearData(),this.nbLines=[],this.bearingCache=new Map;var Q=this._getFixPointInArea(F,!0),$=this._getFixEndPoint(j,F.properties.level),oe=[Q],X=[];Q.properties.gscore=0,Q.properties.fscore=this._heuristic(Q,$);for(var ie=function(){var ne=P._getMinFScore(oe,X);if(null===ne)return"break";if(ne===$){var Ce=void 0;try{Ce=P.reconstructPath(ne)}catch{return{v:void 0}}return $!==j&&(!$.properties.onCorridor||P._distance($,j)>P.pathFixDistance)&&(j.properties.fixed=!0,Ce.push(j)),Q!==F&&(!Q.properties.onCorridor||P._distance(Q,F)>P.pathFixDistance)&&(F.properties.fixed=!0,Ce.unshift(F)),Ce[Ce.length-1].properties.gscore=ne.properties.gscore,{v:Ce}}X.push(oe.splice(oe.indexOf(ne),1));var xe=P._getNeighbours(ne,Q,$);xe.forEach(function(ue){return P.nbLines.push(k.lineString([ne.geometry.coordinates,ue.geometry.coordinates]))}),xe.forEach(function(ue){if(X.indexOf(ue)<=-1){var fe=ne.properties.gscore+P._distance(ne,ue);fe<(null!=ue.properties.gscore?ue.properties.gscore:1/0)&&(ue.properties.cameFrom=ne,ue.properties.gscore=fe+.2,ue.properties.fscore=fe+P._heuristic(ue,$),oe.indexOf(ue)<0&&oe.push(ue))}})};oe.length>0;){var q=ie();if("break"===q)break;if("object"===u(q))return q.v}}},{key:"_checkIfCrossingTwoPolygon",value:function(F,j){var P=F.properties||{},Q=j.properties||{};return void 0!==Q.walkableAreaId&&void 0!==P.walkableAreaId&&(Q.walkableAreaId!==P.walkableAreaId||void 0===Q.bordersArea)||void 0!==P.walkableAreaId&&void 0===Q.walkableAreaId&&!0!==Q.isCorridorPoint}},{key:"_getNeighbours",value:function(F,j,P){var Q=this,$=[];if(F===j){var oe=this._getPointList().filter(function(ue){return Q._isPointOnLevel(ue,F.properties.level)});$=($=this._findNeighbours(F,j,P,oe)).filter(function(ue){var fe=F.properties.level,ee=Q.configuration.avoidRevolvingDoors&&Q._testAccessibilityPoiNeighbourhood(F,ue,fe,Q.POI_TYPE.REVOLVING_DOOR),de=Q.configuration.avoidTicketGates&&Q._testAccessibilityPoiNeighbourhood(F,ue,fe,Q.POI_TYPE.TICKET_GATE),pe=Q._checkIfCrossingTwoPolygon(F,ue);return!ee&&!de&&!pe})}else{var X=this._getPointList(),ie=X.indexOf(F);if(ie>=0&&this.floorData.forEach(function(ue,fe){var ee=Q.neighbourMap[fe];ee.hasOwnProperty(ie)&&ee[ie].forEach(function(de){var pe=X[de],ce=Q.configuration.avoidRevolvingDoors&&Q._testAccessibilityPoiNeighbourhood(F,pe,fe,Q.POI_TYPE.REVOLVING_DOOR),ae=Q.configuration.avoidTicketGates&&Q._testAccessibilityPoiNeighbourhood(F,pe,fe,Q.POI_TYPE.TICKET_GATE),ye=Q._checkIfCrossingTwoPolygon(F,pe);!$.includes(pe)&&!ce&&!ae&&!ye&&$.push(pe)})}),void 0!==F.properties.level&&F.properties.level===P.properties.level||null!=F.properties.fixedPointMap&&F.properties.fixedPointMap.has(P.properties.level)){var q=this.configuration.avoidRevolvingDoors&&this._testAccessibilityPoiNeighbourhood(F,P,P.properties.level,this.POI_TYPE.REVOLVING_DOOR),se=this.configuration.avoidTicketGates&&this._testAccessibilityPoiNeighbourhood(F,P,P.properties.level,this.POI_TYPE.TICKET_GATE),ne=this._checkIfCrossingTwoPolygon(F,P);if(!q&&!se&&!ne)if(P.properties.onCorridor)(P.properties.neighbours.includes(F)||void 0!==P.properties.neighboursLeadingTo&&P.properties.neighboursLeadingTo.includes(F))&&$.push(P);else{var Ce=this._unwrapLevelChangerPoint(F,P.properties.level),xe=1;(Ce.properties.isCorridorPoint||Ce.properties.onCorridor)&&xe--,this._countIntersections(Ce,P,xe)&&$.push(P)}}}return $.filter(function(ue){return!(Q.configuration.avoidElevators&&ue.properties.type===Q.POI_TYPE.ELEVATOR||Q.configuration.avoidEscalators&&ue.properties.type===Q.POI_TYPE.ESCALATOR||Q.configuration.avoidStaircases&&ue.properties.type===Q.POI_TYPE.STAIRCASE||Q.configuration.avoidNarrowPaths&&ue.properties.narrowPath||Q.configuration.avoidRamps&&ue.properties.ramp||Q.configuration.avoidHills&&ue.properties.hill)})}},{key:"_testAccessibilityPoiNeighbourhood",value:function(F,j,P,Q){var $=this,oe=!1;if(Q===this.POI_TYPE.REVOLVING_DOOR&&this.configuration.avoidRevolvingDoors){var X=k.lineString([F.geometry.coordinates,j.geometry.coordinates]);this.accessibilityPoi.filter(function(q){return q.properties.level===P&&q.properties.type===Q}).forEach(function(q){k.pointToLineDistance(q.geometry.coordinates,X,{units:$.UNIT_TYPE})<=q.properties.radius&&(oe=!0)})}return oe}},{key:"_findNeighbours",value:function(F,j,P,Q){var $=[];if(null!=F.properties.neighbours&&($=h(F.properties.neighbours)),F===j&&F.properties.onCorridor||F.properties.isCorridorPoint&&!F.properties.bordersArea)return P&&P.properties.onCorridor&&j.properties.corridorIndex===P.properties.corridorIndex&&$.push(P),$;var oe=0;P&&this._isPointOnLevel(P,F.properties.level)&&Q.push(P);var X=this._unwrapLevelChangerPoint(F,F.properties.level);for(var ie in Q){var q=Q[ie];if(F!==q&&!($.indexOf(q)>=0)){var se=this._unwrapLevelChangerPoint(q,F.properties.level);if(oe=2,F===j&&oe--,q===j&&oe--,F!==X&&oe--,q!==se&&oe--,(q.properties.isCorridorPoint||q.properties.onCorridor)&&oe--,this._countIntersections(F,se,oe)){var Ce=k.midpoint(F.geometry.coordinates,q.geometry.coordinates);for(var xe in this.floorData.get(F.properties.level).areas){var ue=this.floorData.get(F.properties.level).areas[xe];if(k.booleanContains(ue,Ce)){$.push(q);break}}}}}return $}},{key:"_comparePointLevels",value:function(F,j){if(null==F.properties.levels&&null==j.properties.levels)return F.properties.level===j.properties.level;var P=void 0!==F.properties.fixedPointMap?h(F.properties.fixedPointMap.keys()):[F.properties.level],Q=void 0!==j.properties.fixedPointMap?h(j.properties.fixedPointMap.keys()):[j.properties.level];return P.filter(function($){return Q.includes($)}).length>0}},{key:"_unwrapLevelChangerPoint",value:function(F,j){var P=F.properties.fixedPointMap;return P&&P.get(j)||F}},{key:"_countIntersections",value:function(F,j,P){var Q=F.geometry.coordinates,$=j.geometry.coordinates,oe=this.bearing(Q,$),X=0,ie=[],q=this.floorData.get(F.properties.level).walls,se=this.floorData.get(F.properties.level).wallFeatures;for(var ne in q){var Ce=q[ne],xe=!1,ue=!1;if(F==Ce[0]||F==Ce[1])xe=!0,ue=!0;else{var fe=this.bearing(Q,Ce[0].geometry.coordinates),ee=this.bearing(Q,Ce[1].geometry.coordinates);if(fe>ee){var de=fe;fe=ee,ee=de}ee-fe<Math.PI?fe<=oe&&oe<=ee&&(xe=!0):(fe>=oe||oe>=ee)&&(xe=!0)}if(xe){if(ue)this._testIdenticalPointInList(F,ie)||(ie.push(F),X++);else{var ce=k.lineIntersect(k.lineString([Q,$]),se[ne]).features;ce.length>0&&(this._testIdenticalPointInList(ce[0],ie)||(ie.push(ce[0]),X++))}if(X>P)return!1}}return!0}},{key:"_averageBearing",value:function(F,j){if(F>j){var P=F;F=j,j=P}j-F>180&&(j-=360);var Q=(j+F)/2;return Q<=-180?360+Q:Q}},{key:"toRadians",value:function(F){return F*Math.PI/180}},{key:"bearing",value:function(F,j){var P=this.bearingCache.get(F);if(P){var Q=P.get(j);if(null!=Q)return Q}var $=this.toRadians(F[0]),oe=this.toRadians(F[1]),X=this.toRadians(j[0]),ie=this.toRadians(j[1]),q=Math.cos(ie),se=Math.sin(X-$)*q,ne=Math.cos(oe)*Math.sin(ie)-Math.sin(oe)*q*Math.cos(X-$),Ce=Math.atan2(se,ne);return this._storeBearingCache(F,j,Ce),Ce}},{key:"_storeBearingCache",value:function(F,j,P){var Q=this.bearingCache.get(F);Q||this.bearingCache.set(F,Q=new Map),Q.set(j,P),(Q=this.bearingCache.get(j))||this.bearingCache.set(j,Q=new Map),P<=0?P+=Math.PI:P-=Math.PI,Q.set(F,P)}},{key:"_testIdenticalPointInList",value:function(F,j){return void 0!==j.find(function(P){return P.geometry.coordinates[0]===F.geometry.coordinates[0]&&P.geometry.coordinates[1]===F.geometry.coordinates[1]})}},{key:"_getMinFScore",value:function(F,j){var P=null,Q=1/0;return j.slice(-1),j.slice(-2),F.forEach(function(ie){var q=ie.properties;q.fscore<Q&&(P=ie,Q=q.fscore)}),P}},{key:"_heuristic",value:function(F,j){var P=this;if(this._comparePointLevels(F,j)){var Q=0;return(void 0!==F.properties.levels||void 0!==j.properties.levels)&&(Q=20),this._distance(F,j)+Q}var $=this.levelChangerList.filter(function(X){return X!==F&&X!==j&&P._comparePointLevels(X,F)&&P._comparePointLevels(X,j)}),oe=1/0;return $.forEach(function(X){var ie=P._distance(F,X)+P._distance(X,j)+10;ie<oe&&(oe=ie)}),oe<1/0?oe:2e3}},{key:"_distance",value:function(F,j){var P=0;return j.properties.level!==F.properties.level&&(P=10),k.distance(F,j,{units:this.UNIT_TYPE})+P}},{key:"_getFixEndPoint",value:function(F,j){var P=this.levelChangerList.find(function($){return $.id===F.id});if(void 0!==P&&void 0!==P.properties.fixedPointMap){var Q=void 0;P.properties.fixedPointMap.forEach(function($,oe){(void 0===Q||Math.abs(Q-j)>Math.abs(oe-j))&&(Q=oe)}),(F=this._copyPoint(F)).properties.level=Q}return this._getFixPointInArea(F)}},{key:"_getFixPointInArea",value:function(F){var j=this,P=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Q=this.floorData.get(F.properties.level),$=void 0;if(Q.areas.forEach(function(Pe){k.booleanContains(Pe,F)&&($=F)}),void 0!==$)return $;var oe=null,X=1/0;Q.wallFeatures.forEach(function(Pe){var je=k.pointToLineDistance(F.geometry.coordinates,Pe,{units:j.UNIT_TYPE});je<=X&&(oe=Pe,X=je)});var ne,ie=this.corridorLineFeatures.filter(function(Pe){return Pe.properties.level===F.properties.level}),q=null,se=1/0;if(ie.forEach(function(Pe){var je=j.corridorLineFeatures.indexOf(Pe),ht=k.pointToLineDistance(F.geometry.coordinates,Pe,{units:j.UNIT_TYPE});ht<se&&(q=je,se=ht)}),null===oe&&null===q)return F;if(void 0!==q&&se<X){var Ce=this.corridorLineFeatures[q];(ne=k.nearestPointOnLine(Ce,F)).properties.onCorridor=!0,ne.properties.corridorIndex=q,ne.properties.neighbours||(ne.properties.neighbours=[]);var fe=void 0!==this.corridorLineFeatures[q].properties.swapDirection&&!0===this.corridorLineFeatures[q].properties.swapDirection;if(this.corridorLineFeatures[q].properties.isAvailableNow)if(void 0===this.corridorLineFeatures[q].properties.bidirectional||!0===this.corridorLineFeatures[q].properties.bidirectional){var ee;ne.properties.neighbours.push(this.corridorLinePointPairs[q][0],this.corridorLinePointPairs[q][1]),(ee=ne.properties.neighbours).push.apply(ee,h(Ce.properties.intersectionPointList)),ne.properties.neighboursLeadingTo=[this.corridorLinePointPairs[q][0],this.corridorLinePointPairs[q][1]].concat(h(Ce.properties.intersectionPointList))}else if(fe||P){var Me,_e=this.corridorLinePointPairs[q][1];ne.properties.neighbours.push(_e);var Fe=this._distance(ne,_e),Ue=Ce.properties.intersectionPointList.filter(function(Pe){return j._distance(Pe,_e)<=Fe}),Ge=Ce.properties.intersectionPointList.filter(function(Pe){return j._distance(Pe,_e)>Fe});(Me=ne.properties.neighbours).push.apply(Me,h(Ue)),ne.properties.neighboursLeadingTo=Ge}else{var de,pe=this.corridorLinePointPairs[q][0];ne.properties.neighbours.push(pe);var ce=this._distance(ne,pe),ae=Ce.properties.intersectionPointList.filter(function(Pe){return j._distance(Pe,pe)<ce}),ye=Ce.properties.intersectionPointList.filter(function(Pe){return j._distance(Pe,pe)>=ce});(de=ne.properties.neighbours).push.apply(de,h(ye)),ne.properties.neighboursLeadingTo=ae}}else if(null!==oe){var $e=k.nearestPointOnLine(oe,F),He=k.bearing(F,$e);ne=k.destination(F.geometry.coordinates,X+.05,He,{units:this.UNIT_TYPE})}return ne.properties.level=F.properties.level,ne}},{key:"_copyPoint",value:function(F){var j=k.point([F.geometry.coordinates[0],F.geometry.coordinates[1]]);return void 0!==F.id&&(j.id=F.id),void 0!==F.properties.id&&(j.properties.id=F.properties.id),void 0!==F.properties.amenity&&(j.properties.amenity=F.properties.amenity),void 0!==F.properties.type&&(j.properties.type=F.properties.type),j}},{key:"_setNeighbourhoodBasedOnCorridorDirectionality",value:function(F,j,P,Q){void 0===Q.properties.neighbours&&(Q.properties.neighbours=[]);var X=void 0!==F.properties.swapDirection&&!0===F.properties.swapDirection;F.properties.isAvailableNow&&(void 0===F.properties.bidirectional||!0===F.properties.bidirectional?(Q.properties.neighbours.push(j,P),j.properties.neighbours.push(Q),P.properties.neighbours.push(Q)):X?(P.properties.neighbours.push(Q),Q.properties.neighbours.push(j)):(j.properties.neighbours.push(Q),Q.properties.neighbours.push(P)))}},{key:"_comparePointsByDistanceFromReference",value:function(F,j,P){var Q=k.distance(F,j),$=k.distance(F,P);return Q>$?1:$>Q?-1:0}},{key:"_checkShortPath",value:function(F,j){var P=this._getFixPointInArea(F,!0),Q=this._getFixPointInArea(j,!0);if(P.properties.corridorIndex===Q.properties.corridorIndex){var oe=this.corridorLineFeatures[P.properties.corridorIndex];if(!oe.properties.isAvailableNow)return!1;if(void 0===oe.properties.bidirectional||!0===oe.properties.bidirectional)return!0;var q=oe.geometry.coordinates,se=k.bearing(q[0],q[1]),ne=k.bearing(F,j),Ce=parseInt(se-ne);return void 0!==oe.properties.swapDirection&&oe.properties.swapDirection?0!==Ce:0===Ce}return!0}},{key:"_checkTimeBased",value:function(F){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,P=!0;if(void 0!==F.properties.workingHours){var Q=j.getDay(),$=F.properties.workingHours[Q],ie=60*parseInt(j.getHours())+parseInt(j.getMinutes());if(0===$.length)return!1;var q=$[0].split(":"),Ce=60*parseInt(q[0])+parseInt(q[1]),xe=$[1].split(":"),ee=60*parseInt(xe[0])+parseInt(xe[1]);if(0===Ce&&Ce===ee)return!0;P=ie>=Ce&&ie<=ee}return P}},{key:"_checkAvailablePath",value:function(F){var j=!0;return void 0!==F.properties.available&&(j=F.properties.available),j}}]),B}()},91685:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.uuidv4=y.getBase64FromImage=y.getImageFromBase64=y.kebabize=y.kebabToCamel=y.camelToKebab=y.axios=void 0;var k=w(70357);y.axios=k.default.create({baseURL:"https://api.proximi.fi",timeout:6e4}),y.camelToKebab=function(m){return m.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},y.kebabToCamel=function(m){return m.replace(/-([a-z])/g,function(f){return f[1].toUpperCase()})},y.kebabize=function(m){var f={};return Object.keys(m).forEach(function(_){typeof m[_]<"u"&&(f[y.camelToKebab(_)]=m[_])}),f},y.getImageFromBase64=function(m){return new Promise(function(f,_){var S=new Image;S.src=m,S.onload=function(){return f(S)},S.onerror=function(M){return f(S)}})},y.getBase64FromImage=function(m){return new Promise(function(f,_){var S=new FileReader;S.readAsDataURL(m),S.onload=function(){return f(S.result)},S.onerror=function(M){return _(M)}})},y.uuidv4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(m){return(m!==crypto.getRandomValues(new Uint8Array(1))[0]&15>m/4).toString(16)})}},45557:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(1103);y.default=function I(u){this.id=u.id?u.id:k.v4()+":"+k.v4(),this.organization_id=u.organization_id,this.organization_name=u.organization_name,this.visitor_id=u.visitor_id?u.visitor_id:k.v4(),this.createdAt=u.createdAt?u.createdAt:new Date}},33175:function(Ae,y,w){"use strict";var v,k=this&&this.__extends||(v=function(m,f){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,S){_.__proto__=S}||function(_,S){for(var M in S)Object.prototype.hasOwnProperty.call(S,M)&&(_[M]=S[M])})(m,f)},function(m,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function _(){this.constructor=m}v(m,f),m.prototype=null===f?Object.create(f):(_.prototype=f.prototype,new _)}),G=this&&this.__awaiter||function(v,m,f,_){return new(f||(f=Promise))(function(M,D){function R(U){try{B(_.next(U))}catch(F){D(F)}}function V(U){try{B(_.throw(U))}catch(F){D(F)}}function B(U){U.done?M(U.value):function S(M){return M instanceof f?M:new f(function(D){D(M)})}(U.value).then(R,V)}B((_=_.apply(v,m||[])).next())})},I=this&&this.__generator||function(v,m){var _,S,M,D,f={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return D={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function R(B){return function(U){return function V(B){if(_)throw new TypeError("Generator is already executing.");for(;f;)try{if(_=1,S&&(M=2&B[0]?S.return:B[0]?S.throw||((M=S.return)&&M.call(S),0):S.next)&&!(M=M.call(S,B[1])).done)return M;switch(S=0,M&&(B=[2&B[0],M.value]),B[0]){case 0:case 1:M=B;break;case 4:return f.label++,{value:B[1],done:!1};case 5:f.label++,S=B[1],B=[0];continue;case 7:B=f.ops.pop(),f.trys.pop();continue;default:if(!(M=(M=f.trys).length>0&&M[M.length-1])&&(6===B[0]||2===B[0])){f=0;continue}if(3===B[0]&&(!M||B[1]>M[0]&&B[1]<M[3])){f.label=B[1];break}if(6===B[0]&&f.label<M[1]){f.label=M[1],M=B;break}if(M&&f.label<M[2]){f.label=M[2],f.ops.push(B);break}M[2]&&f.ops.pop(),f.trys.pop();continue}B=m.call(v,f)}catch(U){B=[6,U],S=0}finally{_=M=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,U])}}};Object.defineProperty(y,"__esModule",{value:!0});var u=w(91685),g=function(v){function m(f){var _=v.call(this,f)||this;return _.startLngLat=f.startLngLat,_.startLevel=f.startLevel,_.startSegmentId=f.startSegmentId,_.startSegmentName=f.startSegmentName,_.startGeofenceId=f.startGeofenceId,_.startGeofenceName=f.startGeofenceName,_.destinationFeatureId=f.destinationFeatureId,_.destinationName=f.destinationName,_.destinationLngLat=f.destinationLngLat,_.destinationLevel=f.destinationLevel,_.foundPath=f.foundPath,_.optionAvoidBarrier=f.optionAvoidBarrier,_.optionAvoidElevators=f.optionAvoidElevators,_.optionAvoidEscalators=f.optionAvoidEscalators,_.optionAvoidNarrowPaths=f.optionAvoidNarrowPaths,_.optionAvoidRamps=f.optionAvoidRamps,_.optionAvoidStaircases=f.optionAvoidStaircases,_.optionAvoidTicketGates=f.optionAvoidTicketGates,_.route=f.route,_.rerouted=f.rerouted,_}return k(m,v),m.prototype.save=function(){return G(this,void 0,void 0,function(){var f;return I(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,u.axios.post("v6/geo/wayfinding_logs",[this])];case 1:return _.sent(),[3,3];case 2:return f=_.sent(),console.log("Log saving failed, "+f.message),[3,3];case 3:return[2]}})})},m}(w(45557).default);y.default=g},18160:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.EDIT_FEATURE_DIALOG=y.NEW_FEATURE_DIALOG=y.METADATA_POLYGON_EDITING=y.DEFAULT_FONT=y.FONTS=void 0,y.FONTS=["Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular","Noto Sans Bold","Noto Sans Bold Italic","Noto Sans Italic","Noto Sans Regular","Open Sans Bold","Open Sans Italic","Open Sans Regular","Open Sans Semibold","Open Sans Semibold Italic"],y.DEFAULT_FONT="Klokantech Noto Sans Regular",y.METADATA_POLYGON_EDITING="proximiio:polygon-editing",y.NEW_FEATURE_DIALOG=function(G,I){return'\n    <h1>Add New Feature</h1>\n    <form name="form" id="modal-form" class="modal-form" autocomplete="off" role="main">\n      <div>\n        <label class="label-id">\n          <input type="text" class="text" name="id" placeholder="ID" />\n          <span>ID</span>\n        </label>\n      </div>\n      \n      <div>\n        <label class="label-title">\n          <input type="text" class="text" name="title" placeholder="Title" required />\n          <span class="required">Title</span>\n        </label>\n      </div>\n      \n      <div>\n        <label class="label-level">\n          <input type="number" class="text" name="level" placeholder="Level" value=\''+(I||0)+'\' required />\n          <span class="required">Level</span>\n        </label>\n      </div>\n  \n      <div>\n        <label class="label-lat">\n          <input type="text" class="text" name="lat" placeholder="Latitude" value=\''+G.lngLat.lat+'\' required />\n          <span class="required">Latitude</span>\n        </label>\n      </div>\n      \n      <div>\n        <label class="label-lng">\n          <input type="text" class="text" name="lng" placeholder="Longitude" value=\''+G.lngLat.lng+'\' required />\n          <span class="required">Longitude</span>\n        </label>\n      </div>\n      \n      <div>\n        <label class="label-icon">\n          <input type="file" class="text" name="icon" placeholder="Icon" accept="image/*"/>\n          <span>Icon</span>\n        </label>\n      </div>\n    </form>\n  '},y.EDIT_FEATURE_DIALOG=function(G,I){var u,h,g;return'\n    <h1>Edit Feature</h1>\n    <form name="form" id="modal-form" class="modal-form" autocomplete="off" role="main">\n      <div>\n        <label class="label-id">\n          <input type="text" class="text" name="id" placeholder="ID" value=\''+(null===(u=I?.properties)||void 0===u?void 0:u.id)+'\' readonly style="pointer-events: none;background-color: #E9ECEF"/>\n          <span>ID</span>\n        </label>\n      </div>\n      \n      <div>\n        <label class="label-title">\n          <input type="text" class="text" name="title" placeholder="Title" value=\''+(null===(h=I?.properties)||void 0===h?void 0:h.title)+'\' required />\n          <span class="required">Title</span>\n        </label>\n      </div>\n      \n      <div>\n        <label class="label-level">\n          <input type="number" class="text" name="level" placeholder="Level" value=\''+(null===(g=I?.properties)||void 0===g?void 0:g.level)+'\' required />\n          <span class="required">Level</span>\n        </label>\n      </div>\n  \n      <div>\n        <label class="label-lat">\n          <input type="text" class="text" name="lat" placeholder="Latitude" value=\''+G.lngLat.lat+'\' required />\n          <span class="required">Latitude</span>\n        </label>\n      </div>\n      \n      <div>\n        <label class="label-lng">\n          <input type="text" class="text" name="lng" placeholder="Longitude" value=\''+G.lngLat.lng+'\' required />\n          <span class="required">Longitude</span>\n        </label>\n      </div>\n      \n      <div>\n        <label class="label-icon">\n          <input type="file" class="text" name="icon" placeholder="Icon" accept="image/*"/>\n          <span>Icon</span>\n        </label>\n      </div>\n    </form>\n  '}},90777:function(Ae,y,w){"use strict";var f,k=this&&this.__extends||(f=function(_,S){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,D){M.__proto__=D}||function(M,D){for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&(M[R]=D[R])})(_,S)},function(_,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=_}f(_,S),_.prototype=null===S?Object.create(S):(M.prototype=S.prototype,new M)});Object.defineProperty(y,"__esModule",{value:!0}),y.PolygonTitlesLineLayer=y.PolygonTitlesLayer=y.PolygonIconsLayer=y.PolygonsLayer=void 0;var G=w(7106),I=w(21780),u=w(24691),h=function(f){function _(S){var M=f.call(this,S)||this;return M.id="shop-custom",M.type="fill-extrusion",M.minzoom=S.minZoom,M.maxzoom=S.maxZoom,M.source="main",M.filter=["all",["==",["get","type",["get","_dynamic"]],"shop-custom"],["==",["to-number",["get","level"]],0]],M.paint=new G.PaintProperties({"fill-extrusion-height":["case",["boolean",["feature-state","selected"],!1],S.selectedPolygonHeight,["boolean",["feature-state","hover"],!1],S.hoverPolygonHeight,["boolean",["feature-state","active"],!1],S.hoverPolygonHeight,S.defaultPolygonHeight],"fill-extrusion-base":S.base,"fill-extrusion-opacity":S.opacity,"fill-extrusion-color":["case",["boolean",["feature-state","selected"],!1],S.selectedPolygonColor,["boolean",["feature-state","hover"],!1],S.hoverPolygonColor,["boolean",["feature-state","active"],!1],S.hoverPolygonColor,["boolean",["feature-state","disabled"],!1],"#8a8a8a",S.defaultPolygonColor]}),M}return k(_,f),_}(G.default);y.PolygonsLayer=h;var g=function(f){function _(S){var M=f.call(this,S)||this;return M.id="poi-custom-icons",M.type="symbol",M.minzoom=S.minZoom,M.maxzoom=S.maxZoom,M.source="main",M.filter=["all",["==",["get","type",["get","_dynamic"]],"poi-custom"],["any",["all",["!",["has","icon_only"]],["!",["has","text_only"]]],["all",["has","icon_only"],["==",["get","icon_only"],!0]],["all",["has","icon_only"],["has","text_only"],["==",["get","text_only"],!1],["==",["get","icon_only"],!1]]],["==",["to-number",["get","level"]],0]],M.layout=new u.LayoutProperties({"icon-image":"{amenity}","icon-size":["interpolate",["exponential",.5],["zoom"],17,.1,22,.5],"text-anchor":"top","text-offset":[0,2],"text-font":["Open Sans Regular"],"text-size":14,"symbol-placement":"point","icon-allow-overlap":!0,"text-allow-overlap":!0,visibility:!1}),M}return k(_,f),_}(u.default);y.PolygonIconsLayer=g;var v=function(f){function _(S){var M=f.call(this,S)||this;return M.id="shop-labels",M.type="symbol",M.minzoom=S.minZoom,M.maxzoom=S.maxZoom,M.source="main",M.filter=["all",["==",["get","type",["get","_dynamic"]],"shop-label"],["==",["to-number",["get","level"]],0]],M.layout=new u.LayoutProperties({"symbol-placement":S.symbolPlacement,"text-anchor":"top","text-ignore-placement":!0,"text-allow-overlap":!0,"text-field":"{title}","text-font":["Open Sans Bold"],"text-size":S.labelFontSize,"text-letter-spacing":.005,"text-max-width":7}),M.paint=new u.PaintProperties({"text-color":["case",["boolean",["feature-state","selected"],!1],S.selectedLabelColor,["boolean",["feature-state","hover"],!1],S.hoverLabelColor,S.defaultLabelColor]}),M}return k(_,f),_}(u.default);y.PolygonTitlesLayer=v;var m=function(f){function _(S){var M=f.call(this,S)||this;return M.id="shop-labels-line",M.type="line",M.minzoom=S.minZoom,M.maxzoom=S.maxZoom,M.source="main",M.filter=["all",["==",["get","type",["get","_dynamic"]],"shop-label"],["==",["to-number",["get","level"]],0]],M.layout=new I.LayoutProperties({"line-join":"round","line-cap":"round"}),M.paint=new I.PaintProperties({"line-color":"#000","line-width":3}),M}return k(_,f),_}(I.default);y.PolygonTitlesLineLayer=m},91927:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(97009),G=w(65627),I=function(g){return g.Start="START",g.Finish="FINISH",g.Exit="EXIT",g.Up="UP",g.Down="DOWN",g.Left="LEFT",g.Right="RIGHT",g.Straight="STRAIGHT",g.TurnAround="TURN_AROUND",g.HardLeft="HARD_LEFT",g.SlightLeft="SLIGHT_LEFT",g.HardRight="HARD_RIGHT",g.SlightRight="SLIGHT_RIGHT",g}(I||{}),u=function(g){return g.staircase="STAIRS",g.escalator="ESCALATOR",g.elevator="ELEVATOR",g.ramp="RAMP",g}(u||{}),h=function(){function g(v){this.points=v,this.points&&this.points.length>0&&this.generateStepsFromPoints()}return g.prototype.generateStepsFromPoints=function(){var v=this;this.steps=this.points.map(function(m,f){var _=v.points[f-1]?new k.default(v.points[f-1]):null,S=new k.default(m),M=v.points[f+1]?new k.default(v.points[f+1]):null,D={previousPoint:_,currentPoint:S,nextPoint:M};return{bearingFromLastStep:v.getBearingFromLastStep(D),coordinates:[m.geometry.coordinates[0],m.geometry.coordinates[1]],direction:v.getStepDirection(D),distanceFromLastStep:v.getDistanceFromLastStep(D),level:m.properties.level,levelChangerId:S.isLevelChanger?S.id:null,levelChangerType:S.isLevelChanger?S.properties.type:null,levelChangerDirection:S.isLevelChanger?v.getLevelChangerDirection(D):null,levelChangerDestinationLevel:S.isLevelChanger&&M.properties.level!==S.properties.level?M.properties.level:null,lineStringFeatureFromLastStep:v.getLineStringFeatureFromLastStep(D)}})},g.prototype.getBearingFromLastStep=function(v){var m=v.previousPoint;return m?G.bearing(m.geometry.coordinates,v.currentPoint.geometry.coordinates):0},g.prototype.getStepDirection=function(v){var m=v.previousPoint,f=v.currentPoint,_=v.nextPoint;if(!m)return I.Start;if(!_)return I.Finish;if(f.isLevelChanger&&_.properties.level>f.properties.level)return I.Up+"_"+u[f.properties.type];if(f.isLevelChanger&&_.properties.level<f.properties.level)return I.Down+"_"+u[f.properties.type];if(m.isLevelChanger&&f.isLevelChanger)return I.Exit+"_"+u[f.properties.type];var S=G.bearing(f.geometry.coordinates,_.geometry.coordinates)-G.bearing(m.geometry.coordinates,f.geometry.coordinates),M=this.degreeNormalized(S);return Math.abs(M)<22.5?I.Straight:Math.abs(M)>157.5?I.TurnAround:M<-112.5?I.HardLeft:M<=-67.5?I.Left:M<=-22.5?I.SlightLeft:M>157.5?I.HardLeft:M>=67.5?I.Right:M>=22.5?I.SlightRight:I.Straight},g.prototype.getDistanceFromLastStep=function(v){var m=v.previousPoint,f=v.currentPoint;return!m||m.isLevelChanger&&f.isLevelChanger?0:1e3*G.distance(m.geometry.coordinates,f.geometry.coordinates)},g.prototype.getLevelChangerDirection=function(v){var f=v.currentPoint,_=v.nextPoint;return f.isLevelChanger&&_.properties.level>f.properties.level?I.Up:f.isLevelChanger&&_.properties.level<f.properties.level?I.Down:void 0},g.prototype.getLineStringFeatureFromLastStep=function(v){var m=v.previousPoint,f=v.currentPoint;return m&&f.properties.level===m.properties.level?G.lineString([m.geometry.coordinates,f.geometry.coordinates]):null},g.prototype.degreeNormalized=function(v){return v>180?v-360:v<-180?v+360:v},g}();y.default=h},17981:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.translations=void 0,y.translations={en:{ELEVATOR:"Elevator",ESCALATOR:"Escalator",STAIRS:"Stairs",RAMP:"Ramp",UP:"up",DOWN:"down",TO_FLOOR:"to floor"},fi:{ELEVATOR:"Hissi",ESCALATOR:"Liukuportaat",STAIRS:"Portaat",RAMP:"Luiska",UP:"yl\xf6s",DOWN:"alas",TO_FLOOR:"kerrokseen"},ar:{ELEVATOR:"Elevator",ESCALATOR:"Escalator",STAIRS:"Stairs",RAMP:"Ramp",UP:"up",DOWN:"down",TO_FLOOR:"to floor"},it:{ELEVATOR:"Ascensore",ESCALATOR:"Scala mobile",STAIRS:"Scale",RAMP:"Rampa",UP:"su",DOWN:"gi\xf9",TO_FLOOR:"al piano"}}},77580:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.pulsingDot=y.popupImage=y.floorchangeUpImage=y.floorchangeDownImage=y.person=y.chevron=y.defaultIcon=y.marker=y.routeB=y.routeA=y.door=y.ticketGate=y.staircase=y.poi=y.landmark=y.decision=y.hazard=y.entrance=y.escalator=y.elevator=void 0,y.elevator="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAFfgAABX4BPgLDIQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA+pSURBVHic7Z17fFTlmce/z5kzyWQyl1yogqJQEESoYne9QAhoRC2tq36Uql01Vru6ih9dFfGylUrBov1YqLrqqrS1FuxWi7eq9W6jkASs3YqyyFWRikiEkJnJ5Doz590/kmAucznnzCUJ5PvfnHPe53ny/vKe857nvRxhgNNQVVSkOY0JorSJhqgJgkwENVxBvoAb8ADOzssjQFhBs0AbIl8qpTZqSjYpjA2xAsemkhMagv3316RG+juA3tSvLRmpR6IVSuQUgVOBsRl2sU3BOyLqXac4q9xl9V9k2H5aDAhBwrXFx0YNo1LgPOConDoXtgo8J8qxwlu+b0NOfccNp59oWuUeEZO8ixFVqWByf8XRi3Ugyx2RyB88FU27+yOAnAsSqvVOQGmLlGI2oOXav0kiiDwlKrbYV964OZeOcyZIYJX/n8QhC1HqewxcIXpjIPKKIdxZXBb4IBcOsy5I/doSnx6LLkLJdYAj2/6yRFQJD7S35/30kIo94Ww6ypogSiHBav9VItwDlGTLT46pQ8mtvvLAChFUNhxkRZD6tSUj9WjsV8CsbNgfALyi47yqsHzvrkwbzrgggWr/RQLLAF+mbQ8wQkpxZdH04MpMGs2YIKp2ZEFIhR9DqcpM2RwMiLDMGwz+h3yPtozYy4SR8NrCQ2NR/XlgaibsDT6kRjOi53lnhPekbSldA6Fa7wRlaK8Bo9K1Ncj5TDBmpfvektb7QGiVd5oytBqGxAAYrdBqQ7XesnSM2G4hDauLTtVEvQh40wngACSkiZztnRZYZaewLUFC1cXlBsYbAgV2yifCMOCmJS28Wh1hbqWLay7IS8verj0GF97azPqtMVvljxvv4I/3uhkxzPKNpFk04wxfWWOt1YKWPTWsLpqsMF7OtBgAi5a18sSL7dTtU9z+Xy38qSqSlr2//l/MthgAH22J8df1tsq7laG92LjGc4zVgpYEaVhTNFoT4xXAb9VRKp56PcJ9T37dc1QKrl7cwodb7FfozJN0xoy0/5gcO1Jj5sm63eKlsZjjzYaaIkvPV9PRqipcWkw9B3KY9diSs/rvUa67p7nP8ZZWxQXzmvjiK8OWXW+h8MJ9hQwrsn5nHlYkPH9fIR63/Y6owOGaUivVBkzfe00LEnT6HwS+bSuyJHy606ByfjORaPzzdfsUF93WTHOrvdTRqBEaKxa7yXOmvraLPCesWOxm1IiMJKVPDDX47zd7sSmPwRrfpQJX2o8pgd2w4qLbmmgIJa/s9Vtj/PuiFgx7DYWyyTr3zTP/yLtvXgFlk23fquIxJ1jtu9jMhSkF6RhQkkfSj6kn0RhcsaCZLTvM1fJLqyIs/k2rbX+XnpVnqtc254J8Lj0rvd5dfOSxULX36FRXJRVEKQRDe4SOmR0Z5c7/buXt9xLcpxKwdHkbT79uv+d19/UFzCpL/J8/q0xn8fUu2/ZT4FFoD6W6KKkgjbVFP1QdMz8yylOvR3j4aeu5OKXghl/Y73k5NHh0vjtuz2vsSI1H57txZHcs8/Rgje/SZBck7EKE3vOWqoi2GSjNdFTjzwlRt8/++M6sMp2n7y20XX7LDoPTrw4TDHfE4PcIbz3mYfyonIws1xkRmVBcEQjEO5kwAhXR7iILYgBMHJveSG665ceP0nhikZsCl+B2Cb+7y50rMQAO1ZwsSnQybgsJvusbh0M+BjLa1ejCMGBnnYFho5Hk52EnlRGXUGcL8XlyPvkmohQTiqYHP+19In6F69pPUCorYgBoGhyZmT5+WvSDEF04gfnAj3qf6BNRZ+vYyOCdITJYiKgYRxedEtze/WCfViCa3KIsiLFrj8HCR1upej/K3oAiZvPlbbDi0OAbxULFiU4WXJNv5XbqFAe3AnO6H+zRQjqHYncA+WYs7tpjcPrV9nNNBxojD9V4e5mH4aWmb4WtmhE7svvQbw85jaheiUkxABb/um1IjG7srDO421o2wWVoeo/3kh6CKNTlVqy9VpPeeMWByKvVVuuk5yyd/YI01BQdDzLJiqm9gaxM3hvUfGX9hffb4driY7t+7H+oa4ZRiWS/G1jgEqYe58BXKOzea/D+hlhaHYEjR2hMHt/RB1m3Ocbnu+0bc2hw0rd0Di0VQk2KNR/FaLGZ9reCoYxLgNuhey9L5NxsOy4/XufxRW4OLfla+PVbY1zy42Z2fGmtIjUN7rrWxbUX5qN1tvOYAQ8/3caCR1otp+pHH6bxP/e4mdQtC7C7XvGjBc3UrLOWBLWKUpxLpyACnUOzMbU9aak4+MvNL9cbM1Kj+rceCgv6tsJtnxuUXdZIm4Xb721X5PPjf4ufmV20rJWly80nLwvyhTXLPXzz8L5d1nCzouyHYUv/MMFq6yPcUd1xROmUfTs1AEeU0yxbsMg138+PKwbAUUdonHea+SG9fCdc/4PEncEbLs63NEJ4/kxnXDEAPG5hzoXZGB/piR4xToPOh7oSKrLtcPLRyd81U53vzpiRDryFiZ93fo8krOB4HDcuRWzjc5C0EKMC9vey1CnZ9tfUnPzhGO47xyEhjSlsdVxj3l5TS+Zis4+cCqA11ngOAY7ItrtXU7yzpDrfnZ11Bhs+STxI9eGWGLssvLBmMrY0GB16z1uqKeUcnwtvy19qZ81H8Xsry55t5+8brY0C3rSkJW6XtKVVMXdJiyVb72+I8fgL7XHP1ayL8uSf45/LOFHGa2CkHHjPBG0ROG9uM/c+0cb2LwxiRsfMwBvubeHW+61VIMB762OcMaeJP1VFaGpRhJsVL1RFmHl1E3/72PoQ79ylLdy0pIX1Wzvei7Z/YfDzx9uYfXMz7TlLSDiOlkC1/16BW+wUt9LtPZiw0+0FEPi5hjAuw/EMYZ9xuiiG59Kj7oBSv1DgEsLNivqgQqWRnXC7hNLOqaL1AWV7hiOASEdsHrfQ0toRW9T+1GLLKGS4Dsqbi/0DhpcKd1zl4pxTnBR5v/a3s87gD69FWLq8jZY285X5nTKdGy/JZ8qxeo/UyZqPotz/ZBtvrjWf7ihwCfMq8/nX7zo5/JCv318aQooX343ws1+12kkaWkZQXglW+z/D5goos8+Qf57o4NklhRT7Egu/cXuMc29oMjU9aOEcFzdeknzY5pcr2lj4WOqxieGlwosPeDh6dOIXyfqgYvbNTXywyVxzsfsMAbZrZHkF1IhhWkoxAI75poOVSwrRU7wUX3NBXkoxAOZW5nPV+clTHk4dnllSmFQM6LiNPbe0sEdSNEt4NbIwTbQ7C+e4UorRxeTxDi4/J3ElDisSFlxtfqrnT69J7vvK8/I5NkXapIsSv3CnBd828Wpk8QHi9wjnVljI8kFSQWaf7sTtMh+uxy3MnpnY/2VnW4tt9kxn0hxaJtCAxmwZn3a8jstiovTYcY6Et4bTTrJWgR1l4k8vGzFMY+IYa0nDApdQNjmricbGrAoycay9yXDHJKioSWOs25uUYNqp3disimiRRk1lUZBSv73m/Y3i+OXsLE07JEFrs2MLEseWCQQaNcmiIFbu9z3KJRjIKrBhL1EMrnx7sSUaZMsEChXSlFCXNQ82ycWM2wGx+2cvBKnTNMWm/g5kiA6UYpOGyJb+DmSILmSLhsRyuuvmEMkwNms4GBJkgGBEtc2a7+TGeuDz/g5mCD4rrggEuqYBvdnf0RzsiOrQQOv4of7Sv+EMYQhvQ6cguhH9C2RnH9ohTKEcEquCTkEKZzR/CZl/uJvdNqM7SsHWf8QvZ8fe5s/il9mWwIdde+mgYIN3Wvgr6L5gR8nTmXb0yMo27niolT0N5hrflh0Gl/0k8Wzz2fOaePatiKmZ7YYBz7wVYfa8prjnq9dFqZxvfq+VPQ2KOx5q5dFnMrIbbA9Eqf11vz+DEKjxjxXFVixkFcwO4Ra4hOrfejjqiMQZ1pdWRbhsfrOpyj5zqs7KXyTfyeGCW5p4Y03qcXVNg+U/c3P2jMSp/W2fG5RfETa9VsTiEK5hiIwpnhbYAd1aSNG04CcoWWPFkllaWjsmsiWjPqBMr+kwM+HA7KQEw+jwnYxws8rawh0F1V1iQO81hqJWZMXrEAnRYEWv391+OI2VQE7meg8BQJOheLb7gR6C+E5urFdCxjcrGyI+SvFw0fRgQ/djfZ6yent0iQLrs5+HsISCFt0Z/WXv430E8VQ07Rb4XW7COngR5DeeKU19Bgfj90M1tRTI7tLTg5uIiqk+rQMSCOIvC21TYHpr0yGsIbC09y5AXSR8U2uP5C0Uxc7shXXQ8lnYVXhXopMJBTmkYk/YgLnZiengRZTMPeyEXQlfLZLOFvOXB58ReCfjUR28vOWbHng+2QVJBRFBRXRHJbA33Ug++Tx5XiRRhjceu/YYSdeStLQqS9tGpYptW4rzJtntiERTfp/LVCIxWO37LsjL9BLQyhrDwgLh9Cl6XIetbYo31kYt7U8yaayDcUfG/3/assPg40/NL33SNPjOVCf5ceYhK+DNNVFLK7PiJBdjSjizaFow5UCg6cxuqNp/t4L/7H5saNFnfPoKIov85YEFZsqannHsdQUXgNR0P5bNea6Dld51omCVLxJI2KvqjWlB5AQiMZecJfBR17FzTrW+POBA58ypPepkXUx3nC0V5l+yLf+LN9eWHh4xorXAkYFGxfk3N/G/NhbqH4gUFgjvrfBwxHANYIeOs8zq51lt3XMaq0smGcRWA8XtEfj9K+38eXWEDzbFDtpt/0aN0Pj1AjcnfcsBsE8zYtO9M8IfW7Uz9Nm8zJP7z+Z10bjKM9HQHK+Rg92EBgn/0ByxWd6p4Y12DaS1Abt3RvhjHecUBevTsXMgIPChjnNqOmJAmoIAFJbv3aXr0TOArEyQGBxIjRixMzLxffWMfKLAM6WpzrcrOB0lC4GDqcsVU4rbfdMC0zPxpWjIwsquhuqiCg1+D2pEpm0PLNQuzdAu9s4IvJtJqxn/iEdxeaAqqmsnAa9l2vYA4hWdvBMzLQZkee1jaLX3X5RoDwKjs+knh2xWwrVmkoR2yepnbnzTG1+O6o7JiHqAwf1siSphaVsk74RsigE5XB0criocbuTpNyrFdYD9T6zlliBK7nc4I4/EmyGSDXKerg1VeYcp3XEdoq4HSnLt3yT7UPKg5MUe7FzylzP6LX++72/Ffq3FuEiEy4Gp/RVHT6RGUE9EdMcfS6fsC/VLBP3htDcd39vVLleK2cBROXUubBXFMyjjCd/0xn5fsz8gBOlO/dqSkXokWqFETpGOz76OzbCLbQreEVHvOsVZ5S6r/yLD9tNiwAnSm4aqoiLNaUwQpU00RE0QZCKo4Qg+lHg6NvHcvyteGKQRUWEUIUS+VEpt1JRsUhgbYgWOTSUnNAzocef/B67bg9Z9wGWWAAAAAElFTkSuQmCC",y.escalator="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAFfgAABX4BPgLDIQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA3ZSURBVHic7Z15lBXVncc/v6p6vb9+vciikgQYwaZPXMhBZWmUdsKMBycyJpPjDIIhi+OMh6g5Z2KYxIxBQpRFhWA0alSQQBQScFBBo4GwdANncmYUDwpoRnFklV7e6/Vt9Zs/mu50N72896re0t1+/ntVdX/3V/V999ZdfveWkOHU7SwqMjx2mahRbouWCVIOOlIhWyAPKAA85y4PA40KzQJBRE6q6nuGymHFPhTNNQ+XTKrzp+9u+kfS7UB3avaXjLLCkUoVuU5gBvBXLmfxgcIfRXSXRzw786bWHHfZviMyQpDG6uLLIrY9T+Bm4JKUZi68L7BZ1Fznrag9lNK8e3QnTTTtzrswKllzEJ2ncEW6/OjGWyDPm+Hwbwoqm06lw4GUCxKo9pahxgOqfA0wUp1/jIQReUE0uqSwouFIKjNOmSD1u31fElMWoTqLzBWiOzYi22zhP4qn1v9PKjJMuiA1+0sKrWjkAVQWAGay80sSERVWhUJZPxle+WljMjNKmiCqiH+v73YRHgRKkpVPijmNyr2FFfXrRNBkZJAUQWr2l4yyItGngRuSYT8D2GbhuT2/4uwJtw27Lkj9Xt8tAk8BhW7bzjACqnynaLp/k5tGXRNEq0flBrTxSVTnuWVzICDCU16//y6ZRdAVe24YadyfPyIasbYAU9ywN/CQKsOO3Oy9tvFTx5acGghUe8vUNl4DvuDU1gDnI8G+wWm/xVF/ILDbO01to4rPxAAYrRjVgWrvVCdGEi4hdXuKZhiiWwGvEwcGIQFD5CveafW7E0mckCCBvcUVNvbvBXITST8EaBbDnlk4taE63oRxC1K3p+gKQ3QX4Is37RCjxjCj071TGt+LJ1FcgtTtKxptRO0qkIvi821oonBcRaYVT6s/FmuamF/qupMcI6qbPxMjdgQuNlQ36SGyYk0TsyB+j281MDEhz4Y2VwXqfCtjvTimKstfVTgXlXWJ+/QZoLf6KgIb+ruqX0HOdfz+i7ZggpQRjsD6bSE2bA9x8KhNMKyMGmEwq8Lirn/K5uLhA2VKpYNGwZ7UX8exT0FUkYYq3w5tCzZIGcfP2PzjwmYOHo32eD43W1i9MJevz/T0eD6DedNX4Z/Z1wV9/s0aqou+kWox6huU2fc09SoGQEtQ+efFzWzdFU6hZ67wZX9V4dy+Lui1hAQOeEs1bBwBSl13qw9+uLqVX7wY28Dp8BLh7Y1e8nIyIngmVk7bYSkrrqyv7+lkryVEw8ZiUixGS1BZszUU8/VnapXNfxhwpWSE4eGB3k72KIh/V+E44PakudQLh/5s09QS38zogXd6r9oyF/2X+j2+sT2dsXq83jJ+jGrP55JIrT/+aeqaBNK00xJUqt6K8tEJm1NnbcKRnq/z5gnDioXLx5tcPt7EdN7A8wD3Ad/qfuK8h+7fVTgO1TmOs0yAEl/874LSBNIcO2mz9Lkgm3eEaWmNT9ARJcI3bsri7jnZFOQl/u4SYW79Lt/iouv8H3Y+fp7WYsj3SVO4zmXjzLhvcuqV8bn66p4wV9/awPptobjFADhdqyxbE2TybY386V1H1aVHTO7tfrCLII3780eocJuTXJyQ7YFvzY552IeLhhnMnhF7X+TF18Pcdl8zrbG3G3rl/07Z3HR3E/sO9lLPxcb8ht0Fwzof6CKIHbHmAdlOcnDKD76ZTdno/itpw4BV9+bG3OR94fUw/7qkmYiLbYCmFmXej5o5edZO1ESObVhd+iVd7lzR+YladouCPGHzI/lcPr73qig3W3jqx3n8zZTY2h2/eS3EnUuaiSb83Hrn0zpl0S+dBJx0jdLp+HvVVRVdaaimJH41Ftway9qwPcSCB1uSIkY7hgGHXypkREliL3nTMC4vmFr3DnRqZRm2PQ/JnB6vx4L5N2Ux/6bY3yndWb8txIKHWrCTKAaAbcMb+8LMvTExX221bwUWQudmr8hsV7xzkZNnbbbsCHPwqE3UVsaOMrixwtNnddbOr18N8d2lyRejnY9PJZ6RKrPpLEjdvqLRRNXtpWMJY9uwfG2QR38dpCXYtWn60LNBvnyNxeM/yuu1ilj3aoi7UigGtA2KOqCsZn/JqNLJtZ8YAGaE691xyzmqsOChFn72TOt5YrTz5oEIM77TyKma888//0rqxQAYXuys+26F7evhXCtLhUoXfHKFDdtDrN/Wf0fhxBmbnz3T2uXY2pdD3L0s9WIAXPJ5h+MpYldCxztEr3PqkFuseD62JuRl40x+ckdOx++1W0PcsyI9YuRmC399tdOhP5kBYDRUFQwHPufYKxc4eszmfz/p/4leNs5k68r8jrGvtVtD3L08PWIA/H2lB2++4xbq6MABb6mh6hnvhlNuEEtLpbsYa86JoUlZz9Q/JT5h0Z05/V8YCxHGG2Bf6o4157SG+n6q3cV47j9D3JNGMbI98OR9vbf24se81LAhYwTpi+5iPLMlxPdWpE8MX4HwwtL8mIdvYkL1UgthXHKWL7pHdzF+tSXEvz2SHjGyPDB7hoefLshlZKnrIxvjLFFGum3VTbqL8fTmEN9/NLli5OUIV3/R5KJhBlnnRvcvvMCgbIzB9VdZFBYkZ4hJkZEWqDdDtjw5j+5iPPW7EPeuTJ4YpT7h37+dw9wbPeRmp/6ZCOq1QFIakRgr3cV48rchfrAqeWKUjzXZuCyPz41MX0SkgtciA1dATSo32fJIfkfVsGJtkMVPt/aTKnG+NMHkpUfz8SWpKooDr0WKY3b7o7sYy9cG+enQEAPAK/69vhB/2ZEtrbz3YZQRJUZHNfX4xiA/XN2a1Grq5Z/nc0FRRogBELSABjJkL5IJY/4yz7FsTZAlvxoyJaOdBoM2QTKKISoGQIOl0JBJbi19LnjesLqbZLAYCDRYkkEl5KFngzz47NAUA0DRgKHC6XQ7AskXY2JZZosBIMhpw1AOp9uRleuTK0b5WJNNyzNbDABVDluIHE3XkKm/UbnvsVaef8WF2M5eKB9rsnVVPsOKM1uMNuSohUSPoMkdLjhxxuZsvVIbaBM+0Kjs/u8Im94IO43W6JMJYwaSGAD2EQuTIyRh6vP9j20e3xhk+96Ik9jXhJkwpq3TN3DEADtiHBEA/17fx7g0rx4Mw5KnW3nshWBSwzf7YiCKAXzkq/CPaQ8DesMNi60hmLOwiVUbPhMjXkTbNDDafugOpwZV4dv3N/PmAUfrJRwxsczk9ScGnhgAtvAHOCeIZUd2gLOJ3Jd3h3llT/pWxE4YMzCatr2gpkR3wjlB8q9tPgk42itwxVpXNuVMiIHXmuqKwiHvtMYz0HnBjsqLiRr88LjN233svJBM2qup4a6F4qQeUe149h2CqKHrSLDaeueD9IhRNtpg47IBW021Y9uG0bHTUocgRdP8f0ZlXyIWT/cQhZ5sJpaZ/P6XBQO6ZAAo7O2841zXNYaiCe2JleqRl0FSMgAwYF23351+eOxNQHO8Rr9wYeoiNdreGQO/ZJyjyVZ+1/lAlydZeE1DjQpPxGt1YpmJlYKtBtpLRpF3UIiBKr8omu6v63zsvL+2FYqsUGiJx/DwEuF6x+sj+qZstMHLPx80JQOFFssTeaT78fMEKahsOiWwNt4M7r8jB0+SNLny0kFVTQEgyDMFk5vOmxzsufI39GEgrjGQL15icsc/uL8JRNlog03LB081dY6wRvW80gG9COKbGvhAIeatTdtZfGcO8xJcq90TE8vMQVVNtSPwcPddgNrptXkUCmctEuWTeDIyDFi9MJfl38t1tMTLNOCbs7PY/tjA7oH3wkeNOfmLezvZ593W7/F9XYSNieR6ulZ5aUeY7VVhjhyzOfmp3Wd/JT9XGH2RwczJFrf8rYfysQP1g259IypfLZxev6XX830lTtc2sYMYZ9vEiqBhy5wHnHXVraHJKTMc6ff7XP12sUsn134CehskY+Z9yBBV4dZYvq8b05iHryKwXWCpc7+GKrKkaJo/plnZmAehvDn++0GqEndqaKKwuzBc32urqjsxCyKTCEdz5EaBg4m5NiR5K2qZX5HK2DvZcTfym6tLLw7bkWrg8/GmHWIcs/BMjffzrHGPm+dNrTluYM4C6vq9eOhSa9jRWYl8KzehiQxvRe0hW+WrZNBShgwiYIjc7L228d1EEjsal2jYXVBuG+ZrZMhuQhnAx4YZvSHeL7N1xtFUn/faxnctPJMV3nFiZzAg8LaFZ4oTMcChIAD5FWdPWFZkJpBQgMTgQKrEjs504/vqrkyGF0xuOl14wj8dlUXAQPx+RKJEVVlYOK1+uhtfioYkbHJSt7eo0oD1oBe6bTuz0BOGbczxXlu/y02rroeLFFfU74xYxtXAa27bziC2WWRd5bYYkORtgAJ7vH+nYqwGRicznxRyRIU7Yx2XSoSkBlQVTm94JWKZVyC6ioH9bomo8HAwnDUpmWJACjfKatyZP9LOsu5RZQGQn6p8HeJHZaXpCT/RU4RIMkj5hHVgp/cCtcwFiH6XDNljpQdqUVktWdHVhdc01KQy47RFENT+qdhntNi3iDAfmJIuP7oiVYKuCVvmxtLJtYG0eJCOTLsTqPaWocZ8Vb4GXJLSzIX3Rfktaq8pnN5wNKV59+hOhlGzv2SUFY5Uqsh10hZc4fZXGz5Q+KOI7vKIZ2fe1JrjLtt3RMYJ0p26nUVFhscuEzXKbdEyQcpBRyIUolLQtolnx654jSANiDaiBBA5qarvGSqHFftQNNc8XDKpzp/O++mP/wfhZ//KTP56sQAAAABJRU5ErkJggg==",y.entrance="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAVfElEQVR4nO2da2yU15nH/+e9zNX3GXvswTYQTAAbbAdIG2ySEichJbtZ7a6UzWplqqYfVknVqlVX6YdUimijNl1ppSStyJckYLXeJi1VUEW47G5Ci8EYDMbhYsAXDDg2vt8Ye8bzXs7ZD6/fmXfGlxmPZ+wx4S8dzYwv7zxzfvOc51yfF3ioh3qoh3qoh3qoB0JkuQ2IQWSO57O91sXmeR3+u2VVsgMhCNpIong9n5jhkUXxelmUjECMFcwZCjE8zldmE4tQ6PSjGvZ6ycHEFQhjsdtPCDFWKgeAKykpEUtLSy25ubnm8vJyR3Fx8Vqn07nGYrHkW63WfEEQcjmOS+U4zkIIsXAcZwYASqmfMTZFKZ1SVXVCkqR+n8/3lcfjudfX19fV3Nx8p6GhYay/v99/8+ZNaWBgQIEGw1goDGBYFB9O+wiL07IDmQUED0D48MMPcysrK7+RlZVVbrVat5jN5kc4jkshhJgJIabpRzGKz8AYYzKlVGKMSZRSP6V00uv13h4bG7ve1dV17c9//vOl/fv3DwBQAMjTj0ZIUYFZ0UDCQPAA+I8//ti1c+fO5zIyMr4limIxx3FOnufTOY5Li6edulRV9ciyfF9RlJHx8fEbnZ2dpw8cOHCmpqZmEICEIByj58wJZkUCmQ3EyZMnH9m8efM/2u32XaIobhBFMT/etkUSY4xOTU31eL3ezr6+voZPP/30xJtvvnkLGhQJM71mBpgVBYQErdWDtNDU1FRWWFi4x263V5rN5q0cx2XG055YpSjK2NjYWMvAwMD5U6dOnfz+979/FRoUo9coCMYZMMbYigFi8AoOgHDhwoVNa9eufcFut1eZzeYKQoglnnbES5RS/+joaFNPT0/9F1988flPfvKTmwD8mB3MsnaXZxVjLKQgtGky7du3z9nV1fWvk5OTRyilMlshopTKfX19Xxw7duwH27dv3wwgH0A2gHQANgCm6c84X9d76cVmwuAACAAsly9f/ubIyMivFUW5u8z1G7O8Xm/31atX3//lL3/5dwAeAeAGkAUgBYBl+rPqY6XlF5sJQ9y3b19WZ2fnSz6fr265KzRe6u/vP/XJJ5/8+2OPPVYGoBCat6QBsAIQkSxQWBiMDz74wDU4OPgfiqJ0LnclxluTk5PdDQ0Nv3766ae/CWAtgFwAGdCasKSBEogXH330kXt8fPwdVVXvL3flJUqyLHuuXbtWU1VVVQGgCMEmzI7QuLK8ME6cOFE0MTFxkFI6tdyVlmipqurv6Og4XF1d/RyAR6EF/Jih8HGEwUEb5K3dsWPHWzab7V8IIeY4XT9pRQjhMzIy1m3bti3X4/G0Nzc3Txp+veCucDyA6F094cSJE4UVFRW/stls/0QIMcXh2itChBA+LS1tdXl5uaurq+v6zZs3pxA6nU8RJZjFAgmMM2pra127d+9+0263vzw96fe10jSUNVu3bk1ra2u7cevWLT+WeJ3F2LXNGR0d/a+vQ8yIJFVV/c3NzTUlJSWVADYgGFMS3vviAAivvfZaZm9v7w9UVR1d7spIFkmSNH706NFf5efnfxNaoHdD6xJboQ0e5wQSa5NFAPD5+fni/v37d61atepNQRBWxXitB048z5tdLldhWlraV8eOHetFMI5EnPOKBUhgSuTIkSObNm3a9IbFYvlGLIY/yDKbzRlutzvD5/O1X7x4cRxBIPNCEWJ4LwKA27dvX/rmzZv/zWaz7Y7VaMoAr6RCVqnh0ksvjgBWEw8TH9/3z8/P3/HKK6+0nz59erClpUVFcD1FB6OG/89CLSAAeLfbbTpz5sw/FxYW/ifP8+5YDR71qmjt98InqRA4LtbLLEoMgKRQbMi1oSAz/j11r9c7ePjw4feqq6v/B4BnukxCm8aXEdYlXoiHBNY0amtr12dnZ7+0GBiMAWM+BT6ZwW41I9Uigi5ik0QsIkTz0lt9Hkz6aeR/iEE2my27oqLi2e9+97ttNTU17QhdFjbCYMDCmyzO5XKJxcXFL9rt9ucXaywDIPIc7BYBdqsASpcHiEngtRcJUmFhYUV1dfX12trabkVRZMyEEmi6FhLUOQBCQ0PDN/Ly8l4VRXHtYg0d96mY8FNYTALMIo8ldhAQon0phj1+ZNoFOO2xhNTI4jiOt9vtos1m6/rb3/42BA2CvtIYWJ8HtEqORoG5Krfb/YLFYtmWALsfaDmdzuJnn322AoAZ2mKWGdpAMWRRa0FA6uvrS+x2e8XXYdIw3uJ53rR27drS1157rQgaDDO02eAFAwnMVz366KMvmEym0gTZ/MArOzv70ZdeeqkSGggjkMB6fLRAuP379zttNltFojatfR0kiqK9qKhoy9atWzMRBBLSbEULhN+9e/cOURSLEmdudIYksDO0JMrIyMj/3ve+twUaDL3w0yUikEAwz87Ofobn+byEWhtBKgM4QsBzK5eK1WrNrqysfByaZ+geImIhQN5//33X9M5Ca2LNnV9+WUVn/wTGvFLcpzmWSoIgmN1u94YdO3ZkYWZw5+cDQqANBIVdu3Y9zvN8zhLYO7cxBFBUiv9tvofPL/fB61chCisTis1my3r55Zc3CYKgN1l6HIkIhFRVVVkdDsc2nuczlsLY+UQAeKYUnLh0D59f7YPPTyGswObLbDanlpeXb8zKyrIgGEdERAACAHxBQYHFZrOVchyXmnBLoxQvCjjfMYb/u3wPkkLBr7BIL4qibfXq1UUZGRn6KmLUTRYpKytzmkymdUiCTV8AQKmKtatykJebjTOtwzh26R78ioplmiyOVSQjIyN/48aN6dBA6CVyDNm8efO6hIw9CCAKBGaRB6dPKkUpkyigqNCJXFc2GtpHcPzSPcgy066zQmQymew7d+5cBQMMANxcs2mBQzXp6emPJGIXCQFgNwnItPMA4RZ0+kpVKUSBQ1GBC4wB59qHABC8sM0Nk8CBUpZk5wJmiud5saioyI3geZl5gegiNpstP1F7rASewCJykNWFV6CqAKLAY32hCwTAubZBEMLw7cfcsJp5yEpyI+F5XsjNzc1G2Gnj+YAQAJzFYilIFBCRJxB4AIREHIETAogCB2OnSvMUHutXa1Aa2gZBQLC7PA92Cw8piaFwHCdmZWWFAyERmyxBEFyEzPl380pWKca9Crx+fco/VBMyg0cCVBq5x0AIMDmlXctuGJ6qKoXA8ygqdAFgOHNzCDxH8GxZLuwWHn45OaFwHMenpqZmIfSMfUQPIdMBPaZoOTop42TLENr7vLCa+RlMZMYgqdpybjRvIFMGz5QKh0kIuZSqUvA8h3WFuWAMOH1zCIQwVG3JQ4o1aaEQk8lkR+iR8IjffLKYtQ+PT0VL9wRaByXk52TMWDMnWPjeylyXE1npdqhhS+CUMggch6LVuQAY6m4Og4HgmS0u2C1CUjZfgiCYscAmCxzH2WJ/SwZR4ODOzsSmonyo4bWIGF0PmPValDHwHIf1q/PAcRxO3xwCAOwqccFqXvol4kgSRVEHEgwREf6HLPaELIG274kjAIvTOGG+LjKbhlK0Ohcqpfj8ygA4EHx7qxtAcnWHp+ey9EqJuEBFwh5XjPRKJ4RoGWUY1ZrL5P0kgbqO2HtijPkW804MAKXadpvF7ruKpj4JIVBVFbe6+jA4PILny1x4siRb22GSTO4BQFEUyfCSAFHsy6KUemN/SwJZoejuHwFlCljYvitGALLASqKUIT/PiZysNChhcYQjBCpl6OzuR0//MJ7cmIWnt+QgxSIkZU9LlmV/+M+iATLjn6JVuk3A1rXpSLdNwjzL5IusApI6nZsigggAWaFo6RqDzW5DnjMNimFnLMdxUCnFra/60N07hJ0bHagqzYU9SWEAM4BE3LnIAIBS6pl+vuAWOMMuoqrYgYr1mbOONTySNjBUomjetYGhjK+GPPBLSsjveI6DpKrouNuHgcFhPFXsxDNbXEhNYhgAmCRJeusT2E4ayUOYJEl9VqtViWWCUeAI0m0i0uf4fZoKjE8BCo28eYEQwOMVYDGFbrbkeQ6yrKB9GsaTmxx4riwXNhMPfxKOPXRRSlWPxzOCsCNvcwEJbG30er3daWlpUiJmfBWVQaUEihrZRQjRpmKMnsbzHCRZQcfdPgwOjeDJTU48V5YLi5jcMABAVVV5cHCwH2HpBiMt6zCPx9NDKZUTYZSsMvhkFVHwmCFeAKRpzxgcGsbOjQ48X+6GSeAhq8kNAwAopXJvb+8Qwk5XzQeEAWADAwN3oaUjiqsYgElJwciEBElRF5T8i+c5yJIWM4aGhlG50Ynd5W7wnNbLWglSVVVpb2/vQ1gizrmABFzo0qVLtxRFmYi7RQxQFAZZURc4aCPTnjGIgUEdRh4EbvHjnKWU3++fbGho0M8fBrwkkofQ+vr6Ua/X24EkSc7FEQ537w2if3AYFRsceK4sDyLHYYU4hi42NDTU3draqvdgA+cOI8aQrq6uqZGRkRZVVePvJTGKqgoqN2Th+ce0JVt1BXkGAEiSNHn79u1bo6OjMkJjyJweEmiyWlpapK6urquyLN9fInvnFAOQlWrG329fhae35MAicismZhjl9/snm5qaOsfGxox5G1VE02RNTEyoBw8evOT3+/uXwtg5jWGAwHOoKnXhWyU5sIgrozc1mzwez3BtbW27qqr6ydzA8baIvSwAam1t7fDo6OgVVVUXNdG4WJlFHmtyUpBmNSXlglM0UhTFd+fOnfbr1697oEFQDEWNBETPUatcv369brm9hCfaesdKbKZ0eTye4ZMnTzZDq1f9AKieF3heIEAQilxTU3PR5/PdSaSxkaRlLl5OCxavsbGx3t/97nftCAIx5gOO6CF6sFEOHTo00tfX16goiifRRj+okiRpsqWl5Vp7e7sHod4ROCYdrYcoAKTjx48fv3///uVEGv0gq7e3t/XAgQONCHqHH8HEzFEDCTRbr7/+ese9e/fOUUqXNbivRCmK4r9+/frVw4cP38P0FxxhzRWiGBgChmYLgFxfX//X0dHR5ngZqp8bXO6SaPX09LQcOnToErS61EHo+U4C3d5odyTqUKRXX3312uOPP/7XjIyMrTzPL2pHirYBQes1qZQtW2oNRWUJ7SwoiuK7ePHixYMHD95BMG4Ymys9xUZUuU6MzZYCwP/73//+eHZ29paCgoJ/iNlKou0M80kq6IQEWWHLlnzGO6WA0cQknwGAGzdunP3Nb35zHkHvmBE7EGGBKlwhwf3dd9/tqqqqOuZ0OsutVmthLEYSABk2AQ67iCmZQpYTsuQSlfIyTEi3JSbPyf379+8dP378XF1d3RCCMKamSziQqLMB6V6ijyilt99+++y6deuOFRcXvxqrsWkWHsV5Vm3FcBnFcQTmBB0gvXDhwun33nvvKkKbKh2GHj8CK7Qx51zs7u6mKSkpQyUlJbmpqanrYroI0Y4kmAVuWYuJJwk5fdXa2nrmF7/4xZGmpqYRaCC8huJDMH4EvpELBaJbzQEg9fX1E8XFxWPr168vM5vNSXF3nGTRyMjI3d/+9rd/rKmp6YQGwwcNxOT0cz9CbwYDYHGJlAkA0t7ePl5eXq4UFBRs029b93WXJEkTn3766R/ffvvtZp/Pp8cLHYYXwSZrxsGZRQMZGhqira2tPU888YTF6XRu4jjua5fV2ihFUXx1dXWf/ehHP/q8v79/Elrl+wBMIOgdejCfkYI81jSxIa97enrUCxcutD311FPpDodjAyEkXkn+V5RUVfU3NjaeqK6uPtzd3T2BYFM1iaB36IPBGRlJgTjeHaG3t1ft7OzsqKyszJ0+ubuyTo4vUpRS5erVq6f27t37ye3btz2YHUZ4UzWjexnXb3JHR4ff5/N1lJaWOlJTUws4LuIp3wdCiqL4b9y4Uf/666//qbGxcRgzg3jEpkrXYmOIUQwALl26NHn58uUr27dvtzocjqIHPabIsuxtbGw88Z3vfOfj8+fPRwtjTsXDQ4yuxwDgzp07/rNnz9544oknRIfD8chi57ySVVNTU+Nnzpw5unfv3sO3bt26D63S9WYqPIgHZnQR59zvs2kGlP7+fvnLL79sdzqdvS6XK89msznj9F5Jod7e3hu1tbX//bOf/azu7t27HoTCCA/i88YNo+IZQ0J2cQNAT0+PfPTo0S6bzXY7Ly/PnJmZ+QiJx/1Jl1GMMbWlpeXUu++++6ef//znV0ZHR/VBnrGJ0kfjC4IBxDmo6zYbiyzL7OTJk4NjY2Odbrfbl5WV5RZFMSUB75tweTye/rq6us/eeuutz/7whz/oe56Ngz4dhg5pQTCAxAIBDFskr1y54jl37lx7enr6V1arVUpPT8/jeX5F3KdKkqSJa9eunTp06NBnb7zxxummpiY9eM8GI3ysETUMIM7nUhljxhsR8wgm57JAu7uMFYBtz549eT/84Q+fKSsr2+lyubYkKxhVVaWenp6WxsbGxnfeeef82bNnhxGctdVH4HqPyugVIWscC3nPuAMBEA5FgAZGT7Gtg7H89Kc/LX7xxRcr16xZU5aTk7PBZDIlRdY6v9/v6evr62htbW05dOhQ04cfftiJ0KVX4/yUb/q5cTk25rtHJwQIEAJFzwWle4sRjAWAee/evatfeeWVXWvWrNmclpbmSktLc4uiuIgMEguXJEme8fHxgfHx8cHW1tabH3zwwbm//OUvvQjdP6Wv9OkQjAtNehOljzNiWuRJGJDAG2hgdCi6t+hgdDgWAOaUlBTLj3/840179uzZsWbNms2pqak5ZrM5xWQypcTbVmjnJyempqYmxsbG+tva2lqOHDny5YEDB25PTEzowdi4d8q40uc3FKNXRH2/wrmUcCDArN5ibMb0GGPMYWsqLS1Nr66u3rht27aNq1evXu9wOApEUbQLgiByHCfyPC9OT81E+gyMUqqoqipTSmVFUWRJkryDg4NfdXZ2dl68eLG9tra2c/qsRmDrLEJ3FeqVP2V4PduNWRa99LkkQIAAFCA0pZ3RY4xeE0idmpOTY83MzLSuX78+tbKyMr+oqMidm5vrdDgcOampqQ6LxWIXBMFqMpmsoihaGGNEURSfJEk+WZan/H7/xPj4+OjQ0FB/b2/vcFtbW199fX1vZ2fnxOjoqDw8PKx7gxHEbDCMe6jC7yUFxhiLxxBrOQZpIQm7EJqV05h625gb3ZiOm0fw9g6zldnE5ijGPWfhXqFXvnEztF5o2HXipuUcNRsrkTcUHY4RjP5cMPxdIOmX4RGY+ZmMMwjU8Gg8KGOEIRuK8eyGXhICQlcyTGOEe8xscEJy28KQNBLzQ4kEI9xDwkvgZBMSDEJXMgDRZaxMY5zhMROU8W8iNVtzNVV6JRu//TTs+Yy7qCVa/w+SVb5l2/X/uwAAAABJRU5ErkJggg==",y.hazard="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAAKJUlEQVR4nO2ce3CU1RXAf+fbjTFREdC2IAX70Grk4dhBrLUqtlaG1kdGpNraarWVZ7KbVVo66tg4gmV8kI0bxOgf0vEP/2Aq2td0asfpUx2nVsAirfZh65gEFYKxiiS73+kfWSWw90vu3f32keH7/cNk77nnHs7dc797zr37QURERERERERERERERERFkWobUAzaSj0e64Br8x9tYhI/kHYGq2lXMcSrbUBReKwHVoz4JEU/9cDKKllUNOMuAjTJWcDTgHdIk49wnqT5UxXMKppD/xM1jbYTR+jGbLeH0q1LqKu0XaUwriaAvXwP5fRRJGbSwE0VsycExs0SpCs5kTg7gKPGEN2Hxyzp4F+VsKtUxk8ExOlibOcDNOBzf7nNCYtxMQGa5ErgYocuCzTB18plT5jU/BKkrUzA4yVgmmPXPoQmSbO3HHaFRe1HwHDC5ep8gCkoa8M2J2xqOgI0yZnAM0CsSBU+whckzTMhmhUqNRsB2k4c6KZ458M4yA1qdgLoJwWcEYKm2RxJMgQ9ZaEmlyBNMgPYARwdksr3yDFLuvh3SPpCo1YjIEN4zgdoJMaGEPWFRs1NgCZZBFxaBtULtY3Ly6C3JGpqCSpiz789/+8cS/nX8TlNMgy4W1ceaisCYqzB3vk+ynI8bgB8yz7T8LijOOPKQ81MgKaYix50yDIW3XIfT0sHzwEPOvRr0VY+52he2aiJCdDFxPCd9vy7GOSWD//yWQ30WPb18OjO5xlVpyYmgBNIAJ+1llfaZCP9H/wpGQYQVjmMOIe9tDjIl42qP4T1RqaTYwdwjFUH4deSZoFRV5KfA1+1HPpdhFmS5lVL+bJQ/QjwyWDrfNhHbpTnhNACvGup6yiUDkvZslHVCdAEX0G5zLqDcIdk+Gdg8/C3+U4HE5o14TB+GajaBOgSGhGn7HQHE7l3TKlJ3IWwzVqrkNEVoWbdTlQvAhpYA3zCUloRWmwuXkk7WZQWQC11TyfO7ZayoVOVh7AmmQM8j/3FsIekkyVOYyR4COG7luI5hHmS5i8uY4RBxSNA2/EYrvPbOv8t4txsati9kAm7FzLB2CvGauANyzFiKN26uKSzh6Ko/BK0h5XglImm5F7eMjUMNrB2sJ41pjbpYA/qlBvM5QSWO8iHQkWXIG1jKspLwESrDsLvSHOBGNbznkXMxedZQDzhnCmP8axxzARPIlxoaeIAHqdJB69bypdMZSNAyWDrfNhPlmUm5x9SuvBU6db5gUvaCuB9yzEnkCNtKRsKFZsAbWMhsMi+A2uli7+ZmnqzJBlRulCY0zuJVpOs3McrwI+sxxWu0BSXWMuXSEWWIF1CIw38FfikXQdeZoDTZVPhN/f1y5guw2cGh+7d3xNl5tTHC0sL2s4R9LMVaLI0+b8MMVPu53+W8kVTmQho5HZsnQ+Kx3KT8wHECzyubFTMiV0+f1iGfW4wgzpus5QtibJHgKaYjc/zYH015GHp5HpTQ08zzQhbRh0Pmqdt4QljW5KHgW9b2pHFZ55keMFSvijKGgHajpd/WNo6f3e+tl9A30UchYxdPBPIvHlpQHEvyyrgTUtb4vlzg7L6qLxLUD/LgLOt5YVVkjE7yG+0Ll1MH4qZSwuygd2oeYIDOJO9LHWQd6ZsS5CuYAp17MR+2/l7Oplv2na+tog5Md+pdJFDmHfCY4WlBQUhyW+AL1rqGiBHk3RZn7g5Ub4IqCONvfMHkYA9fzue5zuVLoDhPMFUWhBQYizHJTeIWVRhi6QsE6BJFgBXOnRZJ2l2mhp6t9EibqWLYYS5PQGHN7KelxHudtB2lbZZn7Q5EfoSpCka8HkR+LRll1d4mzmmbeeblzN1SNkJHFukOe/k4jRN31xYWsj/1ngrcKqVJuE/xJkp91ifuFkRfgT43Ia988FjRdCef2j4imKxzgc4JpY1lxYkw358h9xAOfGgmxghEWoEaIqZ+LyA7bZTeETSXGNq6m1moQq/DMUun0unPcHPjG1JHgG+aakqi89cyTicuI1BaBGgII57/j3EzeXinktoVC+8y7QidL2xOODYMU4KzOVuo3TIuUF4S1CCG4BzrOWF1XKP+cBE49yOWpcubMaaMZQ1lxbyZw3GA58AzqKf74RjWEhLkN7E8WTZCRxv2eWPdHKeadvZdxmzfc+pdGFLVj3mTftJYWkhnxs8Bcy31NUPNEknu0o1KpwIyNKJvfOz+LQE7fnVc1rGXIiLb14+ZLgA2ALWb1uZhIaTG5Q8AdrGfODrDl3uCnqI9W1nmbqULtw5s2+rubQgHexwcqpwtSb5cqkGlbQE5ffS24BTLLu8Sh2zTHvpNxYzJZt1Kl0Uy0A2R9OMnxaWForIYf7B28wO2kbbUFoEeNyKvfNBaAlKZHJDTqWLUphQF1BakA724TtdkT+JiU4P8MIxi+2oN/IZcmwH6i27PCqdfMPU0LOIBfj8qlhbikGEi6c+xi9MbZrkUeAqS1WD+JwhGV4qxo6iIkBByLERe+cPkDPv+V9bTAN+5X9Ap8qGvosCX/7RBgeuv4/BEQgPaJFf5uKWoDauw76cC8rqoHJuLOtYugiPE/2jzaUF6WQX4lB2EM4lYX3SdkhXR3QlxxFnJ/ARuw48x2TOlvbC33H1LmKmupQuwifrw9yPbynclWk7Hv38Afi8pa491NEUlFwG4R4BcdZj63zI4rHU5HwFUbfSRTmIexKQG7Tj47EMGLLUNZksd7ka4DQB2sr5wLesOwjrJc1WU1Nvs2PpolwoZ/VuM5cWpIMXweGilnKNJviSy/DWS1CYd2t6LuH4/DJmmz2Xm34PTp2ypXD5yN9pehH4lKWuwPMNE/YRsJebsXc+eLQEXmyKk6Z2nA8wyScgN3iQ91Cn95GezAT7g3+rCNAEJyNsB4601LtZOs2vDOttZr4KT9mOXUkULpq2hSeNbQk2I1xhqWo/whlBx6wjsTvoFjZi7/wBPFJBjVMf57fUwo8DXcnSSh0XYpet1wMbFfPN7pGM6QhNcC04PVhuqeT17koh99OHOlxXVM4nOfaGZdQJ0BSTEaet1Z/pYaOD/PhiMhvA/DuEANbrTaM/60aPgBx3Ax+1HCyHsFQ2k7OUH3fk85ml2OcGx5Fl3WgCgROgKc5FuM7aOqWzGj9yqzTSyXagy6HL9ZrggqBG4wRoO0fg8wD2O5XXyPJDB6PGN/u4FaxfcSAIG7XVXLg074L6+T5wmoNJ06njHa3ZV+NVnVOIsQoK32Na8A3XFCfhsx1oqIRlhxH7gdOlk7+P/LBwCRp+8XXk/PCph8Jzg4MmQNu4Gko/aI4IZD7Jgy8wfDgbuppjeZ+dwNSKm3V4sYtBmj544dSBCNjPHUTOrwQfo/7AL3gOTIBaX1CNKBU9cDlh5DPA9tWPESEyMgJ+XEU7Di9G+Do+4sPhC0bCtcBxFTfq8GA3sInJpV3mioiIiIiIiIiIiIiIiIiIiIgYn/wfm7XBpi1H58YAAAAASUVORK5CYII=",y.decision="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAJm0lEQVR4nO2de4wdVR3HP7ttt7uVvgu0sq1tqVQeLY8isTw0BUQsKSiiIqFqojEhWBXUajFqiTFogkUwUXkEHzESTUhbXxF8BKGhpEsrtKgElRYK2yJuC1tp2bLb8Y/fvb1zfjP37rzOOXPv7ieZZM/mzvl9z5yZM+fx+52BUUYZpT5tvgUk5K3AEmA+MK9yzAS6gMlAR+V3A0A/cAjYA+wEnq0cPZV0qSlrhZwIXAlcALwDOLagfPcAm4GHgPXACwXl25KcAKwBtgKBg2MI2AR8BpjuoHxNw+nAnUgz46Ii4o7XgZ8CJ1ku67D4bLJOBtYBlyb4bbWp2YG8B3YCLwL7kPfGwcrvJgDjgWlAN/KumQ8sBpYCxw1jZwj4GfBlYG/yojQ3E4FbgcPUv2MPARuBjwFzC7S9APgk8ADwRgP7rwCrgDEF2i4lFyAv0noXYguwEpjkQMsM4Drg6QZ6epCnrOVoA75I/bvyV8A7PWlrB94HPFZHWx/wXk/arNAJ3E98Yf8OXORPmkEb8FHk3RHXI7vJn7Ti6ELaa13AN5Au7jh/0uoyBbiH+BvoZo+6cjMB+APRQr0EXOhRV1JWAq8R1f9tn6Ky0g78mmhhHmX4rmeZOAvpcuty3OBTVBZuJlqITbjpPRXNQmTMo5tcX52Q1FyGvATDBXgEOManqJycQvRl34tMcJaamcjoOSx8J60xV3Q+0cHsg14VJeAnREfcS7wqKpYbiTbFV3lV1IBzgSOYYj/hVVHxtCHT9uEy7kJ6lKWiHdhG9L1R1vWWPMwG/kfJxycrMAUOAmd4VWSXr2CWt5+S9SD1APAHfuVYpxPprITLvMqrohCnYr47hpAl2FbnBswKeQZpur3zQ0xhG/3KccZk4ABm2b3PCrcTHTAt86rILd/DLPu9fuWIR0hY0G5as2dVj7Mxy7+XnM1W3jZvhUr/BhE2UtiKzHNVOR54e54M81bIZSr925z5NRsB8Dv1P32TOuMYzN7VQUo4YnXA5ZjN1l98CVmqhDzmS4hnpmFeh/3keI/mabIWq/T2HHk1M/sw3yNTkOmVTOSpkEUqvSNHXs3Okyp9etaMxuYQcYpKP5UjryyMBc5EPBSnA68i6/VbkbVwl2wHlofSpyFL2E55CrPtnOvI7qnAj5EKiPMMGUA8XS5xpAdkmSGs4Q6Hto/Sq0RMtGxvDDLNPUh8RcQdG5A23TZXKLs/z5pRniZraujvQWSNwBbtyFNxbeh/h4E/IeswBxAfsEWI493kym+uQNZlzkOmyG3xX5WeYdFWLBMw74j/WLb3VWXvPmBWnd9OBL6B+SRtsKzvbUrfNsv2IsxSAv5p0dZJSPxG1da6hOddjen9YtNldQbm9dhl0VYsx+OuQr4fsrOFdCECYaeL+4uXdpSpmNfjOYu2YpmiBDxvyc4YJFYj63rDktC5/djzJT4O83r825KdunQqAS9ZsnOWspF2INuG6ZCQeQQ9DG/GvB5PZ80o60j9sEqPzypgGF4Ffo9MTWxEJjPTEAAvh9K2ej+6tzpoyU5DBqjdEa/7EJCQ/dR0zrdkYz7mE/JE1ozyzGXtD/09HnNcUhZmURuTHMFeIKd2lT2QNaM8FaJf5HNz5GWLD1CbCn+UWrRu0XSr9Iuxv0pAK1fIm4DVofQvLNrSFbIna0atXCFfo9ar2gncbdHWCSrtpUJ6VXpujryKZjnwhcrfAfBZpBNii8IqJCuzic72lsVBbh4SylzV9R0HNv+MeS224TBAaRwSUK+nusvgz9sJPE5N0ybcRPpuIHo9bL6zDNbEGF9HOfxa76KmqQ94iyO7XcjmB/q6fMi24elE/Vl/ZNtoQq6hpmkIeI9j+x3Aw5jXZjf2ZjEA+Loy+BzlCOZchBlT7iuAZg7RG/ZTtoy1EY2JKEPIWifiZFDV9Ef87uKjb9oeW4bOUYb6sPw4JuTT1DTtRdZqfDINc0EtQPaMTESaF/G7VHo9dvv2Sfl46O9vYW8pICn7iPr7Jl6tTFMhZ6v0QynOtUUHplPael9CFA+o9NKkJ6apEL0fofbW88FkamsRR7C3cpmWrSq90IYRvQlLGaJOZ1PT49pbsRF6jT3x7G+aJyTcvQ2w64eVhcC3gBBVr8oqiZ0I0zjKDWBWSgf+Vwr3IUFC4/EwodeADpXWS96F8ATmYzgSQp+zsgDzWv016YlpmqzdKn1OinNHGjrOMPGW5mkq5BGV/mCKc0ca71fph20YmYcZU3iYFCPQEcQcoiN1a1uYb1aGfmnLUELOAL5UOVZTjh3e7sa8Ro/bNLZMGQswQwRcc5vScrVHLSA7d+v4lcttG31QGexHopp8oCvkI550gHzj5HmlZwsOdrZYgOkAHSATejrm0AVlqZBJmEvH1Xdsrl0d0nAV0aZrDxKp5JJblQYfPb+ZxO8bv7rRSTbQCzEBMpr/HO4WiI4FLq4cFyKLVS5ZSrSZqjo4ePEx+GaMmGrb2QzbiWelG/Gy0fsTB8haiJ46ccrnqf8Ziu046GU4ZBmy41G9SOD7EA8U71xE/Gceqo4QrbCHVhtSlrgyDiIbY5aqnFMRvyi9d29AihWzEnMu8ZXRQ8k3i16MeAyGRSeNnC0zd2CW6W9IN7spvlN1Kab4vZSkbc1IFxKLHy6Ta0e8XIwluuR7vVdF+ViFWZZemuTJCHMTZiF24X6cUASdRMcaa7wqysgkzIDLAAmiaTbWYpbhFdxsaGOFtZiFOYjMhTULeluPZr2pjtKF7GqgR/FeR7IJGUd0/WcXErvY1OgvJwTILG3Z0d3cgBJsJV4U9xIt3HVeFTXmeqJ67/GqqGAmIAMpPd1Qxs8FfZjopOEOWnBP4pMxgzEDZFLyGp+iFCuJTpT2Yck3twycj/S0wgUeQtZQfHMj0SfjNWQOq6VZQbQrGSDvGR8Dx06iX5cLKhqXNzivpVhGNBavOmF3pkMdpxF1ka0+GS63mS0F5yHOEXF35lrsPi2TgFswt5iqHntojeWCTMwh+rm96vEvJM67yEWfMUhUbL3FtB6iG8mMOLqA24lf2AqQCruWfAGmncjH68PRuuHjCDJYbcbJT2tcAjxL/AULkPWIW0i3K9yJSCDoyw3yfQbxWhklhi5kE+RD1L+AAfAP5KlagWxi3FU5Flb+d3vlN43y6EO62y72Qml6uoE7iX6duYhjAPguEk8+SkpmIp7t9bw90hy9SPNla6vYEcVYZN5rI/Hjl3pHP7J10pXk+/CAM0rlR5SQcch0xrsRD5dual3VFyrHk8j3eTcjc1OjjDJKS/B/+/QdvZ909d8AAAAASUVORK5CYII=",y.landmark="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAAEf0lEQVR4nO3cTU8bRxjA8WddBKkgH6BSVfUb9JSPUKnqB+AYKcUJxwoCJS+0uG820Cio5BKh9hCl6aW3tE0r9dCSYhtsY4yJnRq7OLFbB+OYuN5d7+7szk4P1SJTiirv7K537fkdDZ4Z/Q/WwywAwDAM07+4Tt9w6eoSOe1rK6GJjtfzugEzb3r7rTdPvPbgx5+oD+NFvm4fwOtYQEodf2Zd+eyLUz8DzwwNbksKen9hauw74LhTv6+XmAp47d2xE68TQqDwpAy/rCUEXhDriqrNDQmle4FAQLPkpC5lWcB25UoVVqPJ5v5BTdEwDkkwcntpclQyfUoXsyWgoXpQh4cbSaFYqhAAfXkAuBuBiQuNjk/pYrYGNNTqLyC8kZLyxacEA3cHQPk4ODH+rNO93ciRgIa/mgJEN9NSOrPLAcfd14h2fX7SXzC1mEs4GtAgtiRIpLMotpXBLwH3QFG1D0JT72SpFu2SrgQ0IKTCViaHw7EthRAuJqny1cXLF9ctWdwhXQ1o0DCGx7tFshqOt5CmFbw0S7oioIEQAr8VnsDP4URLVpR9SUIf7r1+9t43o6PYlg0t4KqABgIAhWIJVqNJsdHgBRWr80O873YgcEG2dWMTXBmwXblShV83kvyflQOMdX0R6QPLN6bPi44d4H+4PqCh+vwQIrGUkC+WCYC+LBL95tKk/9Dxg/yLZwIaGk0eovEd6VEuTwhwd5GCPlmcufhHt87juYAGsSVBYjuLYqkM9gF8L8na7OLMWM7pc3g2oAEhFRLprBZNbGsEuChC8sz81KW4U/t7PqBBVTVIZXJkLbYlaVjPIaTOLUz7v7V7354JaMBYh+zuHlmNbIqKivZkBc3aOZT3XEDD0QVvOCHwvH0XvD0bsF25UoWH68nms2oNaRgHrbzg7YuAhupBHSLxbeH3p2VdJ/otKy54+yqgoVZ/AWuxlFzYKxHg4A4mykdmL3j7MqChyQsQSaTldCYPHAf3VRMXvH39XHhkZBhee/WVM8PDL+vg486BTs51uoapX+3wuqNRJ5oQFaRSjTp9FdC4AY/EUgoBiCmSMht6zx8GAIBpv6k1+yJg+zMYH+F+UFU0F5z2P7Ji7Z4O2GjysL65I+08zhPgfF8hSf504cp4yco9ejJgtfbPvJcvlgnhyC295bsZuna+bsdePRXw6CeO/RrSdBxEeGDF7ttrzwc89jOvINYVpM3Vz6pfr4yPq07s79mAVo4iNDwX8NgoQiCuyMp12lGEhmcCGqNIPJnFHIClowgN1wc8MYrIkuWjCA3XBnRyFKHhuoDdGEVouCJg2yjC84J46PQoQqOrAd0yitDoSkC3jSI0HA3o1lGEhiMB3T6K0LA1oFdGERq2BPTaKELDsoBeHkVomAoY/PzL/3x9aHAwLSPvjSI0Og54eMif+gfXK6GJNwDAc6MIjb5+LmwFFpASC0iJBaTEAlJiASmxgJRYQEosICUWkBILSIkFpMQCUmIBKbGAlFhASiwgJRaQEgtIiQWkZOqpXL/+x16GYRjmuL8BujV+3sKfOScAAAAASUVORK5CYII=",y.poi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA0YSURBVHic7ZxrcFzFlcf/3fcxGs2MpNHbSLItG5AJibEtIfmxWSJjp9YFdgi78CGuFDFFUvshGwIhZLOPrIvKPtjAVliKbAhV2bAphy0egSCgXJKMVVnHGGswfgB62EiypPHMaEYzo3nfV/d+wKYc0OPe8b2jpOLfV3Wf0/PX7e5zT5++wFWucpWr/OlClnsAAHD4C18QywjpopK0SxCELYzzNs6YH5x/ND5COIAEoXSYGcZRZhgHFcaOdw8M6Ms78mUW8K3u7i4iSd8knN8hezyGt67O462qEl0+H2SX6/faqoUClEwGmWRSz0SjWTWbFYggvKRp2lPbDh0aXKafsDwCHt2+vVOUpCcJpZ+tX7OmzN/URCW325INrVBAIhhkkXPnFDB2imnaNzcfPvyOQ0NekJIKGNi9u9xQ1ScJsHdFW5tcvWoVoZRekU3GGGYnJnh4ZEQFIf+jp1L3b33rrbxNQ16Skgl47NZbP0NE8XVPbW39qvXry0VZttW+riiYPHUqm5mdjRjAbVt7e4dtdbAAJRHw4lrX13TDDZ7a1auv7JFbguj4OAsND2d0w9hRirXRcQGPbt/eKUhS/+r2dl9FXZ3T7gAAqUgEE+++mwZj27v6+gJO+nJUwCPd3W2SJB1fvWlTRUVDg5OuPkUqEuETJ06kOOc3b+7rO+uUH8emU2D37nJJlg+uWLfOV2rxAKCioYE0trVVUEE4eHTLFmtbvAUcE1BXlB/7amrq61pbly3WrG9tJZ7q6kbB53vcKR+OCPj2zp0dhJCvttx0U7kT9k1DCFauX18OYN/vdu7c4IQL0QmjoPQ/r2lrk4sJVVLRKOYiEWSSSeiKAgAQXS54/X5U1dfDZ3EjEl0uNK5bJ0dGRp4AcIvlAS2B7dPrWHd3Oy0r+78bd+xwWwmSC+k0Jj/4AEySUHX7Hng3dUCs8gMAtGQC2RMBJHpehWjoaLnxRpR5PKZtM8PAe/39ed0wtm7r6ztp+Uctgv1PoCzf37BmjWxFvEw8jomTJ1F7z72ovn0PyCf6CpWVKFu1GtVfuhOJV1/BuV/+Aq0bNsBTXW3KPhUENLS2yuGxsW8BuNfKz1nStp3G3ti1y0U4v9Pf3CyY7aNks5g4fRrNf/9PqNlzx6fEuxxCKarvuBNNf/cDjJ86DSWbNT226pUrBcLYXe/fdZetr0C2ClitqltdHo8ulZWZ7jM1NIT6fffBs6nddB9vewfq7tmHqWHzb2tSWRlkj8fIxONdpjuZwFYBObDDV19veudNR6PQBQH+XbdZ9uW/bTc0EGRiMdN9Kurq3JzSnZadLYKtAoqyvM1TVSWZbZ+YmYF/zx0Asb6XEUpRvedLSMzMmO7j8ftlURS3WXa2CPY+gZxf67KwO2aTSXg2mp+6n6R8YzuyiYTp9rLXC4Pz64p2OA/2CmgYfivrn57NQqotPsEg19VDzeXMt3e5wBnzF+1wHmwVkHHuoqL5yIhzDlLE9C0WIooAY+b/wyawVUACMM656faS1ws1an4N+yRadAZyuYW3Rc7BAfMDNIGtAlJBSBuqarq91+9HJnC8aH+Z42/D6zc/Iw1VhSAIqaIdzoO9yQRC5nRNM928qq4Oidd6wBmz7IobBhKv96Cqvt50H13TQChNWna2CHZnY0aVdNp0Y19dHSRmIPHqy5YdxV9+ERIl8NbWmu5TyGQAzkcsO1sEe3dhXT+UTSbNz2EALTfcgOgvn0X2HfOZ90xgELHnDqBl3TpL48smEophGG9a6rQE9u7CwGA2HjcfVwBweTxYfdNNmP63H2L21VcWnc6cMcRf+TWCj/4zWjdsgJWYEwBys7N5Bth6RmJrNqac0sFcKuU2dB2ChXDGW1OD6zs7MfXKS0j+5tcfpbPab4bUuAIAoIUuIHMxnSUT4PrOTmu7LwBD15HPZMo8hNgqoO1B2OCuXQMt69ffUtnYWFT/dDSKZCSCdCIBPZMBAIheL3zV1ahqaIDPwpp3OXOhECZPn36z8+DBW4sysAC25wOZrj83Fwp1VDY2WptfF/HV1VnOOpshEQpldE37ld12bT8TIZr2m0QoJDDDsNt00TDDwFwkInJB6LHbtu0Cdg4MhIkgvDUXDtttumiSoRAXKP3ttt7e4l97FsCRUzlDVZ+cnZiwNeK/EmYnJtKGrv/ECduOCKgw1pNLp418avk1zCWTyKfT2qTf/5oT9h0RsHtgQOeG8dTM+LilmNAJomNjWc75T+5+4QVHFmXHKhNEXX8iGQySS2e7y4GWzyMZDlPC2BNO+XBMwI6BgRil9Ofhs2eXTcHw2bMKBOGZrkOHZp3y4WitnmoY/x6fnGRWUlx2oSsKEsEgo4w95qQfRwX8s/7+SVB6IHzuXMmfwvDoqALOn+3s7Z1y0o+jAgKAoCjfj50/b1g5BL9SCuk04tPThqBp/+i0L8cF7BgYiMEwngp+8EHGaV+XCA4NZcDYkx0DA+YPjYvEcQEBIG8Yj2RiMTUbjzvuKx2LIRuLFQS3+xHHnaFEAnYPDGQMxv5m+syZNCwcOhVD8MyZtGEY3+ro6SlJDFoSAQFgS3//c1o+P54Mhx1TMHHhAlcVZXzLm2/+r1M+PknJBCQAVznfGzxzJmfl4MksuqYheOZMjqjqV4jNR5eLUTIBAWBbb+97HHgpPDJie2AYGhpSGSEvdh4+/L7dthejpAICQCGd/vbs1JRi54aSjccRDwYVNZ1+wDajJim5gJ8/ciTBGfve1KlTaStVDAvBGcPkyZMZzvnDnz9yxHylkU2UXEAA2NLf/19aoXAicvbsFU/l8OioqqtqYEtf30/tGJtVlkVAAODAvpkPP1Sv5A2lkM0iOjamcs5trXu2wrIJ2NXbO06Ah8cCgXxRpR2cY+L48RyAh7p6e8ftH6E5lk1AALi5t/enej4fiJw7ZzmuCY+OqpqiBDr7+n7mxNjMUpLivOefP+rOe6V1BLSZAo0AXyEIpAmEtErJREvzfz/edn1XJ3FXVpqyl0smMToY4FP3PjisV/inCefjhsGDnOICZyTCwabdGW347ru3On7x2lYB9+/ndO3mdz/HudFBKL1RoqSDgVzPDKNWEoW8LIsokyUqS6LLJYmCLImQJQH8dwPA6y+jratr0WsOwEdTd/jYMdDb7wS23gJVM6BqOhRVN1RdVwqqxlTVgKbrbioIMcoxojEjQBh/3yA0MP72pvf27yfW14wFuCIBnw4EJM8M7wQhf04F+heMsQ5ZFNUKr5t4y12+8jKZustkuF0SCF3cVeKxf4UvPYdrrlu8hDk4OopspR9V3/nbRdtxxpFXNOQKKvIFlWVyhXQ6W+CKpsuU0kFmsIOcst82y9nj3d3dRX/9oygBn31jcKMsCt9gnH9FFkXir/TI/kq3q8JbDlk0fcfm92CFAuLfvR9Nq1ZiobKQuVAI05NTqPnRE6AWarEvR9UNpNI5JFJ5JZnKqYqqcSqQA0zVf7b3tk7L18BMC/h0T6DcI5FvCJR+RyCkuqG20tVQ6xPcZfZd/NHGPkT8hz9A2+bNnyoeUnM5jBw7hup/eATSmrW2+cwXVERiaSMym1QYR8xg/HFprvCM2fVzSQH37+f02i3v/DUFebTSWy62XFNdVul17P4yMi+/AP3wIVzX0f7xesgZw+jgIKTtX4T3y3/lmO+5dB7nQ/FCKp3TCMd3R9/e9MxS6+WiAv6qJ1DLZfq6t1z+zNrmeq/Pa2uB+/xwjsSP/gWeVBLNFwsop4eGka3yw//Q94u6lGOVVKaAD6dmMtmC8p5O9dvv2dG14KnegqM58NppP5WME00rqq5ZtaLG3m+ULAHLZjH7vQfQvGolQAimJydR++iPQSx+nOdKmQjOqsFoclrJoH3flzfOW1u9YMxAZeM/6ut8JRcPAKjHg8oHHsbk8DAmh4ZQ9e2HSy4eAKxuqpHr/d7msnK+4NHogvWBjLG/XNlYXXLxLiGvvRa+vV8DAFs3DausXFEjR2bTdwG4b76/L1xgSQlx+PhiScq371jeAQAAOD7+itw8LDyFQV6cDMdLX1LwB8b5UFylhDy/0N8XFJCpwoPRWPrC+Quzqh2Jzz82OOeYCMbUaCIzXciRhxZqZyqMcZdJn13bXFdeVbG8XzEpFYlUFmPT0Vxe0U4XHcZc4vJA2utxC6ubatxOBtLLyVw6j/ELsXwmU9BtCaQv5+meQLlXxn2UCA8SQmoba32uxtpK0c5XueUgX1ARmU1poeicyhmPGpw/JqeUn9v2Kjcfz74xuFGk5OsgZK9dyYRS8alkgqYzDnaA6OwZR5MJ82FnOstu/qDTWQtRbEJVkkQQAgiUglICSigEgXx8m51zDsPgYJyBMQ6DMXAOaJr+x51QNcullL4g0CbGUEuAOgLeIklCC4AGzkktAJFx7gGYzDhkMO7igHBxkAYoUSiBClCVEpLlnOuUIMYIwoZmTHOQKQ5ECeFRxviFUqX0r3KVq1zlT5n/B4HKFM4hiX7YAAAAAElFTkSuQmCC",y.staircase="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAFfgAABX4BPgLDIQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABTESURBVHic7Z15YBTl+cc/78xsSDbZ7CYoIAJyCRErqKCGHEAUFUFQqq3W++dZLR5VW+tVRWs9ilWqLWqrpfJTq2Bp8aKCRszBZeUwyCEqqIQzJLs5dpOdmbd/TLK7OTbZZA8S7PefZOd43nfm+77vc7zP+46gm6Oy0OVSbGaWkMooU8gsgRgFsp+EXgLsQBpga7zcD9RIqBNQjxC7pZSbFSm2SMxNRoq6JXNcpfvQPU3HEIe6Ai1RsSpzgObXC6QQEwVMAobFuIjtEj4SQq6wCVuhPadiV4zlR4VuQUhNacYJumleLmAmMDyhhQu+EPAPIdUFjryDmxJadpvVOUSo/dh+lCGSLkHIyyWMOVT1aIH1IF5W/f7X0gpq9xyKCiScEE+pIwupPCQlFwBKosuPEH6E+LuQxiPpedVbE1lwwgip+th5slDFbKScSvcloiVMhHjXFPw6I6dqXSIKjDshFasy0zVDfwgpZgFqvMuLE3QpmNvQkPRgn4L9NfEsKG6ESIlwFzuvE4JHgcx4lZNg7EWKX6bnVS0QAhmPAuJCSMWqzAGabvwZmBIP+d0A72rYrkvNO1Aea8ExJ6Sq2HmRgBeA9FjL7mbwSMm1rnz3wlgKjRkhsnRAikfWPI+Ul8dKZk+AELzgcLtvEVOpj4m8WAipWZXa19C1xcD4WMjreRAliqnPdEyo2R+1pGgFeEodWdJUlgLHRCurh2OHwJwSrd8SlT/g+diRK02lhP+RATBYopR6Sh050Qjpcg+pLHJNUoRcAjiiqcBhCI8ixHRHbtXHXbm5S4R4ijPyTMz3BaR05f5IcaBK8uLiBpaW+vl2jwnAwH4KU3JsXDMziSNc3SI22hbqhGKemZ5TXdrZGzv9RJVFrjGKkCsAZ2fv7Qz+8YGfWY95qfW27X+lpgie/VUKPzzD1ub5boAKRTXyHeNrNnfmpk4RUrnSNVgxzBIQ/TtXt85hyQo/V9xXh2zkQlHg6D4KQsB3e01Mq7MgBLz8GzszJnZPUiTskkLkZuRW7Yz0nogJkYUke2zOUuCkLtUuQhx0S8ZcVI2nxmLjx2fZeGRWCn0yrarur5Tc+6yX1//tB8CZJlj/uoNMZ7cdvtamZ7jzxPE0RHJxxFaW2+Z8hjiTAfD8m/UBMi6cbOOF++0BMgCOzBC8cL+dH59l9Qp3jeS5RTHxyeKFUzyVzqcjvTgiQtwl6ZcJuLbrdYoc7xTpgDVMPXxTMiJMw599YzKK0vyebowb3cXpl0RyYYeEWBNKYl70dYoMO3dbCmJwf4X+fcJXr/+RCsMGWOe/3mUmpG7RQTzvKXaM7OiqdgmREoGpzMPK7EgI/F1o7DIugfCYI02iPNvRRe0SUl3qulJamR8Jw/CBVpV2lJuU7wvf8sv3m3z5nXV+6ICeMgHJZHdJ+mXtXRD2STyrHb2llHNiX6f2ceFkS1mbJtz/J1/Y1v/APF/A/J2WryWodjGAFHMqC12ucKfDEiL9ysNA77hUqh1cOzOJ3o0m7KLlfq5/uI59B4Os7K+UXP9wHW+8HzR7f3phr0RXMxr0VWw8FO5kmzaMe0X6sajic+CQNL3i9ToX3F6Lr9Fy76mOYTvwS0mWK9/9VcsTbRNS4no5kRNN3+4xWVNm8N0+EylhUD8FU8KDz/kCMayWyEgXPHt3Cufm9zgyAJCSv7ry3Ve3PN6KkMbesZk4ZYjoBpRtN1i10WB1mc6qjQbl+1u/dEWBYwcpfPmtycB+CuX7TBRVcNwQhXNybVx/QRIuR7f1ziOBXxqMdE10fx16sNWQJBTxCxlDMqprJWvKrJe/cqPBfz43wgYMQ2GasHWHRZSnRvLaY6mccVoPUt4dwyZUfgncGHqwWRNrnIrdCUStJYs+1bn/Tz7WbzXa9RN6OwXZozXGj1EZNkDhoFtStt2kZINO2XYjoC9SkgUr/pLGyME9xsSNBD7FNAaFTv02a3Kmrl1ODMgoXqcz8/baNp28wf0Vxo/WGD9aJXu0xohjlLDhkfJ9Jvf/ycei5X68PsnPHq3j/XlpgZDJYYBkU9EuA55qOtDsVbiL08tAHB9tKQXX1fDpZgOArMEKE8dpjB+tkT1a5agjOvc2fQ2Qd1U1X3xjdZXHbk3mxh/1KDO3I6xz5rlPbvoRIKSyxHWiImXU+atrNxlMvsHKthw1VKXor2lobWikmjrJN3tMRg3tWF2VbtCZdnMtpgn2ZMHqBWkMOurw6SaqooxOy6n8DEIcQ8U0Y2LmvvTPYNj/+guSAmTsPmCyaLmfXzzlJf/qGgZN8TD+ihoe/rOvQ5k5YzSuPi8JgDqf5JYnvD0lfhURTGle2vR/sJkJcV60gg+6JYs/tDxoR6oIzFn8q9DPCRdWc82DdbzwZgMbtxkYjcp681eRRWpn35jMgL5WdQvX6rz6XkTzPT0CUhJ49wpYU7PEYOnYK+814K23mu5PpthITbFGxEdfqg8bxc0ZE5mFnWYXPHVnMKfinmd87D7QmkyvT7J8tc78JQ2s+ETvKT0pq2JV5gBoJETVOT1aiVI2H66uPt8aYlZu1Nn8taXgR49QefsPqYwfHTTuJmdH7mmfNV7jJ1MsuVXVkjuetIY7XwO8XeTn6gfrGHpuNRfcUcutT3iZcVstZ91Yw56K7s+K5jdPh0ZCpKAgWoGFa3W+agyH552ocdwQq+XP/1eQpJsv7sW4USrrtljd5eg+Clnt+BW79plMvqGG839eG5jWfezW5ICl9k6Rnx/eUcvw6R4uvbuON5f7qfM1f/lrygwuu6c22seLP4RZAAEdIidGKy+0d1wz02rFlR7Jvz6yXn5GumDGJBtF64xA0HByB573XxY3sHaTQeFanbvmWr3B5RDM/WVw6PpgtU51bZAEl0Nw6dQkHr81JTDjuHaTQdl2I9pHjDPEJACtuiStjykZGI2oCrfkvRJLmffNFExvjL6+tjRUpySRnAQfrPEH7jvj1PYJKfo0qHhefa+BGZM0zsm1cXaOxuXTkljwjsVsplNwbr6N8wpsTByrYWsU62uQPDDPIvLbvSY/GN6tF3AN9qx29NaktI2A6Oakd5ab6I0NcEqeLfBC5i8J9porZ1i95oPV1kvWVJh0SnhCauok67Y0b9W3PeEle4FGRrpg7l0pTByncYRLkH+y1srXcddI3ikKkj+wbw/wW3RGaGB2OPHeEYYPVFAVMExYWuzns5lJrNtqBIKD40drZA1W2LnbDHjcY0epONPCR2tXbjQCJAthGQ17KiS/eMrLXx6woyrwozObGwRen+T9lTqLC/0sLdXxNuqTUUNVjh/WrXtHI9SRmgkjow1ip6cJrpyRxEv/bGDvQUne/zVfF3nbZVaoo6l3AEw+rX3rqnhd8Nr7r0vmdy/X4/VJFi7zc16Bn+kTrPu99ZJlTSSU6K2Ueka64Pn7UsLGy7oVpBypITg2FssXfzsrGXeN5M3l/mbHrzg3iSk51tAUSkiH+qORECGs4S49TXDn770AzHrUy8oNBrsPmPy7VG8znG9PFpw7QWP2jcn0P7IHDFcWjhXuYudKIDsW0qSEd4v9vPxWA0IILjrbxvkFNoSw0nuGTPNQXSvJdAq+fCs9bNS2ulYyeKoH3YDjhqisWpCGlHDZPXW8XeRv+yYsC+ucXBvTJ2qcfqpGSq+e0C1CIUo0kI5YLTUUAqbl25jWxrTq6rKgeVpwitZuCD1Uf+SdpAZkP3dfCjf8hmbKum+mYNoEGzMm2sg7KWhh9UQIpEMDkZAkuM4MV6H6IzQa7EgVvPqonW/3mHy9y6RPb4URg5TDZn5EgkMjQSugNm4LmrATx7ZPyMqNQUJ+PsfL7Od9nHCsygnDVU7KUjk7R2NCBzJigb8taeiUej12kELuiVHVy6GRoDTRfZXWo/WyWSGT9jCwn8KasiCBVdWSok/1gKPYywZP/DyFqxp9m3jhtjnewBRyJLhyelJMCEmI5ktrjPz6DfDVS1KSwxf73L12Lj1HZ90Wg/XbDDZsM/hmd/DN1Pvh1ie8pPSyDIfDCRpQTQL2IjkpS6V0g45pwivv+bl2ZvjWnWSDM07TmmWZVHokG7YZLC3ReeHNegwT7nnGy4Vn2lDjrEOOOUrhoZuSI7ouSlQnjJALzrDxx9ethTV3Pe1lZ7nJaaNVjh+qcsxRHSvmjHTBpHEak8ZpeOsl85c0cKBKsqZMbxbOjwecDsH5BQnpidWahOpEjFlfhazh0A34w2v18Jr1254syBqicPxQ1fo7TOW4oSr9erdds7GjVOYvsf4v224yfnS8a58YCKjWhNVD4o4lK4K+g6YS8DPAmif/dLMRyFRpQqZTMGqoZVXd8pNgpsmwkOUH27/t7mH1yCGRHk0K9oo4T6h5fZJlqywLyeUQlC1yULrBYP1Wg5f+WR92Ru+gW1K8Tqd4nc7Y49SABTNsYNA32f5N5yPVbxf5OVDZ8UMnevpXIPZqimRLvMtdtioYeZ2So+FIFZydo3Fmtsa8hZZecTkEb81N5bPtBp99YTb+NXA3zhR+9oVJ7omWvL6ZgjS7oKZOBhbtdAa/X1DPfz7vfj1LSrZoCLEt3k1hcWFwuJoxKagcN2wzqPRYZU8YqzF6hMroEcHWv2yVzoV3WtOvX5cHX6AQ1rC1YZvBzt0mvgZIjq9LkiCIbRrC2IqMn91Y6w0OVym9BAUhk1JFISGSvDYcqlAzcmd580YztJEQ07QmyLqa8zv/IXuHofn25m1iC3OrhsrWKCcMw8Lrk1x0V10gqHj6qRr2EIdwxSdBQiaMbT2BdEx/yxw2TWvNYSiGDQwS8OV3RpcJOW+SrdvEwkxd2aqkn1ZdAXwba+Fen+THd9UFwh0pvQSzLg6OK37diuqCpROyBrcmpJeNQIbJjt1ms5G1uaXVE5ZFd4gdGQVVVU1pQMtiKdlbL7n4V3V8/J9GMpIFrz9uJ2dMcFhaUxacWMo/WQs7bAzpb714r0+yN2St4bABIZbWYUCIkBYHmvVDfgii1fKqrsDXAJfcXcdHn4SQ8ZidieOCZJgmzH01uB3G5OzwnvbgoxWK11v/7yg36dfbIqLZkNVIyMqNemAevz3sj8DkTTRMwQfQSIhm6h/qik0SZaDR1wCX3l3Lh2uCZLzxuL1ZqNw04WePevl3qXXNkRmi3UWbTT0ELEKyT7AIOcIlcKYJ3DUyQMjCZX5eXNwjc36lKoxCaEyUS51QtxuIaq/Aej9cdk8ty1cHyVj4RNtkNCVK2zR47j57IAe4LQw+OoSQFltoDOxnndtT0bOHLAmbHLk1+yB0BZUUryPkA10RWO+Hy++tDZi39mTBwt/ZyTupfTJefMDeYfbiiEFBQj75XKdpgVe9n8Bi0bYWfz5wQ3JEOzx0h2wUIeXrTf8H3oZU5AIh+TVdGLbumBMcguzJgoVz7M38irbIeOlBezMnMRxOOFZlyNEKX+8yWbZK595nfZw4UuW1pQ0cdFu6oC1SJ47VGDuqJ+RiYZqKsqDpR6AJuXLdXyLFys5KK9tu8P/vWi861mSA1YIfvSW4FdOzf6/n2tl1gTn6NLvgnms6nqvorpBQHLrjXLM+LYVc0PqW9rFsVXANxr3X9mpFxk2/7ToZTTgn18a8e+2thqb+RyosmmPvSZvPtIICzd55s76u2MyF0q88ifWxrYhQXRc0IUPX/Rkm/Oy3Xl5bGh0ZANt2mvjqJbde0osPVut8t8/k+GEqBadobN1hsnWHVcbWr3uccq81JW+GHmhGSPpp1RVVJc55QnJHpBJD03T+8Go9OWM0nGmCmx+LDRlg+Re3PuFtdmxHudksP6snQkr+6Mp3V4Yea6UNtQZ9jm7Tbop0T95peRp9MwV7D0rWbjIYeZ6HXkki4IXbNHhpdo/cICaukODVbPrvWx5vRUhaQe0ed7Hzb8BPIxGckix4+ZFULr6rlkqPRDdAbyQjJVkw/yF7ILc3FrhyehKnd5BoB91/UzOBeDEtu3Zvy+NtP5kin8QU14Y93wLZJ6isfcXBYy/5+HCtZf38YLjKXVf1ivkimTEj1EQlHMQTfmnIVr0DwrxwZ45ne1Wx82kBd0ZawpEZgifviOvO44cNBDzpbLELUBPC9usGf9JsIfkuftX63mJHTXLqw+FOhh2S+hTsr6kqct4u4I341Mtam/jWio4tpZUbuv2+vBFDSHF7/3HldeHOt6sjnHnuRdUlzo/itTPprr1mK3P2MMfy9Pyqxe1d0K4pIgTSr6mXAwdiWq3vJ/aofr3D/WQ6tKJ6Zx/8zl2cfgWIt4njFzonjNW45vyOU0fGjOgRAcOWMKTg0ki+rxuRWevM87znKXY+LuHu6OvWNob0Vw4HczYMxCOu3KoPI7ky4hbvSHY/AKKk65X6fkLCx+n+qrBWVUtETIgYh99IFtMEbOxa1b6XWG9o6nRRQMRmYqd0Qua4SremaFOBbzpdte8fdmrYpvXOPujpzE2dVtL2nIpdCupUoLLDi7+/OKiYxtSufCv3f5/Niz0S/9m8JlR/nDbKVNSlEN1uQocRvlFUY0pnv8wWiqj8CseEms81bNkSPotGzuEAARs0bOOjIQNi4Oil5h0o1zT9TKDTCRKHD0SJMI0zY/F99Zh43mnZtXvTy935SDEb6H4rYeIHQ0p+lZ5blR+LL0VDHNaoVxa7ChR4BeRRsZbdvSDLFVO5xDGhakUspcY8NpWRV1Woa8qpwNJYy+5GeFcj6ZRYkwFx3sXBU+Q4VwrlGWBwPMtJILZKwU2uXHdEcamuIK6ZAOn51W/rmjoGIefSs3WLLgVP1vuTxsWTDEjQPicANYWp/cwk7TYpmQWkJqrcKOFGiqdVm39eWxki8UDCc789hY4jpKbOQsibScCWHl3EQaR4RiQZzzQu+UsYDlky/sFPMpyK17xICK4Cxh+qejSHKBHI+X5NfaOzQcGY1eBQFNoS1vd2lauk5AJgeEILF3whJIuQ5vz0/OptCS27zep0M1Ssyhyg+fUCKcREYSVXRP3VhhbYLuEjIeQKm7AV2nMqdsVYflTodoS0RGWhy6XYzCwhlVGmkFkCMQpkPwTpSJFmbeIZ2BWvBkQ1QtYg8SDEbinlZkWKLRJzk5GibskcV+k+lM/TEf4LUCv274bICPEAAAAASUVORK5CYII=",y.ticketGate="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAADiUlEQVR4nO2cv2sUQRTHPyZGQ7QQUbG4axUUUQkWoqUgFloErMUUWgqC2IiCBFHwH/APMKKNYJFGEIKJlcZfhKBCCjH+Nmo0aiTJWcwcN3fs7e3evJ3dw/eBI5e3c9/35mXuO3vcbkBRFEVRFEVJwaoO0SwcW4HLwIcMtGeBa8DODLRzpRc4DowBFechjas9ZnP2ZpDHizJwA3gLzADDQClm/AAwTW1i38i+gW6OaVtDM9LOx4sS8Jn6v3TFxqKSXnLGTADHgD6yb2CfzTXhxIYixqedjzfDNsGITVCyzyv2mMuQjS8AJ4Au51jWDazSBZy0NVSAiw3j08xHhBkrXnZiZRubcWKHgGVb+OEInVANrHLE1rIMHHTiSecjRpKEG4B3Nna6iU7oBgKcoVbnehsL3kB3yZfto7rkr9sxV+3v96h/27rk0cAuYNQev2JjSeYjSglzrtVourP22GZgHvNW2RWjk0cDAfoxtf0ENtF6Polotkra4RRmB7wNPBHUleIRcAdYg6k1OHG71k3gjX2+t4VOXisQYJ8d8xpTc2F24UX780UCnTwbuAJ4RX3NwTaRZgW6/nHOQ8eXpLoXqK+5XZ3UJGngbg8dX5Lq7qGgDfwKdHvo+JJUtxtTq0gDJXfhUWBJUC8rloD7UmKSDXwmqJU1z6WEJBuYZAcuCmK1SjbwpaBW1hSygR8FtbLmk5SQZAN/CGplzVweSVtt+0m/Fcv7NAZgdcz4VPWtTDowhuqXRX8FtEKxQK3uYEitnCKsQDEdSQ/8L5Fo4DiCZ/YBEalbooHLBPYSIYLXrR4YgXqgJyE8MC+PDFJXCA/MyyMLV5d6YATqgZ6oB3qiHhgQ9cAI1AM90c/Cnuhn4YCoB0agHuiJeqAn6oEBUQ+MQD3QE/VAT9QDA6IeGIF6oCehPXCbQD6pHB3jgWuBQeABMCmQrxWTNtegzd2MwntgP+YW/Dnntd9tbL94dbAd8+8Evjj5fgG3gAMpdIJfpe+yDnN/8GNnfAV4aONxK0KKXuAocJfaKqsAU8BZYGOL1wdv4DjwFLOy5p1x1X8CsSOLYhKyBbMq3zt1/cGsyinMJW6NBG/gb+fYIuZ+swGgJ4si2qQHU9MItVu8KpjaGwnewGr8PPX3nRWVMqZWkStU0xA8YcaIzEdPpD3RBnqiDfSknav0O9Hv4vCaj65ARVEURVEURVGUjuMfWbTN9E0AqgAAAAAASUVORK5CYII=",y.door="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABmJLR0QA/wD/AP+gvaeTAAAC60lEQVR4nO3dMWsUQQCG4TcXLBRsooWdGAMWgphekYjlpcgfCNikPTtby5S2dtZpjFhqIZLGyoBa2CkkkICHRUBBNGcxJ5ybi7e7mZ395vI9sBBIMjObN7dzF9gcTI9zwArwFNgHdoFumws6jS4C94FN4DswKBw77S3t9LgMrAEvgJ8cjVA8rAGLwCNgm8kBHKQBs8AS8Bj4TPkf/rivtZrOAsvAE2CP8hE+AuvALWBmzOetgjlgFdgADigX4DewBTwEro0Z00EqqropD4AfwEugB1yaML6DlHCd8Bu9BRxSLkKf8MhZBc5XmGtSkKpPCo47snqdM0u4pq8Dnyh/kl8Ie8gycKbm3KmCDMjkdU6XapvyNuEp7WKk+VMGyeKSuMP/T+AX8Bp4AFxpYH4HKRi36Cqbcuz5cxs/uuKCVwh/+Gtr/qzGn4k9IEcX2cQcbc7f6PidmIPZyTmIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxOQcZIHwbzU+AFdbXou0VDdFPh+Z41nC+bO/6bMp30bm6Cecv9Hxc75kTaWcg7w55mMrSHXJWiBs6O/5d1PP+pLl+9TFxs/5kjWVHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hxEDEOIsZBxDiIGAcR4yBiHESMg4hJEaQH3Ew0VxnSb9ed4qbPvw6At8Cr4fEOOEwwf/EcY/9QU9/UWtmkN7gf/e8Lm8R/BKV8g/udSGtuVBfYo/rJxQqUKsju8FyjavLhNg/cGx53gQsVv7/uJa7t++RPJOViUwVykJqaCpR1EBUdwr7RI+wjfervQUmfpsam+tvTAW4Ad4Al4DYwV3Ms1XPM3jywBmwAXxF5IRfbH0Ok4hC5QW8AAAAAAElFTkSuQmCC",y.routeA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEbUlEQVRoge2aXYhVVRTHf3dIZ0zUsWZknBTHyYKocPzsQexFH0wpTWgSaxqDgqCExHzoKSIF3/RBMBQRCizFKEqajKGHCrMPFcY+xo8mR1KpMdNRtBzH48Nam31nvOfsve+cc6+Ifzjsc89Z6/9f+5x99l577wu3CXIZcg8H6oHR+rsXOAX0ZaiZCiqBpcBWoBMJOBp09AG/Au8CTwHDyhJpDGqBdcA5BgZ9DegGOvQ4qdfybf4G3gLGljzqPFQAK4Hz2MAOAGuAGUjTGoxK4DHgTaRyxu8s8BLZNvWCqAX25gWyB5hdBM9coD2P52OgOqUYnWgAjqjwX8CTKXAuwzbNDqSTyBT1QJcK/gSMT5G7AfhZuTuBmhS5B6AS+QYiYB8wKgONe4BDqvENcFcGGmxUgWMqmBXqkB4uAtamTT4T6Af+B6YF+C3CfsiLAvzmIF31VeDhAD8nTM+yPtBvJ7YiHwb6blK/zwL9YjFDCc8DYwL8qoEryJvs1/OQrrUGuARcBx51GVd4EL6o5TbgQkAgzwJVwKfIU60CmgP8zwLbkUFyRYBfQeSAM8gbmRro+636NSOVMj1RCGapX3eg3014SIlOBfpNQZpEL3A38jYuKNeDATw5ZNCNgAeSDF1Nq0nL7wLEAVo0iE+Ay8B/SBMDWB7AY8YsgOlJhq6KmKdwJEA8Bzyv5x/kXTfnrYQlh0Z7SpKRqyImve4JEH4caFSf9rzrXyJpewOSLPrCaCcOwq6KmFT8aoBwi5a7GDgbvAbsHmTjgytaViUZuSpyUUvfvGoE8Iyef4G80fyjTe81q60PzNiV2PW7krJzWtZ6ij6NnaMnjcijgSUM/IbiYLT/TTJyVeSolr75jmkyPdi3ORijkOBewK8iRrvTM4aCaMROoFw9TT12Tp6UWE5Tm37gPgdnDukgImCyR7yJ6FaiJofdGrX7zYPzF7V9w2E3Xe1Ough9cq29Wi522JmxY4cH504tVzjszDT6cw9OJ+YjT6WL+OZlnpwzlVDcj6QwSc0wBxxXm3kB8caiAjihhAtibDbo/f0BvN+rz4aY+wuwCaNPy/HCaiX9kdKtPe1XzdVpklYhGXAEPJEmcQwWqtYZJHtOFauwy0BZvxXT7F7PgnwEcFoFnstCQNGiGqfxT2OC0aoiPcC4DPjHIVPcCBn5M0Ubxa2K+MCsurS5DNPAJGQKGyGJX1pYrJwXVaMkeFVF/0lJtEG5IuC1FPi8kQM+UuFDDO2jrETGJ7MYV/I9kmpsCrF5CDxblOMEcO/QwyoOTcgqSQS8XIT/K+p7GXd2nTlMl9xHfC5WCAvV5zol6Gp98Q5SmV78nuwj2L3HtzOMKxg54H0ksD9Jns01YvO29yjDx+3CcOArJMDfKTyNnYDdumun8M7vLYGRwNdIoEeR3SeDWuTPAhGyBJvF1l2qGIMdFzqQLrUaOIgdd8r6B4EQ1GB3aH/AVuwwZRwrikUddj8+0vO6RI9bGBOBP/SYWOZYhoxGPe7ABzcANvIdFIEv9s4AAAAASUVORK5CYII=",y.routeB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEWElEQVRoge3aXYhVVRQH8N9IOZqZWo5MljUNBUGGX30SQZCRCWVERBQWQUJQQSI9RA8RFfQSFAVF0Uu9VBA9KIlkRUXfljWJaOWofWhqmWkZaXp72Ptwrlfn7HNnzpmx6A+Hc+6cdf7/te7de6119h7+I+iokXs0puKE+Hk3fsT+GjUrQSeuw3NYJzjcaDn2Yy2ewTU4dkQ8HQBdeAQ7Her039iMvnh8F//WbLMdD2DSsHvdhFG4G7vkjn2GezFHGFqt6MSFuE8ILnvuZ9yu3qF+RHRhRZMjy3DBIHguxcomntcwsSIfk+jB+ii8DVdXwHmjfGj2CUmiVkxFfxRchZMr5O7Bmsi9DpMr5D4EncIcaOADjK9B40Ssjhrv4ZgaNDweBb6JgnWhW8hwDTxcNfl5OIC/MKvA7kWH147sOICfsFR6Xl0ipOp9OGcojrciyyyPJuyKAmk9nkhwPRXtlg7a6xbMiYS7MCFhmwWyFr0tx0VYLPwqWTBXFnBNxu84iHMH736O7Jt5rIRtFsgXBTYz5O3L8wm+J9vQLkQHtkayGSXsywRCnpmWJezOj3abU8KjEvfPFrLIFnyZImsDx8XzuoTdKqEfOw1nFRmmApkZzx8mXSuPBYJT+4QuuAhZzYLZRYapgpN9C+tT3rVgPOY2fR6HabhMCOQPLMS3Jbgy7TOLjFKBZO31jhKCzejFGwPc68dteLckV6ZdWIRTgWSt+L6Sohn24OOWv00SfpVevCMM15uwKcH1ZzyPKTJKBbInntvtqzbgigHuXS6k1YvxNqYLQ20gZLXrtyLB1GTfGc9dCbt28Cauj9c9uDlhn2n/WmSUCuTreK603xEq//Z4PSdhm2kXpupUIH3xPFu1r6Fj5ZO3aFWlQ96krikiTAXSL7TUU5Sr7GVxi3x+FnUBs4Sh9T02FhGWeXFZgUVC/k+1Hhk6hezUjOOFOXGD8GpLaH9eKeDJ2v3XS+oWYq5QYfulh1c7bfw2xQsWHULBbAiZbsgYJeT6BuYlbFOB/IL3cT9OSnDNkzeMqSlQGksi6aeGb+3po6i5pErSMcK6bQNXVUk8AOZHra3yTrkyLJYvA9X9q3wcte6pg3ys8F7SkK7GQ8HCqLElataCW6PIDqG2VI0pwjpwQ6g1tWJ5FHqpBu6XI/fyGrgPw+nCpk0D11bIuyBy7okaw4I75XWhCtGeyNXAXRXwlUYHXo3Cqw1tUnYK9SlbjBv2PZKJ8hbi6SHwPBs5NklX+9owE3ujI4sG8fwd8dm98hWbEUOWkvdL92LNmB+fOWgYUm1ZPCQEs1u5b3a6fO/xwRr9ahsd8s73B5xRYNsr79teMAKTO4XReEtwcANOOYLNqfKtu5WOvPN7VGCcsPDWEBYuupvudQmLDg1hTauOrbtKMUFeF/qElDoRn8vrzoj+g0A7mCzfof1EHthXRrBWDBbd8v34RrzuLnziKMY0YRlnY7z+VyPbQ/wfZfAP++My3madvrIAAAAASUVORK5CYII=",y.marker="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAABfklEQVRIie3WMU/CQBQH8NfaD+RgIuJEWP0c7C4aBpyMTIY4aVxNnB3UCLakTgxOJiY0aSElkVDUNoECLeVdz+kMKYYo7cEg/+nSXvq7XK7vHcCKIkQf5PIlysaXxf2Z99zgWjb7DW9I0guZTAqpavVWAKDRuYnDm3t7AADQ63aho2mDwPdtgng0RrzOqCpyh1mGjgOdet31XNenhBRHiOcZVfW5w9MLsHR9OHAcApSeSZSebslyjzvM4vX7YBnG0LUsAUTxAhBPthXF5g6zBKMRvDcantNuU6D0igbBcUpV37jDLDgew4dpBp/NJqGieEfCsJCuVDTuMAtBBNs0savrKAhCLUA83FWUZ+4wS0gI2K0WtQzDp2GohYQc7MiyPD1HjCXEiJTkx6JbPZmz1YnAM4cLoJAul+cerlhwnN9pITiJAvIn+MeSWS4vVDJ/BUebhJdAk5gLL70tsjHPi8BMcvkSvXl6pdNXIB5ZWeVaw2v4n8D3D4/LXsfy8gV9n0oC7aAw4wAAAABJRU5ErkJggg==",y.defaultIcon=y.poi,y.chevron="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABvElEQVRoge3YWUsCURiA4TPdVdBGli1E20XLr+gHB923WFdt0k6aQZlB+guCIHi7mCXBwY7fOJ5Pm/faYc7D6DnjZ0xWls6AEWAXeAE2XK9HVIDY57cGsOV6XR0VIA5orQFsul6fVQHiMAYRVlePCRBHbRBh78C66/XGBoxaIpoxa67X3RKw1wEi7A1YSXttQx1+/ktwjyVjTAFYFlybTsAw8TuVmidjHX/vWP8GU0XZ18x2G+4bTEGIeQYWXBui8M+WYyGmohFzkgAz79oQlRDzpA0zBpwJMWVgzrUhChgfNMy5EFMC8q4NUQHmYlAwEwkwt8C0a0MUMAVcCzFFwLO5T6ev8ZK+jTGfwmtnTW/W2D7838mp8Gk0gG3XhqSIOhrGSiQ7S3RMYPB3KukZomPykhBR04SQnhk1NIyNgEngUoh4GxTEqmuDAXL4rxKSqmiYqASIu35HzCRAvKJhghIg7oWICrDo2tANhI6JCfLX8TIpDxd6MY0vG2N2PM/7EFybTvhnRlHTkxCH/bZbQtNEJC4LjH5EWICJ28Ee0TQBsQl/O35oQtwAOdfrEgXkgSv8v7V6xjdZWd3pB9JxAjY9tg5oAAAAAElFTkSuQmCC",y.person="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAADICAYAAADFh+7jAAABG2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+Gkqr6gAAAYJpQ0NQc1JHQiBJRUM2MTk2Ni0yLjEAACiRdZG7SwNBEIc/EyU+UdDCwuIUtVKJEYI2Fgm+QC1iBF9NcsklQi4edycSbAXbgIJo46vQv0BbwVoQFEUQS7FWtFE554wQETPLzn7725lhdxY80YyqW+V+0LO2GRkJKTOzc4rvkTJqqKKb1phqGRNTw1FK2tuNRItddbu1Ssf9azWJpKVCWaXwoGqYtvCo8PiKbbi8KdykpmMJ4WPhLlMuKHzt6vECP7mcKvCHy2Y0EgZPg7CS+sXxX6ymTV1YXk67nllWf+7jvqQ2mZ2ekrVNZgsWEUYIoTDGEGGC9DIgPijdCdAjO0rk+7/zJ1mSXFW8QQ6TRVKksekSdVmqJ2XVRE/KyJBz+/+3r5bWFyhUrw1BxYPjvHSAbwM+847zvu84nwfgvYezbDF/aQ/6X0XPF7X2Xahfg5PzohbfgtN1aL4zYmbsW/LK9GgaPB9B3Sw0XkL1fKFnP+cc3kJ0Vb7qArZ3oFPi6xe+AG2WZ+kub0h6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAN0UlEQVR4nO2deYxdVR3HP2/KdJkWUloKWNtOK7QFLCVFFmFYRnaQsKhYQUwxhjQEjYCQiAsuJLIGRRSCiRZFwtKAAiIgQUeWshhBWorI0ilFsKW0pQsDnU5n/OM3r30zvPfm3nvO+Z1z7zuf5Jc2ad873/P7vnvPXc75nRKRNOwATAImAzsCLcBooBnoAt7v/3M1sBx4z4vKISj5FpATJgKzEMN3SPG594DXgSVAtwNdmYim12cccDByZJuwGXgOeAnYairKlGh6dUrAQcB+lr93A/AXYK3l703FMJ+NB8pw4FhgpoPvHgFMB9YB6x18fyKi6QMZBZwC7O6wjWHAnsCHyAWfOtH07QwDTgR2UWpvCvAuHo74aPp2jgRaldtsBVYAH2g22qTZWMDMBGZ4aLcZOA7lgy+aLvfdB3psfydgH80Go+kwG3my5pM5yF2DCo1u+nDs34tnYSSwr1ZjjW76ZGRcDYE9tBpqdNOn+hZQwdj+cE4jm96E+TN120zVaKSRTR+L4sVTQlQeDDWy6b6v2KsxWqORaHpYqGiKpodFNN0xPb4FVGGLRiONbPr7vgVUoUujkUY2XSXBKYmmO2ajbwFVUNHUyKZ3AWt8ixjECo1GGtl0kLnpodADvKXRUKOb3ulbQAVvonRH0eimrwVW+hbRz1KthhrddICnfQtAxvK3tRqLpsM7wDLPGp7VbCyaLjyNzEP3wb9QXvESp0AL3cAqZPWJ5lKvFcBjiu0B0fRKNiGPZqcqtbcOeBAPCxqj6QNZg5g/BbdH/ErgIWQ1qzrR9I+yBrmSbiXdWvSk/Ad4FI/r1aPp1dmEFBMYDexs6Tu7gEXAP4E+S9+Zibg+fWh2RQoTfCzj57cgV+hLCOQdfjQ9OeOQi7ypDD2BsRu5Ml+OPF5VmRyRlGh6NlqAMcjpv4XthYbKxYbWA73e1EUikUgkEolEIpFIJBKJRCKRSCQSUaXIL1xGIkUBpyJvyMbX+XMUMnninf5YXfH3l4C/I9ObCkGRTN8ZaAMOBw4DDsBeTZle5J343/rjMcJcAFl4xgBzgRuBxYgxfUrRgxz9c3EzpSpSwTDgeOD3yHtrLZPrxZvAt5GhImKR2cC1yIRF3ybXii7gV8BejnLQEOwOXAy8gH9D00Q38BPkQjKSkKOAhUjyfBtoEq/29yVSg3HARcDL+DfLdiwgjvcD+DTwW2Q7C9/muIxVQLudlOWTFmA+8Dz+zdCMzcBZFvKXK0YAFyDruHwb4Ct6ge+YJjIPNCNH9pv4T3oocTMFXVLWBMxD1oT5TnKI8QBy9isMuyHPqH0nNvT4XdYEh0YbUg/Nd0LzEt/NluZwuBBZrOc7kXmKXuALWZLtmx2Bu/CfwLxGF/IqODeMAf6B/8TlPd4m+xp4VZqBh/GfsKLEnenSr08JuBX/iSpaHJvGBG2uxn+Cihiv4Pj+PetToQuAH9sUEtnGeLZPxwqGQ9Gdj9aI8QGKe68OxQ7kbyZLXuOehJ445yL8J6NRYitSwNA6acb0jwN3E97+pEWlhFSmftSniIX4//U3WqzG45u4ExIIjOEmvpLAH+uUkCU9vjtfK4o+v876diNJdnY4FdjPdsOGdAO3I5MN7/ArxTkHA/trN1quWhxCvApcAkyo0NcZgC7XcU0df6xzsqNOpIlu5LXt0Xx0lW1rAPo0orOGP054xlEnksQy4FJk6lUt5nnUpx0q79uP8NS5DcD5JLveWOBJo4+4MkE+jPGR0PuASSk0dnrQ6CteS5GXTAxHtrTQ6lAvcqpOQ6uivlBiTsocVaXWKXQGUsBei2uRNW1paHegI3ScTqA8A71f7yKylfBYoKgxlHglQ54+Qq0jXasA0TrgTLJtaNNuV0oumI5U5TCilumdpl+ckMuANzJ8rhW9nRJD4wxXXzwe96eqt8j+Bmmegr5Q498Zc7aNWkf6GuR+2SVXkX3byXaLOvLGXkh1rekuvtzlAob/YVaIp9OhNpPQLHPWg9zxWJ1Ld6ZDwRca6Gp1qMs0vuehzS3Ab4BpBjndRgk3z947kVqsWZnnQJON6AF2Qp6c+Wi/G6ljNyV7aoU2y8J6MR+Pb7GsyVY826/vCs86NgM3YbguzubcuOtNhPSz3KIem3F1v779A9DShzwD+VqG/AJyylpkQcR9mJ3WQe7NfSezVpxUodPXKb5a3EbGlUxjgAcNGr6aZK9Kh+IcAw0uowdZo1/G9yl+cCzEoLDROcg9fNLGlmL3CdItKdrWjPJ4XmYm4S39OjdxlqvQAnwZeIjq9VtXIZWTTjBppAbLq7QXQpTH80oeCEBXZaxEztjGNAETkXKfcxh4irPNVPwnrlacWEXvMQHoGhyXJ0l0SJyN/6RViy3U/rEvDkBfZXQBk2xcXGmxp28BNXiO2vu5XKUpJAGjgNPyZLrxkyZHdNT5t9uAe5V0JGWPPJne6ltADTqG+PdzkYvbUPiEbwFpCOmBR5LxvJLPBqC1HEsS6A2CEvJM2XfCBsczKfpwbQB6+4CNeTm9TyDMYggdKf7vxcB1jnSkYa1vAUkZTnhPuPqofn8+FJd71vxwBs3e+C/+Ta6MpON5NS7F34/4soyavfAE/o2ujDTjeTXakXnsmpp7gWl5GdNBebluAjosfH42sjAxy7z/LDxCeHmsi++xcHBkGc9rsR/wV8d6N5Gze3QI6126yXhej3akPKgLzec50OucCYSzFafpeD4URwNPWtSb671i7sa/4X3ovUg5HqkulVVnLwXYI+Yk/Bveh93xPAknkX7xyTLgNGWdTmjC/6Z+rsbzJLQjCxs21NDWiwwLn6fOnDitJck2uRxZSeKLd5ClRJs8ahiJFI6Ygsxcehcpt/Y6MlGicExBd81YtXiEMN8FFJr5+B/X78TOtO5ICv6If+N/6byXkQHsgix59m38Dx33MzKIEwjjlev5rjsaGcg1+Dd9KzDXdUcj2ykhs059G7+ZwDfSKxrNmC2wtBUbgYMc9zVSQQvwFP6NX40UA4ooMQ5ZKevb+DdIV9i44ZmA2UOPSUjSfRu/FPkRRhJwFebP1mcip1nfxj+FbmHlXDIceaGxBVn+bMKByIWVb+MfRC40IzWYy/ZkvY75K8xjCGNlzG3k842mCoMnB9o4Ss5AHp74Nv7nhv0oJDNwd5ScV+O7tcPnPIAgqbfAz0b9uR/U+X7NmG+hL4VgBDL7o16ybEzwu2GINjRiKzKdqeE5i2QJMyqLhQwTtydsy2V8CBxl2Jfck3SCfw/wOcO2mpGVm76NX41h/dY8szfpj5LPGLY5Gr+7S5bjYRr0Vu6npE/WBsx3Gh6PbI3h2/gLDPuRO0aSruxoZazCvMzYZGBFxvZtxYfAvob9yBWmBQGXYT4u7s3Qdw6u40XMtjfJFY9jnrDFwFhDHQeju81otfiqYR9ywT7YS9jjmNeSPw6/q2KfMNSfC67HbtLuJ9v2nZV8Cb/P6Qs942YUst2E7aTdgvkt0Ncd6Eoa1UqIF4Z5uEvcNRb0/cihvnqxEvOzVbDY2BOmXlxiQeONjjXWilMtaA+O2egkz/RquAm4S0lrZdxkqDtIbG75VS96MN92egTwgpLechhvoBsac9Bbe7YO89s4gFnAB0qay7GbBd3B8Gf0EmdzetI3FXX3UaB1cba38BwqZlnUXkJ2p9LSXohxvQV4Hr2kLXLQh93Rm0v/kgP96tyJ7lF+jqN+aJ7md3XUBxW+j67hti7gqjEeeRWq0Y8vOuqDc05Hv1LEDY77dIdSP2503A8nHImf15WuJyQcq9SP3I3rvgx/SqFvJaRmukZ/nIzrLuqgHYFsLutjtebNCm30AQsU2gE5eILnCPzNQHF5ATeY/ZX6FHydOp+G9wG/cN/FbTThZj7A4Fiq1aEsHI7/OWbaM0rvs6i9XkywLdzGmH448kzdZ8WFe9HfTrJDqZ12pXYScxj+qz1sBT7puqNVaMhxPQTD+4BbXXe0Blrj+otaHRqKUAzvxu+2Uxrjei+Wx/UsY3obUhZkjE0hGbkCWeXiiw6FNkp4vl9vI4wjvA+p9+57xafWuK55OzqANmpvGKMdL+Jv85xKCj2uH0o4hq9FNs4JBa1xfRdbgpOM6YciU4VCOLI2AacgNeZCoUOhDdVxPaQjfCPyICg0tMZ11/MEADiEaHgStMZ1508co+HpyN24PphDgPUKnSiK4QAXoZMPJ/XnPkU0PAta47r1+rIjgZeVxBfJcNAb1xfbFn6lgugiGl5Ga1wfb0vwAcgqz2h4dr6FTo5MK2ZuQ3s5btEMB7ke0siTlXG9VUlskQ0HGdffw32urIzrpysIHcrww2x0JADux32+eoGdTEQ2YV5j1YRNwIkUp4Zah0IbJQxfOPk0vWiGg95kyWkmH27Cz2vKIhoOsgZ/vUI7k00+3IQUw9WkqIaDjLePK7Rj9MNqAt6yJCQJRTa8TIdCG2+bfoFWdYUiXaXXY1/cX70bbwPS6lhkIxlexmVFzKdtifyTQ5GNZjjAmbjL5/m2RE5EJhxGw+3QjIy7tvP5JJZrCphurRENH8h87ObzfWC6C6H3WBLY6IaXuQJ7pn/DlchxmBv/GrInSkT4NeaGL0BhNc/ZpJ8J0oNskqtVAiQvDAN+BmwhvdmrgNM0xU4k+VX9EuAgTXE5ZAbwB5IbvhBHs1+TnDKmIb+2NuSHMAFZYfJcRfhcOZo32oCTkYLFs5DnJCWkEmUnUtXjHtzUtwXg/0qsA4OTWMKaAAAAAElFTkSuQmCC",y.floorchangeDownImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0Y2MDk5Q0IyM0EyMTFFOEExQkQ5MDk1RDU5RTBCQ0UiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0Y2MDk5Q0MyM0EyMTFFOEExQkQ5MDk1RDU5RTBCQ0UiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozRjYwOTlDOTIzQTIxMUU4QTFCRDkwOTVENTlFMEJDRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozRjYwOTlDQTIzQTIxMUU4QTFCRDkwOTVENTlFMEJDRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsNnVNkAAAJISURBVHja7NxNSsNAGAbgxD+KUnWhUCi9hrtewWO51RMUFAaXQg/QhYuCV9CtpQtxZXelxG9kAjZN0kky881k8r7wUkpKJn0ozQ+ZREmSRNkyZEx9pa6piYGu1frGtjd8x8oB4C11Ywgu241af7CAx9SlJby0SzUOC+BBxJsb6sDyGAM1Dku4Aa8DG4cdMLgAEIAABCAAEQACEIAARAAIQAACEAEgAAEIQASAAAQgABEAAhCAAEQACEAAAhABIAABCEAkkyPNz/WphwbGO2P6XnKcSwPrkXf9/5R+ouQu/RH1mbqK7N5V73tXymGU51UEOKR+dhwuW+kx1AV8BFhun7JWcd7EmjiOv+jlCruInXyT15ZLEWACq8J9RqxzGPMBqty86x4H3sMqNw+6hzHyZzrBTmOrk/QvT3e2pjxwFoD7q0hPJKpOdwXiP7w6gF1HFNlT2LoTrruIKPLO/5vMWO8Soii6eNJ0yn8XEEXZlScTz0wIGVHsu2xn6qETISLuxTMJGBqiFp5pwBTxpeV4L1Wuttt4bswJddpSvKna/sglYFsRK+PZBGwbYi0824BtQayNxwHoO2IjPC5AXxEb43EC+oZoBI8b0BdEY3guAF0jGsVzBZgizpjxZqbxXALKnDIiztR4UUiAXIjW8HwAtI1oFc8XQFuI1vF8AjSNyILnG6ApRDY8HwGbIrLi+QpYF5Edz2fAqohO8HwHlDmnvu3Bk8v7rjbQd0CZC+q8AG+ulkcALE+PekddKLiFet9zvWFZq18BBgDKKe48BY2GvQAAAABJRU5ErkJggg==",y.floorchangeUpImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Mzc3ODM3OTQyM0EyMTFFODk5MzVCRjg5RkE3NDIwNEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Mzc3ODM3OTUyM0EyMTFFODk5MzVCRjg5RkE3NDIwNEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNzc4Mzc5MjIzQTIxMUU4OTkzNUJGODlGQTc0MjA0QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNzc4Mzc5MzIzQTIxMUU4OTkzNUJGODlGQTc0MjA0QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv4uuuEAAAJCSURBVHja7NxPasJAGAXwxP6hFGwP4L53cOEJeoXuixfxGF1V6E4Q6tJFF0KPULptcdEWCuJKavpNOwEdJzpJZr6ZJO/BI5CECfk5MirEVpIk0WYDyBl1QH2nJnI7kPu9RrX68woM8JI6k3BqZ/I4ADPSpj5n4KUVxy8AuJtz6vQAXtqpPB+ABfC8IoYIWATPG2JogGXwvCCGBGgDjx0xFECbeKyIIQC6wGND9A3oEo8F0ScgB55zRF+Ap4x4m4indQAUNzFmxks7to3IDegTzwkiJ2AIeNYRuQBDwrOKyAEYIp41RNeAIeNZQXQJWAW80oiuAKuEVwrRBWAV8Qoj2gY8oo4qipd2JO+DHVBcdFhxvLRDU0RbgHXCy4VoA7COeMaIZQHrjGeEWAawCXgHEYsCNglvL2IRwCbiZSLmBWwynhYxDyDwNIimgDH1DnBbFR6xKWAfYNr2dYCxunDEcfxCm6sIUfNKVjsuOsAEVpkfpGN1X0tz3heotPnU7dQBTmClzcTo+x2lQ33DorFV4dHRLSK6GSgeK+hSH6jLhs+6pXToSpfIZBFRz2nn+dV2T66p9ww3fUN9tDDOD3WhvlvVHBsMtLD4anLNmm+uKdrC2gBAAAIQgAgAAQhAACIABCAAAYgAEIAABCACQAACEIAIAAEIQAAiAAQgAAGIABCAAAQgAsDKAn7U7Dr/YfwL0BPqPHL7OMJcXofFKusxB1dZUW+pa0fjr+X4q7rOwDQ96pO8URuzbiXH63Fbif4KMAA5SHWvsbuuvQAAAABJRU5ErkJggg==",y.popupImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0RCNzBCQjQ5QkNGMTFFRDg3QjVERTUyNTA3RDg4QTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0RCNzBCQjU5QkNGMTFFRDg3QjVERTUyNTA3RDg4QTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDREI3MEJCMjlCQ0YxMUVEODdCNURFNTI1MDdEODhBNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDREI3MEJCMzlCQ0YxMUVEODdCNURFNTI1MDdEODhBNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnxS85oAAARhSURBVHja7Js7axRRGIZ3QlQkUYyiQWMsVAwKNhrFJoXWdkr0F4iKdhaWgiixUAiiBNJYKYKlIKlE7byAlfFuYbxf8UaiSdb3w7NmncyevRt2zvPAy7LJZop3nnwzc2Y2ymazGYBSaaICQBioG835b6IoqlS6bqVH2aSsU5a737VR8Yzwyb0+V+4pt5Qbyh1lstyN/XPaYm9yKROT4oQyYpshDRETqE/pKFeYv45UIIxNjdPKKDugYWP7rl9ZUG9hepW3FJ6avFF21kOYWcoABac2Z90+rokwrcoQpaY+V5SWaoVpdhui0DByOX7lXK4wZygxuPRXKkwv5QWbHYWEifJFyVu4W6wMK4tYAwuSd8pa5UN84a7QrYHjyBI0NjCOJf0iacJ0Ko+V2fQWNGPKKuVFsQmzH1lAzFH2FZswze7eUDt9gXiprJAjE4UmzGZkgTyWKRvyfxAXZisdQYxtPmE20g/E6PYJs4Z+IEaXT5il9AM+J+LCtNIPxJjnu6zmOycwDTkSFZowAF4QBhAGEAYQBhAGEAYAYQBhAGEAYQBhAGEAEAYQBhAGEAYQBhAGAGEAYQBhAGEAYQAQBhAGEAYQBhAGEAYAYQBhAGEAYQBhAGEAEAYQBhAGEAYQBhAGAGEAYQBhAGEAYQAQBhAGEAYQBhAGEAYAYQBhAGEAYQBhAGEAEAYQBhAGEAYQBhAGAGEAYQBhAGEAYQAQBhAGEAYQBhAGEAYAYaD2wvyiEogx5hPmK/2Az4m4MK/oB3xOxIV5SD8Q44FPmDv0AzFu+4S5Sj/gcyLKZrNTb6LIBHqmrKAnEE+V1dk8SeITZlI5T0/guKBkfRPGXjqUJ8oc+gqaUWWlXSXlO5K00vtCGaSv4BnIJCyzJE0YY6FyX1lMb0HyVulSPtubYhPG+KgcoLdg2Z+TZRpmTy4JnHEnPSSc9HsdKSJMs3KFEoPJZbfPKxbGaFWGKDP1scHQUvQoVIIwxix31kyx6cxZt48ztRImR687g6bkdOS1sqPYTq9GGKNNOe0Wdii9MTPqTm4XlLLDqxUmx3LlhDLCDmiYPFf63Gp+yeQ7UmjhrhxsLadb6VE2KeucTG0sZ8won5wgw8pN5Ubmz+Mrk+Vu6J9hUsWEaQSOzMB/8eG0lVirQ1Ij0OTWFib+gyj2n3vJBjXCNDZ2YmfPdYzXUZZxd+9tXhoLDE0YY73yo06Txrb5zd2syyBMethdxwmzK83FhSqMcbIOspxKe2khC2M31q7V6NBk27ieSbhZhzDpYonyssqTYPtbexqtPYTCQhfG2Kz8dJfClVw+23fQt4RSFsL8YU8VE+ZgSEUhzBSDZU4Z++y50EpCmCnsqzS3Szyfsc/cVeYiTLjCGJ3K+yLS2BXRF2V1iAUhzHS2OmEmPYei7aGWgzDJHPJMmKMhF4MwhbkYmzJ2KLKHo5sQBmGSmK88cussFlvgWxJ6KQjjx54Y/J4JbHEOYarDnqTfSw3ThfktwAB+TNocUCnWeAAAAABJRU5ErkJggg==";y.pulsingDot={width:120,height:120,data:new Uint8Array(57600),onAdd:function(k,G){var I=document.createElement("canvas");I.width=this.width,I.height=this.height,this.context=I.getContext("2d"),this.map=k},render:function(k,G){var u=performance.now()%1e3/1e3,g=42*u+18,v=this.context,m=this.map;return v.clearRect(0,0,this.width,this.height),v.beginPath(),v.arc(this.width/2,this.height/2,g,0,2*Math.PI),v.fillStyle="rgba(189,82,255,"+(1-u)+")",v.fill(),v.beginPath(),v.arc(this.width/2,this.height/2,18,0,2*Math.PI),v.fillStyle="rgb(189,82,255)",v.strokeStyle="white",v.lineWidth=2+4*(1-u),v.fill(),v.stroke(),this.data=v.getImageData(0,0,this.width,this.height).data,m.triggerRepaint(),!0}}},84783:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=function(g){function v(m){var f=g.call(this)||this;return f.backgroundColor=m["background-color"]||"#000000",f.backgroundPattern=m["background-pattern"],f.backgroundOpacity=m["background-opacity"]||1,f}return k(v,g),v}(G.Serializable);y.PaintProperties=I;var u=function(g){function v(m){var f=g.call(this)||this;return f.visibility=m.visibility||"visible",f}return k(v,g),v}(G.Serializable);y.LayoutProperties=u;var h=function(g){function v(m){var f=g.call(this,m)||this;return f.paint=new I(m.paint||{}),f.layout=new u(m.layout||{}),f}return k(v,g),v}(G.default);y.default=h},46209:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Serializable=void 0;var k=w(91685),G=function(){function u(){}return Object.defineProperty(u.prototype,"json",{get:function(){return k.kebabize(this)},enumerable:!1,configurable:!0}),u}();y.Serializable=G;var I=function(){function u(h){this.id=h.id,this.type=h.type,this.source=h.source,this.sourceLayer=h["source-layer"],this.minzoom=h.minzoom,this.maxzoom=h.maxzoom,this.filter=h.filter,this.metadata=h.metadata}return Object.defineProperty(u.prototype,"json",{get:function(){var h=this,m=h.source,f=h.sourceLayer,_=h.minzoom,S=h.maxzoom,M=h.filter,D=h.metadata,R={id:h.id,type:h.type};return m&&(R.source=m),f&&(R["source-layer"]=f),_&&(R.minzoom=_),S&&(R.maxzoom=S),M&&(R.filter=M),this.metadata&&(R.metadata=D),this.paint&&(R.paint=this.paint.json),this.layout&&(R.layout=this.layout.json),R},enumerable:!1,configurable:!0}),u.prototype.setFilterLevel=function(h){var g=this;this.filter.forEach(function(v,m){if("proximiio-levelchangers"===g.id){var f="__level_"+h;3===m&&(v[1]=f),4===m&&(v[1][1]=f)}if(Array.isArray(v)){var S,_=!1;"=="===v[0]&&("to-number"===(S=v[1])[0]&&"get"===S[1][0]&&"level"===S[1][1]&&(v[2]=h,_=!0),"get"===S[0]&&"level"===S[1]&&(v[2]=h,_=!0)),"<="===v[0]&&("to-number"===(S=v[1])[0]&&"get"===S[1][0]&&"level_min"===S[1][1]&&(v[2]=h,_=!0),"get"===S[0]&&"level_min"===S[1]&&(v[2]=h,_=!0)),">="===v[0]&&("to-number"===(S=v[1])[0]&&"get"===S[1][0]&&"level_max"===S[1][1]&&(v[2]=h,_=!0),"get"===S[0]&&"level_max"===S[1]&&(v[2]=h,_=!0)),_&&(g.filter[m]=v)}})},u}();y.default=I},72451:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=function(g){function v(m){var f=g.call(this)||this;return f.circleRadius=m["circle-radius"]||5,f.circleColor=m["circle-color"]||"#000000",f.circleBlur=m["circle-blur"]||0,f.circleOpacity=m["circle-opacity"]||1,f.circleTranslate=m["circle-translate"]||[0,0],f.circleTranslateAnchor=m["circle-translate-anchor"]||"map",f.circlePitchScale=m["circle-pitch-scale"]||"map",f.circlePitchAlignment=m["circle-pitch-alignment"]||"viewport",f.circleStrokeWidth=m["circle-stroke-width"]||1,f.circleStrokeColor=m["circle-stroke-color"]||"#000000",f.circleStrokeOpacity=m["circle-stroke-opacity"]||1,f}return k(v,g),v}(G.Serializable);y.PaintProperties=I;var u=function(g){function v(m){var f=g.call(this)||this;return f.visibility=m.visibility||"visible",f.circleSortKey=m["circle-sort-key"]||0,f}return k(v,g),v}(G.Serializable);y.LayoutProperties=u;var h=function(g){function v(m){var f=g.call(this,m)||this;return f.type="circle",f.paint=new I(m.paint||{}),f.layout=new u(m.layout||{}),f}return k(v,g),v}(G.default);y.default=h},7106:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=function(g){function v(m){var f=g.call(this)||this;return f.fillExtrusionColor=m["fill-extrusion-color"]||"#000000",f.fillExtrusionOpacity=m["fill-extrusion-opacity"]||1,f.fillExtrusionTranslate=m["fill-extrusion-translate"]||[0,0],f.fillExtrusionTranslateAnchor=m["fill-extrusion-translate-anchor"]||"map",f.fillExtrusionPattern=m["fill-extrusion-pattern"],f.fillExtrusionHeight=m["fill-extrusion-height"]||0,f.fillExtrusionBase=m["fill-extrusion-base"]||0,f.fillExtrusionVerticalGradient=m["fill-extrusion-vertical-gradient"]||!0,f}return k(v,g),v}(G.Serializable);y.PaintProperties=I;var u=function(g){function v(m){var f=g.call(this)||this;return f.visibility=m.visibility||"visible",f}return k(v,g),v}(G.Serializable);y.LayoutProperties=u;var h=function(g){function v(m){var f=g.call(this,m)||this;return f.paint=new I(m.paint||{}),f.layout=new u(m.layout||{}),f}return k(v,g),v}(G.default);y.default=h},88818:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=function(g){function v(m){var f=g.call(this)||this;return f.fillAntialias=m["fill-antialias"]||!0,f.fillOpacity=m["fill-opacity"]||1,f.fillColor=m["fill-color"]||"#000000",f.fillOutlineColor=m["fill-outline-color"],f.fillTranslate=m["fill-translate"]||[0,0],f.fillTranslateAnchor=m["fill-translate-anchor"]||"map",f.fillPattern=m["fill-pattern"],f}return k(v,g),v}(G.Serializable);y.PaintProperties=I;var u=function(g){function v(m){var f=g.call(this)||this;return f.visibility=m.visibility||"visible",f}return k(v,g),v}(G.Serializable);y.LayoutProperties=u;var h=function(g){function v(m){var f=g.call(this,m)||this;return f.paint=new I(m.paint||{}),f.layout=new u(m.layout||{}),f}return k(v,g),v}(G.default);y.default=h},1787:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=function(g){function v(m){var f=g.call(this)||this;return f.heatmapRadius=m["heatmap-radius"]||30,f.heatmapWeight=m["heatmap-weight"]||1,f.heatmapIntensity=m["heatmap-intensity"]||1,f.heatmapOpacity=m["heatmap-opacity"]||1,f.heatmapColor=m["heatmap-color"]||"",f}return k(v,g),v}(G.Serializable);y.PaintProperties=I;var u=function(g){function v(m){var f=g.call(this)||this;return f.visibility=m.visibility||"visible",f}return k(v,g),v}(G.Serializable);y.LayoutProperties=u;var h=function(g){function v(m){var f=g.call(this,m)||this;return f.paint=new I(m.paint||{}),f.layout=new u(m.layout||{}),f}return k(v,g),v}(G.default);y.default=h},66850:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=function(g){function v(m){var f=g.call(this)||this;return f.hillshadeIlluminationDirection=m["hillshade-illumination-direction"]||335,f.hillshadeIlluminationAnchor=m["hillshade-illumination-anchor"]||"viewport",f.hillshadeExaggeration=m["hillshade-exaggeration"]||.5,f.hillshadeShadowColor=m["hillshade-shadow-color"]||'#000000"',f.hillshadeHighlightColor=m["hillshade-highlight-color"]||"#ffffff",f.hillshadeAccentColor=m["hillshade-accent-color"]||"#000000",f}return k(v,g),v}(G.Serializable);y.PaintProperties=I;var u=function(g){function v(m){var f=g.call(this)||this;return f.visibility=m.visibility||"visible",f}return k(v,g),v}(G.Serializable);y.LayoutProperties=u;var h=function(g){function v(m){var f=g.call(this,m)||this;return f.paint=new I(m.paint||{}),f.layout=new u(m.layout||{}),f}return k(v,g),v}(G.default);y.default=h},21780:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=function(g){function v(m){var f=g.call(this)||this;return f.lineColor=m["line-color"]||"#000000",f.lineOpacity=m["line-opacity"]||1,f.lineTranslate=m["line-translate"]||[0,0],f.lineTranslateAnchor=m["line-translate-anchor"]||"map",f.lineWidth=m["line-width"]||1,f.lineGapWidth=m["line-gap-width"]||0,f.lineOffset=m["line-offset"]||0,f.lineBlur=m["line-blur"]||0,f.lineDasharray=m["line-dasharray"],f.linePattern=m["line-pattern"],f.lineGradient=m["line-gradient"],f}return k(v,g),v}(G.Serializable);y.PaintProperties=I;var u=function(g){function v(m){var f=g.call(this)||this;return f.visibility=m.visibility||"visible",f.lineCap=m["line-cap"]||"butt",f.lineJoin=m["line-join"]||"miter",f.lineMiterLimit=m["line-miter-limit"]||2,f.lineRoundLimit=m["line-round-limit"]||1.05,f}return k(v,g),v}(G.Serializable);y.LayoutProperties=u;var h=function(g){function v(m){var f=g.call(this,m)||this;return f.paint=new I(m.paint||{}),f.layout=new u(m.layout||{}),f}return k(v,g),v}(G.default);y.default=h},7981:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=function(g){function v(m){var f=g.call(this)||this;return f.rasterOpacity=m["raster-opacity"]||1,f.rasterHueRotate=m["raster-hue-rotate"]||0,f.rasterBrightnessMin=m["raster-brightness-min"]||0,f.rasterBrightnessMax=m["raster-brightness-max"]||1,f.rasterSaturation=m["raster-saturation"]||0,f.rasterContrast=m["raster-contrast"]||0,f.rasterResampling=m["raster-resampling"]||"linear",f.rasterFadeDuration=m["raster-fade-duration"]||300,f}return k(v,g),v}(G.Serializable);y.PaintProperties=I;var u=function(g){function v(m){var f=g.call(this)||this;return f.visibility=m.visibility||"visible",f}return k(v,g),v}(G.Serializable);y.LayoutProperties=u;var h=function(g){function v(m){var f=g.call(this,m)||this;return f.paint=new I(m.paint||{}),f.layout=new u(m.layout||{}),f}return k(v,g),v}(G.default);y.default=h},24691:function(Ae,y,w){"use strict";var v,k=this&&this.__extends||(v=function(m,f){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,S){_.__proto__=S}||function(_,S){for(var M in S)Object.prototype.hasOwnProperty.call(S,M)&&(_[M]=S[M])})(m,f)},function(m,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function _(){this.constructor=m}v(m,f),m.prototype=null===f?Object.create(f):(_.prototype=f.prototype,new _)});Object.defineProperty(y,"__esModule",{value:!0}),y.LayoutProperties=y.PaintProperties=void 0;var G=w(46209),I=w(91685),u=function(v){function m(f){var _=v.call(this)||this;return _.iconColor=f["icon-color"]||"#000000",_.iconOpacity=f["icon-opacity"]||1,_.iconHaloColor=f["icon-halo-color"]||"rgba(0, 0, 0, 0)",_.iconHaloWidth=f["icon-halo-width"]||0,_.iconHaloBlur=f["icon-halo-blur"]||0,_.iconTranslate=f["icon-translate"]||[0,0],_.iconTranslateAnchor=f["icon-translate-anchor"]||"map",_.textOpacity=f["text-opacity"]||1,_.textColor=f["text-color"]||"#000000",_.textHaloColor=f["text-halo-color"]||"rgba(0, 0, 0, 0)",_.textHaloWidth=f["text-halo-width"]||0,_.textHaloBlur=f["text-halo-blur"]||0,_.textTranslate=f["text-translate"]||[0,0],_.textTranslateAnchor=f["text-translate-anchor"]||"map",_}return k(m,v),m}(G.Serializable);y.PaintProperties=u;var h=function(v){function m(f){var _=v.call(this)||this;return _.visibility=f.visibility||"visible",_.symbolPlacement=f["symbol-placement"]||"point",_.symbolSpacing=f["symbol-spacing"]||250,_.symbolAvoidEdges=f["symbol-avoid-edges"]||!1,_.symbolSortKey=f["symbol-sort-key"],_.symbolZOrder=f["symbol-z-order"]||"auto",_.iconAllowOverlap=f["icon-allow-overlap"]||!1,_.iconIgnorePlacement=f["icon-ignore-placement"]||!1,_.iconOptional=f["icon-optional"]||!1,_.iconRotationAlignment=f["icon-rotation-alignment"]||"auto",_.iconSize=f["icon-size"]||1,_.iconTextFit=f["icon-text-fit"]||"none",_.iconTextFitPadding=f["icon-text-fit-padding"]||[0,0,0,0],_.iconImage=f["icon-image"],_.iconRotate=f["icon-rotate"]||0,_.iconPadding=f["icon-padding"]||2,_.iconKeepUpright=f["icon-keep-upright"]||!1,_.iconOffset=f["icon-offset"]||[0,0],_.iconAnchor=f["icon-anchor"]||"center",_.iconPitchAlignment=f["icon-pitch-alignment"]||"auto",_.textPitchAlignment=f["text-pitch-alignment"]||"auto",_.textRotationAlignment=f["text-rotation-alignment"]||"auto",_.textFont="string"==typeof f["text-font"]&&"{textFont}"===f["text-font"]||"object"==typeof f["text-font"]&&"textFont"===f["text-font"].property?["match",["string",["get","textFont"]],"Klokantech Noto Sans Bold",["literal",["Klokantech Noto Sans Bold"]],"Klokantech Noto Sans CJK Bold",["literal",["Klokantech Noto Sans CJK Bold"]],"Klokantech Noto Sans CJK Regular",["literal",["Klokantech Noto Sans CJK Regular"]],"Klokantech Noto Sans Italic",["literal",["Klokantech Noto Sans Italic"]],"Klokantech Noto Sans Regular",["literal",["Klokantech Noto Sans Regular"]],"Noto Sans Bold",["literal",["Noto Sans Bold"]],"Noto Sans Bold Italic",["literal",["Noto Sans Bold Italic"]],"Noto Sans Italic",["literal",["Noto Sans Italic"]],"Noto Sans Regular",["literal",["Noto Sans Regular"]],"Open Sans Bold",["literal",["Open Sans Bold"]],"Open Sans Italic",["literal",["Open Sans Italic"]],"Open Sans Regular",["literal",["Open Sans Regular"]],"Open Sans Semibold",["literal",["Open Sans Semibold"]],"Open Sans Semibold Italic",["literal",["Open Sans Semibold Italic"]],["literal",["Klokantech Noto Sans Bold"]]]:f["text-font"],_.textField=f["text-field"]||"",_.textSize=f["text-size"]||16,_.textMaxWidth=f["text-max-width"]||10,_.textLineHeight=f["text-line-height"]||1.2,_.textLetterSpacing=f["text-letter-spacing"]||0,_.textJustify=f["text-justify"]||"center",_.textRadialOffset=f["text-radial-offset"]||0,_.textVariableAnchor=f["text-variable-anchor"],_.textAnchor=f["text-anchor"]||"center",_.textMaxAngle=f["text-max-angle"]||45,_.textWritingMode=f["text-writing-mode"],_.textRotate=f["text-rotate"]||0,_.textPadding=f["text-padding"]||2,_.textKeepUpright=f["text-keep-upright"]||!0,_.textTransform=f["text-transform"]||"none",_.textOffset=f["text-offset"]||[0,0],_.textAllowOverlap=f["text-allow-overlap"]||!1,_.textIgnorePlacement=f["text-ignore-placement"]||!1,_.textOptional=f["text-optional"]||!1,_}return k(m,v),Object.defineProperty(m.prototype,"json",{get:function(){var f=I.kebabize(this);return f["symbol-z-order"]=this.symbolZOrder,delete f["symbol-zorder"],f},enumerable:!1,configurable:!0}),m}(G.Serializable);y.LayoutProperties=h;var g=function(v){function m(f){var _=v.call(this,f)||this;return _.paint=new u(f.paint||{}),_.layout=new h(f.layout||{}),_}return k(m,v),m}(G.default);y.default=g},9413:function(Ae,y,w){"use strict";var k=this&&this.__assign||function(){return k=Object.assign||function(fe){for(var ee,de=1,pe=arguments.length;de<pe;de++)for(var ce in ee=arguments[de])Object.prototype.hasOwnProperty.call(ee,ce)&&(fe[ce]=ee[ce]);return fe},k.apply(this,arguments)},G=this&&this.__awaiter||function(fe,ee,de,pe){return new(de||(de=Promise))(function(ae,ye){function Me(Ue){try{Fe(pe.next(Ue))}catch(Ge){ye(Ge)}}function _e(Ue){try{Fe(pe.throw(Ue))}catch(Ge){ye(Ge)}}function Fe(Ue){Ue.done?ae(Ue.value):function ce(ae){return ae instanceof de?ae:new de(function(ye){ye(ae)})}(Ue.value).then(Me,_e)}Fe((pe=pe.apply(fe,ee||[])).next())})},I=this&&this.__generator||function(fe,ee){var pe,ce,ae,ye,de={label:0,sent:function(){if(1&ae[0])throw ae[1];return ae[1]},trys:[],ops:[]};return ye={next:Me(0),throw:Me(1),return:Me(2)},"function"==typeof Symbol&&(ye[Symbol.iterator]=function(){return this}),ye;function Me(Fe){return function(Ue){return function _e(Fe){if(pe)throw new TypeError("Generator is already executing.");for(;de;)try{if(pe=1,ce&&(ae=2&Fe[0]?ce.return:Fe[0]?ce.throw||((ae=ce.return)&&ae.call(ce),0):ce.next)&&!(ae=ae.call(ce,Fe[1])).done)return ae;switch(ce=0,ae&&(Fe=[2&Fe[0],ae.value]),Fe[0]){case 0:case 1:ae=Fe;break;case 4:return de.label++,{value:Fe[1],done:!1};case 5:de.label++,ce=Fe[1],Fe=[0];continue;case 7:Fe=de.ops.pop(),de.trys.pop();continue;default:if(!(ae=(ae=de.trys).length>0&&ae[ae.length-1])&&(6===Fe[0]||2===Fe[0])){de=0;continue}if(3===Fe[0]&&(!ae||Fe[1]>ae[0]&&Fe[1]<ae[3])){de.label=Fe[1];break}if(6===Fe[0]&&de.label<ae[1]){de.label=ae[1],ae=Fe;break}if(ae&&de.label<ae[2]){de.label=ae[2],de.ops.push(Fe);break}ae[2]&&de.ops.pop(),de.trys.pop();continue}Fe=ee.call(fe,de)}catch(Ue){Fe=[6,Ue],ce=0}finally{pe=ae=0}if(5&Fe[0])throw Fe[1];return{value:Fe[0]?Fe[1]:void 0,done:!0}}([Fe,Ue])}}},u=this&&this.__spreadArray||function(fe,ee){for(var de=0,pe=ee.length,ce=fe.length;de<pe;de++,ce++)fe[ce]=ee[de];return fe};Object.defineProperty(y,"__esModule",{value:!0}),y.Map=y.globalState=void 0;var h=w(15624),g=w(55098),v=w(15831),m=w(81508),f=w(85482),_=w(94182),S=w(60370),M=w(68151),D=w(79646),R=w(97009),V=w(56349),B=w(54418),U=w(35354),F=w(91685),j=w(77580),P=w(46412),Q=w(21779),$=w(24978),oe=w(65627),X=w(30629),ie=w(18160),q=w(90777),se=w(7742),ne=w(90621),Ce=w(33175),xe=w(17981);y.globalState={initializing:!0,floor:new _.FloorModel({}),floors:[],place:new f.PlaceModel({}),places:[],style:new S.default({}),styles:[],amenities:[],features:new R.FeatureCollection({}),dynamicFeatures:new R.FeatureCollection({}),allFeatures:new R.FeatureCollection({}),latitude:0,longitude:0,loadingRoute:!1,noPlaces:!1,textNavigation:null,persons:[],user:null};var ue=function(){function fe(ee){var de=this;this.geojsonSource=new M.default(new R.FeatureCollection({})),this.syntheticSource=new D.default(new R.FeatureCollection({})),this.routingSource=new V.default,this.clusterSource=new B.default,this.imageSourceManager=new U.default,this.onMapReadyListener=new $.Subject,this.onPlaceSelectListener=new $.Subject,this.onFloorSelectListener=new $.Subject,this.onRouteFoundListener=new $.Subject,this.onRouteFailedListener=new $.Subject,this.onRouteCancelListener=new $.Subject,this.onFeatureAddListener=new $.Subject,this.onFeatureUpdateListener=new $.Subject,this.onFeatureDeleteListener=new $.Subject,this.onPolygonClickListener=new $.Subject,this.onPoiClickListener=new $.Subject,this.onPersonUpdateListener=new $.Subject,this.onStepSetListener=new $.Subject,this.defaultOptions={selector:"proximiioMap",allowNewFeatureModal:!1,newFeatureModalEvent:"click",enableTBTNavigation:!0,zoomIntoPlace:!0,isKiosk:!1,initPolygons:!1,polygonsOptions:{defaultPolygonColor:"#dbd7e8",hoverPolygonColor:"#a58dfa",selectedPolygonColor:"#6945ed",defaultLabelColor:"#6945ed",hoverLabelColor:"#fff",selectedLabelColor:"#fff",defaultPolygonHeight:3,hoverPolygonHeight:3,selectedPolygonHeight:3,base:0,opacity:1,removeOriginalPolygonsLayer:!0,minZoom:17,maxZoom:24,labelFontSize:["interpolate",["linear"],["zoom"],18,4,18.5,6,19,14,19.5,16,20,18,20.5,24,21,30,21.5,36,22,42],symbolPlacement:"line-center",autoLabelLines:!0},considerVisibilityParam:!0,fitBoundsPadding:250,minFitBoundsDistance:15,showLevelDirectionIcon:!1,showRasterFloorplans:!1,animatedRoute:!1,animationLooping:!0,useRasterTiles:!1,handleUrlParams:!1,urlParams:{startFeauture:"startFeature",destinationFeature:"destinationFeature",defaultPlace:"defaultPlace"},useGpsLocation:!1,geolocationControlOptions:{autoTrigger:!0,autoLocate:!0,position:"top-right"},language:"en",routeWithDetails:!0,blockFeatureClickWhileRouting:!1,useTimerangeData:!1,sendAnalytics:!0},this.showStartPoint=!1,this.amenityIds=[],this.filteredFeatures=[],this.hiddenFeatures=[],this.filteredAmenities=[],this.amenityFilters=[],this.hiddenAmenities=[],this.amenityCategories={},this.currentStep=0,this.counter=0,this.arc={},this.steps=500,this.animationInstances=[],ee.isKiosk&&ee.mapboxOptions&&ee.kioskSettings&&!ee.mapboxOptions.center&&(ee.mapboxOptions.center=ee.kioskSettings.coordinates);var pe=k(k({},this.defaultOptions.urlParams),ee.urlParams),ce=k(k({},this.defaultOptions.polygonsOptions),ee.polygonsOptions);if(this.defaultOptions=k(k({},this.defaultOptions),ee),this.defaultOptions.urlParams=pe,this.defaultOptions.polygonsOptions=ce,this.state=y.globalState,this.defaultOptions.isKiosk&&this.defaultOptions.useGpsLocation)throw new Error("It's not possible to use both isKiosk and useGpsLocation options as enabled!");this.map=new h.Map(k(k({},this.defaultOptions.mapboxOptions),{container:this.defaultOptions.selector?this.defaultOptions.selector:"map"})),this.map.on("load",function(ae){de.onMapReady(ae)}),this.onSourceChange=this.onSourceChange.bind(this),this.onSyntheticChange=this.onSyntheticChange.bind(this),this.onStyleChange=this.onStyleChange.bind(this),this.onStyleSelect=this.onStyleSelect.bind(this),this.onRouteUpdate=this.onRouteUpdate.bind(this),this.onRouteChange=this.onRouteChange.bind(this),this.onRouteCancel=this.onRouteCancel.bind(this),this.initialize()}return fe.prototype.initialize=function(){return G(this,void 0,void 0,function(){return I(this,function(ee){switch(ee.label){case 0:return this.geojsonSource.on(this.onSourceChange),this.syntheticSource.on(this.onSyntheticChange),this.routingSource.on(this.onRouteChange),[4,this.fetch()];case 1:return ee.sent(),[2]}})})},fe.prototype.cancelObservers=function(){return G(this,void 0,void 0,function(){return I(this,function(ee){return this.geojsonSource.off(this.onSourceChange),this.syntheticSource.off(this.onSyntheticChange),this.state.style.off(this.onStyleChange),[2]})})},fe.prototype.fetch=function(){var ee,de,pe;return G(this,void 0,void 0,function(){var ce,ae,ye,Me,_e,Fe,Ue,Ge,$e,He,Pe,je,ht,Re,tt=this;return I(this,function(it){switch(it.label){case 0:return ce=null,this.defaultOptions.handleUrlParams&&(ae=new URLSearchParams(window.location.search),ce=ae.get(this.defaultOptions.urlParams.defaultPlace)),[4,g.default.getPackage({initPolygons:this.defaultOptions.initPolygons,autoLabelLines:this.defaultOptions.polygonsOptions.autoLabelLines,amenityIdProperty:this.defaultOptions.amenityIdProperty,hiddenAmenities:this.defaultOptions.hiddenAmenities,useTimerangeData:this.defaultOptions.useTimerangeData})];case 1:return ye=it.sent(),Me=ye.places,_e=ye.style,Fe=ye.styles,Ge=ye.amenities,$e=(Ue=ye.features).features.filter(function(qe){return"elevator"===qe.properties.type||"escalator"===qe.properties.type||"staircase"===qe.properties.type}),[4,v.default.getCurrentUser()];case 2:return He=it.sent(),Pe=Me.find(ce?function(qe){return qe.id===ce||qe.name===ce}:function(qe){return qe.id===tt.defaultOptions.defaultPlaceId}),je=Me.length>0?Pe||Me[0]:new f.PlaceModel({}),ht=[je.location.lng,je.location.lat],!(null===(ee=this.defaultOptions.mapboxOptions)||void 0===ee)&&ee.center&&(ht=this.defaultOptions.mapboxOptions.center),this.defaultOptions.isKiosk&&(ht=null===(de=this.defaultOptions.kioskSettings)||void 0===de?void 0:de.coordinates),ce&&(ht=[je.location.lng,je.location.lat]),_e.center=ht,this.defaultOptions.mapboxOptions&&(this.defaultOptions.mapboxOptions.center=_e.center),this.defaultOptions.zoomLevel&&(_e.zoom=this.defaultOptions.zoomLevel),this.defaultOptions.language&&(this.geojsonSource.language=this.defaultOptions.language),this.defaultOptions.routeColor&&(Re=_e.layers.find(function(qe){return"proximiio-routing-line-remaining"===qe.id}))&&(Re.paint["line-color"]=this.defaultOptions.routeColor),null!=this.defaultOptions.forceFloorLevel&&(this.routingSource.routing.forceFloorLevel=this.defaultOptions.forceFloorLevel),null!=this.defaultOptions.routeWithDetails&&(this.routingSource.routing.routeWithDetails=this.defaultOptions.routeWithDetails),this.geojsonSource.fetch(Ue),this.routingSource.routing.setData(new R.FeatureCollection(Ue)),this.prepareStyle(_e),this.imageSourceManager.enabled=this.defaultOptions.showRasterFloorplans,this.imageSourceManager.belowLayer=_e.usesPrefixes()?"proximiio-floors":"floors",this.imageSourceManager.initialize(),this.state=k(k({},this.state),{initializing:!1,place:je,places:Me,style:_e,styles:Fe,amenities:Ge,features:Ue,allFeatures:new R.FeatureCollection(Ue),levelChangers:new R.FeatureCollection({features:$e}),latitude:ht[1],longitude:ht[0],zoom:this.defaultOptions.zoomLevel?this.defaultOptions.zoomLevel:null===(pe=this.defaultOptions.mapboxOptions)||void 0===pe?void 0:pe.zoom,noPlaces:0===Me.length,user:He}),_e.on(this.onStyleChange),this.map.setStyle(this.state.style),this.map.setCenter(ht),this.defaultOptions.allowNewFeatureModal&&this.map.on(this.defaultOptions.newFeatureModalEvent?this.defaultOptions.newFeatureModalEvent:"dblclick",function(qe){tt.featureDialog(qe)}),[2]}})})},fe.prototype.onMapReady=function(ee){var de,pe;return G(this,void 0,void 0,function(){var ce,ae,ye,Me,_e,Fe,Ue,Ge,$e,He,je=this;return I(this,function(ht){switch(ht.label){case 0:return(ce=ee.target)?(null===(de=this.state.style)||void 0===de||de.togglePaths(!0),ae=ce.getLayer("routing-line-completed"),ye=typeof ae>"u"&&typeof ce.getLayer("proximiio-routing-line-completed")<"u",Me=ce.getLayer("shops"),ye?(ce.moveLayer("proximiio-routing-line-completed","proximiio-outer_wall"),ce.moveLayer("proximiio-routing-line-remaining","proximiio-outer_wall"),ce.moveLayer("proximiio-paths","routing-line-completed")):ae&&(Me&&(ce.moveLayer("routing-line-completed","proximiio-routing-symbols"),ce.moveLayer("routing-line-remaining","proximiio-routing-symbols")),ce.moveLayer("proximiio-paths","routing-line-completed")),(_e=ce.getLayer("proximiio-routing-symbols"))&&(_e.filter.push(["match",["get","type"],["poi","poi-custom"],!1,!0]),this.state.style.getLayer("proximiio-routing-symbols").filter=_e.filter,ce.setFilter("proximiio-routing-symbols",_e.filter)),ce.setMaxZoom(30),[4,F.getImageFromBase64(j.chevron)]):[3,7];case 1:return Fe=ht.sent(),[4,F.getImageFromBase64(j.person)];case 2:return Ue=ht.sent(),[4,F.getImageFromBase64(j.floorchangeUpImage)];case 3:return Ge=ht.sent(),[4,F.getImageFromBase64(j.floorchangeDownImage)];case 4:return $e=ht.sent(),[4,F.getImageFromBase64(j.popupImage)];case 5:return He=ht.sent(),ce.addImage("chevron_right",Fe),ce.addImage("pulsing-dot",j.pulsingDot,{pixelRatio:2}),ce.addImage("person",Ue),ce.addImage("floorchange-up-image",Ge),ce.addImage("floorchange-down-image",$e),ce.addImage("popup",He,{stretchX:[[25,55],[85,115]],stretchY:[[25,100]],content:[25,25,115,100],pixelRatio:2}),this.onSourceChange(),this.updateMapSource(this.geojsonSource),this.updateMapSource(this.routingSource),this.updateCluster(),this.updateImages(),this.filteredAmenities=this.amenityIds,this.imageSourceManager.setLevel(ce,null===(pe=this.state.floor)||void 0===pe?void 0:pe.level,this.state),[4,this.onPlaceSelect(this.state.place,this.defaultOptions.zoomIntoPlace)];case 6:ht.sent(),this.defaultOptions.useRasterTiles&&this.initRasterTiles(),this.defaultOptions.initPolygons&&this.initPolygons(),this.defaultOptions.isKiosk&&this.initKiosk(),this.defaultOptions.considerVisibilityParam&&this.handlePoiVisibility(),this.defaultOptions.showLevelDirectionIcon&&this.initDirectionIcon(),this.defaultOptions.animatedRoute&&this.initAnimatedRoute(),this.defaultOptions.hiddenAmenities&&["proximiio-pois-icons","proximiio-pois-labels","pois-icons","pois-labels","poi-custom-icons"].forEach(function(Re){var tt=je.map.getLayer(Re);if(tt){var it=u([],tt.filter);it.push(["!=",["get","hideIcon"],"hide"]),je.state.style.getLayer(Re).filter=it,je.map.setFilter(Re,it)}}),this.initPersonsMap(),this.defaultOptions.initPolygons||(this.map.on("click","proximiio-pois-icons",function(Re){je.onShopClick(Re)}),this.map.on("click","proximiio-pois-labels",function(Re){je.onShopClick(Re)}),this.map.on("click","pois-icons",function(Re){je.onShopClick(Re)})),this.onMapReadyListener.next(!0),this.defaultOptions.useGpsLocation&&this.initGeoLocation(),this.defaultOptions.handleUrlParams&&this.initUrlParams(),this.map.setStyle(this.state.style),ht.label=7;case 7:return[2]}})})},fe.prototype.onRefetch=function(){return G(this,void 0,void 0,function(){var ee,de;return I(this,function(pe){switch(pe.label){case 0:return this.map?(console.log("data should be refetched"),[4,g.default.getPackage({initPolygons:this.defaultOptions.initPolygons,autoLabelLines:this.defaultOptions.polygonsOptions.autoLabelLines,amenityIdProperty:this.defaultOptions.amenityIdProperty,hiddenAmenities:this.defaultOptions.hiddenAmenities,useTimerangeData:this.defaultOptions.useTimerangeData})]):[3,2];case 1:ee=pe.sent().features,de=ee.features.filter(function(ce){return"elevator"===ce.properties.type||"escalator"===ce.properties.type||"staircase"===ce.properties.type}),this.state=k(k({},this.state),{features:ee,allFeatures:new R.FeatureCollection(ee),levelChangers:new R.FeatureCollection({features:de})}),this.geojsonSource.fetch(this.state.features),this.onFeaturesChange(),pe.label=2;case 2:return[2]}})})},fe.prototype.initKiosk=function(){this.map&&(this.showStartPoint=!1,this.defaultOptions.kioskSettings&&(this.startPoint=oe.point(this.defaultOptions.kioskSettings.coordinates,{level:this.defaultOptions.kioskSettings.level}),this.showStartPoint=!0,this.state.style.addSource("my-location",{type:"geojson",data:{type:"FeatureCollection",features:[this.startPoint]}}),this.state.style.addLayer({id:"my-location-layer",type:"symbol",source:"my-location",layout:{"icon-image":"pulsing-dot"},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]}),this.centerOnPoi(this.startPoint)))},fe.prototype.onSetKiosk=function(ee,de,pe){this.map&&this.defaultOptions.isKiosk&&(this.defaultOptions.kioskSettings={coordinates:[de,ee],level:pe},this.startPoint=oe.point(this.defaultOptions.kioskSettings.coordinates,{level:this.defaultOptions.kioskSettings.level}),this.state.style.sources["my-location"].data={type:"FeatureCollection",features:[this.startPoint]},this.map.setFilter("my-location-layer",["all",["==",["to-number",["get","level"]],pe]]),this.map.setStyle(this.state.style),this.centerOnPoi(this.startPoint))},fe.prototype.initGeoLocation=function(){var ee=this;if(this.map&&this.defaultOptions.useGpsLocation){var de=new h.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,trackUserLocation:!0});this.map.addControl(de,this.defaultOptions.geolocationControlOptions.position),this.defaultOptions.geolocationControlOptions.autoTrigger&&setTimeout(function(){de.trigger()},300),!1===this.defaultOptions.geolocationControlOptions.autoLocate&&setTimeout(function(){de._watchState="BACKGROUND",de._geolocateButton&&(de._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),de._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active")),de.fire(new Event("trackuserlocationend"))}),de.on("geolocate",function(pe){ee.startPoint=oe.point([pe.coords.longitude,pe.coords.latitude],{level:ee.state.floor.level})})}},fe.prototype.initDirectionIcon=function(){var ee=this;if(this.map){var de=this.map.getLayer("proximiio-levelchangers"),pe=this.map.getLayoutProperty("proximiio-levelchangers","icon-size");this.state.style.addSource("direction-icon-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.state.style.addLayer({id:"direction-halo-layer",type:"circle",source:"direction-icon-source",minzoom:de.minzoom,maxzoom:de.maxzoom,paint:{"circle-radius":"interpolate"===pe[0]?[pe[0],pe[1],pe[2],pe[3],50*pe[4],pe[5],50*pe[6]]:50,"circle-color":"#000"},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]},"proximiio-paths-names"),this.state.style.addLayer({id:"direction-popup-layer",type:"symbol",source:"direction-icon-source",minzoom:de.minzoom,maxzoom:de.maxzoom,layout:{"text-field":["get","description"],"icon-text-fit":"both","icon-image":["get","popupImage"],"icon-allow-overlap":!0,"text-allow-overlap":!0,"icon-anchor":"bottom","text-anchor":"bottom","text-offset":[0,-2.4]},paint:{"text-color":"#fff"},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]},"proximiio-polygons-above-paths"),this.map.on("click","proximiio-levelchangers",function(ae){if(ee.routingSource.points){var ye=ee.state.style.getSource("direction-icon-source").data.features.find(function(Me){return Me.properties.level===ee.state.floor.level});ye&&ye.properties&&!isNaN(ye.properties.destinationLevel)&&ae.features[0].properties.id===ye.properties.levelChangerId&&(ee.setFloorByLevel(ye.properties.destinationLevel),ee.setNavStep("next"))}}),this.map.on("click","direction-popup-layer",function(ae){ee.routingSource.points&&ae.features[0].properties&&!isNaN(ae.features[0].properties.destinationLevel)&&(ee.setFloorByLevel(ae.features[0].properties.destinationLevel),ee.setNavStep("next"))})}},fe.prototype.addDirectionFeatures=function(){var ee=this,de=this.state.textNavigation.steps.filter(function(pe,ce,ae){var ye,Me=pe.direction.split("_")[0];if(pe.levelChangerId&&("UP"===Me||"DOWN"===Me))return pe.destinationLevel=ae[ce+1]?null===(ye=ae[ce+1])||void 0===ye?void 0:ye.level:null,pe}).map(function(pe){var ce=ee.state.allFeatures.features.find(function(_e){return _e.id===pe.levelChangerId}),ae=pe.direction.split("_")[0],ye=pe.direction.split("_")[1],Me=ee.state.floors.filter(function(_e){return _e.level===pe.destinationLevel})?ee.state.floors.filter(function(_e){return _e.level===pe.destinationLevel})[0]:ee.state.floor;return new R.default({type:"Feature",geometry:ce.geometry,properties:{usecase:"floor-change-symbol",icon:"UP"===ae?"floorchange-up-image":"floorchange-down-image",iconOffset:"UP"===ae?[4,-90]:[4,90],popupImage:"popup",description:xe.translations[ee.defaultOptions.language][ye]+" \n "+xe.translations[ee.defaultOptions.language][ae]+" "+xe.translations[ee.defaultOptions.language].TO_FLOOR+" "+(Me.name?ee.getFloorName(Me):pe.destinationLevel),level:pe.level,destinationLevel:pe.destinationLevel,levelChangerId:ce.properties.id}})});this.state.style.sources["direction-icon-source"].data={type:"FeatureCollection",features:de},this.map.setStyle(this.state.style)},fe.prototype.onSetFeaturesHighlight=function(ee,de,pe,ce){var ae=this.map,ye=this.state.allFeatures.features.filter(function(Fe){return ee.includes(Fe.id||Fe.properties.id)}),Me=this.map.getLayer("proximiio-pois-icons"),_e=this.map.getLayoutProperty("proximiio-pois-icons","icon-size");ae&&(ae.getLayer("highlight-icon-layer")||this.state.style.addLayer({id:"highlight-icon-layer",type:"circle",source:"highlight-icon-source",minzoom:Me.minzoom,maxzoom:Me.maxzoom,paint:{"circle-radius":"interpolate"===_e[0]?[_e[0],_e[1],_e[2],_e[3],_e[4]*(pe||50),_e[5],_e[6]*(pe||50)]:pe,"circle-color":de||"#000","circle-blur":ce??.8},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]},this.defaultOptions.initPolygons?"shop-custom":"proximiio-shop"),ae.getSource("highlight-icon-source")||this.state.style.addSource("highlight-icon-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.state.style.sources["highlight-icon-source"].data.features=ye||[],this.map.setStyle(this.state.style))},fe.prototype.initAnimatedRoute=function(){this.map&&(this.state.style.addSource("route-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.state.style.addLayer({id:"route-point",type:"circle",source:"route-point",minzoom:17,maxzoom:24,paint:{"circle-color":"#1d8a9f","circle-radius":10},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]}))},fe.prototype.initRasterTiles=function(){var ee,de,pe,ce,ae,ye;if(this.map){var Me=this.state.style.metadata;this.state.style.addSource("raster-tiles",{type:"raster",tiles:null!==(ee=this.defaultOptions.rasterTilesOptions)&&void 0!==ee&&ee.tilesUrl?["https://api.proximi.fi/imageproxy/source="+this.defaultOptions.rasterTilesOptions.tilesUrl]:["https://api.proximi.fi/imageproxy/source="+Me["proximiio:raster:tileurl"]],tileSize:null!==(de=this.defaultOptions.rasterTilesOptions)&&void 0!==de&&de.tileSize?this.defaultOptions.rasterTilesOptions.tileSize:Me["proximiio:raster:tilesize"]?Me["proximiio:raster:tilesize"]:256,attribution:null!==(pe=this.defaultOptions.rasterTilesOptions)&&void 0!==pe&&pe.attribution?this.defaultOptions.rasterTilesOptions.attribution:Me["proximiio:raster:attribution"]?Me["proximiio:raster:attribution"]:""}),this.state.style.addLayer({id:"raster-tiles",type:"raster",source:"raster-tiles",minzoom:null!==(ce=this.defaultOptions.rasterTilesOptions)&&void 0!==ce&&ce.minZoom?this.defaultOptions.rasterTilesOptions.minZoom:Me["proximiio:raster:minzoom"]?Me["proximiio:raster:minzoom"]:15,maxzoom:null!==(ae=this.defaultOptions.rasterTilesOptions)&&void 0!==ae&&ae.maxZoom?this.defaultOptions.rasterTilesOptions.maxZoom:Me["proximiio:raster:maxzoom"]?Me["proximiio:raster:maxzoom"]:22},null!==(ye=this.defaultOptions.rasterTilesOptions)&&void 0!==ye&&ye.beforeLayer?this.defaultOptions.rasterTilesOptions.beforeLayer:Me["proximiio:raster:beforelayer"]?Me["proximiio:raster:beforelayer"]:"osm-country_label-en")}},fe.prototype.initPolygons=function(){var ee=this;if(this.map){var de=new q.PolygonTitlesLayer(this.defaultOptions.polygonsOptions);de.setFilterLevel(this.state.floor.level),this.state.style.addLayer(de.json,"proximiio-paths");var pe=new q.PolygonIconsLayer(this.defaultOptions.polygonsOptions);pe.setFilterLevel(this.state.floor.level),this.state.style.addLayer(pe.json,"proximiio-paths");var ce=new q.PolygonsLayer(this.defaultOptions.polygonsOptions);ce.setFilterLevel(this.state.floor.level),this.state.style.addLayer(ce.json,"proximiio-paths"),this.state.style.getLayer("proximiio-shop")&&this.defaultOptions.polygonsOptions.removeOriginalPolygonsLayer&&this.state.style.removeLayer("proximiio-shop"),this.map.on("click","shop-custom",function(ae){ee.onShopClick(ae)}),this.map.on("mouseenter","shop-custom",function(){ee.onShopMouseEnter()}),this.map.on("mousemove","shop-custom",function(ae){ee.onShopMouseMove(ae)}),this.map.on("mouseleave","shop-custom",function(ae){ee.onShopMouseLeave(ae)})}},fe.prototype.onShopClick=function(ee){if((!this.defaultOptions.blockFeatureClickWhileRouting||this.defaultOptions.blockFeatureClickWhileRouting&&!this.routingSource.route)&&ee.features&&ee.features[0]&&ee.features[0].properties)if(ee.features[0].properties._dynamic=ee.features[0].properties._dynamic?JSON.parse(ee.features[0].properties._dynamic):{},this.defaultOptions.initPolygons){var de=this.state.allFeatures.features.find(function(ce){var ae;return ce.properties.id===(null===(ae=ee.features[0].properties._dynamic)||void 0===ae?void 0:ae.poi_id)}),pe=this.state.allFeatures.features.find(function(ce){var ae,ye;return null!==(ae=ee.features[0].properties._dynamic)&&void 0!==ae&&ae.id?ce.id===(null===(ye=ee.features[0].properties._dynamic)||void 0===ye?void 0:ye.id):ce.properties.id===ee.features[0].properties.id});de&&this.handlePolygonSelection(de),this.onPolygonClickListener.next(de||pe)}else pe=this.state.allFeatures.features.find(function(ae){return ae.properties.id===ee.features[0].properties.id}),this.onPoiClickListener.next(pe)},fe.prototype.handlePolygonSelection=function(ee){var de=ee&&ee.properties._dynamic?ee.properties._dynamic.polygon_id:null;this.selectedPolygon&&(this.map.setFeatureState({source:"main",id:this.selectedPolygon.id},{selected:!1}),this.selectedPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.selectedPolygon.properties._dynamic.label_id},{selected:!1})),de&&(this.selectedPolygon=this.state.allFeatures.features.find(function(pe){var ce,ae;return(null===(ce=pe.properties._dynamic)||void 0===ce?void 0:ce.id)===de&&"shop-custom"===(null===(ae=pe.properties._dynamic)||void 0===ae?void 0:ae.type)}),this.selectedPolygon&&(this.map.setFeatureState({source:"main",id:this.selectedPolygon.id},{selected:!0}),this.selectedPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.selectedPolygon.properties._dynamic.label_id},{selected:!0})))},fe.prototype.onShopMouseEnter=function(){this.map.getCanvas().style.cursor="pointer"},fe.prototype.onShopMouseMove=function(ee){ee.features&&ee.features.length>0&&(ee.features[0].properties._dynamic=JSON.parse(ee.features[0].properties._dynamic?ee.features[0].properties._dynamic:{}),this.hoveredPolygon&&(this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!1}),this.hoveredPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties._dynamic.label_id},{hover:!1})),this.hoveredPolygon=ee.features[0],this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!0}),this.hoveredPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties._dynamic.label_id},{hover:!0}))},fe.prototype.onShopMouseLeave=function(ee){this.map.getCanvas().style.cursor="",this.hoveredPolygon&&(this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!1}),this.hoveredPolygon.properties._dynamic.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties._dynamic.label_id},{hover:!1})),this.hoveredPolygon=null},fe.prototype.initUrlParams=function(){var ee=new URLSearchParams(window.location.search),de=ee.get(this.defaultOptions.urlParams.startFeauture),pe=ee.get(this.defaultOptions.urlParams.destinationFeature),ce=ee.get(this.defaultOptions.urlParams.defaultPlace),ae=ce?this.state.places.find(function(_e){var Fe;return _e.id===ce||(null===(Fe=_e.name)||void 0===Fe?void 0:Fe.toLowerCase())===ce?.toLowerCase()}):this.state.place,ye=de?this.state.allFeatures.features.find(function(_e){var Fe;return _e.properties.title&&_e.properties.place_id===ae.id&&(_e.id===de||_e.properties.id===de||(null===(Fe=_e.properties.title)||void 0===Fe?void 0:Fe.toLowerCase())===de?.toLowerCase())}):this.startPoint,Me=this.state.allFeatures.features.find(function(_e){var Fe;return _e.properties.title&&_e.properties.place_id===ae.id&&(_e.id===pe||_e.properties.id===pe||(null===(Fe=_e.properties.title)||void 0===Fe?void 0:Fe.toLowerCase())===pe?.toLowerCase())});ye&&ye.id&&!Me&&(this.centerToFeature(ye.id),this.map&&this.defaultOptions.isKiosk&&this.setKiosk(ye.geometry.coordinates[1],ye.geometry.coordinates[0],ye.properties.level)),!ye&&Me&&this.centerToFeature(Me.id),ye&&Me&&this.onRouteUpdate(ye,Me)},fe.prototype.featureDialog=function(ee){var pe,de=this,ce=this.map.queryRenderedFeatures(ee.point,{layers:["proximiio-pois-icons","proximiio-pois-labels"]}),ae=ce.length>0,ye=new X.modal({footer:!0,stickyFooter:!1,closeMethods:["overlay","button","escape"],closeLabel:"Close",onClose:function(){ye.destroy()}});ye.setContent(ae?ie.EDIT_FEATURE_DIALOG(ee,ce[0]):ie.NEW_FEATURE_DIALOG(ee,null===(pe=this.state.floor)||void 0===pe?void 0:pe.level)),ye.addFooterBtn("Submit","tingle-btn tingle-btn--primary",function(){return G(de,void 0,void 0,function(){var Me,_e,Fe,Ue;return I(this,function(Ge){switch(Ge.label){case 0:return Me=new FormData(document.querySelector("#modal-form")),Ue={id:""+Me.get("id"),title:""+Me.get("title"),level:Me.get("level"),lat:Me.get("lat"),lng:Me.get("lng")},Me.get("icon").size?[4,F.getBase64FromImage(Me.get("icon"))]:[3,2];case 1:return Fe=Ge.sent(),[3,3];case 2:Fe=void 0,Ge.label=3;case 3:return Ue.icon=Fe,(_e=Ue).title&&_e.level&&_e.lat&&_e.lng?ae?[4,this.onUpdateFeature(_e.id,_e.title,+_e.level,+_e.lat,+_e.lng,_e.icon)]:[3,5]:[3,8];case 4:return Ge.sent(),[3,7];case 5:return[4,this.onAddNewFeature(_e.title,+_e.level,+_e.lat,+_e.lng,_e.icon,_e.id)];case 6:Ge.sent(),Ge.label=7;case 7:return ye.close(),[3,9];case 8:alert("Please fill all the required fields!"),Ge.label=9;case 9:return[2]}})})}),ae&&ye.addFooterBtn("Delete","tingle-btn tingle-btn--danger",function(){var Me,_e;de.onDeleteFeature(null===(_e=null===(Me=ce[0])||void 0===Me?void 0:Me.properties)||void 0===_e?void 0:_e.id),ye.close()}),ye.addFooterBtn("Cancel","tingle-btn tingle-btn--default tingle-btn--pull-right",function(){ye.close()}),ye.open()},fe.prototype.onAddNewFeature=function(ee,de,pe,ce,ae,ye,Me,_e,Fe,Ue){return void 0===Ue&&(Ue=!0),G(this,void 0,void 0,function(){var Ge,$e,He;return I(this,function(Pe){switch(Pe.label){case 0:if(Ge=ye||F.uuidv4(),this.state.allFeatures.features.findIndex(function(je){return je.id===Ge||je.properties.id===Ge})>0)throw console.error("Create feature failed: Feature with id '"+Ge+"' already exists!"),new Error("Create feature failed: Feature with id '"+Ge+"' already exists!");return $e=new R.default({type:"Feature",id:Ge,geometry:new R.Geometry({type:"Point",coordinates:[ce,pe]}),properties:k({type:"poi",usecase:"poi",id:Ge,minzoom:15,visibility:"visible",amenity:ae?ye:"default",title:ee,level:de,images:[ae],place_id:Me,floor_id:_e},Fe)}),ae&&ae.length>0?[4,F.getImageFromBase64(ae)]:[3,2];case 1:He=Pe.sent(),this.map.addImage(Ge,He),Pe.label=2;case 2:return Ue?[3,4]:(this.state.features.features.push($e),[4,m.addFeatures({type:"FeatureCollection",features:[$e.json]})]);case 3:return Pe.sent(),[3,5];case 4:this.state.dynamicFeatures.features.push($e),Pe.label=5;case 5:return this.geojsonSource.create($e),this.onFeaturesChange(),this.onFeatureAddListener.next($e),[2,$e]}})})},fe.prototype.onUpdateFeature=function(ee,de,pe,ce,ae,ye,Me,_e,Fe,Ue){return void 0===Ue&&(Ue=!0),G(this,void 0,void 0,function(){var Ge,$e,He,Pe,je;return I(this,function(ht){switch(ht.label){case 0:if(!(Ge=this.state.allFeatures.features.find(function(Re){return Re.id===ee||Re.properties.id===ee})))throw console.error("Update feature failed: Feature with id '"+ee+"' has not been found!"),new Error("Update feature failed: Feature with id '"+ee+"' has not been found!");return($e=new R.default(Ge)).geometry.coordinates=[ae||$e.geometry.coordinates[0],ce||$e.geometry.coordinates[1]],$e.properties=k(k(k({},$e.properties),{title:de||$e.properties.title,level:pe||$e.properties.level,amenity:ye?ee:$e.properties.amenity,images:ye?[ye]:$e.properties.images,place_id:Me||$e.properties.place_id,floor_id:_e||$e.properties.floor_id}),Fe),ye&&ye.length>0?[4,F.getImageFromBase64(ye)]:[3,2];case 1:He=ht.sent(),this.map.addImage(ee,He),ht.label=2;case 2:return Ue?[3,4]:(Pe=this.state.features.features.findIndex(function(Re){return Re.id===$e.id||Re.properties.id===$e.id}),this.state.features.features[Pe]=$e,[4,m.addFeatures({type:"FeatureCollection",features:[$e.json]})]);case 3:return ht.sent(),[3,5];case 4:je=this.state.dynamicFeatures.features.findIndex(function(Re){return Re.id===$e.id||Re.properties.id===$e.id}),this.state.dynamicFeatures.features[je]=$e,ht.label=5;case 5:return this.geojsonSource.update($e),this.onFeaturesChange(),this.onFeatureUpdateListener.next($e),[2,$e]}})})},fe.prototype.onDeleteFeature=function(ee,de){return void 0===de&&(de=!0),G(this,void 0,void 0,function(){var pe,ce,ae;return I(this,function(ye){switch(ye.label){case 0:if(!(pe=this.state.allFeatures.features.find(function(Me){return Me.id===ee||Me.properties.id===ee})))throw console.error("Deleting feature failed: Feature with id '"+ee+"' has not been found!"),new Error("Deleting feature failed: Feature with id '"+ee+"' has not been found!");return de?[3,2]:(ce=this.state.features.features.findIndex(function(Me){return Me.id===ee||Me.properties.id===ee}),this.state.features.features.splice(ce,1),[4,m.deleteFeatures({type:"FeatureCollection",features:[pe]})]);case 1:return ye.sent(),[3,3];case 2:ae=this.state.dynamicFeatures.features.findIndex(function(Me){return Me.id===ee||Me.properties.id===ee}),this.state.dynamicFeatures.features.splice(ae,1),ye.label=3;case 3:return this.geojsonSource.delete(ee),this.onFeaturesChange(),this.onFeatureDeleteListener.next(pe),[2]}})})},fe.prototype.onFeaturesChange=function(){this.state.allFeatures.features=u(u([],this.state.features.features),this.state.dynamicFeatures.features),this.onSourceChange(),this.routingSource.routing.setData(this.state.allFeatures),this.updateMapSource(this.routingSource)},fe.prototype.onSetFeatureFilter=function(ee,de){for(var pe=this.state.allFeatures.features.filter(function(Fe){return Fe.properties.id===ee||Fe.id===ee||Fe.properties.title===ee}),ce=function(Fe){de&&-1===ae.hiddenFeatures.findIndex(function(Ue){return Ue===Fe.properties.id})?ae.hiddenFeatures.push(Fe.properties.id):!de&&-1===ae.filteredFeatures.findIndex(function(Ue){return Ue===Fe.properties.id})&&ae.filteredFeatures.push(Fe.properties.id)},ae=this,ye=0,Me=pe;ye<Me.length;ye++)ce(Me[ye]);this.filterOutFeatures()},fe.prototype.onRemoveFeatureFilter=function(ee,de){for(var pe=this.state.allFeatures.features.filter(function(Fe){return Fe.properties.id===ee||Fe.id===ee||Fe.properties.title===ee}),ce=function(Fe){de&&-1!==ae.hiddenFeatures.findIndex(function(Ue){return Ue===Fe.properties.id})?ae.hiddenFeatures.splice(ae.hiddenFeatures.findIndex(function(Ue){return Ue===Fe.properties.id}),1):!de&&-1!==ae.filteredFeatures.findIndex(function(Ue){return Ue===Fe.properties.id})&&ae.filteredFeatures.splice(ae.filteredFeatures.findIndex(function(Ue){return Ue===Fe.properties.id}),1)},ae=this,ye=0,Me=pe;ye<Me.length;ye++)ce(Me[ye]);this.filteredFeatures=this.filteredFeatures.length>0?this.filteredFeatures:[],this.hiddenFeatures=this.hiddenFeatures.length>0?this.hiddenFeatures:[],this.filterOutFeatures()},fe.prototype.onHidePois=function(){this.hiddenFeatures=this.state.allFeatures.features.filter(function(ee){return"poi"===ee.properties.type||"poi"===ee.properties.usecase}).map(function(ee){return ee.properties.id}),this.filterOutFeatures()},fe.prototype.onResetFeatureFilters=function(){this.filteredFeatures=[],this.hiddenFeatures=[],this.filterOutFeatures()},fe.prototype.onSetAmenityFilter=function(ee,de,pe){if(de&&pe)throw new Error("It's not possible to use both category and inverted options in setAmenityFilter function!");if(de){this.amenityCategories[de].active=!0,this.amenityCategories[de].activeId=ee;var ce=[],ae=function(_e){if(ye.amenityCategories.hasOwnProperty(_e)){var Fe=ye.amenityCategories[_e];Fe.active&&(ce=Array.isArray(ee)?ce.concat(Fe.amenities.filter(function(Ue){return!Fe.activeId.includes(Ue)})):ce.concat(Fe.amenities.filter(function(Ue){return Ue!==Fe.activeId})))}},ye=this;for(var Me in this.amenityCategories)ae(Me);this.amenityFilters=this.amenityIds.filter(function(_e){return!ce.includes(_e)})}else pe&&-1===this.hiddenAmenities.findIndex(function(_e){return _e===ee})?(Array.isArray(ee)?this.hiddenAmenities.concat(ee):this.hiddenAmenities.push(ee),this.filteredAmenities=this.filteredAmenities.filter(function(_e){return _e!==ee})):!pe&&-1===this.amenityFilters.findIndex(function(_e){return _e===ee})&&(Array.isArray(ee)?this.amenityFilters.concat(ee):this.amenityFilters.push(ee));this.filteredAmenities=this.amenityFilters,this.filterOutFeatures(),pe||this.setActivePolygons(ee)},fe.prototype.onRemoveAmenityFilter=function(ee,de,pe){if(de&&pe)throw new Error("It's not possible to use both category and inverted options in removeAmenityFilter function!");if(de&&this.amenityCategories[de].active&&JSON.stringify(this.amenityCategories[de].activeId)===JSON.stringify(ee)){var ce=Array.isArray(ee)?this.amenityCategories[de].amenities.filter(function(ae){return!ee.includes(ae)}):this.amenityCategories[de].amenities.filter(function(ae){return ae!==ee});this.amenityFilters=this.amenityFilters.concat(ce),this.amenityCategories[de].active=!1}else de||(pe?(this.hiddenAmenities=this.hiddenAmenities.filter(function(ae){return ae!==ee}),-1===this.filteredAmenities.findIndex(function(ae){return ae===ee})&&(Array.isArray(ee)?this.filteredAmenities.concat(ee):this.filteredAmenities.push(ee))):this.amenityFilters=this.amenityFilters.filter(function(ae){return ae!==ee}));this.filteredAmenities=this.amenityFilters.length>0?this.amenityFilters:this.amenityIds,this.hiddenAmenities=this.hiddenAmenities.length>0?this.hiddenAmenities:[],this.filterOutFeatures(),this.setActivePolygons(null)},fe.prototype.onResetAmenityFilters=function(){for(var ee in this.amenityFilters=[],this.hiddenAmenities=[],this.amenityCategories)this.amenityCategories.hasOwnProperty(ee)&&(this.amenityCategories[ee].active=!1);this.filteredAmenities=this.amenityIds,this.filterOutFeatures(),this.setActivePolygons(null)},fe.prototype.filterOutFeatures=function(){var ee=this,de=["proximiio-pois-icons","proximiio-pois-labels","pois-icons","pois-labels"];this.defaultOptions.initPolygons&&de.push("poi-custom-icons","shop-labels"),de.forEach(function(pe){if(ee.map.getLayer(pe)){var ce=ee.map.getLayer(pe),ae=u([],ce.filter),ye=ae.findIndex(function(_e){return _e[1][1]&&"amenity"===_e[1][1][1]}),Me=ae.findIndex(function(_e){return"id"===_e[1][1]});ee.filteredAmenities.length>0&&(-1!==ye?ae[ye]=["any",["in",["get","amenity"],["literal",ee.filteredAmenities]],["in",["get","amenity",["get","_dynamic"]],["literal",ee.filteredAmenities]]]:ae.push(["any",["in",["get","amenity"],["literal",ee.filteredAmenities]],["in",["get","amenity",["get","_dynamic"]],["literal",ee.filteredAmenities]]])),ee.filteredFeatures.length>0?-1!==Me?ae[Me]=["match",["get","id"],ee.filteredFeatures,!0,!1]:ae.push(["match",["get","id"],ee.filteredFeatures,!0,!1]):-1!==Me&&ae.splice(Me,1),ee.hiddenFeatures.length>0?-1!==Me?ae[Me]=["match",["get","id"],ee.hiddenFeatures,!1,!0]:ae.push(["match",["get","id"],ee.hiddenFeatures,!1,!0]):-1!==Me&&ae.splice(Me,1),ee.state.style.getLayer(pe).filter=ae,ee.map.setFilter(pe,ae)}}),this.state.style.notify("filter-change")},fe.prototype.setActivePolygons=function(ee){var de=this;if(this.defaultOptions.initPolygons){var pe=this.activePolygonsAmenity?this.state.allFeatures.features.filter(function(Pe){var je;return(Array.isArray(de.activePolygonsAmenity)?de.activePolygonsAmenity.includes(Pe.properties.amenity):Pe.properties.amenity===de.activePolygonsAmenity)&&(null===(je=Pe.properties._dynamic)||void 0===je?void 0:je.polygon_id)&&"Point"===Pe.geometry.type}):[],ce=ee?this.state.allFeatures.features.filter(function(Pe){var je;return(Array.isArray(ee)?ee.includes(Pe.properties.amenity):Pe.properties.amenity===ee)&&(null===(je=Pe.properties._dynamic)||void 0===je?void 0:je.polygon_id)&&"Point"===Pe.geometry.type}):[];if(pe.length>0)for(var ae=function(Pe){var je=ye.state.allFeatures.features.find(function(ht){var Re,tt,it;return(null===(Re=ht.properties._dynamic)||void 0===Re?void 0:Re.id)===(null===(tt=Pe.properties._dynamic)||void 0===tt?void 0:tt.polygon_id)&&"shop-custom"===(null===(it=ht.properties._dynamic)||void 0===it?void 0:it.type)});je&&ye.map.setFeatureState({source:"main",id:je.id},{active:!1})},ye=this,Me=0,_e=pe;Me<_e.length;Me++)ae(_e[Me]);if(ce.length>0)for(var Ue=function(Pe){var je=Ge.state.allFeatures.features.find(function(ht){var Re,tt,it;return(null===(Re=ht.properties._dynamic)||void 0===Re?void 0:Re.id)===(null===(tt=Pe.properties._dynamic)||void 0===tt?void 0:tt.polygon_id)&&"shop-custom"===(null===(it=ht.properties._dynamic)||void 0===it?void 0:it.type)});je&&Ge.map.setFeatureState({source:"main",id:je.id},{active:!0})},Ge=this,$e=0,He=ce;$e<He.length;$e++)Ue(He[$e])}this.activePolygonsAmenity=ee},fe.prototype.handlePoiVisibility=function(){var ee=this,de=["proximiio-pois-icons","proximiio-pois-labels","pois-icons","pois-labels"];this.defaultOptions.initPolygons&&de.push("poi-custom-icons","shop-labels"),de.forEach(function(pe){ee.map.getLayer(pe)&&setTimeout(function(){var ce=ee.map.getLayer(pe);if(ce){var ae=u([],ce.filter),ye=ae.findIndex(function(Me){return"visibility"===Me[1][1]});-1!==ye?ae[ye]="!="===ae[ye][0]?["match",["get","visibility"],["visible","hidden","undefined"],!0,!1]:["!=",["get","visibility"],"hidden"]:ae.push(["!=",["get","visibility"],"hidden"]),ee.state.style.getLayer(pe).filter=ae,ee.map.setFilter(pe,ae)}})}),this.state.style.notify("filter-change")},fe.prototype.onToggleHiddenPois=function(){this.handlePoiVisibility()},fe.prototype.onSetPerson=function(ee,de,pe,ce){var ae=new se.default({lat:ee,lng:de,level:pe,id:ce});this.state=k(k({},this.state),{persons:[ae]}),this.initPersonsMap()},fe.prototype.onAddPerson=function(ee,de,pe,ce){var ae=new se.default({lat:ee,lng:de,level:pe,id:ce});this.state.persons=u(u([],this.state.persons),[ae]),this.initPersonsMap()},fe.prototype.onUpdatePerson=function(ee,de,pe,ce){ee.updatePosition({lat:de,lng:pe,level:ce}),this.initPersonsMap()},fe.prototype.initPersonsMap=function(){var ee=this.map;ee.getLayer("persons-layer")||this.state.style.addLayer({id:"persons-layer",type:"symbol",source:"persons-source",layout:{"icon-image":"person","icon-size":["interpolate",["exponential",.3],["zoom"],17,.1,22,.3]},filter:["all",["==",["to-number",["get","level"]],this.state.floor.level]]}),ee.getSource("persons-source")||this.state.style.addSource("persons-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}});var de=this.state.persons.map(function(pe){return oe.point([pe.lng,pe.lat],{level:pe.level})});this.state.style.sources["persons-source"].data={type:"FeatureCollection",features:de},this.onPersonUpdateListener.next(this.state.persons)},fe.prototype.prepareStyle=function(ee){ee.setSource("main",this.geojsonSource),ee.setSource("synthetic",this.syntheticSource),ee.setSource("route",this.routingSource),ee.setSource("clusters",this.clusterSource),ee.setLevel(0)},fe.prototype.onRouteChange=function(ee){return G(this,void 0,void 0,function(){var de,pe,ae,ye=this;return I(this,function(Me){switch(Me.label){case 0:return"loading-start"===ee?(this.state=k(k({},this.state),{loadingRoute:!0}),[2]):"loading-finished"!==ee?[3,3]:this.routingSource.route?(this.currentStep=0,de=this.routingSource.lines[0],pe={steps:this.routingSource.steps,destination:this.endPoint,start:this.startPoint},this.state=k(k({},this.state),{loadingRoute:!1,textNavigation:pe}),this.defaultOptions.showLevelDirectionIcon&&this.addDirectionFeatures(),this.defaultOptions.animatedRoute&&this.addAnimatedRouteFeatures(),null!=this.defaultOptions.forceFloorLevel&&(this.routingSource.data.features=this.routingSource.data.features.map(function(_e){return _e.properties.level!==ye.defaultOptions.forceFloorLevel&&(_e.properties.level=ye.defaultOptions.forceFloorLevel),_e})),this.centerOnRoute(de),this.onRouteFoundListener.next({route:this.routingSource.route,TBTNav:this.defaultOptions.enableTBTNavigation?pe:null,details:this.defaultOptions.routeWithDetails?this.routingSource.details:null,start:this.startPoint,end:this.endPoint}),this.defaultOptions.sendAnalytics?[4,new Ce.default({organization_id:this.state.user.organization.id,organization_name:this.state.user.organization.name,startLngLat:this.routingSource.start.geometry.coordinates,startLevel:this.routingSource.start.properties.level,startSegmentId:this.routingSource.start.id,startSegmentName:this.defaultOptions.isKiosk?"kioskPoint":this.routingSource.start.properties.title,destinationFeatureId:this.routingSource.finish.id,destinationName:this.routingSource.finish.properties.title,destinationLngLat:this.routingSource.finish.geometry.coordinates,destinationLevel:this.routingSource.finish.properties.level,foundPath:this.routingSource.lines.length>0,optionAvoidBarrier:this.routingSource.routing.wayfinding.configuration.avoidBarriers,optionAvoidElevators:this.routingSource.routing.wayfinding.configuration.avoidElevators,optionAvoidEscalators:this.routingSource.routing.wayfinding.configuration.avoidEscalators,optionAvoidNarrowPaths:this.routingSource.routing.wayfinding.configuration.avoidNarrowPaths,optionAvoidRamps:this.routingSource.routing.wayfinding.configuration.avoidRamps,optionAvoidStaircases:this.routingSource.routing.wayfinding.configuration.avoidStaircases,optionAvoidTicketGates:this.routingSource.routing.wayfinding.configuration.avoidTicketGates,route:this.routingSource.points.map(function(_e){return[_e.geometry.coordinates[0],_e.geometry.coordinates[1],_e.properties.level]}),rerouted:!1}).save()]:[3,2]):[3,2];case 1:Me.sent(),Me.label=2;case 2:return[2];case 3:return"route-undefined"===ee?(console.log("route not found"),this.state=k(k({},this.state),{loadingRoute:!1}),this.onRouteFailedListener.next("route not found"),[2]):((ae=this.state.style).setSource("route",this.routingSource),this.state=k(k({},this.state),{style:ae}),this.updateMapSource(this.routingSource),[2])}})})},fe.prototype.onSourceChange=function(){this.state=k(k({},this.state),{style:this.state.style}),this.updateMapSource(this.geojsonSource),this.updateCluster()},fe.prototype.onSyntheticChange=function(){this.state.style.setSource("synthetic",this.syntheticSource),this.updateMapSource(this.syntheticSource)},fe.prototype.updateMapSource=function(ee){var de=this.map;if(de&&de.getSource(ee.id)){var pe=de.getSource(ee.id);pe&&pe.setData(ee.data)}},fe.prototype.onStyleSelect=function(ee){var de=this.map;de&&(this.prepareStyle(ee),de.setStyle(ee.json)),this.state=k(k({},this.state),{style:ee})},fe.prototype.onStyleChange=function(ee,de){var pe=this.map;if(pe){if("overlay-toggled"===ee){var ce=this.state.style.overlay?"visible":"none";pe.setLayoutProperty("main-polygon-fill","visibility",ce),pe.setLayoutProperty("main-polygon-outline","visibility",ce)}if("segments-toggled"===ee){var ae=this.state.style.segments?"visible":"none";pe.setLayoutProperty("main-segment-fill","visibility",ae),pe.setLayoutProperty("main-segment-outline","visibility",ae)}if("routable-toggled"===ee){var ye=this.state.style.segments?"visible":"none";pe.setLayoutProperty("main-routable-fill","visibility",ye),pe.setLayoutProperty("main-routable-outline","visibility",ye)}"cluster-toggled"===ee&&pe.setLayoutProperty("clusters-circle","visibility",this.state.style.cluster?"visible":"none")}if("layer-update"===ee&&de){var _e=de.layer,Fe=de.changes,Ue=Fe.filter(function(Pe){return"E"===Pe.kind&&"layout"===Pe.path[0]}),Ge=Fe.filter(function(Pe){return"E"===Pe.kind&&"paint"===Pe.path[0]}),$e=this.map;$e&&(Ue.forEach(function(Pe){"E"===Pe.kind&&$e.setLayoutProperty(_e.id,Pe.path[1],Pe.rhs)}),Ge.forEach(function(Pe){"E"===Pe.kind&&$e.setPaintProperty(_e.id,Pe.path[1],Pe.rhs)}))}if("filter-change"===ee){var He=this.map;this.state.style.getLayers("main").forEach(function(Pe){He.getLayer(Pe.id)&&He.removeLayer(Pe.id),He.addLayer(Pe)})}this.map.setStyle(this.state.style),this.state=k(k({},this.state),{style:this.state.style})},fe.prototype.onToggleRasterFloorplans=function(){this.imageSourceManager.enabled=!this.imageSourceManager.enabled;var ee=this.map;ee&&this.imageSourceManager.setLevel(ee,this.state.floor.level,this.state)},fe.prototype.updateCluster=function(){var ee=this,de=this.map;if(de){var pe={type:"FeatureCollection",features:this.geojsonSource.data.features.filter(function(ae){return ae.isPoint&&ae.hasLevel(ee.state.floor.level)}).map(function(ae){return ae.json})},ce=de.getSource("clusters");ce&&ce.setData(pe)}},fe.prototype.onPlaceSelect=function(ee,de,pe){return G(this,void 0,void 0,function(){var ce,ae,ye,Me;return I(this,function(_e){switch(_e.label){case 0:return this.state=k(k({},this.state),{place:ee}),[4,P.getPlaceFloors(ee.id)];case 1:return ce=_e.sent(),ae={floors:ce.sort(function(Fe,Ue){return Fe.level-Ue.level})},ce.length>0&&(ye=ce.find(pe?function(Fe){return Fe.level===pe}:function(Fe){return 0===Fe.level}),ae.floor=ye||ce[0]),this.state=k(k({},this.state),ae),(Me=this.map)&&de&&Me.flyTo({center:[ee.location.lng,ee.location.lat]}),this.onPlaceSelectListener.next(ee),ae.floor&&this.onFloorSelect(ae.floor),[2]}})})},fe.prototype.onFloorSelect=function(ee){var pe,de=this,ce=this.map,ae=this.routingSource.levelPoints&&this.routingSource.levelPoints[ee.level]?this.routingSource.levelPoints[ee.level]:null;if(ce){if(this.state.style.setLevel(ee.level),ce.setStyle(this.state.style),setTimeout(function(){u(u([],de.state.style.getLayers("main")),de.state.style.getLayers("route")).forEach(function(Ue){ce.getLayer(Ue.id)&&ce.setFilter(Ue.id,Ue.filter)}),de.imageSourceManager.setLevel(ce,ee.level,de.state)}),ae){var ye=this.routingSource.route["path-part-"+this.currentStep]&&(null===(pe=this.routingSource.route["path-part-"+this.currentStep].properties)||void 0===pe?void 0:pe.level)===ee.level?this.routingSource.route["path-part-"+this.currentStep]:ne.lineString(this.routingSource.levelPoints[ee.level].map(function(Ue){return Ue.geometry.coordinates})),Me=1e3*oe.length(ye,{units:"kilometers"}),_e=oe.bbox(ye);Me>=this.defaultOptions.minFitBoundsDistance?ce.fitBounds(_e,{padding:this.defaultOptions.fitBoundsPadding,bearing:this.map.getBearing(),pitch:this.map.getPitch()}):this.map.flyTo({center:oe.center(ye).geometry.coordinates})}var Fe;this.defaultOptions.isKiosk&&ce.getLayer("my-location-layer")&&(ce.setFilter("my-location-layer",Fe=["all",["==",["to-number",["get","level"]],ee.level]]),this.state.style.getLayer("my-location-layer").filter=Fe),this.defaultOptions.useGpsLocation&&this.startPoint&&(this.startPoint.properties=k(k({},this.startPoint.properties),{level:ee.level})),ce.getLayer("persons-layer")&&(ce.setFilter("persons-layer",Fe=["all",["==",["to-number",["get","level"]],ee.level]]),this.state.style.getLayer("persons-layer").filter=Fe),this.defaultOptions.showLevelDirectionIcon&&ce.getLayer("direction-halo-layer")&&(ce.setFilter("direction-halo-layer",Fe=["all",["==",["to-number",["get","level"]],ee.level]]),this.state.style.getLayer("direction-halo-layer").filter=Fe,ce.setFilter("direction-popup-layer",Fe),this.state.style.getLayer("direction-popup-layer").filter=Fe),this.defaultOptions.animatedRoute&&ce.getLayer("route-point")&&(ce.setFilter("route-point",Fe=["all",["==",["to-number",["get","level"]],ee.level]]),this.state.style.getLayer("route-point").filter=Fe),ce.getLayer("highlight-icon-layer")&&(ce.setFilter("highlight-icon-layer",Fe=["all",["==",["to-number",["get","level"]],ee.level]]),this.state.style.getLayer("highlight-icon-layer").filter=Fe),this.defaultOptions.animatedRoute&&!this.defaultOptions.animationLooping&&this.routingSource.route&&this.restartAnimation()}this.state=k(k({},this.state),{floor:ee,style:this.state.style}),this.updateCluster(),this.onFloorSelectListener.next(ee)},fe.prototype.onRouteUpdate=function(ee,de){this.startPoint=ee,this.endPoint=de;try{de&&this.defaultOptions.initPolygons&&this.handlePolygonSelection(de),de&&this.defaultOptions.animatedRoute&&this.cancelAnimation(),this.routingSource.update(ee,de)}catch(pe){console.log("catched",pe)}this.state=k(k({},this.state),{style:this.state.style})},fe.prototype.onRouteCancel=function(){this.state=k(k({},this.state),{textNavigation:null}),this.defaultOptions.initPolygons&&this.handlePolygonSelection(),this.defaultOptions.showLevelDirectionIcon&&(this.state.style.sources["direction-icon-source"].data={type:"FeatureCollection",features:[]}),this.defaultOptions.animatedRoute&&(this.state.style.sources["route-point"].data={type:"FeatureCollection",features:[]},this.cancelAnimation()),this.map.setStyle(this.state.style),this.routingSource.cancel(),this.onRouteCancelListener.next("route cancelled")},fe.prototype.centerOnPoi=function(ee){if(this.state.floor.level!==parseInt(ee.properties.level,0)){var de=this.state.floors.find(function(pe){return pe.level===ee.properties.level});de&&this.onFloorSelect(de)}this.map&&this.map.flyTo({center:ee.geometry.coordinates})},fe.prototype.centerOnRoute=function(ee){var de;if(ee&&ee.properties){if(this.state.floor.level!==+ee.properties.level){var pe=this.state.floors.find(function(Me){return Me.level===+ee.properties.level});pe&&this.onFloorSelect(pe)}if(this.map){var ce=this.routingSource.route["path-part-"+this.currentStep]&&(null===(de=this.routingSource.route["path-part-"+this.currentStep].properties)||void 0===de?void 0:de.level)===this.state.floor.level?this.routingSource.route["path-part-"+this.currentStep]:ne.lineString(this.routingSource.levelPoints[this.state.floor.level].map(function(Me){return Me.geometry.coordinates})),ae=1e3*oe.length(ce,{units:"kilometers"}),ye=oe.bbox(ce);ae>=this.defaultOptions.minFitBoundsDistance?this.map.fitBounds(ye,{padding:this.defaultOptions.fitBoundsPadding,bearing:this.map.getBearing(),pitch:this.map.getPitch()}):this.map.flyTo({center:oe.center(ce).geometry.coordinates})}}},fe.prototype.centerOnCoords=function(ee,de,pe){this.map&&this.map.flyTo({center:[de,ee],zoom:pe||18})},fe.prototype.updateImages=function(){var ee=this;this.state.amenities.forEach(function(de){ee.amenityIds.push(de.id),de.icon&&ee.map.loadImage(de.icon,function(pe,ce){if(pe)throw pe;ee.map.addImage(de.id,ce)})})},fe.prototype.getUpcomingFloorNumber=function(ee){var de=this;if(this.routingSource.lines&&this.routingSource.route){var pe=this.routingSource.lines.findIndex(function(Me){return+Me.properties.level===de.state.floor.level}),ce=this.routingSource.lines[pe],ae=this.routingSource.lines.findIndex(function(Me){return"up"===ee?+Me.properties.level>ce.properties.level:+Me.properties.level<ce.properties.level}),ye=this.routingSource.lines[ae];return ye&&("up"===ee&&+ye.properties.level>this.state.floor.level||"down"===ee&&+ye.properties.level<this.state.floor.level)?+ye.properties.level:this.state.floor.level}},fe.prototype.addAnimatedRouteFeatures=function(){this.counter=0,this.arc={};for(var ee=[],de=0,pe=this.routingSource.lines;de<pe.length;de++){var ce=pe[de];if("LineString"===ce.geometry.type){var ae=oe.length(ce);this.arc[ce.id]=[];for(var ye=0;ye<ae;ye+=ae/this.steps){var Me=oe.along(oe.lineString(ce.geometry.coordinates),ye);this.arc[ce.id].push(Me.geometry.coordinates)}var _e=oe.point(ce.geometry.coordinates[0],k(k({},ce.properties),{routePartId:ce.id}));ee.push(_e)}}this.state.style.sources["route-point"].data=oe.featureCollection(ee),this.map.setStyle(this.state.style),this.animate()},fe.prototype.animate=function(){var de,pe,ce,ae,ye,Me,_e,Fe,Ue,Ge,ee=this,$e=this.map.getSource("route-point"),He=this.routingSource.route["path-part-"+this.currentStep]&&(null===(de=this.routingSource.route["path-part-"+this.currentStep].properties)||void 0===de?void 0:de.level)===this.state.floor.level?this.routingSource.route["path-part-"+this.currentStep].id:null===(ye=null===(ae=null===(ce=null===(pe=this.routingSource.levelPaths)||void 0===pe?void 0:pe[this.state.floor.level])||void 0===ce?void 0:ce.paths)||void 0===ae?void 0:ae[0])||void 0===ye?void 0:ye.id;if(He){var Pe=oe.point(null!==(Me=this.arc[He])&&void 0!==Me&&Me[this.counter]?null===(_e=this.arc[He])||void 0===_e?void 0:_e[this.counter]:null===(Fe=this.arc[He])||void 0===Fe?void 0:Fe[this.counter-1],k(k({},this.routingSource.route[He].properties),{routePartId:He})),je=null===(Ue=this.arc[He])||void 0===Ue?void 0:Ue[this.counter>=this.steps?this.counter-1:this.counter],ht=null===(Ge=this.arc[He])||void 0===Ge?void 0:Ge[this.counter>=this.steps?this.counter:this.counter+1],Re=this.map.getBearing(),tt=je&&ht?oe.bearing(oe.point(je),oe.point(ht)):Re,it=Re;if(Math.abs(Re-tt)>=6&&(it=tt),this.map.flyTo({center:je,bearing:it,duration:200,essential:!0}),$e.setData(oe.featureCollection([Pe])),this.counter<this.steps){var qe=window.requestAnimationFrame(this.animate.bind(this));this.animationInstances.push(qe)}this.counter===this.steps&&this.defaultOptions.animationLooping&&setTimeout(function(){ee.restartAnimation()},2e3),this.counter++}},fe.prototype.restartAnimation=function(){this.counter=0,this.animate()},fe.prototype.cancelAnimation=function(){for(var ee=0,de=this.animationInstances;ee<de.length;ee++)window.cancelAnimationFrame(de[ee])},fe.prototype.getClosestFeature=function(ee,de){var pe=this,ce=this.state.allFeatures.features.filter(function(Me){return Me.properties.amenity===ee&&"Point"===Me.geometry.type&&Me.properties.level===de.properties.level}),ae=this.state.allFeatures.features.filter(function(Me){return Me.properties.amenity===ee&&"Point"===Me.geometry.type});this.defaultOptions.defaultPlaceId&&(ce=ce.filter(function(Me){return Me.properties.place_id===pe.defaultOptions.defaultPlaceId}),ae=ae.filter(function(Me){return Me.properties.place_id===pe.defaultOptions.defaultPlaceId}));var ye=oe.point(de.geometry.coordinates);return(ce.length>0||ae.length>0)&&oe.nearestPoint(ye,oe.featureCollection(ce.length>0?ce:ae))},fe.prototype.getFloorName=function(ee){return ee.metadata&&ee.metadata["title_"+this.defaultOptions.language]?ee.metadata["title_"+this.defaultOptions.language]:ee.name},fe.prototype.getMapboxInstance=function(){return this.map},fe.prototype.getMapReadyListener=function(){return this.onMapReadyListener.asObservable()},fe.prototype.setLanguage=function(ee){this.geojsonSource.language=ee,this.geojsonSource.fetch(this.state.features),this.defaultOptions.language=ee,this.onFeaturesChange()},fe.prototype.setPlace=function(ee,de,pe){return G(this,void 0,void 0,function(){var ce;return I(this,function(ye){switch(ye.label){case 0:return[4,Q.getPlaceById(ee)];case 1:return ce=ye.sent(),[4,this.onPlaceSelect(ce,!(typeof de<"u")||de,pe)];case 2:return ye.sent(),[2,ce]}})})},fe.prototype.getPlaceSelectListener=function(){return this.onPlaceSelectListener.asObservable()},fe.prototype.setFloorById=function(ee){var de=this.state.floors.filter(function(pe){return pe.id===ee})?this.state.floors.filter(function(pe){return pe.id===ee})[0]:this.state.floor;return de&&this.onFloorSelect(new _.FloorModel(de)),de},fe.prototype.setFloorByLevel=function(ee){var de=this.state.floors.filter(function(pe){return pe.level===ee})?this.state.floors.filter(function(pe){return pe.level===ee})[0]:this.state.floor;return de&&this.onFloorSelect(new _.FloorModel(de)),de},fe.prototype.setFloorByWay=function(ee){var de,pe="up"===ee?this.state.floor.level+1:this.state.floor.level-1;return this.routingSource.route&&(pe=this.getUpcomingFloorNumber(ee)),(de=this.state.floors.filter(function(ce){return ce.level===pe})?this.state.floors.filter(function(ce){return ce.level===pe})[0]:this.state.floor)&&this.onFloorSelect(new _.FloorModel(de)),de},fe.prototype.getFloorSelectListener=function(){return this.onFloorSelectListener.asObservable()},fe.prototype.findRouteByIds=function(ee,de,pe,ce){var ae=de?this.state.allFeatures.features.find(function(Me){return Me.id===de||Me.properties.id===de}):this.startPoint,ye=this.state.allFeatures.features.find(function(Me){return Me.id===ee||Me.properties.id===ee});this.routingSource.toggleAccessible(pe),ce&&this.routingSource.setConfig(ce),this.onRouteUpdate(ae,ye)},fe.prototype.findRouteByTitle=function(ee,de,pe,ce){var ae=de?this.state.allFeatures.features.find(function(Me){return Me.properties.title===de}):this.startPoint,ye=this.state.allFeatures.features.find(function(Me){return Me.properties.title===ee});this.routingSource.toggleAccessible(pe),ce&&this.routingSource.setConfig(ce),this.onRouteUpdate(ae,ye)},fe.prototype.findRouteByCoords=function(ee,de,pe,ce,ae,ye,Me,_e){var Fe=ce&&ae&&ye?oe.feature({type:"Point",coordinates:[ae,ce]},{level:ye}):this.startPoint,Ue=oe.feature({type:"Point",coordinates:[de,ee]},{level:pe});this.routingSource.toggleAccessible(Me),_e&&this.routingSource.setConfig(_e),this.onRouteUpdate(Fe,Ue)},fe.prototype.findRouteToNearestFeature=function(ee,de,pe,ce){var ae=de?this.state.allFeatures.features.find(function(Me){return Me.id===de||Me.properties.id===de}):this.startPoint,ye=this.getClosestFeature(ee,ae);if(!ye)throw new Error("Feature not found");this.routingSource.toggleAccessible(pe),ce&&this.routingSource.setConfig(ce),this.onRouteUpdate(ae,ye)},fe.prototype.cancelRoute=function(){this.onRouteCancel()},fe.prototype.setNavStep=function(ee){var de=0;if(ne.isNumber(ee)&&(de=+ee),"next"===ee&&(de=this.currentStep+1),"next"===ee&&Object.keys(this.routingSource.route).length-1===this.currentStep&&(de=0),"previous"===ee&&this.currentStep>0&&(de=this.currentStep-1),de!==this.currentStep){if(this.routingSource&&this.routingSource.route&&this.routingSource.route["path-part-"+de])return this.currentStep=de,this.centerOnRoute(this.routingSource.route["path-part-"+de]),this.onStepSetListener.next(this.currentStep),ee;console.error("Route not found")}},fe.prototype.getNavStepSetListener=function(){return this.onStepSetListener.asObservable()},fe.prototype.getTBTNav=function(){return this.state.textNavigation},fe.prototype.getRouteFoundListener=function(){return this.onRouteFoundListener.asObservable()},fe.prototype.getRouteFailedListener=function(){return this.onRouteFailedListener.asObservable()},fe.prototype.getRouteCancelListener=function(){return this.onRouteCancelListener.asObservable()},fe.prototype.centerToRoute=function(){if(this.routingSource&&this.routingSource.route&&this.routingSource.route["path-part-0"]){var ee=this.routingSource.route["path-part-0"];return this.centerOnRoute(ee),ee}throw new Error("Route not found")},fe.prototype.centerToFeature=function(ee){var de=this.state.allFeatures.features.find(function(pe){return pe.id===ee||pe.properties.id===ee});if(de)return this.centerOnPoi(de),de;throw new Error("Feature not found")},fe.prototype.centerToCoordinates=function(ee,de,pe){this.centerOnCoords(ee,de,pe)},fe.prototype.addCustomFeature=function(ee,de,pe,ce,ae,ye,Me,_e,Fe,Ue){return G(this,void 0,void 0,function(){return I(this,function(Ge){switch(Ge.label){case 0:return[4,this.onAddNewFeature(ee,+de,+pe,+ce,ae,ye,Me,_e,Fe,Ue)];case 1:return[2,Ge.sent()]}})})},fe.prototype.updateFeature=function(ee,de,pe,ce,ae,ye,Me,_e,Fe,Ue){return G(this,void 0,void 0,function(){return I(this,function(Ge){switch(Ge.label){case 0:return[4,this.onUpdateFeature(ee,de,pe,ce,ae,ye,Me,_e,Fe,Ue)];case 1:return[2,Ge.sent()]}})})},fe.prototype.deleteFeature=function(ee,de){return this.onDeleteFeature(ee,de)},fe.prototype.getCustomFeaturesList=function(){return this.state.dynamicFeatures},fe.prototype.getFeatureAddListener=function(){return this.onFeatureAddListener.asObservable()},fe.prototype.getFeatureUpdateListener=function(){return this.onFeatureUpdateListener.asObservable()},fe.prototype.getFeatureDeleteListener=function(){return this.onFeatureDeleteListener.asObservable()},fe.prototype.setKiosk=function(ee,de,pe){if(!this.defaultOptions.isKiosk)throw new Error("Map is not initiated as kiosk");this.onSetKiosk(ee,de,pe)},fe.prototype.setBoundsPadding=function(ee){this.defaultOptions.fitBoundsPadding=ee},fe.prototype.setFeatureFilter=function(ee,de){this.onSetFeatureFilter(ee,de)},fe.prototype.removeFeatureFilter=function(ee,de){this.onRemoveFeatureFilter(ee,de)},fe.prototype.hidePois=function(){this.onHidePois()},fe.prototype.resetFeatureFilters=function(){this.onResetFeatureFilters()},fe.prototype.setAmenityFilter=function(ee,de,pe){if(!(!de||de&&this.amenityCategories[de]))throw new Error("It seems there is no '"+de+"' amenities category created, please set category with 'setAmenitiesCategory()' method");this.onSetAmenityFilter(ee,de,pe)},fe.prototype.removeAmenityFilter=function(ee,de,pe){if(!(!de||de&&this.amenityCategories[de]))throw new Error("It seems there is no '"+de+"' amenities category created, please set category with 'setAmenitiesCategory()' method");this.onRemoveAmenityFilter(ee,de,pe)},fe.prototype.resetAmenityFilters=function(){this.onResetAmenityFilters()},fe.prototype.setAmenitiesCategory=function(ee,de){this.amenityCategories[ee]={amenities:de}},fe.prototype.removeAmenitiesCategory=function(ee){if(!this.amenityCategories[ee])throw new Error("It seems there is no '"+ee+"' amenities category created, please set category with 'setAmenitiesCategory()' method");delete this.amenityCategories[ee]},fe.prototype.resetAmenitiesCategory=function(){this.amenityCategories={}},fe.prototype.getPolygonClickListener=function(){return this.onPolygonClickListener.asObservable()},fe.prototype.getPoiClickListener=function(){return this.onPoiClickListener.asObservable()},fe.prototype.setPerson=function(ee,de,pe,ce){this.onSetPerson(ee,de,pe,ce)},fe.prototype.upsertPerson=function(ee,de,pe,ce){var ae=ce?this.state.persons.find(function(ye){return ye.id===ce}):null;ae?this.onUpdatePerson(ae,ee,de,pe):this.onAddPerson(ee,de,pe,ce)},fe.prototype.getPersonUpdateListener=function(){return this.onPersonUpdateListener.asObservable()},fe.prototype.toggleHiddenPois=function(){this.onToggleHiddenPois()},fe.prototype.toggleRasterFloorplans=function(){this.onToggleRasterFloorplans()},fe.prototype.setFeaturesHighlight=function(ee,de,pe,ce){this.onSetFeaturesHighlight(ee,de,pe,ce)},fe.prototype.refetch=function(){this.onRefetch()},fe}();y.Map=ue},29954:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default={"proximiio:languages":{en:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"},fi:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"}},en:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"}}},36997:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(48631),G=w(97009),I=w(90621),u=function(){function h(){this.data=new G.FeatureCollection({})}return h.prototype.setData=function(g){this.data=g,this.wayfinding=new k.Wayfinding(this.data),this.wayfinding.preprocess()},h.prototype.toggleOnlyAccessible=function(g){this.wayfinding.setConfiguration(g?{avoidElevators:!1,avoidRamps:!1,avoidEscalators:!0,avoidStaircases:!0,avoidNarrowPaths:!0,avoidRevolvingDoors:!0,avoidTicketGates:!0,avoidBarriers:!0,avoidHills:!0}:{avoidElevators:!0,avoidRamps:!0,avoidEscalators:!1,avoidStaircases:!1,avoidNarrowPaths:!1,avoidRevolvingDoors:!1,avoidTicketGates:!1,avoidBarriers:!1,avoidHills:!1})},h.prototype.setConfig=function(g){this.wayfinding.setConfiguration(g)},h.prototype.route=function(g,v){var m=this,f=null,_=null;if(this.routeWithDetails){var S=this.wayfinding.runAStarWithDetails(g,v);f=S.path,_={distance:S.distance,duration:S.duration}}else f=this.wayfinding.runAStar(g,v);if(!f)return null;f=f.map(function(q){return new G.default(q)});var M={},D=0;f.forEach(function(q,se){null!=m.forceFloorLevel?(typeof M["path-part-".concat(D)]>"u"&&(M["path-part-".concat(D)]=[]),M["path-part-".concat(D)].push(q),q.isLevelChanger&&f[se+1].isLevelChanger&&q.level!==f[se+1].level&&D++):(typeof M["path-part-"+D]>"u"&&(M["path-part-"+D]=[]),M["path-part-"+D].push(q),q.isLevelChanger&&q.properties.level!==f[se+1].properties.level&&D++)});for(var R={},V=0,B=Object.entries(M);V<B.length;V++){var U=B[V],j=U[1];R[F=U[0]]=new G.default(null!=this.forceFloorLevel?j.length>1?(0,I.lineString)(j.map(function(q){return q.geometry.coordinates})):(0,I.point)(j[0].geometry.coordinates):j.length>1?I.lineString(j.map(function(q){return q.geometry.coordinates})):I.point(j[0].geometry.coordinates)),R[F].id=F,R[F].properties={level:j[j.length-1].properties.level,amenity:"chevron_right"}}for(var P={},Q=0,$=Object.entries(R);Q<$.length;Q++){var oe=$[Q],F=oe[0],X=oe[1];typeof P[X.properties.level]>"u"?P[X.properties.level]={level:X.properties.level,paths:[X]}:P[X.properties.level].paths.push(X)}var ie={};return f.forEach(function(q){typeof ie[q.properties.level]>"u"&&(ie[q.properties.level]=[]),ie[q.properties.level].push(q)}),{paths:R,points:f,levelPaths:P,levelPoints:ie,details:_}},h}();y.default=u},16:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0});var I=function(u){function h(g,v){var m=u.call(this)||this;return m.id=g,m.type=v,m}return k(h,u),Object.defineProperty(h.prototype,"source",{get:function(){return{type:this.type}},enumerable:!1,configurable:!0}),h}(w(7820).Eventable);y.default=I},54418:function(Ae,y,w){"use strict";var h,k=this&&this.__extends||(h=function(g,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(m[_]=f[_])})(g,v)},function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function m(){this.constructor=g}h(g,v),g.prototype=null===v?Object.create(v):(m.prototype=v.prototype,new m)});Object.defineProperty(y,"__esModule",{value:!0});var G=w(25057),I=w(97009),u=function(h){function g(){var v=h.call(this,"clusters")||this;return v.cluster=!0,v.data=new I.FeatureCollection({}),v}return k(g,h),g}(G.default);y.default=u},25057:function(Ae,y,w){"use strict";var h,k=this&&this.__extends||(h=function(g,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(m[_]=f[_])})(g,v)},function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function m(){this.constructor=g}h(g,v),g.prototype=null===v?Object.create(v):(m.prototype=v.prototype,new m)});Object.defineProperty(y,"__esModule",{value:!0});var G=w(16),I=w(97009),u=function(h){function g(v,m){var f=h.call(this,v,"geojson")||this;return f.cluster=!1,f.clusterRadius=50,f.clusterMaxZoom=19,f.isEditable=!0,f.data=m||new I.FeatureCollection({}),f}return k(g,h),Object.defineProperty(g.prototype,"source",{get:function(){return{type:this.type,data:this.data,cluster:this.cluster,clusterMaxZoom:this.clusterMaxZoom,clusterRadius:this.clusterRadius}},enumerable:!1,configurable:!0}),g}(G.default);y.default=u},68151:function(Ae,y,w){"use strict";var h,k=this&&this.__extends||(h=function(g,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(m[_]=f[_])})(g,v)},function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function m(){this.constructor=g}h(g,v),g.prototype=null===v?Object.create(v):(m.prototype=v.prototype,new m)});Object.defineProperty(y,"__esModule",{value:!0});var G=w(25057),I=w(97009),u=function(h){function g(v){var m=h.call(this,"main")||this;return m.language="en",m}return k(g,h),g.prototype.fetch=function(v){this.data=new I.FeatureCollection(v),this.mapLanguage()},g.prototype.create=function(v){this.data.features.push(v)},g.prototype.update=function(v){var m=this.data.features.findIndex(function(f){return f.id===v.id||f.properties.id===v.id});this.data.features[m]=v},g.prototype.delete=function(v){var m=this.data.features.findIndex(function(f){return f.id===v||f.properties.id===v});this.data.features.splice(m,1)},g.prototype.mapLanguage=function(){var v=this;this.data.features.filter(function(f){return"object"==typeof f.properties.title_i18n}).forEach(function(f){return v.mapFeatureLanguage(f,v.language)})},g.prototype.mapFeatureLanguage=function(v,m){"string"==typeof v.properties.title_i18n&&(v.properties.title_i18n=JSON.parse(v.properties.title_i18n)),"object"==typeof v.properties.title_i18n&&(v.properties.title=v.properties.title_i18n[m]?v.properties.title_i18n[m]:v.properties.title)},g.prototype.query=function(v,m){return void 0===m&&(m=0),this.data.features.filter(function(f){return f.properties.title&&f.properties.title.toLowerCase().match(v.toLowerCase())})},g.prototype.get=function(v){return this.data.features.find(function(m){return m.id===v})},g.prototype.getInternal=function(v){return this.data.features.find(function(m){return m.properties.id===v})},Object.defineProperty(g.prototype,"collection",{get:function(){return{type:"FeatureCollection",features:this.data.features.map(function(v){return v.json})}},enumerable:!1,configurable:!0}),g}(G.default);y.default=u},35354:function(Ae,y,w){"use strict";var v,k=this&&this.__extends||(v=function(m,f){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,S){_.__proto__=S}||function(_,S){for(var M in S)Object.prototype.hasOwnProperty.call(S,M)&&(_[M]=S[M])})(m,f)},function(m,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function _(){this.constructor=m}v(m,f),m.prototype=null===f?Object.create(f):(_.prototype=f.prototype,new _)}),G=this&&this.__awaiter||function(v,m,f,_){return new(f||(f=Promise))(function(M,D){function R(U){try{B(_.next(U))}catch(F){D(F)}}function V(U){try{B(_.throw(U))}catch(F){D(F)}}function B(U){U.done?M(U.value):function S(M){return M instanceof f?M:new f(function(D){D(M)})}(U.value).then(R,V)}B((_=_.apply(v,m||[])).next())})},I=this&&this.__generator||function(v,m){var _,S,M,D,f={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return D={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function R(B){return function(U){return function V(B){if(_)throw new TypeError("Generator is already executing.");for(;f;)try{if(_=1,S&&(M=2&B[0]?S.return:B[0]?S.throw||((M=S.return)&&M.call(S),0):S.next)&&!(M=M.call(S,B[1])).done)return M;switch(S=0,M&&(B=[2&B[0],M.value]),B[0]){case 0:case 1:M=B;break;case 4:return f.label++,{value:B[1],done:!1};case 5:f.label++,S=B[1],B=[0];continue;case 7:B=f.ops.pop(),f.trys.pop();continue;default:if(!(M=(M=f.trys).length>0&&M[M.length-1])&&(6===B[0]||2===B[0])){f=0;continue}if(3===B[0]&&(!M||B[1]>M[0]&&B[1]<M[3])){f.label=B[1];break}if(6===B[0]&&f.label<M[1]){f.label=M[1],M=B;break}if(M&&f.label<M[2]){f.label=M[2],f.ops.push(B);break}M[2]&&f.ops.pop(),f.trys.pop();continue}B=m.call(v,f)}catch(U){B=[6,U],S=0}finally{_=M=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,U])}}};Object.defineProperty(y,"__esModule",{value:!0});var u=w(7820),h=w(46412),g=function(v){function m(){var f=v.call(this)||this;return f.sources=[],f.layers=[],f.floors={data:[],total:0},f.belowLayer="proximiio-floors",f.enabled=!0,f}return k(m,v),m.prototype.initialize=function(){return G(this,void 0,void 0,function(){var f;return I(this,function(_){switch(_.label){case 0:return f=this,[4,h.getFloors()];case 1:return f.floors=_.sent(),[2]}})})},m.prototype.setLevel=function(f,_,S){var M=this;this.layers.forEach(function(R){try{S.style.getLayer(R)&&S.style.removeLayer(R)}catch{console.log("unable to remove layer",R)}}),this.sources.forEach(function(R){try{S.style.getSource(R)&&S.style.removeSource(R)}catch{console.log("unable to remove source",R)}}),this.enabled&&(this.floors.data.filter(function(R){return R.hasFloorplan&&R.level===_}).forEach(function(R){var B="image-source-"+R.id;S.style.addSource(B,{type:"image",url:R.floorplanImageUrl,coordinates:R.anchors}),M.sources.push(B);var U={id:"image-layer-"+R.id,type:"raster",source:B,layout:{visibility:"visible"}};S.style.addLayer(U,M.belowLayer),M.layers.push(U.id)}),f.setStyle(S.style))},m}(u.Eventable);y.default=g},56349:function(Ae,y,w){"use strict";var f,k=this&&this.__extends||(f=function(_,S){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,D){M.__proto__=D}||function(M,D){for(var R in D)Object.prototype.hasOwnProperty.call(D,R)&&(M[R]=D[R])})(_,S)},function(_,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function M(){this.constructor=_}f(_,S),_.prototype=null===S?Object.create(S):(M.prototype=S.prototype,new M)}),G=this&&this.__awaiter||function(f,_,S,M){return new(S||(S=Promise))(function(R,V){function B(j){try{F(M.next(j))}catch(P){V(P)}}function U(j){try{F(M.throw(j))}catch(P){V(P)}}function F(j){j.done?R(j.value):function D(R){return R instanceof S?R:new S(function(V){V(R)})}(j.value).then(B,U)}F((M=M.apply(f,_||[])).next())})},I=this&&this.__generator||function(f,_){var M,D,R,V,S={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return V={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function B(F){return function(j){return function U(F){if(M)throw new TypeError("Generator is already executing.");for(;S;)try{if(M=1,D&&(R=2&F[0]?D.return:F[0]?D.throw||((R=D.return)&&R.call(D),0):D.next)&&!(R=R.call(D,F[1])).done)return R;switch(D=0,R&&(F=[2&F[0],R.value]),F[0]){case 0:case 1:R=F;break;case 4:return S.label++,{value:F[1],done:!1};case 5:S.label++,D=F[1],F=[0];continue;case 7:F=S.ops.pop(),S.trys.pop();continue;default:if(!(R=(R=S.trys).length>0&&R[R.length-1])&&(6===F[0]||2===F[0])){S=0;continue}if(3===F[0]&&(!R||F[1]>R[0]&&F[1]<R[3])){S.label=F[1];break}if(6===F[0]&&S.label<R[1]){S.label=R[1],R=F;break}if(R&&S.label<R[2]){S.label=R[2],S.ops.push(F);break}R[2]&&S.ops.pop(),S.trys.pop();continue}F=_.call(f,S)}catch(j){F=[6,j],D=0}finally{M=R=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([F,j])}}};Object.defineProperty(y,"__esModule",{value:!0});var u=w(25057),h=w(97009),g=w(36997),v=w(91927),m=function(f){function _(){var S=f.call(this,"route")||this;return S.isEditable=!1,S.changes=[],S.routing=new g.default,S}return k(_,f),_.prototype.toggleAccessible=function(S){this.routing.toggleOnlyAccessible(S)},_.prototype.setConfig=function(S){this.routing.setConfig(S)},_.prototype.update=function(S,M){return G(this,void 0,void 0,function(){var D,R,V,B,U,F;return I(this,function($){if(this.start=S,this.finish=M,this.data=new h.FeatureCollection({features:[this.start,this.finish].concat(this.lines||[]).filter(function(oe){return oe})}),this.notify("feature-updated"),S&&M){if(this.notify("loading-start"),D=this.routing.route(S,M),R=D?.paths,this.route=D?.paths,this.points=D?.points,this.levelPaths=D?.levelPaths,this.levelPoints=D?.levelPoints,this.details=D?.details,V=new v.default(D?.points),this.steps=V.steps,R){for(B=[],U=0,F=Object.entries(R);U<F.length;U++)B.push(F[U][1]);this.lines=B}else this.lines=[],this.notify("route-undefined");this.data=new h.FeatureCollection({features:[this.start,this.finish].concat(this.lines||[]).filter(function(oe){return oe})}),this.notify("loading-finished"),this.notify("feature-updated")}return[2]})})},_.prototype.cancel=function(){this.start=void 0,this.finish=void 0,this.lines=void 0,this.route=void 0,this.points=void 0,this.levelPaths=void 0,this.levelPoints=void 0,this.details=void 0,this.steps=void 0,this.data=new h.FeatureCollection({features:[this.start,this.finish].concat(this.lines||[]).filter(function(S){return S})}),this.notify("feature-updated")},_}(u.default);y.default=m},79646:function(Ae,y,w){"use strict";var h,k=this&&this.__extends||(h=function(g,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(m[_]=f[_])})(g,v)},function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function m(){this.constructor=g}h(g,v),g.prototype=null===v?Object.create(v):(m.prototype=v.prototype,new m)});Object.defineProperty(y,"__esModule",{value:!0});var G=w(25057),I=w(97009),u=function(h){function g(v){var m=h.call(this,"synthetic")||this;return m.data=v||new I.FeatureCollection({}),m}return k(g,h),g.prototype.get=function(v){return this.data.features.find(function(m){return m.properties.id===v})},g}(G.default);y.default=u},95140:function(Ae,y,w){"use strict";var k=this&&this.__assign||function(){return k=Object.assign||function(_){for(var S,M=1,D=arguments.length;M<D;M++)for(var R in S=arguments[M])Object.prototype.hasOwnProperty.call(S,R)&&(_[R]=S[R]);return _},k.apply(this,arguments)},G=this&&this.__awaiter||function(_,S,M,D){return new(M||(M=Promise))(function(V,B){function U(P){try{j(D.next(P))}catch(Q){B(Q)}}function F(P){try{j(D.throw(P))}catch(Q){B(Q)}}function j(P){P.done?V(P.value):function R(V){return V instanceof M?V:new M(function(B){B(V)})}(P.value).then(U,F)}j((D=D.apply(_,S||[])).next())})},I=this&&this.__generator||function(_,S){var D,R,V,B,M={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return B={next:U(0),throw:U(1),return:U(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function U(j){return function(P){return function F(j){if(D)throw new TypeError("Generator is already executing.");for(;M;)try{if(D=1,R&&(V=2&j[0]?R.return:j[0]?R.throw||((V=R.return)&&V.call(R),0):R.next)&&!(V=V.call(R,j[1])).done)return V;switch(R=0,V&&(j=[2&j[0],V.value]),j[0]){case 0:case 1:V=j;break;case 4:return M.label++,{value:j[1],done:!1};case 5:M.label++,R=j[1],j=[0];continue;case 7:j=M.ops.pop(),M.trys.pop();continue;default:if(!(V=(V=M.trys).length>0&&V[V.length-1])&&(6===j[0]||2===j[0])){M=0;continue}if(3===j[0]&&(!V||j[1]>V[0]&&j[1]<V[3])){M.label=j[1];break}if(6===j[0]&&M.label<V[1]){M.label=V[1],V=j;break}if(V&&M.label<V[2]){M.label=V[2],M.ops.push(j);break}V[2]&&M.ops.pop(),M.trys.pop();continue}j=S.call(_,M)}catch(P){j=[6,P],R=0}finally{D=V=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}([j,P])}}};Object.defineProperty(y,"__esModule",{value:!0}),y.Select=void 0;var u=w(21779),h=w(46412),g=w(81508),v=w(19317),m=w(24978),f=function(){function _(S,M,D){var R=this;this.useApiSearch=!1,this.onSelectListener=new m.Subject;var V=M?.selector?""+M.selector:"#proximiioSelect";this.useApiSearch=void 0!==D&&D,this.ac=new v(k({data:this.getData(S),selector:V},M)),document.querySelector(V).addEventListener("selection",function(B){var U=B.detail;document.querySelector(V).blur();var F=U.selection.value[U.selection.key];document.querySelector(V).value=F,R.onSelectListener.next(U.selection.value)})}return _.prototype.getData=function(S){return"Places"===S?this.getPlaces():"Floors"===S?this.getFloors():"Pois"===S?this.getPois():void 0},_.prototype.getPlaces=function(){var S=this;return{src:function(M){return G(S,void 0,void 0,function(){var R;return I(this,function(B){switch(B.label){case 0:return B.trys.push([0,5,,6]),this.useApiSearch?[4,u.default.getPlaces(10,0,void 0,void 0,"name",M)]:[3,2];case 1:return R=B.sent(),[3,4];case 2:return[4,u.default.getPlaces(100)];case 3:R=B.sent(),B.label=4;case 4:return[2,R.data];case 5:return[2,B.sent()];case 6:return[2]}})})},keys:["name"],cache:!1}},_.prototype.getFloors=function(){var S=this;return{src:function(M){return G(S,void 0,void 0,function(){var R;return I(this,function(B){switch(B.label){case 0:return B.trys.push([0,5,,6]),this.useApiSearch?[4,h.default.getFloors(10,0,void 0,void 0,"name",M)]:[3,2];case 1:return R=B.sent(),[3,4];case 2:return[4,h.default.getFloors(100)];case 3:R=B.sent(),B.label=4;case 4:return[2,R.data];case 5:return[2,B.sent()];case 6:return[2]}})})},keys:["name"],cache:!1}},_.prototype.getPois=function(){var S=this;return{src:function(M){return G(S,void 0,void 0,function(){return I(this,function(R){switch(R.label){case 0:return R.trys.push([0,2,,3]),[4,g.default.getPois()];case 1:case 2:return[2,R.sent()];case 3:return[2]}})})},keys:["getTitleWithLevel"],cache:!1}},_.prototype.getSelectListener=function(){return this.onSelectListener.asObservable()},_}();y.Select=f},15831:function(Ae,y,w){"use strict";var k=this&&this.__awaiter||function(f,_,S,M){return new(S||(S=Promise))(function(R,V){function B(j){try{F(M.next(j))}catch(P){V(P)}}function U(j){try{F(M.throw(j))}catch(P){V(P)}}function F(j){j.done?R(j.value):function D(R){return R instanceof S?R:new S(function(V){V(R)})}(j.value).then(B,U)}F((M=M.apply(f,_||[])).next())})},G=this&&this.__generator||function(f,_){var M,D,R,V,S={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return V={next:B(0),throw:B(1),return:B(2)},"function"==typeof Symbol&&(V[Symbol.iterator]=function(){return this}),V;function B(F){return function(j){return function U(F){if(M)throw new TypeError("Generator is already executing.");for(;S;)try{if(M=1,D&&(R=2&F[0]?D.return:F[0]?D.throw||((R=D.return)&&R.call(D),0):D.next)&&!(R=R.call(D,F[1])).done)return R;switch(D=0,R&&(F=[2&F[0],R.value]),F[0]){case 0:case 1:R=F;break;case 4:return S.label++,{value:F[1],done:!1};case 5:S.label++,D=F[1],F=[0];continue;case 7:F=S.ops.pop(),S.trys.pop();continue;default:if(!(R=(R=S.trys).length>0&&R[R.length-1])&&(6===F[0]||2===F[0])){S=0;continue}if(3===F[0]&&(!R||F[1]>R[0]&&F[1]<R[3])){S.label=F[1];break}if(6===F[0]&&S.label<R[1]){S.label=R[1],R=F;break}if(R&&S.label<R[2]){S.label=R[2],S.ops.push(F);break}R[2]&&S.ops.pop(),S.trys.pop();continue}F=_.call(f,S)}catch(j){F=[6,j],D=0}finally{M=R=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([F,j])}}};Object.defineProperty(y,"__esModule",{value:!0}),y.getCurrentUser=y.getUserConfig=y.loginWithToken=y.login=void 0;var I=w(91685),u=null;y.login=function(f,_){return k(void 0,void 0,void 0,function(){var M,D;return G(this,function(R){switch(R.label){case 0:if(R.trys.push([0,2,,3]),!f)throw new Error("Please provide your email");if(!_)throw new Error("Please provide your password");return[4,I.axios.post("core_auth/login",{email:f,password:_})];case 1:return(M=R.sent()).data&&(console.info("Logged in successfully as "+M.data.user.email),I.axios.defaults.headers.common.Authorization=M.data.token,u=M),[2,M];case 2:throw D=R.sent(),new Error("Login failed, "+D.message);case 3:return[2]}})})},y.loginWithToken=function(f){return k(void 0,void 0,void 0,function(){var _,S;return G(this,function(M){switch(M.label){case 0:if(M.trys.push([0,2,,3]),!f)throw new Error("Please provide your token");return I.axios.defaults.headers.common.Authorization=f,[4,I.axios.get("core/current_user")];case 1:return(_=M.sent()).data&&(console.info("Logged in successfully as "+_.data.email),u=_),[2,_];case 2:throw S=M.sent(),new Error("Login failed, "+S.message);case 3:return[2]}})})},y.getUserConfig=function(){return k(void 0,void 0,void 0,function(){var _;return G(this,function(S){switch(S.label){case 0:return S.trys.push([0,2,,3]),[4,I.axios.get("config")];case 1:return[2,S.sent().data];case 2:throw _=S.sent(),new Error("Fetching config failed, "+_.message);case 3:return[2]}})})},y.getCurrentUser=function(){return k(void 0,void 0,void 0,function(){var _,S;return G(this,function(M){switch(M.label){case 0:return M.trys.push([0,4,,5]),u?(_=u,[3,3]):[3,1];case 1:return[4,I.axios.get("core/current_user")];case 2:_=M.sent(),M.label=3;case 3:return[2,_.data];case 4:throw S=M.sent(),new Error("Fetching current user failed, "+S.message);case 5:return[2]}})})},y.default={login:y.login,loginWithToken:y.loginWithToken,getUserConfig:y.getUserConfig,getCurrentUser:y.getCurrentUser}},46412:function(Ae,y,w){"use strict";var k=this&&this.__awaiter||function(v,m,f,_){return new(f||(f=Promise))(function(M,D){function R(U){try{B(_.next(U))}catch(F){D(F)}}function V(U){try{B(_.throw(U))}catch(F){D(F)}}function B(U){U.done?M(U.value):function S(M){return M instanceof f?M:new f(function(D){D(M)})}(U.value).then(R,V)}B((_=_.apply(v,m||[])).next())})},G=this&&this.__generator||function(v,m){var _,S,M,D,f={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return D={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function R(B){return function(U){return function V(B){if(_)throw new TypeError("Generator is already executing.");for(;f;)try{if(_=1,S&&(M=2&B[0]?S.return:B[0]?S.throw||((M=S.return)&&M.call(S),0):S.next)&&!(M=M.call(S,B[1])).done)return M;switch(S=0,M&&(B=[2&B[0],M.value]),B[0]){case 0:case 1:M=B;break;case 4:return f.label++,{value:B[1],done:!1};case 5:f.label++,S=B[1],B=[0];continue;case 7:B=f.ops.pop(),f.trys.pop();continue;default:if(!(M=(M=f.trys).length>0&&M[M.length-1])&&(6===B[0]||2===B[0])){f=0;continue}if(3===B[0]&&(!M||B[1]>M[0]&&B[1]<M[3])){f.label=B[1];break}if(6===B[0]&&f.label<M[1]){f.label=M[1],M=B;break}if(M&&f.label<M[2]){f.label=M[2],f.ops.push(B);break}M[2]&&f.ops.pop(),f.trys.pop();continue}B=m.call(v,f)}catch(U){B=[6,U],S=0}finally{_=M=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,U])}}};Object.defineProperty(y,"__esModule",{value:!0}),y.getPlaceFloors=y.getFloors=void 0;var I=w(91685),u=w(94182);y.getFloors=function(v,m,f,_,S,M){return k(void 0,void 0,void 0,function(){var D,R,V;return G(this,function(B){switch(B.label){case 0:D="",v&&(D+="?limit="+v),m&&(D+="&skip="+m),f&&(D+="&order="+f),_&&(D+="&dir="+_),S&&(D+="&filterByIndex="+S),M&&(D+="&q="+M),B.label=1;case 1:return B.trys.push([1,3,,4]),[4,I.axios.get("core/floors"+D)];case 2:return[2,{data:(R=B.sent()).data.map(function(U){return new u.FloorModel(U)}),total:+R.headers.searchcount}];case 3:throw V=B.sent(),new Error("Retrieving floors failed, "+V.message);case 4:return[2]}})})},y.getPlaceFloors=function(v){return k(void 0,void 0,void 0,function(){var f;return G(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,I.axios.get("core/floors?skip=0&limit=1000&filter=place_id:"+v)];case 1:return[2,_.sent().data.map(function(S){return new u.FloorModel(S)})];case 2:throw f=_.sent(),new Error("Retrieving floors for place '"+v+"' failed, "+f.message);case 3:return[2]}})})},y.default={getFloors:y.getFloors,getPlaceFloors:y.getPlaceFloors}},81508:function(Ae,y,w){"use strict";var k=this&&this.__assign||function(){return k=Object.assign||function(B){for(var U,F=1,j=arguments.length;F<j;F++)for(var P in U=arguments[F])Object.prototype.hasOwnProperty.call(U,P)&&(B[P]=U[P]);return B},k.apply(this,arguments)},G=this&&this.__awaiter||function(B,U,F,j){return new(F||(F=Promise))(function(Q,$){function oe(q){try{ie(j.next(q))}catch(se){$(se)}}function X(q){try{ie(j.throw(q))}catch(se){$(se)}}function ie(q){q.done?Q(q.value):function P(Q){return Q instanceof F?Q:new F(function($){$(Q)})}(q.value).then(oe,X)}ie((j=j.apply(B,U||[])).next())})},I=this&&this.__generator||function(B,U){var j,P,Q,$,F={label:0,sent:function(){if(1&Q[0])throw Q[1];return Q[1]},trys:[],ops:[]};return $={next:oe(0),throw:oe(1),return:oe(2)},"function"==typeof Symbol&&($[Symbol.iterator]=function(){return this}),$;function oe(ie){return function(q){return function X(ie){if(j)throw new TypeError("Generator is already executing.");for(;F;)try{if(j=1,P&&(Q=2&ie[0]?P.return:ie[0]?P.throw||((Q=P.return)&&Q.call(P),0):P.next)&&!(Q=Q.call(P,ie[1])).done)return Q;switch(P=0,Q&&(ie=[2&ie[0],Q.value]),ie[0]){case 0:case 1:Q=ie;break;case 4:return F.label++,{value:ie[1],done:!1};case 5:F.label++,P=ie[1],ie=[0];continue;case 7:ie=F.ops.pop(),F.trys.pop();continue;default:if(!(Q=(Q=F.trys).length>0&&Q[Q.length-1])&&(6===ie[0]||2===ie[0])){F=0;continue}if(3===ie[0]&&(!Q||ie[1]>Q[0]&&ie[1]<Q[3])){F.label=ie[1];break}if(6===ie[0]&&F.label<Q[1]){F.label=Q[1],Q=ie;break}if(Q&&F.label<Q[2]){F.label=Q[2],F.ops.push(ie);break}Q[2]&&F.ops.pop(),F.trys.pop();continue}ie=U.call(B,F)}catch(q){ie=[6,q],P=0}finally{j=Q=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([ie,q])}}},u=this&&this.__spreadArray||function(B,U){for(var F=0,j=U.length,P=B.length;F<j;F++,P++)B[P]=U[F];return B};Object.defineProperty(y,"__esModule",{value:!0}),y.deleteFeatures=y.updateFeature=y.addFeatures=y.getPois=y.getAmenities=y.getFeatures=void 0;var h=w(91685),g=w(97009),v=w(50856),m=w(9413),f=w(65627);y.getFeatures=function(B){var U=B.initPolygons,F=B.autoLabelLines,j=B.hiddenAmenities,P=B.useTimerangeData;return G(void 0,void 0,void 0,function(){var $,oe,X,ie;return I(this,function(q){switch(q.label){case 0:return[4,h.axios.get("/v5/geo/features")];case 1:return $=q.sent(),U&&(oe=[],X=$.data.features.filter(function(se){return"shop"===se.properties.type&&"MultiPolygon"===se.geometry.type}),ie=$.data.features.filter(function(se){return"label-line"===se.properties.type}),P&&($.data.features=$.data.features.map(function(se){var ne,Ce;return se.properties&&null!==(ne=se.properties.metadata)&&void 0!==ne&&ne.dateStart&&null!==(Ce=se.properties.metadata)&&void 0!==Ce&&Ce.dateEnd?se.properties.metadata.dateStart<=Date.now()&&se.properties.metadata.dateEnd>=Date.now()?se:void 0:se}).filter(function(se){return void 0!==se})),$.data.features=$.data.features.map(function(se,ne){var Ce,xe,ue,fe,ee;if(j&&j.length>0&&j.includes(se.properties.amenity)&&(se.properties.hideIcon="hide"),"poi"===se.properties.type&&(se.id=se.id?se.id.replace(/\{|\}/g,""):null,se.properties.id=se.properties.id?se.properties.id.replace(/\{|\}/g,""):null,X.forEach(function(je){var ht,Re;je.properties.id||(je.properties.id=je.id),(null===(ht=se.properties)||void 0===ht?void 0:ht.level)===(null===(Re=je.properties)||void 0===Re?void 0:Re.level)&&f.booleanPointInPolygon(se,je)&&(fe=je)}),!fe&&se.properties.metadata&&se.properties.metadata.polygon_id&&(fe=$.data.features.find(function(je){var ht,Re;return(null===(ht=je.properties.id)||void 0===ht?void 0:ht.replace(/\{|\}/g,""))===(null===(Re=se.properties.metadata.polygon_id)||void 0===Re?void 0:Re.replace(/\{|\}/g,""))})),fe&&(se.properties._dynamic=se.properties._dynamic?se.properties._dynamic:{},se.properties._dynamic.id=se.id,se.properties._dynamic.type="poi-custom",se.properties._dynamic.amenity=se.properties.amenity,se.properties._dynamic.polygon_id=null===(Ce=fe.properties.id)||void 0===Ce?void 0:Ce.replace(/\{|\}/g,""),fe.properties._dynamic=fe.properties._dynamic?fe.properties._dynamic:{},fe.properties._dynamic.id=null===(xe=fe.properties.id)||void 0===xe?void 0:xe.replace(/\{|\}/g,""),fe.properties._dynamic.type="shop-custom",fe.properties._dynamic.poi_id=se.properties.id,fe.properties._dynamic.amenity=se.properties.amenity,fe.id=JSON.stringify(ne),ie.forEach(function(je){var ht,Re;(null===(ht=fe.properties)||void 0===ht?void 0:ht.level)===(null===(Re=je.properties)||void 0===Re?void 0:Re.level)&&f.booleanPointInPolygon(f.pointOnFeature(je),fe)&&(ee=je)}),ee&&(ee.id=JSON.stringify(ne+9999),se.properties._dynamic.label_id=ee.id,fe.properties._dynamic.label_id=ee.id,ee.properties._dynamic=ee.properties._dynamic?ee.properties._dynamic:{},ee.properties._dynamic.id=null===(ue=ee.properties.id)||void 0===ue?void 0:ue.replace(/\{|\}/g,""),ee.properties._dynamic.type="shop-label",ee.properties._dynamic.poi_id=se.properties.id,ee.properties._dynamic.amenity=se.properties.amenity,ee.properties._dynamic.polygon_id=fe.properties._dynamic.id,ee.properties.title=se.properties.title,ee.properties.title_i18n=se.properties.title_i18n),!ee))){var de=fe.properties["label-line"]?JSON.parse(JSON.stringify(fe.properties["label-line"])):fe.properties.metadata&&fe.properties.metadata["label-line"]?JSON.parse(JSON.stringify(fe.properties.metadata["label-line"])):se.properties.metadata&&se.properties.metadata["label-line"]?JSON.parse(JSON.stringify(se.properties.metadata["label-line"])):void 0;if(de&&void 0!==de&&de.length>0){var pe="string"==typeof de?JSON.parse(de):de;if(pe[0]instanceof Array&&pe[1]instanceof Array){var ce=JSON.parse(JSON.stringify(se));ce.geometry={coordinates:pe,type:"LineString"},ce.properties.id=JSON.stringify(ne+9999),ce.id=JSON.stringify(ne+9999),ce.properties.type="shop-label",ce.properties._dynamic.type="shop-label",fe.properties._dynamic.label_id=ce.properties.id,oe.push(ce)}}else if(F){for(var ae=void 0,ye=void 0,Me=0;Me<fe.geometry.coordinates[0][0].length;Me++){var Fe=fe.geometry.coordinates[0][0][Me+1];if(Fe){var Ue=f.lineString([fe.geometry.coordinates[0][0][Me],Fe],k({},se.properties)),Ge=f.length(Ue);Ue.properties._dynamic=k(k({},Ue.properties._dynamic),{length:Ge}),ae?Ge>ae.properties._dynamic.length&&(ae=Ue):ae=Ue}}var $e=f.pointToLineDistance(f.centroid(fe),ae);ye=f.lineOffset(ae,$e),ye=f.transformScale(ye,10);var He=f.lineIntersect(fe,ye);if(He.features.length>1){var Pe=f.lineString([He.features[0].geometry.coordinates,He.features[He.features.length-1].geometry.coordinates]);ye.geometry=Pe.geometry}ye.properties.id=JSON.stringify(ne+9999),ye.id=JSON.stringify(ne+9999),ye.properties.type="shop-label",ye.properties._dynamic.type="shop-label",fe.properties._dynamic.label_id=ye.properties.id,oe.push(ye)}}return se}),$.data.features=$.data.features.concat(oe)),[2,new g.FeatureCollection($.data)]}})})},y.getAmenities=function(B){return G(void 0,void 0,void 0,function(){return I(this,function(j){switch(j.label){case 0:return[4,h.axios.get("/v5/geo/amenities")];case 1:return[2,j.sent().data.map(function(P){return B&&P[B]&&"default"!==P.category&&(P.id=P[B].toLowerCase()),new v.AmenityModel(P)})]}})})},y.getPois=function(){return G(void 0,void 0,void 0,function(){var U,F;return I(this,function(P){switch(P.label){case 0:return[4,h.axios.get("/v5/geo/features")];case 1:return U=P.sent(),F=m.globalState.dynamicFeatures,[2,u(u([],U.data.features),F.features).filter(function(Q){return"poi"===Q.properties.usecase||"poi"===Q.properties.type}).sort(function(Q,$){return Q.properties.title>$.properties.title?-1:1}).sort(function(Q,$){return Q.properties.level>$.properties.level?1:-1}).map(function(Q){return new g.default(Q)})]}})})},y.addFeatures=function(B){return G(void 0,void 0,void 0,function(){var U,F;return I(this,function(j){switch(j.label){case 0:U="/v5/geo/features",j.label=1;case 1:return j.trys.push([1,3,,4]),[4,h.axios.post(U,B)];case 2:return j.sent(),[3,4];case 3:throw F=j.sent(),console.log("Adding new features to db failed",F.message),new Error(F.message);case 4:return[2]}})})},y.updateFeature=function(B,U){return G(void 0,void 0,void 0,function(){var F,j;return I(this,function(P){switch(P.label){case 0:F="/v5/geo/features/"+U,P.label=1;case 1:return P.trys.push([1,3,,4]),[4,h.axios.put(F,B)];case 2:return P.sent(),[3,4];case 3:throw j=P.sent(),console.log("Updating feature in db failed",j.message),new Error(j.message);case 4:return[2]}})})},y.deleteFeatures=function(B){return G(void 0,void 0,void 0,function(){var U,F;return I(this,function(j){switch(j.label){case 0:U="/v5/geo/features/delete",j.label=1;case 1:return j.trys.push([1,3,,4]),[4,h.axios.post(U,B)];case 2:return j.sent(),[3,4];case 3:throw F=j.sent(),console.log("Deleting features from db failed",F.message),new Error(F.message);case 4:return[2]}})})},y.default={getFeatures:y.getFeatures,addFeatures:y.addFeatures,updateFeature:y.updateFeature,deleteFeatures:y.deleteFeatures,getAmenities:y.getAmenities,getPois:y.getPois}},21779:function(Ae,y,w){"use strict";var k=this&&this.__awaiter||function(v,m,f,_){return new(f||(f=Promise))(function(M,D){function R(U){try{B(_.next(U))}catch(F){D(F)}}function V(U){try{B(_.throw(U))}catch(F){D(F)}}function B(U){U.done?M(U.value):function S(M){return M instanceof f?M:new f(function(D){D(M)})}(U.value).then(R,V)}B((_=_.apply(v,m||[])).next())})},G=this&&this.__generator||function(v,m){var _,S,M,D,f={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return D={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function R(B){return function(U){return function V(B){if(_)throw new TypeError("Generator is already executing.");for(;f;)try{if(_=1,S&&(M=2&B[0]?S.return:B[0]?S.throw||((M=S.return)&&M.call(S),0):S.next)&&!(M=M.call(S,B[1])).done)return M;switch(S=0,M&&(B=[2&B[0],M.value]),B[0]){case 0:case 1:M=B;break;case 4:return f.label++,{value:B[1],done:!1};case 5:f.label++,S=B[1],B=[0];continue;case 7:B=f.ops.pop(),f.trys.pop();continue;default:if(!(M=(M=f.trys).length>0&&M[M.length-1])&&(6===B[0]||2===B[0])){f=0;continue}if(3===B[0]&&(!M||B[1]>M[0]&&B[1]<M[3])){f.label=B[1];break}if(6===B[0]&&f.label<M[1]){f.label=M[1],M=B;break}if(M&&f.label<M[2]){f.label=M[2],f.ops.push(B);break}M[2]&&f.ops.pop(),f.trys.pop();continue}B=m.call(v,f)}catch(U){B=[6,U],S=0}finally{_=M=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,U])}}};Object.defineProperty(y,"__esModule",{value:!0}),y.getPlaceById=y.getPlaces=void 0;var I=w(91685),u=w(85482);y.getPlaces=function(v,m,f,_,S,M,D){return k(void 0,void 0,void 0,function(){var R,V,B;return G(this,function(U){switch(U.label){case 0:R="",v&&(R+="?limit="+v),m&&(R+="&skip="+m),f&&(R+="&order="+f),_&&(R+="&dir="+_),S&&(R+="&filterByIndex="+S),M&&(R+="&q="+M),D&&(R+="&filter="+M),U.label=1;case 1:return U.trys.push([1,3,,4]),[4,I.axios.get("core/places"+R)];case 2:return[2,{data:(V=U.sent()).data.map(function(F){return new u.PlaceModel(F)}),total:+V.headers.searchcount}];case 3:throw B=U.sent(),new Error("Retrieving places failed, "+B.message);case 4:return[2]}})})},y.getPlaceById=function(v){return k(void 0,void 0,void 0,function(){var m,f;return G(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,I.axios.get("core/places/"+v)];case 1:return m=_.sent(),[2,new u.PlaceModel(m.data)];case 2:throw f=_.sent(),new Error("Retrieving place by id '"+v+"' failed, "+f.message);case 3:return[2]}})})},y.default={getPlaces:y.getPlaces,getPlaceById:y.getPlaceById}},55098:function(Ae,y,w){"use strict";var k=this&&this.__awaiter||function(m,f,_,S){return new(_||(_=Promise))(function(D,R){function V(F){try{U(S.next(F))}catch(j){R(j)}}function B(F){try{U(S.throw(F))}catch(j){R(j)}}function U(F){F.done?D(F.value):function M(D){return D instanceof _?D:new _(function(R){R(D)})}(F.value).then(V,B)}U((S=S.apply(m,f||[])).next())})},G=this&&this.__generator||function(m,f){var S,M,D,R,_={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return R={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(R[Symbol.iterator]=function(){return this}),R;function V(U){return function(F){return function B(U){if(S)throw new TypeError("Generator is already executing.");for(;_;)try{if(S=1,M&&(D=2&U[0]?M.return:U[0]?M.throw||((D=M.return)&&D.call(M),0):M.next)&&!(D=D.call(M,U[1])).done)return D;switch(M=0,D&&(U=[2&U[0],D.value]),U[0]){case 0:case 1:D=U;break;case 4:return _.label++,{value:U[1],done:!1};case 5:_.label++,M=U[1],U=[0];continue;case 7:U=_.ops.pop(),_.trys.pop();continue;default:if(!(D=(D=_.trys).length>0&&D[D.length-1])&&(6===U[0]||2===U[0])){_=0;continue}if(3===U[0]&&(!D||U[1]>D[0]&&U[1]<D[3])){_.label=U[1];break}if(6===U[0]&&_.label<D[1]){_.label=D[1],D=U;break}if(D&&_.label<D[2]){_.label=D[2],_.ops.push(U);break}D[2]&&_.ops.pop(),_.trys.pop();continue}U=f.call(m,_)}catch(F){U=[6,F],M=0}finally{S=D=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,F])}}};Object.defineProperty(y,"__esModule",{value:!0}),y.getPackage=void 0;var I=w(21779),u=w(46412),h=w(46903),g=w(81508);y.getPackage=function(m){var f=m.initPolygons,_=m.autoLabelLines,S=m.amenityIdProperty,M=m.hiddenAmenities,D=m.useTimerangeData;return k(void 0,void 0,void 0,function(){var R,V;return G(this,function(B){switch(B.label){case 0:return R={},V=[I.getPlaces().then(function(U){return R.places=U.data}),u.getFloors().then(function(U){return R.floors=U.data}),h.getStyle().then(function(U){return R.style=U}),h.getStyles().then(function(U){return R.styles=U}),g.getFeatures({initPolygons:f,autoLabelLines:_,hiddenAmenities:M,useTimerangeData:D}).then(function(U){return R.features=U}),g.getAmenities(S).then(function(U){return R.amenities=U})],[4,Promise.all(V)];case 1:return B.sent(),[2,R]}})})},y.default={getPackage:y.getPackage}},46903:function(Ae,y,w){"use strict";var k=this&&this.__awaiter||function(m,f,_,S){return new(_||(_=Promise))(function(D,R){function V(F){try{U(S.next(F))}catch(j){R(j)}}function B(F){try{U(S.throw(F))}catch(j){R(j)}}function U(F){F.done?D(F.value):function M(D){return D instanceof _?D:new _(function(R){R(D)})}(F.value).then(V,B)}U((S=S.apply(m,f||[])).next())})},G=this&&this.__generator||function(m,f){var S,M,D,R,_={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return R={next:V(0),throw:V(1),return:V(2)},"function"==typeof Symbol&&(R[Symbol.iterator]=function(){return this}),R;function V(U){return function(F){return function B(U){if(S)throw new TypeError("Generator is already executing.");for(;_;)try{if(S=1,M&&(D=2&U[0]?M.return:U[0]?M.throw||((D=M.return)&&D.call(M),0):M.next)&&!(D=D.call(M,U[1])).done)return D;switch(M=0,D&&(U=[2&U[0],D.value]),U[0]){case 0:case 1:D=U;break;case 4:return _.label++,{value:U[1],done:!1};case 5:_.label++,M=U[1],U=[0];continue;case 7:U=_.ops.pop(),_.trys.pop();continue;default:if(!(D=(D=_.trys).length>0&&D[D.length-1])&&(6===U[0]||2===U[0])){_=0;continue}if(3===U[0]&&(!D||U[1]>D[0]&&U[1]<D[3])){_.label=U[1];break}if(6===U[0]&&_.label<D[1]){_.label=D[1],D=U;break}if(D&&_.label<D[2]){_.label=D[2],_.ops.push(U);break}D[2]&&_.ops.pop(),_.trys.pop();continue}U=f.call(m,_)}catch(F){U=[6,F],M=0}finally{S=D=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,F])}}};Object.defineProperty(y,"__esModule",{value:!0}),y.getStyleUrl=y.getStyles=y.getStyle=void 0;var I=w(91685),u=w(60370);y.getStyle=function(m){return k(void 0,void 0,void 0,function(){var f,_;return G(this,function(S){switch(S.label){case 0:return f="/v5/geo/style",m&&(f+="s/"+m),[4,I.axios.get(f)];case 1:return _=S.sent(),[2,new u.default(_.data)]}})})},y.getStyles=function(){return k(void 0,void 0,void 0,function(){return G(this,function(_){switch(_.label){case 0:return[4,I.axios.get("/v5/geo/styles")];case 1:return[2,_.sent().data.map(function(S){return new u.default(S)})]}})})},y.getStyleUrl=function(){return"https://api.proximi.fi/v5/geo/style?token="+I.axios.defaults.headers.common.Authorization}},7820:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Eventable=void 0;var w=function(){function k(){this._observers=[]}return k.prototype.on=function(G){this._observers&&this._observers.push(G)},k.prototype.off=function(G){var I=this._observers?this._observers.findIndex(function(u){return u===G}):0;I>=0&&this._observers&&this._observers.splice(I,1)},k.prototype.notify=function(G,I){var u=this;this._observers&&this._observers.forEach(function(h){return h(G,I,u)})},k}();y.Eventable=w},53094:(Ae,y,w)=>{"use strict";var G=w(15831),I=w(21779),u=w(46412),h=w(9413),g=w(95140);y.Z={Auth:G.default,Places:I.default,Floors:u.default,Map:h.Map,Select:g.Select}},50856:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.AmenityModel=void 0;var I=function(u){function h(g){var v=u.call(this,g)||this;return v.category=g.category,v.iconOffset=g.iconOffset,v.list=g.list,v.title=g.title,v.description=g.description,v.icon=g.icon,v}return k(h,u),Object.defineProperty(h.prototype,"hasIcon",{get:function(){return!!this.icon},enumerable:!1,configurable:!0}),h}(w(55651).default);y.AmenityModel=I},55651:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var w=function(){function k(G){this.id=G.id||(G.properties?G.properties.id:void 0),this.createdAt=G.createdAt,this.updatedAt=G.updatedAt}return Object.defineProperty(k.prototype,"exists",{get:function(){return typeof this.id<"u"},enumerable:!1,configurable:!0}),k}();y.default=w},97009:function(Ae,y,w){"use strict";var v,k=this&&this.__extends||(v=function(m,f){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,S){_.__proto__=S}||function(_,S){for(var M in S)Object.prototype.hasOwnProperty.call(S,M)&&(_[M]=S[M])})(m,f)},function(m,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function _(){this.constructor=m}v(m,f),m.prototype=null===f?Object.create(f):(_.prototype=f.prototype,new _)});Object.defineProperty(y,"__esModule",{value:!0}),y.FeatureCollection=y.Geometry=void 0;var G=w(55651),I=w(82484),u=function v(m){this.type=m.type,this.coordinates=m.coordinates};y.Geometry=u;var h=function(){function v(m){this.type="FeatureCollection",this.features=(m.features||[]).map(function(f){return new g(f).json})}return Object.defineProperty(v.prototype,"json",{get:function(){return{type:"FeatureCollection",features:this.features.map(function(m){return m.json})}},enumerable:!1,configurable:!0}),v}();y.FeatureCollection=h;var g=function(v){function m(f){var _=v.call(this,f)||this;return _.type="Feature",_.id=f.id,_.geometry=new u(f.geometry),_.properties=f.properties||{},"string"==typeof _.properties.title_i18n&&(_.properties.title_i18n=JSON.parse(_.properties.title_i18n)),_.isPoint&&(_.properties.images||(_.properties.images=[]),_.properties.range||(_.properties.range=3)),"string"==typeof _.properties.images&&(_.properties.images=JSON.parse(_.properties.images)),_.isLevelChanger&&Array.isArray(_.properties.levels)&&_.properties.levels.forEach(function(S){return _.properties["__level_"+S]=!0}),"text"===_.properties.type&&Array.isArray(_.properties.textFont)&&(_.properties.textFont=_.properties.textFont[0]),_}return k(m,v),Object.defineProperty(m.prototype,"isEditable",{get:function(){return this.isPoint||this.isLineString||this.isPolygon},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isPoint",{get:function(){return"Point"===this.geometry.type},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isPolygon",{get:function(){return"Polygon"===this.geometry.type||"MultiPolygon"===this.geometry.type},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isLineString",{get:function(){return"LineString"===this.geometry.type||"MultiLineString"===this.geometry.type},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isHazard",{get:function(){return this.properties.type===I.POI_TYPE.HAZARD},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isLandmark",{get:function(){return this.properties.type===I.POI_TYPE.LANDMARK},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isDoor",{get:function(){return this.properties.type===I.POI_TYPE.DOOR},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isEntrance",{get:function(){return this.properties.type===I.POI_TYPE.ENTRANCE},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isDecisionPoint",{get:function(){return this.properties.type===I.POI_TYPE.DECISION},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isTicketGate",{get:function(){return this.properties.type===I.POI_TYPE.TICKET_GATE},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isElevator",{get:function(){return this.properties.type===I.POI_TYPE.ELEVATOR},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isEscalator",{get:function(){return this.properties.type===I.POI_TYPE.ESCALATOR},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isStairCase",{get:function(){return this.properties.type===I.POI_TYPE.STAIRCASE},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isRamp",{get:function(){return this.properties.type===I.POI_TYPE.RAMP},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isLevelChanger",{get:function(){return this.isElevator||this.isEscalator||this.isStairCase||this.isRamp},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isText",{get:function(){return"text"===this.properties.type},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isSynthetic",{get:function(){var f=["id","place_id","floor_id","level"];return("LineString"===this.geometry.type||"MultiLineString"===this.geometry.type)&&f.push("class"),0===Object.keys(this.properties).map(function(_){return!f.includes(_)}).filter(function(_){return _}).length},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isRoom",{get:function(){return this.properties.room},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"isRouting",{get:function(){return"routing"===this.properties.usecase},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"getTitle",{get:function(){return this.properties.title},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"getTitleWithLevel",{get:function(){return this.properties.title+" - Level: "+this.properties.level},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"json",{get:function(){this.properties.cameFrom&&delete this.properties.cameFrom,this.properties.fixedPointMap&&delete this.properties.fixedPointMap;var f=JSON.parse(JSON.stringify(this));if(f.properties.metadata&&"object"!=typeof f.properties.metadata)try{f.properties.metadata=JSON.parse(f.properties.metadata)}catch{console.log("feature parsing failed:",f.properties.metadata)}return Object.keys(f.properties).forEach(function(_){_.match("__level")&&delete f.properties.key}),f},enumerable:!1,configurable:!0}),m.point=function(f,_,S,M){return new m({id:f,geometry:{type:"Point",coordinates:[S,_]},properties:M})},m.prototype.setTitle=function(f,_){void 0===_&&(_="en"),typeof this.properties.title_18n>"u"&&(this.properties.title_18n={}),this.properties.title_18n[_]=f},m.prototype.hasLevel=function(f){return this.isLevelChanger?this.properties.levels.includes(f):this.properties.level===f},m}(G.default);y.default=g},94182:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.FloorModel=void 0;var I=function(u){function h(g){var v=u.call(this,g)||this;return v.name=g.name,v.placeId=g.place_id,v.placeName=g.place_name,v.floorplanImageUrl=g.floorplan_image_url,v.level=g.level||0,g.anchors&&(v.anchors=[[g.anchors[0].lng,g.anchors[0].lat],[g.anchors[1].lng,g.anchors[1].lat],[g.anchors[3].lng,g.anchors[3].lat],[g.anchors[2].lng,g.anchors[2].lat]]),v.editor=g.editor,v.geopoint=g.geopoint,v.remoteId=g.remote_id,v.metadata=g.metadata,v}return k(h,u),Object.defineProperty(h.prototype,"hasFloorplan",{get:function(){return!!(this.floorplanImageUrl&&this.floorplanImageUrl.length>1&&this.anchors)},enumerable:!1,configurable:!0}),h}(w(55651).default);y.FloorModel=I},7742:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var k=w(91685),G=function(){function I(u){this.id=u.id?u.id:k.uuidv4(),this.lat=u.lat,this.lng=u.lng,this.level=u.level}return I.prototype.updatePosition=function(u){this.lat=u.lat,this.lng=u.lng,this.level=u.level},I}();y.default=G},85482:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.PlaceModel=void 0;var I=function(u){function h(g){var v=u.call(this,g)||this;return v.name=g.name,v.address=g.address,v.location=g.location?g.location:{lat:60.1669635,lng:24.9217484},v.tags=g.tags,v.remoteId=g.remote_id,v}return k(h,u),Object.defineProperty(h.prototype,"hasLocation",{get:function(){return!isNaN(this.location.lat)&&!isNaN(this.location.lng)},enumerable:!1,configurable:!0}),h}(w(55651).default);y.PlaceModel=I},82484:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.POI_TYPE=void 0,y.POI_TYPE={POI:"poi",HAZARD:"hazard",DOOR:"door",ENTRANCE:"entrance",TICKET_GATE:"ticket_gate",DECISION:"decision",LANDMARK:"landmark",ELEVATOR:"elevator",ESCALATOR:"escalator",STAIRCASE:"staircase",RAMP:"ramp",TEXT:"text"},y.default=function k(G,I,u){this.type=G,this.title=I,this.icon=u}},60370:function(Ae,y,w){"use strict";var k=this&&this.__assign||function(){return k=Object.assign||function(U){for(var F,j=1,P=arguments.length;j<P;j++)for(var Q in F=arguments[j])Object.prototype.hasOwnProperty.call(F,Q)&&(U[Q]=F[Q]);return U},k.apply(this,arguments)},G=this&&this.__spreadArray||function(U,F){for(var j=0,P=F.length,Q=U.length;j<P;j++,Q++)U[Q]=F[j];return U};Object.defineProperty(y,"__esModule",{value:!0});var I=w(46209),u=w(84783),h=w(7981),g=w(88818),v=w(21780),m=w(7106),f=w(24691),_=w(1787),S=w(72451),M=w(66850),D=w(27024),R=w(18160),V=w(29954),B=function(){function U(F){this._observers=[],this.overlay=!1,this.segments=!1,this.routable=!1,this.cluster=!0,this.rooms=!0,this.id=F.id,this.organization_id=F.organization_id,this.version=F.version||1,this.name=F.name||"New Style",this.metadata=Object.assign(V.default,F.metadata||{}),this.center=F.center||[18.555,48.4437],this.zoom=F.zoom||8,this.bearing=F.bearing||0,this.pitch=F.pitch||0,this.sources=F.sources||[],this.glyphs=F.glyphs||"",this.layers=(F.layers||[]).map(function(j){return"background"===j.type?new u.default(j).json:"raster"===j.type?new h.default(j).json:"fill"===j.type?new g.default(j).json:"line"===j.type?new v.default(j).json:"fill-extrusion"===j.type?new m.default(j).json:"symbol"===j.type?new f.default(j).json:"heatmap"===j.type?new _.default(j).json:"circle"===j.type?new S.default(j).json:"hillshade"===j.type?new M.default(j).json:new I.default(j)}).concat(this.getUniversalLayers("main")).concat(this.getSyntheticLayers())}return U.prototype.on=function(F){this._observers&&this._observers.push(F)},U.prototype.off=function(F){var j=this._observers?this._observers.findIndex(function(P){return P===F}):0;j>=0&&this._observers&&this._observers.splice(j,1)},U.prototype.notify=function(F,j){var P=this;this._observers&&this._observers.forEach(function(Q){return Q(F,j,P)})},U.prototype.getUniversalLayers=function(F){var j=["all",["==",["geometry-type"],"Polygon"],["any",["==",["get","segment"],!1],["!",["has","segment"]]],["any",["==",["get","routable"],!1],["!",["has","routable"]]],["==",["get","level"],0]],P=["all",["==",["geometry-type"],"Polygon"],["has","segment"],["==",["get","segment"],!0],["==",["get","level"],0]],Q=["all",["==",["geometry-type"],"Polygon"],["has","routable"],["==",["get","routable"],!0],["==",["get","level"],0]],$=["all",["==",["geometry-type"],"Polygon"],["has","room"],["==",["get","room"],!0],["==",["get","level"],0]],oe={minzoom:1,maxzoom:24,source:F};return[new g.default(k(k({},oe),{id:F+"-polygon-fill",type:"fill",filter:j,layout:{visibility:"none"},paint:{"fill-color":"#08c","fill-opacity":.3}})).json,new v.default(k(k({},oe),{id:F+"-polygon-outline",type:"line",filter:j,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#08c","line-width":1,"line-opacity":1}})).json,new v.default(k(k({},oe),{id:F+"-room-outline",type:"line",roomFilter:$,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":["get","color"],"line-width":1,"line-opacity":1}})).json,new g.default(k(k({},oe),{id:F+"-room-fill",type:"fill",filter:$,layout:{visibility:"none"},paint:{"fill-color":["get","color"],"fill-opacity":.3}})).json,new g.default(k(k({},oe),{id:F+"-segment-fill",type:"fill",filter:P,layout:{visibility:"none"},paint:{"fill-color":"#0c8","fill-opacity":.3}})).json,new v.default(k(k({},oe),{id:F+"-segment-outline",type:"line",filter:P,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#0c8","line-width":1,"line-opacity":1}})).json,new g.default(k(k({},oe),{id:F+"-routable-fill",type:"fill",filter:Q,layout:{visibility:"none"},paint:{"fill-color":"#c80","fill-opacity":.3}})).json,new v.default(k(k({},oe),{id:F+"-routable-outline",type:"line",filter:Q,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#c80","line-width":1,"line-opacity":1}})).json]},U.prototype.getSyntheticLayers=function(){return[new g.default({type:"fill",minzoom:1,maxzoom:24,source:"synthetic",id:"synthetic-polygon-fill",filter:["all",["==",["geometry-type"],"Polygon"]],layout:{visibility:"visible"},paint:{"fill-color":"#08c","fill-opacity":.3}}).json,new v.default({type:"line",minzoom:1,maxzoom:24,source:"synthetic",id:"synthetic-polygon-outline",filter:["all",["==",["geometry-type"],"Polygon"]],layout:{"line-join":"bevel",visibility:"visible"},paint:{"line-color":"#08c","line-width":1,"line-opacity":1}}).json]},U.prototype.usesPrefixes=function(){return typeof this.layers.find(function(F){return"proximiio-paths"===F.id})<"u"},U.prototype.addLayer=function(F,j){j?this.layers.splice(this.getLayerIndex(j)+1,0,F):this.layers.push(F)},U.prototype.getLayer=function(F){return this.layers.find(function(j){return j.id===F})},U.prototype.getLayerIndex=function(F){return this.layers.findIndex(function(j){return j.id===F})},U.prototype.getLayers=function(F){return this.layers.filter(function(j){return j.source&&j.source===F})},U.prototype.addSource=function(F,j){this.sources[F]=j},U.prototype.removeLayer=function(F){this.layers=this.layers.filter(function(j){return j.id!==F})},U.prototype.getSources=function(){var F=this,j=[];return Object.keys(this.sources).forEach(function(P){var Q=F.sources[P];Q.id=P,j.push(Q)}),j},U.prototype.setSource=function(F,j){this.sources[F]=j.source},U.prototype.getSource=function(F){return this.sources[F]},U.prototype.removeSource=function(F){this.sources[F]&&delete this.sources[F]},U.prototype.setLevel=function(F){G(G([],this.getLayers("main")),this.getLayers("route")).forEach(function(j){j.filter&&j.filter.forEach(function(P,Q){if("proximiio-levelchangers"===j.id){var $="__level_"+F;3===Q&&(P[1]=$),4===Q&&(P[1][1]=$)}if(Array.isArray(P)){var X,oe=!1;"=="===P[0]&&("to-number"===(X=P[1])[0]&&"get"===X[1][0]&&"level"===X[1][1]&&(P[2]=F,oe=!0),"get"===X[0]&&"level"===X[1]&&(P[2]=F,oe=!0)),"<="===P[0]&&("to-number"===(X=P[1])[0]&&"get"===X[1][0]&&"level_min"===X[1][1]&&(P[2]=F,oe=!0),"get"===X[0]&&"level_min"===X[1]&&(P[2]=F,oe=!0)),">="===P[0]&&("to-number"===(X=P[1])[0]&&"get"===X[1][0]&&"level_max"===X[1][1]&&(P[2]=F,oe=!0),"get"===X[0]&&"level_max"===X[1]&&(P[2]=F,oe=!0)),oe&&(j.filter[Q]=P)}})}),this.notify("filter-change")},Object.defineProperty(U.prototype,"polygonEditing",{get:function(){return this.metadata[R.METADATA_POLYGON_EDITING]||!1},enumerable:!1,configurable:!0}),U.prototype.toggleCluster=function(){this.cluster=!this.cluster,this.notify("cluster-toggled")},U.prototype.togglePolygonEditing=function(){this.metadata[R.METADATA_POLYGON_EDITING]=!this.metadata[R.METADATA_POLYGON_EDITING]||!this.metadata[R.METADATA_POLYGON_EDITING],console.log("polygon-editing-toggled",this.metadata[R.METADATA_POLYGON_EDITING]),this.notify("polygon-editing-toggled")},U.prototype.toggleRooms=function(){this.rooms=!this.rooms,this.notify("roomsss-toggled")},U.prototype.toggleOverlay=function(){this.overlay=!this.overlay,this.notify("overlay-toggled")},U.prototype.toggleSegments=function(){this.segments=!this.segments,this.notify("segments-toggled")},U.prototype.toggleRoutable=function(){this.routable=!this.routable,this.notify("routable-toggled")},U.prototype.togglePaths=function(F){var j=this.layers.find(function(Q){return"proximiio-paths"===Q.id||"paths"===Q.id});if(j){var P=new v.default(Object.assign({},j.json));P.layout.visibility=F?"visible":"none",this.updateLayer(P)}},U.prototype.updateLayer=function(F){var j=this.getLayerIndex(F.id),P=[];if(j>=0){var $=D.diff(this.layers[j].json,F.json);console.log("change",$),$&&(P.push($),this.layers.splice(j,1,F),this.notify("layer-update",{layer:F,changes:P.length>0?P[0]:[]}))}},U.prototype.setMetadata=function(F,j,P){this.metadata[F+":"+j]=P,this.notify("metadata-update")},Object.defineProperty(U.prototype,"namespaces",{get:function(){var j=Object.keys(this.metadata).filter(function(Q){return Q.indexOf(":")>0}),P=new Set(j.map(function(Q){return Q.split(":")[0]}));return Array.from(P).sort(function(Q,$){return Q.localeCompare($)})},enumerable:!1,configurable:!0}),U.prototype.namespaceItems=function(F){return Object.keys(this.metadata).filter(function(j){return 0===j.indexOf(F+":")}).map(function(j){return j.split(":").slice(1).join(":")})},Object.defineProperty(U.prototype,"json",{get:function(){var F=Object.assign({},this);return delete F._observers,delete F.overlay,F.layers=this.layers.map(function(j){return j.json}),JSON.parse(JSON.stringify(F))},enumerable:!1,configurable:!0}),U}();y.default=B},70357:(Ae,y,w)=>{Ae.exports=w(53748)},82135:(Ae,y,w)=>{"use strict";var k=w(64521),G=w(12315),I=w(44984),u=w(95543),h=w(38716),g=w(203),v=w(47267),m=w(60937);Ae.exports=function(_){return new Promise(function(M,D){var R=_.data,V=_.headers,B=_.responseType;k.isFormData(R)&&delete V["Content-Type"];var U=new XMLHttpRequest;if(_.auth){var F=_.auth.username||"",j=_.auth.password?unescape(encodeURIComponent(_.auth.password)):"";V.Authorization="Basic "+btoa(F+":"+j)}var P=h(_.baseURL,_.url);function Q(){if(U){var oe="getAllResponseHeaders"in U?g(U.getAllResponseHeaders()):null;G(M,D,{data:B&&"text"!==B&&"json"!==B?U.response:U.responseText,status:U.status,statusText:U.statusText,headers:oe,config:_,request:U}),U=null}}if(U.open(_.method.toUpperCase(),u(P,_.params,_.paramsSerializer),!0),U.timeout=_.timeout,"onloadend"in U?U.onloadend=Q:U.onreadystatechange=function(){!U||4!==U.readyState||0===U.status&&(!U.responseURL||0!==U.responseURL.indexOf("file:"))||setTimeout(Q)},U.onabort=function(){U&&(D(m("Request aborted",_,"ECONNABORTED",U)),U=null)},U.onerror=function(){D(m("Network Error",_,null,U)),U=null},U.ontimeout=function(){var X="timeout of "+_.timeout+"ms exceeded";_.timeoutErrorMessage&&(X=_.timeoutErrorMessage),D(m(X,_,_.transitional&&_.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",U)),U=null},k.isStandardBrowserEnv()){var $=(_.withCredentials||v(P))&&_.xsrfCookieName?I.read(_.xsrfCookieName):void 0;$&&(V[_.xsrfHeaderName]=$)}"setRequestHeader"in U&&k.forEach(V,function(X,ie){typeof R>"u"&&"content-type"===ie.toLowerCase()?delete V[ie]:U.setRequestHeader(ie,X)}),k.isUndefined(_.withCredentials)||(U.withCredentials=!!_.withCredentials),B&&"json"!==B&&(U.responseType=_.responseType),"function"==typeof _.onDownloadProgress&&U.addEventListener("progress",_.onDownloadProgress),"function"==typeof _.onUploadProgress&&U.upload&&U.upload.addEventListener("progress",_.onUploadProgress),_.cancelToken&&_.cancelToken.promise.then(function(X){U&&(U.abort(),D(X),U=null)}),R||(R=null),U.send(R)})}},53748:(Ae,y,w)=>{"use strict";var k=w(64521),G=w(28576),I=w(35701),u=w(52726);function g(m){var f=new I(m),_=G(I.prototype.request,f);return k.extend(_,I.prototype,f),k.extend(_,f),_}var v=g(w(4103));v.Axios=I,v.create=function(f){return g(u(v.defaults,f))},v.Cancel=w(64586),v.CancelToken=w(27203),v.isCancel=w(88291),v.all=function(f){return Promise.all(f)},v.spread=w(20394),v.isAxiosError=w(69851),Ae.exports=v,Ae.exports.default=v},64586:Ae=>{"use strict";function y(w){this.message=w}y.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},y.prototype.__CANCEL__=!0,Ae.exports=y},27203:(Ae,y,w)=>{"use strict";var k=w(64586);function G(I){if("function"!=typeof I)throw new TypeError("executor must be a function.");var u;this.promise=new Promise(function(v){u=v});var h=this;I(function(v){h.reason||(h.reason=new k(v),u(h.reason))})}G.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},G.source=function(){var u;return{token:new G(function(v){u=v}),cancel:u}},Ae.exports=G},88291:Ae=>{"use strict";Ae.exports=function(w){return!(!w||!w.__CANCEL__)}},35701:(Ae,y,w)=>{"use strict";var k=w(64521),G=w(95543),I=w(25235),u=w(84073),h=w(52726),g=w(93017),v=g.validators;function m(f){this.defaults=f,this.interceptors={request:new I,response:new I}}m.prototype.request=function(_){"string"==typeof _?(_=arguments[1]||{}).url=arguments[0]:_=_||{},(_=h(this.defaults,_)).method=_.method?_.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var S=_.transitional;void 0!==S&&g.assertOptions(S,{silentJSONParsing:v.transitional(v.boolean,"1.0.0"),forcedJSONParsing:v.transitional(v.boolean,"1.0.0"),clarifyTimeoutError:v.transitional(v.boolean,"1.0.0")},!1);var M=[],D=!0;this.interceptors.request.forEach(function(Q){"function"==typeof Q.runWhen&&!1===Q.runWhen(_)||(D=D&&Q.synchronous,M.unshift(Q.fulfilled,Q.rejected))});var V,R=[];if(this.interceptors.response.forEach(function(Q){R.push(Q.fulfilled,Q.rejected)}),!D){var B=[u,void 0];for(Array.prototype.unshift.apply(B,M),B=B.concat(R),V=Promise.resolve(_);B.length;)V=V.then(B.shift(),B.shift());return V}for(var U=_;M.length;){var F=M.shift(),j=M.shift();try{U=F(U)}catch(P){j(P);break}}try{V=u(U)}catch(P){return Promise.reject(P)}for(;R.length;)V=V.then(R.shift(),R.shift());return V},m.prototype.getUri=function(_){return _=h(this.defaults,_),G(_.url,_.params,_.paramsSerializer).replace(/^\?/,"")},k.forEach(["delete","get","head","options"],function(_){m.prototype[_]=function(S,M){return this.request(h(M||{},{method:_,url:S,data:(M||{}).data}))}}),k.forEach(["post","put","patch"],function(_){m.prototype[_]=function(S,M,D){return this.request(h(D||{},{method:_,url:S,data:M}))}}),Ae.exports=m},25235:(Ae,y,w)=>{"use strict";var k=w(64521);function G(){this.handlers=[]}G.prototype.use=function(u,h,g){return this.handlers.push({fulfilled:u,rejected:h,synchronous:!!g&&g.synchronous,runWhen:g?g.runWhen:null}),this.handlers.length-1},G.prototype.eject=function(u){this.handlers[u]&&(this.handlers[u]=null)},G.prototype.forEach=function(u){k.forEach(this.handlers,function(g){null!==g&&u(g)})},Ae.exports=G},38716:(Ae,y,w)=>{"use strict";var k=w(9442),G=w(36692);Ae.exports=function(u,h){return u&&!k(h)?G(u,h):h}},60937:(Ae,y,w)=>{"use strict";var k=w(99694);Ae.exports=function(I,u,h,g,v){var m=new Error(I);return k(m,u,h,g,v)}},84073:(Ae,y,w)=>{"use strict";var k=w(64521),G=w(89732),I=w(88291),u=w(4103);function h(g){g.cancelToken&&g.cancelToken.throwIfRequested()}Ae.exports=function(v){return h(v),v.headers=v.headers||{},v.data=G.call(v,v.data,v.headers,v.transformRequest),v.headers=k.merge(v.headers.common||{},v.headers[v.method]||{},v.headers),k.forEach(["delete","get","head","post","put","patch","common"],function(_){delete v.headers[_]}),(v.adapter||u.adapter)(v).then(function(_){return h(v),_.data=G.call(v,_.data,_.headers,v.transformResponse),_},function(_){return I(_)||(h(v),_&&_.response&&(_.response.data=G.call(v,_.response.data,_.response.headers,v.transformResponse))),Promise.reject(_)})}},99694:Ae=>{"use strict";Ae.exports=function(w,k,G,I,u){return w.config=k,G&&(w.code=G),w.request=I,w.response=u,w.isAxiosError=!0,w.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},w}},52726:(Ae,y,w)=>{"use strict";var k=w(64521);Ae.exports=function(I,u){u=u||{};var h={},g=["url","method","data"],v=["headers","auth","proxy","params"],m=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],f=["validateStatus"];function _(R,V){return k.isPlainObject(R)&&k.isPlainObject(V)?k.merge(R,V):k.isPlainObject(V)?k.merge({},V):k.isArray(V)?V.slice():V}function S(R){k.isUndefined(u[R])?k.isUndefined(I[R])||(h[R]=_(void 0,I[R])):h[R]=_(I[R],u[R])}k.forEach(g,function(V){k.isUndefined(u[V])||(h[V]=_(void 0,u[V]))}),k.forEach(v,S),k.forEach(m,function(V){k.isUndefined(u[V])?k.isUndefined(I[V])||(h[V]=_(void 0,I[V])):h[V]=_(void 0,u[V])}),k.forEach(f,function(V){V in u?h[V]=_(I[V],u[V]):V in I&&(h[V]=_(void 0,I[V]))});var M=g.concat(v).concat(m).concat(f),D=Object.keys(I).concat(Object.keys(u)).filter(function(V){return-1===M.indexOf(V)});return k.forEach(D,S),h}},12315:(Ae,y,w)=>{"use strict";var k=w(60937);Ae.exports=function(I,u,h){var g=h.config.validateStatus;h.status&&g&&!g(h.status)?u(k("Request failed with status code "+h.status,h.config,null,h.request,h)):I(h)}},89732:(Ae,y,w)=>{"use strict";var k=w(64521),G=w(4103);Ae.exports=function(u,h,g){var v=this||G;return k.forEach(g,function(f){u=f.call(v,u,h)}),u}},4103:(Ae,y,w)=>{"use strict";var k=w(64521),G=w(29641),I=w(99694),u={"Content-Type":"application/x-www-form-urlencoded"};function h(f,_){!k.isUndefined(f)&&k.isUndefined(f["Content-Type"])&&(f["Content-Type"]=_)}var m={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function g(){var f;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process))&&(f=w(82135)),f}(),transformRequest:[function(_,S){return G(S,"Accept"),G(S,"Content-Type"),k.isFormData(_)||k.isArrayBuffer(_)||k.isBuffer(_)||k.isStream(_)||k.isFile(_)||k.isBlob(_)?_:k.isArrayBufferView(_)?_.buffer:k.isURLSearchParams(_)?(h(S,"application/x-www-form-urlencoded;charset=utf-8"),_.toString()):k.isObject(_)||S&&"application/json"===S["Content-Type"]?(h(S,"application/json"),function v(f,_,S){if(k.isString(f))try{return(_||JSON.parse)(f),k.trim(f)}catch(M){if("SyntaxError"!==M.name)throw M}return(S||JSON.stringify)(f)}(_)):_}],transformResponse:[function(_){var S=this.transitional,R=!(S&&S.silentJSONParsing)&&"json"===this.responseType;if(R||S&&S.forcedJSONParsing&&k.isString(_)&&_.length)try{return JSON.parse(_)}catch(V){if(R)throw"SyntaxError"===V.name?I(V,this,"E_JSON_PARSE"):V}return _}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(_){return _>=200&&_<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};k.forEach(["delete","get","head"],function(_){m.headers[_]={}}),k.forEach(["post","put","patch"],function(_){m.headers[_]=k.merge(u)}),Ae.exports=m},28576:Ae=>{"use strict";Ae.exports=function(w,k){return function(){for(var I=new Array(arguments.length),u=0;u<I.length;u++)I[u]=arguments[u];return w.apply(k,I)}}},95543:(Ae,y,w)=>{"use strict";var k=w(64521);function G(I){return encodeURIComponent(I).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Ae.exports=function(u,h,g){if(!h)return u;var v;if(g)v=g(h);else if(k.isURLSearchParams(h))v=h.toString();else{var m=[];k.forEach(h,function(S,M){null===S||typeof S>"u"||(k.isArray(S)?M+="[]":S=[S],k.forEach(S,function(R){k.isDate(R)?R=R.toISOString():k.isObject(R)&&(R=JSON.stringify(R)),m.push(G(M)+"="+G(R))}))}),v=m.join("&")}if(v){var f=u.indexOf("#");-1!==f&&(u=u.slice(0,f)),u+=(-1===u.indexOf("?")?"?":"&")+v}return u}},36692:Ae=>{"use strict";Ae.exports=function(w,k){return k?w.replace(/\/+$/,"")+"/"+k.replace(/^\/+/,""):w}},44984:(Ae,y,w)=>{"use strict";var k=w(64521);Ae.exports=k.isStandardBrowserEnv()?{write:function(u,h,g,v,m,f){var _=[];_.push(u+"="+encodeURIComponent(h)),k.isNumber(g)&&_.push("expires="+new Date(g).toGMTString()),k.isString(v)&&_.push("path="+v),k.isString(m)&&_.push("domain="+m),!0===f&&_.push("secure"),document.cookie=_.join("; ")},read:function(u){var h=document.cookie.match(new RegExp("(^|;\\s*)("+u+")=([^;]*)"));return h?decodeURIComponent(h[3]):null},remove:function(u){this.write(u,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9442:Ae=>{"use strict";Ae.exports=function(w){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(w)}},69851:Ae=>{"use strict";Ae.exports=function(w){return"object"==typeof w&&!0===w.isAxiosError}},47267:(Ae,y,w)=>{"use strict";var k=w(64521);Ae.exports=k.isStandardBrowserEnv()?function(){var h,I=/(msie|trident)/i.test(navigator.userAgent),u=document.createElement("a");function g(v){var m=v;return I&&(u.setAttribute("href",m),m=u.href),u.setAttribute("href",m),{href:u.href,protocol:u.protocol?u.protocol.replace(/:$/,""):"",host:u.host,search:u.search?u.search.replace(/^\?/,""):"",hash:u.hash?u.hash.replace(/^#/,""):"",hostname:u.hostname,port:u.port,pathname:"/"===u.pathname.charAt(0)?u.pathname:"/"+u.pathname}}return h=g(window.location.href),function(m){var f=k.isString(m)?g(m):m;return f.protocol===h.protocol&&f.host===h.host}}():function(){return!0}},29641:(Ae,y,w)=>{"use strict";var k=w(64521);Ae.exports=function(I,u){k.forEach(I,function(g,v){v!==u&&v.toUpperCase()===u.toUpperCase()&&(I[u]=g,delete I[v])})}},203:(Ae,y,w)=>{"use strict";var k=w(64521),G=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Ae.exports=function(u){var g,v,m,h={};return u&&k.forEach(u.split("\n"),function(_){if(m=_.indexOf(":"),g=k.trim(_.substr(0,m)).toLowerCase(),v=k.trim(_.substr(m+1)),g){if(h[g]&&G.indexOf(g)>=0)return;h[g]="set-cookie"===g?(h[g]?h[g]:[]).concat([v]):h[g]?h[g]+", "+v:v}}),h}},20394:Ae=>{"use strict";Ae.exports=function(w){return function(G){return w.apply(null,G)}}},93017:(Ae,y,w)=>{"use strict";var k=w(3694),G={};["object","boolean","number","function","string","symbol"].forEach(function(v,m){G[v]=function(_){return typeof _===v||"a"+(m<1?"n ":" ")+v}});var I={},u=k.version.split(".");function h(v,m){for(var f=m?m.split("."):u,_=v.split("."),S=0;S<3;S++){if(f[S]>_[S])return!0;if(f[S]<_[S])return!1}return!1}G.transitional=function(m,f,_){var S=f&&h(f);function M(D,R){return"[Axios v"+k.version+"] Transitional option '"+D+"'"+R+(_?". "+_:"")}return function(D,R,V){if(!1===m)throw new Error(M(R," has been removed in "+f));return S&&!I[R]&&(I[R]=!0,console.warn(M(R," has been deprecated since v"+f+" and will be removed in the near future"))),!m||m(D,R,V)}},Ae.exports={isOlderVersion:h,assertOptions:function g(v,m,f){if("object"!=typeof v)throw new TypeError("options must be an object");for(var _=Object.keys(v),S=_.length;S-- >0;){var M=_[S],D=m[M];if(D){var R=v[M],V=void 0===R||D(R,M,v);if(!0!==V)throw new TypeError("option "+M+" must be "+V)}else if(!0!==f)throw Error("Unknown option "+M)}},validators:G}},64521:(Ae,y,w)=>{"use strict";var k=w(28576),G=Object.prototype.toString;function I(ie){return"[object Array]"===G.call(ie)}function u(ie){return typeof ie>"u"}function S(ie){return null!==ie&&"object"==typeof ie}function M(ie){if("[object Object]"!==G.call(ie))return!1;var q=Object.getPrototypeOf(ie);return null===q||q===Object.prototype}function B(ie){return"[object Function]"===G.call(ie)}function Q(ie,q){if(!(null===ie||typeof ie>"u"))if("object"!=typeof ie&&(ie=[ie]),I(ie))for(var se=0,ne=ie.length;se<ne;se++)q.call(null,ie[se],se,ie);else for(var Ce in ie)Object.prototype.hasOwnProperty.call(ie,Ce)&&q.call(null,ie[Ce],Ce,ie)}Ae.exports={isArray:I,isArrayBuffer:function g(ie){return"[object ArrayBuffer]"===G.call(ie)},isBuffer:function h(ie){return null!==ie&&!u(ie)&&null!==ie.constructor&&!u(ie.constructor)&&"function"==typeof ie.constructor.isBuffer&&ie.constructor.isBuffer(ie)},isFormData:function v(ie){return typeof FormData<"u"&&ie instanceof FormData},isArrayBufferView:function m(ie){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ie):ie&&ie.buffer&&ie.buffer instanceof ArrayBuffer},isString:function f(ie){return"string"==typeof ie},isNumber:function _(ie){return"number"==typeof ie},isObject:S,isPlainObject:M,isUndefined:u,isDate:function D(ie){return"[object Date]"===G.call(ie)},isFile:function R(ie){return"[object File]"===G.call(ie)},isBlob:function V(ie){return"[object Blob]"===G.call(ie)},isFunction:B,isStream:function U(ie){return S(ie)&&B(ie.pipe)},isURLSearchParams:function F(ie){return typeof URLSearchParams<"u"&&ie instanceof URLSearchParams},isStandardBrowserEnv:function P(){return(!(typeof navigator<"u")||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:Q,merge:function $(){var ie={};function q(Ce,xe){ie[xe]=M(ie[xe])&&M(Ce)?$(ie[xe],Ce):M(Ce)?$({},Ce):I(Ce)?Ce.slice():Ce}for(var se=0,ne=arguments.length;se<ne;se++)Q(arguments[se],q);return ie},extend:function oe(ie,q,se){return Q(q,function(Ce,xe){ie[xe]=se&&"function"==typeof Ce?k(Ce,se):Ce}),ie},trim:function j(ie){return ie.trim?ie.trim():ie.replace(/^\s+|\s+$/g,"")},stripBOM:function X(ie){return 65279===ie.charCodeAt(0)&&(ie=ie.slice(1)),ie}}},24978:function(Ae,y,w){"use strict";var k=this&&this.__createBinding||(Object.create?function(ps,sa,es,Mo){void 0===Mo&&(Mo=es),Object.defineProperty(ps,Mo,{enumerable:!0,get:function(){return sa[es]}})}:function(ps,sa,es,Mo){void 0===Mo&&(Mo=es),ps[Mo]=sa[es]}),G=this&&this.__exportStar||function(ps,sa){for(var es in ps)"default"!==es&&!Object.prototype.hasOwnProperty.call(sa,es)&&k(sa,ps,es)};Object.defineProperty(y,"__esModule",{value:!0}),y.interval=y.iif=y.generate=y.fromEventPattern=y.fromEvent=y.from=y.forkJoin=y.empty=y.defer=y.connectable=y.concat=y.combineLatest=y.bindNodeCallback=y.bindCallback=y.UnsubscriptionError=y.TimeoutError=y.SequenceError=y.ObjectUnsubscribedError=y.NotFoundError=y.EmptyError=y.ArgumentOutOfRangeError=y.firstValueFrom=y.lastValueFrom=y.isObservable=y.identity=y.noop=y.pipe=y.NotificationKind=y.Notification=y.Subscriber=y.Subscription=y.Scheduler=y.VirtualAction=y.VirtualTimeScheduler=y.animationFrameScheduler=y.animationFrame=y.queueScheduler=y.queue=y.asyncScheduler=y.async=y.asapScheduler=y.asap=y.AsyncSubject=y.ReplaySubject=y.BehaviorSubject=y.Subject=y.animationFrames=y.observable=y.ConnectableObservable=y.Observable=void 0,y.filter=y.expand=y.exhaustMap=y.exhaustAll=y.exhaust=y.every=y.endWith=y.elementAt=y.distinctUntilKeyChanged=y.distinctUntilChanged=y.distinct=y.dematerialize=y.delayWhen=y.delay=y.defaultIfEmpty=y.debounceTime=y.debounce=y.count=y.connect=y.concatWith=y.concatMapTo=y.concatMap=y.concatAll=y.combineLatestWith=y.combineLatestAll=y.combineAll=y.catchError=y.bufferWhen=y.bufferToggle=y.bufferTime=y.bufferCount=y.buffer=y.auditTime=y.audit=y.config=y.NEVER=y.EMPTY=y.scheduled=y.zip=y.using=y.timer=y.throwError=y.range=y.race=y.partition=y.pairs=y.onErrorResumeNext=y.of=y.never=y.merge=void 0,y.switchMap=y.switchAll=y.subscribeOn=y.startWith=y.skipWhile=y.skipUntil=y.skipLast=y.skip=y.single=y.shareReplay=y.share=y.sequenceEqual=y.scan=y.sampleTime=y.sample=y.refCount=y.retryWhen=y.retry=y.repeatWhen=y.repeat=y.reduce=y.raceWith=y.publishReplay=y.publishLast=y.publishBehavior=y.publish=y.pluck=y.pairwise=y.onErrorResumeNextWith=y.observeOn=y.multicast=y.min=y.mergeWith=y.mergeScan=y.mergeMapTo=y.mergeMap=y.flatMap=y.mergeAll=y.max=y.materialize=y.mapTo=y.map=y.last=y.isEmpty=y.ignoreElements=y.groupBy=y.first=y.findIndex=y.find=y.finalize=void 0,y.zipWith=y.zipAll=y.withLatestFrom=y.windowWhen=y.windowToggle=y.windowTime=y.windowCount=y.window=y.toArray=y.timestamp=y.timeoutWith=y.timeout=y.timeInterval=y.throwIfEmpty=y.throttleTime=y.throttle=y.tap=y.takeWhile=y.takeUntil=y.takeLast=y.take=y.switchScan=y.switchMapTo=void 0;var I=w(67759);Object.defineProperty(y,"Observable",{enumerable:!0,get:function(){return I.Observable}});var u=w(54459);Object.defineProperty(y,"ConnectableObservable",{enumerable:!0,get:function(){return u.ConnectableObservable}});var h=w(2304);Object.defineProperty(y,"observable",{enumerable:!0,get:function(){return h.observable}});var g=w(63242);Object.defineProperty(y,"animationFrames",{enumerable:!0,get:function(){return g.animationFrames}});var v=w(36961);Object.defineProperty(y,"Subject",{enumerable:!0,get:function(){return v.Subject}});var m=w(54698);Object.defineProperty(y,"BehaviorSubject",{enumerable:!0,get:function(){return m.BehaviorSubject}});var f=w(90486);Object.defineProperty(y,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var _=w(76334);Object.defineProperty(y,"AsyncSubject",{enumerable:!0,get:function(){return _.AsyncSubject}});var S=w(31911);Object.defineProperty(y,"asap",{enumerable:!0,get:function(){return S.asap}}),Object.defineProperty(y,"asapScheduler",{enumerable:!0,get:function(){return S.asapScheduler}});var M=w(48410);Object.defineProperty(y,"async",{enumerable:!0,get:function(){return M.async}}),Object.defineProperty(y,"asyncScheduler",{enumerable:!0,get:function(){return M.asyncScheduler}});var D=w(24597);Object.defineProperty(y,"queue",{enumerable:!0,get:function(){return D.queue}}),Object.defineProperty(y,"queueScheduler",{enumerable:!0,get:function(){return D.queueScheduler}});var R=w(30554);Object.defineProperty(y,"animationFrame",{enumerable:!0,get:function(){return R.animationFrame}}),Object.defineProperty(y,"animationFrameScheduler",{enumerable:!0,get:function(){return R.animationFrameScheduler}});var V=w(71091);Object.defineProperty(y,"VirtualTimeScheduler",{enumerable:!0,get:function(){return V.VirtualTimeScheduler}}),Object.defineProperty(y,"VirtualAction",{enumerable:!0,get:function(){return V.VirtualAction}});var B=w(81692);Object.defineProperty(y,"Scheduler",{enumerable:!0,get:function(){return B.Scheduler}});var U=w(74205);Object.defineProperty(y,"Subscription",{enumerable:!0,get:function(){return U.Subscription}});var F=w(9082);Object.defineProperty(y,"Subscriber",{enumerable:!0,get:function(){return F.Subscriber}});var j=w(42747);Object.defineProperty(y,"Notification",{enumerable:!0,get:function(){return j.Notification}}),Object.defineProperty(y,"NotificationKind",{enumerable:!0,get:function(){return j.NotificationKind}});var P=w(21838);Object.defineProperty(y,"pipe",{enumerable:!0,get:function(){return P.pipe}});var Q=w(57295);Object.defineProperty(y,"noop",{enumerable:!0,get:function(){return Q.noop}});var $=w(67041);Object.defineProperty(y,"identity",{enumerable:!0,get:function(){return $.identity}});var oe=w(89754);Object.defineProperty(y,"isObservable",{enumerable:!0,get:function(){return oe.isObservable}});var X=w(65864);Object.defineProperty(y,"lastValueFrom",{enumerable:!0,get:function(){return X.lastValueFrom}});var ie=w(69009);Object.defineProperty(y,"firstValueFrom",{enumerable:!0,get:function(){return ie.firstValueFrom}});var q=w(1547);Object.defineProperty(y,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return q.ArgumentOutOfRangeError}});var se=w(58186);Object.defineProperty(y,"EmptyError",{enumerable:!0,get:function(){return se.EmptyError}});var ne=w(53053);Object.defineProperty(y,"NotFoundError",{enumerable:!0,get:function(){return ne.NotFoundError}});var Ce=w(21800);Object.defineProperty(y,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return Ce.ObjectUnsubscribedError}});var xe=w(33803);Object.defineProperty(y,"SequenceError",{enumerable:!0,get:function(){return xe.SequenceError}});var ue=w(88169);Object.defineProperty(y,"TimeoutError",{enumerable:!0,get:function(){return ue.TimeoutError}});var fe=w(84473);Object.defineProperty(y,"UnsubscriptionError",{enumerable:!0,get:function(){return fe.UnsubscriptionError}});var ee=w(53508);Object.defineProperty(y,"bindCallback",{enumerable:!0,get:function(){return ee.bindCallback}});var de=w(60832);Object.defineProperty(y,"bindNodeCallback",{enumerable:!0,get:function(){return de.bindNodeCallback}});var pe=w(93436);Object.defineProperty(y,"combineLatest",{enumerable:!0,get:function(){return pe.combineLatest}});var ce=w(27989);Object.defineProperty(y,"concat",{enumerable:!0,get:function(){return ce.concat}});var ae=w(69474);Object.defineProperty(y,"connectable",{enumerable:!0,get:function(){return ae.connectable}});var ye=w(53170);Object.defineProperty(y,"defer",{enumerable:!0,get:function(){return ye.defer}});var Me=w(13817);Object.defineProperty(y,"empty",{enumerable:!0,get:function(){return Me.empty}});var _e=w(93661);Object.defineProperty(y,"forkJoin",{enumerable:!0,get:function(){return _e.forkJoin}});var Fe=w(73177);Object.defineProperty(y,"from",{enumerable:!0,get:function(){return Fe.from}});var Ue=w(50063);Object.defineProperty(y,"fromEvent",{enumerable:!0,get:function(){return Ue.fromEvent}});var Ge=w(8442);Object.defineProperty(y,"fromEventPattern",{enumerable:!0,get:function(){return Ge.fromEventPattern}});var $e=w(34981);Object.defineProperty(y,"generate",{enumerable:!0,get:function(){return $e.generate}});var He=w(29460);Object.defineProperty(y,"iif",{enumerable:!0,get:function(){return He.iif}});var Pe=w(76183);Object.defineProperty(y,"interval",{enumerable:!0,get:function(){return Pe.interval}});var je=w(59393);Object.defineProperty(y,"merge",{enumerable:!0,get:function(){return je.merge}});var ht=w(72535);Object.defineProperty(y,"never",{enumerable:!0,get:function(){return ht.never}});var Re=w(28994);Object.defineProperty(y,"of",{enumerable:!0,get:function(){return Re.of}});var tt=w(96285);Object.defineProperty(y,"onErrorResumeNext",{enumerable:!0,get:function(){return tt.onErrorResumeNext}});var it=w(6718);Object.defineProperty(y,"pairs",{enumerable:!0,get:function(){return it.pairs}});var qe=w(42048);Object.defineProperty(y,"partition",{enumerable:!0,get:function(){return qe.partition}});var Oe=w(60479);Object.defineProperty(y,"race",{enumerable:!0,get:function(){return Oe.race}});var Te=w(48013);Object.defineProperty(y,"range",{enumerable:!0,get:function(){return Te.range}});var Ne=w(61009);Object.defineProperty(y,"throwError",{enumerable:!0,get:function(){return Ne.throwError}});var rt=w(17370);Object.defineProperty(y,"timer",{enumerable:!0,get:function(){return rt.timer}});var xt=w(10701);Object.defineProperty(y,"using",{enumerable:!0,get:function(){return xt.using}});var gt=w(80512);Object.defineProperty(y,"zip",{enumerable:!0,get:function(){return gt.zip}});var on=w(20091);Object.defineProperty(y,"scheduled",{enumerable:!0,get:function(){return on.scheduled}});var Qt=w(13817);Object.defineProperty(y,"EMPTY",{enumerable:!0,get:function(){return Qt.EMPTY}});var Gt=w(72535);Object.defineProperty(y,"NEVER",{enumerable:!0,get:function(){return Gt.NEVER}}),G(w(94885),y);var Vn=w(40537);Object.defineProperty(y,"config",{enumerable:!0,get:function(){return Vn.config}});var un=w(17324);Object.defineProperty(y,"audit",{enumerable:!0,get:function(){return un.audit}});var an=w(13738);Object.defineProperty(y,"auditTime",{enumerable:!0,get:function(){return an.auditTime}});var cn=w(94776);Object.defineProperty(y,"buffer",{enumerable:!0,get:function(){return cn.buffer}});var _i=w(74469);Object.defineProperty(y,"bufferCount",{enumerable:!0,get:function(){return _i.bufferCount}});var vi=w(79556);Object.defineProperty(y,"bufferTime",{enumerable:!0,get:function(){return vi.bufferTime}});var qn=w(50918);Object.defineProperty(y,"bufferToggle",{enumerable:!0,get:function(){return qn.bufferToggle}});var Pi=w(66380);Object.defineProperty(y,"bufferWhen",{enumerable:!0,get:function(){return Pi.bufferWhen}});var ci=w(38091);Object.defineProperty(y,"catchError",{enumerable:!0,get:function(){return ci.catchError}});var Ei=w(17952);Object.defineProperty(y,"combineAll",{enumerable:!0,get:function(){return Ei.combineAll}});var Mi=w(77819);Object.defineProperty(y,"combineLatestAll",{enumerable:!0,get:function(){return Mi.combineLatestAll}});var Zi=w(15039);Object.defineProperty(y,"combineLatestWith",{enumerable:!0,get:function(){return Zi.combineLatestWith}});var ji=w(25197);Object.defineProperty(y,"concatAll",{enumerable:!0,get:function(){return ji.concatAll}});var $i=w(20178);Object.defineProperty(y,"concatMap",{enumerable:!0,get:function(){return $i.concatMap}});var so=w(29413);Object.defineProperty(y,"concatMapTo",{enumerable:!0,get:function(){return so.concatMapTo}});var Zn=w(88517);Object.defineProperty(y,"concatWith",{enumerable:!0,get:function(){return Zn.concatWith}});var zt=w(10244);Object.defineProperty(y,"connect",{enumerable:!0,get:function(){return zt.connect}});var Je=w(88429);Object.defineProperty(y,"count",{enumerable:!0,get:function(){return Je.count}});var nt=w(62556);Object.defineProperty(y,"debounce",{enumerable:!0,get:function(){return nt.debounce}});var Se=w(24189);Object.defineProperty(y,"debounceTime",{enumerable:!0,get:function(){return Se.debounceTime}});var Qe=w(25203);Object.defineProperty(y,"defaultIfEmpty",{enumerable:!0,get:function(){return Qe.defaultIfEmpty}});var ot=w(41222);Object.defineProperty(y,"delay",{enumerable:!0,get:function(){return ot.delay}});var dt=w(65369);Object.defineProperty(y,"delayWhen",{enumerable:!0,get:function(){return dt.delayWhen}});var Pt=w(67221);Object.defineProperty(y,"dematerialize",{enumerable:!0,get:function(){return Pt.dematerialize}});var At=w(15722);Object.defineProperty(y,"distinct",{enumerable:!0,get:function(){return At.distinct}});var Wt=w(64509);Object.defineProperty(y,"distinctUntilChanged",{enumerable:!0,get:function(){return Wt.distinctUntilChanged}});var Yt=w(89993);Object.defineProperty(y,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Yt.distinctUntilKeyChanged}});var Bt=w(32668);Object.defineProperty(y,"elementAt",{enumerable:!0,get:function(){return Bt.elementAt}});var $t=w(761);Object.defineProperty(y,"endWith",{enumerable:!0,get:function(){return $t.endWith}});var vn=w(1187);Object.defineProperty(y,"every",{enumerable:!0,get:function(){return vn.every}});var Cn=w(85262);Object.defineProperty(y,"exhaust",{enumerable:!0,get:function(){return Cn.exhaust}});var xn=w(19995);Object.defineProperty(y,"exhaustAll",{enumerable:!0,get:function(){return xn.exhaustAll}});var jn=w(7653);Object.defineProperty(y,"exhaustMap",{enumerable:!0,get:function(){return jn.exhaustMap}});var jt=w(16561);Object.defineProperty(y,"expand",{enumerable:!0,get:function(){return jt.expand}});var Dn=w(54375);Object.defineProperty(y,"filter",{enumerable:!0,get:function(){return Dn.filter}});var Ke=w(107);Object.defineProperty(y,"finalize",{enumerable:!0,get:function(){return Ke.finalize}});var si=w(65192);Object.defineProperty(y,"find",{enumerable:!0,get:function(){return si.find}});var xr=w(92101);Object.defineProperty(y,"findIndex",{enumerable:!0,get:function(){return xr.findIndex}});var Zr=w(18284);Object.defineProperty(y,"first",{enumerable:!0,get:function(){return Zr.first}});var Li=w(79864);Object.defineProperty(y,"groupBy",{enumerable:!0,get:function(){return Li.groupBy}});var or=w(62077);Object.defineProperty(y,"ignoreElements",{enumerable:!0,get:function(){return or.ignoreElements}});var Ri=w(6406);Object.defineProperty(y,"isEmpty",{enumerable:!0,get:function(){return Ri.isEmpty}});var to=w(21593);Object.defineProperty(y,"last",{enumerable:!0,get:function(){return to.last}});var Vi=w(60687);Object.defineProperty(y,"map",{enumerable:!0,get:function(){return Vi.map}});var Wn=w(24666);Object.defineProperty(y,"mapTo",{enumerable:!0,get:function(){return Wn.mapTo}});var Ii=w(80857);Object.defineProperty(y,"materialize",{enumerable:!0,get:function(){return Ii.materialize}});var co=w(7329);Object.defineProperty(y,"max",{enumerable:!0,get:function(){return co.max}});var ro=w(45198);Object.defineProperty(y,"mergeAll",{enumerable:!0,get:function(){return ro.mergeAll}});var Po=w(3836);Object.defineProperty(y,"flatMap",{enumerable:!0,get:function(){return Po.flatMap}});var Mr=w(11675);Object.defineProperty(y,"mergeMap",{enumerable:!0,get:function(){return Mr.mergeMap}});var ba=w(99030);Object.defineProperty(y,"mergeMapTo",{enumerable:!0,get:function(){return ba.mergeMapTo}});var at=w(5175);Object.defineProperty(y,"mergeScan",{enumerable:!0,get:function(){return at.mergeScan}});var wt=w(56694);Object.defineProperty(y,"mergeWith",{enumerable:!0,get:function(){return wt.mergeWith}});var On=w(77774);Object.defineProperty(y,"min",{enumerable:!0,get:function(){return On.min}});var Nn=w(44455);Object.defineProperty(y,"multicast",{enumerable:!0,get:function(){return Nn.multicast}});var Rn=w(20099);Object.defineProperty(y,"observeOn",{enumerable:!0,get:function(){return Rn.observeOn}});var Yn=w(18063);Object.defineProperty(y,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Yn.onErrorResumeNextWith}});var Dt=w(59174);Object.defineProperty(y,"pairwise",{enumerable:!0,get:function(){return Dt.pairwise}});var Kn=w(38237);Object.defineProperty(y,"pluck",{enumerable:!0,get:function(){return Kn.pluck}});var Ot=w(79863);Object.defineProperty(y,"publish",{enumerable:!0,get:function(){return Ot.publish}});var ft=w(65899);Object.defineProperty(y,"publishBehavior",{enumerable:!0,get:function(){return ft.publishBehavior}});var St=w(82157);Object.defineProperty(y,"publishLast",{enumerable:!0,get:function(){return St.publishLast}});var Kt=w(75783);Object.defineProperty(y,"publishReplay",{enumerable:!0,get:function(){return Kt.publishReplay}});var Ut=w(4961);Object.defineProperty(y,"raceWith",{enumerable:!0,get:function(){return Ut.raceWith}});var rn=w(39786);Object.defineProperty(y,"reduce",{enumerable:!0,get:function(){return rn.reduce}});var P1=w(24719);Object.defineProperty(y,"repeat",{enumerable:!0,get:function(){return P1.repeat}});var Gi=w(11077);Object.defineProperty(y,"repeatWhen",{enumerable:!0,get:function(){return Gi.repeatWhen}});var La=w(55087);Object.defineProperty(y,"retry",{enumerable:!0,get:function(){return La.retry}});var Di=w(18013);Object.defineProperty(y,"retryWhen",{enumerable:!0,get:function(){return Di.retryWhen}});var Ui=w(82394);Object.defineProperty(y,"refCount",{enumerable:!0,get:function(){return Ui.refCount}});var nr=w(27295);Object.defineProperty(y,"sample",{enumerable:!0,get:function(){return nr.sample}});var Be=w(11796);Object.defineProperty(y,"sampleTime",{enumerable:!0,get:function(){return Be.sampleTime}});var _t=w(54278);Object.defineProperty(y,"scan",{enumerable:!0,get:function(){return _t.scan}});var Lt=w(84677);Object.defineProperty(y,"sequenceEqual",{enumerable:!0,get:function(){return Lt.sequenceEqual}});var nn=w(43871);Object.defineProperty(y,"share",{enumerable:!0,get:function(){return nn.share}});var Pn=w(23909);Object.defineProperty(y,"shareReplay",{enumerable:!0,get:function(){return Pn.shareReplay}});var en=w(58311);Object.defineProperty(y,"single",{enumerable:!0,get:function(){return en.single}});var ri=w(52479);Object.defineProperty(y,"skip",{enumerable:!0,get:function(){return ri.skip}});var cr=w(47099);Object.defineProperty(y,"skipLast",{enumerable:!0,get:function(){return cr.skipLast}});var yr=w(20790);Object.defineProperty(y,"skipUntil",{enumerable:!0,get:function(){return yr.skipUntil}});var xa=w(94603);Object.defineProperty(y,"skipWhile",{enumerable:!0,get:function(){return xa.skipWhile}});var Sa=w(78863);Object.defineProperty(y,"startWith",{enumerable:!0,get:function(){return Sa.startWith}});var wa=w(30822);Object.defineProperty(y,"subscribeOn",{enumerable:!0,get:function(){return wa.subscribeOn}});var Xs=w(44566);Object.defineProperty(y,"switchAll",{enumerable:!0,get:function(){return Xs.switchAll}});var Qa=w(61601);Object.defineProperty(y,"switchMap",{enumerable:!0,get:function(){return Qa.switchMap}});var Vr=w(93480);Object.defineProperty(y,"switchMapTo",{enumerable:!0,get:function(){return Vr.switchMapTo}});var l1=w(62520);Object.defineProperty(y,"switchScan",{enumerable:!0,get:function(){return l1.switchScan}});var Aa=w(44254);Object.defineProperty(y,"take",{enumerable:!0,get:function(){return Aa.take}});var xs=w(82755);Object.defineProperty(y,"takeLast",{enumerable:!0,get:function(){return xs.takeLast}});var Ba=w(72301);Object.defineProperty(y,"takeUntil",{enumerable:!0,get:function(){return Ba.takeUntil}});var lo=w(81379);Object.defineProperty(y,"takeWhile",{enumerable:!0,get:function(){return lo.takeWhile}});var aa=w(99461);Object.defineProperty(y,"tap",{enumerable:!0,get:function(){return aa.tap}});var Ja=w(54725);Object.defineProperty(y,"throttle",{enumerable:!0,get:function(){return Ja.throttle}});var Da=w(30576);Object.defineProperty(y,"throttleTime",{enumerable:!0,get:function(){return Da.throttleTime}});var Dr=w(64582);Object.defineProperty(y,"throwIfEmpty",{enumerable:!0,get:function(){return Dr.throwIfEmpty}});var Zs=w(92766);Object.defineProperty(y,"timeInterval",{enumerable:!0,get:function(){return Zs.timeInterval}});var B1=w(88169);Object.defineProperty(y,"timeout",{enumerable:!0,get:function(){return B1.timeout}});var Io=w(4373);Object.defineProperty(y,"timeoutWith",{enumerable:!0,get:function(){return Io.timeoutWith}});var u1=w(62581);Object.defineProperty(y,"timestamp",{enumerable:!0,get:function(){return u1.timestamp}});var Os=w(55399);Object.defineProperty(y,"toArray",{enumerable:!0,get:function(){return Os.toArray}});var Yr=w(38491);Object.defineProperty(y,"window",{enumerable:!0,get:function(){return Yr.window}});var To=w(35763);Object.defineProperty(y,"windowCount",{enumerable:!0,get:function(){return To.windowCount}});var Sn=w(32754);Object.defineProperty(y,"windowTime",{enumerable:!0,get:function(){return Sn.windowTime}});var Fc=w(31679);Object.defineProperty(y,"windowToggle",{enumerable:!0,get:function(){return Fc.windowToggle}});var li=w(27202);Object.defineProperty(y,"windowWhen",{enumerable:!0,get:function(){return li.windowWhen}});var Sc=w(51497);Object.defineProperty(y,"withLatestFrom",{enumerable:!0,get:function(){return Sc.withLatestFrom}});var Vc=w(38617);Object.defineProperty(y,"zipAll",{enumerable:!0,get:function(){return Vc.zipAll}});var Oa=w(41494);Object.defineProperty(y,"zipWith",{enumerable:!0,get:function(){return Oa.zipWith}})},76334:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.AsyncSubject=void 0;var I=function(u){function h(){var g=null!==u&&u.apply(this,arguments)||this;return g._value=null,g._hasValue=!1,g._isComplete=!1,g}return k(h,u),h.prototype._checkFinalizedStatuses=function(g){var v=this,f=v._hasValue,_=v._value,M=v.isStopped,D=v._isComplete;v.hasError?g.error(v.thrownError):(M||D)&&(f&&g.next(_),g.complete())},h.prototype.next=function(g){this.isStopped||(this._value=g,this._hasValue=!0)},h.prototype.complete=function(){var g=this,v=g._hasValue,m=g._value;g._isComplete||(this._isComplete=!0,v&&u.prototype.next.call(this,m),u.prototype.complete.call(this))},h}(w(36961).Subject);y.AsyncSubject=I},54698:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.BehaviorSubject=void 0;var I=function(u){function h(g){var v=u.call(this)||this;return v._value=g,v}return k(h,u),Object.defineProperty(h.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),h.prototype._subscribe=function(g){var v=u.prototype._subscribe.call(this,g);return!v.closed&&g.next(this._value),v},h.prototype.getValue=function(){var g=this,f=g._value;if(g.hasError)throw g.thrownError;return this._throwIfClosed(),f},h.prototype.next=function(g){u.prototype.next.call(this,this._value=g)},h}(w(36961).Subject);y.BehaviorSubject=I},42747:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.observeNotification=y.Notification=y.NotificationKind=void 0;var m,k=w(13817),G=w(28994),I=w(61009),u=w(83178);(m=y.NotificationKind||(y.NotificationKind={})).NEXT="N",m.ERROR="E",m.COMPLETE="C";var g=function(){function m(f,_,S){this.kind=f,this.value=_,this.error=S,this.hasValue="N"===f}return m.prototype.observe=function(f){return v(this,f)},m.prototype.do=function(f,_,S){var M=this,D=M.kind,R=M.value,V=M.error;return"N"===D?f?.(R):"E"===D?_?.(V):S?.()},m.prototype.accept=function(f,_,S){var M;return u.isFunction(null===(M=f)||void 0===M?void 0:M.next)?this.observe(f):this.do(f,_,S)},m.prototype.toObservable=function(){var f=this,_=f.kind,M=f.error,D="N"===_?G.of(f.value):"E"===_?I.throwError(function(){return M}):"C"===_?k.EMPTY:0;if(!D)throw new TypeError("Unexpected notification kind "+_);return D},m.createNext=function(f){return new m("N",f)},m.createError=function(f){return new m("E",void 0,f)},m.createComplete=function(){return m.completeNotification},m.completeNotification=new m("C"),m}();function v(m,f){var _,S,M,R=m.kind,V=m.value,B=m.error;if("string"!=typeof R)throw new TypeError('Invalid notification, missing "kind"');"N"===R?null===(_=f.next)||void 0===_||_.call(f,V):"E"===R?null===(S=f.error)||void 0===S||S.call(f,B):null===(M=f.complete)||void 0===M||M.call(f)}y.Notification=g,y.observeNotification=v},68196:(Ae,y)=>{"use strict";function G(I,u,h){return{kind:I,value:u,error:h}}Object.defineProperty(y,"__esModule",{value:!0}),y.createNotification=y.nextNotification=y.errorNotification=y.COMPLETE_NOTIFICATION=void 0,y.COMPLETE_NOTIFICATION=G("C",void 0,void 0),y.errorNotification=function w(I){return G("E",void 0,I)},y.nextNotification=function k(I){return G("N",I,void 0)},y.createNotification=G},67759:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Observable=void 0;var k=w(9082),G=w(74205),I=w(2304),u=w(21838),h=w(40537),g=w(83178),v=w(71920),m=function(){function M(D){D&&(this._subscribe=D)}return M.prototype.lift=function(D){var R=new M;return R.source=this,R.operator=D,R},M.prototype.subscribe=function(D,R,V){var B=this,U=function S(M){return M&&M instanceof k.Subscriber||function _(M){return M&&g.isFunction(M.next)&&g.isFunction(M.error)&&g.isFunction(M.complete)}(M)&&G.isSubscription(M)}(D)?D:new k.SafeSubscriber(D,R,V);return v.errorContext(function(){var j=B.operator,P=B.source;U.add(j?j.call(U,P):P?B._subscribe(U):B._trySubscribe(U))}),U},M.prototype._trySubscribe=function(D){try{return this._subscribe(D)}catch(R){D.error(R)}},M.prototype.forEach=function(D,R){var V=this;return new(R=f(R))(function(B,U){var F=new k.SafeSubscriber({next:function(j){try{D(j)}catch(P){U(P),F.unsubscribe()}},error:U,complete:B});V.subscribe(F)})},M.prototype._subscribe=function(D){var R;return null===(R=this.source)||void 0===R?void 0:R.subscribe(D)},M.prototype[I.observable]=function(){return this},M.prototype.pipe=function(){for(var D=[],R=0;R<arguments.length;R++)D[R]=arguments[R];return u.pipeFromArray(D)(this)},M.prototype.toPromise=function(D){var R=this;return new(D=f(D))(function(V,B){var U;R.subscribe(function(F){return U=F},function(F){return B(F)},function(){return V(U)})})},M.create=function(D){return new M(D)},M}();function f(M){var D;return null!==(D=M??h.config.Promise)&&void 0!==D?D:Promise}y.Observable=m},90486:function(Ae,y,w){"use strict";var h,k=this&&this.__extends||(h=function(g,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(m[_]=f[_])})(g,v)},function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function m(){this.constructor=g}h(g,v),g.prototype=null===v?Object.create(v):(m.prototype=v.prototype,new m)});Object.defineProperty(y,"__esModule",{value:!0}),y.ReplaySubject=void 0;var G=w(36961),I=w(69539),u=function(h){function g(v,m,f){void 0===v&&(v=1/0),void 0===m&&(m=1/0),void 0===f&&(f=I.dateTimestampProvider);var _=h.call(this)||this;return _._bufferSize=v,_._windowTime=m,_._timestampProvider=f,_._buffer=[],_._infiniteTimeWindow=!0,_._infiniteTimeWindow=m===1/0,_._bufferSize=Math.max(1,v),_._windowTime=Math.max(1,m),_}return k(g,h),g.prototype.next=function(v){var m=this,_=m._buffer,S=m._infiniteTimeWindow,M=m._timestampProvider,D=m._windowTime;m.isStopped||(_.push(v),!S&&_.push(M.now()+D)),this._trimBuffer(),h.prototype.next.call(this,v)},g.prototype._subscribe=function(v){this._throwIfClosed(),this._trimBuffer();for(var m=this._innerSubscribe(v),_=this._infiniteTimeWindow,M=this._buffer.slice(),D=0;D<M.length&&!v.closed;D+=_?1:2)v.next(M[D]);return this._checkFinalizedStatuses(v),m},g.prototype._trimBuffer=function(){var v=this,m=v._bufferSize,f=v._timestampProvider,_=v._buffer,S=v._infiniteTimeWindow,M=(S?1:2)*m;if(m<1/0&&M<_.length&&_.splice(0,_.length-M),!S){for(var D=f.now(),R=0,V=1;V<_.length&&_[V]<=D;V+=2)R=V;R&&_.splice(0,R+1)}},g}(G.Subject);y.ReplaySubject=u},81692:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.Scheduler=void 0;var k=w(69539),G=function(){function I(u,h){void 0===h&&(h=I.now),this.schedulerActionCtor=u,this.now=h}return I.prototype.schedule=function(u,h,g){return void 0===h&&(h=0),new this.schedulerActionCtor(this,u).schedule(g,h)},I.now=k.dateTimestampProvider.now,I}();y.Scheduler=G},36961:function(Ae,y,w){"use strict";var _,k=this&&this.__extends||(_=function(S,M){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,R){D.__proto__=R}||function(D,R){for(var V in R)Object.prototype.hasOwnProperty.call(R,V)&&(D[V]=R[V])})(S,M)},function(S,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function D(){this.constructor=S}_(S,M),S.prototype=null===M?Object.create(M):(D.prototype=M.prototype,new D)}),G=this&&this.__values||function(_){var S="function"==typeof Symbol&&Symbol.iterator,M=S&&_[S],D=0;if(M)return M.call(_);if(_&&"number"==typeof _.length)return{next:function(){return _&&D>=_.length&&(_=void 0),{value:_&&_[D++],done:!_}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0}),y.AnonymousSubject=y.Subject=void 0;var I=w(67759),u=w(74205),h=w(21800),g=w(80398),v=w(71920),m=function(_){function S(){var M=_.call(this)||this;return M.closed=!1,M.currentObservers=null,M.observers=[],M.isStopped=!1,M.hasError=!1,M.thrownError=null,M}return k(S,_),S.prototype.lift=function(M){var D=new f(this,this);return D.operator=M,D},S.prototype._throwIfClosed=function(){if(this.closed)throw new h.ObjectUnsubscribedError},S.prototype.next=function(M){var D=this;v.errorContext(function(){var R,V;if(D._throwIfClosed(),!D.isStopped){D.currentObservers||(D.currentObservers=Array.from(D.observers));try{for(var B=G(D.currentObservers),U=B.next();!U.done;U=B.next())U.value.next(M)}catch(j){R={error:j}}finally{try{U&&!U.done&&(V=B.return)&&V.call(B)}finally{if(R)throw R.error}}}})},S.prototype.error=function(M){var D=this;v.errorContext(function(){if(D._throwIfClosed(),!D.isStopped){D.hasError=D.isStopped=!0,D.thrownError=M;for(var R=D.observers;R.length;)R.shift().error(M)}})},S.prototype.complete=function(){var M=this;v.errorContext(function(){if(M._throwIfClosed(),!M.isStopped){M.isStopped=!0;for(var D=M.observers;D.length;)D.shift().complete()}})},S.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(S.prototype,"observed",{get:function(){var M;return(null===(M=this.observers)||void 0===M?void 0:M.length)>0},enumerable:!1,configurable:!0}),S.prototype._trySubscribe=function(M){return this._throwIfClosed(),_.prototype._trySubscribe.call(this,M)},S.prototype._subscribe=function(M){return this._throwIfClosed(),this._checkFinalizedStatuses(M),this._innerSubscribe(M)},S.prototype._innerSubscribe=function(M){var D=this,R=this,U=R.observers;return R.hasError||R.isStopped?u.EMPTY_SUBSCRIPTION:(this.currentObservers=null,U.push(M),new u.Subscription(function(){D.currentObservers=null,g.arrRemove(U,M)}))},S.prototype._checkFinalizedStatuses=function(M){var D=this,B=D.isStopped;D.hasError?M.error(D.thrownError):B&&M.complete()},S.prototype.asObservable=function(){var M=new I.Observable;return M.source=this,M},S.create=function(M,D){return new f(M,D)},S}(I.Observable);y.Subject=m;var f=function(_){function S(M,D){var R=_.call(this)||this;return R.destination=M,R.source=D,R}return k(S,_),S.prototype.next=function(M){var D,R;null===(R=null===(D=this.destination)||void 0===D?void 0:D.next)||void 0===R||R.call(D,M)},S.prototype.error=function(M){var D,R;null===(R=null===(D=this.destination)||void 0===D?void 0:D.error)||void 0===R||R.call(D,M)},S.prototype.complete=function(){var M,D;null===(D=null===(M=this.destination)||void 0===M?void 0:M.complete)||void 0===D||D.call(M)},S.prototype._subscribe=function(M){var D,R;return null!==(R=null===(D=this.source)||void 0===D?void 0:D.subscribe(M))&&void 0!==R?R:u.EMPTY_SUBSCRIPTION},S}(m);y.AnonymousSubject=f},9082:function(Ae,y,w){"use strict";var F,k=this&&this.__extends||(F=function(j,P){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,$){Q.__proto__=$}||function(Q,$){for(var oe in $)Object.prototype.hasOwnProperty.call($,oe)&&(Q[oe]=$[oe])})(j,P)},function(j,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function Q(){this.constructor=j}F(j,P),j.prototype=null===P?Object.create(P):(Q.prototype=P.prototype,new Q)});Object.defineProperty(y,"__esModule",{value:!0}),y.EMPTY_OBSERVER=y.SafeSubscriber=y.Subscriber=void 0;var G=w(83178),I=w(74205),u=w(40537),h=w(48055),g=w(57295),v=w(68196),m=w(1593),f=w(71920),_=function(F){function j(P){var Q=F.call(this)||this;return Q.isStopped=!1,P?(Q.destination=P,I.isSubscription(P)&&P.add(Q)):Q.destination=y.EMPTY_OBSERVER,Q}return k(j,F),j.create=function(P,Q,$){return new R(P,Q,$)},j.prototype.next=function(P){this.isStopped?U(v.nextNotification(P),this):this._next(P)},j.prototype.error=function(P){this.isStopped?U(v.errorNotification(P),this):(this.isStopped=!0,this._error(P))},j.prototype.complete=function(){this.isStopped?U(v.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},j.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,F.prototype.unsubscribe.call(this),this.destination=null)},j.prototype._next=function(P){this.destination.next(P)},j.prototype._error=function(P){try{this.destination.error(P)}finally{this.unsubscribe()}},j.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},j}(I.Subscription);y.Subscriber=_;var S=Function.prototype.bind;function M(F,j){return S.call(F,j)}var D=function(){function F(j){this.partialObserver=j}return F.prototype.next=function(j){var P=this.partialObserver;if(P.next)try{P.next(j)}catch(Q){V(Q)}},F.prototype.error=function(j){var P=this.partialObserver;if(P.error)try{P.error(j)}catch(Q){V(Q)}else V(j)},F.prototype.complete=function(){var j=this.partialObserver;if(j.complete)try{j.complete()}catch(P){V(P)}},F}(),R=function(F){function j(P,Q,$){var X,ie,oe=F.call(this)||this;return G.isFunction(P)||!P?X={next:P??void 0,error:Q??void 0,complete:$??void 0}:oe&&u.config.useDeprecatedNextContext?((ie=Object.create(P)).unsubscribe=function(){return oe.unsubscribe()},X={next:P.next&&M(P.next,ie),error:P.error&&M(P.error,ie),complete:P.complete&&M(P.complete,ie)}):X=P,oe.destination=new D(X),oe}return k(j,F),j}(_);function V(F){u.config.useDeprecatedSynchronousErrorHandling?f.captureError(F):h.reportUnhandledError(F)}function U(F,j){var P=u.config.onStoppedNotification;P&&m.timeoutProvider.setTimeout(function(){return P(F,j)})}y.SafeSubscriber=R,y.EMPTY_OBSERVER={closed:!0,next:g.noop,error:function B(F){throw F},complete:g.noop}},74205:function(Ae,y,w){"use strict";var k=this&&this.__values||function(_){var S="function"==typeof Symbol&&Symbol.iterator,M=S&&_[S],D=0;if(M)return M.call(_);if(_&&"number"==typeof _.length)return{next:function(){return _&&D>=_.length&&(_=void 0),{value:_&&_[D++],done:!_}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},G=this&&this.__read||function(_,S){var M="function"==typeof Symbol&&_[Symbol.iterator];if(!M)return _;var R,B,D=M.call(_),V=[];try{for(;(void 0===S||S-- >0)&&!(R=D.next()).done;)V.push(R.value)}catch(U){B={error:U}}finally{try{R&&!R.done&&(M=D.return)&&M.call(D)}finally{if(B)throw B.error}}return V},I=this&&this.__spreadArray||function(_,S){for(var M=0,D=S.length,R=_.length;M<D;M++,R++)_[R]=S[M];return _};Object.defineProperty(y,"__esModule",{value:!0}),y.isSubscription=y.EMPTY_SUBSCRIPTION=y.Subscription=void 0;var u=w(83178),h=w(84473),g=w(80398),v=function(){function _(S){this.initialTeardown=S,this.closed=!1,this._parentage=null,this._finalizers=null}return _.prototype.unsubscribe=function(){var S,M,D,R,V;if(!this.closed){this.closed=!0;var B=this._parentage;if(B)if(this._parentage=null,Array.isArray(B))try{for(var U=k(B),F=U.next();!F.done;F=U.next())F.value.remove(this)}catch(ie){S={error:ie}}finally{try{F&&!F.done&&(M=U.return)&&M.call(U)}finally{if(S)throw S.error}}else B.remove(this);var P=this.initialTeardown;if(u.isFunction(P))try{P()}catch(ie){V=ie instanceof h.UnsubscriptionError?ie.errors:[ie]}var Q=this._finalizers;if(Q){this._finalizers=null;try{for(var $=k(Q),oe=$.next();!oe.done;oe=$.next()){var X=oe.value;try{f(X)}catch(ie){V=V??[],ie instanceof h.UnsubscriptionError?V=I(I([],G(V)),G(ie.errors)):V.push(ie)}}}catch(ie){D={error:ie}}finally{try{oe&&!oe.done&&(R=$.return)&&R.call($)}finally{if(D)throw D.error}}}if(V)throw new h.UnsubscriptionError(V)}},_.prototype.add=function(S){var M;if(S&&S!==this)if(this.closed)f(S);else{if(S instanceof _){if(S.closed||S._hasParent(this))return;S._addParent(this)}(this._finalizers=null!==(M=this._finalizers)&&void 0!==M?M:[]).push(S)}},_.prototype._hasParent=function(S){var M=this._parentage;return M===S||Array.isArray(M)&&M.includes(S)},_.prototype._addParent=function(S){var M=this._parentage;this._parentage=Array.isArray(M)?(M.push(S),M):M?[M,S]:S},_.prototype._removeParent=function(S){var M=this._parentage;M===S?this._parentage=null:Array.isArray(M)&&g.arrRemove(M,S)},_.prototype.remove=function(S){var M=this._finalizers;M&&g.arrRemove(M,S),S instanceof _&&S._removeParent(this)},_.EMPTY=((S=new _).closed=!0,S),_;var S}();function f(_){u.isFunction(_)?_():_.unsubscribe()}y.Subscription=v,y.EMPTY_SUBSCRIPTION=v.EMPTY,y.isSubscription=function m(_){return _ instanceof v||_&&"closed"in _&&u.isFunction(_.remove)&&u.isFunction(_.add)&&u.isFunction(_.unsubscribe)}},40537:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.config=void 0,y.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},69009:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.firstValueFrom=void 0;var k=w(58186),G=w(9082);y.firstValueFrom=function I(u,h){var g="object"==typeof h;return new Promise(function(v,m){var f=new G.SafeSubscriber({next:function(_){v(_),f.unsubscribe()},error:m,complete:function(){g?v(h.defaultValue):m(new k.EmptyError)}});u.subscribe(f)})}},65864:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.lastValueFrom=void 0;var k=w(58186);y.lastValueFrom=function G(I,u){var h="object"==typeof u;return new Promise(function(g,v){var f,m=!1;I.subscribe({next:function(_){f=_,m=!0},error:v,complete:function(){m?g(f):h?g(u.defaultValue):v(new k.EmptyError)}})})}},54459:function(Ae,y,w){"use strict";var m,k=this&&this.__extends||(m=function(f,_){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,M){S.__proto__=M}||function(S,M){for(var D in M)Object.prototype.hasOwnProperty.call(M,D)&&(S[D]=M[D])})(f,_)},function(f,_){if("function"!=typeof _&&null!==_)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");function S(){this.constructor=f}m(f,_),f.prototype=null===_?Object.create(_):(S.prototype=_.prototype,new S)});Object.defineProperty(y,"__esModule",{value:!0}),y.ConnectableObservable=void 0;var G=w(67759),I=w(74205),u=w(82394),h=w(24883),g=w(3525),v=function(m){function f(_,S){var M=m.call(this)||this;return M.source=_,M.subjectFactory=S,M._subject=null,M._refCount=0,M._connection=null,g.hasLift(_)&&(M.lift=_.lift),M}return k(f,m),f.prototype._subscribe=function(_){return this.getSubject().subscribe(_)},f.prototype.getSubject=function(){var _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject},f.prototype._teardown=function(){this._refCount=0;var _=this._connection;this._subject=this._connection=null,_?.unsubscribe()},f.prototype.connect=function(){var _=this,S=this._connection;if(!S){S=this._connection=new I.Subscription;var M=this.getSubject();S.add(this.source.subscribe(h.createOperatorSubscriber(M,void 0,function(){_._teardown(),M.complete()},function(D){_._teardown(),M.error(D)},function(){return _._teardown()}))),S.closed&&(this._connection=null,S=I.Subscription.EMPTY)}return S},f.prototype.refCount=function(){return u.refCount()(this)},f}(G.Observable);y.ConnectableObservable=v},53508:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.bindCallback=void 0;var k=w(62948);y.bindCallback=function G(I,u,h){return k.bindCallbackInternals(!1,I,u,h)}},62948:function(Ae,y,w){"use strict";var k=this&&this.__read||function(_,S){var M="function"==typeof Symbol&&_[Symbol.iterator];if(!M)return _;var R,B,D=M.call(_),V=[];try{for(;(void 0===S||S-- >0)&&!(R=D.next()).done;)V.push(R.value)}catch(U){B={error:U}}finally{try{R&&!R.done&&(M=D.return)&&M.call(D)}finally{if(B)throw B.error}}return V},G=this&&this.__spreadArray||function(_,S){for(var M=0,D=S.length,R=_.length;M<D;M++,R++)_[R]=S[M];return _};Object.defineProperty(y,"__esModule",{value:!0}),y.bindCallbackInternals=void 0;var I=w(98133),u=w(67759),h=w(30822),g=w(9795),v=w(20099),m=w(76334);y.bindCallbackInternals=function f(_,S,M,D){if(M){if(!I.isScheduler(M))return function(){for(var R=[],V=0;V<arguments.length;V++)R[V]=arguments[V];return f(_,S,D).apply(this,R).pipe(g.mapOneOrManyArgs(M))};D=M}return D?function(){for(var R=[],V=0;V<arguments.length;V++)R[V]=arguments[V];return f(_,S).apply(this,R).pipe(h.subscribeOn(D),v.observeOn(D))}:function(){for(var R=this,V=[],B=0;B<arguments.length;B++)V[B]=arguments[B];var U=new m.AsyncSubject,F=!0;return new u.Observable(function(j){var P=U.subscribe(j);if(F){F=!1;var Q=!1,$=!1;S.apply(R,G(G([],k(V)),[function(){for(var oe=[],X=0;X<arguments.length;X++)oe[X]=arguments[X];if(_){var ie=oe.shift();if(null!=ie)return void U.error(ie)}U.next(1<oe.length?oe:oe[0]),$=!0,Q&&U.complete()}])),$&&U.complete(),Q=!0}return P})}}},60832:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.bindNodeCallback=void 0;var k=w(62948);y.bindNodeCallback=function G(I,u,h){return k.bindCallbackInternals(!0,I,u,h)}},93436:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.combineLatestInit=y.combineLatest=void 0;var k=w(67759),G=w(55362),I=w(73177),u=w(67041),h=w(9795),g=w(94546),v=w(38459),m=w(24883),f=w(41442);function S(D,R,V){return void 0===V&&(V=u.identity),function(B){M(R,function(){for(var U=D.length,F=new Array(U),j=U,P=U,Q=function(oe){M(R,function(){var X=I.from(D[oe],R),ie=!1;X.subscribe(m.createOperatorSubscriber(B,function(q){F[oe]=q,ie||(ie=!0,P--),P||B.next(V(F.slice()))},function(){--j||B.complete()}))},B)},$=0;$<U;$++)Q($)},B)}}function M(D,R,V){D?f.executeSchedule(V,D,R):R()}y.combineLatest=function _(){for(var D=[],R=0;R<arguments.length;R++)D[R]=arguments[R];var V=g.popScheduler(D),B=g.popResultSelector(D),U=G.argsArgArrayOrObject(D),F=U.args,j=U.keys;if(0===F.length)return I.from([],V);var P=new k.Observable(S(F,V,j?function(Q){return v.createObject(j,Q)}:u.identity));return B?P.pipe(h.mapOneOrManyArgs(B)):P},y.combineLatestInit=S},27989:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.concat=void 0;var k=w(25197),G=w(94546),I=w(73177);y.concat=function u(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return k.concatAll()(I.from(h,G.popScheduler(h)))}},69474:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.connectable=void 0;var k=w(36961),G=w(67759),I=w(53170),u={connector:function(){return new k.Subject},resetOnDisconnect:!0};y.connectable=function h(g,v){void 0===v&&(v=u);var m=null,f=v.connector,_=v.resetOnDisconnect,S=void 0===_||_,M=f(),D=new G.Observable(function(R){return M.subscribe(R)});return D.connect=function(){return(!m||m.closed)&&(m=I.defer(function(){return g}).subscribe(M),S&&m.add(function(){return M=f()})),m},D}},53170:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.defer=void 0;var k=w(67759),G=w(3454);y.defer=function I(u){return new k.Observable(function(h){G.innerFrom(u()).subscribe(h)})}},63242:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.animationFrames=void 0;var k=w(67759),G=w(74253),I=w(1170);function h(v){return new k.Observable(function(m){var f=v||G.performanceTimestampProvider,_=f.now(),S=0,M=function(){m.closed||(S=I.animationFrameProvider.requestAnimationFrame(function(D){S=0;var R=f.now();m.next({timestamp:v?R:D,elapsed:R-_}),M()}))};return M(),function(){S&&I.animationFrameProvider.cancelAnimationFrame(S)}})}y.animationFrames=function u(v){return v?h(v):g};var g=h()},13817:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.empty=y.EMPTY=void 0;var k=w(67759);y.EMPTY=new k.Observable(function(u){return u.complete()}),y.empty=function G(u){return u?function I(u){return new k.Observable(function(h){return u.schedule(function(){return h.complete()})})}(u):y.EMPTY}},93661:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.forkJoin=void 0;var k=w(67759),G=w(55362),I=w(3454),u=w(94546),h=w(24883),g=w(9795),v=w(38459);y.forkJoin=function m(){for(var f=[],_=0;_<arguments.length;_++)f[_]=arguments[_];var S=u.popResultSelector(f),M=G.argsArgArrayOrObject(f),D=M.args,R=M.keys,V=new k.Observable(function(B){var U=D.length;if(U)for(var F=new Array(U),j=U,P=U,Q=function(oe){var X=!1;I.innerFrom(D[oe]).subscribe(h.createOperatorSubscriber(B,function(ie){X||(X=!0,P--),F[oe]=ie},function(){return j--},void 0,function(){(!j||!X)&&(P||B.next(R?v.createObject(R,F):F),B.complete())}))},$=0;$<U;$++)Q($);else B.complete()});return S?V.pipe(g.mapOneOrManyArgs(S)):V}},73177:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.from=void 0;var k=w(20091),G=w(3454);y.from=function I(u,h){return h?k.scheduled(u,h):G.innerFrom(u)}},50063:function(Ae,y,w){"use strict";var k=this&&this.__read||function(B,U){var F="function"==typeof Symbol&&B[Symbol.iterator];if(!F)return B;var P,$,j=F.call(B),Q=[];try{for(;(void 0===U||U-- >0)&&!(P=j.next()).done;)Q.push(P.value)}catch(oe){$={error:oe}}finally{try{P&&!P.done&&(F=j.return)&&F.call(j)}finally{if($)throw $.error}}return Q};Object.defineProperty(y,"__esModule",{value:!0}),y.fromEvent=void 0;var G=w(3454),I=w(67759),u=w(11675),h=w(97523),g=w(83178),v=w(9795),m=["addListener","removeListener"],f=["addEventListener","removeEventListener"],_=["on","off"];function M(B,U){return function(F){return function(j){return B[F](U,j)}}}y.fromEvent=function S(B,U,F,j){if(g.isFunction(F)&&(j=F,F=void 0),j)return S(B,U,F).pipe(v.mapOneOrManyArgs(j));var P=k(function V(B){return g.isFunction(B.addEventListener)&&g.isFunction(B.removeEventListener)}(B)?f.map(function(oe){return function(X){return B[oe](U,X,F)}}):function D(B){return g.isFunction(B.addListener)&&g.isFunction(B.removeListener)}(B)?m.map(M(B,U)):function R(B){return g.isFunction(B.on)&&g.isFunction(B.off)}(B)?_.map(M(B,U)):[],2),Q=P[0],$=P[1];if(!Q&&h.isArrayLike(B))return u.mergeMap(function(oe){return S(oe,U,F)})(G.innerFrom(B));if(!Q)throw new TypeError("Invalid event target");return new I.Observable(function(oe){var X=function(){for(var ie=[],q=0;q<arguments.length;q++)ie[q]=arguments[q];return oe.next(1<ie.length?ie:ie[0])};return Q(X),function(){return $(X)}})}},8442:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.fromEventPattern=void 0;var k=w(67759),G=w(83178),I=w(9795);y.fromEventPattern=function u(h,g,v){return v?u(h,g).pipe(I.mapOneOrManyArgs(v)):new k.Observable(function(m){var f=function(){for(var S=[],M=0;M<arguments.length;M++)S[M]=arguments[M];return m.next(1===S.length?S[0]:S)},_=h(f);return G.isFunction(g)?function(){return g(f,_)}:void 0})}},61696:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.fromSubscribable=void 0;var k=w(67759);y.fromSubscribable=function G(I){return new k.Observable(function(u){return I.subscribe(u)})}},34981:function(Ae,y,w){"use strict";var k=this&&this.__generator||function(v,m){var _,S,M,D,f={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return D={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function R(B){return function(U){return function V(B){if(_)throw new TypeError("Generator is already executing.");for(;f;)try{if(_=1,S&&(M=2&B[0]?S.return:B[0]?S.throw||((M=S.return)&&M.call(S),0):S.next)&&!(M=M.call(S,B[1])).done)return M;switch(S=0,M&&(B=[2&B[0],M.value]),B[0]){case 0:case 1:M=B;break;case 4:return f.label++,{value:B[1],done:!1};case 5:f.label++,S=B[1],B=[0];continue;case 7:B=f.ops.pop(),f.trys.pop();continue;default:if(!(M=(M=f.trys).length>0&&M[M.length-1])&&(6===B[0]||2===B[0])){f=0;continue}if(3===B[0]&&(!M||B[1]>M[0]&&B[1]<M[3])){f.label=B[1];break}if(6===B[0]&&f.label<M[1]){f.label=M[1],M=B;break}if(M&&f.label<M[2]){f.label=M[2],f.ops.push(B);break}M[2]&&f.ops.pop(),f.trys.pop();continue}B=m.call(v,f)}catch(U){B=[6,U],S=0}finally{_=M=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,U])}}};Object.defineProperty(y,"__esModule",{value:!0}),y.generate=void 0;var G=w(67041),I=w(98133),u=w(53170),h=w(32683);y.generate=function g(v,m,f,_,S){var M,D,R,V;function B(){var U;return k(this,function(F){switch(F.label){case 0:U=V,F.label=1;case 1:return!m||m(U)?[4,R(U)]:[3,4];case 2:F.sent(),F.label=3;case 3:return U=f(U),[3,1];case 4:return[2]}})}return 1===arguments.length?(V=(M=v).initialState,m=M.condition,f=M.iterate,R=void 0===(D=M.resultSelector)?G.identity:D,S=M.scheduler):(V=v,!_||I.isScheduler(_)?(R=G.identity,S=_):R=_),u.defer(S?function(){return h.scheduleIterable(B(),S)}:B)}},29460:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.iif=void 0;var k=w(53170);y.iif=function G(I,u,h){return k.defer(function(){return I()?u:h})}},3454:function(Ae,y,w){"use strict";var k=this&&this.__awaiter||function(X,ie,q,se){return new(q||(q=Promise))(function(Ce,xe){function ue(de){try{ee(se.next(de))}catch(pe){xe(pe)}}function fe(de){try{ee(se.throw(de))}catch(pe){xe(pe)}}function ee(de){de.done?Ce(de.value):function ne(Ce){return Ce instanceof q?Ce:new q(function(xe){xe(Ce)})}(de.value).then(ue,fe)}ee((se=se.apply(X,ie||[])).next())})},G=this&&this.__generator||function(X,ie){var se,ne,Ce,xe,q={label:0,sent:function(){if(1&Ce[0])throw Ce[1];return Ce[1]},trys:[],ops:[]};return xe={next:ue(0),throw:ue(1),return:ue(2)},"function"==typeof Symbol&&(xe[Symbol.iterator]=function(){return this}),xe;function ue(ee){return function(de){return function fe(ee){if(se)throw new TypeError("Generator is already executing.");for(;q;)try{if(se=1,ne&&(Ce=2&ee[0]?ne.return:ee[0]?ne.throw||((Ce=ne.return)&&Ce.call(ne),0):ne.next)&&!(Ce=Ce.call(ne,ee[1])).done)return Ce;switch(ne=0,Ce&&(ee=[2&ee[0],Ce.value]),ee[0]){case 0:case 1:Ce=ee;break;case 4:return q.label++,{value:ee[1],done:!1};case 5:q.label++,ne=ee[1],ee=[0];continue;case 7:ee=q.ops.pop(),q.trys.pop();continue;default:if(!(Ce=(Ce=q.trys).length>0&&Ce[Ce.length-1])&&(6===ee[0]||2===ee[0])){q=0;continue}if(3===ee[0]&&(!Ce||ee[1]>Ce[0]&&ee[1]<Ce[3])){q.label=ee[1];break}if(6===ee[0]&&q.label<Ce[1]){q.label=Ce[1],Ce=ee;break}if(Ce&&q.label<Ce[2]){q.label=Ce[2],q.ops.push(ee);break}Ce[2]&&q.ops.pop(),q.trys.pop();continue}ee=ie.call(X,q)}catch(de){ee=[6,de],ne=0}finally{se=Ce=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}([ee,de])}}},I=this&&this.__asyncValues||function(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var q,ie=X[Symbol.asyncIterator];return ie?ie.call(X):(X="function"==typeof u?u(X):X[Symbol.iterator](),q={},se("next"),se("throw"),se("return"),q[Symbol.asyncIterator]=function(){return this},q);function se(Ce){q[Ce]=X[Ce]&&function(xe){return new Promise(function(ue,fe){!function ne(Ce,xe,ue,fe){Promise.resolve(fe).then(function(ee){Ce({value:ee,done:ue})},xe)}(ue,fe,(xe=X[Ce](xe)).done,xe.value)})}}},u=this&&this.__values||function(X){var ie="function"==typeof Symbol&&Symbol.iterator,q=ie&&X[ie],se=0;if(q)return q.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&se>=X.length&&(X=void 0),{value:X&&X[se++],done:!X}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0}),y.fromReadableStreamLike=y.fromAsyncIterable=y.fromIterable=y.fromPromise=y.fromArrayLike=y.fromInteropObservable=y.innerFrom=void 0;var h=w(97523),g=w(21224),v=w(67759),m=w(43424),f=w(2534),_=w(85887),S=w(42884),M=w(1503),D=w(83178),R=w(48055),V=w(2304);function U(X){return new v.Observable(function(ie){var q=X[V.observable]();if(D.isFunction(q.subscribe))return q.subscribe(ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function F(X){return new v.Observable(function(ie){for(var q=0;q<X.length&&!ie.closed;q++)ie.next(X[q]);ie.complete()})}function j(X){return new v.Observable(function(ie){X.then(function(q){ie.closed||(ie.next(q),ie.complete())},function(q){return ie.error(q)}).then(null,R.reportUnhandledError)})}function P(X){return new v.Observable(function(ie){var q,se;try{for(var ne=u(X),Ce=ne.next();!Ce.done;Ce=ne.next())if(ie.next(Ce.value),ie.closed)return}catch(ue){q={error:ue}}finally{try{Ce&&!Ce.done&&(se=ne.return)&&se.call(ne)}finally{if(q)throw q.error}}ie.complete()})}function Q(X){return new v.Observable(function(ie){(function oe(X,ie){var q,se,ne,Ce;return k(this,void 0,void 0,function(){var ue;return G(this,function(fe){switch(fe.label){case 0:fe.trys.push([0,5,6,11]),q=I(X),fe.label=1;case 1:return[4,q.next()];case 2:if((se=fe.sent()).done)return[3,4];if(ie.next(se.value),ie.closed)return[2];fe.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return ue=fe.sent(),ne={error:ue},[3,11];case 6:return fe.trys.push([6,,9,10]),se&&!se.done&&(Ce=q.return)?[4,Ce.call(q)]:[3,8];case 7:fe.sent(),fe.label=8;case 8:return[3,10];case 9:if(ne)throw ne.error;return[7];case 10:return[7];case 11:return ie.complete(),[2]}})})})(X,ie).catch(function(q){return ie.error(q)})})}function $(X){return Q(M.readableStreamLikeToAsyncGenerator(X))}y.innerFrom=function B(X){if(X instanceof v.Observable)return X;if(null!=X){if(m.isInteropObservable(X))return U(X);if(h.isArrayLike(X))return F(X);if(g.isPromise(X))return j(X);if(f.isAsyncIterable(X))return Q(X);if(S.isIterable(X))return P(X);if(M.isReadableStreamLike(X))return $(X)}throw _.createInvalidObservableTypeError(X)},y.fromInteropObservable=U,y.fromArrayLike=F,y.fromPromise=j,y.fromIterable=P,y.fromAsyncIterable=Q,y.fromReadableStreamLike=$},76183:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.interval=void 0;var k=w(48410),G=w(17370);y.interval=function I(u,h){return void 0===u&&(u=0),void 0===h&&(h=k.asyncScheduler),u<0&&(u=0),G.timer(u,u,h)}},59393:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.merge=void 0;var k=w(45198),G=w(3454),I=w(13817),u=w(94546),h=w(73177);y.merge=function g(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];var f=u.popScheduler(v),_=u.popNumber(v,1/0),S=v;return S.length?1===S.length?G.innerFrom(S[0]):k.mergeAll(_)(h.from(S,f)):I.EMPTY}},72535:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.never=y.NEVER=void 0;var k=w(67759),G=w(57295);y.NEVER=new k.Observable(G.noop),y.never=function I(){return y.NEVER}},28994:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.of=void 0;var k=w(94546),G=w(73177);y.of=function I(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var g=k.popScheduler(u);return G.from(u,g)}},96285:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.onErrorResumeNext=void 0;var k=w(67759),G=w(23),I=w(24883),u=w(57295),h=w(3454);y.onErrorResumeNext=function g(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];var f=G.argsOrArgArray(v);return new k.Observable(function(_){var S=0,M=function(){if(S<f.length){var D=void 0;try{D=h.innerFrom(f[S++])}catch{return void M()}var R=new I.OperatorSubscriber(_,void 0,u.noop,u.noop);D.subscribe(R),R.add(M)}else _.complete()};M()})}},6718:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.pairs=void 0;var k=w(73177);y.pairs=function G(I,u){return k.from(Object.entries(I),u)}},42048:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.partition=void 0;var k=w(88946),G=w(54375),I=w(3454);y.partition=function u(h,g,v){return[G.filter(g,v)(I.innerFrom(h)),G.filter(k.not(g,v))(I.innerFrom(h))]}},60479:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.raceInit=y.race=void 0;var k=w(67759),G=w(3454),I=w(23),u=w(24883);function g(v){return function(m){for(var f=[],_=function(M){f.push(G.innerFrom(v[M]).subscribe(u.createOperatorSubscriber(m,function(D){if(f){for(var R=0;R<f.length;R++)R!==M&&f[R].unsubscribe();f=null}m.next(D)})))},S=0;f&&!m.closed&&S<v.length;S++)_(S)}}y.race=function h(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];return 1===(v=I.argsOrArgArray(v)).length?G.innerFrom(v[0]):new k.Observable(g(v))},y.raceInit=g},48013:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.range=void 0;var k=w(67759),G=w(13817);y.range=function I(u,h,g){if(null==h&&(h=u,u=0),h<=0)return G.EMPTY;var v=h+u;return new k.Observable(g?function(m){var f=u;return g.schedule(function(){f<v?(m.next(f++),this.schedule()):m.complete()})}:function(m){for(var f=u;f<v&&!m.closed;)m.next(f++);m.complete()})}},61009:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.throwError=void 0;var k=w(67759),G=w(83178);y.throwError=function I(u,h){var g=G.isFunction(u)?u:function(){return u},v=function(m){return m.error(g())};return new k.Observable(h?function(m){return h.schedule(v,0,m)}:v)}},17370:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.timer=void 0;var k=w(67759),G=w(48410),I=w(98133),u=w(46367);y.timer=function h(g,v,m){void 0===g&&(g=0),void 0===m&&(m=G.async);var f=-1;return null!=v&&(I.isScheduler(v)?m=v:f=v),new k.Observable(function(_){var S=u.isValidDate(g)?+g-m.now():g;S<0&&(S=0);var M=0;return m.schedule(function(){_.closed||(_.next(M++),0<=f?this.schedule(void 0,f):_.complete())},S)})}},10701:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.using=void 0;var k=w(67759),G=w(3454),I=w(13817);y.using=function u(h,g){return new k.Observable(function(v){var m=h(),f=g(m);return(f?G.innerFrom(f):I.EMPTY).subscribe(v),function(){m&&m.unsubscribe()}})}},80512:function(Ae,y,w){"use strict";var k=this&&this.__read||function(_,S){var M="function"==typeof Symbol&&_[Symbol.iterator];if(!M)return _;var R,B,D=M.call(_),V=[];try{for(;(void 0===S||S-- >0)&&!(R=D.next()).done;)V.push(R.value)}catch(U){B={error:U}}finally{try{R&&!R.done&&(M=D.return)&&M.call(D)}finally{if(B)throw B.error}}return V},G=this&&this.__spreadArray||function(_,S){for(var M=0,D=S.length,R=_.length;M<D;M++,R++)_[R]=S[M];return _};Object.defineProperty(y,"__esModule",{value:!0}),y.zip=void 0;var I=w(67759),u=w(3454),h=w(23),g=w(13817),v=w(24883),m=w(94546);y.zip=function f(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];var M=m.popResultSelector(_),D=h.argsOrArgArray(_);return D.length?new I.Observable(function(R){var V=D.map(function(){return[]}),B=D.map(function(){return!1});R.add(function(){V=B=null});for(var U=function(j){u.innerFrom(D[j]).subscribe(v.createOperatorSubscriber(R,function(P){if(V[j].push(P),V.every(function($){return $.length})){var Q=V.map(function($){return $.shift()});R.next(M?M.apply(void 0,G([],k(Q))):Q),V.some(function($,oe){return!$.length&&B[oe]})&&R.complete()}},function(){B[j]=!0,!V[j].length&&R.complete()}))},F=0;!R.closed&&F<D.length;F++)U(F);return function(){V=B=null}}):g.EMPTY}},24883:function(Ae,y,w){"use strict";var h,k=this&&this.__extends||(h=function(g,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(m[_]=f[_])})(g,v)},function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function m(){this.constructor=g}h(g,v),g.prototype=null===v?Object.create(v):(m.prototype=v.prototype,new m)});Object.defineProperty(y,"__esModule",{value:!0}),y.OperatorSubscriber=y.createOperatorSubscriber=void 0;var G=w(9082);y.createOperatorSubscriber=function I(h,g,v,m,f){return new u(h,g,v,m,f)};var u=function(h){function g(v,m,f,_,S,M){var D=h.call(this,v)||this;return D.onFinalize=S,D.shouldUnsubscribe=M,D._next=m?function(R){try{m(R)}catch(V){v.error(V)}}:h.prototype._next,D._error=_?function(R){try{_(R)}catch(V){v.error(V)}finally{this.unsubscribe()}}:h.prototype._error,D._complete=f?function(){try{f()}catch(R){v.error(R)}finally{this.unsubscribe()}}:h.prototype._complete,D}return k(g,h),g.prototype.unsubscribe=function(){var v;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var m=this.closed;h.prototype.unsubscribe.call(this),!m&&(null===(v=this.onFinalize)||void 0===v||v.call(this))}},g}(G.Subscriber);y.OperatorSubscriber=u},17324:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.audit=void 0;var k=w(3525),G=w(3454),I=w(24883);y.audit=function u(h){return k.operate(function(g,v){var m=!1,f=null,_=null,S=!1,M=function(){if(_?.unsubscribe(),_=null,m){m=!1;var R=f;f=null,v.next(R)}S&&v.complete()},D=function(){_=null,S&&v.complete()};g.subscribe(I.createOperatorSubscriber(v,function(R){m=!0,f=R,_||G.innerFrom(h(R)).subscribe(_=I.createOperatorSubscriber(v,M,D))},function(){S=!0,(!m||!_||_.closed)&&v.complete()}))})}},13738:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.auditTime=void 0;var k=w(48410),G=w(17324),I=w(17370);y.auditTime=function u(h,g){return void 0===g&&(g=k.asyncScheduler),G.audit(function(){return I.timer(h,g)})}},94776:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.buffer=void 0;var k=w(3525),G=w(57295),I=w(24883),u=w(3454);y.buffer=function h(g){return k.operate(function(v,m){var f=[];return v.subscribe(I.createOperatorSubscriber(m,function(_){return f.push(_)},function(){m.next(f),m.complete()})),u.innerFrom(g).subscribe(I.createOperatorSubscriber(m,function(){var _=f;f=[],m.next(_)},G.noop)),function(){f=null}})}},74469:function(Ae,y,w){"use strict";var k=this&&this.__values||function(g){var v="function"==typeof Symbol&&Symbol.iterator,m=v&&g[v],f=0;if(m)return m.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&f>=g.length&&(g=void 0),{value:g&&g[f++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0}),y.bufferCount=void 0;var G=w(3525),I=w(24883),u=w(80398);y.bufferCount=function h(g,v){return void 0===v&&(v=null),v=v??g,G.operate(function(m,f){var _=[],S=0;m.subscribe(I.createOperatorSubscriber(f,function(M){var D,R,V,B,U=null;S++%v==0&&_.push([]);try{for(var F=k(_),j=F.next();!j.done;j=F.next())(P=j.value).push(M),g<=P.length&&(U=U??[]).push(P)}catch(oe){D={error:oe}}finally{try{j&&!j.done&&(R=F.return)&&R.call(F)}finally{if(D)throw D.error}}if(U)try{for(var Q=k(U),$=Q.next();!$.done;$=Q.next()){var P;u.arrRemove(_,P=$.value),f.next(P)}}catch(oe){V={error:oe}}finally{try{$&&!$.done&&(B=Q.return)&&B.call(Q)}finally{if(V)throw V.error}}},function(){var M,D;try{for(var R=k(_),V=R.next();!V.done;V=R.next())f.next(V.value)}catch(U){M={error:U}}finally{try{V&&!V.done&&(D=R.return)&&D.call(R)}finally{if(M)throw M.error}}f.complete()},void 0,function(){_=null}))})}},79556:function(Ae,y,w){"use strict";var k=this&&this.__values||function(_){var S="function"==typeof Symbol&&Symbol.iterator,M=S&&_[S],D=0;if(M)return M.call(_);if(_&&"number"==typeof _.length)return{next:function(){return _&&D>=_.length&&(_=void 0),{value:_&&_[D++],done:!_}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0}),y.bufferTime=void 0;var G=w(74205),I=w(3525),u=w(24883),h=w(80398),g=w(48410),v=w(94546),m=w(41442);y.bufferTime=function f(_){for(var S,M,D=[],R=1;R<arguments.length;R++)D[R-1]=arguments[R];var V=null!==(S=v.popScheduler(D))&&void 0!==S?S:g.asyncScheduler,B=null!==(M=D[0])&&void 0!==M?M:null,U=D[1]||1/0;return I.operate(function(F,j){var P=[],Q=!1,$=function(ie){var q=ie.buffer;ie.subs.unsubscribe(),h.arrRemove(P,ie),j.next(q),Q&&oe()},oe=function(){if(P){var ie=new G.Subscription;j.add(ie);var se={buffer:[],subs:ie};P.push(se),m.executeSchedule(ie,V,function(){return $(se)},_)}};null!==B&&B>=0?m.executeSchedule(j,V,oe,B,!0):Q=!0,oe();var X=u.createOperatorSubscriber(j,function(ie){var q,se,ne=P.slice();try{for(var Ce=k(ne),xe=Ce.next();!xe.done;xe=Ce.next()){var ue=xe.value,fe=ue.buffer;fe.push(ie),U<=fe.length&&$(ue)}}catch(ee){q={error:ee}}finally{try{xe&&!xe.done&&(se=Ce.return)&&se.call(Ce)}finally{if(q)throw q.error}}},function(){for(;P?.length;)j.next(P.shift().buffer);X?.unsubscribe(),j.complete(),j.unsubscribe()},void 0,function(){return P=null});F.subscribe(X)})}},50918:function(Ae,y,w){"use strict";var k=this&&this.__values||function(f){var _="function"==typeof Symbol&&Symbol.iterator,S=_&&f[_],M=0;if(S)return S.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&M>=f.length&&(f=void 0),{value:f&&f[M++],done:!f}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0}),y.bufferToggle=void 0;var G=w(74205),I=w(3525),u=w(3454),h=w(24883),g=w(57295),v=w(80398);y.bufferToggle=function m(f,_){return I.operate(function(S,M){var D=[];u.innerFrom(f).subscribe(h.createOperatorSubscriber(M,function(R){var V=[];D.push(V);var B=new G.Subscription;B.add(u.innerFrom(_(R)).subscribe(h.createOperatorSubscriber(M,function(){v.arrRemove(D,V),M.next(V),B.unsubscribe()},g.noop)))},g.noop)),S.subscribe(h.createOperatorSubscriber(M,function(R){var V,B;try{for(var U=k(D),F=U.next();!F.done;F=U.next())F.value.push(R)}catch(P){V={error:P}}finally{try{F&&!F.done&&(B=U.return)&&B.call(U)}finally{if(V)throw V.error}}},function(){for(;D.length>0;)M.next(D.shift());M.complete()}))})}},66380:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.bufferWhen=void 0;var k=w(3525),G=w(57295),I=w(24883),u=w(3454);y.bufferWhen=function h(g){return k.operate(function(v,m){var f=null,_=null,S=function(){_?.unsubscribe();var M=f;f=[],M&&m.next(M),u.innerFrom(g()).subscribe(_=I.createOperatorSubscriber(m,S,G.noop))};S(),v.subscribe(I.createOperatorSubscriber(m,function(M){return f?.push(M)},function(){f&&m.next(f),m.complete()},void 0,function(){return f=_=null}))})}},38091:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.catchError=void 0;var k=w(3454),G=w(24883),I=w(3525);y.catchError=function u(h){return I.operate(function(g,v){var _,m=null,f=!1;m=g.subscribe(G.createOperatorSubscriber(v,void 0,void 0,function(S){_=k.innerFrom(h(S,u(h)(g))),m?(m.unsubscribe(),m=null,_.subscribe(v)):f=!0})),f&&(m.unsubscribe(),m=null,_.subscribe(v))})}},17952:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.combineAll=void 0;var k=w(77819);y.combineAll=k.combineLatestAll},91354:function(Ae,y,w){"use strict";var k=this&&this.__read||function(_,S){var M="function"==typeof Symbol&&_[Symbol.iterator];if(!M)return _;var R,B,D=M.call(_),V=[];try{for(;(void 0===S||S-- >0)&&!(R=D.next()).done;)V.push(R.value)}catch(U){B={error:U}}finally{try{R&&!R.done&&(M=D.return)&&M.call(D)}finally{if(B)throw B.error}}return V},G=this&&this.__spreadArray||function(_,S){for(var M=0,D=S.length,R=_.length;M<D;M++,R++)_[R]=S[M];return _};Object.defineProperty(y,"__esModule",{value:!0}),y.combineLatest=void 0;var I=w(93436),u=w(3525),h=w(23),g=w(9795),v=w(21838),m=w(94546);y.combineLatest=function f(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];var M=m.popResultSelector(_);return M?v.pipe(f.apply(void 0,G([],k(_))),g.mapOneOrManyArgs(M)):u.operate(function(D,R){I.combineLatestInit(G([D],k(h.argsOrArgArray(_))))(R)})}},77819:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.combineLatestAll=void 0;var k=w(93436),G=w(53267);y.combineLatestAll=function I(u){return G.joinAllInternals(k.combineLatest,u)}},15039:function(Ae,y,w){"use strict";var k=this&&this.__read||function(h,g){var v="function"==typeof Symbol&&h[Symbol.iterator];if(!v)return h;var f,S,m=v.call(h),_=[];try{for(;(void 0===g||g-- >0)&&!(f=m.next()).done;)_.push(f.value)}catch(M){S={error:M}}finally{try{f&&!f.done&&(v=m.return)&&v.call(m)}finally{if(S)throw S.error}}return _},G=this&&this.__spreadArray||function(h,g){for(var v=0,m=g.length,f=h.length;v<m;v++,f++)h[f]=g[v];return h};Object.defineProperty(y,"__esModule",{value:!0}),y.combineLatestWith=void 0;var I=w(91354);y.combineLatestWith=function u(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return I.combineLatest.apply(void 0,G([],k(h)))}},67150:function(Ae,y,w){"use strict";var k=this&&this.__read||function(m,f){var _="function"==typeof Symbol&&m[Symbol.iterator];if(!_)return m;var M,R,S=_.call(m),D=[];try{for(;(void 0===f||f-- >0)&&!(M=S.next()).done;)D.push(M.value)}catch(V){R={error:V}}finally{try{M&&!M.done&&(_=S.return)&&_.call(S)}finally{if(R)throw R.error}}return D},G=this&&this.__spreadArray||function(m,f){for(var _=0,S=f.length,M=m.length;_<S;_++,M++)m[M]=f[_];return m};Object.defineProperty(y,"__esModule",{value:!0}),y.concat=void 0;var I=w(3525),u=w(25197),h=w(94546),g=w(73177);y.concat=function v(){for(var m=[],f=0;f<arguments.length;f++)m[f]=arguments[f];var _=h.popScheduler(m);return I.operate(function(S,M){u.concatAll()(g.from(G([S],k(m)),_)).subscribe(M)})}},25197:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.concatAll=void 0;var k=w(45198);y.concatAll=function G(){return k.mergeAll(1)}},20178:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.concatMap=void 0;var k=w(11675),G=w(83178);y.concatMap=function I(u,h){return G.isFunction(h)?k.mergeMap(u,h,1):k.mergeMap(u,1)}},29413:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.concatMapTo=void 0;var k=w(20178),G=w(83178);y.concatMapTo=function I(u,h){return G.isFunction(h)?k.concatMap(function(){return u},h):k.concatMap(function(){return u})}},88517:function(Ae,y,w){"use strict";var k=this&&this.__read||function(h,g){var v="function"==typeof Symbol&&h[Symbol.iterator];if(!v)return h;var f,S,m=v.call(h),_=[];try{for(;(void 0===g||g-- >0)&&!(f=m.next()).done;)_.push(f.value)}catch(M){S={error:M}}finally{try{f&&!f.done&&(v=m.return)&&v.call(m)}finally{if(S)throw S.error}}return _},G=this&&this.__spreadArray||function(h,g){for(var v=0,m=g.length,f=h.length;v<m;v++,f++)h[f]=g[v];return h};Object.defineProperty(y,"__esModule",{value:!0}),y.concatWith=void 0;var I=w(67150);y.concatWith=function u(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return I.concat.apply(void 0,G([],k(h)))}},10244:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.connect=void 0;var k=w(36961),G=w(3454),I=w(3525),u=w(61696),h={connector:function(){return new k.Subject}};y.connect=function g(v,m){void 0===m&&(m=h);var f=m.connector;return I.operate(function(_,S){var M=f();G.innerFrom(v(u.fromSubscribable(M))).subscribe(S),S.add(_.subscribe(M))})}},88429:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.count=void 0;var k=w(39786);y.count=function G(I){return k.reduce(function(u,h,g){return!I||I(h,g)?u+1:u},0)}},62556:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.debounce=void 0;var k=w(3525),G=w(57295),I=w(24883),u=w(3454);y.debounce=function h(g){return k.operate(function(v,m){var f=!1,_=null,S=null,M=function(){if(S?.unsubscribe(),S=null,f){f=!1;var D=_;_=null,m.next(D)}};v.subscribe(I.createOperatorSubscriber(m,function(D){S?.unsubscribe(),f=!0,_=D,S=I.createOperatorSubscriber(m,M,G.noop),u.innerFrom(g(D)).subscribe(S)},function(){M(),m.complete()},void 0,function(){_=S=null}))})}},24189:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.debounceTime=void 0;var k=w(48410),G=w(3525),I=w(24883);y.debounceTime=function u(h,g){return void 0===g&&(g=k.asyncScheduler),G.operate(function(v,m){var f=null,_=null,S=null,M=function(){if(f){f.unsubscribe(),f=null;var R=_;_=null,m.next(R)}};function D(){var R=S+h,V=g.now();if(V<R)return f=this.schedule(void 0,R-V),void m.add(f);M()}v.subscribe(I.createOperatorSubscriber(m,function(R){_=R,S=g.now(),f||(f=g.schedule(D,h),m.add(f))},function(){M(),m.complete()},void 0,function(){_=f=null}))})}},25203:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.defaultIfEmpty=void 0;var k=w(3525),G=w(24883);y.defaultIfEmpty=function I(u){return k.operate(function(h,g){var v=!1;h.subscribe(G.createOperatorSubscriber(g,function(m){v=!0,g.next(m)},function(){v||g.next(u),g.complete()}))})}},41222:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.delay=void 0;var k=w(48410),G=w(65369),I=w(17370);y.delay=function u(h,g){void 0===g&&(g=k.asyncScheduler);var v=I.timer(h,g);return G.delayWhen(function(){return v})}},65369:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.delayWhen=void 0;var k=w(27989),G=w(44254),I=w(62077),u=w(24666),h=w(11675),g=w(3454);y.delayWhen=function v(m,f){return f?function(_){return k.concat(f.pipe(G.take(1),I.ignoreElements()),_.pipe(v(m)))}:h.mergeMap(function(_,S){return g.innerFrom(m(_,S)).pipe(G.take(1),u.mapTo(_))})}},67221:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.dematerialize=void 0;var k=w(42747),G=w(3525),I=w(24883);y.dematerialize=function u(){return G.operate(function(h,g){h.subscribe(I.createOperatorSubscriber(g,function(v){return k.observeNotification(v,g)}))})}},15722:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.distinct=void 0;var k=w(3525),G=w(24883),I=w(57295),u=w(3454);y.distinct=function h(g,v){return k.operate(function(m,f){var _=new Set;m.subscribe(G.createOperatorSubscriber(f,function(S){var M=g?g(S):S;_.has(M)||(_.add(M),f.next(S))})),v&&u.innerFrom(v).subscribe(G.createOperatorSubscriber(f,function(){return _.clear()},I.noop))})}},64509:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.distinctUntilChanged=void 0;var k=w(67041),G=w(3525),I=w(24883);function h(g,v){return g===v}y.distinctUntilChanged=function u(g,v){return void 0===v&&(v=k.identity),g=g??h,G.operate(function(m,f){var _,S=!0;m.subscribe(I.createOperatorSubscriber(f,function(M){var D=v(M);(S||!g(_,D))&&(S=!1,_=D,f.next(M))}))})}},89993:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.distinctUntilKeyChanged=void 0;var k=w(64509);y.distinctUntilKeyChanged=function G(I,u){return k.distinctUntilChanged(function(h,g){return u?u(h[I],g[I]):h[I]===g[I]})}},32668:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.elementAt=void 0;var k=w(1547),G=w(54375),I=w(64582),u=w(25203),h=w(44254);y.elementAt=function g(v,m){if(v<0)throw new k.ArgumentOutOfRangeError;var f=arguments.length>=2;return function(_){return _.pipe(G.filter(function(S,M){return M===v}),h.take(1),f?u.defaultIfEmpty(m):I.throwIfEmpty(function(){return new k.ArgumentOutOfRangeError}))}}},761:function(Ae,y,w){"use strict";var k=this&&this.__read||function(g,v){var m="function"==typeof Symbol&&g[Symbol.iterator];if(!m)return g;var _,M,f=m.call(g),S=[];try{for(;(void 0===v||v-- >0)&&!(_=f.next()).done;)S.push(_.value)}catch(D){M={error:D}}finally{try{_&&!_.done&&(m=f.return)&&m.call(f)}finally{if(M)throw M.error}}return S},G=this&&this.__spreadArray||function(g,v){for(var m=0,f=v.length,_=g.length;m<f;m++,_++)g[_]=v[m];return g};Object.defineProperty(y,"__esModule",{value:!0}),y.endWith=void 0;var I=w(27989),u=w(28994);y.endWith=function h(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];return function(m){return I.concat(m,u.of.apply(void 0,G([],k(g))))}}},1187:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.every=void 0;var k=w(3525),G=w(24883);y.every=function I(u,h){return k.operate(function(g,v){var m=0;g.subscribe(G.createOperatorSubscriber(v,function(f){u.call(h,f,m++,g)||(v.next(!1),v.complete())},function(){v.next(!0),v.complete()}))})}},85262:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.exhaust=void 0;var k=w(19995);y.exhaust=k.exhaustAll},19995:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.exhaustAll=void 0;var k=w(7653),G=w(67041);y.exhaustAll=function I(){return k.exhaustMap(G.identity)}},7653:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.exhaustMap=void 0;var k=w(60687),G=w(3454),I=w(3525),u=w(24883);y.exhaustMap=function h(g,v){return v?function(m){return m.pipe(h(function(f,_){return G.innerFrom(g(f,_)).pipe(k.map(function(S,M){return v(f,S,_,M)}))}))}:I.operate(function(m,f){var _=0,S=null,M=!1;m.subscribe(u.createOperatorSubscriber(f,function(D){S||(S=u.createOperatorSubscriber(f,void 0,function(){S=null,M&&f.complete()}),G.innerFrom(g(D,_++)).subscribe(S))},function(){M=!0,!S&&f.complete()}))})}},16561:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.expand=void 0;var k=w(3525),G=w(36053);y.expand=function I(u,h,g){return void 0===h&&(h=1/0),h=(h||0)<1?1/0:h,k.operate(function(v,m){return G.mergeInternals(v,m,u,h,void 0,!0,g)})}},54375:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.filter=void 0;var k=w(3525),G=w(24883);y.filter=function I(u,h){return k.operate(function(g,v){var m=0;g.subscribe(G.createOperatorSubscriber(v,function(f){return u.call(h,f,m++)&&v.next(f)}))})}},107:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.finalize=void 0;var k=w(3525);y.finalize=function G(I){return k.operate(function(u,h){try{u.subscribe(h)}finally{h.add(I)}})}},65192:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.createFind=y.find=void 0;var k=w(3525),G=w(24883);function u(h,g,v){var m="index"===v;return function(f,_){var S=0;f.subscribe(G.createOperatorSubscriber(_,function(M){var D=S++;h.call(g,M,D,f)&&(_.next(m?D:M),_.complete())},function(){_.next(m?-1:void 0),_.complete()}))}}y.find=function I(h,g){return k.operate(u(h,g,"value"))},y.createFind=u},92101:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.findIndex=void 0;var k=w(3525),G=w(65192);y.findIndex=function I(u,h){return k.operate(G.createFind(u,h,"index"))}},18284:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.first=void 0;var k=w(58186),G=w(54375),I=w(44254),u=w(25203),h=w(64582),g=w(67041);y.first=function v(m,f){var _=arguments.length>=2;return function(S){return S.pipe(m?G.filter(function(M,D){return m(M,D,S)}):g.identity,I.take(1),_?u.defaultIfEmpty(f):h.throwIfEmpty(function(){return new k.EmptyError}))}}},3836:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.flatMap=void 0;var k=w(11675);y.flatMap=k.mergeMap},79864:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.groupBy=void 0;var k=w(67759),G=w(3454),I=w(36961),u=w(3525),h=w(24883);y.groupBy=function g(v,m,f,_){return u.operate(function(S,M){var D;m&&"function"!=typeof m?(f=m.duration,D=m.element,_=m.connector):D=m;var R=new Map,V=function(Q){R.forEach(Q),Q(M)},B=function(Q){return V(function($){return $.error(Q)})},U=0,F=!1,j=new h.OperatorSubscriber(M,function(Q){try{var $=v(Q),oe=R.get($);if(!oe){R.set($,oe=_?_():new I.Subject);var X=function P(Q,$){var oe=new k.Observable(function(X){U++;var ie=$.subscribe(X);return function(){ie.unsubscribe(),0==--U&&F&&j.unsubscribe()}});return oe.key=Q,oe}($,oe);if(M.next(X),f){var ie=h.createOperatorSubscriber(oe,function(){oe.complete(),ie?.unsubscribe()},void 0,void 0,function(){return R.delete($)});j.add(G.innerFrom(f(X)).subscribe(ie))}}oe.next(D?D(Q):Q)}catch(q){B(q)}},function(){return V(function(Q){return Q.complete()})},B,function(){return R.clear()},function(){return F=!0,0===U});S.subscribe(j)})}},62077:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ignoreElements=void 0;var k=w(3525),G=w(24883),I=w(57295);y.ignoreElements=function u(){return k.operate(function(h,g){h.subscribe(G.createOperatorSubscriber(g,I.noop))})}},6406:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isEmpty=void 0;var k=w(3525),G=w(24883);y.isEmpty=function I(){return k.operate(function(u,h){u.subscribe(G.createOperatorSubscriber(h,function(){h.next(!1),h.complete()},function(){h.next(!0),h.complete()}))})}},53267:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.joinAllInternals=void 0;var k=w(67041),G=w(9795),I=w(21838),u=w(11675),h=w(55399);y.joinAllInternals=function g(v,m){return I.pipe(h.toArray(),u.mergeMap(function(f){return v(f)}),m?G.mapOneOrManyArgs(m):k.identity)}},21593:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.last=void 0;var k=w(58186),G=w(54375),I=w(82755),u=w(64582),h=w(25203),g=w(67041);y.last=function v(m,f){var _=arguments.length>=2;return function(S){return S.pipe(m?G.filter(function(M,D){return m(M,D,S)}):g.identity,I.takeLast(1),_?h.defaultIfEmpty(f):u.throwIfEmpty(function(){return new k.EmptyError}))}}},60687:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.map=void 0;var k=w(3525),G=w(24883);y.map=function I(u,h){return k.operate(function(g,v){var m=0;g.subscribe(G.createOperatorSubscriber(v,function(f){v.next(u.call(h,f,m++))}))})}},24666:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.mapTo=void 0;var k=w(60687);y.mapTo=function G(I){return k.map(function(){return I})}},80857:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.materialize=void 0;var k=w(42747),G=w(3525),I=w(24883);y.materialize=function u(){return G.operate(function(h,g){h.subscribe(I.createOperatorSubscriber(g,function(v){g.next(k.Notification.createNext(v))},function(){g.next(k.Notification.createComplete()),g.complete()},function(v){g.next(k.Notification.createError(v)),g.complete()}))})}},7329:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.max=void 0;var k=w(39786),G=w(83178);y.max=function I(u){return k.reduce(G.isFunction(u)?function(h,g){return u(h,g)>0?h:g}:function(h,g){return h>g?h:g})}},37253:function(Ae,y,w){"use strict";var k=this&&this.__read||function(f,_){var S="function"==typeof Symbol&&f[Symbol.iterator];if(!S)return f;var D,V,M=S.call(f),R=[];try{for(;(void 0===_||_-- >0)&&!(D=M.next()).done;)R.push(D.value)}catch(B){V={error:B}}finally{try{D&&!D.done&&(S=M.return)&&S.call(M)}finally{if(V)throw V.error}}return R},G=this&&this.__spreadArray||function(f,_){for(var S=0,M=_.length,D=f.length;S<M;S++,D++)f[D]=_[S];return f};Object.defineProperty(y,"__esModule",{value:!0}),y.merge=void 0;var I=w(3525),u=w(23),h=w(45198),g=w(94546),v=w(73177);y.merge=function m(){for(var f=[],_=0;_<arguments.length;_++)f[_]=arguments[_];var S=g.popScheduler(f),M=g.popNumber(f,1/0);return f=u.argsOrArgArray(f),I.operate(function(D,R){h.mergeAll(M)(v.from(G([D],k(f)),S)).subscribe(R)})}},45198:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.mergeAll=void 0;var k=w(11675),G=w(67041);y.mergeAll=function I(u){return void 0===u&&(u=1/0),k.mergeMap(G.identity,u)}},36053:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.mergeInternals=void 0;var k=w(3454),G=w(41442),I=w(24883);y.mergeInternals=function u(h,g,v,m,f,_,S,M){var D=[],R=0,V=0,B=!1,U=function(){B&&!D.length&&!R&&g.complete()},F=function(P){return R<m?j(P):D.push(P)},j=function(P){_&&g.next(P),R++;var Q=!1;k.innerFrom(v(P,V++)).subscribe(I.createOperatorSubscriber(g,function($){f?.($),_?F($):g.next($)},function(){Q=!0},void 0,function(){if(Q)try{R--;for(var $=function(){var oe=D.shift();S?G.executeSchedule(g,S,function(){return j(oe)}):j(oe)};D.length&&R<m;)$();U()}catch(oe){g.error(oe)}}))};return h.subscribe(I.createOperatorSubscriber(g,F,function(){B=!0,U()})),function(){M?.()}}},11675:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.mergeMap=void 0;var k=w(60687),G=w(3454),I=w(3525),u=w(36053),h=w(83178);y.mergeMap=function g(v,m,f){return void 0===f&&(f=1/0),h.isFunction(m)?g(function(_,S){return k.map(function(M,D){return m(_,M,S,D)})(G.innerFrom(v(_,S)))},f):("number"==typeof m&&(f=m),I.operate(function(_,S){return u.mergeInternals(_,S,v,f)}))}},99030:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.mergeMapTo=void 0;var k=w(11675),G=w(83178);y.mergeMapTo=function I(u,h,g){return void 0===g&&(g=1/0),G.isFunction(h)?k.mergeMap(function(){return u},h,g):("number"==typeof h&&(g=h),k.mergeMap(function(){return u},g))}},5175:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.mergeScan=void 0;var k=w(3525),G=w(36053);y.mergeScan=function I(u,h,g){return void 0===g&&(g=1/0),k.operate(function(v,m){var f=h;return G.mergeInternals(v,m,function(_,S){return u(f,_,S)},g,function(_){f=_},!1,void 0,function(){return f=null})})}},56694:function(Ae,y,w){"use strict";var k=this&&this.__read||function(h,g){var v="function"==typeof Symbol&&h[Symbol.iterator];if(!v)return h;var f,S,m=v.call(h),_=[];try{for(;(void 0===g||g-- >0)&&!(f=m.next()).done;)_.push(f.value)}catch(M){S={error:M}}finally{try{f&&!f.done&&(v=m.return)&&v.call(m)}finally{if(S)throw S.error}}return _},G=this&&this.__spreadArray||function(h,g){for(var v=0,m=g.length,f=h.length;v<m;v++,f++)h[f]=g[v];return h};Object.defineProperty(y,"__esModule",{value:!0}),y.mergeWith=void 0;var I=w(37253);y.mergeWith=function u(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return I.merge.apply(void 0,G([],k(h)))}},77774:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.min=void 0;var k=w(39786),G=w(83178);y.min=function I(u){return k.reduce(G.isFunction(u)?function(h,g){return u(h,g)<0?h:g}:function(h,g){return h<g?h:g})}},44455:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.multicast=void 0;var k=w(54459),G=w(83178),I=w(10244);y.multicast=function u(h,g){var v=G.isFunction(h)?h:function(){return h};return G.isFunction(g)?I.connect(g,{connector:v}):function(m){return new k.ConnectableObservable(m,v)}}},20099:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.observeOn=void 0;var k=w(41442),G=w(3525),I=w(24883);y.observeOn=function u(h,g){return void 0===g&&(g=0),G.operate(function(v,m){v.subscribe(I.createOperatorSubscriber(m,function(f){return k.executeSchedule(m,h,function(){return m.next(f)},g)},function(){return k.executeSchedule(m,h,function(){return m.complete()},g)},function(f){return k.executeSchedule(m,h,function(){return m.error(f)},g)}))})}},18063:function(Ae,y,w){"use strict";var k=this&&this.__read||function(g,v){var m="function"==typeof Symbol&&g[Symbol.iterator];if(!m)return g;var _,M,f=m.call(g),S=[];try{for(;(void 0===v||v-- >0)&&!(_=f.next()).done;)S.push(_.value)}catch(D){M={error:D}}finally{try{_&&!_.done&&(m=f.return)&&m.call(f)}finally{if(M)throw M.error}}return S},G=this&&this.__spreadArray||function(g,v){for(var m=0,f=v.length,_=g.length;m<f;m++,_++)g[_]=v[m];return g};Object.defineProperty(y,"__esModule",{value:!0}),y.onErrorResumeNext=y.onErrorResumeNextWith=void 0;var I=w(23),u=w(96285);function h(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];var m=I.argsOrArgArray(g);return function(f){return u.onErrorResumeNext.apply(void 0,G([f],k(m)))}}y.onErrorResumeNextWith=h,y.onErrorResumeNext=h},59174:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.pairwise=void 0;var k=w(3525),G=w(24883);y.pairwise=function I(){return k.operate(function(u,h){var g,v=!1;u.subscribe(G.createOperatorSubscriber(h,function(m){var f=g;g=m,v&&h.next([f,m]),v=!0}))})}},38237:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.pluck=void 0;var k=w(60687);y.pluck=function G(){for(var I=[],u=0;u<arguments.length;u++)I[u]=arguments[u];var h=I.length;if(0===h)throw new Error("list of properties cannot be empty.");return k.map(function(g){for(var v=g,m=0;m<h;m++){var f=v?.[I[m]];if(!(typeof f<"u"))return;v=f}return v})}},79863:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.publish=void 0;var k=w(36961),G=w(44455),I=w(10244);y.publish=function u(h){return h?function(g){return I.connect(h)(g)}:function(g){return G.multicast(new k.Subject)(g)}}},65899:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.publishBehavior=void 0;var k=w(54698),G=w(54459);y.publishBehavior=function I(u){return function(h){var g=new k.BehaviorSubject(u);return new G.ConnectableObservable(h,function(){return g})}}},82157:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.publishLast=void 0;var k=w(76334),G=w(54459);y.publishLast=function I(){return function(u){var h=new k.AsyncSubject;return new G.ConnectableObservable(u,function(){return h})}}},75783:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.publishReplay=void 0;var k=w(90486),G=w(44455),I=w(83178);y.publishReplay=function u(h,g,v,m){v&&!I.isFunction(v)&&(m=v);var f=I.isFunction(v)?v:void 0;return function(_){return G.multicast(new k.ReplaySubject(h,g,m),f)(_)}}},4961:function(Ae,y,w){"use strict";var k=this&&this.__read||function(v,m){var f="function"==typeof Symbol&&v[Symbol.iterator];if(!f)return v;var S,D,_=f.call(v),M=[];try{for(;(void 0===m||m-- >0)&&!(S=_.next()).done;)M.push(S.value)}catch(R){D={error:R}}finally{try{S&&!S.done&&(f=_.return)&&f.call(_)}finally{if(D)throw D.error}}return M},G=this&&this.__spreadArray||function(v,m){for(var f=0,_=m.length,S=v.length;f<_;f++,S++)v[S]=m[f];return v};Object.defineProperty(y,"__esModule",{value:!0}),y.raceWith=void 0;var I=w(60479),u=w(3525),h=w(67041);y.raceWith=function g(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];return v.length?u.operate(function(f,_){I.raceInit(G([f],k(v)))(_)}):h.identity}},39786:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.reduce=void 0;var k=w(95207),G=w(3525);y.reduce=function I(u,h){return G.operate(k.scanInternals(u,h,arguments.length>=2,!1,!0))}},82394:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.refCount=void 0;var k=w(3525),G=w(24883);y.refCount=function I(){return k.operate(function(u,h){var g=null;u._refCount++;var v=G.createOperatorSubscriber(h,void 0,void 0,void 0,function(){if(!u||u._refCount<=0||0<--u._refCount)g=null;else{var m=u._connection,f=g;g=null,m&&(!f||m===f)&&m.unsubscribe(),h.unsubscribe()}});u.subscribe(v),v.closed||(g=u.connect())})}},24719:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.repeat=void 0;var k=w(13817),G=w(3525),I=w(24883),u=w(3454),h=w(17370);y.repeat=function g(v){var m,_,f=1/0;return null!=v&&("object"==typeof v?(f=void 0===(m=v.count)?1/0:m,_=v.delay):f=v),f<=0?function(){return k.EMPTY}:G.operate(function(S,M){var R,D=0,V=function(){if(R?.unsubscribe(),R=null,null!=_){var U="number"==typeof _?h.timer(_):u.innerFrom(_(D)),F=I.createOperatorSubscriber(M,function(){F.unsubscribe(),B()});U.subscribe(F)}else B()},B=function(){var U=!1;R=S.subscribe(I.createOperatorSubscriber(M,void 0,function(){++D<f?R?V():U=!0:M.complete()})),U&&V()};B()})}},11077:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.repeatWhen=void 0;var k=w(3454),G=w(36961),I=w(3525),u=w(24883);y.repeatWhen=function h(g){return I.operate(function(v,m){var f,S,_=!1,M=!1,D=!1,R=function(){return D&&M&&(m.complete(),!0)},B=function(){D=!1,f=v.subscribe(u.createOperatorSubscriber(m,void 0,function(){D=!0,!R()&&(S||(S=new G.Subject,k.innerFrom(g(S)).subscribe(u.createOperatorSubscriber(m,function(){f?B():_=!0},function(){M=!0,R()}))),S).next()})),_&&(f.unsubscribe(),f=null,_=!1,B())};B()})}},55087:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.retry=void 0;var k=w(3525),G=w(24883),I=w(67041),u=w(17370),h=w(3454);y.retry=function g(v){var m;void 0===v&&(v=1/0);var f=(m=v&&"object"==typeof v?v:{count:v}).count,_=void 0===f?1/0:f,S=m.delay,M=m.resetOnSuccess,D=void 0!==M&&M;return _<=0?I.identity:k.operate(function(R,V){var U,B=0,F=function(){var j=!1;U=R.subscribe(G.createOperatorSubscriber(V,function(P){D&&(B=0),V.next(P)},void 0,function(P){if(B++<_){var Q=function(){U?(U.unsubscribe(),U=null,F()):j=!0};if(null!=S){var $="number"==typeof S?u.timer(S):h.innerFrom(S(P,B)),oe=G.createOperatorSubscriber(V,function(){oe.unsubscribe(),Q()},function(){V.complete()});$.subscribe(oe)}else Q()}else V.error(P)})),j&&(U.unsubscribe(),U=null,F())};F()})}},18013:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.retryWhen=void 0;var k=w(3454),G=w(36961),I=w(3525),u=w(24883);y.retryWhen=function h(g){return I.operate(function(v,m){var f,S,_=!1,M=function(){f=v.subscribe(u.createOperatorSubscriber(m,void 0,void 0,function(D){S||(S=new G.Subject,k.innerFrom(g(S)).subscribe(u.createOperatorSubscriber(m,function(){return f?M():_=!0}))),S&&S.next(D)})),_&&(f.unsubscribe(),f=null,_=!1,M())};M()})}},27295:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.sample=void 0;var k=w(3454),G=w(3525),I=w(57295),u=w(24883);y.sample=function h(g){return G.operate(function(v,m){var f=!1,_=null;v.subscribe(u.createOperatorSubscriber(m,function(S){f=!0,_=S})),k.innerFrom(g).subscribe(u.createOperatorSubscriber(m,function(){if(f){f=!1;var S=_;_=null,m.next(S)}},I.noop))})}},11796:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.sampleTime=void 0;var k=w(48410),G=w(27295),I=w(76183);y.sampleTime=function u(h,g){return void 0===g&&(g=k.asyncScheduler),G.sample(I.interval(h,g))}},54278:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.scan=void 0;var k=w(3525),G=w(95207);y.scan=function I(u,h){return k.operate(G.scanInternals(u,h,arguments.length>=2,!0))}},95207:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.scanInternals=void 0;var k=w(24883);y.scanInternals=function G(I,u,h,g,v){return function(m,f){var _=h,S=u,M=0;m.subscribe(k.createOperatorSubscriber(f,function(D){var R=M++;S=_?I(S,D,R):(_=!0,D),g&&f.next(S)},v&&function(){_&&f.next(S),f.complete()}))}}},84677:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.sequenceEqual=void 0;var k=w(3525),G=w(24883),I=w(3454);y.sequenceEqual=function u(g,v){return void 0===v&&(v=function(m,f){return m===f}),k.operate(function(m,f){var _={buffer:[],complete:!1},S={buffer:[],complete:!1},M=function(R){f.next(R),f.complete()},D=function(R,V){var B=G.createOperatorSubscriber(f,function(U){var F=V.buffer;0===F.length?V.complete?M(!1):R.buffer.push(U):!v(U,F.shift())&&M(!1)},function(){R.complete=!0,V.complete&&M(0===V.buffer.length),B?.unsubscribe()});return B};m.subscribe(D(_,S)),I.innerFrom(g).subscribe(D(S,_))})}},43871:function(Ae,y,w){"use strict";var k=this&&this.__read||function(f,_){var S="function"==typeof Symbol&&f[Symbol.iterator];if(!S)return f;var D,V,M=S.call(f),R=[];try{for(;(void 0===_||_-- >0)&&!(D=M.next()).done;)R.push(D.value)}catch(B){V={error:B}}finally{try{D&&!D.done&&(S=M.return)&&S.call(M)}finally{if(V)throw V.error}}return R},G=this&&this.__spreadArray||function(f,_){for(var S=0,M=_.length,D=f.length;S<M;S++,D++)f[D]=_[S];return f};Object.defineProperty(y,"__esModule",{value:!0}),y.share=void 0;var I=w(3454),u=w(36961),h=w(9082),g=w(3525);function m(f,_){for(var S=[],M=2;M<arguments.length;M++)S[M-2]=arguments[M];if(!0!==_){if(!1!==_){var D=new h.SafeSubscriber({next:function(){D.unsubscribe(),f()}});return I.innerFrom(_.apply(void 0,G([],k(S)))).subscribe(D)}}else f()}y.share=function v(f){void 0===f&&(f={});var _=f.connector,S=void 0===_?function(){return new u.Subject}:_,M=f.resetOnError,D=void 0===M||M,R=f.resetOnComplete,V=void 0===R||R,B=f.resetOnRefCountZero,U=void 0===B||B;return function(F){var j,P,Q,$=0,oe=!1,X=!1,ie=function(){P?.unsubscribe(),P=void 0},q=function(){ie(),j=Q=void 0,oe=X=!1},se=function(){var ne=j;q(),ne?.unsubscribe()};return g.operate(function(ne,Ce){$++,!X&&!oe&&ie();var xe=Q=Q??S();Ce.add(function(){0==--$&&!X&&!oe&&(P=m(se,U))}),xe.subscribe(Ce),!j&&$>0&&(j=new h.SafeSubscriber({next:function(ue){return xe.next(ue)},error:function(ue){X=!0,ie(),P=m(q,D,ue),xe.error(ue)},complete:function(){oe=!0,ie(),P=m(q,V),xe.complete()}}),I.innerFrom(ne).subscribe(j))})(F)}}},23909:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.shareReplay=void 0;var k=w(90486),G=w(43871);y.shareReplay=function I(u,h,g){var v,m,f,_,S=!1;return u&&"object"==typeof u?(_=void 0===(v=u.bufferSize)?1/0:v,h=void 0===(m=u.windowTime)?1/0:m,S=void 0!==(f=u.refCount)&&f,g=u.scheduler):_=u??1/0,G.share({connector:function(){return new k.ReplaySubject(_,h,g)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:S})}},58311:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.single=void 0;var k=w(58186),G=w(33803),I=w(53053),u=w(3525),h=w(24883);y.single=function g(v){return u.operate(function(m,f){var S,_=!1,M=!1,D=0;m.subscribe(h.createOperatorSubscriber(f,function(R){M=!0,(!v||v(R,D++,m))&&(_&&f.error(new G.SequenceError("Too many matching values")),_=!0,S=R)},function(){_?(f.next(S),f.complete()):f.error(M?new I.NotFoundError("No matching values"):new k.EmptyError)}))})}},52479:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.skip=void 0;var k=w(54375);y.skip=function G(I){return k.filter(function(u,h){return I<=h})}},47099:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.skipLast=void 0;var k=w(67041),G=w(3525),I=w(24883);y.skipLast=function u(h){return h<=0?k.identity:G.operate(function(g,v){var m=new Array(h),f=0;return g.subscribe(I.createOperatorSubscriber(v,function(_){var S=f++;if(S<h)m[S]=_;else{var M=S%h,D=m[M];m[M]=_,v.next(D)}})),function(){m=null}})}},20790:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.skipUntil=void 0;var k=w(3525),G=w(24883),I=w(3454),u=w(57295);y.skipUntil=function h(g){return k.operate(function(v,m){var f=!1,_=G.createOperatorSubscriber(m,function(){_?.unsubscribe(),f=!0},u.noop);I.innerFrom(g).subscribe(_),v.subscribe(G.createOperatorSubscriber(m,function(S){return f&&m.next(S)}))})}},94603:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.skipWhile=void 0;var k=w(3525),G=w(24883);y.skipWhile=function I(u){return k.operate(function(h,g){var v=!1,m=0;h.subscribe(G.createOperatorSubscriber(g,function(f){return(v||(v=!u(f,m++)))&&g.next(f)}))})}},78863:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.startWith=void 0;var k=w(27989),G=w(94546),I=w(3525);y.startWith=function u(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];var v=G.popScheduler(h);return I.operate(function(m,f){(v?k.concat(h,m,v):k.concat(h,m)).subscribe(f)})}},30822:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.subscribeOn=void 0;var k=w(3525);y.subscribeOn=function G(I,u){return void 0===u&&(u=0),k.operate(function(h,g){g.add(I.schedule(function(){return h.subscribe(g)},u))})}},44566:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.switchAll=void 0;var k=w(61601),G=w(67041);y.switchAll=function I(){return k.switchMap(G.identity)}},61601:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.switchMap=void 0;var k=w(3454),G=w(3525),I=w(24883);y.switchMap=function u(h,g){return G.operate(function(v,m){var f=null,_=0,S=!1,M=function(){return S&&!f&&m.complete()};v.subscribe(I.createOperatorSubscriber(m,function(D){f?.unsubscribe();var R=0,V=_++;k.innerFrom(h(D,V)).subscribe(f=I.createOperatorSubscriber(m,function(B){return m.next(g?g(D,B,V,R++):B)},function(){f=null,M()}))},function(){S=!0,M()}))})}},93480:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.switchMapTo=void 0;var k=w(61601),G=w(83178);y.switchMapTo=function I(u,h){return G.isFunction(h)?k.switchMap(function(){return u},h):k.switchMap(function(){return u})}},62520:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.switchScan=void 0;var k=w(61601),G=w(3525);y.switchScan=function I(u,h){return G.operate(function(g,v){var m=h;return k.switchMap(function(f,_){return u(m,f,_)},function(f,_){return m=_,_})(g).subscribe(v),function(){m=null}})}},44254:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.take=void 0;var k=w(13817),G=w(3525),I=w(24883);y.take=function u(h){return h<=0?function(){return k.EMPTY}:G.operate(function(g,v){var m=0;g.subscribe(I.createOperatorSubscriber(v,function(f){++m<=h&&(v.next(f),h<=m&&v.complete())}))})}},82755:function(Ae,y,w){"use strict";var k=this&&this.__values||function(g){var v="function"==typeof Symbol&&Symbol.iterator,m=v&&g[v],f=0;if(m)return m.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&f>=g.length&&(g=void 0),{value:g&&g[f++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0}),y.takeLast=void 0;var G=w(13817),I=w(3525),u=w(24883);y.takeLast=function h(g){return g<=0?function(){return G.EMPTY}:I.operate(function(v,m){var f=[];v.subscribe(u.createOperatorSubscriber(m,function(_){f.push(_),g<f.length&&f.shift()},function(){var _,S;try{for(var M=k(f),D=M.next();!D.done;D=M.next())m.next(D.value)}catch(V){_={error:V}}finally{try{D&&!D.done&&(S=M.return)&&S.call(M)}finally{if(_)throw _.error}}m.complete()},void 0,function(){f=null}))})}},72301:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.takeUntil=void 0;var k=w(3525),G=w(24883),I=w(3454),u=w(57295);y.takeUntil=function h(g){return k.operate(function(v,m){I.innerFrom(g).subscribe(G.createOperatorSubscriber(m,function(){return m.complete()},u.noop)),!m.closed&&v.subscribe(m)})}},81379:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.takeWhile=void 0;var k=w(3525),G=w(24883);y.takeWhile=function I(u,h){return void 0===h&&(h=!1),k.operate(function(g,v){var m=0;g.subscribe(G.createOperatorSubscriber(v,function(f){var _=u(f,m++);(_||h)&&v.next(f),!_&&v.complete()}))})}},99461:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.tap=void 0;var k=w(83178),G=w(3525),I=w(24883),u=w(67041);y.tap=function h(g,v,m){var f=k.isFunction(g)||v||m?{next:g,error:v,complete:m}:g;return f?G.operate(function(_,S){var M;null===(M=f.subscribe)||void 0===M||M.call(f);var D=!0;_.subscribe(I.createOperatorSubscriber(S,function(R){var V;null===(V=f.next)||void 0===V||V.call(f,R),S.next(R)},function(){var R;D=!1,null===(R=f.complete)||void 0===R||R.call(f),S.complete()},function(R){var V;D=!1,null===(V=f.error)||void 0===V||V.call(f,R),S.error(R)},function(){var R,V;D&&(null===(R=f.unsubscribe)||void 0===R||R.call(f)),null===(V=f.finalize)||void 0===V||V.call(f)}))}):u.identity}},54725:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.throttle=void 0;var k=w(3525),G=w(24883),I=w(3454);y.throttle=function u(h,g){return k.operate(function(v,m){var f=g??{},_=f.leading,S=void 0===_||_,M=f.trailing,D=void 0!==M&&M,R=!1,V=null,B=null,U=!1,F=function(){B?.unsubscribe(),B=null,D&&(Q(),U&&m.complete())},j=function(){B=null,U&&m.complete()},P=function($){return B=I.innerFrom(h($)).subscribe(G.createOperatorSubscriber(m,F,j))},Q=function(){if(R){R=!1;var $=V;V=null,m.next($),!U&&P($)}};v.subscribe(G.createOperatorSubscriber(m,function($){R=!0,V=$,(!B||B.closed)&&(S?Q():P($))},function(){U=!0,(!(D&&R&&B)||B.closed)&&m.complete()}))})}},30576:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.throttleTime=void 0;var k=w(48410),G=w(54725),I=w(17370);y.throttleTime=function u(h,g,v){void 0===g&&(g=k.asyncScheduler);var m=I.timer(h,g);return G.throttle(function(){return m},v)}},64582:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.throwIfEmpty=void 0;var k=w(58186),G=w(3525),I=w(24883);function h(){return new k.EmptyError}y.throwIfEmpty=function u(g){return void 0===g&&(g=h),G.operate(function(v,m){var f=!1;v.subscribe(I.createOperatorSubscriber(m,function(_){f=!0,m.next(_)},function(){return f?m.complete():m.error(g())}))})}},92766:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TimeInterval=y.timeInterval=void 0;var k=w(48410),G=w(3525),I=w(24883);y.timeInterval=function u(g){return void 0===g&&(g=k.asyncScheduler),G.operate(function(v,m){var f=g.now();v.subscribe(I.createOperatorSubscriber(m,function(_){var S=g.now(),M=S-f;f=S,m.next(new h(_,M))}))})};var h=function g(v,m){this.value=v,this.interval=m};y.TimeInterval=h},88169:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.timeout=y.TimeoutError=void 0;var k=w(48410),G=w(46367),I=w(3525),u=w(3454),h=w(64412),g=w(24883),v=w(41442);function f(_){throw new y.TimeoutError(_)}y.TimeoutError=h.createErrorClass(function(_){return function(M){void 0===M&&(M=null),_(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=M}}),y.timeout=function m(_,S){var M=G.isValidDate(_)?{first:_}:"number"==typeof _?{each:_}:_,D=M.first,R=M.each,V=M.with,B=void 0===V?f:V,U=M.scheduler,F=void 0===U?S??k.asyncScheduler:U,j=M.meta,P=void 0===j?null:j;if(null==D&&null==R)throw new TypeError("No timeout provided.");return I.operate(function(Q,$){var oe,X,ie=null,q=0,se=function(ne){X=v.executeSchedule($,F,function(){try{oe.unsubscribe(),u.innerFrom(B({meta:P,lastValue:ie,seen:q})).subscribe($)}catch(Ce){$.error(Ce)}},ne)};oe=Q.subscribe(g.createOperatorSubscriber($,function(ne){X?.unsubscribe(),q++,$.next(ie=ne),R>0&&se(R)},void 0,void 0,function(){X?.closed||X?.unsubscribe(),ie=null})),!q&&se(null!=D?"number"==typeof D?D:+D-F.now():R)})}},4373:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.timeoutWith=void 0;var k=w(48410),G=w(46367),I=w(88169);y.timeoutWith=function u(h,g,v){var m,f,_;if(v=v??k.async,G.isValidDate(h)?m=h:"number"==typeof h&&(f=h),!g)throw new TypeError("No observable provided to switch to");if(_=function(){return g},null==m&&null==f)throw new TypeError("No timeout provided.");return I.timeout({first:m,each:f,scheduler:v,with:_})}},62581:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.timestamp=void 0;var k=w(69539),G=w(60687);y.timestamp=function I(u){return void 0===u&&(u=k.dateTimestampProvider),G.map(function(h){return{value:h,timestamp:u.now()}})}},55399:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.toArray=void 0;var k=w(39786),G=w(3525),I=function(h,g){return h.push(g),h};y.toArray=function u(){return G.operate(function(h,g){k.reduce(I,[])(h).subscribe(g)})}},38491:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.window=void 0;var k=w(36961),G=w(3525),I=w(24883),u=w(57295),h=w(3454);y.window=function g(v){return G.operate(function(m,f){var _=new k.Subject;f.next(_.asObservable());var S=function(M){_.error(M),f.error(M)};return m.subscribe(I.createOperatorSubscriber(f,function(M){return _?.next(M)},function(){_.complete(),f.complete()},S)),h.innerFrom(v).subscribe(I.createOperatorSubscriber(f,function(){_.complete(),f.next(_=new k.Subject)},u.noop,S)),function(){_?.unsubscribe(),_=null}})}},35763:function(Ae,y,w){"use strict";var k=this&&this.__values||function(g){var v="function"==typeof Symbol&&Symbol.iterator,m=v&&g[v],f=0;if(m)return m.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&f>=g.length&&(g=void 0),{value:g&&g[f++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0}),y.windowCount=void 0;var G=w(36961),I=w(3525),u=w(24883);y.windowCount=function h(g,v){void 0===v&&(v=0);var m=v>0?v:g;return I.operate(function(f,_){var S=[new G.Subject],D=0;_.next(S[0].asObservable()),f.subscribe(u.createOperatorSubscriber(_,function(R){var V,B;try{for(var U=k(S),F=U.next();!F.done;F=U.next())F.value.next(R)}catch($){V={error:$}}finally{try{F&&!F.done&&(B=U.return)&&B.call(U)}finally{if(V)throw V.error}}var P=D-g+1;if(P>=0&&P%m==0&&S.shift().complete(),++D%m==0){var Q=new G.Subject;S.push(Q),_.next(Q.asObservable())}},function(){for(;S.length>0;)S.shift().complete();_.complete()},function(R){for(;S.length>0;)S.shift().error(R);_.error(R)},function(){S=null}))})}},32754:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.windowTime=void 0;var k=w(36961),G=w(48410),I=w(74205),u=w(3525),h=w(24883),g=w(80398),v=w(94546),m=w(41442);y.windowTime=function f(_){for(var S,M,D=[],R=1;R<arguments.length;R++)D[R-1]=arguments[R];var V=null!==(S=v.popScheduler(D))&&void 0!==S?S:G.asyncScheduler,B=null!==(M=D[0])&&void 0!==M?M:null,U=D[1]||1/0;return u.operate(function(F,j){var P=[],Q=!1,$=function(q){var ne=q.subs;q.window.complete(),ne.unsubscribe(),g.arrRemove(P,q),Q&&oe()},oe=function(){if(P){var q=new I.Subscription;j.add(q);var se=new k.Subject,ne={window:se,subs:q,seen:0};P.push(ne),j.next(se.asObservable()),m.executeSchedule(q,V,function(){return $(ne)},_)}};null!==B&&B>=0?m.executeSchedule(j,V,oe,B,!0):Q=!0,oe();var X=function(q){return P.slice().forEach(q)},ie=function(q){X(function(se){return q(se.window)}),q(j),j.unsubscribe()};return F.subscribe(h.createOperatorSubscriber(j,function(q){X(function(se){se.window.next(q),U<=++se.seen&&$(se)})},function(){return ie(function(q){return q.complete()})},function(q){return ie(function(se){return se.error(q)})})),function(){P=null}})}},31679:function(Ae,y,w){"use strict";var k=this&&this.__values||function(_){var S="function"==typeof Symbol&&Symbol.iterator,M=S&&_[S],D=0;if(M)return M.call(_);if(_&&"number"==typeof _.length)return{next:function(){return _&&D>=_.length&&(_=void 0),{value:_&&_[D++],done:!_}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(y,"__esModule",{value:!0}),y.windowToggle=void 0;var G=w(36961),I=w(74205),u=w(3525),h=w(3454),g=w(24883),v=w(57295),m=w(80398);y.windowToggle=function f(_,S){return u.operate(function(M,D){var R=[],V=function(B){for(;0<R.length;)R.shift().error(B);D.error(B)};h.innerFrom(_).subscribe(g.createOperatorSubscriber(D,function(B){var U=new G.Subject;R.push(U);var P,F=new I.Subscription;try{P=h.innerFrom(S(B))}catch(Q){return void V(Q)}D.next(U.asObservable()),F.add(P.subscribe(g.createOperatorSubscriber(D,function(){m.arrRemove(R,U),U.complete(),F.unsubscribe()},v.noop,V)))},v.noop)),M.subscribe(g.createOperatorSubscriber(D,function(B){var U,F,j=R.slice();try{for(var P=k(j),Q=P.next();!Q.done;Q=P.next())Q.value.next(B)}catch(oe){U={error:oe}}finally{try{Q&&!Q.done&&(F=P.return)&&F.call(P)}finally{if(U)throw U.error}}},function(){for(;0<R.length;)R.shift().complete();D.complete()},V,function(){for(;0<R.length;)R.shift().unsubscribe()}))})}},27202:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.windowWhen=void 0;var k=w(36961),G=w(3525),I=w(24883),u=w(3454);y.windowWhen=function h(g){return G.operate(function(v,m){var f,_,S=function(D){f.error(D),m.error(D)},M=function(){var D;_?.unsubscribe(),f?.complete(),f=new k.Subject,m.next(f.asObservable());try{D=u.innerFrom(g())}catch(R){return void S(R)}D.subscribe(_=I.createOperatorSubscriber(m,M,M,S))};M(),v.subscribe(I.createOperatorSubscriber(m,function(D){return f.next(D)},function(){f.complete(),m.complete()},S,function(){_?.unsubscribe(),f=null}))})}},51497:function(Ae,y,w){"use strict";var k=this&&this.__read||function(_,S){var M="function"==typeof Symbol&&_[Symbol.iterator];if(!M)return _;var R,B,D=M.call(_),V=[];try{for(;(void 0===S||S-- >0)&&!(R=D.next()).done;)V.push(R.value)}catch(U){B={error:U}}finally{try{R&&!R.done&&(M=D.return)&&M.call(D)}finally{if(B)throw B.error}}return V},G=this&&this.__spreadArray||function(_,S){for(var M=0,D=S.length,R=_.length;M<D;M++,R++)_[R]=S[M];return _};Object.defineProperty(y,"__esModule",{value:!0}),y.withLatestFrom=void 0;var I=w(3525),u=w(24883),h=w(3454),g=w(67041),v=w(57295),m=w(94546);y.withLatestFrom=function f(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];var M=m.popResultSelector(_);return I.operate(function(D,R){for(var V=_.length,B=new Array(V),U=_.map(function(){return!1}),F=!1,j=function(Q){h.innerFrom(_[Q]).subscribe(u.createOperatorSubscriber(R,function($){B[Q]=$,!F&&!U[Q]&&(U[Q]=!0,(F=U.every(g.identity))&&(U=null))},v.noop))},P=0;P<V;P++)j(P);D.subscribe(u.createOperatorSubscriber(R,function(Q){if(F){var $=G([Q],k(B));R.next(M?M.apply(void 0,G([],k($))):$)}}))})}},48058:function(Ae,y,w){"use strict";var k=this&&this.__read||function(g,v){var m="function"==typeof Symbol&&g[Symbol.iterator];if(!m)return g;var _,M,f=m.call(g),S=[];try{for(;(void 0===v||v-- >0)&&!(_=f.next()).done;)S.push(_.value)}catch(D){M={error:D}}finally{try{_&&!_.done&&(m=f.return)&&m.call(f)}finally{if(M)throw M.error}}return S},G=this&&this.__spreadArray||function(g,v){for(var m=0,f=v.length,_=g.length;m<f;m++,_++)g[_]=v[m];return g};Object.defineProperty(y,"__esModule",{value:!0}),y.zip=void 0;var I=w(80512),u=w(3525);y.zip=function h(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];return u.operate(function(m,f){I.zip.apply(void 0,G([m],k(g))).subscribe(f)})}},38617:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.zipAll=void 0;var k=w(80512),G=w(53267);y.zipAll=function I(u){return G.joinAllInternals(k.zip,u)}},41494:function(Ae,y,w){"use strict";var k=this&&this.__read||function(h,g){var v="function"==typeof Symbol&&h[Symbol.iterator];if(!v)return h;var f,S,m=v.call(h),_=[];try{for(;(void 0===g||g-- >0)&&!(f=m.next()).done;)_.push(f.value)}catch(M){S={error:M}}finally{try{f&&!f.done&&(v=m.return)&&v.call(m)}finally{if(S)throw S.error}}return _},G=this&&this.__spreadArray||function(h,g){for(var v=0,m=g.length,f=h.length;v<m;v++,f++)h[f]=g[v];return h};Object.defineProperty(y,"__esModule",{value:!0}),y.zipWith=void 0;var I=w(48058);y.zipWith=function u(){for(var h=[],g=0;g<arguments.length;g++)h[g]=arguments[g];return I.zip.apply(void 0,G([],k(h)))}},14567:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.scheduleArray=void 0;var k=w(67759);y.scheduleArray=function G(I,u){return new k.Observable(function(h){var g=0;return u.schedule(function(){g===I.length?h.complete():(h.next(I[g++]),h.closed||this.schedule())})})}},90885:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.scheduleAsyncIterable=void 0;var k=w(67759),G=w(41442);y.scheduleAsyncIterable=function I(u,h){if(!u)throw new Error("Iterable cannot be null");return new k.Observable(function(g){G.executeSchedule(g,h,function(){var v=u[Symbol.asyncIterator]();G.executeSchedule(g,h,function(){v.next().then(function(m){m.done?g.complete():g.next(m.value)})},0,!0)})})}},32683:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.scheduleIterable=void 0;var k=w(67759),G=w(74401),I=w(83178),u=w(41442);y.scheduleIterable=function h(g,v){return new k.Observable(function(m){var f;return u.executeSchedule(m,v,function(){f=g[G.iterator](),u.executeSchedule(m,v,function(){var _,S,M;try{S=(_=f.next()).value,M=_.done}catch(D){return void m.error(D)}M?m.complete():m.next(S)},0,!0)}),function(){return I.isFunction(f?.return)&&f.return()}})}},7029:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.scheduleObservable=void 0;var k=w(3454),G=w(20099),I=w(30822);y.scheduleObservable=function u(h,g){return k.innerFrom(h).pipe(I.subscribeOn(g),G.observeOn(g))}},16419:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.schedulePromise=void 0;var k=w(3454),G=w(20099),I=w(30822);y.schedulePromise=function u(h,g){return k.innerFrom(h).pipe(I.subscribeOn(g),G.observeOn(g))}},69329:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.scheduleReadableStreamLike=void 0;var k=w(90885),G=w(1503);y.scheduleReadableStreamLike=function I(u,h){return k.scheduleAsyncIterable(G.readableStreamLikeToAsyncGenerator(u),h)}},20091:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.scheduled=void 0;var k=w(7029),G=w(16419),I=w(14567),u=w(32683),h=w(90885),g=w(43424),v=w(21224),m=w(97523),f=w(42884),_=w(2534),S=w(85887),M=w(1503),D=w(69329);y.scheduled=function R(V,B){if(null!=V){if(g.isInteropObservable(V))return k.scheduleObservable(V,B);if(m.isArrayLike(V))return I.scheduleArray(V,B);if(v.isPromise(V))return G.schedulePromise(V,B);if(_.isAsyncIterable(V))return h.scheduleAsyncIterable(V,B);if(f.isIterable(V))return u.scheduleIterable(V,B);if(M.isReadableStreamLike(V))return D.scheduleReadableStreamLike(V,B)}throw S.createInvalidObservableTypeError(V)}},21490:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.Action=void 0;var I=function(u){function h(g,v){return u.call(this)||this}return k(h,u),h.prototype.schedule=function(g,v){return void 0===v&&(v=0),this},h}(w(74205).Subscription);y.Action=I},98062:function(Ae,y,w){"use strict";var h,k=this&&this.__extends||(h=function(g,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(m[_]=f[_])})(g,v)},function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function m(){this.constructor=g}h(g,v),g.prototype=null===v?Object.create(v):(m.prototype=v.prototype,new m)});Object.defineProperty(y,"__esModule",{value:!0}),y.AnimationFrameAction=void 0;var G=w(69597),I=w(1170),u=function(h){function g(v,m){var f=h.call(this,v,m)||this;return f.scheduler=v,f.work=m,f}return k(g,h),g.prototype.requestAsyncId=function(v,m,f){return void 0===f&&(f=0),null!==f&&f>0?h.prototype.requestAsyncId.call(this,v,m,f):(v.actions.push(this),v._scheduled||(v._scheduled=I.animationFrameProvider.requestAnimationFrame(function(){return v.flush(void 0)})))},g.prototype.recycleAsyncId=function(v,m,f){var _;if(void 0===f&&(f=0),null!=f?f>0:this.delay>0)return h.prototype.recycleAsyncId.call(this,v,m,f);var S=v.actions;null!=m&&(null===(_=S[S.length-1])||void 0===_?void 0:_.id)!==m&&(I.animationFrameProvider.cancelAnimationFrame(m),v._scheduled=void 0)},g}(G.AsyncAction);y.AnimationFrameAction=u},51451:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.AnimationFrameScheduler=void 0;var I=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return k(h,u),h.prototype.flush=function(g){this._active=!0;var v=this._scheduled;this._scheduled=void 0;var f,m=this.actions;g=g||m.shift();do{if(f=g.execute(g.state,g.delay))break}while((g=m[0])&&g.id===v&&m.shift());if(this._active=!1,f){for(;(g=m[0])&&g.id===v&&m.shift();)g.unsubscribe();throw f}},h}(w(57297).AsyncScheduler);y.AnimationFrameScheduler=I},54239:function(Ae,y,w){"use strict";var h,k=this&&this.__extends||(h=function(g,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var _ in f)Object.prototype.hasOwnProperty.call(f,_)&&(m[_]=f[_])})(g,v)},function(g,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function m(){this.constructor=g}h(g,v),g.prototype=null===v?Object.create(v):(m.prototype=v.prototype,new m)});Object.defineProperty(y,"__esModule",{value:!0}),y.AsapAction=void 0;var G=w(69597),I=w(80080),u=function(h){function g(v,m){var f=h.call(this,v,m)||this;return f.scheduler=v,f.work=m,f}return k(g,h),g.prototype.requestAsyncId=function(v,m,f){return void 0===f&&(f=0),null!==f&&f>0?h.prototype.requestAsyncId.call(this,v,m,f):(v.actions.push(this),v._scheduled||(v._scheduled=I.immediateProvider.setImmediate(v.flush.bind(v,void 0))))},g.prototype.recycleAsyncId=function(v,m,f){var _;if(void 0===f&&(f=0),null!=f?f>0:this.delay>0)return h.prototype.recycleAsyncId.call(this,v,m,f);var S=v.actions;null!=m&&(null===(_=S[S.length-1])||void 0===_?void 0:_.id)!==m&&(I.immediateProvider.clearImmediate(m),v._scheduled===m&&(v._scheduled=void 0))},g}(G.AsyncAction);y.AsapAction=u},1720:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.AsapScheduler=void 0;var I=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return k(h,u),h.prototype.flush=function(g){this._active=!0;var v=this._scheduled;this._scheduled=void 0;var f,m=this.actions;g=g||m.shift();do{if(f=g.execute(g.state,g.delay))break}while((g=m[0])&&g.id===v&&m.shift());if(this._active=!1,f){for(;(g=m[0])&&g.id===v&&m.shift();)g.unsubscribe();throw f}},h}(w(57297).AsyncScheduler);y.AsapScheduler=I},69597:function(Ae,y,w){"use strict";var g,k=this&&this.__extends||(g=function(v,m){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,_){f.__proto__=_}||function(f,_){for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(f[S]=_[S])})(v,m)},function(v,m){if("function"!=typeof m&&null!==m)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function f(){this.constructor=v}g(v,m),v.prototype=null===m?Object.create(m):(f.prototype=m.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0}),y.AsyncAction=void 0;var G=w(21490),I=w(85753),u=w(80398),h=function(g){function v(m,f){var _=g.call(this,m,f)||this;return _.scheduler=m,_.work=f,_.pending=!1,_}return k(v,g),v.prototype.schedule=function(m,f){var _;if(void 0===f&&(f=0),this.closed)return this;this.state=m;var S=this.id,M=this.scheduler;return null!=S&&(this.id=this.recycleAsyncId(M,S,f)),this.pending=!0,this.delay=f,this.id=null!==(_=this.id)&&void 0!==_?_:this.requestAsyncId(M,this.id,f),this},v.prototype.requestAsyncId=function(m,f,_){return void 0===_&&(_=0),I.intervalProvider.setInterval(m.flush.bind(m,this),_)},v.prototype.recycleAsyncId=function(m,f,_){if(void 0===_&&(_=0),null!=_&&this.delay===_&&!1===this.pending)return f;null!=f&&I.intervalProvider.clearInterval(f)},v.prototype.execute=function(m,f){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var _=this._execute(m,f);if(_)return _;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},v.prototype._execute=function(m,f){var S,_=!1;try{this.work(m)}catch(M){_=!0,S=M||new Error("Scheduled action threw falsy error")}if(_)return this.unsubscribe(),S},v.prototype.unsubscribe=function(){if(!this.closed){var f=this.id,_=this.scheduler,S=_.actions;this.work=this.state=this.scheduler=null,this.pending=!1,u.arrRemove(S,this),null!=f&&(this.id=this.recycleAsyncId(_,f,null)),this.delay=null,g.prototype.unsubscribe.call(this)}},v}(G.Action);y.AsyncAction=h},57297:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.AsyncScheduler=void 0;var G=w(81692),I=function(u){function h(g,v){void 0===v&&(v=G.Scheduler.now);var m=u.call(this,g,v)||this;return m.actions=[],m._active=!1,m}return k(h,u),h.prototype.flush=function(g){var v=this.actions;if(this._active)v.push(g);else{var m;this._active=!0;do{if(m=g.execute(g.state,g.delay))break}while(g=v.shift());if(this._active=!1,m){for(;g=v.shift();)g.unsubscribe();throw m}}},h}(G.Scheduler);y.AsyncScheduler=I},47791:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.QueueAction=void 0;var I=function(u){function h(g,v){var m=u.call(this,g,v)||this;return m.scheduler=g,m.work=v,m}return k(h,u),h.prototype.schedule=function(g,v){return void 0===v&&(v=0),v>0?u.prototype.schedule.call(this,g,v):(this.delay=v,this.state=g,this.scheduler.flush(this),this)},h.prototype.execute=function(g,v){return v>0||this.closed?u.prototype.execute.call(this,g,v):this._execute(g,v)},h.prototype.requestAsyncId=function(g,v,m){return void 0===m&&(m=0),null!=m&&m>0||null==m&&this.delay>0?u.prototype.requestAsyncId.call(this,g,v,m):(g.flush(this),0)},h}(w(69597).AsyncAction);y.QueueAction=I},95963:function(Ae,y,w){"use strict";var u,k=this&&this.__extends||(u=function(h,g){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(v[f]=m[f])})(h,g)},function(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function v(){this.constructor=h}u(h,g),h.prototype=null===g?Object.create(g):(v.prototype=g.prototype,new v)});Object.defineProperty(y,"__esModule",{value:!0}),y.QueueScheduler=void 0;var I=function(u){function h(){return null!==u&&u.apply(this,arguments)||this}return k(h,u),h}(w(57297).AsyncScheduler);y.QueueScheduler=I},71091:function(Ae,y,w){"use strict";var v,k=this&&this.__extends||(v=function(m,f){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,S){_.__proto__=S}||function(_,S){for(var M in S)Object.prototype.hasOwnProperty.call(S,M)&&(_[M]=S[M])})(m,f)},function(m,f){if("function"!=typeof f&&null!==f)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function _(){this.constructor=m}v(m,f),m.prototype=null===f?Object.create(f):(_.prototype=f.prototype,new _)});Object.defineProperty(y,"__esModule",{value:!0}),y.VirtualAction=y.VirtualTimeScheduler=void 0;var G=w(69597),I=w(74205),h=function(v){function m(f,_){void 0===f&&(f=g),void 0===_&&(_=1/0);var S=v.call(this,f,function(){return S.frame})||this;return S.maxFrames=_,S.frame=0,S.index=-1,S}return k(m,v),m.prototype.flush=function(){for(var M,D,_=this.actions,S=this.maxFrames;(D=_[0])&&D.delay<=S&&(_.shift(),this.frame=D.delay,!(M=D.execute(D.state,D.delay))););if(M){for(;D=_.shift();)D.unsubscribe();throw M}},m.frameTimeFactor=10,m}(w(57297).AsyncScheduler);y.VirtualTimeScheduler=h;var g=function(v){function m(f,_,S){void 0===S&&(S=f.index+=1);var M=v.call(this,f,_)||this;return M.scheduler=f,M.work=_,M.index=S,M.active=!0,M.index=f.index=S,M}return k(m,v),m.prototype.schedule=function(f,_){if(void 0===_&&(_=0),Number.isFinite(_)){if(!this.id)return v.prototype.schedule.call(this,f,_);this.active=!1;var S=new m(this.scheduler,this.work);return this.add(S),S.schedule(f,_)}return I.Subscription.EMPTY},m.prototype.requestAsyncId=function(f,_,S){void 0===S&&(S=0),this.delay=f.frame+S;var M=f.actions;return M.push(this),M.sort(m.sortActions),1},m.prototype.recycleAsyncId=function(f,_,S){void 0===S&&(S=0)},m.prototype._execute=function(f,_){if(!0===this.active)return v.prototype._execute.call(this,f,_)},m.sortActions=function(f,_){return f.delay===_.delay?f.index===_.index?0:f.index>_.index?1:-1:f.delay>_.delay?1:-1},m}(G.AsyncAction);y.VirtualAction=g},30554:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.animationFrame=y.animationFrameScheduler=void 0;var k=w(98062),G=w(51451);y.animationFrameScheduler=new G.AnimationFrameScheduler(k.AnimationFrameAction),y.animationFrame=y.animationFrameScheduler},1170:function(Ae,y,w){"use strict";var k=this&&this.__read||function(u,h){var g="function"==typeof Symbol&&u[Symbol.iterator];if(!g)return u;var m,_,v=g.call(u),f=[];try{for(;(void 0===h||h-- >0)&&!(m=v.next()).done;)f.push(m.value)}catch(S){_={error:S}}finally{try{m&&!m.done&&(g=v.return)&&g.call(v)}finally{if(_)throw _.error}}return f},G=this&&this.__spreadArray||function(u,h){for(var g=0,v=h.length,m=u.length;g<v;g++,m++)u[m]=h[g];return u};Object.defineProperty(y,"__esModule",{value:!0}),y.animationFrameProvider=void 0;var I=w(74205);y.animationFrameProvider={schedule:function(u){var h=requestAnimationFrame,g=cancelAnimationFrame,v=y.animationFrameProvider.delegate;v&&(h=v.requestAnimationFrame,g=v.cancelAnimationFrame);var m=h(function(f){g=void 0,u(f)});return new I.Subscription(function(){return g?.(m)})},requestAnimationFrame:function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var g=y.animationFrameProvider.delegate;return(g?.requestAnimationFrame||requestAnimationFrame).apply(void 0,G([],k(u)))},cancelAnimationFrame:function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];var g=y.animationFrameProvider.delegate;return(g?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,G([],k(u)))},delegate:void 0}},31911:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.asap=y.asapScheduler=void 0;var k=w(54239),G=w(1720);y.asapScheduler=new G.AsapScheduler(k.AsapAction),y.asap=y.asapScheduler},48410:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.async=y.asyncScheduler=void 0;var k=w(69597),G=w(57297);y.asyncScheduler=new G.AsyncScheduler(k.AsyncAction),y.async=y.asyncScheduler},69539:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.dateTimestampProvider=void 0,y.dateTimestampProvider={now:function(){return(y.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},80080:function(Ae,y,w){"use strict";var k=this&&this.__read||function(g,v){var m="function"==typeof Symbol&&g[Symbol.iterator];if(!m)return g;var _,M,f=m.call(g),S=[];try{for(;(void 0===v||v-- >0)&&!(_=f.next()).done;)S.push(_.value)}catch(D){M={error:D}}finally{try{_&&!_.done&&(m=f.return)&&m.call(f)}finally{if(M)throw M.error}}return S},G=this&&this.__spreadArray||function(g,v){for(var m=0,f=v.length,_=g.length;m<f;m++,_++)g[_]=v[m];return g};Object.defineProperty(y,"__esModule",{value:!0}),y.immediateProvider=void 0;var I=w(17837),u=I.Immediate.setImmediate,h=I.Immediate.clearImmediate;y.immediateProvider={setImmediate:function(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];var m=y.immediateProvider.delegate;return(m?.setImmediate||u).apply(void 0,G([],k(g)))},clearImmediate:function(g){var v=y.immediateProvider.delegate;return(v?.clearImmediate||h)(g)},delegate:void 0}},85753:function(Ae,y){"use strict";var w=this&&this.__read||function(G,I){var u="function"==typeof Symbol&&G[Symbol.iterator];if(!u)return G;var g,m,h=u.call(G),v=[];try{for(;(void 0===I||I-- >0)&&!(g=h.next()).done;)v.push(g.value)}catch(f){m={error:f}}finally{try{g&&!g.done&&(u=h.return)&&u.call(h)}finally{if(m)throw m.error}}return v},k=this&&this.__spreadArray||function(G,I){for(var u=0,h=I.length,g=G.length;u<h;u++,g++)G[g]=I[u];return G};Object.defineProperty(y,"__esModule",{value:!0}),y.intervalProvider=void 0,y.intervalProvider={setInterval:function(G,I){for(var u=[],h=2;h<arguments.length;h++)u[h-2]=arguments[h];var g=y.intervalProvider.delegate;return g?.setInterval?g.setInterval.apply(g,k([G,I],w(u))):setInterval.apply(void 0,k([G,I],w(u)))},clearInterval:function(G){var I=y.intervalProvider.delegate;return(I?.clearInterval||clearInterval)(G)},delegate:void 0}},74253:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.performanceTimestampProvider=void 0,y.performanceTimestampProvider={now:function(){return(y.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},24597:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.queue=y.queueScheduler=void 0;var k=w(47791),G=w(95963);y.queueScheduler=new G.QueueScheduler(k.QueueAction),y.queue=y.queueScheduler},1593:function(Ae,y){"use strict";var w=this&&this.__read||function(G,I){var u="function"==typeof Symbol&&G[Symbol.iterator];if(!u)return G;var g,m,h=u.call(G),v=[];try{for(;(void 0===I||I-- >0)&&!(g=h.next()).done;)v.push(g.value)}catch(f){m={error:f}}finally{try{g&&!g.done&&(u=h.return)&&u.call(h)}finally{if(m)throw m.error}}return v},k=this&&this.__spreadArray||function(G,I){for(var u=0,h=I.length,g=G.length;u<h;u++,g++)G[g]=I[u];return G};Object.defineProperty(y,"__esModule",{value:!0}),y.timeoutProvider=void 0,y.timeoutProvider={setTimeout:function(G,I){for(var u=[],h=2;h<arguments.length;h++)u[h-2]=arguments[h];var g=y.timeoutProvider.delegate;return g?.setTimeout?g.setTimeout.apply(g,k([G,I],w(u))):setTimeout.apply(void 0,k([G,I],w(u)))},clearTimeout:function(G){var I=y.timeoutProvider.delegate;return(I?.clearTimeout||clearTimeout)(G)},delegate:void 0}},74401:(Ae,y)=>{"use strict";function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(y,"__esModule",{value:!0}),y.iterator=y.getSymbolIterator=void 0,y.getSymbolIterator=w,y.iterator=w()},2304:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.observable=void 0,y.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},94885:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0})},1547:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ArgumentOutOfRangeError=void 0;var k=w(64412);y.ArgumentOutOfRangeError=k.createErrorClass(function(G){return function(){G(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},58186:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.EmptyError=void 0;var k=w(64412);y.EmptyError=k.createErrorClass(function(G){return function(){G(this),this.name="EmptyError",this.message="no elements in sequence"}})},17837:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TestTools=y.Immediate=void 0;var k,w=1,G={};function I(u){return u in G&&(delete G[u],!0)}y.Immediate={setImmediate:function(u){var h=w++;return G[h]=!0,k||(k=Promise.resolve()),k.then(function(){return I(h)&&u()}),h},clearImmediate:function(u){I(u)}},y.TestTools={pending:function(){return Object.keys(G).length}}},53053:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.NotFoundError=void 0;var k=w(64412);y.NotFoundError=k.createErrorClass(function(G){return function(u){G(this),this.name="NotFoundError",this.message=u}})},21800:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ObjectUnsubscribedError=void 0;var k=w(64412);y.ObjectUnsubscribedError=k.createErrorClass(function(G){return function(){G(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},33803:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.SequenceError=void 0;var k=w(64412);y.SequenceError=k.createErrorClass(function(G){return function(u){G(this),this.name="SequenceError",this.message=u}})},84473:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.UnsubscriptionError=void 0;var k=w(64412);y.UnsubscriptionError=k.createErrorClass(function(G){return function(u){G(this),this.message=u?u.length+" errors occurred during unsubscription:\n"+u.map(function(h,g){return g+1+") "+h.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=u}})},94546:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.popNumber=y.popScheduler=y.popResultSelector=void 0;var k=w(83178),G=w(98133);function I(v){return v[v.length-1]}y.popResultSelector=function u(v){return k.isFunction(I(v))?v.pop():void 0},y.popScheduler=function h(v){return G.isScheduler(I(v))?v.pop():void 0},y.popNumber=function g(v,m){return"number"==typeof I(v)?v.pop():m}},55362:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.argsArgArrayOrObject=void 0;var w=Array.isArray,k=Object.getPrototypeOf,G=Object.prototype,I=Object.keys;y.argsArgArrayOrObject=function u(g){if(1===g.length){var v=g[0];if(w(v))return{args:v,keys:null};if(function h(g){return g&&"object"==typeof g&&k(g)===G}(v)){var m=I(v);return{args:m.map(function(f){return v[f]}),keys:m}}}return{args:g,keys:null}}},23:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.argsOrArgArray=void 0;var w=Array.isArray;y.argsOrArgArray=function k(G){return 1===G.length&&w(G[0])?G[0]:G}},80398:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.arrRemove=void 0,y.arrRemove=function w(k,G){if(k){var I=k.indexOf(G);0<=I&&k.splice(I,1)}}},64412:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.createErrorClass=void 0,y.createErrorClass=function w(k){var I=k(function(u){Error.call(u),u.stack=(new Error).stack});return I.prototype=Object.create(Error.prototype),I.prototype.constructor=I,I}},38459:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.createObject=void 0,y.createObject=function w(k,G){return k.reduce(function(I,u,h){return I[u]=G[h],I},{})}},71920:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.captureError=y.errorContext=void 0;var k=w(40537),G=null;y.errorContext=function I(h){if(k.config.useDeprecatedSynchronousErrorHandling){var g=!G;if(g&&(G={errorThrown:!1,error:null}),h(),g){var v=G;if(G=null,v.errorThrown)throw v.error}}else h()},y.captureError=function u(h){k.config.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=h)}},41442:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.executeSchedule=void 0,y.executeSchedule=function w(k,G,I,u,h){void 0===u&&(u=0),void 0===h&&(h=!1);var g=G.schedule(function(){I(),h?k.add(this.schedule(null,u)):this.unsubscribe()},u);if(k.add(g),!h)return g}},67041:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.identity=void 0,y.identity=function w(k){return k}},97523:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isArrayLike=void 0,y.isArrayLike=function(w){return w&&"number"==typeof w.length&&"function"!=typeof w}},2534:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isAsyncIterable=void 0;var k=w(83178);y.isAsyncIterable=function G(I){return Symbol.asyncIterator&&k.isFunction(I?.[Symbol.asyncIterator])}},46367:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isValidDate=void 0,y.isValidDate=function w(k){return k instanceof Date&&!isNaN(k)}},83178:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isFunction=void 0,y.isFunction=function w(k){return"function"==typeof k}},43424:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isInteropObservable=void 0;var k=w(2304),G=w(83178);y.isInteropObservable=function I(u){return G.isFunction(u[k.observable])}},42884:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isIterable=void 0;var k=w(74401),G=w(83178);y.isIterable=function I(u){return G.isFunction(u?.[k.iterator])}},89754:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isObservable=void 0;var k=w(67759),G=w(83178);y.isObservable=function I(u){return!!u&&(u instanceof k.Observable||G.isFunction(u.lift)&&G.isFunction(u.subscribe))}},21224:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isPromise=void 0;var k=w(83178);y.isPromise=function G(I){return k.isFunction(I?.then)}},1503:function(Ae,y,w){"use strict";var k=this&&this.__generator||function(v,m){var _,S,M,D,f={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return D={next:R(0),throw:R(1),return:R(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function R(B){return function(U){return function V(B){if(_)throw new TypeError("Generator is already executing.");for(;f;)try{if(_=1,S&&(M=2&B[0]?S.return:B[0]?S.throw||((M=S.return)&&M.call(S),0):S.next)&&!(M=M.call(S,B[1])).done)return M;switch(S=0,M&&(B=[2&B[0],M.value]),B[0]){case 0:case 1:M=B;break;case 4:return f.label++,{value:B[1],done:!1};case 5:f.label++,S=B[1],B=[0];continue;case 7:B=f.ops.pop(),f.trys.pop();continue;default:if(!(M=(M=f.trys).length>0&&M[M.length-1])&&(6===B[0]||2===B[0])){f=0;continue}if(3===B[0]&&(!M||B[1]>M[0]&&B[1]<M[3])){f.label=B[1];break}if(6===B[0]&&f.label<M[1]){f.label=M[1],M=B;break}if(M&&f.label<M[2]){f.label=M[2],f.ops.push(B);break}M[2]&&f.ops.pop(),f.trys.pop();continue}B=m.call(v,f)}catch(U){B=[6,U],S=0}finally{_=M=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,U])}}},G=this&&this.__await||function(v){return this instanceof G?(this.v=v,this):new G(v)},I=this&&this.__asyncGenerator||function(v,m,f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S,_=f.apply(v,m||[]),M=[];return S={},D("next"),D("throw"),D("return"),S[Symbol.asyncIterator]=function(){return this},S;function D(j){_[j]&&(S[j]=function(P){return new Promise(function(Q,$){M.push([j,P,Q,$])>1||R(j,P)})})}function R(j,P){try{!function V(j){j.value instanceof G?Promise.resolve(j.value.v).then(B,U):F(M[0][2],j)}(_[j](P))}catch(Q){F(M[0][3],Q)}}function B(j){R("next",j)}function U(j){R("throw",j)}function F(j,P){j(P),M.shift(),M.length&&R(M[0][0],M[0][1])}};Object.defineProperty(y,"__esModule",{value:!0}),y.isReadableStreamLike=y.readableStreamLikeToAsyncGenerator=void 0;var u=w(83178);y.readableStreamLikeToAsyncGenerator=function h(v){return I(this,arguments,function(){var f,_,S;return k(this,function(D){switch(D.label){case 0:f=v.getReader(),D.label=1;case 1:D.trys.push([1,,9,10]),D.label=2;case 2:return[4,G(f.read())];case 3:return _=D.sent(),S=_.value,_.done?[4,G(void 0)]:[3,5];case 4:return[2,D.sent()];case 5:return[4,G(S)];case 6:return[4,D.sent()];case 7:return D.sent(),[3,2];case 8:return[3,10];case 9:return f.releaseLock(),[7];case 10:return[2]}})})},y.isReadableStreamLike=function g(v){return u.isFunction(v?.getReader)}},98133:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.isScheduler=void 0;var k=w(83178);y.isScheduler=function G(I){return I&&k.isFunction(I.schedule)}},3525:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.operate=y.hasLift=void 0;var k=w(83178);function G(u){return k.isFunction(u?.lift)}y.hasLift=G,y.operate=function I(u){return function(h){if(G(h))return h.lift(function(g){try{return u(g,this)}catch(v){this.error(v)}});throw new TypeError("Unable to lift unknown Observable type")}}},9795:function(Ae,y,w){"use strict";var k=this&&this.__read||function(v,m){var f="function"==typeof Symbol&&v[Symbol.iterator];if(!f)return v;var S,D,_=f.call(v),M=[];try{for(;(void 0===m||m-- >0)&&!(S=_.next()).done;)M.push(S.value)}catch(R){D={error:R}}finally{try{S&&!S.done&&(f=_.return)&&f.call(_)}finally{if(D)throw D.error}}return M},G=this&&this.__spreadArray||function(v,m){for(var f=0,_=m.length,S=v.length;f<_;f++,S++)v[S]=m[f];return v};Object.defineProperty(y,"__esModule",{value:!0}),y.mapOneOrManyArgs=void 0;var I=w(60687),u=Array.isArray;y.mapOneOrManyArgs=function g(v){return I.map(function(m){return function h(v,m){return u(m)?v.apply(void 0,G([],k(m))):v(m)}(v,m)})}},57295:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.noop=void 0,y.noop=function w(){}},88946:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.not=void 0,y.not=function w(k,G){return function(I,u){return!k.call(G,I,u)}}},21838:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.pipeFromArray=y.pipe=void 0;var k=w(67041);function I(u){return 0===u.length?k.identity:1===u.length?u[0]:function(g){return u.reduce(function(v,m){return m(v)},g)}}y.pipe=function G(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return I(u)},y.pipeFromArray=I},48055:(Ae,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.reportUnhandledError=void 0;var k=w(40537),G=w(1593);y.reportUnhandledError=function I(u){G.timeoutProvider.setTimeout(function(){var h=k.config.onUnhandledError;if(!h)throw u;h(u)})}},85887:(Ae,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.createInvalidObservableTypeError=void 0,y.createInvalidObservableTypeError=function w(k){return new TypeError("You provided "+(null!==k&&"object"==typeof k?"an invalid object":"'"+k+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},28251:(Ae,y,w)=>{const G=w(28310),I=w(86208),u=w(26422),h=w(77772);function g(v,m,f,_,S){const M=[].slice.call(arguments,1),D=M.length,R="function"==typeof M[D-1];if(!R&&!G())throw new Error("Callback required as last argument");if(!R){if(D<1)throw new Error("Too few arguments provided");return 1===D?(f=m,m=_=void 0):2===D&&!m.getContext&&(_=f,f=m,m=void 0),new Promise(function(V,B){try{const U=I.create(f,_);V(v(U,m,_))}catch(U){B(U)}})}if(D<2)throw new Error("Too few arguments provided");2===D?(S=f,f=m,m=_=void 0):3===D&&(m.getContext&&typeof S>"u"?(S=_,_=void 0):(S=_,_=f,f=m,m=void 0));try{const V=I.create(f,_);S(null,v(V,m,_))}catch(V){S(V)}}y.rT=g.bind(null,u.render),y.hz=g.bind(null,u.renderToDataURL),y.toString=g.bind(null,function(v,m,f){return h.render(v,f)})},28310:Ae=>{Ae.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},65281:(Ae,y,w)=>{const k=w(82562).getSymbolSize;y.getRowColCoords=function(I){if(1===I)return[];const u=Math.floor(I/7)+2,h=k(I),g=145===h?26:2*Math.ceil((h-13)/(2*u-2)),v=[h-7];for(let m=1;m<u-1;m++)v[m]=v[m-1]-g;return v.push(6),v.reverse()},y.getPositions=function(I){const u=[],h=y.getRowColCoords(I),g=h.length;for(let v=0;v<g;v++)for(let m=0;m<g;m++)0===v&&0===m||0===v&&m===g-1||v===g-1&&0===m||u.push([h[v],h[m]]);return u}},30120:(Ae,y,w)=>{const k=w(71239),G=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function I(u){this.mode=k.ALPHANUMERIC,this.data=u}I.getBitsLength=function(h){return 11*Math.floor(h/2)+h%2*6},I.prototype.getLength=function(){return this.data.length},I.prototype.getBitsLength=function(){return I.getBitsLength(this.data.length)},I.prototype.write=function(h){let g;for(g=0;g+2<=this.data.length;g+=2){let v=45*G.indexOf(this.data[g]);v+=G.indexOf(this.data[g+1]),h.put(v,11)}this.data.length%2&&h.put(G.indexOf(this.data[g]),6)},Ae.exports=I},16509:Ae=>{function y(){this.buffer=[],this.length=0}y.prototype={get:function(w){const k=Math.floor(w/8);return 1==(this.buffer[k]>>>7-w%8&1)},put:function(w,k){for(let G=0;G<k;G++)this.putBit(1==(w>>>k-G-1&1))},getLengthInBits:function(){return this.length},putBit:function(w){const k=Math.floor(this.length/8);this.buffer.length<=k&&this.buffer.push(0),w&&(this.buffer[k]|=128>>>this.length%8),this.length++}},Ae.exports=y},25147:Ae=>{function y(w){if(!w||w<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=w,this.data=new Uint8Array(w*w),this.reservedBit=new Uint8Array(w*w)}y.prototype.set=function(w,k,G,I){const u=w*this.size+k;this.data[u]=G,I&&(this.reservedBit[u]=!0)},y.prototype.get=function(w,k){return this.data[w*this.size+k]},y.prototype.xor=function(w,k,G){this.data[w*this.size+k]^=G},y.prototype.isReserved=function(w,k){return this.reservedBit[w*this.size+k]},Ae.exports=y},277:(Ae,y,w)=>{const k=w(76119),G=w(71239);function I(u){this.mode=G.BYTE,"string"==typeof u&&(u=k(u)),this.data=new Uint8Array(u)}I.getBitsLength=function(h){return 8*h},I.prototype.getLength=function(){return this.data.length},I.prototype.getBitsLength=function(){return I.getBitsLength(this.data.length)},I.prototype.write=function(u){for(let h=0,g=this.data.length;h<g;h++)u.put(this.data[h],8)},Ae.exports=I},87191:(Ae,y,w)=>{const k=w(84505),G=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],I=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];y.getBlocksCount=function(h,g){switch(g){case k.L:return G[4*(h-1)+0];case k.M:return G[4*(h-1)+1];case k.Q:return G[4*(h-1)+2];case k.H:return G[4*(h-1)+3];default:return}},y.getTotalCodewordsCount=function(h,g){switch(g){case k.L:return I[4*(h-1)+0];case k.M:return I[4*(h-1)+1];case k.Q:return I[4*(h-1)+2];case k.H:return I[4*(h-1)+3];default:return}}},84505:(Ae,y)=>{y.L={bit:1},y.M={bit:0},y.Q={bit:3},y.H={bit:2},y.isValid=function(G){return G&&typeof G.bit<"u"&&G.bit>=0&&G.bit<4},y.from=function(G,I){if(y.isValid(G))return G;try{return function w(k){if("string"!=typeof k)throw new Error("Param is not a string");switch(k.toLowerCase()){case"l":case"low":return y.L;case"m":case"medium":return y.M;case"q":case"quartile":return y.Q;case"h":case"high":return y.H;default:throw new Error("Unknown EC Level: "+k)}}(G)}catch{return I}}},95232:(Ae,y,w)=>{const k=w(82562).getSymbolSize;y.getPositions=function(u){const h=k(u);return[[0,0],[h-7,0],[0,h-7]]}},58508:(Ae,y,w)=>{const k=w(82562),u=k.getBCHDigit(1335);y.getEncodedBits=function(g,v){const m=g.bit<<3|v;let f=m<<10;for(;k.getBCHDigit(f)-u>=0;)f^=1335<<k.getBCHDigit(f)-u;return 21522^(m<<10|f)}},61674:(Ae,y)=>{const w=new Uint8Array(512),k=new Uint8Array(256);(function(){let I=1;for(let u=0;u<255;u++)w[u]=I,k[I]=u,I<<=1,256&I&&(I^=285);for(let u=255;u<512;u++)w[u]=w[u-255]})(),y.log=function(I){if(I<1)throw new Error("log("+I+")");return k[I]},y.exp=function(I){return w[I]},y.mul=function(I,u){return 0===I||0===u?0:w[k[I]+k[u]]}},59995:(Ae,y,w)=>{const k=w(71239),G=w(82562);function I(u){this.mode=k.KANJI,this.data=u}I.getBitsLength=function(h){return 13*h},I.prototype.getLength=function(){return this.data.length},I.prototype.getBitsLength=function(){return I.getBitsLength(this.data.length)},I.prototype.write=function(u){let h;for(h=0;h<this.data.length;h++){let g=G.toSJIS(this.data[h]);if(g>=33088&&g<=40956)g-=33088;else{if(!(g>=57408&&g<=60351))throw new Error("Invalid SJIS character: "+this.data[h]+"\nMake sure your charset is UTF-8");g-=49472}g=192*(g>>>8&255)+(255&g),u.put(g,13)}},Ae.exports=I},19023:(Ae,y)=>{y.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function k(G,I,u){switch(G){case y.Patterns.PATTERN000:return(I+u)%2==0;case y.Patterns.PATTERN001:return I%2==0;case y.Patterns.PATTERN010:return u%3==0;case y.Patterns.PATTERN011:return(I+u)%3==0;case y.Patterns.PATTERN100:return(Math.floor(I/2)+Math.floor(u/3))%2==0;case y.Patterns.PATTERN101:return I*u%2+I*u%3==0;case y.Patterns.PATTERN110:return(I*u%2+I*u%3)%2==0;case y.Patterns.PATTERN111:return(I*u%3+(I+u)%2)%2==0;default:throw new Error("bad maskPattern:"+G)}}y.isValid=function(I){return null!=I&&""!==I&&!isNaN(I)&&I>=0&&I<=7},y.from=function(I){return y.isValid(I)?parseInt(I,10):void 0},y.getPenaltyN1=function(I){const u=I.size;let h=0,g=0,v=0,m=null,f=null;for(let _=0;_<u;_++){g=v=0,m=f=null;for(let S=0;S<u;S++){let M=I.get(_,S);M===m?g++:(g>=5&&(h+=g-5+3),m=M,g=1),M=I.get(S,_),M===f?v++:(v>=5&&(h+=v-5+3),f=M,v=1)}g>=5&&(h+=g-5+3),v>=5&&(h+=v-5+3)}return h},y.getPenaltyN2=function(I){const u=I.size;let h=0;for(let g=0;g<u-1;g++)for(let v=0;v<u-1;v++){const m=I.get(g,v)+I.get(g,v+1)+I.get(g+1,v)+I.get(g+1,v+1);(4===m||0===m)&&h++}return 3*h},y.getPenaltyN3=function(I){const u=I.size;let h=0,g=0,v=0;for(let m=0;m<u;m++){g=v=0;for(let f=0;f<u;f++)g=g<<1&2047|I.get(m,f),f>=10&&(1488===g||93===g)&&h++,v=v<<1&2047|I.get(f,m),f>=10&&(1488===v||93===v)&&h++}return 40*h},y.getPenaltyN4=function(I){let u=0;const h=I.data.length;for(let v=0;v<h;v++)u+=I.data[v];return 10*Math.abs(Math.ceil(100*u/h/5)-10)},y.applyMask=function(I,u){const h=u.size;for(let g=0;g<h;g++)for(let v=0;v<h;v++)u.isReserved(v,g)||u.xor(v,g,k(I,v,g))},y.getBestMask=function(I,u){const h=Object.keys(y.Patterns).length;let g=0,v=1/0;for(let m=0;m<h;m++){u(m),y.applyMask(m,I);const f=y.getPenaltyN1(I)+y.getPenaltyN2(I)+y.getPenaltyN3(I)+y.getPenaltyN4(I);y.applyMask(m,I),f<v&&(v=f,g=m)}return g}},71239:(Ae,y,w)=>{const k=w(16161),G=w(42427);y.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},y.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},y.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},y.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},y.MIXED={bit:-1},y.getCharCountIndicator=function(h,g){if(!h.ccBits)throw new Error("Invalid mode: "+h);if(!k.isValid(g))throw new Error("Invalid version: "+g);return g>=1&&g<10?h.ccBits[0]:g<27?h.ccBits[1]:h.ccBits[2]},y.getBestModeForData=function(h){return G.testNumeric(h)?y.NUMERIC:G.testAlphanumeric(h)?y.ALPHANUMERIC:G.testKanji(h)?y.KANJI:y.BYTE},y.toString=function(h){if(h&&h.id)return h.id;throw new Error("Invalid mode")},y.isValid=function(h){return h&&h.bit&&h.ccBits},y.from=function(h,g){if(y.isValid(h))return h;try{return function I(u){if("string"!=typeof u)throw new Error("Param is not a string");switch(u.toLowerCase()){case"numeric":return y.NUMERIC;case"alphanumeric":return y.ALPHANUMERIC;case"kanji":return y.KANJI;case"byte":return y.BYTE;default:throw new Error("Unknown mode: "+u)}}(h)}catch{return g}}},8722:(Ae,y,w)=>{const k=w(71239);function G(I){this.mode=k.NUMERIC,this.data=I.toString()}G.getBitsLength=function(u){return 10*Math.floor(u/3)+(u%3?u%3*3+1:0)},G.prototype.getLength=function(){return this.data.length},G.prototype.getBitsLength=function(){return G.getBitsLength(this.data.length)},G.prototype.write=function(u){let h,g,v;for(h=0;h+3<=this.data.length;h+=3)g=this.data.substr(h,3),v=parseInt(g,10),u.put(v,10);const m=this.data.length-h;m>0&&(g=this.data.substr(h),v=parseInt(g,10),u.put(v,3*m+1))},Ae.exports=G},22376:(Ae,y,w)=>{const k=w(61674);y.mul=function(I,u){const h=new Uint8Array(I.length+u.length-1);for(let g=0;g<I.length;g++)for(let v=0;v<u.length;v++)h[g+v]^=k.mul(I[g],u[v]);return h},y.mod=function(I,u){let h=new Uint8Array(I);for(;h.length-u.length>=0;){const g=h[0];for(let m=0;m<u.length;m++)h[m]^=k.mul(u[m],g);let v=0;for(;v<h.length&&0===h[v];)v++;h=h.slice(v)}return h},y.generateECPolynomial=function(I){let u=new Uint8Array([1]);for(let h=0;h<I;h++)u=y.mul(u,new Uint8Array([1,k.exp(h)]));return u}},86208:(Ae,y,w)=>{const k=w(82562),G=w(84505),I=w(16509),u=w(25147),h=w(65281),g=w(95232),v=w(19023),m=w(87191),f=w(91297),_=w(9467),S=w(58508),M=w(71239),D=w(51799);function F(oe,X,ie){const q=oe.size,se=S.getEncodedBits(X,ie);let ne,Ce;for(ne=0;ne<15;ne++)Ce=1==(se>>ne&1),oe.set(ne<6?ne:ne<8?ne+1:q-15+ne,8,Ce,!0),oe.set(8,ne<8?q-ne-1:ne<9?15-ne-1+1:15-ne-1,Ce,!0);oe.set(q-8,8,1,!0)}function $(oe,X,ie,q){let se;if(Array.isArray(oe))se=D.fromArray(oe);else{if("string"!=typeof oe)throw new Error("Invalid data");{let fe=X;if(!fe){const ee=D.rawSplit(oe);fe=_.getBestVersionForData(ee,ie)}se=D.fromString(oe,fe||40)}}const ne=_.getBestVersionForData(se,ie);if(!ne)throw new Error("The amount of data is too big to be stored in a QR Code");if(X){if(X<ne)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+ne+".\n")}else X=ne;const Ce=function P(oe,X,ie){const q=new I;ie.forEach(function(ue){q.put(ue.mode.bit,4),q.put(ue.getLength(),M.getCharCountIndicator(ue.mode,oe)),ue.write(q)});const Ce=8*(k.getSymbolTotalCodewords(oe)-m.getTotalCodewordsCount(oe,X));for(q.getLengthInBits()+4<=Ce&&q.put(0,4);q.getLengthInBits()%8!=0;)q.putBit(0);const xe=(Ce-q.getLengthInBits())/8;for(let ue=0;ue<xe;ue++)q.put(ue%2?17:236,8);return function Q(oe,X,ie){const q=k.getSymbolTotalCodewords(X),ne=q-m.getTotalCodewordsCount(X,ie),Ce=m.getBlocksCount(X,ie),ue=Ce-q%Ce,fe=Math.floor(q/Ce),ee=Math.floor(ne/Ce),de=ee+1,pe=fe-ee,ce=new f(pe);let ae=0;const ye=new Array(Ce),Me=new Array(Ce);let _e=0;const Fe=new Uint8Array(oe.buffer);for(let Pe=0;Pe<Ce;Pe++){const je=Pe<ue?ee:de;ye[Pe]=Fe.slice(ae,ae+je),Me[Pe]=ce.encode(ye[Pe]),ae+=je,_e=Math.max(_e,je)}const Ue=new Uint8Array(q);let $e,He,Ge=0;for($e=0;$e<_e;$e++)for(He=0;He<Ce;He++)$e<ye[He].length&&(Ue[Ge++]=ye[He][$e]);for($e=0;$e<pe;$e++)for(He=0;He<Ce;He++)Ue[Ge++]=Me[He][$e];return Ue}(q,oe,X)}(X,ie,se),xe=k.getSymbolSize(X),ue=new u(xe);return function R(oe,X){const ie=oe.size,q=g.getPositions(X);for(let se=0;se<q.length;se++){const ne=q[se][0],Ce=q[se][1];for(let xe=-1;xe<=7;xe++)if(!(ne+xe<=-1||ie<=ne+xe))for(let ue=-1;ue<=7;ue++)Ce+ue<=-1||ie<=Ce+ue||oe.set(ne+xe,Ce+ue,xe>=0&&xe<=6&&(0===ue||6===ue)||ue>=0&&ue<=6&&(0===xe||6===xe)||xe>=2&&xe<=4&&ue>=2&&ue<=4,!0)}}(ue,X),function V(oe){const X=oe.size;for(let ie=8;ie<X-8;ie++){const q=ie%2==0;oe.set(ie,6,q,!0),oe.set(6,ie,q,!0)}}(ue),function B(oe,X){const ie=h.getPositions(X);for(let q=0;q<ie.length;q++){const se=ie[q][0],ne=ie[q][1];for(let Ce=-2;Ce<=2;Ce++)for(let xe=-2;xe<=2;xe++)oe.set(se+Ce,ne+xe,-2===Ce||2===Ce||-2===xe||2===xe||0===Ce&&0===xe,!0)}}(ue,X),F(ue,ie,0),X>=7&&function U(oe,X){const ie=oe.size,q=_.getEncodedBits(X);let se,ne,Ce;for(let xe=0;xe<18;xe++)se=Math.floor(xe/3),ne=xe%3+ie-8-3,Ce=1==(q>>xe&1),oe.set(se,ne,Ce,!0),oe.set(ne,se,Ce,!0)}(ue,X),function j(oe,X){const ie=oe.size;let q=-1,se=ie-1,ne=7,Ce=0;for(let xe=ie-1;xe>0;xe-=2)for(6===xe&&xe--;;){for(let ue=0;ue<2;ue++)if(!oe.isReserved(se,xe-ue)){let fe=!1;Ce<X.length&&(fe=1==(X[Ce]>>>ne&1)),oe.set(se,xe-ue,fe),ne--,-1===ne&&(Ce++,ne=7)}if(se+=q,se<0||ie<=se){se-=q,q=-q;break}}}(ue,Ce),isNaN(q)&&(q=v.getBestMask(ue,F.bind(null,ue,ie))),v.applyMask(q,ue),F(ue,ie,q),{modules:ue,version:X,errorCorrectionLevel:ie,maskPattern:q,segments:se}}y.create=function(X,ie){if(typeof X>"u"||""===X)throw new Error("No input text");let se,ne,q=G.M;return typeof ie<"u"&&(q=G.from(ie.errorCorrectionLevel,G.M),se=_.from(ie.version),ne=v.from(ie.maskPattern),ie.toSJISFunc&&k.setToSJISFunction(ie.toSJISFunc)),$(X,se,q,ne)}},91297:(Ae,y,w)=>{const k=w(22376);function G(I){this.genPoly=void 0,this.degree=I,this.degree&&this.initialize(this.degree)}G.prototype.initialize=function(u){this.degree=u,this.genPoly=k.generateECPolynomial(this.degree)},G.prototype.encode=function(u){if(!this.genPoly)throw new Error("Encoder not initialized");const h=new Uint8Array(u.length+this.degree);h.set(u);const g=k.mod(h,this.genPoly),v=this.degree-g.length;if(v>0){const m=new Uint8Array(this.degree);return m.set(g,v),m}return g},Ae.exports=G},42427:(Ae,y)=>{const w="[0-9]+";let G="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";G=G.replace(/u/g,"\\u");const I="(?:(?![A-Z0-9 $%*+\\-./:]|"+G+")(?:.|[\r\n]))+";y.KANJI=new RegExp(G,"g"),y.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),y.BYTE=new RegExp(I,"g"),y.NUMERIC=new RegExp(w,"g"),y.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const u=new RegExp("^"+G+"$"),h=new RegExp("^"+w+"$"),g=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");y.testKanji=function(m){return u.test(m)},y.testNumeric=function(m){return h.test(m)},y.testAlphanumeric=function(m){return g.test(m)}},51799:(Ae,y,w)=>{const k=w(71239),G=w(8722),I=w(30120),u=w(277),h=w(59995),g=w(42427),v=w(82562),m=w(87206);function f(U){return unescape(encodeURIComponent(U)).length}function _(U,F,j){const P=[];let Q;for(;null!==(Q=U.exec(j));)P.push({data:Q[0],index:Q.index,mode:F,length:Q[0].length});return P}function S(U){const F=_(g.NUMERIC,k.NUMERIC,U),j=_(g.ALPHANUMERIC,k.ALPHANUMERIC,U);let P,Q;return v.isKanjiModeEnabled()?(P=_(g.BYTE,k.BYTE,U),Q=_(g.KANJI,k.KANJI,U)):(P=_(g.BYTE_KANJI,k.BYTE,U),Q=[]),F.concat(j,P,Q).sort(function(oe,X){return oe.index-X.index}).map(function(oe){return{data:oe.data,mode:oe.mode,length:oe.length}})}function M(U,F){switch(F){case k.NUMERIC:return G.getBitsLength(U);case k.ALPHANUMERIC:return I.getBitsLength(U);case k.KANJI:return h.getBitsLength(U);case k.BYTE:return u.getBitsLength(U)}}function B(U,F){let j;const P=k.getBestModeForData(U);if(j=k.from(F,P),j!==k.BYTE&&j.bit<P.bit)throw new Error('"'+U+'" cannot be encoded with mode '+k.toString(j)+".\n Suggested mode is: "+k.toString(P));switch(j===k.KANJI&&!v.isKanjiModeEnabled()&&(j=k.BYTE),j){case k.NUMERIC:return new G(U);case k.ALPHANUMERIC:return new I(U);case k.KANJI:return new h(U);case k.BYTE:return new u(U)}}y.fromArray=function(F){return F.reduce(function(j,P){return"string"==typeof P?j.push(B(P,null)):P.data&&j.push(B(P.data,P.mode)),j},[])},y.fromString=function(F,j){const Q=function R(U){const F=[];for(let j=0;j<U.length;j++){const P=U[j];switch(P.mode){case k.NUMERIC:F.push([P,{data:P.data,mode:k.ALPHANUMERIC,length:P.length},{data:P.data,mode:k.BYTE,length:P.length}]);break;case k.ALPHANUMERIC:F.push([P,{data:P.data,mode:k.BYTE,length:P.length}]);break;case k.KANJI:F.push([P,{data:P.data,mode:k.BYTE,length:f(P.data)}]);break;case k.BYTE:F.push([{data:P.data,mode:k.BYTE,length:f(P.data)}])}}return F}(S(F,v.isKanjiModeEnabled())),$=function V(U,F){const j={},P={start:{}};let Q=["start"];for(let $=0;$<U.length;$++){const oe=U[$],X=[];for(let ie=0;ie<oe.length;ie++){const q=oe[ie],se=""+$+ie;X.push(se),j[se]={node:q,lastCount:0},P[se]={};for(let ne=0;ne<Q.length;ne++){const Ce=Q[ne];j[Ce]&&j[Ce].node.mode===q.mode?(P[Ce][se]=M(j[Ce].lastCount+q.length,q.mode)-M(j[Ce].lastCount,q.mode),j[Ce].lastCount+=q.length):(j[Ce]&&(j[Ce].lastCount=q.length),P[Ce][se]=M(q.length,q.mode)+4+k.getCharCountIndicator(q.mode,F))}}Q=X}for(let $=0;$<Q.length;$++)P[Q[$]].end=0;return{map:P,table:j}}(Q,j),oe=m.find_path($.map,"start","end"),X=[];for(let ie=1;ie<oe.length-1;ie++)X.push($.table[oe[ie]].node);return y.fromArray(function D(U){return U.reduce(function(F,j){const P=F.length-1>=0?F[F.length-1]:null;return P&&P.mode===j.mode?(F[F.length-1].data+=j.data,F):(F.push(j),F)},[])}(X))},y.rawSplit=function(F){return y.fromArray(S(F,v.isKanjiModeEnabled()))}},82562:(Ae,y)=>{let w;const k=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];y.getSymbolSize=function(I){if(!I)throw new Error('"version" cannot be null or undefined');if(I<1||I>40)throw new Error('"version" should be in range from 1 to 40');return 4*I+17},y.getSymbolTotalCodewords=function(I){return k[I]},y.getBCHDigit=function(G){let I=0;for(;0!==G;)I++,G>>>=1;return I},y.setToSJISFunction=function(I){if("function"!=typeof I)throw new Error('"toSJISFunc" is not a valid function.');w=I},y.isKanjiModeEnabled=function(){return typeof w<"u"},y.toSJIS=function(I){return w(I)}},16161:(Ae,y)=>{y.isValid=function(k){return!isNaN(k)&&k>=1&&k<=40}},9467:(Ae,y,w)=>{const k=w(82562),G=w(87191),I=w(84505),u=w(71239),h=w(16161),v=k.getBCHDigit(7973);function f(M,D){return u.getCharCountIndicator(M,D)+4}function _(M,D){let R=0;return M.forEach(function(V){const B=f(V.mode,D);R+=B+V.getBitsLength()}),R}y.from=function(D,R){return h.isValid(D)?parseInt(D,10):R},y.getCapacity=function(D,R,V){if(!h.isValid(D))throw new Error("Invalid QR Code version");typeof V>"u"&&(V=u.BYTE);const F=8*(k.getSymbolTotalCodewords(D)-G.getTotalCodewordsCount(D,R));if(V===u.MIXED)return F;const j=F-f(V,D);switch(V){case u.NUMERIC:return Math.floor(j/10*3);case u.ALPHANUMERIC:return Math.floor(j/11*2);case u.KANJI:return Math.floor(j/13);default:return Math.floor(j/8)}},y.getBestVersionForData=function(D,R){let V;const B=I.from(R,I.M);if(Array.isArray(D)){if(D.length>1)return function S(M,D){for(let R=1;R<=40;R++)if(_(M,R)<=y.getCapacity(R,D,u.MIXED))return R}(D,B);if(0===D.length)return 1;V=D[0]}else V=D;return function m(M,D,R){for(let V=1;V<=40;V++)if(D<=y.getCapacity(V,R,M))return V}(V.mode,V.getLength(),B)},y.getEncodedBits=function(D){if(!h.isValid(D)||D<7)throw new Error("Invalid QR Code version");let R=D<<12;for(;k.getBCHDigit(R)-v>=0;)R^=7973<<k.getBCHDigit(R)-v;return D<<12|R}},26422:(Ae,y,w)=>{const k=w(11101);y.render=function(h,g,v){let m=v,f=g;typeof m>"u"&&(!g||!g.getContext)&&(m=g,g=void 0),g||(f=function I(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),m=k.getOptions(m);const _=k.getImageWidth(h.modules.size,m),S=f.getContext("2d"),M=S.createImageData(_,_);return k.qrToImageData(M.data,h,m),function G(u,h,g){u.clearRect(0,0,h.width,h.height),h.style||(h.style={}),h.height=g,h.width=g,h.style.height=g+"px",h.style.width=g+"px"}(S,f,_),S.putImageData(M,0,0),f},y.renderToDataURL=function(h,g,v){let m=v;return typeof m>"u"&&(!g||!g.getContext)&&(m=g,g=void 0),m||(m={}),y.render(h,g,m).toDataURL(m.type||"image/png",(m.rendererOpts||{}).quality)}},77772:(Ae,y,w)=>{const k=w(11101);function G(h,g){const v=h.a/255,m=g+'="'+h.hex+'"';return v<1?m+" "+g+'-opacity="'+v.toFixed(2).slice(1)+'"':m}function I(h,g,v){let m=h+g;return typeof v<"u"&&(m+=" "+v),m}y.render=function(g,v,m){const f=k.getOptions(v),_=g.modules.size,S=g.modules.data,M=_+2*f.margin,D=f.color.light.a?"<path "+G(f.color.light,"fill")+' d="M0 0h'+M+"v"+M+'H0z"/>':"",R="<path "+G(f.color.dark,"stroke")+' d="'+function u(h,g,v){let m="",f=0,_=!1,S=0;for(let M=0;M<h.length;M++){const D=Math.floor(M%g),R=Math.floor(M/g);!D&&!_&&(_=!0),h[M]?(S++,M>0&&D>0&&h[M-1]||(m+=_?I("M",D+v,.5+R+v):I("m",f,0),f=0,_=!1),D+1<g&&h[M+1]||(m+=I("h",S),S=0)):f++}return m}(S,_,f.margin)+'"/>',U='<svg xmlns="http://www.w3.org/2000/svg" '+(f.width?'width="'+f.width+'" height="'+f.width+'" ':"")+'viewBox="0 0 '+M+" "+M+'" shape-rendering="crispEdges">'+D+R+"</svg>\n";return"function"==typeof m&&m(null,U),U}},11101:(Ae,y)=>{function w(k){if("number"==typeof k&&(k=k.toString()),"string"!=typeof k)throw new Error("Color should be defined as hex string");let G=k.slice().replace("#","").split("");if(G.length<3||5===G.length||G.length>8)throw new Error("Invalid hex color: "+k);(3===G.length||4===G.length)&&(G=Array.prototype.concat.apply([],G.map(function(u){return[u,u]}))),6===G.length&&G.push("F","F");const I=parseInt(G.join(""),16);return{r:I>>24&255,g:I>>16&255,b:I>>8&255,a:255&I,hex:"#"+G.slice(0,6).join("")}}y.getOptions=function(G){G||(G={}),G.color||(G.color={});const u=G.width&&G.width>=21?G.width:void 0;return{width:u,scale:u?4:G.scale||4,margin:typeof G.margin>"u"||null===G.margin||G.margin<0?4:G.margin,color:{dark:w(G.color.dark||"#000000ff"),light:w(G.color.light||"#ffffffff")},type:G.type,rendererOpts:G.rendererOpts||{}}},y.getScale=function(G,I){return I.width&&I.width>=G+2*I.margin?I.width/(G+2*I.margin):I.scale},y.getImageWidth=function(G,I){const u=y.getScale(G,I);return Math.floor((G+2*I.margin)*u)},y.qrToImageData=function(G,I,u){const h=I.modules.size,g=I.modules.data,v=y.getScale(h,u),m=Math.floor((h+2*u.margin)*v),f=u.margin*v,_=[u.color.light,u.color.dark];for(let S=0;S<m;S++)for(let M=0;M<m;M++){let D=4*(S*m+M),R=u.color.light;S>=f&&M>=f&&S<m-f&&M<m-f&&(R=_[g[Math.floor((S-f)/v)*h+Math.floor((M-f)/v)]?1:0]),G[D++]=R.r,G[D++]=R.g,G[D++]=R.b,G[D]=R.a}}},7861:(Ae,y,w)=>{"use strict";Ae.exports=G,Ae.exports.default=G;var k=w(72136);function G(U,F){if(!(this instanceof G))return new G(U,F);this._maxEntries=Math.max(4,U||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),F&&this._initFormat(F),this.clear()}function I(U,F,j){if(!j)return F.indexOf(U);for(var P=0;P<F.length;P++)if(j(U,F[P]))return P;return-1}function u(U,F){h(U,0,U.children.length,F,U)}function h(U,F,j,P,Q){Q||(Q=V(null)),Q.minX=1/0,Q.minY=1/0,Q.maxX=-1/0,Q.maxY=-1/0;for(var oe,$=F;$<j;$++)oe=U.children[$],g(Q,U.leaf?P(oe):oe);return Q}function g(U,F){return U.minX=Math.min(U.minX,F.minX),U.minY=Math.min(U.minY,F.minY),U.maxX=Math.max(U.maxX,F.maxX),U.maxY=Math.max(U.maxY,F.maxY),U}function v(U,F){return U.minX-F.minX}function m(U,F){return U.minY-F.minY}function f(U){return(U.maxX-U.minX)*(U.maxY-U.minY)}function _(U){return U.maxX-U.minX+(U.maxY-U.minY)}function S(U,F){return(Math.max(F.maxX,U.maxX)-Math.min(F.minX,U.minX))*(Math.max(F.maxY,U.maxY)-Math.min(F.minY,U.minY))}function M(U,F){var j=Math.max(U.minX,F.minX),P=Math.max(U.minY,F.minY),Q=Math.min(U.maxX,F.maxX),$=Math.min(U.maxY,F.maxY);return Math.max(0,Q-j)*Math.max(0,$-P)}function D(U,F){return U.minX<=F.minX&&U.minY<=F.minY&&F.maxX<=U.maxX&&F.maxY<=U.maxY}function R(U,F){return F.minX<=U.maxX&&F.minY<=U.maxY&&F.maxX>=U.minX&&F.maxY>=U.minY}function V(U){return{children:U,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function B(U,F,j,P,Q){for(var oe,$=[F,j];$.length;)!((j=$.pop())-(F=$.pop())<=P)&&(oe=F+Math.ceil((j-F)/P/2)*P,k(U,oe,F,j,Q),$.push(F,oe,oe,j))}G.prototype={all:function(){return this._all(this.data,[])},search:function(U){var F=this.data,j=[],P=this.toBBox;if(!R(U,F))return j;for(var $,oe,X,ie,Q=[];F;){for($=0,oe=F.children.length;$<oe;$++)X=F.children[$],R(U,ie=F.leaf?P(X):X)&&(F.leaf?j.push(X):D(U,ie)?this._all(X,j):Q.push(X));F=Q.pop()}return j},collides:function(U){var F=this.data,j=this.toBBox;if(!R(U,F))return!1;for(var Q,$,oe,X,P=[];F;){for(Q=0,$=F.children.length;Q<$;Q++)if(oe=F.children[Q],R(U,X=F.leaf?j(oe):oe)){if(F.leaf||D(U,X))return!0;P.push(oe)}F=P.pop()}return!1},load:function(U){if(!U||!U.length)return this;if(U.length<this._minEntries){for(var F=0,j=U.length;F<j;F++)this.insert(U[F]);return this}var P=this._build(U.slice(),0,U.length-1,0);if(this.data.children.length)if(this.data.height===P.height)this._splitRoot(this.data,P);else{if(this.data.height<P.height){var Q=this.data;this.data=P,P=Q}this._insert(P,this.data.height-P.height-1,!0)}else this.data=P;return this},insert:function(U){return U&&this._insert(U,this.data.height-1),this},clear:function(){return this.data=V([]),this},remove:function(U,F){if(!U)return this;for(var oe,X,ie,q,j=this.data,P=this.toBBox(U),Q=[],$=[];j||Q.length;){if(j||(j=Q.pop(),X=Q[Q.length-1],oe=$.pop(),q=!0),j.leaf&&-1!==(ie=I(U,j.children,F)))return j.children.splice(ie,1),Q.push(j),this._condense(Q),this;q||j.leaf||!D(j,P)?X?(oe++,j=X.children[oe],q=!1):j=null:(Q.push(j),$.push(oe),oe=0,X=j,j=j.children[0])}return this},toBBox:function(U){return U},compareMinX:v,compareMinY:m,toJSON:function(){return this.data},fromJSON:function(U){return this.data=U,this},_all:function(U,F){for(var j=[];U;)U.leaf?F.push.apply(F,U.children):j.push.apply(j,U.children),U=j.pop();return F},_build:function(U,F,j,P){var oe,Q=j-F+1,$=this._maxEntries;if(Q<=$)return u(oe=V(U.slice(F,j+1)),this.toBBox),oe;P||(P=Math.ceil(Math.log(Q)/Math.log($)),$=Math.ceil(Q/Math.pow($,P-1))),(oe=V([])).leaf=!1,oe.height=P;var q,se,ne,Ce,X=Math.ceil(Q/$),ie=X*Math.ceil(Math.sqrt($));for(B(U,F,j,ie,this.compareMinX),q=F;q<=j;q+=ie)for(B(U,q,ne=Math.min(q+ie-1,j),X,this.compareMinY),se=q;se<=ne;se+=X)Ce=Math.min(se+X-1,ne),oe.children.push(this._build(U,se,Ce,P-1));return u(oe,this.toBBox),oe},_chooseSubtree:function(U,F,j,P){for(var Q,$,oe,X,ie,q,se,ne;P.push(F),!F.leaf&&P.length-1!==j;){for(se=ne=1/0,Q=0,$=F.children.length;Q<$;Q++)ie=f(oe=F.children[Q]),(q=S(U,oe)-ie)<ne?(ne=q,se=ie<se?ie:se,X=oe):q===ne&&ie<se&&(se=ie,X=oe);F=X||F.children[0]}return F},_insert:function(U,F,j){var Q=j?U:(0,this.toBBox)(U),$=[],oe=this._chooseSubtree(Q,this.data,F,$);for(oe.children.push(U),g(oe,Q);F>=0&&$[F].children.length>this._maxEntries;)this._split($,F),F--;this._adjustParentBBoxes(Q,$,F)},_split:function(U,F){var j=U[F],P=j.children.length,Q=this._minEntries;this._chooseSplitAxis(j,Q,P);var $=this._chooseSplitIndex(j,Q,P),oe=V(j.children.splice($,j.children.length-$));oe.height=j.height,oe.leaf=j.leaf,u(j,this.toBBox),u(oe,this.toBBox),F?U[F-1].children.push(oe):this._splitRoot(j,oe)},_splitRoot:function(U,F){this.data=V([U,F]),this.data.height=U.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(U,F,j){var P,Q,$,oe,X,ie,q,se;for(ie=q=1/0,P=F;P<=j-F;P++)oe=M(Q=h(U,0,P,this.toBBox),$=h(U,P,j,this.toBBox)),X=f(Q)+f($),oe<ie?(ie=oe,se=P,q=X<q?X:q):oe===ie&&X<q&&(q=X,se=P);return se},_chooseSplitAxis:function(U,F,j){var P=U.leaf?this.compareMinX:v,Q=U.leaf?this.compareMinY:m;this._allDistMargin(U,F,j,P)<this._allDistMargin(U,F,j,Q)&&U.children.sort(P)},_allDistMargin:function(U,F,j,P){U.children.sort(P);var ie,q,Q=this.toBBox,$=h(U,0,F,Q),oe=h(U,j-F,j,Q),X=_($)+_(oe);for(ie=F;ie<j-F;ie++)q=U.children[ie],g($,U.leaf?Q(q):q),X+=_($);for(ie=j-F-1;ie>=F;ie--)q=U.children[ie],g(oe,U.leaf?Q(q):q),X+=_(oe);return X},_adjustParentBBoxes:function(U,F,j){for(var P=j;P>=0;P--)g(F[P],U)},_condense:function(U){for(var j,F=U.length-1;F>=0;F--)0===U[F].children.length?F>0?(j=U[F-1].children).splice(j.indexOf(U[F]),1):this.clear():u(U[F],this.toBBox)},_initFormat:function(U){var F=["return a"," - b",";"];this.compareMinX=new Function("a","b",F.join(U[0])),this.compareMinY=new Function("a","b",F.join(U[1])),this.toBBox=new Function("a","return {minX: a"+U[0]+", minY: a"+U[1]+", maxX: a"+U[2]+", maxY: a"+U[3]+"};")}}},72136:function(Ae){Ae.exports=function(){"use strict";function w(I,u,h,g,v){for(;g>h;){if(g-h>600){var m=g-h+1,f=u-h+1,_=Math.log(m),S=.5*Math.exp(2*_/3),M=.5*Math.sqrt(_*S*(m-S)/m)*(f-m/2<0?-1:1);w(I,u,Math.max(h,Math.floor(u-f*S/m+M)),Math.min(g,Math.floor(u+(m-f)*S/m+M)),v)}var V=I[u],B=h,U=g;for(k(I,h,u),v(I[g],V)>0&&k(I,h,g);B<U;){for(k(I,B,U),B++,U--;v(I[B],V)<0;)B++;for(;v(I[U],V)>0;)U--}0===v(I[h],V)?k(I,h,U):k(I,++U,g),U<=u&&(h=U+1),u<=U&&(g=U-1)}}function k(I,u,h){var g=I[u];I[u]=I[h],I[h]=g}function G(I,u){return I<u?-1:I>u?1:0}return function y(I,u,h,g,v){w(I,u,h||0,g||I.length-1,v||G)}}()},33817:(Ae,y,w)=>{"use strict";var k=w(31552).functionsHaveConfigurableNames(),G=Object,I=TypeError;Ae.exports=function(){if(null!=this&&this!==G(this))throw new I("RegExp.prototype.flags getter called on non-object");var h="";return this.hasIndices&&(h+="d"),this.global&&(h+="g"),this.ignoreCase&&(h+="i"),this.multiline&&(h+="m"),this.dotAll&&(h+="s"),this.unicode&&(h+="u"),this.unicodeSets&&(h+="v"),this.sticky&&(h+="y"),h},k&&Object.defineProperty&&Object.defineProperty(Ae.exports,"name",{value:"get flags"})},1139:(Ae,y,w)=>{"use strict";var k=w(21648),G=w(35436),I=w(33817),u=w(84861),h=w(76002),g=G(u());k(g,{getPolyfill:u,implementation:I,shim:h}),Ae.exports=g},84861:(Ae,y,w)=>{"use strict";var k=w(33817),G=w(21648).supportsDescriptors,I=Object.getOwnPropertyDescriptor;Ae.exports=function(){if(G&&"gim"===/a/gim.flags){var h=I(RegExp.prototype,"flags");if(h&&"function"==typeof h.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var g="",v={};if(Object.defineProperty(v,"hasIndices",{get:function(){g+="d"}}),Object.defineProperty(v,"sticky",{get:function(){g+="y"}}),"dy"===g)return h.get}}return k}},76002:(Ae,y,w)=>{"use strict";var k=w(21648).supportsDescriptors,G=w(84861),I=Object.getOwnPropertyDescriptor,u=Object.defineProperty,h=TypeError,g=Object.getPrototypeOf,v=/a/;Ae.exports=function(){if(!k||!g)throw new h("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var f=G(),_=g(v),S=I(_,"flags");return(!S||S.get!==f)&&u(_,"flags",{configurable:!0,enumerable:!1,get:f}),f}},62354:Ae=>{var y={\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u1ea4:"A",\u1eae:"A",\u1eb2:"A",\u1eb4:"A",\u1eb6:"A",\u00c6:"AE",\u1ea6:"A",\u1eb0:"A",\u0202:"A",\u1ea2:"A",\u1ea0:"A",\u1ea8:"A",\u1eaa:"A",\u1eac:"A",\u00c7:"C",\u1e08:"C",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u1ebe:"E",\u1e16:"E",\u1ec0:"E",\u1e14:"E",\u1e1c:"E",\u0206:"E",\u1eba:"E",\u1ebc:"E",\u1eb8:"E",\u1ec2:"E",\u1ec4:"E",\u1ec6:"E",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u1e2e:"I",\u020a:"I",\u1ec8:"I",\u1eca:"I",\u00d0:"D",\u00d1:"N",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u1ed0:"O",\u1e4c:"O",\u1e52:"O",\u020e:"O",\u1ece:"O",\u1ecc:"O",\u1ed4:"O",\u1ed6:"O",\u1ed8:"O",\u1edc:"O",\u1ede:"O",\u1ee0:"O",\u1eda:"O",\u1ee2:"O",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u1ee6:"U",\u1ee4:"U",\u1eec:"U",\u1eee:"U",\u1ef0:"U",\u00dd:"Y",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u1ea5:"a",\u1eaf:"a",\u1eb3:"a",\u1eb5:"a",\u1eb7:"a",\u00e6:"ae",\u1ea7:"a",\u1eb1:"a",\u0203:"a",\u1ea3:"a",\u1ea1:"a",\u1ea9:"a",\u1eab:"a",\u1ead:"a",\u00e7:"c",\u1e09:"c",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u1ebf:"e",\u1e17:"e",\u1ec1:"e",\u1e15:"e",\u1e1d:"e",\u0207:"e",\u1ebb:"e",\u1ebd:"e",\u1eb9:"e",\u1ec3:"e",\u1ec5:"e",\u1ec7:"e",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u1e2f:"i",\u020b:"i",\u1ec9:"i",\u1ecb:"i",\u00f0:"d",\u00f1:"n",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u1ed1:"o",\u1e4d:"o",\u1e53:"o",\u020f:"o",\u1ecf:"o",\u1ecd:"o",\u1ed5:"o",\u1ed7:"o",\u1ed9:"o",\u1edd:"o",\u1edf:"o",\u1ee1:"o",\u1edb:"o",\u1ee3:"o",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u1ee7:"u",\u1ee5:"u",\u1eed:"u",\u1eef:"u",\u1ef1:"u",\u00fd:"y",\u00ff:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010a:"C",\u010b:"c",\u010c:"C",\u010d:"c",C\u0306:"C",c\u0306:"c",\u010e:"D",\u010f:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011a:"E",\u011b:"e",\u011c:"G",\u01f4:"G",\u011d:"g",\u01f5:"g",\u011e:"G",\u011f:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u1e2a:"H",\u1e2b:"h",\u0128:"I",\u0129:"i",\u012a:"I",\u012b:"i",\u012c:"I",\u012d:"i",\u012e:"I",\u012f:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u1e30:"K",\u1e31:"k",K\u0306:"K",k\u0306:"k",\u0139:"L",\u013a:"l",\u013b:"L",\u013c:"l",\u013d:"L",\u013e:"l",\u013f:"L",\u0140:"l",\u0141:"l",\u0142:"l",\u1e3e:"M",\u1e3f:"m",M\u0306:"M",m\u0306:"m",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"n",N\u0306:"N",n\u0306:"n",\u014c:"O",\u014d:"o",\u014e:"O",\u014f:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",P\u0306:"P",p\u0306:"p",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",R\u0306:"R",r\u0306:"r",\u0212:"R",\u0213:"r",\u015a:"S",\u015b:"s",\u015c:"S",\u015d:"s",\u015e:"S",\u0218:"S",\u0219:"s",\u015f:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u021b:"t",\u021a:"T",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",T\u0306:"T",t\u0306:"t",\u0168:"U",\u0169:"u",\u016a:"U",\u016b:"u",\u016c:"U",\u016d:"u",\u016e:"U",\u016f:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0216:"U",\u0217:"u",V\u0306:"V",v\u0306:"v",\u0174:"W",\u0175:"w",\u1e82:"W",\u1e83:"w",X\u0306:"X",x\u0306:"x",\u0176:"Y",\u0177:"y",\u0178:"Y",Y\u0306:"Y",y\u0306:"y",\u0179:"Z",\u017a:"z",\u017b:"Z",\u017c:"z",\u017d:"Z",\u017e:"z",\u017f:"s",\u0192:"f",\u01a0:"O",\u01a1:"o",\u01af:"U",\u01b0:"u",\u01cd:"A",\u01ce:"a",\u01cf:"I",\u01d0:"i",\u01d1:"O",\u01d2:"o",\u01d3:"U",\u01d4:"u",\u01d5:"U",\u01d6:"u",\u01d7:"U",\u01d8:"u",\u01d9:"U",\u01da:"u",\u01db:"U",\u01dc:"u",\u1ee8:"U",\u1ee9:"u",\u1e78:"U",\u1e79:"u",\u01fa:"A",\u01fb:"a",\u01fc:"AE",\u01fd:"ae",\u01fe:"O",\u01ff:"o",\u00de:"TH",\u00fe:"th",\u1e54:"P",\u1e55:"p",\u1e64:"S",\u1e65:"s",X\u0301:"X",x\u0301:"x",\u0403:"\u0413",\u0453:"\u0433",\u040c:"\u041a",\u045c:"\u043a",A\u030b:"A",a\u030b:"a",E\u030b:"E",e\u030b:"e",I\u030b:"I",i\u030b:"i",\u01f8:"N",\u01f9:"n",\u1ed2:"O",\u1ed3:"o",\u1e50:"O",\u1e51:"o",\u1eea:"U",\u1eeb:"u",\u1e80:"W",\u1e81:"w",\u1ef2:"Y",\u1ef3:"y",\u0200:"A",\u0201:"a",\u0204:"E",\u0205:"e",\u0208:"I",\u0209:"i",\u020c:"O",\u020d:"o",\u0210:"R",\u0211:"r",\u0214:"U",\u0215:"u",B\u030c:"B",b\u030c:"b",\u010c\u0323:"C",\u010d\u0323:"c",\u00ca\u030c:"E",\u00ea\u030c:"e",F\u030c:"F",f\u030c:"f",\u01e6:"G",\u01e7:"g",\u021e:"H",\u021f:"h",J\u030c:"J",\u01f0:"j",\u01e8:"K",\u01e9:"k",M\u030c:"M",m\u030c:"m",P\u030c:"P",p\u030c:"p",Q\u030c:"Q",q\u030c:"q",\u0158\u0329:"R",\u0159\u0329:"r",\u1e66:"S",\u1e67:"s",V\u030c:"V",v\u030c:"v",W\u030c:"W",w\u030c:"w",X\u030c:"X",x\u030c:"x",Y\u030c:"Y",y\u030c:"y",A\u0327:"A",a\u0327:"a",B\u0327:"B",b\u0327:"b",\u1e10:"D",\u1e11:"d",\u0228:"E",\u0229:"e",\u0190\u0327:"E",\u025b\u0327:"e",\u1e28:"H",\u1e29:"h",I\u0327:"I",i\u0327:"i",\u0197\u0327:"I",\u0268\u0327:"i",M\u0327:"M",m\u0327:"m",O\u0327:"O",o\u0327:"o",Q\u0327:"Q",q\u0327:"q",U\u0327:"U",u\u0327:"u",X\u0327:"X",x\u0327:"x",Z\u0327:"Z",z\u0327:"z",\u0439:"\u0438",\u0419:"\u0418",\u0451:"\u0435",\u0401:"\u0415"},w=Object.keys(y).join("|"),k=new RegExp(w,"g"),G=new RegExp(w,"");function I(g){return y[g]}var u=function(g){return g.replace(k,I)};Ae.exports=u,Ae.exports.has=function(g){return!!g.match(G)},Ae.exports.remove=u},26138:function(Ae,y){!function(w){"use strict";function I(D,R,V,B,U){let F,j,P,Q,$=R[0],oe=B[0],X=0,ie=0;oe>$==oe>-$?(F=$,$=R[++X]):(F=oe,oe=B[++ie]);let q=0;if(X<D&&ie<V)for(oe>$==oe>-$?(P=F-((j=$+F)-$),$=R[++X]):(P=F-((j=oe+F)-oe),oe=B[++ie]),F=j,0!==P&&(U[q++]=P);X<D&&ie<V;)oe>$==oe>-$?(P=F-((j=F+$)-(Q=j-F))+($-Q),$=R[++X]):(P=F-((j=F+oe)-(Q=j-F))+(oe-Q),oe=B[++ie]),F=j,0!==P&&(U[q++]=P);for(;X<D;)P=F-((j=F+$)-(Q=j-F))+($-Q),$=R[++X],F=j,0!==P&&(U[q++]=P);for(;ie<V;)P=F-((j=F+oe)-(Q=j-F))+(oe-Q),oe=B[++ie],F=j,0!==P&&(U[q++]=P);return 0===F&&0!==q||(U[q++]=F),q}function u(D){return new Float64Array(D)}const m=u(4),f=u(8),_=u(12),S=u(16),M=u(4);w.orient2d=function(D,R,V,B,U,F){const j=(R-F)*(V-U),P=(D-U)*(B-F),Q=j-P;if(0===j||0===P||j>0!=P>0)return Q;const $=Math.abs(j+P);return Math.abs(Q)>=33306690738754716e-32*$?Q:-function(oe,X,ie,q,se,ne,Ce){let xe,ue,fe,ee,de,pe,ce,ae,ye,Me,_e,Fe,Ue,Ge,$e,He,Pe,je;const ht=oe-se,Re=ie-se,tt=X-ne,it=q-ne;de=($e=(ae=ht-(ce=(pe=134217729*ht)-(pe-ht)))*(Me=it-(ye=(pe=134217729*it)-(pe-it)))-((Ge=ht*it)-ce*ye-ae*ye-ce*Me))-(_e=$e-(Pe=(ae=tt-(ce=(pe=134217729*tt)-(pe-tt)))*(Me=Re-(ye=(pe=134217729*Re)-(pe-Re)))-((He=tt*Re)-ce*ye-ae*ye-ce*Me))),m[0]=$e-(_e+de)+(de-Pe),de=(Ue=Ge-((Fe=Ge+_e)-(de=Fe-Ge))+(_e-de))-(_e=Ue-He),m[1]=Ue-(_e+de)+(de-He),de=(je=Fe+_e)-Fe,m[2]=Fe-(je-de)+(_e-de),m[3]=je;let qe=function(xt,gt){let on=gt[0];for(let Qt=1;Qt<4;Qt++)on+=gt[Qt];return on}(0,m),Oe=22204460492503146e-32*Ce;if(qe>=Oe||-qe>=Oe||(xe=oe-(ht+(de=oe-ht))+(de-se),fe=ie-(Re+(de=ie-Re))+(de-se),ue=X-(tt+(de=X-tt))+(de-ne),ee=q-(it+(de=q-it))+(de-ne),0===xe&&0===ue&&0===fe&&0===ee)||(Oe=11093356479670487e-47*Ce+33306690738754706e-32*Math.abs(qe),(qe+=ht*ee+it*xe-(tt*fe+Re*ue))>=Oe||-qe>=Oe))return qe;de=($e=(ae=xe-(ce=(pe=134217729*xe)-(pe-xe)))*(Me=it-(ye=(pe=134217729*it)-(pe-it)))-((Ge=xe*it)-ce*ye-ae*ye-ce*Me))-(_e=$e-(Pe=(ae=ue-(ce=(pe=134217729*ue)-(pe-ue)))*(Me=Re-(ye=(pe=134217729*Re)-(pe-Re)))-((He=ue*Re)-ce*ye-ae*ye-ce*Me))),M[0]=$e-(_e+de)+(de-Pe),de=(Ue=Ge-((Fe=Ge+_e)-(de=Fe-Ge))+(_e-de))-(_e=Ue-He),M[1]=Ue-(_e+de)+(de-He),de=(je=Fe+_e)-Fe,M[2]=Fe-(je-de)+(_e-de),M[3]=je;const Te=I(4,m,4,M,f);de=($e=(ae=ht-(ce=(pe=134217729*ht)-(pe-ht)))*(Me=ee-(ye=(pe=134217729*ee)-(pe-ee)))-((Ge=ht*ee)-ce*ye-ae*ye-ce*Me))-(_e=$e-(Pe=(ae=tt-(ce=(pe=134217729*tt)-(pe-tt)))*(Me=fe-(ye=(pe=134217729*fe)-(pe-fe)))-((He=tt*fe)-ce*ye-ae*ye-ce*Me))),M[0]=$e-(_e+de)+(de-Pe),de=(Ue=Ge-((Fe=Ge+_e)-(de=Fe-Ge))+(_e-de))-(_e=Ue-He),M[1]=Ue-(_e+de)+(de-He),de=(je=Fe+_e)-Fe,M[2]=Fe-(je-de)+(_e-de),M[3]=je;const Ne=I(Te,f,4,M,_);de=($e=(ae=xe-(ce=(pe=134217729*xe)-(pe-xe)))*(Me=ee-(ye=(pe=134217729*ee)-(pe-ee)))-((Ge=xe*ee)-ce*ye-ae*ye-ce*Me))-(_e=$e-(Pe=(ae=ue-(ce=(pe=134217729*ue)-(pe-ue)))*(Me=fe-(ye=(pe=134217729*fe)-(pe-fe)))-((He=ue*fe)-ce*ye-ae*ye-ce*Me))),M[0]=$e-(_e+de)+(de-Pe),de=(Ue=Ge-((Fe=Ge+_e)-(de=Fe-Ge))+(_e-de))-(_e=Ue-He),M[1]=Ue-(_e+de)+(de-He),de=(je=Fe+_e)-Fe,M[2]=Fe-(je-de)+(_e-de),M[3]=je;const rt=I(Ne,_,4,M,S);return S[rt-1]}(D,R,V,B,U,F,$)},w.orient2dfast=function(D,R,V,B,U,F){return(R-F)*(V-U)-(D-U)*(B-F)},Object.defineProperty(w,"__esModule",{value:!0})}(y)},45156:function(Ae){Ae.exports=function(){"use strict";var y={9662:function(I,u,h){var g=h(614),v=h(6330),m=TypeError;I.exports=function(f){if(g(f))return f;throw m(v(f)+" is not a function")}},9483:function(I,u,h){var g=h(4411),v=h(6330),m=TypeError;I.exports=function(f){if(g(f))return f;throw m(v(f)+" is not a constructor")}},6077:function(I,u,h){var g=h(614),v=String,m=TypeError;I.exports=function(f){if("object"==typeof f||g(f))return f;throw m("Can't set "+v(f)+" as a prototype")}},1223:function(I,u,h){var g=h(5112),v=h(30),m=h(3070).f,f=g("unscopables"),_=Array.prototype;void 0===_[f]&&m(_,f,{configurable:!0,value:v(null)}),I.exports=function(S){_[f][S]=!0}},1530:function(I,u,h){var g=h(8710).charAt;I.exports=function(v,m,f){return m+(f?g(v,m).length:1)}},9670:function(I,u,h){var g=h(111),v=String,m=TypeError;I.exports=function(f){if(g(f))return f;throw m(v(f)+" is not an object")}},8533:function(I,u,h){var g=h(2092).forEach,v=h(9341)("forEach");I.exports=v?[].forEach:function(m){return g(this,m,arguments.length>1?arguments[1]:void 0)}},8457:function(I,u,h){var g=h(9974),v=h(6916),m=h(7908),f=h(3411),_=h(7659),S=h(4411),M=h(6244),D=h(6135),R=h(4121),V=h(1246),B=Array;I.exports=function(U){var F=m(U),j=S(this),P=arguments.length,Q=P>1?arguments[1]:void 0,$=void 0!==Q;$&&(Q=g(Q,P>2?arguments[2]:void 0));var oe,X,ie,q,se,ne,Ce=V(F),xe=0;if(!Ce||this===B&&_(Ce))for(oe=M(F),X=j?new this(oe):B(oe);oe>xe;xe++)ne=$?Q(F[xe],xe):F[xe],D(X,xe,ne);else for(se=(q=R(F,Ce)).next,X=j?new this:[];!(ie=v(se,q)).done;xe++)ne=$?f(q,Q,[ie.value,xe],!0):ie.value,D(X,xe,ne);return X.length=xe,X}},1318:function(I,u,h){var g=h(5656),v=h(1400),m=h(6244),f=function(_){return function(S,M,D){var R,V=g(S),B=m(V),U=v(D,B);if(_&&M!=M){for(;B>U;)if((R=V[U++])!=R)return!0}else for(;B>U;U++)if((_||U in V)&&V[U]===M)return _||U||0;return!_&&-1}};I.exports={includes:f(!0),indexOf:f(!1)}},2092:function(I,u,h){var g=h(9974),v=h(1702),m=h(8361),f=h(7908),_=h(6244),S=h(5417),M=v([].push),D=function(R){var V=1===R,B=2===R,U=3===R,F=4===R,j=6===R,P=7===R,Q=5===R||j;return function($,oe,X,ie){for(var q,se,ne=f($),Ce=m(ne),xe=g(oe,X),ue=_(Ce),fe=0,ee=ie||S,de=V?ee($,ue):B||P?ee($,0):void 0;ue>fe;fe++)if((Q||fe in Ce)&&(se=xe(q=Ce[fe],fe,ne),R))if(V)de[fe]=se;else if(se)switch(R){case 3:return!0;case 5:return q;case 6:return fe;case 2:M(de,q)}else switch(R){case 4:return!1;case 7:M(de,q)}return j?-1:U||F?F:de}};I.exports={forEach:D(0),map:D(1),filter:D(2),some:D(3),every:D(4),find:D(5),findIndex:D(6),filterReject:D(7)}},1194:function(I,u,h){var g=h(7293),v=h(5112),m=h(7392),f=v("species");I.exports=function(_){return m>=51||!g(function(){var S=[];return(S.constructor={})[f]=function(){return{foo:1}},1!==S[_](Boolean).foo})}},9341:function(I,u,h){var g=h(7293);I.exports=function(v,m){var f=[][v];return!!f&&g(function(){f.call(null,m||function(){return 1},1)})}},3671:function(I,u,h){var g=h(9662),v=h(7908),m=h(8361),f=h(6244),_=TypeError,S=function(M){return function(D,R,V,B){g(R);var U=v(D),F=m(U),j=f(U),P=M?j-1:0,Q=M?-1:1;if(V<2)for(;;){if(P in F){B=F[P],P+=Q;break}if(P+=Q,M?P<0:j<=P)throw _("Reduce of empty array with no initial value")}for(;M?P>=0:j>P;P+=Q)P in F&&(B=R(B,F[P],P,U));return B}};I.exports={left:S(!1),right:S(!0)}},3658:function(I,u,h){var g=h(9781),v=h(3157),m=TypeError,f=Object.getOwnPropertyDescriptor,_=g&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(S){return S instanceof TypeError}}();I.exports=_?function(S,M){if(v(S)&&!f(S,"length").writable)throw m("Cannot set read only .length");return S.length=M}:function(S,M){return S.length=M}},1589:function(I,u,h){var g=h(1400),v=h(6244),m=h(6135),f=Array,_=Math.max;I.exports=function(S,M,D){for(var R=v(S),V=g(M,R),B=g(void 0===D?R:D,R),U=f(_(B-V,0)),F=0;V<B;V++,F++)m(U,F,S[V]);return U.length=F,U}},206:function(I,u,h){var g=h(1702);I.exports=g([].slice)},4362:function(I,u,h){var g=h(1589),v=Math.floor,m=function(S,M){var D=S.length,R=v(D/2);return D<8?f(S,M):_(S,m(g(S,0,R),M),m(g(S,R),M),M)},f=function(S,M){for(var D,R,V=S.length,B=1;B<V;){for(R=B,D=S[B];R&&M(S[R-1],D)>0;)S[R]=S[--R];R!==B++&&(S[R]=D)}return S},_=function(S,M,D,R){for(var V=M.length,B=D.length,U=0,F=0;U<V||F<B;)S[U+F]=U<V&&F<B?R(M[U],D[F])<=0?M[U++]:D[F++]:U<V?M[U++]:D[F++];return S};I.exports=m},7475:function(I,u,h){var g=h(3157),v=h(4411),m=h(111),f=h(5112)("species"),_=Array;I.exports=function(S){var M;return g(S)&&(v(M=S.constructor)&&(M===_||g(M.prototype))||m(M)&&null===(M=M[f]))&&(M=void 0),void 0===M?_:M}},5417:function(I,u,h){var g=h(7475);I.exports=function(v,m){return new(g(v))(0===m?0:m)}},3411:function(I,u,h){var g=h(9670),v=h(9212);I.exports=function(m,f,_,S){try{return S?f(g(_)[0],_[1]):f(_)}catch(M){v(m,"throw",M)}}},7072:function(I,u,h){var g=h(5112)("iterator"),v=!1;try{var m=0,f={next:function(){return{done:!!m++}},return:function(){v=!0}};f[g]=function(){return this},Array.from(f,function(){throw 2})}catch{}I.exports=function(_,S){if(!S&&!v)return!1;var M=!1;try{var D={};D[g]=function(){return{next:function(){return{done:M=!0}}}},_(D)}catch{}return M}},4326:function(I,u,h){var g=h(1702),v=g({}.toString),m=g("".slice);I.exports=function(f){return m(v(f),8,-1)}},648:function(I,u,h){var g=h(1694),v=h(614),m=h(4326),f=h(5112)("toStringTag"),_=Object,S="Arguments"===m(function(){return arguments}());I.exports=g?m:function(M){var D,R,V;return void 0===M?"Undefined":null===M?"Null":"string"==typeof(R=function(B,U){try{return B[U]}catch{}}(D=_(M),f))?R:S?m(D):"Object"===(V=m(D))&&v(D.callee)?"Arguments":V}},9920:function(I,u,h){var g=h(2597),v=h(3887),m=h(1236),f=h(3070);I.exports=function(_,S,M){for(var D=v(S),R=f.f,V=m.f,B=0;B<D.length;B++){var U=D[B];g(_,U)||M&&g(M,U)||R(_,U,V(S,U))}}},4964:function(I,u,h){var g=h(5112)("match");I.exports=function(v){var m=/./;try{"/./"[v](m)}catch{try{return m[g]=!1,"/./"[v](m)}catch{}}return!1}},8544:function(I,u,h){var g=h(7293);I.exports=!g(function(){function v(){}return v.prototype.constructor=null,Object.getPrototypeOf(new v)!==v.prototype})},6178:function(I){I.exports=function(u,h){return{value:u,done:h}}},8880:function(I,u,h){var g=h(9781),v=h(3070),m=h(9114);I.exports=g?function(f,_,S){return v.f(f,_,m(1,S))}:function(f,_,S){return f[_]=S,f}},9114:function(I){I.exports=function(u,h){return{enumerable:!(1&u),configurable:!(2&u),writable:!(4&u),value:h}}},6135:function(I,u,h){var g=h(4948),v=h(3070),m=h(9114);I.exports=function(f,_,S){var M=g(_);M in f?v.f(f,M,m(0,S)):f[M]=S}},8709:function(I,u,h){var g=h(9670),v=h(2140),m=TypeError;I.exports=function(f){if(g(this),"string"===f||"default"===f)f="string";else if("number"!==f)throw m("Incorrect hint");return v(this,f)}},7045:function(I,u,h){var g=h(6339),v=h(3070);I.exports=function(m,f,_){return _.get&&g(_.get,f,{getter:!0}),_.set&&g(_.set,f,{setter:!0}),v.f(m,f,_)}},8052:function(I,u,h){var g=h(614),v=h(3070),m=h(6339),f=h(3072);I.exports=function(_,S,M,D){D||(D={});var R=D.enumerable,V=void 0!==D.name?D.name:S;if(g(M)&&m(M,V,D),D.global)R?_[S]=M:f(S,M);else{try{D.unsafe?_[S]&&(R=!0):delete _[S]}catch{}R?_[S]=M:v.f(_,S,{value:M,enumerable:!1,configurable:!D.nonConfigurable,writable:!D.nonWritable})}return _}},3072:function(I,u,h){var g=h(7854),v=Object.defineProperty;I.exports=function(m,f){try{v(g,m,{value:f,configurable:!0,writable:!0})}catch{g[m]=f}return f}},5117:function(I,u,h){var g=h(6330),v=TypeError;I.exports=function(m,f){if(!delete m[f])throw v("Cannot delete property "+g(f)+" of "+g(m))}},9781:function(I,u,h){var g=h(7293);I.exports=!g(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},4154:function(I){var u="object"==typeof document&&document.all;I.exports={all:u,IS_HTMLDDA:void 0===u&&void 0!==u}},317:function(I,u,h){var g=h(7854),v=h(111),m=g.document,f=v(m)&&v(m.createElement);I.exports=function(_){return f?m.createElement(_):{}}},7207:function(I){var u=TypeError;I.exports=function(h){if(h>9007199254740991)throw u("Maximum allowed index exceeded");return h}},8324:function(I){I.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:function(I,u,h){var g=h(317)("span").classList,v=g&&g.constructor&&g.constructor.prototype;I.exports=v===Object.prototype?void 0:v},8886:function(I,u,h){var g=h(8113).match(/firefox\/(\d+)/i);I.exports=!!g&&+g[1]},256:function(I,u,h){var g=h(8113);I.exports=/MSIE|Trident/.test(g)},5268:function(I,u,h){var g=h(7854),v=h(4326);I.exports="process"===v(g.process)},8113:function(I){I.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},7392:function(I,u,h){var g,v,m=h(7854),f=h(8113),_=m.process,S=m.Deno,M=_&&_.versions||S&&S.version,D=M&&M.v8;D&&(v=(g=D.split("."))[0]>0&&g[0]<4?1:+(g[0]+g[1])),!v&&f&&(!(g=f.match(/Edge\/(\d+)/))||g[1]>=74)&&(g=f.match(/Chrome\/(\d+)/))&&(v=+g[1]),I.exports=v},8008:function(I,u,h){var g=h(8113).match(/AppleWebKit\/(\d+)\./);I.exports=!!g&&+g[1]},748:function(I){I.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(I,u,h){var g=h(7854),v=h(1236).f,m=h(8880),f=h(8052),_=h(3072),S=h(9920),M=h(4705);I.exports=function(D,R){var V,B,U,F,j,P=D.target,Q=D.global,$=D.stat;if(V=Q?g:$?g[P]||_(P,{}):(g[P]||{}).prototype)for(B in R){if(F=R[B],U=D.dontCallGetSet?(j=v(V,B))&&j.value:V[B],!M(Q?B:P+($?".":"#")+B,D.forced)&&void 0!==U){if(typeof F==typeof U)continue;S(F,U)}(D.sham||U&&U.sham)&&m(F,"sham",!0),f(V,B,F,D)}}},7293:function(I){I.exports=function(u){try{return!!u()}catch{return!0}}},7007:function(I,u,h){h(4916);var g=h(1470),v=h(8052),m=h(2261),f=h(7293),_=h(5112),S=h(8880),M=_("species"),D=RegExp.prototype;I.exports=function(R,V,B,U){var F=_(R),j=!f(function(){var oe={};return oe[F]=function(){return 7},7!==""[R](oe)}),P=j&&!f(function(){var oe=!1,X=/a/;return"split"===R&&((X={}).constructor={},X.constructor[M]=function(){return X},X.flags="",X[F]=/./[F]),X.exec=function(){return oe=!0,null},X[F](""),!oe});if(!j||!P||B){var Q=g(/./[F]),$=V(F,""[R],function(oe,X,ie,q,se){var ne=g(oe),Ce=X.exec;return Ce===m||Ce===D.exec?j&&!se?{done:!0,value:Q(X,ie,q)}:{done:!0,value:ne(ie,X,q)}:{done:!1}});v(String.prototype,R,$[0]),v(D,F,$[1])}U&&S(D[F],"sham",!0)}},2104:function(I,u,h){var g=h(4374),v=Function.prototype,m=v.apply,f=v.call;I.exports="object"==typeof Reflect&&Reflect.apply||(g?f.bind(m):function(){return f.apply(m,arguments)})},9974:function(I,u,h){var g=h(1470),v=h(9662),m=h(4374),f=g(g.bind);I.exports=function(_,S){return v(_),void 0===S?_:m?f(_,S):function(){return _.apply(S,arguments)}}},4374:function(I,u,h){var g=h(7293);I.exports=!g(function(){var v=function(){}.bind();return"function"!=typeof v||v.hasOwnProperty("prototype")})},6916:function(I,u,h){var g=h(4374),v=Function.prototype.call;I.exports=g?v.bind(v):function(){return v.apply(v,arguments)}},6530:function(I,u,h){var g=h(9781),v=h(2597),m=Function.prototype,f=g&&Object.getOwnPropertyDescriptor,_=v(m,"name"),S=_&&"something"===function(){}.name,M=_&&(!g||g&&f(m,"name").configurable);I.exports={EXISTS:_,PROPER:S,CONFIGURABLE:M}},5668:function(I,u,h){var g=h(1702),v=h(9662);I.exports=function(m,f,_){try{return g(v(Object.getOwnPropertyDescriptor(m,f)[_]))}catch{}}},1470:function(I,u,h){var g=h(4326),v=h(1702);I.exports=function(m){if("Function"===g(m))return v(m)}},1702:function(I,u,h){var g=h(4374),v=Function.prototype,m=v.call,f=g&&v.bind.bind(m,m);I.exports=g?f:function(_){return function(){return m.apply(_,arguments)}}},5005:function(I,u,h){var g=h(7854),v=h(614);I.exports=function(m,f){return arguments.length<2?v(_=g[m])?_:void 0:g[m]&&g[m][f];var _}},1246:function(I,u,h){var g=h(648),v=h(8173),m=h(8554),f=h(7497),_=h(5112)("iterator");I.exports=function(S){if(!m(S))return v(S,_)||v(S,"@@iterator")||f[g(S)]}},4121:function(I,u,h){var g=h(6916),v=h(9662),m=h(9670),f=h(6330),_=h(1246),S=TypeError;I.exports=function(M,D){var R=arguments.length<2?_(M):D;if(v(R))return m(g(R,M));throw S(f(M)+" is not iterable")}},8044:function(I,u,h){var g=h(1702),v=h(3157),m=h(614),f=h(4326),_=h(1340),S=g([].push);I.exports=function(M){if(m(M))return M;if(v(M)){for(var D=M.length,R=[],V=0;V<D;V++){var B=M[V];"string"==typeof B?S(R,B):"number"!=typeof B&&"Number"!==f(B)&&"String"!==f(B)||S(R,_(B))}var U=R.length,F=!0;return function(j,P){if(F)return F=!1,P;if(v(this))return P;for(var Q=0;Q<U;Q++)if(R[Q]===j)return P}}}},8173:function(I,u,h){var g=h(9662),v=h(8554);I.exports=function(m,f){var _=m[f];return v(_)?void 0:g(_)}},647:function(I,u,h){var g=h(1702),v=h(7908),m=Math.floor,f=g("".charAt),_=g("".replace),S=g("".slice),M=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,D=/\$([$&'`]|\d{1,2})/g;I.exports=function(R,V,B,U,F,j){var P=B+R.length,Q=U.length,$=D;return void 0!==F&&(F=v(F),$=M),_(j,$,function(oe,X){var ie;switch(f(X,0)){case"$":return"$";case"&":return R;case"`":return S(V,0,B);case"'":return S(V,P);case"<":ie=F[S(X,1,-1)];break;default:var q=+X;if(0===q)return oe;if(q>Q){var se=m(q/10);return 0===se?oe:se<=Q?void 0===U[se-1]?f(X,1):U[se-1]+f(X,1):oe}ie=U[q-1]}return void 0===ie?"":ie})}},7854:function(I,u,h){var g=function(v){return v&&v.Math===Math&&v};I.exports=g("object"==typeof globalThis&&globalThis)||g("object"==typeof window&&window)||g("object"==typeof self&&self)||g("object"==typeof h.g&&h.g)||function(){return this}()||this||Function("return this")()},2597:function(I,u,h){var g=h(1702),v=h(7908),m=g({}.hasOwnProperty);I.exports=Object.hasOwn||function(f,_){return m(v(f),_)}},3501:function(I){I.exports={}},490:function(I,u,h){var g=h(5005);I.exports=g("document","documentElement")},4664:function(I,u,h){var g=h(9781),v=h(7293),m=h(317);I.exports=!g&&!v(function(){return 7!==Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a})},8361:function(I,u,h){var g=h(1702),v=h(7293),m=h(4326),f=Object,_=g("".split);I.exports=v(function(){return!f("z").propertyIsEnumerable(0)})?function(S){return"String"===m(S)?_(S,""):f(S)}:f},9587:function(I,u,h){var g=h(614),v=h(111),m=h(7674);I.exports=function(f,_,S){var M,D;return m&&g(M=_.constructor)&&M!==S&&v(D=M.prototype)&&D!==S.prototype&&m(f,D),f}},2788:function(I,u,h){var g=h(1702),v=h(614),m=h(5465),f=g(Function.toString);v(m.inspectSource)||(m.inspectSource=function(_){return f(_)}),I.exports=m.inspectSource},9909:function(I,u,h){var g,v,m,f=h(4811),_=h(7854),S=h(111),M=h(8880),D=h(2597),R=h(5465),V=h(6200),B=h(3501),U="Object already initialized",F=_.TypeError;if(f||R.state){var P=R.state||(R.state=new(0,_.WeakMap));P.get=P.get,P.has=P.has,P.set=P.set,g=function($,oe){if(P.has($))throw F(U);return oe.facade=$,P.set($,oe),oe},v=function($){return P.get($)||{}},m=function($){return P.has($)}}else{var Q=V("state");B[Q]=!0,g=function($,oe){if(D($,Q))throw F(U);return oe.facade=$,M($,Q,oe),oe},v=function($){return D($,Q)?$[Q]:{}},m=function($){return D($,Q)}}I.exports={set:g,get:v,has:m,enforce:function($){return m($)?v($):g($,{})},getterFor:function($){return function(oe){var X;if(!S(oe)||(X=v(oe)).type!==$)throw F("Incompatible receiver, "+$+" required");return X}}}},7659:function(I,u,h){var g=h(5112),v=h(7497),m=g("iterator"),f=Array.prototype;I.exports=function(_){return void 0!==_&&(v.Array===_||f[m]===_)}},3157:function(I,u,h){var g=h(4326);I.exports=Array.isArray||function(v){return"Array"===g(v)}},614:function(I,u,h){var g=h(4154),v=g.all;I.exports=g.IS_HTMLDDA?function(m){return"function"==typeof m||m===v}:function(m){return"function"==typeof m}},4411:function(I,u,h){var g=h(1702),v=h(7293),m=h(614),f=h(648),_=h(5005),S=h(2788),M=function(){},D=[],R=_("Reflect","construct"),V=/^\s*(?:class|function)\b/,B=g(V.exec),U=!V.exec(M),F=function(P){if(!m(P))return!1;try{return R(M,D,P),!0}catch{return!1}},j=function(P){if(!m(P))return!1;switch(f(P)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return U||!!B(V,S(P))}catch{return!0}};j.sham=!0,I.exports=!R||v(function(){var P;return F(F.call)||!F(Object)||!F(function(){P=!0})||P})?j:F},4705:function(I,u,h){var g=h(7293),v=h(614),m=/#|\.prototype\./,f=function(R,V){var B=S[_(R)];return B===D||B!==M&&(v(V)?g(V):!!V)},_=f.normalize=function(R){return String(R).replace(m,".").toLowerCase()},S=f.data={},M=f.NATIVE="N",D=f.POLYFILL="P";I.exports=f},5988:function(I,u,h){var g=h(111),v=Math.floor;I.exports=Number.isInteger||function(m){return!g(m)&&isFinite(m)&&v(m)===m}},8554:function(I){I.exports=function(u){return null==u}},111:function(I,u,h){var g=h(614),v=h(4154),m=v.all;I.exports=v.IS_HTMLDDA?function(f){return"object"==typeof f?null!==f:g(f)||f===m}:function(f){return"object"==typeof f?null!==f:g(f)}},1913:function(I){I.exports=!1},7850:function(I,u,h){var g=h(111),v=h(4326),m=h(5112)("match");I.exports=function(f){var _;return g(f)&&(void 0!==(_=f[m])?!!_:"RegExp"===v(f))}},2190:function(I,u,h){var g=h(5005),v=h(614),m=h(7976),f=h(3307),_=Object;I.exports=f?function(S){return"symbol"==typeof S}:function(S){var M=g("Symbol");return v(M)&&m(M.prototype,_(S))}},9212:function(I,u,h){var g=h(6916),v=h(9670),m=h(8173);I.exports=function(f,_,S){var M,D;v(f);try{if(!(M=m(f,"return"))){if("throw"===_)throw S;return S}M=g(M,f)}catch(R){D=!0,M=R}if("throw"===_)throw S;if(D)throw M;return v(M),S}},3061:function(I,u,h){var g=h(3383).IteratorPrototype,v=h(30),m=h(9114),f=h(8003),_=h(7497),S=function(){return this};I.exports=function(M,D,R,V){var B=D+" Iterator";return M.prototype=v(g,{next:m(+!V,R)}),f(M,B,!1,!0),_[B]=S,M}},1656:function(I,u,h){var g=h(2109),v=h(6916),m=h(1913),f=h(6530),_=h(614),S=h(3061),M=h(9518),D=h(7674),R=h(8003),V=h(8880),B=h(8052),U=h(5112),F=h(7497),j=h(3383),P=f.PROPER,Q=f.CONFIGURABLE,$=j.IteratorPrototype,oe=j.BUGGY_SAFARI_ITERATORS,X=U("iterator"),q="values",se="entries",ne=function(){return this};I.exports=function(Ce,xe,ue,fe,ee,de,pe){S(ue,xe,fe);var ce,ae,ye,Me=function(Pe){if(Pe===ee&&$e)return $e;if(!oe&&Pe in Ue)return Ue[Pe];switch(Pe){case"keys":case q:case se:return function(){return new ue(this,Pe)}}return function(){return new ue(this)}},_e=xe+" Iterator",Fe=!1,Ue=Ce.prototype,Ge=Ue[X]||Ue["@@iterator"]||ee&&Ue[ee],$e=!oe&&Ge||Me(ee),He="Array"===xe&&Ue.entries||Ge;if(He&&(ce=M(He.call(new Ce)))!==Object.prototype&&ce.next&&(m||M(ce)===$||(D?D(ce,$):_(ce[X])||B(ce,X,ne)),R(ce,_e,!0,!0),m&&(F[_e]=ne)),P&&ee===q&&Ge&&Ge.name!==q&&(!m&&Q?V(Ue,"name",q):(Fe=!0,$e=function(){return v(Ge,this)})),ee)if(ae={values:Me(q),keys:de?$e:Me("keys"),entries:Me(se)},pe)for(ye in ae)(oe||Fe||!(ye in Ue))&&B(Ue,ye,ae[ye]);else g({target:xe,proto:!0,forced:oe||Fe},ae);return m&&!pe||Ue[X]===$e||B(Ue,X,$e,{name:ee}),F[xe]=$e,ae}},3383:function(I,u,h){var g,v,m,f=h(7293),_=h(614),S=h(111),M=h(30),D=h(9518),R=h(8052),V=h(5112),B=h(1913),U=V("iterator"),F=!1;[].keys&&("next"in(m=[].keys())?(v=D(D(m)))!==Object.prototype&&(g=v):F=!0),!S(g)||f(function(){var j={};return g[U].call(j)!==j})?g={}:B&&(g=M(g)),_(g[U])||R(g,U,function(){return this}),I.exports={IteratorPrototype:g,BUGGY_SAFARI_ITERATORS:F}},7497:function(I){I.exports={}},6244:function(I,u,h){var g=h(7466);I.exports=function(v){return g(v.length)}},6339:function(I,u,h){var g=h(1702),v=h(7293),m=h(614),f=h(2597),_=h(9781),S=h(6530).CONFIGURABLE,M=h(2788),D=h(9909),R=D.enforce,V=D.get,B=String,U=Object.defineProperty,F=g("".slice),j=g("".replace),P=g([].join),Q=_&&!v(function(){return 8!==U(function(){},"length",{value:8}).length}),$=String(String).split("String"),oe=I.exports=function(X,ie,q){"Symbol("===F(B(ie),0,7)&&(ie="["+j(B(ie),/^Symbol\(([^)]*)\)/,"$1")+"]"),q&&q.getter&&(ie="get "+ie),q&&q.setter&&(ie="set "+ie),(!f(X,"name")||S&&X.name!==ie)&&(_?U(X,"name",{value:ie,configurable:!0}):X.name=ie),Q&&q&&f(q,"arity")&&X.length!==q.arity&&U(X,"length",{value:q.arity});try{q&&f(q,"constructor")&&q.constructor?_&&U(X,"prototype",{writable:!1}):X.prototype&&(X.prototype=void 0)}catch{}var se=R(X);return f(se,"source")||(se.source=P($,"string"==typeof ie?ie:"")),X};Function.prototype.toString=oe(function(){return m(this)&&V(this).source||M(this)},"toString")},4758:function(I){var u=Math.ceil,h=Math.floor;I.exports=Math.trunc||function(g){var v=+g;return(v>0?h:u)(v)}},3929:function(I,u,h){var g=h(7850),v=TypeError;I.exports=function(m){if(g(m))throw v("The method doesn't accept regular expressions");return m}},1574:function(I,u,h){var g=h(9781),v=h(1702),m=h(6916),f=h(7293),_=h(1956),S=h(5181),M=h(5296),D=h(7908),R=h(8361),V=Object.assign,B=Object.defineProperty,U=v([].concat);I.exports=!V||f(function(){if(g&&1!==V({b:1},V(B({},"a",{enumerable:!0,get:function(){B(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var F={},j={},P=Symbol("assign detection"),Q="abcdefghijklmnopqrst";return F[P]=7,Q.split("").forEach(function($){j[$]=$}),7!==V({},F)[P]||_(V({},j)).join("")!==Q})?function(F,j){for(var P=D(F),Q=arguments.length,$=1,oe=S.f,X=M.f;Q>$;)for(var ie,q=R(arguments[$++]),se=oe?U(_(q),oe(q)):_(q),ne=se.length,Ce=0;ne>Ce;)ie=se[Ce++],g&&!m(X,q,ie)||(P[ie]=q[ie]);return P}:V},30:function(I,u,h){var g,v=h(9670),m=h(6048),f=h(748),_=h(3501),S=h(490),M=h(317),D=h(6200),R="prototype",V="script",B=D("IE_PROTO"),U=function(){},F=function(Q){return"<"+V+">"+Q+"</"+V+">"},j=function(Q){Q.write(F("")),Q.close();var $=Q.parentWindow.Object;return Q=null,$},P=function(){try{g=new ActiveXObject("htmlfile")}catch{}var Q,$,oe;P=typeof document<"u"?document.domain&&g?j(g):($=M("iframe"),oe="java"+V+":",$.style.display="none",S.appendChild($),$.src=String(oe),(Q=$.contentWindow.document).open(),Q.write(F("document.F=Object")),Q.close(),Q.F):j(g);for(var X=f.length;X--;)delete P[R][f[X]];return P()};_[B]=!0,I.exports=Object.create||function(Q,$){var oe;return null!==Q?(U[R]=v(Q),oe=new U,U[R]=null,oe[B]=Q):oe=P(),void 0===$?oe:m.f(oe,$)}},6048:function(I,u,h){var g=h(9781),v=h(3353),m=h(3070),f=h(9670),_=h(5656),S=h(1956);u.f=g&&!v?Object.defineProperties:function(M,D){f(M);for(var R,V=_(D),B=S(D),U=B.length,F=0;U>F;)m.f(M,R=B[F++],V[R]);return M}},3070:function(I,u,h){var g=h(9781),v=h(4664),m=h(3353),f=h(9670),_=h(4948),S=TypeError,M=Object.defineProperty,D=Object.getOwnPropertyDescriptor,R="enumerable",V="configurable",B="writable";u.f=g?m?function(U,F,j){if(f(U),F=_(F),f(j),"function"==typeof U&&"prototype"===F&&"value"in j&&B in j&&!j[B]){var P=D(U,F);P&&P[B]&&(U[F]=j.value,j={configurable:V in j?j[V]:P[V],enumerable:R in j?j[R]:P[R],writable:!1})}return M(U,F,j)}:M:function(U,F,j){if(f(U),F=_(F),f(j),v)try{return M(U,F,j)}catch{}if("get"in j||"set"in j)throw S("Accessors not supported");return"value"in j&&(U[F]=j.value),U}},1236:function(I,u,h){var g=h(9781),v=h(6916),m=h(5296),f=h(9114),_=h(5656),S=h(4948),M=h(2597),D=h(4664),R=Object.getOwnPropertyDescriptor;u.f=g?R:function(V,B){if(V=_(V),B=S(B),D)try{return R(V,B)}catch{}if(M(V,B))return f(!v(m.f,V,B),V[B])}},1156:function(I,u,h){var g=h(4326),v=h(5656),m=h(8006).f,f=h(1589),_="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];I.exports.f=function(S){return _&&"Window"===g(S)?function(M){try{return m(M)}catch{return f(_)}}(S):m(v(S))}},8006:function(I,u,h){var g=h(6324),v=h(748).concat("length","prototype");u.f=Object.getOwnPropertyNames||function(m){return g(m,v)}},5181:function(I,u){u.f=Object.getOwnPropertySymbols},9518:function(I,u,h){var g=h(2597),v=h(614),m=h(7908),f=h(6200),_=h(8544),S=f("IE_PROTO"),M=Object,D=M.prototype;I.exports=_?M.getPrototypeOf:function(R){var V=m(R);if(g(V,S))return V[S];var B=V.constructor;return v(B)&&V instanceof B?B.prototype:V instanceof M?D:null}},7976:function(I,u,h){var g=h(1702);I.exports=g({}.isPrototypeOf)},6324:function(I,u,h){var g=h(1702),v=h(2597),m=h(5656),f=h(1318).indexOf,_=h(3501),S=g([].push);I.exports=function(M,D){var R,V=m(M),B=0,U=[];for(R in V)!v(_,R)&&v(V,R)&&S(U,R);for(;D.length>B;)v(V,R=D[B++])&&(~f(U,R)||S(U,R));return U}},1956:function(I,u,h){var g=h(6324),v=h(748);I.exports=Object.keys||function(m){return g(m,v)}},5296:function(I,u){var h={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,v=g&&!h.call({1:2},1);u.f=v?function(m){var f=g(this,m);return!!f&&f.enumerable}:h},9026:function(I,u,h){var g=h(1913),v=h(7854),m=h(7293),f=h(8008);I.exports=g||!m(function(){if(!(f&&f<535)){var _=Math.random();__defineSetter__.call(null,_,function(){}),delete v[_]}})},7674:function(I,u,h){var g=h(5668),v=h(9670),m=h(6077);I.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var f,_=!1,S={};try{(f=g(Object.prototype,"__proto__","set"))(S,[]),_=S instanceof Array}catch{}return function(M,D){return v(M),m(D),_?f(M,D):M.__proto__=D,M}}():void 0)},288:function(I,u,h){var g=h(1694),v=h(648);I.exports=g?{}.toString:function(){return"[object "+v(this)+"]"}},2140:function(I,u,h){var g=h(6916),v=h(614),m=h(111),f=TypeError;I.exports=function(_,S){var M,D;if("string"===S&&v(M=_.toString)&&!m(D=g(M,_))||v(M=_.valueOf)&&!m(D=g(M,_))||"string"!==S&&v(M=_.toString)&&!m(D=g(M,_)))return D;throw f("Can't convert object to primitive value")}},3887:function(I,u,h){var g=h(5005),v=h(1702),m=h(8006),f=h(5181),_=h(9670),S=v([].concat);I.exports=g("Reflect","ownKeys")||function(M){var D=m.f(_(M)),R=f.f;return R?S(D,R(M)):D}},857:function(I,u,h){var g=h(7854);I.exports=g},2626:function(I,u,h){var g=h(3070).f;I.exports=function(v,m,f){f in v||g(v,f,{configurable:!0,get:function(){return m[f]},set:function(_){m[f]=_}})}},7651:function(I,u,h){var g=h(6916),v=h(9670),m=h(614),f=h(4326),_=h(2261),S=TypeError;I.exports=function(M,D){var R=M.exec;if(m(R)){var V=g(R,M,D);return null!==V&&v(V),V}if("RegExp"===f(M))return g(_,M,D);throw S("RegExp#exec called on incompatible receiver")}},2261:function(I,u,h){var g,v,m=h(6916),f=h(1702),_=h(1340),S=h(7066),M=h(2999),D=h(2309),R=h(30),V=h(9909).get,B=h(9441),U=h(7168),F=D("native-string-replace",String.prototype.replace),j=RegExp.prototype.exec,P=j,Q=f("".charAt),$=f("".indexOf),oe=f("".replace),X=f("".slice),ie=(v=/b*/g,m(j,g=/a/,"a"),m(j,v,"a"),0!==g.lastIndex||0!==v.lastIndex),q=M.BROKEN_CARET,se=void 0!==/()??/.exec("")[1];(ie||se||q||B||U)&&(P=function(ne){var Ce,xe,ue,fe,ee,de,pe,ce=this,ae=V(ce),ye=_(ne),Me=ae.raw;if(Me)return Me.lastIndex=ce.lastIndex,Ce=m(P,Me,ye),ce.lastIndex=Me.lastIndex,Ce;var _e=ae.groups,Fe=q&&ce.sticky,Ue=m(S,ce),Ge=ce.source,$e=0,He=ye;if(Fe&&(Ue=oe(Ue,"y",""),-1===$(Ue,"g")&&(Ue+="g"),He=X(ye,ce.lastIndex),ce.lastIndex>0&&(!ce.multiline||ce.multiline&&"\n"!==Q(ye,ce.lastIndex-1))&&(Ge="(?: "+Ge+")",He=" "+He,$e++),xe=new RegExp("^(?:"+Ge+")",Ue)),se&&(xe=new RegExp("^"+Ge+"$(?!\\s)",Ue)),ie&&(ue=ce.lastIndex),fe=m(j,Fe?xe:ce,He),Fe?fe?(fe.input=X(fe.input,$e),fe[0]=X(fe[0],$e),fe.index=ce.lastIndex,ce.lastIndex+=fe[0].length):ce.lastIndex=0:ie&&fe&&(ce.lastIndex=ce.global?fe.index+fe[0].length:ue),se&&fe&&fe.length>1&&m(F,fe[0],xe,function(){for(ee=1;ee<arguments.length-2;ee++)void 0===arguments[ee]&&(fe[ee]=void 0)}),fe&&_e)for(fe.groups=de=R(null),ee=0;ee<_e.length;ee++)de[(pe=_e[ee])[0]]=fe[pe[1]];return fe}),I.exports=P},7066:function(I,u,h){var g=h(9670);I.exports=function(){var v=g(this),m="";return v.hasIndices&&(m+="d"),v.global&&(m+="g"),v.ignoreCase&&(m+="i"),v.multiline&&(m+="m"),v.dotAll&&(m+="s"),v.unicode&&(m+="u"),v.unicodeSets&&(m+="v"),v.sticky&&(m+="y"),m}},4706:function(I,u,h){var g=h(6916),v=h(2597),m=h(7976),f=h(7066),_=RegExp.prototype;I.exports=function(S){var M=S.flags;return void 0!==M||"flags"in _||v(S,"flags")||!m(_,S)?M:g(f,S)}},2999:function(I,u,h){var g=h(7293),v=h(7854).RegExp,m=g(function(){var S=v("a","y");return S.lastIndex=2,null!==S.exec("abcd")}),f=m||g(function(){return!v("a","y").sticky}),_=m||g(function(){var S=v("^r","gy");return S.lastIndex=2,null!==S.exec("str")});I.exports={BROKEN_CARET:_,MISSED_STICKY:f,UNSUPPORTED_Y:m}},9441:function(I,u,h){var g=h(7293),v=h(7854).RegExp;I.exports=g(function(){var m=v(".","s");return!(m.dotAll&&m.exec("\n")&&"s"===m.flags)})},7168:function(I,u,h){var g=h(7293),v=h(7854).RegExp;I.exports=g(function(){var m=v("(?<a>b)","g");return"b"!==m.exec("b").groups.a||"bc"!=="b".replace(m,"$<a>c")})},4488:function(I,u,h){var g=h(8554),v=TypeError;I.exports=function(m){if(g(m))throw v("Can't call method on "+m);return m}},6340:function(I,u,h){var g=h(5005),v=h(7045),m=h(5112),f=h(9781),_=m("species");I.exports=function(S){var M=g(S);f&&M&&!M[_]&&v(M,_,{configurable:!0,get:function(){return this}})}},8003:function(I,u,h){var g=h(3070).f,v=h(2597),m=h(5112)("toStringTag");I.exports=function(f,_,S){f&&!S&&(f=f.prototype),f&&!v(f,m)&&g(f,m,{configurable:!0,value:_})}},6200:function(I,u,h){var g=h(2309),v=h(9711),m=g("keys");I.exports=function(f){return m[f]||(m[f]=v(f))}},5465:function(I,u,h){var g=h(7854),v=h(3072),m="__core-js_shared__",f=g[m]||v(m,{});I.exports=f},2309:function(I,u,h){var g=h(1913),v=h(5465);(I.exports=function(m,f){return v[m]||(v[m]=void 0!==f?f:{})})("versions",[]).push({version:"3.32.1",mode:g?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:function(I,u,h){var g=h(9670),v=h(9483),m=h(8554),f=h(5112)("species");I.exports=function(_,S){var M,D=g(_).constructor;return void 0===D||m(M=g(D)[f])?S:v(M)}},8710:function(I,u,h){var g=h(1702),v=h(9303),m=h(1340),f=h(4488),_=g("".charAt),S=g("".charCodeAt),M=g("".slice),D=function(R){return function(V,B){var U,F,j=m(f(V)),P=v(B),Q=j.length;return P<0||P>=Q?R?"":void 0:(U=S(j,P))<55296||U>56319||P+1===Q||(F=S(j,P+1))<56320||F>57343?R?_(j,P):U:R?M(j,P,P+2):F-56320+(U-55296<<10)+65536}};I.exports={codeAt:D(!1),charAt:D(!0)}},6091:function(I,u,h){var g=h(6530).PROPER,v=h(7293),m=h(1361);I.exports=function(f){return v(function(){return!!m[f]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[f]()||g&&m[f].name!==f})}},3111:function(I,u,h){var g=h(1702),v=h(4488),m=h(1340),f=h(1361),_=g("".replace),S=RegExp("^["+f+"]+"),M=RegExp("(^|[^"+f+"])["+f+"]+$"),D=function(R){return function(V){var B=m(v(V));return 1&R&&(B=_(B,S,"")),2&R&&(B=_(B,M,"$1")),B}};I.exports={start:D(1),end:D(2),trim:D(3)}},6293:function(I,u,h){var g=h(7392),v=h(7293),m=h(7854).String;I.exports=!!Object.getOwnPropertySymbols&&!v(function(){var f=Symbol("symbol detection");return!m(f)||!(Object(f)instanceof Symbol)||!Symbol.sham&&g&&g<41})},6532:function(I,u,h){var g=h(6916),v=h(5005),m=h(5112),f=h(8052);I.exports=function(){var _=v("Symbol"),S=_&&_.prototype,M=S&&S.valueOf,D=m("toPrimitive");S&&!S[D]&&f(S,D,function(R){return g(M,this)},{arity:1})}},2015:function(I,u,h){var g=h(6293);I.exports=g&&!!Symbol.for&&!!Symbol.keyFor},863:function(I,u,h){var g=h(1702);I.exports=g(1..valueOf)},1400:function(I,u,h){var g=h(9303),v=Math.max,m=Math.min;I.exports=function(f,_){var S=g(f);return S<0?v(S+_,0):m(S,_)}},5656:function(I,u,h){var g=h(8361),v=h(4488);I.exports=function(m){return g(v(m))}},9303:function(I,u,h){var g=h(4758);I.exports=function(v){var m=+v;return m!=m||0===m?0:g(m)}},7466:function(I,u,h){var g=h(9303),v=Math.min;I.exports=function(m){return m>0?v(g(m),9007199254740991):0}},7908:function(I,u,h){var g=h(4488),v=Object;I.exports=function(m){return v(g(m))}},7593:function(I,u,h){var g=h(6916),v=h(111),m=h(2190),f=h(8173),_=h(2140),S=h(5112),M=TypeError,D=S("toPrimitive");I.exports=function(R,V){if(!v(R)||m(R))return R;var B,U=f(R,D);if(U){if(void 0===V&&(V="default"),B=g(U,R,V),!v(B)||m(B))return B;throw M("Can't convert object to primitive value")}return void 0===V&&(V="number"),_(R,V)}},4948:function(I,u,h){var g=h(7593),v=h(2190);I.exports=function(m){var f=g(m,"string");return v(f)?f:f+""}},1694:function(I,u,h){var g={};g[h(5112)("toStringTag")]="z",I.exports="[object z]"===String(g)},1340:function(I,u,h){var g=h(648),v=String;I.exports=function(m){if("Symbol"===g(m))throw TypeError("Cannot convert a Symbol value to a string");return v(m)}},6330:function(I){var u=String;I.exports=function(h){try{return u(h)}catch{return"Object"}}},9711:function(I,u,h){var g=h(1702),v=0,m=Math.random(),f=g(1..toString);I.exports=function(_){return"Symbol("+(void 0===_?"":_)+")_"+f(++v+m,36)}},3307:function(I,u,h){var g=h(6293);I.exports=g&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(I,u,h){var g=h(9781),v=h(7293);I.exports=g&&v(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},4811:function(I,u,h){var g=h(7854),v=h(614),m=g.WeakMap;I.exports=v(m)&&/native code/.test(String(m))},6800:function(I,u,h){var g=h(857),v=h(2597),m=h(6061),f=h(3070).f;I.exports=function(_){var S=g.Symbol||(g.Symbol={});v(S,_)||f(S,_,{value:m.f(_)})}},6061:function(I,u,h){var g=h(5112);u.f=g},5112:function(I,u,h){var g=h(7854),v=h(2309),m=h(2597),f=h(9711),_=h(6293),S=h(3307),M=g.Symbol,D=v("wks"),R=S?M.for||M:M&&M.withoutSetter||f;I.exports=function(V){return m(D,V)||(D[V]=_&&m(M,V)?M[V]:R("Symbol."+V)),D[V]}},1361:function(I){I.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},2222:function(I,u,h){var g=h(2109),v=h(7293),m=h(3157),f=h(111),_=h(7908),S=h(6244),M=h(7207),D=h(6135),R=h(5417),V=h(1194),B=h(5112),U=h(7392),F=B("isConcatSpreadable"),j=U>=51||!v(function(){var Q=[];return Q[F]=!1,Q.concat()[0]!==Q}),P=function(Q){if(!f(Q))return!1;var $=Q[F];return void 0!==$?!!$:m(Q)};g({target:"Array",proto:!0,arity:1,forced:!j||!V("concat")},{concat:function(Q){var $,oe,X,ie,q,se=_(this),ne=R(se,0),Ce=0;for($=-1,X=arguments.length;$<X;$++)if(P(q=-1===$?se:arguments[$]))for(ie=S(q),M(Ce+ie),oe=0;oe<ie;oe++,Ce++)oe in q&&D(ne,Ce,q[oe]);else M(Ce+1),D(ne,Ce++,q);return ne.length=Ce,ne}})},7327:function(I,u,h){var g=h(2109),v=h(2092).filter;g({target:"Array",proto:!0,forced:!h(1194)("filter")},{filter:function(m){return v(this,m,arguments.length>1?arguments[1]:void 0)}})},1038:function(I,u,h){var g=h(2109),v=h(8457);g({target:"Array",stat:!0,forced:!h(7072)(function(m){Array.from(m)})},{from:v})},6699:function(I,u,h){var g=h(2109),v=h(1318).includes,m=h(7293),f=h(1223);g({target:"Array",proto:!0,forced:m(function(){return!Array(1).includes()})},{includes:function(_){return v(this,_,arguments.length>1?arguments[1]:void 0)}}),f("includes")},2772:function(I,u,h){var g=h(2109),v=h(1470),m=h(1318).indexOf,f=h(9341),_=v([].indexOf),S=!!_&&1/_([1],1,-0)<0;g({target:"Array",proto:!0,forced:S||!f("indexOf")},{indexOf:function(M){var D=arguments.length>1?arguments[1]:void 0;return S?_(this,M,D)||0:m(this,M,D)}})},6992:function(I,u,h){var g=h(5656),v=h(1223),m=h(7497),f=h(9909),_=h(3070).f,S=h(1656),M=h(6178),D=h(1913),R=h(9781),V="Array Iterator",B=f.set,U=f.getterFor(V);I.exports=S(Array,"Array",function(j,P){B(this,{type:V,target:g(j),index:0,kind:P})},function(){var j=U(this),P=j.target,Q=j.kind,$=j.index++;if(!P||$>=P.length)return j.target=void 0,M(void 0,!0);switch(Q){case"keys":return M($,!1);case"values":return M(P[$],!1)}return M([$,P[$]],!1)},"values");var F=m.Arguments=m.Array;if(v("keys"),v("values"),v("entries"),!D&&R&&"values"!==F.name)try{_(F,"name",{value:"values"})}catch{}},9600:function(I,u,h){var g=h(2109),v=h(1702),m=h(8361),f=h(5656),_=h(9341),S=v([].join);g({target:"Array",proto:!0,forced:m!==Object||!_("join",",")},{join:function(M){return S(f(this),void 0===M?",":M)}})},1249:function(I,u,h){var g=h(2109),v=h(2092).map;g({target:"Array",proto:!0,forced:!h(1194)("map")},{map:function(m){return v(this,m,arguments.length>1?arguments[1]:void 0)}})},5827:function(I,u,h){var g=h(2109),v=h(3671).left,m=h(9341),f=h(7392);g({target:"Array",proto:!0,forced:!h(5268)&&f>79&&f<83||!m("reduce")},{reduce:function(_){var S=arguments.length;return v(this,_,S,S>1?arguments[1]:void 0)}})},7042:function(I,u,h){var g=h(2109),v=h(3157),m=h(4411),f=h(111),_=h(1400),S=h(6244),M=h(5656),D=h(6135),R=h(5112),V=h(1194),B=h(206),U=V("slice"),F=R("species"),j=Array,P=Math.max;g({target:"Array",proto:!0,forced:!U},{slice:function(Q,$){var oe,X,ie,q=M(this),se=S(q),ne=_(Q,se),Ce=_(void 0===$?se:$,se);if(v(q)&&((m(oe=q.constructor)&&(oe===j||v(oe.prototype))||f(oe)&&null===(oe=oe[F]))&&(oe=void 0),oe===j||void 0===oe))return B(q,ne,Ce);for(X=new(void 0===oe?j:oe)(P(Ce-ne,0)),ie=0;ne<Ce;ne++,ie++)ne in q&&D(X,ie,q[ne]);return X.length=ie,X}})},2707:function(I,u,h){var g=h(2109),v=h(1702),m=h(9662),f=h(7908),_=h(6244),S=h(5117),M=h(1340),D=h(7293),R=h(4362),V=h(9341),B=h(8886),U=h(256),F=h(7392),j=h(8008),P=[],Q=v(P.sort),$=v(P.push),oe=D(function(){P.sort(void 0)}),X=D(function(){P.sort(null)}),ie=V("sort"),q=!D(function(){if(F)return F<70;if(!(B&&B>3)){if(U)return!0;if(j)return j<603;var se,ne,Ce,xe,ue="";for(se=65;se<76;se++){switch(ne=String.fromCharCode(se),se){case 66:case 69:case 70:case 72:Ce=3;break;case 68:case 71:Ce=4;break;default:Ce=2}for(xe=0;xe<47;xe++)P.push({k:ne+xe,v:Ce})}for(P.sort(function(fe,ee){return ee.v-fe.v}),xe=0;xe<P.length;xe++)ne=P[xe].k.charAt(0),ue.charAt(ue.length-1)!==ne&&(ue+=ne);return"DGBEFHACIJK"!==ue}});g({target:"Array",proto:!0,forced:oe||!X||!ie||!q},{sort:function(se){void 0!==se&&m(se);var ne=f(this);if(q)return void 0===se?Q(ne):Q(ne,se);var Ce,xe,ue=[],fe=_(ne);for(xe=0;xe<fe;xe++)xe in ne&&$(ue,ne[xe]);for(R(ue,function(ee){return function(de,pe){return void 0===pe?-1:void 0===de?1:void 0!==ee?+ee(de,pe)||0:M(de)>M(pe)?1:-1}}(se)),Ce=_(ue),xe=0;xe<Ce;)ne[xe]=ue[xe++];for(;xe<fe;)S(ne,xe++);return ne}})},561:function(I,u,h){var g=h(2109),v=h(7908),m=h(1400),f=h(9303),_=h(6244),S=h(3658),M=h(7207),D=h(5417),R=h(6135),V=h(5117),B=h(1194)("splice"),U=Math.max,F=Math.min;g({target:"Array",proto:!0,forced:!B},{splice:function(j,P){var Q,$,oe,X,ie,q,se=v(this),ne=_(se),Ce=m(j,ne),xe=arguments.length;for(0===xe?Q=$=0:1===xe?(Q=0,$=ne-Ce):(Q=xe-2,$=F(U(f(P),0),ne-Ce)),M(ne+Q-$),oe=D(se,$),X=0;X<$;X++)(ie=Ce+X)in se&&R(oe,X,se[ie]);if(oe.length=$,Q<$){for(X=Ce;X<ne-$;X++)q=X+Q,(ie=X+$)in se?se[q]=se[ie]:V(se,q);for(X=ne;X>ne-$+Q;X--)V(se,X-1)}else if(Q>$)for(X=ne-$;X>Ce;X--)q=X+Q-1,(ie=X+$-1)in se?se[q]=se[ie]:V(se,q);for(X=0;X<Q;X++)se[X+Ce]=arguments[X+2];return S(se,ne-$+Q),oe}})},6078:function(I,u,h){var g=h(2597),v=h(8052),m=h(8709),f=h(5112)("toPrimitive"),_=Date.prototype;g(_,f)||v(_,f,m)},8309:function(I,u,h){var g=h(9781),v=h(6530).EXISTS,m=h(1702),f=h(7045),_=Function.prototype,S=m(_.toString),M=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,D=m(M.exec);g&&!v&&f(_,"name",{configurable:!0,get:function(){try{return D(M,S(this))[1]}catch{return""}}})},8862:function(I,u,h){var g=h(2109),v=h(5005),m=h(2104),f=h(6916),_=h(1702),S=h(7293),M=h(614),D=h(2190),R=h(206),V=h(8044),B=h(6293),U=String,F=v("JSON","stringify"),j=_(/./.exec),P=_("".charAt),Q=_("".charCodeAt),$=_("".replace),oe=_(1..toString),X=/[\uD800-\uDFFF]/g,ie=/^[\uD800-\uDBFF]$/,q=/^[\uDC00-\uDFFF]$/,se=!B||S(function(){var ue=v("Symbol")("stringify detection");return"[null]"!==F([ue])||"{}"!==F({a:ue})||"{}"!==F(Object(ue))}),ne=S(function(){return'"\\udf06\\ud834"'!==F("\udf06\ud834")||'"\\udead"'!==F("\udead")}),Ce=function(ue,fe){var ee=R(arguments),de=V(fe);if(M(de)||void 0!==ue&&!D(ue))return ee[1]=function(pe,ce){if(M(de)&&(ce=f(de,this,U(pe),ce)),!D(ce))return ce},m(F,null,ee)},xe=function(ue,fe,ee){var de=P(ee,fe-1),pe=P(ee,fe+1);return j(ie,ue)&&!j(q,pe)||j(q,ue)&&!j(ie,de)?"\\u"+oe(Q(ue,0),16):ue};F&&g({target:"JSON",stat:!0,arity:3,forced:se||ne},{stringify:function(ue,fe,ee){var de=R(arguments),pe=m(se?Ce:F,null,de);return ne&&"string"==typeof pe?$(pe,X,xe):pe}})},9653:function(I,u,h){var g=h(2109),v=h(1913),m=h(9781),f=h(7854),_=h(857),S=h(1702),M=h(4705),D=h(2597),R=h(9587),V=h(7976),B=h(2190),U=h(7593),F=h(7293),j=h(8006).f,P=h(1236).f,Q=h(3070).f,$=h(863),oe=h(3111).trim,X="Number",ie=f[X],q=_[X],se=ie.prototype,ne=f.TypeError,Ce=S("".slice),xe=S("".charCodeAt),fe=M(X,!ie(" 0o1")||!ie("0b1")||ie("+0x1")),ee=function(pe){var ce,Me,ae=arguments.length<1?0:ie("bigint"==typeof(Me=U(pe,"number"))?Me:function(pe){var ce,ae,ye,Me,_e,Fe,Ue,Ge,$e=U(pe,"number");if(B($e))throw ne("Cannot convert a Symbol value to a number");if("string"==typeof $e&&$e.length>2)if($e=oe($e),43===(ce=xe($e,0))||45===ce){if(88===(ae=xe($e,2))||120===ae)return NaN}else if(48===ce){switch(xe($e,1)){case 66:case 98:ye=2,Me=49;break;case 79:case 111:ye=8,Me=55;break;default:return+$e}for(Fe=(_e=Ce($e,2)).length,Ue=0;Ue<Fe;Ue++)if((Ge=xe(_e,Ue))<48||Ge>Me)return NaN;return parseInt(_e,ye)}return+$e}(Me));return V(se,ce=this)&&F(function(){$(ce)})?R(Object(ae),this,ee):ae};ee.prototype=se,fe&&!v&&(se.constructor=ee),g({global:!0,constructor:!0,wrap:!0,forced:fe},{Number:ee});var de=function(pe,ce){for(var ae,ye=m?j(ce):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Me=0;ye.length>Me;Me++)D(ce,ae=ye[Me])&&!D(pe,ae)&&Q(pe,ae,P(ce,ae))};v&&q&&de(_[X],q),(fe||v)&&de(_[X],ie)},3161:function(I,u,h){h(2109)({target:"Number",stat:!0},{isInteger:h(5988)})},9601:function(I,u,h){var g=h(2109),v=h(1574);g({target:"Object",stat:!0,arity:2,forced:Object.assign!==v},{assign:v})},9595:function(I,u,h){var g=h(2109),v=h(9781),m=h(9026),f=h(9662),_=h(7908),S=h(3070);v&&g({target:"Object",proto:!0,forced:m},{__defineGetter__:function(M,D){S.f(_(this),M,{get:f(D),enumerable:!0,configurable:!0})}})},5003:function(I,u,h){var g=h(2109),v=h(7293),m=h(5656),f=h(1236).f,_=h(9781);g({target:"Object",stat:!0,forced:!_||v(function(){f(1)}),sham:!_},{getOwnPropertyDescriptor:function(S,M){return f(m(S),M)}})},9337:function(I,u,h){var g=h(2109),v=h(9781),m=h(3887),f=h(5656),_=h(1236),S=h(6135);g({target:"Object",stat:!0,sham:!v},{getOwnPropertyDescriptors:function(M){for(var D,R,V=f(M),B=_.f,U=m(V),F={},j=0;U.length>j;)void 0!==(R=B(V,D=U[j++]))&&S(F,D,R);return F}})},6210:function(I,u,h){var g=h(2109),v=h(7293),m=h(1156).f;g({target:"Object",stat:!0,forced:v(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:m})},9660:function(I,u,h){var g=h(2109),v=h(6293),m=h(7293),f=h(5181),_=h(7908);g({target:"Object",stat:!0,forced:!v||m(function(){f.f(1)})},{getOwnPropertySymbols:function(S){var M=f.f;return M?M(_(S)):[]}})},7941:function(I,u,h){var g=h(2109),v=h(7908),m=h(1956);g({target:"Object",stat:!0,forced:h(7293)(function(){m(1)})},{keys:function(f){return m(v(f))}})},1539:function(I,u,h){var g=h(1694),v=h(8052),m=h(288);g||v(Object.prototype,"toString",m,{unsafe:!0})},4603:function(I,u,h){var g=h(9781),v=h(7854),m=h(1702),f=h(4705),_=h(9587),S=h(8880),M=h(8006).f,D=h(7976),R=h(7850),V=h(1340),B=h(4706),U=h(2999),F=h(2626),j=h(8052),P=h(7293),Q=h(2597),$=h(9909).enforce,oe=h(6340),X=h(5112),ie=h(9441),q=h(7168),se=X("match"),ne=v.RegExp,Ce=ne.prototype,xe=v.SyntaxError,ue=m(Ce.exec),fe=m("".charAt),ee=m("".replace),de=m("".indexOf),pe=m("".slice),ce=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,ae=/a/g,ye=/a/g,Me=new ne(ae)!==ae,_e=U.MISSED_STICKY,Fe=U.UNSUPPORTED_Y;if(f("RegExp",g&&(!Me||_e||ie||q||P(function(){return ye[se]=!1,ne(ae)!==ae||ne(ye)===ye||"/a/i"!==String(ne(ae,"i"))})))){for(var Ge=function(Pe,je){var ht,Re,tt,it,qe,Oe,Te=D(Ce,this),Ne=R(Pe),rt=void 0===je,xt=[],gt=Pe;if(!Te&&Ne&&rt&&Pe.constructor===Ge)return Pe;if((Ne||D(Ce,Pe))&&(Pe=Pe.source,rt&&(je=B(gt))),Pe=void 0===Pe?"":V(Pe),je=void 0===je?"":V(je),gt=Pe,ie&&"dotAll"in ae&&(Re=!!je&&de(je,"s")>-1)&&(je=ee(je,/s/g,"")),ht=je,_e&&"sticky"in ae&&(tt=!!je&&de(je,"y")>-1)&&Fe&&(je=ee(je,/y/g,"")),q&&(Pe=(it=function(on){for(var Qt,Gt=on.length,Vn=0,un="",an=[],cn={},_i=!1,vi=!1,qn=0,Pi="";Vn<=Gt;Vn++){if("\\"===(Qt=fe(on,Vn)))Qt+=fe(on,++Vn);else if("]"===Qt)_i=!1;else if(!_i)switch(!0){case"["===Qt:_i=!0;break;case"("===Qt:ue(ce,pe(on,Vn+1))&&(Vn+=2,vi=!0),un+=Qt,qn++;continue;case">"===Qt&&vi:if(""===Pi||Q(cn,Pi))throw new xe("Invalid capture group name");cn[Pi]=!0,an[an.length]=[Pi,qn],vi=!1,Pi="";continue}vi?Pi+=Qt:un+=Qt}return[un,an]}(Pe))[0],xt=it[1]),qe=_(ne(Pe,je),Te?this:Ce,Ge),(Re||tt||xt.length)&&(Oe=$(qe),Re&&(Oe.dotAll=!0,Oe.raw=Ge(function(on){for(var Qt,Gt=on.length,Vn=0,un="",an=!1;Vn<=Gt;Vn++)"\\"!==(Qt=fe(on,Vn))?an||"."!==Qt?("["===Qt?an=!0:"]"===Qt&&(an=!1),un+=Qt):un+="[\\s\\S]":un+=Qt+fe(on,++Vn);return un}(Pe),ht)),tt&&(Oe.sticky=!0),xt.length&&(Oe.groups=xt)),Pe!==gt)try{S(qe,"source",""===gt?"(?:)":gt)}catch{}return qe},$e=M(ne),He=0;$e.length>He;)F(Ge,ne,$e[He++]);Ce.constructor=Ge,Ge.prototype=Ce,j(v,"RegExp",Ge,{constructor:!0})}oe("RegExp")},4916:function(I,u,h){var g=h(2109),v=h(2261);g({target:"RegExp",proto:!0,forced:/./.exec!==v},{exec:v})},9714:function(I,u,h){var g=h(6530).PROPER,v=h(8052),m=h(9670),f=h(1340),_=h(7293),S=h(4706),M="toString",D=RegExp.prototype[M];(_(function(){return"/a/b"!==D.call({source:"a",flags:"b"})})||g&&D.name!==M)&&v(RegExp.prototype,M,function(){var B=m(this);return"/"+f(B.source)+"/"+f(S(B))},{unsafe:!0})},2023:function(I,u,h){var g=h(2109),v=h(1702),m=h(3929),f=h(4488),_=h(1340),S=h(4964),M=v("".indexOf);g({target:"String",proto:!0,forced:!S("includes")},{includes:function(D){return!!~M(_(f(this)),_(m(D)),arguments.length>1?arguments[1]:void 0)}})},8783:function(I,u,h){var g=h(8710).charAt,v=h(1340),m=h(9909),f=h(1656),_=h(6178),S="String Iterator",M=m.set,D=m.getterFor(S);f(String,"String",function(R){M(this,{type:S,string:v(R),index:0})},function(){var R,V=D(this),B=V.string,U=V.index;return U>=B.length?_(void 0,!0):(R=g(B,U),V.index+=R.length,_(R,!1))})},6373:function(I,u,h){var g=h(2109),v=h(6916),m=h(1470),f=h(3061),_=h(6178),S=h(4488),M=h(7466),D=h(1340),R=h(9670),V=h(8554),B=h(4326),U=h(7850),F=h(4706),j=h(8173),P=h(8052),Q=h(7293),$=h(5112),oe=h(6707),X=h(1530),ie=h(7651),q=h(9909),se=h(1913),ne=$("matchAll"),Ce="RegExp String",xe=Ce+" Iterator",ue=q.set,fe=q.getterFor(xe),ee=RegExp.prototype,de=TypeError,pe=m("".indexOf),ce=m("".matchAll),ae=!!ce&&!Q(function(){ce("a",/./)}),ye=f(function(_e,Fe,Ue,Ge){ue(this,{type:xe,regexp:_e,string:Fe,global:Ue,unicode:Ge,done:!1})},Ce,function(){var _e=fe(this);if(_e.done)return _(void 0,!0);var Fe=_e.regexp,Ue=_e.string,Ge=ie(Fe,Ue);return null===Ge?(_e.done=!0,_(void 0,!0)):_e.global?(""===D(Ge[0])&&(Fe.lastIndex=X(Ue,M(Fe.lastIndex),_e.unicode)),_(Ge,!1)):(_e.done=!0,_(Ge,!1))}),Me=function(_e){var Fe,Ue,Ge,$e=R(this),He=D(_e),Pe=oe($e,RegExp),je=D(F($e));return Fe=new Pe(Pe===RegExp?$e.source:$e,je),Ue=!!~pe(je,"g"),Ge=!!~pe(je,"u"),Fe.lastIndex=M($e.lastIndex),new ye(Fe,He,Ue,Ge)};g({target:"String",proto:!0,forced:ae},{matchAll:function(_e){var Fe,Ue,Ge,$e,He=S(this);if(V(_e)){if(ae)return ce(He,_e)}else{if(U(_e)&&(Fe=D(S(F(_e))),!~pe(Fe,"g")))throw de("`.matchAll` does not allow non-global regexes");if(ae)return ce(He,_e);if(void 0===(Ge=j(_e,ne))&&se&&"RegExp"===B(_e)&&(Ge=Me),Ge)return v(Ge,_e,He)}return Ue=D(He),$e=new RegExp(_e,"g"),se?v(Me,$e,Ue):$e[ne](Ue)}}),se||ne in ee||P(ee,ne,Me)},4723:function(I,u,h){var g=h(6916),v=h(7007),m=h(9670),f=h(8554),_=h(7466),S=h(1340),M=h(4488),D=h(8173),R=h(1530),V=h(7651);v("match",function(B,U,F){return[function(j){var P=M(this),Q=f(j)?void 0:D(j,B);return Q?g(Q,j,P):new RegExp(j)[B](S(P))},function(j){var P=m(this),Q=S(j),$=F(U,P,Q);if($.done)return $.value;if(!P.global)return V(P,Q);var oe=P.unicode;P.lastIndex=0;for(var X,ie=[],q=0;null!==(X=V(P,Q));){var se=S(X[0]);ie[q]=se,""===se&&(P.lastIndex=R(Q,_(P.lastIndex),oe)),q++}return 0===q?null:ie}]})},5306:function(I,u,h){var g=h(2104),v=h(6916),m=h(1702),f=h(7007),_=h(7293),S=h(9670),M=h(614),D=h(8554),R=h(9303),V=h(7466),B=h(1340),U=h(4488),F=h(1530),j=h(8173),P=h(647),Q=h(7651),$=h(5112)("replace"),oe=Math.max,X=Math.min,ie=m([].concat),q=m([].push),se=m("".indexOf),ne=m("".slice),Ce="$0"==="a".replace(/./,"$0"),xe=!!/./[$]&&""===/./[$]("a","$0");f("replace",function(ue,fe,ee){var de=xe?"$":"$0";return[function(pe,ce){var ae=U(this),ye=D(pe)?void 0:j(pe,$);return ye?v(ye,pe,ae,ce):v(fe,B(ae),pe,ce)},function(pe,ce){var ae=S(this),ye=B(pe);if("string"==typeof ce&&-1===se(ce,de)&&-1===se(ce,"$<")){var Me=ee(fe,ae,ye,ce);if(Me.done)return Me.value}var _e=M(ce);_e||(ce=B(ce));var Fe,Ue=ae.global;Ue&&(Fe=ae.unicode,ae.lastIndex=0);for(var Ge,$e=[];null!==(Ge=Q(ae,ye))&&(q($e,Ge),Ue);)""===B(Ge[0])&&(ae.lastIndex=F(ye,V(ae.lastIndex),Fe));for(var He,Pe="",je=0,ht=0;ht<$e.length;ht++){for(var Re,tt=B((Ge=$e[ht])[0]),it=oe(X(R(Ge.index),ye.length),0),qe=[],Oe=1;Oe<Ge.length;Oe++)q(qe,void 0===(He=Ge[Oe])?He:String(He));var Te=Ge.groups;if(_e){var Ne=ie([tt],qe,it,ye);void 0!==Te&&q(Ne,Te),Re=B(g(ce,void 0,Ne))}else Re=P(tt,ye,it,qe,Te,ce);it>=je&&(Pe+=ne(ye,je,it)+Re,je=it+tt.length)}return Pe+ne(ye,je)}]},!!_(function(){var ue=/./;return ue.exec=function(){var fe=[];return fe.groups={a:"7"},fe},"7"!=="".replace(ue,"$<a>")})||!Ce||xe)},3123:function(I,u,h){var g=h(2104),v=h(6916),m=h(1702),f=h(7007),_=h(9670),S=h(8554),M=h(7850),D=h(4488),R=h(6707),V=h(1530),B=h(7466),U=h(1340),F=h(8173),j=h(1589),P=h(7651),Q=h(2261),$=h(2999),oe=h(7293),X=$.UNSUPPORTED_Y,ie=4294967295,q=Math.min,se=[].push,ne=m(/./.exec),Ce=m(se),xe=m("".slice),ue=!oe(function(){var fe=/(?:)/,ee=fe.exec;fe.exec=function(){return ee.apply(this,arguments)};var de="ab".split(fe);return 2!==de.length||"a"!==de[0]||"b"!==de[1]});f("split",function(fe,ee,de){var pe;return pe="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(ce,ae){var ye=U(D(this)),Me=void 0===ae?ie:ae>>>0;if(0===Me)return[];if(void 0===ce)return[ye];if(!M(ce))return v(ee,ye,ce,Me);for(var _e,Fe,Ue,Ge=[],He=0,Pe=new RegExp(ce.source,(ce.ignoreCase?"i":"")+(ce.multiline?"m":"")+(ce.unicode?"u":"")+(ce.sticky?"y":"")+"g");(_e=v(Q,Pe,ye))&&!((Fe=Pe.lastIndex)>He&&(Ce(Ge,xe(ye,He,_e.index)),_e.length>1&&_e.index<ye.length&&g(se,Ge,j(_e,1)),Ue=_e[0].length,He=Fe,Ge.length>=Me));)Pe.lastIndex===_e.index&&Pe.lastIndex++;return He===ye.length?!Ue&&ne(Pe,"")||Ce(Ge,""):Ce(Ge,xe(ye,He)),Ge.length>Me?j(Ge,0,Me):Ge}:"0".split(void 0,0).length?function(ce,ae){return void 0===ce&&0===ae?[]:v(ee,this,ce,ae)}:ee,[function(ce,ae){var ye=D(this),Me=S(ce)?void 0:F(ce,fe);return Me?v(Me,ce,ye,ae):v(pe,U(ye),ce,ae)},function(ce,ae){var ye=_(this),Me=U(ce),_e=de(pe,ye,Me,ae,pe!==ee);if(_e.done)return _e.value;var Fe=R(ye,RegExp),Ue=ye.unicode,$e=new Fe(X?"^(?:"+ye.source+")":ye,(ye.ignoreCase?"i":"")+(ye.multiline?"m":"")+(ye.unicode?"u":"")+(X?"g":"y")),He=void 0===ae?ie:ae>>>0;if(0===He)return[];if(0===Me.length)return null===P($e,Me)?[Me]:[];for(var Pe=0,je=0,ht=[];je<Me.length;){$e.lastIndex=X?0:je;var Re,tt=P($e,X?xe(Me,je):Me);if(null===tt||(Re=q(B($e.lastIndex+(X?je:0)),Me.length))===Pe)je=V(Me,je,Ue);else{if(Ce(ht,xe(Me,Pe,je)),ht.length===He)return ht;for(var it=1;it<=tt.length-1;it++)if(Ce(ht,tt[it]),ht.length===He)return ht;je=Pe=Re}}return Ce(ht,xe(Me,Pe)),ht}]},!ue,X)},3210:function(I,u,h){var g=h(2109),v=h(3111).trim;g({target:"String",proto:!0,forced:h(6091)("trim")},{trim:function(){return v(this)}})},4032:function(I,u,h){var g=h(2109),v=h(7854),m=h(6916),f=h(1702),_=h(1913),S=h(9781),M=h(6293),D=h(7293),R=h(2597),V=h(7976),B=h(9670),U=h(5656),F=h(4948),j=h(1340),P=h(9114),Q=h(30),$=h(1956),oe=h(8006),X=h(1156),ie=h(5181),q=h(1236),se=h(3070),ne=h(6048),Ce=h(5296),xe=h(8052),ue=h(7045),fe=h(2309),ee=h(6200),de=h(3501),pe=h(9711),ce=h(5112),ae=h(6061),ye=h(6800),Me=h(6532),_e=h(8003),Fe=h(9909),Ue=h(2092).forEach,Ge=ee("hidden"),$e="Symbol",He="prototype",Pe=Fe.set,je=Fe.getterFor($e),ht=Object[He],Re=v.Symbol,tt=Re&&Re[He],it=v.TypeError,qe=v.QObject,Oe=q.f,Te=se.f,Ne=X.f,rt=Ce.f,xt=f([].push),gt=fe("symbols"),on=fe("op-symbols"),Qt=fe("wks"),Gt=!qe||!qe[He]||!qe[He].findChild,Vn=S&&D(function(){return 7!==Q(Te({},"a",{get:function(){return Te(this,"a",{value:7}).a}})).a})?function(ci,Ei,Mi){var Zi=Oe(ht,Ei);Zi&&delete ht[Ei],Te(ci,Ei,Mi),Zi&&ci!==ht&&Te(ht,Ei,Zi)}:Te,un=function(ci,Ei){var Mi=gt[ci]=Q(tt);return Pe(Mi,{type:$e,tag:ci,description:Ei}),S||(Mi.description=Ei),Mi},an=function(ci,Ei,Mi){ci===ht&&an(on,Ei,Mi),B(ci);var Zi=F(Ei);return B(Mi),R(gt,Zi)?(Mi.enumerable?(R(ci,Ge)&&ci[Ge][Zi]&&(ci[Ge][Zi]=!1),Mi=Q(Mi,{enumerable:P(0,!1)})):(R(ci,Ge)||Te(ci,Ge,P(1,{})),ci[Ge][Zi]=!0),Vn(ci,Zi,Mi)):Te(ci,Zi,Mi)},cn=function(ci,Ei){B(ci);var Mi=U(Ei),Zi=$(Mi).concat(Pi(Mi));return Ue(Zi,function(ji){S&&!m(_i,Mi,ji)||an(ci,ji,Mi[ji])}),ci},_i=function(ci){var Ei=F(ci),Mi=m(rt,this,Ei);return!(this===ht&&R(gt,Ei)&&!R(on,Ei))&&(!(Mi||!R(this,Ei)||!R(gt,Ei)||R(this,Ge)&&this[Ge][Ei])||Mi)},vi=function(ci,Ei){var Mi=U(ci),Zi=F(Ei);if(Mi!==ht||!R(gt,Zi)||R(on,Zi)){var ji=Oe(Mi,Zi);return!ji||!R(gt,Zi)||R(Mi,Ge)&&Mi[Ge][Zi]||(ji.enumerable=!0),ji}},qn=function(ci){var Ei=Ne(U(ci)),Mi=[];return Ue(Ei,function(Zi){R(gt,Zi)||R(de,Zi)||xt(Mi,Zi)}),Mi},Pi=function(ci){var Ei=ci===ht,Mi=Ne(Ei?on:U(ci)),Zi=[];return Ue(Mi,function(ji){!R(gt,ji)||Ei&&!R(ht,ji)||xt(Zi,gt[ji])}),Zi};M||(Re=function(){if(V(tt,this))throw it("Symbol is not a constructor");var ci=arguments.length&&void 0!==arguments[0]?j(arguments[0]):void 0,Ei=pe(ci),Mi=function(Zi){this===ht&&m(Mi,on,Zi),R(this,Ge)&&R(this[Ge],Ei)&&(this[Ge][Ei]=!1),Vn(this,Ei,P(1,Zi))};return S&&Gt&&Vn(ht,Ei,{configurable:!0,set:Mi}),un(Ei,ci)},xe(tt=Re[He],"toString",function(){return je(this).tag}),xe(Re,"withoutSetter",function(ci){return un(pe(ci),ci)}),Ce.f=_i,se.f=an,ne.f=cn,q.f=vi,oe.f=X.f=qn,ie.f=Pi,ae.f=function(ci){return un(ce(ci),ci)},S&&(ue(tt,"description",{configurable:!0,get:function(){return je(this).description}}),_||xe(ht,"propertyIsEnumerable",_i,{unsafe:!0}))),g({global:!0,constructor:!0,wrap:!0,forced:!M,sham:!M},{Symbol:Re}),Ue($(Qt),function(ci){ye(ci)}),g({target:$e,stat:!0,forced:!M},{useSetter:function(){Gt=!0},useSimple:function(){Gt=!1}}),g({target:"Object",stat:!0,forced:!M,sham:!S},{create:function(ci,Ei){return void 0===Ei?Q(ci):cn(Q(ci),Ei)},defineProperty:an,defineProperties:cn,getOwnPropertyDescriptor:vi}),g({target:"Object",stat:!0,forced:!M},{getOwnPropertyNames:qn}),Me(),_e(Re,$e),de[Ge]=!0},1817:function(I,u,h){var g=h(2109),v=h(9781),m=h(7854),f=h(1702),_=h(2597),S=h(614),M=h(7976),D=h(1340),R=h(7045),V=h(9920),B=m.Symbol,U=B&&B.prototype;if(v&&S(B)&&(!("description"in U)||void 0!==B().description)){var F={},j=function(){var q=arguments.length<1||void 0===arguments[0]?void 0:D(arguments[0]),se=M(U,this)?new B(q):void 0===q?B():B(q);return""===q&&(F[se]=!0),se};V(j,B),j.prototype=U,U.constructor=j;var P="Symbol(description detection)"===String(B("description detection")),Q=f(U.valueOf),$=f(U.toString),oe=/^Symbol\((.*)\)[^)]+$/,X=f("".replace),ie=f("".slice);R(U,"description",{configurable:!0,get:function(){var q=Q(this);if(_(F,q))return"";var se=$(q),ne=P?ie(se,7,-1):X(se,oe,"$1");return""===ne?void 0:ne}}),g({global:!0,constructor:!0,forced:!0},{Symbol:j})}},763:function(I,u,h){var g=h(2109),v=h(5005),m=h(2597),f=h(1340),_=h(2309),S=h(2015),M=_("string-to-symbol-registry"),D=_("symbol-to-string-registry");g({target:"Symbol",stat:!0,forced:!S},{for:function(R){var V=f(R);if(m(M,V))return M[V];var B=v("Symbol")(V);return M[V]=B,D[B]=V,B}})},2165:function(I,u,h){h(6800)("iterator")},2526:function(I,u,h){h(4032),h(763),h(6620),h(8862),h(9660)},6620:function(I,u,h){var g=h(2109),v=h(2597),m=h(2190),f=h(6330),_=h(2309),S=h(2015),M=_("symbol-to-string-registry");g({target:"Symbol",stat:!0,forced:!S},{keyFor:function(D){if(!m(D))throw TypeError(f(D)+" is not a symbol");if(v(M,D))return M[D]}})},6649:function(I,u,h){var g=h(6800),v=h(6532);g("toPrimitive"),v()},3728:function(I,u,h){h(6373)},4747:function(I,u,h){var g=h(7854),v=h(8324),m=h(8509),f=h(8533),_=h(8880),S=function(D){if(D&&D.forEach!==f)try{_(D,"forEach",f)}catch{D.forEach=f}};for(var M in v)v[M]&&S(g[M]&&g[M].prototype);S(m)},3948:function(I,u,h){var g=h(7854),v=h(8324),m=h(8509),f=h(6992),_=h(8880),S=h(5112),M=S("iterator"),D=S("toStringTag"),R=f.values,V=function(U,F){if(U){if(U[M]!==R)try{_(U,M,R)}catch{U[M]=R}if(U[D]||_(U,D,F),v[F])for(var j in f)if(U[j]!==f[j])try{_(U,j,f[j])}catch{U[j]=f[j]}}};for(var B in v)V(g[B]&&g[B].prototype,B);V(m,"DOMTokenList")}},w={};function k(I){var u=w[I];if(void 0!==u)return u.exports;var h=w[I]={exports:{}};return y[I].call(h.exports,h,h.exports,k),h.exports}k.d=function(I,u){for(var h in u)k.o(u,h)&&!k.o(I,h)&&Object.defineProperty(I,h,{enumerable:!0,get:u[h]})},k.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),k.o=function(I,u){return Object.prototype.hasOwnProperty.call(I,u)},k.r=function(I){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})};var G={};return function(){function u(ee,de){if(ee){if("string"==typeof ee)return h(ee,de);var pe=Object.prototype.toString.call(ee).slice(8,-1);return"Object"===pe&&ee.constructor&&(pe=ee.constructor.name),"Map"===pe||"Set"===pe?Array.from(ee):"Arguments"===pe||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe)?h(ee,de):void 0}}function h(ee,de){(null==de||de>ee.length)&&(de=ee.length);for(var pe=0,ce=new Array(de);pe<de;pe++)ce[pe]=ee[pe];return ce}function g(ee){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ee)}function v(ee,de){for(var pe=0;pe<de.length;pe++){var ce=de[pe];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(ee,f(ce.key),ce)}}function m(ee,de,pe){return(de=f(de))in ee?Object.defineProperty(ee,de,{value:pe,enumerable:!0,configurable:!0,writable:!0}):ee[de]=pe,ee}function f(ee){var de=function(pe,ce){if("object"!==g(pe)||null===pe)return pe;var ae=pe[Symbol.toPrimitive];if(void 0!==ae){var ye=ae.call(pe,"string");if("object"!==g(ye))return ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(pe)}(ee);return"symbol"===g(de)?de:String(de)}k.r(G),k.d(G,{SimpleKeyboard:function(){return ue},default:function(){return fe}}),k(3210),k(4916),k(5306),k(2772),k(8309),k(3123),k(1539),k(9714),k(561),k(9600),k(9595),k(7042),typeof Element>"u"||"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),typeof self<"u"&&"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(ee){if("Element"in ee){var de="classList",pe="prototype",ce=ee.Element[pe],ae=Object,ye=String[pe].trim||function(){return this.replace(/^\s+|\s+$/g,"")},Me=Array[pe].indexOf||function(Pe){for(var je=0,ht=this.length;je<ht;je++)if(je in this&&this[je]===Pe)return je;return-1},_e=function(Pe,je){this.name=Pe,this.code=DOMException[Pe],this.message=je},Fe=function(Pe,je){if(""===je)throw new _e("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(je))throw new _e("INVALID_CHARACTER_ERR","The token must not contain space characters.");return Me.call(Pe,je)},Ue=function(Pe){for(var je=ye.call(Pe.getAttribute("class")||""),ht=je?je.split(/\s+/):[],Re=0,tt=ht.length;Re<tt;Re++)this.push(ht[Re]);this._updateClassName=function(){Pe.setAttribute("class",this.toString())}},Ge=Ue[pe]=[],$e=function(){return new Ue(this)};if(_e[pe]=Error[pe],Ge.item=function(Pe){return this[Pe]||null},Ge.contains=function(Pe){return~Fe(this,Pe+"")},Ge.add=function(){var Pe,je=arguments,ht=0,Re=je.length,tt=!1;do{~Fe(this,Pe=je[ht]+"")||(this.push(Pe),tt=!0)}while(++ht<Re);tt&&this._updateClassName()},Ge.remove=function(){var Pe,je,ht=arguments,Re=0,tt=ht.length,it=!1;do{for(je=Fe(this,Pe=ht[Re]+"");~je;)this.splice(je,1),it=!0,je=Fe(this,Pe)}while(++Re<tt);it&&this._updateClassName()},Ge.toggle=function(Pe,je){var ht=this.contains(Pe),Re=ht?!0!==je&&"remove":!1!==je&&"add";return Re&&this[Re](Pe),!0===je||!1===je?je:!ht},Ge.replace=function(Pe,je){var ht=Fe(Pe+"");~ht&&(this.splice(ht,1,je),this._updateClassName())},Ge.toString=function(){return this.join(" ")},ae.defineProperty){var He={get:$e,enumerable:!0,configurable:!0};try{ae.defineProperty(ce,de,He)}catch(Pe){void 0!==Pe.number&&-2146823252!==Pe.number||(He.enumerable=!1,ae.defineProperty(ce,de,He))}}else ae[pe].__defineGetter__&&ce.__defineGetter__(de,$e)}}(self),function(){var ee=document.createElement("_");if(ee.classList.add("c1","c2"),!ee.classList.contains("c2")){var de=function(ce){var ae=DOMTokenList.prototype[ce];DOMTokenList.prototype[ce]=function(ye){var Me,_e=arguments.length;for(Me=0;Me<_e;Me++)ae.call(this,ye=arguments[Me])}};de("add"),de("remove")}if(ee.classList.toggle("c3",!1),ee.classList.contains("c3")){var pe=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(ce,ae){return 1 in arguments&&!this.contains(ce)==!ae?ae:pe.call(this,ce)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(ce,ae){var ye=this.toString().split(" "),Me=ye.indexOf(ce+"");~Me&&(ye=ye.slice(Me),this.remove.apply(this,ye),this.add(ae),this.add.apply(this,ye.slice(1)))}),ee=null}()),k(7327),k(2222),k(7941),k(4603),k(3728),k(2707),k(6699),k(2023),k(4747),k(9601),k(1249),k(1038),k(8783),k(6649),k(6078),k(2526),k(1817),k(9653),k(5003),k(9337),k(2165),k(6992),k(3948),k(3161),k(4723),k(5827),k(6210);var _=function(){function ee(ae){var ye=ae.getOptions,Me=ae.getCaretPosition,_e=ae.getCaretPositionEnd,Fe=ae.dispatch;(function(Ue,Ge){if(!(Ue instanceof Ge))throw new TypeError("Cannot call a class as a function")})(this,ee),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(Ue){return Ue&&!("{"===Ue[0]&&"}"===Ue[Ue.length-1])}),this.getOptions=ye,this.getCaretPosition=Me,this.getCaretPositionEnd=_e,this.dispatch=Fe,ee.bindMethods(ee,this)}var de,pe,ce;return de=ee,pe=[{key:"getButtonType",value:function(ae){return ae.includes("{")&&ae.includes("}")&&"{//}"!==ae?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(ae){var ye=this.getButtonType(ae),Me=ae.replace("{","").replace("}",""),_e="";return"standardBtn"!==ye&&(_e=" hg-button-".concat(Me)),"hg-".concat(ye).concat(_e)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"\u2191","{arrowleft}":"\u2190","{arrowdown}":"\u2193","{arrowright}":"\u2192","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(ae,ye){return(ye=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Object.assign({},this.getDefaultDiplay(),ye):ye||this.getDefaultDiplay())[ae]||ae}},{key:"getUpdatedInput",value:function(ae,ye,Me){var _e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Me,Fe=arguments.length>4&&void 0!==arguments[4]&&arguments[4],Ue=this.getOptions(),Ge=[Me,_e,Fe],$e=ye;return("{bksp}"===ae||"{backspace}"===ae)&&$e.length>0?$e=this.removeAt.apply(this,[$e].concat(Ge)):("{delete}"===ae||"{forwarddelete}"===ae)&&$e.length>0?$e=this.removeForwardsAt.apply(this,[$e].concat(Ge)):"{space}"===ae?$e=this.addStringAt.apply(this,[$e," "].concat(Ge)):"{tab}"!==ae||"boolean"==typeof Ue.tabCharOnTab&&!1===Ue.tabCharOnTab?"{enter}"!==ae&&"{numpadenter}"!==ae||!Ue.newLineOnEnter?ae.includes("numpad")&&Number.isInteger(Number(ae[ae.length-2]))?$e=this.addStringAt.apply(this,[$e,ae[ae.length-2]].concat(Ge)):"{numpaddivide}"===ae?$e=this.addStringAt.apply(this,[$e,"/"].concat(Ge)):"{numpadmultiply}"===ae?$e=this.addStringAt.apply(this,[$e,"*"].concat(Ge)):"{numpadsubtract}"===ae?$e=this.addStringAt.apply(this,[$e,"-"].concat(Ge)):"{numpadadd}"===ae?$e=this.addStringAt.apply(this,[$e,"+"].concat(Ge)):"{numpaddecimal}"===ae?$e=this.addStringAt.apply(this,[$e,"."].concat(Ge)):"{"===ae||"}"===ae?$e=this.addStringAt.apply(this,[$e,ae].concat(Ge)):ae.includes("{")||ae.includes("}")||($e=this.addStringAt.apply(this,[$e,ae].concat(Ge))):$e=this.addStringAt.apply(this,[$e,"\n"].concat(Ge)):$e=this.addStringAt.apply(this,[$e,"\t"].concat(Ge)),Ue.debug&&console.log("Input will be: "+$e),$e}},{key:"updateCaretPos",value:function(ae){var Me=this.updateCaretPosAction(ae,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);this.dispatch(function(_e){_e.setCaretPosition(Me)})}},{key:"updateCaretPosAction",value:function(ae){var ye=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Me=this.getOptions(),_e=this.getCaretPosition();return null!=_e&&(ye?_e>0&&(_e-=ae):_e+=ae),Me.debug&&console.log("Caret at:",_e),_e}},{key:"addStringAt",value:function(ae,ye){var Me,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae.length,Fe=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ae.length,Ue=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return _e||0===_e?(Me=[ae.slice(0,_e),ye,ae.slice(Fe)].join(""),this.isMaxLengthReached()||Ue&&this.updateCaretPos(ye.length)):Me=ae+ye,Me}},{key:"removeAt",value:function(ae){var ye,Me=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae.length,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae.length,Fe=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===Me&&0===_e)return ae;if(Me===_e){var Ue=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;Me&&Me>=0?ae.substring(Me-2,Me).match(Ue)?(ye=ae.substr(0,Me-2)+ae.substr(Me),Fe&&this.updateCaretPos(2,!0)):(ye=ae.substr(0,Me-1)+ae.substr(Me),Fe&&this.updateCaretPos(1,!0)):ae.slice(-2).match(Ue)?(ye=ae.slice(0,-2),Fe&&this.updateCaretPos(2,!0)):(ye=ae.slice(0,-1),Fe&&this.updateCaretPos(1,!0))}else ye=ae.slice(0,Me)+ae.slice(_e),Fe&&this.dispatch(function(Ge){Ge.setCaretPosition(Me)});return ye}},{key:"removeForwardsAt",value:function(ae){var ye,Me=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae.length,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae.length,Fe=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return null!=ae&&ae.length&&null!==Me?(Me===_e?ye=ae.substring(Me,Me+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?ae.substr(0,Me)+ae.substr(Me+2):ae.substr(0,Me)+ae.substr(Me+1):(ye=ae.slice(0,Me)+ae.slice(_e),Fe&&this.dispatch(function(Ue){Ue.setCaretPosition(Me)})),ye):ae}},{key:"handleMaxLength",value:function(ae,ye){var Me=this.getOptions(),_e=Me.maxLength,Ue=ye.length-1>=_e;if(ye.length<=ae[Me.inputName||"default"].length)return!1;if(Number.isInteger(_e))return Me.debug&&console.log("maxLength (num) reached:",Ue),Ue?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if("object"===g(_e)){var Ge=ye.length-1>=_e[Me.inputName||"default"];return Me.debug&&console.log("maxLength (obj) reached:",Ge),Ge?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(ae){return ae?ae.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(ye,Me){return Me.length?ye+Me[0].toUpperCase()+Me.slice(1):ye}):""}},{key:"chunkArray",value:function(ae,ye){return function I(ee){return function(de){if(Array.isArray(de))return h(de)}(ee)||function(de){if(typeof Symbol<"u"&&null!=de[Symbol.iterator]||null!=de["@@iterator"])return Array.from(de)}(ee)||u(ee)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(Math.ceil(ae.length/ye))).map(function(Me,_e){return ae.slice(ye*_e,ye+ye*_e)})}},{key:"escapeRegex",value:function(ae){return ae.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(ae,ye){var Me=ae,_e=ye.indexOf("\u202b");return _e<ae&&-1!=_e&&Me--,ye.indexOf("\u202c")<ae&&-1!=_e&&Me--,Me<0?0:Me}}],ce=[{key:"bindMethods",value:function(ae,ye){var Me,_e=function(Ue,Ge){var $e=typeof Symbol<"u"&&Ue[Symbol.iterator]||Ue["@@iterator"];if(!$e){if(Array.isArray(Ue)||($e=u(Ue))){$e&&(Ue=$e);var He=0,Pe=function(){};return{s:Pe,n:function(){return He>=Ue.length?{done:!0}:{done:!1,value:Ue[He++]}},e:function(tt){throw tt},f:Pe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var je,ht=!0,Re=!1;return{s:function(){$e=$e.call(Ue)},n:function(){var tt=$e.next();return ht=tt.done,tt},e:function(tt){Re=!0,je=tt},f:function(){try{ht||null==$e.return||$e.return()}finally{if(Re)throw je}}}}(Object.getOwnPropertyNames(ae.prototype));try{for(_e.s();!(Me=_e.n()).done;){var Fe=Me.value;"constructor"===Fe||"bindMethods"===Fe||(ye[Fe]=ye[Fe].bind(ye))}}catch(Ue){_e.e(Ue)}finally{_e.f()}}}],pe&&v(de.prototype,pe),ce&&v(de,ce),Object.defineProperty(de,"prototype",{writable:!1}),ee}();m(_,"noop",function(){});var S=_;function M(ee){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ee)}function D(ee,de){for(var pe=0;pe<de.length;pe++){var ce=de[pe];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(ee,V(ce.key),ce)}}function R(ee,de,pe){return(de=V(de))in ee?Object.defineProperty(ee,de,{value:pe,enumerable:!0,configurable:!0,writable:!0}):ee[de]=pe,ee}function V(ee){var de=function(pe,ce){if("object"!==M(pe)||null===pe)return pe;var ae=pe[Symbol.toPrimitive];if(void 0!==ae){var ye=ae.call(pe,"string");if("object"!==M(ye))return ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(pe)}(ee);return"symbol"===M(de)?de:String(de)}var B=function(){function ee(ae){var ye=this,Me=ae.dispatch,_e=ae.getOptions;(function(Fe,Ue){if(!(Fe instanceof Ue))throw new TypeError("Cannot call a class as a function")})(this,ee),R(this,"getOptions",void 0),R(this,"dispatch",void 0),R(this,"isMofifierKey",function(Fe){return Fe.altKey||Fe.ctrlKey||Fe.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(Fe.code||Fe.key||ye.keyCodeToKey(Fe?.keyCode))}),this.dispatch=Me,this.getOptions=_e,S.bindMethods(ee,this)}var de,pe;return de=ee,(pe=[{key:"handleHighlightKeyDown",value:function(ae){var ye=this.getOptions();ye.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(ae)&&(ae.preventDefault(),ae.stopImmediatePropagation());var Me=this.getSimpleKeyboardLayoutKey(ae);this.dispatch(function(_e){var Fe,Ue,Ge=_e.getButtonElement(Me),$e=_e.getButtonElement("{".concat(Me,"}"));if(Ge)Fe=Ge,Ue=Me;else{if(!$e)return;Fe=$e,Ue="{".concat(Me,"}")}var He,Pe=function(ht){ht.style.background=ye.physicalKeyboardHighlightBgColor||"#dadce4",ht.style.color=ye.physicalKeyboardHighlightTextColor||"black"};if(Fe)if(Array.isArray(Fe)){if(Fe.forEach(function(ht){return Pe(ht)}),ye.physicalKeyboardHighlightPress)if(ye.physicalKeyboardHighlightPressUsePointerEvents)null===(He=Fe[0])||void 0===He||He.onpointerdown();else if(ye.physicalKeyboardHighlightPressUseClick){var je;null===(je=Fe[0])||void 0===je||je.click()}else _e.handleButtonClicked(Ue,ae)}else Pe(Fe),ye.physicalKeyboardHighlightPress&&(ye.physicalKeyboardHighlightPressUsePointerEvents?Fe.onpointerdown():ye.physicalKeyboardHighlightPressUseClick?Fe.click():_e.handleButtonClicked(Ue,ae))})}},{key:"handleHighlightKeyUp",value:function(ae){var ye=this.getOptions();ye.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(ae)&&(ae.preventDefault(),ae.stopImmediatePropagation());var Me=this.getSimpleKeyboardLayoutKey(ae);this.dispatch(function(_e){var Fe,Ue=_e.getButtonElement(Me)||_e.getButtonElement("{".concat(Me,"}")),Ge=function($e){$e.removeAttribute&&$e.removeAttribute("style")};Ue&&(Array.isArray(Ue)?(Ue.forEach(function($e){return Ge($e)}),ye.physicalKeyboardHighlightPressUsePointerEvents&&(null===(Fe=Ue[0])||void 0===Fe||Fe.onpointerup())):(Ge(Ue),ye.physicalKeyboardHighlightPressUsePointerEvents&&Ue.onpointerup()))})}},{key:"getSimpleKeyboardLayoutKey",value:function(ae){var ye,Me,_e=ae.code||ae.key||this.keyCodeToKey(ae?.keyCode);return(Me=null!=_e&&_e.includes("Numpad")||null!=_e&&_e.includes("Shift")||null!=_e&&_e.includes("Space")||null!=_e&&_e.includes("Backspace")||null!=_e&&_e.includes("Control")||null!=_e&&_e.includes("Alt")||null!=_e&&_e.includes("Meta")?ae.code||"":ae.key||this.keyCodeToKey(ae?.keyCode)||"").length>1?null===(ye=Me)||void 0===ye?void 0:ye.toLowerCase():Me}},{key:"keyCodeToKey",value:function(ae){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[ae]||""}}])&&D(de.prototype,pe),Object.defineProperty(de,"prototype",{writable:!1}),ee}();function U(ee){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ee)}function F(ee,de){for(var pe=0;pe<de.length;pe++){var ce=de[pe];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(ee,P(ce.key),ce)}}function j(ee,de,pe){return(de=P(de))in ee?Object.defineProperty(ee,de,{value:pe,enumerable:!0,configurable:!0,writable:!0}):ee[de]=pe,ee}function P(ee){var de=function(pe,ce){if("object"!==U(pe)||null===pe)return pe;var ae=pe[Symbol.toPrimitive];if(void 0!==ae){var ye=ae.call(pe,"string");if("object"!==U(ye))return ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(pe)}(ee);return"symbol"===U(de)?de:String(de)}var Q=function(){function ee(ae){var ye=ae.utilities,Me=ae.options;(function(_e,Fe){if(!(_e instanceof Fe))throw new TypeError("Cannot call a class as a function")})(this,ee),j(this,"utilities",void 0),j(this,"options",void 0),j(this,"candidateBoxElement",void 0),j(this,"pageIndex",0),j(this,"pageSize",void 0),this.utilities=ye,this.options=Me,S.bindMethods(ee,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var de,pe;return de=ee,pe=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(ae){var ye=this,Me=ae.candidateValue,_e=ae.targetElement,Fe=ae.onSelect;if(Me&&Me.length){var Ue=this.utilities.chunkArray(Me.split(" "),this.pageSize);this.renderPage({candidateListPages:Ue,targetElement:_e,pageIndex:this.pageIndex,nbPages:Ue.length,onItemSelected:function(Ge,$e){Fe(Ge,$e),ye.destroy()}})}}},{key:"renderPage",value:function(ae){var ye,Me=this,_e=ae.candidateListPages,Fe=ae.targetElement,Ue=ae.pageIndex,Ge=ae.nbPages,$e=ae.onItemSelected;null===(ye=this.candidateBoxElement)||void 0===ye||ye.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var He=document.createElement("ul");He.className="hg-candidate-box-list",_e[Ue].forEach(function(qe){var Oe,Te=document.createElement("li"),Ne=function(){var rt=new(Me.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(rt,"target",{value:Te}),rt};Te.className="hg-candidate-box-list-item",Te.innerHTML=(null===(Oe=Me.options.display)||void 0===Oe?void 0:Oe[qe])||qe,Me.options.useTouchEvents?Te.ontouchstart=function(rt){return $e(qe,rt||Ne())}:Te.onclick=function(){var rt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne();return $e(qe,rt)},He.appendChild(Te)});var Pe=Ue>0,je=document.createElement("div");je.classList.add("hg-candidate-box-prev"),Pe&&je.classList.add("hg-candidate-box-btn-active");var ht=function(){Pe&&Me.renderPage({candidateListPages:_e,targetElement:Fe,pageIndex:Ue-1,nbPages:Ge,onItemSelected:$e})};this.options.useTouchEvents?je.ontouchstart=ht:je.onclick=ht,this.candidateBoxElement.appendChild(je),this.candidateBoxElement.appendChild(He);var Re=Ue<Ge-1,tt=document.createElement("div");tt.classList.add("hg-candidate-box-next"),Re&&tt.classList.add("hg-candidate-box-btn-active");var it=function(){Re&&Me.renderPage({candidateListPages:_e,targetElement:Fe,pageIndex:Ue+1,nbPages:Ge,onItemSelected:$e})};this.options.useTouchEvents?tt.ontouchstart=it:tt.onclick=it,this.candidateBoxElement.appendChild(tt),Fe.prepend(this.candidateBoxElement)}}],pe&&F(de.prototype,pe),Object.defineProperty(de,"prototype",{writable:!1}),ee}(),$=Q;function oe(ee){return function(de){if(Array.isArray(de))return X(de)}(ee)||function(de){if(typeof Symbol<"u"&&null!=de[Symbol.iterator]||null!=de["@@iterator"])return Array.from(de)}(ee)||function(de,pe){if(de){if("string"==typeof de)return X(de,undefined);var ce=Object.prototype.toString.call(de).slice(8,-1);if("Object"===ce&&de.constructor&&(ce=de.constructor.name),"Map"===ce||"Set"===ce)return Array.from(de);if("Arguments"===ce||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce))return X(de,undefined)}}(ee)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(ee,de){(null==de||de>ee.length)&&(de=ee.length);for(var pe=0,ce=new Array(de);pe<de;pe++)ce[pe]=ee[pe];return ce}function ie(ee){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ee)}function q(ee,de){var pe=Object.keys(ee);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(ee);de&&(ce=ce.filter(function(ae){return Object.getOwnPropertyDescriptor(ee,ae).enumerable})),pe.push.apply(pe,ce)}return pe}function se(ee,de){for(var pe=0;pe<de.length;pe++){var ce=de[pe];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(ee,Ce(ce.key),ce)}}function ne(ee,de,pe){return(de=Ce(de))in ee?Object.defineProperty(ee,de,{value:pe,enumerable:!0,configurable:!0,writable:!0}):ee[de]=pe,ee}function Ce(ee){var de=function(pe,ce){if("object"!==ie(pe)||null===pe)return pe;var ae=pe[Symbol.toPrimitive];if(void 0!==ae){var ye=ae.call(pe,"string");if("object"!==ie(ye))return ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(pe)}(ee);return"symbol"===ie(de)?de:String(de)}var xe=function(){function ee(ae,ye){var Me=this;if(function(je,ht){if(!(je instanceof ht))throw new TypeError("Cannot call a class as a function")}(this,ee),ne(this,"input",void 0),ne(this,"options",void 0),ne(this,"utilities",void 0),ne(this,"caretPosition",void 0),ne(this,"caretPositionEnd",void 0),ne(this,"keyboardDOM",void 0),ne(this,"keyboardPluginClasses",void 0),ne(this,"keyboardDOMClass",void 0),ne(this,"buttonElements",void 0),ne(this,"currentInstanceName",void 0),ne(this,"allKeyboardInstances",void 0),ne(this,"keyboardInstanceNames",void 0),ne(this,"isFirstKeyboardInstance",void 0),ne(this,"physicalKeyboard",void 0),ne(this,"modules",void 0),ne(this,"activeButtonClass",void 0),ne(this,"holdInteractionTimeout",void 0),ne(this,"holdTimeout",void 0),ne(this,"isMouseHold",void 0),ne(this,"initialized",void 0),ne(this,"candidateBox",void 0),ne(this,"keyboardRowsDOM",void 0),ne(this,"defaultName","default"),ne(this,"activeInputElement",null),ne(this,"handleParams",function(je,ht){var Re,tt,it;if("string"==typeof je)Re=je.split(".").join(""),tt=document.querySelector(".".concat(Re)),it=ht;else if(je instanceof HTMLDivElement){if(!je.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");Re=je.className.split(" ")[0],tt=je,it=ht}else Re="simple-keyboard",tt=document.querySelector(".".concat(Re)),it=je;return{keyboardDOMClass:Re,keyboardDOM:tt,options:it}}),ne(this,"getOptions",function(){return Me.options}),ne(this,"getCaretPosition",function(){return Me.caretPosition}),ne(this,"getCaretPositionEnd",function(){return Me.caretPositionEnd}),ne(this,"registerModule",function(je,ht){Me.modules[je]||(Me.modules[je]={}),ht(Me.modules[je])}),ne(this,"getKeyboardClassString",function(){for(var je=arguments.length,ht=new Array(je),Re=0;Re<je;Re++)ht[Re]=arguments[Re];return[Me.keyboardDOMClass].concat(ht).filter(function(tt){return!!tt}).join(" ")}),typeof window<"u"){var _e=this.handleParams(ae,ye),Fe=_e.keyboardDOMClass,Ue=_e.keyboardDOM,Ge=_e.options,$e=void 0===Ge?{}:Ge;this.utilities=new S({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=Ue,this.options=function(je){for(var ht=1;ht<arguments.length;ht++){var Re=null!=arguments[ht]?arguments[ht]:{};ht%2?q(Object(Re),!0).forEach(function(tt){ne(je,tt,Re[tt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(je,Object.getOwnPropertyDescriptors(Re)):q(Object(Re)).forEach(function(tt){Object.defineProperty(je,tt,Object.getOwnPropertyDescriptor(Re,tt))})}return je}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},$e),this.keyboardPluginClasses="",S.bindMethods(ee,this);var He=this.options.inputName,Pe=void 0===He?this.defaultName:He;if(this.input={},this.input[Pe]="",this.keyboardDOMClass=Fe,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new B({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new $({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(Fe,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var de,pe;return de=ee,pe=[{key:"setCaretPosition",value:function(ae){var ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;this.caretPosition=ae,this.caretPositionEnd=ye}},{key:"getInputCandidates",value:function(ae){var ye=this,Me=this.options,_e=Me.layoutCandidates,Fe=Me.layoutCandidatesCaseSensitiveMatch;if(!_e||"object"!==ie(_e))return{};var Ue=Object.keys(_e).filter(function(He){var Pe=ae.substring(0,ye.getCaretPositionEnd()||0)||ae,je=new RegExp("".concat(ye.utilities.escapeRegex(He),"$"),Fe?"g":"gi");return!!oe(Pe.matchAll(je)).length});if(Ue.length>1){var Ge=Ue.sort(function(He,Pe){return Pe.length-He.length})[0];return{candidateKey:Ge,candidateValue:_e[Ge]}}if(Ue.length){var $e=Ue[0];return{candidateKey:$e,candidateValue:_e[$e]}}return{}}},{key:"showCandidatesBox",value:function(ae,ye,Me){var _e=this;this.candidateBox&&this.candidateBox.show({candidateValue:ye,targetElement:Me,onSelect:function(Fe,Ue){var Ge=_e.options,$e=Ge.layoutCandidatesCaseSensitiveMatch,Pe=Ge.enableLayoutCandidatesKeyPress,je=Fe;Ge.disableCandidateNormalization||(je=Fe.normalize("NFD"));var ht=_e.getInput(_e.options.inputName,!0),Re=_e.getCaretPositionEnd()||0,tt=ht.substring(0,Re||0)||ht,it=new RegExp("".concat(_e.utilities.escapeRegex(ae),"$"),$e?"g":"gi"),qe=tt.replace(it,je),Oe=ht.replace(tt,qe),Ne=(Re||ht.length)+(qe.length-tt.length);Ne<0&&(Ne=0),_e.setInput(Oe,_e.options.inputName,!0),_e.setCaretPosition(Ne),Pe&&"function"==typeof _e.options.onKeyPress&&_e.options.onKeyPress(Fe,Ue),"function"==typeof _e.options.onChange&&_e.options.onChange(_e.getInput(_e.options.inputName,!0),Ue),"function"==typeof _e.options.onChangeAll&&_e.options.onChangeAll(_e.getAllInputs(),Ue)}})}},{key:"handleButtonClicked",value:function(ae,ye){var Me=this.options,_e=Me.inputName,Fe=void 0===_e?this.defaultName:_e,Ue=Me.debug;if("{//}"!==ae){this.input[Fe]||(this.input[Fe]="");var Ge=this.utilities.getUpdatedInput(ae,this.input[Fe],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(ae)&&this.activeInputElement&&this.input[Fe]&&this.input[Fe]===Ge&&0===this.caretPosition&&this.caretPositionEnd===Ge.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(ae,ye);if("function"==typeof this.options.onKeyPress&&this.options.onKeyPress(ae,ye),this.input[Fe]!==Ge&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(Ge))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,Ge))return;var $e=this.utilities.getUpdatedInput(ae,this.input[Fe],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput($e,this.options.inputName,!0),Ue&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),ye?.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),"function"==typeof this.options.onChange&&this.options.onChange(this.getInput(this.options.inputName,!0),ye),"function"==typeof this.options.onChangeAll&&this.options.onChangeAll(this.getAllInputs(),ye),null!=ye&&ye.target&&this.options.enableLayoutCandidates){var He,Pe=this.getInputCandidates(Ge),je=Pe.candidateKey,ht=Pe.candidateValue;je&&ht?this.showCandidatesBox(je,ht,this.keyboardDOM):null===(He=this.candidateBox)||void 0===He||He.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),Ue&&console.log("Key pressed:",ae)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(ae){this.options.syncInstanceInputs?this.dispatch(function(ye){ye.isMouseHold=ae}):this.isMouseHold=ae}},{key:"handleButtonMouseDown",value:function(ae,ye){var Me=this;ye&&(this.options.preventMouseDownDefault&&ye.preventDefault(),this.options.stopMouseDownPropagation&&ye.stopPropagation(),ye.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(Me.getMouseHold()&&(!ae.includes("{")&&!ae.includes("}")||"{delete}"===ae||"{backspace}"===ae||"{bksp}"===ae||"{space}"===ae||"{tab}"===ae)||"{arrowright}"===ae||"{arrowleft}"===ae||"{arrowup}"===ae||"{arrowdown}"===ae)&&(Me.options.debug&&console.log("Button held:",ae),Me.handleButtonHold(ae)),clearTimeout(Me.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(ae,ye){var Me=this;ye&&(this.options.preventMouseUpDefault&&ye.preventDefault&&ye.preventDefault(),this.options.stopMouseUpPropagation&&ye.stopPropagation&&ye.stopPropagation(),!(ye.target===this.keyboardDOM||ye.target&&this.keyboardDOM.contains(ye.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(ye.target===this.candidateBox.candidateBoxElement||ye.target&&this.candidateBox.candidateBoxElement.contains(ye.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(_e){_e.classList.remove(Me.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),ae&&"function"==typeof this.options.onKeyReleased&&this.options.onKeyReleased(ae,ye)}},{key:"handleKeyboardContainerMouseDown",value:function(ae){this.options.preventMouseDownDefault&&ae.preventDefault()}},{key:"handleButtonHold",value:function(ae){var ye=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){ye.getMouseHold()?(ye.handleButtonClicked(ae),ye.handleButtonHold(ae)):clearTimeout(ye.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var ae=this;this.dispatch(function(ye){ye.replaceInput(ae.input),ye.setCaretPosition(ae.caretPosition,ae.caretPositionEnd)})}},{key:"clearInput",value:function(){this.input[arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var ae=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.inputName||this.defaultName;return this.options.syncInstanceInputs&&!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.syncInstanceInputs(),this.options.rtl?"\u202b"+this.input[ae].replace("\u202b","").replace("\u202c","")+"\u202c":this.input[ae]}},{key:"getAllInputs",value:function(){var ae=this,ye={};return Object.keys(this.input).forEach(function(Me){ye[Me]=ae.getInput(Me,!0)}),ye}},{key:"setInput",value:function(ae){var Me=arguments.length>2?arguments[2]:void 0;this.input[arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.inputName||this.defaultName]=ae,!Me&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(ae){this.input=ae}},{key:"setOptions",value:function(){var ae=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ye=this.changedOptions(ae);this.options=Object.assign(this.options,ae),ye.length&&(this.options.debug&&console.log("changedOptions",ye),this.onSetOptions(ye),this.render())}},{key:"changedOptions",value:function(ae){var ye=this;return Object.keys(ae).filter(function(Me){return JSON.stringify(ae[Me])!==JSON.stringify(ye.options[Me])})}},{key:"onSetOptions",value:function(){var ae=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];ae.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(ae.includes("layoutCandidatesPageSize")||ae.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new $({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(ae){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(ye){ae(window.SimpleKeyboardInstances[ye],ye)})}},{key:"addButtonTheme",value:function(ae,ye){var Me=this;ye&&ae&&(ae.split(" ").forEach(function(_e){ye.split(" ").forEach(function(Fe){Me.options.buttonTheme||(Me.options.buttonTheme=[]);var Ue=!1;Me.options.buttonTheme.map(function(Ge){if(null!=Ge&&Ge.class.split(" ").includes(Fe)){Ue=!0;var $e=Ge.buttons.split(" ");$e.includes(_e)||(Ue=!0,$e.push(_e),Ge.buttons=$e.join(" "))}return Ge}),Ue||Me.options.buttonTheme.push({class:Fe,buttons:ae})})}),this.render())}},{key:"removeButtonTheme",value:function(ae,ye){var Me=this;if(!ae&&!ye)return this.options.buttonTheme=[],void this.render();ae&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(ae.split(" ").forEach(function(_e){var Fe;null===(Fe=Me.options)||void 0===Fe||null===(Fe=Fe.buttonTheme)||void 0===Fe||Fe.map(function(Ue,Ge){if(Ue&&ye&&ye.includes(Ue.class)||!ye){var $e,He,Pe=null===($e=Ue)||void 0===$e?void 0:$e.buttons.split(" ").filter(function(je){return je!==_e});Ue&&null!=Pe&&Pe.length?Ue.buttons=Pe.join(" "):(null===(He=Me.options.buttonTheme)||void 0===He||He.splice(Ge,1),Ue=null)}return Ue})}),this.render())}},{key:"getButtonElement",value:function(ae){var ye,Me=this.buttonElements[ae];return Me&&(ye=Me.length>1?Me:Me[0]),ye}},{key:"inputPatternIsValid",value:function(ae){var ye,Me=this.options.inputPattern;if((ye=Me instanceof RegExp?Me:Me[this.options.inputName||this.defaultName])&&ae){var _e=ye.test(ae);return this.options.debug&&console.log('inputPattern ("'.concat(ye,'"): ').concat(_e?"passed":"did not pass!")),_e}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var ae=this.options.physicalKeyboardHighlightPreventDefault,ye=void 0!==ae&&ae;document.addEventListener("keyup",this.handleKeyUp,ye),document.addEventListener("keydown",this.handleKeyDown,ye),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(ae){this.caretEventHandler(ae),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(ae)}},{key:"handleKeyDown",value:function(ae){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(ae)}},{key:"handleMouseUp",value:function(ae){this.caretEventHandler(ae)}},{key:"handleTouchEnd",value:function(ae){this.caretEventHandler(ae)}},{key:"handleSelect",value:function(ae){this.caretEventHandler(ae)}},{key:"handleSelectionChange",value:function(ae){navigator.userAgent.includes("Firefox")||this.caretEventHandler(ae)}},{key:"caretEventHandler",value:function(ae){var ye,Me=this;ae.target.tagName&&(ye=ae.target.tagName.toLowerCase()),this.dispatch(function(_e){var Fe=ae.target===_e.keyboardDOM||ae.target&&_e.keyboardDOM.contains(ae.target);if(Me.options.syncInstanceInputs&&Array.isArray(ae.path)&&(Fe=ae.path.some(function($e){var He;return null==$e||null===(He=$e.hasAttribute)||void 0===He?void 0:He.call($e,"data-skInstance")})),("textarea"===ye||"input"===ye&&["text","search","url","tel","password"].includes(ae.target.type))&&!_e.options.disableCaretPositioning){var Ue=ae.target.selectionStart,Ge=ae.target.selectionEnd;_e.options.rtl&&(Ue=_e.utilities.getRtlOffset(Ue,_e.getInput()),Ge=_e.utilities.getRtlOffset(Ge,_e.getInput())),_e.setCaretPosition(Ue,Ge),Me.activeInputElement=ae.target,_e.options.debug&&console.log("Caret at: ",_e.getCaretPosition(),_e.getCaretPositionEnd(),ae&&ae.target.tagName.toLowerCase(),"(".concat(_e.keyboardDOMClass,")"),ae?.type)}else!_e.options.disableCaretPositioning&&Fe||"selectionchange"===ae?.type||(_e.setCaretPosition(null),Me.activeInputElement=null,_e.options.debug&&console.log('Caret position reset due to "'.concat(ae?.type,'" event'),ae))})}},{key:"recurseButtons",value:function(ae){var ye=this;ae&&Object.keys(this.buttonElements).forEach(function(Me){return ye.buttonElements[Me].forEach(ae)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var ae=this.options.physicalKeyboardHighlightPreventDefault,ye=void 0!==ae&&ae;document.removeEventListener("keyup",this.handleKeyUp,ye),document.removeEventListener("keydown",this.handleKeyDown,ye),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(Me){Me&&(Me.onpointerdown=null,Me.onpointerup=null,Me.onpointercancel=null,Me.ontouchstart=null,Me.ontouchend=null,Me.ontouchcancel=null,Me.onclick=null,Me.onmousedown=null,Me.onmouseup=null,Me.remove(),Me=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(ae){var ye=this.options.buttonTheme,Me=[];return Array.isArray(ye)&&ye.forEach(function(_e){if(_e&&_e.class&&"string"==typeof _e.class&&_e.buttons&&"string"==typeof _e.buttons){var Fe=_e.class.split(" ");_e.buttons.split(" ").includes(ae)&&(Me=[].concat(oe(Me),oe(Fe)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',_e)}),Me}},{key:"setDOMButtonAttributes",value:function(ae,ye){var Me=this.options.buttonAttributes;Array.isArray(Me)&&Me.forEach(function(_e){_e.attribute&&"string"==typeof _e.attribute&&_e.value&&"string"==typeof _e.value&&_e.buttons&&"string"==typeof _e.buttons?_e.buttons.split(" ").includes(ae)&&ye(_e.attribute,_e.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',_e)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(ae){if(ae.target.classList.contains("hg-button"))return ae.preventDefault(),ae.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),"function"==typeof this.options.onInit&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),"function"==typeof this.options.beforeFirstRender&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){"function"==typeof this.options.beforeRender&&this.options.beforeRender(this)}},{key:"onRender",value:function(){"function"==typeof this.options.onRender&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){"function"==typeof this.options.onModulesLoaded&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var ae=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(ye){var Me=new ye(ae);Me.init&&Me.init(ae)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(ae,ye){return!!this.modules[ae]&&this.modules[ae][ye]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(ae,ye,Me,_e){var Fe=this,Ue=Array.from(ae.children),Ge=0;return Ue.length&&Me.forEach(function($e,He){var Pe=_e[He];if(!(Pe&&Pe>$e))return!1;var je=$e-Ge,ht=Pe-Ge,Re=document.createElement("div");Re.className+="hg-button-container";var tt="".concat(Fe.options.layoutName,"-r").concat(ye,"c").concat(He);Re.setAttribute("data-skUID",tt);var it=Ue.splice(je,ht-je+1);Ge=ht-je,it.forEach(function(qe){return Re.appendChild(qe)}),Ue.splice(je,0,Re),ae.innerHTML="",Ue.forEach(function(qe){return ae.appendChild(qe)}),Fe.options.debug&&console.log("rowDOMContainer",it,je,ht,Ge+1)}),ae}},{key:"render",value:function(){var ae=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var ye="hg-layout-".concat(this.options.layoutName),Me=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},_e=this.options.useTouchEvents||!1,Ue=this.options.useMouseEvents||!1,Ge=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,ye,this.keyboardPluginClasses,_e?"hg-touch-events":""),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",Me[this.options.layoutName||this.defaultName].forEach(function($e,He){var Pe=$e.split(" ");ae.options.excludeFromLayout&&ae.options.excludeFromLayout[ae.options.layoutName||ae.defaultName]&&(Pe=Pe.filter(function(tt){return ae.options.excludeFromLayout&&!ae.options.excludeFromLayout[ae.options.layoutName||ae.defaultName].includes(tt)}));var je=document.createElement("div");je.className+="hg-row";var ht=[],Re=[];Pe.forEach(function(tt,it){var qe,Oe=!Ge&&"string"==typeof tt&&tt.length>1&&0===tt.indexOf("["),Te=!Ge&&"string"==typeof tt&&tt.length>1&&tt.indexOf("]")===tt.length-1;Oe&&(ht.push(it),tt=tt.replace(/\[/g,"")),Te&&(Re.push(it),tt=tt.replace(/\]/g,""));var Ne=ae.utilities.getButtonClass(tt),rt=ae.utilities.getButtonDisplayName(tt,ae.options.display,ae.options.mergeDisplay),gt=document.createElement(ae.options.useButtonTag?"button":"div");gt.className+="hg-button ".concat(Ne),(qe=gt.classList).add.apply(qe,oe(ae.getButtonThemeClasses(tt))),ae.setDOMButtonAttributes(tt,function(Gt,Vn){gt.setAttribute(Gt,Vn)}),ae.activeButtonClass="hg-activeButton",!ae.utilities.pointerEventsSupported()||_e||Ue?_e?(gt.ontouchstart=function(Gt){ae.handleButtonClicked(tt,Gt),ae.handleButtonMouseDown(tt,Gt)},gt.ontouchend=function(Gt){ae.handleButtonMouseUp(tt,Gt)},gt.ontouchcancel=function(Gt){ae.handleButtonMouseUp(tt,Gt)}):(gt.onclick=function(Gt){ae.setMouseHold(!1),"function"!=typeof ae.options.onKeyReleased&&ae.handleButtonClicked(tt,Gt)},gt.onmousedown=function(Gt){"function"!=typeof ae.options.onKeyReleased||ae.isMouseHold||ae.handleButtonClicked(tt,Gt),ae.handleButtonMouseDown(tt,Gt)},gt.onmouseup=function(Gt){ae.handleButtonMouseUp(tt,Gt)}):(gt.onpointerdown=function(Gt){ae.handleButtonClicked(tt,Gt),ae.handleButtonMouseDown(tt,Gt)},gt.onpointerup=function(Gt){ae.handleButtonMouseUp(tt,Gt)},gt.onpointercancel=function(Gt){ae.handleButtonMouseUp(tt,Gt)}),gt.setAttribute("data-skBtn",tt);var on="".concat(ae.options.layoutName,"-r").concat(He,"b").concat(it);gt.setAttribute("data-skBtnUID",on);var Qt=document.createElement("span");Qt.innerHTML=rt,gt.appendChild(Qt),ae.buttonElements[tt]||(ae.buttonElements[tt]=[]),ae.buttonElements[tt].push(gt),je.appendChild(gt)}),je=ae.parseRowDOMContainers(je,He,ht,Re),ae.keyboardRowsDOM.appendChild(je)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||_e||Ue?_e?(document.ontouchend=function($e){return ae.handleButtonMouseUp(void 0,$e)},document.ontouchcancel=function($e){return ae.handleButtonMouseUp(void 0,$e)},this.keyboardDOM.ontouchstart=function($e){return ae.handleKeyboardContainerMouseDown($e)}):_e||(document.onmouseup=function($e){return ae.handleButtonMouseUp(void 0,$e)},this.keyboardDOM.onmousedown=function($e){return ae.handleKeyboardContainerMouseDown($e)}):(document.onpointerup=function($e){return ae.handleButtonMouseUp(void 0,$e)},this.keyboardDOM.onpointerdown=function($e){return ae.handleKeyboardContainerMouseDown($e)}),this.onInit())}}],pe&&se(de.prototype,pe),Object.defineProperty(de,"prototype",{writable:!1}),ee}(),ue=xe,fe=xe}(),G}()},69579:Ae=>{"use strict";Ae.exports={eudist:function(w,k,G){for(var I=w.length,u=0,h=0;h<I;h++){var g=(w[h]||0)-(k[h]||0);u+=g*g}return G?Math.sqrt(u):u},mandist:function(w,k,G){for(var I=w.length,u=0,h=0;h<I;h++)u+=Math.abs((w[h]||0)-(k[h]||0));return G?Math.sqrt(u):u},dist:function(w,k,G){var I=Math.abs(w-k);return G?I:I*I}}},47180:(Ae,y,w)=>{"use strict";var k=w(69579),G=k.eudist,I=k.dist;Ae.exports={kmrand:function(h,g){for(var v={},m=[],f=g<<2,_=h.length,S=h[0].length>0;m.length<g&&f-- >0;){var M=h[Math.floor(Math.random()*_)],D=S?M.join("_"):""+M;v[D]||(v[D]=!0,m.push(M))}if(m.length<g)throw new Error("Error initializating clusters");return m},kmpp:function(h,g){var v=h[0].length?G:I,m=[],f=h.length,_=h[0].length>0,M=h[Math.floor(Math.random()*f)];for(_&&M.join("_"),m.push(M);m.length<g;){for(var R=[],V=m.length,B=0,U=[],F=0;F<f;F++){for(var j=1/0,P=0;P<V;P++){var Q=v(h[F],m[P]);Q<=j&&(j=Q)}R[F]=j}for(var $=0;$<f;$++)B+=R[$];for(var oe=0;oe<f;oe++)U[oe]={i:oe,v:h[oe],pr:R[oe]/B,cs:0};U.sort(function(se,ne){return se.pr-ne.pr}),U[0].cs=U[0].pr;for(var X=1;X<f;X++)U[X].cs=U[X-1].cs+U[X].pr;for(var ie=Math.random(),q=0;q<f-1&&U[q++].cs<ie;);m.push(U[q-1].v)}return m}}},93282:(Ae,y,w)=>{"use strict";var k=w(69579),G=w(47180),I=k.eudist,g=G.kmrand,v=G.kmpp;function f(S,M,D){D=D||[];for(var R=0;R<S;R++)D[R]=M;return D}Ae.exports=function _(S,M,D,R){var V=[],B=[],U=[],F=[],j=!1,P=R||1e4,Q=S.length,$=S[0].length,oe=$>0,X=[];if(D)V="kmrand"==D?g(S,M):"kmpp"==D?v(S,M):D;else for(var ie={};V.length<M;){var q=Math.floor(Math.random()*Q);ie[q]||(ie[q]=!0,V.push(S[q]))}do{f(M,0,X);for(var se=0;se<Q;se++){for(var ne=1/0,Ce=0,xe=0;xe<M;xe++)(F=oe?I(S[se],V[xe]):Math.abs(S[se]-V[xe]))<=ne&&(ne=F,Ce=xe);U[se]=Ce,X[Ce]++}for(var ue=[],ee=(B=[],0);ee<M;ee++)ue[ee]=oe?f($,0,ue[ee]):0,B[ee]=V[ee];if(oe){for(var de=0;de<M;de++)V[de]=[];for(var pe=0;pe<Q;pe++)for(var ae=ue[U[pe]],ye=S[pe],Me=0;Me<$;Me++)ae[Me]+=ye[Me];j=!0;for(var _e=0;_e<M;_e++){for(var Fe=V[_e],Ue=ue[_e],Ge=B[_e],$e=X[_e],He=0;He<$;He++)Fe[He]=Ue[He]/$e||0;if(j)for(var Pe=0;Pe<$;Pe++)if(Ge[Pe]!=Fe[Pe]){j=!1;break}}}else{for(var je=0;je<Q;je++)ue[U[je]]+=S[je];for(var Re=0;Re<M;Re++)V[Re]=ue[Re]/X[Re]||0;j=!0;for(var tt=0;tt<M;tt++)if(B[tt]!=V[tt]){j=!1;break}}j=j||--P<=0}while(!j);return{it:1e4-P,k:M,idxs:U,centroids:V}}},30629:function(Ae,y,w){var k,G;k=function(){var I=!1;function u(V){this.opts=function R(){for(var V=1;V<arguments.length;V++)for(var B in arguments[V])arguments[V].hasOwnProperty(B)&&(arguments[0][B]=arguments[V][B]);return arguments[0]}({},{onClose:null,onOpen:null,beforeOpen:null,beforeClose:null,stickyFooter:!1,footer:!1,cssClass:[],closeLabel:"Close",closeMethods:["overlay","button","escape"]},V),this.init()}function g(){this.modalBoxFooter&&(this.modalBoxFooter.style.width=this.modalBox.clientWidth+"px",this.modalBoxFooter.style.left=this.modalBox.offsetLeft+"px")}function v(){this.modal=document.createElement("div"),this.modal.classList.add("tingle-modal"),(0===this.opts.closeMethods.length||-1===this.opts.closeMethods.indexOf("overlay"))&&this.modal.classList.add("tingle-modal--noOverlayClose"),this.modal.style.display="none",this.opts.cssClass.forEach(function(V){"string"==typeof V&&this.modal.classList.add(V)},this),-1!==this.opts.closeMethods.indexOf("button")&&(this.modalCloseBtn=document.createElement("button"),this.modalCloseBtn.type="button",this.modalCloseBtn.classList.add("tingle-modal__close"),this.modalCloseBtnIcon=document.createElement("span"),this.modalCloseBtnIcon.classList.add("tingle-modal__closeIcon"),this.modalCloseBtnIcon.innerHTML='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.3 9.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3L5 6.4l3.3 3.3c.2.2.5.3.7.3.2 0 .5-.1.7-.3.4-.4.4-1 0-1.4L6.4 5l3.3-3.3c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L5 3.6 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4L3.6 5 .3 8.3c-.4.4-.4 1 0 1.4z" fill="#000" fill-rule="nonzero"/></svg>',this.modalCloseBtnLabel=document.createElement("span"),this.modalCloseBtnLabel.classList.add("tingle-modal__closeLabel"),this.modalCloseBtnLabel.innerHTML=this.opts.closeLabel,this.modalCloseBtn.appendChild(this.modalCloseBtnIcon),this.modalCloseBtn.appendChild(this.modalCloseBtnLabel)),this.modalBox=document.createElement("div"),this.modalBox.classList.add("tingle-modal-box"),this.modalBoxContent=document.createElement("div"),this.modalBoxContent.classList.add("tingle-modal-box__content"),this.modalBox.appendChild(this.modalBoxContent),-1!==this.opts.closeMethods.indexOf("button")&&this.modal.appendChild(this.modalCloseBtn),this.modal.appendChild(this.modalBox)}function m(){this.modalBoxFooter=document.createElement("div"),this.modalBoxFooter.classList.add("tingle-modal-box__footer"),this.modalBox.appendChild(this.modalBoxFooter)}function f(){this._events={clickCloseBtn:this.close.bind(this),clickOverlay:S.bind(this),resize:this.checkOverflow.bind(this),keyboardNav:_.bind(this)},-1!==this.opts.closeMethods.indexOf("button")&&this.modalCloseBtn.addEventListener("click",this._events.clickCloseBtn),this.modal.addEventListener("mousedown",this._events.clickOverlay),window.addEventListener("resize",this._events.resize),document.addEventListener("keydown",this._events.keyboardNav)}function _(V){-1!==this.opts.closeMethods.indexOf("escape")&&27===V.which&&this.isOpen()&&this.close()}function S(V){"MacIntel"===navigator.platform&&0==this.modal.offsetWidth-this.modal.clientWidth&&V.clientX>=this.modal.offsetWidth-15&&this.modal.scrollHeight!==this.modal.offsetHeight||-1!==this.opts.closeMethods.indexOf("overlay")&&!function M(V,B){for(;(V=V.parentElement)&&!V.classList.contains(B););return V}(V.target,"tingle-modal")&&V.clientX<this.modal.clientWidth&&this.close()}function D(){-1!==this.opts.closeMethods.indexOf("button")&&this.modalCloseBtn.removeEventListener("click",this._events.clickCloseBtn),this.modal.removeEventListener("mousedown",this._events.clickOverlay),window.removeEventListener("resize",this._events.resize),document.removeEventListener("keydown",this._events.keyboardNav)}return u.prototype.init=function(){if(!this.modal)return v.call(this),f.call(this),document.body.appendChild(this.modal,document.body.firstChild),this.opts.footer&&this.addFooter(),this},u.prototype._busy=function(V){I=V},u.prototype._isBusy=function(){return I},u.prototype.destroy=function(){null!==this.modal&&(this.isOpen()&&this.close(!0),D.call(this),this.modal.parentNode.removeChild(this.modal),this.modal=null)},u.prototype.isOpen=function(){return!!this.modal.classList.contains("tingle-modal--visible")},u.prototype.open=function(){if(!this._isBusy()){this._busy(!0);var V=this;return"function"==typeof V.opts.beforeOpen&&V.opts.beforeOpen(),this.modal.style.removeProperty?this.modal.style.removeProperty("display"):this.modal.style.removeAttribute("display"),document.getSelection().removeAllRanges(),this._scrollPosition=window.pageYOffset,document.body.classList.add("tingle-enabled"),document.body.style.top=-this._scrollPosition+"px",this.setStickyFooter(this.opts.stickyFooter),this.modal.classList.add("tingle-modal--visible"),"function"==typeof V.opts.onOpen&&V.opts.onOpen.call(V),V._busy(!1),this.checkOverflow(),this}},u.prototype.close=function(V){if(!this._isBusy()){if(this._busy(!0),V=V||!1,"function"==typeof this.opts.beforeClose&&!this.opts.beforeClose.call(this))return void this._busy(!1);document.body.classList.remove("tingle-enabled"),document.body.style.top=null,window.scrollTo({top:this._scrollPosition,behavior:"instant"}),this.modal.classList.remove("tingle-modal--visible");var U=this;U.modal.style.display="none","function"==typeof U.opts.onClose&&U.opts.onClose.call(this),U._busy(!1)}},u.prototype.setContent=function(V){return"string"==typeof V?this.modalBoxContent.innerHTML=V:(this.modalBoxContent.innerHTML="",this.modalBoxContent.appendChild(V)),this.isOpen()&&this.checkOverflow(),this},u.prototype.getContent=function(){return this.modalBoxContent},u.prototype.addFooter=function(){return m.call(this),this},u.prototype.setFooterContent=function(V){return this.modalBoxFooter.innerHTML=V,this},u.prototype.getFooterContent=function(){return this.modalBoxFooter},u.prototype.setStickyFooter=function(V){return this.isOverflow()||(V=!1),V?this.modalBox.contains(this.modalBoxFooter)&&(this.modalBox.removeChild(this.modalBoxFooter),this.modal.appendChild(this.modalBoxFooter),this.modalBoxFooter.classList.add("tingle-modal-box__footer--sticky"),g.call(this),this.modalBoxContent.style["padding-bottom"]=this.modalBoxFooter.clientHeight+20+"px"):this.modalBoxFooter&&(this.modalBox.contains(this.modalBoxFooter)||(this.modal.removeChild(this.modalBoxFooter),this.modalBox.appendChild(this.modalBoxFooter),this.modalBoxFooter.style.width="auto",this.modalBoxFooter.style.left="",this.modalBoxContent.style["padding-bottom"]="",this.modalBoxFooter.classList.remove("tingle-modal-box__footer--sticky"))),this},u.prototype.addFooterBtn=function(V,B,U){var F=document.createElement("button");return F.innerHTML=V,F.addEventListener("click",U),"string"==typeof B&&B.length&&B.split(" ").forEach(function(j){F.classList.add(j)}),this.modalBoxFooter.appendChild(F),F},u.prototype.resize=function(){console.warn("Resize is deprecated and will be removed in version 1.0")},u.prototype.isOverflow=function(){var V=window.innerHeight;return this.modalBox.clientHeight>=V},u.prototype.checkOverflow=function(){this.modal.classList.contains("tingle-modal--visible")&&(this.isOverflow()?this.modal.classList.add("tingle-modal--overflow"):this.modal.classList.remove("tingle-modal--overflow"),!this.isOverflow()&&this.opts.stickyFooter?this.setStickyFooter(!1):this.isOverflow()&&this.opts.stickyFooter&&(g.call(this),this.setStickyFooter(!0)))},{modal:u}},void 0!==(G=k.call(y,w,y,Ae))&&(Ae.exports=G)},77935:(Ae,y,w)=>{"use strict";w.r(y),w.d(y,{default:()=>k});class k{constructor(u=[],h=G){if(this.data=u,this.length=this.data.length,this.compare=h,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(u){this.data.push(u),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const u=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:h,compare:g}=this,v=h[u];for(;u>0;){const m=u-1>>1,f=h[m];if(g(v,f)>=0)break;h[u]=f,u=m}h[u]=v}_down(u){const{data:h,compare:g}=this,v=this.length>>1,m=h[u];for(;u<v;){let f=1+(u<<1),_=h[f];const S=f+1;if(S<this.length&&g(h[S],_)<0&&(f=S,_=h[S]),g(_,m)>=0)break;h[u]=_,u=f}h[u]=m}}function G(I,u){return I<u?-1:I>u?1:0}},14338:(Ae,y,w)=>{"use strict";function k(j){return j}function G(j){if(null==j)return k;var P,Q,$=j.scale[0],oe=j.scale[1],X=j.translate[0],ie=j.translate[1];return function(q,se){se||(P=Q=0);var ne=2,Ce=q.length,xe=new Array(Ce);for(xe[0]=(P+=q[0])*$+X,xe[1]=(Q+=q[1])*oe+ie;ne<Ce;)xe[ne]=q[ne],++ne;return xe}}function I(j){var Q,P=G(j.transform),$=1/0,oe=$,X=-$,ie=-$;function q(ne){(ne=P(ne))[0]<$&&($=ne[0]),ne[0]>X&&(X=ne[0]),ne[1]<oe&&(oe=ne[1]),ne[1]>ie&&(ie=ne[1])}function se(ne){switch(ne.type){case"GeometryCollection":ne.geometries.forEach(se);break;case"Point":q(ne.coordinates);break;case"MultiPoint":ne.coordinates.forEach(q)}}for(Q in j.arcs.forEach(function(ne){for(var ue,Ce=-1,xe=ne.length;++Ce<xe;)(ue=P(ne[Ce],Ce))[0]<$&&($=ue[0]),ue[0]>X&&(X=ue[0]),ue[1]<oe&&(oe=ue[1]),ue[1]>ie&&(ie=ue[1])}),j.objects)se(j.objects[Q]);return[$,oe,X,ie]}function h(j,P){return"string"==typeof P&&(P=j.objects[P]),"GeometryCollection"===P.type?{type:"FeatureCollection",features:P.geometries.map(function(Q){return g(j,Q)})}:g(j,P)}function g(j,P){var Q=P.id,$=P.bbox,oe=null==P.properties?{}:P.properties,X=v(j,P);return null==Q&&null==$?{type:"Feature",properties:oe,geometry:X}:null==$?{type:"Feature",id:Q,properties:oe,geometry:X}:{type:"Feature",id:Q,bbox:$,properties:oe,geometry:X}}function v(j,P){var Q=G(j.transform),$=j.arcs;function oe(Ce,xe){xe.length&&xe.pop();for(var ue=$[Ce<0?~Ce:Ce],fe=0,ee=ue.length;fe<ee;++fe)xe.push(Q(ue[fe],fe));Ce<0&&function u(j,P){for(var Q,$=j.length,oe=$-P;oe<--$;)Q=j[oe],j[oe++]=j[$],j[$]=Q}(xe,ee)}function X(Ce){return Q(Ce)}function ie(Ce){for(var xe=[],ue=0,fe=Ce.length;ue<fe;++ue)oe(Ce[ue],xe);return xe.length<2&&xe.push(xe[0]),xe}function q(Ce){for(var xe=ie(Ce);xe.length<4;)xe.push(xe[0]);return xe}function se(Ce){return Ce.map(q)}return function ne(Ce){var ue,xe=Ce.type;switch(xe){case"GeometryCollection":return{type:xe,geometries:Ce.geometries.map(ne)};case"Point":ue=X(Ce.coordinates);break;case"MultiPoint":ue=Ce.coordinates.map(X);break;case"LineString":ue=ie(Ce.arcs);break;case"MultiLineString":ue=Ce.arcs.map(ie);break;case"Polygon":ue=se(Ce.arcs);break;case"MultiPolygon":ue=Ce.arcs.map(se);break;default:return null}return{type:xe,coordinates:ue}}(P)}function m(j,P){var Q={},$={},oe={},X=[],ie=-1;function se(ne,Ce){for(var xe in ne){var ue=ne[xe];delete Ce[ue.start],delete ue.start,delete ue.end,ue.forEach(function(fe){Q[fe<0?~fe:fe]=1}),X.push(ue)}}return P.forEach(function(ne,Ce){var ue,xe=j.arcs[ne<0?~ne:ne];xe.length<3&&!xe[1][0]&&!xe[1][1]&&(ue=P[++ie],P[ie]=ne,P[Ce]=ue)}),P.forEach(function(ne){var fe,ee,Ce=function q(ne){var ue,Ce=j.arcs[ne<0?~ne:ne],xe=Ce[0];return j.transform?(ue=[0,0],Ce.forEach(function(fe){ue[0]+=fe[0],ue[1]+=fe[1]})):ue=Ce[Ce.length-1],ne<0?[ue,xe]:[xe,ue]}(ne),xe=Ce[0],ue=Ce[1];if(fe=oe[xe])if(delete oe[fe.end],fe.push(ne),fe.end=ue,ee=$[ue]){delete $[ee.start];var de=ee===fe?fe:fe.concat(ee);$[de.start=fe.start]=oe[de.end=ee.end]=de}else $[fe.start]=oe[fe.end]=fe;else if(fe=$[ue])if(delete $[fe.start],fe.unshift(ne),fe.start=xe,ee=oe[xe]){delete oe[ee.end];var pe=ee===fe?fe:ee.concat(fe);$[pe.start=ee.start]=oe[pe.end=fe.end]=pe}else $[fe.start]=oe[fe.end]=fe;else $[(fe=[ne]).start=xe]=oe[fe.end=ue]=fe}),se(oe,$),se($,oe),P.forEach(function(ne){Q[ne<0?~ne:ne]||X.push([ne])}),X}function f(j){return v(j,_.apply(this,arguments))}function _(j,P,Q){var $,oe,X;if(arguments.length>1)$=function S(j,P,Q){var X,$=[],oe=[];function ie(xe){var ue=xe<0?~xe:xe;(oe[ue]||(oe[ue]=[])).push({i:xe,g:X})}function q(xe){xe.forEach(ie)}function se(xe){xe.forEach(q)}return function Ce(xe){switch(X=xe,xe.type){case"GeometryCollection":xe.geometries.forEach(Ce);break;case"LineString":q(xe.arcs);break;case"MultiLineString":case"Polygon":se(xe.arcs);break;case"MultiPolygon":!function ne(xe){xe.forEach(se)}(xe.arcs)}}(P),oe.forEach(null==Q?function(xe){$.push(xe[0].i)}:function(xe){Q(xe[0].g,xe[xe.length-1].g)&&$.push(xe[0].i)}),$}(0,P,Q);else for(oe=0,$=new Array(X=j.arcs.length);oe<X;++oe)$[oe]=oe;return{type:"MultiLineString",arcs:m(j,$)}}function D(j){return v(j,R.apply(this,arguments))}function R(j,P){var Q={},$=[],oe=[];function ie(se){se.forEach(function(ne){ne.forEach(function(Ce){(Q[Ce=Ce<0?~Ce:Ce]||(Q[Ce]=[])).push(se)})}),$.push(se)}function q(se){return function M(j){for(var $,P=-1,Q=j.length,oe=j[Q-1],X=0;++P<Q;)X+=($=oe)[0]*(oe=j[P])[1]-$[1]*oe[0];return Math.abs(X)}(v(j,{type:"Polygon",arcs:[se]}).coordinates[0])}return P.forEach(function X(se){switch(se.type){case"GeometryCollection":se.geometries.forEach(X);break;case"Polygon":ie(se.arcs);break;case"MultiPolygon":se.arcs.forEach(ie)}}),$.forEach(function(se){if(!se._){var ne=[],Ce=[se];for(se._=1,oe.push(ne);se=Ce.pop();)ne.push(se),se.forEach(function(xe){xe.forEach(function(ue){Q[ue<0?~ue:ue].forEach(function(fe){fe._||(fe._=1,Ce.push(fe))})})})}}),$.forEach(function(se){delete se._}),{type:"MultiPolygon",arcs:oe.map(function(se){var Ce,ne=[];if(se.forEach(function(de){de.forEach(function(pe){pe.forEach(function(ce){Q[ce<0?~ce:ce].length<2&&ne.push(ce)})})}),(Ce=(ne=m(j,ne)).length)>1)for(var fe,ee,xe=1,ue=q(ne[0]);xe<Ce;++xe)(fe=q(ne[xe]))>ue&&(ee=ne[0],ne[0]=ne[xe],ne[xe]=ee,ue=fe);return ne}).filter(function(se){return se.length>0})}}function V(j,P){for(var Q=0,$=j.length;Q<$;){var oe=Q+$>>>1;j[oe]<P?Q=oe+1:$=oe}return Q}function B(j){var P={},Q=j.map(function(){return[]});function $(de,pe){de.forEach(function(ce){ce<0&&(ce=~ce);var ae=P[ce];ae?ae.push(pe):P[ce]=[pe]})}function oe(de,pe){de.forEach(function(ce){$(ce,pe)})}var ie={LineString:$,MultiLineString:oe,Polygon:oe,MultiPolygon:function(de,pe){de.forEach(function(ce){oe(ce,pe)})}};for(var q in j.forEach(function X(de,pe){"GeometryCollection"===de.type?de.geometries.forEach(function(ce){X(ce,pe)}):de.type in ie&&ie[de.type](de.arcs,pe)}),P)for(var se=P[q],ne=se.length,Ce=0;Ce<ne;++Ce)for(var xe=Ce+1;xe<ne;++xe){var ee,ue=se[Ce],fe=se[xe];(ee=Q[ue])[q=V(ee,fe)]!==fe&&ee.splice(q,0,fe),(ee=Q[fe])[q=V(ee,ue)]!==ue&&ee.splice(q,0,ue)}return Q}function U(j){if(null==j)return k;var P,Q,$=j.scale[0],oe=j.scale[1],X=j.translate[0],ie=j.translate[1];return function(q,se){se||(P=Q=0);var ne=2,Ce=q.length,xe=new Array(Ce),ue=Math.round((q[0]-X)/$),fe=Math.round((q[1]-ie)/oe);for(xe[0]=ue-P,P=ue,xe[1]=fe-Q,Q=fe;ne<Ce;)xe[ne]=q[ne],++ne;return xe}}function F(j,P){if(j.transform)throw new Error("already quantized");if(P&&P.scale)se=j.bbox;else{if(!((ie=Math.floor(P))>=2))throw new Error("n must be \u22652");var ie,Q=(se=j.bbox||I(j))[0],$=se[1],oe=se[2],X=se[3];P={scale:[oe-Q?(oe-Q)/(ie-1):1,X-$?(X-$)/(ie-1):1],translate:[Q,$]}}var se,ne,q=U(P),Ce=j.objects,xe={};function ue(de){return q(de)}function fe(de){var pe;switch(de.type){case"GeometryCollection":pe={type:"GeometryCollection",geometries:de.geometries.map(fe)};break;case"Point":pe={type:"Point",coordinates:ue(de.coordinates)};break;case"MultiPoint":pe={type:"MultiPoint",coordinates:de.coordinates.map(ue)};break;default:return de}return null!=de.id&&(pe.id=de.id),null!=de.bbox&&(pe.bbox=de.bbox),null!=de.properties&&(pe.properties=de.properties),pe}for(ne in Ce)xe[ne]=fe(Ce[ne]);return{type:"Topology",bbox:se,transform:P,objects:xe,arcs:j.arcs.map(function ee(de){var ye,pe=0,ce=1,ae=de.length,Me=new Array(ae);for(Me[0]=q(de[0],0);++pe<ae;)((ye=q(de[pe],pe))[0]||ye[1])&&(Me[ce++]=ye);return 1===ce&&(Me[ce++]=[0,0]),Me.length=ce,Me})}}w.r(y),w.d(y,{bbox:()=>I,feature:()=>h,merge:()=>D,mergeArcs:()=>R,mesh:()=>f,meshArcs:()=>_,neighbors:()=>B,quantize:()=>F,transform:()=>G,untransform:()=>U})},79828:(Ae,y,w)=>{"use strict";w.r(y),w.d(y,{topology:()=>oe});var k=Object.prototype.hasOwnProperty;function u(q,se,ne,Ce,xe,ue){3===arguments.length&&(Ce=ue=Array,xe=null);for(var fe=new Ce(q=1<<Math.max(4,Math.ceil(Math.log(q)/Math.LN2))),ee=new ue(q),de=q-1,pe=0;pe<q;++pe)fe[pe]=xe;return{set:function ce(_e,Fe){for(var Ue=se(_e)&de,Ge=fe[Ue],$e=0;Ge!=xe;){if(ne(Ge,_e))return ee[Ue]=Fe;if(++$e>=q)throw new Error("full hashmap");Ge=fe[Ue=Ue+1&de]}return fe[Ue]=_e,ee[Ue]=Fe,Fe},maybeSet:function ae(_e,Fe){for(var Ue=se(_e)&de,Ge=fe[Ue],$e=0;Ge!=xe;){if(ne(Ge,_e))return ee[Ue];if(++$e>=q)throw new Error("full hashmap");Ge=fe[Ue=Ue+1&de]}return fe[Ue]=_e,ee[Ue]=Fe,Fe},get:function ye(_e,Fe){for(var Ue=se(_e)&de,Ge=fe[Ue],$e=0;Ge!=xe;){if(ne(Ge,_e))return ee[Ue];if(++$e>=q)break;Ge=fe[Ue=Ue+1&de]}return Fe},keys:function Me(){for(var _e=[],Fe=0,Ue=fe.length;Fe<Ue;++Fe){var Ge=fe[Fe];Ge!=xe&&_e.push(Ge)}return _e}}}function h(q,se){return q[0]===se[0]&&q[1]===se[1]}var g=new ArrayBuffer(16),v=new Float64Array(g),m=new Uint32Array(g);function f(q){v[0]=q[0],v[1]=q[1];var se=m[0]^m[1];return 2147483647&(se<<5^se>>7^m[2]^m[3])}function M(q,se,ne,Ce){D(q,se,ne),D(q,se,se+Ce),D(q,se+Ce,ne)}function D(q,se,ne){for(var xe,Ce=se+(ne---se>>1);se<Ce;++se,--ne)xe=q[se],q[se]=q[ne],q[ne]=xe}function F(q){return null==q?{type:null}:("FeatureCollection"===q.type?j:"Feature"===q.type?P:Q)(q)}function j(q){var se={type:"GeometryCollection",geometries:q.features.map(P)};return null!=q.bbox&&(se.bbox=q.bbox),se}function P(q){var ne,se=Q(q.geometry);for(ne in null!=q.id&&(se.id=q.id),null!=q.bbox&&(se.bbox=q.bbox),q.properties){se.properties=q.properties;break}return se}function Q(q){if(null==q)return{type:null};var se="GeometryCollection"===q.type?{type:"GeometryCollection",geometries:q.geometries.map(Q)}:"Point"===q.type||"MultiPoint"===q.type?{type:q.type,coordinates:q.coordinates}:{type:q.type,arcs:q.coordinates};return null!=q.bbox&&(se.bbox=q.bbox),se}function oe(q,se){var ne=function G(q){var se=1/0,ne=1/0,Ce=-1/0,xe=-1/0;function ue(ae){null!=ae&&k.call(fe,ae.type)&&fe[ae.type](ae)}var fe={GeometryCollection:function(ae){ae.geometries.forEach(ue)},Point:function(ae){ee(ae.coordinates)},MultiPoint:function(ae){ae.coordinates.forEach(ee)},LineString:function(ae){de(ae.arcs)},MultiLineString:function(ae){ae.arcs.forEach(de)},Polygon:function(ae){ae.arcs.forEach(de)},MultiPolygon:function(ae){ae.arcs.forEach(pe)}};function ee(ae){var ye=ae[0],Me=ae[1];ye<se&&(se=ye),ye>Ce&&(Ce=ye),Me<ne&&(ne=Me),Me>xe&&(xe=Me)}function de(ae){ae.forEach(ee)}function pe(ae){ae.forEach(de)}for(var ce in q)ue(q[ce]);return Ce>=se&&xe>=ne?[se,ne,Ce,xe]:void 0}(q=function U(q){var ne,se={};for(ne in q)se[ne]=F(q[ne]);return se}(q)),Ce=se>0&&ne&&function $(q,se,ne){var Ce=se[0],xe=se[1],ue=se[2],fe=se[3],ee=ue-Ce?(ne-1)/(ue-Ce):1,de=fe-xe?(ne-1)/(fe-xe):1;function pe(Ge){return[Math.round((Ge[0]-Ce)*ee),Math.round((Ge[1]-xe)*de)]}function ce(Ge,$e){for(var Re,tt,it,qe,Oe,He=-1,Pe=0,je=Ge.length,ht=new Array(je);++He<je;)Re=Ge[He],qe=Math.round((Re[0]-Ce)*ee),Oe=Math.round((Re[1]-xe)*de),(qe!==tt||Oe!==it)&&(ht[Pe++]=[tt=qe,it=Oe]);for(ht.length=Pe;Pe<$e;)Pe=ht.push([ht[0][0],ht[0][1]]);return ht}function ae(Ge){return ce(Ge,2)}function ye(Ge){return ce(Ge,4)}function Me(Ge){return Ge.map(ye)}function _e(Ge){null!=Ge&&k.call(Fe,Ge.type)&&Fe[Ge.type](Ge)}var Fe={GeometryCollection:function(Ge){Ge.geometries.forEach(_e)},Point:function(Ge){Ge.coordinates=pe(Ge.coordinates)},MultiPoint:function(Ge){Ge.coordinates=Ge.coordinates.map(pe)},LineString:function(Ge){Ge.arcs=ae(Ge.arcs)},MultiLineString:function(Ge){Ge.arcs=Ge.arcs.map(ae)},Polygon:function(Ge){Ge.arcs=Me(Ge.arcs)},MultiPolygon:function(Ge){Ge.arcs=Ge.arcs.map(Me)}};for(var Ue in q)_e(q[Ue]);return{scale:[1/ee,1/de],translate:[Ce,xe]}}(q,ne,se),xe=function R(q){var Ce,ue,ee,de,se=q.coordinates,ne=q.lines,xe=q.rings,fe=ne.length+xe.length;for(delete q.lines,delete q.rings,ee=0,de=ne.length;ee<de;++ee)for(Ce=ne[ee];Ce=Ce.next;)++fe;for(ee=0,de=xe.length;ee<de;++ee)for(ue=xe[ee];ue=ue.next;)++fe;var pe=u(2*fe*1.4,f,h),ce=q.arcs=[];for(ee=0,de=ne.length;ee<de;++ee){Ce=ne[ee];do{ae(Ce)}while(Ce=Ce.next)}for(ee=0,de=xe.length;ee<de;++ee)if((ue=xe[ee]).next)do{ae(ue)}while(ue=ue.next);else ye(ue);function ae($e){var He,Pe,je,ht,Re,tt,it,qe;if(je=pe.get(He=se[$e[0]]))for(it=0,qe=je.length;it<qe;++it)if(Me(ht=je[it],$e))return $e[0]=ht[0],void($e[1]=ht[1]);if(Re=pe.get(Pe=se[$e[1]]))for(it=0,qe=Re.length;it<qe;++it)if(_e(tt=Re[it],$e))return $e[1]=tt[0],void($e[0]=tt[1]);je?je.push($e):pe.set(He,[$e]),Re?Re.push($e):pe.set(Pe,[$e]),ce.push($e)}function ye($e){var He,Pe,je,ht,Re;if(Pe=pe.get(se[$e[0]]))for(ht=0,Re=Pe.length;ht<Re;++ht){if(Fe(je=Pe[ht],$e))return $e[0]=je[0],void($e[1]=je[1]);if(Ue(je,$e))return $e[0]=je[1],void($e[1]=je[0])}if(Pe=pe.get(He=se[$e[0]+Ge($e)]))for(ht=0,Re=Pe.length;ht<Re;++ht){if(Fe(je=Pe[ht],$e))return $e[0]=je[0],void($e[1]=je[1]);if(Ue(je,$e))return $e[0]=je[1],void($e[1]=je[0])}Pe?Pe.push($e):pe.set(He,[$e]),ce.push($e)}function Me($e,He){var Pe=$e[0],je=He[0],ht=$e[1];if(Pe-ht!=je-He[1])return!1;for(;Pe<=ht;++Pe,++je)if(!h(se[Pe],se[je]))return!1;return!0}function _e($e,He){var Pe=$e[0],ht=$e[1],Re=He[1];if(Pe-ht!=He[0]-Re)return!1;for(;Pe<=ht;++Pe,--Re)if(!h(se[Pe],se[Re]))return!1;return!0}function Fe($e,He){var Pe=$e[0],je=He[0],tt=$e[1]-Pe;if(tt!==He[1]-je)return!1;for(var it=Ge($e),qe=Ge(He),Oe=0;Oe<tt;++Oe)if(!h(se[Pe+(Oe+it)%tt],se[je+(Oe+qe)%tt]))return!1;return!0}function Ue($e,He){var Pe=$e[0],Re=He[1],tt=$e[1]-Pe;if(tt!==Re-He[0])return!1;for(var it=Ge($e),qe=tt-Ge(He),Oe=0;Oe<tt;++Oe)if(!h(se[Pe+(Oe+it)%tt],se[Re-(Oe+qe)%tt]))return!1;return!0}function Ge($e){for(var He=$e[0],Pe=$e[1],je=He,ht=je,Re=se[je];++je<Pe;){var tt=se[je];(tt[0]<Re[0]||tt[0]===Re[0]&&tt[1]<Re[1])&&(ht=je,Re=tt)}return ht-He}return q}(function S(q){var ue,fe,ee,se=function _(q){var ce,ae,Me,_e,se=q.coordinates,ne=q.lines,Ce=q.rings,xe=function ht(){for(var Oe=u(1.4*se.length,Re,tt,Int32Array,-1,Int32Array),Te=new Int32Array(se.length),Ne=0,rt=se.length;Ne<rt;++Ne)Te[Ne]=Oe.maybeSet(Ne,Ne);return Te}(),ue=new Int32Array(se.length),fe=new Int32Array(se.length),ee=new Int32Array(se.length),de=new Int8Array(se.length),pe=0;for(ce=0,ae=se.length;ce<ae;++ce)ue[ce]=fe[ce]=ee[ce]=-1;for(ce=0,ae=ne.length;ce<ae;++ce){var Fe=ne[ce],Ue=Fe[0],Ge=Fe[1];for(Me=xe[Ue],_e=xe[++Ue],++pe,de[Me]=1;++Ue<=Ge;)je(ce,Me,Me=_e,_e=xe[Ue]);++pe,de[_e]=1}for(ce=0,ae=se.length;ce<ae;++ce)ue[ce]=-1;for(ce=0,ae=Ce.length;ce<ae;++ce){var $e=Ce[ce],He=$e[0]+1,Pe=$e[1];for(je(ce,xe[Pe-1],Me=xe[He-1],_e=xe[He]);++He<=Pe;)je(ce,Me,Me=_e,_e=xe[He])}function je(Oe,Te,Ne,rt){if(ue[Ne]!==Oe){ue[Ne]=Oe;var xt=fe[Ne];if(xt>=0){var gt=ee[Ne];(xt!==Te||gt!==rt)&&(xt!==rt||gt!==Te)&&(++pe,de[Ne]=1)}else fe[Ne]=Te,ee[Ne]=rt}}function Re(Oe){return f(se[Oe])}function tt(Oe,Te){return h(se[Oe],se[Te])}ue=fe=ee=null;var qe,it=function I(q,se,ne,Ce,xe){3===arguments.length&&(Ce=Array,xe=null);for(var ue=new Ce(q=1<<Math.max(4,Math.ceil(Math.log(q)/Math.LN2))),fe=q-1,ee=0;ee<q;++ee)ue[ee]=xe;return{add:function de(ae){for(var ye=se(ae)&fe,Me=ue[ye],_e=0;Me!=xe;){if(ne(Me,ae))return!0;if(++_e>=q)throw new Error("full hashset");Me=ue[ye=ye+1&fe]}return ue[ye]=ae,!0},has:function pe(ae){for(var ye=se(ae)&fe,Me=ue[ye],_e=0;Me!=xe;){if(ne(Me,ae))return!0;if(++_e>=q)break;Me=ue[ye=ye+1&fe]}return!1},values:function ce(){for(var ae=[],ye=0,Me=ue.length;ye<Me;++ye){var _e=ue[ye];_e!=xe&&ae.push(_e)}return ae}}}(1.4*pe,f,h);for(ce=0,ae=se.length;ce<ae;++ce)de[qe=xe[ce]]&&it.add(se[qe]);return it}(q),ne=q.coordinates,Ce=q.lines,xe=q.rings;for(fe=0,ee=Ce.length;fe<ee;++fe)for(var de=Ce[fe],pe=de[0],ce=de[1];++pe<ce;)se.has(ne[pe])&&(ue={0:pe,1:de[1]},de[1]=pe,de=de.next=ue);for(fe=0,ee=xe.length;fe<ee;++fe)for(var ae=xe[fe],ye=ae[0],Me=ye,_e=ae[1],Fe=se.has(ne[ye]);++Me<_e;)se.has(ne[Me])&&(Fe?(ue={0:Me,1:ae[1]},ae[1]=Me,ae=ae.next=ue):(M(ne,ye,_e,_e-Me),ne[_e]=ne[ye],Fe=!0,Me=ye));return q}(function B(q){var se=-1,ne=[],Ce=[],xe=[];function ue(ae){ae&&k.call(fe,ae.type)&&fe[ae.type](ae)}var fe={GeometryCollection:function(ae){ae.geometries.forEach(ue)},LineString:function(ae){ae.arcs=ee(ae.arcs)},MultiLineString:function(ae){ae.arcs=ae.arcs.map(ee)},Polygon:function(ae){ae.arcs=ae.arcs.map(de)},MultiPolygon:function(ae){ae.arcs=ae.arcs.map(pe)}};function ee(ae){for(var ye=0,Me=ae.length;ye<Me;++ye)xe[++se]=ae[ye];var _e={0:se-Me+1,1:se};return ne.push(_e),_e}function de(ae){for(var ye=0,Me=ae.length;ye<Me;++ye)xe[++se]=ae[ye];var _e={0:se-Me+1,1:se};return Ce.push(_e),_e}function pe(ae){return ae.map(de)}for(var ce in q)ue(q[ce]);return{type:"Topology",coordinates:xe,lines:ne,rings:Ce,objects:q}}(q))),ue=xe.coordinates,fe=u(1.4*xe.arcs.length,X,ie);function ee(ye){ye&&k.call(de,ye.type)&&de[ye.type](ye)}q=xe.objects,xe.bbox=ne,xe.arcs=xe.arcs.map(function(ye,Me){return fe.set(ye,Me),ue.slice(ye[0],ye[1]+1)}),delete xe.coordinates,ue=null;var de={GeometryCollection:function(ye){ye.geometries.forEach(ee)},LineString:function(ye){ye.arcs=pe(ye.arcs)},MultiLineString:function(ye){ye.arcs=ye.arcs.map(pe)},Polygon:function(ye){ye.arcs=ye.arcs.map(pe)},MultiPolygon:function(ye){ye.arcs=ye.arcs.map(ce)}};function pe(ye){var Me=[];do{var _e=fe.get(ye);Me.push(ye[0]<ye[1]?_e:~_e)}while(ye=ye.next);return Me}function ce(ye){return ye.map(pe)}for(var ae in q)ee(q[ae]);return Ce&&(xe.transform=Ce,xe.arcs=function V(q){for(var se=-1,ne=q.length;++se<ne;){for(var ce,ae,Ce=q[se],xe=0,ue=1,fe=Ce.length,ee=Ce[0],de=ee[0],pe=ee[1];++xe<fe;)ae=(ee=Ce[xe])[1],((ce=ee[0])!==de||ae!==pe)&&(Ce[ue++]=[ce-de,ae-pe],de=ce,pe=ae);1===ue&&(Ce[ue++]=[0,0]),Ce.length=ue}return q}(xe.arcs)),xe}function X(q){var Ce,se=q[0],ne=q[1];return ne<se&&(Ce=se,se=ne,ne=Ce),se+31*ne}function ie(q,se){var fe,ne=q[0],Ce=q[1],xe=se[0],ue=se[1];return Ce<ne&&(fe=ne,ne=Ce,Ce=fe),ue<xe&&(fe=xe,xe=ue,ue=fe),ne===xe&&Ce===ue}},24855:function(Ae,y){!function(w){"use strict";function k(){}function G(a){this.message=a||""}function I(a){this.message=a||""}function u(a){this.message=a||""}function h(){}function g(a){return null===a?Yt:a.color}function v(a){return null===a?null:a.parent}function m(a,d){null!==a&&(a.color=d)}function f(a){return null===a?null:a.left}function _(a){return null===a?null:a.right}function S(){this.root_=null,this.size_=0}function M(){}function D(){this.array_=[],arguments[0]instanceof ji&&this.addAll(arguments[0])}function R(){}function V(a){this.message=a||""}function B(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(a){if(null==this)throw new TypeError(this+" is not an object");var d=Object(this),E=Math.max(Math.min(d.length,9007199254740991),0)||0,T=1 in arguments&&parseInt(Number(arguments[1]),10)||0;T=T<0?Math.max(E+T,0):Math.min(T,E);var Z=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:E;for(Z=Z<0?Math.max(E+arguments[2],0):Math.min(Z,E);T<Z;)d[T]=a,++T;return d},writable:!0}),Number.isFinite=Number.isFinite||function(a){return"number"==typeof a&&isFinite(a)},Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(a){return a!=a},Math.trunc=Math.trunc||function(a){return a<0?Math.ceil(a):Math.floor(a)};var U=function(){};U.prototype.interfaces_=function(){return[]},U.prototype.getClass=function(){return U},U.prototype.equalsWithTolerance=function(a,d,E){return Math.abs(a-d)<=E};var F=function(a){function d(E){a.call(this,E),this.name="IllegalArgumentException",this.message=E,this.stack=(new a).stack}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d}(Error),j=function(){},P={MAX_VALUE:{configurable:!0}};j.isNaN=function(a){return Number.isNaN(a)},j.doubleToLongBits=function(a){return a},j.longBitsToDouble=function(a){return a},j.isInfinite=function(a){return!Number.isFinite(a)},P.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(j,P);var Q=function(){},$=function(){},oe=function(){},X=function a(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=a.NULL_ORDINATE;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.z=d.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=a.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},ie={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};X.prototype.setOrdinate=function(a,d){switch(a){case X.X:this.x=d;break;case X.Y:this.y=d;break;case X.Z:this.z=d;break;default:throw new F("Invalid ordinate index: "+a)}},X.prototype.equals2D=function(){if(1===arguments.length){var a=arguments[0];return this.x===a.x&&this.y===a.y}if(2===arguments.length){var d=arguments[0],E=arguments[1];return!!U.equalsWithTolerance(this.x,d.x,E)&&!!U.equalsWithTolerance(this.y,d.y,E)}},X.prototype.getOrdinate=function(a){switch(a){case X.X:return this.x;case X.Y:return this.y;case X.Z:return this.z}throw new F("Invalid ordinate index: "+a)},X.prototype.equals3D=function(a){return this.x===a.x&&this.y===a.y&&(this.z===a.z||j.isNaN(this.z))&&j.isNaN(a.z)},X.prototype.equals=function(a){return a instanceof X&&this.equals2D(a)},X.prototype.equalInZ=function(a,d){return U.equalsWithTolerance(this.z,a.z,d)},X.prototype.compareTo=function(a){return this.x<a.x?-1:this.x>a.x?1:this.y<a.y?-1:this.y>a.y?1:0},X.prototype.clone=function(){},X.prototype.copy=function(){return new X(this)},X.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},X.prototype.distance3D=function(a){var d=this.x-a.x,E=this.y-a.y,T=this.z-a.z;return Math.sqrt(d*d+E*E+T*T)},X.prototype.distance=function(a){var d=this.x-a.x,E=this.y-a.y;return Math.sqrt(d*d+E*E)},X.prototype.hashCode=function(){var a=17;return 37*(a=37*a+X.hashCode(this.x))+X.hashCode(this.y)},X.prototype.setCoordinate=function(a){this.x=a.x,this.y=a.y,this.z=a.z},X.prototype.interfaces_=function(){return[Q,$,k]},X.prototype.getClass=function(){return X},X.hashCode=function(){if(1===arguments.length){var d=j.doubleToLongBits(arguments[0]);return Math.trunc((d^d)>>>32)}},ie.DimensionalComparator.get=function(){return q},ie.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},ie.NULL_ORDINATE.get=function(){return j.NaN},ie.X.get=function(){return 0},ie.Y.get=function(){return 1},ie.Z.get=function(){return 2},Object.defineProperties(X,ie);var q=function(a){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var d=arguments[0];if(2!==d&&3!==d)throw new F("only 2 or 3 dimensions may be specified");this._dimensionsToTest=d}};q.prototype.compare=function(a,d){var E=a,T=d,Z=q.compare(E.x,T.x);if(0!==Z)return Z;var me=q.compare(E.y,T.y);return 0!==me?me:this._dimensionsToTest<=2?0:q.compare(E.z,T.z)},q.prototype.interfaces_=function(){return[oe]},q.prototype.getClass=function(){return q},q.compare=function(a,d){return a<d?-1:a>d?1:j.isNaN(a)?j.isNaN(d)?0:-1:j.isNaN(d)?1:0};var se=function(){};se.prototype.create=function(){},se.prototype.interfaces_=function(){return[]},se.prototype.getClass=function(){return se};var ne=function(){},Ce={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne},ne.toLocationSymbol=function(a){switch(a){case ne.EXTERIOR:return"e";case ne.BOUNDARY:return"b";case ne.INTERIOR:return"i";case ne.NONE:return"-"}throw new F("Unknown location value: "+a)},Ce.INTERIOR.get=function(){return 0},Ce.BOUNDARY.get=function(){return 1},Ce.EXTERIOR.get=function(){return 2},Ce.NONE.get=function(){return-1},Object.defineProperties(ne,Ce);var xe=function(a,d){return a.interfaces_&&a.interfaces_().indexOf(d)>-1},ue=function(){},fe={LOG_10:{configurable:!0}};ue.prototype.interfaces_=function(){return[]},ue.prototype.getClass=function(){return ue},ue.log10=function(a){var d=Math.log(a);return j.isInfinite(d)||j.isNaN(d)?d:d/ue.LOG_10},ue.min=function(a,d,E,T){var Z=a;return d<Z&&(Z=d),E<Z&&(Z=E),T<Z&&(Z=T),Z},ue.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[0],d=arguments[1],E=arguments[2];return a<d?d:a>E?E:a}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var T=arguments[0],Z=arguments[1],me=arguments[2];return T<Z?Z:T>me?me:T}},ue.wrap=function(a,d){return a<0?d- -a%d:a%d},ue.max=function(){if(3===arguments.length){var d=arguments[1],E=arguments[2],T=arguments[0];return d>T&&(T=d),E>T&&(T=E),T}if(4===arguments.length){var me=arguments[1],Ie=arguments[2],Xe=arguments[3],H=arguments[0];return me>H&&(H=me),Ie>H&&(H=Ie),Xe>H&&(H=Xe),H}},ue.average=function(a,d){return(a+d)/2},fe.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(ue,fe);var ee=function(a){this.str=a};ee.prototype.append=function(a){this.str+=a},ee.prototype.setCharAt=function(a,d){this.str=this.str.substr(0,a)+d+this.str.substr(a+1)},ee.prototype.toString=function(a){return this.str};var de=function(a){this.value=a};de.prototype.intValue=function(){return this.value},de.prototype.compareTo=function(a){return this.value<a?-1:this.value>a?1:0},de.isNaN=function(a){return Number.isNaN(a)};var pe=function(){};pe.isWhitespace=function(a){return a<=32&&a>=0||127===a},pe.toUpperCase=function(a){return a.toUpperCase()};var ce=function a(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof a?this.init(arguments[0]):"string"==typeof arguments[0]&&a.call(this,a.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},ae={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};ce.prototype.le=function(a){return(this._hi<a._hi||this._hi===a._hi)&&this._lo<=a._lo},ce.prototype.extractSignificantDigits=function(a,d){var E=this.abs(),T=ce.magnitude(E._hi),Z=ce.TEN.pow(T);(E=E.divide(Z)).gt(ce.TEN)?(E=E.divide(ce.TEN),T+=1):E.lt(ce.ONE)&&(E=E.multiply(ce.TEN),T-=1);for(var me=T+1,Ie=new ee,Xe=ce.MAX_PRINT_DIGITS-1,H=0;H<=Xe;H++){a&&H===me&&Ie.append(".");var s=Math.trunc(E._hi);if(s<0)break;var C=!1,N=0;s>9?(C=!0,N="9"):N="0"+s,Ie.append(N),E=E.subtract(ce.valueOf(s)).multiply(ce.TEN),C&&E.selfAdd(ce.TEN);var W=!0,K=ce.magnitude(E._hi);if(K<0&&Math.abs(K)>=Xe-H&&(W=!1),!W)break}return d[0]=T,Ie.toString()},ce.prototype.sqr=function(){return this.multiply(this)},ce.prototype.doubleValue=function(){return this._hi+this._lo},ce.prototype.subtract=function(){return arguments[0]instanceof ce?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},ce.prototype.equals=function(){if(1===arguments.length){var a=arguments[0];return this._hi===a._hi&&this._lo===a._lo}},ce.prototype.isZero=function(){return 0===this._hi&&0===this._lo},ce.prototype.selfSubtract=function(){if(arguments[0]instanceof ce){var a=arguments[0];return this.isNaN()?this:this.selfAdd(-a._hi,-a._lo)}if("number"==typeof arguments[0]){var d=arguments[0];return this.isNaN()?this:this.selfAdd(-d,0)}},ce.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},ce.prototype.min=function(a){return this.le(a)?this:a},ce.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof ce){var a=arguments[0];return this.selfDivide(a._hi,a._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var me,Xe,H,C,E=arguments[0],Z=null,Ie=null,s=null,N=null;return this._hi=N=(H=this._hi/E)+(s=(this._hi-(C=H*E)-(N=(Z=(s=ce.SPLIT*H)-(Z=s-H))*(Ie=(N=ce.SPLIT*E)-(Ie=N-E))-C+Z*(Xe=E-Ie)+(me=H-Z)*Ie+me*Xe)+this._lo-H*arguments[1])/E),this._lo=H-N+s,this}},ce.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},ce.prototype.divide=function(){if(arguments[0]instanceof ce){var E,Z,me,Xe,a=arguments[0],d=null,T=null,Ie=null,H=null;return E=(me=this._hi/a._hi)-(d=(Ie=ce.SPLIT*me)-(d=Ie-me)),H=d*(T=(H=ce.SPLIT*a._hi)-(T=H-a._hi))-(Xe=me*a._hi)+d*(Z=a._hi-T)+E*T+E*Z,new ce(H=me+(Ie=(this._hi-Xe-H+this._lo-me*a._lo)/a._hi),me-H+Ie)}if("number"==typeof arguments[0]){var s=arguments[0];return j.isNaN(s)?ce.createNaN():ce.copy(this).selfDivide(s,0)}},ce.prototype.ge=function(a){return(this._hi>a._hi||this._hi===a._hi)&&this._lo>=a._lo},ce.prototype.pow=function(a){if(0===a)return ce.valueOf(1);var d=new ce(this),E=ce.valueOf(1),T=Math.abs(a);if(T>1)for(;T>0;)T%2==1&&E.selfMultiply(d),(T/=2)>0&&(d=d.sqr());else E=d;return a<0?E.reciprocal():E},ce.prototype.ceil=function(){if(this.isNaN())return ce.NaN;var a=Math.ceil(this._hi),d=0;return a===this._hi&&(d=Math.ceil(this._lo)),new ce(a,d)},ce.prototype.compareTo=function(a){return this._hi<a._hi?-1:this._hi>a._hi?1:this._lo<a._lo?-1:this._lo>a._lo?1:0},ce.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},ce.prototype.setValue=function(){return arguments[0]instanceof ce||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},ce.prototype.max=function(a){return this.ge(a)?this:a},ce.prototype.sqrt=function(){if(this.isZero())return ce.valueOf(0);if(this.isNegative())return ce.NaN;var a=1/Math.sqrt(this._hi),E=ce.valueOf(this._hi*a),T=this.subtract(E.sqr())._hi*(.5*a);return E.add(T)},ce.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof ce){var a=arguments[0];return this.selfAdd(a._hi,a._lo)}if("number"==typeof arguments[0]){var E,T,Z,Ie,Xe,d=arguments[0];return this._hi=(E=(Z=this._hi+d)+(Xe=d-(Ie=Z-this._hi)+(this._hi-(Z-Ie))+this._lo))+(T=Xe+(Z-E)),this._lo=T+(E-this._hi),this}}else if(2===arguments.length){var C,N,K,we,H=arguments[0],s=arguments[1],W=null,he=null,ge=null;he=(K=this._hi+H)-(ge=K-this._hi),W=(N=this._lo+s)-(we=N-this._lo);var Le=(C=K+(ge=(he=H-ge+(this._hi-he))+N))+(ge=(W=s-we+(this._lo-W))+(ge+(K-C))),Ve=ge+(C-Le);return this._hi=Le,this._lo=Ve,this}},ce.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof ce){var a=arguments[0];return this.selfMultiply(a._hi,a._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var me,Xe,E=arguments[0],Z=null,Ie=null,H=null,s=null;Z=(H=ce.SPLIT*this._hi)-this._hi,Z=H-Z;var C=(H=this._hi*E)+(s=Z*(Ie=(s=ce.SPLIT*E)-(Ie=s-E))-H+Z*(Xe=E-Ie)+(me=this._hi-Z)*Ie+me*Xe+(this._hi*arguments[1]+this._lo*E)),N=s+(Z=H-C);return this._hi=C,this._lo=N,this}},ce.prototype.selfSqr=function(){return this.selfMultiply(this)},ce.prototype.floor=function(){if(this.isNaN())return ce.NaN;var a=Math.floor(this._hi),d=0;return a===this._hi&&(d=Math.floor(this._lo)),new ce(a,d)},ce.prototype.negate=function(){return this.isNaN()?this:new ce(-this._hi,-this._lo)},ce.prototype.clone=function(){},ce.prototype.multiply=function(){if(arguments[0]instanceof ce){var a=arguments[0];return a.isNaN()?ce.createNaN():ce.copy(this).selfMultiply(a)}if("number"==typeof arguments[0]){var d=arguments[0];return j.isNaN(d)?ce.createNaN():ce.copy(this).selfMultiply(d,0)}},ce.prototype.isNaN=function(){return j.isNaN(this._hi)},ce.prototype.intValue=function(){return Math.trunc(this._hi)},ce.prototype.toString=function(){var a=ce.magnitude(this._hi);return a>=-3&&a<=20?this.toStandardNotation():this.toSciNotation()},ce.prototype.toStandardNotation=function(){var a=this.getSpecialNumberString();if(null!==a)return a;var d=new Array(1).fill(null),E=this.extractSignificantDigits(!0,d),T=d[0]+1,Z=E;return"."===E.charAt(0)?Z="0"+E:T<0?Z="0."+ce.stringOfChar("0",-T)+E:-1===E.indexOf(".")&&(Z=E+ce.stringOfChar("0",T-E.length)+".0"),this.isNegative()?"-"+Z:Z},ce.prototype.reciprocal=function(){var d,T,Z,Ie,a=null,E=null,me=null,Xe=null;d=(Z=1/this._hi)-(a=(me=ce.SPLIT*Z)-(a=me-Z)),E=(Xe=ce.SPLIT*this._hi)-this._hi;var H=Z+(me=(1-(Ie=Z*this._hi)-(Xe=a*(E=Xe-E)-Ie+a*(T=this._hi-E)+d*E+d*T)-Z*this._lo)/this._hi);return new ce(H,Z-H+me)},ce.prototype.toSciNotation=function(){if(this.isZero())return ce.SCI_NOT_ZERO;var a=this.getSpecialNumberString();if(null!==a)return a;var d=new Array(1).fill(null),E=this.extractSignificantDigits(!1,d),T=ce.SCI_NOT_EXPONENT_CHAR+d[0];if("0"===E.charAt(0))throw new Error("Found leading zero: "+E);var Z="";E.length>1&&(Z=E.substring(1));var me=E.charAt(0)+"."+Z;return this.isNegative()?"-"+me+T:me+T},ce.prototype.abs=function(){return this.isNaN()?ce.NaN:this.isNegative()?this.negate():new ce(this)},ce.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},ce.prototype.lt=function(a){return(this._hi<a._hi||this._hi===a._hi)&&this._lo<a._lo},ce.prototype.add=function(){if(arguments[0]instanceof ce){var a=arguments[0];return ce.copy(this).selfAdd(a)}if("number"==typeof arguments[0]){var d=arguments[0];return ce.copy(this).selfAdd(d)}},ce.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof ce){var d=arguments[0];this._hi=d._hi,this._lo=d._lo}}else if(2===arguments.length){var T=arguments[1];this._hi=arguments[0],this._lo=T}},ce.prototype.gt=function(a){return(this._hi>a._hi||this._hi===a._hi)&&this._lo>a._lo},ce.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},ce.prototype.trunc=function(){return this.isNaN()?ce.NaN:this.isPositive()?this.floor():this.ceil()},ce.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},ce.prototype.interfaces_=function(){return[k,Q,$]},ce.prototype.getClass=function(){return ce},ce.sqr=function(a){return ce.valueOf(a).selfMultiply(a)},ce.valueOf=function(){return"string"==typeof arguments[0]?ce.parse(arguments[0]):"number"==typeof arguments[0]?new ce(arguments[0]):void 0},ce.sqrt=function(a){return ce.valueOf(a).sqrt()},ce.parse=function(a){for(var d=0,E=a.length;pe.isWhitespace(a.charAt(d));)d++;var T=!1;if(d<E){var Z=a.charAt(d);"-"!==Z&&"+"!==Z||(d++,"-"===Z&&(T=!0))}for(var me=new ce,Ie=0,Xe=0,H=0;!(d>=E);){var s=a.charAt(d);if(d++,pe.isDigit(s)){var C=s-"0";me.selfMultiply(ce.TEN),me.selfAdd(C),Ie++}else{if("."!==s){if("e"===s||"E"===s){var N=a.substring(d);try{H=de.parseInt(N)}catch(we){throw we instanceof Error?new Error("Invalid exponent "+N+" in string "+a):we}break}throw new Error("Unexpected character '"+s+"' at position "+d+" in string "+a)}Xe=Ie}}var W=me,K=Ie-Xe-H;if(0===K)W=me;else if(K>0){var he=ce.TEN.pow(K);W=me.divide(he)}else if(K<0){var ge=ce.TEN.pow(-K);W=me.multiply(ge)}return T?W.negate():W},ce.createNaN=function(){return new ce(j.NaN,j.NaN)},ce.copy=function(a){return new ce(a)},ce.magnitude=function(a){var d=Math.abs(a),E=Math.log(d)/Math.log(10),T=Math.trunc(Math.floor(E));return 10*Math.pow(10,T)<=d&&(T+=1),T},ce.stringOfChar=function(a,d){for(var E=new ee,T=0;T<d;T++)E.append(a);return E.toString()},ae.PI.get=function(){return new ce(3.141592653589793,12246467991473532e-32)},ae.TWO_PI.get=function(){return new ce(6.283185307179586,24492935982947064e-32)},ae.PI_2.get=function(){return new ce(1.5707963267948966,6123233995736766e-32)},ae.E.get=function(){return new ce(2.718281828459045,14456468917292502e-32)},ae.NaN.get=function(){return new ce(j.NaN,j.NaN)},ae.EPS.get=function(){return 123259516440783e-46},ae.SPLIT.get=function(){return 134217729},ae.MAX_PRINT_DIGITS.get=function(){return 32},ae.TEN.get=function(){return ce.valueOf(10)},ae.ONE.get=function(){return ce.valueOf(1)},ae.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},ae.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(ce,ae);var ye=function(){},Me={DP_SAFE_EPSILON:{configurable:!0}};ye.prototype.interfaces_=function(){return[]},ye.prototype.getClass=function(){return ye},ye.orientationIndex=function(a,d,E){var T=ye.orientationIndexFilter(a,d,E);if(T<=1)return T;var Z=ce.valueOf(d.x).selfAdd(-a.x),me=ce.valueOf(d.y).selfAdd(-a.y),Ie=ce.valueOf(E.x).selfAdd(-d.x),Xe=ce.valueOf(E.y).selfAdd(-d.y);return Z.selfMultiply(Xe).selfSubtract(me.selfMultiply(Ie)).signum()},ye.signOfDet2x2=function(a,d,E,T){return a.multiply(T).selfSubtract(d.multiply(E)).signum()},ye.intersection=function(a,d,E,T){var Z=ce.valueOf(T.y).selfSubtract(E.y).selfMultiply(ce.valueOf(d.x).selfSubtract(a.x)),me=ce.valueOf(T.x).selfSubtract(E.x).selfMultiply(ce.valueOf(d.y).selfSubtract(a.y)),Ie=Z.subtract(me),Xe=ce.valueOf(T.x).selfSubtract(E.x).selfMultiply(ce.valueOf(a.y).selfSubtract(E.y)),H=ce.valueOf(T.y).selfSubtract(E.y).selfMultiply(ce.valueOf(a.x).selfSubtract(E.x)),s=Xe.subtract(H).selfDivide(Ie).doubleValue(),C=ce.valueOf(a.x).selfAdd(ce.valueOf(d.x).selfSubtract(a.x).selfMultiply(s)).doubleValue(),N=ce.valueOf(d.x).selfSubtract(a.x).selfMultiply(ce.valueOf(a.y).selfSubtract(E.y)),W=ce.valueOf(d.y).selfSubtract(a.y).selfMultiply(ce.valueOf(a.x).selfSubtract(E.x)),K=N.subtract(W).selfDivide(Ie).doubleValue(),he=ce.valueOf(E.y).selfAdd(ce.valueOf(T.y).selfSubtract(E.y).selfMultiply(K)).doubleValue();return new X(C,he)},ye.orientationIndexFilter=function(a,d,E){var T=null,Z=(a.x-E.x)*(d.y-E.y),me=(a.y-E.y)*(d.x-E.x),Ie=Z-me;if(Z>0){if(me<=0)return ye.signum(Ie);T=Z+me}else{if(!(Z<0)||me>=0)return ye.signum(Ie);T=-Z-me}var Xe=ye.DP_SAFE_EPSILON*T;return Ie>=Xe||-Ie>=Xe?ye.signum(Ie):2},ye.signum=function(a){return a>0?1:a<0?-1:0},Me.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ye,Me);var _e=function(){},Fe={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Fe.X.get=function(){return 0},Fe.Y.get=function(){return 1},Fe.Z.get=function(){return 2},Fe.M.get=function(){return 3},_e.prototype.setOrdinate=function(a,d,E){},_e.prototype.size=function(){},_e.prototype.getOrdinate=function(a,d){},_e.prototype.getCoordinate=function(){},_e.prototype.getCoordinateCopy=function(a){},_e.prototype.getDimension=function(){},_e.prototype.getX=function(a){},_e.prototype.clone=function(){},_e.prototype.expandEnvelope=function(a){},_e.prototype.copy=function(){},_e.prototype.getY=function(a){},_e.prototype.toCoordinateArray=function(){},_e.prototype.interfaces_=function(){return[$]},_e.prototype.getClass=function(){return _e},Object.defineProperties(_e,Fe);var Ue=function(){},Ge=function(a){function d(){a.call(this,"Projective point not representable on the Cartesian plane.")}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ue),$e=function(){};$e.arraycopy=function(a,d,E,T,Z){for(var me=0,Ie=d;Ie<d+Z;Ie++)E[T+me]=a[Ie],me++},$e.getProperty=function(a){return{"line.separator":"\n"}[a]};var He=function a(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var d=arguments[0];this.x=d.x,this.y=d.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var T=arguments[1];this.x=arguments[0],this.y=T,this.w=1}else if(arguments[0]instanceof a&&arguments[1]instanceof a){var Z=arguments[0],me=arguments[1];this.x=Z.y*me.w-me.y*Z.w,this.y=me.x*Z.w-Z.x*me.w,this.w=Z.x*me.y-me.x*Z.y}else if(arguments[0]instanceof X&&arguments[1]instanceof X){var Ie=arguments[0],Xe=arguments[1];this.x=Ie.y-Xe.y,this.y=Xe.x-Ie.x,this.w=Ie.x*Xe.y-Xe.x*Ie.y}}else if(3===arguments.length){var s=arguments[1],C=arguments[2];this.x=arguments[0],this.y=s,this.w=C}else if(4===arguments.length){var N=arguments[0],W=arguments[1],K=arguments[2],he=arguments[3],ge=N.y-W.y,we=W.x-N.x,Le=N.x*W.y-W.x*N.y,Ve=K.y-he.y,We=he.x-K.x,lt=K.x*he.y-he.x*K.y;this.x=we*lt-We*Le,this.y=Ve*Le-ge*lt,this.w=ge*We-Ve*we}};He.prototype.getY=function(){var a=this.y/this.w;if(j.isNaN(a)||j.isInfinite(a))throw new Ge;return a},He.prototype.getX=function(){var a=this.x/this.w;if(j.isNaN(a)||j.isInfinite(a))throw new Ge;return a},He.prototype.getCoordinate=function(){var a=new X;return a.x=this.getX(),a.y=this.getY(),a},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He},He.intersection=function(a,d,E,T){var Z=a.y-d.y,me=d.x-a.x,Ie=a.x*d.y-d.x*a.y,Xe=E.y-T.y,H=T.x-E.x,s=E.x*T.y-T.x*E.y,C=Z*H-Xe*me,N=(me*s-H*Ie)/C,W=(Xe*Ie-Z*s)/C;if(j.isNaN(N)||j.isInfinite(N)||j.isNaN(W)||j.isInfinite(W))throw new Ge;return new X(N,W)};var Pe=function a(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof X){var d=arguments[0];this.init(d.x,d.x,d.y,d.y)}else arguments[0]instanceof a&&this.init(arguments[0]);else if(2===arguments.length){var T=arguments[0],Z=arguments[1];this.init(T.x,Z.x,T.y,Z.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},je={serialVersionUID:{configurable:!0}};Pe.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Pe.prototype.equals=function(a){if(!(a instanceof Pe))return!1;var d=a;return this.isNull()?d.isNull():this._maxx===d.getMaxX()&&this._maxy===d.getMaxY()&&this._minx===d.getMinX()&&this._miny===d.getMinY()},Pe.prototype.intersection=function(a){return this.isNull()||a.isNull()||!this.intersects(a)?new Pe:new Pe(this._minx>a._minx?this._minx:a._minx,this._maxx<a._maxx?this._maxx:a._maxx,this._miny>a._miny?this._miny:a._miny,this._maxy<a._maxy?this._maxy:a._maxy)},Pe.prototype.isNull=function(){return this._maxx<this._minx},Pe.prototype.getMaxX=function(){return this._maxx},Pe.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof X){var a=arguments[0];return this.covers(a.x,a.y)}if(arguments[0]instanceof Pe){var d=arguments[0];return!this.isNull()&&!d.isNull()&&d.getMinX()>=this._minx&&d.getMaxX()<=this._maxx&&d.getMinY()>=this._miny&&d.getMaxY()<=this._maxy}}else if(2===arguments.length){var E=arguments[0],T=arguments[1];return!this.isNull()&&E>=this._minx&&E<=this._maxx&&T>=this._miny&&T<=this._maxy}},Pe.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Pe){var a=arguments[0];return!this.isNull()&&!a.isNull()&&!(a._minx>this._maxx||a._maxx<this._minx||a._miny>this._maxy||a._maxy<this._miny)}if(arguments[0]instanceof X){var d=arguments[0];return this.intersects(d.x,d.y)}}else if(2===arguments.length){var E=arguments[0],T=arguments[1];return!this.isNull()&&!(E>this._maxx||E<this._minx||T>this._maxy||T<this._miny)}},Pe.prototype.getMinY=function(){return this._miny},Pe.prototype.getMinX=function(){return this._minx},Pe.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof X){var a=arguments[0];this.expandToInclude(a.x,a.y)}else if(arguments[0]instanceof Pe){var d=arguments[0];if(d.isNull())return null;this.isNull()?(this._minx=d.getMinX(),this._maxx=d.getMaxX(),this._miny=d.getMinY(),this._maxy=d.getMaxY()):(d._minx<this._minx&&(this._minx=d._minx),d._maxx>this._maxx&&(this._maxx=d._maxx),d._miny<this._miny&&(this._miny=d._miny),d._maxy>this._maxy&&(this._maxy=d._maxy))}}else if(2===arguments.length){var E=arguments[0],T=arguments[1];this.isNull()?(this._minx=E,this._maxx=E,this._miny=T,this._maxy=T):(E<this._minx&&(this._minx=E),E>this._maxx&&(this._maxx=E),T<this._miny&&(this._miny=T),T>this._maxy&&(this._maxy=T))}},Pe.prototype.minExtent=function(){if(this.isNull())return 0;var a=this.getWidth(),d=this.getHeight();return a<d?a:d},Pe.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Pe.prototype.compareTo=function(a){var d=a;return this.isNull()?d.isNull()?0:-1:d.isNull()?1:this._minx<d._minx?-1:this._minx>d._minx?1:this._miny<d._miny?-1:this._miny>d._miny?1:this._maxx<d._maxx?-1:this._maxx>d._maxx?1:this._maxy<d._maxy?-1:this._maxy>d._maxy?1:0},Pe.prototype.translate=function(a,d){if(this.isNull())return null;this.init(this.getMinX()+a,this.getMaxX()+a,this.getMinY()+d,this.getMaxY()+d)},Pe.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Pe.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Pe.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Pe.prototype.maxExtent=function(){if(this.isNull())return 0;var a=this.getWidth(),d=this.getHeight();return a>d?a:d},Pe.prototype.expandBy=function(){if(1===arguments.length){var a=arguments[0];this.expandBy(a,a)}else if(2===arguments.length){var d=arguments[0],E=arguments[1];if(this.isNull())return null;this._minx-=d,this._maxx+=d,this._miny-=E,this._maxy+=E,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Pe.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Pe)return this.covers(arguments[0]);if(arguments[0]instanceof X)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},Pe.prototype.centre=function(){return this.isNull()?null:new X((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Pe.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof X){var a=arguments[0];this.init(a.x,a.x,a.y,a.y)}else if(arguments[0]instanceof Pe){var d=arguments[0];this._minx=d._minx,this._maxx=d._maxx,this._miny=d._miny,this._maxy=d._maxy}}else if(2===arguments.length){var E=arguments[0],T=arguments[1];this.init(E.x,T.x,E.y,T.y)}else if(4===arguments.length){var Z=arguments[0],me=arguments[1],Ie=arguments[2],Xe=arguments[3];Z<me?(this._minx=Z,this._maxx=me):(this._minx=me,this._maxx=Z),Ie<Xe?(this._miny=Ie,this._maxy=Xe):(this._miny=Xe,this._maxy=Ie)}},Pe.prototype.getMaxY=function(){return this._maxy},Pe.prototype.distance=function(a){if(this.intersects(a))return 0;var d=0;this._maxx<a._minx?d=a._minx-this._maxx:this._minx>a._maxx&&(d=this._minx-a._maxx);var E=0;return this._maxy<a._miny?E=a._miny-this._maxy:this._miny>a._maxy&&(E=this._miny-a._maxy),0===d?E:0===E?d:Math.sqrt(d*d+E*E)},Pe.prototype.hashCode=function(){var a=17;return 37*(a=37*(a=37*(a=37*a+X.hashCode(this._minx))+X.hashCode(this._maxx))+X.hashCode(this._miny))+X.hashCode(this._maxy)},Pe.prototype.interfaces_=function(){return[Q,k]},Pe.prototype.getClass=function(){return Pe},Pe.intersects=function(){if(3===arguments.length){var a=arguments[0],d=arguments[1],E=arguments[2];return E.x>=(a.x<d.x?a.x:d.x)&&E.x<=(a.x>d.x?a.x:d.x)&&E.y>=(a.y<d.y?a.y:d.y)&&E.y<=(a.y>d.y?a.y:d.y)}if(4===arguments.length){var T=arguments[0],Z=arguments[1],me=arguments[2],Ie=arguments[3],Xe=Math.min(me.x,Ie.x),H=Math.max(me.x,Ie.x),s=Math.min(T.x,Z.x),C=Math.max(T.x,Z.x);return!(s>H||C<Xe||(Xe=Math.min(me.y,Ie.y),H=Math.max(me.y,Ie.y),s=Math.min(T.y,Z.y),C=Math.max(T.y,Z.y),s>H||C<Xe))}},je.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Pe,je);var ht={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Re=function(a){this.geometryFactory=a||new Ut};Re.prototype.read=function(a){var d,E;a=a.replace(/[\n\r]/g," ");var Z=ht.typeStr.exec(a);if(-1!==a.search("EMPTY")&&((Z=ht.emptyTypeStr.exec(a))[2]=void 0),Z&&(E=Z[1].toLowerCase(),it[E]&&(d=it[E].apply(this,[Z[2]]))),void 0===d)throw new Error("Could not parse WKT "+a);return d},Re.prototype.write=function(a){return this.extractGeometry(a)},Re.prototype.extractGeometry=function(a){var d=a.getGeometryType().toLowerCase();if(!tt[d])return null;var E=d.toUpperCase();return a.isEmpty()?E+" EMPTY":E+"("+tt[d].apply(this,[a])+")"};var tt={coordinate:function(a){return a.x+" "+a.y},point:function(a){return tt.coordinate.call(this,a._coordinates._coordinates[0])},multipoint:function(a){for(var d=[],E=0,T=a._geometries.length;E<T;++E)d.push("("+tt.point.apply(this,[a._geometries[E]])+")");return d.join(",")},linestring:function(a){for(var d=[],E=0,T=a._points._coordinates.length;E<T;++E)d.push(tt.coordinate.apply(this,[a._points._coordinates[E]]));return d.join(",")},linearring:function(a){for(var d=[],E=0,T=a._points._coordinates.length;E<T;++E)d.push(tt.coordinate.apply(this,[a._points._coordinates[E]]));return d.join(",")},multilinestring:function(a){for(var d=[],E=0,T=a._geometries.length;E<T;++E)d.push("("+tt.linestring.apply(this,[a._geometries[E]])+")");return d.join(",")},polygon:function(a){var d=[];d.push("("+tt.linestring.apply(this,[a._shell])+")");for(var E=0,T=a._holes.length;E<T;++E)d.push("("+tt.linestring.apply(this,[a._holes[E]])+")");return d.join(",")},multipolygon:function(a){for(var d=[],E=0,T=a._geometries.length;E<T;++E)d.push("("+tt.polygon.apply(this,[a._geometries[E]])+")");return d.join(",")},geometrycollection:function(a){for(var d=[],E=0,T=a._geometries.length;E<T;++E)d.push(this.extractGeometry(a._geometries[E]));return d.join(",")}},it={point:function(a){if(void 0===a)return this.geometryFactory.createPoint();var d=a.trim().split(ht.spaces);return this.geometryFactory.createPoint(new X(Number.parseFloat(d[0]),Number.parseFloat(d[1])))},multipoint:function(a){if(void 0===a)return this.geometryFactory.createMultiPoint();for(var d,E=a.trim().split(","),T=[],Z=0,me=E.length;Z<me;++Z)d=E[Z].replace(ht.trimParens,"$1"),T.push(it.point.apply(this,[d]));return this.geometryFactory.createMultiPoint(T)},linestring:function(a){if(void 0===a)return this.geometryFactory.createLineString();for(var d,E=a.trim().split(","),T=[],Z=0,me=E.length;Z<me;++Z)d=E[Z].trim().split(ht.spaces),T.push(new X(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLineString(T)},linearring:function(a){if(void 0===a)return this.geometryFactory.createLinearRing();for(var d,E=a.trim().split(","),T=[],Z=0,me=E.length;Z<me;++Z)d=E[Z].trim().split(ht.spaces),T.push(new X(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLinearRing(T)},multilinestring:function(a){if(void 0===a)return this.geometryFactory.createMultiLineString();for(var d,E=a.trim().split(ht.parenComma),T=[],Z=0,me=E.length;Z<me;++Z)d=E[Z].replace(ht.trimParens,"$1"),T.push(it.linestring.apply(this,[d]));return this.geometryFactory.createMultiLineString(T)},polygon:function(a){if(void 0===a)return this.geometryFactory.createPolygon();for(var d,E,T,Z,me=a.trim().split(ht.parenComma),Ie=[],Xe=0,H=me.length;Xe<H;++Xe)d=me[Xe].replace(ht.trimParens,"$1"),E=it.linestring.apply(this,[d]),T=this.geometryFactory.createLinearRing(E._points),0===Xe?Z=T:Ie.push(T);return this.geometryFactory.createPolygon(Z,Ie)},multipolygon:function(a){if(void 0===a)return this.geometryFactory.createMultiPolygon();for(var d,E=a.trim().split(ht.doubleParenComma),T=[],Z=0,me=E.length;Z<me;++Z)d=E[Z].replace(ht.trimParens,"$1"),T.push(it.polygon.apply(this,[d]));return this.geometryFactory.createMultiPolygon(T)},geometrycollection:function(a){if(void 0===a)return this.geometryFactory.createGeometryCollection();for(var d=(a=a.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),E=[],T=0,Z=d.length;T<Z;++T)E.push(this.read(d[T]));return this.geometryFactory.createGeometryCollection(E)}},qe=function(a){this.parser=new Re(a)};qe.prototype.write=function(a){return this.parser.write(a)},qe.toLineString=function(a,d){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+a.x+" "+a.y+", "+d.x+" "+d.y+" )"};var Oe=function(a){function d(E){a.call(this,E),this.name="RuntimeException",this.message=E,this.stack=(new a).stack}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d}(Error),Te=function(a){function d(){a.call(this),0===arguments.length?a.call(this):1===arguments.length&&a.call(this,arguments[0])}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Oe),Ne=function(){};Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne},Ne.shouldNeverReachHere=function(){if(0===arguments.length)Ne.shouldNeverReachHere(null);else if(1===arguments.length){var a=arguments[0];throw new Te("Should never reach here"+(null!==a?": "+a:""))}},Ne.isTrue=function(){var d;if(1===arguments.length)Ne.isTrue(arguments[0],null);else if(2===arguments.length&&(d=arguments[1],!arguments[0]))throw null===d?new Te:new Te(d)},Ne.equals=function(){var a,d,E;if(2===arguments.length)Ne.equals(a=arguments[0],d=arguments[1],null);else if(3===arguments.length&&(E=arguments[2],!(d=arguments[1]).equals(a=arguments[0])))throw new Te("Expected "+a+" but encountered "+d+(null!==E?": "+E:""))};var rt=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new X,this._intPt[1]=new X,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},xt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};rt.prototype.getIndexAlongSegment=function(a,d){return this.computeIntLineIndex(),this._intLineIndex[a][d]},rt.prototype.getTopologySummary=function(){var a=new ee;return this.isEndPoint()&&a.append(" endpoint"),this._isProper&&a.append(" proper"),this.isCollinear()&&a.append(" collinear"),a.toString()},rt.prototype.computeIntersection=function(a,d,E,T){this._inputLines[0][0]=a,this._inputLines[0][1]=d,this._inputLines[1][0]=E,this._inputLines[1][1]=T,this._result=this.computeIntersect(a,d,E,T)},rt.prototype.getIntersectionNum=function(){return this._result},rt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var a=arguments[0];this.getEdgeDistance(a,0)>this.getEdgeDistance(a,1)?(this._intLineIndex[a][0]=0,this._intLineIndex[a][1]=1):(this._intLineIndex[a][0]=1,this._intLineIndex[a][1]=0)}},rt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},rt.prototype.setPrecisionModel=function(a){this._precisionModel=a},rt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var a=arguments[0],d=0;d<this._result;d++)if(!this._intPt[d].equals2D(this._inputLines[a][0])&&!this._intPt[d].equals2D(this._inputLines[a][1]))return!0;return!1}},rt.prototype.getIntersection=function(a){return this._intPt[a]},rt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},rt.prototype.hasIntersection=function(){return this._result!==rt.NO_INTERSECTION},rt.prototype.getEdgeDistance=function(a,d){return rt.computeEdgeDistance(this._intPt[d],this._inputLines[a][0],this._inputLines[a][1])},rt.prototype.isCollinear=function(){return this._result===rt.COLLINEAR_INTERSECTION},rt.prototype.toString=function(){return qe.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+qe.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},rt.prototype.getEndpoint=function(a,d){return this._inputLines[a][d]},rt.prototype.isIntersection=function(a){for(var d=0;d<this._result;d++)if(this._intPt[d].equals2D(a))return!0;return!1},rt.prototype.getIntersectionAlongSegment=function(a,d){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[a][d]]},rt.prototype.interfaces_=function(){return[]},rt.prototype.getClass=function(){return rt},rt.computeEdgeDistance=function(a,d,E){var T=Math.abs(E.x-d.x),Z=Math.abs(E.y-d.y),me=-1;if(a.equals(d))me=0;else if(a.equals(E))me=T>Z?T:Z;else{var Ie=Math.abs(a.x-d.x),Xe=Math.abs(a.y-d.y);0!==(me=T>Z?Ie:Xe)||a.equals(d)||(me=Math.max(Ie,Xe))}return Ne.isTrue(!(0===me&&!a.equals(d)),"Bad distance calculation"),me},rt.nonRobustComputeEdgeDistance=function(a,d,E){var T=a.x-d.x,Z=a.y-d.y,me=Math.sqrt(T*T+Z*Z);return Ne.isTrue(!(0===me&&!a.equals(d)),"Invalid distance calculation"),me},xt.DONT_INTERSECT.get=function(){return 0},xt.DO_INTERSECT.get=function(){return 1},xt.COLLINEAR.get=function(){return 2},xt.NO_INTERSECTION.get=function(){return 0},xt.POINT_INTERSECTION.get=function(){return 1},xt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(rt,xt);var gt=function(a){function d(){a.apply(this,arguments)}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.isInSegmentEnvelopes=function(E){var T=new Pe(this._inputLines[0][0],this._inputLines[0][1]),Z=new Pe(this._inputLines[1][0],this._inputLines[1][1]);return T.contains(E)&&Z.contains(E)},d.prototype.computeIntersection=function(){if(3!==arguments.length)return a.prototype.computeIntersection.apply(this,arguments);var E=arguments[0],T=arguments[1],Z=arguments[2];if(this._isProper=!1,Pe.intersects(T,Z,E)&&0===Gt.orientationIndex(T,Z,E)&&0===Gt.orientationIndex(Z,T,E))return this._isProper=!0,(E.equals(T)||E.equals(Z))&&(this._isProper=!1),this._result=a.POINT_INTERSECTION,null;this._result=a.NO_INTERSECTION},d.prototype.normalizeToMinimum=function(E,T,Z,me,Ie){Ie.x=this.smallestInAbsValue(E.x,T.x,Z.x,me.x),Ie.y=this.smallestInAbsValue(E.y,T.y,Z.y,me.y),E.x-=Ie.x,E.y-=Ie.y,T.x-=Ie.x,T.y-=Ie.y,Z.x-=Ie.x,Z.y-=Ie.y,me.x-=Ie.x,me.y-=Ie.y},d.prototype.safeHCoordinateIntersection=function(E,T,Z,me){var Ie=null;try{Ie=He.intersection(E,T,Z,me)}catch(Xe){if(!(Xe instanceof Ge))throw Xe;Ie=d.nearestEndpoint(E,T,Z,me)}return Ie},d.prototype.intersection=function(E,T,Z,me){var Ie=this.intersectionWithNormalization(E,T,Z,me);return this.isInSegmentEnvelopes(Ie)||(Ie=new X(d.nearestEndpoint(E,T,Z,me))),null!==this._precisionModel&&this._precisionModel.makePrecise(Ie),Ie},d.prototype.smallestInAbsValue=function(E,T,Z,me){var Ie=E,Xe=Math.abs(Ie);return Math.abs(T)<Xe&&(Ie=T,Xe=Math.abs(T)),Math.abs(Z)<Xe&&(Ie=Z,Xe=Math.abs(Z)),Math.abs(me)<Xe&&(Ie=me),Ie},d.prototype.checkDD=function(E,T,Z,me,Ie){var Xe=ye.intersection(E,T,Z,me),H=this.isInSegmentEnvelopes(Xe);$e.out.println("DD in env = "+H+"  --------------------- "+Xe),Ie.distance(Xe)>1e-4&&$e.out.println("Distance = "+Ie.distance(Xe))},d.prototype.intersectionWithNormalization=function(E,T,Z,me){var Ie=new X(E),Xe=new X(T),H=new X(Z),s=new X(me),C=new X;this.normalizeToEnvCentre(Ie,Xe,H,s,C);var N=this.safeHCoordinateIntersection(Ie,Xe,H,s);return N.x+=C.x,N.y+=C.y,N},d.prototype.computeCollinearIntersection=function(E,T,Z,me){var Ie=Pe.intersects(E,T,Z),Xe=Pe.intersects(E,T,me),H=Pe.intersects(Z,me,E),s=Pe.intersects(Z,me,T);return Ie&&Xe?(this._intPt[0]=Z,this._intPt[1]=me,a.COLLINEAR_INTERSECTION):H&&s?(this._intPt[0]=E,this._intPt[1]=T,a.COLLINEAR_INTERSECTION):Ie&&H?(this._intPt[0]=Z,this._intPt[1]=E,!Z.equals(E)||Xe||s?a.COLLINEAR_INTERSECTION:a.POINT_INTERSECTION):Ie&&s?(this._intPt[0]=Z,this._intPt[1]=T,!Z.equals(T)||Xe||H?a.COLLINEAR_INTERSECTION:a.POINT_INTERSECTION):Xe&&H?(this._intPt[0]=me,this._intPt[1]=E,!me.equals(E)||Ie||s?a.COLLINEAR_INTERSECTION:a.POINT_INTERSECTION):Xe&&s?(this._intPt[0]=me,this._intPt[1]=T,!me.equals(T)||Ie||H?a.COLLINEAR_INTERSECTION:a.POINT_INTERSECTION):a.NO_INTERSECTION},d.prototype.normalizeToEnvCentre=function(E,T,Z,me,Ie){var Xe=E.x<T.x?E.x:T.x,H=E.y<T.y?E.y:T.y,s=E.x>T.x?E.x:T.x,C=E.y>T.y?E.y:T.y,N=Z.x<me.x?Z.x:me.x,W=Z.y<me.y?Z.y:me.y,K=Z.x>me.x?Z.x:me.x,he=Z.y>me.y?Z.y:me.y,we=((H>W?H:W)+(C<he?C:he))/2;Ie.x=((Xe>N?Xe:N)+(s<K?s:K))/2,Ie.y=we,E.x-=Ie.x,E.y-=Ie.y,T.x-=Ie.x,T.y-=Ie.y,Z.x-=Ie.x,Z.y-=Ie.y,me.x-=Ie.x,me.y-=Ie.y},d.prototype.computeIntersect=function(E,T,Z,me){if(this._isProper=!1,!Pe.intersects(E,T,Z,me))return a.NO_INTERSECTION;var Ie=Gt.orientationIndex(E,T,Z),Xe=Gt.orientationIndex(E,T,me);if(Ie>0&&Xe>0||Ie<0&&Xe<0)return a.NO_INTERSECTION;var H=Gt.orientationIndex(Z,me,E),s=Gt.orientationIndex(Z,me,T);return H>0&&s>0||H<0&&s<0?a.NO_INTERSECTION:0===Ie&&0===Xe&&0===H&&0===s?this.computeCollinearIntersection(E,T,Z,me):(0===Ie||0===Xe||0===H||0===s?(this._isProper=!1,E.equals2D(Z)||E.equals2D(me)?this._intPt[0]=E:T.equals2D(Z)||T.equals2D(me)?this._intPt[0]=T:0===Ie?this._intPt[0]=new X(Z):0===Xe?this._intPt[0]=new X(me):0===H?this._intPt[0]=new X(E):0===s&&(this._intPt[0]=new X(T))):(this._isProper=!0,this._intPt[0]=this.intersection(E,T,Z,me)),a.POINT_INTERSECTION)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.nearestEndpoint=function(E,T,Z,me){var Ie=E,Xe=Gt.distancePointLine(E,Z,me),H=Gt.distancePointLine(T,Z,me);return H<Xe&&(Xe=H,Ie=T),(H=Gt.distancePointLine(Z,E,T))<Xe&&(Xe=H,Ie=Z),(H=Gt.distancePointLine(me,E,T))<Xe&&(Xe=H,Ie=me),Ie},d}(rt),on=function(){};on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on},on.orientationIndex=function(a,d,E){return on.signOfDet2x2(d.x-a.x,d.y-a.y,E.x-d.x,E.y-d.y)},on.signOfDet2x2=function(a,d,E,T){var Z=null,me=null,Ie=null;if(Z=1,0===a||0===T)return 0===d||0===E?0:d>0?E>0?-Z:Z:E>0?Z:-Z;if(0===d||0===E)return T>0?a>0?Z:-Z:a>0?-Z:Z;if(d>0?T>0?d<=T||(Z=-Z,me=a,a=E,E=me,me=d,d=T,T=me):d<=-T?(Z=-Z,E=-E,T=-T):(me=a,a=-E,E=me,me=d,d=-T,T=me):T>0?-d<=T?(Z=-Z,a=-a,d=-d):(me=-a,a=E,E=me,me=-d,d=T,T=me):d>=T?(a=-a,d=-d,E=-E,T=-T):(Z=-Z,me=-a,a=-E,E=me,me=-d,d=-T,T=me),a>0){if(!(E>0&&a<=E))return Z}else{if(E>0||!(a>=E))return-Z;Z=-Z,a=-a,E=-E}for(;;){if((T-=(Ie=Math.floor(E/a))*d)<0)return-Z;if(T>d)return Z;if(a>(E-=Ie*a)+E){if(d<T+T)return Z}else{if(d>T+T)return-Z;E=a-E,T=d-T,Z=-Z}if(0===T)return 0===E?0:-Z;if(0===E||(a-=(Ie=Math.floor(a/E))*E,(d-=Ie*T)<0))return Z;if(d>T)return-Z;if(E>a+a){if(T<d+d)return-Z}else{if(T>d+d)return Z;a=E-a,d=T-d,Z=-Z}if(0===d)return 0===a?0:Z;if(0===a)return-Z}};var Qt=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Qt.prototype.countSegment=function(a,d){if(a.x<this._p.x&&d.x<this._p.x)return null;if(this._p.x===d.x&&this._p.y===d.y)return this._isPointOnSegment=!0,null;if(a.y===this._p.y&&d.y===this._p.y){var E=a.x,T=d.x;return E>T&&(E=d.x,T=a.x),this._p.x>=E&&this._p.x<=T&&(this._isPointOnSegment=!0),null}if(a.y>this._p.y&&d.y<=this._p.y||d.y>this._p.y&&a.y<=this._p.y){var me=a.y-this._p.y,Xe=d.y-this._p.y,H=on.signOfDet2x2(a.x-this._p.x,me,d.x-this._p.x,Xe);if(0===H)return this._isPointOnSegment=!0,null;Xe<me&&(H=-H),H>0&&this._crossingCount++}},Qt.prototype.isPointInPolygon=function(){return this.getLocation()!==ne.EXTERIOR},Qt.prototype.getLocation=function(){return this._isPointOnSegment?ne.BOUNDARY:this._crossingCount%2==1?ne.INTERIOR:ne.EXTERIOR},Qt.prototype.isOnSegment=function(){return this._isPointOnSegment},Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt},Qt.locatePointInRing=function(){if(arguments[0]instanceof X&&xe(arguments[1],_e)){for(var d=arguments[1],E=new Qt(arguments[0]),T=new X,Z=new X,me=1;me<d.size();me++)if(d.getCoordinate(me,T),d.getCoordinate(me-1,Z),E.countSegment(T,Z),E.isOnSegment())return E.getLocation();return E.getLocation()}if(arguments[0]instanceof X&&arguments[1]instanceof Array){for(var Xe=arguments[1],H=new Qt(arguments[0]),s=1;s<Xe.length;s++)if(H.countSegment(Xe[s],Xe[s-1]),H.isOnSegment())return H.getLocation();return H.getLocation()}};var Gt=function(){},Vn={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt},Gt.orientationIndex=function(a,d,E){return ye.orientationIndex(a,d,E)},Gt.signedArea=function(){if(arguments[0]instanceof Array){var a=arguments[0];if(a.length<3)return 0;for(var d=0,E=a[0].x,T=1;T<a.length-1;T++)d+=(a[T].x-E)*(a[T-1].y-a[T+1].y);return d/2}if(xe(arguments[0],_e)){var Ie=arguments[0],Xe=Ie.size();if(Xe<3)return 0;var H=new X,s=new X,C=new X;Ie.getCoordinate(0,s),Ie.getCoordinate(1,C);var N=s.x;C.x-=N;for(var W=0,K=1;K<Xe-1;K++)H.y=s.y,s.x=C.x,s.y=C.y,Ie.getCoordinate(K+1,C),C.x-=N,W+=s.x*(H.y-C.y);return W/2}},Gt.distanceLineLine=function(a,d,E,T){if(a.equals(d))return Gt.distancePointLine(a,E,T);if(E.equals(T))return Gt.distancePointLine(T,a,d);var Z=!1;if(Pe.intersects(a,d,E,T)){var me=(d.x-a.x)*(T.y-E.y)-(d.y-a.y)*(T.x-E.x);if(0===me)Z=!0;else{var Xe=((a.y-E.y)*(d.x-a.x)-(a.x-E.x)*(d.y-a.y))/me,H=((a.y-E.y)*(T.x-E.x)-(a.x-E.x)*(T.y-E.y))/me;(H<0||H>1||Xe<0||Xe>1)&&(Z=!0)}}else Z=!0;return Z?ue.min(Gt.distancePointLine(a,E,T),Gt.distancePointLine(d,E,T),Gt.distancePointLine(E,a,d),Gt.distancePointLine(T,a,d)):0},Gt.isPointInRing=function(a,d){return Gt.locatePointInRing(a,d)!==ne.EXTERIOR},Gt.computeLength=function(a){var d=a.size();if(d<=1)return 0;var E=0,T=new X;a.getCoordinate(0,T);for(var Z=T.x,me=T.y,Ie=1;Ie<d;Ie++){a.getCoordinate(Ie,T);var Xe=T.x,H=T.y,s=Xe-Z,C=H-me;E+=Math.sqrt(s*s+C*C),Z=Xe,me=H}return E},Gt.isCCW=function(a){var d=a.length-1;if(d<3)throw new F("Ring has fewer than 4 points, so orientation cannot be determined");for(var E=a[0],T=0,Z=1;Z<=d;Z++){var me=a[Z];me.y>E.y&&(E=me,T=Z)}var Ie=T;do{(Ie-=1)<0&&(Ie=d)}while(a[Ie].equals2D(E)&&Ie!==T);var Xe=T;do{Xe=(Xe+1)%d}while(a[Xe].equals2D(E)&&Xe!==T);var H=a[Ie],s=a[Xe];if(H.equals2D(E)||s.equals2D(E)||H.equals2D(s))return!1;var C=Gt.computeOrientation(H,E,s);return 0===C?H.x>s.x:C>0},Gt.locatePointInRing=function(a,d){return Qt.locatePointInRing(a,d)},Gt.distancePointLinePerpendicular=function(a,d,E){var T=(E.x-d.x)*(E.x-d.x)+(E.y-d.y)*(E.y-d.y);return Math.abs(((d.y-a.y)*(E.x-d.x)-(d.x-a.x)*(E.y-d.y))/T)*Math.sqrt(T)},Gt.computeOrientation=function(a,d,E){return Gt.orientationIndex(a,d,E)},Gt.distancePointLine=function(){if(2===arguments.length){var a=arguments[0],d=arguments[1];if(0===d.length)throw new F("Line array must contain at least one vertex");for(var E=a.distance(d[0]),T=0;T<d.length-1;T++){var Z=Gt.distancePointLine(a,d[T],d[T+1]);Z<E&&(E=Z)}return E}if(3===arguments.length){var me=arguments[0],Ie=arguments[1],Xe=arguments[2];if(Ie.x===Xe.x&&Ie.y===Xe.y)return me.distance(Ie);var H=(Xe.x-Ie.x)*(Xe.x-Ie.x)+(Xe.y-Ie.y)*(Xe.y-Ie.y),s=((me.x-Ie.x)*(Xe.x-Ie.x)+(me.y-Ie.y)*(Xe.y-Ie.y))/H;return s<=0?me.distance(Ie):s>=1?me.distance(Xe):Math.abs(((Ie.y-me.y)*(Xe.x-Ie.x)-(Ie.x-me.x)*(Xe.y-Ie.y))/H)*Math.sqrt(H)}},Gt.isOnLine=function(a,d){for(var E=new gt,T=1;T<d.length;T++)if(E.computeIntersection(a,d[T-1],d[T]),E.hasIntersection())return!0;return!1},Vn.CLOCKWISE.get=function(){return-1},Vn.RIGHT.get=function(){return Gt.CLOCKWISE},Vn.COUNTERCLOCKWISE.get=function(){return 1},Vn.LEFT.get=function(){return Gt.COUNTERCLOCKWISE},Vn.COLLINEAR.get=function(){return 0},Vn.STRAIGHT.get=function(){return Gt.COLLINEAR},Object.defineProperties(Gt,Vn);var un=function(){};un.prototype.filter=function(a){},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un};var an=function(){var a=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=a,this._SRID=a.getSRID()},cn={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};an.prototype.isGeometryCollection=function(){return this.getSortIndex()===an.SORTINDEX_GEOMETRYCOLLECTION},an.prototype.getFactory=function(){return this._factory},an.prototype.getGeometryN=function(a){return this},an.prototype.getArea=function(){return 0},an.prototype.isRectangle=function(){return!1},an.prototype.equals=function(){if(arguments[0]instanceof an){var a=arguments[0];return null!==a&&this.equalsTopo(a)}if(arguments[0]instanceof Object){var d=arguments[0];return d instanceof an&&this.equalsExact(d)}},an.prototype.equalsExact=function(a){return this===a||this.equalsExact(a,0)},an.prototype.geometryChanged=function(){this.apply(an.geometryChangedFilter)},an.prototype.geometryChangedAction=function(){this._envelope=null},an.prototype.equalsNorm=function(a){return null!==a&&this.norm().equalsExact(a.norm())},an.prototype.getLength=function(){return 0},an.prototype.getNumGeometries=function(){return 1},an.prototype.compareTo=function(){if(1===arguments.length){var a=arguments[0],d=a;return this.getSortIndex()!==d.getSortIndex()?this.getSortIndex()-d.getSortIndex():this.isEmpty()&&d.isEmpty()?0:this.isEmpty()?-1:d.isEmpty()?1:this.compareToSameClass(a)}if(2===arguments.length){var E=arguments[0],T=arguments[1];return this.getSortIndex()!==E.getSortIndex()?this.getSortIndex()-E.getSortIndex():this.isEmpty()&&E.isEmpty()?0:this.isEmpty()?-1:E.isEmpty()?1:this.compareToSameClass(E,T)}},an.prototype.getUserData=function(){return this._userData},an.prototype.getSRID=function(){return this._SRID},an.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},an.prototype.checkNotGeometryCollection=function(a){if(a.getSortIndex()===an.SORTINDEX_GEOMETRYCOLLECTION)throw new F("This method does not support GeometryCollection arguments")},an.prototype.equal=function(a,d,E){return 0===E?a.equals(d):a.distance(d)<=E},an.prototype.norm=function(){var a=this.copy();return a.normalize(),a},an.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},an.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Pe(this._envelope)},an.prototype.setSRID=function(a){this._SRID=a},an.prototype.setUserData=function(a){this._userData=a},an.prototype.compare=function(a,d){for(var E=a.iterator(),T=d.iterator();E.hasNext()&&T.hasNext();){var Z=E.next(),me=T.next(),Ie=Z.compareTo(me);if(0!==Ie)return Ie}return E.hasNext()?1:T.hasNext()?-1:0},an.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},an.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===an.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===an.SORTINDEX_MULTIPOINT||this.getSortIndex()===an.SORTINDEX_MULTILINESTRING||this.getSortIndex()===an.SORTINDEX_MULTIPOLYGON},an.prototype.interfaces_=function(){return[$,Q,k]},an.prototype.getClass=function(){return an},an.hasNonEmptyElements=function(a){for(var d=0;d<a.length;d++)if(!a[d].isEmpty())return!0;return!1},an.hasNullElements=function(a){for(var d=0;d<a.length;d++)if(null===a[d])return!0;return!1},cn.serialVersionUID.get=function(){return 0x799ea46522854c00},cn.SORTINDEX_POINT.get=function(){return 0},cn.SORTINDEX_MULTIPOINT.get=function(){return 1},cn.SORTINDEX_LINESTRING.get=function(){return 2},cn.SORTINDEX_LINEARRING.get=function(){return 3},cn.SORTINDEX_MULTILINESTRING.get=function(){return 4},cn.SORTINDEX_POLYGON.get=function(){return 5},cn.SORTINDEX_MULTIPOLYGON.get=function(){return 6},cn.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},cn.geometryChangedFilter.get=function(){return _i},Object.defineProperties(an,cn);var _i=function(){};_i.interfaces_=function(){return[un]},_i.filter=function(a){a.geometryChangedAction()};var vi=function(){};vi.prototype.filter=function(a){},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var qn=function(){},Pi={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};qn.prototype.isInBoundary=function(a){},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn},Pi.Mod2BoundaryNodeRule.get=function(){return ci},Pi.EndPointBoundaryNodeRule.get=function(){return Ei},Pi.MultiValentEndPointBoundaryNodeRule.get=function(){return Mi},Pi.MonoValentEndPointBoundaryNodeRule.get=function(){return Zi},Pi.MOD2_BOUNDARY_RULE.get=function(){return new ci},Pi.ENDPOINT_BOUNDARY_RULE.get=function(){return new Ei},Pi.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Mi},Pi.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Zi},Pi.OGC_SFS_BOUNDARY_RULE.get=function(){return qn.MOD2_BOUNDARY_RULE},Object.defineProperties(qn,Pi);var ci=function(){};ci.prototype.isInBoundary=function(a){return a%2==1},ci.prototype.interfaces_=function(){return[qn]},ci.prototype.getClass=function(){return ci};var Ei=function(){};Ei.prototype.isInBoundary=function(a){return a>0},Ei.prototype.interfaces_=function(){return[qn]},Ei.prototype.getClass=function(){return Ei};var Mi=function(){};Mi.prototype.isInBoundary=function(a){return a>1},Mi.prototype.interfaces_=function(){return[qn]},Mi.prototype.getClass=function(){return Mi};var Zi=function(){};Zi.prototype.isInBoundary=function(a){return 1===a},Zi.prototype.interfaces_=function(){return[qn]},Zi.prototype.getClass=function(){return Zi};var ji=function(){};ji.prototype.add=function(){},ji.prototype.addAll=function(){},ji.prototype.isEmpty=function(){},ji.prototype.iterator=function(){},ji.prototype.size=function(){},ji.prototype.toArray=function(){},ji.prototype.remove=function(){},(G.prototype=new Error).name="IndexOutOfBoundsException";var $i=function(){};$i.prototype.hasNext=function(){},$i.prototype.next=function(){},$i.prototype.remove=function(){};var so=function(a){function d(){a.apply(this,arguments)}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.get=function(){},d.prototype.set=function(){},d.prototype.isEmpty=function(){},d}(ji);(I.prototype=new Error).name="NoSuchElementException";var Zn=function(a){function d(){a.call(this),this.array_=[],arguments[0]instanceof ji&&this.addAll(arguments[0])}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.ensureCapacity=function(){},d.prototype.interfaces_=function(){return[a,ji]},d.prototype.add=function(E){return 1===arguments.length?this.array_.push(E):this.array_.splice(arguments[0],arguments[1]),!0},d.prototype.clear=function(){this.array_=[]},d.prototype.addAll=function(E){for(var T=E.iterator();T.hasNext();)this.add(T.next());return!0},d.prototype.set=function(E,T){var Z=this.array_[E];return this.array_[E]=T,Z},d.prototype.iterator=function(){return new zt(this)},d.prototype.get=function(E){if(E<0||E>=this.size())throw new G;return this.array_[E]},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.size=function(){return this.array_.length},d.prototype.toArray=function(){for(var E=[],T=0,Z=this.array_.length;T<Z;T++)E.push(this.array_[T]);return E},d.prototype.remove=function(E){for(var T=!1,Z=0,me=this.array_.length;Z<me;Z++)if(this.array_[Z]===E){this.array_.splice(Z,1),T=!0;break}return T},d}(so),zt=function(a){function d(E){a.call(this),this.arrayList_=E,this.position_=0}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new I;return this.arrayList_.get(this.position_++)},d.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},d.prototype.set=function(E){return this.arrayList_.set(this.position_-1,E)},d.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},d}($i),Je=function(a){function d(){if(a.call(this),0!==arguments.length)if(1===arguments.length){var T=arguments[0];this.ensureCapacity(T.length),this.add(T,!0)}else if(2===arguments.length){var Z=arguments[0],me=arguments[1];this.ensureCapacity(Z.length),this.add(Z,me)}}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={coordArrayType:{configurable:!0}};return E.coordArrayType.get=function(){return new Array(0).fill(null)},d.prototype.getCoordinate=function(T){return this.get(T)},d.prototype.addAll=function(){if(2===arguments.length){for(var Z=arguments[1],me=!1,Ie=arguments[0].iterator();Ie.hasNext();)this.add(Ie.next(),Z),me=!0;return me}return a.prototype.addAll.apply(this,arguments)},d.prototype.clone=function(){for(var T=a.prototype.clone.call(this),Z=0;Z<this.size();Z++)T.add(Z,this.get(Z).copy());return T},d.prototype.toCoordinateArray=function(){return this.toArray(d.coordArrayType)},d.prototype.add=function(){if(1===arguments.length)a.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof X&&"boolean"==typeof arguments[1]){var Ie=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(Ie))return null;a.prototype.add.call(this,Ie)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],C=arguments[1];if(arguments[2])for(var N=0;N<s.length;N++)this.add(s[N],C);else for(var W=s.length-1;W>=0;W--)this.add(s[W],C);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof X){var K=arguments[0],he=arguments[1];if(!arguments[2]){var ge=this.size();if(ge>0&&(K>0&&this.get(K-1).equals2D(he)||K<ge&&this.get(K).equals2D(he)))return null}a.prototype.add.call(this,K,he)}}else if(4===arguments.length){var we=arguments[0],Le=arguments[1],Ve=arguments[2],We=arguments[3],lt=1;Ve>We&&(lt=-1);for(var Tt=Ve;Tt!==We;Tt+=lt)this.add(we[Tt],Le);return!0}},d.prototype.closeRing=function(){this.size()>0&&this.add(new X(this.get(0)),!1)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},Object.defineProperties(d,E),d}(Zn),nt=function(){},Se={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Se.ForwardComparator.get=function(){return Qe},Se.BidirectionalComparator.get=function(){return ot},Se.coordArrayType.get=function(){return new Array(0).fill(null)},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.isRing=function(a){return!(a.length<4||!a[0].equals2D(a[a.length-1]))},nt.ptNotInList=function(a,d){for(var E=0;E<a.length;E++){var T=a[E];if(nt.indexOf(T,d)<0)return T}return null},nt.scroll=function(a,d){var E=nt.indexOf(d,a);if(E<0)return null;var T=new Array(a.length).fill(null);$e.arraycopy(a,E,T,0,a.length-E),$e.arraycopy(a,0,T,a.length-E,E),$e.arraycopy(T,0,a,0,a.length)},nt.equals=function(){if(2===arguments.length){var a=arguments[0],d=arguments[1];if(a===d)return!0;if(null===a||null===d||a.length!==d.length)return!1;for(var E=0;E<a.length;E++)if(!a[E].equals(d[E]))return!1;return!0}if(3===arguments.length){var T=arguments[0],Z=arguments[1],me=arguments[2];if(T===Z)return!0;if(null===T||null===Z||T.length!==Z.length)return!1;for(var Ie=0;Ie<T.length;Ie++)if(0!==me.compare(T[Ie],Z[Ie]))return!1;return!0}},nt.intersection=function(a,d){for(var E=new Je,T=0;T<a.length;T++)d.intersects(a[T])&&E.add(a[T],!0);return E.toCoordinateArray()},nt.hasRepeatedPoints=function(a){for(var d=1;d<a.length;d++)if(a[d-1].equals(a[d]))return!0;return!1},nt.removeRepeatedPoints=function(a){return nt.hasRepeatedPoints(a)?new Je(a,!1).toCoordinateArray():a},nt.reverse=function(a){for(var d=a.length-1,E=Math.trunc(d/2),T=0;T<=E;T++){var Z=a[T];a[T]=a[d-T],a[d-T]=Z}},nt.removeNull=function(a){for(var d=0,E=0;E<a.length;E++)null!==a[E]&&d++;var T=new Array(d).fill(null);if(0===d)return T;for(var Z=0,me=0;me<a.length;me++)null!==a[me]&&(T[Z++]=a[me]);return T},nt.copyDeep=function(){if(1===arguments.length){for(var a=arguments[0],d=new Array(a.length).fill(null),E=0;E<a.length;E++)d[E]=new X(a[E]);return d}if(5===arguments.length)for(var T=arguments[0],Z=arguments[1],me=arguments[2],Ie=arguments[3],Xe=arguments[4],H=0;H<Xe;H++)me[Ie+H]=new X(T[Z+H])},nt.isEqualReversed=function(a,d){for(var E=0;E<a.length;E++)if(0!==a[E].compareTo(d[a.length-E-1]))return!1;return!0},nt.envelope=function(a){for(var d=new Pe,E=0;E<a.length;E++)d.expandToInclude(a[E]);return d},nt.toCoordinateArray=function(a){return a.toArray(nt.coordArrayType)},nt.atLeastNCoordinatesOrNothing=function(a,d){return d.length>=a?d:[]},nt.indexOf=function(a,d){for(var E=0;E<d.length;E++)if(a.equals(d[E]))return E;return-1},nt.increasingDirection=function(a){for(var d=0;d<Math.trunc(a.length/2);d++){var T=a[d].compareTo(a[a.length-1-d]);if(0!==T)return T}return 1},nt.compare=function(a,d){for(var E=0;E<a.length&&E<d.length;){var T=a[E].compareTo(d[E]);if(0!==T)return T;E++}return E<d.length?-1:E<a.length?1:0},nt.minCoordinate=function(a){for(var d=null,E=0;E<a.length;E++)(null===d||d.compareTo(a[E])>0)&&(d=a[E]);return d},nt.extract=function(a,d,E){d=ue.clamp(d,0,a.length);var T=(E=ue.clamp(E,-1,a.length))-d+1;E<0&&(T=0),d>=a.length&&(T=0),E<d&&(T=0);var Z=new Array(T).fill(null);if(0===T)return Z;for(var me=0,Ie=d;Ie<=E;Ie++)Z[me++]=a[Ie];return Z},Object.defineProperties(nt,Se);var Qe=function(){};Qe.prototype.compare=function(a,d){return nt.compare(a,d)},Qe.prototype.interfaces_=function(){return[oe]},Qe.prototype.getClass=function(){return Qe};var ot=function(){};ot.prototype.compare=function(a,d){var E=a,T=d;if(E.length<T.length)return-1;if(E.length>T.length)return 1;if(0===E.length)return 0;var Z=nt.compare(E,T);return nt.isEqualReversed(E,T)?0:Z},ot.prototype.OLDcompare=function(a,d){var E=a,T=d;if(E.length<T.length)return-1;if(E.length>T.length)return 1;if(0===E.length)return 0;for(var Z=nt.increasingDirection(E),me=nt.increasingDirection(T),Ie=Z>0?0:E.length-1,Xe=me>0?0:E.length-1,H=0;H<E.length;H++){var s=E[Ie].compareTo(T[Xe]);if(0!==s)return s;Ie+=Z,Xe+=me}return 0},ot.prototype.interfaces_=function(){return[oe]},ot.prototype.getClass=function(){return ot};var dt=function(){};dt.prototype.get=function(){},dt.prototype.put=function(){},dt.prototype.size=function(){},dt.prototype.values=function(){},dt.prototype.entrySet=function(){};var Pt=function(a){function d(){a.apply(this,arguments)}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d}(dt);(u.prototype=new Error).name="OperationNotSupported",(h.prototype=new ji).contains=function(){};var At=function(a){function d(){a.call(this),this.array_=[],arguments[0]instanceof ji&&this.addAll(arguments[0])}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.contains=function(E){for(var T=0,Z=this.array_.length;T<Z;T++)if(this.array_[T]===E)return!0;return!1},d.prototype.add=function(E){return!this.contains(E)&&(this.array_.push(E),!0)},d.prototype.addAll=function(E){for(var T=E.iterator();T.hasNext();)this.add(T.next());return!0},d.prototype.remove=function(E){throw new Error},d.prototype.size=function(){return this.array_.length},d.prototype.isEmpty=function(){return 0===this.array_.length},d.prototype.toArray=function(){for(var E=[],T=0,Z=this.array_.length;T<Z;T++)E.push(this.array_[T]);return E},d.prototype.iterator=function(){return new Wt(this)},d}(h),Wt=function(a){function d(E){a.call(this),this.hashSet_=E,this.position_=0}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new I;return this.hashSet_.array_[this.position_++]},d.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},d.prototype.remove=function(){throw new u},d}($i),Yt=0;(S.prototype=new Pt).get=function(a){for(var d=this.root_;null!==d;){var E=a.compareTo(d.key);if(E<0)d=d.left;else{if(!(E>0))return d.value;d=d.right}}return null},S.prototype.put=function(a,d){if(null===this.root_)return this.root_={key:a,value:d,left:null,right:null,parent:null,color:Yt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var E,T,Z=this.root_;do{if(E=Z,(T=a.compareTo(Z.key))<0)Z=Z.left;else{if(!(T>0)){var me=Z.value;return Z.value=d,me}Z=Z.right}}while(null!==Z);var Ie={key:a,left:null,right:null,value:d,parent:E,color:Yt,getValue:function(){return this.value},getKey:function(){return this.key}};return T<0?E.left=Ie:E.right=Ie,this.fixAfterInsertion(Ie),this.size_++,null},S.prototype.fixAfterInsertion=function(a){for(a.color=1;null!=a&&a!==this.root_&&1===a.parent.color;)if(v(a)===f(v(v(a)))){var d=_(v(v(a)));1===g(d)?(m(v(a),Yt),m(d,Yt),m(v(v(a)),1),a=v(v(a))):(a===_(v(a))&&(a=v(a),this.rotateLeft(a)),m(v(a),Yt),m(v(v(a)),1),this.rotateRight(v(v(a))))}else{var E=f(v(v(a)));1===g(E)?(m(v(a),Yt),m(E,Yt),m(v(v(a)),1),a=v(v(a))):(a===f(v(a))&&(a=v(a),this.rotateRight(a)),m(v(a),Yt),m(v(v(a)),1),this.rotateLeft(v(v(a))))}this.root_.color=Yt},S.prototype.values=function(){var a=new Zn,d=this.getFirstEntry();if(null!==d)for(a.add(d.value);null!==(d=S.successor(d));)a.add(d.value);return a},S.prototype.entrySet=function(){var a=new At,d=this.getFirstEntry();if(null!==d)for(a.add(d);null!==(d=S.successor(d));)a.add(d);return a},S.prototype.rotateLeft=function(a){if(null!=a){var d=a.right;a.right=d.left,null!=d.left&&(d.left.parent=a),d.parent=a.parent,null===a.parent?this.root_=d:a.parent.left===a?a.parent.left=d:a.parent.right=d,d.left=a,a.parent=d}},S.prototype.rotateRight=function(a){if(null!=a){var d=a.left;a.left=d.right,null!=d.right&&(d.right.parent=a),d.parent=a.parent,null===a.parent?this.root_=d:a.parent.right===a?a.parent.right=d:a.parent.left=d,d.right=a,a.parent=d}},S.prototype.getFirstEntry=function(){var a=this.root_;if(null!=a)for(;null!=a.left;)a=a.left;return a},S.successor=function(a){if(null===a)return null;if(null!==a.right){for(var d=a.right;null!==d.left;)d=d.left;return d}for(var E=a.parent,T=a;null!==E&&T===E.right;)T=E,E=E.parent;return E},S.prototype.size=function(){return this.size_};var Bt=function(){};Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt},M.prototype=new h,(D.prototype=new M).contains=function(a){for(var d=0,E=this.array_.length;d<E;d++)if(0===this.array_[d].compareTo(a))return!0;return!1},D.prototype.add=function(a){if(this.contains(a))return!1;for(var d=0,E=this.array_.length;d<E;d++)if(1===this.array_[d].compareTo(a))return this.array_.splice(d,0,a),!0;return this.array_.push(a),!0},D.prototype.addAll=function(a){for(var d=a.iterator();d.hasNext();)this.add(d.next());return!0},D.prototype.remove=function(a){throw new u},D.prototype.size=function(){return this.array_.length},D.prototype.isEmpty=function(){return 0===this.array_.length},D.prototype.toArray=function(){for(var a=[],d=0,E=this.array_.length;d<E;d++)a.push(this.array_[d]);return a},D.prototype.iterator=function(){return new $t(this)};var $t=function(a){this.treeSet_=a,this.position_=0};$t.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new I;return this.treeSet_.array_[this.position_++]},$t.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},$t.prototype.remove=function(){throw new u};var vn=function(){};vn.sort=function(){var a,d,E,Z=arguments[0];if(1===arguments.length)Z.sort(function(Ie,Xe){return Ie.compareTo(Xe)});else if(2===arguments.length)E=arguments[1],Z.sort(function(Ie,Xe){return E.compare(Ie,Xe)});else if(3===arguments.length){(d=Z.slice(arguments[1],arguments[2])).sort();var me=Z.slice(0,arguments[1]).concat(d,Z.slice(arguments[2],Z.length));for(Z.splice(0,Z.length),a=0;a<me.length;a++)Z.push(me[a])}else if(4===arguments.length)for(d=Z.slice(arguments[1],arguments[2]),E=arguments[3],d.sort(function(Ie,Xe){return E.compare(Ie,Xe)}),me=Z.slice(0,arguments[1]).concat(d,Z.slice(arguments[2],Z.length)),Z.splice(0,Z.length),a=0;a<me.length;a++)Z.push(me[a])},vn.asList=function(a){for(var d=new Zn,E=0,T=a.length;E<T;E++)d.add(a[E]);return d};var Cn=function(){},xn={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};xn.P.get=function(){return 0},xn.L.get=function(){return 1},xn.A.get=function(){return 2},xn.FALSE.get=function(){return-1},xn.TRUE.get=function(){return-2},xn.DONTCARE.get=function(){return-3},xn.SYM_FALSE.get=function(){return"F"},xn.SYM_TRUE.get=function(){return"T"},xn.SYM_DONTCARE.get=function(){return"*"},xn.SYM_P.get=function(){return"0"},xn.SYM_L.get=function(){return"1"},xn.SYM_A.get=function(){return"2"},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.toDimensionSymbol=function(a){switch(a){case Cn.FALSE:return Cn.SYM_FALSE;case Cn.TRUE:return Cn.SYM_TRUE;case Cn.DONTCARE:return Cn.SYM_DONTCARE;case Cn.P:return Cn.SYM_P;case Cn.L:return Cn.SYM_L;case Cn.A:return Cn.SYM_A}throw new F("Unknown dimension value: "+a)},Cn.toDimensionValue=function(a){switch(pe.toUpperCase(a)){case Cn.SYM_FALSE:return Cn.FALSE;case Cn.SYM_TRUE:return Cn.TRUE;case Cn.SYM_DONTCARE:return Cn.DONTCARE;case Cn.SYM_P:return Cn.P;case Cn.SYM_L:return Cn.L;case Cn.SYM_A:return Cn.A}throw new F("Unknown dimension symbol: "+a)},Object.defineProperties(Cn,xn);var jn=function(){};jn.prototype.filter=function(a){},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn};var jt=function(){};jt.prototype.filter=function(a,d){},jt.prototype.isDone=function(){},jt.prototype.isGeometryChanged=function(){},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt};var Dn=function(a){function d(T,Z){if(a.call(this,Z),this._geometries=T||[],a.hasNullElements(this._geometries))throw new F("geometries must not contain null elements")}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){for(var T=new Pe,Z=0;Z<this._geometries.length;Z++)T.expandToInclude(this._geometries[Z].getEnvelopeInternal());return T},d.prototype.getGeometryN=function(T){return this._geometries[T]},d.prototype.getSortIndex=function(){return a.SORTINDEX_GEOMETRYCOLLECTION},d.prototype.getCoordinates=function(){for(var T=new Array(this.getNumPoints()).fill(null),Z=-1,me=0;me<this._geometries.length;me++)for(var Ie=this._geometries[me].getCoordinates(),Xe=0;Xe<Ie.length;Xe++)T[++Z]=Ie[Xe];return T},d.prototype.getArea=function(){for(var T=0,Z=0;Z<this._geometries.length;Z++)T+=this._geometries[Z].getArea();return T},d.prototype.equalsExact=function(){if(2===arguments.length){var T=arguments[0],Z=arguments[1];if(!this.isEquivalentClass(T))return!1;var me=T;if(this._geometries.length!==me._geometries.length)return!1;for(var Ie=0;Ie<this._geometries.length;Ie++)if(!this._geometries[Ie].equalsExact(me._geometries[Ie],Z))return!1;return!0}return a.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var T=0;T<this._geometries.length;T++)this._geometries[T].normalize();vn.sort(this._geometries)},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},d.prototype.getBoundaryDimension=function(){for(var T=Cn.FALSE,Z=0;Z<this._geometries.length;Z++)T=Math.max(T,this._geometries[Z].getBoundaryDimension());return T},d.prototype.getDimension=function(){for(var T=Cn.FALSE,Z=0;Z<this._geometries.length;Z++)T=Math.max(T,this._geometries[Z].getDimension());return T},d.prototype.getLength=function(){for(var T=0,Z=0;Z<this._geometries.length;Z++)T+=this._geometries[Z].getLength();return T},d.prototype.getNumPoints=function(){for(var T=0,Z=0;Z<this._geometries.length;Z++)T+=this._geometries[Z].getNumPoints();return T},d.prototype.getNumGeometries=function(){return this._geometries.length},d.prototype.reverse=function(){for(var Z=new Array(this._geometries.length).fill(null),me=0;me<this._geometries.length;me++)Z[me]=this._geometries[me].reverse();return this.getFactory().createGeometryCollection(Z)},d.prototype.compareToSameClass=function(){if(1===arguments.length){var T=arguments[0],Z=new D(vn.asList(this._geometries)),me=new D(vn.asList(T._geometries));return this.compare(Z,me)}if(2===arguments.length){for(var Xe=arguments[1],H=arguments[0],s=this.getNumGeometries(),C=H.getNumGeometries(),N=0;N<s&&N<C;){var W=this.getGeometryN(N),K=H.getGeometryN(N),he=W.compareToSameClass(K,Xe);if(0!==he)return he;N++}return N<s?1:N<C?-1:0}},d.prototype.apply=function(){if(xe(arguments[0],vi))for(var T=arguments[0],Z=0;Z<this._geometries.length;Z++)this._geometries[Z].apply(T);else if(xe(arguments[0],jt)){var me=arguments[0];if(0===this._geometries.length)return null;for(var Ie=0;Ie<this._geometries.length&&(this._geometries[Ie].apply(me),!me.isDone());Ie++);me.isGeometryChanged()&&this.geometryChanged()}else if(xe(arguments[0],jn)){var Xe=arguments[0];Xe.filter(this);for(var H=0;H<this._geometries.length;H++)this._geometries[H].apply(Xe)}else if(xe(arguments[0],un)){var s=arguments[0];s.filter(this);for(var C=0;C<this._geometries.length;C++)this._geometries[C].apply(s)}},d.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Ne.shouldNeverReachHere(),null},d.prototype.clone=function(){var T=a.prototype.clone.call(this);T._geometries=new Array(this._geometries.length).fill(null);for(var Z=0;Z<this._geometries.length;Z++)T._geometries[Z]=this._geometries[Z].clone();return T},d.prototype.getGeometryType=function(){return"GeometryCollection"},d.prototype.copy=function(){for(var T=new Array(this._geometries.length).fill(null),Z=0;Z<T.length;Z++)T[Z]=this._geometries[Z].copy();return new d(T,this._factory)},d.prototype.isEmpty=function(){for(var T=0;T<this._geometries.length;T++)if(!this._geometries[T].isEmpty())return!1;return!0},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},E.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(d,E),d}(an),Ke=function(a){function d(){a.apply(this,arguments)}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return an.SORTINDEX_MULTILINESTRING},d.prototype.equalsExact=function(){if(2===arguments.length){var T=arguments[0],Z=arguments[1];return!!this.isEquivalentClass(T)&&a.prototype.equalsExact.call(this,T,Z)}return a.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?Cn.FALSE:0},d.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var T=0;T<this._geometries.length;T++)if(!this._geometries[T].isClosed())return!1;return!0},d.prototype.getDimension=function(){return 1},d.prototype.reverse=function(){for(var T=this._geometries.length,Z=new Array(T).fill(null),me=0;me<this._geometries.length;me++)Z[T-1-me]=this._geometries[me].reverse();return this.getFactory().createMultiLineString(Z)},d.prototype.getBoundary=function(){return new si(this).getBoundary()},d.prototype.getGeometryType=function(){return"MultiLineString"},d.prototype.copy=function(){for(var T=new Array(this._geometries.length).fill(null),Z=0;Z<T.length;Z++)T[Z]=this._geometries[Z].copy();return new d(T,this._factory)},d.prototype.interfaces_=function(){return[Bt]},d.prototype.getClass=function(){return d},E.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(d,E),d}(Dn),si=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var a=arguments[0],d=qn.MOD2_BOUNDARY_RULE;this._geom=a,this._geomFact=a.getFactory(),this._bnRule=d}else if(2===arguments.length){var E=arguments[0],T=arguments[1];this._geom=E,this._geomFact=E.getFactory(),this._bnRule=T}};si.prototype.boundaryMultiLineString=function(a){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var d=this.computeBoundaryCoordinates(a);return 1===d.length?this._geomFact.createPoint(d[0]):this._geomFact.createMultiPointFromCoords(d)},si.prototype.getBoundary=function(){return this._geom instanceof Ri?this.boundaryLineString(this._geom):this._geom instanceof Ke?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},si.prototype.boundaryLineString=function(a){return this._geom.isEmpty()?this.getEmptyMultiPoint():a.isClosed()?this._bnRule.isInBoundary(2)?a.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([a.getStartPoint(),a.getEndPoint()])},si.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},si.prototype.computeBoundaryCoordinates=function(a){var d=new Zn;this._endpointMap=new S;for(var E=0;E<a.getNumGeometries();E++){var T=a.getGeometryN(E);0!==T.getNumPoints()&&(this.addEndpoint(T.getCoordinateN(0)),this.addEndpoint(T.getCoordinateN(T.getNumPoints()-1)))}for(var Z=this._endpointMap.entrySet().iterator();Z.hasNext();){var me=Z.next(),Ie=me.getValue().count;this._bnRule.isInBoundary(Ie)&&d.add(me.getKey())}return nt.toCoordinateArray(d)},si.prototype.addEndpoint=function(a){var d=this._endpointMap.get(a);null===d&&(d=new xr,this._endpointMap.put(a,d)),d.count++},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si},si.getBoundary=function(){return 1===arguments.length?new si(arguments[0]).getBoundary():2===arguments.length?new si(arguments[0],arguments[1]).getBoundary():void 0};var xr=function(){this.count=null};xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr};var Zr=function(){},Li={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.chars=function(a,d){for(var E=new Array(d).fill(null),T=0;T<d;T++)E[T]=a;return String(E)},Zr.getStackTrace=function(){if(1===arguments.length){var a=arguments[0],d=new function(){},E=new function(){}(d);return a.printStackTrace(E),d.toString()}if(2===arguments.length){for(var Z=arguments[1],me="",Ie=new function(){}(new function(){}(Zr.getStackTrace(arguments[0]))),Xe=0;Xe<Z;Xe++)try{me+=Ie.readLine()+Zr.NEWLINE}catch(H){if(!(H instanceof R))throw H;Ne.shouldNeverReachHere()}return me}},Zr.split=function(a,d){for(var E=d.length,T=new Zn,Z=""+a,me=Z.indexOf(d);me>=0;){var Ie=Z.substring(0,me);T.add(Ie),me=(Z=Z.substring(me+E)).indexOf(d)}Z.length>0&&T.add(Z);for(var Xe=new Array(T.size()).fill(null),H=0;H<Xe.length;H++)Xe[H]=T.get(H);return Xe},Zr.toString=function(){if(1===arguments.length)return Zr.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},Zr.spaces=function(a){return Zr.chars(" ",a)},Li.NEWLINE.get=function(){return $e.getProperty("line.separator")},Li.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Zr,Li);var or=function(){};or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.copyCoord=function(a,d,E,T){for(var Z=Math.min(a.getDimension(),E.getDimension()),me=0;me<Z;me++)E.setOrdinate(T,me,a.getOrdinate(d,me))},or.isRing=function(a){var d=a.size();return 0===d||!(d<=3)&&a.getOrdinate(0,_e.X)===a.getOrdinate(d-1,_e.X)&&a.getOrdinate(0,_e.Y)===a.getOrdinate(d-1,_e.Y)},or.isEqual=function(a,d){var E=a.size();if(E!==d.size())return!1;for(var T=Math.min(a.getDimension(),d.getDimension()),Z=0;Z<E;Z++)for(var me=0;me<T;me++){var Ie=a.getOrdinate(Z,me),Xe=d.getOrdinate(Z,me);if(!(a.getOrdinate(Z,me)===d.getOrdinate(Z,me)||j.isNaN(Ie)&&j.isNaN(Xe)))return!1}return!0},or.extend=function(a,d,E){var T=a.create(E,d.getDimension()),Z=d.size();if(or.copy(d,0,T,0,Z),Z>0)for(var me=Z;me<E;me++)or.copy(d,Z-1,T,me,1);return T},or.reverse=function(a){for(var d=a.size()-1,E=Math.trunc(d/2),T=0;T<=E;T++)or.swap(a,T,d-T)},or.swap=function(a,d,E){if(d===E)return null;for(var T=0;T<a.getDimension();T++){var Z=a.getOrdinate(d,T);a.setOrdinate(d,T,a.getOrdinate(E,T)),a.setOrdinate(E,T,Z)}},or.copy=function(a,d,E,T,Z){for(var me=0;me<Z;me++)or.copyCoord(a,d+me,E,T+me)},or.toString=function(){if(1===arguments.length){var a=arguments[0],d=a.size();if(0===d)return"()";var E=a.getDimension(),T=new ee;T.append("(");for(var Z=0;Z<d;Z++){Z>0&&T.append(" ");for(var me=0;me<E;me++)me>0&&T.append(","),T.append(Zr.toString(a.getOrdinate(Z,me)))}return T.append(")"),T.toString()}},or.ensureValidRing=function(a,d){var E=d.size();return 0===E?d:E<=3?or.createClosedRing(a,d,4):d.getOrdinate(0,_e.X)===d.getOrdinate(E-1,_e.X)&&d.getOrdinate(0,_e.Y)===d.getOrdinate(E-1,_e.Y)?d:or.createClosedRing(a,d,E+1)},or.createClosedRing=function(a,d,E){var T=a.create(E,d.getDimension()),Z=d.size();or.copy(d,0,T,0,Z);for(var me=Z;me<E;me++)or.copy(d,0,T,me,1);return T};var Ri=function(a){function d(T,Z){a.call(this,Z),this._points=null,this.init(T)}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Pe:this._points.expandEnvelope(new Pe)},d.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},d.prototype.getSortIndex=function(){return a.SORTINDEX_LINESTRING},d.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},d.prototype.equalsExact=function(){if(2===arguments.length){var T=arguments[0],Z=arguments[1];if(!this.isEquivalentClass(T))return!1;var me=T;if(this._points.size()!==me._points.size())return!1;for(var Ie=0;Ie<this._points.size();Ie++)if(!this.equal(this._points.getCoordinate(Ie),me._points.getCoordinate(Ie),Z))return!1;return!0}return a.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var T=0;T<Math.trunc(this._points.size()/2);T++){var Z=this._points.size()-1-T;if(!this._points.getCoordinate(T).equals(this._points.getCoordinate(Z)))return this._points.getCoordinate(T).compareTo(this._points.getCoordinate(Z))>0&&or.reverse(this._points),null}},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?Cn.FALSE:0},d.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},d.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},d.prototype.getDimension=function(){return 1},d.prototype.getLength=function(){return Gt.computeLength(this._points)},d.prototype.getNumPoints=function(){return this._points.size()},d.prototype.reverse=function(){var T=this._points.copy();return or.reverse(T),this.getFactory().createLineString(T)},d.prototype.compareToSameClass=function(){if(1===arguments.length){for(var T=arguments[0],Z=0,me=0;Z<this._points.size()&&me<T._points.size();){var Ie=this._points.getCoordinate(Z).compareTo(T._points.getCoordinate(me));if(0!==Ie)return Ie;Z++,me++}return Z<this._points.size()?1:me<T._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},d.prototype.apply=function(){if(xe(arguments[0],vi))for(var T=arguments[0],Z=0;Z<this._points.size();Z++)T.filter(this._points.getCoordinate(Z));else if(xe(arguments[0],jt)){var me=arguments[0];if(0===this._points.size())return null;for(var Ie=0;Ie<this._points.size()&&(me.filter(this._points,Ie),!me.isDone());Ie++);me.isGeometryChanged()&&this.geometryChanged()}else(xe(arguments[0],jn)||xe(arguments[0],un))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return new si(this).getBoundary()},d.prototype.isEquivalentClass=function(T){return T instanceof d},d.prototype.clone=function(){var T=a.prototype.clone.call(this);return T._points=this._points.clone(),T},d.prototype.getCoordinateN=function(T){return this._points.getCoordinate(T)},d.prototype.getGeometryType=function(){return"LineString"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._points},d.prototype.isEmpty=function(){return 0===this._points.size()},d.prototype.init=function(T){if(null===T&&(T=this.getFactory().getCoordinateSequenceFactory().create([])),1===T.size())throw new F("Invalid number of points in LineString (found "+T.size()+" - must be 0 or >= 2)");this._points=T},d.prototype.isCoordinate=function(T){for(var Z=0;Z<this._points.size();Z++)if(this._points.getCoordinate(Z).equals(T))return!0;return!1},d.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},d.prototype.getPointN=function(T){return this.getFactory().createPoint(this._points.getCoordinate(T))},d.prototype.interfaces_=function(){return[Bt]},d.prototype.getClass=function(){return d},E.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(d,E),d}(an),to=function(){};to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to};var Vi=function(a){function d(T,Z){a.call(this,Z),this._coordinates=T||null,this.init(this._coordinates)}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Pe;var T=new Pe;return T.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),T},d.prototype.getSortIndex=function(){return a.SORTINDEX_POINT},d.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},d.prototype.equalsExact=function(){if(2===arguments.length){var T=arguments[0],Z=arguments[1];return!!this.isEquivalentClass(T)&&(!(!this.isEmpty()||!T.isEmpty())||this.isEmpty()===T.isEmpty()&&this.equal(T.getCoordinate(),this.getCoordinate(),Z))}return a.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){},d.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},d.prototype.getBoundaryDimension=function(){return Cn.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getNumPoints=function(){return this.isEmpty()?0:1},d.prototype.reverse=function(){return this.copy()},d.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},d.prototype.compareToSameClass=function(){if(1===arguments.length){var T=arguments[0];return this.getCoordinate().compareTo(T.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},d.prototype.apply=function(){if(xe(arguments[0],vi)){var T=arguments[0];if(this.isEmpty())return null;T.filter(this.getCoordinate())}else if(xe(arguments[0],jt)){var Z=arguments[0];if(this.isEmpty())return null;Z.filter(this._coordinates,0),Z.isGeometryChanged()&&this.geometryChanged()}else(xe(arguments[0],jn)||xe(arguments[0],un))&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.clone=function(){var T=a.prototype.clone.call(this);return T._coordinates=this._coordinates.clone(),T},d.prototype.getGeometryType=function(){return"Point"},d.prototype.copy=function(){return new d(this._coordinates.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._coordinates},d.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},d.prototype.isEmpty=function(){return 0===this._coordinates.size()},d.prototype.init=function(T){null===T&&(T=this.getFactory().getCoordinateSequenceFactory().create([])),Ne.isTrue(T.size()<=1),this._coordinates=T},d.prototype.isSimple=function(){return!0},d.prototype.interfaces_=function(){return[to]},d.prototype.getClass=function(){return d},E.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(d,E),d}(an),Wn=function(){};Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Ii=function(a){function d(T,Z,me){if(a.call(this,me),this._shell=null,this._holes=null,null===T&&(T=this.getFactory().createLinearRing()),null===Z&&(Z=[]),a.hasNullElements(Z))throw new F("holes must not contain null elements");if(T.isEmpty()&&a.hasNonEmptyElements(Z))throw new F("shell is empty but holes are not");this._shell=T,this._holes=Z}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},d.prototype.getSortIndex=function(){return a.SORTINDEX_POLYGON},d.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var T=new Array(this.getNumPoints()).fill(null),Z=-1,me=this._shell.getCoordinates(),Ie=0;Ie<me.length;Ie++)T[++Z]=me[Ie];for(var Xe=0;Xe<this._holes.length;Xe++)for(var H=this._holes[Xe].getCoordinates(),s=0;s<H.length;s++)T[++Z]=H[s];return T},d.prototype.getArea=function(){var T=0;T+=Math.abs(Gt.signedArea(this._shell.getCoordinateSequence()));for(var Z=0;Z<this._holes.length;Z++)T-=Math.abs(Gt.signedArea(this._holes[Z].getCoordinateSequence()));return T},d.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var T=this._shell.getCoordinateSequence(),Z=this.getEnvelopeInternal(),me=0;me<5;me++){var Ie=T.getX(me);if(Ie!==Z.getMinX()&&Ie!==Z.getMaxX())return!1;var Xe=T.getY(me);if(Xe!==Z.getMinY()&&Xe!==Z.getMaxY())return!1}for(var H=T.getX(0),s=T.getY(0),C=1;C<=4;C++){var N=T.getX(C),W=T.getY(C);if(N!==H==(W!==s))return!1;H=N,s=W}return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var T=arguments[0],Z=arguments[1];if(!this.isEquivalentClass(T))return!1;var me=T;if(!this._shell.equalsExact(me._shell,Z)||this._holes.length!==me._holes.length)return!1;for(var H=0;H<this._holes.length;H++)if(!this._holes[H].equalsExact(me._holes[H],Z))return!1;return!0}return a.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var T=0;T<this._holes.length;T++)this.normalize(this._holes[T],!1);vn.sort(this._holes)}else if(2===arguments.length){var Z=arguments[0],me=arguments[1];if(Z.isEmpty())return null;var Ie=new Array(Z.getCoordinates().length-1).fill(null);$e.arraycopy(Z.getCoordinates(),0,Ie,0,Ie.length);var Xe=nt.minCoordinate(Z.getCoordinates());nt.scroll(Ie,Xe),$e.arraycopy(Ie,0,Z.getCoordinates(),0,Ie.length),Z.getCoordinates()[Ie.length]=Ie[0],Gt.isCCW(Z.getCoordinates())===me&&nt.reverse(Z.getCoordinates())}},d.prototype.getCoordinate=function(){return this._shell.getCoordinate()},d.prototype.getNumInteriorRing=function(){return this._holes.length},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.getLength=function(){var T=0;T+=this._shell.getLength();for(var Z=0;Z<this._holes.length;Z++)T+=this._holes[Z].getLength();return T},d.prototype.getNumPoints=function(){for(var T=this._shell.getNumPoints(),Z=0;Z<this._holes.length;Z++)T+=this._holes[Z].getNumPoints();return T},d.prototype.reverse=function(){var T=this.copy();T._shell=this._shell.copy().reverse(),T._holes=new Array(this._holes.length).fill(null);for(var Z=0;Z<this._holes.length;Z++)T._holes[Z]=this._holes[Z].copy().reverse();return T},d.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},d.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var Xe=arguments[1],H=arguments[0],N=this._shell.compareToSameClass(H._shell,Xe);if(0!==N)return N;for(var W=this.getNumInteriorRing(),K=H.getNumInteriorRing(),he=0;he<W&&he<K;){var ge=this.getInteriorRingN(he),we=H.getInteriorRingN(he),Le=ge.compareToSameClass(we,Xe);if(0!==Le)return Le;he++}return he<W?1:he<K?-1:0}},d.prototype.apply=function(T){if(xe(T,vi)){this._shell.apply(T);for(var Z=0;Z<this._holes.length;Z++)this._holes[Z].apply(T)}else if(xe(T,jt)){if(this._shell.apply(T),!T.isDone())for(var me=0;me<this._holes.length&&(this._holes[me].apply(T),!T.isDone());me++);T.isGeometryChanged()&&this.geometryChanged()}else if(xe(T,jn))T.filter(this);else if(xe(T,un)){T.filter(this),this._shell.apply(T);for(var Ie=0;Ie<this._holes.length;Ie++)this._holes[Ie].apply(T)}},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var T=new Array(this._holes.length+1).fill(null);T[0]=this._shell;for(var Z=0;Z<this._holes.length;Z++)T[Z+1]=this._holes[Z];return T.length<=1?this.getFactory().createLinearRing(T[0].getCoordinateSequence()):this.getFactory().createMultiLineString(T)},d.prototype.clone=function(){var T=a.prototype.clone.call(this);T._shell=this._shell.clone(),T._holes=new Array(this._holes.length).fill(null);for(var Z=0;Z<this._holes.length;Z++)T._holes[Z]=this._holes[Z].clone();return T},d.prototype.getGeometryType=function(){return"Polygon"},d.prototype.copy=function(){for(var T=this._shell.copy(),Z=new Array(this._holes.length).fill(null),me=0;me<Z.length;me++)Z[me]=this._holes[me].copy();return new d(T,Z,this._factory)},d.prototype.getExteriorRing=function(){return this._shell},d.prototype.isEmpty=function(){return this._shell.isEmpty()},d.prototype.getInteriorRingN=function(T){return this._holes[T]},d.prototype.interfaces_=function(){return[Wn]},d.prototype.getClass=function(){return d},E.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(d,E),d}(an),co=function(a){function d(){a.apply(this,arguments)}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return an.SORTINDEX_MULTIPOINT},d.prototype.isValid=function(){return!0},d.prototype.equalsExact=function(){if(2===arguments.length){var T=arguments[0],Z=arguments[1];return!!this.isEquivalentClass(T)&&a.prototype.equalsExact.call(this,T,Z)}return a.prototype.equalsExact.apply(this,arguments)},d.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():a.prototype.getCoordinate.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return Cn.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.getGeometryType=function(){return"MultiPoint"},d.prototype.copy=function(){for(var T=new Array(this._geometries.length).fill(null),Z=0;Z<T.length;Z++)T[Z]=this._geometries[Z].copy();return new d(T,this._factory)},d.prototype.interfaces_=function(){return[to]},d.prototype.getClass=function(){return d},E.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(d,E),d}(Dn),ro=function(a){function d(T,Z){T instanceof X&&Z instanceof Ut&&(T=Z.getCoordinateSequenceFactory().create(T)),a.call(this,T,Z),this.validateConstruction()}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return an.SORTINDEX_LINEARRING},d.prototype.getBoundaryDimension=function(){return Cn.FALSE},d.prototype.isClosed=function(){return!!this.isEmpty()||a.prototype.isClosed.call(this)},d.prototype.reverse=function(){var T=this._points.copy();return or.reverse(T),this.getFactory().createLinearRing(T)},d.prototype.validateConstruction=function(){if(!this.isEmpty()&&!a.prototype.isClosed.call(this))throw new F("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<d.MINIMUM_VALID_SIZE)throw new F("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},d.prototype.getGeometryType=function(){return"LinearRing"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},E.MINIMUM_VALID_SIZE.get=function(){return 4},E.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(d,E),d}(Ri),Po=function(a){function d(){a.apply(this,arguments)}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return an.SORTINDEX_MULTIPOLYGON},d.prototype.equalsExact=function(){if(2===arguments.length){var T=arguments[0],Z=arguments[1];return!!this.isEquivalentClass(T)&&a.prototype.equalsExact.call(this,T,Z)}return a.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.reverse=function(){for(var Z=new Array(this._geometries.length).fill(null),me=0;me<this._geometries.length;me++)Z[me]=this._geometries[me].reverse();return this.getFactory().createMultiPolygon(Z)},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var T=new Zn,Z=0;Z<this._geometries.length;Z++)for(var me=this._geometries[Z].getBoundary(),Ie=0;Ie<me.getNumGeometries();Ie++)T.add(me.getGeometryN(Ie));var Xe=new Array(T.size()).fill(null);return this.getFactory().createMultiLineString(T.toArray(Xe))},d.prototype.getGeometryType=function(){return"MultiPolygon"},d.prototype.copy=function(){for(var T=new Array(this._geometries.length).fill(null),Z=0;Z<T.length;Z++)T[Z]=this._geometries[Z].copy();return new d(T,this._factory)},d.prototype.interfaces_=function(){return[Wn]},d.prototype.getClass=function(){return d},E.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(d,E),d}(Dn),Mr=function(a){this._factory=a||null,this._isUserDataCopied=!1},ba={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Mr.prototype.setCopyUserData=function(a){this._isUserDataCopied=a},Mr.prototype.edit=function(a,d){if(null===a)return null;var E=this.editInternal(a,d);return this._isUserDataCopied&&E.setUserData(a.getUserData()),E},Mr.prototype.editInternal=function(a,d){return null===this._factory&&(this._factory=a.getFactory()),a instanceof Dn?this.editGeometryCollection(a,d):a instanceof Ii?this.editPolygon(a,d):a instanceof Vi||a instanceof Ri?d.edit(a,this._factory):(Ne.shouldNeverReachHere("Unsupported Geometry class: "+a.getClass().getName()),null)},Mr.prototype.editGeometryCollection=function(a,d){for(var E=d.edit(a,this._factory),T=new Zn,Z=0;Z<E.getNumGeometries();Z++){var me=this.edit(E.getGeometryN(Z),d);null===me||me.isEmpty()||T.add(me)}return E.getClass()===co?this._factory.createMultiPoint(T.toArray([])):E.getClass()===Ke?this._factory.createMultiLineString(T.toArray([])):E.getClass()===Po?this._factory.createMultiPolygon(T.toArray([])):this._factory.createGeometryCollection(T.toArray([]))},Mr.prototype.editPolygon=function(a,d){var E=d.edit(a,this._factory);if(null===E&&(E=this._factory.createPolygon(null)),E.isEmpty())return E;var T=this.edit(E.getExteriorRing(),d);if(null===T||T.isEmpty())return this._factory.createPolygon();for(var Z=new Zn,me=0;me<E.getNumInteriorRing();me++){var Ie=this.edit(E.getInteriorRingN(me),d);null===Ie||Ie.isEmpty()||Z.add(Ie)}return this._factory.createPolygon(T,Z.toArray([]))},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.GeometryEditorOperation=function(){},ba.NoOpGeometryOperation.get=function(){return at},ba.CoordinateOperation.get=function(){return wt},ba.CoordinateSequenceOperation.get=function(){return On},Object.defineProperties(Mr,ba);var at=function(){};at.prototype.edit=function(a,d){return a},at.prototype.interfaces_=function(){return[Mr.GeometryEditorOperation]},at.prototype.getClass=function(){return at};var wt=function(){};wt.prototype.edit=function(a,d){var E=this.editCoordinates(a.getCoordinates(),a);return null===E?a:a instanceof ro?d.createLinearRing(E):a instanceof Ri?d.createLineString(E):a instanceof Vi?E.length>0?d.createPoint(E[0]):d.createPoint():a},wt.prototype.interfaces_=function(){return[Mr.GeometryEditorOperation]},wt.prototype.getClass=function(){return wt};var On=function(){};On.prototype.edit=function(a,d){return a instanceof ro?d.createLinearRing(this.edit(a.getCoordinateSequence(),a)):a instanceof Ri?d.createLineString(this.edit(a.getCoordinateSequence(),a)):a instanceof Vi?d.createPoint(this.edit(a.getCoordinateSequence(),a)):a},On.prototype.interfaces_=function(){return[Mr.GeometryEditorOperation]},On.prototype.getClass=function(){return On};var Nn=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var a=arguments[0];this._coordinates=new Array(a).fill(null);for(var d=0;d<a;d++)this._coordinates[d]=new X}else if(xe(arguments[0],_e)){var E=arguments[0];if(null===E)return this._coordinates=new Array(0).fill(null),null;this._dimension=E.getDimension(),this._coordinates=new Array(E.size()).fill(null);for(var T=0;T<this._coordinates.length;T++)this._coordinates[T]=E.getCoordinateCopy(T)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Z=arguments[0],me=arguments[1];this._coordinates=Z,this._dimension=me,null===Z&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Ie=arguments[0],Xe=arguments[1];this._coordinates=new Array(Ie).fill(null),this._dimension=Xe;for(var H=0;H<Ie;H++)this._coordinates[H]=new X}},Rn={serialVersionUID:{configurable:!0}};Nn.prototype.setOrdinate=function(a,d,E){switch(d){case _e.X:this._coordinates[a].x=E;break;case _e.Y:this._coordinates[a].y=E;break;case _e.Z:this._coordinates[a].z=E;break;default:throw new F("invalid ordinateIndex")}},Nn.prototype.size=function(){return this._coordinates.length},Nn.prototype.getOrdinate=function(a,d){switch(d){case _e.X:return this._coordinates[a].x;case _e.Y:return this._coordinates[a].y;case _e.Z:return this._coordinates[a].z}return j.NaN},Nn.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var d=arguments[0],E=arguments[1];E.x=this._coordinates[d].x,E.y=this._coordinates[d].y,E.z=this._coordinates[d].z}},Nn.prototype.getCoordinateCopy=function(a){return new X(this._coordinates[a])},Nn.prototype.getDimension=function(){return this._dimension},Nn.prototype.getX=function(a){return this._coordinates[a].x},Nn.prototype.clone=function(){for(var a=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)a[d]=this._coordinates[d].clone();return new Nn(a,this._dimension)},Nn.prototype.expandEnvelope=function(a){for(var d=0;d<this._coordinates.length;d++)a.expandToInclude(this._coordinates[d]);return a},Nn.prototype.copy=function(){for(var a=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)a[d]=this._coordinates[d].copy();return new Nn(a,this._dimension)},Nn.prototype.toString=function(){if(this._coordinates.length>0){var a=new ee(17*this._coordinates.length);a.append("("),a.append(this._coordinates[0]);for(var d=1;d<this._coordinates.length;d++)a.append(", "),a.append(this._coordinates[d]);return a.append(")"),a.toString()}return"()"},Nn.prototype.getY=function(a){return this._coordinates[a].y},Nn.prototype.toCoordinateArray=function(){return this._coordinates},Nn.prototype.interfaces_=function(){return[_e,k]},Nn.prototype.getClass=function(){return Nn},Rn.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Nn,Rn);var Yn=function(){},Dt={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Yn.prototype.readResolve=function(){return Yn.instance()},Yn.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Nn(arguments[0]);if(xe(arguments[0],_e))return new Nn(arguments[0])}else if(2===arguments.length){var E=arguments[0],T=arguments[1];return T>3&&(T=3),T<2?new Nn(E):new Nn(E,T)}},Yn.prototype.interfaces_=function(){return[se,k]},Yn.prototype.getClass=function(){return Yn},Yn.instance=function(){return Yn.instanceObject},Dt.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Dt.instanceObject.get=function(){return new Yn},Object.defineProperties(Yn,Dt);var Kn=function(a){function d(){a.call(this),this.map_=new Map}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.get=function(E){return this.map_.get(E)||null},d.prototype.put=function(E,T){return this.map_.set(E,T),T},d.prototype.values=function(){for(var E=new Zn,T=this.map_.values(),Z=T.next();!Z.done;)E.add(Z.value),Z=T.next();return E},d.prototype.entrySet=function(){var E=new At;return this.map_.entries().forEach(function(T){return E.add(T)}),E},d.prototype.size=function(){return this.map_.size()},d}(dt),Ot=function a(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=a.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof St){var d=arguments[0];this._modelType=d,d===a.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var E=arguments[0];this._modelType=a.FIXED,this.setScale(E)}else if(arguments[0]instanceof a){var T=arguments[0];this._modelType=T._modelType,this._scale=T._scale}},ft={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ot.prototype.equals=function(a){return a instanceof Ot&&this._modelType===a._modelType&&this._scale===a._scale},Ot.prototype.compareTo=function(a){var d=a,E=this.getMaximumSignificantDigits(),T=d.getMaximumSignificantDigits();return new de(E).compareTo(new de(T))},Ot.prototype.getScale=function(){return this._scale},Ot.prototype.isFloating=function(){return this._modelType===Ot.FLOATING||this._modelType===Ot.FLOATING_SINGLE},Ot.prototype.getType=function(){return this._modelType},Ot.prototype.toString=function(){var a="UNKNOWN";return this._modelType===Ot.FLOATING?a="Floating":this._modelType===Ot.FLOATING_SINGLE?a="Floating-Single":this._modelType===Ot.FIXED&&(a="Fixed (Scale="+this.getScale()+")"),a},Ot.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var a=arguments[0];return j.isNaN(a)||this._modelType===Ot.FLOATING_SINGLE?a:this._modelType===Ot.FIXED?Math.round(a*this._scale)/this._scale:a}if(arguments[0]instanceof X){var d=arguments[0];if(this._modelType===Ot.FLOATING)return null;d.x=this.makePrecise(d.x),d.y=this.makePrecise(d.y)}},Ot.prototype.getMaximumSignificantDigits=function(){var a=16;return this._modelType===Ot.FLOATING?a=16:this._modelType===Ot.FLOATING_SINGLE?a=6:this._modelType===Ot.FIXED&&(a=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),a},Ot.prototype.setScale=function(a){this._scale=Math.abs(a)},Ot.prototype.interfaces_=function(){return[k,Q]},Ot.prototype.getClass=function(){return Ot},Ot.mostPrecise=function(a,d){return a.compareTo(d)>=0?a:d},ft.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ft.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ot,ft);var St=function a(d){this._name=d||null,a.nameToTypeMap.put(d,this)},Kt={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};St.prototype.readResolve=function(){return St.nameToTypeMap.get(this._name)},St.prototype.toString=function(){return this._name},St.prototype.interfaces_=function(){return[k]},St.prototype.getClass=function(){return St},Kt.serialVersionUID.get=function(){return-552860263173159e4},Kt.nameToTypeMap.get=function(){return new Kn},Object.defineProperties(St,Kt),Ot.Type=St,Ot.FIXED=new St("FIXED"),Ot.FLOATING=new St("FLOATING"),Ot.FLOATING_SINGLE=new St("FLOATING SINGLE");var Ut=function a(){this._precisionModel=new Ot,this._SRID=0,this._coordinateSequenceFactory=a.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?xe(arguments[0],se)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ot&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},rn={serialVersionUID:{configurable:!0}};Ut.prototype.toGeometry=function(a){return a.isNull()?this.createPoint(null):a.getMinX()===a.getMaxX()&&a.getMinY()===a.getMaxY()?this.createPoint(new X(a.getMinX(),a.getMinY())):a.getMinX()===a.getMaxX()||a.getMinY()===a.getMaxY()?this.createLineString([new X(a.getMinX(),a.getMinY()),new X(a.getMaxX(),a.getMaxY())]):this.createPolygon(this.createLinearRing([new X(a.getMinX(),a.getMinY()),new X(a.getMinX(),a.getMaxY()),new X(a.getMaxX(),a.getMaxY()),new X(a.getMaxX(),a.getMinY()),new X(a.getMinX(),a.getMinY())]),null)},Ut.prototype.createLineString=function(a){return a?a instanceof Array?new Ri(this.getCoordinateSequenceFactory().create(a),this):xe(a,_e)?new Ri(a,this):void 0:new Ri(this.getCoordinateSequenceFactory().create([]),this)},Ut.prototype.createMultiLineString=function(){return 0===arguments.length?new Ke(null,this):1===arguments.length?new Ke(arguments[0],this):void 0},Ut.prototype.buildGeometry=function(a){for(var d=null,E=!1,T=!1,Z=a.iterator();Z.hasNext();){var me=Z.next(),Ie=me.getClass();null===d&&(d=Ie),Ie!==d&&(E=!0),me.isGeometryCollectionOrDerived()&&(T=!0)}if(null===d)return this.createGeometryCollection();if(E||T)return this.createGeometryCollection(Ut.toGeometryArray(a));var Xe=a.iterator().next();if(a.size()>1){if(Xe instanceof Ii)return this.createMultiPolygon(Ut.toPolygonArray(a));if(Xe instanceof Ri)return this.createMultiLineString(Ut.toLineStringArray(a));if(Xe instanceof Vi)return this.createMultiPoint(Ut.toPointArray(a));Ne.shouldNeverReachHere("Unhandled class: "+Xe.getClass().getName())}return Xe},Ut.prototype.createMultiPointFromCoords=function(a){return this.createMultiPoint(null!==a?this.getCoordinateSequenceFactory().create(a):null)},Ut.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof X){var a=arguments[0];return this.createPoint(null!==a?this.getCoordinateSequenceFactory().create([a]):null)}if(xe(arguments[0],_e))return new Vi(arguments[0],this)}},Ut.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Ut.prototype.createPolygon=function(){if(0===arguments.length)return new Ii(null,null,this);if(1===arguments.length){if(xe(arguments[0],_e))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof ro)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new Ii(arguments[0],arguments[1],this)},Ut.prototype.getSRID=function(){return this._SRID},Ut.prototype.createGeometryCollection=function(){return 0===arguments.length?new Dn(null,this):1===arguments.length?new Dn(arguments[0],this):void 0},Ut.prototype.createGeometry=function(a){return new Mr(this).edit(a,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},Ut.prototype.getPrecisionModel=function(){return this._precisionModel},Ut.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var a=arguments[0];return this.createLinearRing(null!==a?this.getCoordinateSequenceFactory().create(a):null)}if(xe(arguments[0],_e))return new ro(arguments[0],this)}},Ut.prototype.createMultiPolygon=function(){return 0===arguments.length?new Po(null,this):1===arguments.length?new Po(arguments[0],this):void 0},Ut.prototype.createMultiPoint=function(){if(0===arguments.length)return new co(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new co(arguments[0],this);if(arguments[0]instanceof Array){var d=arguments[0];return this.createMultiPoint(null!==d?this.getCoordinateSequenceFactory().create(d):null)}if(xe(arguments[0],_e)){var E=arguments[0];if(null===E)return this.createMultiPoint(new Array(0).fill(null));for(var T=new Array(E.size()).fill(null),Z=0;Z<E.size();Z++){var me=this.getCoordinateSequenceFactory().create(1,E.getDimension());or.copy(E,Z,me,0,1),T[Z]=this.createPoint(me)}return this.createMultiPoint(T)}}},Ut.prototype.interfaces_=function(){return[k]},Ut.prototype.getClass=function(){return Ut},Ut.toMultiPolygonArray=function(a){var d=new Array(a.size()).fill(null);return a.toArray(d)},Ut.toGeometryArray=function(a){if(null===a)return null;var d=new Array(a.size()).fill(null);return a.toArray(d)},Ut.getDefaultCoordinateSequenceFactory=function(){return Yn.instance()},Ut.toMultiLineStringArray=function(a){var d=new Array(a.size()).fill(null);return a.toArray(d)},Ut.toLineStringArray=function(a){var d=new Array(a.size()).fill(null);return a.toArray(d)},Ut.toMultiPointArray=function(a){var d=new Array(a.size()).fill(null);return a.toArray(d)},Ut.toLinearRingArray=function(a){var d=new Array(a.size()).fill(null);return a.toArray(d)},Ut.toPointArray=function(a){var d=new Array(a.size()).fill(null);return a.toArray(d)},Ut.toPolygonArray=function(a){var d=new Array(a.size()).fill(null);return a.toArray(d)},Ut.createPointFromInternalCoord=function(a,d){return d.getPrecisionModel().makePrecise(a),d.getFactory().createPoint(a)},rn.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Ut,rn);var P1=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Gi=function(a){this.geometryFactory=a||new Ut};Gi.prototype.read=function(a){var d,E=(d="string"==typeof a?JSON.parse(a):a).type;if(!La[E])throw new Error("Unknown GeoJSON type: "+d.type);return-1!==P1.indexOf(E)?La[E].apply(this,[d.coordinates]):La[E].apply(this,"GeometryCollection"===E?[d.geometries]:[d])},Gi.prototype.write=function(a){var d=a.getGeometryType();if(!Di[d])throw new Error("Geometry is not supported");return Di[d].apply(this,[a])};var La={Feature:function(a){var d={};for(var E in a)d[E]=a[E];if(a.geometry){if(!La[a.geometry.type])throw new Error("Unknown GeoJSON type: "+a.type);d.geometry=this.read(a.geometry)}return a.bbox&&(d.bbox=La.bbox.apply(this,[a.bbox])),d},FeatureCollection:function(a){var d={};if(a.features){d.features=[];for(var E=0;E<a.features.length;++E)d.features.push(this.read(a.features[E]))}return a.bbox&&(d.bbox=this.parse.bbox.apply(this,[a.bbox])),d},coordinates:function(a){for(var d=[],E=0;E<a.length;++E){var T=a[E];d.push(new X(T[0],T[1]))}return d},bbox:function(a){return this.geometryFactory.createLinearRing([new X(a[0],a[1]),new X(a[2],a[1]),new X(a[2],a[3]),new X(a[0],a[3]),new X(a[0],a[1])])},Point:function(a){var d=new X(a[0],a[1]);return this.geometryFactory.createPoint(d)},MultiPoint:function(a){for(var d=[],E=0;E<a.length;++E)d.push(La.Point.apply(this,[a[E]]));return this.geometryFactory.createMultiPoint(d)},LineString:function(a){var d=La.coordinates.apply(this,[a]);return this.geometryFactory.createLineString(d)},MultiLineString:function(a){for(var d=[],E=0;E<a.length;++E)d.push(La.LineString.apply(this,[a[E]]));return this.geometryFactory.createMultiLineString(d)},Polygon:function(a){for(var d=La.coordinates.apply(this,[a[0]]),E=this.geometryFactory.createLinearRing(d),T=[],Z=1;Z<a.length;++Z){var Ie=La.coordinates.apply(this,[a[Z]]),Xe=this.geometryFactory.createLinearRing(Ie);T.push(Xe)}return this.geometryFactory.createPolygon(E,T)},MultiPolygon:function(a){for(var d=[],E=0;E<a.length;++E)d.push(La.Polygon.apply(this,[a[E]]));return this.geometryFactory.createMultiPolygon(d)},GeometryCollection:function(a){for(var d=[],E=0;E<a.length;++E)d.push(this.read(a[E]));return this.geometryFactory.createGeometryCollection(d)}},Di={coordinate:function(a){return[a.x,a.y]},Point:function(a){return{type:"Point",coordinates:Di.coordinate.apply(this,[a.getCoordinate()])}},MultiPoint:function(a){for(var d=[],E=0;E<a._geometries.length;++E){var Z=Di.Point.apply(this,[a._geometries[E]]);d.push(Z.coordinates)}return{type:"MultiPoint",coordinates:d}},LineString:function(a){for(var d=[],E=a.getCoordinates(),T=0;T<E.length;++T)d.push(Di.coordinate.apply(this,[E[T]]));return{type:"LineString",coordinates:d}},MultiLineString:function(a){for(var d=[],E=0;E<a._geometries.length;++E){var Z=Di.LineString.apply(this,[a._geometries[E]]);d.push(Z.coordinates)}return{type:"MultiLineString",coordinates:d}},Polygon:function(a){var d=[],E=Di.LineString.apply(this,[a._shell]);d.push(E.coordinates);for(var T=0;T<a._holes.length;++T){var me=Di.LineString.apply(this,[a._holes[T]]);d.push(me.coordinates)}return{type:"Polygon",coordinates:d}},MultiPolygon:function(a){for(var d=[],E=0;E<a._geometries.length;++E){var Z=Di.Polygon.apply(this,[a._geometries[E]]);d.push(Z.coordinates)}return{type:"MultiPolygon",coordinates:d}},GeometryCollection:function(a){for(var d=[],E=0;E<a._geometries.length;++E){var T=a._geometries[E],Z=T.getGeometryType();d.push(Di[Z].apply(this,[T]))}return{type:"GeometryCollection",geometries:d}}},Ui=function(a){this.geometryFactory=a||new Ut,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Gi(this.geometryFactory)};Ui.prototype.read=function(a){var d=this.parser.read(a);return this.precisionModel.getType()===Ot.FIXED&&this.reducePrecision(d),d},Ui.prototype.reducePrecision=function(a){var d,E;if(a.coordinate)this.precisionModel.makePrecise(a.coordinate);else if(a.points)for(d=0,E=a.points.length;d<E;d++)this.precisionModel.makePrecise(a.points[d]);else if(a.geometries)for(d=0,E=a.geometries.length;d<E;d++)this.reducePrecision(a.geometries[d])};var nr=function(){this.parser=new Gi(this.geometryFactory)};nr.prototype.write=function(a){return this.parser.write(a)};var Be=function(){},_t={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.opposite=function(a){return a===Be.LEFT?Be.RIGHT:a===Be.RIGHT?Be.LEFT:a},_t.ON.get=function(){return 0},_t.LEFT.get=function(){return 1},_t.RIGHT.get=function(){return 2},Object.defineProperties(Be,_t),(V.prototype=new Error).name="EmptyStackException",(B.prototype=new so).add=function(a){return this.array_.push(a),!0},B.prototype.get=function(a){if(a<0||a>=this.size())throw new Error;return this.array_[a]},B.prototype.push=function(a){return this.array_.push(a),a},B.prototype.pop=function(a){if(0===this.array_.length)throw new V;return this.array_.pop()},B.prototype.peek=function(){if(0===this.array_.length)throw new V;return this.array_[this.array_.length-1]},B.prototype.empty=function(){return 0===this.array_.length},B.prototype.isEmpty=function(){return this.empty()},B.prototype.search=function(a){return this.array_.indexOf(a)},B.prototype.size=function(){return this.array_.length},B.prototype.toArray=function(){for(var a=[],d=0,E=this.array_.length;d<E;d++)a.push(this.array_[d]);return a};var Lt=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Lt.prototype.getCoordinate=function(){return this._minCoord},Lt.prototype.getRightmostSide=function(a,d){var E=this.getRightmostSideOfSegment(a,d);return E<0&&(E=this.getRightmostSideOfSegment(a,d-1)),E<0&&(this._minCoord=null,this.checkForRightmostCoordinate(a)),E},Lt.prototype.findRightmostEdgeAtVertex=function(){var a=this._minDe.getEdge().getCoordinates();Ne.isTrue(this._minIndex>0&&this._minIndex<a.length,"rightmost point expected to be interior vertex of edge");var d=a[this._minIndex-1],E=a[this._minIndex+1],T=Gt.computeOrientation(this._minCoord,E,d),Z=!1;(d.y<this._minCoord.y&&E.y<this._minCoord.y&&T===Gt.COUNTERCLOCKWISE||d.y>this._minCoord.y&&E.y>this._minCoord.y&&T===Gt.CLOCKWISE)&&(Z=!0),Z&&(this._minIndex=this._minIndex-1)},Lt.prototype.getRightmostSideOfSegment=function(a,d){var E=a.getEdge().getCoordinates();if(d<0||d+1>=E.length||E[d].y===E[d+1].y)return-1;var T=Be.LEFT;return E[d].y<E[d+1].y&&(T=Be.RIGHT),T},Lt.prototype.getEdge=function(){return this._orientedDe},Lt.prototype.checkForRightmostCoordinate=function(a){for(var d=a.getEdge().getCoordinates(),E=0;E<d.length-1;E++)(null===this._minCoord||d[E].x>this._minCoord.x)&&(this._minDe=a,this._minIndex=E,this._minCoord=d[E])},Lt.prototype.findRightmostEdgeAtNode=function(){var a=this._minDe.getNode().getEdges();this._minDe=a.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Lt.prototype.findEdge=function(a){for(var d=a.iterator();d.hasNext();){var E=d.next();E.isForward()&&this.checkForRightmostCoordinate(E)}Ne.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Be.LEFT&&(this._orientedDe=this._minDe.getSym())},Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt};var nn=function(a){function d(E,T){a.call(this,d.msgWithCoord(E,T)),this.pt=T?new X(T):null,this.name="TopologyException"}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.getCoordinate=function(){return this.pt},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.msgWithCoord=function(E,T){return T?E:E+" [ "+T+" ]"},d}(Oe),Pn=function(){this.array_=[]};Pn.prototype.addLast=function(a){this.array_.push(a)},Pn.prototype.removeFirst=function(){return this.array_.shift()},Pn.prototype.isEmpty=function(){return 0===this.array_.length};var en=function(){this._finder=null,this._dirEdgeList=new Zn,this._nodes=new Zn,this._rightMostCoord=null,this._env=null,this._finder=new Lt};en.prototype.clearVisitedEdges=function(){for(var a=this._dirEdgeList.iterator();a.hasNext();)a.next().setVisited(!1)},en.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},en.prototype.computeNodeDepth=function(a){for(var d=null,E=a.getEdges().iterator();E.hasNext();){var T=E.next();if(T.isVisited()||T.getSym().isVisited()){d=T;break}}if(null===d)throw new nn("unable to find edge to compute depths at "+a.getCoordinate());a.getEdges().computeDepths(d);for(var Z=a.getEdges().iterator();Z.hasNext();){var me=Z.next();me.setVisited(!0),this.copySymDepths(me)}},en.prototype.computeDepth=function(a){this.clearVisitedEdges();var d=this._finder.getEdge();d.setEdgeDepths(Be.RIGHT,a),this.copySymDepths(d),this.computeDepths(d)},en.prototype.create=function(a){this.addReachable(a),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},en.prototype.findResultEdges=function(){for(var a=this._dirEdgeList.iterator();a.hasNext();){var d=a.next();d.getDepth(Be.RIGHT)>=1&&d.getDepth(Be.LEFT)<=0&&!d.isInteriorAreaEdge()&&d.setInResult(!0)}},en.prototype.computeDepths=function(a){var d=new At,E=new Pn,T=a.getNode();for(E.addLast(T),d.add(T),a.setVisited(!0);!E.isEmpty();){var Z=E.removeFirst();d.add(Z),this.computeNodeDepth(Z);for(var me=Z.getEdges().iterator();me.hasNext();){var Ie=me.next().getSym();if(!Ie.isVisited()){var Xe=Ie.getNode();d.contains(Xe)||(E.addLast(Xe),d.add(Xe))}}}},en.prototype.compareTo=function(a){return this._rightMostCoord.x<a._rightMostCoord.x?-1:this._rightMostCoord.x>a._rightMostCoord.x?1:0},en.prototype.getEnvelope=function(){if(null===this._env){for(var a=new Pe,d=this._dirEdgeList.iterator();d.hasNext();)for(var E=d.next().getEdge().getCoordinates(),T=0;T<E.length-1;T++)a.expandToInclude(E[T]);this._env=a}return this._env},en.prototype.addReachable=function(a){var d=new B;for(d.add(a);!d.empty();){var E=d.pop();this.add(E,d)}},en.prototype.copySymDepths=function(a){var d=a.getSym();d.setDepth(Be.LEFT,a.getDepth(Be.RIGHT)),d.setDepth(Be.RIGHT,a.getDepth(Be.LEFT))},en.prototype.add=function(a,d){a.setVisited(!0),this._nodes.add(a);for(var E=a.getEdges().iterator();E.hasNext();){var T=E.next();this._dirEdgeList.add(T);var Z=T.getSym().getNode();Z.isVisited()||d.push(Z)}},en.prototype.getNodes=function(){return this._nodes},en.prototype.getDirectedEdges=function(){return this._dirEdgeList},en.prototype.interfaces_=function(){return[Q]},en.prototype.getClass=function(){return en};var ri=function a(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var E=arguments[0];this.init(1),this.location[Be.ON]=E}else if(arguments[0]instanceof a){var T=arguments[0];if(this.init(T.location.length),null!==T)for(var Z=0;Z<this.location.length;Z++)this.location[Z]=T.location[Z]}}else if(3===arguments.length){var me=arguments[0],Ie=arguments[1],Xe=arguments[2];this.init(3),this.location[Be.ON]=me,this.location[Be.LEFT]=Ie,this.location[Be.RIGHT]=Xe}};ri.prototype.setAllLocations=function(a){for(var d=0;d<this.location.length;d++)this.location[d]=a},ri.prototype.isNull=function(){for(var a=0;a<this.location.length;a++)if(this.location[a]!==ne.NONE)return!1;return!0},ri.prototype.setAllLocationsIfNull=function(a){for(var d=0;d<this.location.length;d++)this.location[d]===ne.NONE&&(this.location[d]=a)},ri.prototype.isLine=function(){return 1===this.location.length},ri.prototype.merge=function(a){if(a.location.length>this.location.length){var d=new Array(3).fill(null);d[Be.ON]=this.location[Be.ON],d[Be.LEFT]=ne.NONE,d[Be.RIGHT]=ne.NONE,this.location=d}for(var E=0;E<this.location.length;E++)this.location[E]===ne.NONE&&E<a.location.length&&(this.location[E]=a.location[E])},ri.prototype.getLocations=function(){return this.location},ri.prototype.flip=function(){if(this.location.length<=1)return null;var a=this.location[Be.LEFT];this.location[Be.LEFT]=this.location[Be.RIGHT],this.location[Be.RIGHT]=a},ri.prototype.toString=function(){var a=new ee;return this.location.length>1&&a.append(ne.toLocationSymbol(this.location[Be.LEFT])),a.append(ne.toLocationSymbol(this.location[Be.ON])),this.location.length>1&&a.append(ne.toLocationSymbol(this.location[Be.RIGHT])),a.toString()},ri.prototype.setLocations=function(a,d,E){this.location[Be.ON]=a,this.location[Be.LEFT]=d,this.location[Be.RIGHT]=E},ri.prototype.get=function(a){return a<this.location.length?this.location[a]:ne.NONE},ri.prototype.isArea=function(){return this.location.length>1},ri.prototype.isAnyNull=function(){for(var a=0;a<this.location.length;a++)if(this.location[a]===ne.NONE)return!0;return!1},ri.prototype.setLocation=function(){1===arguments.length?this.setLocation(Be.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},ri.prototype.init=function(a){this.location=new Array(a).fill(null),this.setAllLocations(ne.NONE)},ri.prototype.isEqualOnSide=function(a,d){return this.location[d]===a.location[d]},ri.prototype.allPositionsEqual=function(a){for(var d=0;d<this.location.length;d++)if(this.location[d]!==a)return!1;return!0},ri.prototype.interfaces_=function(){return[]},ri.prototype.getClass=function(){return ri};var cr=function a(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var d=arguments[0];this.elt[0]=new ri(d),this.elt[1]=new ri(d)}else if(arguments[0]instanceof a){var E=arguments[0];this.elt[0]=new ri(E.elt[0]),this.elt[1]=new ri(E.elt[1])}}else if(2===arguments.length){var T=arguments[0],Z=arguments[1];this.elt[0]=new ri(ne.NONE),this.elt[1]=new ri(ne.NONE),this.elt[T].setLocation(Z)}else if(3===arguments.length){var me=arguments[0],Ie=arguments[1],Xe=arguments[2];this.elt[0]=new ri(me,Ie,Xe),this.elt[1]=new ri(me,Ie,Xe)}else if(4===arguments.length){var H=arguments[0],s=arguments[1],C=arguments[2],N=arguments[3];this.elt[0]=new ri(ne.NONE,ne.NONE,ne.NONE),this.elt[1]=new ri(ne.NONE,ne.NONE,ne.NONE),this.elt[H].setLocations(s,C,N)}};cr.prototype.getGeometryCount=function(){var a=0;return this.elt[0].isNull()||a++,this.elt[1].isNull()||a++,a},cr.prototype.setAllLocations=function(a,d){this.elt[a].setAllLocations(d)},cr.prototype.isNull=function(a){return this.elt[a].isNull()},cr.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var a=arguments[0];this.setAllLocationsIfNull(0,a),this.setAllLocationsIfNull(1,a)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},cr.prototype.isLine=function(a){return this.elt[a].isLine()},cr.prototype.merge=function(a){for(var d=0;d<2;d++)null===this.elt[d]&&null!==a.elt[d]?this.elt[d]=new ri(a.elt[d]):this.elt[d].merge(a.elt[d])},cr.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},cr.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(Be.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},cr.prototype.toString=function(){var a=new ee;return null!==this.elt[0]&&(a.append("A:"),a.append(this.elt[0].toString())),null!==this.elt[1]&&(a.append(" B:"),a.append(this.elt[1].toString())),a.toString()},cr.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},cr.prototype.isAnyNull=function(a){return this.elt[a].isAnyNull()},cr.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(Be.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},cr.prototype.isEqualOnSide=function(a,d){return this.elt[0].isEqualOnSide(a.elt[0],d)&&this.elt[1].isEqualOnSide(a.elt[1],d)},cr.prototype.allPositionsEqual=function(a,d){return this.elt[a].allPositionsEqual(d)},cr.prototype.toLine=function(a){this.elt[a].isArea()&&(this.elt[a]=new ri(this.elt[a].location[0]))},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.toLineLabel=function(a){for(var d=new cr(ne.NONE),E=0;E<2;E++)d.setLocation(E,a.getLocation(E));return d};var yr=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Zn,this._pts=new Zn,this._label=new cr(ne.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Zn,this._geometryFactory=null;var a=arguments[0];this._geometryFactory=arguments[1],this.computePoints(a),this.computeRing()};yr.prototype.computeRing=function(){if(null!==this._ring)return null;for(var a=new Array(this._pts.size()).fill(null),d=0;d<this._pts.size();d++)a[d]=this._pts.get(d);this._ring=this._geometryFactory.createLinearRing(a),this._isHole=Gt.isCCW(this._ring.getCoordinates())},yr.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},yr.prototype.computePoints=function(a){this._startDe=a;var d=a,E=!0;do{if(null===d)throw new nn("Found null DirectedEdge");if(d.getEdgeRing()===this)throw new nn("Directed Edge visited twice during ring-building at "+d.getCoordinate());this._edges.add(d);var T=d.getLabel();Ne.isTrue(T.isArea()),this.mergeLabel(T),this.addPoints(d.getEdge(),d.isForward(),E),E=!1,this.setEdgeRing(d,this),d=this.getNext(d)}while(d!==this._startDe)},yr.prototype.getLinearRing=function(){return this._ring},yr.prototype.getCoordinate=function(a){return this._pts.get(a)},yr.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var a=this._startDe;do{var d=a.getNode().getEdges().getOutgoingDegree(this);d>this._maxNodeDegree&&(this._maxNodeDegree=d),a=this.getNext(a)}while(a!==this._startDe);this._maxNodeDegree*=2},yr.prototype.addPoints=function(a,d,E){var T=a.getCoordinates();if(d){var Z=1;E&&(Z=0);for(var me=Z;me<T.length;me++)this._pts.add(T[me])}else{var Ie=T.length-2;E&&(Ie=T.length-1);for(var Xe=Ie;Xe>=0;Xe--)this._pts.add(T[Xe])}},yr.prototype.isHole=function(){return this._isHole},yr.prototype.setInResult=function(){var a=this._startDe;do{a.getEdge().setInResult(!0),a=a.getNext()}while(a!==this._startDe)},yr.prototype.containsPoint=function(a){var d=this.getLinearRing();if(!d.getEnvelopeInternal().contains(a)||!Gt.isPointInRing(a,d.getCoordinates()))return!1;for(var E=this._holes.iterator();E.hasNext();)if(E.next().containsPoint(a))return!1;return!0},yr.prototype.addHole=function(a){this._holes.add(a)},yr.prototype.isShell=function(){return null===this._shell},yr.prototype.getLabel=function(){return this._label},yr.prototype.getEdges=function(){return this._edges},yr.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},yr.prototype.getShell=function(){return this._shell},yr.prototype.mergeLabel=function(){if(1===arguments.length){var a=arguments[0];this.mergeLabel(a,0),this.mergeLabel(a,1)}else if(2===arguments.length){var E=arguments[1],T=arguments[0].getLocation(E,Be.RIGHT);if(T===ne.NONE)return null;if(this._label.getLocation(E)===ne.NONE)return this._label.setLocation(E,T),null}},yr.prototype.setShell=function(a){this._shell=a,null!==a&&a.addHole(this)},yr.prototype.toPolygon=function(a){for(var d=new Array(this._holes.size()).fill(null),E=0;E<this._holes.size();E++)d[E]=this._holes.get(E).getLinearRing();return a.createPolygon(this.getLinearRing(),d)},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var xa=function(a){function d(){a.call(this,arguments[0],arguments[1])}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.setEdgeRing=function(E,T){E.setMinEdgeRing(T)},d.prototype.getNext=function(E){return E.getNextMin()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(yr),Sa=function(a){function d(){a.call(this,arguments[0],arguments[1])}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.buildMinimalRings=function(){var E=new Zn,T=this._startDe;do{if(null===T.getMinEdgeRing()){var Z=new xa(T,this._geometryFactory);E.add(Z)}T=T.getNext()}while(T!==this._startDe);return E},d.prototype.setEdgeRing=function(E,T){E.setEdgeRing(T)},d.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var E=this._startDe;do{E.getNode().getEdges().linkMinimalDirectedEdges(this),E=E.getNext()}while(E!==this._startDe)},d.prototype.getNext=function(E){return E.getNext()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(yr),wa=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};wa.prototype.setVisited=function(a){this._isVisited=a},wa.prototype.setInResult=function(a){this._isInResult=a},wa.prototype.isCovered=function(){return this._isCovered},wa.prototype.isCoveredSet=function(){return this._isCoveredSet},wa.prototype.setLabel=function(a){this._label=a},wa.prototype.getLabel=function(){return this._label},wa.prototype.setCovered=function(a){this._isCovered=a,this._isCoveredSet=!0},wa.prototype.updateIM=function(a){Ne.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(a)},wa.prototype.isInResult=function(){return this._isInResult},wa.prototype.isVisited=function(){return this._isVisited},wa.prototype.interfaces_=function(){return[]},wa.prototype.getClass=function(){return wa};var Xs=function(a){function d(){a.call(this),this._coord=null,this._edges=null;var T=arguments[1];this._coord=arguments[0],this._edges=T,this._label=new cr(0,ne.NONE)}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.isIncidentEdgeInResult=function(){for(var E=this.getEdges().getEdges().iterator();E.hasNext();)if(E.next().getEdge().isInResult())return!0;return!1},d.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},d.prototype.getCoordinate=function(){return this._coord},d.prototype.print=function(E){E.println("node "+this._coord+" lbl: "+this._label)},d.prototype.computeIM=function(E){},d.prototype.computeMergedLocation=function(E,T){var Z=ne.NONE;if(Z=this._label.getLocation(T),!E.isNull(T)){var me=E.getLocation(T);Z!==ne.BOUNDARY&&(Z=me)}return Z},d.prototype.setLabel=function(){if(2!==arguments.length)return a.prototype.setLabel.apply(this,arguments);var E=arguments[0],T=arguments[1];null===this._label?this._label=new cr(E,T):this._label.setLocation(E,T)},d.prototype.getEdges=function(){return this._edges},d.prototype.mergeLabel=function(){if(arguments[0]instanceof d)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof cr)for(var T=arguments[0],Z=0;Z<2;Z++){var me=this.computeMergedLocation(T,Z);this._label.getLocation(Z)===ne.NONE&&this._label.setLocation(Z,me)}},d.prototype.add=function(E){this._edges.insert(E),E.setNode(this)},d.prototype.setLabelBoundary=function(E){if(null===this._label)return null;var T=ne.NONE;null!==this._label&&(T=this._label.getLocation(E)),this._label.setLocation(E,T===ne.BOUNDARY?ne.INTERIOR:ne.BOUNDARY)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(wa),Qa=function(){this.nodeMap=new S,this.nodeFact=null,this.nodeFact=arguments[0]};Qa.prototype.find=function(a){return this.nodeMap.get(a)},Qa.prototype.addNode=function(){if(arguments[0]instanceof X){var a=arguments[0],d=this.nodeMap.get(a);return null===d&&(d=this.nodeFact.createNode(a),this.nodeMap.put(a,d)),d}if(arguments[0]instanceof Xs){var E=arguments[0],T=this.nodeMap.get(E.getCoordinate());return null===T?(this.nodeMap.put(E.getCoordinate(),E),E):(T.mergeLabel(E),T)}},Qa.prototype.print=function(a){for(var d=this.iterator();d.hasNext();)d.next().print(a)},Qa.prototype.iterator=function(){return this.nodeMap.values().iterator()},Qa.prototype.values=function(){return this.nodeMap.values()},Qa.prototype.getBoundaryNodes=function(a){for(var d=new Zn,E=this.iterator();E.hasNext();){var T=E.next();T.getLabel().getLocation(a)===ne.BOUNDARY&&d.add(T)}return d},Qa.prototype.add=function(a){var d=a.getCoordinate();this.addNode(d).add(a)},Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa};var Vr=function(){},l1={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr},Vr.isNorthern=function(a){return a===Vr.NE||a===Vr.NW},Vr.isOpposite=function(a,d){return a!==d&&(a-d+4)%4==2},Vr.commonHalfPlane=function(a,d){if(a===d)return a;if((a-d+4)%4==2)return-1;var E=a<d?a:d;return 0===E&&3===(a>d?a:d)?3:E},Vr.isInHalfPlane=function(a,d){return d===Vr.SE?a===Vr.SE||a===Vr.SW:a===d||a===d+1},Vr.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[0],d=arguments[1];if(0===a&&0===d)throw new F("Cannot compute the quadrant for point ( "+a+", "+d+" )");return a>=0?d>=0?Vr.NE:Vr.SE:d>=0?Vr.NW:Vr.SW}if(arguments[0]instanceof X&&arguments[1]instanceof X){var E=arguments[0],T=arguments[1];if(T.x===E.x&&T.y===E.y)throw new F("Cannot compute the quadrant for two identical points "+E);return T.x>=E.x?T.y>=E.y?Vr.NE:Vr.SE:T.y>=E.y?Vr.NW:Vr.SW}},l1.NE.get=function(){return 0},l1.NW.get=function(){return 1},l1.SW.get=function(){return 2},l1.SE.get=function(){return 3},Object.defineProperties(Vr,l1);var Aa=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var E=arguments[1],T=arguments[2];this._edge=arguments[0],this.init(E,T),this._label=null}else if(4===arguments.length){var me=arguments[1],Ie=arguments[2],Xe=arguments[3];this._edge=arguments[0],this.init(me,Ie),this._label=Xe}};Aa.prototype.compareDirection=function(a){return this._dx===a._dx&&this._dy===a._dy?0:this._quadrant>a._quadrant?1:this._quadrant<a._quadrant?-1:Gt.computeOrientation(a._p0,a._p1,this._p1)},Aa.prototype.getDy=function(){return this._dy},Aa.prototype.getCoordinate=function(){return this._p0},Aa.prototype.setNode=function(a){this._node=a},Aa.prototype.print=function(a){var d=Math.atan2(this._dy,this._dx),E=this.getClass().getName(),T=E.lastIndexOf("."),Z=E.substring(T+1);a.print("  "+Z+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+d+"   "+this._label)},Aa.prototype.compareTo=function(a){return this.compareDirection(a)},Aa.prototype.getDirectedCoordinate=function(){return this._p1},Aa.prototype.getDx=function(){return this._dx},Aa.prototype.getLabel=function(){return this._label},Aa.prototype.getEdge=function(){return this._edge},Aa.prototype.getQuadrant=function(){return this._quadrant},Aa.prototype.getNode=function(){return this._node},Aa.prototype.toString=function(){var a=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),E=d.lastIndexOf(".");return"  "+d.substring(E+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+a+"   "+this._label},Aa.prototype.computeLabel=function(a){},Aa.prototype.init=function(a,d){this._p0=a,this._p1=d,this._dx=d.x-a.x,this._dy=d.y-a.y,this._quadrant=Vr.quadrant(this._dx,this._dy),Ne.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Aa.prototype.interfaces_=function(){return[Q]},Aa.prototype.getClass=function(){return Aa};var xs=function(a){function d(){var E=arguments[0],T=arguments[1];if(a.call(this,E),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=T,T)this.init(E.getCoordinate(0),E.getCoordinate(1));else{var Z=E.getNumPoints()-1;this.init(E.getCoordinate(Z),E.getCoordinate(Z-1))}this.computeDirectedLabel()}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.getNextMin=function(){return this._nextMin},d.prototype.getDepth=function(E){return this._depth[E]},d.prototype.setVisited=function(E){this._isVisited=E},d.prototype.computeDirectedLabel=function(){this._label=new cr(this._edge.getLabel()),this._isForward||this._label.flip()},d.prototype.getNext=function(){return this._next},d.prototype.setDepth=function(E,T){if(-999!==this._depth[E]&&this._depth[E]!==T)throw new nn("assigned depths do not match",this.getCoordinate());this._depth[E]=T},d.prototype.isInteriorAreaEdge=function(){for(var E=!0,T=0;T<2;T++)this._label.isArea(T)&&this._label.getLocation(T,Be.LEFT)===ne.INTERIOR&&this._label.getLocation(T,Be.RIGHT)===ne.INTERIOR||(E=!1);return E},d.prototype.setNextMin=function(E){this._nextMin=E},d.prototype.print=function(E){a.prototype.print.call(this,E),E.print(" "+this._depth[Be.LEFT]+"/"+this._depth[Be.RIGHT]),E.print(" ("+this.getDepthDelta()+")"),this._isInResult&&E.print(" inResult")},d.prototype.setMinEdgeRing=function(E){this._minEdgeRing=E},d.prototype.isLineEdge=function(){var E=this._label.isLine(0)||this._label.isLine(1),T=!this._label.isArea(0)||this._label.allPositionsEqual(0,ne.EXTERIOR),Z=!this._label.isArea(1)||this._label.allPositionsEqual(1,ne.EXTERIOR);return E&&T&&Z},d.prototype.setEdgeRing=function(E){this._edgeRing=E},d.prototype.getMinEdgeRing=function(){return this._minEdgeRing},d.prototype.getDepthDelta=function(){var E=this._edge.getDepthDelta();return this._isForward||(E=-E),E},d.prototype.setInResult=function(E){this._isInResult=E},d.prototype.getSym=function(){return this._sym},d.prototype.isForward=function(){return this._isForward},d.prototype.getEdge=function(){return this._edge},d.prototype.printEdge=function(E){this.print(E),E.print(" "),this._isForward?this._edge.print(E):this._edge.printReverse(E)},d.prototype.setSym=function(E){this._sym=E},d.prototype.setVisitedEdge=function(E){this.setVisited(E),this._sym.setVisited(E)},d.prototype.setEdgeDepths=function(E,T){var Z=this.getEdge().getDepthDelta();this._isForward||(Z=-Z);var me=1;E===Be.LEFT&&(me=-1);var Ie=Be.opposite(E),Xe=T+Z*me;this.setDepth(E,T),this.setDepth(Ie,Xe)},d.prototype.getEdgeRing=function(){return this._edgeRing},d.prototype.isInResult=function(){return this._isInResult},d.prototype.setNext=function(E){this._next=E},d.prototype.isVisited=function(){return this._isVisited},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.depthFactor=function(E,T){return E===ne.EXTERIOR&&T===ne.INTERIOR?1:E===ne.INTERIOR&&T===ne.EXTERIOR?-1:0},d}(Aa),Ba=function(){};Ba.prototype.createNode=function(a){return new Xs(a,null)},Ba.prototype.interfaces_=function(){return[]},Ba.prototype.getClass=function(){return Ba};var lo=function(){this._edges=new Zn,this._nodes=null,this._edgeEndList=new Zn,0===arguments.length?this._nodes=new Qa(new Ba):1===arguments.length&&(this._nodes=new Qa(arguments[0]))};lo.prototype.printEdges=function(a){a.println("Edges:");for(var d=0;d<this._edges.size();d++){a.println("edge "+d+":");var E=this._edges.get(d);E.print(a),E.eiList.print(a)}},lo.prototype.find=function(a){return this._nodes.find(a)},lo.prototype.addNode=function(){return arguments[0]instanceof Xs||arguments[0]instanceof X?this._nodes.addNode(arguments[0]):void 0},lo.prototype.getNodeIterator=function(){return this._nodes.iterator()},lo.prototype.linkResultDirectedEdges=function(){for(var a=this._nodes.iterator();a.hasNext();)a.next().getEdges().linkResultDirectedEdges()},lo.prototype.debugPrintln=function(a){$e.out.println(a)},lo.prototype.isBoundaryNode=function(a,d){var E=this._nodes.find(d);if(null===E)return!1;var T=E.getLabel();return null!==T&&T.getLocation(a)===ne.BOUNDARY},lo.prototype.linkAllDirectedEdges=function(){for(var a=this._nodes.iterator();a.hasNext();)a.next().getEdges().linkAllDirectedEdges()},lo.prototype.matchInSameDirection=function(a,d,E,T){return!!a.equals(E)&&Gt.computeOrientation(a,d,T)===Gt.COLLINEAR&&Vr.quadrant(a,d)===Vr.quadrant(E,T)},lo.prototype.getEdgeEnds=function(){return this._edgeEndList},lo.prototype.debugPrint=function(a){$e.out.print(a)},lo.prototype.getEdgeIterator=function(){return this._edges.iterator()},lo.prototype.findEdgeInSameDirection=function(a,d){for(var E=0;E<this._edges.size();E++){var T=this._edges.get(E),Z=T.getCoordinates();if(this.matchInSameDirection(a,d,Z[0],Z[1])||this.matchInSameDirection(a,d,Z[Z.length-1],Z[Z.length-2]))return T}return null},lo.prototype.insertEdge=function(a){this._edges.add(a)},lo.prototype.findEdgeEnd=function(a){for(var d=this.getEdgeEnds().iterator();d.hasNext();){var E=d.next();if(E.getEdge()===a)return E}return null},lo.prototype.addEdges=function(a){for(var d=a.iterator();d.hasNext();){var E=d.next();this._edges.add(E);var T=new xs(E,!0),Z=new xs(E,!1);T.setSym(Z),Z.setSym(T),this.add(T),this.add(Z)}},lo.prototype.add=function(a){this._nodes.add(a),this._edgeEndList.add(a)},lo.prototype.getNodes=function(){return this._nodes.values()},lo.prototype.findEdge=function(a,d){for(var E=0;E<this._edges.size();E++){var T=this._edges.get(E),Z=T.getCoordinates();if(a.equals(Z[0])&&d.equals(Z[1]))return T}return null},lo.prototype.interfaces_=function(){return[]},lo.prototype.getClass=function(){return lo},lo.linkResultDirectedEdges=function(a){for(var d=a.iterator();d.hasNext();)d.next().getEdges().linkResultDirectedEdges()};var aa=function(){this._geometryFactory=null,this._shellList=new Zn,this._geometryFactory=arguments[0]};aa.prototype.sortShellsAndHoles=function(a,d,E){for(var T=a.iterator();T.hasNext();){var Z=T.next();Z.isHole()?E.add(Z):d.add(Z)}},aa.prototype.computePolygons=function(a){for(var d=new Zn,E=a.iterator();E.hasNext();){var T=E.next().toPolygon(this._geometryFactory);d.add(T)}return d},aa.prototype.placeFreeHoles=function(a,d){for(var E=d.iterator();E.hasNext();){var T=E.next();if(null===T.getShell()){var Z=this.findEdgeRingContaining(T,a);if(null===Z)throw new nn("unable to assign hole to a shell",T.getCoordinate(0));T.setShell(Z)}}},aa.prototype.buildMinimalEdgeRings=function(a,d,E){for(var T=new Zn,Z=a.iterator();Z.hasNext();){var me=Z.next();if(me.getMaxNodeDegree()>2){me.linkDirectedEdgesForMinimalEdgeRings();var Ie=me.buildMinimalRings(),Xe=this.findShell(Ie);null!==Xe?(this.placePolygonHoles(Xe,Ie),d.add(Xe)):E.addAll(Ie)}else T.add(me)}return T},aa.prototype.containsPoint=function(a){for(var d=this._shellList.iterator();d.hasNext();)if(d.next().containsPoint(a))return!0;return!1},aa.prototype.buildMaximalEdgeRings=function(a){for(var d=new Zn,E=a.iterator();E.hasNext();){var T=E.next();if(T.isInResult()&&T.getLabel().isArea()&&null===T.getEdgeRing()){var Z=new Sa(T,this._geometryFactory);d.add(Z),Z.setInResult()}}return d},aa.prototype.placePolygonHoles=function(a,d){for(var E=d.iterator();E.hasNext();){var T=E.next();T.isHole()&&T.setShell(a)}},aa.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},aa.prototype.findEdgeRingContaining=function(a,d){for(var E=a.getLinearRing(),T=E.getEnvelopeInternal(),Z=E.getCoordinateN(0),me=null,Ie=null,Xe=d.iterator();Xe.hasNext();){var H=Xe.next(),s=H.getLinearRing(),C=s.getEnvelopeInternal();null!==me&&(Ie=me.getLinearRing().getEnvelopeInternal());var N=!1;C.contains(T)&&Gt.isPointInRing(Z,s.getCoordinates())&&(N=!0),N&&(null===me||Ie.contains(C))&&(me=H)}return me},aa.prototype.findShell=function(a){for(var d=0,E=null,T=a.iterator();T.hasNext();){var Z=T.next();Z.isHole()||(E=Z,d++)}return Ne.isTrue(d<=1,"found two shells in MinimalEdgeRing list"),E},aa.prototype.add=function(){if(1===arguments.length){var a=arguments[0];this.add(a.getEdgeEnds(),a.getNodes())}else if(2===arguments.length){var d=arguments[0];lo.linkResultDirectedEdges(arguments[1]);var T=this.buildMaximalEdgeRings(d),Z=new Zn,me=this.buildMinimalEdgeRings(T,this._shellList,Z);this.sortShellsAndHoles(me,this._shellList,Z),this.placeFreeHoles(this._shellList,Z)}},aa.prototype.interfaces_=function(){return[]},aa.prototype.getClass=function(){return aa};var Ja=function(){};Ja.prototype.getBounds=function(){},Ja.prototype.interfaces_=function(){return[]},Ja.prototype.getClass=function(){return Ja};var Da=function(){this._bounds=null,this._item=null;var d=arguments[1];this._bounds=arguments[0],this._item=d};Da.prototype.getItem=function(){return this._item},Da.prototype.getBounds=function(){return this._bounds},Da.prototype.interfaces_=function(){return[Ja,k]},Da.prototype.getClass=function(){return Da};var Dr=function(){this._size=null,this._items=null,this._size=0,this._items=new Zn,this._items.add(null)};Dr.prototype.poll=function(){if(this.isEmpty())return null;var a=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),a},Dr.prototype.size=function(){return this._size},Dr.prototype.reorder=function(a){for(var d=null,E=this._items.get(a);2*a<=this._size&&((d=2*a)!==this._size&&this._items.get(d+1).compareTo(this._items.get(d))<0&&d++,this._items.get(d).compareTo(E)<0);a=d)this._items.set(a,this._items.get(d));this._items.set(a,E)},Dr.prototype.clear=function(){this._size=0,this._items.clear()},Dr.prototype.isEmpty=function(){return 0===this._size},Dr.prototype.add=function(a){this._items.add(null),this._size+=1;var d=this._size;for(this._items.set(0,a);a.compareTo(this._items.get(Math.trunc(d/2)))<0;d/=2)this._items.set(d,this._items.get(Math.trunc(d/2)));this._items.set(d,a)},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr};var Zs=function(){};Zs.prototype.visitItem=function(a){},Zs.prototype.interfaces_=function(){return[]},Zs.prototype.getClass=function(){return Zs};var B1=function(){};B1.prototype.insert=function(a,d){},B1.prototype.remove=function(a,d){},B1.prototype.query=function(){},B1.prototype.interfaces_=function(){return[]},B1.prototype.getClass=function(){return B1};var Io=function(){this._childBoundables=new Zn,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},u1={serialVersionUID:{configurable:!0}};Io.prototype.getLevel=function(){return this._level},Io.prototype.size=function(){return this._childBoundables.size()},Io.prototype.getChildBoundables=function(){return this._childBoundables},Io.prototype.addChildBoundable=function(a){Ne.isTrue(null===this._bounds),this._childBoundables.add(a)},Io.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Io.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Io.prototype.interfaces_=function(){return[Ja,k]},Io.prototype.getClass=function(){return Io},u1.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Io,u1);var Os=function(){};Os.reverseOrder=function(){return{compare:function(a,d){return d.compareTo(a)}}},Os.min=function(a){return Os.sort(a),a.get(0)},Os.sort=function(a,d){var E=a.toArray();d?vn.sort(E,d):vn.sort(E);for(var T=a.iterator(),Z=0,me=E.length;Z<me;Z++)T.next(),T.set(E[Z])},Os.singletonList=function(a){var d=new Zn;return d.add(a),d};var Yr=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var d=arguments[1],E=arguments[2];this._boundable1=arguments[0],this._boundable2=d,this._itemDistance=E,this._distance=this.distance()};Yr.prototype.expandToQueue=function(a,d){var E=Yr.isComposite(this._boundable1),T=Yr.isComposite(this._boundable2);if(E&&T)return Yr.area(this._boundable1)>Yr.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,a,d),null):(this.expand(this._boundable2,this._boundable1,a,d),null);if(E)return this.expand(this._boundable1,this._boundable2,a,d),null;if(T)return this.expand(this._boundable2,this._boundable1,a,d),null;throw new F("neither boundable is composite")},Yr.prototype.isLeaves=function(){return!(Yr.isComposite(this._boundable1)||Yr.isComposite(this._boundable2))},Yr.prototype.compareTo=function(a){return this._distance<a._distance?-1:this._distance>a._distance?1:0},Yr.prototype.expand=function(a,d,E,T){for(var Z=a.getChildBoundables().iterator();Z.hasNext();){var me=Z.next(),Ie=new Yr(me,d,this._itemDistance);Ie.getDistance()<T&&E.add(Ie)}},Yr.prototype.getBoundable=function(a){return 0===a?this._boundable1:this._boundable2},Yr.prototype.getDistance=function(){return this._distance},Yr.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Yr.prototype.interfaces_=function(){return[Q]},Yr.prototype.getClass=function(){return Yr},Yr.area=function(a){return a.getBounds().getArea()},Yr.isComposite=function(a){return a instanceof Io};var To=function a(){if(this._root=null,this._built=!1,this._itemBoundables=new Zn,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=a.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var E=arguments[0];Ne.isTrue(E>1,"Node capacity must be greater than 1"),this._nodeCapacity=E}},Sn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};To.prototype.getNodeCapacity=function(){return this._nodeCapacity},To.prototype.lastNode=function(a){return a.get(a.size()-1)},To.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var a=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var E=d.next();E instanceof Io?a+=this.size(E):E instanceof Da&&(a+=1)}return a}},To.prototype.removeItem=function(a,d){for(var E=null,T=a.getChildBoundables().iterator();T.hasNext();){var Z=T.next();Z instanceof Da&&Z.getItem()===d&&(E=Z)}return null!==E&&(a.getChildBoundables().remove(E),!0)},To.prototype.itemsTree=function(){if(0===arguments.length){this.build();var a=this.itemsTree(this._root);return null===a?new Zn:a}if(1===arguments.length){for(var d=arguments[0],E=new Zn,T=d.getChildBoundables().iterator();T.hasNext();){var Z=T.next();if(Z instanceof Io){var me=this.itemsTree(Z);null!==me&&E.add(me)}else Z instanceof Da?E.add(Z.getItem()):Ne.shouldNeverReachHere()}return E.size()<=0?null:E}},To.prototype.insert=function(a,d){Ne.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Da(a,d))},To.prototype.boundablesAtLevel=function(){if(1===arguments.length){var a=arguments[0],d=new Zn;return this.boundablesAtLevel(a,this._root,d),d}if(3===arguments.length){var E=arguments[0],T=arguments[1],Z=arguments[2];if(Ne.isTrue(E>-2),T.getLevel()===E)return Z.add(T),null;for(var me=T.getChildBoundables().iterator();me.hasNext();){var Ie=me.next();Ie instanceof Io?this.boundablesAtLevel(E,Ie,Z):(Ne.isTrue(Ie instanceof Da),-1===E&&Z.add(Ie))}return null}},To.prototype.query=function(){if(1===arguments.length){var a=arguments[0];this.build();var d=new Zn;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),a)&&this.query(a,this._root,d),d}if(2===arguments.length){var E=arguments[0],T=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),E)&&this.query(E,this._root,T)}else if(3===arguments.length)if(xe(arguments[2],Zs)&&arguments[0]instanceof Object&&arguments[1]instanceof Io)for(var Z=arguments[0],Ie=arguments[2],Xe=arguments[1].getChildBoundables(),H=0;H<Xe.size();H++){var s=Xe.get(H);this.getIntersectsOp().intersects(s.getBounds(),Z)&&(s instanceof Io?this.query(Z,s,Ie):s instanceof Da?Ie.visitItem(s.getItem()):Ne.shouldNeverReachHere())}else if(xe(arguments[2],so)&&arguments[0]instanceof Object&&arguments[1]instanceof Io)for(var C=arguments[0],W=arguments[2],K=arguments[1].getChildBoundables(),he=0;he<K.size();he++){var ge=K.get(he);this.getIntersectsOp().intersects(ge.getBounds(),C)&&(ge instanceof Io?this.query(C,ge,W):ge instanceof Da?W.add(ge.getItem()):Ne.shouldNeverReachHere())}},To.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},To.prototype.getRoot=function(){return this.build(),this._root},To.prototype.remove=function(){if(2===arguments.length){var a=arguments[0],d=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),a)&&this.remove(a,this._root,d)}if(3===arguments.length){var E=arguments[0],T=arguments[1],Z=arguments[2],me=this.removeItem(T,Z);if(me)return!0;for(var Ie=null,Xe=T.getChildBoundables().iterator();Xe.hasNext();){var H=Xe.next();if(this.getIntersectsOp().intersects(H.getBounds(),E)&&H instanceof Io&&(me=this.remove(E,H,Z))){Ie=H;break}}return null!==Ie&&Ie.getChildBoundables().isEmpty()&&T.getChildBoundables().remove(Ie),me}},To.prototype.createHigherLevels=function(a,d){Ne.isTrue(!a.isEmpty());var E=this.createParentBoundables(a,d+1);return 1===E.size()?E.get(0):this.createHigherLevels(E,d+1)},To.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var a=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var E=d.next();if(E instanceof Io){var T=this.depth(E);T>a&&(a=T)}}return a+1}},To.prototype.createParentBoundables=function(a,d){Ne.isTrue(!a.isEmpty());var E=new Zn;E.add(this.createNode(d));var T=new Zn(a);Os.sort(T,this.getComparator());for(var Z=T.iterator();Z.hasNext();){var me=Z.next();this.lastNode(E).getChildBoundables().size()===this.getNodeCapacity()&&E.add(this.createNode(d)),this.lastNode(E).addChildBoundable(me)}return E},To.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},To.prototype.interfaces_=function(){return[k]},To.prototype.getClass=function(){return To},To.compareDoubles=function(a,d){return a>d?1:a<d?-1:0},Sn.IntersectsOp.get=function(){return Fc},Sn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Sn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(To,Sn);var Fc=function(){},li=function(){};li.prototype.distance=function(a,d){},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var Sc=function(a){function d(T){a.call(this,T=T||d.DEFAULT_NODE_CAPACITY)}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return d.prototype.createParentBoundablesFromVerticalSlices=function(T,Z){Ne.isTrue(T.length>0);for(var me=new Zn,Ie=0;Ie<T.length;Ie++)me.addAll(this.createParentBoundablesFromVerticalSlice(T[Ie],Z));return me},d.prototype.createNode=function(T){return new Vc(T)},d.prototype.size=function(){return 0===arguments.length?a.prototype.size.call(this):a.prototype.size.apply(this,arguments)},d.prototype.insert=function(){if(2!==arguments.length)return a.prototype.insert.apply(this,arguments);var T=arguments[0],Z=arguments[1];if(T.isNull())return null;a.prototype.insert.call(this,T,Z)},d.prototype.getIntersectsOp=function(){return d.intersectsOp},d.prototype.verticalSlices=function(T,Z){for(var me=Math.trunc(Math.ceil(T.size()/Z)),Ie=new Array(Z).fill(null),Xe=T.iterator(),H=0;H<Z;H++){Ie[H]=new Zn;for(var s=0;Xe.hasNext()&&s<me;){var C=Xe.next();Ie[H].add(C),s++}}return Ie},d.prototype.query=function(){if(1===arguments.length)return a.prototype.query.call(this,arguments[0]);2===arguments.length?a.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(xe(arguments[2],Zs)&&arguments[0]instanceof Object&&arguments[1]instanceof Io||xe(arguments[2],so)&&arguments[0]instanceof Object&&arguments[1]instanceof Io)&&a.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},d.prototype.getComparator=function(){return d.yComparator},d.prototype.createParentBoundablesFromVerticalSlice=function(T,Z){return a.prototype.createParentBoundables.call(this,T,Z)},d.prototype.remove=function(){return 2===arguments.length?a.prototype.remove.call(this,arguments[0],arguments[1]):a.prototype.remove.apply(this,arguments)},d.prototype.depth=function(){return 0===arguments.length?a.prototype.depth.call(this):a.prototype.depth.apply(this,arguments)},d.prototype.createParentBoundables=function(T,Z){Ne.isTrue(!T.isEmpty());var me=Math.trunc(Math.ceil(T.size()/this.getNodeCapacity())),Ie=new Zn(T);Os.sort(Ie,d.xComparator);var Xe=this.verticalSlices(Ie,Math.trunc(Math.ceil(Math.sqrt(me))));return this.createParentBoundablesFromVerticalSlices(Xe,Z)},d.prototype.nearestNeighbour=function(){if(1===arguments.length){if(xe(arguments[0],li)){var T=arguments[0],Z=new Yr(this.getRoot(),this.getRoot(),T);return this.nearestNeighbour(Z)}if(arguments[0]instanceof Yr)return this.nearestNeighbour(arguments[0],j.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof d&&xe(arguments[1],li)){var Ie=arguments[0],Xe=arguments[1],H=new Yr(this.getRoot(),Ie.getRoot(),Xe);return this.nearestNeighbour(H)}if(arguments[0]instanceof Yr&&"number"==typeof arguments[1]){var s=arguments[0],C=arguments[1],N=null,W=new Dr;for(W.add(s);!W.isEmpty()&&C>0;){var K=W.poll(),he=K.getDistance();if(he>=C)break;K.isLeaves()?(C=he,N=K):K.expandToQueue(W,C)}return[N.getBoundable(0).getItem(),N.getBoundable(1).getItem()]}}else if(3===arguments.length){var Le=arguments[2],Ve=new Da(arguments[0],arguments[1]),We=new Yr(this.getRoot(),Ve,Le);return this.nearestNeighbour(We)[0]}},d.prototype.interfaces_=function(){return[B1,k]},d.prototype.getClass=function(){return d},d.centreX=function(T){return d.avg(T.getMinX(),T.getMaxX())},d.avg=function(T,Z){return(T+Z)/2},d.centreY=function(T){return d.avg(T.getMinY(),T.getMaxY())},E.STRtreeNode.get=function(){return Vc},E.serialVersionUID.get=function(){return 0x39920f7d5f261e0},E.xComparator.get=function(){return{interfaces_:function(){return[oe]},compare:function(T,Z){return a.compareDoubles(d.centreX(T.getBounds()),d.centreX(Z.getBounds()))}}},E.yComparator.get=function(){return{interfaces_:function(){return[oe]},compare:function(T,Z){return a.compareDoubles(d.centreY(T.getBounds()),d.centreY(Z.getBounds()))}}},E.intersectsOp.get=function(){return{interfaces_:function(){return[a.IntersectsOp]},intersects:function(T,Z){return T.intersects(Z)}}},E.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(d,E),d}(To),Vc=function(a){function d(){a.call(this,arguments[0])}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.computeBounds=function(){for(var E=null,T=this.getChildBoundables().iterator();T.hasNext();){var Z=T.next();null===E?E=new Pe(Z.getBounds()):E.expandToInclude(Z.getBounds())}return E},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Io),Oa=function(){};Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa},Oa.relativeSign=function(a,d){return a<d?-1:a>d?1:0},Oa.compare=function(a,d,E){if(d.equals2D(E))return 0;var T=Oa.relativeSign(d.x,E.x),Z=Oa.relativeSign(d.y,E.y);switch(a){case 0:return Oa.compareValue(T,Z);case 1:return Oa.compareValue(Z,T);case 2:return Oa.compareValue(Z,-T);case 3:return Oa.compareValue(-T,Z);case 4:return Oa.compareValue(-T,-Z);case 5:return Oa.compareValue(-Z,-T);case 6:return Oa.compareValue(-Z,T);case 7:return Oa.compareValue(T,-Z)}return Ne.shouldNeverReachHere("invalid octant value"),0},Oa.compareValue=function(a,d){return a<0?-1:a>0?1:d<0?-1:d>0?1:0};var ps=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var a=arguments[0],d=arguments[1],E=arguments[2],T=arguments[3];this._segString=a,this.coord=new X(d),this.segmentIndex=E,this._segmentOctant=T,this._isInterior=!d.equals2D(a.getCoordinate(E))};ps.prototype.getCoordinate=function(){return this.coord},ps.prototype.print=function(a){a.print(this.coord),a.print(" seg # = "+this.segmentIndex)},ps.prototype.compareTo=function(a){var d=a;return this.segmentIndex<d.segmentIndex?-1:this.segmentIndex>d.segmentIndex?1:this.coord.equals2D(d.coord)?0:Oa.compare(this._segmentOctant,this.coord,d.coord)},ps.prototype.isEndPoint=function(a){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===a},ps.prototype.isInterior=function(){return this._isInterior},ps.prototype.interfaces_=function(){return[Q]},ps.prototype.getClass=function(){return ps};var sa=function(){this._nodeMap=new S,this._edge=null,this._edge=arguments[0]};sa.prototype.getSplitCoordinates=function(){var a=new Je;this.addEndpoints();for(var d=this.iterator(),E=d.next();d.hasNext();){var T=d.next();this.addEdgeCoordinates(E,T,a),E=T}return a.toCoordinateArray()},sa.prototype.addCollapsedNodes=function(){var a=new Zn;this.findCollapsesFromInsertedNodes(a),this.findCollapsesFromExistingVertices(a);for(var d=a.iterator();d.hasNext();){var E=d.next().intValue();this.add(this._edge.getCoordinate(E),E)}},sa.prototype.print=function(a){a.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(a)},sa.prototype.findCollapsesFromExistingVertices=function(a){for(var d=0;d<this._edge.size()-2;d++){var E=this._edge.getCoordinate(d),T=this._edge.getCoordinate(d+2);E.equals2D(T)&&a.add(new de(d+1))}},sa.prototype.addEdgeCoordinates=function(a,d,E){var T=this._edge.getCoordinate(d.segmentIndex),Z=d.isInterior()||!d.coord.equals2D(T);E.add(new X(a.coord),!1);for(var me=a.segmentIndex+1;me<=d.segmentIndex;me++)E.add(this._edge.getCoordinate(me));Z&&E.add(new X(d.coord))},sa.prototype.iterator=function(){return this._nodeMap.values().iterator()},sa.prototype.addSplitEdges=function(a){this.addEndpoints(),this.addCollapsedNodes();for(var d=this.iterator(),E=d.next();d.hasNext();){var T=d.next(),Z=this.createSplitEdge(E,T);a.add(Z),E=T}},sa.prototype.findCollapseIndex=function(a,d,E){if(!a.coord.equals2D(d.coord))return!1;var T=d.segmentIndex-a.segmentIndex;return d.isInterior()||T--,1===T&&(E[0]=a.segmentIndex+1,!0)},sa.prototype.findCollapsesFromInsertedNodes=function(a){for(var d=new Array(1).fill(null),E=this.iterator(),T=E.next();E.hasNext();){var Z=E.next();this.findCollapseIndex(T,Z,d)&&a.add(new de(d[0])),T=Z}},sa.prototype.getEdge=function(){return this._edge},sa.prototype.addEndpoints=function(){var a=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(a),a)},sa.prototype.createSplitEdge=function(a,d){var E=d.segmentIndex-a.segmentIndex+2,T=this._edge.getCoordinate(d.segmentIndex),Z=d.isInterior()||!d.coord.equals2D(T);Z||E--;var me=new Array(E).fill(null),Ie=0;me[Ie++]=new X(a.coord);for(var Xe=a.segmentIndex+1;Xe<=d.segmentIndex;Xe++)me[Ie++]=this._edge.getCoordinate(Xe);return Z&&(me[Ie]=new X(d.coord)),new Xr(me,this._edge.getData())},sa.prototype.add=function(a,d){var E=new ps(this._edge,a,d,this._edge.getSegmentOctant(d)),T=this._nodeMap.get(E);return null!==T?(Ne.isTrue(T.coord.equals2D(a),"Found equal nodes with different coordinates"),T):(this._nodeMap.put(E,E),E)},sa.prototype.checkSplitEdgesCorrectness=function(a){var d=this._edge.getCoordinates(),E=a.get(0).getCoordinate(0);if(!E.equals2D(d[0]))throw new Oe("bad split edge start point at "+E);var T=a.get(a.size()-1).getCoordinates(),Z=T[T.length-1];if(!Z.equals2D(d[d.length-1]))throw new Oe("bad split edge end point at "+Z)},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa};var es=function(){};es.prototype.interfaces_=function(){return[]},es.prototype.getClass=function(){return es},es.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var a=arguments[0],d=arguments[1];if(0===a&&0===d)throw new F("Cannot compute the octant for point ( "+a+", "+d+" )");var E=Math.abs(a),T=Math.abs(d);return a>=0?d>=0?E>=T?0:1:E>=T?7:6:d>=0?E>=T?3:2:E>=T?4:5}if(arguments[0]instanceof X&&arguments[1]instanceof X){var Z=arguments[0],me=arguments[1],Ie=me.x-Z.x,Xe=me.y-Z.y;if(0===Ie&&0===Xe)throw new F("Cannot compute the octant for two identical points "+Z);return es.octant(Ie,Xe)}};var Mo=function(){};Mo.prototype.getCoordinates=function(){},Mo.prototype.size=function(){},Mo.prototype.getCoordinate=function(a){},Mo.prototype.isClosed=function(){},Mo.prototype.setData=function(a){},Mo.prototype.getData=function(){},Mo.prototype.interfaces_=function(){return[]},Mo.prototype.getClass=function(){return Mo};var d1=function(){};d1.prototype.addIntersection=function(a,d){},d1.prototype.interfaces_=function(){return[Mo]},d1.prototype.getClass=function(){return d1};var Xr=function(){this._nodeList=new sa(this),this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};Xr.prototype.getCoordinates=function(){return this._pts},Xr.prototype.size=function(){return this._pts.length},Xr.prototype.getCoordinate=function(a){return this._pts[a]},Xr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Xr.prototype.getSegmentOctant=function(a){return a===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(a),this.getCoordinate(a+1))},Xr.prototype.setData=function(a){this._data=a},Xr.prototype.safeOctant=function(a,d){return a.equals2D(d)?0:es.octant(a,d)},Xr.prototype.getData=function(){return this._data},Xr.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var T=arguments[1],me=new X(arguments[0].getIntersection(arguments[3]));this.addIntersection(me,T)}},Xr.prototype.toString=function(){return qe.toLineString(new Nn(this._pts))},Xr.prototype.getNodeList=function(){return this._nodeList},Xr.prototype.addIntersectionNode=function(a,d){var E=d,T=E+1;return T<this._pts.length&&a.equals2D(this._pts[T])&&(E=T),this._nodeList.add(a,E)},Xr.prototype.addIntersections=function(a,d,E){for(var T=0;T<a.getIntersectionNum();T++)this.addIntersection(a,d,E,T)},Xr.prototype.interfaces_=function(){return[d1]},Xr.prototype.getClass=function(){return Xr},Xr.getNodedSubstrings=function(){if(1===arguments.length){var a=arguments[0],d=new Zn;return Xr.getNodedSubstrings(a,d),d}if(2===arguments.length)for(var T=arguments[1],Z=arguments[0].iterator();Z.hasNext();)Z.next().getNodeList().addSplitEdges(T)};var zi=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new X,this.p1=new X;else if(1===arguments.length){var a=arguments[0];this.p0=new X(a.p0),this.p1=new X(a.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var T=arguments[2],Z=arguments[3];this.p0=new X(arguments[0],arguments[1]),this.p1=new X(T,Z)}},Hr={serialVersionUID:{configurable:!0}};zi.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},zi.prototype.orientationIndex=function(){if(arguments[0]instanceof zi){var a=arguments[0],d=Gt.orientationIndex(this.p0,this.p1,a.p0),E=Gt.orientationIndex(this.p0,this.p1,a.p1);return d>=0&&E>=0||d<=0&&E<=0?Math.max(d,E):0}if(arguments[0]instanceof X)return Gt.orientationIndex(this.p0,this.p1,arguments[0])},zi.prototype.toGeometry=function(a){return a.createLineString([this.p0,this.p1])},zi.prototype.isVertical=function(){return this.p0.x===this.p1.x},zi.prototype.equals=function(a){if(!(a instanceof zi))return!1;var d=a;return this.p0.equals(d.p0)&&this.p1.equals(d.p1)},zi.prototype.intersection=function(a){var d=new gt;return d.computeIntersection(this.p0,this.p1,a.p0,a.p1),d.hasIntersection()?d.getIntersection(0):null},zi.prototype.project=function(){if(arguments[0]instanceof X){var a=arguments[0];if(a.equals(this.p0)||a.equals(this.p1))return new X(a);var d=this.projectionFactor(a),E=new X;return E.x=this.p0.x+d*(this.p1.x-this.p0.x),E.y=this.p0.y+d*(this.p1.y-this.p0.y),E}if(arguments[0]instanceof zi){var T=arguments[0],Z=this.projectionFactor(T.p0),me=this.projectionFactor(T.p1);if(Z>=1&&me>=1||Z<=0&&me<=0)return null;var Ie=this.project(T.p0);Z<0&&(Ie=this.p0),Z>1&&(Ie=this.p1);var Xe=this.project(T.p1);return me<0&&(Xe=this.p0),me>1&&(Xe=this.p1),new zi(Ie,Xe)}},zi.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},zi.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},zi.prototype.getCoordinate=function(a){return 0===a?this.p0:this.p1},zi.prototype.distancePerpendicular=function(a){return Gt.distancePointLinePerpendicular(a,this.p0,this.p1)},zi.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},zi.prototype.midPoint=function(){return zi.midPoint(this.p0,this.p1)},zi.prototype.projectionFactor=function(a){if(a.equals(this.p0))return 0;if(a.equals(this.p1))return 1;var d=this.p1.x-this.p0.x,E=this.p1.y-this.p0.y,T=d*d+E*E;return T<=0?j.NaN:((a.x-this.p0.x)*d+(a.y-this.p0.y)*E)/T},zi.prototype.closestPoints=function(a){var d=this.intersection(a);if(null!==d)return[d,d];var E=new Array(2).fill(null),T=j.MAX_VALUE,Z=null,me=this.closestPoint(a.p0);T=me.distance(a.p0),E[0]=me,E[1]=a.p0;var Ie=this.closestPoint(a.p1);(Z=Ie.distance(a.p1))<T&&(T=Z,E[0]=Ie,E[1]=a.p1);var Xe=a.closestPoint(this.p0);(Z=Xe.distance(this.p0))<T&&(T=Z,E[0]=this.p0,E[1]=Xe);var H=a.closestPoint(this.p1);return(Z=H.distance(this.p1))<T&&(T=Z,E[0]=this.p1,E[1]=H),E},zi.prototype.closestPoint=function(a){var d=this.projectionFactor(a);return d>0&&d<1?this.project(a):this.p0.distance(a)<this.p1.distance(a)?this.p0:this.p1},zi.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},zi.prototype.getLength=function(){return this.p0.distance(this.p1)},zi.prototype.compareTo=function(a){var d=a,E=this.p0.compareTo(d.p0);return 0!==E?E:this.p1.compareTo(d.p1)},zi.prototype.reverse=function(){var a=this.p0;this.p0=this.p1,this.p1=a},zi.prototype.equalsTopo=function(a){return this.p0.equals(a.p0)&&(this.p1.equals(a.p1)||this.p0.equals(a.p1))&&this.p1.equals(a.p0)},zi.prototype.lineIntersection=function(a){try{return He.intersection(this.p0,this.p1,a.p0,a.p1)}catch(d){if(!(d instanceof Ge))throw d}return null},zi.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},zi.prototype.pointAlongOffset=function(a,d){var E=this.p0.x+a*(this.p1.x-this.p0.x),T=this.p0.y+a*(this.p1.y-this.p0.y),Z=this.p1.x-this.p0.x,me=this.p1.y-this.p0.y,Ie=Math.sqrt(Z*Z+me*me),Xe=0,H=0;if(0!==d){if(Ie<=0)throw new Error("Cannot compute offset from zero-length line segment");Xe=d*Z/Ie,H=d*me/Ie}return new X(E-H,T+Xe)},zi.prototype.setCoordinates=function(){if(1===arguments.length){var a=arguments[0];this.setCoordinates(a.p0,a.p1)}else if(2===arguments.length){var d=arguments[0],E=arguments[1];this.p0.x=d.x,this.p0.y=d.y,this.p1.x=E.x,this.p1.y=E.y}},zi.prototype.segmentFraction=function(a){var d=this.projectionFactor(a);return d<0?d=0:(d>1||j.isNaN(d))&&(d=1),d},zi.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},zi.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},zi.prototype.distance=function(){if(arguments[0]instanceof zi){var a=arguments[0];return Gt.distanceLineLine(this.p0,this.p1,a.p0,a.p1)}if(arguments[0]instanceof X)return Gt.distancePointLine(arguments[0],this.p0,this.p1)},zi.prototype.pointAlong=function(a){var d=new X;return d.x=this.p0.x+a*(this.p1.x-this.p0.x),d.y=this.p0.y+a*(this.p1.y-this.p0.y),d},zi.prototype.hashCode=function(){var a=j.doubleToLongBits(this.p0.x);a^=31*j.doubleToLongBits(this.p0.y);var d=Math.trunc(a)^Math.trunc(a>>32),E=j.doubleToLongBits(this.p1.x);return E^=31*j.doubleToLongBits(this.p1.y),d^Math.trunc(E)^Math.trunc(E>>32)},zi.prototype.interfaces_=function(){return[Q,k]},zi.prototype.getClass=function(){return zi},zi.midPoint=function(a,d){return new X((a.x+d.x)/2,(a.y+d.y)/2)},Hr.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(zi,Hr);var ks=function(){this.tempEnv1=new Pe,this.tempEnv2=new Pe,this._overlapSeg1=new zi,this._overlapSeg2=new zi};ks.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var E=arguments[2],T=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),E.getLineSegment(T,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},ks.prototype.interfaces_=function(){return[]},ks.prototype.getClass=function(){return ks};var ja=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var d=arguments[1],E=arguments[2],T=arguments[3];this._pts=arguments[0],this._start=d,this._end=E,this._context=T};ja.prototype.getLineSegment=function(a,d){d.p0=this._pts[a],d.p1=this._pts[a+1]},ja.prototype.computeSelect=function(a,d,E,T){if(T.tempEnv1.init(this._pts[d],this._pts[E]),E-d==1)return T.select(this,d),null;if(!a.intersects(T.tempEnv1))return null;var Ie=Math.trunc((d+E)/2);d<Ie&&this.computeSelect(a,d,Ie,T),Ie<E&&this.computeSelect(a,Ie,E,T)},ja.prototype.getCoordinates=function(){for(var a=new Array(this._end-this._start+1).fill(null),d=0,E=this._start;E<=this._end;E++)a[d++]=this._pts[E];return a},ja.prototype.computeOverlaps=function(a,d){this.computeOverlapsInternal(this._start,this._end,a,a._start,a._end,d)},ja.prototype.setId=function(a){this._id=a},ja.prototype.select=function(a,d){this.computeSelect(a,this._start,this._end,d)},ja.prototype.getEnvelope=function(){return null===this._env&&(this._env=new Pe(this._pts[this._start],this._pts[this._end])),this._env},ja.prototype.getEndIndex=function(){return this._end},ja.prototype.getStartIndex=function(){return this._start},ja.prototype.getContext=function(){return this._context},ja.prototype.getId=function(){return this._id},ja.prototype.computeOverlapsInternal=function(a,d,E,T,Z,me){var Ie=this._pts[a],Xe=this._pts[d],H=E._pts[T],s=E._pts[Z];if(d-a==1&&Z-T==1)return me.overlap(this,a,E,T),null;if(me.tempEnv1.init(Ie,Xe),me.tempEnv2.init(H,s),!me.tempEnv1.intersects(me.tempEnv2))return null;var C=Math.trunc((a+d)/2),N=Math.trunc((T+Z)/2);a<C&&(T<N&&this.computeOverlapsInternal(a,C,E,T,N,me),N<Z&&this.computeOverlapsInternal(a,C,E,N,Z,me)),C<d&&(T<N&&this.computeOverlapsInternal(C,d,E,T,N,me),N<Z&&this.computeOverlapsInternal(C,d,E,N,Z,me))},ja.prototype.interfaces_=function(){return[]},ja.prototype.getClass=function(){return ja};var ts=function(){};ts.prototype.interfaces_=function(){return[]},ts.prototype.getClass=function(){return ts},ts.getChainStartIndices=function(a){var d=0,E=new Zn;E.add(new de(d));do{var T=ts.findChainEnd(a,d);E.add(new de(T)),d=T}while(d<a.length-1);return ts.toIntArray(E)},ts.findChainEnd=function(a,d){for(var E=d;E<a.length-1&&a[E].equals2D(a[E+1]);)E++;if(E>=a.length-1)return a.length-1;for(var T=Vr.quadrant(a[E],a[E+1]),Z=d+1;Z<a.length&&(a[Z-1].equals2D(a[Z])||Vr.quadrant(a[Z-1],a[Z])===T);)Z++;return Z-1},ts.getChains=function(){if(1===arguments.length)return ts.getChains(arguments[0],null);if(2===arguments.length){for(var d=arguments[0],E=arguments[1],T=new Zn,Z=ts.getChainStartIndices(d),me=0;me<Z.length-1;me++){var Ie=new ja(d,Z[me],Z[me+1],E);T.add(Ie)}return T}},ts.toIntArray=function(a){for(var d=new Array(a.size()).fill(null),E=0;E<d.length;E++)d[E]=a.get(E).intValue();return d};var $s=function(){};$s.prototype.computeNodes=function(a){},$s.prototype.getNodedSubstrings=function(){},$s.prototype.interfaces_=function(){return[]},$s.prototype.getClass=function(){return $s};var Ns=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};Ns.prototype.setSegmentIntersector=function(a){this._segInt=a},Ns.prototype.interfaces_=function(){return[$s]},Ns.prototype.getClass=function(){return Ns};var j1=function(a){function d(T){T?a.call(this,T):a.call(this),this._monoChains=new Zn,this._index=new Sc,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d;var E={SegmentOverlapAction:{configurable:!0}};return d.prototype.getMonotoneChains=function(){return this._monoChains},d.prototype.getNodedSubstrings=function(){return Xr.getNodedSubstrings(this._nodedSegStrings)},d.prototype.getIndex=function(){return this._index},d.prototype.add=function(T){for(var Z=ts.getChains(T.getCoordinates(),T).iterator();Z.hasNext();){var me=Z.next();me.setId(this._idCounter++),this._index.insert(me.getEnvelope(),me),this._monoChains.add(me)}},d.prototype.computeNodes=function(T){this._nodedSegStrings=T;for(var Z=T.iterator();Z.hasNext();)this.add(Z.next());this.intersectChains()},d.prototype.intersectChains=function(){for(var T=new Br(this._segInt),Z=this._monoChains.iterator();Z.hasNext();)for(var me=Z.next(),Ie=this._index.query(me.getEnvelope()).iterator();Ie.hasNext();){var Xe=Ie.next();if(Xe.getId()>me.getId()&&(me.computeOverlaps(Xe,T),this._nOverlaps++),this._segInt.isDone())return null}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},E.SegmentOverlapAction.get=function(){return Br},Object.defineProperties(d,E),d}(Ns),Br=function(a){function d(){a.call(this),this._si=null,this._si=arguments[0]}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.overlap=function(){if(4!==arguments.length)return a.prototype.overlap.apply(this,arguments);var T=arguments[1],Z=arguments[2],me=arguments[3],Ie=arguments[0].getContext(),Xe=Z.getContext();this._si.processIntersections(Ie,T,Xe,me)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(ks),jr=function a(){if(this._quadrantSegments=a.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=a.CAP_ROUND,this._joinStyle=a.JOIN_ROUND,this._mitreLimit=a.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=a.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var T=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(T)}else if(4===arguments.length){var me=arguments[1],Ie=arguments[2],Xe=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(me),this.setJoinStyle(Ie),this.setMitreLimit(Xe)}},I1={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};jr.prototype.getEndCapStyle=function(){return this._endCapStyle},jr.prototype.isSingleSided=function(){return this._isSingleSided},jr.prototype.setQuadrantSegments=function(a){this._quadrantSegments=a,0===this._quadrantSegments&&(this._joinStyle=jr.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=jr.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),a<=0&&(this._quadrantSegments=1),this._joinStyle!==jr.JOIN_ROUND&&(this._quadrantSegments=jr.DEFAULT_QUADRANT_SEGMENTS)},jr.prototype.getJoinStyle=function(){return this._joinStyle},jr.prototype.setJoinStyle=function(a){this._joinStyle=a},jr.prototype.setSimplifyFactor=function(a){this._simplifyFactor=a<0?0:a},jr.prototype.getSimplifyFactor=function(){return this._simplifyFactor},jr.prototype.getQuadrantSegments=function(){return this._quadrantSegments},jr.prototype.setEndCapStyle=function(a){this._endCapStyle=a},jr.prototype.getMitreLimit=function(){return this._mitreLimit},jr.prototype.setMitreLimit=function(a){this._mitreLimit=a},jr.prototype.setSingleSided=function(a){this._isSingleSided=a},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.bufferDistanceError=function(a){var d=Math.PI/2/a;return 1-Math.cos(d/2)},I1.CAP_ROUND.get=function(){return 1},I1.CAP_FLAT.get=function(){return 2},I1.CAP_SQUARE.get=function(){return 3},I1.JOIN_ROUND.get=function(){return 1},I1.JOIN_MITRE.get=function(){return 2},I1.JOIN_BEVEL.get=function(){return 3},I1.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},I1.DEFAULT_MITRE_LIMIT.get=function(){return 5},I1.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(jr,I1);var Lo=function(a){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Gt.COUNTERCLOCKWISE,this._inputLine=a||null},T1={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Lo.prototype.isDeletable=function(a,d,E,T){var Z=this._inputLine[a],me=this._inputLine[d],Ie=this._inputLine[E];return!!this.isConcave(Z,me,Ie)&&!!this.isShallow(Z,me,Ie,T)&&this.isShallowSampled(Z,me,a,E,T)},Lo.prototype.deleteShallowConcavities=function(){for(var a=1,d=this.findNextNonDeletedIndex(a),E=this.findNextNonDeletedIndex(d),T=!1;E<this._inputLine.length;){var Z=!1;this.isDeletable(a,d,E,this._distanceTol)&&(this._isDeleted[d]=Lo.DELETE,Z=!0,T=!0),d=this.findNextNonDeletedIndex(a=Z?E:d),E=this.findNextNonDeletedIndex(d)}return T},Lo.prototype.isShallowConcavity=function(a,d,E,T){return Gt.computeOrientation(a,d,E)===this._angleOrientation&&Gt.distancePointLine(d,a,E)<T},Lo.prototype.isShallowSampled=function(a,d,E,T,Z){var me=Math.trunc((T-E)/Lo.NUM_PTS_TO_CHECK);me<=0&&(me=1);for(var Ie=E;Ie<T;Ie+=me)if(!this.isShallow(a,d,this._inputLine[Ie],Z))return!1;return!0},Lo.prototype.isConcave=function(a,d,E){return Gt.computeOrientation(a,d,E)===this._angleOrientation},Lo.prototype.simplify=function(a){this._distanceTol=Math.abs(a),a<0&&(this._angleOrientation=Gt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var d=!1;do{d=this.deleteShallowConcavities()}while(d);return this.collapseLine()},Lo.prototype.findNextNonDeletedIndex=function(a){for(var d=a+1;d<this._inputLine.length&&this._isDeleted[d]===Lo.DELETE;)d++;return d},Lo.prototype.isShallow=function(a,d,E,T){return Gt.distancePointLine(d,a,E)<T},Lo.prototype.collapseLine=function(){for(var a=new Je,d=0;d<this._inputLine.length;d++)this._isDeleted[d]!==Lo.DELETE&&a.add(this._inputLine[d]);return a.toCoordinateArray()},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo},Lo.simplify=function(a,d){return new Lo(a).simplify(d)},T1.INIT.get=function(){return 0},T1.DELETE.get=function(){return 1},T1.KEEP.get=function(){return 1},T1.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Lo,T1);var ns=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Zn},Ec={COORDINATE_ARRAY_TYPE:{configurable:!0}};ns.prototype.getCoordinates=function(){return this._ptList.toArray(ns.COORDINATE_ARRAY_TYPE)},ns.prototype.setPrecisionModel=function(a){this._precisionModel=a},ns.prototype.addPt=function(a){var d=new X(a);if(this._precisionModel.makePrecise(d),this.isRedundant(d))return null;this._ptList.add(d)},ns.prototype.revere=function(){},ns.prototype.addPts=function(a,d){if(d)for(var E=0;E<a.length;E++)this.addPt(a[E]);else for(var T=a.length-1;T>=0;T--)this.addPt(a[T])},ns.prototype.isRedundant=function(a){if(this._ptList.size()<1)return!1;var d=this._ptList.get(this._ptList.size()-1);return a.distance(d)<this._minimimVertexDistance},ns.prototype.toString=function(){return(new Ut).createLineString(this.getCoordinates()).toString()},ns.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var a=new X(this._ptList.get(0)),d=this._ptList.get(this._ptList.size()-1);if(a.equals(d))return null;this._ptList.add(a)},ns.prototype.setMinimumVertexDistance=function(a){this._minimimVertexDistance=a},ns.prototype.interfaces_=function(){return[]},ns.prototype.getClass=function(){return ns},Ec.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(ns,Ec);var Or=function(){},U1={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.toDegrees=function(a){return 180*a/Math.PI},Or.normalize=function(a){for(;a>Math.PI;)a-=Or.PI_TIMES_2;for(;a<=-Math.PI;)a+=Or.PI_TIMES_2;return a},Or.angle=function(){if(1===arguments.length){var a=arguments[0];return Math.atan2(a.y,a.x)}if(2===arguments.length){var d=arguments[0],E=arguments[1];return Math.atan2(E.y-d.y,E.x-d.x)}},Or.isAcute=function(a,d,E){return(a.x-d.x)*(E.x-d.x)+(a.y-d.y)*(E.y-d.y)>0},Or.isObtuse=function(a,d,E){return(a.x-d.x)*(E.x-d.x)+(a.y-d.y)*(E.y-d.y)<0},Or.interiorAngle=function(a,d,E){var T=Or.angle(d,a),Z=Or.angle(d,E);return Math.abs(Z-T)},Or.normalizePositive=function(a){if(a<0){for(;a<0;)a+=Or.PI_TIMES_2;a>=Or.PI_TIMES_2&&(a=0)}else{for(;a>=Or.PI_TIMES_2;)a-=Or.PI_TIMES_2;a<0&&(a=0)}return a},Or.angleBetween=function(a,d,E){var T=Or.angle(d,a),Z=Or.angle(d,E);return Or.diff(T,Z)},Or.diff=function(a,d){var E=null;return(E=a<d?d-a:a-d)>Math.PI&&(E=2*Math.PI-E),E},Or.toRadians=function(a){return a*Math.PI/180},Or.getTurn=function(a,d){var E=Math.sin(d-a);return E>0?Or.COUNTERCLOCKWISE:E<0?Or.CLOCKWISE:Or.NONE},Or.angleBetweenOriented=function(a,d,E){var T=Or.angle(d,a),Z=Or.angle(d,E)-T;return Z<=-Math.PI?Z+Or.PI_TIMES_2:Z>Math.PI?Z-Or.PI_TIMES_2:Z},U1.PI_TIMES_2.get=function(){return 2*Math.PI},U1.PI_OVER_2.get=function(){return Math.PI/2},U1.PI_OVER_4.get=function(){return Math.PI/4},U1.COUNTERCLOCKWISE.get=function(){return Gt.COUNTERCLOCKWISE},U1.CLOCKWISE.get=function(){return Gt.CLOCKWISE},U1.NONE.get=function(){return Gt.COLLINEAR},Object.defineProperties(Or,U1);var vr=function a(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new zi,this._seg1=new zi,this._offset0=new zi,this._offset1=new zi,this._side=0,this._hasNarrowConcaveAngle=!1;var E=arguments[1],T=arguments[2];this._precisionModel=arguments[0],this._bufParams=E,this._li=new gt,this._filletAngleQuantum=Math.PI/2/E.getQuadrantSegments(),E.getQuadrantSegments()>=8&&E.getJoinStyle()===jr.JOIN_ROUND&&(this._closingSegLengthFactor=a.MAX_CLOSING_SEG_LEN_FACTOR),this.init(T)},Ac={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};vr.prototype.addNextSegment=function(a,d){if(this._s0=this._s1,this._s1=this._s2,this._s2=a,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var E=Gt.computeOrientation(this._s0,this._s1,this._s2),T=E===Gt.CLOCKWISE&&this._side===Be.LEFT||E===Gt.COUNTERCLOCKWISE&&this._side===Be.RIGHT;0===E?this.addCollinear(d):T?this.addOutsideTurn(E,d):this.addInsideTurn(E,d)},vr.prototype.addLineEndCap=function(a,d){var E=new zi(a,d),T=new zi;this.computeOffsetSegment(E,Be.LEFT,this._distance,T);var Z=new zi;this.computeOffsetSegment(E,Be.RIGHT,this._distance,Z);var Xe=Math.atan2(d.y-a.y,d.x-a.x);switch(this._bufParams.getEndCapStyle()){case jr.CAP_ROUND:this._segList.addPt(T.p1),this.addFilletArc(d,Xe+Math.PI/2,Xe-Math.PI/2,Gt.CLOCKWISE,this._distance),this._segList.addPt(Z.p1);break;case jr.CAP_FLAT:this._segList.addPt(T.p1),this._segList.addPt(Z.p1);break;case jr.CAP_SQUARE:var H=new X;H.x=Math.abs(this._distance)*Math.cos(Xe),H.y=Math.abs(this._distance)*Math.sin(Xe);var s=new X(T.p1.x+H.x,T.p1.y+H.y),C=new X(Z.p1.x+H.x,Z.p1.y+H.y);this._segList.addPt(s),this._segList.addPt(C)}},vr.prototype.getCoordinates=function(){return this._segList.getCoordinates()},vr.prototype.addMitreJoin=function(a,d,E,T){var Z=!0,me=null;try{me=He.intersection(d.p0,d.p1,E.p0,E.p1),(T<=0?1:me.distance(a)/Math.abs(T))>this._bufParams.getMitreLimit()&&(Z=!1)}catch(Ie){if(!(Ie instanceof Ge))throw Ie;me=new X(0,0),Z=!1}Z?this._segList.addPt(me):this.addLimitedMitreJoin(d,E,T,this._bufParams.getMitreLimit())},vr.prototype.addFilletCorner=function(a,d,E,T,Z){var Xe=Math.atan2(d.y-a.y,d.x-a.x),C=Math.atan2(E.y-a.y,E.x-a.x);T===Gt.CLOCKWISE?Xe<=C&&(Xe+=2*Math.PI):Xe>=C&&(Xe-=2*Math.PI),this._segList.addPt(d),this.addFilletArc(a,Xe,C,T,Z),this._segList.addPt(E)},vr.prototype.addOutsideTurn=function(a,d){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*vr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===jr.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===jr.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(d&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,a,this._distance),this._segList.addPt(this._offset1.p0))},vr.prototype.createSquare=function(a){this._segList.addPt(new X(a.x+this._distance,a.y+this._distance)),this._segList.addPt(new X(a.x+this._distance,a.y-this._distance)),this._segList.addPt(new X(a.x-this._distance,a.y-this._distance)),this._segList.addPt(new X(a.x-this._distance,a.y+this._distance)),this._segList.closeRing()},vr.prototype.addSegments=function(a,d){this._segList.addPts(a,d)},vr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},vr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},vr.prototype.initSideSegments=function(a,d,E){this._s1=a,this._s2=d,this._side=E,this._seg1.setCoordinates(a,d),this.computeOffsetSegment(this._seg1,E,this._distance,this._offset1)},vr.prototype.addLimitedMitreJoin=function(a,d,E,T){var Z=this._seg0.p1,me=Or.angle(Z,this._seg0.p0),Ie=Or.angleBetweenOriented(this._seg0.p0,Z,this._seg1.p1)/2,Xe=Or.normalize(me+Ie),H=Or.normalize(Xe+Math.PI),s=T*E,C=E-s*Math.abs(Math.sin(Ie)),N=Z.x+s*Math.cos(H),W=Z.y+s*Math.sin(H),K=new X(N,W),he=new zi(Z,K),ge=he.pointAlongOffset(1,C),we=he.pointAlongOffset(1,-C);this._side===Be.LEFT?(this._segList.addPt(ge),this._segList.addPt(we)):(this._segList.addPt(we),this._segList.addPt(ge))},vr.prototype.computeOffsetSegment=function(a,d,E,T){var Z=d===Be.LEFT?1:-1,me=a.p1.x-a.p0.x,Ie=a.p1.y-a.p0.y,Xe=Math.sqrt(me*me+Ie*Ie),H=Z*E*me/Xe,s=Z*E*Ie/Xe;T.p0.x=a.p0.x-s,T.p0.y=a.p0.y+H,T.p1.x=a.p1.x-s,T.p1.y=a.p1.y+H},vr.prototype.addFilletArc=function(a,d,E,T,Z){var me=T===Gt.CLOCKWISE?-1:1,Ie=Math.abs(d-E),Xe=Math.trunc(Ie/this._filletAngleQuantum+.5);if(Xe<1)return null;for(var H=Ie/Xe,s=0,C=new X;s<Ie;){var N=d+me*s;C.x=a.x+Z*Math.cos(N),C.y=a.y+Z*Math.sin(N),this._segList.addPt(C),s+=H}},vr.prototype.addInsideTurn=function(a,d){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*vr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var E=new X((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(E);var T=new X((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(T)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},vr.prototype.createCircle=function(a){var d=new X(a.x+this._distance,a.y);this._segList.addPt(d),this.addFilletArc(a,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},vr.prototype.addBevelJoin=function(a,d){this._segList.addPt(a.p1),this._segList.addPt(d.p0)},vr.prototype.init=function(a){this._distance=a,this._maxCurveSegmentError=a*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ns,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(a*vr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},vr.prototype.addCollinear=function(a){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===jr.JOIN_BEVEL||this._bufParams.getJoinStyle()===jr.JOIN_MITRE?(a&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Gt.CLOCKWISE,this._distance))},vr.prototype.closeRing=function(){this._segList.closeRing()},vr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},Ac.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ac.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ac.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ac.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(vr,Ac);var hr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var d=arguments[1];this._precisionModel=arguments[0],this._bufParams=d};hr.prototype.getOffsetCurve=function(a,d){if(this._distance=d,0===d)return null;var E=d<0,T=Math.abs(d),Z=this.getSegGen(T);a.length<=1?this.computePointCurve(a[0],Z):this.computeOffsetCurve(a,E,Z);var me=Z.getCoordinates();return E&&nt.reverse(me),me},hr.prototype.computeSingleSidedBufferCurve=function(a,d,E){var T=this.simplifyTolerance(this._distance);if(d){E.addSegments(a,!0);var Z=Lo.simplify(a,-T),me=Z.length-1;E.initSideSegments(Z[me],Z[me-1],Be.LEFT),E.addFirstSegment();for(var Ie=me-2;Ie>=0;Ie--)E.addNextSegment(Z[Ie],!0)}else{E.addSegments(a,!1);var Xe=Lo.simplify(a,T),H=Xe.length-1;E.initSideSegments(Xe[0],Xe[1],Be.LEFT),E.addFirstSegment();for(var s=2;s<=H;s++)E.addNextSegment(Xe[s],!0)}E.addLastSegment(),E.closeRing()},hr.prototype.computeRingBufferCurve=function(a,d,E){var T=this.simplifyTolerance(this._distance);d===Be.RIGHT&&(T=-T);var Z=Lo.simplify(a,T),me=Z.length-1;E.initSideSegments(Z[me-1],Z[0],d);for(var Ie=1;Ie<=me;Ie++)E.addNextSegment(Z[Ie],1!==Ie);E.closeRing()},hr.prototype.computeLineBufferCurve=function(a,d){var E=this.simplifyTolerance(this._distance),T=Lo.simplify(a,E),Z=T.length-1;d.initSideSegments(T[0],T[1],Be.LEFT);for(var me=2;me<=Z;me++)d.addNextSegment(T[me],!0);d.addLastSegment(),d.addLineEndCap(T[Z-1],T[Z]);var Ie=Lo.simplify(a,-E),Xe=Ie.length-1;d.initSideSegments(Ie[Xe],Ie[Xe-1],Be.LEFT);for(var H=Xe-2;H>=0;H--)d.addNextSegment(Ie[H],!0);d.addLastSegment(),d.addLineEndCap(Ie[1],Ie[0]),d.closeRing()},hr.prototype.computePointCurve=function(a,d){switch(this._bufParams.getEndCapStyle()){case jr.CAP_ROUND:d.createCircle(a);break;case jr.CAP_SQUARE:d.createSquare(a)}},hr.prototype.getLineCurve=function(a,d){if(this._distance=d,d<0&&!this._bufParams.isSingleSided()||0===d)return null;var E=Math.abs(d),T=this.getSegGen(E);return a.length<=1?this.computePointCurve(a[0],T):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(a,d<0,T):this.computeLineBufferCurve(a,T),T.getCoordinates()},hr.prototype.getBufferParameters=function(){return this._bufParams},hr.prototype.simplifyTolerance=function(a){return a*this._bufParams.getSimplifyFactor()},hr.prototype.getRingCurve=function(a,d,E){if(this._distance=E,a.length<=2)return this.getLineCurve(a,E);if(0===E)return hr.copyCoordinates(a);var T=this.getSegGen(E);return this.computeRingBufferCurve(a,d,T),T.getCoordinates()},hr.prototype.computeOffsetCurve=function(a,d,E){var T=this.simplifyTolerance(this._distance);if(d){var Z=Lo.simplify(a,-T),me=Z.length-1;E.initSideSegments(Z[me],Z[me-1],Be.LEFT),E.addFirstSegment();for(var Ie=me-2;Ie>=0;Ie--)E.addNextSegment(Z[Ie],!0)}else{var Xe=Lo.simplify(a,T),H=Xe.length-1;E.initSideSegments(Xe[0],Xe[1],Be.LEFT),E.addFirstSegment();for(var s=2;s<=H;s++)E.addNextSegment(Xe[s],!0)}E.addLastSegment()},hr.prototype.getSegGen=function(a){return new vr(this._precisionModel,this._bufParams,a)},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr},hr.copyCoordinates=function(a){for(var d=new Array(a.length).fill(null),E=0;E<d.length;E++)d[E]=new X(a[E]);return d};var za=function(){this._subgraphs=null,this._seg=new zi,this._cga=new Gt,this._subgraphs=arguments[0]},Do={DepthSegment:{configurable:!0}};za.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var a=arguments[0],d=new Zn,E=this._subgraphs.iterator();E.hasNext();){var T=E.next(),Z=T.getEnvelope();a.y<Z.getMinY()||a.y>Z.getMaxY()||this.findStabbedSegments(a,T.getDirectedEdges(),d)}return d}if(3===arguments.length)if(xe(arguments[2],so)&&arguments[0]instanceof X&&arguments[1]instanceof xs){for(var me=arguments[0],Ie=arguments[1],Xe=arguments[2],H=Ie.getEdge().getCoordinates(),s=0;s<H.length-1;s++)if(this._seg.p0=H[s],this._seg.p1=H[s+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<me.x||this._seg.isHorizontal()||me.y<this._seg.p0.y||me.y>this._seg.p1.y||Gt.computeOrientation(this._seg.p0,this._seg.p1,me)===Gt.RIGHT)){var C=Ie.getDepth(Be.LEFT);this._seg.p0.equals(H[s])||(C=Ie.getDepth(Be.RIGHT));var N=new $r(this._seg,C);Xe.add(N)}}else if(xe(arguments[2],so)&&arguments[0]instanceof X&&xe(arguments[1],so))for(var W=arguments[0],he=arguments[2],ge=arguments[1].iterator();ge.hasNext();){var we=ge.next();we.isForward()&&this.findStabbedSegments(W,we,he)}},za.prototype.getDepth=function(a){var d=this.findStabbedSegments(a);return 0===d.size()?0:Os.min(d)._leftDepth},za.prototype.interfaces_=function(){return[]},za.prototype.getClass=function(){return za},Do.DepthSegment.get=function(){return $r},Object.defineProperties(za,Do);var $r=function(){this._upwardSeg=null,this._leftDepth=null;var d=arguments[1];this._upwardSeg=new zi(arguments[0]),this._leftDepth=d};$r.prototype.compareTo=function(a){var d=a;if(this._upwardSeg.minX()>=d._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=d._upwardSeg.minX())return-1;var E=this._upwardSeg.orientationIndex(d._upwardSeg);return 0!==E||0!=(E=-1*d._upwardSeg.orientationIndex(this._upwardSeg))?E:this._upwardSeg.compareTo(d._upwardSeg)},$r.prototype.compareX=function(a,d){var E=a.p0.compareTo(d.p0);return 0!==E?E:a.p1.compareTo(d.p1)},$r.prototype.toString=function(){return this._upwardSeg.toString()},$r.prototype.interfaces_=function(){return[Q]},$r.prototype.getClass=function(){return $r};var Ir=function(a,d,E){this.p0=a||null,this.p1=d||null,this.p2=E||null};Ir.prototype.area=function(){return Ir.area(this.p0,this.p1,this.p2)},Ir.prototype.signedArea=function(){return Ir.signedArea(this.p0,this.p1,this.p2)},Ir.prototype.interpolateZ=function(a){if(null===a)throw new F("Supplied point is null.");return Ir.interpolateZ(a,this.p0,this.p1,this.p2)},Ir.prototype.longestSideLength=function(){return Ir.longestSideLength(this.p0,this.p1,this.p2)},Ir.prototype.isAcute=function(){return Ir.isAcute(this.p0,this.p1,this.p2)},Ir.prototype.circumcentre=function(){return Ir.circumcentre(this.p0,this.p1,this.p2)},Ir.prototype.area3D=function(){return Ir.area3D(this.p0,this.p1,this.p2)},Ir.prototype.centroid=function(){return Ir.centroid(this.p0,this.p1,this.p2)},Ir.prototype.inCentre=function(){return Ir.inCentre(this.p0,this.p1,this.p2)},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Ir.area=function(a,d,E){return Math.abs(((E.x-a.x)*(d.y-a.y)-(d.x-a.x)*(E.y-a.y))/2)},Ir.signedArea=function(a,d,E){return((E.x-a.x)*(d.y-a.y)-(d.x-a.x)*(E.y-a.y))/2},Ir.det=function(a,d,E,T){return a*T-d*E},Ir.interpolateZ=function(a,d,E,T){var Z=d.x,me=d.y,Ie=E.x-Z,Xe=T.x-Z,H=E.y-me,s=T.y-me,C=Ie*s-Xe*H,N=a.x-Z,W=a.y-me;return d.z+(s*N-Xe*W)/C*(E.z-d.z)+(-H*N+Ie*W)/C*(T.z-d.z)},Ir.longestSideLength=function(a,d,E){var T=a.distance(d),Z=d.distance(E),me=E.distance(a),Ie=T;return Z>Ie&&(Ie=Z),me>Ie&&(Ie=me),Ie},Ir.isAcute=function(a,d,E){return!!Or.isAcute(a,d,E)&&!!Or.isAcute(d,E,a)&&!!Or.isAcute(E,a,d)},Ir.circumcentre=function(a,d,E){var T=E.x,Z=E.y,me=a.x-T,Ie=a.y-Z,Xe=d.x-T,H=d.y-Z,s=2*Ir.det(me,Ie,Xe,H),C=Ir.det(Ie,me*me+Ie*Ie,H,Xe*Xe+H*H),N=Ir.det(me,me*me+Ie*Ie,Xe,Xe*Xe+H*H);return new X(T-C/s,Z+N/s)},Ir.perpendicularBisector=function(a,d){var E=d.x-a.x,T=d.y-a.y,Z=new He(a.x+E/2,a.y+T/2,1),me=new He(a.x-T+E/2,a.y+E+T/2,1);return new He(Z,me)},Ir.angleBisector=function(a,d,E){var T=d.distance(a),Z=T/(T+d.distance(E));return new X(a.x+Z*(E.x-a.x),a.y+Z*(E.y-a.y))},Ir.area3D=function(a,d,E){var T=d.x-a.x,Z=d.y-a.y,me=d.z-a.z,Ie=E.x-a.x,Xe=E.y-a.y,H=E.z-a.z,s=Z*H-me*Xe,C=me*Ie-T*H,N=T*Xe-Z*Ie;return Math.sqrt(s*s+C*C+N*N)/2},Ir.centroid=function(a,d,E){return new X((a.x+d.x+E.x)/3,(a.y+d.y+E.y)/3)},Ir.inCentre=function(a,d,E){var T=d.distance(E),Z=a.distance(E),me=a.distance(d),Ie=T+Z+me;return new X((T*a.x+Z*d.x+me*E.x)/Ie,(T*a.y+Z*d.y+me*E.y)/Ie)};var Ua=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Zn;var d=arguments[1],E=arguments[2];this._inputGeom=arguments[0],this._distance=d,this._curveBuilder=E};Ua.prototype.addPoint=function(a){if(this._distance<=0)return null;var d=a.getCoordinates(),E=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(E,ne.EXTERIOR,ne.INTERIOR)},Ua.prototype.addPolygon=function(a){var d=this._distance,E=Be.LEFT;this._distance<0&&(d=-this._distance,E=Be.RIGHT);var T=a.getExteriorRing(),Z=nt.removeRepeatedPoints(T.getCoordinates());if(this._distance<0&&this.isErodedCompletely(T,this._distance)||this._distance<=0&&Z.length<3)return null;this.addPolygonRing(Z,d,E,ne.EXTERIOR,ne.INTERIOR);for(var me=0;me<a.getNumInteriorRing();me++){var Ie=a.getInteriorRingN(me),Xe=nt.removeRepeatedPoints(Ie.getCoordinates());this._distance>0&&this.isErodedCompletely(Ie,-this._distance)||this.addPolygonRing(Xe,d,Be.opposite(E),ne.INTERIOR,ne.EXTERIOR)}},Ua.prototype.isTriangleErodedCompletely=function(a,d){var E=new Ir(a[0],a[1],a[2]),T=E.inCentre();return Gt.distancePointLine(T,E.p0,E.p1)<Math.abs(d)},Ua.prototype.addLineString=function(a){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var d=nt.removeRepeatedPoints(a.getCoordinates()),E=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(E,ne.EXTERIOR,ne.INTERIOR)},Ua.prototype.addCurve=function(a,d,E){if(null===a||a.length<2)return null;var T=new Xr(a,new cr(0,ne.BOUNDARY,d,E));this._curveList.add(T)},Ua.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Ua.prototype.addPolygonRing=function(a,d,E,T,Z){if(0===d&&a.length<ro.MINIMUM_VALID_SIZE)return null;var me=T,Ie=Z;a.length>=ro.MINIMUM_VALID_SIZE&&Gt.isCCW(a)&&(me=Z,Ie=T,E=Be.opposite(E));var Xe=this._curveBuilder.getRingCurve(a,E,d);this.addCurve(Xe,me,Ie)},Ua.prototype.add=function(a){if(a.isEmpty())return null;a instanceof Ii?this.addPolygon(a):a instanceof Ri?this.addLineString(a):a instanceof Vi?this.addPoint(a):(a instanceof co||a instanceof Ke||a instanceof Po||a instanceof Dn)&&this.addCollection(a)},Ua.prototype.isErodedCompletely=function(a,d){var E=a.getCoordinates();if(E.length<4)return d<0;if(4===E.length)return this.isTriangleErodedCompletely(E,d);var T=a.getEnvelopeInternal(),Z=Math.min(T.getHeight(),T.getWidth());return d<0&&2*Math.abs(d)>Z},Ua.prototype.addCollection=function(a){for(var d=0;d<a.getNumGeometries();d++){var E=a.getGeometryN(d);this.add(E)}},Ua.prototype.interfaces_=function(){return[]},Ua.prototype.getClass=function(){return Ua};var G1=function(){};G1.prototype.locate=function(a){},G1.prototype.interfaces_=function(){return[]},G1.prototype.getClass=function(){return G1};var Rs=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var a=arguments[0];this._parent=a,this._atStart=!0,this._index=0,this._max=a.getNumGeometries()};Rs.prototype.next=function(){if(this._atStart)return this._atStart=!1,Rs.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new I;var a=this._parent.getGeometryN(this._index++);return a instanceof Dn?(this._subcollectionIterator=new Rs(a),this._subcollectionIterator.next()):a},Rs.prototype.remove=function(){throw new Error(this.getClass().getName())},Rs.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Rs.prototype.interfaces_=function(){return[$i]},Rs.prototype.getClass=function(){return Rs},Rs.isAtomic=function(a){return!(a instanceof Dn)};var is=function(){this._geom=null,this._geom=arguments[0]};is.prototype.locate=function(a){return is.locate(a,this._geom)},is.prototype.interfaces_=function(){return[G1]},is.prototype.getClass=function(){return is},is.isPointInRing=function(a,d){return!!d.getEnvelopeInternal().intersects(a)&&Gt.isPointInRing(a,d.getCoordinates())},is.containsPointInPolygon=function(a,d){if(d.isEmpty())return!1;var E=d.getExteriorRing();if(!is.isPointInRing(a,E))return!1;for(var T=0;T<d.getNumInteriorRing();T++){var Z=d.getInteriorRingN(T);if(is.isPointInRing(a,Z))return!1}return!0},is.containsPoint=function(a,d){if(d instanceof Ii)return is.containsPointInPolygon(a,d);if(d instanceof Dn)for(var E=new Rs(d);E.hasNext();){var T=E.next();if(T!==d&&is.containsPoint(a,T))return!0}return!1},is.locate=function(a,d){return d.isEmpty()?ne.EXTERIOR:is.containsPoint(a,d)?ne.INTERIOR:ne.EXTERIOR};var Ga=function(){this._edgeMap=new S,this._edgeList=null,this._ptInAreaLocation=[ne.NONE,ne.NONE]};Ga.prototype.getNextCW=function(a){this.getEdges();var d=this._edgeList.indexOf(a),E=d-1;return 0===d&&(E=this._edgeList.size()-1),this._edgeList.get(E)},Ga.prototype.propagateSideLabels=function(a){for(var d=ne.NONE,E=this.iterator();E.hasNext();){var T=E.next().getLabel();T.isArea(a)&&T.getLocation(a,Be.LEFT)!==ne.NONE&&(d=T.getLocation(a,Be.LEFT))}if(d===ne.NONE)return null;for(var Z=d,me=this.iterator();me.hasNext();){var Ie=me.next(),Xe=Ie.getLabel();if(Xe.getLocation(a,Be.ON)===ne.NONE&&Xe.setLocation(a,Be.ON,Z),Xe.isArea(a)){var H=Xe.getLocation(a,Be.LEFT),s=Xe.getLocation(a,Be.RIGHT);if(s!==ne.NONE){if(s!==Z)throw new nn("side location conflict",Ie.getCoordinate());H===ne.NONE&&Ne.shouldNeverReachHere("found single null side (at "+Ie.getCoordinate()+")"),Z=H}else Ne.isTrue(Xe.getLocation(a,Be.LEFT)===ne.NONE,"found single null side"),Xe.setLocation(a,Be.RIGHT,Z),Xe.setLocation(a,Be.LEFT,Z)}}},Ga.prototype.getCoordinate=function(){var a=this.iterator();return a.hasNext()?a.next().getCoordinate():null},Ga.prototype.print=function(a){$e.out.println("EdgeEndStar:   "+this.getCoordinate());for(var d=this.iterator();d.hasNext();)d.next().print(a)},Ga.prototype.isAreaLabelsConsistent=function(a){return this.computeEdgeEndLabels(a.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Ga.prototype.checkAreaLabelsConsistent=function(a){var d=this.getEdges();if(d.size()<=0)return!0;var E=d.size()-1,T=d.get(E).getLabel().getLocation(a,Be.LEFT);Ne.isTrue(T!==ne.NONE,"Found unlabelled area edge");for(var Z=T,me=this.iterator();me.hasNext();){var Ie=me.next().getLabel();Ne.isTrue(Ie.isArea(a),"Found non-area edge");var Xe=Ie.getLocation(a,Be.LEFT),H=Ie.getLocation(a,Be.RIGHT);if(Xe===H||H!==Z)return!1;Z=Xe}return!0},Ga.prototype.findIndex=function(a){this.iterator();for(var d=0;d<this._edgeList.size();d++)if(this._edgeList.get(d)===a)return d;return-1},Ga.prototype.iterator=function(){return this.getEdges().iterator()},Ga.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Zn(this._edgeMap.values())),this._edgeList},Ga.prototype.getLocation=function(a,d,E){return this._ptInAreaLocation[a]===ne.NONE&&(this._ptInAreaLocation[a]=is.locate(d,E[a].getGeometry())),this._ptInAreaLocation[a]},Ga.prototype.toString=function(){var a=new ee;a.append("EdgeEndStar:   "+this.getCoordinate()),a.append("\n");for(var d=this.iterator();d.hasNext();){var E=d.next();a.append(E),a.append("\n")}return a.toString()},Ga.prototype.computeEdgeEndLabels=function(a){for(var d=this.iterator();d.hasNext();)d.next().computeLabel(a)},Ga.prototype.computeLabelling=function(a){this.computeEdgeEndLabels(a[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var d=[!1,!1],E=this.iterator();E.hasNext();)for(var T=E.next().getLabel(),Z=0;Z<2;Z++)T.isLine(Z)&&T.getLocation(Z)===ne.BOUNDARY&&(d[Z]=!0);for(var me=this.iterator();me.hasNext();)for(var Ie=me.next(),Xe=Ie.getLabel(),H=0;H<2;H++)if(Xe.isAnyNull(H)){var s=ne.NONE;if(d[H])s=ne.EXTERIOR;else{var C=Ie.getCoordinate();s=this.getLocation(H,C,a)}Xe.setAllLocationsIfNull(H,s)}},Ga.prototype.getDegree=function(){return this._edgeMap.size()},Ga.prototype.insertEdgeEnd=function(a,d){this._edgeMap.put(a,d),this._edgeList=null},Ga.prototype.interfaces_=function(){return[]},Ga.prototype.getClass=function(){return Ga};var Hc=function(a){function d(){a.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var E=null,T=null,Z=this._SCANNING_FOR_INCOMING,me=0;me<this._resultAreaEdgeList.size();me++){var Ie=this._resultAreaEdgeList.get(me),Xe=Ie.getSym();if(Ie.getLabel().isArea())switch(null===E&&Ie.isInResult()&&(E=Ie),Z){case this._SCANNING_FOR_INCOMING:if(!Xe.isInResult())continue;T=Xe,Z=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!Ie.isInResult())continue;T.setNext(Ie),Z=this._SCANNING_FOR_INCOMING}}if(Z===this._LINKING_TO_OUTGOING){if(null===E)throw new nn("no outgoing dirEdge found",this.getCoordinate());Ne.isTrue(E.isInResult(),"unable to link last incoming dirEdge"),T.setNext(E)}},d.prototype.insert=function(E){this.insertEdgeEnd(E,E)},d.prototype.getRightmostEdge=function(){var E=this.getEdges(),T=E.size();if(T<1)return null;var Z=E.get(0);if(1===T)return Z;var me=E.get(T-1),Ie=Z.getQuadrant(),Xe=me.getQuadrant();return Vr.isNorthern(Ie)&&Vr.isNorthern(Xe)?Z:Vr.isNorthern(Ie)||Vr.isNorthern(Xe)?0!==Z.getDy()?Z:0!==me.getDy()?me:(Ne.shouldNeverReachHere("found two horizontal edges incident on node"),null):me},d.prototype.print=function(E){$e.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var T=this.iterator();T.hasNext();){var Z=T.next();E.print("out "),Z.print(E),E.println(),E.print("in "),Z.getSym().print(E),E.println()}},d.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Zn;for(var E=this.iterator();E.hasNext();){var T=E.next();(T.isInResult()||T.getSym().isInResult())&&this._resultAreaEdgeList.add(T)}return this._resultAreaEdgeList},d.prototype.updateLabelling=function(E){for(var T=this.iterator();T.hasNext();){var Z=T.next().getLabel();Z.setAllLocationsIfNull(0,E.getLocation(0)),Z.setAllLocationsIfNull(1,E.getLocation(1))}},d.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var E=null,T=null,Z=this._edgeList.size()-1;Z>=0;Z--){var me=this._edgeList.get(Z),Ie=me.getSym();null===T&&(T=Ie),null!==E&&Ie.setNext(E),E=me}T.setNext(E)},d.prototype.computeDepths=function(){if(1===arguments.length){var E=arguments[0],T=this.findIndex(E),Z=E.getDepth(Be.LEFT),me=E.getDepth(Be.RIGHT),Ie=this.computeDepths(T+1,this._edgeList.size(),Z);if(this.computeDepths(0,T,Ie)!==me)throw new nn("depth mismatch at "+E.getCoordinate())}else if(3===arguments.length){for(var H=arguments[1],s=arguments[2],C=arguments[0];C<H;C++){var N=this._edgeList.get(C);N.setEdgeDepths(Be.RIGHT,s),s=N.getDepth(Be.LEFT)}return s}},d.prototype.mergeSymLabels=function(){for(var E=this.iterator();E.hasNext();){var T=E.next();T.getLabel().merge(T.getSym().getLabel())}},d.prototype.linkMinimalDirectedEdges=function(E){for(var T=null,Z=null,me=this._SCANNING_FOR_INCOMING,Ie=this._resultAreaEdgeList.size()-1;Ie>=0;Ie--){var Xe=this._resultAreaEdgeList.get(Ie),H=Xe.getSym();switch(null===T&&Xe.getEdgeRing()===E&&(T=Xe),me){case this._SCANNING_FOR_INCOMING:if(H.getEdgeRing()!==E)continue;Z=H,me=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(Xe.getEdgeRing()!==E)continue;Z.setNextMin(Xe),me=this._SCANNING_FOR_INCOMING}}me===this._LINKING_TO_OUTGOING&&(Ne.isTrue(null!==T,"found null for first outgoing dirEdge"),Ne.isTrue(T.getEdgeRing()===E,"unable to link last incoming dirEdge"),Z.setNextMin(T))},d.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var E=0,T=this.iterator();T.hasNext();)T.next().isInResult()&&E++;return E}if(1===arguments.length){for(var Z=arguments[0],me=0,Ie=this.iterator();Ie.hasNext();)Ie.next().getEdgeRing()===Z&&me++;return me}},d.prototype.getLabel=function(){return this._label},d.prototype.findCoveredLineEdges=function(){for(var E=ne.NONE,T=this.iterator();T.hasNext();){var Z=T.next(),me=Z.getSym();if(!Z.isLineEdge()){if(Z.isInResult()){E=ne.INTERIOR;break}if(me.isInResult()){E=ne.EXTERIOR;break}}}if(E===ne.NONE)return null;for(var Ie=E,Xe=this.iterator();Xe.hasNext();){var H=Xe.next(),s=H.getSym();H.isLineEdge()?H.getEdge().setCovered(Ie===ne.INTERIOR):(H.isInResult()&&(Ie=ne.EXTERIOR),s.isInResult()&&(Ie=ne.INTERIOR))}},d.prototype.computeLabelling=function(E){a.prototype.computeLabelling.call(this,E),this._label=new cr(ne.NONE);for(var T=this.iterator();T.hasNext();)for(var Z=T.next().getEdge().getLabel(),me=0;me<2;me++){var Ie=Z.getLocation(me);Ie!==ne.INTERIOR&&Ie!==ne.BOUNDARY||this._label.setLocation(me,ne.INTERIOR)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ga),Bc=function(a){function d(){a.apply(this,arguments)}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.createNode=function(E){return new Xs(E,new Hc)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ba),ar=function a(){this._pts=null,this._orientation=null;var d=arguments[0];this._pts=d,this._orientation=a.orientation(d)};ar.prototype.compareTo=function(a){return ar.compareOriented(this._pts,this._orientation,a._pts,a._orientation)},ar.prototype.interfaces_=function(){return[Q]},ar.prototype.getClass=function(){return ar},ar.orientation=function(a){return 1===nt.increasingDirection(a)},ar.compareOriented=function(a,d,E,T){for(var Z=d?1:-1,me=T?1:-1,Ie=d?a.length:-1,Xe=T?E.length:-1,H=d?0:a.length-1,s=T?0:E.length-1;;){var C=a[H].compareTo(E[s]);if(0!==C)return C;var N=(H+=Z)===Ie,W=(s+=me)===Xe;if(N&&!W)return-1;if(!N&&W)return 1;if(N&&W)return 0}};var Pa=function(){this._edges=new Zn,this._ocaMap=new S};Pa.prototype.print=function(a){a.print("MULTILINESTRING ( ");for(var d=0;d<this._edges.size();d++){var E=this._edges.get(d);d>0&&a.print(","),a.print("(");for(var T=E.getCoordinates(),Z=0;Z<T.length;Z++)Z>0&&a.print(","),a.print(T[Z].x+" "+T[Z].y);a.println(")")}a.print(")  ")},Pa.prototype.addAll=function(a){for(var d=a.iterator();d.hasNext();)this.add(d.next())},Pa.prototype.findEdgeIndex=function(a){for(var d=0;d<this._edges.size();d++)if(this._edges.get(d).equals(a))return d;return-1},Pa.prototype.iterator=function(){return this._edges.iterator()},Pa.prototype.getEdges=function(){return this._edges},Pa.prototype.get=function(a){return this._edges.get(a)},Pa.prototype.findEqualEdge=function(a){var d=new ar(a.getCoordinates());return this._ocaMap.get(d)},Pa.prototype.add=function(a){this._edges.add(a);var d=new ar(a.getCoordinates());this._ocaMap.put(d,a)},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa};var rs=function(){};rs.prototype.processIntersections=function(a,d,E,T){},rs.prototype.isDone=function(){},rs.prototype.interfaces_=function(){return[]},rs.prototype.getClass=function(){return rs};var ca=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};ca.prototype.isTrivialIntersection=function(a,d,E,T){if(a===E&&1===this._li.getIntersectionNum()){if(ca.isAdjacentSegments(d,T))return!0;if(a.isClosed()){var Z=a.size()-1;if(0===d&&T===Z||0===T&&d===Z)return!0}}return!1},ca.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ca.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ca.prototype.getLineIntersector=function(){return this._li},ca.prototype.hasProperIntersection=function(){return this._hasProper},ca.prototype.processIntersections=function(a,d,E,T){if(a===E&&d===T)return null;this.numTests++;var Z=a.getCoordinates()[d],me=a.getCoordinates()[d+1],Ie=E.getCoordinates()[T],Xe=E.getCoordinates()[T+1];this._li.computeIntersection(Z,me,Ie,Xe),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(a,d,E,T)||(this._hasIntersection=!0,a.addIntersections(this._li,d,0),E.addIntersections(this._li,T,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ca.prototype.hasIntersection=function(){return this._hasIntersection},ca.prototype.isDone=function(){return!1},ca.prototype.hasInteriorIntersection=function(){return this._hasInterior},ca.prototype.interfaces_=function(){return[rs]},ca.prototype.getClass=function(){return ca},ca.isAdjacentSegments=function(a,d){return 1===Math.abs(a-d)};var wi=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var d=arguments[1],E=arguments[2];this.coord=new X(arguments[0]),this.segmentIndex=d,this.dist=E};wi.prototype.getSegmentIndex=function(){return this.segmentIndex},wi.prototype.getCoordinate=function(){return this.coord},wi.prototype.print=function(a){a.print(this.coord),a.print(" seg # = "+this.segmentIndex),a.println(" dist = "+this.dist)},wi.prototype.compareTo=function(a){return this.compare(a.segmentIndex,a.dist)},wi.prototype.isEndPoint=function(a){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===a},wi.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},wi.prototype.getDistance=function(){return this.dist},wi.prototype.compare=function(a,d){return this.segmentIndex<a?-1:this.segmentIndex>a?1:this.dist<d?-1:this.dist>d?1:0},wi.prototype.interfaces_=function(){return[Q]},wi.prototype.getClass=function(){return wi};var L1=function(){this._nodeMap=new S,this.edge=null,this.edge=arguments[0]};L1.prototype.print=function(a){a.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(a)},L1.prototype.iterator=function(){return this._nodeMap.values().iterator()},L1.prototype.addSplitEdges=function(a){this.addEndpoints();for(var d=this.iterator(),E=d.next();d.hasNext();){var T=d.next(),Z=this.createSplitEdge(E,T);a.add(Z),E=T}},L1.prototype.addEndpoints=function(){var a=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[a],a,0)},L1.prototype.createSplitEdge=function(a,d){var E=d.segmentIndex-a.segmentIndex+2,Z=d.dist>0||!d.coord.equals2D(this.edge.pts[d.segmentIndex]);Z||E--;var me=new Array(E).fill(null),Ie=0;me[Ie++]=new X(a.coord);for(var Xe=a.segmentIndex+1;Xe<=d.segmentIndex;Xe++)me[Ie++]=this.edge.pts[Xe];return Z&&(me[Ie]=d.coord),new os(me,new cr(this.edge._label))},L1.prototype.add=function(a,d,E){var T=new wi(a,d,E),Z=this._nodeMap.get(T);return null!==Z?Z:(this._nodeMap.put(T,T),T)},L1.prototype.isIntersection=function(a){for(var d=this.iterator();d.hasNext();)if(d.next().coord.equals(a))return!0;return!1},L1.prototype.interfaces_=function(){return[]},L1.prototype.getClass=function(){return L1};var Tr=function(){};Tr.prototype.getChainStartIndices=function(a){var d=0,E=new Zn;E.add(new de(d));do{var T=this.findChainEnd(a,d);E.add(new de(T)),d=T}while(d<a.length-1);return Tr.toIntArray(E)},Tr.prototype.findChainEnd=function(a,d){for(var E=Vr.quadrant(a[d],a[d+1]),T=d+1;T<a.length&&Vr.quadrant(a[T-1],a[T])===E;)T++;return T-1},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Tr.toIntArray=function(a){for(var d=new Array(a.size()).fill(null),E=0;E<d.length;E++)d[E]=a.get(E).intValue();return d};var In=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Pe,this.env2=new Pe;var a=arguments[0];this.e=a,this.pts=a.getCoordinates();var d=new Tr;this.startIndex=d.getChainStartIndices(this.pts)};In.prototype.getCoordinates=function(){return this.pts},In.prototype.getMaxX=function(a){var d=this.pts[this.startIndex[a]].x,E=this.pts[this.startIndex[a+1]].x;return d>E?d:E},In.prototype.getMinX=function(a){var d=this.pts[this.startIndex[a]].x,E=this.pts[this.startIndex[a+1]].x;return d<E?d:E},In.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var a=arguments[0],d=arguments[1],E=arguments[2];this.computeIntersectsForChain(this.startIndex[a],this.startIndex[a+1],d,d.startIndex[E],d.startIndex[E+1],arguments[3])}else if(6===arguments.length){var Z=arguments[0],me=arguments[1],Ie=arguments[2],Xe=arguments[3],H=arguments[4],s=arguments[5],C=this.pts[Z],N=this.pts[me],W=Ie.pts[Xe],K=Ie.pts[H];if(me-Z==1&&H-Xe==1)return s.addIntersections(this.e,Z,Ie.e,Xe),null;if(this.env1.init(C,N),this.env2.init(W,K),!this.env1.intersects(this.env2))return null;var he=Math.trunc((Z+me)/2),ge=Math.trunc((Xe+H)/2);Z<he&&(Xe<ge&&this.computeIntersectsForChain(Z,he,Ie,Xe,ge,s),ge<H&&this.computeIntersectsForChain(Z,he,Ie,ge,H,s)),he<me&&(Xe<ge&&this.computeIntersectsForChain(he,me,Ie,Xe,ge,s),ge<H&&this.computeIntersectsForChain(he,me,Ie,ge,H,s))}},In.prototype.getStartIndexes=function(){return this.startIndex},In.prototype.computeIntersects=function(a,d){for(var E=0;E<this.startIndex.length-1;E++)for(var T=0;T<a.startIndex.length-1;T++)this.computeIntersectsForChain(E,a,T,d)},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In};var kr=function a(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var d=0;d<2;d++)for(var E=0;E<3;E++)this._depth[d][E]=a.NULL_VALUE},Lr={NULL_VALUE:{configurable:!0}};kr.prototype.getDepth=function(a,d){return this._depth[a][d]},kr.prototype.setDepth=function(a,d,E){this._depth[a][d]=E},kr.prototype.isNull=function(){if(0===arguments.length){for(var a=0;a<2;a++)for(var d=0;d<3;d++)if(this._depth[a][d]!==kr.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===kr.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===kr.NULL_VALUE:void 0},kr.prototype.normalize=function(){for(var a=0;a<2;a++)if(!this.isNull(a)){var d=this._depth[a][1];this._depth[a][2]<d&&(d=this._depth[a][2]),d<0&&(d=0);for(var E=1;E<3;E++){var T=0;this._depth[a][E]>d&&(T=1),this._depth[a][E]=T}}},kr.prototype.getDelta=function(a){return this._depth[a][Be.RIGHT]-this._depth[a][Be.LEFT]},kr.prototype.getLocation=function(a,d){return this._depth[a][d]<=0?ne.EXTERIOR:ne.INTERIOR},kr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},kr.prototype.add=function(){if(1===arguments.length)for(var a=arguments[0],d=0;d<2;d++)for(var E=1;E<3;E++){var T=a.getLocation(d,E);T!==ne.EXTERIOR&&T!==ne.INTERIOR||(this.isNull(d,E)?this._depth[d][E]=kr.depthAtLocation(T):this._depth[d][E]+=kr.depthAtLocation(T))}else 3===arguments.length&&arguments[2]===ne.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.depthAtLocation=function(a){return a===ne.EXTERIOR?0:a===ne.INTERIOR?1:kr.NULL_VALUE},Lr.NULL_VALUE.get=function(){return-1},Object.defineProperties(kr,Lr);var os=function(a){function d(){if(a.call(this),this.pts=null,this._env=null,this.eiList=new L1(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new kr,this._depthDelta=0,1===arguments.length)d.call(this,arguments[0],null);else if(2===arguments.length){var Z=arguments[1];this.pts=arguments[0],this._label=Z}}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.getDepth=function(){return this._depth},d.prototype.getCollapsedEdge=function(){var E=new Array(2).fill(null);return E[0]=this.pts[0],E[1]=this.pts[1],new d(E,cr.toLineLabel(this._label))},d.prototype.isIsolated=function(){return this._isIsolated},d.prototype.getCoordinates=function(){return this.pts},d.prototype.setIsolated=function(E){this._isIsolated=E},d.prototype.setName=function(E){this._name=E},d.prototype.equals=function(E){if(!(E instanceof d))return!1;var T=E;if(this.pts.length!==T.pts.length)return!1;for(var Z=!0,me=!0,Ie=this.pts.length,Xe=0;Xe<this.pts.length;Xe++)if(this.pts[Xe].equals2D(T.pts[Xe])||(Z=!1),this.pts[Xe].equals2D(T.pts[--Ie])||(me=!1),!Z&&!me)return!1;return!0},d.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},d.prototype.print=function(E){E.print("edge "+this._name+": "),E.print("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&E.print(","),E.print(this.pts[T].x+" "+this.pts[T].y);E.print(")  "+this._label+" "+this._depthDelta)},d.prototype.computeIM=function(E){d.updateIM(this._label,E)},d.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},d.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},d.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},d.prototype.getDepthDelta=function(){return this._depthDelta},d.prototype.getNumPoints=function(){return this.pts.length},d.prototype.printReverse=function(E){E.print("edge "+this._name+": ");for(var T=this.pts.length-1;T>=0;T--)E.print(this.pts[T]+" ");E.println("")},d.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new In(this)),this._mce},d.prototype.getEnvelope=function(){if(null===this._env){this._env=new Pe;for(var E=0;E<this.pts.length;E++)this._env.expandToInclude(this.pts[E])}return this._env},d.prototype.addIntersection=function(E,T,Z,me){var Ie=new X(E.getIntersection(me)),Xe=T,H=E.getEdgeDistance(Z,me),s=Xe+1;s<this.pts.length&&Ie.equals2D(this.pts[s])&&(Xe=s,H=0),this.eiList.add(Ie,Xe,H)},d.prototype.toString=function(){var E=new ee;E.append("edge "+this._name+": "),E.append("LINESTRING (");for(var T=0;T<this.pts.length;T++)T>0&&E.append(","),E.append(this.pts[T].x+" "+this.pts[T].y);return E.append(")  "+this._label+" "+this._depthDelta),E.toString()},d.prototype.isPointwiseEqual=function(E){if(this.pts.length!==E.pts.length)return!1;for(var T=0;T<this.pts.length;T++)if(!this.pts[T].equals2D(E.pts[T]))return!1;return!0},d.prototype.setDepthDelta=function(E){this._depthDelta=E},d.prototype.getEdgeIntersectionList=function(){return this.eiList},d.prototype.addIntersections=function(E,T,Z){for(var me=0;me<E.getIntersectionNum();me++)this.addIntersection(E,T,Z,me)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.updateIM=function(){if(2!==arguments.length)return a.prototype.updateIM.apply(this,arguments);var E=arguments[0],T=arguments[1];T.setAtLeastIfValid(E.getLocation(0,Be.ON),E.getLocation(1,Be.ON),1),E.isArea()&&(T.setAtLeastIfValid(E.getLocation(0,Be.LEFT),E.getLocation(1,Be.LEFT),2),T.setAtLeastIfValid(E.getLocation(0,Be.RIGHT),E.getLocation(1,Be.RIGHT),2))},d}(wa),uo=function(a){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Pa,this._bufParams=a||null};uo.prototype.setWorkingPrecisionModel=function(a){this._workingPrecisionModel=a},uo.prototype.insertUniqueEdge=function(a){var d=this._edgeList.findEqualEdge(a);if(null!==d){var E=d.getLabel(),T=a.getLabel();d.isPointwiseEqual(a)||(T=new cr(a.getLabel())).flip(),E.merge(T);var Z=uo.depthDelta(T),me=d.getDepthDelta()+Z;d.setDepthDelta(me)}else this._edgeList.add(a),a.setDepthDelta(uo.depthDelta(a.getLabel()))},uo.prototype.buildSubgraphs=function(a,d){for(var E=new Zn,T=a.iterator();T.hasNext();){var Z=T.next(),me=Z.getRightmostCoordinate(),Ie=new za(E).getDepth(me);Z.computeDepth(Ie),Z.findResultEdges(),E.add(Z),d.add(Z.getDirectedEdges(),Z.getNodes())}},uo.prototype.createSubgraphs=function(a){for(var d=new Zn,E=a.getNodes().iterator();E.hasNext();){var T=E.next();if(!T.isVisited()){var Z=new en;Z.create(T),d.add(Z)}}return Os.sort(d,Os.reverseOrder()),d},uo.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},uo.prototype.getNoder=function(a){if(null!==this._workingNoder)return this._workingNoder;var d=new j1,E=new gt;return E.setPrecisionModel(a),d.setSegmentIntersector(new ca(E)),d},uo.prototype.buffer=function(a,d){var E=this._workingPrecisionModel;null===E&&(E=a.getPrecisionModel()),this._geomFact=a.getFactory();var T=new hr(E,this._bufParams),Z=new Ua(a,d,T).getCurves();if(Z.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(Z,E),this._graph=new lo(new Bc),this._graph.addEdges(this._edgeList.getEdges());var me=this.createSubgraphs(this._graph),Ie=new aa(this._geomFact);this.buildSubgraphs(me,Ie);var Xe=Ie.getPolygons();return Xe.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(Xe)},uo.prototype.computeNodedEdges=function(a,d){var E=this.getNoder(d);E.computeNodes(a);for(var T=E.getNodedSubstrings().iterator();T.hasNext();){var Z=T.next(),me=Z.getCoordinates();if(2!==me.length||!me[0].equals2D(me[1])){var Ie=Z.getData(),Xe=new os(Z.getCoordinates(),new cr(Ie));this.insertUniqueEdge(Xe)}}},uo.prototype.setNoder=function(a){this._workingNoder=a},uo.prototype.interfaces_=function(){return[]},uo.prototype.getClass=function(){return uo},uo.depthDelta=function(a){var d=a.getLocation(0,Be.LEFT),E=a.getLocation(0,Be.RIGHT);return d===ne.INTERIOR&&E===ne.EXTERIOR?1:d===ne.EXTERIOR&&E===ne.INTERIOR?-1:0},uo.convertSegStrings=function(a){for(var d=new Ut,E=new Zn;a.hasNext();){var T=a.next(),Z=d.createLineString(T.getCoordinates());E.add(Z)}return d.buildGeometry(E)};var qs=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var d=arguments[1];this._noder=arguments[0],this._scaleFactor=d,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var T=arguments[1],Z=arguments[2],me=arguments[3];this._noder=arguments[0],this._scaleFactor=T,this._offsetX=Z,this._offsetY=me,this._isScaled=!this.isIntegerPrecision()}};qs.prototype.rescale=function(){if(xe(arguments[0],ji))for(var a=arguments[0].iterator();a.hasNext();){var d=a.next();this.rescale(d.getCoordinates())}else if(arguments[0]instanceof Array){for(var E=arguments[0],T=0;T<E.length;T++)E[T].x=E[T].x/this._scaleFactor+this._offsetX,E[T].y=E[T].y/this._scaleFactor+this._offsetY;2===E.length&&E[0].equals2D(E[1])&&$e.out.println(E)}},qs.prototype.scale=function(){if(xe(arguments[0],ji)){for(var a=arguments[0],d=new Zn,E=a.iterator();E.hasNext();){var T=E.next();d.add(new Xr(this.scale(T.getCoordinates()),T.getData()))}return d}if(arguments[0]instanceof Array){for(var Z=arguments[0],me=new Array(Z.length).fill(null),Ie=0;Ie<Z.length;Ie++)me[Ie]=new X(Math.round((Z[Ie].x-this._offsetX)*this._scaleFactor),Math.round((Z[Ie].y-this._offsetY)*this._scaleFactor),Z[Ie].z);return nt.removeRepeatedPoints(me)}},qs.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},qs.prototype.getNodedSubstrings=function(){var a=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(a),a},qs.prototype.computeNodes=function(a){var d=a;this._isScaled&&(d=this.scale(a)),this._noder.computeNodes(d)},qs.prototype.interfaces_=function(){return[$s]},qs.prototype.getClass=function(){return qs};var bo=function(){this._li=new gt,this._segStrings=null,this._segStrings=arguments[0]},Kc={fact:{configurable:!0}};bo.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var a=this._segStrings.iterator();a.hasNext();){var d=a.next().getCoordinates();this.checkEndPtVertexIntersections(d[0],this._segStrings),this.checkEndPtVertexIntersections(d[d.length-1],this._segStrings)}else if(2===arguments.length)for(var E=arguments[0],T=arguments[1].iterator();T.hasNext();)for(var Z=T.next().getCoordinates(),me=1;me<Z.length-1;me++)if(Z[me].equals(E))throw new Oe("found endpt/interior pt intersection at index "+me+" :pt "+E)},bo.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var a=this._segStrings.iterator();a.hasNext();)for(var d=a.next(),E=this._segStrings.iterator();E.hasNext();){var T=E.next();this.checkInteriorIntersections(d,T)}else if(2===arguments.length)for(var Z=arguments[0],me=arguments[1],Ie=Z.getCoordinates(),Xe=me.getCoordinates(),H=0;H<Ie.length-1;H++)for(var s=0;s<Xe.length-1;s++)this.checkInteriorIntersections(Z,H,me,s);else if(4===arguments.length){var C=arguments[0],N=arguments[1],W=arguments[2],K=arguments[3];if(C===W&&N===K)return null;var he=C.getCoordinates()[N],ge=C.getCoordinates()[N+1],we=W.getCoordinates()[K],Le=W.getCoordinates()[K+1];if(this._li.computeIntersection(he,ge,we,Le),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,he,ge)||this.hasInteriorIntersection(this._li,we,Le)))throw new Oe("found non-noded intersection at "+he+"-"+ge+" and "+we+"-"+Le)}},bo.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},bo.prototype.checkCollapses=function(){if(0===arguments.length)for(var a=this._segStrings.iterator();a.hasNext();){var d=a.next();this.checkCollapses(d)}else if(1===arguments.length)for(var E=arguments[0].getCoordinates(),T=0;T<E.length-2;T++)this.checkCollapse(E[T],E[T+1],E[T+2])},bo.prototype.hasInteriorIntersection=function(a,d,E){for(var T=0;T<a.getIntersectionNum();T++){var Z=a.getIntersection(T);if(!Z.equals(d)&&!Z.equals(E))return!0}return!1},bo.prototype.checkCollapse=function(a,d,E){if(a.equals(E))throw new Oe("found non-noded collapse at "+bo.fact.createLineString([a,d,E]))},bo.prototype.interfaces_=function(){return[]},bo.prototype.getClass=function(){return bo},Kc.fact.get=function(){return new Ut},Object.defineProperties(bo,Kc);var Wa=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var a=arguments[0],d=arguments[1],E=arguments[2];if(this._originalPt=a,this._pt=a,this._scaleFactor=d,this._li=E,d<=0)throw new F("Scale factor must be non-zero");1!==d&&(this._pt=new X(this.scale(a.x),this.scale(a.y)),this._p0Scaled=new X,this._p1Scaled=new X),this.initCorners(this._pt)},Qc={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Wa.prototype.intersectsScaled=function(a,d){var E=Math.min(a.x,d.x),T=Math.max(a.x,d.x),Z=Math.min(a.y,d.y),me=Math.max(a.y,d.y),Ie=this._maxx<E||this._minx>T||this._maxy<Z||this._miny>me;if(Ie)return!1;var Xe=this.intersectsToleranceSquare(a,d);return Ne.isTrue(!(Ie&&Xe),"Found bad envelope test"),Xe},Wa.prototype.initCorners=function(a){this._minx=a.x-.5,this._maxx=a.x+.5,this._miny=a.y-.5,this._maxy=a.y+.5,this._corner[0]=new X(this._maxx,this._maxy),this._corner[1]=new X(this._minx,this._maxy),this._corner[2]=new X(this._minx,this._miny),this._corner[3]=new X(this._maxx,this._miny)},Wa.prototype.intersects=function(a,d){return 1===this._scaleFactor?this.intersectsScaled(a,d):(this.copyScaled(a,this._p0Scaled),this.copyScaled(d,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Wa.prototype.scale=function(a){return Math.round(a*this._scaleFactor)},Wa.prototype.getCoordinate=function(){return this._originalPt},Wa.prototype.copyScaled=function(a,d){d.x=this.scale(a.x),d.y=this.scale(a.y)},Wa.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var a=Wa.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Pe(this._originalPt.x-a,this._originalPt.x+a,this._originalPt.y-a,this._originalPt.y+a)}return this._safeEnv},Wa.prototype.intersectsPixelClosure=function(a,d){return this._li.computeIntersection(a,d,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(a,d,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(a,d,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(a,d,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Wa.prototype.intersectsToleranceSquare=function(a,d){var E=!1,T=!1;return this._li.computeIntersection(a,d,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(a,d,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(E=!0),this._li.computeIntersection(a,d,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(T=!0),this._li.computeIntersection(a,d,this._corner[3],this._corner[0]),this._li.isProper()||E&&T||a.equals(this._pt)||d.equals(this._pt)))))},Wa.prototype.addSnappedNode=function(a,d){var E=a.getCoordinate(d),T=a.getCoordinate(d+1);return!!this.intersects(E,T)&&(a.addIntersection(this.getCoordinate(),d),!0)},Wa.prototype.interfaces_=function(){return[]},Wa.prototype.getClass=function(){return Wa},Qc.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Wa,Qc);var jc=function(){this.tempEnv1=new Pe,this.selectedSegment=new zi};jc.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var yc=function(){this._index=null,this._index=arguments[0]},la={HotPixelSnapAction:{configurable:!0}};yc.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var d=arguments[0],E=arguments[1],T=arguments[2],Z=d.getSafeEnvelope(),me=new Si(d,E,T);return this._index.query(Z,{interfaces_:function(){return[Zs]},visitItem:function(Ie){Ie.select(Z,me)}}),me.isNodeAdded()}},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc},la.HotPixelSnapAction.get=function(){return Si},Object.defineProperties(yc,la);var Si=function(a){function d(){a.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var T=arguments[1],Z=arguments[2];this._hotPixel=arguments[0],this._parentEdge=T,this._hotPixelVertexIndex=Z}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.isNodeAdded=function(){return this._isNodeAdded},d.prototype.select=function(){if(2!==arguments.length)return a.prototype.select.apply(this,arguments);var T=arguments[1],Z=arguments[0].getContext();if(null!==this._parentEdge&&Z===this._parentEdge&&T===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(Z,T)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(jc),ur=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new Zn};ur.prototype.processIntersections=function(a,d,E,T){if(a===E&&d===T)return null;var Z=a.getCoordinates()[d],me=a.getCoordinates()[d+1],Ie=E.getCoordinates()[T],Xe=E.getCoordinates()[T+1];if(this._li.computeIntersection(Z,me,Ie,Xe),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var H=0;H<this._li.getIntersectionNum();H++)this._interiorIntersections.add(this._li.getIntersection(H));a.addIntersections(this._li,d,0),E.addIntersections(this._li,T,1)}},ur.prototype.isDone=function(){return!1},ur.prototype.getInteriorIntersections=function(){return this._interiorIntersections},ur.prototype.interfaces_=function(){return[rs]},ur.prototype.getClass=function(){return ur};var ho=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var a=arguments[0];this._pm=a,this._li=new gt,this._li.setPrecisionModel(a),this._scaleFactor=a.getScale()};ho.prototype.checkCorrectness=function(a){var d=Xr.getNodedSubstrings(a),E=new bo(d);try{E.checkValid()}catch(T){if(!(T instanceof Ue))throw T;T.printStackTrace()}},ho.prototype.getNodedSubstrings=function(){return Xr.getNodedSubstrings(this._nodedSegStrings)},ho.prototype.snapRound=function(a,d){var E=this.findInteriorIntersections(a,d);this.computeIntersectionSnaps(E),this.computeVertexSnaps(a)},ho.prototype.findInteriorIntersections=function(a,d){var E=new ur(d);return this._noder.setSegmentIntersector(E),this._noder.computeNodes(a),E.getInteriorIntersections()},ho.prototype.computeVertexSnaps=function(){if(xe(arguments[0],ji))for(var a=arguments[0].iterator();a.hasNext();){var d=a.next();this.computeVertexSnaps(d)}else if(arguments[0]instanceof Xr)for(var E=arguments[0],T=E.getCoordinates(),Z=0;Z<T.length;Z++){var me=new Wa(T[Z],this._scaleFactor,this._li);this._pointSnapper.snap(me,E,Z)&&E.addIntersection(T[Z],Z)}},ho.prototype.computeNodes=function(a){this._nodedSegStrings=a,this._noder=new j1,this._pointSnapper=new yc(this._noder.getIndex()),this.snapRound(a,this._li)},ho.prototype.computeIntersectionSnaps=function(a){for(var d=a.iterator();d.hasNext();){var E=d.next(),T=new Wa(E,this._scaleFactor,this._li);this._pointSnapper.snap(T)}},ho.prototype.interfaces_=function(){return[$s]},ho.prototype.getClass=function(){return ho};var fo=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new jr,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var E=arguments[1];this._argGeom=arguments[0],this._bufParams=E}},cc={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};fo.prototype.bufferFixedPrecision=function(a){var d=new qs(new ho(new Ot(1)),a.getScale()),E=new uo(this._bufParams);E.setWorkingPrecisionModel(a),E.setNoder(d),this._resultGeometry=E.buffer(this._argGeom,this._distance)},fo.prototype.bufferReducedPrecision=function(){var a=this;if(0===arguments.length){for(var d=fo.MAX_PRECISION_DIGITS;d>=0;d--){try{a.bufferReducedPrecision(d)}catch(me){if(!(me instanceof nn))throw me;a._saveException=me}if(null!==a._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var T=fo.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),Z=new Ot(T);this.bufferFixedPrecision(Z)}},fo.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var a=this._argGeom.getFactory().getPrecisionModel();a.getType()===Ot.FIXED?this.bufferFixedPrecision(a):this.bufferReducedPrecision()},fo.prototype.setQuadrantSegments=function(a){this._bufParams.setQuadrantSegments(a)},fo.prototype.bufferOriginalPrecision=function(){try{var a=new uo(this._bufParams);this._resultGeometry=a.buffer(this._argGeom,this._distance)}catch(d){if(!(d instanceof Oe))throw d;this._saveException=d}},fo.prototype.getResultGeometry=function(a){return this._distance=a,this.computeGeometry(),this._resultGeometry},fo.prototype.setEndCapStyle=function(a){this._bufParams.setEndCapStyle(a)},fo.prototype.interfaces_=function(){return[]},fo.prototype.getClass=function(){return fo},fo.bufferOp=function(){if(2===arguments.length){var d=arguments[1];return new fo(arguments[0]).getResultGeometry(d)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof an&&"number"==typeof arguments[1]){var T=arguments[1],Z=arguments[2],me=new fo(arguments[0]);return me.setQuadrantSegments(Z),me.getResultGeometry(T)}if(arguments[2]instanceof jr&&arguments[0]instanceof an&&"number"==typeof arguments[1]){var Xe=arguments[1];return new fo(arguments[0],arguments[2]).getResultGeometry(Xe)}}else if(4===arguments.length){var C=arguments[1],N=arguments[2],W=arguments[3],K=new fo(arguments[0]);return K.setQuadrantSegments(N),K.setEndCapStyle(W),K.getResultGeometry(C)}},fo.precisionScaleFactor=function(a,d,E){var T=a.getEnvelopeInternal(),Z=ue.max(Math.abs(T.getMaxX()),Math.abs(T.getMaxY()),Math.abs(T.getMinX()),Math.abs(T.getMinY()))+2*(d>0?d:0),me=E-Math.trunc(Math.log(Z)/Math.log(10)+1);return Math.pow(10,me)},cc.CAP_ROUND.get=function(){return jr.CAP_ROUND},cc.CAP_BUTT.get=function(){return jr.CAP_FLAT},cc.CAP_FLAT.get=function(){return jr.CAP_FLAT},cc.CAP_SQUARE.get=function(){return jr.CAP_SQUARE},cc.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(fo,cc);var po=function(){this._pt=[new X,new X],this._distance=j.NaN,this._isNull=!0};po.prototype.getCoordinates=function(){return this._pt},po.prototype.getCoordinate=function(a){return this._pt[a]},po.prototype.setMinimum=function(){if(1===arguments.length){var a=arguments[0];this.setMinimum(a._pt[0],a._pt[1])}else if(2===arguments.length){var d=arguments[0],E=arguments[1];if(this._isNull)return this.initialize(d,E),null;var T=d.distance(E);T<this._distance&&this.initialize(d,E,T)}},po.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var a=arguments[0],d=arguments[1];this._pt[0].setCoordinate(a),this._pt[1].setCoordinate(d),this._distance=a.distance(d),this._isNull=!1}else if(3===arguments.length){var T=arguments[1],Z=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(T),this._distance=Z,this._isNull=!1}},po.prototype.getDistance=function(){return this._distance},po.prototype.setMaximum=function(){if(1===arguments.length){var a=arguments[0];this.setMaximum(a._pt[0],a._pt[1])}else if(2===arguments.length){var d=arguments[0],E=arguments[1];if(this._isNull)return this.initialize(d,E),null;var T=d.distance(E);T>this._distance&&this.initialize(d,E,T)}},po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po};var Fs=function(){};Fs.prototype.interfaces_=function(){return[]},Fs.prototype.getClass=function(){return Fs},Fs.computeDistance=function(){if(arguments[2]instanceof po&&arguments[0]instanceof Ri&&arguments[1]instanceof X)for(var d=arguments[1],E=arguments[2],T=arguments[0].getCoordinates(),Z=new zi,me=0;me<T.length-1;me++){Z.setCoordinates(T[me],T[me+1]);var Ie=Z.closestPoint(d);E.setMinimum(Ie,d)}else if(arguments[2]instanceof po&&arguments[0]instanceof Ii&&arguments[1]instanceof X){var Xe=arguments[0],H=arguments[1],s=arguments[2];Fs.computeDistance(Xe.getExteriorRing(),H,s);for(var C=0;C<Xe.getNumInteriorRing();C++)Fs.computeDistance(Xe.getInteriorRingN(C),H,s)}else if(arguments[2]instanceof po&&arguments[0]instanceof an&&arguments[1]instanceof X){var N=arguments[0],W=arguments[1],K=arguments[2];if(N instanceof Ri)Fs.computeDistance(N,W,K);else if(N instanceof Ii)Fs.computeDistance(N,W,K);else if(N instanceof Dn)for(var he=N,ge=0;ge<he.getNumGeometries();ge++){var we=he.getGeometryN(ge);Fs.computeDistance(we,W,K)}else K.setMinimum(N.getCoordinate(),W)}else if(arguments[2]instanceof po&&arguments[0]instanceof zi&&arguments[1]instanceof X){var Ve=arguments[1],We=arguments[2],lt=arguments[0].closestPoint(Ve);We.setMinimum(lt,Ve)}};var pa=function(a){this._maxPtDist=new po,this._inputGeom=a||null},y1={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};pa.prototype.computeMaxMidpointDistance=function(a){var d=new qi(this._inputGeom);a.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},pa.prototype.computeMaxVertexDistance=function(a){var d=new h1(this._inputGeom);a.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},pa.prototype.findDistance=function(a){return this.computeMaxVertexDistance(a),this.computeMaxMidpointDistance(a),this._maxPtDist.getDistance()},pa.prototype.getDistancePoints=function(){return this._maxPtDist},pa.prototype.interfaces_=function(){return[]},pa.prototype.getClass=function(){return pa},y1.MaxPointDistanceFilter.get=function(){return h1},y1.MaxMidpointDistanceFilter.get=function(){return qi},Object.defineProperties(pa,y1);var h1=function(a){this._maxPtDist=new po,this._minPtDist=new po,this._geom=a||null};h1.prototype.filter=function(a){this._minPtDist.initialize(),Fs.computeDistance(this._geom,a,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},h1.prototype.getMaxPointDistance=function(){return this._maxPtDist},h1.prototype.interfaces_=function(){return[vi]},h1.prototype.getClass=function(){return h1};var qi=function(a){this._maxPtDist=new po,this._minPtDist=new po,this._geom=a||null};qi.prototype.filter=function(a,d){if(0===d)return null;var E=a.getCoordinate(d-1),T=a.getCoordinate(d),Z=new X((E.x+T.x)/2,(E.y+T.y)/2);this._minPtDist.initialize(),Fs.computeDistance(this._geom,Z,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},qi.prototype.isDone=function(){return!1},qi.prototype.isGeometryChanged=function(){return!1},qi.prototype.getMaxPointDistance=function(){return this._maxPtDist},qi.prototype.interfaces_=function(){return[jt]},qi.prototype.getClass=function(){return qi};var vo=function(a){this._comps=a||null};vo.prototype.filter=function(a){a instanceof Ii&&this._comps.add(a)},vo.prototype.interfaces_=function(){return[jn]},vo.prototype.getClass=function(){return vo},vo.getPolygons=function(){if(1===arguments.length)return vo.getPolygons(arguments[0],new Zn);if(2===arguments.length){var d=arguments[0],E=arguments[1];return d instanceof Ii?E.add(d):d instanceof Dn&&d.apply(new vo(E)),E}};var ka=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var E=arguments[1];this._lines=arguments[0],this._isForcedToLineString=E}};ka.prototype.filter=function(a){if(this._isForcedToLineString&&a instanceof ro){var d=a.getFactory().createLineString(a.getCoordinateSequence());return this._lines.add(d),null}a instanceof Ri&&this._lines.add(a)},ka.prototype.setForceToLineString=function(a){this._isForcedToLineString=a},ka.prototype.interfaces_=function(){return[un]},ka.prototype.getClass=function(){return ka},ka.getGeometry=function(){if(1===arguments.length){var a=arguments[0];return a.getFactory().buildGeometry(ka.getLines(a))}if(2===arguments.length){var d=arguments[0],E=arguments[1];return d.getFactory().buildGeometry(ka.getLines(d,E))}},ka.getLines=function(){if(1===arguments.length)return ka.getLines(arguments[0],!1);if(2===arguments.length){if(xe(arguments[0],ji)&&xe(arguments[1],ji)){for(var E=arguments[1],T=arguments[0].iterator();T.hasNext();){var Z=T.next();ka.getLines(Z,E)}return E}if(arguments[0]instanceof an&&"boolean"==typeof arguments[1]){var me=arguments[0],Ie=arguments[1],Xe=new Zn;return me.apply(new ka(Xe,Ie)),Xe}if(arguments[0]instanceof an&&xe(arguments[1],ji)){var H=arguments[0],s=arguments[1];return H instanceof Ri?s.add(H):H.apply(new ka(s)),s}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&xe(arguments[0],ji)&&xe(arguments[1],ji)){for(var N=arguments[1],W=arguments[2],K=arguments[0].iterator();K.hasNext();){var he=K.next();ka.getLines(he,N,W)}return N}if("boolean"==typeof arguments[2]&&arguments[0]instanceof an&&xe(arguments[1],ji)){var we=arguments[1];return arguments[0].apply(new ka(we,arguments[2])),we}}};var Ia=function(){if(this._boundaryRule=qn.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var a=arguments[0];if(null===a)throw new F("Rule must be non-null");this._boundaryRule=a}};Ia.prototype.locateInternal=function(){if(arguments[0]instanceof X&&arguments[1]instanceof Ii){var a=arguments[0],d=arguments[1];if(d.isEmpty())return ne.EXTERIOR;var E=d.getExteriorRing(),T=this.locateInPolygonRing(a,E);if(T===ne.EXTERIOR)return ne.EXTERIOR;if(T===ne.BOUNDARY)return ne.BOUNDARY;for(var Z=0;Z<d.getNumInteriorRing();Z++){var me=d.getInteriorRingN(Z),Ie=this.locateInPolygonRing(a,me);if(Ie===ne.INTERIOR)return ne.EXTERIOR;if(Ie===ne.BOUNDARY)return ne.BOUNDARY}return ne.INTERIOR}if(arguments[0]instanceof X&&arguments[1]instanceof Ri){var Xe=arguments[0],H=arguments[1];if(!H.getEnvelopeInternal().intersects(Xe))return ne.EXTERIOR;var s=H.getCoordinates();return H.isClosed()||!Xe.equals(s[0])&&!Xe.equals(s[s.length-1])?Gt.isOnLine(Xe,s)?ne.INTERIOR:ne.EXTERIOR:ne.BOUNDARY}if(arguments[0]instanceof X&&arguments[1]instanceof Vi){var C=arguments[0];return arguments[1].getCoordinate().equals2D(C)?ne.INTERIOR:ne.EXTERIOR}},Ia.prototype.locateInPolygonRing=function(a,d){return d.getEnvelopeInternal().intersects(a)?Gt.locatePointInRing(a,d.getCoordinates()):ne.EXTERIOR},Ia.prototype.intersects=function(a,d){return this.locate(a,d)!==ne.EXTERIOR},Ia.prototype.updateLocationInfo=function(a){a===ne.INTERIOR&&(this._isIn=!0),a===ne.BOUNDARY&&this._numBoundaries++},Ia.prototype.computeLocation=function(a,d){if(d instanceof Vi&&this.updateLocationInfo(this.locateInternal(a,d)),d instanceof Ri)this.updateLocationInfo(this.locateInternal(a,d));else if(d instanceof Ii)this.updateLocationInfo(this.locateInternal(a,d));else if(d instanceof Ke)for(var E=d,T=0;T<E.getNumGeometries();T++){var Z=E.getGeometryN(T);this.updateLocationInfo(this.locateInternal(a,Z))}else if(d instanceof Po)for(var me=d,Ie=0;Ie<me.getNumGeometries();Ie++){var Xe=me.getGeometryN(Ie);this.updateLocationInfo(this.locateInternal(a,Xe))}else if(d instanceof Dn)for(var H=new Rs(d);H.hasNext();){var s=H.next();s!==d&&this.computeLocation(a,s)}},Ia.prototype.locate=function(a,d){return d.isEmpty()?ne.EXTERIOR:d instanceof Ri||d instanceof Ii?this.locateInternal(a,d):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(a,d),this._boundaryRule.isInBoundary(this._numBoundaries)?ne.BOUNDARY:this._numBoundaries>0||this._isIn?ne.INTERIOR:ne.EXTERIOR)},Ia.prototype.interfaces_=function(){return[]},Ia.prototype.getClass=function(){return Ia};var Gr=function a(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)a.call(this,arguments[0],a.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var Z=arguments[1],me=arguments[2];this._component=arguments[0],this._segIndex=Z,this._pt=me}},L2={INSIDE_AREA:{configurable:!0}};Gr.prototype.isInsideArea=function(){return this._segIndex===Gr.INSIDE_AREA},Gr.prototype.getCoordinate=function(){return this._pt},Gr.prototype.getGeometryComponent=function(){return this._component},Gr.prototype.getSegmentIndex=function(){return this._segIndex},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},L2.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Gr,L2);var Vs=function(a){this._pts=a||null};Vs.prototype.filter=function(a){a instanceof Vi&&this._pts.add(a)},Vs.prototype.interfaces_=function(){return[jn]},Vs.prototype.getClass=function(){return Vs},Vs.getPoints=function(){if(1===arguments.length){var a=arguments[0];return a instanceof Vi?Os.singletonList(a):Vs.getPoints(a,new Zn)}if(2===arguments.length){var d=arguments[0],E=arguments[1];return d instanceof Vi?E.add(d):d instanceof Dn&&d.apply(new Vs(E)),E}};var Es=function(){this._locations=null,this._locations=arguments[0]};Es.prototype.filter=function(a){(a instanceof Vi||a instanceof Ri||a instanceof Ii)&&this._locations.add(new Gr(a,0,a.getCoordinate()))},Es.prototype.interfaces_=function(){return[jn]},Es.prototype.getClass=function(){return Es},Es.getLocations=function(a){var d=new Zn;return a.apply(new Es(d)),d};var ma=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ia,this._minDistanceLocation=null,this._minDistance=j.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var E=arguments[0],T=arguments[1],Z=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=E,this._geom[1]=T,this._terminateDistance=Z}};ma.prototype.computeContainmentDistance=function(){if(0===arguments.length){var a=new Array(2).fill(null);if(this.computeContainmentDistance(0,a),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,a)}else if(2===arguments.length){var d=arguments[0],E=arguments[1],T=1-d,Z=vo.getPolygons(this._geom[d]);if(Z.size()>0){var me=Es.getLocations(this._geom[T]);if(this.computeContainmentDistance(me,Z,E),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[T]=E[0],this._minDistanceLocation[d]=E[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&xe(arguments[0],so)&&xe(arguments[1],so)){for(var Ie=arguments[0],Xe=arguments[1],H=arguments[2],s=0;s<Ie.size();s++)for(var C=Ie.get(s),N=0;N<Xe.size();N++)if(this.computeContainmentDistance(C,Xe.get(N),H),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Gr&&arguments[1]instanceof Ii){var W=arguments[0],K=arguments[1],he=arguments[2],ge=W.getCoordinate();if(ne.EXTERIOR!==this._ptLocator.locate(ge,K))return this._minDistance=0,he[0]=W,he[1]=new Gr(K,ge),null}},ma.prototype.computeMinDistanceLinesPoints=function(a,d,E){for(var T=0;T<a.size();T++)for(var Z=a.get(T),me=0;me<d.size();me++){var Ie=d.get(me);if(this.computeMinDistance(Z,Ie,E),this._minDistance<=this._terminateDistance)return null}},ma.prototype.computeFacetDistance=function(){var a=new Array(2).fill(null),d=ka.getLines(this._geom[0]),E=ka.getLines(this._geom[1]),T=Vs.getPoints(this._geom[0]),Z=Vs.getPoints(this._geom[1]);return this.computeMinDistanceLines(d,E,a),this.updateMinDistance(a,!1),this._minDistance<=this._terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistanceLinesPoints(d,Z,a),this.updateMinDistance(a,!1),this._minDistance<=this._terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistanceLinesPoints(E,T,a),this.updateMinDistance(a,!0),this._minDistance<=this._terminateDistance?null:(a[0]=null,a[1]=null,this.computeMinDistancePoints(T,Z,a),void this.updateMinDistance(a,!1))))},ma.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},ma.prototype.updateMinDistance=function(a,d){if(null===a[0])return null;d?(this._minDistanceLocation[0]=a[1],this._minDistanceLocation[1]=a[0]):(this._minDistanceLocation[0]=a[0],this._minDistanceLocation[1]=a[1])},ma.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},ma.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ri&&arguments[1]instanceof Vi){var a=arguments[0],d=arguments[1],E=arguments[2];if(a.getEnvelopeInternal().distance(d.getEnvelopeInternal())>this._minDistance)return null;for(var T=a.getCoordinates(),Z=d.getCoordinate(),me=0;me<T.length-1;me++){var Ie=Gt.distancePointLine(Z,T[me],T[me+1]);if(Ie<this._minDistance){this._minDistance=Ie;var Xe=new zi(T[me],T[me+1]).closestPoint(Z);E[0]=new Gr(a,me,Xe),E[1]=new Gr(d,0,Z)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ri&&arguments[1]instanceof Ri){var H=arguments[0],s=arguments[1],C=arguments[2];if(H.getEnvelopeInternal().distance(s.getEnvelopeInternal())>this._minDistance)return null;for(var N=H.getCoordinates(),W=s.getCoordinates(),K=0;K<N.length-1;K++)for(var he=0;he<W.length-1;he++){var ge=Gt.distanceLineLine(N[K],N[K+1],W[he],W[he+1]);if(ge<this._minDistance){this._minDistance=ge;var we=new zi(N[K],N[K+1]),Le=new zi(W[he],W[he+1]),Ve=we.closestPoints(Le);C[0]=new Gr(H,K,Ve[0]),C[1]=new Gr(s,he,Ve[1])}if(this._minDistance<=this._terminateDistance)return null}}},ma.prototype.computeMinDistancePoints=function(a,d,E){for(var T=0;T<a.size();T++)for(var Z=a.get(T),me=0;me<d.size();me++){var Ie=d.get(me),Xe=Z.getCoordinate().distance(Ie.getCoordinate());if(Xe<this._minDistance&&(this._minDistance=Xe,E[0]=new Gr(Z,0,Z.getCoordinate()),E[1]=new Gr(Ie,0,Ie.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},ma.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new F("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},ma.prototype.computeMinDistanceLines=function(a,d,E){for(var T=0;T<a.size();T++)for(var Z=a.get(T),me=0;me<d.size();me++){var Ie=d.get(me);if(this.computeMinDistance(Z,Ie,E),this._minDistance<=this._terminateDistance)return null}},ma.prototype.interfaces_=function(){return[]},ma.prototype.getClass=function(){return ma},ma.distance=function(a,d){return new ma(a,d).distance()},ma.isWithinDistance=function(a,d,E){return new ma(a,d,E).distance()<=E},ma.nearestPoints=function(a,d){return new ma(a,d).nearestPoints()};var Ea=function(){this._pt=[new X,new X],this._distance=j.NaN,this._isNull=!0};Ea.prototype.getCoordinates=function(){return this._pt},Ea.prototype.getCoordinate=function(a){return this._pt[a]},Ea.prototype.setMinimum=function(){if(1===arguments.length){var a=arguments[0];this.setMinimum(a._pt[0],a._pt[1])}else if(2===arguments.length){var d=arguments[0],E=arguments[1];if(this._isNull)return this.initialize(d,E),null;var T=d.distance(E);T<this._distance&&this.initialize(d,E,T)}},Ea.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var a=arguments[0],d=arguments[1];this._pt[0].setCoordinate(a),this._pt[1].setCoordinate(d),this._distance=a.distance(d),this._isNull=!1}else if(3===arguments.length){var T=arguments[1],Z=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(T),this._distance=Z,this._isNull=!1}},Ea.prototype.toString=function(){return qe.toLineString(this._pt[0],this._pt[1])},Ea.prototype.getDistance=function(){return this._distance},Ea.prototype.setMaximum=function(){if(1===arguments.length){var a=arguments[0];this.setMaximum(a._pt[0],a._pt[1])}else if(2===arguments.length){var d=arguments[0],E=arguments[1];if(this._isNull)return this.initialize(d,E),null;var T=d.distance(E);T>this._distance&&this.initialize(d,E,T)}},Ea.prototype.interfaces_=function(){return[]},Ea.prototype.getClass=function(){return Ea};var ua=function(){};ua.prototype.interfaces_=function(){return[]},ua.prototype.getClass=function(){return ua},ua.computeDistance=function(){if(arguments[2]instanceof Ea&&arguments[0]instanceof Ri&&arguments[1]instanceof X)for(var a=arguments[0],d=arguments[1],E=arguments[2],T=new zi,Z=a.getCoordinates(),me=0;me<Z.length-1;me++){T.setCoordinates(Z[me],Z[me+1]);var Ie=T.closestPoint(d);E.setMinimum(Ie,d)}else if(arguments[2]instanceof Ea&&arguments[0]instanceof Ii&&arguments[1]instanceof X){var Xe=arguments[0],H=arguments[1],s=arguments[2];ua.computeDistance(Xe.getExteriorRing(),H,s);for(var C=0;C<Xe.getNumInteriorRing();C++)ua.computeDistance(Xe.getInteriorRingN(C),H,s)}else if(arguments[2]instanceof Ea&&arguments[0]instanceof an&&arguments[1]instanceof X){var N=arguments[0],W=arguments[1],K=arguments[2];if(N instanceof Ri)ua.computeDistance(N,W,K);else if(N instanceof Ii)ua.computeDistance(N,W,K);else if(N instanceof Dn)for(var he=N,ge=0;ge<he.getNumGeometries();ge++){var we=he.getGeometryN(ge);ua.computeDistance(we,W,K)}else K.setMinimum(N.getCoordinate(),W)}else if(arguments[2]instanceof Ea&&arguments[0]instanceof zi&&arguments[1]instanceof X){var Ve=arguments[1],We=arguments[2],lt=arguments[0].closestPoint(Ve);We.setMinimum(lt,Ve)}};var ui=function(){this._g0=null,this._g1=null,this._ptDist=new Ea,this._densifyFrac=0;var d=arguments[1];this._g0=arguments[0],this._g1=d},lc={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};ui.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},ui.prototype.setDensifyFraction=function(a){if(a>1||a<=0)throw new F("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=a},ui.prototype.compute=function(a,d){this.computeOrientedDistance(a,d,this._ptDist),this.computeOrientedDistance(d,a,this._ptDist)},ui.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},ui.prototype.computeOrientedDistance=function(a,d,E){var T=new f1(d);if(a.apply(T),E.setMaximum(T.getMaxPointDistance()),this._densifyFrac>0){var Z=new Ar(d,this._densifyFrac);a.apply(Z),E.setMaximum(Z.getMaxPointDistance())}},ui.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.distance=function(){if(2===arguments.length)return new ui(arguments[0],arguments[1]).distance();if(3===arguments.length){var Z=arguments[2],me=new ui(arguments[0],arguments[1]);return me.setDensifyFraction(Z),me.distance()}},lc.MaxPointDistanceFilter.get=function(){return f1},lc.MaxDensifiedByFractionDistanceFilter.get=function(){return Ar},Object.defineProperties(ui,lc);var f1=function(){this._maxPtDist=new Ea,this._minPtDist=new Ea,this._euclideanDist=new ua,this._geom=null,this._geom=arguments[0]};f1.prototype.filter=function(a){this._minPtDist.initialize(),ua.computeDistance(this._geom,a,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},f1.prototype.getMaxPointDistance=function(){return this._maxPtDist},f1.prototype.interfaces_=function(){return[vi]},f1.prototype.getClass=function(){return f1};var Ar=function(){this._maxPtDist=new Ea,this._minPtDist=new Ea,this._geom=null,this._numSubSegs=0;var d=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/d))};Ar.prototype.filter=function(a,d){if(0===d)return null;for(var E=a.getCoordinate(d-1),T=a.getCoordinate(d),Z=(T.x-E.x)/this._numSubSegs,me=(T.y-E.y)/this._numSubSegs,Ie=0;Ie<this._numSubSegs;Ie++){var s=new X(E.x+Ie*Z,E.y+Ie*me);this._minPtDist.initialize(),ua.computeDistance(this._geom,s,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ar.prototype.isDone=function(){return!1},Ar.prototype.isGeometryChanged=function(){return!1},Ar.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ar.prototype.interfaces_=function(){return[jt]},Ar.prototype.getClass=function(){return Ar};var Ks=function(a,d,E){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=a||null,this._bufDistance=d||null,this._result=E||null},gi={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Ks.prototype.checkMaximumDistance=function(a,d,E){var T=new ui(d,a);if(T.setDensifyFraction(.25),this._maxDistanceFound=T.orientedDistance(),this._maxDistanceFound>E){this._isValid=!1;var Z=T.getCoordinates();this._errorLocation=Z[1],this._errorIndicator=a.getFactory().createLineString(Z),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+qe.toLineString(Z[0],Z[1])+")"}},Ks.prototype.isValid=function(){var a=Math.abs(this._bufDistance),d=Ks.MAX_DISTANCE_DIFF_FRAC*a;return this._minValidDistance=a-d,this._maxValidDistance=a+d,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Ks.VERBOSE&&$e.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Ks.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ii||this._input instanceof Po||this._input instanceof Dn))return null;var a=this.getPolygonLines(this._input);if(this.checkMinimumDistance(a,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(a,this._result,this._maxValidDistance)},Ks.prototype.getErrorIndicator=function(){return this._errorIndicator},Ks.prototype.checkMinimumDistance=function(a,d,E){var T=new ma(a,d,E);if(this._minDistanceFound=T.distance(),this._minDistanceFound<E){this._isValid=!1;var Z=T.nearestPoints();this._errorLocation=T.nearestPoints()[1],this._errorIndicator=a.getFactory().createLineString(Z),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+qe.toLineString(Z[0],Z[1])+" )"}},Ks.prototype.checkPositiveValid=function(){var a=this._result.getBoundary();if(this.checkMinimumDistance(this._input,a,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,a,this._maxValidDistance)},Ks.prototype.getErrorLocation=function(){return this._errorLocation},Ks.prototype.getPolygonLines=function(a){for(var d=new Zn,E=new ka(d),T=vo.getPolygons(a).iterator();T.hasNext();)T.next().apply(E);return a.getFactory().buildGeometry(d)},Ks.prototype.getErrorMessage=function(){return this._errMsg},Ks.prototype.interfaces_=function(){return[]},Ks.prototype.getClass=function(){return Ks},gi.VERBOSE.get=function(){return!1},gi.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ks,gi);var So=function(a,d,E){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=a||null,this._distance=d||null,this._result=E||null},_1={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};So.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},So.prototype.checkEnvelope=function(){if(this._distance<0)return null;var a=this._distance*So.MAX_ENV_DIFF_FRAC;0===a&&(a=.001);var d=new Pe(this._input.getEnvelopeInternal());d.expandBy(this._distance);var E=new Pe(this._result.getEnvelopeInternal());E.expandBy(a),E.contains(d)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(E)),this.report("Envelope")},So.prototype.checkDistance=function(){var a=new Ks(this._input,this._distance,this._result);a.isValid()||(this._isValid=!1,this._errorMsg=a.getErrorMessage(),this._errorLocation=a.getErrorLocation(),this._errorIndicator=a.getErrorIndicator()),this.report("Distance")},So.prototype.checkArea=function(){var a=this._input.getArea(),d=this._result.getArea();this._distance>0&&a>d&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&a<d&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},So.prototype.checkPolygonal=function(){this._result instanceof Ii||this._result instanceof Po||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},So.prototype.getErrorIndicator=function(){return this._errorIndicator},So.prototype.getErrorLocation=function(){return this._errorLocation},So.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},So.prototype.report=function(a){if(!So.VERBOSE)return null;$e.out.println("Check "+a+": "+(this._isValid?"passed":"FAILED"))},So.prototype.getErrorMessage=function(){return this._errorMsg},So.prototype.interfaces_=function(){return[]},So.prototype.getClass=function(){return So},So.isValidMsg=function(a,d,E){var T=new So(a,d,E);return T.isValid()?null:T.getErrorMessage()},So.isValid=function(a,d,E){return!!new So(a,d,E).isValid()},_1.VERBOSE.get=function(){return!1},_1.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(So,_1);var Qs=function(){this._pts=null,this._data=null;var d=arguments[1];this._pts=arguments[0],this._data=d};Qs.prototype.getCoordinates=function(){return this._pts},Qs.prototype.size=function(){return this._pts.length},Qs.prototype.getCoordinate=function(a){return this._pts[a]},Qs.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Qs.prototype.getSegmentOctant=function(a){return a===this._pts.length-1?-1:es.octant(this.getCoordinate(a),this.getCoordinate(a+1))},Qs.prototype.setData=function(a){this._data=a},Qs.prototype.getData=function(){return this._data},Qs.prototype.toString=function(){return qe.toLineString(new Nn(this._pts))},Qs.prototype.interfaces_=function(){return[Mo]},Qs.prototype.getClass=function(){return Qs};var da=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Zn,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};da.prototype.getInteriorIntersection=function(){return this._interiorIntersection},da.prototype.setCheckEndSegmentsOnly=function(a){this._isCheckEndSegmentsOnly=a},da.prototype.getIntersectionSegments=function(){return this._intSegments},da.prototype.count=function(){return this._intersectionCount},da.prototype.getIntersections=function(){return this._intersections},da.prototype.setFindAllIntersections=function(a){this._findAllIntersections=a},da.prototype.setKeepIntersections=function(a){this._keepIntersections=a},da.prototype.processIntersections=function(a,d,E,T){if(!this._findAllIntersections&&this.hasIntersection()||a===E&&d===T||this._isCheckEndSegmentsOnly&&!this.isEndSegment(a,d)&&!this.isEndSegment(E,T))return null;var Z=a.getCoordinates()[d],me=a.getCoordinates()[d+1],Ie=E.getCoordinates()[T],Xe=E.getCoordinates()[T+1];this._li.computeIntersection(Z,me,Ie,Xe),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=Z,this._intSegments[1]=me,this._intSegments[2]=Ie,this._intSegments[3]=Xe,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},da.prototype.isEndSegment=function(a,d){return 0===d||d>=a.size()-2},da.prototype.hasIntersection=function(){return null!==this._interiorIntersection},da.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},da.prototype.interfaces_=function(){return[rs]},da.prototype.getClass=function(){return da},da.createAllIntersectionsFinder=function(a){var d=new da(a);return d.setFindAllIntersections(!0),d},da.createAnyIntersectionFinder=function(a){return new da(a)},da.createIntersectionCounter=function(a){var d=new da(a);return d.setFindAllIntersections(!0),d.setKeepIntersections(!1),d};var as=function(){this._li=new gt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};as.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},as.prototype.getIntersections=function(){return this._segInt.getIntersections()},as.prototype.isValid=function(){return this.execute(),this._isValid},as.prototype.setFindAllIntersections=function(a){this._findAllIntersections=a},as.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new da(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var a=new j1;if(a.setSegmentIntersector(this._segInt),a.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},as.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new nn(this.getErrorMessage(),this._segInt.getInteriorIntersection())},as.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var a=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+qe.toLineString(a[0],a[1])+" and "+qe.toLineString(a[2],a[3])},as.prototype.interfaces_=function(){return[]},as.prototype.getClass=function(){return as},as.computeIntersections=function(a){var d=new as(a);return d.setFindAllIntersections(!0),d.isValid(),d.getIntersections()};var ga=function a(){this._nv=null,this._nv=new as(a.toSegmentStrings(arguments[0]))};ga.prototype.checkValid=function(){this._nv.checkValid()},ga.prototype.interfaces_=function(){return[]},ga.prototype.getClass=function(){return ga},ga.toSegmentStrings=function(a){for(var d=new Zn,E=a.iterator();E.hasNext();){var T=E.next();d.add(new Qs(T.getCoordinates(),T))}return d},ga.checkValid=function(a){new ga(a).checkValid()};var d2=function(a){this._mapOp=a};d2.prototype.map=function(a){for(var d=new Zn,E=0;E<a.getNumGeometries();E++){var T=this._mapOp.map(a.getGeometryN(E));T.isEmpty()||d.add(T)}return a.getFactory().createGeometryCollection(Ut.toGeometryArray(d))},d2.prototype.interfaces_=function(){return[]},d2.prototype.getClass=function(){return d2},d2.map=function(a,d){return new d2(d).map(a)};var Ta=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Zn,this._resultLineList=new Zn;var d=arguments[1],E=arguments[2];this._op=arguments[0],this._geometryFactory=d,this._ptLocator=E};Ta.prototype.collectLines=function(a){for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var E=d.next();this.collectLineEdge(E,a,this._lineEdgesList),this.collectBoundaryTouchEdge(E,a,this._lineEdgesList)}},Ta.prototype.labelIsolatedLine=function(a,d){var E=this._ptLocator.locate(a.getCoordinate(),this._op.getArgGeometry(d));a.getLabel().setLocation(d,E)},Ta.prototype.build=function(a){return this.findCoveredLineEdges(),this.collectLines(a),this.buildLines(a),this._resultLineList},Ta.prototype.collectLineEdge=function(a,d,E){var T=a.getLabel(),Z=a.getEdge();a.isLineEdge()&&(a.isVisited()||!Mt.isResultOfOp(T,d)||Z.isCovered()||(E.add(Z),a.setVisitedEdge(!0)))},Ta.prototype.findCoveredLineEdges=function(){for(var a=this._op.getGraph().getNodes().iterator();a.hasNext();)a.next().getEdges().findCoveredLineEdges();for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var E=d.next(),T=E.getEdge();if(E.isLineEdge()&&!T.isCoveredSet()){var Z=this._op.isCoveredByA(E.getCoordinate());T.setCovered(Z)}}},Ta.prototype.labelIsolatedLines=function(a){for(var d=a.iterator();d.hasNext();){var E=d.next(),T=E.getLabel();E.isIsolated()&&(T.isNull(0)?this.labelIsolatedLine(E,0):this.labelIsolatedLine(E,1))}},Ta.prototype.buildLines=function(a){for(var d=this._lineEdgesList.iterator();d.hasNext();){var E=d.next(),T=this._geometryFactory.createLineString(E.getCoordinates());this._resultLineList.add(T),E.setInResult(!0)}},Ta.prototype.collectBoundaryTouchEdge=function(a,d,E){var T=a.getLabel();return a.isLineEdge()||a.isVisited()||a.isInteriorAreaEdge()||a.getEdge().isInResult()?null:(Ne.isTrue(!(a.isInResult()||a.getSym().isInResult())||!a.getEdge().isInResult()),void(Mt.isResultOfOp(T,d)&&d===Mt.INTERSECTION&&(E.add(a.getEdge()),a.setVisitedEdge(!0))))},Ta.prototype.interfaces_=function(){return[]},Ta.prototype.getClass=function(){return Ta};var Ya=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Zn;var d=arguments[1];this._op=arguments[0],this._geometryFactory=d};Ya.prototype.filterCoveredNodeToPoint=function(a){var d=a.getCoordinate();if(!this._op.isCoveredByLA(d)){var E=this._geometryFactory.createPoint(d);this._resultPointList.add(E)}},Ya.prototype.extractNonCoveredResultNodes=function(a){for(var d=this._op.getGraph().getNodes().iterator();d.hasNext();){var E=d.next();if(!(E.isInResult()||E.isIncidentEdgeInResult()||0!==E.getEdges().getDegree()&&a!==Mt.INTERSECTION)){var T=E.getLabel();Mt.isResultOfOp(T,a)&&this.filterCoveredNodeToPoint(E)}}},Ya.prototype.build=function(a){return this.extractNonCoveredResultNodes(a),this._resultPointList},Ya.prototype.interfaces_=function(){return[]},Ya.prototype.getClass=function(){return Ya};var Va=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Va.prototype.transformPoint=function(a,d){return this._factory.createPoint(this.transformCoordinates(a.getCoordinateSequence(),a))},Va.prototype.transformPolygon=function(a,d){var E=!0,T=this.transformLinearRing(a.getExteriorRing(),a);null!==T&&T instanceof ro&&!T.isEmpty()||(E=!1);for(var Z=new Zn,me=0;me<a.getNumInteriorRing();me++){var Ie=this.transformLinearRing(a.getInteriorRingN(me),a);null===Ie||Ie.isEmpty()||(Ie instanceof ro||(E=!1),Z.add(Ie))}if(E)return this._factory.createPolygon(T,Z.toArray([]));var Xe=new Zn;return null!==T&&Xe.add(T),Xe.addAll(Z),this._factory.buildGeometry(Xe)},Va.prototype.createCoordinateSequence=function(a){return this._factory.getCoordinateSequenceFactory().create(a)},Va.prototype.getInputGeometry=function(){return this._inputGeom},Va.prototype.transformMultiLineString=function(a,d){for(var E=new Zn,T=0;T<a.getNumGeometries();T++){var Z=this.transformLineString(a.getGeometryN(T),a);null!==Z&&(Z.isEmpty()||E.add(Z))}return this._factory.buildGeometry(E)},Va.prototype.transformCoordinates=function(a,d){return this.copy(a)},Va.prototype.transformLineString=function(a,d){return this._factory.createLineString(this.transformCoordinates(a.getCoordinateSequence(),a))},Va.prototype.transformMultiPoint=function(a,d){for(var E=new Zn,T=0;T<a.getNumGeometries();T++){var Z=this.transformPoint(a.getGeometryN(T),a);null!==Z&&(Z.isEmpty()||E.add(Z))}return this._factory.buildGeometry(E)},Va.prototype.transformMultiPolygon=function(a,d){for(var E=new Zn,T=0;T<a.getNumGeometries();T++){var Z=this.transformPolygon(a.getGeometryN(T),a);null!==Z&&(Z.isEmpty()||E.add(Z))}return this._factory.buildGeometry(E)},Va.prototype.copy=function(a){return a.copy()},Va.prototype.transformGeometryCollection=function(a,d){for(var E=new Zn,T=0;T<a.getNumGeometries();T++){var Z=this.transform(a.getGeometryN(T));null!==Z&&(this._pruneEmptyGeometry&&Z.isEmpty()||E.add(Z))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Ut.toGeometryArray(E)):this._factory.buildGeometry(E)},Va.prototype.transform=function(a){if(this._inputGeom=a,this._factory=a.getFactory(),a instanceof Vi)return this.transformPoint(a,null);if(a instanceof co)return this.transformMultiPoint(a,null);if(a instanceof ro)return this.transformLinearRing(a,null);if(a instanceof Ri)return this.transformLineString(a,null);if(a instanceof Ke)return this.transformMultiLineString(a,null);if(a instanceof Ii)return this.transformPolygon(a,null);if(a instanceof Po)return this.transformMultiPolygon(a,null);if(a instanceof Dn)return this.transformGeometryCollection(a,null);throw new F("Unknown Geometry subtype: "+a.getClass().getName())},Va.prototype.transformLinearRing=function(a,d){var E=this.transformCoordinates(a.getCoordinateSequence(),a);if(null===E)return this._factory.createLinearRing(null);var T=E.size();return T>0&&T<4&&!this._preserveType?this._factory.createLineString(E):this._factory.createLinearRing(E)},Va.prototype.interfaces_=function(){return[]},Va.prototype.getClass=function(){return Va};var Xa=function a(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new zi,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ri&&"number"==typeof arguments[1]){var E=arguments[1];a.call(this,arguments[0].getCoordinates(),E)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var T=arguments[0],Z=arguments[1];this._srcPts=T,this._isClosed=a.isClosed(T),this._snapTolerance=Z}};Xa.prototype.snapVertices=function(a,d){for(var E=this._isClosed?a.size()-1:a.size(),T=0;T<E;T++){var Z=a.get(T),me=this.findSnapForVertex(Z,d);null!==me&&(a.set(T,new X(me)),0===T&&this._isClosed&&a.set(a.size()-1,new X(me)))}},Xa.prototype.findSnapForVertex=function(a,d){for(var E=0;E<d.length;E++){if(a.equals2D(d[E]))return null;if(a.distance(d[E])<this._snapTolerance)return d[E]}return null},Xa.prototype.snapTo=function(a){var d=new Je(this._srcPts);return this.snapVertices(d,a),this.snapSegments(d,a),d.toCoordinateArray()},Xa.prototype.snapSegments=function(a,d){if(0===d.length)return null;var E=d.length;d[0].equals2D(d[d.length-1])&&(E=d.length-1);for(var T=0;T<E;T++){var Z=d[T],me=this.findSegmentIndexToSnap(Z,a);me>=0&&a.add(me+1,new X(Z),!1)}},Xa.prototype.findSegmentIndexToSnap=function(a,d){for(var E=j.MAX_VALUE,T=-1,Z=0;Z<d.size()-1;Z++){if(this._seg.p0=d.get(Z),this._seg.p1=d.get(Z+1),this._seg.p0.equals2D(a)||this._seg.p1.equals2D(a)){if(this._allowSnappingToSourceVertices)continue;return-1}var me=this._seg.distance(a);me<this._snapTolerance&&me<E&&(E=me,T=Z)}return T},Xa.prototype.setAllowSnappingToSourceVertices=function(a){this._allowSnappingToSourceVertices=a},Xa.prototype.interfaces_=function(){return[]},Xa.prototype.getClass=function(){return Xa},Xa.isClosed=function(a){return!(a.length<=1)&&a[0].equals2D(a[a.length-1])};var Eo=function(a){this._srcGeom=a||null},Na={SNAP_PRECISION_FACTOR:{configurable:!0}};Eo.prototype.snapTo=function(a,d){var E=this.extractTargetCoordinates(a);return new W1(d,E).transform(this._srcGeom)},Eo.prototype.snapToSelf=function(a,d){var E=this.extractTargetCoordinates(this._srcGeom),T=new W1(a,E,!0).transform(this._srcGeom),Z=T;return d&&xe(Z,Wn)&&(Z=T.buffer(0)),Z},Eo.prototype.computeSnapTolerance=function(a){return this.computeMinimumSegmentLength(a)/10},Eo.prototype.extractTargetCoordinates=function(a){for(var d=new D,E=a.getCoordinates(),T=0;T<E.length;T++)d.add(E[T]);return d.toArray(new Array(0).fill(null))},Eo.prototype.computeMinimumSegmentLength=function(a){for(var d=j.MAX_VALUE,E=0;E<a.length-1;E++){var T=a[E].distance(a[E+1]);T<d&&(d=T)}return d},Eo.prototype.interfaces_=function(){return[]},Eo.prototype.getClass=function(){return Eo},Eo.snap=function(a,d,E){var T=new Array(2).fill(null),Z=new Eo(a);T[0]=Z.snapTo(d,E);var me=new Eo(d);return T[1]=me.snapTo(T[0],E),T},Eo.computeOverlaySnapTolerance=function(){if(1===arguments.length){var a=arguments[0],d=Eo.computeSizeBasedSnapTolerance(a),E=a.getPrecisionModel();if(E.getType()===Ot.FIXED){var T=1/E.getScale()*2/1.415;T>d&&(d=T)}return d}if(2===arguments.length){var me=arguments[1];return Math.min(Eo.computeOverlaySnapTolerance(arguments[0]),Eo.computeOverlaySnapTolerance(me))}},Eo.computeSizeBasedSnapTolerance=function(a){var d=a.getEnvelopeInternal();return Math.min(d.getHeight(),d.getWidth())*Eo.SNAP_PRECISION_FACTOR},Eo.snapToSelf=function(a,d,E){return new Eo(a).snapToSelf(d,E)},Na.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Eo,Na);var W1=function(a){function d(E,T,Z){a.call(this),this._snapTolerance=E||null,this._snapPts=T||null,this._isSelfSnap=void 0!==Z&&Z}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.snapLine=function(E,T){var Z=new Xa(E,this._snapTolerance);return Z.setAllowSnappingToSourceVertices(this._isSelfSnap),Z.snapTo(T)},d.prototype.transformCoordinates=function(E,T){var Z=E.toCoordinateArray(),me=this.snapLine(Z,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(me)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Va),ws=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};ws.prototype.getCommon=function(){return j.longBitsToDouble(this._commonBits)},ws.prototype.add=function(a){var d=j.doubleToLongBits(a);return this._isFirst?(this._commonBits=d,this._commonSignExp=ws.signExpBits(this._commonBits),this._isFirst=!1,null):ws.signExpBits(d)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=ws.numCommonMostSigMantissaBits(this._commonBits,d),void(this._commonBits=ws.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},ws.prototype.toString=function(){if(1===arguments.length){var a=arguments[0],d=j.longBitsToDouble(a),E="0000000000000000000000000000000000000000000000000000000000000000"+j.toBinaryString(a),T=E.substring(E.length-64);return T.substring(0,1)+"  "+T.substring(1,12)+"(exp) "+T.substring(12)+" [ "+d+" ]"}},ws.prototype.interfaces_=function(){return[]},ws.prototype.getClass=function(){return ws},ws.getBit=function(a,d){return a&1<<d?1:0},ws.signExpBits=function(a){return a>>52},ws.zeroLowerBits=function(a,d){return a&~((1<<d)-1)},ws.numCommonMostSigMantissaBits=function(a,d){for(var E=0,T=52;T>=0;T--){if(ws.getBit(a,T)!==ws.getBit(d,T))return E;E++}return 52};var b1=function(){this._commonCoord=null,this._ccFilter=new zc},rl={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};b1.prototype.addCommonBits=function(a){var d=new Y1(this._commonCoord);a.apply(d),a.geometryChanged()},b1.prototype.removeCommonBits=function(a){if(0===this._commonCoord.x&&0===this._commonCoord.y)return a;var d=new X(this._commonCoord);d.x=-d.x,d.y=-d.y;var E=new Y1(d);return a.apply(E),a.geometryChanged(),a},b1.prototype.getCommonCoordinate=function(){return this._commonCoord},b1.prototype.add=function(a){a.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},b1.prototype.interfaces_=function(){return[]},b1.prototype.getClass=function(){return b1},rl.CommonCoordinateFilter.get=function(){return zc},rl.Translater.get=function(){return Y1},Object.defineProperties(b1,rl);var zc=function(){this._commonBitsX=new ws,this._commonBitsY=new ws};zc.prototype.filter=function(a){this._commonBitsX.add(a.x),this._commonBitsY.add(a.y)},zc.prototype.getCommonCoordinate=function(){return new X(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},zc.prototype.interfaces_=function(){return[vi]},zc.prototype.getClass=function(){return zc};var Y1=function(){this.trans=null,this.trans=arguments[0]};Y1.prototype.filter=function(a,d){var E=a.getOrdinate(d,0)+this.trans.x,T=a.getOrdinate(d,1)+this.trans.y;a.setOrdinate(d,0,E),a.setOrdinate(d,1,T)},Y1.prototype.isDone=function(){return!1},Y1.prototype.isGeometryChanged=function(){return!0},Y1.prototype.interfaces_=function(){return[jt]},Y1.prototype.getClass=function(){return Y1};var Ao=function(a,d){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=a,this._geom[1]=d,this.computeSnapTolerance()};Ao.prototype.selfSnap=function(a){return new Eo(a).snapTo(a,this._snapTolerance)},Ao.prototype.removeCommonBits=function(a){this._cbr=new b1,this._cbr.add(a[0]),this._cbr.add(a[1]);var d=new Array(2).fill(null);return d[0]=this._cbr.removeCommonBits(a[0].copy()),d[1]=this._cbr.removeCommonBits(a[1].copy()),d},Ao.prototype.prepareResult=function(a){return this._cbr.addCommonBits(a),a},Ao.prototype.getResultGeometry=function(a){var d=this.snap(this._geom),E=Mt.overlayOp(d[0],d[1],a);return this.prepareResult(E)},Ao.prototype.checkValid=function(a){a.isValid()||$e.out.println("Snapped geometry is invalid")},Ao.prototype.computeSnapTolerance=function(){this._snapTolerance=Eo.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Ao.prototype.snap=function(a){var d=this.removeCommonBits(a);return Eo.snap(d[0],d[1],this._snapTolerance)},Ao.prototype.interfaces_=function(){return[]},Ao.prototype.getClass=function(){return Ao},Ao.overlayOp=function(a,d,E){return new Ao(a,d).getResultGeometry(E)},Ao.union=function(a,d){return Ao.overlayOp(a,d,Mt.UNION)},Ao.intersection=function(a,d){return Ao.overlayOp(a,d,Mt.INTERSECTION)},Ao.symDifference=function(a,d){return Ao.overlayOp(a,d,Mt.SYMDIFFERENCE)},Ao.difference=function(a,d){return Ao.overlayOp(a,d,Mt.DIFFERENCE)};var Wr=function(a,d){this._geom=new Array(2).fill(null),this._geom[0]=a,this._geom[1]=d};Wr.prototype.getResultGeometry=function(a){var d=null,E=!1,T=null;try{d=Mt.overlayOp(this._geom[0],this._geom[1],a),E=!0}catch(Z){if(!(Z instanceof Oe))throw Z;T=Z}if(!E)try{d=Ao.overlayOp(this._geom[0],this._geom[1],a)}catch(Z){throw Z instanceof Oe?T:Z}return d},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.overlayOp=function(a,d,E){return new Wr(a,d).getResultGeometry(E)},Wr.union=function(a,d){return Wr.overlayOp(a,d,Mt.UNION)},Wr.intersection=function(a,d){return Wr.overlayOp(a,d,Mt.INTERSECTION)},Wr.symDifference=function(a,d){return Wr.overlayOp(a,d,Mt.SYMDIFFERENCE)},Wr.difference=function(a,d){return Wr.overlayOp(a,d,Mt.DIFFERENCE)};var _c=function(){this.mce=null,this.chainIndex=null;var d=arguments[1];this.mce=arguments[0],this.chainIndex=d};_c.prototype.computeIntersections=function(a,d){this.mce.computeIntersectsForChain(this.chainIndex,a.mce,a.chainIndex,d)},_c.prototype.interfaces_=function(){return[]},_c.prototype.getClass=function(){return _c};var Cs=function a(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var d=arguments[0],E=arguments[1];this._eventType=a.DELETE,this._xValue=d,this._insertEvent=E}else if(3===arguments.length){var T=arguments[0],Z=arguments[1],me=arguments[2];this._eventType=a.INSERT,this._label=T,this._xValue=Z,this._obj=me}},ol={INSERT:{configurable:!0},DELETE:{configurable:!0}};Cs.prototype.isDelete=function(){return this._eventType===Cs.DELETE},Cs.prototype.setDeleteEventIndex=function(a){this._deleteEventIndex=a},Cs.prototype.getObject=function(){return this._obj},Cs.prototype.compareTo=function(a){return this._xValue<a._xValue?-1:this._xValue>a._xValue?1:this._eventType<a._eventType?-1:this._eventType>a._eventType?1:0},Cs.prototype.getInsertEvent=function(){return this._insertEvent},Cs.prototype.isInsert=function(){return this._eventType===Cs.INSERT},Cs.prototype.isSameLabel=function(a){return null!==this._label&&this._label===a._label},Cs.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Cs.prototype.interfaces_=function(){return[Q]},Cs.prototype.getClass=function(){return Cs},ol.INSERT.get=function(){return 1},ol.DELETE.get=function(){return 2},Object.defineProperties(Cs,ol);var D2=function(){};D2.prototype.interfaces_=function(){return[]},D2.prototype.getClass=function(){return D2};var ss=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var d=arguments[1],E=arguments[2];this._li=arguments[0],this._includeProper=d,this._recordIsolated=E};ss.prototype.isTrivialIntersection=function(a,d,E,T){if(a===E&&1===this._li.getIntersectionNum()){if(ss.isAdjacentSegments(d,T))return!0;if(a.isClosed()){var Z=a.getNumPoints()-1;if(0===d&&T===Z||0===T&&d===Z)return!0}}return!1},ss.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ss.prototype.setIsDoneIfProperInt=function(a){this._isDoneWhenProperInt=a},ss.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ss.prototype.isBoundaryPointInternal=function(a,d){for(var E=d.iterator();E.hasNext();){var T=E.next().getCoordinate();if(a.isIntersection(T))return!0}return!1},ss.prototype.hasProperIntersection=function(){return this._hasProper},ss.prototype.hasIntersection=function(){return this._hasIntersection},ss.prototype.isDone=function(){return this._isDone},ss.prototype.isBoundaryPoint=function(a,d){return!(null===d||!this.isBoundaryPointInternal(a,d[0])&&!this.isBoundaryPointInternal(a,d[1]))},ss.prototype.setBoundaryNodes=function(a,d){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=a,this._bdyNodes[1]=d},ss.prototype.addIntersections=function(a,d,E,T){if(a===E&&d===T)return null;this.numTests++;var Z=a.getCoordinates()[d],me=a.getCoordinates()[d+1],Ie=E.getCoordinates()[T],Xe=E.getCoordinates()[T+1];this._li.computeIntersection(Z,me,Ie,Xe),this._li.hasIntersection()&&(this._recordIsolated&&(a.setIsolated(!1),E.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(a,d,E,T)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(a.addIntersections(this._li,d,0),E.addIntersections(this._li,T,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ss.prototype.interfaces_=function(){return[]},ss.prototype.getClass=function(){return ss},ss.isAdjacentSegments=function(a,d){return 1===Math.abs(a-d)};var tu=function(a){function d(){a.call(this),this.events=new Zn,this.nOverlaps=null}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.prepareEvents=function(){Os.sort(this.events);for(var E=0;E<this.events.size();E++){var T=this.events.get(E);T.isDelete()&&T.getInsertEvent().setDeleteEventIndex(E)}},d.prototype.computeIntersections=function(){if(1===arguments.length){var E=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var T=0;T<this.events.size();T++){var Z=this.events.get(T);if(Z.isInsert()&&this.processOverlaps(T,Z.getDeleteEventIndex(),Z,E),E.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ss&&xe(arguments[0],so)&&xe(arguments[1],so)){var me=arguments[0],Ie=arguments[1],Xe=arguments[2];this.addEdges(me,me),this.addEdges(Ie,Ie),this.computeIntersections(Xe)}else if("boolean"==typeof arguments[2]&&xe(arguments[0],so)&&arguments[1]instanceof ss){var H=arguments[0],s=arguments[1];arguments[2]?this.addEdges(H,null):this.addEdges(H),this.computeIntersections(s)}},d.prototype.addEdge=function(E,T){for(var Z=E.getMonotoneChainEdge(),me=Z.getStartIndexes(),Ie=0;Ie<me.length-1;Ie++){var Xe=new _c(Z,Ie),H=new Cs(T,Z.getMinX(Ie),Xe);this.events.add(H),this.events.add(new Cs(Z.getMaxX(Ie),H))}},d.prototype.processOverlaps=function(E,T,Z,me){for(var Ie=Z.getObject(),Xe=E;Xe<T;Xe++){var H=this.events.get(Xe);if(H.isInsert()){var s=H.getObject();Z.isSameLabel(H)||(Ie.computeIntersections(s,me),this.nOverlaps++)}}},d.prototype.addEdges=function(){if(1===arguments.length)for(var E=arguments[0].iterator();E.hasNext();){var T=E.next();this.addEdge(T,T)}else if(2===arguments.length)for(var me=arguments[1],Ie=arguments[0].iterator();Ie.hasNext();){var Xe=Ie.next();this.addEdge(Xe,me)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(D2),Za=function(){this._min=j.POSITIVE_INFINITY,this._max=j.NEGATIVE_INFINITY},W2={NodeComparator:{configurable:!0}};Za.prototype.getMin=function(){return this._min},Za.prototype.intersects=function(a,d){return!(this._min>d||this._max<a)},Za.prototype.getMax=function(){return this._max},Za.prototype.toString=function(){return qe.toLineString(new X(this._min,0),new X(this._max,0))},Za.prototype.interfaces_=function(){return[]},Za.prototype.getClass=function(){return Za},W2.NodeComparator.get=function(){return Hi},Object.defineProperties(Za,W2);var Hi=function(){};Hi.prototype.compare=function(a,d){var Z=(a._min+a._max)/2,me=(d._min+d._max)/2;return Z<me?-1:Z>me?1:0},Hi.prototype.interfaces_=function(){return[oe]},Hi.prototype.getClass=function(){return Hi};var _r=function(a){function d(){a.call(this),this._item=null;var T=arguments[1],Z=arguments[2];this._min=arguments[0],this._max=T,this._item=Z}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.query=function(E,T,Z){if(!this.intersects(E,T))return null;Z.visitItem(this._item)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Za),h2=function(a){function d(){a.call(this),this._node1=null,this._node2=null;var T=arguments[1];this._node1=arguments[0],this._node2=T,this.buildExtent(this._node1,this._node2)}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.buildExtent=function(E,T){this._min=Math.min(E._min,T._min),this._max=Math.max(E._max,T._max)},d.prototype.query=function(E,T,Z){if(!this.intersects(E,T))return null;null!==this._node1&&this._node1.query(E,T,Z),null!==this._node2&&this._node2.query(E,T,Z)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Za),D1=function(){this._leaves=new Zn,this._root=null,this._level=0};D1.prototype.buildTree=function(){Os.sort(this._leaves,new Za.NodeComparator);for(var a=this._leaves,d=null,E=new Zn;;){if(this.buildLevel(a,E),1===E.size())return E.get(0);d=a,a=E,E=d}},D1.prototype.insert=function(a,d,E){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new _r(a,d,E))},D1.prototype.query=function(a,d,E){this.init(),this._root.query(a,d,E)},D1.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},D1.prototype.printNode=function(a){$e.out.println(qe.toLineString(new X(a._min,this._level),new X(a._max,this._level)))},D1.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},D1.prototype.buildLevel=function(a,d){this._level++,d.clear();for(var E=0;E<a.size();E+=2){var T=a.get(E);if(null===(E+1<a.size()?a.get(E):null))d.add(T);else{var Z=new h2(a.get(E),a.get(E+1));d.add(Z)}}},D1.prototype.interfaces_=function(){return[]},D1.prototype.getClass=function(){return D1};var Uc=function(){this._items=new Zn};Uc.prototype.visitItem=function(a){this._items.add(a)},Uc.prototype.getItems=function(){return this._items},Uc.prototype.interfaces_=function(){return[Zs]},Uc.prototype.getClass=function(){return Uc};var Hs=function(){this._index=null;var a=arguments[0];if(!xe(a,Wn))throw new F("Argument must be Polygonal");this._index=new De(a)},Pc={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Hs.prototype.locate=function(a){var d=new Qt(a),E=new ms(d);return this._index.query(a.y,a.y,E),d.getLocation()},Hs.prototype.interfaces_=function(){return[G1]},Hs.prototype.getClass=function(){return Hs},Pc.SegmentVisitor.get=function(){return ms},Pc.IntervalIndexedGeometry.get=function(){return De},Object.defineProperties(Hs,Pc);var ms=function(){this._counter=null,this._counter=arguments[0]};ms.prototype.visitItem=function(a){var d=a;this._counter.countSegment(d.getCoordinate(0),d.getCoordinate(1))},ms.prototype.interfaces_=function(){return[Zs]},ms.prototype.getClass=function(){return ms};var De=function(){this._index=new D1,this.init(arguments[0])};De.prototype.init=function(a){for(var d=ka.getLines(a).iterator();d.hasNext();){var E=d.next().getCoordinates();this.addLine(E)}},De.prototype.addLine=function(a){for(var d=1;d<a.length;d++){var E=new zi(a[d-1],a[d]),T=Math.min(E.p0.y,E.p1.y),Z=Math.max(E.p0.y,E.p1.y);this._index.insert(T,Z,E)}},De.prototype.query=function(){if(2===arguments.length){var a=arguments[0],d=arguments[1],E=new Uc;return this._index.query(a,d,E),E.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Ye=function(a){function d(){if(a.call(this),this._parentGeom=null,this._lineEdgeMap=new Kn,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ia,2===arguments.length){var T=arguments[1],Z=qn.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=T,this._boundaryNodeRule=Z,null!==T&&this.add(T)}else if(3===arguments.length){var Ie=arguments[1],Xe=arguments[2];this._argIndex=arguments[0],this._parentGeom=Ie,this._boundaryNodeRule=Xe,null!==Ie&&this.add(Ie)}}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.insertBoundaryPoint=function(E,T){var Z=this._nodes.addNode(T).getLabel(),me=1;Z.getLocation(E,Be.ON)===ne.BOUNDARY&&me++;var Ie=d.determineBoundary(this._boundaryNodeRule,me);Z.setLocation(E,Ie)},d.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var me=arguments[1],Ie=arguments[2],Xe=new ss(arguments[0],!0,!1);return Xe.setIsDoneIfProperInt(Ie),this.createEdgeSetIntersector().computeIntersections(this._edges,Xe,me||!(this._parentGeom instanceof ro||this._parentGeom instanceof Ii||this._parentGeom instanceof Po)),this.addSelfIntersectionNodes(this._argIndex),Xe}},d.prototype.computeSplitEdges=function(E){for(var T=this._edges.iterator();T.hasNext();)T.next().eiList.addSplitEdges(E)},d.prototype.computeEdgeIntersections=function(E,T,Z){var me=new ss(T,Z,!0);return me.setBoundaryNodes(this.getBoundaryNodes(),E.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,E._edges,me),me},d.prototype.getGeometry=function(){return this._parentGeom},d.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},d.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},d.prototype.addPoint=function(){if(arguments[0]instanceof Vi){var E=arguments[0].getCoordinate();this.insertPoint(this._argIndex,E,ne.INTERIOR)}else arguments[0]instanceof X&&this.insertPoint(this._argIndex,arguments[0],ne.INTERIOR)},d.prototype.addPolygon=function(E){this.addPolygonRing(E.getExteriorRing(),ne.EXTERIOR,ne.INTERIOR);for(var T=0;T<E.getNumInteriorRing();T++){var Z=E.getInteriorRingN(T);this.addPolygonRing(Z,ne.INTERIOR,ne.EXTERIOR)}},d.prototype.addEdge=function(E){this.insertEdge(E);var T=E.getCoordinates();this.insertPoint(this._argIndex,T[0],ne.BOUNDARY),this.insertPoint(this._argIndex,T[T.length-1],ne.BOUNDARY)},d.prototype.addLineString=function(E){var T=nt.removeRepeatedPoints(E.getCoordinates());if(T.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=T[0],null;var Z=new os(T,new cr(this._argIndex,ne.INTERIOR));this._lineEdgeMap.put(E,Z),this.insertEdge(Z),Ne.isTrue(T.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,T[0]),this.insertBoundaryPoint(this._argIndex,T[T.length-1])},d.prototype.getInvalidPoint=function(){return this._invalidPoint},d.prototype.getBoundaryPoints=function(){for(var E=this.getBoundaryNodes(),T=new Array(E.size()).fill(null),Z=0,me=E.iterator();me.hasNext();){var Ie=me.next();T[Z++]=Ie.getCoordinate().copy()}return T},d.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},d.prototype.addSelfIntersectionNode=function(E,T,Z){if(this.isBoundaryNode(E,T))return null;Z===ne.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(E,T):this.insertPoint(E,T,Z)},d.prototype.addPolygonRing=function(E,T,Z){if(E.isEmpty())return null;var me=nt.removeRepeatedPoints(E.getCoordinates());if(me.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=me[0],null;var Ie=T,Xe=Z;Gt.isCCW(me)&&(Ie=Z,Xe=T);var H=new os(me,new cr(this._argIndex,ne.BOUNDARY,Ie,Xe));this._lineEdgeMap.put(E,H),this.insertEdge(H),this.insertPoint(this._argIndex,me[0],ne.BOUNDARY)},d.prototype.insertPoint=function(E,T,Z){var me=this._nodes.addNode(T),Ie=me.getLabel();null===Ie?me._label=new cr(E,Z):Ie.setLocation(E,Z)},d.prototype.createEdgeSetIntersector=function(){return new tu},d.prototype.addSelfIntersectionNodes=function(E){for(var T=this._edges.iterator();T.hasNext();)for(var Z=T.next(),me=Z.getLabel().getLocation(E),Ie=Z.eiList.iterator();Ie.hasNext();){var Xe=Ie.next();this.addSelfIntersectionNode(E,Xe.coord,me)}},d.prototype.add=function(){if(1!==arguments.length)return a.prototype.add.apply(this,arguments);var E=arguments[0];if(E.isEmpty())return null;if(E instanceof Po&&(this._useBoundaryDeterminationRule=!1),E instanceof Ii)this.addPolygon(E);else if(E instanceof Ri)this.addLineString(E);else if(E instanceof Vi)this.addPoint(E);else if(E instanceof co)this.addCollection(E);else if(E instanceof Ke)this.addCollection(E);else if(E instanceof Po)this.addCollection(E);else{if(!(E instanceof Dn))throw new Error(E.getClass().getName());this.addCollection(E)}},d.prototype.addCollection=function(E){for(var T=0;T<E.getNumGeometries();T++){var Z=E.getGeometryN(T);this.add(Z)}},d.prototype.locate=function(E){return xe(this._parentGeom,Wn)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Hs(this._parentGeom)),this._areaPtLocator.locate(E)):this._ptLocator.locate(E,this._parentGeom)},d.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):a.prototype.findEdge.apply(this,arguments)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.determineBoundary=function(E,T){return E.isInBoundary(T)?ne.BOUNDARY:ne.INTERIOR},d}(lo),pt=function(){if(this._li=new gt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var a=arguments[0];this.setComputationPrecision(a.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ye(0,a)}else if(2===arguments.length){var d=arguments[0],E=arguments[1],T=qn.OGC_SFS_BOUNDARY_RULE;d.getPrecisionModel().compareTo(E.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(E.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ye(0,d,T),this._arg[1]=new Ye(1,E,T)}else if(3===arguments.length){var Z=arguments[0],me=arguments[1],Ie=arguments[2];Z.getPrecisionModel().compareTo(me.getPrecisionModel())>=0?this.setComputationPrecision(Z.getPrecisionModel()):this.setComputationPrecision(me.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ye(0,Z,Ie),this._arg[1]=new Ye(1,me,Ie)}};pt.prototype.getArgGeometry=function(a){return this._arg[a].getGeometry()},pt.prototype.setComputationPrecision=function(a){this._resultPrecisionModel=a,this._li.setPrecisionModel(this._resultPrecisionModel)},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var ct=function(){};ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct},ct.map=function(){if(arguments[0]instanceof an&&xe(arguments[1],ct.MapOp)){for(var a=arguments[0],d=arguments[1],E=new Zn,T=0;T<a.getNumGeometries();T++){var Z=d.map(a.getGeometryN(T));null!==Z&&E.add(Z)}return a.getFactory().buildGeometry(E)}if(xe(arguments[0],ji)&&xe(arguments[1],ct.MapOp)){for(var me=arguments[0],Ie=arguments[1],Xe=new Zn,H=me.iterator();H.hasNext();){var s=H.next(),C=Ie.map(s);null!==C&&Xe.add(C)}return Xe}},ct.MapOp=function(){};var Mt=function(a){function d(){var E=arguments[0];a.call(this,E,arguments[1]),this._ptLocator=new Ia,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Pa,this._resultPolyList=new Zn,this._resultLineList=new Zn,this._resultPointList=new Zn,this._graph=new lo(new Bc),this._geomFact=E.getFactory()}return a&&(d.__proto__=a),(d.prototype=Object.create(a&&a.prototype)).constructor=d,d.prototype.insertUniqueEdge=function(E){var T=this._edgeList.findEqualEdge(E);if(null!==T){var Z=T.getLabel(),me=E.getLabel();T.isPointwiseEqual(E)||(me=new cr(E.getLabel())).flip();var Ie=T.getDepth();Ie.isNull()&&Ie.add(Z),Ie.add(me),Z.merge(me)}else this._edgeList.add(E)},d.prototype.getGraph=function(){return this._graph},d.prototype.cancelDuplicateResultEdges=function(){for(var E=this._graph.getEdgeEnds().iterator();E.hasNext();){var T=E.next(),Z=T.getSym();T.isInResult()&&Z.isInResult()&&(T.setInResult(!1),Z.setInResult(!1))}},d.prototype.isCoveredByLA=function(E){return!!this.isCovered(E,this._resultLineList)||!!this.isCovered(E,this._resultPolyList)},d.prototype.computeGeometry=function(E,T,Z,me){var Ie=new Zn;return Ie.addAll(E),Ie.addAll(T),Ie.addAll(Z),Ie.isEmpty()?d.createEmptyResult(me,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(Ie)},d.prototype.mergeSymLabels=function(){for(var E=this._graph.getNodes().iterator();E.hasNext();)E.next().getEdges().mergeSymLabels()},d.prototype.isCovered=function(E,T){for(var Z=T.iterator();Z.hasNext();){var me=Z.next();if(this._ptLocator.locate(E,me)!==ne.EXTERIOR)return!0}return!1},d.prototype.replaceCollapsedEdges=function(){for(var E=new Zn,T=this._edgeList.iterator();T.hasNext();){var Z=T.next();Z.isCollapsed()&&(T.remove(),E.add(Z.getCollapsedEdge()))}this._edgeList.addAll(E)},d.prototype.updateNodeLabelling=function(){for(var E=this._graph.getNodes().iterator();E.hasNext();){var T=E.next(),Z=T.getEdges().getLabel();T.getLabel().merge(Z)}},d.prototype.getResultGeometry=function(E){return this.computeOverlay(E),this._resultGeom},d.prototype.insertUniqueEdges=function(E){for(var T=E.iterator();T.hasNext();){var Z=T.next();this.insertUniqueEdge(Z)}},d.prototype.computeOverlay=function(E){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var T=new Zn;this._arg[0].computeSplitEdges(T),this._arg[1].computeSplitEdges(T),this.insertUniqueEdges(T),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ga.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(E),this.cancelDuplicateResultEdges();var Z=new aa(this._geomFact);Z.add(this._graph),this._resultPolyList=Z.getPolygons();var me=new Ta(this,this._geomFact,this._ptLocator);this._resultLineList=me.build(E);var Ie=new Ya(this,this._geomFact,this._ptLocator);this._resultPointList=Ie.build(E),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,E)},d.prototype.labelIncompleteNode=function(E,T){var Z=this._ptLocator.locate(E.getCoordinate(),this._arg[T].getGeometry());E.getLabel().setLocation(T,Z)},d.prototype.copyPoints=function(E){for(var T=this._arg[E].getNodeIterator();T.hasNext();){var Z=T.next();this._graph.addNode(Z.getCoordinate()).setLabel(E,Z.getLabel().getLocation(E))}},d.prototype.findResultAreaEdges=function(E){for(var T=this._graph.getEdgeEnds().iterator();T.hasNext();){var Z=T.next(),me=Z.getLabel();me.isArea()&&!Z.isInteriorAreaEdge()&&d.isResultOfOp(me.getLocation(0,Be.RIGHT),me.getLocation(1,Be.RIGHT),E)&&Z.setInResult(!0)}},d.prototype.computeLabelsFromDepths=function(){for(var E=this._edgeList.iterator();E.hasNext();){var T=E.next(),Z=T.getLabel(),me=T.getDepth();if(!me.isNull()){me.normalize();for(var Ie=0;Ie<2;Ie++)Z.isNull(Ie)||!Z.isArea()||me.isNull(Ie)||(0===me.getDelta(Ie)?Z.toLine(Ie):(Ne.isTrue(!me.isNull(Ie,Be.LEFT),"depth of LEFT side has not been initialized"),Z.setLocation(Ie,Be.LEFT,me.getLocation(Ie,Be.LEFT)),Ne.isTrue(!me.isNull(Ie,Be.RIGHT),"depth of RIGHT side has not been initialized"),Z.setLocation(Ie,Be.RIGHT,me.getLocation(Ie,Be.RIGHT))))}}},d.prototype.computeLabelling=function(){for(var E=this._graph.getNodes().iterator();E.hasNext();)E.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},d.prototype.labelIncompleteNodes=function(){for(var E=this._graph.getNodes().iterator();E.hasNext();){var T=E.next(),Z=T.getLabel();T.isIsolated()&&(Z.isNull(0)?this.labelIncompleteNode(T,0):this.labelIncompleteNode(T,1)),T.getEdges().updateLabelling(Z)}},d.prototype.isCoveredByA=function(E){return!!this.isCovered(E,this._resultPolyList)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(pt);Mt.overlayOp=function(a,d,E){return new Mt(a,d).getResultGeometry(E)},Mt.intersection=function(a,d){if(a.isEmpty()||d.isEmpty())return Mt.createEmptyResult(Mt.INTERSECTION,a,d,a.getFactory());if(a.isGeometryCollection()){var E=d;return d2.map(a,{interfaces_:function(){return[ct.MapOp]},map:function(T){return T.intersection(E)}})}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(d),Wr.overlayOp(a,d,Mt.INTERSECTION)},Mt.symDifference=function(a,d){if(a.isEmpty()||d.isEmpty()){if(a.isEmpty()&&d.isEmpty())return Mt.createEmptyResult(Mt.SYMDIFFERENCE,a,d,a.getFactory());if(a.isEmpty())return d.copy();if(d.isEmpty())return a.copy()}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(d),Wr.overlayOp(a,d,Mt.SYMDIFFERENCE)},Mt.resultDimension=function(a,d,E){var T=d.getDimension(),Z=E.getDimension(),me=-1;switch(a){case Mt.INTERSECTION:me=Math.min(T,Z);break;case Mt.UNION:me=Math.max(T,Z);break;case Mt.DIFFERENCE:me=T;break;case Mt.SYMDIFFERENCE:me=Math.max(T,Z)}return me},Mt.createEmptyResult=function(a,d,E,T){var Z=null;switch(Mt.resultDimension(a,d,E)){case-1:Z=T.createGeometryCollection(new Array(0).fill(null));break;case 0:Z=T.createPoint();break;case 1:Z=T.createLineString();break;case 2:Z=T.createPolygon()}return Z},Mt.difference=function(a,d){return a.isEmpty()?Mt.createEmptyResult(Mt.DIFFERENCE,a,d,a.getFactory()):d.isEmpty()?a.copy():(a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(d),Wr.overlayOp(a,d,Mt.DIFFERENCE))},Mt.isResultOfOp=function(){if(2===arguments.length){var a=arguments[0],d=arguments[1],E=a.getLocation(0),T=a.getLocation(1);return Mt.isResultOfOp(E,T,d)}if(3===arguments.length){var Z=arguments[0],me=arguments[1];switch(Z===ne.BOUNDARY&&(Z=ne.INTERIOR),me===ne.BOUNDARY&&(me=ne.INTERIOR),arguments[2]){case Mt.INTERSECTION:return Z===ne.INTERIOR&&me===ne.INTERIOR;case Mt.UNION:return Z===ne.INTERIOR||me===ne.INTERIOR;case Mt.DIFFERENCE:return Z===ne.INTERIOR&&me!==ne.INTERIOR;case Mt.SYMDIFFERENCE:return Z===ne.INTERIOR&&me!==ne.INTERIOR||Z!==ne.INTERIOR&&me===ne.INTERIOR}return!1}},Mt.INTERSECTION=1,Mt.UNION=2,Mt.DIFFERENCE=3,Mt.SYMDIFFERENCE=4;var Vt=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ia,this._seg=new zi;var a=arguments[0],d=arguments[1];this._g=a,this._boundaryDistanceTolerance=d,this._linework=this.extractLinework(a)};Vt.prototype.isWithinToleranceOfBoundary=function(a){for(var d=0;d<this._linework.getNumGeometries();d++)for(var E=this._linework.getGeometryN(d).getCoordinateSequence(),T=0;T<E.size()-1;T++)if(E.getCoordinate(T,this._seg.p0),E.getCoordinate(T+1,this._seg.p1),this._seg.distance(a)<=this._boundaryDistanceTolerance)return!0;return!1},Vt.prototype.getLocation=function(a){return this.isWithinToleranceOfBoundary(a)?ne.BOUNDARY:this._ptLocator.locate(a,this._g)},Vt.prototype.extractLinework=function(a){var d=new hn;a.apply(d);var E=d.getLinework(),T=Ut.toLineStringArray(E);return a.getFactory().createMultiLineString(T)},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var hn=function(){this._linework=null,this._linework=new Zn};hn.prototype.getLinework=function(){return this._linework},hn.prototype.filter=function(a){if(a instanceof Ii){var d=a;this._linework.add(d.getExteriorRing());for(var E=0;E<d.getNumInteriorRing();E++)this._linework.add(d.getInteriorRingN(E))}},hn.prototype.interfaces_=function(){return[jn]},hn.prototype.getClass=function(){return hn};var En=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};En.prototype.extractPoints=function(a,d,E){for(var T=a.getCoordinates(),Z=0;Z<T.length-1;Z++)this.computeOffsetPoints(T[Z],T[Z+1],d,E)},En.prototype.setSidesToGenerate=function(a,d){this._doLeft=a,this._doRight=d},En.prototype.getPoints=function(a){for(var d=new Zn,E=ka.getLines(this._g).iterator();E.hasNext();){var T=E.next();this.extractPoints(T,a,d)}return d},En.prototype.computeOffsetPoints=function(a,d,E,T){var Z=d.x-a.x,me=d.y-a.y,Ie=Math.sqrt(Z*Z+me*me),Xe=E*Z/Ie,H=E*me/Ie,s=(d.x+a.x)/2,C=(d.y+a.y)/2;if(this._doLeft){var N=new X(s-H,C+Xe);T.add(N)}if(this._doRight){var W=new X(s+H,C-Xe);T.add(W)}},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En};var kn=function a(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=a.TOLERANCE,this._testCoords=new Zn;var d=arguments[0],E=arguments[1],T=arguments[2];this._boundaryDistanceTolerance=a.computeBoundaryDistanceTolerance(d,E),this._geom=[d,E,T],this._locFinder=[new Vt(this._geom[0],this._boundaryDistanceTolerance),new Vt(this._geom[1],this._boundaryDistanceTolerance),new Vt(this._geom[2],this._boundaryDistanceTolerance)]},Xn={TOLERANCE:{configurable:!0}};kn.prototype.reportResult=function(a,d,E){$e.out.println("Overlay result invalid - A:"+ne.toLocationSymbol(d[0])+" B:"+ne.toLocationSymbol(d[1])+" expected:"+(E?"i":"e")+" actual:"+ne.toLocationSymbol(d[2]))},kn.prototype.isValid=function(a){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(a)},kn.prototype.checkValid=function(){if(1===arguments.length){for(var a=arguments[0],d=0;d<this._testCoords.size();d++){var E=this._testCoords.get(d);if(!this.checkValid(a,E))return this._invalidLocation=E,!1}return!0}if(2===arguments.length){var T=arguments[0],Z=arguments[1];return this._location[0]=this._locFinder[0].getLocation(Z),this._location[1]=this._locFinder[1].getLocation(Z),this._location[2]=this._locFinder[2].getLocation(Z),!!kn.hasLocation(this._location,ne.BOUNDARY)||this.isValidResult(T,this._location)}},kn.prototype.addTestPts=function(a){var d=new En(a);this._testCoords.addAll(d.getPoints(5*this._boundaryDistanceTolerance))},kn.prototype.isValidResult=function(a,d){var E=Mt.isResultOfOp(d[0],d[1],a),T=!(E^d[2]===ne.INTERIOR);return T||this.reportResult(a,d,E),T},kn.prototype.getInvalidLocation=function(){return this._invalidLocation},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.hasLocation=function(a,d){for(var E=0;E<3;E++)if(a[E]===d)return!0;return!1},kn.computeBoundaryDistanceTolerance=function(a,d){return Math.min(Eo.computeSizeBasedSnapTolerance(a),Eo.computeSizeBasedSnapTolerance(d))},kn.isValid=function(a,d,E,T){return new kn(a,d,T).isValid(E)},Xn.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(kn,Xn);var pn=function a(d){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=a.extractFactory(d),this._inputGeoms=d};pn.prototype.extractElements=function(a,d){if(null===a)return null;for(var E=0;E<a.getNumGeometries();E++){var T=a.getGeometryN(E);this._skipEmpty&&T.isEmpty()||d.add(T)}},pn.prototype.combine=function(){for(var a=new Zn,d=this._inputGeoms.iterator();d.hasNext();){var E=d.next();this.extractElements(E,a)}return 0===a.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(a)},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn},pn.combine=function(){return 1===arguments.length?new pn(arguments[0]).combine():2===arguments.length?new pn(pn.createList(arguments[0],arguments[1])).combine():3===arguments.length?new pn(pn.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},pn.extractFactory=function(a){return a.isEmpty()?null:a.iterator().next().getFactory()},pn.createList=function(){if(2===arguments.length){var a=arguments[0],d=arguments[1],E=new Zn;return E.add(a),E.add(d),E}if(3===arguments.length){var T=arguments[0],Z=arguments[1],me=arguments[2],Ie=new Zn;return Ie.add(T),Ie.add(Z),Ie.add(me),Ie}};var An=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new Zn)},Tn={STRTREE_NODE_CAPACITY:{configurable:!0}};An.prototype.reduceToGeometries=function(a){for(var d=new Zn,E=a.iterator();E.hasNext();){var T=E.next(),Z=null;xe(T,so)?Z=this.unionTree(T):T instanceof an&&(Z=T),d.add(Z)}return d},An.prototype.extractByEnvelope=function(a,d,E){for(var T=new Zn,Z=0;Z<d.getNumGeometries();Z++){var me=d.getGeometryN(Z);me.getEnvelopeInternal().intersects(a)?T.add(me):E.add(me)}return this._geomFactory.buildGeometry(T)},An.prototype.unionOptimized=function(a,d){var E=a.getEnvelopeInternal(),T=d.getEnvelopeInternal();if(!E.intersects(T))return pn.combine(a,d);if(a.getNumGeometries()<=1&&d.getNumGeometries()<=1)return this.unionActual(a,d);var Z=E.intersection(T);return this.unionUsingEnvelopeIntersection(a,d,Z)},An.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var a=new Sc(An.STRTREE_NODE_CAPACITY),d=this._inputPolys.iterator();d.hasNext();){var E=d.next();a.insert(E.getEnvelopeInternal(),E)}this._inputPolys=null;var T=a.itemsTree();return this.unionTree(T)},An.prototype.binaryUnion=function(){if(1===arguments.length){var a=arguments[0];return this.binaryUnion(a,0,a.size())}if(3===arguments.length){var d=arguments[0],E=arguments[1],T=arguments[2];if(T-E<=1){var Z=An.getGeometry(d,E);return this.unionSafe(Z,null)}if(T-E==2)return this.unionSafe(An.getGeometry(d,E),An.getGeometry(d,E+1));var me=Math.trunc((T+E)/2),Ie=this.binaryUnion(d,E,me),Xe=this.binaryUnion(d,me,T);return this.unionSafe(Ie,Xe)}},An.prototype.repeatedUnion=function(a){for(var d=null,E=a.iterator();E.hasNext();){var T=E.next();d=null===d?T.copy():d.union(T)}return d},An.prototype.unionSafe=function(a,d){return null===a&&null===d?null:null===a?d.copy():null===d?a.copy():this.unionOptimized(a,d)},An.prototype.unionActual=function(a,d){return An.restrictToPolygons(a.union(d))},An.prototype.unionTree=function(a){var d=this.reduceToGeometries(a);return this.binaryUnion(d)},An.prototype.unionUsingEnvelopeIntersection=function(a,d,E){var T=new Zn,Z=this.extractByEnvelope(E,a,T),me=this.extractByEnvelope(E,d,T),Ie=this.unionActual(Z,me);return T.add(Ie),pn.combine(T)},An.prototype.bufferUnion=function(){if(1===arguments.length){var a=arguments[0];return a.get(0).getFactory().buildGeometry(a).buffer(0)}if(2===arguments.length){var d=arguments[0],E=arguments[1];return d.getFactory().createGeometryCollection([d,E]).buffer(0)}},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},An.restrictToPolygons=function(a){if(xe(a,Wn))return a;var d=vo.getPolygons(a);return 1===d.size()?d.get(0):a.getFactory().createMultiPolygon(Ut.toPolygonArray(d))},An.getGeometry=function(a,d){return d>=a.size()?null:a.get(d)},An.union=function(a){return new An(a).union()},Tn.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(An,Tn);var Un=function(){};Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un},Un.union=function(a,d){if(a.isEmpty()||d.isEmpty()){if(a.isEmpty()&&d.isEmpty())return Mt.createEmptyResult(Mt.UNION,a,d,a.getFactory());if(a.isEmpty())return d.copy();if(d.isEmpty())return a.copy()}return a.checkNotGeometryCollection(a),a.checkNotGeometryCollection(d),Wr.overlayOp(a,d,Mt.UNION)},w.GeoJSONReader=Ui,w.GeoJSONWriter=nr,w.OverlayOp=Mt,w.UnionOp=Un,w.BufferOp=fo,Object.defineProperty(w,"__esModule",{value:!0})}(y)},1103:(Ae,y,w)=>{"use strict";w.r(y),w.d(y,{NIL:()=>Pe,parse:()=>F,stringify:()=>_,v1:()=>B,v3:()=>ae,v4:()=>Me,v5:()=>He,validate:()=>g,version:()=>ht});var k,G=new Uint8Array(16);function I(){if(!k&&!(k=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k(G)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,g=function h(Re){return"string"==typeof Re&&u.test(Re)};for(var v=[],m=0;m<256;++m)v.push((m+256).toString(16).substr(1));const _=function f(Re){var tt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,it=(v[Re[tt+0]]+v[Re[tt+1]]+v[Re[tt+2]]+v[Re[tt+3]]+"-"+v[Re[tt+4]]+v[Re[tt+5]]+"-"+v[Re[tt+6]]+v[Re[tt+7]]+"-"+v[Re[tt+8]]+v[Re[tt+9]]+"-"+v[Re[tt+10]]+v[Re[tt+11]]+v[Re[tt+12]]+v[Re[tt+13]]+v[Re[tt+14]]+v[Re[tt+15]]).toLowerCase();if(!g(it))throw TypeError("Stringified UUID is invalid");return it};var S,M,D=0,R=0;const B=function V(Re,tt,it){var qe=tt&&it||0,Oe=tt||new Array(16),Te=(Re=Re||{}).node||S,Ne=void 0!==Re.clockseq?Re.clockseq:M;if(null==Te||null==Ne){var rt=Re.random||(Re.rng||I)();null==Te&&(Te=S=[1|rt[0],rt[1],rt[2],rt[3],rt[4],rt[5]]),null==Ne&&(Ne=M=16383&(rt[6]<<8|rt[7]))}var xt=void 0!==Re.msecs?Re.msecs:Date.now(),gt=void 0!==Re.nsecs?Re.nsecs:R+1,on=xt-D+(gt-R)/1e4;if(on<0&&void 0===Re.clockseq&&(Ne=Ne+1&16383),(on<0||xt>D)&&void 0===Re.nsecs&&(gt=0),gt>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");D=xt,R=gt,M=Ne;var Qt=(1e4*(268435455&(xt+=122192928e5))+gt)%4294967296;Oe[qe++]=Qt>>>24&255,Oe[qe++]=Qt>>>16&255,Oe[qe++]=Qt>>>8&255,Oe[qe++]=255&Qt;var Gt=xt/4294967296*1e4&268435455;Oe[qe++]=Gt>>>8&255,Oe[qe++]=255&Gt,Oe[qe++]=Gt>>>24&15|16,Oe[qe++]=Gt>>>16&255,Oe[qe++]=Ne>>>8|128,Oe[qe++]=255&Ne;for(var Vn=0;Vn<6;++Vn)Oe[qe+Vn]=Te[Vn];return tt||_(Oe)},F=function U(Re){if(!g(Re))throw TypeError("Invalid UUID");var tt,it=new Uint8Array(16);return it[0]=(tt=parseInt(Re.slice(0,8),16))>>>24,it[1]=tt>>>16&255,it[2]=tt>>>8&255,it[3]=255&tt,it[4]=(tt=parseInt(Re.slice(9,13),16))>>>8,it[5]=255&tt,it[6]=(tt=parseInt(Re.slice(14,18),16))>>>8,it[7]=255&tt,it[8]=(tt=parseInt(Re.slice(19,23),16))>>>8,it[9]=255&tt,it[10]=(tt=parseInt(Re.slice(24,36),16))/1099511627776&255,it[11]=tt/4294967296&255,it[12]=tt>>>24&255,it[13]=tt>>>16&255,it[14]=tt>>>8&255,it[15]=255&tt,it};function $(Re,tt,it){function qe(Oe,Te,Ne,rt){if("string"==typeof Oe&&(Oe=function j(Re){Re=unescape(encodeURIComponent(Re));for(var tt=[],it=0;it<Re.length;++it)tt.push(Re.charCodeAt(it));return tt}(Oe)),"string"==typeof Te&&(Te=F(Te)),16!==Te.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var xt=new Uint8Array(16+Oe.length);if(xt.set(Te),xt.set(Oe,Te.length),(xt=it(xt))[6]=15&xt[6]|tt,xt[8]=63&xt[8]|128,Ne){rt=rt||0;for(var gt=0;gt<16;++gt)Ne[rt+gt]=xt[gt];return Ne}return _(xt)}try{qe.name=Re}catch{}return qe.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",qe.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",qe}function ie(Re){return 14+(Re+64>>>9<<4)+1}function ne(Re,tt){var it=(65535&Re)+(65535&tt);return(Re>>16)+(tt>>16)+(it>>16)<<16|65535&it}function xe(Re,tt,it,qe,Oe,Te){return ne(function Ce(Re,tt){return Re<<tt|Re>>>32-tt}(ne(ne(tt,Re),ne(qe,Te)),Oe),it)}function ue(Re,tt,it,qe,Oe,Te,Ne){return xe(tt&it|~tt&qe,Re,tt,Oe,Te,Ne)}function fe(Re,tt,it,qe,Oe,Te,Ne){return xe(tt&qe|it&~qe,Re,tt,Oe,Te,Ne)}function ee(Re,tt,it,qe,Oe,Te,Ne){return xe(tt^it^qe,Re,tt,Oe,Te,Ne)}function de(Re,tt,it,qe,Oe,Te,Ne){return xe(it^(tt|~qe),Re,tt,Oe,Te,Ne)}const ae=$("v3",48,function oe(Re){if("string"==typeof Re){var tt=unescape(encodeURIComponent(Re));Re=new Uint8Array(tt.length);for(var it=0;it<tt.length;++it)Re[it]=tt.charCodeAt(it)}return function X(Re){for(var tt=[],it=32*Re.length,qe="0123456789abcdef",Oe=0;Oe<it;Oe+=8){var Te=Re[Oe>>5]>>>Oe%32&255,Ne=parseInt(qe.charAt(Te>>>4&15)+qe.charAt(15&Te),16);tt.push(Ne)}return tt}(function q(Re,tt){Re[tt>>5]|=128<<tt%32,Re[ie(tt)-1]=tt;for(var it=1732584193,qe=-271733879,Oe=-1732584194,Te=271733878,Ne=0;Ne<Re.length;Ne+=16){var rt=it,xt=qe,gt=Oe,on=Te;it=ue(it,qe,Oe,Te,Re[Ne],7,-680876936),Te=ue(Te,it,qe,Oe,Re[Ne+1],12,-389564586),Oe=ue(Oe,Te,it,qe,Re[Ne+2],17,606105819),qe=ue(qe,Oe,Te,it,Re[Ne+3],22,-1044525330),it=ue(it,qe,Oe,Te,Re[Ne+4],7,-176418897),Te=ue(Te,it,qe,Oe,Re[Ne+5],12,1200080426),Oe=ue(Oe,Te,it,qe,Re[Ne+6],17,-1473231341),qe=ue(qe,Oe,Te,it,Re[Ne+7],22,-45705983),it=ue(it,qe,Oe,Te,Re[Ne+8],7,1770035416),Te=ue(Te,it,qe,Oe,Re[Ne+9],12,-1958414417),Oe=ue(Oe,Te,it,qe,Re[Ne+10],17,-42063),qe=ue(qe,Oe,Te,it,Re[Ne+11],22,-1990404162),it=ue(it,qe,Oe,Te,Re[Ne+12],7,1804603682),Te=ue(Te,it,qe,Oe,Re[Ne+13],12,-40341101),Oe=ue(Oe,Te,it,qe,Re[Ne+14],17,-1502002290),it=fe(it,qe=ue(qe,Oe,Te,it,Re[Ne+15],22,1236535329),Oe,Te,Re[Ne+1],5,-165796510),Te=fe(Te,it,qe,Oe,Re[Ne+6],9,-1069501632),Oe=fe(Oe,Te,it,qe,Re[Ne+11],14,643717713),qe=fe(qe,Oe,Te,it,Re[Ne],20,-373897302),it=fe(it,qe,Oe,Te,Re[Ne+5],5,-701558691),Te=fe(Te,it,qe,Oe,Re[Ne+10],9,38016083),Oe=fe(Oe,Te,it,qe,Re[Ne+15],14,-660478335),qe=fe(qe,Oe,Te,it,Re[Ne+4],20,-405537848),it=fe(it,qe,Oe,Te,Re[Ne+9],5,568446438),Te=fe(Te,it,qe,Oe,Re[Ne+14],9,-1019803690),Oe=fe(Oe,Te,it,qe,Re[Ne+3],14,-187363961),qe=fe(qe,Oe,Te,it,Re[Ne+8],20,1163531501),it=fe(it,qe,Oe,Te,Re[Ne+13],5,-1444681467),Te=fe(Te,it,qe,Oe,Re[Ne+2],9,-51403784),Oe=fe(Oe,Te,it,qe,Re[Ne+7],14,1735328473),it=ee(it,qe=fe(qe,Oe,Te,it,Re[Ne+12],20,-1926607734),Oe,Te,Re[Ne+5],4,-378558),Te=ee(Te,it,qe,Oe,Re[Ne+8],11,-2022574463),Oe=ee(Oe,Te,it,qe,Re[Ne+11],16,1839030562),qe=ee(qe,Oe,Te,it,Re[Ne+14],23,-35309556),it=ee(it,qe,Oe,Te,Re[Ne+1],4,-1530992060),Te=ee(Te,it,qe,Oe,Re[Ne+4],11,1272893353),Oe=ee(Oe,Te,it,qe,Re[Ne+7],16,-155497632),qe=ee(qe,Oe,Te,it,Re[Ne+10],23,-1094730640),it=ee(it,qe,Oe,Te,Re[Ne+13],4,681279174),Te=ee(Te,it,qe,Oe,Re[Ne],11,-358537222),Oe=ee(Oe,Te,it,qe,Re[Ne+3],16,-722521979),qe=ee(qe,Oe,Te,it,Re[Ne+6],23,76029189),it=ee(it,qe,Oe,Te,Re[Ne+9],4,-640364487),Te=ee(Te,it,qe,Oe,Re[Ne+12],11,-421815835),Oe=ee(Oe,Te,it,qe,Re[Ne+15],16,530742520),it=de(it,qe=ee(qe,Oe,Te,it,Re[Ne+2],23,-995338651),Oe,Te,Re[Ne],6,-198630844),Te=de(Te,it,qe,Oe,Re[Ne+7],10,1126891415),Oe=de(Oe,Te,it,qe,Re[Ne+14],15,-1416354905),qe=de(qe,Oe,Te,it,Re[Ne+5],21,-57434055),it=de(it,qe,Oe,Te,Re[Ne+12],6,1700485571),Te=de(Te,it,qe,Oe,Re[Ne+3],10,-1894986606),Oe=de(Oe,Te,it,qe,Re[Ne+10],15,-1051523),qe=de(qe,Oe,Te,it,Re[Ne+1],21,-2054922799),it=de(it,qe,Oe,Te,Re[Ne+8],6,1873313359),Te=de(Te,it,qe,Oe,Re[Ne+15],10,-30611744),Oe=de(Oe,Te,it,qe,Re[Ne+6],15,-1560198380),qe=de(qe,Oe,Te,it,Re[Ne+13],21,1309151649),it=de(it,qe,Oe,Te,Re[Ne+4],6,-145523070),Te=de(Te,it,qe,Oe,Re[Ne+11],10,-1120210379),Oe=de(Oe,Te,it,qe,Re[Ne+2],15,718787259),qe=de(qe,Oe,Te,it,Re[Ne+9],21,-343485551),it=ne(it,rt),qe=ne(qe,xt),Oe=ne(Oe,gt),Te=ne(Te,on)}return[it,qe,Oe,Te]}(function se(Re){if(0===Re.length)return[];for(var tt=8*Re.length,it=new Uint32Array(ie(tt)),qe=0;qe<tt;qe+=8)it[qe>>5]|=(255&Re[qe/8])<<qe%32;return it}(Re),8*Re.length))}),Me=function ye(Re,tt,it){var qe=(Re=Re||{}).random||(Re.rng||I)();if(qe[6]=15&qe[6]|64,qe[8]=63&qe[8]|128,tt){it=it||0;for(var Oe=0;Oe<16;++Oe)tt[it+Oe]=qe[Oe];return tt}return _(qe)};function _e(Re,tt,it,qe){switch(Re){case 0:return tt&it^~tt&qe;case 1:case 3:return tt^it^qe;case 2:return tt&it^tt&qe^it&qe}}function Fe(Re,tt){return Re<<tt|Re>>>32-tt}const He=$("v5",80,function Ue(Re){var tt=[1518500249,1859775393,2400959708,3395469782],it=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof Re){var qe=unescape(encodeURIComponent(Re));Re=[];for(var Oe=0;Oe<qe.length;++Oe)Re.push(qe.charCodeAt(Oe))}else Array.isArray(Re)||(Re=Array.prototype.slice.call(Re));Re.push(128);for(var Ne=Math.ceil((Re.length/4+2)/16),rt=new Array(Ne),xt=0;xt<Ne;++xt){for(var gt=new Uint32Array(16),on=0;on<16;++on)gt[on]=Re[64*xt+4*on]<<24|Re[64*xt+4*on+1]<<16|Re[64*xt+4*on+2]<<8|Re[64*xt+4*on+3];rt[xt]=gt}rt[Ne-1][14]=8*(Re.length-1)/Math.pow(2,32),rt[Ne-1][14]=Math.floor(rt[Ne-1][14]),rt[Ne-1][15]=8*(Re.length-1)&4294967295;for(var Qt=0;Qt<Ne;++Qt){for(var Gt=new Uint32Array(80),Vn=0;Vn<16;++Vn)Gt[Vn]=rt[Qt][Vn];for(var un=16;un<80;++un)Gt[un]=Fe(Gt[un-3]^Gt[un-8]^Gt[un-14]^Gt[un-16],1);for(var an=it[0],cn=it[1],_i=it[2],vi=it[3],qn=it[4],Pi=0;Pi<80;++Pi){var ci=Math.floor(Pi/20),Ei=Fe(an,5)+_e(ci,cn,_i,vi)+qn+tt[ci]+Gt[Pi]>>>0;qn=vi,vi=_i,_i=Fe(cn,30)>>>0,cn=an,an=Ei}it[0]=it[0]+an>>>0,it[1]=it[1]+cn>>>0,it[2]=it[2]+_i>>>0,it[3]=it[3]+vi>>>0,it[4]=it[4]+qn>>>0}return[it[0]>>24&255,it[0]>>16&255,it[0]>>8&255,255&it[0],it[1]>>24&255,it[1]>>16&255,it[1]>>8&255,255&it[1],it[2]>>24&255,it[2]>>16&255,it[2]>>8&255,255&it[2],it[3]>>24&255,it[3]>>16&255,it[3]>>8&255,255&it[3],it[4]>>24&255,it[4]>>16&255,it[4]>>8&255,255&it[4]]}),Pe="00000000-0000-0000-0000-000000000000",ht=function je(Re){if(!g(Re))throw TypeError("Invalid UUID");return parseInt(Re.substr(14,1),16)}},22529:Ae=>{Ae.exports={token:"PLACE YOUR TOKEN HERE",basepath:"/wayfinding",port:"6001",proximi_api:"https://api.proximi.fi",geo_version:"v5"}},15624:function(Ae){Ae.exports=function(){"use strict";var y,w,k;function G(u,h){if(y)if(w){var g="var sharedChunk = {}; ("+y+")(sharedChunk); ("+w+")(sharedChunk);",v={};y(v),k=h(v),typeof window<"u"&&(k.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}else w=h;else y=h}return G(0,function(u){function h(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var g=v;function v(p,l){this.x=p,this.y=l}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(p){return this.clone()._mult(p)},div:function(p){return this.clone()._div(p)},rotate:function(p){return this.clone()._rotate(p)},rotateAround:function(p,l){return this.clone()._rotateAround(p,l)},matMult:function(p){return this.clone()._matMult(p)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(p){return this.x===p.x&&this.y===p.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var l=p.x-this.x,b=p.y-this.y;return l*l+b*b},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith:function(p){return this.angleWithSep(p.x,p.y)},angleWithSep:function(p,l){return Math.atan2(this.x*l-this.y*p,this.x*p+this.y*l)},_matMult:function(p){var l=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=l,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(p){return this.x*=p,this.y*=p,this},_div:function(p){return this.x/=p,this.y/=p,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var p=this.y;return this.y=this.x,this.x=-p,this},_rotate:function(p){var l=Math.cos(p),b=Math.sin(p),L=b*this.x+l*this.y;return this.x=l*this.x-b*this.y,this.y=L,this},_rotateAround:function(p,l){var b=Math.cos(p),L=Math.sin(p),Y=l.y+L*(this.x-l.x)+b*(this.y-l.y);return this.x=l.x+b*(this.x-l.x)-L*(this.y-l.y),this.y=Y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(p){return p instanceof v?p:Array.isArray(p)?new v(p[0],p[1]):p};var m=h(g),f=_;function _(p,l,b,L){this.cx=3*p,this.bx=3*(b-p)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(L-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=p,this.p1y=l,this.p2x=b,this.p2y=L}_.prototype={sampleCurveX:function(p){return((this.ax*p+this.bx)*p+this.cx)*p},sampleCurveY:function(p){return((this.ay*p+this.by)*p+this.cy)*p},sampleCurveDerivativeX:function(p){return(3*this.ax*p+2*this.bx)*p+this.cx},solveCurveX:function(p,l){if(void 0===l&&(l=1e-6),p<0)return 0;if(p>1)return 1;for(var b=p,L=0;L<8;L++){var Y=this.sampleCurveX(b)-p;if(Math.abs(Y)<l)return b;var te=this.sampleCurveDerivativeX(b);if(Math.abs(te)<1e-6)break;b-=Y/te}var re=0,ve=1;for(b=p,L=0;L<20&&(Y=this.sampleCurveX(b),!(Math.abs(Y-p)<l));L++)p>Y?re=b:ve=b,b=.5*(ve-re)+re;return b},solve:function(p,l){return this.sampleCurveY(this.solveCurveX(p,l))}};var S=h(f);function M(p,l,b,L){const Y=new S(p,l,b,L);return function(te){return Y.solve(te)}}const D=M(.25,.1,.25,1);function R(p,l,b){return Math.min(b,Math.max(l,p))}function V(p,l,b){const L=b-l,Y=((p-l)%L+L)%L+l;return Y===l?b:Y}function B(p,...l){for(const b of l)for(const L in b)p[L]=b[L];return p}let U=1;function F(p,l,b){const L={};for(const Y in p)L[Y]=l.call(b||this,p[Y],Y,p);return L}function j(p,l,b){const L={};for(const Y in p)l.call(b||this,p[Y],Y,p)&&(L[Y]=p[Y]);return L}function P(p){return Array.isArray(p)?p.map(P):"object"==typeof p&&p?F(p,P):p}const Q={};function $(p){Q[p]||(typeof console<"u"&&console.warn(p),Q[p]=!0)}function oe(p,l,b){return(b.y-p.y)*(l.x-p.x)>(l.y-p.y)*(b.x-p.x)}function X(p){let l=0;for(let b,L,Y=0,te=p.length,re=te-1;Y<te;re=Y++)b=p[Y],L=p[re],l+=(L.x-b.x)*(b.y+L.y);return l}function ie(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let q=null;function se(p){if(null==q){const l=p.navigator?p.navigator.userAgent:null;q=!!p.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return q}function ne(p){return typeof ImageBitmap<"u"&&p instanceof ImageBitmap}const Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let xe,ue;const fe={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(p){const l=requestAnimationFrame(p);return{cancel:()=>cancelAnimationFrame(l)}},getImageData(p,l=0){return this.getImageCanvasContext(p).getImageData(-l,-l,p.width+2*l,p.height+2*l)},getImageCanvasContext(p){const l=window.document.createElement("canvas"),b=l.getContext("2d",{willReadFrequently:!0});if(!b)throw new Error("failed to create canvas 2d context");return l.width=p.width,l.height=p.height,b.drawImage(p,0,0,p.width,p.height),b},resolveURL:p=>(xe||(xe=document.createElement("a")),xe.href=p,xe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==ue&&(ue=matchMedia("(prefers-reduced-motion: reduce)")),ue.matches)}},ee={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class de extends Error{constructor(l,b,L,Y){super(`AJAXError: ${b} (${l}): ${L}`),this.status=l,this.statusText=b,this.url=L,this.body=Y}}const pe=ie()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,ce=p=>ee.REGISTERED_PROTOCOLS[p.substring(0,p.indexOf("://"))];function ae(p,l){const b=new AbortController,L=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:pe(),signal:b.signal});let Y=!1,te=!1;return"json"===p.type&&L.headers.set("Accept","application/json"),te||fetch(L).then(re=>{return re.ok?(ve=re,void("arrayBuffer"===p.type||"image"===p.type?ve.arrayBuffer():"json"===p.type?ve.json():ve.text()).then(ze=>{te||(Y=!0,l(null,ze,ve.headers.get("Cache-Control"),ve.headers.get("Expires")))}).catch(ze=>{te||l(new Error(ze.message))})):re.blob().then(ve=>l(new de(re.status,re.statusText,p.url,ve)));var ve}).catch(re=>{20!==re.code&&l(new Error(re.message))}),{cancel:()=>{te=!0,Y||b.abort()}}}const ye=function(p,l){if(/:\/\//.test(p.url)&&!/^https?:|^file:/.test(p.url)){if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,l);if(!ie())return(ce(p.url)||ae)(p,l)}if(!(/^file:/.test(b=p.url)||/^file:/.test(pe())&&!/^\w+:/.test(b))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ae(p,l);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,l,void 0,!0)}var b;return function(L,Y){const te=new XMLHttpRequest;te.open(L.method||"GET",L.url,!0),"arrayBuffer"!==L.type&&"image"!==L.type||(te.responseType="arraybuffer");for(const re in L.headers)te.setRequestHeader(re,L.headers[re]);return"json"===L.type&&(te.responseType="text",te.setRequestHeader("Accept","application/json")),te.withCredentials="include"===L.credentials,te.onerror=()=>{Y(new Error(te.statusText))},te.onload=()=>{if((te.status>=200&&te.status<300||0===te.status)&&null!==te.response){let re=te.response;if("json"===L.type)try{re=JSON.parse(te.response)}catch(ve){return Y(ve)}Y(null,re,te.getResponseHeader("Cache-Control"),te.getResponseHeader("Expires"))}else{const re=new Blob([te.response],{type:te.getResponseHeader("Content-Type")});Y(new de(te.status,te.statusText,L.url,re))}},te.send(L.body),{cancel:()=>te.abort()}}(p,l)},Me=function(p,l){return ye(B(p,{type:"arrayBuffer"}),l)};function _e(p){if(!p||p.indexOf("://")<=0||0===p.indexOf("data:image/")||0===p.indexOf("blob:"))return!0;const l=new URL(p),b=window.location;return l.protocol===b.protocol&&l.host===b.host}function Fe(p,l,b){b[p]&&-1!==b[p].indexOf(l)||(b[p]=b[p]||[],b[p].push(l))}function Ue(p,l,b){if(b&&b[p]){const L=b[p].indexOf(l);-1!==L&&b[p].splice(L,1)}}class Ge{constructor(l,b={}){B(this,b),this.type=l}}class $e extends Ge{constructor(l,b={}){super("error",B({error:l},b))}}class He{on(l,b){return this._listeners=this._listeners||{},Fe(l,b,this._listeners),this}off(l,b){return Ue(l,b,this._listeners),Ue(l,b,this._oneTimeListeners),this}once(l,b){return b?(this._oneTimeListeners=this._oneTimeListeners||{},Fe(l,b,this._oneTimeListeners),this):new Promise(L=>this.once(l,L))}fire(l,b){"string"==typeof l&&(l=new Ge(l,b||{}));const L=l.type;if(this.listens(L)){l.target=this;const Y=this._listeners&&this._listeners[L]?this._listeners[L].slice():[];for(const ve of Y)ve.call(this,l);const te=this._oneTimeListeners&&this._oneTimeListeners[L]?this._oneTimeListeners[L].slice():[];for(const ve of te)Ue(L,ve,this._oneTimeListeners),ve.call(this,l);const re=this._eventedParent;re&&(B(l,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),re.fire(l))}else l instanceof $e&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,b){return this._eventedParent=l,this._eventedParentData=b,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const je=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ht(p,l){const b={};for(const L in p)"ref"!==L&&(b[L]=p[L]);return je.forEach(L=>{L in l&&(b[L]=l[L])}),b}function Re(p,l){if(Array.isArray(p)){if(!Array.isArray(l)||p.length!==l.length)return!1;for(let b=0;b<p.length;b++)if(!Re(p[b],l[b]))return!1;return!0}if("object"==typeof p&&null!==p&&null!==l){if("object"!=typeof l||Object.keys(p).length!==Object.keys(l).length)return!1;for(const b in p)if(!Re(p[b],l[b]))return!1;return!0}return p===l}const tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function it(p,l,b){b.push({command:tt.addSource,args:[p,l[p]]})}function qe(p,l,b){l.push({command:tt.removeSource,args:[p]}),b[p]=!0}function Oe(p,l,b,L){qe(p,b,L),it(p,l,b)}function Te(p,l,b){let L;for(L in p[b])if(Object.prototype.hasOwnProperty.call(p[b],L)&&"data"!==L&&!Re(p[b][L],l[b][L]))return!1;for(L in l[b])if(Object.prototype.hasOwnProperty.call(l[b],L)&&"data"!==L&&!Re(p[b][L],l[b][L]))return!1;return!0}function Ne(p,l,b,L,Y,te){let re;for(re in l=l||{},p=p||{})Object.prototype.hasOwnProperty.call(p,re)&&(Re(p[re],l[re])||b.push({command:te,args:[L,re,l[re],Y]}));for(re in l)Object.prototype.hasOwnProperty.call(l,re)&&!Object.prototype.hasOwnProperty.call(p,re)&&(Re(p[re],l[re])||b.push({command:te,args:[L,re,l[re],Y]}))}function rt(p){return p.id}function xt(p,l){return p[l.id]=l,p}class gt{constructor(l,b,L,Y){this.message=(l?`${l}: `:"")+L,Y&&(this.identifier=Y),null!=b&&b.__line__&&(this.line=b.__line__)}}function on(p,...l){for(const b of l)for(const L in b)p[L]=b[L];return p}class Qt extends Error{constructor(l,b){super(b),this.message=b,this.key=l}}class Gt{constructor(l,b=[]){this.parent=l,this.bindings={};for(const[L,Y]of b)this.bindings[L]=Y}concat(l){return new Gt(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const Vn={kind:"null"},un={kind:"number"},an={kind:"string"},cn={kind:"boolean"},_i={kind:"color"},vi={kind:"object"},qn={kind:"value"},Pi={kind:"collator"},ci={kind:"formatted"},Ei={kind:"padding"},Mi={kind:"resolvedImage"},Zi={kind:"variableAnchorOffsetCollection"};function ji(p,l){return{kind:"array",itemType:p,N:l}}function $i(p){if("array"===p.kind){const l=$i(p.itemType);return"number"==typeof p.N?`array<${l}, ${p.N}>`:"value"===p.itemType.kind?"array":`array<${l}>`}return p.kind}const so=[Vn,un,an,cn,_i,ci,vi,ji(qn),Ei,Mi,Zi];function Zn(p,l){if("error"===l.kind)return null;if("array"===p.kind){if("array"===l.kind&&(0===l.N&&"value"===l.itemType.kind||!Zn(p.itemType,l.itemType))&&("number"!=typeof p.N||p.N===l.N))return null}else{if(p.kind===l.kind)return null;if("value"===p.kind)for(const b of so)if(!Zn(b,l))return null}return`Expected ${$i(p)} but found ${$i(l)} instead.`}function zt(p,l){return l.some(b=>b.kind===p.kind)}function Je(p,l){return l.some(b=>"null"===b?null===p:"array"===b?Array.isArray(p):"object"===b?p&&!Array.isArray(p)&&"object"==typeof p:b===typeof p)}function nt(p,l){return"array"===p.kind&&"array"===l.kind?p.itemType.kind===l.itemType.kind&&"number"==typeof p.N:p.kind===l.kind}const ot=4/29,dt=6/29,Pt=3*dt*dt,At=dt*dt*dt,Wt=Math.PI/180,Yt=180/Math.PI;function Bt(p){return(p%=360)<0&&(p+=360),p}function $t([p,l,b,L]){let Y,te;const re=Cn((.2225045*(p=vn(p))+.7168786*(l=vn(l))+.0606169*(b=vn(b)))/1);p===l&&l===b?Y=te=re:(Y=Cn((.4360747*p+.3850649*l+.1430804*b)/.96422),te=Cn((.0139322*p+.0971045*l+.7141733*b)/.82521));const ve=116*re-16;return[ve<0?0:ve,500*(Y-re),200*(re-te),L]}function vn(p){return p<=.04045?p/12.92:Math.pow((p+.055)/1.055,2.4)}function Cn(p){return p>At?Math.pow(p,1/3):p/Pt+ot}function xn([p,l,b,L]){let Y=(p+16)/116,te=isNaN(l)?Y:Y+l/500,re=isNaN(b)?Y:Y-b/200;return Y=1*jt(Y),te=.96422*jt(te),re=.82521*jt(re),[jn(3.1338561*te-1.6168667*Y-.4906146*re),jn(-.9787684*te+1.9161415*Y+.033454*re),jn(.0719453*te-.2289914*Y+1.4052427*re),L]}function jn(p){return(p=p<=.00304?12.92*p:1.055*Math.pow(p,1/2.4)-.055)<0?0:p>1?1:p}function jt(p){return p>dt?p*p*p:Pt*(p-ot)}function Dn(p){return parseInt(p.padEnd(2,p),16)/255}function Ke(p,l){return si(l?p/100:p,0,1)}function si(p,l,b){return Math.min(Math.max(l,p),b)}function xr(p){return!p.some(Number.isNaN)}const Zr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Li{constructor(l,b,L,Y=1,te=!0){this.r=l,this.g=b,this.b=L,this.a=Y,te||(this.r*=Y,this.g*=Y,this.b*=Y,Y||this.overwriteGetter("rgb",[l,b,L,Y]))}static parse(l){if(l instanceof Li)return l;if("string"!=typeof l)return;const b=function(L){if("transparent"===(L=L.toLowerCase().trim()))return[0,0,0,0];const Y=Zr[L];if(Y){const[re,ve,ze]=Y;return[re/255,ve/255,ze/255,1]}if(L.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(L)){const re=L.length<6?1:2;let ve=1;return[Dn(L.slice(ve,ve+=re)),Dn(L.slice(ve,ve+=re)),Dn(L.slice(ve,ve+=re)),Dn(L.slice(ve,ve+re)||"ff")]}if(L.startsWith("rgb")){const re=L.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(re){const[ve,ze,ke,Ze,et,st,bt,Ct,Rt,qt,Jt,yn]=re,sn=[Ze||" ",bt||" ",qt].join("");if("  "===sn||"  /"===sn||",,"===sn||",,,"===sn){const Mn=[ke,st,Rt].join(""),Ln="%%%"===Mn?100:""===Mn?255:0;if(Ln){const Qn=[si(+ze/Ln,0,1),si(+et/Ln,0,1),si(+Ct/Ln,0,1),Jt?Ke(+Jt,yn):1];if(xr(Qn))return Qn}}return}}const te=L.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(te){const[re,ve,ze,ke,Ze,et,st,bt,Ct]=te,Rt=[ze||" ",Ze||" ",st].join("");if("  "===Rt||"  /"===Rt||",,"===Rt||",,,"===Rt){const qt=[+ve,si(+ke,0,100),si(+et,0,100),bt?Ke(+bt,Ct):1];if(xr(qt))return function([Jt,yn,sn,Mn]){function Ln(Qn){const pi=(Qn+Jt/30)%12,Oi=yn*Math.min(sn,1-sn);return sn-Oi*Math.max(-1,Math.min(pi-3,9-pi,1))}return Jt=Bt(Jt),yn/=100,sn/=100,[Ln(0),Ln(8),Ln(4),Mn]}(qt)}}}(l);return b?new Li(...b,!1):void 0}get rgb(){const{r:l,g:b,b:L,a:Y}=this,te=Y||1/0;return this.overwriteGetter("rgb",[l/te,b/te,L/te,Y])}get hcl(){return this.overwriteGetter("hcl",function(l){const[b,L,Y,te]=$t(l),re=Math.sqrt(L*L+Y*Y);return[Math.round(1e4*re)?Bt(Math.atan2(Y,L)*Yt):NaN,re,b,te]}(this.rgb))}get lab(){return this.overwriteGetter("lab",$t(this.rgb))}overwriteGetter(l,b){return Object.defineProperty(this,l,{value:b}),b}toString(){const[l,b,L,Y]=this.rgb;return`rgba(${[l,b,L].map(te=>Math.round(255*te)).join(",")},${Y})`}}Li.black=new Li(0,0,0,1),Li.white=new Li(1,1,1,1),Li.transparent=new Li(0,0,0,0),Li.red=new Li(1,0,0,1);class or{constructor(l,b,L){this.sensitivity=l?b?"variant":"case":b?"accent":"base",this.locale=L,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,b){return this.collator.compare(l,b)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ri{constructor(l,b,L,Y,te){this.text=l,this.image=b,this.scale=L,this.fontStack=Y,this.textColor=te}}class to{constructor(l){this.sections=l}static fromString(l){return new to([new Ri(l,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(l=>0!==l.text.length||l.image&&0!==l.image.name.length)}static factory(l){return l instanceof to?l:to.fromString(l)}toString(){return 0===this.sections.length?"":this.sections.map(l=>l.text).join("")}}class Vi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Vi)return l;if("number"==typeof l)return new Vi([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const b of l)if("number"!=typeof b)return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Vi(l)}}toString(){return JSON.stringify(this.values)}}const Wn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ii{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Ii)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let b=0;b<l.length;b+=2){const L=l[b],Y=l[b+1];if("string"!=typeof L||!Wn.has(L)||!Array.isArray(Y)||2!==Y.length||"number"!=typeof Y[0]||"number"!=typeof Y[1])return}return new Ii(l)}}toString(){return JSON.stringify(this.values)}}class co{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new co({name:l,available:!1}):null}}function ro(p,l,b,L){return"number"==typeof p&&p>=0&&p<=255&&"number"==typeof l&&l>=0&&l<=255&&"number"==typeof b&&b>=0&&b<=255?void 0===L||"number"==typeof L&&L>=0&&L<=1?null:`Invalid rgba value [${[p,l,b,L].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof L?[p,l,b,L]:[p,l,b]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Po(p){if(null===p||"string"==typeof p||"boolean"==typeof p||"number"==typeof p||p instanceof Li||p instanceof or||p instanceof to||p instanceof Vi||p instanceof Ii||p instanceof co)return!0;if(Array.isArray(p)){for(const l of p)if(!Po(l))return!1;return!0}if("object"==typeof p){for(const l in p)if(!Po(p[l]))return!1;return!0}return!1}function Mr(p){if(null===p)return Vn;if("string"==typeof p)return an;if("boolean"==typeof p)return cn;if("number"==typeof p)return un;if(p instanceof Li)return _i;if(p instanceof or)return Pi;if(p instanceof to)return ci;if(p instanceof Vi)return Ei;if(p instanceof Ii)return Zi;if(p instanceof co)return Mi;if(Array.isArray(p)){const l=p.length;let b;for(const L of p){const Y=Mr(L);if(b){if(b===Y)continue;b=qn;break}b=Y}return ji(b||qn,l)}return vi}function ba(p){const l=typeof p;return null===p?"":"string"===l||"number"===l||"boolean"===l?String(p):p instanceof Li||p instanceof to||p instanceof Vi||p instanceof Ii||p instanceof co?p.toString():JSON.stringify(p)}class at{constructor(l,b){this.type=l,this.value=b}static parse(l,b){if(2!==l.length)return b.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Po(l[1]))return b.error("invalid value");const L=l[1];let Y=Mr(L);const te=b.expectedType;return"array"!==Y.kind||0!==Y.N||!te||"array"!==te.kind||"number"==typeof te.N&&0!==te.N||(Y=te),new at(Y,L)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class wt{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}const On={string:an,number:un,boolean:cn,object:vi};class Nn{constructor(l,b){this.type=l,this.args=b}static parse(l,b){if(l.length<2)return b.error("Expected at least one argument.");let L,Y=1;const te=l[0];if("array"===te){let ve,ze;if(l.length>2){const ke=l[1];if("string"!=typeof ke||!(ke in On)||"object"===ke)return b.error('The item type argument of "array" must be one of string, number, boolean',1);ve=On[ke],Y++}else ve=qn;if(l.length>3){if(null!==l[2]&&("number"!=typeof l[2]||l[2]<0||l[2]!==Math.floor(l[2])))return b.error('The length argument to "array" must be a positive integer literal',2);ze=l[2],Y++}L=ji(ve,ze)}else{if(!On[te])throw new Error(`Types doesn't contain name = ${te}`);L=On[te]}const re=[];for(;Y<l.length;Y++){const ve=b.parse(l[Y],Y,qn);if(!ve)return null;re.push(ve)}return new Nn(L,re)}evaluate(l){for(let b=0;b<this.args.length;b++){const L=this.args[b].evaluate(l);if(!Zn(this.type,Mr(L)))return L;if(b===this.args.length-1)throw new wt(`Expected value to be of type ${$i(this.type)}, but found ${$i(Mr(L))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Rn={"to-boolean":cn,"to-color":_i,"to-number":un,"to-string":an};class Yn{constructor(l,b){this.type=l,this.args=b}static parse(l,b){if(l.length<2)return b.error("Expected at least one argument.");const L=l[0];if(!Rn[L])throw new Error(`Can't parse ${L} as it is not part of the known types`);if(("to-boolean"===L||"to-string"===L)&&2!==l.length)return b.error("Expected one argument.");const Y=Rn[L],te=[];for(let re=1;re<l.length;re++){const ve=b.parse(l[re],re,qn);if(!ve)return null;te.push(ve)}return new Yn(Y,te)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let b,L;for(const Y of this.args){if(b=Y.evaluate(l),L=null,b instanceof Li)return b;if("string"==typeof b){const te=l.parseColor(b);if(te)return te}else if(Array.isArray(b)&&(L=b.length<3||b.length>4?`Invalid rbga value ${JSON.stringify(b)}: expected an array containing either three or four numeric values.`:ro(b[0],b[1],b[2],b[3]),!L))return new Li(b[0]/255,b[1]/255,b[2]/255,b[3])}throw new wt(L||`Could not parse color from value '${"string"==typeof b?b:JSON.stringify(b)}'`)}case"padding":{let b;for(const L of this.args){b=L.evaluate(l);const Y=Vi.parse(b);if(Y)return Y}throw new wt(`Could not parse padding from value '${"string"==typeof b?b:JSON.stringify(b)}'`)}case"variableAnchorOffsetCollection":{let b;for(const L of this.args){b=L.evaluate(l);const Y=Ii.parse(b);if(Y)return Y}throw new wt(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof b?b:JSON.stringify(b)}'`)}case"number":{let b=null;for(const L of this.args){if(b=L.evaluate(l),null===b)return 0;const Y=Number(b);if(!isNaN(Y))return Y}throw new wt(`Could not convert ${JSON.stringify(b)} to number.`)}case"formatted":return to.fromString(ba(this.args[0].evaluate(l)));case"resolvedImage":return co.fromString(ba(this.args[0].evaluate(l)));default:return ba(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Dt=["Unknown","Point","LineString","Polygon"];class Kn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Dt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let b=this._parseColorCache[l];return b||(b=this._parseColorCache[l]=Li.parse(l)),b}}class Ot{constructor(l,b,L=[],Y,te=new Gt,re=[]){this.registry=l,this.path=L,this.key=L.map(ve=>`[${ve}]`).join(""),this.scope=te,this.errors=re,this.expectedType=Y,this._isConstant=b}parse(l,b,L,Y,te={}){return b?this.concat(b,L,Y)._parse(l,te):this._parse(l,te)}_parse(l,b){function L(Y,te,re){return"assert"===re?new Nn(te,[Y]):"coerce"===re?new Yn(te,[Y]):Y}if(null!==l&&"string"!=typeof l&&"boolean"!=typeof l&&"number"!=typeof l||(l=["literal",l]),Array.isArray(l)){if(0===l.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const Y=l[0];if("string"!=typeof Y)return this.error(`Expression name must be a string, but found ${typeof Y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const te=this.registry[Y];if(te){let re=te.parse(l,this);if(!re)return null;if(this.expectedType){const ve=this.expectedType,ze=re.type;if("string"!==ve.kind&&"number"!==ve.kind&&"boolean"!==ve.kind&&"object"!==ve.kind&&"array"!==ve.kind||"value"!==ze.kind)if("color"!==ve.kind&&"formatted"!==ve.kind&&"resolvedImage"!==ve.kind||"value"!==ze.kind&&"string"!==ze.kind)if("padding"!==ve.kind||"value"!==ze.kind&&"number"!==ze.kind&&"array"!==ze.kind)if("variableAnchorOffsetCollection"!==ve.kind||"value"!==ze.kind&&"array"!==ze.kind){if(this.checkSubtype(ve,ze))return null}else re=L(re,ve,b.typeAnnotation||"coerce");else re=L(re,ve,b.typeAnnotation||"coerce");else re=L(re,ve,b.typeAnnotation||"coerce");else re=L(re,ve,b.typeAnnotation||"assert")}if(!(re instanceof at)&&"resolvedImage"!==re.type.kind&&this._isConstant(re)){const ve=new Kn;try{re=new at(re.type,re.evaluate(ve))}catch(ze){return this.error(ze.message),null}}return re}return this.error(`Unknown expression "${Y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===l?"'undefined' value invalid. Use null instead.":"object"==typeof l?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,b,L){const Y="number"==typeof l?this.path.concat(l):this.path,te=L?this.scope.concat(L):this.scope;return new Ot(this.registry,this._isConstant,Y,b||null,te,this.errors)}error(l,...b){const L=`${this.key}${b.map(Y=>`[${Y}]`).join("")}`;this.errors.push(new Qt(L,l))}checkSubtype(l,b){const L=Zn(l,b);return L&&this.error(L),L}}class ft{constructor(l,b,L){this.type=Pi,this.locale=L,this.caseSensitive=l,this.diacriticSensitive=b}static parse(l,b){if(2!==l.length)return b.error("Expected one argument.");const L=l[1];if("object"!=typeof L||Array.isArray(L))return b.error("Collator options argument must be an object.");const Y=b.parse(void 0!==L["case-sensitive"]&&L["case-sensitive"],1,cn);if(!Y)return null;const te=b.parse(void 0!==L["diacritic-sensitive"]&&L["diacritic-sensitive"],1,cn);if(!te)return null;let re=null;return L.locale&&(re=b.parse(L.locale,1,an),!re)?null:new ft(Y,te,re)}evaluate(l){return new or(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}const St=8192;function Kt(p,l){p[0]=Math.min(p[0],l[0]),p[1]=Math.min(p[1],l[1]),p[2]=Math.max(p[2],l[0]),p[3]=Math.max(p[3],l[1])}function Ut(p,l){return!(p[0]<=l[0]||p[2]>=l[2]||p[1]<=l[1]||p[3]>=l[3])}function rn(p,l){const b=(180+p[0])/360,L=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p[1]*Math.PI/360)))/360,Y=Math.pow(2,l.z);return[Math.round(b*Y*St),Math.round(L*Y*St)]}function P1(p,l,b){const L=p[0]-l[0],Y=p[1]-l[1],te=p[0]-b[0],re=p[1]-b[1];return L*re-te*Y==0&&L*te<=0&&Y*re<=0}function Gi(p,l){let b=!1;for(let re=0,ve=l.length;re<ve;re++){const ze=l[re];for(let ke=0,Ze=ze.length;ke<Ze-1;ke++){if(P1(p,ze[ke],ze[ke+1]))return!1;(Y=ze[ke])[1]>(L=p)[1]!=(te=ze[ke+1])[1]>L[1]&&L[0]<(te[0]-Y[0])*(L[1]-Y[1])/(te[1]-Y[1])+Y[0]&&(b=!b)}}var L,Y,te;return b}function La(p,l){for(let b=0;b<l.length;b++)if(Gi(p,l[b]))return!0;return!1}function Di(p,l,b,L){const Y=L[0]-b[0],te=L[1]-b[1],re=(p[0]-b[0])*te-Y*(p[1]-b[1]),ve=(l[0]-b[0])*te-Y*(l[1]-b[1]);return re>0&&ve<0||re<0&&ve>0}function Ui(p,l,b){for(const ke of b)for(let Ze=0;Ze<ke.length-1;++Ze)if((ve=[(re=ke[Ze+1])[0]-(te=ke[Ze])[0],re[1]-te[1]])[0]*(ze=[(Y=l)[0]-(L=p)[0],Y[1]-L[1]])[1]-ve[1]*ze[0]!=0&&Di(L,Y,te,re)&&Di(te,re,L,Y))return!0;var L,Y,te,re,ve,ze;return!1}function nr(p,l){for(let b=0;b<p.length;++b)if(!Gi(p[b],l))return!1;for(let b=0;b<p.length-1;++b)if(Ui(p[b],p[b+1],l))return!1;return!0}function Be(p,l){for(let b=0;b<l.length;b++)if(nr(p,l[b]))return!0;return!1}function _t(p,l,b){const L=[];for(let Y=0;Y<p.length;Y++){const te=[];for(let re=0;re<p[Y].length;re++){const ve=rn(p[Y][re],b);Kt(l,ve),te.push(ve)}L.push(te)}return L}function Lt(p,l,b){const L=[];for(let Y=0;Y<p.length;Y++){const te=_t(p[Y],l,b);L.push(te)}return L}function nn(p,l,b,L){if(p[0]<b[0]||p[0]>b[2]){const Y=.5*L;let te=p[0]-b[0]>Y?-L:b[0]-p[0]>Y?L:0;0===te&&(te=p[0]-b[2]>Y?-L:b[2]-p[0]>Y?L:0),p[0]+=te}Kt(l,p)}function Pn(p,l,b,L){const Y=Math.pow(2,L.z)*St,te=[L.x*St,L.y*St],re=[];for(const ve of p)for(const ze of ve){const ke=[ze.x+te[0],ze.y+te[1]];nn(ke,l,b,Y),re.push(ke)}return re}function en(p,l,b,L){const Y=Math.pow(2,L.z)*St,te=[L.x*St,L.y*St],re=[];for(const ze of p){const ke=[];for(const Ze of ze){const et=[Ze.x+te[0],Ze.y+te[1]];Kt(l,et),ke.push(et)}re.push(ke)}if(l[2]-l[0]<=Y/2){(ve=l)[0]=ve[1]=1/0,ve[2]=ve[3]=-1/0;for(const ze of re)for(const ke of ze)nn(ke,l,b,Y)}var ve;return re}class ri{constructor(l,b){this.type=cn,this.geojson=l,this.geometries=b}static parse(l,b){if(2!==l.length)return b.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Po(l[1])){const L=l[1];if("FeatureCollection"===L.type)for(let Y=0;Y<L.features.length;++Y){const te=L.features[Y].geometry.type;if("Polygon"===te||"MultiPolygon"===te)return new ri(L,L.features[Y].geometry)}else if("Feature"===L.type){const Y=L.geometry.type;if("Polygon"===Y||"MultiPolygon"===Y)return new ri(L,L.geometry)}else if("Polygon"===L.type||"MultiPolygon"===L.type)return new ri(L,L)}return b.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(null!=l.geometry()&&null!=l.canonicalID()){if("Point"===l.geometryType())return function(b,L){const Y=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],re=b.canonicalID();if("Polygon"===L.type){const ve=_t(L.coordinates,te,re),ze=Pn(b.geometry(),Y,te,re);if(!Ut(Y,te))return!1;for(const ke of ze)if(!Gi(ke,ve))return!1}if("MultiPolygon"===L.type){const ve=Lt(L.coordinates,te,re),ze=Pn(b.geometry(),Y,te,re);if(!Ut(Y,te))return!1;for(const ke of ze)if(!La(ke,ve))return!1}return!0}(l,this.geometries);if("LineString"===l.geometryType())return function(b,L){const Y=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],re=b.canonicalID();if("Polygon"===L.type){const ve=_t(L.coordinates,te,re),ze=en(b.geometry(),Y,te,re);if(!Ut(Y,te))return!1;for(const ke of ze)if(!nr(ke,ve))return!1}if("MultiPolygon"===L.type){const ve=Lt(L.coordinates,te,re),ze=en(b.geometry(),Y,te,re);if(!Ut(Y,te))return!1;for(const ke of ze)if(!Be(ke,ve))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class cr{constructor(l,b){this.type=b.type,this.name=l,this.boundExpression=b}static parse(l,b){if(2!==l.length||"string"!=typeof l[1])return b.error("'var' expression requires exactly one string literal argument.");const L=l[1];return b.scope.has(L)?new cr(L,b.scope.get(L)):b.error(`Unknown variable "${L}". Make sure "${L}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class yr{constructor(l,b,L,Y){this.name=l,this.type=b,this._evaluate=L,this.args=Y}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,b){const L=l[0],Y=yr.definitions[L];if(!Y)return b.error(`Unknown expression "${L}". If you wanted a literal array, use ["literal", [...]].`,0);const te=Array.isArray(Y)?Y[0]:Y.type,re=Array.isArray(Y)?[[Y[1],Y[2]]]:Y.overloads,ve=re.filter(([ke])=>!Array.isArray(ke)||ke.length===l.length-1);let ze=null;for(const[ke,Ze]of ve){ze=new Ot(b.registry,xa,b.path,null,b.scope);const et=[];let st=!1;for(let bt=1;bt<l.length;bt++){const Ct=l[bt],Rt=Array.isArray(ke)?ke[bt-1]:ke.type,qt=ze.parse(Ct,1+et.length,Rt);if(!qt){st=!0;break}et.push(qt)}if(!st)if(Array.isArray(ke)&&ke.length!==et.length)ze.error(`Expected ${ke.length} arguments, but found ${et.length} instead.`);else{for(let bt=0;bt<et.length;bt++){const Ct=Array.isArray(ke)?ke[bt]:ke.type,Rt=et[bt];ze.concat(bt+1).checkSubtype(Ct,Rt.type)}if(0===ze.errors.length)return new yr(L,te,Ze,et)}}if(1===ve.length)b.errors.push(...ze.errors);else{const ke=(ve.length?ve:re).map(([et])=>{return st=et,Array.isArray(st)?`(${st.map($i).join(", ")})`:`(${$i(st.type)}...)`;var st}).join(" | "),Ze=[];for(let et=1;et<l.length;et++){const st=b.parse(l[et],1+Ze.length);if(!st)return null;Ze.push($i(st.type))}b.error(`Expected arguments of type ${ke}, but found (${Ze.join(", ")}) instead.`)}return null}static register(l,b){yr.definitions=b;for(const L in b)l[L]=yr}}function xa(p){if(p instanceof cr)return xa(p.boundExpression);if(p instanceof yr&&"error"===p.name||p instanceof ft||p instanceof ri)return!1;const l=p instanceof Yn||p instanceof Nn;let b=!0;return p.eachChild(L=>{b=l?b&&xa(L):b&&L instanceof at}),!!b&&Sa(p)&&Xs(p,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Sa(p){if(p instanceof yr&&("get"===p.name&&1===p.args.length||"feature-state"===p.name||"has"===p.name&&1===p.args.length||"properties"===p.name||"geometry-type"===p.name||"id"===p.name||/^filter-/.test(p.name))||p instanceof ri)return!1;let l=!0;return p.eachChild(b=>{l&&!Sa(b)&&(l=!1)}),l}function wa(p){if(p instanceof yr&&"feature-state"===p.name)return!1;let l=!0;return p.eachChild(b=>{l&&!wa(b)&&(l=!1)}),l}function Xs(p,l){if(p instanceof yr&&l.indexOf(p.name)>=0)return!1;let b=!0;return p.eachChild(L=>{b&&!Xs(L,l)&&(b=!1)}),b}function Qa(p,l){const b=p.length-1;let L,Y,te=0,re=b,ve=0;for(;te<=re;)if(ve=Math.floor((te+re)/2),L=p[ve],Y=p[ve+1],L<=l){if(ve===b||l<Y)return ve;te=ve+1}else{if(!(L>l))throw new wt("Input is not a number.");re=ve-1}return 0}class Vr{constructor(l,b,L){this.type=l,this.input=b,this.labels=[],this.outputs=[];for(const[Y,te]of L)this.labels.push(Y),this.outputs.push(te)}static parse(l,b){if(l.length-1<4)return b.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return b.error("Expected an even number of arguments.");const L=b.parse(l[1],1,un);if(!L)return null;const Y=[];let te=null;b.expectedType&&"value"!==b.expectedType.kind&&(te=b.expectedType);for(let re=1;re<l.length;re+=2){const ve=1===re?-1/0:l[re],ze=l[re+1],ke=re,Ze=re+1;if("number"!=typeof ve)return b.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ke);if(Y.length&&Y[Y.length-1][0]>=ve)return b.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ke);const et=b.parse(ze,Ze,te);if(!et)return null;te=te||et.type,Y.push([ve,et])}return new Vr(te,L,Y)}evaluate(l){const b=this.labels,L=this.outputs;if(1===b.length)return L[0].evaluate(l);const Y=this.input.evaluate(l);if(Y<=b[0])return L[0].evaluate(l);const te=b.length;return Y>=b[te-1]?L[te-1].evaluate(l):L[Qa(b,Y)].evaluate(l)}eachChild(l){l(this.input);for(const b of this.outputs)l(b)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function l1(p,l,b){return p+b*(l-p)}function Aa(p,l,b){return p.map((L,Y)=>l1(L,l[Y],b))}const xs={number:l1,color:function(p,l,b,L="rgb"){switch(L){case"rgb":{const[Y,te,re,ve]=Aa(p.rgb,l.rgb,b);return new Li(Y,te,re,ve,!1)}case"hcl":{const[Y,te,re,ve]=p.hcl,[ze,ke,Ze,et]=l.hcl;let st,bt;if(isNaN(Y)||isNaN(ze))isNaN(Y)?isNaN(ze)?st=NaN:(st=ze,1!==re&&0!==re||(bt=ke)):(st=Y,1!==Ze&&0!==Ze||(bt=te));else{let yn=ze-Y;ze>Y&&yn>180?yn-=360:ze<Y&&Y-ze>180&&(yn+=360),st=Y+b*yn}const[Ct,Rt,qt,Jt]=function([yn,sn,Mn,Ln]){return yn=isNaN(yn)?0:yn*Wt,xn([Mn,Math.cos(yn)*sn,Math.sin(yn)*sn,Ln])}([st,bt??l1(te,ke,b),l1(re,Ze,b),l1(ve,et,b)]);return new Li(Ct,Rt,qt,Jt,!1)}case"lab":{const[Y,te,re,ve]=xn(Aa(p.lab,l.lab,b));return new Li(Y,te,re,ve,!1)}}},array:Aa,padding:function(p,l,b){return new Vi(Aa(p.values,l.values,b))},variableAnchorOffsetCollection:function(p,l,b){const L=p.values,Y=l.values;if(L.length!==Y.length)throw new wt(`Cannot interpolate values of different length. from: ${p.toString()}, to: ${l.toString()}`);const te=[];for(let re=0;re<L.length;re+=2){if(L[re]!==Y[re])throw new wt(`Cannot interpolate values containing mismatched anchors. from[${re}]: ${L[re]}, to[${re}]: ${Y[re]}`);te.push(L[re]);const[ve,ze]=L[re+1],[ke,Ze]=Y[re+1];te.push([l1(ve,ke,b),l1(ze,Ze,b)])}return new Ii(te)}};class Ba{constructor(l,b,L,Y,te){this.type=l,this.operator=b,this.interpolation=L,this.input=Y,this.labels=[],this.outputs=[];for(const[re,ve]of te)this.labels.push(re),this.outputs.push(ve)}static interpolationFactor(l,b,L,Y){let te=0;if("exponential"===l.name)te=lo(b,l.base,L,Y);else if("linear"===l.name)te=lo(b,1,L,Y);else if("cubic-bezier"===l.name){const re=l.controlPoints;te=new S(re[0],re[1],re[2],re[3]).solve(lo(b,1,L,Y))}return te}static parse(l,b){let[L,Y,te,...re]=l;if(!Array.isArray(Y)||0===Y.length)return b.error("Expected an interpolation type expression.",1);if("linear"===Y[0])Y={name:"linear"};else if("exponential"===Y[0]){const ke=Y[1];if("number"!=typeof ke)return b.error("Exponential interpolation requires a numeric base.",1,1);Y={name:"exponential",base:ke}}else{if("cubic-bezier"!==Y[0])return b.error(`Unknown interpolation type ${String(Y[0])}`,1,0);{const ke=Y.slice(1);if(4!==ke.length||ke.some(Ze=>"number"!=typeof Ze||Ze<0||Ze>1))return b.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Y={name:"cubic-bezier",controlPoints:ke}}}if(l.length-1<4)return b.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return b.error("Expected an even number of arguments.");if(te=b.parse(te,2,un),!te)return null;const ve=[];let ze=null;"interpolate-hcl"===L||"interpolate-lab"===L?ze=_i:b.expectedType&&"value"!==b.expectedType.kind&&(ze=b.expectedType);for(let ke=0;ke<re.length;ke+=2){const Ze=re[ke],et=re[ke+1],st=ke+3,bt=ke+4;if("number"!=typeof Ze)return b.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(ve.length&&ve[ve.length-1][0]>=Ze)return b.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',st);const Ct=b.parse(et,bt,ze);if(!Ct)return null;ze=ze||Ct.type,ve.push([Ze,Ct])}return nt(ze,un)||nt(ze,_i)||nt(ze,Ei)||nt(ze,Zi)||nt(ze,ji(un))?new Ba(ze,L,Y,te,ve):b.error(`Type ${$i(ze)} is not interpolatable.`)}evaluate(l){const b=this.labels,L=this.outputs;if(1===b.length)return L[0].evaluate(l);const Y=this.input.evaluate(l);if(Y<=b[0])return L[0].evaluate(l);const te=b.length;if(Y>=b[te-1])return L[te-1].evaluate(l);const re=Qa(b,Y),ve=Ba.interpolationFactor(this.interpolation,Y,b[re],b[re+1]),ze=L[re].evaluate(l),ke=L[re+1].evaluate(l);switch(this.operator){case"interpolate":return xs[this.type.kind](ze,ke,ve);case"interpolate-hcl":return xs.color(ze,ke,ve,"hcl");case"interpolate-lab":return xs.color(ze,ke,ve,"lab")}}eachChild(l){l(this.input);for(const b of this.outputs)l(b)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function lo(p,l,b,L){const Y=L-b,te=p-b;return 0===Y?0:1===l?te/Y:(Math.pow(l,te)-1)/(Math.pow(l,Y)-1)}class aa{constructor(l,b){this.type=l,this.args=b}static parse(l,b){if(l.length<2)return b.error("Expectected at least one argument.");let L=null;const Y=b.expectedType;Y&&"value"!==Y.kind&&(L=Y);const te=[];for(const ve of l.slice(1)){const ze=b.parse(ve,1+te.length,L,void 0,{typeAnnotation:"omit"});if(!ze)return null;L=L||ze.type,te.push(ze)}if(!L)throw new Error("No output type");const re=Y&&te.some(ve=>Zn(Y,ve.type));return new aa(re?qn:L,te)}evaluate(l){let b,L=null,Y=0;for(const te of this.args)if(Y++,L=te.evaluate(l),L&&L instanceof co&&!L.available&&(b||(b=L.name),L=null,Y===this.args.length&&(L=b)),null!==L)break;return L}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}class Ja{constructor(l,b){this.type=b.type,this.bindings=[].concat(l),this.result=b}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const b of this.bindings)l(b[1]);l(this.result)}static parse(l,b){if(l.length<4)return b.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const L=[];for(let te=1;te<l.length-1;te+=2){const re=l[te];if("string"!=typeof re)return b.error(`Expected string, but found ${typeof re} instead.`,te);if(/[^a-zA-Z0-9_]/.test(re))return b.error("Variable names must contain only alphanumeric characters or '_'.",te);const ve=b.parse(l[te+1],te+1);if(!ve)return null;L.push([re,ve])}const Y=b.parse(l[l.length-1],l.length-1,b.expectedType,L);return Y?new Ja(L,Y):null}outputDefined(){return this.result.outputDefined()}}class Da{constructor(l,b,L){this.type=l,this.index=b,this.input=L}static parse(l,b){if(3!==l.length)return b.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const L=b.parse(l[1],1,un),Y=b.parse(l[2],2,ji(b.expectedType||qn));return L&&Y?new Da(Y.type.itemType,L,Y):null}evaluate(l){const b=this.index.evaluate(l),L=this.input.evaluate(l);if(b<0)throw new wt(`Array index out of bounds: ${b} < 0.`);if(b>=L.length)throw new wt(`Array index out of bounds: ${b} > ${L.length-1}.`);if(b!==Math.floor(b))throw new wt(`Array index must be an integer, but found ${b} instead.`);return L[b]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class Dr{constructor(l,b){this.type=cn,this.needle=l,this.haystack=b}static parse(l,b){if(3!==l.length)return b.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const L=b.parse(l[1],1,qn),Y=b.parse(l[2],2,qn);return L&&Y?zt(L.type,[cn,an,un,Vn,qn])?new Dr(L,Y):b.error(`Expected first argument to be of type boolean, string, number or null, but found ${$i(L.type)} instead`):null}evaluate(l){const b=this.needle.evaluate(l),L=this.haystack.evaluate(l);if(!L)return!1;if(!Je(b,["boolean","string","number","null"]))throw new wt(`Expected first argument to be of type boolean, string, number or null, but found ${$i(Mr(b))} instead.`);if(!Je(L,["string","array"]))throw new wt(`Expected second argument to be of type array or string, but found ${$i(Mr(L))} instead.`);return L.indexOf(b)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Zs{constructor(l,b,L){this.type=un,this.needle=l,this.haystack=b,this.fromIndex=L}static parse(l,b){if(l.length<=2||l.length>=5)return b.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const L=b.parse(l[1],1,qn),Y=b.parse(l[2],2,qn);if(!L||!Y)return null;if(!zt(L.type,[cn,an,un,Vn,qn]))return b.error(`Expected first argument to be of type boolean, string, number or null, but found ${$i(L.type)} instead`);if(4===l.length){const te=b.parse(l[3],3,un);return te?new Zs(L,Y,te):null}return new Zs(L,Y)}evaluate(l){const b=this.needle.evaluate(l),L=this.haystack.evaluate(l);if(!Je(b,["boolean","string","number","null"]))throw new wt(`Expected first argument to be of type boolean, string, number or null, but found ${$i(Mr(b))} instead.`);if(!Je(L,["string","array"]))throw new wt(`Expected second argument to be of type array or string, but found ${$i(Mr(L))} instead.`);if(this.fromIndex){const Y=this.fromIndex.evaluate(l);return L.indexOf(b,Y)}return L.indexOf(b)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class B1{constructor(l,b,L,Y,te,re){this.inputType=l,this.type=b,this.input=L,this.cases=Y,this.outputs=te,this.otherwise=re}static parse(l,b){if(l.length<5)return b.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return b.error("Expected an even number of arguments.");let L,Y;b.expectedType&&"value"!==b.expectedType.kind&&(Y=b.expectedType);const te={},re=[];for(let ke=2;ke<l.length-1;ke+=2){let Ze=l[ke];const et=l[ke+1];Array.isArray(Ze)||(Ze=[Ze]);const st=b.concat(ke);if(0===Ze.length)return st.error("Expected at least one branch label.");for(const Ct of Ze){if("number"!=typeof Ct&&"string"!=typeof Ct)return st.error("Branch labels must be numbers or strings.");if("number"==typeof Ct&&Math.abs(Ct)>Number.MAX_SAFE_INTEGER)return st.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Ct&&Math.floor(Ct)!==Ct)return st.error("Numeric branch labels must be integer values.");if(L){if(st.checkSubtype(L,Mr(Ct)))return null}else L=Mr(Ct);if(void 0!==te[String(Ct)])return st.error("Branch labels must be unique.");te[String(Ct)]=re.length}const bt=b.parse(et,ke,Y);if(!bt)return null;Y=Y||bt.type,re.push(bt)}const ve=b.parse(l[1],1,qn);if(!ve)return null;const ze=b.parse(l[l.length-1],l.length-1,Y);return ze?"value"!==ve.type.kind&&b.concat(1).checkSubtype(L,ve.type)?null:new B1(L,Y,ve,te,re,ze):null}evaluate(l){const b=this.input.evaluate(l);return(Mr(b)===this.inputType&&this.outputs[this.cases[b]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Io{constructor(l,b,L){this.type=l,this.branches=b,this.otherwise=L}static parse(l,b){if(l.length<4)return b.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return b.error("Expected an odd number of arguments.");let L;b.expectedType&&"value"!==b.expectedType.kind&&(L=b.expectedType);const Y=[];for(let re=1;re<l.length-1;re+=2){const ve=b.parse(l[re],re,cn);if(!ve)return null;const ze=b.parse(l[re+1],re+1,L);if(!ze)return null;Y.push([ve,ze]),L=L||ze.type}const te=b.parse(l[l.length-1],l.length-1,L);if(!te)return null;if(!L)throw new Error("Can't infer output type");return new Io(L,Y,te)}evaluate(l){for(const[b,L]of this.branches)if(b.evaluate(l))return L.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[b,L]of this.branches)l(b),l(L);l(this.otherwise)}outputDefined(){return this.branches.every(([l,b])=>b.outputDefined())&&this.otherwise.outputDefined()}}class u1{constructor(l,b,L,Y){this.type=l,this.input=b,this.beginIndex=L,this.endIndex=Y}static parse(l,b){if(l.length<=2||l.length>=5)return b.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const L=b.parse(l[1],1,qn),Y=b.parse(l[2],2,un);if(!L||!Y)return null;if(!zt(L.type,[ji(qn),an,qn]))return b.error(`Expected first argument to be of type array or string, but found ${$i(L.type)} instead`);if(4===l.length){const te=b.parse(l[3],3,un);return te?new u1(L.type,L,Y,te):null}return new u1(L.type,L,Y)}evaluate(l){const b=this.input.evaluate(l),L=this.beginIndex.evaluate(l);if(!Je(b,["string","array"]))throw new wt(`Expected first argument to be of type array or string, but found ${$i(Mr(b))} instead.`);if(this.endIndex){const Y=this.endIndex.evaluate(l);return b.slice(L,Y)}return b.slice(L)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Os(p,l){return"=="===p||"!="===p?"boolean"===l.kind||"string"===l.kind||"number"===l.kind||"null"===l.kind||"value"===l.kind:"string"===l.kind||"number"===l.kind||"value"===l.kind}function Yr(p,l,b,L){return 0===L.compare(l,b)}function To(p,l,b){const L="=="!==p&&"!="!==p;return class gk{constructor(te,re,ve){this.type=cn,this.lhs=te,this.rhs=re,this.collator=ve,this.hasUntypedArgument="value"===te.type.kind||"value"===re.type.kind}static parse(te,re){if(3!==te.length&&4!==te.length)return re.error("Expected two or three arguments.");const ve=te[0];let ze=re.parse(te[1],1,qn);if(!ze)return null;if(!Os(ve,ze.type))return re.concat(1).error(`"${ve}" comparisons are not supported for type '${$i(ze.type)}'.`);let ke=re.parse(te[2],2,qn);if(!ke)return null;if(!Os(ve,ke.type))return re.concat(2).error(`"${ve}" comparisons are not supported for type '${$i(ke.type)}'.`);if(ze.type.kind!==ke.type.kind&&"value"!==ze.type.kind&&"value"!==ke.type.kind)return re.error(`Cannot compare types '${$i(ze.type)}' and '${$i(ke.type)}'.`);L&&("value"===ze.type.kind&&"value"!==ke.type.kind?ze=new Nn(ke.type,[ze]):"value"!==ze.type.kind&&"value"===ke.type.kind&&(ke=new Nn(ze.type,[ke])));let Ze=null;if(4===te.length){if("string"!==ze.type.kind&&"string"!==ke.type.kind&&"value"!==ze.type.kind&&"value"!==ke.type.kind)return re.error("Cannot use collator to compare non-string types.");if(Ze=re.parse(te[3],3,Pi),!Ze)return null}return new gk(ze,ke,Ze)}evaluate(te){const re=this.lhs.evaluate(te),ve=this.rhs.evaluate(te);if(L&&this.hasUntypedArgument){const ze=Mr(re),ke=Mr(ve);if(ze.kind!==ke.kind||"string"!==ze.kind&&"number"!==ze.kind)throw new wt(`Expected arguments for "${p}" to be (string, string) or (number, number), but found (${ze.kind}, ${ke.kind}) instead.`)}if(this.collator&&!L&&this.hasUntypedArgument){const ze=Mr(re),ke=Mr(ve);if("string"!==ze.kind||"string"!==ke.kind)return l(te,re,ve)}return this.collator?b(te,re,ve,this.collator.evaluate(te)):l(te,re,ve)}eachChild(te){te(this.lhs),te(this.rhs),this.collator&&te(this.collator)}outputDefined(){return!0}}}const Sn=To("==",function(p,l,b){return l===b},Yr),Fc=To("!=",function(p,l,b){return l!==b},function(p,l,b,L){return!Yr(0,l,b,L)}),li=To("<",function(p,l,b){return l<b},function(p,l,b,L){return L.compare(l,b)<0}),Sc=To(">",function(p,l,b){return l>b},function(p,l,b,L){return L.compare(l,b)>0}),Vc=To("<=",function(p,l,b){return l<=b},function(p,l,b,L){return L.compare(l,b)<=0}),Oa=To(">=",function(p,l,b){return l>=b},function(p,l,b,L){return L.compare(l,b)>=0});class ps{constructor(l,b,L,Y,te){this.type=an,this.number=l,this.locale=b,this.currency=L,this.minFractionDigits=Y,this.maxFractionDigits=te}static parse(l,b){if(3!==l.length)return b.error("Expected two arguments.");const L=b.parse(l[1],1,un);if(!L)return null;const Y=l[2];if("object"!=typeof Y||Array.isArray(Y))return b.error("NumberFormat options argument must be an object.");let te=null;if(Y.locale&&(te=b.parse(Y.locale,1,an),!te))return null;let re=null;if(Y.currency&&(re=b.parse(Y.currency,1,an),!re))return null;let ve=null;if(Y["min-fraction-digits"]&&(ve=b.parse(Y["min-fraction-digits"],1,un),!ve))return null;let ze=null;return Y["max-fraction-digits"]&&(ze=b.parse(Y["max-fraction-digits"],1,un),!ze)?null:new ps(L,te,re,ve,ze)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class sa{constructor(l){this.type=ci,this.sections=l}static parse(l,b){if(l.length<2)return b.error("Expected at least one argument.");const L=l[1];if(!Array.isArray(L)&&"object"==typeof L)return b.error("First argument must be an image or text section.");const Y=[];let te=!1;for(let re=1;re<=l.length-1;++re){const ve=l[re];if(te&&"object"==typeof ve&&!Array.isArray(ve)){te=!1;let ze=null;if(ve["font-scale"]&&(ze=b.parse(ve["font-scale"],1,un),!ze))return null;let ke=null;if(ve["text-font"]&&(ke=b.parse(ve["text-font"],1,ji(an)),!ke))return null;let Ze=null;if(ve["text-color"]&&(Ze=b.parse(ve["text-color"],1,_i),!Ze))return null;const et=Y[Y.length-1];et.scale=ze,et.font=ke,et.textColor=Ze}else{const ze=b.parse(l[re],1,qn);if(!ze)return null;const ke=ze.type.kind;if("string"!==ke&&"value"!==ke&&"null"!==ke&&"resolvedImage"!==ke)return b.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");te=!0,Y.push({content:ze,scale:null,font:null,textColor:null})}}return new sa(Y)}evaluate(l){return new to(this.sections.map(b=>{const L=b.content.evaluate(l);return Mr(L)===Mi?new Ri("",L,null,null,null):new Ri(ba(L),null,b.scale?b.scale.evaluate(l):null,b.font?b.font.evaluate(l).join(","):null,b.textColor?b.textColor.evaluate(l):null)}))}eachChild(l){for(const b of this.sections)l(b.content),b.scale&&l(b.scale),b.font&&l(b.font),b.textColor&&l(b.textColor)}outputDefined(){return!1}}class es{constructor(l){this.type=Mi,this.input=l}static parse(l,b){if(2!==l.length)return b.error("Expected two arguments.");const L=b.parse(l[1],1,an);return L?new es(L):b.error("No image name provided.")}evaluate(l){const b=this.input.evaluate(l),L=co.fromString(b);return L&&l.availableImages&&(L.available=l.availableImages.indexOf(b)>-1),L}eachChild(l){l(this.input)}outputDefined(){return!1}}class Mo{constructor(l){this.type=un,this.input=l}static parse(l,b){if(2!==l.length)return b.error(`Expected 1 argument, but found ${l.length-1} instead.`);const L=b.parse(l[1],1);return L?"array"!==L.type.kind&&"string"!==L.type.kind&&"value"!==L.type.kind?b.error(`Expected argument of type string or array, but found ${$i(L.type)} instead.`):new Mo(L):null}evaluate(l){const b=this.input.evaluate(l);if("string"==typeof b||Array.isArray(b))return b.length;throw new wt(`Expected value to be of type string or array, but found ${$i(Mr(b))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const d1={"==":Sn,"!=":Fc,">":Sc,"<":li,">=":Oa,"<=":Vc,array:Nn,at:Da,boolean:Nn,case:Io,coalesce:aa,collator:ft,format:sa,image:es,in:Dr,"index-of":Zs,interpolate:Ba,"interpolate-hcl":Ba,"interpolate-lab":Ba,length:Mo,let:Ja,literal:at,match:B1,number:Nn,"number-format":ps,object:Nn,slice:u1,step:Vr,string:Nn,"to-boolean":Yn,"to-color":Yn,"to-number":Yn,"to-string":Yn,var:cr,within:ri};function Xr(p,[l,b,L,Y]){l=l.evaluate(p),b=b.evaluate(p),L=L.evaluate(p);const te=Y?Y.evaluate(p):1,re=ro(l,b,L,te);if(re)throw new wt(re);return new Li(l/255,b/255,L/255,te,!1)}function zi(p,l){return p in l}function Hr(p,l){const b=l[p];return void 0===b?null:b}function ks(p){return{type:p}}function ja(p){return{result:"success",value:p}}function ts(p){return{result:"error",value:p}}function $s(p){return"data-driven"===p["property-type"]||"cross-faded-data-driven"===p["property-type"]}function Ns(p){return!!p.expression&&p.expression.parameters.indexOf("zoom")>-1}function j1(p){return!!p.expression&&p.expression.interpolated}function Br(p){return p instanceof Number?"number":p instanceof String?"string":p instanceof Boolean?"boolean":Array.isArray(p)?"array":null===p?"null":typeof p}function jr(p){return"object"==typeof p&&null!==p&&!Array.isArray(p)}function I1(p){return p}function Lo(p,l){const b="color"===l.type,L=p.stops&&"object"==typeof p.stops[0][0],Y=L||!(L||void 0!==p.property),te=p.type||(j1(l)?"exponential":"interval");if(b||"padding"===l.type){const Ze=b?Li.parse:Vi.parse;(p=on({},p)).stops&&(p.stops=p.stops.map(et=>[et[0],Ze(et[1])])),p.default=Ze(p.default?p.default:l.default)}if(p.colorSpace&&"rgb"!==(re=p.colorSpace)&&"hcl"!==re&&"lab"!==re)throw new Error(`Unknown color space: "${p.colorSpace}"`);var re;let ve,ze,ke;if("exponential"===te)ve=Or;else if("interval"===te)ve=Ec;else if("categorical"===te){ve=ns,ze=Object.create(null);for(const Ze of p.stops)ze[Ze[0]]=Ze[1];ke=typeof p.stops[0][0]}else{if("identity"!==te)throw new Error(`Unknown function type "${te}"`);ve=U1}if(L){const Ze={},et=[];for(let Ct=0;Ct<p.stops.length;Ct++){const Rt=p.stops[Ct],qt=Rt[0].zoom;void 0===Ze[qt]&&(Ze[qt]={zoom:qt,type:p.type,property:p.property,default:p.default,stops:[]},et.push(qt)),Ze[qt].stops.push([Rt[0].value,Rt[1]])}const st=[];for(const Ct of et)st.push([Ze[Ct].zoom,Lo(Ze[Ct],l)]);const bt={name:"linear"};return{kind:"composite",interpolationType:bt,interpolationFactor:Ba.interpolationFactor.bind(void 0,bt),zoomStops:st.map(Ct=>Ct[0]),evaluate:({zoom:Ct},Rt)=>Or({stops:st,base:p.base},l,Ct).evaluate(Ct,Rt)}}if(Y){const Ze="exponential"===te?{name:"exponential",base:void 0!==p.base?p.base:1}:null;return{kind:"camera",interpolationType:Ze,interpolationFactor:Ba.interpolationFactor.bind(void 0,Ze),zoomStops:p.stops.map(et=>et[0]),evaluate:({zoom:et})=>ve(p,l,et,ze,ke)}}return{kind:"source",evaluate(Ze,et){const st=et&&et.properties?et.properties[p.property]:void 0;return void 0===st?T1(p.default,l.default):ve(p,l,st,ze,ke)}}}function T1(p,l,b){return void 0!==p?p:void 0!==l?l:void 0!==b?b:void 0}function ns(p,l,b,L,Y){return T1(typeof b===Y?L[b]:void 0,p.default,l.default)}function Ec(p,l,b){if("number"!==Br(b))return T1(p.default,l.default);const L=p.stops.length;if(1===L||b<=p.stops[0][0])return p.stops[0][1];if(b>=p.stops[L-1][0])return p.stops[L-1][1];const Y=Qa(p.stops.map(te=>te[0]),b);return p.stops[Y][1]}function Or(p,l,b){const L=void 0!==p.base?p.base:1;if("number"!==Br(b))return T1(p.default,l.default);const Y=p.stops.length;if(1===Y||b<=p.stops[0][0])return p.stops[0][1];if(b>=p.stops[Y-1][0])return p.stops[Y-1][1];const te=Qa(p.stops.map(Ze=>Ze[0]),b),re=function(Ze,et,st,bt){const Ct=bt-st,Rt=Ze-st;return 0===Ct?0:1===et?Rt/Ct:(Math.pow(et,Rt)-1)/(Math.pow(et,Ct)-1)}(b,L,p.stops[te][0],p.stops[te+1][0]),ve=p.stops[te][1],ze=p.stops[te+1][1],ke=xs[l.type]||I1;return"function"==typeof ve.evaluate?{evaluate(...Ze){const et=ve.evaluate.apply(void 0,Ze),st=ze.evaluate.apply(void 0,Ze);if(void 0!==et&&void 0!==st)return ke(et,st,re,p.colorSpace)}}:ke(ve,ze,re,p.colorSpace)}function U1(p,l,b){switch(l.type){case"color":b=Li.parse(b);break;case"formatted":b=to.fromString(b.toString());break;case"resolvedImage":b=co.fromString(b.toString());break;case"padding":b=Vi.parse(b);break;default:Br(b)===l.type||"enum"===l.type&&l.values[b]||(b=void 0)}return T1(b,p.default,l.default)}yr.register(d1,{error:[{kind:"error"},[an],(p,[l])=>{throw new wt(l.evaluate(p))}],typeof:[an,[qn],(p,[l])=>$i(Mr(l.evaluate(p)))],"to-rgba":[ji(un,4),[_i],(p,[l])=>{const[b,L,Y,te]=l.evaluate(p).rgb;return[255*b,255*L,255*Y,te]}],rgb:[_i,[un,un,un],Xr],rgba:[_i,[un,un,un,un],Xr],has:{type:cn,overloads:[[[an],(p,[l])=>zi(l.evaluate(p),p.properties())],[[an,vi],(p,[l,b])=>zi(l.evaluate(p),b.evaluate(p))]]},get:{type:qn,overloads:[[[an],(p,[l])=>Hr(l.evaluate(p),p.properties())],[[an,vi],(p,[l,b])=>Hr(l.evaluate(p),b.evaluate(p))]]},"feature-state":[qn,[an],(p,[l])=>Hr(l.evaluate(p),p.featureState||{})],properties:[vi,[],p=>p.properties()],"geometry-type":[an,[],p=>p.geometryType()],id:[qn,[],p=>p.id()],zoom:[un,[],p=>p.globals.zoom],"heatmap-density":[un,[],p=>p.globals.heatmapDensity||0],"line-progress":[un,[],p=>p.globals.lineProgress||0],accumulated:[qn,[],p=>void 0===p.globals.accumulated?null:p.globals.accumulated],"+":[un,ks(un),(p,l)=>{let b=0;for(const L of l)b+=L.evaluate(p);return b}],"*":[un,ks(un),(p,l)=>{let b=1;for(const L of l)b*=L.evaluate(p);return b}],"-":{type:un,overloads:[[[un,un],(p,[l,b])=>l.evaluate(p)-b.evaluate(p)],[[un],(p,[l])=>-l.evaluate(p)]]},"/":[un,[un,un],(p,[l,b])=>l.evaluate(p)/b.evaluate(p)],"%":[un,[un,un],(p,[l,b])=>l.evaluate(p)%b.evaluate(p)],ln2:[un,[],()=>Math.LN2],pi:[un,[],()=>Math.PI],e:[un,[],()=>Math.E],"^":[un,[un,un],(p,[l,b])=>Math.pow(l.evaluate(p),b.evaluate(p))],sqrt:[un,[un],(p,[l])=>Math.sqrt(l.evaluate(p))],log10:[un,[un],(p,[l])=>Math.log(l.evaluate(p))/Math.LN10],ln:[un,[un],(p,[l])=>Math.log(l.evaluate(p))],log2:[un,[un],(p,[l])=>Math.log(l.evaluate(p))/Math.LN2],sin:[un,[un],(p,[l])=>Math.sin(l.evaluate(p))],cos:[un,[un],(p,[l])=>Math.cos(l.evaluate(p))],tan:[un,[un],(p,[l])=>Math.tan(l.evaluate(p))],asin:[un,[un],(p,[l])=>Math.asin(l.evaluate(p))],acos:[un,[un],(p,[l])=>Math.acos(l.evaluate(p))],atan:[un,[un],(p,[l])=>Math.atan(l.evaluate(p))],min:[un,ks(un),(p,l)=>Math.min(...l.map(b=>b.evaluate(p)))],max:[un,ks(un),(p,l)=>Math.max(...l.map(b=>b.evaluate(p)))],abs:[un,[un],(p,[l])=>Math.abs(l.evaluate(p))],round:[un,[un],(p,[l])=>{const b=l.evaluate(p);return b<0?-Math.round(-b):Math.round(b)}],floor:[un,[un],(p,[l])=>Math.floor(l.evaluate(p))],ceil:[un,[un],(p,[l])=>Math.ceil(l.evaluate(p))],"filter-==":[cn,[an,qn],(p,[l,b])=>p.properties()[l.value]===b.value],"filter-id-==":[cn,[qn],(p,[l])=>p.id()===l.value],"filter-type-==":[cn,[an],(p,[l])=>p.geometryType()===l.value],"filter-<":[cn,[an,qn],(p,[l,b])=>{const L=p.properties()[l.value],Y=b.value;return typeof L==typeof Y&&L<Y}],"filter-id-<":[cn,[qn],(p,[l])=>{const b=p.id(),L=l.value;return typeof b==typeof L&&b<L}],"filter->":[cn,[an,qn],(p,[l,b])=>{const L=p.properties()[l.value],Y=b.value;return typeof L==typeof Y&&L>Y}],"filter-id->":[cn,[qn],(p,[l])=>{const b=p.id(),L=l.value;return typeof b==typeof L&&b>L}],"filter-<=":[cn,[an,qn],(p,[l,b])=>{const L=p.properties()[l.value],Y=b.value;return typeof L==typeof Y&&L<=Y}],"filter-id-<=":[cn,[qn],(p,[l])=>{const b=p.id(),L=l.value;return typeof b==typeof L&&b<=L}],"filter->=":[cn,[an,qn],(p,[l,b])=>{const L=p.properties()[l.value],Y=b.value;return typeof L==typeof Y&&L>=Y}],"filter-id->=":[cn,[qn],(p,[l])=>{const b=p.id(),L=l.value;return typeof b==typeof L&&b>=L}],"filter-has":[cn,[qn],(p,[l])=>l.value in p.properties()],"filter-has-id":[cn,[],p=>null!==p.id()&&void 0!==p.id()],"filter-type-in":[cn,[ji(an)],(p,[l])=>l.value.indexOf(p.geometryType())>=0],"filter-id-in":[cn,[ji(qn)],(p,[l])=>l.value.indexOf(p.id())>=0],"filter-in-small":[cn,[an,ji(qn)],(p,[l,b])=>b.value.indexOf(p.properties()[l.value])>=0],"filter-in-large":[cn,[an,ji(qn)],(p,[l,b])=>function(L,Y,te,re){for(;te<=re;){const ve=te+re>>1;if(Y[ve]===L)return!0;Y[ve]>L?re=ve-1:te=ve+1}return!1}(p.properties()[l.value],b.value,0,b.value.length-1)],all:{type:cn,overloads:[[[cn,cn],(p,[l,b])=>l.evaluate(p)&&b.evaluate(p)],[ks(cn),(p,l)=>{for(const b of l)if(!b.evaluate(p))return!1;return!0}]]},any:{type:cn,overloads:[[[cn,cn],(p,[l,b])=>l.evaluate(p)||b.evaluate(p)],[ks(cn),(p,l)=>{for(const b of l)if(b.evaluate(p))return!0;return!1}]]},"!":[cn,[cn],(p,[l])=>!l.evaluate(p)],"is-supported-script":[cn,[an],(p,[l])=>{const b=p.globals&&p.globals.isSupportedScript;return!b||b(l.evaluate(p))}],upcase:[an,[an],(p,[l])=>l.evaluate(p).toUpperCase()],downcase:[an,[an],(p,[l])=>l.evaluate(p).toLowerCase()],concat:[an,ks(qn),(p,l)=>l.map(b=>ba(b.evaluate(p))).join("")],"resolved-locale":[an,[Pi],(p,[l])=>l.evaluate(p).resolvedLocale()]});class vr{constructor(l,b){var L;this.expression=l,this._warningHistory={},this._evaluator=new Kn,this._defaultValue=b?"color"===(L=b).type&&jr(L.default)?new Li(0,0,0,0):"color"===L.type?Li.parse(L.default)||null:"padding"===L.type?Vi.parse(L.default)||null:"variableAnchorOffsetCollection"===L.type?Ii.parse(L.default)||null:void 0===L.default?null:L.default:null,this._enumValues=b&&"enum"===b.type?b.values:null}evaluateWithoutErrorHandling(l,b,L,Y,te,re){return this._evaluator.globals=l,this._evaluator.feature=b,this._evaluator.featureState=L,this._evaluator.canonical=Y,this._evaluator.availableImages=te||null,this._evaluator.formattedSection=re,this.expression.evaluate(this._evaluator)}evaluate(l,b,L,Y,te,re){this._evaluator.globals=l,this._evaluator.feature=b||null,this._evaluator.featureState=L||null,this._evaluator.canonical=Y,this._evaluator.availableImages=te||null,this._evaluator.formattedSection=re||null;try{const ve=this.expression.evaluate(this._evaluator);if(null==ve||"number"==typeof ve&&ve!=ve)return this._defaultValue;if(this._enumValues&&!(ve in this._enumValues))throw new wt(`Expected value to be one of ${Object.keys(this._enumValues).map(ze=>JSON.stringify(ze)).join(", ")}, but found ${JSON.stringify(ve)} instead.`);return ve}catch(ve){return this._warningHistory[ve.message]||(this._warningHistory[ve.message]=!0,typeof console<"u"&&console.warn(ve.message)),this._defaultValue}}}function Ac(p){return Array.isArray(p)&&p.length>0&&"string"==typeof p[0]&&p[0]in d1}function hr(p,l){const b=new Ot(d1,xa,[],l?function(Y){const te={color:_i,string:an,number:un,enum:an,boolean:cn,formatted:ci,padding:Ei,resolvedImage:Mi,variableAnchorOffsetCollection:Zi};return"array"===Y.type?ji(te[Y.value]||qn,Y.length):te[Y.type]}(l):void 0),L=b.parse(p,void 0,void 0,void 0,l&&"string"===l.type?{typeAnnotation:"coerce"}:void 0);return L?ja(new vr(L,l)):ts(b.errors)}class za{constructor(l,b){this.kind=l,this._styleExpression=b,this.isStateDependent="constant"!==l&&!wa(b.expression)}evaluateWithoutErrorHandling(l,b,L,Y,te,re){return this._styleExpression.evaluateWithoutErrorHandling(l,b,L,Y,te,re)}evaluate(l,b,L,Y,te,re){return this._styleExpression.evaluate(l,b,L,Y,te,re)}}class Do{constructor(l,b,L,Y){this.kind=l,this.zoomStops=L,this._styleExpression=b,this.isStateDependent="camera"!==l&&!wa(b.expression),this.interpolationType=Y}evaluateWithoutErrorHandling(l,b,L,Y,te,re){return this._styleExpression.evaluateWithoutErrorHandling(l,b,L,Y,te,re)}evaluate(l,b,L,Y,te,re){return this._styleExpression.evaluate(l,b,L,Y,te,re)}interpolationFactor(l,b,L){return this.interpolationType?Ba.interpolationFactor(this.interpolationType,l,b,L):0}}function $r(p,l){const b=hr(p,l);if("error"===b.result)return b;const L=b.value.expression,Y=Sa(L);if(!Y&&!$s(l))return ts([new Qt("","data expressions not supported")]);const te=Xs(L,["zoom"]);if(!te&&!Ns(l))return ts([new Qt("","zoom expressions not supported")]);const re=Ua(L);return re||te?re instanceof Qt?ts([re]):re instanceof Ba&&!j1(l)?ts([new Qt("",'"interpolate" expressions cannot be used with this property')]):ja(re?new Do(Y?"camera":"composite",b.value,re.labels,re instanceof Ba?re.interpolation:void 0):new za(Y?"constant":"source",b.value)):ts([new Qt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ir{constructor(l,b){this._parameters=l,this._specification=b,on(this,Lo(this._parameters,this._specification))}static deserialize(l){return new Ir(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Ua(p){let l=null;if(p instanceof Ja)l=Ua(p.result);else if(p instanceof aa){for(const b of p.args)if(l=Ua(b),l)break}else(p instanceof Vr||p instanceof Ba)&&p.input instanceof yr&&"zoom"===p.input.name&&(l=p);return l instanceof Qt||p.eachChild(b=>{const L=Ua(b);L instanceof Qt?l=L:!l&&L?l=new Qt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&L&&l!==L&&(l=new Qt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function G1(p){if(!0===p||!1===p)return!0;if(!Array.isArray(p)||0===p.length)return!1;switch(p[0]){case"has":return p.length>=2&&"$id"!==p[1]&&"$type"!==p[1];case"in":return p.length>=3&&("string"!=typeof p[1]||Array.isArray(p[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==p.length||Array.isArray(p[1])||Array.isArray(p[2]);case"any":case"all":for(const l of p.slice(1))if(!G1(l)&&"boolean"!=typeof l)return!1;return!0;default:return!0}}const Rs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function is(p){if(null==p)return{filter:()=>!0,needGeometry:!1};G1(p)||(p=Bc(p));const l=hr(p,Rs);if("error"===l.result)throw new Error(l.value.map(b=>`${b.key}: ${b.message}`).join(", "));return{filter:(b,L,Y)=>l.value.evaluate(b,L,{},Y),needGeometry:Hc(p)}}function Ga(p,l){return p<l?-1:p>l?1:0}function Hc(p){if(!Array.isArray(p))return!1;if("within"===p[0])return!0;for(let l=1;l<p.length;l++)if(Hc(p[l]))return!0;return!1}function Bc(p){if(!p)return!0;const l=p[0];return p.length<=1?"any"!==l:"=="===l?ar(p[1],p[2],"=="):"!="===l?ca(ar(p[1],p[2],"==")):"<"===l||">"===l||"<="===l||">="===l?ar(p[1],p[2],l):"any"===l?(b=p.slice(1),["any"].concat(b.map(Bc))):"all"===l?["all"].concat(p.slice(1).map(Bc)):"none"===l?["all"].concat(p.slice(1).map(Bc).map(ca)):"in"===l?Pa(p[1],p.slice(2)):"!in"===l?ca(Pa(p[1],p.slice(2))):"has"===l?rs(p[1]):"!has"===l?ca(rs(p[1])):"within"!==l||p;var b}function ar(p,l,b){switch(p){case"$type":return[`filter-type-${b}`,l];case"$id":return[`filter-id-${b}`,l];default:return[`filter-${b}`,p,l]}}function Pa(p,l){if(0===l.length)return!1;switch(p){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(b=>typeof b!=typeof l[0])?["filter-in-large",p,["literal",l.sort(Ga)]]:["filter-in-small",p,["literal",l]]}}function rs(p){switch(p){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",p]}}function ca(p){return["!",p]}function wi(p){const l=typeof p;if("number"===l||"boolean"===l||"string"===l||null==p)return JSON.stringify(p);if(Array.isArray(p)){let Y="[";for(const te of p)Y+=`${wi(te)},`;return`${Y}]`}const b=Object.keys(p).sort();let L="{";for(let Y=0;Y<b.length;Y++)L+=`${JSON.stringify(b[Y])}:${wi(p[b[Y]])},`;return`${L}}`}function L1(p){let l="";for(const b of je)l+=`/${wi(p[b])}`;return l}function Tr(p){const l=p.value;return l?[new gt(p.key,l,"constants have been deprecated as of v8")]:[]}function In(p){return p instanceof Number||p instanceof String||p instanceof Boolean?p.valueOf():p}function kr(p){if(Array.isArray(p))return p.map(kr);if(p instanceof Object&&!(p instanceof Number||p instanceof String||p instanceof Boolean)){const l={};for(const b in p)l[b]=kr(p[b]);return l}return In(p)}function Lr(p){const l=p.key,b=p.value,L=p.valueSpec||{},Y=p.objectElementValidators||{},te=p.style,re=p.styleSpec,ve=p.validateSpec;let ze=[];const ke=Br(b);if("object"!==ke)return[new gt(l,b,`object expected, ${ke} found`)];for(const Ze in b){const et=Ze.split(".")[0],st=L[et]||L["*"];let bt;if(Y[et])bt=Y[et];else if(L[et])bt=ve;else if(Y["*"])bt=Y["*"];else{if(!L["*"]){ze.push(new gt(l,b[Ze],`unknown property "${Ze}"`));continue}bt=ve}ze=ze.concat(bt({key:(l&&`${l}.`)+Ze,value:b[Ze],valueSpec:st,style:te,styleSpec:re,object:b,objectKey:Ze,validateSpec:ve},b))}for(const Ze in L)Y[Ze]||L[Ze].required&&void 0===L[Ze].default&&void 0===b[Ze]&&ze.push(new gt(l,b,`missing required property "${Ze}"`));return ze}function os(p){const l=p.value,b=p.valueSpec,L=p.style,Y=p.styleSpec,te=p.key,re=p.arrayElementValidator||p.validateSpec;if("array"!==Br(l))return[new gt(te,l,`array expected, ${Br(l)} found`)];if(b.length&&l.length!==b.length)return[new gt(te,l,`array length ${b.length} expected, length ${l.length} found`)];if(b["min-length"]&&l.length<b["min-length"])return[new gt(te,l,`array length at least ${b["min-length"]} expected, length ${l.length} found`)];let ve={type:b.value,values:b.values};Y.$version<7&&(ve.function=b.function),"object"===Br(b.value)&&(ve=b.value);let ze=[];for(let ke=0;ke<l.length;ke++)ze=ze.concat(re({array:l,arrayIndex:ke,value:l[ke],valueSpec:ve,validateSpec:p.validateSpec,style:L,styleSpec:Y,key:`${te}[${ke}]`}));return ze}function uo(p){const l=p.key,b=p.value,L=p.valueSpec;let Y=Br(b);return"number"===Y&&b!=b&&(Y="NaN"),"number"!==Y?[new gt(l,b,`number expected, ${Y} found`)]:"minimum"in L&&b<L.minimum?[new gt(l,b,`${b} is less than the minimum value ${L.minimum}`)]:"maximum"in L&&b>L.maximum?[new gt(l,b,`${b} is greater than the maximum value ${L.maximum}`)]:[]}function qs(p){const l=p.valueSpec,b=In(p.value.type);let L,Y,te,re={};const ve="categorical"!==b&&void 0===p.value.property,ze=!ve,ke="array"===Br(p.value.stops)&&"array"===Br(p.value.stops[0])&&"object"===Br(p.value.stops[0][0]),Ze=Lr({key:p.key,value:p.value,valueSpec:p.styleSpec.function,validateSpec:p.validateSpec,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(bt){if("identity"===b)return[new gt(bt.key,bt.value,'identity function may not have a "stops" property')];let Ct=[];const Rt=bt.value;return Ct=Ct.concat(os({key:bt.key,value:Rt,valueSpec:bt.valueSpec,validateSpec:bt.validateSpec,style:bt.style,styleSpec:bt.styleSpec,arrayElementValidator:et})),"array"===Br(Rt)&&0===Rt.length&&Ct.push(new gt(bt.key,Rt,"array must have at least one stop")),Ct},default:function(bt){return bt.validateSpec({key:bt.key,value:bt.value,valueSpec:l,validateSpec:bt.validateSpec,style:bt.style,styleSpec:bt.styleSpec})}}});return"identity"===b&&ve&&Ze.push(new gt(p.key,p.value,'missing required property "property"')),"identity"===b||p.value.stops||Ze.push(new gt(p.key,p.value,'missing required property "stops"')),"exponential"===b&&p.valueSpec.expression&&!j1(p.valueSpec)&&Ze.push(new gt(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(ze&&!$s(p.valueSpec)?Ze.push(new gt(p.key,p.value,"property functions not supported")):ve&&!Ns(p.valueSpec)&&Ze.push(new gt(p.key,p.value,"zoom functions not supported"))),"categorical"!==b&&!ke||void 0!==p.value.property||Ze.push(new gt(p.key,p.value,'"property" property is required')),Ze;function et(bt){let Ct=[];const Rt=bt.value,qt=bt.key;if("array"!==Br(Rt))return[new gt(qt,Rt,`array expected, ${Br(Rt)} found`)];if(2!==Rt.length)return[new gt(qt,Rt,`array length 2 expected, length ${Rt.length} found`)];if(ke){if("object"!==Br(Rt[0]))return[new gt(qt,Rt,`object expected, ${Br(Rt[0])} found`)];if(void 0===Rt[0].zoom)return[new gt(qt,Rt,"object stop key must have zoom")];if(void 0===Rt[0].value)return[new gt(qt,Rt,"object stop key must have value")];if(te&&te>In(Rt[0].zoom))return[new gt(qt,Rt[0].zoom,"stop zoom values must appear in ascending order")];In(Rt[0].zoom)!==te&&(te=In(Rt[0].zoom),Y=void 0,re={}),Ct=Ct.concat(Lr({key:`${qt}[0]`,value:Rt[0],valueSpec:{zoom:{}},validateSpec:bt.validateSpec,style:bt.style,styleSpec:bt.styleSpec,objectElementValidators:{zoom:uo,value:st}}))}else Ct=Ct.concat(st({key:`${qt}[0]`,value:Rt[0],valueSpec:{},validateSpec:bt.validateSpec,style:bt.style,styleSpec:bt.styleSpec},Rt));return Ac(kr(Rt[1]))?Ct.concat([new gt(`${qt}[1]`,Rt[1],"expressions are not allowed in function stops.")]):Ct.concat(bt.validateSpec({key:`${qt}[1]`,value:Rt[1],valueSpec:l,validateSpec:bt.validateSpec,style:bt.style,styleSpec:bt.styleSpec}))}function st(bt,Ct){const Rt=Br(bt.value),qt=In(bt.value),Jt=null!==bt.value?bt.value:Ct;if(L){if(Rt!==L)return[new gt(bt.key,Jt,`${Rt} stop domain type must match previous stop domain type ${L}`)]}else L=Rt;if("number"!==Rt&&"string"!==Rt&&"boolean"!==Rt)return[new gt(bt.key,Jt,"stop domain value must be a number, string, or boolean")];if("number"!==Rt&&"categorical"!==b){let yn=`number expected, ${Rt} found`;return $s(l)&&void 0===b&&(yn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new gt(bt.key,Jt,yn)]}return"categorical"!==b||"number"!==Rt||isFinite(qt)&&Math.floor(qt)===qt?"categorical"!==b&&"number"===Rt&&void 0!==Y&&qt<Y?[new gt(bt.key,Jt,"stop domain values must appear in ascending order")]:(Y=qt,"categorical"===b&&qt in re?[new gt(bt.key,Jt,"stop domain values must be unique")]:(re[qt]=!0,[])):[new gt(bt.key,Jt,`integer expected, found ${qt}`)]}}function bo(p){const l=("property"===p.expressionContext?$r:hr)(kr(p.value),p.valueSpec);if("error"===l.result)return l.value.map(L=>new gt(`${p.key}${L.key}`,p.value,L.message));const b=l.value.expression||l.value._styleExpression.expression;if("property"===p.expressionContext&&"text-font"===p.propertyKey&&!b.outputDefined())return[new gt(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===p.expressionContext&&"layout"===p.propertyType&&!wa(b))return[new gt(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===p.expressionContext&&!wa(b))return[new gt(p.key,p.value,'"feature-state" data expressions are not supported with filters.')];if(p.expressionContext&&0===p.expressionContext.indexOf("cluster")){if(!Xs(b,["zoom","feature-state"]))return[new gt(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===p.expressionContext&&!Sa(b))return[new gt(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Kc(p){const l=p.key,b=p.value,L=p.valueSpec,Y=[];return Array.isArray(L.values)?-1===L.values.indexOf(In(b))&&Y.push(new gt(l,b,`expected one of [${L.values.join(", ")}], ${JSON.stringify(b)} found`)):-1===Object.keys(L.values).indexOf(In(b))&&Y.push(new gt(l,b,`expected one of [${Object.keys(L.values).join(", ")}], ${JSON.stringify(b)} found`)),Y}function Wa(p){return G1(kr(p.value))?bo(on({},p,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qc(p)}function Qc(p){const l=p.value,b=p.key;if("array"!==Br(l))return[new gt(b,l,`array expected, ${Br(l)} found`)];const L=p.styleSpec;let Y,te=[];if(l.length<1)return[new gt(b,l,"filter array must have at least 1 element")];switch(te=te.concat(Kc({key:`${b}[0]`,value:l[0],valueSpec:L.filter_operator,style:p.style,styleSpec:p.styleSpec})),In(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&"$type"===In(l[1])&&te.push(new gt(b,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":3!==l.length&&te.push(new gt(b,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(Y=Br(l[1]),"string"!==Y&&te.push(new gt(`${b}[1]`,l[1],`string expected, ${Y} found`)));for(let re=2;re<l.length;re++)Y=Br(l[re]),"$type"===In(l[1])?te=te.concat(Kc({key:`${b}[${re}]`,value:l[re],valueSpec:L.geometry_type,style:p.style,styleSpec:p.styleSpec})):"string"!==Y&&"number"!==Y&&"boolean"!==Y&&te.push(new gt(`${b}[${re}]`,l[re],`string, number, or boolean expected, ${Y} found`));break;case"any":case"all":case"none":for(let re=1;re<l.length;re++)te=te.concat(Qc({key:`${b}[${re}]`,value:l[re],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":Y=Br(l[1]),2!==l.length?te.push(new gt(b,l,`filter array for "${l[0]}" operator must have 2 elements`)):"string"!==Y&&te.push(new gt(`${b}[1]`,l[1],`string expected, ${Y} found`));break;case"within":Y=Br(l[1]),2!==l.length?te.push(new gt(b,l,`filter array for "${l[0]}" operator must have 2 elements`)):"object"!==Y&&te.push(new gt(`${b}[1]`,l[1],`object expected, ${Y} found`))}return te}function jc(p,l){const b=p.key,L=p.validateSpec,Y=p.style,te=p.styleSpec,re=p.value,ve=p.objectKey,ze=te[`${l}_${p.layerType}`];if(!ze)return[];const ke=ve.match(/^(.*)-transition$/);if("paint"===l&&ke&&ze[ke[1]]&&ze[ke[1]].transition)return L({key:b,value:re,valueSpec:te.transition,style:Y,styleSpec:te});const Ze=p.valueSpec||ze[ve];if(!Ze)return[new gt(b,re,`unknown property "${ve}"`)];let et;if("string"===Br(re)&&$s(Ze)&&!Ze.tokens&&(et=/^{([^}]+)}$/.exec(re)))return[new gt(b,re,`"${ve}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(et[1])} }\`.`)];const st=[];return"symbol"===p.layerType&&("text-field"===ve&&Y&&!Y.glyphs&&st.push(new gt(b,re,'use of "text-field" requires a style "glyphs" property')),"text-font"===ve&&jr(kr(re))&&"identity"===In(re.type)&&st.push(new gt(b,re,'"text-font" does not support identity functions'))),st.concat(L({key:p.key,value:re,valueSpec:Ze,style:Y,styleSpec:te,expressionContext:"property",propertyType:l,propertyKey:ve}))}function yc(p){return jc(p,"paint")}function la(p){return jc(p,"layout")}function Si(p){let l=[];const b=p.value,L=p.key,Y=p.style,te=p.styleSpec;b.type||b.ref||l.push(new gt(L,b,'either "type" or "ref" is required'));let re=In(b.type);const ve=In(b.ref);if(b.id){const ze=In(b.id);for(let ke=0;ke<p.arrayIndex;ke++){const Ze=Y.layers[ke];In(Ze.id)===ze&&l.push(new gt(L,b.id,`duplicate layer id "${b.id}", previously used at line ${Ze.id.__line__}`))}}if("ref"in b){let ze;["type","source","source-layer","filter","layout"].forEach(ke=>{ke in b&&l.push(new gt(L,b[ke],`"${ke}" is prohibited for ref layers`))}),Y.layers.forEach(ke=>{In(ke.id)===ve&&(ze=ke)}),ze?ze.ref?l.push(new gt(L,b.ref,"ref cannot reference another ref layer")):re=In(ze.type):l.push(new gt(L,b.ref,`ref layer "${ve}" not found`))}else if("background"!==re)if(b.source){const ze=Y.sources&&Y.sources[b.source],ke=ze&&In(ze.type);ze?"vector"===ke&&"raster"===re?l.push(new gt(L,b.source,`layer "${b.id}" requires a raster source`)):"raster"===ke&&"raster"!==re?l.push(new gt(L,b.source,`layer "${b.id}" requires a vector source`)):"vector"!==ke||b["source-layer"]?"raster-dem"===ke&&"hillshade"!==re?l.push(new gt(L,b.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==re||!b.paint||!b.paint["line-gradient"]||"geojson"===ke&&ze.lineMetrics||l.push(new gt(L,b,`layer "${b.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new gt(L,b,`layer "${b.id}" must specify a "source-layer"`)):l.push(new gt(L,b.source,`source "${b.source}" not found`))}else l.push(new gt(L,b,'missing required property "source"'));return l=l.concat(Lr({key:L,value:b,valueSpec:te.layer,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,objectElementValidators:{"*":()=>[],type:()=>p.validateSpec({key:`${L}.type`,value:b.type,valueSpec:te.layer.type,style:p.style,styleSpec:p.styleSpec,validateSpec:p.validateSpec,object:b,objectKey:"type"}),filter:Wa,layout:ze=>Lr({layer:b,key:ze.key,value:ze.value,style:ze.style,styleSpec:ze.styleSpec,validateSpec:ze.validateSpec,objectElementValidators:{"*":ke=>la(on({layerType:re},ke))}}),paint:ze=>Lr({layer:b,key:ze.key,value:ze.value,style:ze.style,styleSpec:ze.styleSpec,validateSpec:ze.validateSpec,objectElementValidators:{"*":ke=>yc(on({layerType:re},ke))}})}})),l}function ur(p){const l=p.value,b=p.key,L=Br(l);return"string"!==L?[new gt(b,l,`string expected, ${L} found`)]:[]}const ho={promoteId:function({key:p,value:l}){if("string"===Br(l))return ur({key:p,value:l});{const b=[];for(const L in l)b.push(...ur({key:`${p}.${L}`,value:l[L]}));return b}}};function fo(p){const l=p.value,b=p.key,L=p.styleSpec,Y=p.style,te=p.validateSpec;if(!l.type)return[new gt(b,l,'"type" is required')];const re=In(l.type);let ve;switch(re){case"vector":case"raster":case"raster-dem":return ve=Lr({key:b,value:l,valueSpec:L[`source_${re.replace("-","_")}`],style:p.style,styleSpec:L,objectElementValidators:ho,validateSpec:te}),ve;case"geojson":if(ve=Lr({key:b,value:l,valueSpec:L.source_geojson,style:Y,styleSpec:L,validateSpec:te,objectElementValidators:ho}),l.cluster)for(const ze in l.clusterProperties){const[ke,Ze]=l.clusterProperties[ze],et="string"==typeof ke?[ke,["accumulated"],["get",ze]]:ke;ve.push(...bo({key:`${b}.${ze}.map`,value:Ze,validateSpec:te,expressionContext:"cluster-map"})),ve.push(...bo({key:`${b}.${ze}.reduce`,value:et,validateSpec:te,expressionContext:"cluster-reduce"}))}return ve;case"video":return Lr({key:b,value:l,valueSpec:L.source_video,style:Y,validateSpec:te,styleSpec:L});case"image":return Lr({key:b,value:l,valueSpec:L.source_image,style:Y,validateSpec:te,styleSpec:L});case"canvas":return[new gt(b,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Kc({key:`${b}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Y,validateSpec:te,styleSpec:L})}}function cc(p){const l=p.value,b=p.styleSpec,L=b.light,Y=p.style;let te=[];const re=Br(l);if(void 0===l)return te;if("object"!==re)return te=te.concat([new gt("light",l,`object expected, ${re} found`)]),te;for(const ve in l){const ze=ve.match(/^(.*)-transition$/);te=te.concat(ze&&L[ze[1]]&&L[ze[1]].transition?p.validateSpec({key:ve,value:l[ve],valueSpec:b.transition,validateSpec:p.validateSpec,style:Y,styleSpec:b}):L[ve]?p.validateSpec({key:ve,value:l[ve],valueSpec:L[ve],validateSpec:p.validateSpec,style:Y,styleSpec:b}):[new gt(ve,l[ve],`unknown property "${ve}"`)])}return te}function po(p){const l=p.value,b=p.styleSpec,L=b.terrain,Y=p.style;let te=[];const re=Br(l);if(void 0===l)return te;if("object"!==re)return te=te.concat([new gt("terrain",l,`object expected, ${re} found`)]),te;for(const ve in l)te=te.concat(L[ve]?p.validateSpec({key:ve,value:l[ve],valueSpec:L[ve],validateSpec:p.validateSpec,style:Y,styleSpec:b}):[new gt(ve,l[ve],`unknown property "${ve}"`)]);return te}function Fs(p){let l=[];const b=p.value,L=p.key;if(Array.isArray(b)){const Y=[],te=[];for(const re in b)b[re].id&&Y.includes(b[re].id)&&l.push(new gt(L,b,`all the sprites' ids must be unique, but ${b[re].id} is duplicated`)),Y.push(b[re].id),b[re].url&&te.includes(b[re].url)&&l.push(new gt(L,b,`all the sprites' URLs must be unique, but ${b[re].url} is duplicated`)),te.push(b[re].url),l=l.concat(Lr({key:`${L}[${re}]`,value:b[re],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:p.validateSpec}));return l}return ur({key:L,value:b})}const pa={"*":()=>[],array:os,boolean:function(p){const l=p.value,b=p.key,L=Br(l);return"boolean"!==L?[new gt(b,l,`boolean expected, ${L} found`)]:[]},number:uo,color:function(p){const l=p.key,b=p.value,L=Br(b);return"string"!==L?[new gt(l,b,`color expected, ${L} found`)]:Li.parse(String(b))?[]:[new gt(l,b,`color expected, "${b}" found`)]},constants:Tr,enum:Kc,filter:Wa,function:qs,layer:Si,object:Lr,source:fo,light:cc,terrain:po,string:ur,formatted:function(p){return 0===ur(p).length?[]:bo(p)},resolvedImage:function(p){return 0===ur(p).length?[]:bo(p)},padding:function(p){const l=p.key,b=p.value;if("array"===Br(b)){if(b.length<1||b.length>4)return[new gt(l,b,`padding requires 1 to 4 values; ${b.length} values found`)];const L={type:"number"};let Y=[];for(let te=0;te<b.length;te++)Y=Y.concat(p.validateSpec({key:`${l}[${te}]`,value:b[te],validateSpec:p.validateSpec,valueSpec:L}));return Y}return uo({key:l,value:b,valueSpec:{}})},variableAnchorOffsetCollection:function(p){const l=p.key,b=p.value,L=Br(b),Y=p.styleSpec;if("array"!==L||b.length<1||b.length%2!=0)return[new gt(l,b,"variableAnchorOffsetCollection requires a non-empty array of even length")];let te=[];for(let re=0;re<b.length;re+=2)te=te.concat(Kc({key:`${l}[${re}]`,value:b[re],valueSpec:Y.layout_symbol["text-anchor"]})),te=te.concat(os({key:`${l}[${re+1}]`,value:b[re+1],valueSpec:{length:2,value:"number"},validateSpec:p.validateSpec,style:p.style,styleSpec:Y}));return te},sprite:Fs};function y1(p){const l=p.value,b=p.valueSpec,L=p.styleSpec;return p.validateSpec=y1,b.expression&&jr(In(l))?qs(p):b.expression&&Ac(kr(l))?bo(p):b.type&&pa[b.type]?pa[b.type](p):Lr(on({},p,{valueSpec:b.type?L[b.type]:b}))}function h1(p){const l=p.value,b=p.key,L=ur(p);return L.length||(-1===l.indexOf("{fontstack}")&&L.push(new gt(b,l,'"glyphs" url must include a "{fontstack}" token')),-1===l.indexOf("{range}")&&L.push(new gt(b,l,'"glyphs" url must include a "{range}" token'))),L}function qi(p,l=Pe){let b=[];return b=b.concat(y1({key:"",value:p,valueSpec:l.$root,styleSpec:l,style:p,validateSpec:y1,objectElementValidators:{glyphs:h1,"*":()=>[]}})),p.constants&&(b=b.concat(Tr({key:"constants",value:p.constants,style:p,styleSpec:l,validateSpec:y1}))),ka(b)}function vo(p){return function(l){return p({...l,validateSpec:y1})}}function ka(p){return[].concat(p).sort((l,b)=>l.line-b.line)}function Ia(p){return function(...l){return ka(p.apply(this,l))}}qi.source=Ia(vo(fo)),qi.sprite=Ia(vo(Fs)),qi.glyphs=Ia(vo(h1)),qi.light=Ia(vo(cc)),qi.terrain=Ia(vo(po)),qi.layer=Ia(vo(Si)),qi.filter=Ia(vo(Wa)),qi.paintProperty=Ia(vo(yc)),qi.layoutProperty=Ia(vo(la));const Gr=qi,L2=Gr.light,Vs=Gr.paintProperty,Es=Gr.layoutProperty;function ma(p,l){let b=!1;if(l&&l.length)for(const L of l)p.fire(new $e(new Error(L.message))),b=!0;return b}class Ea{constructor(l,b,L){const Y=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const re=new Int32Array(this.arrayBuffer);l=re[0],this.d=(b=re[1])+2*(L=re[2]);for(let ze=0;ze<this.d*this.d;ze++){const ke=re[3+ze],Ze=re[3+ze+1];Y.push(ke===Ze?null:re.subarray(ke,Ze))}const ve=re[3+Y.length+1];this.keys=re.subarray(re[3+Y.length],ve),this.bboxes=re.subarray(ve),this.insert=this._insertReadonly}else{this.d=b+2*L;for(let re=0;re<this.d*this.d;re++)Y.push([]);this.keys=[],this.bboxes=[]}this.n=b,this.extent=l,this.padding=L,this.scale=b/l,this.uid=0;const te=L/b*l;this.min=-te,this.max=l+te}insert(l,b,L,Y,te){this._forEachCell(b,L,Y,te,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(b),this.bboxes.push(L),this.bboxes.push(Y),this.bboxes.push(te)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,b,L,Y,te,re){this.cells[te].push(re)}query(l,b,L,Y,te){const re=this.min,ve=this.max;if(l<=re&&b<=re&&ve<=L&&ve<=Y&&!te)return Array.prototype.slice.call(this.keys);{const ze=[];return this._forEachCell(l,b,L,Y,this._queryCell,ze,{},te),ze}}_queryCell(l,b,L,Y,te,re,ve,ze){const ke=this.cells[te];if(null!==ke){const Ze=this.keys,et=this.bboxes;for(let st=0;st<ke.length;st++){const bt=ke[st];if(void 0===ve[bt]){const Ct=4*bt;(ze?ze(et[Ct+0],et[Ct+1],et[Ct+2],et[Ct+3]):l<=et[Ct+2]&&b<=et[Ct+3]&&L>=et[Ct+0]&&Y>=et[Ct+1])?(ve[bt]=!0,re.push(Ze[bt])):ve[bt]=!1}}}}_forEachCell(l,b,L,Y,te,re,ve,ze){const ke=this._convertToCellCoord(l),Ze=this._convertToCellCoord(b),et=this._convertToCellCoord(L),st=this._convertToCellCoord(Y);for(let bt=ke;bt<=et;bt++)for(let Ct=Ze;Ct<=st;Ct++){const Rt=this.d*Ct+bt;if((!ze||ze(this._convertFromCellCoord(bt),this._convertFromCellCoord(Ct),this._convertFromCellCoord(bt+1),this._convertFromCellCoord(Ct+1)))&&te.call(this,l,b,L,Y,Rt,re,ve,ze))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,b=3+this.cells.length+1+1;let L=0;for(let re=0;re<this.cells.length;re++)L+=this.cells[re].length;const Y=new Int32Array(b+L+this.keys.length+this.bboxes.length);Y[0]=this.extent,Y[1]=this.n,Y[2]=this.padding;let te=b;for(let re=0;re<l.length;re++){const ve=l[re];Y[3+re]=te,Y.set(ve,te),te+=ve.length}return Y[3+l.length]=te,Y.set(this.keys,te),te+=this.keys.length,Y[3+l.length+1]=te,Y.set(this.bboxes,te),te+=this.bboxes.length,Y.buffer}static serialize(l,b){const L=l.toArrayBuffer();return b&&b.push(L),{buffer:L}}static deserialize(l){return new Ea(l.buffer)}}const ua={};function ui(p,l,b={}){if(ua[p])throw new Error(`${p} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:p,writeable:!1}),ua[p]={klass:l,omit:b.omit||[],shallow:b.shallow||[]}}ui("Object",Object),ui("TransferableGridIndex",Ea),ui("Color",Li),ui("Error",Error),ui("AJAXError",de),ui("ResolvedImage",co),ui("StylePropertyFunction",Ir),ui("StyleExpression",vr,{omit:["_evaluator"]}),ui("ZoomDependentExpression",Do),ui("ZoomConstantExpression",za),ui("CompoundExpression",yr,{omit:["_evaluate"]});for(const p in d1)d1[p]._classRegistryKey||ui(`Expression_${p}`,d1[p]);function lc(p){return p&&typeof ArrayBuffer<"u"&&(p instanceof ArrayBuffer||p.constructor&&"ArrayBuffer"===p.constructor.name)}function f1(p,l){if(null==p||"boolean"==typeof p||"number"==typeof p||"string"==typeof p||p instanceof Boolean||p instanceof Number||p instanceof String||p instanceof Date||p instanceof RegExp||p instanceof Blob)return p;if(lc(p)||ne(p))return l&&l.push(p),p;if(ArrayBuffer.isView(p)){const b=p;return l&&l.push(b.buffer),b}if(p instanceof ImageData)return l&&l.push(p.data.buffer),p;if(Array.isArray(p)){const b=[];for(const L of p)b.push(f1(L,l));return b}if("object"==typeof p){const b=p.constructor,L=b._classRegistryKey;if(!L)throw new Error("can't serialize object of unregistered class");if(!ua[L])throw new Error(`${L} is not registered.`);const Y=b.serialize?b.serialize(p,l):{};if(b.serialize){if(l&&Y===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const te in p){if(!p.hasOwnProperty(te)||ua[L].omit.indexOf(te)>=0)continue;const re=p[te];Y[te]=ua[L].shallow.indexOf(te)>=0?re:f1(re,l)}p instanceof Error&&(Y.message=p.message)}if(Y.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==L&&(Y.$name=L),Y}throw new Error("can't serialize object of type "+typeof p)}function Ar(p){if(null==p||"boolean"==typeof p||"number"==typeof p||"string"==typeof p||p instanceof Boolean||p instanceof Number||p instanceof String||p instanceof Date||p instanceof RegExp||p instanceof Blob||lc(p)||ne(p)||ArrayBuffer.isView(p)||p instanceof ImageData)return p;if(Array.isArray(p))return p.map(Ar);if("object"==typeof p){const l=p.$name||"Object";if(!ua[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:b}=ua[l];if(!b)throw new Error(`can't deserialize unregistered class ${l}`);if(b.deserialize)return b.deserialize(p);const L=Object.create(b.prototype);for(const Y of Object.keys(p)){if("$name"===Y)continue;const te=p[Y];L[Y]=ua[l].shallow.indexOf(Y)>=0?te:Ar(te)}return L}throw new Error("can't deserialize object of type "+typeof p)}class Ks{constructor(){this.first=!0}update(l,b){const L=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=L,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=L,!0):(this.lastFloorZoom>L?(this.lastIntegerZoom=L+1,this.lastIntegerZoomTime=b):this.lastFloorZoom<L&&(this.lastIntegerZoom=L,this.lastIntegerZoomTime=b),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=L,!0))}}const gi={"Latin-1 Supplement":p=>p>=128&&p<=255,Arabic:p=>p>=1536&&p<=1791,"Arabic Supplement":p=>p>=1872&&p<=1919,"Arabic Extended-A":p=>p>=2208&&p<=2303,"Hangul Jamo":p=>p>=4352&&p<=4607,"Unified Canadian Aboriginal Syllabics":p=>p>=5120&&p<=5759,Khmer:p=>p>=6016&&p<=6143,"Unified Canadian Aboriginal Syllabics Extended":p=>p>=6320&&p<=6399,"General Punctuation":p=>p>=8192&&p<=8303,"Letterlike Symbols":p=>p>=8448&&p<=8527,"Number Forms":p=>p>=8528&&p<=8591,"Miscellaneous Technical":p=>p>=8960&&p<=9215,"Control Pictures":p=>p>=9216&&p<=9279,"Optical Character Recognition":p=>p>=9280&&p<=9311,"Enclosed Alphanumerics":p=>p>=9312&&p<=9471,"Geometric Shapes":p=>p>=9632&&p<=9727,"Miscellaneous Symbols":p=>p>=9728&&p<=9983,"Miscellaneous Symbols and Arrows":p=>p>=11008&&p<=11263,"CJK Radicals Supplement":p=>p>=11904&&p<=12031,"Kangxi Radicals":p=>p>=12032&&p<=12255,"Ideographic Description Characters":p=>p>=12272&&p<=12287,"CJK Symbols and Punctuation":p=>p>=12288&&p<=12351,Hiragana:p=>p>=12352&&p<=12447,Katakana:p=>p>=12448&&p<=12543,Bopomofo:p=>p>=12544&&p<=12591,"Hangul Compatibility Jamo":p=>p>=12592&&p<=12687,Kanbun:p=>p>=12688&&p<=12703,"Bopomofo Extended":p=>p>=12704&&p<=12735,"CJK Strokes":p=>p>=12736&&p<=12783,"Katakana Phonetic Extensions":p=>p>=12784&&p<=12799,"Enclosed CJK Letters and Months":p=>p>=12800&&p<=13055,"CJK Compatibility":p=>p>=13056&&p<=13311,"CJK Unified Ideographs Extension A":p=>p>=13312&&p<=19903,"Yijing Hexagram Symbols":p=>p>=19904&&p<=19967,"CJK Unified Ideographs":p=>p>=19968&&p<=40959,"Yi Syllables":p=>p>=40960&&p<=42127,"Yi Radicals":p=>p>=42128&&p<=42191,"Hangul Jamo Extended-A":p=>p>=43360&&p<=43391,"Hangul Syllables":p=>p>=44032&&p<=55215,"Hangul Jamo Extended-B":p=>p>=55216&&p<=55295,"Private Use Area":p=>p>=57344&&p<=63743,"CJK Compatibility Ideographs":p=>p>=63744&&p<=64255,"Arabic Presentation Forms-A":p=>p>=64336&&p<=65023,"Vertical Forms":p=>p>=65040&&p<=65055,"CJK Compatibility Forms":p=>p>=65072&&p<=65103,"Small Form Variants":p=>p>=65104&&p<=65135,"Arabic Presentation Forms-B":p=>p>=65136&&p<=65279,"Halfwidth and Fullwidth Forms":p=>p>=65280&&p<=65519};function So(p){for(const l of p)if(da(l.charCodeAt(0)))return!0;return!1}function _1(p){for(const l of p)if(!Qs(l.charCodeAt(0)))return!1;return!0}function Qs(p){return!(gi.Arabic(p)||gi["Arabic Supplement"](p)||gi["Arabic Extended-A"](p)||gi["Arabic Presentation Forms-A"](p)||gi["Arabic Presentation Forms-B"](p))}function da(p){return!(746!==p&&747!==p&&(p<4352||!(gi["Bopomofo Extended"](p)||gi.Bopomofo(p)||gi["CJK Compatibility Forms"](p)&&!(p>=65097&&p<=65103)||gi["CJK Compatibility Ideographs"](p)||gi["CJK Compatibility"](p)||gi["CJK Radicals Supplement"](p)||gi["CJK Strokes"](p)||!(!gi["CJK Symbols and Punctuation"](p)||p>=12296&&p<=12305||p>=12308&&p<=12319||12336===p)||gi["CJK Unified Ideographs Extension A"](p)||gi["CJK Unified Ideographs"](p)||gi["Enclosed CJK Letters and Months"](p)||gi["Hangul Compatibility Jamo"](p)||gi["Hangul Jamo Extended-A"](p)||gi["Hangul Jamo Extended-B"](p)||gi["Hangul Jamo"](p)||gi["Hangul Syllables"](p)||gi.Hiragana(p)||gi["Ideographic Description Characters"](p)||gi.Kanbun(p)||gi["Kangxi Radicals"](p)||gi["Katakana Phonetic Extensions"](p)||gi.Katakana(p)&&12540!==p||!(!gi["Halfwidth and Fullwidth Forms"](p)||65288===p||65289===p||65293===p||p>=65306&&p<=65310||65339===p||65341===p||65343===p||p>=65371&&p<=65503||65507===p||p>=65512&&p<=65519)||!(!gi["Small Form Variants"](p)||p>=65112&&p<=65118||p>=65123&&p<=65126)||gi["Unified Canadian Aboriginal Syllabics"](p)||gi["Unified Canadian Aboriginal Syllabics Extended"](p)||gi["Vertical Forms"](p)||gi["Yijing Hexagram Symbols"](p)||gi["Yi Syllables"](p)||gi["Yi Radicals"](p))))}function as(p){return!(da(p)||(l=p,gi["Latin-1 Supplement"](l)&&(167===l||169===l||174===l||177===l||188===l||189===l||190===l||215===l||247===l)||gi["General Punctuation"](l)&&(8214===l||8224===l||8225===l||8240===l||8241===l||8251===l||8252===l||8258===l||8263===l||8264===l||8265===l||8273===l)||gi["Letterlike Symbols"](l)||gi["Number Forms"](l)||gi["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||9003===l||l>=9085&&l<=9114||l>=9150&&l<=9165||9167===l||l>=9169&&l<=9179||l>=9186&&l<=9215)||gi["Control Pictures"](l)&&9251!==l||gi["Optical Character Recognition"](l)||gi["Enclosed Alphanumerics"](l)||gi["Geometric Shapes"](l)||gi["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||gi["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||gi["CJK Symbols and Punctuation"](l)||gi.Katakana(l)||gi["Private Use Area"](l)||gi["CJK Compatibility Forms"](l)||gi["Small Form Variants"](l)||gi["Halfwidth and Fullwidth Forms"](l)||8734===l||8756===l||8757===l||l>=9984&&l<=10087||l>=10102&&l<=10131||65532===l||65533===l));var l}function ga(p){return p>=1424&&p<=2303||gi["Arabic Presentation Forms-A"](p)||gi["Arabic Presentation Forms-B"](p)}function d2(p,l){return!(!l&&ga(p)||p>=2304&&p<=3583||p>=3840&&p<=4255||gi.Khmer(p))}function Ta(p){for(const l of p)if(ga(l.charCodeAt(0)))return!0;return!1}const Ya="deferred",Va="loading",Xa="loaded";let Eo=null,Na="unavailable",W1=null;const ws=function(p){p&&"string"==typeof p&&p.indexOf("NetworkError")>-1&&(Na="error"),Eo&&Eo(p)};function b1(){rl.fire(new Ge("pluginStateChange",{pluginStatus:Na,pluginURL:W1}))}const rl=new He,zc=function(){return Na},Y1=function(){if(Na!==Ya||!W1)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Na=Va,b1(),W1&&Me({url:W1},p=>{p?ws(p):(Na=Xa,b1())})},Ao={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Na===Xa||null!=Ao.applyArabicShaping,isLoading:()=>Na===Va,setState(p){if(!ie())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Na=p.pluginStatus,W1=p.pluginURL},isParsed(){if(!ie())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Ao.applyArabicShaping&&null!=Ao.processBidirectionalText&&null!=Ao.processStyledBidirectionalText},getPluginURL(){if(!ie())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return W1}};class Wr{constructor(l,b){this.zoom=l,b?(this.now=b.now,this.fadeDuration=b.fadeDuration,this.zoomHistory=b.zoomHistory,this.transition=b.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ks,this.transition={})}isSupportedScript(l){return function(b,L){for(const Y of b)if(!d2(Y.charCodeAt(0),L))return!1;return!0}(l,Ao.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,b=l-Math.floor(l),L=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:b+(1-b)*L}:{fromScale:.5,toScale:1,t:1-(1-L)*b}}}class _c{constructor(l,b){this.property=l,this.value=b,this.expression=function(L,Y){if(jr(L))return new Ir(L,Y);if(Ac(L)){const te=$r(L,Y);if("error"===te.result)throw new Error(te.value.map(re=>`${re.key}: ${re.message}`).join(", "));return te.value}{let te=L;return"color"===Y.type&&"string"==typeof L?te=Li.parse(L):"padding"!==Y.type||"number"!=typeof L&&!Array.isArray(L)?"variableAnchorOffsetCollection"===Y.type&&Array.isArray(L)&&(te=Ii.parse(L)):te=Vi.parse(L),{kind:"constant",evaluate:()=>te}}}(void 0===b?l.specification.default:b,l.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(l,b,L){return this.property.possiblyEvaluate(this,l,b,L)}}class Cs{constructor(l){this.property=l,this.value=new _c(l,void 0)}transitioned(l,b){return new D2(this.property,this.value,b,B({},l.transition,this.transition),l.now)}untransitioned(){return new D2(this.property,this.value,null,{},0)}}class ol{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return P(this._values[l].value.value)}setValue(l,b){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Cs(this._values[l].property)),this._values[l].value=new _c(this._values[l].property,null===b?void 0:P(b))}getTransition(l){return P(this._values[l].transition)}setTransition(l,b){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new Cs(this._values[l].property)),this._values[l].transition=P(b)||void 0}serialize(){const l={};for(const b of Object.keys(this._values)){const L=this.getValue(b);void 0!==L&&(l[b]=L);const Y=this.getTransition(b);void 0!==Y&&(l[`${b}-transition`]=Y)}return l}transitioned(l,b){const L=new ss(this._properties);for(const Y of Object.keys(this._values))L._values[Y]=this._values[Y].transitioned(l,b._values[Y]);return L}untransitioned(){const l=new ss(this._properties);for(const b of Object.keys(this._values))l._values[b]=this._values[b].untransitioned();return l}}class D2{constructor(l,b,L,Y,te){this.property=l,this.value=b,this.begin=te+Y.delay||0,this.end=this.begin+Y.duration||0,l.specification.transition&&(Y.delay||Y.duration)&&(this.prior=L)}possiblyEvaluate(l,b,L){const Y=l.now||0,te=this.value.possiblyEvaluate(l,b,L),re=this.prior;if(re){if(Y>this.end)return this.prior=null,te;if(this.value.isDataDriven())return this.prior=null,te;if(Y<this.begin)return re.possiblyEvaluate(l,b,L);{const ve=(Y-this.begin)/(this.end-this.begin);return this.property.interpolate(re.possiblyEvaluate(l,b,L),te,function(ze){if(ze<=0)return 0;if(ze>=1)return 1;const ke=ze*ze,Ze=ke*ze;return 4*(ze<.5?Ze:3*(ze-ke)+Ze-.75)}(ve))}}return te}}class ss{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,b,L){const Y=new W2(this._properties);for(const te of Object.keys(this._values))Y._values[te]=this._values[te].possiblyEvaluate(l,b,L);return Y}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class tu{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return void 0!==this._values[l].value}getValue(l){return P(this._values[l].value)}setValue(l,b){this._values[l]=new _c(this._values[l].property,null===b?void 0:P(b))}serialize(){const l={};for(const b of Object.keys(this._values)){const L=this.getValue(b);void 0!==L&&(l[b]=L)}return l}possiblyEvaluate(l,b,L){const Y=new W2(this._properties);for(const te of Object.keys(this._values))Y._values[te]=this._values[te].possiblyEvaluate(l,b,L);return Y}}class Za{constructor(l,b,L){this.property=l,this.value=b,this.parameters=L}isConstant(){return"constant"===this.value.kind}constantOr(l){return"constant"===this.value.kind?this.value.value:l}evaluate(l,b,L,Y){return this.property.evaluate(this.value,this.parameters,l,b,L,Y)}}class W2{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Hi{constructor(l){this.specification=l}possiblyEvaluate(l,b){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(b)}interpolate(l,b,L){const Y=xs[this.specification.type];return Y?Y(l,b,L):l}}class _r{constructor(l,b){this.specification=l,this.overrides=b}possiblyEvaluate(l,b,L,Y){return new Za(this,"constant"===l.expression.kind||"camera"===l.expression.kind?{kind:"constant",value:l.expression.evaluate(b,null,{},L,Y)}:l.expression,b)}interpolate(l,b,L){if("constant"!==l.value.kind||"constant"!==b.value.kind)return l;if(void 0===l.value.value||void 0===b.value.value)return new Za(this,{kind:"constant",value:void 0},l.parameters);const Y=xs[this.specification.type];if(Y){const te=Y(l.value.value,b.value.value,L);return new Za(this,{kind:"constant",value:te},l.parameters)}return l}evaluate(l,b,L,Y,te,re){return"constant"===l.kind?l.value:l.evaluate(b,L,Y,te,re)}}class h2 extends _r{possiblyEvaluate(l,b,L,Y){if(void 0===l.value)return new Za(this,{kind:"constant",value:void 0},b);if("constant"===l.expression.kind){const te=l.expression.evaluate(b,null,{},L,Y),re="resolvedImage"===l.property.specification.type&&"string"!=typeof te?te.name:te,ve=this._calculate(re,re,re,b);return new Za(this,{kind:"constant",value:ve},b)}if("camera"===l.expression.kind){const te=this._calculate(l.expression.evaluate({zoom:b.zoom-1}),l.expression.evaluate({zoom:b.zoom}),l.expression.evaluate({zoom:b.zoom+1}),b);return new Za(this,{kind:"constant",value:te},b)}return new Za(this,l.expression,b)}evaluate(l,b,L,Y,te,re){if("source"===l.kind){const ve=l.evaluate(b,L,Y,te,re);return this._calculate(ve,ve,ve,b)}return"composite"===l.kind?this._calculate(l.evaluate({zoom:Math.floor(b.zoom)-1},L,Y),l.evaluate({zoom:Math.floor(b.zoom)},L,Y),l.evaluate({zoom:Math.floor(b.zoom)+1},L,Y),b):l.value}_calculate(l,b,L,Y){return Y.zoom>Y.zoomHistory.lastIntegerZoom?{from:l,to:b}:{from:L,to:b}}interpolate(l){return l}}class D1{constructor(l){this.specification=l}possiblyEvaluate(l,b,L,Y){if(void 0!==l.value){if("constant"===l.expression.kind){const te=l.expression.evaluate(b,null,{},L,Y);return this._calculate(te,te,te,b)}return this._calculate(l.expression.evaluate(new Wr(Math.floor(b.zoom-1),b)),l.expression.evaluate(new Wr(Math.floor(b.zoom),b)),l.expression.evaluate(new Wr(Math.floor(b.zoom+1),b)),b)}}_calculate(l,b,L,Y){return Y.zoom>Y.zoomHistory.lastIntegerZoom?{from:l,to:b}:{from:L,to:b}}interpolate(l){return l}}class Uc{constructor(l){this.specification=l}possiblyEvaluate(l,b,L,Y){return!!l.expression.evaluate(b,null,{},L,Y)}interpolate(){return!1}}class Hs{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const b in l){const L=l[b];L.specification.overridable&&this.overridableProperties.push(b);const Y=this.defaultPropertyValues[b]=new _c(L,void 0),te=this.defaultTransitionablePropertyValues[b]=new Cs(L);this.defaultTransitioningPropertyValues[b]=te.untransitioned(),this.defaultPossiblyEvaluatedValues[b]=Y.possiblyEvaluate({})}}}ui("DataDrivenProperty",_r),ui("DataConstantProperty",Hi),ui("CrossFadedDataDrivenProperty",h2),ui("CrossFadedProperty",D1),ui("ColorRampProperty",Uc);const Pc="-transition";class ms extends He{constructor(l,b){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==l.type&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,"background"!==l.type&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),b.layout&&(this._unevaluatedLayout=new tu(b.layout)),b.paint)){this._transitionablePaint=new ol(b.paint);for(const L in l.paint)this.setPaintProperty(L,l.paint[L],{validate:!1});for(const L in l.layout)this.setLayoutProperty(L,l.layout[L],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new W2(b.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return"visibility"===l?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,b,L={}){null!=b&&this._validate(Es,`layers.${this.id}.layout.${l}`,l,b,L)||("visibility"!==l?this._unevaluatedLayout.setValue(l,b):this.visibility=b)}getPaintProperty(l){return l.endsWith(Pc)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,b,L={}){if(null!=b&&this._validate(Vs,`layers.${this.id}.paint.${l}`,l,b,L))return!1;if(l.endsWith(Pc))return this._transitionablePaint.setTransition(l.slice(0,-11),b||void 0),!1;{const Y=this._transitionablePaint._values[l],te="cross-faded-data-driven"===Y.property.specification["property-type"],re=Y.value.isDataDriven(),ve=Y.value;this._transitionablePaint.setValue(l,b),this._handleSpecialPaintPropertyUpdate(l);const ze=this._transitionablePaint._values[l].value;return ze.isDataDriven()||re||te||this._handleOverridablePaintPropertyUpdate(l,ve,ze)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,b,L){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||"none"===this.visibility}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,b){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,b)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,b)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),j(l,(b,L)=>!(void 0===b||"layout"===L&&!Object.keys(b).length||"paint"===L&&!Object.keys(b).length))}_validate(l,b,L,Y,te={}){return(!te||!1!==te.validate)&&ma(this,l.call(Gr,{key:b,layerType:this.type,objectKey:L,value:Y,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const b=this.paint.get(l);if(b instanceof Za&&$s(b.property.specification)&&("source"===b.value.kind||"composite"===b.value.kind)&&b.value.isStateDependent)return!0}return!1}}const De={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ye{constructor(l,b){this._structArray=l,this._pos1=b*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class pt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,b){return l._trim(),b&&(l.isTransferred=!0,b.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const b=Object.create(this.prototype);return b.arrayBuffer=l.arrayBuffer,b.length=l.length,b.capacity=l.arrayBuffer.byteLength/b.bytesPerElement,b._refreshViews(),b}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const b=this.uint8;this._refreshViews(),b&&this.uint8.set(b)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ct(p,l=1){let b=0,L=0;return{members:p.map(Y=>{const te=De[Y.type].BYTES_PER_ELEMENT,re=b=Mt(b,Math.max(l,te)),ve=Y.components||1;return L=Math.max(L,te),b+=te*ve,{name:Y.name,type:Y.type,components:ve,offset:re}}),size:Mt(b,Math.max(L,l)),alignment:l}}function Mt(p,l){return Math.ceil(p/l)*l}class Vt extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,b){const L=this.length;return this.resize(L+1),this.emplace(L,l,b)}emplace(l,b,L){const Y=2*l;return this.int16[Y+0]=b,this.int16[Y+1]=L,l}}Vt.prototype.bytesPerElement=4,ui("StructArrayLayout2i4",Vt);class hn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,b,L){const Y=this.length;return this.resize(Y+1),this.emplace(Y,l,b,L)}emplace(l,b,L,Y){const te=3*l;return this.int16[te+0]=b,this.int16[te+1]=L,this.int16[te+2]=Y,l}}hn.prototype.bytesPerElement=6,ui("StructArrayLayout3i6",hn);class En extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,b,L,Y){const te=this.length;return this.resize(te+1),this.emplace(te,l,b,L,Y)}emplace(l,b,L,Y,te){const re=4*l;return this.int16[re+0]=b,this.int16[re+1]=L,this.int16[re+2]=Y,this.int16[re+3]=te,l}}En.prototype.bytesPerElement=8,ui("StructArrayLayout4i8",En);class kn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te,re){const ve=this.length;return this.resize(ve+1),this.emplace(ve,l,b,L,Y,te,re)}emplace(l,b,L,Y,te,re,ve){const ze=6*l;return this.int16[ze+0]=b,this.int16[ze+1]=L,this.int16[ze+2]=Y,this.int16[ze+3]=te,this.int16[ze+4]=re,this.int16[ze+5]=ve,l}}kn.prototype.bytesPerElement=12,ui("StructArrayLayout2i4i12",kn);class Xn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te,re){const ve=this.length;return this.resize(ve+1),this.emplace(ve,l,b,L,Y,te,re)}emplace(l,b,L,Y,te,re,ve){const ze=4*l,ke=8*l;return this.int16[ze+0]=b,this.int16[ze+1]=L,this.uint8[ke+4]=Y,this.uint8[ke+5]=te,this.uint8[ke+6]=re,this.uint8[ke+7]=ve,l}}Xn.prototype.bytesPerElement=8,ui("StructArrayLayout2i4ub8",Xn);class pn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,b){const L=this.length;return this.resize(L+1),this.emplace(L,l,b)}emplace(l,b,L){const Y=2*l;return this.float32[Y+0]=b,this.float32[Y+1]=L,l}}pn.prototype.bytesPerElement=8,ui("StructArrayLayout2f8",pn);class An extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te,re,ve,ze,ke,Ze){const et=this.length;return this.resize(et+1),this.emplace(et,l,b,L,Y,te,re,ve,ze,ke,Ze)}emplace(l,b,L,Y,te,re,ve,ze,ke,Ze,et){const st=10*l;return this.uint16[st+0]=b,this.uint16[st+1]=L,this.uint16[st+2]=Y,this.uint16[st+3]=te,this.uint16[st+4]=re,this.uint16[st+5]=ve,this.uint16[st+6]=ze,this.uint16[st+7]=ke,this.uint16[st+8]=Ze,this.uint16[st+9]=et,l}}An.prototype.bytesPerElement=20,ui("StructArrayLayout10ui20",An);class Tn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te,re,ve,ze,ke,Ze,et,st){const bt=this.length;return this.resize(bt+1),this.emplace(bt,l,b,L,Y,te,re,ve,ze,ke,Ze,et,st)}emplace(l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt){const Ct=12*l;return this.int16[Ct+0]=b,this.int16[Ct+1]=L,this.int16[Ct+2]=Y,this.int16[Ct+3]=te,this.uint16[Ct+4]=re,this.uint16[Ct+5]=ve,this.uint16[Ct+6]=ze,this.uint16[Ct+7]=ke,this.int16[Ct+8]=Ze,this.int16[Ct+9]=et,this.int16[Ct+10]=st,this.int16[Ct+11]=bt,l}}Tn.prototype.bytesPerElement=24,ui("StructArrayLayout4i4ui4i24",Tn);class Un extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,b,L){const Y=this.length;return this.resize(Y+1),this.emplace(Y,l,b,L)}emplace(l,b,L,Y){const te=3*l;return this.float32[te+0]=b,this.float32[te+1]=L,this.float32[te+2]=Y,l}}Un.prototype.bytesPerElement=12,ui("StructArrayLayout3f12",Un);class a extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const b=this.length;return this.resize(b+1),this.emplace(b,l)}emplace(l,b){return this.uint32[1*l+0]=b,l}}a.prototype.bytesPerElement=4,ui("StructArrayLayout1ul4",a);class d extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te,re,ve,ze,ke){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,l,b,L,Y,te,re,ve,ze,ke)}emplace(l,b,L,Y,te,re,ve,ze,ke,Ze){const et=10*l,st=5*l;return this.int16[et+0]=b,this.int16[et+1]=L,this.int16[et+2]=Y,this.int16[et+3]=te,this.int16[et+4]=re,this.int16[et+5]=ve,this.uint32[st+3]=ze,this.uint16[et+8]=ke,this.uint16[et+9]=Ze,l}}d.prototype.bytesPerElement=20,ui("StructArrayLayout6i1ul2ui20",d);class E extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te,re){const ve=this.length;return this.resize(ve+1),this.emplace(ve,l,b,L,Y,te,re)}emplace(l,b,L,Y,te,re,ve){const ze=6*l;return this.int16[ze+0]=b,this.int16[ze+1]=L,this.int16[ze+2]=Y,this.int16[ze+3]=te,this.int16[ze+4]=re,this.int16[ze+5]=ve,l}}E.prototype.bytesPerElement=12,ui("StructArrayLayout2i2i2i12",E);class T extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te){const re=this.length;return this.resize(re+1),this.emplace(re,l,b,L,Y,te)}emplace(l,b,L,Y,te,re){const ve=4*l,ze=8*l;return this.float32[ve+0]=b,this.float32[ve+1]=L,this.float32[ve+2]=Y,this.int16[ze+6]=te,this.int16[ze+7]=re,l}}T.prototype.bytesPerElement=16,ui("StructArrayLayout2f1f2i16",T);class Z extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,b,L,Y){const te=this.length;return this.resize(te+1),this.emplace(te,l,b,L,Y)}emplace(l,b,L,Y,te){const re=12*l,ve=3*l;return this.uint8[re+0]=b,this.uint8[re+1]=L,this.float32[ve+1]=Y,this.float32[ve+2]=te,l}}Z.prototype.bytesPerElement=12,ui("StructArrayLayout2ub2f12",Z);class me extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,b,L){const Y=this.length;return this.resize(Y+1),this.emplace(Y,l,b,L)}emplace(l,b,L,Y){const te=3*l;return this.uint16[te+0]=b,this.uint16[te+1]=L,this.uint16[te+2]=Y,l}}me.prototype.bytesPerElement=6,ui("StructArrayLayout3ui6",me);class Ie extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct,Rt,qt,Jt){const yn=this.length;return this.resize(yn+1),this.emplace(yn,l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct,Rt,qt,Jt)}emplace(l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct,Rt,qt,Jt,yn){const sn=24*l,Mn=12*l,Ln=48*l;return this.int16[sn+0]=b,this.int16[sn+1]=L,this.uint16[sn+2]=Y,this.uint16[sn+3]=te,this.uint32[Mn+2]=re,this.uint32[Mn+3]=ve,this.uint32[Mn+4]=ze,this.uint16[sn+10]=ke,this.uint16[sn+11]=Ze,this.uint16[sn+12]=et,this.float32[Mn+7]=st,this.float32[Mn+8]=bt,this.uint8[Ln+36]=Ct,this.uint8[Ln+37]=Rt,this.uint8[Ln+38]=qt,this.uint32[Mn+10]=Jt,this.int16[sn+22]=yn,l}}Ie.prototype.bytesPerElement=48,ui("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ie);class Xe extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct,Rt,qt,Jt,yn,sn,Mn,Ln,Qn,pi,Oi,Ai,xi,mi,Bi){const yi=this.length;return this.resize(yi+1),this.emplace(yi,l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct,Rt,qt,Jt,yn,sn,Mn,Ln,Qn,pi,Oi,Ai,xi,mi,Bi)}emplace(l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct,Rt,qt,Jt,yn,sn,Mn,Ln,Qn,pi,Oi,Ai,xi,mi,Bi,yi){const ai=32*l,pr=16*l;return this.int16[ai+0]=b,this.int16[ai+1]=L,this.int16[ai+2]=Y,this.int16[ai+3]=te,this.int16[ai+4]=re,this.int16[ai+5]=ve,this.int16[ai+6]=ze,this.int16[ai+7]=ke,this.uint16[ai+8]=Ze,this.uint16[ai+9]=et,this.uint16[ai+10]=st,this.uint16[ai+11]=bt,this.uint16[ai+12]=Ct,this.uint16[ai+13]=Rt,this.uint16[ai+14]=qt,this.uint16[ai+15]=Jt,this.uint16[ai+16]=yn,this.uint16[ai+17]=sn,this.uint16[ai+18]=Mn,this.uint16[ai+19]=Ln,this.uint16[ai+20]=Qn,this.uint16[ai+21]=pi,this.uint16[ai+22]=Oi,this.uint32[pr+12]=Ai,this.float32[pr+13]=xi,this.float32[pr+14]=mi,this.uint16[ai+30]=Bi,this.uint16[ai+31]=yi,l}}Xe.prototype.bytesPerElement=64,ui("StructArrayLayout8i15ui1ul2f2ui64",Xe);class H extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const b=this.length;return this.resize(b+1),this.emplace(b,l)}emplace(l,b){return this.float32[1*l+0]=b,l}}H.prototype.bytesPerElement=4,ui("StructArrayLayout1f4",H);class s extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,b,L){const Y=this.length;return this.resize(Y+1),this.emplace(Y,l,b,L)}emplace(l,b,L,Y){const te=3*l;return this.uint16[6*l+0]=b,this.float32[te+1]=L,this.float32[te+2]=Y,l}}s.prototype.bytesPerElement=12,ui("StructArrayLayout1ui2f12",s);class C extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,b,L){const Y=this.length;return this.resize(Y+1),this.emplace(Y,l,b,L)}emplace(l,b,L,Y){const te=4*l;return this.uint32[2*l+0]=b,this.uint16[te+2]=L,this.uint16[te+3]=Y,l}}C.prototype.bytesPerElement=8,ui("StructArrayLayout1ul2ui8",C);class N extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,b){const L=this.length;return this.resize(L+1),this.emplace(L,l,b)}emplace(l,b,L){const Y=2*l;return this.uint16[Y+0]=b,this.uint16[Y+1]=L,l}}N.prototype.bytesPerElement=4,ui("StructArrayLayout2ui4",N);class W extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const b=this.length;return this.resize(b+1),this.emplace(b,l)}emplace(l,b){return this.uint16[1*l+0]=b,l}}W.prototype.bytesPerElement=2,ui("StructArrayLayout1ui2",W);class K extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,b,L,Y){const te=this.length;return this.resize(te+1),this.emplace(te,l,b,L,Y)}emplace(l,b,L,Y,te){const re=4*l;return this.float32[re+0]=b,this.float32[re+1]=L,this.float32[re+2]=Y,this.float32[re+3]=te,l}}K.prototype.bytesPerElement=16,ui("StructArrayLayout4f16",K);class he extends Ye{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new m(this.anchorPointX,this.anchorPointY)}}he.prototype.size=20;class ge extends d{get(l){return new he(this,l)}}ui("CollisionBoxArray",ge);class we extends Ye{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}we.prototype.size=48;class Le extends Ie{get(l){return new we(this,l)}}ui("PlacedSymbolArray",Le);class Ve extends Ye{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ve.prototype.size=64;class We extends Xe{get(l){return new Ve(this,l)}}ui("SymbolInstanceArray",We);class lt extends H{getoffsetX(l){return this.float32[1*l+0]}}ui("GlyphOffsetArray",lt);class Tt extends hn{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}ui("SymbolLineVertexArray",Tt);class kt extends Ye{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}kt.prototype.size=12;class Ft extends s{get(l){return new kt(this,l)}}ui("TextAnchorOffsetArray",Ft);class It extends Ye{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}It.prototype.size=8;class ln extends C{get(l){return new It(this,l)}}ui("FeatureIndexArray",ln);class zn extends Vt{}class Xt extends Vt{}class fn extends Vt{}class Fn extends kn{}class Hn extends Xn{}class Bn extends pn{}class ii extends An{}class ti extends Tn{}class hi extends Un{}class Wi extends a{}class qr extends E{}class bi extends Z{}class lr extends me{}class Yi extends N{}const ha=ct([{name:"a_pos",components:2,type:"Int16"}],4),{members:Kr}=ha;class fr{constructor(l=[]){this.segments=l}prepareSegment(l,b,L,Y){let te=this.segments[this.segments.length-1];return l>fr.MAX_VERTEX_ARRAY_LENGTH&&$(`Max vertices per segment is ${fr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!te||te.vertexLength+l>fr.MAX_VERTEX_ARRAY_LENGTH||te.sortKey!==Y)&&(te={vertexOffset:b.length,primitiveOffset:L.length,vertexLength:0,primitiveLength:0},void 0!==Y&&(te.sortKey=Y),this.segments.push(te)),te}get(){return this.segments}destroy(){for(const l of this.segments)for(const b in l.vaos)l.vaos[b].destroy()}static simpleSegment(l,b,L,Y){return new fr([{vertexOffset:l,primitiveOffset:b,vertexLength:L,primitiveLength:Y,vaos:{},sortKey:0}])}}function ir(p,l){return 256*(p=R(Math.floor(p),0,255))+R(Math.floor(l),0,255)}fr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ui("SegmentVector",fr);const cs=ct([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var va={exports:{}},x1=function(p,l){var b,L,Y,te,re,ve,ze,ke;for(L=p.length-(b=3&p.length),Y=l,re=3432918353,ve=461845907,ke=0;ke<L;)ze=255&p.charCodeAt(ke)|(255&p.charCodeAt(++ke))<<8|(255&p.charCodeAt(++ke))<<16|(255&p.charCodeAt(++ke))<<24,++ke,Y=27492+(65535&(te=5*(65535&(Y=(Y^=ze=(65535&(ze=(ze=(65535&ze)*re+(((ze>>>16)*re&65535)<<16)&4294967295)<<15|ze>>>17))*ve+(((ze>>>16)*ve&65535)<<16)&4294967295)<<13|Y>>>19))+((5*(Y>>>16)&65535)<<16)&4294967295))+((58964+(te>>>16)&65535)<<16);switch(ze=0,b){case 3:ze^=(255&p.charCodeAt(ke+2))<<16;case 2:ze^=(255&p.charCodeAt(ke+1))<<8;case 1:Y^=ze=(65535&(ze=(ze=(65535&(ze^=255&p.charCodeAt(ke)))*re+(((ze>>>16)*re&65535)<<16)&4294967295)<<15|ze>>>17))*ve+(((ze>>>16)*ve&65535)<<16)&4294967295}return Y^=p.length,Y=2246822507*(65535&(Y^=Y>>>16))+((2246822507*(Y>>>16)&65535)<<16)&4294967295,Y=3266489909*(65535&(Y^=Y>>>13))+((3266489909*(Y>>>16)&65535)<<16)&4294967295,(Y^=Y>>>16)>>>0},Bs=function(p,l){for(var b,L=p.length,Y=l^L,te=0;L>=4;)b=1540483477*(65535&(b=255&p.charCodeAt(te)|(255&p.charCodeAt(++te))<<8|(255&p.charCodeAt(++te))<<16|(255&p.charCodeAt(++te))<<24))+((1540483477*(b>>>16)&65535)<<16),Y=1540483477*(65535&Y)+((1540483477*(Y>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),L-=4,++te;switch(L){case 3:Y^=(255&p.charCodeAt(te+2))<<16;case 2:Y^=(255&p.charCodeAt(te+1))<<8;case 1:Y=1540483477*(65535&(Y^=255&p.charCodeAt(te)))+((1540483477*(Y>>>16)&65535)<<16)}return Y=1540483477*(65535&(Y^=Y>>>13))+((1540483477*(Y>>>16)&65535)<<16),(Y^=Y>>>15)>>>0};va.exports=x1,va.exports.murmur3=x1,va.exports.murmur2=Bs;var f2=h(va.exports);class O2{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,b,L,Y){this.ids.push(Wl(l)),this.positions.push(b,L,Y)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const b=Wl(l);let L=0,Y=this.ids.length-1;for(;L<Y;){const re=L+Y>>1;this.ids[re]>=b?Y=re:L=re+1}const te=[];for(;this.ids[L]===b;)te.push({index:this.positions[3*L],start:this.positions[3*L+1],end:this.positions[3*L+2]}),L++;return te}static serialize(l,b){const L=new Float64Array(l.ids),Y=new Uint32Array(l.positions);return bc(L,Y,0,L.length-1),b&&b.push(L.buffer,Y.buffer),{ids:L,positions:Y}}static deserialize(l){const b=new O2;return b.ids=l.ids,b.positions=l.positions,b.indexed=!0,b}}function Wl(p){const l=+p;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:f2(String(p))}function bc(p,l,b,L){for(;b<L;){const Y=p[b+L>>1];let te=b-1,re=L+1;for(;;){do{te++}while(p[te]<Y);do{re--}while(p[re]>Y);if(te>=re)break;k2(p,te,re),k2(l,3*te,3*re),k2(l,3*te+1,3*re+1),k2(l,3*te+2,3*re+2)}re-b<L-re?(bc(p,l,b,re),b=re+1):(bc(p,l,re+1,L),L=re)}}function k2(p,l,b){const L=p[l];p[l]=p[b],p[b]=L}ui("FeaturePositionMap",O2);class Js{constructor(l,b){this.gl=l.gl,this.location=b}}class p1 extends Js{constructor(l,b){super(l,b),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Z1 extends Js{constructor(l,b){super(l,b),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Cl extends Js{constructor(l,b){super(l,b),this.current=Li.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const w1=new Float32Array(16);function er(p){return[ir(255*p.r,255*p.g),ir(255*p.b,255*p.a)]}class $1{constructor(l,b,L){this.value=l,this.uniformNames=b.map(Y=>`u_${Y}`),this.type=L}setUniform(l,b,L){l.set(L.constantOr(this.value))}getBinding(l,b,L){return"color"===this.type?new Cl(l,b):new p1(l,b)}}class zs{constructor(l,b){this.uniformNames=b.map(L=>`u_${L}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,b){this.pixelRatioFrom=b.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=b.tlbr,this.patternTo=l.tlbr}setUniform(l,b,L,Y){const te="u_pattern_to"===Y?this.patternTo:"u_pattern_from"===Y?this.patternFrom:"u_pixel_ratio_to"===Y?this.pixelRatioTo:"u_pixel_ratio_from"===Y?this.pixelRatioFrom:null;te&&l.set(te)}getBinding(l,b,L){return"u_pattern"===L.substr(0,9)?new Z1(l,b):new p1(l,b)}}class Y2{constructor(l,b,L,Y){this.expression=l,this.type=L,this.maxValue=0,this.paintVertexAttributes=b.map(te=>({name:`a_${te}`,type:"Float32",components:"color"===L?2:1,offset:0})),this.paintVertexArray=new Y}populatePaintArray(l,b,L,Y,te){const re=this.paintVertexArray.length,ve=this.expression.evaluate(new Wr(0),b,{},Y,[],te);this.paintVertexArray.resize(l),this._setPaintValue(re,l,ve)}updatePaintArray(l,b,L,Y){const te=this.expression.evaluate({zoom:0},L,Y);this._setPaintValue(l,b,te)}_setPaintValue(l,b,L){if("color"===this.type){const Y=er(L);for(let te=l;te<b;te++)this.paintVertexArray.emplace(te,Y[0],Y[1])}else{for(let Y=l;Y<b;Y++)this.paintVertexArray.emplace(Y,L);this.maxValue=Math.max(this.maxValue,Math.abs(L))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class p2{constructor(l,b,L,Y,te,re){this.expression=l,this.uniformNames=b.map(ve=>`u_${ve}_t`),this.type=L,this.useIntegerZoom=Y,this.zoom=te,this.maxValue=0,this.paintVertexAttributes=b.map(ve=>({name:`a_${ve}`,type:"Float32",components:"color"===L?4:2,offset:0})),this.paintVertexArray=new re}populatePaintArray(l,b,L,Y,te){const re=this.expression.evaluate(new Wr(this.zoom),b,{},Y,[],te),ve=this.expression.evaluate(new Wr(this.zoom+1),b,{},Y,[],te),ze=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(ze,l,re,ve)}updatePaintArray(l,b,L,Y){const te=this.expression.evaluate({zoom:this.zoom},L,Y),re=this.expression.evaluate({zoom:this.zoom+1},L,Y);this._setPaintValue(l,b,te,re)}_setPaintValue(l,b,L,Y){if("color"===this.type){const te=er(L),re=er(Y);for(let ve=l;ve<b;ve++)this.paintVertexArray.emplace(ve,te[0],te[1],re[0],re[1])}else{for(let te=l;te<b;te++)this.paintVertexArray.emplace(te,L,Y);this.maxValue=Math.max(this.maxValue,Math.abs(L),Math.abs(Y))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,b){const L=this.useIntegerZoom?Math.floor(b.zoom):b.zoom,Y=R(this.expression.interpolationFactor(L,this.zoom,this.zoom+1),0,1);l.set(Y)}getBinding(l,b,L){return new p1(l,b)}}class al{constructor(l,b,L,Y,te,re){this.expression=l,this.type=b,this.useIntegerZoom=L,this.zoom=Y,this.layerId=re,this.zoomInPaintVertexArray=new te,this.zoomOutPaintVertexArray=new te}populatePaintArray(l,b,L){const Y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(Y,l,b.patterns&&b.patterns[this.layerId],L)}updatePaintArray(l,b,L,Y,te){this._setPaintValues(l,b,L.patterns&&L.patterns[this.layerId],te)}_setPaintValues(l,b,L,Y){if(!Y||!L)return;const{min:te,mid:re,max:ve}=L,ze=Y[te],ke=Y[re],Ze=Y[ve];if(ze&&ke&&Ze)for(let et=l;et<b;et++)this.zoomInPaintVertexArray.emplace(et,ke.tl[0],ke.tl[1],ke.br[0],ke.br[1],ze.tl[0],ze.tl[1],ze.br[0],ze.br[1],ke.pixelRatio,ze.pixelRatio),this.zoomOutPaintVertexArray.emplace(et,ke.tl[0],ke.tl[1],ke.br[0],ke.br[1],Ze.tl[0],Ze.tl[1],Ze.br[0],Ze.br[1],ke.pixelRatio,Ze.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,cs.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,cs.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class n4{constructor(l,b,L){this.binders={},this._buffers=[];const Y=[];for(const te in l.paint._values){if(!L(te))continue;const re=l.paint.get(te);if(!(re instanceof Za&&$s(re.property.specification)))continue;const ve=Y3(te,l.type),ze=re.value,ke=re.property.specification.type,Ze=re.property.useIntegerZoom,et=re.property.specification["property-type"],st="cross-faded"===et||"cross-faded-data-driven"===et;if("constant"===ze.kind)this.binders[te]=st?new zs(ze.value,ve):new $1(ze.value,ve,ke),Y.push(`/u_${te}`);else if("source"===ze.kind||st){const bt=Ml(te,ke,"source");this.binders[te]=st?new al(ze,ke,Ze,b,bt,l.id):new Y2(ze,ve,ke,bt),Y.push(`/a_${te}`)}else{const bt=Ml(te,ke,"composite");this.binders[te]=new p2(ze,ve,ke,Ze,b,bt),Y.push(`/z_${te}`)}}this.cacheKey=Y.sort().join("")}getMaxValue(l){const b=this.binders[l];return b instanceof Y2||b instanceof p2?b.maxValue:0}populatePaintArrays(l,b,L,Y,te){for(const re in this.binders){const ve=this.binders[re];(ve instanceof Y2||ve instanceof p2||ve instanceof al)&&ve.populatePaintArray(l,b,L,Y,te)}}setConstantPatternPositions(l,b){for(const L in this.binders){const Y=this.binders[L];Y instanceof zs&&Y.setConstantPatternPositions(l,b)}}updatePaintArrays(l,b,L,Y,te){let re=!1;for(const ve in l){const ze=b.getPositions(ve);for(const ke of ze){const Ze=L.feature(ke.index);for(const et in this.binders){const st=this.binders[et];if((st instanceof Y2||st instanceof p2||st instanceof al)&&!0===st.expression.isStateDependent){const bt=Y.paint.get(et);st.expression=bt.value,st.updatePaintArray(ke.start,ke.end,Ze,l[ve],te),re=!0}}}}return re}defines(){const l=[];for(const b in this.binders){const L=this.binders[b];(L instanceof $1||L instanceof zs)&&l.push(...L.uniformNames.map(Y=>`#define HAS_UNIFORM_${Y}`))}return l}getBinderAttributes(){const l=[];for(const b in this.binders){const L=this.binders[b];if(L instanceof Y2||L instanceof p2)for(let Y=0;Y<L.paintVertexAttributes.length;Y++)l.push(L.paintVertexAttributes[Y].name);else if(L instanceof al)for(let Y=0;Y<cs.members.length;Y++)l.push(cs.members[Y].name)}return l}getBinderUniforms(){const l=[];for(const b in this.binders){const L=this.binders[b];if(L instanceof $1||L instanceof zs||L instanceof p2)for(const Y of L.uniformNames)l.push(Y)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,b){const L=[];for(const Y in this.binders){const te=this.binders[Y];if(te instanceof $1||te instanceof zs||te instanceof p2)for(const re of te.uniformNames)if(b[re]){const ve=te.getBinding(l,b[re],re);L.push({name:re,property:Y,binding:ve})}}return L}setUniforms(l,b,L,Y){for(const{name:te,property:re,binding:ve}of b)this.binders[re].setUniform(ve,Y,L.get(re),te)}updatePaintBuffers(l){this._buffers=[];for(const b in this.binders){const L=this.binders[b];if(l&&L instanceof al){const Y=2===l.fromScale?L.zoomInPaintVertexBuffer:L.zoomOutPaintVertexBuffer;Y&&this._buffers.push(Y)}else(L instanceof Y2||L instanceof p2)&&L.paintVertexBuffer&&this._buffers.push(L.paintVertexBuffer)}}upload(l){for(const b in this.binders){const L=this.binders[b];(L instanceof Y2||L instanceof p2||L instanceof al)&&L.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const b=this.binders[l];(b instanceof Y2||b instanceof p2||b instanceof al)&&b.destroy()}}}class Jc{constructor(l,b,L=(()=>!0)){this.programConfigurations={};for(const Y of l)this.programConfigurations[Y.id]=new n4(Y,b,L);this.needsUpload=!1,this._featureMap=new O2,this._bufferOffset=0}populatePaintArrays(l,b,L,Y,te,re){for(const ve in this.programConfigurations)this.programConfigurations[ve].populatePaintArrays(l,b,Y,te,re);void 0!==b.id&&this._featureMap.add(b.id,L,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,b,L,Y){for(const te of L)this.needsUpload=this.programConfigurations[te.id].updatePaintArrays(l,this._featureMap,b,te,Y)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const b in this.programConfigurations)this.programConfigurations[b].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function Y3(p,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[p]||[p.replace(`${l}-`,"").replace(/-/g,"_")]}function Ml(p,l,b){const Y={"line-pattern":{source:ii,composite:ii},"fill-pattern":{source:ii,composite:ii},"fill-extrusion-pattern":{source:ii,composite:ii}}[p];return Y&&Y[b]||{color:{source:pn,composite:K},number:{source:H,composite:pn}}[l][b]}ui("ConstantBinder",$1),ui("CrossFadedConstantBinder",zs),ui("SourceExpressionBinder",Y2),ui("CrossFadedCompositeBinder",al),ui("CompositeExpressionBinder",p2),ui("ProgramConfiguration",n4,{omit:["_buffers"]}),ui("ProgramConfigurationSet",Jc);const Ps=8192,nu=Math.pow(2,14)-1,r4=-nu-1;function Jn(p){const l=Ps/p.extent,b=p.loadGeometry();for(let L=0;L<b.length;L++){const Y=b[L];for(let te=0;te<Y.length;te++){const re=Y[te],ve=Math.round(re.x*l),ze=Math.round(re.y*l);re.x=R(ve,r4,nu),re.y=R(ze,r4,nu),(ve<re.x||ve>re.x+1||ze<re.y||ze>re.y+1)&&$("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return b}function no(p,l){return{type:p.type,id:p.id,properties:p.properties,geometry:l?Jn(p):[]}}function Qr(p,l,b,L,Y){p.emplaceBack(2*l+(L+1)/2,2*b+(Y+1)/2)}class xo{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(b=>b.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Xt,this.indexArray=new lr,this.segments=new fr,this.programConfigurations=new Jc(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id)}populate(l,b,L){const Y=this.layers[0],te=[];let re=null,ve=!1;"circle"===Y.type&&(re=Y.layout.get("circle-sort-key"),ve=!re.isConstant());for(const{feature:ze,id:ke,index:Ze,sourceLayerIndex:et}of l){const st=this.layers[0]._featureFilter.needGeometry,bt=no(ze,st);if(!this.layers[0]._featureFilter.filter(new Wr(this.zoom),bt,L))continue;const Ct=ve?re.evaluate(bt,{},L):void 0,Rt={id:ke,properties:ze.properties,type:ze.type,sourceLayerIndex:et,index:Ze,geometry:st?bt.geometry:Jn(ze),patterns:{},sortKey:Ct};te.push(Rt)}ve&&te.sort((ze,ke)=>ze.sortKey-ke.sortKey);for(const ze of te){const{geometry:ke,index:Ze,sourceLayerIndex:et}=ze,st=l[Ze].feature;this.addFeature(ze,ke,Ze,L),b.featureIndex.insert(st,ke,Ze,et,this.index)}}update(l,b,L){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,b,this.stateDependentLayers,L)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Kr),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,b,L,Y){for(const te of b)for(const re of te){const ve=re.x,ze=re.y;if(ve<0||ve>=Ps||ze<0||ze>=Ps)continue;const ke=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),Ze=ke.vertexLength;Qr(this.layoutVertexArray,ve,ze,-1,-1),Qr(this.layoutVertexArray,ve,ze,1,-1),Qr(this.layoutVertexArray,ve,ze,1,1),Qr(this.layoutVertexArray,ve,ze,-1,1),this.indexArray.emplaceBack(Ze,Ze+1,Ze+2),this.indexArray.emplaceBack(Ze,Ze+3,Ze+2),ke.vertexLength+=4,ke.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,L,{},Y)}}function uc(p,l){for(let b=0;b<p.length;b++)if(O1(l,p[b]))return!0;for(let b=0;b<l.length;b++)if(O1(p,l[b]))return!0;return!!o4(p,l)}function Oh(p,l,b){return!!O1(p,l)||!!Z3(l,p,b)}function iu(p,l){if(1===p.length)return $3(l,p[0]);for(let b=0;b<l.length;b++){const L=l[b];for(let Y=0;Y<L.length;Y++)if(O1(p,L[Y]))return!0}for(let b=0;b<p.length;b++)if($3(l,p[b]))return!0;for(let b=0;b<l.length;b++)if(o4(p,l[b]))return!0;return!1}function sl(p,l,b){if(p.length>1){if(o4(p,l))return!0;for(let L=0;L<l.length;L++)if(Z3(l[L],p,b))return!0}for(let L=0;L<p.length;L++)if(Z3(p[L],l,b))return!0;return!1}function o4(p,l){if(0===p.length||0===l.length)return!1;for(let b=0;b<p.length-1;b++){const L=p[b],Y=p[b+1];for(let te=0;te<l.length-1;te++)if(X3(L,Y,l[te],l[te+1]))return!0}return!1}function X3(p,l,b,L){return oe(p,b,L)!==oe(l,b,L)&&oe(p,l,b)!==oe(p,l,L)}function Z3(p,l,b){const L=b*b;if(1===l.length)return p.distSqr(l[0])<L;for(let Y=1;Y<l.length;Y++)if(o7(p,l[Y-1],l[Y])<L)return!0;return!1}function o7(p,l,b){const L=l.distSqr(b);if(0===L)return p.distSqr(l);const Y=((p.x-l.x)*(b.x-l.x)+(p.y-l.y)*(b.y-l.y))/L;return p.distSqr(Y<0?l:Y>1?b:b.sub(l)._mult(Y)._add(l))}function $3(p,l){let b,L,Y,te=!1;for(let re=0;re<p.length;re++){b=p[re];for(let ve=0,ze=b.length-1;ve<b.length;ze=ve++)L=b[ve],Y=b[ze],L.y>l.y!=Y.y>l.y&&l.x<(Y.x-L.x)*(l.y-L.y)/(Y.y-L.y)+L.x&&(te=!te)}return te}function O1(p,l){let b=!1;for(let L=0,Y=p.length-1;L<p.length;Y=L++){const te=p[L],re=p[Y];te.y>l.y!=re.y>l.y&&l.x<(re.x-te.x)*(l.y-te.y)/(re.y-te.y)+te.x&&(b=!b)}return b}function Sl(p,l,b){const L=b[0],Y=b[2];if(p.x<L.x&&l.x<L.x||p.x>Y.x&&l.x>Y.x||p.y<L.y&&l.y<L.y||p.y>Y.y&&l.y>Y.y)return!1;const te=oe(p,l,b[0]);return te!==oe(p,l,b[1])||te!==oe(p,l,b[2])||te!==oe(p,l,b[3])}function ru(p,l,b){const L=l.paint.get(p).value;return"constant"===L.kind?L.value:b.programConfigurations.get(l.id).getMaxValue(p)}function El(p){return Math.sqrt(p[0]*p[0]+p[1]*p[1])}function N2(p,l,b,L,Y){if(!l[0]&&!l[1])return p;const te=m.convert(l)._mult(Y);"viewport"===b&&te._rotate(-L);const re=[];for(let ve=0;ve<p.length;ve++)re.push(p[ve].sub(te));return re}let kh,q3;ui("CircleBucket",xo,{omit:["layers"]});var a7={get paint(){return q3=q3||new Hs({"circle-radius":new _r(Pe.paint_circle["circle-radius"]),"circle-color":new _r(Pe.paint_circle["circle-color"]),"circle-blur":new _r(Pe.paint_circle["circle-blur"]),"circle-opacity":new _r(Pe.paint_circle["circle-opacity"]),"circle-translate":new Hi(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Hi(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Hi(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Hi(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _r(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _r(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _r(Pe.paint_circle["circle-stroke-opacity"])})},get layout(){return kh=kh||new Hs({"circle-sort-key":new _r(Pe.layout_circle["circle-sort-key"])})}},Ic=1e-6,Yl=typeof Float32Array<"u"?Float32Array:Array;function a4(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function K3(p,l,b){var L=l[0],Y=l[1],te=l[2],re=l[3],ve=l[4],ze=l[5],ke=l[6],Ze=l[7],et=l[8],st=l[9],bt=l[10],Ct=l[11],Rt=l[12],qt=l[13],Jt=l[14],yn=l[15],sn=b[0],Mn=b[1],Ln=b[2],Qn=b[3];return p[0]=sn*L+Mn*ve+Ln*et+Qn*Rt,p[1]=sn*Y+Mn*ze+Ln*st+Qn*qt,p[2]=sn*te+Mn*ke+Ln*bt+Qn*Jt,p[3]=sn*re+Mn*Ze+Ln*Ct+Qn*yn,p[4]=(sn=b[4])*L+(Mn=b[5])*ve+(Ln=b[6])*et+(Qn=b[7])*Rt,p[5]=sn*Y+Mn*ze+Ln*st+Qn*qt,p[6]=sn*te+Mn*ke+Ln*bt+Qn*Jt,p[7]=sn*re+Mn*Ze+Ln*Ct+Qn*yn,p[8]=(sn=b[8])*L+(Mn=b[9])*ve+(Ln=b[10])*et+(Qn=b[11])*Rt,p[9]=sn*Y+Mn*ze+Ln*st+Qn*qt,p[10]=sn*te+Mn*ke+Ln*bt+Qn*Jt,p[11]=sn*re+Mn*Ze+Ln*Ct+Qn*yn,p[12]=(sn=b[12])*L+(Mn=b[13])*ve+(Ln=b[14])*et+(Qn=b[15])*Rt,p[13]=sn*Y+Mn*ze+Ln*st+Qn*qt,p[14]=sn*te+Mn*ke+Ln*bt+Qn*Jt,p[15]=sn*re+Mn*Ze+Ln*Ct+Qn*yn,p}Math.hypot||(Math.hypot=function(){for(var p=0,l=arguments.length;l--;)p+=arguments[l]*arguments[l];return Math.sqrt(p)});var m0,s7=K3;function s4(p,l,b){var L=l[0],Y=l[1],te=l[2],re=l[3];return p[0]=b[0]*L+b[4]*Y+b[8]*te+b[12]*re,p[1]=b[1]*L+b[5]*Y+b[9]*te+b[13]*re,p[2]=b[2]*L+b[6]*Y+b[10]*te+b[14]*re,p[3]=b[3]*L+b[7]*Y+b[11]*te+b[15]*re,p}m0=new Yl(4),Yl!=Float32Array&&(m0[0]=0,m0[1]=0,m0[2]=0,m0[3]=0);class Q3 extends ms{constructor(l){super(l,a7)}createBucket(l){return new xo(l)}queryRadius(l){const b=l;return ru("circle-radius",this,b)+ru("circle-stroke-width",this,b)+El(this.paint.get("circle-translate"))}queryIntersectsFeature(l,b,L,Y,te,re,ve,ze){const ke=N2(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),re.angle,ve),Ze=this.paint.get("circle-radius").evaluate(b,L)+this.paint.get("circle-stroke-width").evaluate(b,L),et="map"===this.paint.get("circle-pitch-alignment"),st=et?ke:(Rt=ze,ke.map(qt=>J3(qt,Rt))),bt=et?Ze*ve:Ze;var Rt;for(const Ct of Y)for(const Rt of Ct){const qt=et?Rt:J3(Rt,ze);let Jt=bt;const yn=s4([],[Rt.x,Rt.y,0,1],ze);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Jt*=yn[3]/re.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Jt*=re.cameraToCenterDistance/yn[3]),Oh(st,qt,Jt))return!0}return!1}}function J3(p,l){const b=s4([],[p.x,p.y,0,1],l);return new m(b[0]/b[3],b[1]/b[3])}class e8 extends xo{}let t8;ui("HeatmapBucket",e8,{omit:["layers"]});var Nh={get paint(){return t8=t8||new Hs({"heatmap-radius":new _r(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _r(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Hi(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Uc(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Hi(Pe.paint_heatmap["heatmap-opacity"])})}};function c4(p,{width:l,height:b},L,Y){if(Y){if(Y instanceof Uint8ClampedArray)Y=new Uint8Array(Y.buffer);else if(Y.length!==l*b*L)throw new RangeError(`mismatched image size. expected: ${Y.length} but got: ${l*b*L}`)}else Y=new Uint8Array(l*b*L);return p.width=l,p.height=b,p.data=Y,p}function Rh(p,{width:l,height:b},L){if(l===p.width&&b===p.height)return;const Y=c4({},{width:l,height:b},L);n8(p,Y,{x:0,y:0},{x:0,y:0},{width:Math.min(p.width,l),height:Math.min(p.height,b)},L),p.width=l,p.height=b,p.data=Y.data}function n8(p,l,b,L,Y,te){if(0===Y.width||0===Y.height)return l;if(Y.width>p.width||Y.height>p.height||b.x>p.width-Y.width||b.y>p.height-Y.height)throw new RangeError("out of range source coordinates for image copy");if(Y.width>l.width||Y.height>l.height||L.x>l.width-Y.width||L.y>l.height-Y.height)throw new RangeError("out of range destination coordinates for image copy");const re=p.data,ve=l.data;if(re===ve)throw new Error("srcData equals dstData, so image is already copied");for(let ze=0;ze<Y.height;ze++){const ke=((b.y+ze)*p.width+b.x)*te,Ze=((L.y+ze)*l.width+L.x)*te;for(let et=0;et<Y.width*te;et++)ve[Ze+et]=re[ke+et]}return l}class q1{constructor(l,b){c4(this,l,1,b)}resize(l){Rh(this,l,1)}clone(){return new q1({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,b,L,Y,te){n8(l,b,L,Y,te,1)}}class K1{constructor(l,b){c4(this,l,4,b)}resize(l){Rh(this,l,4)}replace(l,b){b?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new K1({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,b,L,Y,te){n8(l,b,L,Y,te,4)}}function js(p){const l={},b=p.resolution||256,L=p.clips?p.clips.length:1,Y=p.image||new K1({width:b,height:L});if(Math.log(b)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${b}`);const te=(re,ve,ze)=>{l[p.evaluationKey]=ze;const ke=p.expression.evaluate(l);Y.data[re+ve+0]=Math.floor(255*ke.r/ke.a),Y.data[re+ve+1]=Math.floor(255*ke.g/ke.a),Y.data[re+ve+2]=Math.floor(255*ke.b/ke.a),Y.data[re+ve+3]=Math.floor(255*ke.a)};if(p.clips)for(let re=0,ve=0;re<L;++re,ve+=4*b)for(let ze=0,ke=0;ze<b;ze++,ke+=4){const Ze=ze/(b-1),{start:et,end:st}=p.clips[re];te(ve,ke,et*(1-Ze)+st*Ze)}else for(let re=0,ve=0;re<b;re++,ve+=4)te(0,ve,re/(b-1));return Y}ui("AlphaImage",q1),ui("RGBAImage",K1);class l4 extends ms{createBucket(l){return new e8(l)}constructor(l){super(l,Nh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){"heatmap-color"===l&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=js({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Fh;var r8={get paint(){return Fh=Fh||new Hs({"hillshade-illumination-direction":new Hi(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Hi(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Hi(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Hi(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Hi(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Hi(Pe.paint_hillshade["hillshade-accent-color"])})}};class c7 extends ms{constructor(l){super(l,r8)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const Vh=ct([{name:"a_pos",components:2,type:"Int16"}],4),{members:Hh}=Vh;var ou={exports:{}};function X2(p,l,b){b=b||2;var L,Y,te,re,ve,ze,ke,Ze=l&&l.length,et=Ze?l[0]*b:p.length,st=Bh(p,0,et,b,!0),bt=[];if(!st||st.next===st.prev)return bt;if(Ze&&(st=function(Rt,qt,Jt,yn){var sn,Mn,Ln,Qn=[];for(sn=0,Mn=qt.length;sn<Mn;sn++)(Ln=Bh(Rt,qt[sn]*yn,sn<Mn-1?qt[sn+1]*yn:Rt.length,yn,!1))===Ln.next&&(Ln.steiner=!0),Qn.push(Db(Ln));for(Qn.sort(l7),sn=0;sn<Qn.length;sn++)Jt=au(Qn[sn],Jt);return Jt}(p,l,st,b)),p.length>80*b){L=te=p[0],Y=re=p[1];for(var Ct=b;Ct<et;Ct+=b)(ve=p[Ct])<L&&(L=ve),(ze=p[Ct+1])<Y&&(Y=ze),ve>te&&(te=ve),ze>re&&(re=ze);ke=0!==(ke=Math.max(te-L,re-Y))?32767/ke:0}return Xl(st,bt,b,L,Y,ke,0),bt}function Bh(p,l,b,L,Y){var te,re;if(Y===Wh(p,l,b,L)>0)for(te=l;te<b;te+=L)re=cu(te,p[te],p[te+1],re);else for(te=b-L;te>=l;te-=L)re=cu(te,p[te],p[te+1],re);return re&&g6(re,re.next)&&(g0(re),re=re.next),re}function cl(p,l){if(!p)return p;l||(l=p);var b,L=p;do{if(b=!1,L.steiner||!g6(L,L.next)&&0!==e1(L.prev,L,L.next))L=L.next;else{if(g0(L),(L=l=L.prev)===L.next)break;b=!0}}while(b||L!==l);return l}function Xl(p,l,b,L,Y,te,re){if(p){!re&&te&&function(Ze,et,st,bt){var Ct=Ze;do{0===Ct.z&&(Ct.z=a8(Ct.x,Ct.y,et,st,bt)),Ct.prevZ=Ct.prev,Ct.nextZ=Ct.next,Ct=Ct.next}while(Ct!==Ze);Ct.prevZ.nextZ=null,Ct.prevZ=null,function(Rt){var qt,Jt,yn,sn,Mn,Ln,Qn,pi,Oi=1;do{for(Jt=Rt,Rt=null,Mn=null,Ln=0;Jt;){for(Ln++,yn=Jt,Qn=0,qt=0;qt<Oi&&(Qn++,yn=yn.nextZ);qt++);for(pi=Oi;Qn>0||pi>0&&yn;)0!==Qn&&(0===pi||!yn||Jt.z<=yn.z)?(sn=Jt,Jt=Jt.nextZ,Qn--):(sn=yn,yn=yn.nextZ,pi--),Mn?Mn.nextZ=sn:Rt=sn,sn.prevZ=Mn,Mn=sn;Jt=yn}Mn.nextZ=null,Oi*=2}while(Ln>1)}(Ct)}(p,L,Y,te);for(var ve,ze,ke=p;p.prev!==p.next;)if(ve=p.prev,ze=p.next,te?o8(p,L,Y,te):m6(p))l.push(ve.i/b|0),l.push(p.i/b|0),l.push(ze.i/b|0),g0(p),p=ze.next,ke=ze.next;else if((p=ze)===ke){re?1===re?Xl(p=jh(cl(p),l,b),l,b,L,Y,te,2):2===re&&Uh(p,l,b,L,Y,te):Xl(cl(p),l,b,L,Y,te,1);break}}}function m6(p){var l=p.prev,b=p,L=p.next;if(e1(l,b,L)>=0)return!1;for(var Y=l.x,te=b.x,re=L.x,ve=l.y,ze=b.y,ke=L.y,Ze=Y<te?Y<re?Y:re:te<re?te:re,et=ve<ze?ve<ke?ve:ke:ze<ke?ze:ke,st=Y>te?Y>re?Y:re:te>re?te:re,bt=ve>ze?ve>ke?ve:ke:ze>ke?ze:ke,Ct=L.next;Ct!==l;){if(Ct.x>=Ze&&Ct.x<=st&&Ct.y>=et&&Ct.y<=bt&&Zl(Y,ve,te,ze,re,ke,Ct.x,Ct.y)&&e1(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.next}return!0}function o8(p,l,b,L){var Y=p.prev,te=p,re=p.next;if(e1(Y,te,re)>=0)return!1;for(var ve=Y.x,ze=te.x,ke=re.x,Ze=Y.y,et=te.y,st=re.y,bt=ve<ze?ve<ke?ve:ke:ze<ke?ze:ke,Ct=Ze<et?Ze<st?Ze:st:et<st?et:st,Rt=ve>ze?ve>ke?ve:ke:ze>ke?ze:ke,qt=Ze>et?Ze>st?Ze:st:et>st?et:st,Jt=a8(bt,Ct,l,b,L),yn=a8(Rt,qt,l,b,L),sn=p.prevZ,Mn=p.nextZ;sn&&sn.z>=Jt&&Mn&&Mn.z<=yn;){if(sn.x>=bt&&sn.x<=Rt&&sn.y>=Ct&&sn.y<=qt&&sn!==Y&&sn!==re&&Zl(ve,Ze,ze,et,ke,st,sn.x,sn.y)&&e1(sn.prev,sn,sn.next)>=0||(sn=sn.prevZ,Mn.x>=bt&&Mn.x<=Rt&&Mn.y>=Ct&&Mn.y<=qt&&Mn!==Y&&Mn!==re&&Zl(ve,Ze,ze,et,ke,st,Mn.x,Mn.y)&&e1(Mn.prev,Mn,Mn.next)>=0))return!1;Mn=Mn.nextZ}for(;sn&&sn.z>=Jt;){if(sn.x>=bt&&sn.x<=Rt&&sn.y>=Ct&&sn.y<=qt&&sn!==Y&&sn!==re&&Zl(ve,Ze,ze,et,ke,st,sn.x,sn.y)&&e1(sn.prev,sn,sn.next)>=0)return!1;sn=sn.prevZ}for(;Mn&&Mn.z<=yn;){if(Mn.x>=bt&&Mn.x<=Rt&&Mn.y>=Ct&&Mn.y<=qt&&Mn!==Y&&Mn!==re&&Zl(ve,Ze,ze,et,ke,st,Mn.x,Mn.y)&&e1(Mn.prev,Mn,Mn.next)>=0)return!1;Mn=Mn.nextZ}return!0}function jh(p,l,b){var L=p;do{var Y=L.prev,te=L.next.next;!g6(Y,te)&&u7(Y,L,L.next,te)&&Al(Y,te)&&Al(te,Y)&&(l.push(Y.i/b|0),l.push(L.i/b|0),l.push(te.i/b|0),g0(L),g0(L.next),L=p=te),L=L.next}while(L!==p);return cl(L)}function Uh(p,l,b,L,Y,te){var re=p;do{for(var ve=re.next.next;ve!==re.prev;){if(re.i!==ve.i&&Ob(re,ve)){var ze=Gh(re,ve);return re=cl(re,re.next),ze=cl(ze,ze.next),Xl(re,l,b,L,Y,te,0),void Xl(ze,l,b,L,Y,te,0)}ve=ve.next}re=re.next}while(re!==p)}function l7(p,l){return p.x-l.x}function au(p,l){var b=function(Y,te){var re,ve=te,ze=Y.x,ke=Y.y,Ze=-1/0;do{if(ke<=ve.y&&ke>=ve.next.y&&ve.next.y!==ve.y){var et=ve.x+(ke-ve.y)*(ve.next.x-ve.x)/(ve.next.y-ve.y);if(et<=ze&&et>Ze&&(Ze=et,re=ve.x<ve.next.x?ve:ve.next,et===ze))return re}ve=ve.next}while(ve!==te);if(!re)return null;var st,bt=re,Ct=re.x,Rt=re.y,qt=1/0;ve=re;do{ze>=ve.x&&ve.x>=Ct&&ze!==ve.x&&Zl(ke<Rt?ze:Ze,ke,Ct,Rt,ke<Rt?Ze:ze,ke,ve.x,ve.y)&&(st=Math.abs(ke-ve.y)/(ze-ve.x),Al(ve,Y)&&(st<qt||st===qt&&(ve.x>re.x||ve.x===re.x&&u4(re,ve)))&&(re=ve,qt=st)),ve=ve.next}while(ve!==bt);return re}(p,l);if(!b)return l;var L=Gh(b,p);return cl(L,L.next),cl(b,b.next)}function u4(p,l){return e1(p.prev,p,l.prev)<0&&e1(l.next,p,p.next)<0}function a8(p,l,b,L,Y){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=(p-b)*Y|0)|p<<8))|p<<4))|p<<2))|p<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-L)*Y|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Db(p){var l=p,b=p;do{(l.x<b.x||l.x===b.x&&l.y<b.y)&&(b=l),l=l.next}while(l!==p);return b}function Zl(p,l,b,L,Y,te,re,ve){return(Y-re)*(l-ve)>=(p-re)*(te-ve)&&(p-re)*(L-ve)>=(b-re)*(l-ve)&&(b-re)*(te-ve)>=(Y-re)*(L-ve)}function Ob(p,l){return p.next.i!==l.i&&p.prev.i!==l.i&&!function(b,L){var Y=b;do{if(Y.i!==b.i&&Y.next.i!==b.i&&Y.i!==L.i&&Y.next.i!==L.i&&u7(Y,Y.next,b,L))return!0;Y=Y.next}while(Y!==b);return!1}(p,l)&&(Al(p,l)&&Al(l,p)&&function(b,L){var Y=b,te=!1,re=(b.x+L.x)/2,ve=(b.y+L.y)/2;do{Y.y>ve!=Y.next.y>ve&&Y.next.y!==Y.y&&re<(Y.next.x-Y.x)*(ve-Y.y)/(Y.next.y-Y.y)+Y.x&&(te=!te),Y=Y.next}while(Y!==b);return te}(p,l)&&(e1(p.prev,p,l.prev)||e1(p,l.prev,l))||g6(p,l)&&e1(p.prev,p,p.next)>0&&e1(l.prev,l,l.next)>0)}function e1(p,l,b){return(l.y-p.y)*(b.x-l.x)-(l.x-p.x)*(b.y-l.y)}function g6(p,l){return p.x===l.x&&p.y===l.y}function u7(p,l,b,L){var Y=su(e1(p,l,b)),te=su(e1(p,l,L)),re=su(e1(b,L,p)),ve=su(e1(b,L,l));return Y!==te&&re!==ve||!(0!==Y||!s8(p,b,l))||!(0!==te||!s8(p,L,l))||!(0!==re||!s8(b,p,L))||!(0!==ve||!s8(b,l,L))}function s8(p,l,b){return l.x<=Math.max(p.x,b.x)&&l.x>=Math.min(p.x,b.x)&&l.y<=Math.max(p.y,b.y)&&l.y>=Math.min(p.y,b.y)}function su(p){return p>0?1:p<0?-1:0}function Al(p,l){return e1(p.prev,p,p.next)<0?e1(p,l,p.next)>=0&&e1(p,p.prev,l)>=0:e1(p,l,p.prev)<0||e1(p,p.next,l)<0}function Gh(p,l){var b=new lu(p.i,p.x,p.y),L=new lu(l.i,l.x,l.y),Y=p.next,te=l.prev;return p.next=l,l.prev=p,b.next=Y,Y.prev=b,L.next=b,b.prev=L,te.next=L,L.prev=te,L}function cu(p,l,b,L){var Y=new lu(p,l,b);return L?(Y.next=L.next,Y.prev=L,L.next.prev=Y,L.next=Y):(Y.prev=Y,Y.next=Y),Y}function g0(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function lu(p,l,b){this.i=p,this.x=l,this.y=b,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wh(p,l,b,L){for(var Y=0,te=l,re=b-L;te<b;te+=L)Y+=(p[re]-p[te])*(p[te+1]+p[re+1]),re=te;return Y}ou.exports=X2,ou.exports.default=X2,X2.deviation=function(p,l,b,L){var Y=l&&l.length,te=Math.abs(Wh(p,0,Y?l[0]*b:p.length,b));if(Y)for(var re=0,ve=l.length;re<ve;re++)te-=Math.abs(Wh(p,l[re]*b,re<ve-1?l[re+1]*b:p.length,b));var ze=0;for(re=0;re<L.length;re+=3){var ke=L[re]*b,Ze=L[re+1]*b,et=L[re+2]*b;ze+=Math.abs((p[ke]-p[et])*(p[Ze+1]-p[ke+1])-(p[ke]-p[Ze])*(p[et+1]-p[ke+1]))}return 0===te&&0===ze?0:Math.abs((ze-te)/te)},X2.flatten=function(p){for(var l=p[0][0].length,b={vertices:[],holes:[],dimensions:l},L=0,Y=0;Y<p.length;Y++){for(var te=0;te<p[Y].length;te++)for(var re=0;re<l;re++)b.vertices.push(p[Y][te][re]);Y>0&&b.holes.push(L+=p[Y-1].length)}return b};var c8=h(ou.exports);function Yh(p,l,b,L,Y){Xh(p,l,b||0,L||p.length-1,Y||d7)}function Xh(p,l,b,L,Y){for(;L>b;){if(L-b>600){var te=L-b+1,re=l-b+1,ve=Math.log(te),ze=.5*Math.exp(2*ve/3),ke=.5*Math.sqrt(ve*ze*(te-ze)/te)*(re-te/2<0?-1:1);Xh(p,l,Math.max(b,Math.floor(l-re*ze/te+ke)),Math.min(L,Math.floor(l+(te-re)*ze/te+ke)),Y)}var Ze=p[l],et=b,st=L;for(e2(p,b,l),Y(p[L],Ze)>0&&e2(p,b,L);et<st;){for(e2(p,et,st),et++,st--;Y(p[et],Ze)<0;)et++;for(;Y(p[st],Ze)>0;)st--}0===Y(p[b],Ze)?e2(p,b,st):e2(p,++st,L),st<=l&&(b=st+1),l<=st&&(L=st-1)}}function e2(p,l,b){var L=p[l];p[l]=p[b],p[b]=L}function d7(p,l){return p<l?-1:p>l?1:0}function uu(p,l){const b=p.length;if(b<=1)return[p];const L=[];let Y,te;for(let re=0;re<b;re++){const ve=X(p[re]);0!==ve&&(p[re].area=Math.abs(ve),void 0===te&&(te=ve<0),te===ve<0?(Y&&L.push(Y),Y=[p[re]]):Y.push(p[re]))}if(Y&&L.push(Y),l>1)for(let re=0;re<L.length;re++)L[re].length<=l||(Yh(L[re],l,1,L[re].length-1,l8),L[re]=L[re].slice(0,l));return L}function l8(p,l){return l.area-p.area}function v6(p,l,b){const L=b.patternDependencies;let Y=!1;for(const te of l){const re=te.paint.get(`${p}-pattern`);re.isConstant()||(Y=!0);const ve=re.constantOr(null);ve&&(Y=!0,L[ve.to]=!0,L[ve.from]=!0)}return Y}function du(p,l,b,L,Y){const te=Y.patternDependencies;for(const re of l){const ve=re.paint.get(`${p}-pattern`).value;if("constant"!==ve.kind){let ze=ve.evaluate({zoom:L-1},b,{},Y.availableImages),ke=ve.evaluate({zoom:L},b,{},Y.availableImages),Ze=ve.evaluate({zoom:L+1},b,{},Y.availableImages);ze=ze&&ze.name?ze.name:ze,ke=ke&&ke.name?ke.name:ke,Ze=Ze&&Ze.name?Ze.name:Ze,te[ze]=!0,te[ke]=!0,te[Ze]=!0,b.patterns[re.id]={min:ze,mid:ke,max:Ze}}}return b}class d4{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(b=>b.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fn,this.indexArray=new lr,this.indexArray2=new Yi,this.programConfigurations=new Jc(l.layers,l.zoom),this.segments=new fr,this.segments2=new fr,this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id)}populate(l,b,L){this.hasPattern=v6("fill",this.layers,b);const Y=this.layers[0].layout.get("fill-sort-key"),te=!Y.isConstant(),re=[];for(const{feature:ve,id:ze,index:ke,sourceLayerIndex:Ze}of l){const et=this.layers[0]._featureFilter.needGeometry,st=no(ve,et);if(!this.layers[0]._featureFilter.filter(new Wr(this.zoom),st,L))continue;const bt=te?Y.evaluate(st,{},L,b.availableImages):void 0,Ct={id:ze,properties:ve.properties,type:ve.type,sourceLayerIndex:Ze,index:ke,geometry:et?st.geometry:Jn(ve),patterns:{},sortKey:bt};re.push(Ct)}te&&re.sort((ve,ze)=>ve.sortKey-ze.sortKey);for(const ve of re){const{geometry:ze,index:ke,sourceLayerIndex:Ze}=ve;if(this.hasPattern){const et=du("fill",this.layers,ve,this.zoom,b);this.patternFeatures.push(et)}else this.addFeature(ve,ze,ke,L,{});b.featureIndex.insert(l[ke].feature,ze,ke,Ze,this.index)}}update(l,b,L){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,b,this.stateDependentLayers,L)}addFeatures(l,b,L){for(const Y of this.patternFeatures)this.addFeature(Y,Y.geometry,Y.index,b,L)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Hh),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,b,L,Y,te){for(const re of uu(b,500)){let ve=0;for(const bt of re)ve+=bt.length;const ze=this.segments.prepareSegment(ve,this.layoutVertexArray,this.indexArray),ke=ze.vertexLength,Ze=[],et=[];for(const bt of re){if(0===bt.length)continue;bt!==re[0]&&et.push(Ze.length/2);const Ct=this.segments2.prepareSegment(bt.length,this.layoutVertexArray,this.indexArray2),Rt=Ct.vertexLength;this.layoutVertexArray.emplaceBack(bt[0].x,bt[0].y),this.indexArray2.emplaceBack(Rt+bt.length-1,Rt),Ze.push(bt[0].x),Ze.push(bt[0].y);for(let qt=1;qt<bt.length;qt++)this.layoutVertexArray.emplaceBack(bt[qt].x,bt[qt].y),this.indexArray2.emplaceBack(Rt+qt-1,Rt+qt),Ze.push(bt[qt].x),Ze.push(bt[qt].y);Ct.vertexLength+=bt.length,Ct.primitiveLength+=bt.length}const st=c8(Ze,et);for(let bt=0;bt<st.length;bt+=3)this.indexArray.emplaceBack(ke+st[bt],ke+st[bt+1],ke+st[bt+2]);ze.vertexLength+=ve,ze.primitiveLength+=st.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,L,te,Y)}}let Zh,u8;ui("FillBucket",d4,{omit:["layers","patternFeatures"]});var $h={get paint(){return u8=u8||new Hs({"fill-antialias":new Hi(Pe.paint_fill["fill-antialias"]),"fill-opacity":new _r(Pe.paint_fill["fill-opacity"]),"fill-color":new _r(Pe.paint_fill["fill-color"]),"fill-outline-color":new _r(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Hi(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Hi(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new h2(Pe.paint_fill["fill-pattern"])})},get layout(){return Zh=Zh||new Hs({"fill-sort-key":new _r(Pe.layout_fill["fill-sort-key"])})}};class qh extends ms{constructor(l){super(l,$h)}recalculate(l,b){super.recalculate(l,b);const L=this.paint._values["fill-outline-color"];"constant"===L.value.kind&&void 0===L.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new d4(l)}queryRadius(){return El(this.paint.get("fill-translate"))}queryIntersectsFeature(l,b,L,Y,te,re,ve){return iu(N2(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),re.angle,ve),Y)}isTileClipped(){return!0}}const Kh=ct([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),h7=ct([{name:"a_centroid",components:2,type:"Int16"}],4),{members:y6}=Kh;var t2={},f7=g,d8=v0;function v0(p,l,b,L,Y){this.properties={},this.extent=b,this.type=0,this._pbf=p,this._geometry=-1,this._keys=L,this._values=Y,p.readFields(h4,this,l)}function h4(p,l,b){1==p?l.id=b.readVarint():2==p?function(L,Y){for(var te=L.readVarint()+L.pos;L.pos<te;){var re=Y._keys[L.readVarint()],ve=Y._values[L.readVarint()];Y.properties[re]=ve}}(b,l):3==p?l.type=b.readVarint():4==p&&(l._geometry=b.pos)}function p7(p){for(var l,b,L=0,Y=0,te=p.length,re=te-1;Y<te;re=Y++)L+=((b=p[re]).x-(l=p[Y]).x)*(l.y+b.y);return L}v0.types=["Unknown","Point","LineString","Polygon"],v0.prototype.loadGeometry=function(){var p=this._pbf;p.pos=this._geometry;for(var l,b=p.readVarint()+p.pos,L=1,Y=0,te=0,re=0,ve=[];p.pos<b;){if(Y<=0){var ze=p.readVarint();L=7&ze,Y=ze>>3}if(Y--,1===L||2===L)te+=p.readSVarint(),re+=p.readSVarint(),1===L&&(l&&ve.push(l),l=[]),l.push(new f7(te,re));else{if(7!==L)throw new Error("unknown command "+L);l&&l.push(l[0].clone())}}return l&&ve.push(l),ve},v0.prototype.bbox=function(){var p=this._pbf;p.pos=this._geometry;for(var l=p.readVarint()+p.pos,b=1,L=0,Y=0,te=0,re=1/0,ve=-1/0,ze=1/0,ke=-1/0;p.pos<l;){if(L<=0){var Ze=p.readVarint();b=7&Ze,L=Ze>>3}if(L--,1===b||2===b)(Y+=p.readSVarint())<re&&(re=Y),Y>ve&&(ve=Y),(te+=p.readSVarint())<ze&&(ze=te),te>ke&&(ke=te);else if(7!==b)throw new Error("unknown command "+b)}return[re,ze,ve,ke]},v0.prototype.toGeoJSON=function(p,l,b){var L,Y,te=this.extent*Math.pow(2,b),re=this.extent*p,ve=this.extent*l,ze=this.loadGeometry(),ke=v0.types[this.type];function Ze(bt){for(var Ct=0;Ct<bt.length;Ct++){var Rt=bt[Ct];bt[Ct]=[360*(Rt.x+re)/te-180,360/Math.PI*Math.atan(Math.exp((180-360*(Rt.y+ve)/te)*Math.PI/180))-90]}}switch(this.type){case 1:var et=[];for(L=0;L<ze.length;L++)et[L]=ze[L][0];Ze(ze=et);break;case 2:for(L=0;L<ze.length;L++)Ze(ze[L]);break;case 3:for(ze=function(bt){var Ct=bt.length;if(Ct<=1)return[bt];for(var Rt,qt,Jt=[],yn=0;yn<Ct;yn++){var sn=p7(bt[yn]);0!==sn&&(void 0===qt&&(qt=sn<0),qt===sn<0?(Rt&&Jt.push(Rt),Rt=[bt[yn]]):Rt.push(bt[yn]))}return Rt&&Jt.push(Rt),Jt}(ze),L=0;L<ze.length;L++)for(Y=0;Y<ze[L].length;Y++)Ze(ze[L][Y])}1===ze.length?ze=ze[0]:ke="Multi"+ke;var st={type:"Feature",geometry:{type:ke,coordinates:ze},properties:this.properties};return"id"in this&&(st.id=this.id),st};var Gc=d8,Qh=io;function io(p,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=p,this._keys=[],this._values=[],this._features=[],p.readFields(h8,this,l),this.length=this._features.length}function h8(p,l,b){15===p?l.version=b.readVarint():1===p?l.name=b.readString():5===p?l.extent=b.readVarint():2===p?l._features.push(b.pos):3===p?l._keys.push(b.readString()):4===p&&l._values.push(function(L){for(var Y=null,te=L.readVarint()+L.pos;L.pos<te;){var re=L.readVarint()>>3;Y=1===re?L.readString():2===re?L.readFloat():3===re?L.readDouble():4===re?L.readVarint64():5===re?L.readVarint():6===re?L.readSVarint():7===re?L.readBoolean():null}return Y}(b))}io.prototype.feature=function(p){if(p<0||p>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[p];var l=this._pbf.readVarint()+this._pbf.pos;return new Gc(this._pbf,l,this.extent,this._keys,this._values)};var m7=Qh;function Jh(p,l,b){if(3===p){var L=new m7(b,b.readVarint()+b.pos);L.length&&(l[L.name]=L)}}t2.VectorTile=function(p,l){this.layers=p.readFields(Jh,{},l)},t2.VectorTileFeature=d8,t2.VectorTileLayer=Qh;const ll=t2.VectorTileFeature.types,$l=Math.pow(2,13);function ul(p,l,b,L,Y,te,re,ve){p.emplaceBack(l,b,2*Math.floor(L*$l)+re,Y*$l*2,te*$l*2,Math.round(ve))}class ql{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(b=>b.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Fn,this.centroidVertexArray=new zn,this.indexArray=new lr,this.programConfigurations=new Jc(l.layers,l.zoom),this.segments=new fr,this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id)}populate(l,b,L){this.features=[],this.hasPattern=v6("fill-extrusion",this.layers,b);for(const{feature:Y,id:te,index:re,sourceLayerIndex:ve}of l){const ze=this.layers[0]._featureFilter.needGeometry,ke=no(Y,ze);if(!this.layers[0]._featureFilter.filter(new Wr(this.zoom),ke,L))continue;const Ze={id:te,sourceLayerIndex:ve,index:re,geometry:ze?ke.geometry:Jn(Y),properties:Y.properties,type:Y.type,patterns:{}};this.hasPattern?this.features.push(du("fill-extrusion",this.layers,Ze,this.zoom,b)):this.addFeature(Ze,Ze.geometry,re,L,{}),b.featureIndex.insert(Y,Ze.geometry,re,ve,this.index,!0)}}addFeatures(l,b,L){for(const Y of this.features){const{geometry:te}=Y;this.addFeature(Y,te,Y.index,b,L)}}update(l,b,L){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,b,this.stateDependentLayers,L)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,y6),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,h7.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,b,L,Y,te){const re={x:0,y:0,vertexCount:0};for(const ve of uu(b,500)){let ze=0;for(const Ct of ve)ze+=Ct.length;let ke=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ct of ve){if(0===Ct.length||((p=Ct).every(l=>l.x<0)||p.every(l=>l.x>Ps)||p.every(l=>l.y<0)||p.every(l=>l.y>Ps)))continue;let Rt=0;for(let qt=0;qt<Ct.length;qt++){const Jt=Ct[qt];if(qt>=1){const yn=Ct[qt-1];if(!ef(Jt,yn)){ke.vertexLength+4>fr.MAX_VERTEX_ARRAY_LENGTH&&(ke=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const sn=Jt.sub(yn)._perp()._unit(),Mn=yn.dist(Jt);Rt+Mn>32768&&(Rt=0),ul(this.layoutVertexArray,Jt.x,Jt.y,sn.x,sn.y,0,0,Rt),ul(this.layoutVertexArray,Jt.x,Jt.y,sn.x,sn.y,0,1,Rt),re.x+=2*Jt.x,re.y+=2*Jt.y,re.vertexCount+=2,Rt+=Mn,ul(this.layoutVertexArray,yn.x,yn.y,sn.x,sn.y,0,0,Rt),ul(this.layoutVertexArray,yn.x,yn.y,sn.x,sn.y,0,1,Rt),re.x+=2*yn.x,re.y+=2*yn.y,re.vertexCount+=2;const Ln=ke.vertexLength;this.indexArray.emplaceBack(Ln,Ln+2,Ln+1),this.indexArray.emplaceBack(Ln+1,Ln+2,Ln+3),ke.vertexLength+=4,ke.primitiveLength+=2}}}}if(ke.vertexLength+ze>fr.MAX_VERTEX_ARRAY_LENGTH&&(ke=this.segments.prepareSegment(ze,this.layoutVertexArray,this.indexArray)),"Polygon"!==ll[l.type])continue;const Ze=[],et=[],st=ke.vertexLength;for(const Ct of ve)if(0!==Ct.length){Ct!==ve[0]&&et.push(Ze.length/2);for(let Rt=0;Rt<Ct.length;Rt++){const qt=Ct[Rt];ul(this.layoutVertexArray,qt.x,qt.y,0,0,1,1,0),re.x+=qt.x,re.y+=qt.y,re.vertexCount+=1,Ze.push(qt.x),Ze.push(qt.y)}}const bt=c8(Ze,et);for(let Ct=0;Ct<bt.length;Ct+=3)this.indexArray.emplaceBack(st+bt[Ct],st+bt[Ct+2],st+bt[Ct+1]);ke.primitiveLength+=bt.length/3,ke.vertexLength+=ze}var p;for(let ve=0;ve<re.vertexCount;ve++)this.centroidVertexArray.emplaceBack(Math.floor(re.x/re.vertexCount),Math.floor(re.y/re.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,L,te,Y)}}function ef(p,l){return p.x===l.x&&(p.x<0||p.x>Ps)||p.y===l.y&&(p.y<0||p.y>Ps)}let y0;ui("FillExtrusionBucket",ql,{omit:["layers","features"]});var kb={get paint(){return y0=y0||new Hs({"fill-extrusion-opacity":new Hi(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _r(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Hi(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Hi(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new h2(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _r(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _r(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Hi(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class g7 extends ms{constructor(l){super(l,kb)}createBucket(l){return new ql(l)}queryRadius(){return El(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,b,L,Y,te,re,ve,ze){const ke=N2(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),re.angle,ve),Ze=this.paint.get("fill-extrusion-height").evaluate(b,L),et=this.paint.get("fill-extrusion-base").evaluate(b,L),st=function(Ct,Rt,qt,Jt){const yn=[];for(const sn of Ct){const Mn=[sn.x,sn.y,0,1];s4(Mn,Mn,Rt),yn.push(new m(Mn[0]/Mn[3],Mn[1]/Mn[3]))}return yn}(ke,ze),bt=function(Ct,Rt,qt,Jt){const yn=[],sn=[],Mn=Jt[8]*Rt,Ln=Jt[9]*Rt,Qn=Jt[10]*Rt,pi=Jt[11]*Rt,Oi=Jt[8]*qt,Ai=Jt[9]*qt,xi=Jt[10]*qt,mi=Jt[11]*qt;for(const Bi of Ct){const yi=[],ai=[];for(const pr of Bi){const tr=pr.x,Jr=pr.y,us=Jt[0]*tr+Jt[4]*Jr+Jt[12],gs=Jt[1]*tr+Jt[5]*Jr+Jt[13],Us=Jt[2]*tr+Jt[6]*Jr+Jt[14],m1=Jt[3]*tr+Jt[7]*Jr+Jt[15],k1=Us+Qn,n1=m1+pi,M1=us+Oi,J1=gs+Ai,r2=Us+xi,Yc=m1+mi,S1=new m((us+Mn)/n1,(gs+Ln)/n1);S1.z=k1/n1,yi.push(S1);const r1=new m(M1/Yc,J1/Yc);r1.z=r2/Yc,ai.push(r1)}yn.push(yi),sn.push(ai)}return[yn,sn]}(Y,et,Ze,ze);return function(Ct,Rt,qt){let Jt=1/0;iu(qt,Rt)&&(Jt=v7(qt,Rt[0]));for(let yn=0;yn<Rt.length;yn++){const sn=Rt[yn],Mn=Ct[yn];for(let Ln=0;Ln<sn.length-1;Ln++){const Qn=sn[Ln],pi=[Qn,sn[Ln+1],Mn[Ln+1],Mn[Ln],Qn];uc(qt,pi)&&(Jt=Math.min(Jt,v7(qt,pi)))}}return Jt!==1/0&&Jt}(bt[0],bt[1],st)}}function _6(p,l){return p.x*l.x+p.y*l.y}function v7(p,l){if(1===p.length){let b=0;const L=l[b++];let Y;for(;!Y||L.equals(Y);)if(Y=l[b++],!Y)return 1/0;for(;b<l.length;b++){const te=l[b],re=p[0],ve=Y.sub(L),ze=te.sub(L),ke=re.sub(L),Ze=_6(ve,ve),et=_6(ve,ze),st=_6(ze,ze),bt=_6(ke,ve),Ct=_6(ke,ze),Rt=Ze*st-et*et,qt=(st*bt-et*Ct)/Rt,Jt=(Ze*Ct-et*bt)/Rt,yn=L.z*(1-qt-Jt)+Y.z*qt+te.z*Jt;if(isFinite(yn))return yn}return 1/0}{let b=1/0;for(const L of l)b=Math.min(b,L.z);return b}}const Nb=ct([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Rb}=Nb,Fb=ct([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Vb}=Fb,hu=t2.VectorTileFeature.types,y7=Math.cos(Math.PI/180*37.5),tf=Math.pow(2,14)/.5;class C1{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(b=>b.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(b=>{this.gradients[b.id]={}}),this.layoutVertexArray=new Hn,this.layoutVertexArray2=new Bn,this.indexArray=new lr,this.programConfigurations=new Jc(l.layers,l.zoom),this.segments=new fr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id)}populate(l,b,L){this.hasPattern=v6("line",this.layers,b);const Y=this.layers[0].layout.get("line-sort-key"),te=!Y.isConstant(),re=[];for(const{feature:ve,id:ze,index:ke,sourceLayerIndex:Ze}of l){const et=this.layers[0]._featureFilter.needGeometry,st=no(ve,et);if(!this.layers[0]._featureFilter.filter(new Wr(this.zoom),st,L))continue;const bt=te?Y.evaluate(st,{},L):void 0,Ct={id:ze,properties:ve.properties,type:ve.type,sourceLayerIndex:Ze,index:ke,geometry:et?st.geometry:Jn(ve),patterns:{},sortKey:bt};re.push(Ct)}te&&re.sort((ve,ze)=>ve.sortKey-ze.sortKey);for(const ve of re){const{geometry:ze,index:ke,sourceLayerIndex:Ze}=ve;if(this.hasPattern){const et=du("line",this.layers,ve,this.zoom,b);this.patternFeatures.push(et)}else this.addFeature(ve,ze,ke,L,{});b.featureIndex.insert(l[ke].feature,ze,ke,Ze,this.index)}}update(l,b,L){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,b,this.stateDependentLayers,L)}addFeatures(l,b,L){for(const Y of this.patternFeatures)this.addFeature(Y,Y.geometry,Y.index,b,L)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Vb)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Rb),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,b,L,Y,te){const re=this.layers[0].layout,ve=re.get("line-join").evaluate(l,{}),ze=re.get("line-cap"),ke=re.get("line-miter-limit"),Ze=re.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const et of b)this.addLine(et,l,ve,ze,ke,Ze);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,L,te,Y)}addLine(l,b,L,Y,te,re){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Jt=0;Jt<l.length-1;Jt++)this.totalDistance+=l[Jt].dist(l[Jt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const ve="Polygon"===hu[b.type];let ze=l.length;for(;ze>=2&&l[ze-1].equals(l[ze-2]);)ze--;let ke=0;for(;ke<ze-1&&l[ke].equals(l[ke+1]);)ke++;if(ze<(ve?3:2))return;"bevel"===L&&(te=1.05);const Ze=this.overscaling<=16?15*Ps/(512*this.overscaling):0,et=this.segments.prepareSegment(10*ze,this.layoutVertexArray,this.indexArray);let st,bt,Ct,Rt,qt;this.e1=this.e2=-1,ve&&(st=l[ze-2],qt=l[ke].sub(st)._unit()._perp());for(let Jt=ke;Jt<ze;Jt++){if(Ct=Jt===ze-1?ve?l[ke+1]:void 0:l[Jt+1],Ct&&l[Jt].equals(Ct))continue;qt&&(Rt=qt),st&&(bt=st),st=l[Jt],qt=Ct?Ct.sub(st)._unit()._perp():Rt,Rt=Rt||qt;let yn=Rt.add(qt);0===yn.x&&0===yn.y||yn._unit();const sn=Rt.x*qt.x+Rt.y*qt.y,Mn=yn.x*qt.x+yn.y*qt.y,Ln=0!==Mn?1/Mn:1/0,Qn=2*Math.sqrt(2-2*Mn),pi=Mn<y7&&bt&&Ct,Oi=Rt.x*qt.y-Rt.y*qt.x>0;if(pi&&Jt>ke){const mi=st.dist(bt);if(mi>2*Ze){const Bi=st.sub(st.sub(bt)._mult(Ze/mi)._round());this.updateDistance(bt,Bi),this.addCurrentVertex(Bi,Rt,0,0,et),bt=Bi}}const Ai=bt&&Ct;let xi=Ai?L:ve?"butt":Y;if(Ai&&"round"===xi&&(Ln<re?xi="miter":Ln<=2&&(xi="fakeround")),"miter"===xi&&Ln>te&&(xi="bevel"),"bevel"===xi&&(Ln>2&&(xi="flipbevel"),Ln<te&&(xi="miter")),bt&&this.updateDistance(bt,st),"miter"===xi)yn._mult(Ln),this.addCurrentVertex(st,yn,0,0,et);else if("flipbevel"===xi){if(Ln>100)yn=qt.mult(-1);else{const mi=Ln*Rt.add(qt).mag()/Rt.sub(qt).mag();yn._perp()._mult(mi*(Oi?-1:1))}this.addCurrentVertex(st,yn,0,0,et),this.addCurrentVertex(st,yn.mult(-1),0,0,et)}else if("bevel"===xi||"fakeround"===xi){const mi=-Math.sqrt(Ln*Ln-1),Bi=Oi?mi:0,yi=Oi?0:mi;if(bt&&this.addCurrentVertex(st,Rt,Bi,yi,et),"fakeround"===xi){const ai=Math.round(180*Qn/Math.PI/20);for(let pr=1;pr<ai;pr++){let tr=pr/ai;if(.5!==tr){const us=tr-.5;tr+=tr*us*(tr-1)*((1.0904+sn*(sn*(3.55645-1.43519*sn)-3.2452))*us*us+(.848013+sn*(.215638*sn-1.06021)))}const Jr=qt.sub(Rt)._mult(tr)._add(Rt)._unit()._mult(Oi?-1:1);this.addHalfVertex(st,Jr.x,Jr.y,!1,Oi,0,et)}}Ct&&this.addCurrentVertex(st,qt,-Bi,-yi,et)}else if("butt"===xi)this.addCurrentVertex(st,yn,0,0,et);else if("square"===xi){const mi=bt?1:-1;this.addCurrentVertex(st,yn,mi,mi,et)}else"round"===xi&&(bt&&(this.addCurrentVertex(st,Rt,0,0,et),this.addCurrentVertex(st,Rt,1,1,et,!0)),Ct&&(this.addCurrentVertex(st,qt,-1,-1,et,!0),this.addCurrentVertex(st,qt,0,0,et)));if(pi&&Jt<ze-1){const mi=st.dist(Ct);if(mi>2*Ze){const Bi=st.add(Ct.sub(st)._mult(Ze/mi)._round());this.updateDistance(st,Bi),this.addCurrentVertex(Bi,qt,0,0,et),st=Bi}}}}addCurrentVertex(l,b,L,Y,te,re=!1){const ve=b.y*Y-b.x,ze=-b.y-b.x*Y;this.addHalfVertex(l,b.x+b.y*L,b.y-b.x*L,re,!1,L,te),this.addHalfVertex(l,ve,ze,re,!0,-Y,te),this.distance>tf/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,b,L,Y,te,re))}addHalfVertex({x:l,y:b},L,Y,te,re,ve,ze){const ke=.5*(this.lineClips?this.scaledDistance*(tf-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(te?1:0),(b<<1)+(re?1:0),Math.round(63*L)+128,Math.round(63*Y)+128,1+(0===ve?0:ve<0?-1:1)|(63&ke)<<2,ke>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Ze=ze.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ze),ze.primitiveLength++),re?this.e2=Ze:this.e1=Ze}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,b){this.distance+=l.dist(b),this.updateScaledDistance()}}let nf,fu;ui("LineBucket",C1,{omit:["layers","patternFeatures"]});var rf={get paint(){return fu=fu||new Hs({"line-opacity":new _r(Pe.paint_line["line-opacity"]),"line-color":new _r(Pe.paint_line["line-color"]),"line-translate":new Hi(Pe.paint_line["line-translate"]),"line-translate-anchor":new Hi(Pe.paint_line["line-translate-anchor"]),"line-width":new _r(Pe.paint_line["line-width"]),"line-gap-width":new _r(Pe.paint_line["line-gap-width"]),"line-offset":new _r(Pe.paint_line["line-offset"]),"line-blur":new _r(Pe.paint_line["line-blur"]),"line-dasharray":new D1(Pe.paint_line["line-dasharray"]),"line-pattern":new h2(Pe.paint_line["line-pattern"]),"line-gradient":new Uc(Pe.paint_line["line-gradient"])})},get layout(){return nf=nf||new Hs({"line-cap":new Hi(Pe.layout_line["line-cap"]),"line-join":new _r(Pe.layout_line["line-join"]),"line-miter-limit":new Hi(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Hi(Pe.layout_line["line-round-limit"]),"line-sort-key":new _r(Pe.layout_line["line-sort-key"])})}};class R2 extends _r{possiblyEvaluate(l,b){return b=new Wr(Math.floor(b.zoom),{now:b.now,fadeDuration:b.fadeDuration,zoomHistory:b.zoomHistory,transition:b.transition}),super.possiblyEvaluate(l,b)}evaluate(l,b,L,Y){return b=B({},b,{zoom:Math.floor(b.zoom)}),super.evaluate(l,b,L,Y)}}let zl;class af extends ms{constructor(l){super(l,rf),this.gradientVersion=0,zl||(zl=new R2(rf.paint.properties["line-width"].specification),zl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){"line-gradient"===l&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Vr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,b){super.recalculate(l,b),this.paint._values["line-floorwidth"]=zl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new C1(l)}queryRadius(l){const b=l,L=f4(ru("line-width",this,b),ru("line-gap-width",this,b)),Y=ru("line-offset",this,b);return L/2+Math.abs(Y)+El(this.paint.get("line-translate"))}queryIntersectsFeature(l,b,L,Y,te,re,ve){const ze=N2(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),re.angle,ve),ke=ve/2*f4(this.paint.get("line-width").evaluate(b,L),this.paint.get("line-gap-width").evaluate(b,L)),Ze=this.paint.get("line-offset").evaluate(b,L);return Ze&&(Y=function(et,st){const bt=[];for(let Ct=0;Ct<et.length;Ct++){const Rt=et[Ct],qt=[];for(let Jt=0;Jt<Rt.length;Jt++){const yn=Rt[Jt-1],sn=Rt[Jt],Mn=Rt[Jt+1],Ln=0===Jt?new m(0,0):sn.sub(yn)._unit()._perp(),Qn=Jt===Rt.length-1?new m(0,0):Mn.sub(sn)._unit()._perp(),pi=Ln._add(Qn)._unit(),Oi=pi.x*Qn.x+pi.y*Qn.y;0!==Oi&&pi._mult(1/Oi),qt.push(pi._mult(st)._add(sn))}bt.push(qt)}return bt}(Y,Ze*ve)),function(et,st,bt){for(let Ct=0;Ct<st.length;Ct++){const Rt=st[Ct];if(et.length>=3)for(let qt=0;qt<Rt.length;qt++)if(O1(et,Rt[qt]))return!0;if(sl(et,Rt,bt))return!0}return!1}(ze,Y,ke)}isTileClipped(){return!0}}function f4(p,l){return l>0?l+2*p:p}const p4=ct([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_7=ct([{name:"a_projected_pos",components:3,type:"Float32"}],4);ct([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hb=ct([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ct([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const sf=ct([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Bb=ct([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function m2(p,l,b){return p.sections.forEach(L=>{L.text=function(Y,te,re){const ve=te.layout.get("text-transform").evaluate(re,{});return"uppercase"===ve?Y=Y.toLocaleUpperCase():"lowercase"===ve&&(Y=Y.toLocaleLowerCase()),Ao.applyArabicShaping&&(Y=Ao.applyArabicShaping(Y)),Y}(L.text,l,b)}),p}ct([{name:"triangle",components:3,type:"Uint16"}]),ct([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ct([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ct([{type:"Float32",name:"offsetX"}]),ct([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ct([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const _0={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Ms=24,b7=Ra,p8=function(p,l,b,L,Y){var te,re,ve=8*Y-L-1,ze=(1<<ve)-1,ke=ze>>1,Ze=-7,et=b?Y-1:0,st=b?-1:1,bt=p[l+et];for(et+=st,te=bt&(1<<-Ze)-1,bt>>=-Ze,Ze+=ve;Ze>0;te=256*te+p[l+et],et+=st,Ze-=8);for(re=te&(1<<-Ze)-1,te>>=-Ze,Ze+=L;Ze>0;re=256*re+p[l+et],et+=st,Ze-=8);if(0===te)te=1-ke;else{if(te===ze)return re?NaN:1/0*(bt?-1:1);re+=Math.pow(2,L),te-=ke}return(bt?-1:1)*re*Math.pow(2,te-L)},cf=function(p,l,b,L,Y,te){var re,ve,ze,ke=8*te-Y-1,Ze=(1<<ke)-1,et=Ze>>1,st=23===Y?Math.pow(2,-24)-Math.pow(2,-77):0,bt=L?0:te-1,Ct=L?1:-1,Rt=l<0||0===l&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(ve=isNaN(l)?1:0,re=Ze):(re=Math.floor(Math.log(l)/Math.LN2),l*(ze=Math.pow(2,-re))<1&&(re--,ze*=2),(l+=re+et>=1?st/ze:st*Math.pow(2,1-et))*ze>=2&&(re++,ze/=2),re+et>=Ze?(ve=0,re=Ze):re+et>=1?(ve=(l*ze-1)*Math.pow(2,Y),re+=et):(ve=l*Math.pow(2,et-1)*Math.pow(2,Y),re=0));Y>=8;p[b+bt]=255&ve,bt+=Ct,ve/=256,Y-=8);for(re=re<<Y|ve,ke+=Y;ke>0;p[b+bt]=255&re,bt+=Ct,re/=256,ke-=8);p[b+bt-Ct]|=128*Rt};function Ra(p){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(p)?p:new Uint8Array(p||0),this.pos=0,this.type=0,this.length=this.buf.length}Ra.Varint=0,Ra.Fixed64=1,Ra.Bytes=2,Ra.Fixed32=5;var m8=4294967296,lf=1/m8,uf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Pl(p){return p.type===Ra.Bytes?p.readVarint()+p.pos:p.pos+1}function m4(p,l,b){var L=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));b.realloc(L);for(var Y=b.pos-1;Y>=p;Y--)b.buf[Y+L]=b.buf[Y]}function x7(p,l){for(var b=0;b<p.length;b++)l.writeVarint(p[b])}function Il(p,l){for(var b=0;b<p.length;b++)l.writeSVarint(p[b])}function w7(p,l){for(var b=0;b<p.length;b++)l.writeFloat(p[b])}function b0(p,l){for(var b=0;b<p.length;b++)l.writeDouble(p[b])}function C7(p,l){for(var b=0;b<p.length;b++)l.writeBoolean(p[b])}function df(p,l){for(var b=0;b<p.length;b++)l.writeFixed32(p[b])}function g8(p,l){for(var b=0;b<p.length;b++)l.writeSFixed32(p[b])}function b6(p,l){for(var b=0;b<p.length;b++)l.writeFixed64(p[b])}function hf(p,l){for(var b=0;b<p.length;b++)l.writeSFixed64(p[b])}function x6(p,l){return(p[l]|p[l+1]<<8|p[l+2]<<16)+16777216*p[l+3]}function pu(p,l,b){p[b]=l,p[b+1]=l>>>8,p[b+2]=l>>>16,p[b+3]=l>>>24}function x0(p,l){return(p[l]|p[l+1]<<8|p[l+2]<<16)+(p[l+3]<<24)}Ra.prototype={destroy:function(){this.buf=null},readFields:function(p,l,b){for(b=b||this.length;this.pos<b;){var L=this.readVarint(),Y=L>>3,te=this.pos;this.type=7&L,p(Y,l,this),this.pos===te&&this.skip(L)}return l},readMessage:function(p,l){return this.readFields(p,l,this.readVarint()+this.pos)},readFixed32:function(){var p=x6(this.buf,this.pos);return this.pos+=4,p},readSFixed32:function(){var p=x0(this.buf,this.pos);return this.pos+=4,p},readFixed64:function(){var p=x6(this.buf,this.pos)+x6(this.buf,this.pos+4)*m8;return this.pos+=8,p},readSFixed64:function(){var p=x6(this.buf,this.pos)+x0(this.buf,this.pos+4)*m8;return this.pos+=8,p},readFloat:function(){var p=p8(this.buf,this.pos,!0,23,4);return this.pos+=4,p},readDouble:function(){var p=p8(this.buf,this.pos,!0,52,8);return this.pos+=8,p},readVarint:function(p){var l,b,L=this.buf;return l=127&(b=L[this.pos++]),b<128?l:(l|=(127&(b=L[this.pos++]))<<7,b<128?l:(l|=(127&(b=L[this.pos++]))<<14,b<128?l:(l|=(127&(b=L[this.pos++]))<<21,b<128?l:function(Y,te,re){var ve,ze,ke=re.buf;if(ve=(112&(ze=ke[re.pos++]))>>4,ze<128||(ve|=(127&(ze=ke[re.pos++]))<<3,ze<128)||(ve|=(127&(ze=ke[re.pos++]))<<10,ze<128)||(ve|=(127&(ze=ke[re.pos++]))<<17,ze<128)||(ve|=(127&(ze=ke[re.pos++]))<<24,ze<128)||(ve|=(1&(ze=ke[re.pos++]))<<31,ze<128))return function Kl(p,l,b){return b?4294967296*l+(p>>>0):4294967296*(l>>>0)+(p>>>0)}(Y,ve,te);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(b=L[this.pos]))<<28,p,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var p=this.readVarint();return p%2==1?(p+1)/-2:p/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var p=this.readVarint()+this.pos,l=this.pos;return this.pos=p,p-l>=12&&uf?uf.decode(this.buf.subarray(l,p)):function(b,L,Y){for(var te="",re=L;re<Y;){var ve,ze,ke,Ze=b[re],et=null,st=Ze>239?4:Ze>223?3:Ze>191?2:1;if(re+st>Y)break;1===st?Ze<128&&(et=Ze):2===st?128==(192&(ve=b[re+1]))&&(et=(31&Ze)<<6|63&ve)<=127&&(et=null):3===st?(ze=b[re+2],128==(192&(ve=b[re+1]))&&128==(192&ze)&&((et=(15&Ze)<<12|(63&ve)<<6|63&ze)<=2047||et>=55296&&et<=57343)&&(et=null)):4===st&&(ze=b[re+2],ke=b[re+3],128==(192&(ve=b[re+1]))&&128==(192&ze)&&128==(192&ke)&&((et=(15&Ze)<<18|(63&ve)<<12|(63&ze)<<6|63&ke)<=65535||et>=1114112)&&(et=null)),null===et?(et=65533,st=1):et>65535&&(et-=65536,te+=String.fromCharCode(et>>>10&1023|55296),et=56320|1023&et),te+=String.fromCharCode(et),re+=st}return te}(this.buf,l,p)},readBytes:function(){var p=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,p);return this.pos=p,l},readPackedVarint:function(p,l){if(this.type!==Ra.Bytes)return p.push(this.readVarint(l));var b=Pl(this);for(p=p||[];this.pos<b;)p.push(this.readVarint(l));return p},readPackedSVarint:function(p){if(this.type!==Ra.Bytes)return p.push(this.readSVarint());var l=Pl(this);for(p=p||[];this.pos<l;)p.push(this.readSVarint());return p},readPackedBoolean:function(p){if(this.type!==Ra.Bytes)return p.push(this.readBoolean());var l=Pl(this);for(p=p||[];this.pos<l;)p.push(this.readBoolean());return p},readPackedFloat:function(p){if(this.type!==Ra.Bytes)return p.push(this.readFloat());var l=Pl(this);for(p=p||[];this.pos<l;)p.push(this.readFloat());return p},readPackedDouble:function(p){if(this.type!==Ra.Bytes)return p.push(this.readDouble());var l=Pl(this);for(p=p||[];this.pos<l;)p.push(this.readDouble());return p},readPackedFixed32:function(p){if(this.type!==Ra.Bytes)return p.push(this.readFixed32());var l=Pl(this);for(p=p||[];this.pos<l;)p.push(this.readFixed32());return p},readPackedSFixed32:function(p){if(this.type!==Ra.Bytes)return p.push(this.readSFixed32());var l=Pl(this);for(p=p||[];this.pos<l;)p.push(this.readSFixed32());return p},readPackedFixed64:function(p){if(this.type!==Ra.Bytes)return p.push(this.readFixed64());var l=Pl(this);for(p=p||[];this.pos<l;)p.push(this.readFixed64());return p},readPackedSFixed64:function(p){if(this.type!==Ra.Bytes)return p.push(this.readSFixed64());var l=Pl(this);for(p=p||[];this.pos<l;)p.push(this.readSFixed64());return p},skip:function(p){var l=7&p;if(l===Ra.Varint)for(;this.buf[this.pos++]>127;);else if(l===Ra.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Ra.Fixed32)this.pos+=4;else{if(l!==Ra.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(p,l){this.writeVarint(p<<3|l)},realloc:function(p){for(var l=this.length||16;l<this.pos+p;)l*=2;if(l!==this.length){var b=new Uint8Array(l);b.set(this.buf),this.buf=b,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(p){this.realloc(4),pu(this.buf,p,this.pos),this.pos+=4},writeSFixed32:function(p){this.realloc(4),pu(this.buf,p,this.pos),this.pos+=4},writeFixed64:function(p){this.realloc(8),pu(this.buf,-1&p,this.pos),pu(this.buf,Math.floor(p*lf),this.pos+4),this.pos+=8},writeSFixed64:function(p){this.realloc(8),pu(this.buf,-1&p,this.pos),pu(this.buf,Math.floor(p*lf),this.pos+4),this.pos+=8},writeVarint:function(p){(p=+p||0)>268435455||p<0?function(l,b){var L,Y,te,ve;if(l>=0?(L=l%4294967296|0,Y=l/4294967296|0):(Y=~(-l/4294967296),4294967295^(L=~(-l%4294967296))?L=L+1|0:(L=0,Y=Y+1|0)),l>=0x10000000000000000||l<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");b.realloc(10),te=L,(ve=b).buf[ve.pos++]=127&te|128,te>>>=7,ve.buf[ve.pos++]=127&te|128,te>>>=7,ve.buf[ve.pos++]=127&te|128,te>>>=7,ve.buf[ve.pos++]=127&te|128,ve.buf[ve.pos]=127&(te>>>=7),function(te,re){var ve=(7&te)<<4;re.buf[re.pos++]|=ve|((te>>>=3)?128:0),te&&(re.buf[re.pos++]=127&te|((te>>>=7)?128:0),te&&(re.buf[re.pos++]=127&te|((te>>>=7)?128:0),te&&(re.buf[re.pos++]=127&te|((te>>>=7)?128:0),te&&(re.buf[re.pos++]=127&te|((te>>>=7)?128:0),te&&(re.buf[re.pos++]=127&te)))))}(Y,b)}(p,this):(this.realloc(4),this.buf[this.pos++]=127&p|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=p>>>7&127))))},writeSVarint:function(p){this.writeVarint(p<0?2*-p-1:2*p)},writeBoolean:function(p){this.writeVarint(!!p)},writeString:function(p){p=String(p),this.realloc(4*p.length),this.pos++;var l=this.pos;this.pos=function(L,Y,te){for(var re,ve,ze=0;ze<Y.length;ze++){if((re=Y.charCodeAt(ze))>55295&&re<57344){if(!ve){re>56319||ze+1===Y.length?(L[te++]=239,L[te++]=191,L[te++]=189):ve=re;continue}if(re<56320){L[te++]=239,L[te++]=191,L[te++]=189,ve=re;continue}re=ve-55296<<10|re-56320|65536,ve=null}else ve&&(L[te++]=239,L[te++]=191,L[te++]=189,ve=null);re<128?L[te++]=re:(re<2048?L[te++]=re>>6|192:(re<65536?L[te++]=re>>12|224:(L[te++]=re>>18|240,L[te++]=re>>12&63|128),L[te++]=re>>6&63|128),L[te++]=63&re|128)}return te}(this.buf,p,this.pos);var b=this.pos-l;b>=128&&m4(l,b,this),this.pos=l-1,this.writeVarint(b),this.pos+=b},writeFloat:function(p){this.realloc(4),cf(this.buf,p,this.pos,!0,23,4),this.pos+=4},writeDouble:function(p){this.realloc(8),cf(this.buf,p,this.pos,!0,52,8),this.pos+=8},writeBytes:function(p){var l=p.length;this.writeVarint(l),this.realloc(l);for(var b=0;b<l;b++)this.buf[this.pos++]=p[b]},writeRawMessage:function(p,l){this.pos++;var b=this.pos;p(l,this);var L=this.pos-b;L>=128&&m4(b,L,this),this.pos=b-1,this.writeVarint(L),this.pos+=L},writeMessage:function(p,l,b){this.writeTag(p,Ra.Bytes),this.writeRawMessage(l,b)},writePackedVarint:function(p,l){l.length&&this.writeMessage(p,x7,l)},writePackedSVarint:function(p,l){l.length&&this.writeMessage(p,Il,l)},writePackedBoolean:function(p,l){l.length&&this.writeMessage(p,C7,l)},writePackedFloat:function(p,l){l.length&&this.writeMessage(p,w7,l)},writePackedDouble:function(p,l){l.length&&this.writeMessage(p,b0,l)},writePackedFixed32:function(p,l){l.length&&this.writeMessage(p,df,l)},writePackedSFixed32:function(p,l){l.length&&this.writeMessage(p,g8,l)},writePackedFixed64:function(p,l){l.length&&this.writeMessage(p,b6,l)},writePackedSFixed64:function(p,l){l.length&&this.writeMessage(p,hf,l)},writeBytesField:function(p,l){this.writeTag(p,Ra.Bytes),this.writeBytes(l)},writeFixed32Field:function(p,l){this.writeTag(p,Ra.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(p,l){this.writeTag(p,Ra.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(p,l){this.writeTag(p,Ra.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(p,l){this.writeTag(p,Ra.Fixed64),this.writeSFixed64(l)},writeVarintField:function(p,l){this.writeTag(p,Ra.Varint),this.writeVarint(l)},writeSVarintField:function(p,l){this.writeTag(p,Ra.Varint),this.writeSVarint(l)},writeStringField:function(p,l){this.writeTag(p,Ra.Bytes),this.writeString(l)},writeFloatField:function(p,l){this.writeTag(p,Ra.Fixed32),this.writeFloat(l)},writeDoubleField:function(p,l){this.writeTag(p,Ra.Fixed64),this.writeDouble(l)},writeBooleanField:function(p,l){this.writeVarintField(p,!!l)}};var w0=h(b7);const v8=3;function jb(p,l,b){1===p&&b.readMessage(ff,l)}function ff(p,l,b){if(3===p){const{id:L,bitmap:Y,width:te,height:re,left:ve,top:ze,advance:ke}=b.readMessage(M7,{});l.push({id:L,bitmap:new q1({width:te+2*v8,height:re+2*v8},Y),metrics:{width:te,height:re,left:ve,top:ze,advance:ke}})}}function M7(p,l,b){1===p?l.id=b.readVarint():2===p?l.bitmap=b.readBytes():3===p?l.width=b.readVarint():4===p?l.height=b.readVarint():5===p?l.left=b.readSVarint():6===p?l.top=b.readSVarint():7===p&&(l.advance=b.readVarint())}const S7=v8;function pf(p){let l=0,b=0;for(const re of p)l+=re.w*re.h,b=Math.max(b,re.w);p.sort((re,ve)=>ve.h-re.h);const L=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),b),h:1/0}];let Y=0,te=0;for(const re of p)for(let ve=L.length-1;ve>=0;ve--){const ze=L[ve];if(!(re.w>ze.w||re.h>ze.h)){if(re.x=ze.x,re.y=ze.y,te=Math.max(te,re.y+re.h),Y=Math.max(Y,re.x+re.w),re.w===ze.w&&re.h===ze.h){const ke=L.pop();ve<L.length&&(L[ve]=ke)}else re.h===ze.h?(ze.x+=re.w,ze.w-=re.w):re.w===ze.w?(ze.y+=re.h,ze.h-=re.h):(L.push({x:ze.x+re.w,y:ze.y,w:ze.w-re.w,h:re.h}),ze.y+=re.h,ze.h-=re.h);break}}return{w:Y,h:te,fill:l/(Y*te)||0}}const Wc=1;class y8{constructor(l,{pixelRatio:b,version:L,stretchX:Y,stretchY:te,content:re}){this.paddedRect=l,this.pixelRatio=b,this.stretchX=Y,this.stretchY=te,this.content=re,this.version=L}get tl(){return[this.paddedRect.x+Wc,this.paddedRect.y+Wc]}get br(){return[this.paddedRect.x+this.paddedRect.w-Wc,this.paddedRect.y+this.paddedRect.h-Wc]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Wc)/this.pixelRatio,(this.paddedRect.h-2*Wc)/this.pixelRatio]}}class g4{constructor(l,b){const L={},Y={};this.haveRenderCallbacks=[];const te=[];this.addImages(l,L,te),this.addImages(b,Y,te);const{w:re,h:ve}=pf(te),ze=new K1({width:re||1,height:ve||1});for(const ke in l){const Ze=l[ke],et=L[ke].paddedRect;K1.copy(Ze.data,ze,{x:0,y:0},{x:et.x+Wc,y:et.y+Wc},Ze.data)}for(const ke in b){const Ze=b[ke],et=Y[ke].paddedRect,st=et.x+Wc,bt=et.y+Wc,Ct=Ze.data.width,Rt=Ze.data.height;K1.copy(Ze.data,ze,{x:0,y:0},{x:st,y:bt},Ze.data),K1.copy(Ze.data,ze,{x:0,y:Rt-1},{x:st,y:bt-1},{width:Ct,height:1}),K1.copy(Ze.data,ze,{x:0,y:0},{x:st,y:bt+Rt},{width:Ct,height:1}),K1.copy(Ze.data,ze,{x:Ct-1,y:0},{x:st-1,y:bt},{width:1,height:Rt}),K1.copy(Ze.data,ze,{x:0,y:0},{x:st+Ct,y:bt},{width:1,height:Rt})}this.image=ze,this.iconPositions=L,this.patternPositions=Y}addImages(l,b,L){for(const Y in l){const te=l[Y],re={x:0,y:0,w:te.data.width+2*Wc,h:te.data.height+2*Wc};L.push(re),b[Y]=new y8(re,te),te.hasRenderCallback&&this.haveRenderCallbacks.push(Y)}}patchUpdatedImages(l,b){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const L in l.updatedImages)this.patchUpdatedImage(this.iconPositions[L],l.getImage(L),b),this.patchUpdatedImage(this.patternPositions[L],l.getImage(L),b)}patchUpdatedImage(l,b,L){if(!l||!b||l.version===b.version)return;l.version=b.version;const[Y,te]=l.tl;L.update(b.data,void 0,{x:Y,y:te})}}var Tl;ui("ImagePosition",y8),ui("ImageAtlas",g4),u.WritingMode=void 0,(Tl=u.WritingMode||(u.WritingMode={}))[Tl.none=0]="none",Tl[Tl.horizontal=1]="horizontal",Tl[Tl.vertical=2]="vertical",Tl[Tl.horizontalOnly=3]="horizontalOnly";const v4=-17;class mu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,b){const L=new mu;return L.scale=l||1,L.fontStack=b,L}static forImage(l){const b=new mu;return b.imageName=l,b}}class y4{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,b){const L=new y4;for(let Y=0;Y<l.sections.length;Y++){const te=l.sections[Y];te.image?L.addImageSection(te):L.addTextSection(te,b)}return L}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let b="";for(let L=0;L<l.length;L++){const Y=l.charCodeAt(L+1)||null,te=l.charCodeAt(L-1)||null;b+=Y&&as(Y)&&!_0[l[L+1]]||te&&as(te)&&!_0[l[L-1]]||!_0[l[L]]?l[L]:_0[l[L]]}return b}(this.text)}trim(){let l=0;for(let L=0;L<this.text.length&&_8[this.text.charCodeAt(L)];L++)l++;let b=this.text.length;for(let L=this.text.length-1;L>=0&&L>=l&&_8[this.text.charCodeAt(L)];L--)b--;this.text=this.text.substring(l,b),this.sectionIndex=this.sectionIndex.slice(l,b)}substring(l,b){const L=new y4;return L.text=this.text.substring(l,b),L.sectionIndex=this.sectionIndex.slice(l,b),L.sections=this.sections,L}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,b)=>Math.max(l,this.sections[b].scale),0)}addTextSection(l,b){this.text+=l.text,this.sections.push(mu.forText(l.scale,l.fontStack||b));const L=this.sections.length-1;for(let Y=0;Y<l.text.length;++Y)this.sectionIndex.push(L)}addImageSection(l){const b=l.image?l.image.name:"";if(0===b.length)return void $("Can't add FormattedSection with an empty image.");const L=this.getNextImageSectionCharCode();L?(this.text+=String.fromCharCode(L),this.sections.push(mu.forImage(b)),this.sectionIndex.push(this.sections.length-1)):$("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _4(p,l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct,Rt){const qt=y4.fromFeature(p,Y);let Jt;et===u.WritingMode.vertical&&qt.verticalizePunctuation();const{processBidirectionalText:yn,processStyledBidirectionalText:sn}=Ao;if(yn&&1===qt.sections.length){Jt=[];const Qn=yn(qt.toString(),gf(qt,ke,te,l,L,bt,Ct));for(const pi of Qn){const Oi=new y4;Oi.text=pi,Oi.sections=qt.sections;for(let Ai=0;Ai<pi.length;Ai++)Oi.sectionIndex.push(0);Jt.push(Oi)}}else if(sn){Jt=[];const Qn=sn(qt.text,qt.sectionIndex,gf(qt,ke,te,l,L,bt,Ct));for(const pi of Qn){const Oi=new y4;Oi.text=pi[0],Oi.sectionIndex=pi[1],Oi.sections=qt.sections,Jt.push(Oi)}}else Jt=function(Qn,pi){const Oi=[],Ai=Qn.text;let xi=0;for(const mi of pi)Oi.push(Qn.substring(xi,mi)),xi=mi;return xi<Ai.length&&Oi.push(Qn.substring(xi,Ai.length)),Oi}(qt,gf(qt,ke,te,l,L,bt,Ct));const Mn=[],Ln={positionedLines:Mn,text:qt.toString(),top:Ze[1],bottom:Ze[1],left:Ze[0],right:Ze[0],writingMode:et,iconsInText:!1,verticalizable:!1};return function(Qn,pi,Oi,Ai,xi,mi,Bi,yi,ai,pr,tr,Jr){let us=0,gs=v4,Us=0,m1=0;const k1="right"===yi?1:"left"===yi?0:.5;let n1=0;for(const S1 of xi){S1.trim();const r1=S1.getMaxScale(),ec=(r1-1)*Ms,Xc={positionedGlyphs:[],lineOffset:0};Qn.positionedLines[n1]=Xc;const o2=Xc.positionedGlyphs;let Tc=0;if(!S1.length()){gs+=mi,++n1;continue}for(let dc=0;dc<S1.length();dc++){const mo=S1.getSection(dc),a2=S1.getSectionIndex(dc),tc=S1.getCharCode(dc);let nc=0,_2=null,b2=null,$2=null,Is=Ms;const x2=!(ai===u.WritingMode.horizontal||!tr&&!da(tc)||tr&&(_8[tc]||(M1=tc,gi.Arabic(M1)||gi["Arabic Supplement"](M1)||gi["Arabic Extended-A"](M1)||gi["Arabic Presentation Forms-A"](M1)||gi["Arabic Presentation Forms-B"](M1))));if(mo.imageName){const w2=Ai[mo.imageName];if(!w2)continue;$2=mo.imageName,Qn.iconsInText=Qn.iconsInText||!0,b2=w2.paddedRect;const E1=w2.displaySize;mo.scale=mo.scale*Ms/Jr,_2={width:E1[0],height:E1[1],left:Wc,top:-S7,advance:x2?E1[1]:E1[0]},nc=ec+(Ms-E1[1]*mo.scale),Is=_2.advance;const hl=x2?E1[0]*mo.scale-Ms*r1:E1[1]*mo.scale-Ms*r1;hl>0&&hl>Tc&&(Tc=hl)}else{const w2=Oi[mo.fontStack],E1=w2&&w2[tc];if(E1&&E1.rect)b2=E1.rect,_2=E1.metrics;else{const hl=pi[mo.fontStack],P4=hl&&hl[tc];if(!P4)continue;_2=P4.metrics}nc=(r1-mo.scale)*Ms}x2?(Qn.verticalizable=!0,o2.push({glyph:tc,imageName:$2,x:us,y:gs+nc,vertical:x2,scale:mo.scale,fontStack:mo.fontStack,sectionIndex:a2,metrics:_2,rect:b2}),us+=Is*mo.scale+pr):(o2.push({glyph:tc,imageName:$2,x:us,y:gs+nc,vertical:x2,scale:mo.scale,fontStack:mo.fontStack,sectionIndex:a2,metrics:_2,rect:b2}),us+=_2.advance*mo.scale+pr)}0!==o2.length&&(Us=Math.max(us-pr,Us),Gb(o2,0,o2.length-1,k1,Tc)),us=0;const Gs=mi*r1+Tc;Xc.lineOffset=Math.max(Tc,ec),gs+=Gs,m1=Math.max(Gs,m1),++n1}var M1;const J1=gs-v4,{horizontalAlign:r2,verticalAlign:Yc}=vf(Bi);(function(S1,r1,ec,Xc,o2,Tc,Gs,dc,mo){const a2=(r1-ec)*o2;let tc=0;tc=Tc!==Gs?-dc*Xc-v4:(-Xc*mo+.5)*Gs;for(const nc of S1)for(const _2 of nc.positionedGlyphs)_2.x+=a2,_2.y+=tc})(Qn.positionedLines,k1,r2,Yc,Us,m1,mi,J1,xi.length),Qn.top+=-Yc*J1,Qn.bottom=Qn.top+J1,Qn.left+=-r2*Us,Qn.right=Qn.left+Us}(Ln,l,b,L,Jt,re,ve,ze,et,ke,st,Rt),!function(Qn){for(const pi of Qn)if(0!==pi.positionedGlyphs.length)return!1;return!0}(Mn)&&Ln}const _8={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},E7={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function mf(p,l,b,L,Y,te){if(l.imageName){const re=L[l.imageName];return re?re.displaySize[0]*l.scale*Ms/te+Y:0}{const re=b[l.fontStack],ve=re&&re[p];return ve?ve.metrics.advance*l.scale+Y:0}}function w6(p,l,b,L){const Y=Math.pow(p-l,2);return L?p<l?Y/2:2*Y:Y+Math.abs(b)*b}function Ub(p,l,b){let L=0;return 10===p&&(L-=1e4),b&&(L+=150),40!==p&&65288!==p||(L+=50),41!==l&&65289!==l||(L+=50),L}function A7(p,l,b,L,Y,te){let re=null,ve=w6(l,b,Y,te);for(const ze of L){const ke=w6(l-ze.x,b,Y,te)+ze.badness;ke<=ve&&(re=ze,ve=ke)}return{index:p,x:l,priorBreak:re,badness:ve}}function C6(p){return p?C6(p.priorBreak).concat(p.index):[]}function gf(p,l,b,L,Y,te,re){if("point"!==te)return[];if(!p)return[];const ve=[],ze=function(st,bt,Ct,Rt,qt,Jt){let yn=0;for(let sn=0;sn<st.length();sn++){const Mn=st.getSection(sn);yn+=mf(st.getCharCode(sn),Mn,Rt,qt,bt,Jt)}return yn/Math.max(1,Math.ceil(yn/Ct))}(p,l,b,L,Y,re),ke=p.text.indexOf("\u200b")>=0;let Ze=0;for(let st=0;st<p.length();st++){const bt=p.getSection(st),Ct=p.getCharCode(st);if(_8[Ct]||(Ze+=mf(Ct,bt,L,Y,l,re)),st<p.length()-1){const Rt=!((et=Ct)<11904||!(gi["Bopomofo Extended"](et)||gi.Bopomofo(et)||gi["CJK Compatibility Forms"](et)||gi["CJK Compatibility Ideographs"](et)||gi["CJK Compatibility"](et)||gi["CJK Radicals Supplement"](et)||gi["CJK Strokes"](et)||gi["CJK Symbols and Punctuation"](et)||gi["CJK Unified Ideographs Extension A"](et)||gi["CJK Unified Ideographs"](et)||gi["Enclosed CJK Letters and Months"](et)||gi["Halfwidth and Fullwidth Forms"](et)||gi.Hiragana(et)||gi["Ideographic Description Characters"](et)||gi["Kangxi Radicals"](et)||gi["Katakana Phonetic Extensions"](et)||gi.Katakana(et)||gi["Vertical Forms"](et)||gi["Yi Radicals"](et)||gi["Yi Syllables"](et)));(E7[Ct]||Rt||bt.imageName)&&ve.push(A7(st+1,Ze,ze,ve,Ub(Ct,p.getCharCode(st+1),Rt&&ke),!1))}}var et;return C6(A7(p.length(),Ze,ze,ve,0,!0))}function vf(p){let l=.5,b=.5;switch(p){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(p){case"bottom":case"bottom-right":case"bottom-left":b=1;break;case"top":case"top-right":case"top-left":b=0}return{horizontalAlign:l,verticalAlign:b}}function Gb(p,l,b,L,Y){if(!L&&!Y)return;const te=p[b],re=(p[b].x+te.metrics.advance*te.scale)*L;for(let ve=l;ve<=b;ve++)p[ve].x-=re,p[ve].y+=Y}function Wb(p,l,b){const{horizontalAlign:L,verticalAlign:Y}=vf(b),te=l[0]-p.displaySize[0]*L,re=l[1]-p.displaySize[1]*Y;return{image:p,top:re,bottom:re+p.displaySize[1],left:te,right:te+p.displaySize[0]}}function z7(p,l,b,L,Y,te){const re=p.image;let ve;if(re.content){const qt=re.content,Jt=re.pixelRatio||1;ve=[qt[0]/Jt,qt[1]/Jt,re.displaySize[0]-qt[2]/Jt,re.displaySize[1]-qt[3]/Jt]}const ze=l.left*te,ke=l.right*te;let Ze,et,st,bt;"width"===b||"both"===b?(bt=Y[0]+ze-L[3],et=Y[0]+ke+L[1]):(bt=Y[0]+(ze+ke-re.displaySize[0])/2,et=bt+re.displaySize[0]);const Ct=l.top*te,Rt=l.bottom*te;return"height"===b||"both"===b?(Ze=Y[1]+Ct-L[0],st=Y[1]+Rt+L[2]):(Ze=Y[1]+(Ct+Rt-re.displaySize[1])/2,st=Ze+re.displaySize[1]),{image:re,top:Ze,right:et,bottom:st,left:bt,collisionPadding:ve}}const b4=255,g2=128,Z2=b4*g2;function b8(p,l){const{expression:b}=l;if("constant"===b.kind)return{kind:"constant",layoutSize:b.evaluate(new Wr(p+1))};if("source"===b.kind)return{kind:"source"};{const{zoomStops:L,interpolationType:Y}=b;let te=0;for(;te<L.length&&L[te]<=p;)te++;te=Math.max(0,te-1);let re=te;for(;re<L.length&&L[re]<p+1;)re++;re=Math.min(L.length-1,re);const ve=L[te],ze=L[re];return"composite"===b.kind?{kind:"composite",minZoom:ve,maxZoom:ze,interpolationType:Y}:{kind:"camera",minZoom:ve,maxZoom:ze,minSize:b.evaluate(new Wr(ve)),maxSize:b.evaluate(new Wr(ze)),interpolationType:Y}}}function M6(p,l,b){let L="never";const Y=p.get(l);return Y?L=Y:p.get(b)&&(L="always"),L}const yf=t2.VectorTileFeature.types,gu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function x4(p,l,b,L,Y,te,re,ve,ze,ke,Ze,et,st){const bt=ve?Math.min(Z2,Math.round(ve[0])):0,Ct=ve?Math.min(Z2,Math.round(ve[1])):0;p.emplaceBack(l,b,Math.round(32*L),Math.round(32*Y),te,re,(bt<<1)+(ze?1:0),Ct,16*ke,16*Ze,256*et,256*st)}function S6(p,l,b){p.emplaceBack(l.x,l.y,b),p.emplaceBack(l.x,l.y,b),p.emplaceBack(l.x,l.y,b),p.emplaceBack(l.x,l.y,b)}function E6(p){for(const l of p.sections)if(Ta(l.text))return!0;return!1}class vu{constructor(l){this.layoutVertexArray=new ti,this.indexArray=new lr,this.programConfigurations=l,this.segments=new fr,this.dynamicLayoutVertexArray=new hi,this.opacityVertexArray=new Wi,this.hasVisibleVertices=!1,this.placedSymbolArray=new Le}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(l,b,L,Y){this.isEmpty()||(L&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,p4.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,b),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,_7.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,gu,!0),this.opacityVertexBuffer.itemSize=1),(L||Y)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ui("SymbolBuffers",vu);class dl{constructor(l,b,L){this.layoutVertexArray=new l,this.layoutAttributes=b,this.indexArray=new L,this.segments=new fr,this.collisionVertexArray=new bi}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,Hb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ui("CollisionBuffers",dl);class yu{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(re=>re.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=a4([]),this.placementViewportMatrix=a4([]);const b=this.layers[0]._unevaluatedLayout._values;this.textSizeData=b8(this.zoom,b["text-size"]),this.iconSizeData=b8(this.zoom,b["icon-size"]);const L=this.layers[0].layout,Y=L.get("symbol-sort-key"),te=L.get("symbol-z-order");this.canOverlap="never"!==M6(L,"text-overlap","text-allow-overlap")||"never"!==M6(L,"icon-overlap","icon-allow-overlap")||L.get("text-ignore-placement")||L.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==te&&!Y.isConstant(),this.sortFeaturesByY=("viewport-y"===te||"auto"===te&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===L.get("symbol-placement")&&(this.writingModes=L.get("text-writing-mode").map(re=>u.WritingMode[re])),this.stateDependentLayerIds=this.layers.filter(re=>re.isStateDependent()).map(re=>re.id),this.sourceID=l.sourceID}createArrays(){this.text=new vu(new Jc(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new vu(new Jc(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new lt,this.lineVertexArray=new Tt,this.symbolInstances=new We,this.textAnchorOffsets=new Ft}calculateGlyphDependencies(l,b,L,Y,te){for(let re=0;re<l.length;re++)if(b[l.charCodeAt(re)]=!0,(L||Y)&&te){const ve=_0[l.charAt(re)];ve&&(b[ve.charCodeAt(0)]=!0)}}populate(l,b,L){const Y=this.layers[0],te=Y.layout,re=te.get("text-font"),ve=te.get("text-field"),ze=te.get("icon-image"),ke=("constant"!==ve.value.kind||ve.value.value instanceof to&&!ve.value.value.isEmpty()||ve.value.value.toString().length>0)&&("constant"!==re.value.kind||re.value.value.length>0),Ze="constant"!==ze.value.kind||!!ze.value.value||Object.keys(ze.parameters).length>0,et=te.get("symbol-sort-key");if(this.features=[],!ke&&!Ze)return;const st=b.iconDependencies,bt=b.glyphDependencies,Ct=b.availableImages,Rt=new Wr(this.zoom);for(const{feature:qt,id:Jt,index:yn,sourceLayerIndex:sn}of l){const Mn=Y._featureFilter.needGeometry,Ln=no(qt,Mn);if(!Y._featureFilter.filter(Rt,Ln,L))continue;let Qn,pi;if(Mn||(Ln.geometry=Jn(qt)),ke){const Ai=Y.getValueAndResolveTokens("text-field",Ln,L,Ct),xi=to.factory(Ai);E6(xi)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===zc()||this.hasRTLText&&Ao.isParsed())&&(Qn=m2(xi,Y,Ln))}if(Ze){const Ai=Y.getValueAndResolveTokens("icon-image",Ln,L,Ct);pi=Ai instanceof co?Ai:co.fromString(Ai)}if(!Qn&&!pi)continue;const Oi=this.sortFeaturesByKey?et.evaluate(Ln,{},L):void 0;if(this.features.push({id:Jt,text:Qn,icon:pi,index:yn,sourceLayerIndex:sn,geometry:Ln.geometry,properties:qt.properties,type:yf[qt.type],sortKey:Oi}),pi&&(st[pi.name]=!0),Qn){const Ai=re.evaluate(Ln,{},L).join(","),xi="viewport"!==te.get("text-rotation-alignment")&&"point"!==te.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.WritingMode.vertical)>=0;for(const mi of Qn.sections)if(mi.image)st[mi.image.name]=!0;else{const Bi=So(Qn.toString()),yi=mi.fontStack||Ai,ai=bt[yi]=bt[yi]||{};this.calculateGlyphDependencies(mi.text,ai,xi,this.allowVerticalPlacement,Bi)}}}"line"===te.get("symbol-placement")&&(this.features=function(qt){const Jt={},yn={},sn=[];let Mn=0;function Ln(Ai){sn.push(qt[Ai]),Mn++}function Qn(Ai,xi,mi){const Bi=yn[Ai];return delete yn[Ai],yn[xi]=Bi,sn[Bi].geometry[0].pop(),sn[Bi].geometry[0]=sn[Bi].geometry[0].concat(mi[0]),Bi}function pi(Ai,xi,mi){const Bi=Jt[xi];return delete Jt[xi],Jt[Ai]=Bi,sn[Bi].geometry[0].shift(),sn[Bi].geometry[0]=mi[0].concat(sn[Bi].geometry[0]),Bi}function Oi(Ai,xi,mi){const Bi=mi?xi[0][xi[0].length-1]:xi[0][0];return`${Ai}:${Bi.x}:${Bi.y}`}for(let Ai=0;Ai<qt.length;Ai++){const xi=qt[Ai],mi=xi.geometry,Bi=xi.text?xi.text.toString():null;if(!Bi){Ln(Ai);continue}const yi=Oi(Bi,mi),ai=Oi(Bi,mi,!0);if(yi in yn&&ai in Jt&&yn[yi]!==Jt[ai]){const pr=pi(yi,ai,mi),tr=Qn(yi,ai,sn[pr].geometry);delete Jt[yi],delete yn[ai],yn[Oi(Bi,sn[tr].geometry,!0)]=tr,sn[pr].geometry=null}else yi in yn?Qn(yi,ai,mi):ai in Jt?pi(yi,ai,mi):(Ln(Ai),Jt[yi]=Mn-1,yn[ai]=Mn-1)}return sn.filter(Ai=>Ai.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((qt,Jt)=>qt.sortKey-Jt.sortKey)}update(l,b,L){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,b,this.layers,L),this.icon.programConfigurations.updatePaintArrays(l,b,this.layers,L))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,b){const L=this.lineVertexArray.length;if(void 0!==l.segment){let Y=l.dist(b[l.segment+1]),te=l.dist(b[l.segment]);const re={};for(let ve=l.segment+1;ve<b.length;ve++)re[ve]={x:b[ve].x,y:b[ve].y,tileUnitDistanceFromAnchor:Y},ve<b.length-1&&(Y+=b[ve+1].dist(b[ve]));for(let ve=l.segment||0;ve>=0;ve--)re[ve]={x:b[ve].x,y:b[ve].y,tileUnitDistanceFromAnchor:te},ve>0&&(te+=b[ve-1].dist(b[ve]));for(let ve=0;ve<b.length;ve++){const ze=re[ve];this.lineVertexArray.emplaceBack(ze.x,ze.y,ze.tileUnitDistanceFromAnchor)}}return{lineStartIndex:L,lineLength:this.lineVertexArray.length-L}}addSymbols(l,b,L,Y,te,re,ve,ze,ke,Ze,et,st){const bt=l.indexArray,Ct=l.layoutVertexArray,Rt=l.segments.prepareSegment(4*b.length,Ct,bt,this.canOverlap?re.sortKey:void 0),qt=this.glyphOffsetArray.length,Jt=Rt.vertexLength,yn=this.allowVerticalPlacement&&ve===u.WritingMode.vertical?Math.PI/2:0,sn=re.text&&re.text.sections;for(let Mn=0;Mn<b.length;Mn++){const{tl:Ln,tr:Qn,bl:pi,br:Oi,tex:Ai,pixelOffsetTL:xi,pixelOffsetBR:mi,minFontScaleX:Bi,minFontScaleY:yi,glyphOffset:ai,isSDF:pr,sectionIndex:tr}=b[Mn],Jr=Rt.vertexLength,us=ai[1];x4(Ct,ze.x,ze.y,Ln.x,us+Ln.y,Ai.x,Ai.y,L,pr,xi.x,xi.y,Bi,yi),x4(Ct,ze.x,ze.y,Qn.x,us+Qn.y,Ai.x+Ai.w,Ai.y,L,pr,mi.x,xi.y,Bi,yi),x4(Ct,ze.x,ze.y,pi.x,us+pi.y,Ai.x,Ai.y+Ai.h,L,pr,xi.x,mi.y,Bi,yi),x4(Ct,ze.x,ze.y,Oi.x,us+Oi.y,Ai.x+Ai.w,Ai.y+Ai.h,L,pr,mi.x,mi.y,Bi,yi),S6(l.dynamicLayoutVertexArray,ze,yn),bt.emplaceBack(Jr,Jr+1,Jr+2),bt.emplaceBack(Jr+1,Jr+2,Jr+3),Rt.vertexLength+=4,Rt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ai[0]),Mn!==b.length-1&&tr===b[Mn+1].sectionIndex||l.programConfigurations.populatePaintArrays(Ct.length,re,re.index,{},st,sn&&sn[tr])}l.placedSymbolArray.emplaceBack(ze.x,ze.y,qt,this.glyphOffsetArray.length-qt,Jt,ke,Ze,ze.segment,L?L[0]:0,L?L[1]:0,Y[0],Y[1],ve,0,!1,0,et)}_addCollisionDebugVertex(l,b,L,Y,te,re){return b.emplaceBack(0,0),l.emplaceBack(L.x,L.y,Y,te,Math.round(re.x),Math.round(re.y))}addCollisionDebugVertices(l,b,L,Y,te,re,ve){const ze=te.segments.prepareSegment(4,te.layoutVertexArray,te.indexArray),ke=ze.vertexLength,Ze=te.layoutVertexArray,et=te.collisionVertexArray,st=ve.anchorX,bt=ve.anchorY;this._addCollisionDebugVertex(Ze,et,re,st,bt,new m(l,b)),this._addCollisionDebugVertex(Ze,et,re,st,bt,new m(L,b)),this._addCollisionDebugVertex(Ze,et,re,st,bt,new m(L,Y)),this._addCollisionDebugVertex(Ze,et,re,st,bt,new m(l,Y)),ze.vertexLength+=4;const Ct=te.indexArray;Ct.emplaceBack(ke,ke+1),Ct.emplaceBack(ke+1,ke+2),Ct.emplaceBack(ke+2,ke+3),Ct.emplaceBack(ke+3,ke),ze.primitiveLength+=4}addDebugCollisionBoxes(l,b,L,Y){for(let te=l;te<b;te++){const re=this.collisionBoxArray.get(te);this.addCollisionDebugVertices(re.x1,re.y1,re.x2,re.y2,Y?this.textCollisionBox:this.iconCollisionBox,re.anchorPoint,L)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dl(qr,sf.members,Yi),this.iconCollisionBox=new dl(qr,sf.members,Yi);for(let l=0;l<this.symbolInstances.length;l++){const b=this.symbolInstances.get(l);this.addDebugCollisionBoxes(b.textBoxStartIndex,b.textBoxEndIndex,b,!0),this.addDebugCollisionBoxes(b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b,!0),this.addDebugCollisionBoxes(b.iconBoxStartIndex,b.iconBoxEndIndex,b,!1),this.addDebugCollisionBoxes(b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b,!1)}}_deserializeCollisionBoxesForSymbol(l,b,L,Y,te,re,ve,ze,ke){const Ze={};for(let et=b;et<L;et++){const st=l.get(et);Ze.textBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Ze.textFeatureIndex=st.featureIndex;break}for(let et=Y;et<te;et++){const st=l.get(et);Ze.verticalTextBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Ze.verticalTextFeatureIndex=st.featureIndex;break}for(let et=re;et<ve;et++){const st=l.get(et);Ze.iconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Ze.iconFeatureIndex=st.featureIndex;break}for(let et=ze;et<ke;et++){const st=l.get(et);Ze.verticalIconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},Ze.verticalIconFeatureIndex=st.featureIndex;break}return Ze}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let b=0;b<this.symbolInstances.length;b++){const L=this.symbolInstances.get(b);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,L.textBoxStartIndex,L.textBoxEndIndex,L.verticalTextBoxStartIndex,L.verticalTextBoxEndIndex,L.iconBoxStartIndex,L.iconBoxEndIndex,L.verticalIconBoxStartIndex,L.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,b){const L=l.placedSymbolArray.get(b),Y=L.vertexStartIndex+4*L.numGlyphs;for(let te=L.vertexStartIndex;te<Y;te+=4)l.indexArray.emplaceBack(te,te+1,te+2),l.indexArray.emplaceBack(te+1,te+2,te+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const b=Math.sin(l),L=Math.cos(l),Y=[],te=[],re=[];for(let ve=0;ve<this.symbolInstances.length;++ve){re.push(ve);const ze=this.symbolInstances.get(ve);Y.push(0|Math.round(b*ze.anchorX+L*ze.anchorY)),te.push(ze.featureIndex)}return re.sort((ve,ze)=>Y[ve]-Y[ze]||te[ze]-te[ve]),re}addToSortKeyRanges(l,b){const L=this.sortKeyRanges[this.sortKeyRanges.length-1];L&&L.sortKey===b?L.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:b,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const b of this.symbolInstanceIndexes){const L=this.symbolInstances.get(b);this.featureSortOrder.push(L.featureIndex),[L.rightJustifiedTextSymbolIndex,L.centerJustifiedTextSymbolIndex,L.leftJustifiedTextSymbolIndex].forEach((Y,te,re)=>{Y>=0&&re.indexOf(Y)===te&&this.addIndicesForPlacedSymbol(this.text,Y)}),L.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,L.verticalPlacedTextSymbolIndex),L.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,L.placedIconSymbolIndex),L.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,L.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let _f,bf;ui("SymbolBucket",yu,{omit:["layers","collisionBoxArray","features","compareText"]}),yu.MAX_GLYPHS=65535,yu.addDynamicAttributes=S6;var A6={get paint(){return bf=bf||new Hs({"icon-opacity":new _r(Pe.paint_symbol["icon-opacity"]),"icon-color":new _r(Pe.paint_symbol["icon-color"]),"icon-halo-color":new _r(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new _r(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _r(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Hi(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Hi(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new _r(Pe.paint_symbol["text-opacity"]),"text-color":new _r(Pe.paint_symbol["text-color"],{runtimeType:_i,getOverride:p=>p.textColor,hasOverride:p=>!!p.textColor}),"text-halo-color":new _r(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new _r(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new _r(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Hi(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Hi(Pe.paint_symbol["text-translate-anchor"])})},get layout(){return _f=_f||new Hs({"symbol-placement":new Hi(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Hi(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Hi(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _r(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Hi(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Hi(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Hi(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Hi(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Hi(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Hi(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new _r(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Hi(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Hi(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new _r(Pe.layout_symbol["icon-image"]),"icon-rotate":new _r(Pe.layout_symbol["icon-rotate"]),"icon-padding":new _r(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Hi(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new _r(Pe.layout_symbol["icon-offset"]),"icon-anchor":new _r(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Hi(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Hi(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Hi(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new _r(Pe.layout_symbol["text-field"]),"text-font":new _r(Pe.layout_symbol["text-font"]),"text-size":new _r(Pe.layout_symbol["text-size"]),"text-max-width":new _r(Pe.layout_symbol["text-max-width"]),"text-line-height":new Hi(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new _r(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new _r(Pe.layout_symbol["text-justify"]),"text-radial-offset":new _r(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Hi(Pe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _r(Pe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _r(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Hi(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Hi(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new _r(Pe.layout_symbol["text-rotate"]),"text-padding":new Hi(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Hi(Pe.layout_symbol["text-keep-upright"]),"text-transform":new _r(Pe.layout_symbol["text-transform"]),"text-offset":new _r(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Hi(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Hi(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Hi(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Hi(Pe.layout_symbol["text-optional"])})}};class z6{constructor(l){if(void 0===l.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Vn,this.defaultValue=l}evaluate(l){if(l.formattedSection){const b=this.defaultValue.property.overrides;if(b&&b.hasOverride(l.formattedSection))return b.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ui("FormatSectionOverride",z6,{omit:["defaultValue"]});class P6 extends ms{constructor(l){super(l,A6)}recalculate(l,b){if(super.recalculate(l,b),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const L=this.layout.get("text-writing-mode");if(L){const Y=[];for(const te of L)Y.indexOf(te)<0&&Y.push(te);this.layout._values["text-writing-mode"]=Y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,b,L,Y){const te=this.layout.get(l).evaluate(b,{},L,Y),re=this._unevaluatedLayout._values[l];return re.isDataDriven()||Ac(re.value)||!te?te:(ve=b.properties,te.replace(/{([^{}]+)}/g,(ke,Ze)=>Ze in ve?String(ve[Ze]):""));var ve}createBucket(l){return new yu(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of A6.paint.overridableProperties){if(!P6.hasPaintOverride(this.layout,l))continue;const b=this.paint.get(l),L=new z6(b),Y=new vr(L,b.property.specification);let te=null;te="constant"===b.value.kind||"source"===b.value.kind?new za("source",Y):new Do("composite",Y,b.value.zoomStops),this.paint._values[l]=new Za(b.property,te,b.parameters)}}_handleOverridablePaintPropertyUpdate(l,b,L){return!(!this.layout||b.isDataDriven()||L.isDataDriven())&&P6.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,b){const L=l.get("text-field"),Y=A6.paint.properties[b];let te=!1;const re=ve=>{for(const ze of ve)if(Y.overrides&&Y.overrides.hasOverride(ze))return void(te=!0)};if("constant"===L.value.kind&&L.value.value instanceof to)re(L.value.value.sections);else if("source"===L.value.kind){const ve=ke=>{te||(ke instanceof at&&Mr(ke.value)===ci?re(ke.value.sections):ke instanceof sa?re(ke.sections):ke.eachChild(ve))},ze=L.value;ze._styleExpression&&ve(ze._styleExpression.expression)}return te}}let xf;var P7={get paint(){return xf=xf||new Hs({"background-color":new Hi(Pe.paint_background["background-color"]),"background-pattern":new D1(Pe.paint_background["background-pattern"]),"background-opacity":new Hi(Pe.paint_background["background-opacity"])})}};class wf extends ms{constructor(l){super(l,P7)}}let Cf;var I7={get paint(){return Cf=Cf||new Hs({"raster-opacity":new Hi(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Hi(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Hi(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Hi(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Hi(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Hi(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Hi(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Hi(Pe.paint_raster["raster-fade-duration"])})}};class n2 extends ms{constructor(l){super(l,I7)}}class x8 extends ms{constructor(l){super(l,{}),this.onAdd=b=>{this.implementation.onAdd&&this.implementation.onAdd(b,b.painter.context.gl)},this.onRemove=b=>{this.implementation.onRemove&&this.implementation.onRemove(b,b.painter.context.gl)},this.implementation=l}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Mf{constructor(l){this._callback=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const w4=6371008.8;class t1{constructor(l,b){if(isNaN(l)||isNaN(b))throw new Error(`Invalid LngLat object: (${l}, ${b})`);if(this.lng=+l,this.lat=+b,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new t1(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const b=Math.PI/180,L=this.lat*b,Y=l.lat*b,te=Math.sin(L)*Math.sin(Y)+Math.cos(L)*Math.cos(Y)*Math.cos((l.lng-this.lng)*b);return w4*Math.acos(Math.min(te,1))}static convert(l){if(l instanceof t1)return l;if(Array.isArray(l)&&(2===l.length||3===l.length))return new t1(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&"object"==typeof l&&null!==l)return new t1(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const _u=2*Math.PI*w4;function w8(p){return _u*Math.cos(p*Math.PI/180)}function C8(p){return(180+p)/360}function Sf(p){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+p*Math.PI/360)))/360}function M8(p,l){return p/w8(l)}function S8(p){return 360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90}class C4{constructor(l,b,L=0){this.x=+l,this.y=+b,this.z=+L}static fromLngLat(l,b=0){const L=t1.convert(l);return new C4(C8(L.lng),Sf(L.lat),M8(b,L.lat))}toLngLat(){return new t1(360*this.x-180,S8(this.y))}toAltitude(){return this.z*w8(S8(this.y))}meterInMercatorCoordinateUnits(){return 1/_u*(l=S8(this.y),1/Math.cos(l*Math.PI/180));var l}}function Ef(p,l,b){var L=2*Math.PI*6378137/256/Math.pow(2,b);return[p*L-2*Math.PI*6378137/2,l*L-2*Math.PI*6378137/2]}class I6{constructor(l,b,L){if(l<0||l>25||L<0||L>=Math.pow(2,l)||b<0||b>=Math.pow(2,l))throw new Error(`x=${b}, y=${L}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=b,this.y=L,this.key=C0(0,l,l,b,L)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,b,L){const Y=(re=this.y,ve=this.z,ze=Ef(256*(te=this.x),256*(re=Math.pow(2,ve)-re-1),ve),ke=Ef(256*(te+1),256*(re+1),ve),ze[0]+","+ze[1]+","+ke[0]+","+ke[1]);var te,re,ve,ze,ke;const Ze=function(et,st,bt){let Ct,Rt="";for(let qt=et;qt>0;qt--)Ct=1<<qt-1,Rt+=(st&Ct?1:0)+(bt&Ct?2:0);return Rt}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===L?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,b>1?"@2x":"").replace(/{quadkey}/g,Ze).replace(/{bbox-epsg-3857}/g,Y)}isChildOf(l){const b=this.z-l.z;return b>0&&l.x===this.x>>b&&l.y===this.y>>b}getTilePoint(l){const b=Math.pow(2,this.z);return new m((l.x*b-this.x)*Ps,(l.y*b-this.y)*Ps)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Af{constructor(l,b){this.wrap=l,this.canonical=b,this.key=C0(l,b.z,b.z,b.x,b.y)}}class v2{constructor(l,b,L,Y,te){if(l<L)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${L}`);this.overscaledZ=l,this.wrap=b,this.canonical=new I6(L,+Y,+te),this.key=C0(b,l,L,Y,te)}clone(){return new v2(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const b=this.canonical.z-l;return l>this.canonical.z?new v2(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new v2(l,this.wrap,l,this.canonical.x>>b,this.canonical.y>>b)}calculateScaledKey(l,b){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const L=this.canonical.z-l;return l>this.canonical.z?C0(this.wrap*+b,l,this.canonical.z,this.canonical.x,this.canonical.y):C0(this.wrap*+b,l,l,this.canonical.x>>L,this.canonical.y>>L)}isChildOf(l){if(l.wrap!==this.wrap)return!1;const b=this.canonical.z-l.canonical.z;return 0===l.overscaledZ||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>b&&l.canonical.y===this.canonical.y>>b}children(l){if(this.overscaledZ>=l)return[new v2(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const b=this.canonical.z+1,L=2*this.canonical.x,Y=2*this.canonical.y;return[new v2(b,this.wrap,b,L,Y),new v2(b,this.wrap,b,L+1,Y),new v2(b,this.wrap,b,L,Y+1),new v2(b,this.wrap,b,L+1,Y+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new v2(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new v2(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Af(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new C4(l.x-this.wrap,l.y))}}function C0(p,l,b,L,Y){(p*=2)<0&&(p=-1*p-1);const te=1<<b;return(te*te*p+te*Y+L).toString(36)+b.toString(36)+l.toString(36)}ui("CanonicalTileID",I6),ui("OverscaledTileID",v2,{omit:["posMatrix"]});class T6{constructor(l,b,L){if(this.uid=l,b.height!==b.width)throw new RangeError("DEM tiles must be square");if(L&&"mapbox"!==L&&"terrarium"!==L)return void $(`"${L}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=b.height;const Y=this.dim=b.height-2;this.data=new Uint32Array(b.data.buffer),this.encoding=L||"mapbox";for(let te=0;te<Y;te++)this.data[this._idx(-1,te)]=this.data[this._idx(0,te)],this.data[this._idx(Y,te)]=this.data[this._idx(Y-1,te)],this.data[this._idx(te,-1)]=this.data[this._idx(te,0)],this.data[this._idx(te,Y)]=this.data[this._idx(te,Y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y-1,0)],this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y-1)],this.data[this._idx(Y,Y)]=this.data[this._idx(Y-1,Y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let te=0;te<Y;te++)for(let re=0;re<Y;re++){const ve=this.get(te,re);ve>this.max&&(this.max=ve),ve<this.min&&(this.min=ve)}}get(l,b){const L=new Uint8Array(this.data.buffer),Y=4*this._idx(l,b);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(L[Y],L[Y+1],L[Y+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(l,b){if(l<-1||l>=this.dim+1||b<-1||b>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(b+1)*this.stride+(l+1)}_unpackMapbox(l,b,L){return(256*l*256+256*b+L)/10-1e4}_unpackTerrarium(l,b,L){return 256*l+b+L/256-32768}getPixels(){return new K1({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,b,L){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let Y=b*this.dim,te=b*this.dim+this.dim,re=L*this.dim,ve=L*this.dim+this.dim;switch(b){case-1:Y=te-1;break;case 1:te=Y+1}switch(L){case-1:re=ve-1;break;case 1:ve=re+1}const ze=-b*this.dim,ke=-L*this.dim;for(let Ze=re;Ze<ve;Ze++)for(let et=Y;et<te;et++)this.data[this._idx(et,Ze)]=l.data[this._idx(et+ze,Ze+ke)]}}ui("DEMData",T6);class zf{constructor(l){this._stringToNumber={},this._numberToString=[];for(let b=0;b<l.length;b++){const L=l[b];this._stringToNumber[L]=b,this._numberToString[b]=L}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class bu{constructor(l,b,L,Y,te){this.type="Feature",this._vectorTileFeature=l,l._z=b,l._x=L,l._y=Y,this.properties=l.properties,this.id=te}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const b in this)"_geometry"!==b&&"_vectorTileFeature"!==b&&(l[b]=this[b]);return l}}class Pf{constructor(l,b){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Ea(Ps,16,0),this.grid3D=new Ea(Ps,16,0),this.featureIndexArray=new ln,this.promoteId=b}insert(l,b,L,Y,te,re){const ve=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(L,Y,te);const ze=re?this.grid3D:this.grid;for(let ke=0;ke<b.length;ke++){const Ze=b[ke],et=[1/0,1/0,-1/0,-1/0];for(let st=0;st<Ze.length;st++){const bt=Ze[st];et[0]=Math.min(et[0],bt.x),et[1]=Math.min(et[1],bt.y),et[2]=Math.max(et[2],bt.x),et[3]=Math.max(et[3],bt.y)}et[0]<Ps&&et[1]<Ps&&et[2]>=0&&et[3]>=0&&ze.insert(ve,et[0],et[1],et[2],et[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new t2.VectorTile(new w0(this.rawTileData)).layers,this.sourceLayerCoder=new zf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,b,L,Y){this.loadVTLayers();const te=l.params||{},re=Ps/l.tileSize/l.scale,ve=is(te.filter),ze=l.queryGeometry,ke=l.queryPadding*re,Ze=E8(ze),et=this.grid.query(Ze.minX-ke,Ze.minY-ke,Ze.maxX+ke,Ze.maxY+ke),st=E8(l.cameraQueryGeometry),bt=this.grid3D.query(st.minX-ke,st.minY-ke,st.maxX+ke,st.maxY+ke,(qt,Jt,yn,sn)=>function(Mn,Ln,Qn,pi,Oi){for(const xi of Mn)if(Ln<=xi.x&&Qn<=xi.y&&pi>=xi.x&&Oi>=xi.y)return!0;const Ai=[new m(Ln,Qn),new m(Ln,Oi),new m(pi,Oi),new m(pi,Qn)];if(Mn.length>2)for(const xi of Ai)if(O1(Mn,xi))return!0;for(let xi=0;xi<Mn.length-1;xi++)if(Sl(Mn[xi],Mn[xi+1],Ai))return!0;return!1}(l.cameraQueryGeometry,qt-ke,Jt-ke,yn+ke,sn+ke));for(const qt of bt)et.push(qt);et.sort(Tf);const Ct={};let Rt;for(let qt=0;qt<et.length;qt++){const Jt=et[qt];if(Jt===Rt)continue;Rt=Jt;const yn=this.featureIndexArray.get(Jt);let sn=null;this.loadMatchingFeature(Ct,yn.bucketIndex,yn.sourceLayerIndex,yn.featureIndex,ve,te.layers,te.availableImages,b,L,Y,(Mn,Ln,Qn)=>(sn||(sn=Jn(Mn)),Ln.queryIntersectsFeature(ze,Mn,Qn,sn,this.z,l.transform,re,l.pixelPosMatrix)))}return Ct}loadMatchingFeature(l,b,L,Y,te,re,ve,ze,ke,Ze,et){const st=this.bucketLayerIDs[b];if(re&&!function(qt,Jt){for(let yn=0;yn<qt.length;yn++)if(Jt.indexOf(qt[yn])>=0)return!0;return!1}(re,st))return;const bt=this.sourceLayerCoder.decode(L),Ct=this.vtLayers[bt].feature(Y);if(te.needGeometry){const qt=no(Ct,!0);if(!te.filter(new Wr(this.tileID.overscaledZ),qt,this.tileID.canonical))return}else if(!te.filter(new Wr(this.tileID.overscaledZ),Ct))return;const Rt=this.getId(Ct,bt);for(let qt=0;qt<st.length;qt++){const Jt=st[qt];if(re&&re.indexOf(Jt)<0)continue;const yn=ze[Jt];if(!yn)continue;let sn={};Rt&&Ze&&(sn=Ze.getState(yn.sourceLayer||"_geojsonTileLayer",Rt));const Mn=B({},ke[Jt]);Mn.paint=If(Mn.paint,yn.paint,Ct,sn,ve),Mn.layout=If(Mn.layout,yn.layout,Ct,sn,ve);const Ln=!et||et(Ct,yn,sn);if(!Ln)continue;const Qn=new bu(Ct,this.z,this.x,this.y,Rt);Qn.layer=Mn;let pi=l[Jt];void 0===pi&&(pi=l[Jt]=[]),pi.push({featureIndex:Y,feature:Qn,intersectionZ:Ln})}}lookupSymbolFeatures(l,b,L,Y,te,re,ve,ze){const ke={};this.loadVTLayers();const Ze=is(te);for(const et of l)this.loadMatchingFeature(ke,L,Y,et,Ze,re,ve,ze,b);return ke}hasLayer(l){for(const b of this.bucketLayerIDs)for(const L of b)if(l===L)return!0;return!1}getId(l,b){let L=l.id;return this.promoteId&&(L=l.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[b]],"boolean"==typeof L&&(L=Number(L))),L}}function If(p,l,b,L,Y){return F(p,(te,re)=>{const ve=l instanceof W2?l.get(re):null;return ve&&ve.evaluate?ve.evaluate(b,L,Y):ve})}function E8(p){let l=1/0,b=1/0,L=-1/0,Y=-1/0;for(const te of p)l=Math.min(l,te.x),b=Math.min(b,te.y),L=Math.max(L,te.x),Y=Math.max(Y,te.y);return{minX:l,minY:b,maxX:L,maxY:Y}}function Tf(p,l){return l-p}function A8(p,l,b,L,Y){const te=[];for(let re=0;re<p.length;re++){const ve=p[re];let ze;for(let ke=0;ke<ve.length-1;ke++){let Ze=ve[ke],et=ve[ke+1];Ze.x<l&&et.x<l||(Ze.x<l?Ze=new m(l,Ze.y+(l-Ze.x)/(et.x-Ze.x)*(et.y-Ze.y))._round():et.x<l&&(et=new m(l,Ze.y+(l-Ze.x)/(et.x-Ze.x)*(et.y-Ze.y))._round()),Ze.y<b&&et.y<b||(Ze.y<b?Ze=new m(Ze.x+(b-Ze.y)/(et.y-Ze.y)*(et.x-Ze.x),b)._round():et.y<b&&(et=new m(Ze.x+(b-Ze.y)/(et.y-Ze.y)*(et.x-Ze.x),b)._round()),Ze.x>=L&&et.x>=L||(Ze.x>=L?Ze=new m(L,Ze.y+(L-Ze.x)/(et.x-Ze.x)*(et.y-Ze.y))._round():et.x>=L&&(et=new m(L,Ze.y+(L-Ze.x)/(et.x-Ze.x)*(et.y-Ze.y))._round()),Ze.y>=Y&&et.y>=Y||(Ze.y>=Y?Ze=new m(Ze.x+(Y-Ze.y)/(et.y-Ze.y)*(et.x-Ze.x),Y)._round():et.y>=Y&&(et=new m(Ze.x+(Y-Ze.y)/(et.y-Ze.y)*(et.x-Ze.x),Y)._round()),ze&&Ze.equals(ze[ze.length-1])||(ze=[Ze],te.push(ze)),ze.push(et)))))}}return te}ui("FeatureIndex",Pf,{omit:["rawTileData","sourceLayerCoder"]});class y2 extends m{constructor(l,b,L,Y){super(l,b),this.angle=L,void 0!==Y&&(this.segment=Y)}clone(){return new y2(this.x,this.y,this.angle,this.segment)}}function M4(p,l,b,L,Y){if(void 0===l.segment||0===b)return!0;let te=l,re=l.segment+1,ve=0;for(;ve>-b/2;){if(re--,re<0)return!1;ve-=p[re].dist(te),te=p[re]}ve+=p[re].dist(p[re+1]),re++;const ze=[];let ke=0;for(;ve<b/2;){const Ze=p[re],et=p[re+1];if(!et)return!1;let st=p[re-1].angleTo(Ze)-Ze.angleTo(et);for(st=Math.abs((st+3*Math.PI)%(2*Math.PI)-Math.PI),ze.push({distance:ve,angleDelta:st}),ke+=st;ve-ze[0].distance>L;)ke-=ze.shift().angleDelta;if(ke>Y)return!1;re++,ve+=Ze.dist(et)}return!0}function z8(p){let l=0;for(let b=0;b<p.length-1;b++)l+=p[b].dist(p[b+1]);return l}function L6(p,l,b){return p?.6*l*b:0}function S4(p,l){return Math.max(p?p.right-p.left:0,l?l.right-l.left:0)}function T7(p,l,b,L,Y,te){const re=L6(b,Y,te),ve=S4(b,L)*te;let ze=0;const ke=z8(p)/2;for(let Ze=0;Ze<p.length-1;Ze++){const et=p[Ze],st=p[Ze+1],bt=et.dist(st);if(ze+bt>ke){const Ct=(ke-ze)/bt,Rt=xs.number(et.x,st.x,Ct),qt=xs.number(et.y,st.y,Ct),Jt=new y2(Rt,qt,st.angleTo(et),Ze);return Jt._round(),!re||M4(p,Jt,ve,re,l)?Jt:void 0}ze+=bt}}function L7(p,l,b,L,Y,te,re,ve,ze){const ke=L6(L,te,re),Ze=S4(L,Y),et=Ze*re,st=0===p[0].x||p[0].x===ze||0===p[0].y||p[0].y===ze;return l-et<l/4&&(l=et+l/4),Lf(p,st?l/2*ve%l:(Ze/2+2*te)*re*ve%l,l,ke,b,et,st,!1,ze)}function Lf(p,l,b,L,Y,te,re,ve,ze){const ke=te/2,Ze=z8(p);let et=0,st=l-b,bt=[];for(let Ct=0;Ct<p.length-1;Ct++){const Rt=p[Ct],qt=p[Ct+1],Jt=Rt.dist(qt),yn=qt.angleTo(Rt);for(;st+b<et+Jt;){st+=b;const sn=(st-et)/Jt,Mn=xs.number(Rt.x,qt.x,sn),Ln=xs.number(Rt.y,qt.y,sn);if(Mn>=0&&Mn<ze&&Ln>=0&&Ln<ze&&st-ke>=0&&st+ke<=Ze){const Qn=new y2(Mn,Ln,yn,Ct);Qn._round(),L&&!M4(p,Qn,te,L,Y)||bt.push(Qn)}}et+=Jt}return ve||bt.length||re||(bt=Lf(p,et/2,b,L,Y,te,re,!0,ze)),bt}ui("Anchor",y2);const xu=Wc;function Df(p,l,b,L){const Y=[],te=p.image,re=te.pixelRatio,ve=te.paddedRect.w-2*xu,ze=te.paddedRect.h-2*xu,ke=p.right-p.left,Ze=p.bottom-p.top,et=te.stretchX||[[0,ve]],st=te.stretchY||[[0,ze]],bt=(mi,Bi)=>mi+Bi[1]-Bi[0],Ct=et.reduce(bt,0),Rt=st.reduce(bt,0),qt=ve-Ct,Jt=ze-Rt;let yn=0,sn=Ct,Mn=0,Ln=Rt,Qn=0,pi=qt,Oi=0,Ai=Jt;if(te.content&&L){const mi=te.content;yn=D6(et,0,mi[0]),Mn=D6(st,0,mi[1]),sn=D6(et,mi[0],mi[2]),Ln=D6(st,mi[1],mi[3]),Qn=mi[0]-yn,Oi=mi[1]-Mn,pi=mi[2]-mi[0]-sn,Ai=mi[3]-mi[1]-Ln}const xi=(mi,Bi,yi,ai)=>{const pr=M0(mi.stretch-yn,sn,ke,p.left),tr=wu(mi.fixed-Qn,pi,mi.stretch,Ct),Jr=M0(Bi.stretch-Mn,Ln,Ze,p.top),us=wu(Bi.fixed-Oi,Ai,Bi.stretch,Rt),gs=M0(yi.stretch-yn,sn,ke,p.left),Us=wu(yi.fixed-Qn,pi,yi.stretch,Ct),m1=M0(ai.stretch-Mn,Ln,Ze,p.top),k1=wu(ai.fixed-Oi,Ai,ai.stretch,Rt),n1=new m(pr,Jr),M1=new m(gs,Jr),J1=new m(gs,m1),r2=new m(pr,m1),Yc=new m(tr/re,us/re),S1=new m(Us/re,k1/re),r1=l*Math.PI/180;if(r1){const o2=Math.sin(r1),Tc=Math.cos(r1),Gs=[Tc,-o2,o2,Tc];n1._matMult(Gs),M1._matMult(Gs),r2._matMult(Gs),J1._matMult(Gs)}const ec=mi.stretch+mi.fixed,Xc=Bi.stretch+Bi.fixed;return{tl:n1,tr:M1,bl:r2,br:J1,tex:{x:te.paddedRect.x+xu+ec,y:te.paddedRect.y+xu+Xc,w:yi.stretch+yi.fixed-ec,h:ai.stretch+ai.fixed-Xc},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yc,pixelOffsetBR:S1,minFontScaleX:pi/re/ke,minFontScaleY:Ai/re/Ze,isSDF:b}};if(L&&(te.stretchX||te.stretchY)){const mi=P8(et,qt,Ct),Bi=P8(st,Jt,Rt);for(let yi=0;yi<mi.length-1;yi++){const ai=mi[yi],pr=mi[yi+1];for(let tr=0;tr<Bi.length-1;tr++)Y.push(xi(ai,Bi[tr],pr,Bi[tr+1]))}}else Y.push(xi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ve+1},{fixed:0,stretch:ze+1}));return Y}function D6(p,l,b){let L=0;for(const Y of p)L+=Math.max(l,Math.min(b,Y[1]))-Math.max(l,Math.min(b,Y[0]));return L}function P8(p,l,b){const L=[{fixed:-xu,stretch:0}];for(const[Y,te]of p){const re=L[L.length-1];L.push({fixed:Y-re.stretch,stretch:re.stretch}),L.push({fixed:Y-re.stretch,stretch:re.stretch+(te-Y)})}return L.push({fixed:l+xu,stretch:b}),L}function M0(p,l,b,L){return p/l*b+L}function wu(p,l,b,L){return p-l*b/L}class Cu{constructor(l,b,L,Y,te,re,ve,ze,ke,Ze){if(this.boxStartIndex=l.length,ke){let et=re.top,st=re.bottom;const bt=re.collisionPadding;bt&&(et-=bt[1],st+=bt[3]);let Ct=st-et;Ct>0&&(Ct=Math.max(10,Ct),this.circleDiameter=Ct)}else{let et=re.top*ve-ze[0],st=re.bottom*ve+ze[2],bt=re.left*ve-ze[3],Ct=re.right*ve+ze[1];const Rt=re.collisionPadding;if(Rt&&(bt-=Rt[0]*ve,et-=Rt[1]*ve,Ct+=Rt[2]*ve,st+=Rt[3]*ve),Ze){const qt=new m(bt,et),Jt=new m(Ct,et),yn=new m(bt,st),sn=new m(Ct,st),Mn=Ze*Math.PI/180;qt._rotate(Mn),Jt._rotate(Mn),yn._rotate(Mn),sn._rotate(Mn),bt=Math.min(qt.x,Jt.x,yn.x,sn.x),Ct=Math.max(qt.x,Jt.x,yn.x,sn.x),et=Math.min(qt.y,Jt.y,yn.y,sn.y),st=Math.max(qt.y,Jt.y,yn.y,sn.y)}l.emplaceBack(b.x,b.y,bt,et,Ct,st,L,Y,te)}this.boxEndIndex=l.length}}class D7{constructor(l=[],b=O7){if(this.data=l,this.length=this.data.length,this.compare=b,this.length>0)for(let L=(this.length>>1)-1;L>=0;L--)this._down(L)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const l=this.data[0],b=this.data.pop();return this.length--,this.length>0&&(this.data[0]=b,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:b,compare:L}=this,Y=b[l];for(;l>0;){const te=l-1>>1,re=b[te];if(L(Y,re)>=0)break;b[l]=re,l=te}b[l]=Y}_down(l){const{data:b,compare:L}=this,Y=this.length>>1,te=b[l];for(;l<Y;){let re=1+(l<<1),ve=b[re];const ze=re+1;if(ze<this.length&&L(b[ze],ve)<0&&(re=ze,ve=b[ze]),L(ve,te)>=0)break;b[l]=ve,l=re}b[l]=te}}function O7(p,l){return p<l?-1:p>l?1:0}function I8(p,l=1,b=!1){let L=1/0,Y=1/0,te=-1/0,re=-1/0;const ve=p[0];for(let bt=0;bt<ve.length;bt++){const Ct=ve[bt];(!bt||Ct.x<L)&&(L=Ct.x),(!bt||Ct.y<Y)&&(Y=Ct.y),(!bt||Ct.x>te)&&(te=Ct.x),(!bt||Ct.y>re)&&(re=Ct.y)}const ze=Math.min(te-L,re-Y);let ke=ze/2;const Ze=new D7([],Of);if(0===ze)return new m(L,Y);for(let bt=L;bt<te;bt+=ze)for(let Ct=Y;Ct<re;Ct+=ze)Ze.push(new F2(bt+ke,Ct+ke,ke,p));let et=function(bt){let Ct=0,Rt=0,qt=0;const Jt=bt[0];for(let yn=0,sn=Jt.length,Mn=sn-1;yn<sn;Mn=yn++){const Ln=Jt[yn],Qn=Jt[Mn],pi=Ln.x*Qn.y-Qn.x*Ln.y;Rt+=(Ln.x+Qn.x)*pi,qt+=(Ln.y+Qn.y)*pi,Ct+=3*pi}return new F2(Rt/Ct,qt/Ct,0,bt)}(p),st=Ze.length;for(;Ze.length;){const bt=Ze.pop();(bt.d>et.d||!et.d)&&(et=bt,b&&console.log("found best %d after %d probes",Math.round(1e4*bt.d)/1e4,st)),bt.max-et.d<=l||(ke=bt.h/2,Ze.push(new F2(bt.p.x-ke,bt.p.y-ke,ke,p)),Ze.push(new F2(bt.p.x+ke,bt.p.y-ke,ke,p)),Ze.push(new F2(bt.p.x-ke,bt.p.y+ke,ke,p)),Ze.push(new F2(bt.p.x+ke,bt.p.y+ke,ke,p)),st+=4)}return b&&(console.log(`num probes: ${st}`),console.log(`best distance: ${et.d}`)),et.p}function Of(p,l){return l.max-p.max}function F2(p,l,b,L){this.p=new m(p,l),this.h=b,this.d=function(Y,te){let re=!1,ve=1/0;for(let ze=0;ze<te.length;ze++){const ke=te[ze];for(let Ze=0,et=ke.length,st=et-1;Ze<et;st=Ze++){const bt=ke[Ze],Ct=ke[st];bt.y>Y.y!=Ct.y>Y.y&&Y.x<(Ct.x-bt.x)*(Y.y-bt.y)/(Ct.y-bt.y)+bt.x&&(re=!re),ve=Math.min(ve,o7(Y,bt,Ct))}}return(re?1:-1)*Math.sqrt(ve)}(this.p,L),this.max=this.d+this.h*Math.SQRT2}var Q1;u.TextAnchorEnum=void 0,(Q1=u.TextAnchorEnum||(u.TextAnchorEnum={}))[Q1.center=1]="center",Q1[Q1.left=2]="left",Q1[Q1.right=3]="right",Q1[Q1.top=4]="top",Q1[Q1.bottom=5]="bottom",Q1[Q1["top-left"]=6]="top-left",Q1[Q1["top-right"]=7]="top-right",Q1[Q1["bottom-left"]=8]="bottom-left",Q1[Q1["bottom-right"]=9]="bottom-right";const Ll=7,T8=Number.POSITIVE_INFINITY;function k7(p,l){return l[1]!==T8?function(b,L,Y){let te=0,re=0;switch(L=Math.abs(L),Y=Math.abs(Y),b){case"top-right":case"top-left":case"top":re=Y-Ll;break;case"bottom-right":case"bottom-left":case"bottom":re=-Y+Ll}switch(b){case"top-right":case"bottom-right":case"right":te=-L;break;case"top-left":case"bottom-left":case"left":te=L}return[te,re]}(p,l[0],l[1]):function(b,L){let Y=0,te=0;L<0&&(L=0);const re=L/Math.SQRT2;switch(b){case"top-right":case"top-left":te=re-Ll;break;case"bottom-right":case"bottom-left":te=-re+Ll;break;case"bottom":te=-L+Ll;break;case"top":te=L-Ll}switch(b){case"top-right":case"bottom-right":Y=-re;break;case"top-left":case"bottom-left":Y=re;break;case"left":Y=L;break;case"right":Y=-L}return[Y,te]}(p,l[0])}function E4(p,l,b){var L;const Y=p.layout,te=null===(L=Y.get("text-variable-anchor-offset"))||void 0===L?void 0:L.evaluate(l,{},b);if(te){const ve=te.values,ze=[];for(let ke=0;ke<ve.length;ke+=2){const Ze=ze[ke]=ve[ke],et=ve[ke+1].map(st=>st*Ms);Ze.startsWith("top")?et[1]-=Ll:Ze.startsWith("bottom")&&(et[1]+=Ll),ze[ke+1]=et}return new Ii(ze)}const re=Y.get("text-variable-anchor");if(re){let ve;ve=void 0!==p._unevaluatedLayout.getValue("text-radial-offset")?[Y.get("text-radial-offset").evaluate(l,{},b)*Ms,T8]:Y.get("text-offset").evaluate(l,{},b).map(ke=>ke*Ms);const ze=[];for(const ke of re)ze.push(ke,k7(ke,ve));return new Ii(ze)}return null}function L8(p){switch(p){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kf(p,l,b,L,Y,te,re,ve,ze,ke,Ze){let et=te.textMaxSize.evaluate(l,{});void 0===et&&(et=re);const st=p.layers[0].layout,bt=st.get("icon-offset").evaluate(l,{},Ze),Ct=O8(b.horizontal),Rt=re/24,qt=p.tilePixelRatio*Rt,Jt=p.tilePixelRatio*et/24,yn=p.tilePixelRatio*ve,sn=p.tilePixelRatio*st.get("symbol-spacing"),Mn=st.get("text-padding")*p.tilePixelRatio,Ln=function(ai,pr,tr,Jr=1){const us=ai.get("icon-padding").evaluate(pr,{},tr),gs=us&&us.values;return[gs[0]*Jr,gs[1]*Jr,gs[2]*Jr,gs[3]*Jr]}(st,l,Ze,p.tilePixelRatio),Qn=st.get("text-max-angle")/180*Math.PI,pi="viewport"!==st.get("text-rotation-alignment")&&"point"!==st.get("symbol-placement"),Oi="map"===st.get("icon-rotation-alignment")&&"point"!==st.get("symbol-placement"),Ai=st.get("symbol-placement"),xi=sn/2,mi=st.get("icon-text-fit");let Bi;L&&"none"!==mi&&(p.allowVerticalPlacement&&b.vertical&&(Bi=z7(L,b.vertical,mi,st.get("icon-text-fit-padding"),bt,Rt)),Ct&&(L=z7(L,Ct,mi,st.get("icon-text-fit-padding"),bt,Rt)));const yi=(ai,pr)=>{pr.x<0||pr.x>=Ps||pr.y<0||pr.y>=Ps||function(tr,Jr,us,gs,Us,m1,k1,n1,M1,J1,r2,Yc,S1,r1,ec,Xc,o2,Tc,Gs,dc,mo,a2,tc,nc,_2){const b2=tr.addToLineVertexArray(Jr,us);let $2,Is,x2,w2,E1=0,hl=0,P4=0,Nf=0,B8=-1,j8=-1;const fl={};let R7=f2("");if(tr.allowVerticalPlacement&&gs.vertical){const ic=n1.layout.get("text-rotate").evaluate(mo,{},nc)+90;x2=new Cu(M1,Jr,J1,r2,Yc,gs.vertical,S1,r1,ec,ic),k1&&(w2=new Cu(M1,Jr,J1,r2,Yc,k1,o2,Tc,ec,ic))}if(Us){const ic=n1.layout.get("icon-rotate").evaluate(mo,{}),s2="none"!==n1.layout.get("icon-text-fit"),Jl=Df(Us,ic,tc,s2),xc=k1?Df(k1,ic,tc,s2):void 0;Is=new Cu(M1,Jr,J1,r2,Yc,Us,o2,Tc,!1,ic),E1=4*Jl.length;const A0=tr.iconSizeData;let H2=null;"source"===A0.kind?(H2=[g2*n1.layout.get("icon-size").evaluate(mo,{})],H2[0]>Z2&&$(`${tr.layerIds[0]}: Value for "icon-size" is >= ${b4}. Reduce your "icon-size".`)):"composite"===A0.kind&&(H2=[g2*a2.compositeIconSizes[0].evaluate(mo,{},nc),g2*a2.compositeIconSizes[1].evaluate(mo,{},nc)],(H2[0]>Z2||H2[1]>Z2)&&$(`${tr.layerIds[0]}: Value for "icon-size" is >= ${b4}. Reduce your "icon-size".`)),tr.addSymbols(tr.icon,Jl,H2,dc,Gs,mo,u.WritingMode.none,Jr,b2.lineStartIndex,b2.lineLength,-1,nc),B8=tr.icon.placedSymbolArray.length-1,xc&&(hl=4*xc.length,tr.addSymbols(tr.icon,xc,H2,dc,Gs,mo,u.WritingMode.vertical,Jr,b2.lineStartIndex,b2.lineLength,-1,nc),j8=tr.icon.placedSymbolArray.length-1)}const F7=Object.keys(gs.horizontal);for(const ic of F7){const s2=gs.horizontal[ic];if(!$2){R7=f2(s2.text);const xc=n1.layout.get("text-rotate").evaluate(mo,{},nc);$2=new Cu(M1,Jr,J1,r2,Yc,s2,S1,r1,ec,xc)}const Jl=1===s2.positionedLines.length;if(P4+=D8(tr,Jr,s2,m1,n1,ec,mo,Xc,b2,gs.vertical?u.WritingMode.horizontal:u.WritingMode.horizontalOnly,Jl?F7:[ic],fl,B8,a2,nc),Jl)break}gs.vertical&&(Nf+=D8(tr,Jr,gs.vertical,m1,n1,ec,mo,Xc,b2,u.WritingMode.vertical,["vertical"],fl,j8,a2,nc));const I4=$2?$2.boxStartIndex:tr.collisionBoxArray.length,Gn=$2?$2.boxEndIndex:tr.collisionBoxArray.length,T4=x2?x2.boxStartIndex:tr.collisionBoxArray.length,Rf=x2?x2.boxEndIndex:tr.collisionBoxArray.length,Ff=Is?Is.boxStartIndex:tr.collisionBoxArray.length,U8=Is?Is.boxEndIndex:tr.collisionBoxArray.length,G8=w2?w2.boxStartIndex:tr.collisionBoxArray.length,V7=w2?w2.boxEndIndex:tr.collisionBoxArray.length;let V2=-1;const L4=(ic,s2)=>ic&&ic.circleDiameter?Math.max(ic.circleDiameter,s2):s2;V2=L4($2,V2),V2=L4(x2,V2),V2=L4(Is,V2),V2=L4(w2,V2);const D4=V2>-1?1:0;D4&&(V2*=_2/Ms),tr.glyphOffsetArray.length>=yu.MAX_GLYPHS&&$("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==mo.sortKey&&tr.addToSortKeyRanges(tr.symbolInstances.length,mo.sortKey);const Yb=E4(n1,mo,nc),[W8,H7]=function(ic,s2){const Jl=ic.length,xc=s2?.values;if(xc?.length>0)for(let A0=0;A0<xc.length;A0+=2){const H2=xc[A0+1];ic.emplaceBack(u.TextAnchorEnum[xc[A0]],H2[0],H2[1])}return[Jl,ic.length]}(tr.textAnchorOffsets,Yb);tr.symbolInstances.emplaceBack(Jr.x,Jr.y,fl.right>=0?fl.right:-1,fl.center>=0?fl.center:-1,fl.left>=0?fl.left:-1,fl.vertical||-1,B8,j8,R7,I4,Gn,T4,Rf,Ff,U8,G8,V7,J1,P4,Nf,E1,hl,D4,0,S1,V2,W8,H7)}(p,pr,ai,b,L,Y,Bi,p.layers[0],p.collisionBoxArray,l.index,l.sourceLayerIndex,p.index,qt,[Mn,Mn,Mn,Mn],pi,ze,yn,Ln,Oi,bt,l,te,ke,Ze,re)};if("line"===Ai)for(const ai of A8(l.geometry,0,0,Ps,Ps)){const pr=L7(ai,sn,Qn,b.vertical||Ct,L,24,Jt,p.overscaling,Ps);for(const tr of pr)Ct&&k8(p,Ct.text,xi,tr)||yi(ai,tr)}else if("line-center"===Ai){for(const ai of l.geometry)if(ai.length>1){const pr=T7(ai,Qn,b.vertical||Ct,L,24,Jt);pr&&yi(ai,pr)}}else if("Polygon"===l.type)for(const ai of uu(l.geometry,0)){const pr=I8(ai,16);yi(ai[0],new y2(pr.x,pr.y,0))}else if("LineString"===l.type)for(const ai of l.geometry)yi(ai,new y2(ai[0].x,ai[0].y,0));else if("Point"===l.type)for(const ai of l.geometry)for(const pr of ai)yi([pr],new y2(pr.x,pr.y,0))}function D8(p,l,b,L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct){const Rt=function(yn,sn,Mn,Ln,Qn,pi,Oi,Ai){const xi=Ln.layout.get("text-rotate").evaluate(pi,{})*Math.PI/180,mi=[];for(const Bi of sn.positionedLines)for(const yi of Bi.positionedGlyphs){if(!yi.rect)continue;const ai=yi.rect||{};let pr=S7+1,tr=!0,Jr=1,us=0;const gs=(Qn||Ai)&&yi.vertical,Us=yi.metrics.advance*yi.scale/2;if(Ai&&sn.verticalizable&&(us=Bi.lineOffset/2-(yi.imageName?-(Ms-yi.metrics.width*yi.scale)/2:(yi.scale-1)*Ms)),yi.imageName){const Gs=Oi[yi.imageName];tr=Gs.sdf,Jr=Gs.pixelRatio,pr=Wc/Jr}const m1=Qn?[yi.x+Us,yi.y]:[0,0];let k1=Qn?[0,0]:[yi.x+Us+Mn[0],yi.y+Mn[1]-us],n1=[0,0];gs&&(n1=k1,k1=[0,0]);const M1=(yi.metrics.left-pr)*yi.scale-Us+k1[0],J1=(-yi.metrics.top-pr)*yi.scale+k1[1],r2=M1+ai.w*yi.scale/Jr,Yc=J1+ai.h*yi.scale/Jr,S1=new m(M1,J1),r1=new m(r2,J1),ec=new m(M1,Yc),Xc=new m(r2,Yc);if(gs){const Gs=new m(-Us,Us-v4),dc=-Math.PI/2,mo=Ms/2-Us,a2=new m(5-v4-mo,-(yi.imageName?mo:0)),tc=new m(...n1);S1._rotateAround(dc,Gs)._add(a2)._add(tc),r1._rotateAround(dc,Gs)._add(a2)._add(tc),ec._rotateAround(dc,Gs)._add(a2)._add(tc),Xc._rotateAround(dc,Gs)._add(a2)._add(tc)}if(xi){const Gs=Math.sin(xi),dc=Math.cos(xi),mo=[dc,-Gs,Gs,dc];S1._matMult(mo),r1._matMult(mo),ec._matMult(mo),Xc._matMult(mo)}const o2=new m(0,0),Tc=new m(0,0);mi.push({tl:S1,tr:r1,bl:ec,br:Xc,tex:ai,writingMode:sn.writingMode,glyphOffset:m1,sectionIndex:yi.sectionIndex,isSDF:tr,pixelOffsetTL:o2,pixelOffsetBR:Tc,minFontScaleX:0,minFontScaleY:0})}return mi}(0,b,ve,Y,te,re,L,p.allowVerticalPlacement),qt=p.textSizeData;let Jt=null;"source"===qt.kind?(Jt=[g2*Y.layout.get("text-size").evaluate(re,{})],Jt[0]>Z2&&$(`${p.layerIds[0]}: Value for "text-size" is >= ${b4}. Reduce your "text-size".`)):"composite"===qt.kind&&(Jt=[g2*bt.compositeTextSizes[0].evaluate(re,{},Ct),g2*bt.compositeTextSizes[1].evaluate(re,{},Ct)],(Jt[0]>Z2||Jt[1]>Z2)&&$(`${p.layerIds[0]}: Value for "text-size" is >= ${b4}. Reduce your "text-size".`)),p.addSymbols(p.text,Rt,Jt,ve,te,re,ke,l,ze.lineStartIndex,ze.lineLength,st,Ct);for(const yn of Ze)et[yn]=p.text.placedSymbolArray.length-1;return 4*Rt.length}function O8(p){for(const l in p)return p[l];return null}function k8(p,l,b,L){const Y=p.compareText;if(l in Y){const te=Y[l];for(let re=te.length-1;re>=0;re--)if(L.dist(te[re])<b)return!0}else Y[l]=[];return Y[l].push(L),!1}const N8=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Mu{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[b,L]=new Uint8Array(l,0,2);if(219!==b)throw new Error("Data does not appear to be in a KDBush format.");const Y=L>>4;if(1!==Y)throw new Error(`Got v${Y} data when expected v1.`);const te=N8[15&L];if(!te)throw new Error("Unrecognized array type.");const[re]=new Uint16Array(l,2,1),[ve]=new Uint32Array(l,4,1);return new Mu(ve,re,te,l)}constructor(l,b=64,L=Float64Array,Y){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+b,2),65535),this.ArrayType=L,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const te=N8.indexOf(this.ArrayType),re=2*l*this.ArrayType.BYTES_PER_ELEMENT,ve=l*this.IndexArrayType.BYTES_PER_ELEMENT,ze=(8-ve%8)%8;if(te<0)throw new Error(`Unexpected typed array class: ${L}.`);Y&&Y instanceof ArrayBuffer?(this.data=Y,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+ve+ze,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+re+ve+ze),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+ve+ze,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+te]),new Uint16Array(this.data,2,1)[0]=b,new Uint32Array(this.data,4,1)[0]=l)}add(l,b){const L=this._pos>>1;return this.ids[L]=L,this.coords[this._pos++]=l,this.coords[this._pos++]=b,L}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return S0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,b,L,Y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:te,coords:re,nodeSize:ve}=this,ze=[0,te.length-1,0],ke=[];for(;ze.length;){const Ze=ze.pop()||0,et=ze.pop()||0,st=ze.pop()||0;if(et-st<=ve){for(let qt=st;qt<=et;qt++){const Jt=re[2*qt],yn=re[2*qt+1];Jt>=l&&Jt<=L&&yn>=b&&yn<=Y&&ke.push(te[qt])}continue}const bt=st+et>>1,Ct=re[2*bt],Rt=re[2*bt+1];Ct>=l&&Ct<=L&&Rt>=b&&Rt<=Y&&ke.push(te[bt]),(0===Ze?l<=Ct:b<=Rt)&&(ze.push(st),ze.push(bt-1),ze.push(1-Ze)),(0===Ze?L>=Ct:Y>=Rt)&&(ze.push(bt+1),ze.push(et),ze.push(1-Ze))}return ke}within(l,b,L){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:Y,coords:te,nodeSize:re}=this,ve=[0,Y.length-1,0],ze=[],ke=L*L;for(;ve.length;){const Ze=ve.pop()||0,et=ve.pop()||0,st=ve.pop()||0;if(et-st<=re){for(let qt=st;qt<=et;qt++)F8(te[2*qt],te[2*qt+1],l,b)<=ke&&ze.push(Y[qt]);continue}const bt=st+et>>1,Ct=te[2*bt],Rt=te[2*bt+1];F8(Ct,Rt,l,b)<=ke&&ze.push(Y[bt]),(0===Ze?l-L<=Ct:b-L<=Rt)&&(ve.push(st),ve.push(bt-1),ve.push(1-Ze)),(0===Ze?l+L>=Ct:b+L>=Rt)&&(ve.push(bt+1),ve.push(et),ve.push(1-Ze))}return ze}}function S0(p,l,b,L,Y,te){if(Y-L<=b)return;const re=L+Y>>1;R8(p,l,re,L,Y,te),S0(p,l,b,L,re-1,1-te),S0(p,l,b,re+1,Y,1-te)}function R8(p,l,b,L,Y,te){for(;Y>L;){if(Y-L>600){const ke=Y-L+1,Ze=b-L+1,et=Math.log(ke),st=.5*Math.exp(2*et/3),bt=.5*Math.sqrt(et*st*(ke-st)/ke)*(Ze-ke/2<0?-1:1);R8(p,l,b,Math.max(L,Math.floor(b-Ze*st/ke+bt)),Math.min(Y,Math.floor(b+(ke-Ze)*st/ke+bt)),te)}const re=l[2*b+te];let ve=L,ze=Y;for(E0(p,l,L,b),l[2*Y+te]>re&&E0(p,l,L,Y);ve<ze;){for(E0(p,l,ve,ze),ve++,ze--;l[2*ve+te]<re;)ve++;for(;l[2*ze+te]>re;)ze--}l[2*L+te]===re?E0(p,l,L,ze):(ze++,E0(p,l,ze,Y)),ze<=b&&(L=ze+1),b<=ze&&(Y=ze-1)}}function E0(p,l,b,L){Su(p,b,L),Su(l,2*b,2*L),Su(l,2*b+1,2*L+1)}function Su(p,l,b){const L=p[l];p[l]=p[b],p[b]=L}function F8(p,l,b,L){const Y=p-b,te=l-L;return Y*Y+te*te}var A4;u.PerformanceMarkers=void 0,(A4=u.PerformanceMarkers||(u.PerformanceMarkers={})).create="create",A4.load="load",A4.fullLoad="fullLoad";let Ql=null,z4=[];const O6=1e3/60,V8="loadTime",H8="fullLoadTime",N7={mark(p){performance.mark(p)},frame(p){const l=p;null!=Ql&&z4.push(l-Ql),Ql=l},clearMetrics(){Ql=null,z4=[],performance.clearMeasures(V8),performance.clearMeasures(H8);for(const p in u.PerformanceMarkers)performance.clearMarks(u.PerformanceMarkers[p])},getPerformanceMetrics(){performance.measure(V8,u.PerformanceMarkers.create,u.PerformanceMarkers.load),performance.measure(H8,u.PerformanceMarkers.create,u.PerformanceMarkers.fullLoad);const p=performance.getEntriesByName(V8)[0].duration,l=performance.getEntriesByName(H8)[0].duration,b=z4.length,L=1/(z4.reduce((te,re)=>te+re,0)/b/1e3),Y=z4.filter(te=>te>O6).reduce((te,re)=>te+(re-O6)/O6,0);return{loadTime:p,fullLoadTime:l,fps:L,percentDroppedFrames:Y/(b+Y)*100,totalFrames:b}}};u.AJAXError=de,u.ARRAY_TYPE=Yl,u.Actor=class{constructor(p,l,b){this.receive=L=>{const Y=L.data,te=Y.id;if(te&&(!Y.targetMapId||this.mapId===Y.targetMapId))if("<cancel>"===Y.type){delete this.tasks[te];const re=this.cancelCallbacks[te];delete this.cancelCallbacks[te],re&&re()}else ie()||Y.mustQueue?(this.tasks[te]=Y,this.taskQueue.push(te),this.invoker.trigger()):this.processTask(te,Y)},this.process=()=>{if(!this.taskQueue.length)return;const L=this.taskQueue.shift(),Y=this.tasks[L];delete this.tasks[L],this.taskQueue.length&&this.invoker.trigger(),Y&&this.processTask(L,Y)},this.target=p,this.parent=l,this.mapId=b,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new Mf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ie()?p:window}send(p,l,b,L,Y=!1){const te=Math.round(1e18*Math.random()).toString(36).substring(0,10);b&&(this.callbacks[te]=b);const re=se(this.globalScope)?void 0:[];return this.target.postMessage({id:te,type:p,hasCallback:!!b,targetMapId:L,mustQueue:Y,sourceMapId:this.mapId,data:f1(l,re)},re),{cancel:()=>{b&&delete this.callbacks[te],this.target.postMessage({id:te,type:"<cancel>",targetMapId:L,sourceMapId:this.mapId})}}}processTask(p,l){if("<response>"===l.type){const b=this.callbacks[p];delete this.callbacks[p],b&&(l.error?b(Ar(l.error)):b(null,Ar(l.data)))}else{let b=!1;const L=se(this.globalScope)?void 0:[],Y=l.hasCallback?(ve,ze)=>{b=!0,delete this.cancelCallbacks[p],this.target.postMessage({id:p,type:"<response>",sourceMapId:this.mapId,error:ve?f1(ve):null,data:f1(ze,L)},L)}:ve=>{b=!0};let te=null;const re=Ar(l.data);if(this.parent[l.type])te=this.parent[l.type](l.sourceMapId,re,Y);else if(this.parent.getWorkerSource){const ve=l.type.split(".");te=this.parent.getWorkerSource(l.sourceMapId,ve[0],re.source)[ve[1]](re,Y)}else Y(new Error(`Could not find function ${l.type}`));!b&&te&&te.cancel&&(this.cancelCallbacks[p]=te.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.AlphaImage=q1,u.CanonicalTileID=I6,u.CollisionBoxArray=ge,u.CollisionCircleLayoutArray=class extends T{},u.Color=Li,u.DEMData=T6,u.DataConstantProperty=Hi,u.DictionaryCoder=zf,u.EXTENT=Ps,u.ErrorEvent=$e,u.EvaluationParameters=Wr,u.Event=Ge,u.Evented=He,u.FeatureIndex=Pf,u.FillBucket=d4,u.FillExtrusionBucket=ql,u.GeoJSONFeature=bu,u.ImageAtlas=g4,u.ImagePosition=y8,u.KDBush=Mu,u.LineBucket=C1,u.LineStripIndexArray=class extends W{},u.LngLat=t1,u.MercatorCoordinate=C4,u.ONE_EM=Ms,u.OverscaledTileID=v2,u.PerformanceUtils=N7,u.Point=m,u.Pos3dArray=class extends hn{},u.PosArray=zn,u.Properties=Hs,u.Protobuf=w0,u.QuadTriangleArray=class extends me{},u.RGBAImage=K1,u.RasterBoundsArray=class extends En{},u.RequestPerformance=class{constructor(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let p=performance.getEntriesByName(this._marks.measure);return 0===p.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),p=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),p}},u.SegmentVector=fr,u.SymbolBucket=yu,u.Transitionable=ol,u.TriangleIndexArray=lr,u.Uniform1f=p1,u.Uniform1i=class extends Js{constructor(p,l){super(p,l),this.current=0}set(p){this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))}},u.Uniform2f=class extends Js{constructor(p,l){super(p,l),this.current=[0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]||(this.current=p,this.gl.uniform2f(this.location,p[0],p[1]))}},u.Uniform3f=class extends Js{constructor(p,l){super(p,l),this.current=[0,0,0]}set(p){p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]||(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2]))}},u.Uniform4f=Z1,u.UniformColor=Cl,u.UniformMatrix4f=class extends Js{constructor(p,l){super(p,l),this.current=w1}set(p){if(p[12]!==this.current[12]||p[0]!==this.current[0])return this.current=p,void this.gl.uniformMatrix4fv(this.location,!1,p);for(let l=1;l<16;l++)if(p[l]!==this.current[l]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}}},u.UnwrappedTileID=Af,u.ValidationError=gt,u.ZoomHistory=Ks,u.addDynamicAttributes=S6,u.arrayBufferToImage=function(p,l){const b=new Image;b.onload=()=>{l(null,b),URL.revokeObjectURL(b.src),b.onload=null,window.requestAnimationFrame(()=>{b.src=Ce})},b.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const L=new Blob([new Uint8Array(p)],{type:"image/png"});b.src=p.byteLength?URL.createObjectURL(L):Ce},u.arrayBufferToImageBitmap=function(p,l){const b=new Blob([new Uint8Array(p)],{type:"image/png"});createImageBitmap(b).then(L=>{l(null,L)}).catch(L=>{l(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},u.asyncAll=function(p,l,b){if(!p.length)return b(null,[]);let L=p.length;const Y=new Array(p.length);let te=null;p.forEach((re,ve)=>{l(re,(ze,ke)=>{ze&&(te=ze),Y[ve]=ke,0==--L&&b(te,Y)})})},u.bezier=M,u.browser=fe,u.clamp=R,u.clipLine=A8,u.clone=function(p){var l=new Yl(16);return l[0]=p[0],l[1]=p[1],l[2]=p[2],l[3]=p[3],l[4]=p[4],l[5]=p[5],l[6]=p[6],l[7]=p[7],l[8]=p[8],l[9]=p[9],l[10]=p[10],l[11]=p[11],l[12]=p[12],l[13]=p[13],l[14]=p[14],l[15]=p[15],l},u.clone$1=P,u.collisionCircleLayout=Bb,u.config=ee,u.copy=function(p,l){return p[0]=l[0],p[1]=l[1],p[2]=l[2],p[3]=l[3],p[4]=l[4],p[5]=l[5],p[6]=l[6],p[7]=l[7],p[8]=l[8],p[9]=l[9],p[10]=l[10],p[11]=l[11],p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15],p},u.create=function(){var p=new Yl(16);return Yl!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0),p[0]=1,p[5]=1,p[10]=1,p[15]=1,p},u.createExpression=hr,u.createFilter=is,u.createLayout=ct,u.createStyleLayer=function(p){if("custom"===p.type)return new x8(p);switch(p.type){case"background":return new wf(p);case"circle":return new Q3(p);case"fill":return new qh(p);case"fill-extrusion":return new g7(p);case"heatmap":return new l4(p);case"hillshade":return new c7(p);case"line":return new af(p);case"raster":return new n2(p);case"symbol":return new P6(p)}},u.deepEqual=function p(l,b){if(Array.isArray(l)){if(!Array.isArray(b)||l.length!==b.length)return!1;for(let L=0;L<l.length;L++)if(!p(l[L],b[L]))return!1;return!0}if("object"==typeof l&&null!==l&&null!==b){if("object"!=typeof b||Object.keys(l).length!==Object.keys(b).length)return!1;for(const L in l)if(!p(l[L],b[L]))return!1;return!0}return l===b},u.defaultEasing=D,u.derefLayers=function(p){p=p.slice();const l=Object.create(null);for(let b=0;b<p.length;b++)l[p[b].id]=p[b];for(let b=0;b<p.length;b++)"ref"in p[b]&&(p[b]=ht(p[b],l[p[b].ref]));return p},u.diffStyles=function(p,l){if(!p)return[{command:tt.setStyle,args:[l]}];let b=[];try{if(!Re(p.version,l.version))return[{command:tt.setStyle,args:[l]}];Re(p.center,l.center)||b.push({command:tt.setCenter,args:[l.center]}),Re(p.zoom,l.zoom)||b.push({command:tt.setZoom,args:[l.zoom]}),Re(p.bearing,l.bearing)||b.push({command:tt.setBearing,args:[l.bearing]}),Re(p.pitch,l.pitch)||b.push({command:tt.setPitch,args:[l.pitch]}),Re(p.sprite,l.sprite)||b.push({command:tt.setSprite,args:[l.sprite]}),Re(p.glyphs,l.glyphs)||b.push({command:tt.setGlyphs,args:[l.glyphs]}),Re(p.transition,l.transition)||b.push({command:tt.setTransition,args:[l.transition]}),Re(p.light,l.light)||b.push({command:tt.setLight,args:[l.light]});const L={},Y=[];!function(re,ve,ze,ke){let Ze;for(Ze in ve=ve||{},re=re||{})Object.prototype.hasOwnProperty.call(re,Ze)&&(Object.prototype.hasOwnProperty.call(ve,Ze)||qe(Ze,ze,ke));for(Ze in ve)Object.prototype.hasOwnProperty.call(ve,Ze)&&(Object.prototype.hasOwnProperty.call(re,Ze)?Re(re[Ze],ve[Ze])||("geojson"===re[Ze].type&&"geojson"===ve[Ze].type&&Te(re,ve,Ze)?ze.push({command:tt.setGeoJSONSourceData,args:[Ze,ve[Ze].data]}):Oe(Ze,ve,ze,ke)):it(Ze,ve,ze))}(p.sources,l.sources,Y,L);const te=[];p.layers&&p.layers.forEach(re=>{L[re.source]?b.push({command:tt.removeLayer,args:[re.id]}):te.push(re)}),b=b.concat(Y),function(re,ve,ze){ve=ve||[];const ke=(re=re||[]).map(rt),Ze=ve.map(rt),et=re.reduce(xt,{}),st=ve.reduce(xt,{}),bt=ke.slice(),Ct=Object.create(null);let Rt,qt,Jt,yn,sn,Mn,Ln;for(Rt=0,qt=0;Rt<ke.length;Rt++)Jt=ke[Rt],Object.prototype.hasOwnProperty.call(st,Jt)?qt++:(ze.push({command:tt.removeLayer,args:[Jt]}),bt.splice(bt.indexOf(Jt,qt),1));for(Rt=0,qt=0;Rt<Ze.length;Rt++)Jt=Ze[Ze.length-1-Rt],bt[bt.length-1-Rt]!==Jt&&(Object.prototype.hasOwnProperty.call(et,Jt)?(ze.push({command:tt.removeLayer,args:[Jt]}),bt.splice(bt.lastIndexOf(Jt,bt.length-qt),1)):qt++,Mn=bt[bt.length-Rt],ze.push({command:tt.addLayer,args:[st[Jt],Mn]}),bt.splice(bt.length-Rt,0,Jt),Ct[Jt]=!0);for(Rt=0;Rt<Ze.length;Rt++)if(Jt=Ze[Rt],yn=et[Jt],sn=st[Jt],!Ct[Jt]&&!Re(yn,sn))if(Re(yn.source,sn.source)&&Re(yn["source-layer"],sn["source-layer"])&&Re(yn.type,sn.type)){for(Ln in Ne(yn.layout,sn.layout,ze,Jt,null,tt.setLayoutProperty),Ne(yn.paint,sn.paint,ze,Jt,null,tt.setPaintProperty),Re(yn.filter,sn.filter)||ze.push({command:tt.setFilter,args:[Jt,sn.filter]}),Re(yn.minzoom,sn.minzoom)&&Re(yn.maxzoom,sn.maxzoom)||ze.push({command:tt.setLayerZoomRange,args:[Jt,sn.minzoom,sn.maxzoom]}),yn)Object.prototype.hasOwnProperty.call(yn,Ln)&&"layout"!==Ln&&"paint"!==Ln&&"filter"!==Ln&&"metadata"!==Ln&&"minzoom"!==Ln&&"maxzoom"!==Ln&&(0===Ln.indexOf("paint.")?Ne(yn[Ln],sn[Ln],ze,Jt,Ln.slice(6),tt.setPaintProperty):Re(yn[Ln],sn[Ln])||ze.push({command:tt.setLayerProperty,args:[Jt,Ln,sn[Ln]]}));for(Ln in sn)Object.prototype.hasOwnProperty.call(sn,Ln)&&!Object.prototype.hasOwnProperty.call(yn,Ln)&&"layout"!==Ln&&"paint"!==Ln&&"filter"!==Ln&&"metadata"!==Ln&&"minzoom"!==Ln&&"maxzoom"!==Ln&&(0===Ln.indexOf("paint.")?Ne(yn[Ln],sn[Ln],ze,Jt,Ln.slice(6),tt.setPaintProperty):Re(yn[Ln],sn[Ln])||ze.push({command:tt.setLayerProperty,args:[Jt,Ln,sn[Ln]]}))}else ze.push({command:tt.removeLayer,args:[Jt]}),Mn=bt[bt.lastIndexOf(Jt)+1],ze.push({command:tt.addLayer,args:[sn,Mn]})}(te,l.layers,b)}catch(L){console.warn("Unable to compute style diff:",L),b=[{command:tt.setStyle,args:[l]}]}return b},u.dot=function(p,l){return p[0]*l[0]+p[1]*l[1]+p[2]*l[2]+p[3]*l[3]},u.earthRadius=w4,u.emitValidationErrors=ma,u.emptyStyle=function(){const p={},l=Pe.$version;for(const b in Pe.$root){const L=Pe.$root[b];if(L.required){let Y=null;Y="version"===b?l:"array"===L.type?[]:{},null!=Y&&(p[b]=Y)}}return p},u.equals=function(p,l){var b=p[0],L=p[1],Y=p[2],te=p[3],re=p[4],ve=p[5],ze=p[6],ke=p[7],Ze=p[8],et=p[9],st=p[10],bt=p[11],Ct=p[12],Rt=p[13],qt=p[14],Jt=p[15],yn=l[0],sn=l[1],Mn=l[2],Ln=l[3],Qn=l[4],pi=l[5],Oi=l[6],Ai=l[7],xi=l[8],mi=l[9],Bi=l[10],yi=l[11],ai=l[12],pr=l[13],tr=l[14],Jr=l[15];return Math.abs(b-yn)<=Ic*Math.max(1,Math.abs(b),Math.abs(yn))&&Math.abs(L-sn)<=Ic*Math.max(1,Math.abs(L),Math.abs(sn))&&Math.abs(Y-Mn)<=Ic*Math.max(1,Math.abs(Y),Math.abs(Mn))&&Math.abs(te-Ln)<=Ic*Math.max(1,Math.abs(te),Math.abs(Ln))&&Math.abs(re-Qn)<=Ic*Math.max(1,Math.abs(re),Math.abs(Qn))&&Math.abs(ve-pi)<=Ic*Math.max(1,Math.abs(ve),Math.abs(pi))&&Math.abs(ze-Oi)<=Ic*Math.max(1,Math.abs(ze),Math.abs(Oi))&&Math.abs(ke-Ai)<=Ic*Math.max(1,Math.abs(ke),Math.abs(Ai))&&Math.abs(Ze-xi)<=Ic*Math.max(1,Math.abs(Ze),Math.abs(xi))&&Math.abs(et-mi)<=Ic*Math.max(1,Math.abs(et),Math.abs(mi))&&Math.abs(st-Bi)<=Ic*Math.max(1,Math.abs(st),Math.abs(Bi))&&Math.abs(bt-yi)<=Ic*Math.max(1,Math.abs(bt),Math.abs(yi))&&Math.abs(Ct-ai)<=Ic*Math.max(1,Math.abs(Ct),Math.abs(ai))&&Math.abs(Rt-pr)<=Ic*Math.max(1,Math.abs(Rt),Math.abs(pr))&&Math.abs(qt-tr)<=Ic*Math.max(1,Math.abs(qt),Math.abs(tr))&&Math.abs(Jt-Jr)<=Ic*Math.max(1,Math.abs(Jt),Math.abs(Jr))},u.evaluateSizeForFeature=function(p,{uSize:l,uSizeT:b},{lowerSize:L,upperSize:Y}){return"source"===p.kind?L/g2:"composite"===p.kind?xs.number(L/g2,Y/g2,b):l},u.evaluateSizeForZoom=function(p,l){let b=0,L=0;if("constant"===p.kind)L=p.layoutSize;else if("source"!==p.kind){const{interpolationType:Y,minZoom:te,maxZoom:re}=p,ve=Y?R(Ba.interpolationFactor(Y,l,te,re),0,1):0;"camera"===p.kind?L=xs.number(p.minSize,p.maxSize,ve):b=ve}return{uSizeT:b,uSize:L}},u.evented=rl,u.extend=B,u.filterObject=j,u.findLineIntersection=function(p,l,b,L){const Y=l.y-p.y,te=l.x-p.x,re=L.y-b.y,ve=L.x-b.x,ze=re*te-ve*Y;if(0===ze)return null;const ke=(ve*(p.y-b.y)-re*(p.x-b.x))/ze;return new m(p.x+ke*te,p.y+ke*Y)},u.fromScaling=function(p,l){return p[0]=l[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=l[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=l[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p},u.getAnchorAlignment=vf,u.getAnchorJustification=L8,u.getArrayBuffer=Me,u.getDefaultExportFromCjs=h,u.getJSON=function(p,l){return ye(B(p,{type:"json"}),l)},u.getOverlapMode=M6,u.getProtocolAction=ce,u.getRTLTextPluginStatus=zc,u.getReferrer=pe,u.getVideo=function(p,l){const b=window.document.createElement("video");b.muted=!0,b.onloadstart=function(){l(null,b)};for(let L=0;L<p.length;L++){const Y=window.document.createElement("source");_e(p[L])||(b.crossOrigin="Anonymous"),Y.src=p[L],b.appendChild(Y)}return{cancel:()=>{}}},u.groupByLayout=function(p,l){const b={};for(let Y=0;Y<p.length;Y++){const te=l&&l[p[Y].id]||L1(p[Y]);l&&(l[p[Y].id]=te);let re=b[te];re||(re=b[te]=[]),re.push(p[Y])}const L=[];for(const Y in b)L.push(b[Y]);return L},u.identity=a4,u.interpolate=xs,u.invert=function(p,l){var b=l[0],L=l[1],Y=l[2],te=l[3],re=l[4],ve=l[5],ze=l[6],ke=l[7],Ze=l[8],et=l[9],st=l[10],bt=l[11],Ct=l[12],Rt=l[13],qt=l[14],Jt=l[15],yn=b*ve-L*re,sn=b*ze-Y*re,Mn=b*ke-te*re,Ln=L*ze-Y*ve,Qn=L*ke-te*ve,pi=Y*ke-te*ze,Oi=Ze*Rt-et*Ct,Ai=Ze*qt-st*Ct,xi=Ze*Jt-bt*Ct,mi=et*qt-st*Rt,Bi=et*Jt-bt*Rt,yi=st*Jt-bt*qt,ai=yn*yi-sn*Bi+Mn*mi+Ln*xi-Qn*Ai+pi*Oi;return ai?(p[0]=(ve*yi-ze*Bi+ke*mi)*(ai=1/ai),p[1]=(Y*Bi-L*yi-te*mi)*ai,p[2]=(Rt*pi-qt*Qn+Jt*Ln)*ai,p[3]=(st*Qn-et*pi-bt*Ln)*ai,p[4]=(ze*xi-re*yi-ke*Ai)*ai,p[5]=(b*yi-Y*xi+te*Ai)*ai,p[6]=(qt*Mn-Ct*pi-Jt*sn)*ai,p[7]=(Ze*pi-st*Mn+bt*sn)*ai,p[8]=(re*Bi-ve*xi+ke*Oi)*ai,p[9]=(L*xi-b*Bi-te*Oi)*ai,p[10]=(Ct*Qn-Rt*Mn+Jt*yn)*ai,p[11]=(et*Mn-Ze*Qn-bt*yn)*ai,p[12]=(ve*Ai-re*mi-ze*Oi)*ai,p[13]=(b*mi-L*Ai+Y*Oi)*ai,p[14]=(Rt*sn-Ct*Ln-qt*yn)*ai,p[15]=(Ze*Ln-et*sn+st*yn)*ai,p):null},u.isImageBitmap=ne,u.isSafari=se,u.isWorker=ie,u.keysDifference=function(p,l){const b=[];for(const L in p)L in l||b.push(L);return b},u.lazyLoadRTLTextPlugin=function(){Ao.isLoading()||Ao.isLoaded()||"deferred"!==zc()||Y1()},u.makeRequest=ye,u.mapObject=F,u.mercatorXfromLng=C8,u.mercatorYfromLat=Sf,u.mercatorZfromAltitude=M8,u.mul=s7,u.mul$1=function(p,l,b){return p[0]=l[0]*b[0],p[1]=l[1]*b[1],p[2]=l[2]*b[2],p[3]=l[3]*b[3],p},u.multiply=K3,u.nextPowerOfTwo=function(p){return p<=1?1:Math.pow(2,Math.ceil(Math.log(p)/Math.LN2))},u.operations=tt,u.ortho=function(p,l,b,L,Y,te,re){var ve=1/(l-b),ze=1/(L-Y),ke=1/(te-re);return p[0]=-2*ve,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*ze,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*ke,p[11]=0,p[12]=(l+b)*ve,p[13]=(Y+L)*ze,p[14]=(re+te)*ke,p[15]=1,p},u.parseCacheControl=function(p){const l={};if(p.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(b,L,Y,te)=>{const re=Y||te;return l[L]=!re||re.toLowerCase(),""}),l["max-age"]){const b=parseInt(l["max-age"],10);isNaN(b)?delete l["max-age"]:l["max-age"]=b}return l},u.parseGlyphPbf=function(p){return new w0(p).readFields(jb,[])},u.pbf=b7,u.performSymbolLayout=function(p){p.bucket.createArrays(),p.bucket.tilePixelRatio=Ps/(512*p.bucket.overscaling),p.bucket.compareText={},p.bucket.iconsNeedLinear=!1;const l=p.bucket.layers[0],b=l.layout,L=l._unevaluatedLayout._values,Y={layoutIconSize:L["icon-size"].possiblyEvaluate(new Wr(p.bucket.zoom+1),p.canonical),layoutTextSize:L["text-size"].possiblyEvaluate(new Wr(p.bucket.zoom+1),p.canonical),textMaxSize:L["text-size"].possiblyEvaluate(new Wr(18))};if("composite"===p.bucket.textSizeData.kind){const{minZoom:ke,maxZoom:Ze}=p.bucket.textSizeData;Y.compositeTextSizes=[L["text-size"].possiblyEvaluate(new Wr(ke),p.canonical),L["text-size"].possiblyEvaluate(new Wr(Ze),p.canonical)]}if("composite"===p.bucket.iconSizeData.kind){const{minZoom:ke,maxZoom:Ze}=p.bucket.iconSizeData;Y.compositeIconSizes=[L["icon-size"].possiblyEvaluate(new Wr(ke),p.canonical),L["icon-size"].possiblyEvaluate(new Wr(Ze),p.canonical)]}const te=b.get("text-line-height")*Ms,re="viewport"!==b.get("text-rotation-alignment")&&"point"!==b.get("symbol-placement"),ve=b.get("text-keep-upright"),ze=b.get("text-size");for(const ke of p.bucket.features){const Ze=b.get("text-font").evaluate(ke,{},p.canonical).join(","),et=ze.evaluate(ke,{},p.canonical),st=Y.layoutTextSize.evaluate(ke,{},p.canonical),bt=Y.layoutIconSize.evaluate(ke,{},p.canonical),Ct={horizontal:{},vertical:void 0},Rt=ke.text;let qt,Jt=[0,0];if(Rt){const Mn=Rt.toString(),Ln=b.get("text-letter-spacing").evaluate(ke,{},p.canonical)*Ms,Qn=_1(Mn)?Ln:0,pi=b.get("text-anchor").evaluate(ke,{},p.canonical),Oi=E4(l,ke,p.canonical);if(!Oi){const yi=b.get("text-radial-offset").evaluate(ke,{},p.canonical);Jt=yi?k7(pi,[yi*Ms,T8]):b.get("text-offset").evaluate(ke,{},p.canonical).map(ai=>ai*Ms)}let Ai=re?"center":b.get("text-justify").evaluate(ke,{},p.canonical);const xi=b.get("symbol-placement"),mi="point"===xi?b.get("text-max-width").evaluate(ke,{},p.canonical)*Ms:0,Bi=()=>{p.bucket.allowVerticalPlacement&&So(Mn)&&(Ct.vertical=_4(Rt,p.glyphMap,p.glyphPositions,p.imagePositions,Ze,mi,te,pi,"left",Qn,Jt,u.WritingMode.vertical,!0,xi,st,et))};if(!re&&Oi){const yi=new Set;if("auto"===Ai)for(let pr=0;pr<Oi.values.length;pr+=2)yi.add(L8(Oi.values[pr]));else yi.add(Ai);let ai=!1;for(const pr of yi)if(!Ct.horizontal[pr])if(ai)Ct.horizontal[pr]=Ct.horizontal[0];else{const tr=_4(Rt,p.glyphMap,p.glyphPositions,p.imagePositions,Ze,mi,te,"center",pr,Qn,Jt,u.WritingMode.horizontal,!1,xi,st,et);tr&&(Ct.horizontal[pr]=tr,ai=1===tr.positionedLines.length)}Bi()}else{"auto"===Ai&&(Ai=L8(pi));const yi=_4(Rt,p.glyphMap,p.glyphPositions,p.imagePositions,Ze,mi,te,pi,Ai,Qn,Jt,u.WritingMode.horizontal,!1,xi,st,et);yi&&(Ct.horizontal[Ai]=yi),Bi(),So(Mn)&&re&&ve&&(Ct.vertical=_4(Rt,p.glyphMap,p.glyphPositions,p.imagePositions,Ze,mi,te,pi,Ai,Qn,Jt,u.WritingMode.vertical,!1,xi,st,et))}}let yn=!1;if(ke.icon&&ke.icon.name){const Mn=p.imageMap[ke.icon.name];Mn&&(qt=Wb(p.imagePositions[ke.icon.name],b.get("icon-offset").evaluate(ke,{},p.canonical),b.get("icon-anchor").evaluate(ke,{},p.canonical)),yn=!!Mn.sdf,void 0===p.bucket.sdfIcons?p.bucket.sdfIcons=yn:p.bucket.sdfIcons!==yn&&$("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Mn.pixelRatio!==p.bucket.pixelRatio||0!==b.get("icon-rotate").constantOr(1))&&(p.bucket.iconsNeedLinear=!0))}const sn=O8(Ct.horizontal)||Ct.vertical;p.bucket.iconsInText=!!sn&&sn.iconsInText,(sn||qt)&&kf(p.bucket,ke,Ct,qt,p.imageMap,Y,st,bt,Jt,yn,p.canonical)}p.showCollisionBoxes&&p.bucket.generateCollisionDebugBuffers()},u.perspective=function(p,l,b,L,Y){var te,re=1/Math.tan(l/2);return p[0]=re/b,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=re,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=-1,p[12]=0,p[13]=0,p[15]=0,null!=Y&&Y!==1/0?(p[10]=(Y+L)*(te=1/(L-Y)),p[14]=2*Y*L*te):(p[10]=-1,p[14]=-2*L),p},u.pick=function(p,l){const b={};for(let L=0;L<l.length;L++){const Y=l[L];Y in p&&(b[Y]=p[Y])}return b},u.plugin=Ao,u.pointGeometry=g,u.polygonIntersectsPolygon=uc,u.potpack=pf,u.register=ui,u.registerForPluginStateChange=function(p){return p({pluginStatus:Na,pluginURL:W1}),rl.on("pluginStateChange",p),p},u.renderColorRamp=js,u.rotateX=function(p,l,b){var L=Math.sin(b),Y=Math.cos(b),te=l[4],re=l[5],ve=l[6],ze=l[7],ke=l[8],Ze=l[9],et=l[10],st=l[11];return l!==p&&(p[0]=l[0],p[1]=l[1],p[2]=l[2],p[3]=l[3],p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15]),p[4]=te*Y+ke*L,p[5]=re*Y+Ze*L,p[6]=ve*Y+et*L,p[7]=ze*Y+st*L,p[8]=ke*Y-te*L,p[9]=Ze*Y-re*L,p[10]=et*Y-ve*L,p[11]=st*Y-ze*L,p},u.rotateZ=function(p,l,b){var L=Math.sin(b),Y=Math.cos(b),te=l[0],re=l[1],ve=l[2],ze=l[3],ke=l[4],Ze=l[5],et=l[6],st=l[7];return l!==p&&(p[8]=l[8],p[9]=l[9],p[10]=l[10],p[11]=l[11],p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15]),p[0]=te*Y+ke*L,p[1]=re*Y+Ze*L,p[2]=ve*Y+et*L,p[3]=ze*Y+st*L,p[4]=ke*Y-te*L,p[5]=Ze*Y-re*L,p[6]=et*Y-ve*L,p[7]=st*Y-ze*L,p},u.sameOrigin=_e,u.scale=function(p,l,b){var L=b[0],Y=b[1],te=b[2];return p[0]=l[0]*L,p[1]=l[1]*L,p[2]=l[2]*L,p[3]=l[3]*L,p[4]=l[4]*Y,p[5]=l[5]*Y,p[6]=l[6]*Y,p[7]=l[7]*Y,p[8]=l[8]*te,p[9]=l[9]*te,p[10]=l[10]*te,p[11]=l[11]*te,p[12]=l[12],p[13]=l[13],p[14]=l[14],p[15]=l[15],p},u.setRTLTextPlugin=function(p,l,b=!1){if(Na===Ya||Na===Va||Na===Xa)throw new Error("setRTLTextPlugin cannot be called multiple times.");W1=fe.resolveURL(p),Na=Ya,Eo=l,b1(),b||Y1()},u.sphericalToCartesian=function([p,l,b]){return l+=90,l*=Math.PI/180,b*=Math.PI/180,{x:p*Math.cos(l)*Math.sin(b),y:p*Math.sin(l)*Math.sin(b),z:p*Math.cos(b)}},u.toEvaluationFeature=no,u.transformMat4=s4,u.translate=function(p,l,b){var L,Y,te,re,ve,ze,ke,Ze,et,st,bt,Ct,Rt=b[0],qt=b[1],Jt=b[2];return l===p?(p[12]=l[0]*Rt+l[4]*qt+l[8]*Jt+l[12],p[13]=l[1]*Rt+l[5]*qt+l[9]*Jt+l[13],p[14]=l[2]*Rt+l[6]*qt+l[10]*Jt+l[14],p[15]=l[3]*Rt+l[7]*qt+l[11]*Jt+l[15]):(Y=l[1],te=l[2],re=l[3],ve=l[4],ze=l[5],ke=l[6],Ze=l[7],et=l[8],st=l[9],bt=l[10],Ct=l[11],p[0]=L=l[0],p[1]=Y,p[2]=te,p[3]=re,p[4]=ve,p[5]=ze,p[6]=ke,p[7]=Ze,p[8]=et,p[9]=st,p[10]=bt,p[11]=Ct,p[12]=L*Rt+ve*qt+et*Jt+l[12],p[13]=Y*Rt+ze*qt+st*Jt+l[13],p[14]=te*Rt+ke*qt+bt*Jt+l[14],p[15]=re*Rt+Ze*qt+Ct*Jt+l[15]),p},u.triggerPluginCompletionEvent=ws,u.unicodeBlockLookup=gi,u.uniqueId=function(){return U++},u.v8Spec=Pe,u.validateCustomStyleLayer=function(p){const l=[],b=p.id;return void 0===b&&l.push({message:`layers.${b}: missing required property "id"`}),void 0===p.render&&l.push({message:`layers.${b}: missing required method "render"`}),p.renderingMode&&"2d"!==p.renderingMode&&"3d"!==p.renderingMode&&l.push({message:`layers.${b}: property "renderingMode" must be either "2d" or "3d"`}),l},u.validateLight=L2,u.validateStyle=Gr,u.vectorTile=t2,u.warnOnce=$,u.wrap=V}),G(0,function(u){class h{constructor(Je){this.keyCache={},Je&&this.replace(Je)}replace(Je){this._layerConfigs={},this._layers={},this.update(Je,[])}update(Je,nt){for(const Qe of Je){this._layerConfigs[Qe.id]=Qe;const ot=this._layers[Qe.id]=u.createStyleLayer(Qe);ot._featureFilter=u.createFilter(ot.filter),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id]}for(const Qe of nt)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const Se=u.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Qe of Se){const ot=Qe.map(Bt=>this._layers[Bt.id]),dt=ot[0];if("none"===dt.visibility)continue;const Pt=dt.source||"";let At=this.familiesBySource[Pt];At||(At=this.familiesBySource[Pt]={});const Wt=dt.sourceLayer||"_geojsonTileLayer";let Yt=At[Wt];Yt||(Yt=At[Wt]=[]),Yt.push(ot)}}}class g{constructor(Je){const nt={},Se=[];for(const Pt in Je){const At=Je[Pt],Wt=nt[Pt]={};for(const Yt in At){const Bt=At[+Yt];if(!Bt||0===Bt.bitmap.width||0===Bt.bitmap.height)continue;const $t={x:0,y:0,w:Bt.bitmap.width+2,h:Bt.bitmap.height+2};Se.push($t),Wt[Yt]={rect:$t,metrics:Bt.metrics}}}const{w:Qe,h:ot}=u.potpack(Se),dt=new u.AlphaImage({width:Qe||1,height:ot||1});for(const Pt in Je){const At=Je[Pt];for(const Wt in At){const Yt=At[+Wt];if(!Yt||0===Yt.bitmap.width||0===Yt.bitmap.height)continue;const Bt=nt[Pt][Wt].rect;u.AlphaImage.copy(Yt.bitmap,dt,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},Yt.bitmap)}}this.image=dt,this.positions=nt}}u.register("GlyphAtlas",g);class v{constructor(Je){this.tileID=new u.OverscaledTileID(Je.tileID.overscaledZ,Je.tileID.wrap,Je.tileID.canonical.z,Je.tileID.canonical.x,Je.tileID.canonical.y),this.uid=Je.uid,this.zoom=Je.zoom,this.pixelRatio=Je.pixelRatio,this.tileSize=Je.tileSize,this.source=Je.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Je.showCollisionBoxes,this.collectResourceTiming=!!Je.collectResourceTiming,this.returnDependencies=!!Je.returnDependencies,this.promoteId=Je.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Je,nt,Se,Qe,ot){this.status="parsing",this.data=Je,this.collisionBoxArray=new u.CollisionBoxArray;const dt=new u.DictionaryCoder(Object.keys(Je.layers).sort()),Pt=new u.FeatureIndex(this.tileID,this.promoteId);Pt.bucketLayerIDs=[];const At={},Wt={featureIndex:Pt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Se},Yt=nt.familiesBySource[this.source];for(const si in Yt){const xr=Je.layers[si];if(!xr)continue;1===xr.version&&u.warnOnce(`Vector tile source "${this.source}" layer "${si}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Zr=dt.encode(si),Li=[];for(let or=0;or<xr.length;or++){const Ri=xr.feature(or),to=Pt.getId(Ri,si);Li.push({feature:Ri,id:to,index:or,sourceLayerIndex:Zr})}for(const or of Yt[si]){const Ri=or[0];Ri.source!==this.source&&u.warnOnce(`layer.source = ${Ri.source} does not equal this.source = ${this.source}`),Ri.minzoom&&this.zoom<Math.floor(Ri.minzoom)||Ri.maxzoom&&this.zoom>=Ri.maxzoom||"none"!==Ri.visibility&&(m(or,this.zoom,Se),(At[Ri.id]=Ri.createBucket({index:Pt.bucketLayerIDs.length,layers:or,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Zr,sourceID:this.source})).populate(Li,Wt,this.tileID.canonical),Pt.bucketLayerIDs.push(or.map(to=>to.id)))}}let Bt,$t,vn,Cn;const xn=u.mapObject(Wt.glyphDependencies,si=>Object.keys(si).map(Number));this.inFlightDependencies.forEach(si=>si?.cancel()),this.inFlightDependencies=[];const jn=++this.dependencySentinel;Object.keys(xn).length?this.inFlightDependencies.push(Qe.send("getGlyphs",{uid:this.uid,stacks:xn,source:this.source,tileID:this.tileID,type:"glyphs"},(si,xr)=>{jn===this.dependencySentinel&&(Bt||(Bt=si,$t=xr,Ke.call(this)))})):$t={};const jt=Object.keys(Wt.iconDependencies);jt.length?this.inFlightDependencies.push(Qe.send("getImages",{icons:jt,source:this.source,tileID:this.tileID,type:"icons"},(si,xr)=>{jn===this.dependencySentinel&&(Bt||(Bt=si,vn=xr,Ke.call(this)))})):vn={};const Dn=Object.keys(Wt.patternDependencies);function Ke(){if(Bt)return ot(Bt);if($t&&vn&&Cn){const si=new g($t),xr=new u.ImageAtlas(vn,Cn);for(const Zr in At){const Li=At[Zr];Li instanceof u.SymbolBucket?(m(Li.layers,this.zoom,Se),u.performSymbolLayout({bucket:Li,glyphMap:$t,glyphPositions:si.positions,imageMap:vn,imagePositions:xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Li.hasPattern&&(Li instanceof u.LineBucket||Li instanceof u.FillBucket||Li instanceof u.FillExtrusionBucket)&&(m(Li.layers,this.zoom,Se),Li.addFeatures(Wt,this.tileID.canonical,xr.patternPositions))}this.status="done",ot(null,{buckets:Object.values(At).filter(Zr=>!Zr.isEmpty()),featureIndex:Pt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:si.image,imageAtlas:xr,glyphMap:this.returnDependencies?$t:null,iconMap:this.returnDependencies?vn:null,glyphPositions:this.returnDependencies?si.positions:null})}}Dn.length?this.inFlightDependencies.push(Qe.send("getImages",{icons:Dn,source:this.source,tileID:this.tileID,type:"patterns"},(si,xr)=>{jn===this.dependencySentinel&&(Bt||(Bt=si,Cn=xr,Ke.call(this)))})):Cn={},Ke.call(this)}}function m(zt,Je,nt){const Se=new u.EvaluationParameters(Je);for(const Qe of zt)Qe.recalculate(Se,nt)}function f(zt,Je){const nt=u.getArrayBuffer(zt.request,(Se,Qe,ot,dt)=>{Se?Je(Se):Qe&&Je(null,{vectorTile:new u.vectorTile.VectorTile(new u.Protobuf(Qe)),rawData:Qe,cacheControl:ot,expires:dt})});return()=>{nt.cancel(),Je()}}class _{constructor(Je,nt,Se,Qe){this.actor=Je,this.layerIndex=nt,this.availableImages=Se,this.loadVectorData=Qe||f,this.fetching={},this.loading={},this.loaded={}}loadTile(Je,nt){const Se=Je.uid;this.loading||(this.loading={});const Qe=!!(Je&&Je.request&&Je.request.collectResourceTiming)&&new u.RequestPerformance(Je.request),ot=this.loading[Se]=new v(Je);ot.abort=this.loadVectorData(Je,(dt,Pt)=>{if(delete this.loading[Se],dt||!Pt)return ot.status="done",this.loaded[Se]=ot,nt(dt);const At=Pt.rawData,Wt={};Pt.expires&&(Wt.expires=Pt.expires),Pt.cacheControl&&(Wt.cacheControl=Pt.cacheControl);const Yt={};if(Qe){const Bt=Qe.finish();Bt&&(Yt.resourceTiming=JSON.parse(JSON.stringify(Bt)))}ot.vectorTile=Pt.vectorTile,ot.parse(Pt.vectorTile,this.layerIndex,this.availableImages,this.actor,(Bt,$t)=>{if(delete this.fetching[Se],Bt||!$t)return nt(Bt);nt(null,u.extend({rawTileData:At.slice(0)},$t,Wt,Yt))}),this.loaded=this.loaded||{},this.loaded[Se]=ot,this.fetching[Se]={rawTileData:At,cacheControl:Wt,resourceTiming:Yt}})}reloadTile(Je,nt){const Se=this.loaded,Qe=Je.uid;if(Se&&Se[Qe]){const ot=Se[Qe];ot.showCollisionBoxes=Je.showCollisionBoxes,"parsing"===ot.status?ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,(dt,Pt)=>{if(dt||!Pt)return nt(dt,Pt);let At;if(this.fetching[Qe]){const{rawTileData:Wt,cacheControl:Yt,resourceTiming:Bt}=this.fetching[Qe];delete this.fetching[Qe],At=u.extend({rawTileData:Wt.slice(0)},Pt,Yt,Bt)}else At=Pt;nt(null,At)}):"done"===ot.status&&(ot.vectorTile?ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,nt):nt())}}abortTile(Je,nt){const Se=this.loading,Qe=Je.uid;Se&&Se[Qe]&&Se[Qe].abort&&(Se[Qe].abort(),delete Se[Qe]),nt()}removeTile(Je,nt){const Se=this.loaded,Qe=Je.uid;Se&&Se[Qe]&&delete Se[Qe],nt()}}class S{constructor(){this.loaded={}}loadTile(Je,nt){const{uid:Se,encoding:Qe,rawImageData:ot}=Je,dt=u.isImageBitmap(ot)?this.getImageData(ot):ot,Pt=new u.DEMData(Se,dt,Qe);this.loaded=this.loaded||{},this.loaded[Se]=Pt,nt(null,Pt)}getImageData(Je){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Je.width,Je.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Je.width,this.offscreenCanvas.height=Je.height,this.offscreenCanvasContext.drawImage(Je,0,0,Je.width,Je.height);const nt=this.offscreenCanvasContext.getImageData(-1,-1,Je.width+2,Je.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:nt.width,height:nt.height},nt.data)}removeTile(Je){const nt=this.loaded,Se=Je.uid;nt&&nt[Se]&&delete nt[Se]}}function M(zt,Je){if(0!==zt.length){D(zt[0],Je);for(var nt=1;nt<zt.length;nt++)D(zt[nt],!Je)}}function D(zt,Je){for(var nt=0,Se=0,Qe=0,ot=zt.length,dt=ot-1;Qe<ot;dt=Qe++){var Pt=(zt[Qe][0]-zt[dt][0])*(zt[dt][1]+zt[Qe][1]),At=nt+Pt;Se+=Math.abs(nt)>=Math.abs(Pt)?nt-At+Pt:Pt-At+nt,nt=At}nt+Se>=0!=!!Je&&zt.reverse()}var R=u.getDefaultExportFromCjs(function zt(Je,nt){var Se,Qe=Je&&Je.type;if("FeatureCollection"===Qe)for(Se=0;Se<Je.features.length;Se++)zt(Je.features[Se],nt);else if("GeometryCollection"===Qe)for(Se=0;Se<Je.geometries.length;Se++)zt(Je.geometries[Se],nt);else if("Feature"===Qe)zt(Je.geometry,nt);else if("Polygon"===Qe)M(Je.coordinates,nt);else if("MultiPolygon"===Qe)for(Se=0;Se<Je.coordinates.length;Se++)M(Je.coordinates[Se],nt);return Je});const V=u.vectorTile.VectorTileFeature.prototype.toGeoJSON;var B={exports:{}},U=u.pointGeometry,F=u.vectorTile.VectorTileFeature,j=P;function P(zt,Je){this.options=Je||{},this.features=zt,this.length=zt.length}function Q(zt,Je){this.id="number"==typeof zt.id?zt.id:void 0,this.type=zt.type,this.rawGeometry=1===zt.type?[zt.geometry]:zt.geometry,this.properties=zt.tags,this.extent=Je||4096}P.prototype.feature=function(zt){return new Q(this.features[zt],this.options.extent)},Q.prototype.loadGeometry=function(){var zt=this.rawGeometry;this.geometry=[];for(var Je=0;Je<zt.length;Je++){for(var nt=zt[Je],Se=[],Qe=0;Qe<nt.length;Qe++)Se.push(new U(nt[Qe][0],nt[Qe][1]));this.geometry.push(Se)}return this.geometry},Q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var zt=this.geometry,Je=1/0,nt=-1/0,Se=1/0,Qe=-1/0,ot=0;ot<zt.length;ot++)for(var dt=zt[ot],Pt=0;Pt<dt.length;Pt++){var At=dt[Pt];Je=Math.min(Je,At.x),nt=Math.max(nt,At.x),Se=Math.min(Se,At.y),Qe=Math.max(Qe,At.y)}return[Je,Se,nt,Qe]},Q.prototype.toGeoJSON=F.prototype.toGeoJSON;var $=u.pbf,oe=j;function X(zt){var Je=new $;return function(nt,Se){for(var Qe in nt.layers)Se.writeMessage(3,ie,nt.layers[Qe])}(zt,Je),Je.finish()}function ie(zt,Je){var nt;Je.writeVarintField(15,zt.version||1),Je.writeStringField(1,zt.name||""),Je.writeVarintField(5,zt.extent||4096);var Se={keys:[],values:[],keycache:{},valuecache:{}};for(nt=0;nt<zt.length;nt++)Se.feature=zt.feature(nt),Je.writeMessage(2,q,Se);var Qe=Se.keys;for(nt=0;nt<Qe.length;nt++)Je.writeStringField(3,Qe[nt]);var ot=Se.values;for(nt=0;nt<ot.length;nt++)Je.writeMessage(4,ue,ot[nt])}function q(zt,Je){var nt=zt.feature;void 0!==nt.id&&Je.writeVarintField(1,nt.id),Je.writeMessage(2,se,zt),Je.writeVarintField(3,nt.type),Je.writeMessage(4,xe,nt)}function se(zt,Je){var nt=zt.feature,Se=zt.keys,Qe=zt.values,ot=zt.keycache,dt=zt.valuecache;for(var Pt in nt.properties){var At=nt.properties[Pt],Wt=ot[Pt];if(null!==At){void 0===Wt&&(Se.push(Pt),ot[Pt]=Wt=Se.length-1),Je.writeVarint(Wt);var Yt=typeof At;"string"!==Yt&&"boolean"!==Yt&&"number"!==Yt&&(At=JSON.stringify(At));var Bt=Yt+":"+At,$t=dt[Bt];void 0===$t&&(Qe.push(At),dt[Bt]=$t=Qe.length-1),Je.writeVarint($t)}}}function ne(zt,Je){return(Je<<3)+(7&zt)}function Ce(zt){return zt<<1^zt>>31}function xe(zt,Je){for(var nt=zt.loadGeometry(),Se=zt.type,Qe=0,ot=0,dt=nt.length,Pt=0;Pt<dt;Pt++){var At=nt[Pt],Wt=1;1===Se&&(Wt=At.length),Je.writeVarint(ne(1,Wt));for(var Yt=3===Se?At.length-1:At.length,Bt=0;Bt<Yt;Bt++){1===Bt&&1!==Se&&Je.writeVarint(ne(2,Yt-1));var $t=At[Bt].x-Qe,vn=At[Bt].y-ot;Je.writeVarint(Ce($t)),Je.writeVarint(Ce(vn)),Qe+=$t,ot+=vn}3===Se&&Je.writeVarint(ne(7,1))}}function ue(zt,Je){var nt=typeof zt;"string"===nt?Je.writeStringField(1,zt):"boolean"===nt?Je.writeBooleanField(7,zt):"number"===nt&&(zt%1!=0?Je.writeDoubleField(3,zt):zt<0?Je.writeSVarintField(6,zt):Je.writeVarintField(5,zt))}B.exports=X,B.exports.fromVectorTileJs=X,B.exports.fromGeojsonVt=function(zt,Je){Je=Je||{};var nt={};for(var Se in zt)nt[Se]=new oe(zt[Se].features,Je),nt[Se].name=Se,nt[Se].version=Je.version,nt[Se].extent=Je.extent;return X({layers:nt})},B.exports.GeoJSONWrapper=oe;var fe=u.getDefaultExportFromCjs(B.exports);const ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:zt=>zt},de=Math.fround||(pe=new Float32Array(1),zt=>(pe[0]=+zt,pe[0]));var pe;const ce=3,ae=5,ye=6;class Me{constructor(Je){this.options=Object.assign(Object.create(ee),Je),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Je){const{log:nt,minZoom:Se,maxZoom:Qe}=this.options;nt&&console.time("total time");const ot=`prepare ${Je.length} points`;nt&&console.time(ot),this.points=Je;const dt=[];for(let At=0;At<Je.length;At++){const Wt=Je[At];if(!Wt.geometry)continue;const[Yt,Bt]=Wt.geometry.coordinates,$t=de(Ue(Yt)),vn=de(Ge(Bt));dt.push($t,vn,1/0,At,-1,1),this.options.reduce&&dt.push(0)}let Pt=this.trees[Qe+1]=this._createTree(dt);nt&&console.timeEnd(ot);for(let At=Qe;At>=Se;At--){const Wt=+Date.now();Pt=this.trees[At]=this._createTree(this._cluster(Pt,At)),nt&&console.log("z%d: %d clusters in %dms",At,Pt.numItems,+Date.now()-Wt)}return nt&&console.timeEnd("total time"),this}getClusters(Je,nt){let Se=((Je[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,Je[1]));let ot=180===Je[2]?180:((Je[2]+180)%360+360)%360-180;const dt=Math.max(-90,Math.min(90,Je[3]));if(Je[2]-Je[0]>=360)Se=-180,ot=180;else if(Se>ot){const Bt=this.getClusters([Se,Qe,180,dt],nt),$t=this.getClusters([-180,Qe,ot,dt],nt);return Bt.concat($t)}const Pt=this.trees[this._limitZoom(nt)],At=Pt.range(Ue(Se),Ge(dt),Ue(ot),Ge(Qe)),Wt=Pt.data,Yt=[];for(const Bt of At){const $t=this.stride*Bt;Yt.push(Wt[$t+ae]>1?_e(Wt,$t,this.clusterProps):this.points[Wt[$t+ce]])}return Yt}getChildren(Je){const nt=this._getOriginId(Je),Se=this._getOriginZoom(Je),Qe="No cluster with the specified id.",ot=this.trees[Se];if(!ot)throw new Error(Qe);const dt=ot.data;if(nt*this.stride>=dt.length)throw new Error(Qe);const Pt=this.options.radius/(this.options.extent*Math.pow(2,Se-1)),At=ot.within(dt[nt*this.stride],dt[nt*this.stride+1],Pt),Wt=[];for(const Yt of At){const Bt=Yt*this.stride;dt[Bt+4]===Je&&Wt.push(dt[Bt+ae]>1?_e(dt,Bt,this.clusterProps):this.points[dt[Bt+ce]])}if(0===Wt.length)throw new Error(Qe);return Wt}getLeaves(Je,nt,Se){const Qe=[];return this._appendLeaves(Qe,Je,nt=nt||10,Se=Se||0,0),Qe}getTile(Je,nt,Se){const Qe=this.trees[this._limitZoom(Je)],ot=Math.pow(2,Je),{extent:dt,radius:Pt}=this.options,At=Pt/dt,Wt=(Se-At)/ot,Yt=(Se+1+At)/ot,Bt={features:[]};return this._addTileFeatures(Qe.range((nt-At)/ot,Wt,(nt+1+At)/ot,Yt),Qe.data,nt,Se,ot,Bt),0===nt&&this._addTileFeatures(Qe.range(1-At/ot,Wt,1,Yt),Qe.data,ot,Se,ot,Bt),nt===ot-1&&this._addTileFeatures(Qe.range(0,Wt,At/ot,Yt),Qe.data,-1,Se,ot,Bt),Bt.features.length?Bt:null}getClusterExpansionZoom(Je){let nt=this._getOriginZoom(Je)-1;for(;nt<=this.options.maxZoom;){const Se=this.getChildren(Je);if(nt++,1!==Se.length)break;Je=Se[0].properties.cluster_id}return nt}_appendLeaves(Je,nt,Se,Qe,ot){const dt=this.getChildren(nt);for(const Pt of dt){const At=Pt.properties;if(At&&At.cluster?ot+At.point_count<=Qe?ot+=At.point_count:ot=this._appendLeaves(Je,At.cluster_id,Se,Qe,ot):ot<Qe?ot++:Je.push(Pt),Je.length===Se)break}return ot}_createTree(Je){const nt=new u.KDBush(Je.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Se=0;Se<Je.length;Se+=this.stride)nt.add(Je[Se],Je[Se+1]);return nt.finish(),nt.data=Je,nt}_addTileFeatures(Je,nt,Se,Qe,ot,dt){for(const Pt of Je){const At=Pt*this.stride,Wt=nt[At+ae]>1;let Yt,Bt,$t;if(Wt)Yt=Fe(nt,At,this.clusterProps),Bt=nt[At],$t=nt[At+1];else{const xn=this.points[nt[At+ce]];Yt=xn.properties;const[jn,jt]=xn.geometry.coordinates;Bt=Ue(jn),$t=Ge(jt)}const vn={type:1,geometry:[[Math.round(this.options.extent*(Bt*ot-Se)),Math.round(this.options.extent*($t*ot-Qe))]],tags:Yt};let Cn;Cn=Wt||this.options.generateId?nt[At+ce]:this.points[nt[At+ce]].id,void 0!==Cn&&(vn.id=Cn),dt.features.push(vn)}}_limitZoom(Je){return Math.max(this.options.minZoom,Math.min(Math.floor(+Je),this.options.maxZoom+1))}_cluster(Je,nt){const{radius:Se,extent:Qe,reduce:ot,minPoints:dt}=this.options,Pt=Se/(Qe*Math.pow(2,nt)),At=Je.data,Wt=[],Yt=this.stride;for(let Bt=0;Bt<At.length;Bt+=Yt){if(At[Bt+2]<=nt)continue;At[Bt+2]=nt;const $t=At[Bt],vn=At[Bt+1],Cn=Je.within(At[Bt],At[Bt+1],Pt),xn=At[Bt+ae];let jn=xn;for(const jt of Cn){const Dn=jt*Yt;At[Dn+2]>nt&&(jn+=At[Dn+ae])}if(jn>xn&&jn>=dt){let jt,Dn=$t*xn,Ke=vn*xn,si=-1;const xr=((Bt/Yt|0)<<5)+(nt+1)+this.points.length;for(const Zr of Cn){const Li=Zr*Yt;if(At[Li+2]<=nt)continue;At[Li+2]=nt;const or=At[Li+ae];Dn+=At[Li]*or,Ke+=At[Li+1]*or,At[Li+4]=xr,ot&&(jt||(jt=this._map(At,Bt,!0),si=this.clusterProps.length,this.clusterProps.push(jt)),ot(jt,this._map(At,Li)))}At[Bt+4]=xr,Wt.push(Dn/jn,Ke/jn,1/0,xr,-1,jn),ot&&Wt.push(si)}else{for(let jt=0;jt<Yt;jt++)Wt.push(At[Bt+jt]);if(jn>1)for(const jt of Cn){const Dn=jt*Yt;if(!(At[Dn+2]<=nt)){At[Dn+2]=nt;for(let Ke=0;Ke<Yt;Ke++)Wt.push(At[Dn+Ke])}}}}return Wt}_getOriginId(Je){return Je-this.points.length>>5}_getOriginZoom(Je){return(Je-this.points.length)%32}_map(Je,nt,Se){if(Je[nt+ae]>1){const dt=this.clusterProps[Je[nt+ye]];return Se?Object.assign({},dt):dt}const Qe=this.points[Je[nt+ce]].properties,ot=this.options.map(Qe);return Se&&ot===Qe?Object.assign({},ot):ot}}function _e(zt,Je,nt){return{type:"Feature",id:zt[Je+ce],properties:Fe(zt,Je,nt),geometry:{type:"Point",coordinates:[(Se=zt[Je],360*(Se-.5)),$e(zt[Je+1])]}};var Se}function Fe(zt,Je,nt){const Se=zt[Je+ae],Qe=Se>=1e4?`${Math.round(Se/1e3)}k`:Se>=1e3?Math.round(Se/100)/10+"k":Se,ot=zt[Je+ye],dt=-1===ot?{}:Object.assign({},nt[ot]);return Object.assign(dt,{cluster:!0,cluster_id:zt[Je+ce],point_count:Se,point_count_abbreviated:Qe})}function Ue(zt){return zt/360+.5}function Ge(zt){const Je=Math.sin(zt*Math.PI/180),nt=.5-.25*Math.log((1+Je)/(1-Je))/Math.PI;return nt<0?0:nt>1?1:nt}function $e(zt){const Je=(180-360*zt)*Math.PI/180;return 360*Math.atan(Math.exp(Je))/Math.PI-90}function He(zt,Je,nt,Se){for(var Qe,ot=Se,dt=nt-Je>>1,Pt=nt-Je,At=zt[Je],Wt=zt[Je+1],Yt=zt[nt],Bt=zt[nt+1],$t=Je+3;$t<nt;$t+=3){var vn=Pe(zt[$t],zt[$t+1],At,Wt,Yt,Bt);if(vn>ot)Qe=$t,ot=vn;else if(vn===ot){var Cn=Math.abs($t-dt);Cn<Pt&&(Qe=$t,Pt=Cn)}}ot>Se&&(Qe-Je>3&&He(zt,Je,Qe,Se),zt[Qe+2]=ot,nt-Qe>3&&He(zt,Qe,nt,Se))}function Pe(zt,Je,nt,Se,Qe,ot){var dt=Qe-nt,Pt=ot-Se;if(0!==dt||0!==Pt){var At=((zt-nt)*dt+(Je-Se)*Pt)/(dt*dt+Pt*Pt);At>1?(nt=Qe,Se=ot):At>0&&(nt+=dt*At,Se+=Pt*At)}return(dt=zt-nt)*dt+(Pt=Je-Se)*Pt}function je(zt,Je,nt,Se){var Qe={id:void 0===zt?null:zt,type:Je,geometry:nt,tags:Se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ot){var dt=ot.geometry,Pt=ot.type;if("Point"===Pt||"MultiPoint"===Pt||"LineString"===Pt)ht(ot,dt);else if("Polygon"===Pt||"MultiLineString"===Pt)for(var At=0;At<dt.length;At++)ht(ot,dt[At]);else if("MultiPolygon"===Pt)for(At=0;At<dt.length;At++)for(var Wt=0;Wt<dt[At].length;Wt++)ht(ot,dt[At][Wt])}(Qe),Qe}function ht(zt,Je){for(var nt=0;nt<Je.length;nt+=3)zt.minX=Math.min(zt.minX,Je[nt]),zt.minY=Math.min(zt.minY,Je[nt+1]),zt.maxX=Math.max(zt.maxX,Je[nt]),zt.maxY=Math.max(zt.maxY,Je[nt+1])}function Re(zt,Je,nt,Se){if(Je.geometry){var Qe=Je.geometry.coordinates,ot=Je.geometry.type,dt=Math.pow(nt.tolerance/((1<<nt.maxZoom)*nt.extent),2),Pt=[],At=Je.id;if(nt.promoteId?At=Je.properties[nt.promoteId]:nt.generateId&&(At=Se||0),"Point"===ot)tt(Qe,Pt);else if("MultiPoint"===ot)for(var Wt=0;Wt<Qe.length;Wt++)tt(Qe[Wt],Pt);else if("LineString"===ot)it(Qe,Pt,dt,!1);else if("MultiLineString"===ot){if(nt.lineMetrics){for(Wt=0;Wt<Qe.length;Wt++)it(Qe[Wt],Pt=[],dt,!1),zt.push(je(At,"LineString",Pt,Je.properties));return}qe(Qe,Pt,dt,!1)}else if("Polygon"===ot)qe(Qe,Pt,dt,!0);else{if("MultiPolygon"!==ot){if("GeometryCollection"===ot){for(Wt=0;Wt<Je.geometry.geometries.length;Wt++)Re(zt,{id:At,geometry:Je.geometry.geometries[Wt],properties:Je.properties},nt,Se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Wt=0;Wt<Qe.length;Wt++){var Yt=[];qe(Qe[Wt],Yt,dt,!0),Pt.push(Yt)}}zt.push(je(At,ot,Pt,Je.properties))}}function tt(zt,Je){Je.push(Oe(zt[0])),Je.push(Te(zt[1])),Je.push(0)}function it(zt,Je,nt,Se){for(var Qe,ot,dt=0,Pt=0;Pt<zt.length;Pt++){var At=Oe(zt[Pt][0]),Wt=Te(zt[Pt][1]);Je.push(At),Je.push(Wt),Je.push(0),Pt>0&&(dt+=Se?(Qe*Wt-At*ot)/2:Math.sqrt(Math.pow(At-Qe,2)+Math.pow(Wt-ot,2))),Qe=At,ot=Wt}var Yt=Je.length-3;Je[2]=1,He(Je,0,Yt,nt),Je[Yt+2]=1,Je.size=Math.abs(dt),Je.start=0,Je.end=Je.size}function qe(zt,Je,nt,Se){for(var Qe=0;Qe<zt.length;Qe++){var ot=[];it(zt[Qe],ot,nt,Se),Je.push(ot)}}function Oe(zt){return zt/360+.5}function Te(zt){var Je=Math.sin(zt*Math.PI/180),nt=.5-.25*Math.log((1+Je)/(1-Je))/Math.PI;return nt<0?0:nt>1?1:nt}function Ne(zt,Je,nt,Se,Qe,ot,dt,Pt){if(Se/=Je,ot>=(nt/=Je)&&dt<Se)return zt;if(dt<nt||ot>=Se)return null;for(var At=[],Wt=0;Wt<zt.length;Wt++){var Yt=zt[Wt],Bt=Yt.geometry,$t=Yt.type,vn=0===Qe?Yt.minX:Yt.minY,Cn=0===Qe?Yt.maxX:Yt.maxY;if(vn>=nt&&Cn<Se)At.push(Yt);else if(!(Cn<nt||vn>=Se)){var xn=[];if("Point"===$t||"MultiPoint"===$t)rt(Bt,xn,nt,Se,Qe);else if("LineString"===$t)xt(Bt,xn,nt,Se,Qe,!1,Pt.lineMetrics);else if("MultiLineString"===$t)on(Bt,xn,nt,Se,Qe,!1);else if("Polygon"===$t)on(Bt,xn,nt,Se,Qe,!0);else if("MultiPolygon"===$t)for(var jn=0;jn<Bt.length;jn++){var jt=[];on(Bt[jn],jt,nt,Se,Qe,!0),jt.length&&xn.push(jt)}if(xn.length){if(Pt.lineMetrics&&"LineString"===$t){for(jn=0;jn<xn.length;jn++)At.push(je(Yt.id,$t,xn[jn],Yt.tags));continue}"LineString"!==$t&&"MultiLineString"!==$t||(1===xn.length?($t="LineString",xn=xn[0]):$t="MultiLineString"),"Point"!==$t&&"MultiPoint"!==$t||($t=3===xn.length?"Point":"MultiPoint"),At.push(je(Yt.id,$t,xn,Yt.tags))}}}return At.length?At:null}function rt(zt,Je,nt,Se,Qe){for(var ot=0;ot<zt.length;ot+=3){var dt=zt[ot+Qe];dt>=nt&&dt<=Se&&(Je.push(zt[ot]),Je.push(zt[ot+1]),Je.push(zt[ot+2]))}}function xt(zt,Je,nt,Se,Qe,ot,dt){for(var Pt,At,Wt=gt(zt),Yt=0===Qe?Gt:Vn,Bt=zt.start,$t=0;$t<zt.length-3;$t+=3){var vn=zt[$t],Cn=zt[$t+1],xn=zt[$t+2],jn=zt[$t+3],jt=zt[$t+4],Dn=0===Qe?vn:Cn,Ke=0===Qe?jn:jt,si=!1;dt&&(Pt=Math.sqrt(Math.pow(vn-jn,2)+Math.pow(Cn-jt,2))),Dn<nt?Ke>nt&&(At=Yt(Wt,vn,Cn,jn,jt,nt),dt&&(Wt.start=Bt+Pt*At)):Dn>Se?Ke<Se&&(At=Yt(Wt,vn,Cn,jn,jt,Se),dt&&(Wt.start=Bt+Pt*At)):Qt(Wt,vn,Cn,xn),Ke<nt&&Dn>=nt&&(At=Yt(Wt,vn,Cn,jn,jt,nt),si=!0),Ke>Se&&Dn<=Se&&(At=Yt(Wt,vn,Cn,jn,jt,Se),si=!0),!ot&&si&&(dt&&(Wt.end=Bt+Pt*At),Je.push(Wt),Wt=gt(zt)),dt&&(Bt+=Pt)}var xr=zt.length-3;vn=zt[xr],Cn=zt[xr+1],xn=zt[xr+2],(Dn=0===Qe?vn:Cn)>=nt&&Dn<=Se&&Qt(Wt,vn,Cn,xn),xr=Wt.length-3,ot&&xr>=3&&(Wt[xr]!==Wt[0]||Wt[xr+1]!==Wt[1])&&Qt(Wt,Wt[0],Wt[1],Wt[2]),Wt.length&&Je.push(Wt)}function gt(zt){var Je=[];return Je.size=zt.size,Je.start=zt.start,Je.end=zt.end,Je}function on(zt,Je,nt,Se,Qe,ot){for(var dt=0;dt<zt.length;dt++)xt(zt[dt],Je,nt,Se,Qe,ot,!1)}function Qt(zt,Je,nt,Se){zt.push(Je),zt.push(nt),zt.push(Se)}function Gt(zt,Je,nt,Se,Qe,ot){var dt=(ot-Je)/(Se-Je);return zt.push(ot),zt.push(nt+(Qe-nt)*dt),zt.push(1),dt}function Vn(zt,Je,nt,Se,Qe,ot){var dt=(ot-nt)/(Qe-nt);return zt.push(Je+(Se-Je)*dt),zt.push(ot),zt.push(1),dt}function un(zt,Je){for(var nt=[],Se=0;Se<zt.length;Se++){var Qe,ot=zt[Se],dt=ot.type;if("Point"===dt||"MultiPoint"===dt||"LineString"===dt)Qe=an(ot.geometry,Je);else if("MultiLineString"===dt||"Polygon"===dt){Qe=[];for(var Pt=0;Pt<ot.geometry.length;Pt++)Qe.push(an(ot.geometry[Pt],Je))}else if("MultiPolygon"===dt)for(Qe=[],Pt=0;Pt<ot.geometry.length;Pt++){for(var At=[],Wt=0;Wt<ot.geometry[Pt].length;Wt++)At.push(an(ot.geometry[Pt][Wt],Je));Qe.push(At)}nt.push(je(ot.id,dt,Qe,ot.tags))}return nt}function an(zt,Je){var nt=[];nt.size=zt.size,void 0!==zt.start&&(nt.start=zt.start,nt.end=zt.end);for(var Se=0;Se<zt.length;Se+=3)nt.push(zt[Se]+Je,zt[Se+1],zt[Se+2]);return nt}function cn(zt,Je){if(zt.transformed)return zt;var nt,Se,Qe,ot=1<<zt.z,dt=zt.x,Pt=zt.y;for(nt=0;nt<zt.features.length;nt++){var At=zt.features[nt],Wt=At.geometry,Yt=At.type;if(At.geometry=[],1===Yt)for(Se=0;Se<Wt.length;Se+=2)At.geometry.push(_i(Wt[Se],Wt[Se+1],Je,ot,dt,Pt));else for(Se=0;Se<Wt.length;Se++){var Bt=[];for(Qe=0;Qe<Wt[Se].length;Qe+=2)Bt.push(_i(Wt[Se][Qe],Wt[Se][Qe+1],Je,ot,dt,Pt));At.geometry.push(Bt)}}return zt.transformed=!0,zt}function _i(zt,Je,nt,Se,Qe,ot){return[Math.round(nt*(zt*Se-Qe)),Math.round(nt*(Je*Se-ot))]}function vi(zt,Je,nt,Se,Qe){for(var ot=Je===Qe.maxZoom?0:Qe.tolerance/((1<<Je)*Qe.extent),dt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:nt,y:Se,z:Je,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Pt=0;Pt<zt.length;Pt++){dt.numFeatures++,qn(dt,zt[Pt],ot,Qe);var At=zt[Pt].minX,Wt=zt[Pt].minY,Yt=zt[Pt].maxX,Bt=zt[Pt].maxY;At<dt.minX&&(dt.minX=At),Wt<dt.minY&&(dt.minY=Wt),Yt>dt.maxX&&(dt.maxX=Yt),Bt>dt.maxY&&(dt.maxY=Bt)}return dt}function qn(zt,Je,nt,Se){var Qe=Je.geometry,ot=Je.type,dt=[];if("Point"===ot||"MultiPoint"===ot)for(var Pt=0;Pt<Qe.length;Pt+=3)dt.push(Qe[Pt]),dt.push(Qe[Pt+1]),zt.numPoints++,zt.numSimplified++;else if("LineString"===ot)Pi(dt,Qe,zt,nt,!1,!1);else if("MultiLineString"===ot||"Polygon"===ot)for(Pt=0;Pt<Qe.length;Pt++)Pi(dt,Qe[Pt],zt,nt,"Polygon"===ot,0===Pt);else if("MultiPolygon"===ot)for(var At=0;At<Qe.length;At++){var Wt=Qe[At];for(Pt=0;Pt<Wt.length;Pt++)Pi(dt,Wt[Pt],zt,nt,!0,0===Pt)}if(dt.length){var Yt=Je.tags||null;if("LineString"===ot&&Se.lineMetrics){for(var Bt in Yt={},Je.tags)Yt[Bt]=Je.tags[Bt];Yt.mapbox_clip_start=Qe.start/Qe.size,Yt.mapbox_clip_end=Qe.end/Qe.size}var $t={geometry:dt,type:"Polygon"===ot||"MultiPolygon"===ot?3:"LineString"===ot||"MultiLineString"===ot?2:1,tags:Yt};null!==Je.id&&($t.id=Je.id),zt.features.push($t)}}function Pi(zt,Je,nt,Se,Qe,ot){var dt=Se*Se;if(Se>0&&Je.size<(Qe?dt:Se))nt.numPoints+=Je.length/3;else{for(var Pt=[],At=0;At<Je.length;At+=3)(0===Se||Je[At+2]>dt)&&(nt.numSimplified++,Pt.push(Je[At]),Pt.push(Je[At+1])),nt.numPoints++;Qe&&function(Wt,Yt){for(var Bt=0,$t=0,vn=Wt.length,Cn=vn-2;$t<vn;Cn=$t,$t+=2)Bt+=(Wt[$t]-Wt[Cn])*(Wt[$t+1]+Wt[Cn+1]);if(Bt>0===Yt)for($t=0,vn=Wt.length;$t<vn/2;$t+=2){var xn=Wt[$t],jn=Wt[$t+1];Wt[$t]=Wt[vn-2-$t],Wt[$t+1]=Wt[vn-1-$t],Wt[vn-2-$t]=xn,Wt[vn-1-$t]=jn}}(Pt,ot),zt.push(Pt)}}function ci(zt,Je){var nt=(Je=this.options=function(Qe,ot){for(var dt in ot)Qe[dt]=ot[dt];return Qe}(Object.create(this.options),Je)).debug;if(nt&&console.time("preprocess data"),Je.maxZoom<0||Je.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Je.promoteId&&Je.generateId)throw new Error("promoteId and generateId cannot be used together.");var Qe,ot,dt,Pt,At,Wt,Se=function(Qe,ot){var dt=[];if("FeatureCollection"===Qe.type)for(var Pt=0;Pt<Qe.features.length;Pt++)Re(dt,Qe.features[Pt],ot,Pt);else Re(dt,"Feature"===Qe.type?Qe:{geometry:Qe},ot);return dt}(zt,Je);this.tiles={},this.tileCoords=[],nt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Je.indexMaxZoom,Je.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Pt=Qe=Se,At=Ne(Qe,1,-1-(dt=(ot=Je).buffer/ot.extent),dt,0,-1,2,ot),Wt=Ne(Qe,1,1-dt,2+dt,0,-1,2,ot),(At||Wt)&&(Pt=Ne(Qe,1,-dt,1+dt,0,-1,2,ot)||[],At&&(Pt=un(At,1).concat(Pt)),Wt&&(Pt=Pt.concat(un(Wt,-1)))),(Se=Pt).length&&this.splitTile(Se,0,0,0),nt&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ei(zt,Je,nt){return 32*((1<<zt)*nt+Je)+zt}function Mi(zt,Je){return Je?zt.properties[Je]:zt.id}function Zi(zt,Je){if(null==zt)return!0;if("Feature"===zt.type)return null!=Mi(zt,Je);if("FeatureCollection"===zt.type){const nt=new Set;for(const Se of zt.features){const Qe=Mi(Se,Je);if(null==Qe||nt.has(Qe))return!1;nt.add(Qe)}return!0}return!1}function ji(zt,Je){const nt=new Map;if(null!=zt)if("Feature"===zt.type)nt.set(Mi(zt,Je),zt);else for(const Se of zt.features)nt.set(Mi(Se,Je),Se);return nt}function $i(zt,Je){const nt=zt.tileID.canonical;if(!this._geoJSONIndex)return Je(null,null);const Se=this._geoJSONIndex.getTile(nt.z,nt.x,nt.y);if(!Se)return Je(null,null);const Qe=new class{constructor(dt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=dt.length,this._features=dt}feature(dt){return new class{constructor(Pt){this._feature=Pt,this.extent=u.EXTENT,this.type=Pt.type,this.properties=Pt.tags,"id"in Pt&&!isNaN(Pt.id)&&(this.id=parseInt(Pt.id,10))}loadGeometry(){if(1===this._feature.type){const Pt=[];for(const At of this._feature.geometry)Pt.push([new u.Point(At[0],At[1])]);return Pt}{const Pt=[];for(const At of this._feature.geometry){const Wt=[];for(const Yt of At)Wt.push(new u.Point(Yt[0],Yt[1]));Pt.push(Wt)}return Pt}}toGeoJSON(Pt,At,Wt){return V.call(this,Pt,At,Wt)}}(this._features[dt])}}(Se.features);let ot=fe(Qe);0===ot.byteOffset&&ot.byteLength===ot.buffer.byteLength||(ot=new Uint8Array(ot)),Je(null,{vectorTile:Qe,rawData:ot.buffer})}ci.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ci.prototype.splitTile=function(zt,Je,nt,Se,Qe,ot,dt){for(var Pt=[zt,Je,nt,Se],At=this.options,Wt=At.debug;Pt.length;){Se=Pt.pop(),nt=Pt.pop(),Je=Pt.pop(),zt=Pt.pop();var Yt=1<<Je,Bt=Ei(Je,nt,Se),$t=this.tiles[Bt];if(!$t&&(Wt>1&&console.time("creation"),$t=this.tiles[Bt]=vi(zt,Je,nt,Se,At),this.tileCoords.push({z:Je,x:nt,y:Se}),Wt)){Wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Je,nt,Se,$t.numFeatures,$t.numPoints,$t.numSimplified),console.timeEnd("creation"));var vn="z"+Je;this.stats[vn]=(this.stats[vn]||0)+1,this.total++}if($t.source=zt,Qe){if(Je===At.maxZoom||Je===Qe)continue;var Cn=1<<Qe-Je;if(nt!==Math.floor(ot/Cn)||Se!==Math.floor(dt/Cn))continue}else if(Je===At.indexMaxZoom||$t.numPoints<=At.indexMaxPoints)continue;if($t.source=null,0!==zt.length){Wt>1&&console.time("clipping");var xn,jn,jt,Dn,Ke,si,xr=.5*At.buffer/At.extent,Zr=.5-xr,Li=.5+xr,or=1+xr;xn=jn=jt=Dn=null,Ke=Ne(zt,Yt,nt-xr,nt+Li,0,$t.minX,$t.maxX,At),si=Ne(zt,Yt,nt+Zr,nt+or,0,$t.minX,$t.maxX,At),zt=null,Ke&&(xn=Ne(Ke,Yt,Se-xr,Se+Li,1,$t.minY,$t.maxY,At),jn=Ne(Ke,Yt,Se+Zr,Se+or,1,$t.minY,$t.maxY,At),Ke=null),si&&(jt=Ne(si,Yt,Se-xr,Se+Li,1,$t.minY,$t.maxY,At),Dn=Ne(si,Yt,Se+Zr,Se+or,1,$t.minY,$t.maxY,At),si=null),Wt>1&&console.timeEnd("clipping"),Pt.push(xn||[],Je+1,2*nt,2*Se),Pt.push(jn||[],Je+1,2*nt,2*Se+1),Pt.push(jt||[],Je+1,2*nt+1,2*Se),Pt.push(Dn||[],Je+1,2*nt+1,2*Se+1)}}},ci.prototype.getTile=function(zt,Je,nt){var Se=this.options,Qe=Se.extent,ot=Se.debug;if(zt<0||zt>24)return null;var dt=1<<zt,Pt=Ei(zt,Je=(Je%dt+dt)%dt,nt);if(this.tiles[Pt])return cn(this.tiles[Pt],Qe);ot>1&&console.log("drilling down to z%d-%d-%d",zt,Je,nt);for(var At,Wt=zt,Yt=Je,Bt=nt;!At&&Wt>0;)Wt--,Yt=Math.floor(Yt/2),Bt=Math.floor(Bt/2),At=this.tiles[Ei(Wt,Yt,Bt)];return At&&At.source?(ot>1&&console.log("found parent tile z%d-%d-%d",Wt,Yt,Bt),ot>1&&console.time("drilling down"),this.splitTile(At.source,Wt,Yt,Bt,zt,Je,nt),ot>1&&console.timeEnd("drilling down"),this.tiles[Pt]?cn(this.tiles[Pt],Qe):null):null};class so extends _{constructor(Je,nt,Se,Qe){super(Je,nt,Se,$i),this._dataUpdateable=new Map,this.loadGeoJSON=(ot,dt)=>{const{promoteId:Pt}=ot;if(ot.request)return u.getJSON(ot.request,(At,Wt,Yt,Bt)=>{this._dataUpdateable=Zi(Wt,Pt)?ji(Wt,Pt):void 0,dt(At,Wt,Yt,Bt)});if("string"==typeof ot.data)try{const At=JSON.parse(ot.data);this._dataUpdateable=Zi(At,Pt)?ji(At,Pt):void 0,dt(null,At)}catch{dt(new Error(`Input data given to '${ot.source}' is not a valid GeoJSON object.`))}else ot.dataDiff?this._dataUpdateable?(function(At,Wt,Yt){var Bt,$t,vn,Cn;if(Wt.removeAll&&At.clear(),Wt.remove)for(const xn of Wt.remove)At.delete(xn);if(Wt.add)for(const xn of Wt.add){const jn=Mi(xn,Yt);null!=jn&&At.set(jn,xn)}if(Wt.update)for(const xn of Wt.update){let jn=At.get(xn.id);if(null==jn)continue;const jt=!xn.removeAllProperties&&((null===(Bt=xn.removeProperties)||void 0===Bt?void 0:Bt.length)>0||(null===($t=xn.addOrUpdateProperties)||void 0===$t?void 0:$t.length)>0);if((xn.newGeometry||xn.removeAllProperties||jt)&&(jn={...jn},At.set(xn.id,jn),jt&&(jn.properties={...jn.properties})),xn.newGeometry&&(jn.geometry=xn.newGeometry),xn.removeAllProperties)jn.properties={};else if((null===(vn=xn.removeProperties)||void 0===vn?void 0:vn.length)>0)for(const Dn of xn.removeProperties)Object.prototype.hasOwnProperty.call(jn.properties,Dn)&&delete jn.properties[Dn];if((null===(Cn=xn.addOrUpdateProperties)||void 0===Cn?void 0:Cn.length)>0)for(const{key:Dn,value:Ke}of xn.addOrUpdateProperties)jn.properties[Dn]=Ke}}(this._dataUpdateable,ot.dataDiff,Pt),dt(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):dt(new Error(`Cannot update existing geojson data in ${ot.source}`)):dt(new Error(`Input data given to '${ot.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Qe&&(this.loadGeoJSON=Qe)}loadData(Je,nt){var Se;null===(Se=this._pendingRequest)||void 0===Se||Se.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Qe=!!(Je&&Je.request&&Je.request.collectResourceTiming)&&new u.RequestPerformance(Je.request);this._pendingCallback=nt,this._pendingRequest=this.loadGeoJSON(Je,(ot,dt)=>{if(delete this._pendingCallback,delete this._pendingRequest,ot||!dt)return nt(ot);if("object"!=typeof dt)return nt(new Error(`Input data given to '${Je.source}' is not a valid GeoJSON object.`));{R(dt,!0);try{if(Je.filter){const At=u.createExpression(Je.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===At.result)throw new Error(At.value.map(Yt=>`${Yt.key}: ${Yt.message}`).join(", "));dt={type:"FeatureCollection",features:dt.features.filter(Yt=>At.value.evaluate({zoom:0},Yt))}}this._geoJSONIndex=Je.cluster?new Me(function({superclusterOptions:At,clusterProperties:Wt}){if(!Wt||!At)return At;const Yt={},Bt={},$t={accumulated:null,zoom:0},vn={properties:null},Cn=Object.keys(Wt);for(const xn of Cn){const[jn,jt]=Wt[xn],Dn=u.createExpression(jt),Ke=u.createExpression("string"==typeof jn?[jn,["accumulated"],["get",xn]]:jn);Yt[xn]=Dn.value,Bt[xn]=Ke.value}return At.map=xn=>{vn.properties=xn;const jn={};for(const jt of Cn)jn[jt]=Yt[jt].evaluate($t,vn);return jn},At.reduce=(xn,jn)=>{vn.properties=jn;for(const jt of Cn)$t.accumulated=xn[jt],xn[jt]=Bt[jt].evaluate($t,vn)},At}(Je)).load(dt.features):new ci(At=dt,Je.geojsonVtOptions)}catch(At){return nt(At)}this.loaded={};const Pt={};if(Qe){const At=Qe.finish();At&&(Pt.resourceTiming={},Pt.resourceTiming[Je.source]=JSON.parse(JSON.stringify(At)))}nt(null,Pt)}var At})}reloadTile(Je,nt){const Se=this.loaded;return Se&&Se[Je.uid]?super.reloadTile(Je,nt):this.loadTile(Je,nt)}removeSource(Je,nt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),nt()}getClusterExpansionZoom(Je,nt){try{nt(null,this._geoJSONIndex.getClusterExpansionZoom(Je.clusterId))}catch(Se){nt(Se)}}getClusterChildren(Je,nt){try{nt(null,this._geoJSONIndex.getChildren(Je.clusterId))}catch(Se){nt(Se)}}getClusterLeaves(Je,nt){try{nt(null,this._geoJSONIndex.getLeaves(Je.clusterId,Je.limit,Je.offset))}catch(Se){nt(Se)}}}class Zn{constructor(Je){this.self=Je,this.actor=new u.Actor(Je,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:_,geojson:so},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(nt,Se)=>{if(this.workerSourceTypes[nt])throw new Error(`Worker source with name "${nt}" already registered.`);this.workerSourceTypes[nt]=Se},this.self.registerRTLTextPlugin=nt=>{if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=nt.applyArabicShaping,u.plugin.processBidirectionalText=nt.processBidirectionalText,u.plugin.processStyledBidirectionalText=nt.processStyledBidirectionalText}}setReferrer(Je,nt){this.referrer=nt}setImages(Je,nt,Se){this.availableImages[Je]=nt;for(const Qe in this.workerSources[Je]){const ot=this.workerSources[Je][Qe];for(const dt in ot)ot[dt].availableImages=nt}Se()}setLayers(Je,nt,Se){this.getLayerIndex(Je).replace(nt),Se()}updateLayers(Je,nt,Se){this.getLayerIndex(Je).update(nt.layers,nt.removedIds),Se()}loadTile(Je,nt,Se){this.getWorkerSource(Je,nt.type,nt.source).loadTile(nt,Se)}loadDEMTile(Je,nt,Se){this.getDEMWorkerSource(Je,nt.source).loadTile(nt,Se)}reloadTile(Je,nt,Se){this.getWorkerSource(Je,nt.type,nt.source).reloadTile(nt,Se)}abortTile(Je,nt,Se){this.getWorkerSource(Je,nt.type,nt.source).abortTile(nt,Se)}removeTile(Je,nt,Se){this.getWorkerSource(Je,nt.type,nt.source).removeTile(nt,Se)}removeDEMTile(Je,nt){this.getDEMWorkerSource(Je,nt.source).removeTile(nt)}removeSource(Je,nt,Se){if(!this.workerSources[Je]||!this.workerSources[Je][nt.type]||!this.workerSources[Je][nt.type][nt.source])return;const Qe=this.workerSources[Je][nt.type][nt.source];delete this.workerSources[Je][nt.type][nt.source],void 0!==Qe.removeSource?Qe.removeSource(nt,Se):Se()}loadWorkerSource(Je,nt,Se){try{this.self.importScripts(nt.url),Se()}catch(Qe){Se(Qe.toString())}}syncRTLPluginState(Je,nt,Se){try{u.plugin.setState(nt);const Qe=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&null!=Qe){this.self.importScripts(Qe);const ot=u.plugin.isParsed();Se(ot?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Qe}`),ot)}}catch(Qe){Se(Qe.toString())}}getAvailableImages(Je){let nt=this.availableImages[Je];return nt||(nt=[]),nt}getLayerIndex(Je){let nt=this.layerIndexes[Je];return nt||(nt=this.layerIndexes[Je]=new h),nt}getWorkerSource(Je,nt,Se){return this.workerSources[Je]||(this.workerSources[Je]={}),this.workerSources[Je][nt]||(this.workerSources[Je][nt]={}),this.workerSources[Je][nt][Se]||(this.workerSources[Je][nt][Se]=new this.workerSourceTypes[nt]({send:(ot,dt,Pt)=>{this.actor.send(ot,dt,Pt,Je)}},this.getLayerIndex(Je),this.getAvailableImages(Je))),this.workerSources[Je][nt][Se]}getDEMWorkerSource(Je,nt){return this.demWorkerSources[Je]||(this.demWorkerSources[Je]={}),this.demWorkerSources[Je][nt]||(this.demWorkerSources[Je][nt]=new S),this.demWorkerSources[Je][nt]}}return u.isWorker()&&(self.worker=new Zn(self)),Zn}),G(0,function(u){var h="3.3.1";class g{static testProp(s){if(!g.docStyle)return s[0];for(let C=0;C<s.length;C++)if(s[C]in g.docStyle)return s[C];return s[0]}static create(s,C,N){const W=window.document.createElement(s);return void 0!==C&&(W.className=C),N&&N.appendChild(W),W}static createNS(s,C){return window.document.createElementNS(s,C)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(s,C){s.style[g.transformProp]=C}static addEventListener(s,C,N,W={}){s.addEventListener(C,N,"passive"in W?W:W.capture)}static removeEventListener(s,C,N,W={}){s.removeEventListener(C,N,"passive"in W?W:W.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static mousePos(s,C){const N=s.getBoundingClientRect();return new u.Point(C.clientX-N.left-s.clientLeft,C.clientY-N.top-s.clientTop)}static touchPos(s,C){const N=s.getBoundingClientRect(),W=[];for(let K=0;K<C.length;K++)W.push(new u.Point(C[K].clientX-N.left-s.clientLeft,C[K].clientY-N.top-s.clientTop));return W}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);const v={supported:!1,testSupport:function(H){!_&&f&&(S?M(H):m=H)}};let m,f,_=!1,S=!1;function M(H){const s=H.createTexture();H.bindTexture(H.TEXTURE_2D,s);try{if(H.texImage2D(H.TEXTURE_2D,0,H.RGBA,H.RGBA,H.UNSIGNED_BYTE,f),H.isContextLost())return;v.supported=!0}catch{}H.deleteTexture(s),_=!0}var D,R,H;typeof document<"u"&&(f=document.createElement("img"),f.onload=function(){m&&M(m),m=null,S=!0},f.onerror=function(){_=!0,m=null},f.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(H){let s,C,N,W;H.resetRequestQueue=()=>{s=[],C=0,N=0,W={}},H.addThrottleControl=Le=>{const Ve=N++;return W[Ve]=Le,Ve},H.removeThrottleControl=Le=>{delete W[Le],ge()},H.getImage=(Le,Ve,We=!0)=>{v.supported&&(Le.headers||(Le.headers={}),Le.headers.accept="image/webp,*/*");const lt={requestParameters:Le,supportImageRefresh:We,callback:Ve,cancelled:!1,completed:!1,cancel:()=>{lt.completed||lt.cancelled||(lt.cancelled=!0,lt.innerRequest&&(lt.innerRequest.cancel(),C--),ge())}};return s.push(lt),ge(),lt};const K=Le=>{const{requestParameters:Ve,supportImageRefresh:We,callback:lt}=Le;return u.extend(Ve,{type:"image"}),(!1!==We||u.isWorker()||u.getProtocolAction(Ve.url)||Ve.headers&&!Object.keys(Ve.headers).reduce((Tt,kt)=>Tt&&"accept"===kt,!0)?u.makeRequest:we)(Ve,(Tt,kt,Ft,It)=>{he(Le,lt,Tt,kt,Ft,It)})},he=(Le,Ve,We,lt,Tt,kt)=>{var Ft,It;We?Ve(We):lt instanceof HTMLImageElement||u.isImageBitmap(lt)?Ve(null,lt):lt&&(Ft=lt,It=(Ft,It)=>{null!=Ft?Ve(Ft):null!=It&&Ve(null,It,{cacheControl:Tt,expires:kt})},"function"==typeof createImageBitmap?u.arrayBufferToImageBitmap(Ft,It):u.arrayBufferToImage(Ft,It)),Le.cancelled||(Le.completed=!0,C--,ge())},ge=()=>{const Le=(()=>{const Ve=Object.keys(W);let We=!1;if(Ve.length>0)for(const lt of Ve)if(We=W[lt](),We)break;return We})()?u.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let Ve=C;Ve<Le&&s.length>0;Ve++){const We=s.shift();if(We.cancelled){Ve--;continue}const lt=K(We);C++,We.innerRequest=lt}},we=(Le,Ve)=>{const We=new Image,lt=Le.url;let Tt=!1;const kt=Le.credentials;return kt&&"include"===kt?We.crossOrigin="use-credentials":(kt&&"same-origin"===kt||!u.sameOrigin(lt))&&(We.crossOrigin="anonymous"),We.fetchPriority="high",We.onload=()=>{Ve(null,We),We.onerror=We.onload=null},We.onerror=()=>{Tt||Ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),We.onerror=We.onload=null},We.src=lt,{cancel:()=>{Tt=!0,We.src=""}}}}(D||(D={})),D.resetRequestQueue(),(H=R||(R={})).Glyphs="Glyphs",H.Image="Image",H.Source="Source",H.SpriteImage="SpriteImage",H.SpriteJSON="SpriteJSON",H.Style="Style",H.Tile="Tile",H.Unknown="Unknown";class V{constructor(s){this._transformRequestFn=s}transformRequest(s,C){return this._transformRequestFn&&this._transformRequestFn(s,C)||{url:s}}normalizeSpriteURL(s,C,N){const W=function(K){const he=K.match(B);if(!he)throw new Error(`Unable to parse URL "${K}"`);return{protocol:he[1],authority:he[2],path:he[3]||"/",params:he[4]?he[4].split("&"):[]}}(s);return W.path+=`${C}${N}`,function(K){const he=K.params.length?`?${K.params.join("&")}`:"";return`${K.protocol}://${K.authority}${K.path}${he}`}(W)}setTransformRequest(s){this._transformRequestFn=s}}const B=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function U(H){var s=new u.ARRAY_TYPE(3);return s[0]=H[0],s[1]=H[1],s[2]=H[2],s}var F,j=function(H,s,C){return H[0]=s[0]-C[0],H[1]=s[1]-C[1],H[2]=s[2]-C[2],H};F=new u.ARRAY_TYPE(3),u.ARRAY_TYPE!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0);var P=function(H){var s=H[0],C=H[1];return s*s+C*C};function Q(H){const s=[];if("string"==typeof H)s.push({id:"default",url:H});else if(H&&H.length>0){const C=[];for(const{id:N,url:W}of H){const K=`${N}${W}`;-1===C.indexOf(K)&&(C.push(K),s.push({id:N,url:W}))}}return s}function $(H,s,C,N,W){if(N)return void H(N);if(W!==Object.values(s).length||W!==Object.values(C).length)return;const K={};for(const he in s){K[he]={};const ge=u.browser.getImageCanvasContext(C[he]),we=s[he];for(const Le in we){const{width:Ve,height:We,x:lt,y:Tt,sdf:kt,pixelRatio:Ft,stretchX:It,stretchY:ln,content:zn}=we[Le];K[he][Le]={data:null,pixelRatio:Ft,sdf:kt,stretchX:It,stretchY:ln,content:zn,spriteData:{width:Ve,height:We,x:lt,y:Tt,context:ge}}}}H(null,K)}!function(){var H=new u.ARRAY_TYPE(2);u.ARRAY_TYPE!=Float32Array&&(H[0]=0,H[1]=0)}();class oe{constructor(s,C,N,W){this.context=s,this.format=N,this.texture=s.gl.createTexture(),this.update(C,W)}update(s,C,N){const{width:W,height:K}=s,he=!(this.size&&this.size[0]===W&&this.size[1]===K||N),{context:ge}=this,{gl:we}=ge;if(this.useMipmap=!(!C||!C.useMipmap),we.bindTexture(we.TEXTURE_2D,this.texture),ge.pixelStoreUnpackFlipY.set(!1),ge.pixelStoreUnpack.set(1),ge.pixelStoreUnpackPremultiplyAlpha.set(this.format===we.RGBA&&(!C||!1!==C.premultiply)),he)this.size=[W,K],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||u.isImageBitmap(s)?we.texImage2D(we.TEXTURE_2D,0,this.format,this.format,we.UNSIGNED_BYTE,s):we.texImage2D(we.TEXTURE_2D,0,this.format,W,K,0,this.format,we.UNSIGNED_BYTE,s.data);else{const{x:Le,y:Ve}=N||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||u.isImageBitmap(s)?we.texSubImage2D(we.TEXTURE_2D,0,Le,Ve,we.RGBA,we.UNSIGNED_BYTE,s):we.texSubImage2D(we.TEXTURE_2D,0,Le,Ve,W,K,we.RGBA,we.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&we.generateMipmap(we.TEXTURE_2D)}bind(s,C,N){const{context:W}=this,{gl:K}=W;K.bindTexture(K.TEXTURE_2D,this.texture),N!==K.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(N=K.LINEAR),s!==this.filter&&(K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,s),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,N||s),this.filter=s),C!==this.wrap&&(K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,C),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,C),this.wrap=C)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function X(H){const{userImage:s}=H;return!!(s&&s.render&&s.render())&&(H.data.replace(new Uint8Array(s.data.buffer)),!0)}class ie extends u.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:C,callback:N}of this.requestors)this._notify(C,N);this.requestors=[]}}getImage(s){const C=this.images[s];if(C&&!C.data&&C.spriteData){const N=C.spriteData;C.data=new u.RGBAImage({width:N.width,height:N.height},N.context.getImageData(N.x,N.y,N.width,N.height).data),C.spriteData=null}return C}addImage(s,C){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,C)&&(this.images[s]=C)}_validate(s,C){let N=!0;const W=C.data||C.spriteData;return this._validateStretch(C.stretchX,W&&W.width)||(this.fire(new u.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),N=!1),this._validateStretch(C.stretchY,W&&W.height)||(this.fire(new u.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),N=!1),this._validateContent(C.content,C)||(this.fire(new u.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),N=!1),N}_validateStretch(s,C){if(!s)return!0;let N=0;for(const W of s){if(W[0]<N||W[1]<W[0]||C<W[1])return!1;N=W[1]}return!0}_validateContent(s,C){if(!s)return!0;if(4!==s.length)return!1;const N=C.spriteData,W=N&&N.width||C.data.width,K=N&&N.height||C.data.height;return!(s[0]<0||W<s[0]||s[1]<0||K<s[1]||s[2]<0||W<s[2]||s[3]<0||K<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,C,N=!0){const W=this.getImage(s);if(N&&(W.data.width!==C.data.width||W.data.height!==C.data.height))throw new Error(`size mismatch between old image (${W.data.width}x${W.data.height}) and new image (${C.data.width}x${C.data.height}).`);C.version=W.version+1,this.images[s]=C,this.updatedImages[s]=!0}removeImage(s){const C=this.images[s];delete this.images[s],delete this.patterns[s],C.userImage&&C.userImage.onRemove&&C.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,C){let N=!0;if(!this.isLoaded())for(const W of s)this.images[W]||(N=!1);this.isLoaded()||N?this._notify(s,C):this.requestors.push({ids:s,callback:C})}_notify(s,C){const N={};for(const W of s){let K=this.getImage(W);K||(this.fire(new u.Event("styleimagemissing",{id:W})),K=this.getImage(W)),K?N[W]={data:K.data.clone(),pixelRatio:K.pixelRatio,sdf:K.sdf,version:K.version,stretchX:K.stretchX,stretchY:K.stretchY,content:K.content,hasRenderCallback:!(!K.userImage||!K.userImage.render)}:u.warnOnce(`Image "${W}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}C(null,N)}getPixelSize(){const{width:s,height:C}=this.atlasImage;return{width:s,height:C}}getPattern(s){const C=this.patterns[s],N=this.getImage(s);if(!N)return null;if(C&&C.position.version===N.version)return C.position;if(C)C.position.version=N.version;else{const W={w:N.data.width+2,h:N.data.height+2,x:0,y:0},K=new u.ImagePosition(W,N);this.patterns[s]={bin:W,position:K}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const C=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new oe(s,this.atlasImage,C.RGBA),this.atlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const K in this.patterns)s.push(this.patterns[K].bin);const{w:C,h:N}=u.potpack(s),W=this.atlasImage;W.resize({width:C||1,height:N||1});for(const K in this.patterns){const{bin:he}=this.patterns[K],ge=he.x+1,we=he.y+1,Le=this.getImage(K).data,Ve=Le.width,We=Le.height;u.RGBAImage.copy(Le,W,{x:0,y:0},{x:ge,y:we},{width:Ve,height:We}),u.RGBAImage.copy(Le,W,{x:0,y:We-1},{x:ge,y:we-1},{width:Ve,height:1}),u.RGBAImage.copy(Le,W,{x:0,y:0},{x:ge,y:we+We},{width:Ve,height:1}),u.RGBAImage.copy(Le,W,{x:Ve-1,y:0},{x:ge-1,y:we},{width:1,height:We}),u.RGBAImage.copy(Le,W,{x:0,y:0},{x:ge+Ve,y:we},{width:1,height:We})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const C of s){if(this.callbackDispatchedThisFrame[C])continue;this.callbackDispatchedThisFrame[C]=!0;const N=this.getImage(C);N||u.warnOnce(`Image with ID: "${C}" was not found`),X(N)&&this.updateImage(C,N)}}}const q=1e20;function se(H,s,C,N,W,K,he,ge,we){for(let Le=s;Le<s+N;Le++)ne(H,C*K+Le,K,W,he,ge,we);for(let Le=C;Le<C+W;Le++)ne(H,Le*K+s,1,N,he,ge,we)}function ne(H,s,C,N,W,K,he){K[0]=0,he[0]=-q,he[1]=q,W[0]=H[s];for(let ge=1,we=0,Le=0;ge<N;ge++){W[ge]=H[s+ge*C];const Ve=ge*ge;do{const We=K[we];Le=(W[ge]-W[We]+Ve-We*We)/(ge-We)/2}while(Le<=he[we]&&--we>-1);we++,K[we]=ge,he[we]=Le,he[we+1]=q}for(let ge=0,we=0;ge<N;ge++){for(;he[we+1]<ge;)we++;const Le=K[we],Ve=ge-Le;H[s+ge*C]=W[Le]+Ve*Ve}}class Ce{constructor(s,C){this.requestManager=s,this.localIdeographFontFamily=C,this.entries={}}setURL(s){this.url=s}getGlyphs(s,C){const N=[];for(const W in s)for(const K of s[W])N.push({stack:W,id:K});u.asyncAll(N,({stack:W,id:K},he)=>{let ge=this.entries[W];ge||(ge=this.entries[W]={glyphs:{},requests:{},ranges:{}});let we=ge.glyphs[K];if(void 0!==we)return void he(null,{stack:W,id:K,glyph:we});if(we=this._tinySDF(ge,W,K),we)return ge.glyphs[K]=we,void he(null,{stack:W,id:K,glyph:we});const Le=Math.floor(K/256);if(256*Le>65535)return void he(new Error("glyphs > 65535 not supported"));if(ge.ranges[Le])return void he(null,{stack:W,id:K,glyph:we});if(!this.url)return void he(new Error("glyphsUrl is not set"));let Ve=ge.requests[Le];Ve||(Ve=ge.requests[Le]=[],Ce.loadGlyphRange(W,Le,this.url,this.requestManager,(We,lt)=>{if(lt){for(const Tt in lt)this._doesCharSupportLocalGlyph(+Tt)||(ge.glyphs[+Tt]=lt[+Tt]);ge.ranges[Le]=!0}for(const Tt of Ve)Tt(We,lt);delete ge.requests[Le]})),Ve.push((We,lt)=>{We?he(We):lt&&he(null,{stack:W,id:K,glyph:lt[K]||null})})},(W,K)=>{if(W)C(W);else if(K){const he={};for(const{stack:ge,id:we,glyph:Le}of K)(he[ge]||(he[ge]={}))[we]=Le&&{id:Le.id,bitmap:Le.bitmap.clone(),metrics:Le.metrics};C(null,he)}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(u.unicodeBlockLookup["CJK Unified Ideographs"](s)||u.unicodeBlockLookup["Hangul Syllables"](s)||u.unicodeBlockLookup.Hiragana(s)||u.unicodeBlockLookup.Katakana(s))}_tinySDF(s,C,N){const W=this.localIdeographFontFamily;if(!W||!this._doesCharSupportLocalGlyph(N))return;let K=s.tinySDF;if(!K){let ge="400";/bold/i.test(C)?ge="900":/medium/i.test(C)?ge="500":/light/i.test(C)&&(ge="200"),K=s.tinySDF=new Ce.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:W,fontWeight:ge})}const he=K.draw(String.fromCharCode(N));return{id:N,bitmap:new u.AlphaImage({width:he.width||30,height:he.height||30},he.data),metrics:{width:he.glyphWidth||24,height:he.glyphHeight||24,left:he.glyphLeft||0,top:he.glyphTop-27||-8,advance:he.glyphAdvance||24}}}}Ce.loadGlyphRange=function(H,s,C,N,W){const K=256*s,he=K+255,ge=N.transformRequest(C.replace("{fontstack}",H).replace("{range}",`${K}-${he}`),R.Glyphs);u.getArrayBuffer(ge,(we,Le)=>{if(we)W(we);else if(Le){const Ve={};for(const We of u.parseGlyphPbf(Le))Ve[We.id]=We;W(null,Ve)}})},Ce.TinySDF=class{constructor({fontSize:H=24,buffer:s=3,radius:C=8,cutoff:N=.25,fontFamily:W="sans-serif",fontWeight:K="normal",fontStyle:he="normal"}={}){this.buffer=s,this.cutoff=N,this.radius=C;const ge=this.size=H+4*s,we=this._createCanvas(ge),Le=this.ctx=we.getContext("2d",{willReadFrequently:!0});Le.font=`${he} ${K} ${H}px ${W}`,Le.textBaseline="alphabetic",Le.textAlign="left",Le.fillStyle="black",this.gridOuter=new Float64Array(ge*ge),this.gridInner=new Float64Array(ge*ge),this.f=new Float64Array(ge),this.z=new Float64Array(ge+1),this.v=new Uint16Array(ge)}_createCanvas(H){const s=document.createElement("canvas");return s.width=s.height=H,s}draw(H){const{width:s,actualBoundingBoxAscent:C,actualBoundingBoxDescent:N,actualBoundingBoxLeft:W,actualBoundingBoxRight:K}=this.ctx.measureText(H),he=Math.ceil(C),ge=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(K-W))),we=Math.min(this.size-this.buffer,he+Math.ceil(N)),Le=ge+2*this.buffer,Ve=we+2*this.buffer,We=Math.max(Le*Ve,0),lt=new Uint8ClampedArray(We),Tt={data:lt,width:Le,height:Ve,glyphWidth:ge,glyphHeight:we,glyphTop:he,glyphLeft:0,glyphAdvance:s};if(0===ge||0===we)return Tt;const{ctx:kt,buffer:Ft,gridInner:It,gridOuter:ln}=this;kt.clearRect(Ft,Ft,ge,we),kt.fillText(H,Ft,Ft+he);const zn=kt.getImageData(Ft,Ft,ge,we);ln.fill(q,0,We),It.fill(0,0,We);for(let Xt=0;Xt<we;Xt++)for(let fn=0;fn<ge;fn++){const Fn=zn.data[4*(Xt*ge+fn)+3]/255;if(0===Fn)continue;const Hn=(Xt+Ft)*Le+fn+Ft;if(1===Fn)ln[Hn]=0,It[Hn]=q;else{const Bn=.5-Fn;ln[Hn]=Bn>0?Bn*Bn:0,It[Hn]=Bn<0?Bn*Bn:0}}se(ln,0,0,Le,Ve,Le,this.f,this.v,this.z),se(It,Ft,Ft,ge,we,Le,this.f,this.v,this.z);for(let Xt=0;Xt<We;Xt++){const fn=Math.sqrt(ln[Xt])-Math.sqrt(It[Xt]);lt[Xt]=Math.round(255-255*(fn/this.radius+this.cutoff))}return Tt}};class xe{constructor(){this.specification=u.v8Spec.light.position}possiblyEvaluate(s,C){return u.sphericalToCartesian(s.expression.evaluate(C))}interpolate(s,C,N){return{x:u.interpolate.number(s.x,C.x,N),y:u.interpolate.number(s.y,C.y,N),z:u.interpolate.number(s.z,C.z,N)}}}let ue,fe;class ee extends u.Evented{constructor(s){super(),ue=ue||new u.Properties({anchor:new u.DataConstantProperty(u.v8Spec.light.anchor),position:new xe,color:new u.DataConstantProperty(u.v8Spec.light.color),intensity:new u.DataConstantProperty(u.v8Spec.light.intensity)}),this._transitionable=new u.Transitionable(ue),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,C={}){if(!this._validate(u.validateLight,s,C))for(const N in s){const W=s[N];N.endsWith("-transition")?this._transitionable.setTransition(N.slice(0,-11),W):this._transitionable.setValue(N,W)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,C,N){return(!N||!1!==N.validate)&&u.emitValidationErrors(this,s.call(u.validateStyle,u.extend({value:C,style:{glyphs:!0,sprite:!0},styleSpec:u.v8Spec})))}}class de{constructor(s,C){this.width=s,this.height=C,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,C){const N=s.join(",")+String(C);return this.dashEntry[N]||(this.dashEntry[N]=this.addDash(s,C)),this.dashEntry[N]}getDashRanges(s,C,N){const W=[];let K=s.length%2==1?-s[s.length-1]*N:0,he=s[0]*N,ge=!0;W.push({left:K,right:he,isDash:ge,zeroLength:0===s[0]});let we=s[0];for(let Le=1;Le<s.length;Le++){ge=!ge;const Ve=s[Le];K=we*N,we+=Ve,he=we*N,W.push({left:K,right:he,isDash:ge,zeroLength:0===Ve})}return W}addRoundDash(s,C,N){const W=C/2;for(let K=-N;K<=N;K++){const he=this.width*(this.nextRow+N+K);let ge=0,we=s[ge];for(let Le=0;Le<this.width;Le++){Le/we.right>1&&(we=s[++ge]);const Ve=Math.abs(Le-we.left),We=Math.abs(Le-we.right),lt=Math.min(Ve,We);let Tt;const kt=K/N*(W+1);if(we.isDash){const Ft=W-Math.abs(kt);Tt=Math.sqrt(lt*lt+Ft*Ft)}else Tt=W-Math.sqrt(lt*lt+kt*kt);this.data[he+Le]=Math.max(0,Math.min(255,Tt+128))}}}addRegularDash(s){for(let ge=s.length-1;ge>=0;--ge){const we=s[ge],Le=s[ge+1];we.zeroLength?s.splice(ge,1):Le&&Le.isDash===we.isDash&&(Le.left=we.left,s.splice(ge,1))}const C=s[0],N=s[s.length-1];C.isDash===N.isDash&&(C.left=N.left-this.width,N.right=C.right+this.width);const W=this.width*this.nextRow;let K=0,he=s[K];for(let ge=0;ge<this.width;ge++){ge/he.right>1&&(he=s[++K]);const we=Math.abs(ge-he.left),Le=Math.abs(ge-he.right),Ve=Math.min(we,Le);this.data[W+ge]=Math.max(0,Math.min(255,(he.isDash?Ve:-Ve)+128))}}addDash(s,C){const N=C?7:0,W=2*N+1;if(this.nextRow+W>this.height)return u.warnOnce("LineAtlas out of space"),null;let K=0;for(let ge=0;ge<s.length;ge++)K+=s[ge];if(0!==K){const ge=this.width/K,we=this.getDashRanges(s,this.width,ge);C?this.addRoundDash(we,ge,N):this.addRegularDash(we)}const he={y:(this.nextRow+N+.5)/this.height,height:2*N/this.height,width:K};return this.nextRow+=W,this.dirty=!0,he}bind(s){const C=s.gl;this.texture?(C.bindTexture(C.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,C.texSubImage2D(C.TEXTURE_2D,0,0,0,this.width,this.height,C.ALPHA,C.UNSIGNED_BYTE,this.data))):(this.texture=C.createTexture(),C.bindTexture(C.TEXTURE_2D,this.texture),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.REPEAT),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.REPEAT),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.LINEAR),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.LINEAR),C.texImage2D(C.TEXTURE_2D,0,C.ALPHA,this.width,this.height,0,C.ALPHA,C.UNSIGNED_BYTE,this.data))}}class pe{constructor(s,C,N){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=N;const W=this.workerPool.acquire(N);for(let K=0;K<W.length;K++){const he=new pe.Actor(W[K],C,N);he.name=`Worker ${K}`,this.actors.push(he)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,C,N){u.asyncAll(this.actors,(W,K)=>{W.send(s,C,K)},N=N||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(C=>{C.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}}function ce(H,s,C){const N=function(W,K){if(W)return C(W);if(K){const he=u.pick(u.extend(K,H),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);K.vector_layers&&(he.vectorLayers=K.vector_layers,he.vectorLayerIds=he.vectorLayers.map(ge=>ge.id)),C(null,he)}};return H.url?u.getJSON(s.transformRequest(H.url,R.Source),N):u.browser.frame(()=>N(null,H))}pe.Actor=u.Actor;class ae{constructor(s,C){s&&(C?this.setSouthWest(s).setNorthEast(C):Array.isArray(s)&&(4===s.length?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof u.LngLat?new u.LngLat(s.lng,s.lat):u.LngLat.convert(s),this}setSouthWest(s){return this._sw=s instanceof u.LngLat?new u.LngLat(s.lng,s.lat):u.LngLat.convert(s),this}extend(s){const C=this._sw,N=this._ne;let W,K;if(s instanceof u.LngLat)W=s,K=s;else{if(!(s instanceof ae))return Array.isArray(s)?4===s.length||s.every(Array.isArray)?this.extend(ae.convert(s)):this.extend(u.LngLat.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(u.LngLat.convert(s)):this;if(W=s._sw,K=s._ne,!W||!K)return this}return C||N?(C.lng=Math.min(W.lng,C.lng),C.lat=Math.min(W.lat,C.lat),N.lng=Math.max(K.lng,N.lng),N.lat=Math.max(K.lat,N.lat)):(this._sw=new u.LngLat(W.lng,W.lat),this._ne=new u.LngLat(K.lng,K.lat)),this}getCenter(){return new u.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new u.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:C,lat:N}=u.LngLat.convert(s);let W=this._sw.lng<=C&&C<=this._ne.lng;return this._sw.lng>this._ne.lng&&(W=this._sw.lng>=C&&C>=this._ne.lng),this._sw.lat<=N&&N<=this._ne.lat&&W}static convert(s){return s instanceof ae?s:s&&new ae(s)}static fromLngLat(s,C=0){const N=360*C/40075017,W=N/Math.cos(Math.PI/180*s.lat);return new ae(new u.LngLat(s.lng-W,s.lat-N),new u.LngLat(s.lng+W,s.lat+N))}}class ye{constructor(s,C,N){this.bounds=ae.convert(this.validateBounds(s)),this.minzoom=C||0,this.maxzoom=N||24}validateBounds(s){return Array.isArray(s)&&4===s.length?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const C=Math.pow(2,s.z),N=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*C),W=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*C),K=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*C),he=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*C);return s.x>=N&&s.x<K&&s.y>=W&&s.y<he}}class Me extends u.Evented{constructor(s,C,N,W){if(super(),this.load=()=>{this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ce(this._options,this.map._requestManager,(K,he)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),K?this.fire(new u.ErrorEvent(K)):he&&(u.extend(this,he),he.bounds&&(this.tileBounds=new ye(he.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>u.extend({},this._options),this.id=s,this.dispatcher=N,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(C,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},C),this._collectResourceTiming=C.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(W)}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(s,C){const N=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),W={request:this.map._requestManager.transformRequest(N,R.Tile),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function K(he,ge){return delete s.request,s.aborted?C(null):he&&404!==he.status?C(he):(ge&&ge.resourceTiming&&(s.resourceTiming=ge.resourceTiming),this.map._refreshExpiredTiles&&ge&&s.setExpiryData(ge),s.loadVectorData(ge,this.map.painter),C(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}W.request.collectResourceTiming=this._collectResourceTiming,s.actor&&"expired"!==s.state?"loading"===s.state?s.reloadCallback=C:s.request=s.actor.send("reloadTile",W,K.bind(this)):(s.actor=this.dispatcher.getActor(),s.request=s.actor.send("loadTile",W,K.bind(this)))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id},void 0)}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class _e extends u.Evented{constructor(s,C,N,W){super(),this.id=s,this.dispatcher=N,this.setEventedParent(W),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},C),u.extend(this,u.pick(C,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ce(this._options,this.map._requestManager,(s,C)=>{this._tileJSONRequest=null,this._loaded=!0,s?this.fire(new u.ErrorEvent(s)):C&&(u.extend(this,C),C.bounds&&(this.tileBounds=new ye(C.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,C){const N=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.request=D.getImage(this.map._requestManager.transformRequest(N,R.Tile),(W,K,he)=>{if(delete s.request,s.aborted)s.state="unloaded",C(null);else if(W)s.state="errored",C(W);else if(K){this.map._refreshExpiredTiles&&he&&s.setExpiryData(he);const ge=this.map.painter.context,we=ge.gl;s.texture=this.map.painter.getTileTexture(K.width),s.texture?s.texture.update(K,{useMipmap:!0}):(s.texture=new oe(ge,K,we.RGBA,{useMipmap:!0}),s.texture.bind(we.LINEAR,we.CLAMP_TO_EDGE,we.LINEAR_MIPMAP_NEAREST),ge.extTextureFilterAnisotropic&&we.texParameterf(we.TEXTURE_2D,ge.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ge.extTextureFilterAnisotropicMax)),s.state="loaded",C(null)}},this.map._refreshExpiredTiles)}abortTile(s,C){s.request&&(s.request.cancel(),delete s.request),C()}unloadTile(s,C){s.texture&&this.map.painter.saveTileTexture(s.texture),C()}hasTransition(){return!1}}class Fe extends _e{constructor(s,C,N,W){super(s,C,N,W),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},C),this.encoding=C.encoding||"mapbox"}loadTile(s,C){const N=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function W(K,he){K&&(s.state="errored",C(K)),he&&(s.dem=he,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded",C(null))}s.request=D.getImage(this.map._requestManager.transformRequest(N,R.Tile),function(K,he){if(delete s.request,s.aborted)s.state="unloaded",C(null);else if(K)s.state="errored",C(K);else if(he){this.map._refreshExpiredTiles&&s.setExpiryData(he),delete he.cacheControl,delete he.expires;const ge=u.isImageBitmap(he)&&(null==fe&&(fe=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),fe)?he:u.browser.getImageData(he,1),we={uid:s.uid,coord:s.tileID,source:this.id,rawImageData:ge,encoding:this.encoding};s.actor&&"expired"!==s.state||(s.actor=this.dispatcher.getActor(),s.actor.send("loadDEMTile",we,W.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),s.neighboringTiles=this._getNeighboringTiles(s.tileID)}_getNeighboringTiles(s){const C=s.canonical,N=Math.pow(2,C.z),W=(C.x-1+N)%N,K=0===C.x?s.wrap-1:s.wrap,he=(C.x+1+N)%N,ge=C.x+1===N?s.wrap+1:s.wrap,we={};return we[new u.OverscaledTileID(s.overscaledZ,K,C.z,W,C.y).key]={backfilled:!1},we[new u.OverscaledTileID(s.overscaledZ,ge,C.z,he,C.y).key]={backfilled:!1},C.y>0&&(we[new u.OverscaledTileID(s.overscaledZ,K,C.z,W,C.y-1).key]={backfilled:!1},we[new u.OverscaledTileID(s.overscaledZ,s.wrap,C.z,C.x,C.y-1).key]={backfilled:!1},we[new u.OverscaledTileID(s.overscaledZ,ge,C.z,he,C.y-1).key]={backfilled:!1}),C.y+1<N&&(we[new u.OverscaledTileID(s.overscaledZ,K,C.z,W,C.y+1).key]={backfilled:!1},we[new u.OverscaledTileID(s.overscaledZ,s.wrap,C.z,C.x,C.y+1).key]={backfilled:!1},we[new u.OverscaledTileID(s.overscaledZ,ge,C.z,he,C.y+1).key]={backfilled:!1}),we}unloadTile(s){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&s.actor.send("removeDEMTile",{uid:s.uid,source:this.id})}}class Ue extends u.Evented{constructor(s,C,N,W){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>u.extend({},this._options,{type:this.type,data:this._data}),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=N.getActor(),this.setEventedParent(W),this._data=C.data,this._options=u.extend({},C),this._collectResourceTiming=C.collectResourceTiming,void 0!==C.maxzoom&&(this.maxzoom=C.maxzoom),C.type&&(this.type=C.type),C.attribution&&(this.attribution=C.attribution),this.promoteId=C.promoteId;const K=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:C.cluster||!1,geojsonVtOptions:{buffer:(void 0!==C.buffer?C.buffer:128)*K,tolerance:(void 0!==C.tolerance?C.tolerance:.375)*K,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:C.lineMetrics||!1,generateId:C.generateId||!1},superclusterOptions:{maxZoom:void 0!==C.clusterMaxZoom?C.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,C.clusterMinPoints||2),extent:u.EXTENT,radius:(C.clusterRadius||50)*K,log:!1,generateId:C.generateId||!1},clusterProperties:C.clusterProperties,filter:C.filter},C.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(void 0!==s.clusterRadius&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),void 0!==s.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s,C){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:s,source:this.id},C),this}getClusterChildren(s,C){return this.actor.send("geojson.getClusterChildren",{clusterId:s,source:this.id},C),this}getClusterLeaves(s,C,N,W){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:s,limit:C,offset:N},W),this}_updateWorkerData(s){const C=u.extend({},this.workerOptions);s?C.dataDiff=s:"string"==typeof this._data?(C.request=this.map._requestManager.transformRequest(u.browser.resolveURL(this._data),R.Source),C.request.collectResourceTiming=this._collectResourceTiming):C.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,C,(N,W)=>{if(this._pendingLoads--,this._removed||W&&W.abandoned)return void this.fire(new u.Event("dataabort",{dataType:"source"}));let K=null;if(W&&W.resourceTiming&&W.resourceTiming[this.id]&&(K=W.resourceTiming[this.id].slice(0)),N)return void this.fire(new u.ErrorEvent(N));const he={dataType:"source"};this._collectResourceTiming&&K&&K.length>0&&u.extend(he,{resourceTiming:K}),this.fire(new u.Event("data",{...he,sourceDataType:"metadata"})),this.fire(new u.Event("data",{...he,sourceDataType:"content"}))})}loaded(){return 0===this._pendingLoads}loadTile(s,C){const N=s.actor?"reloadTile":"loadTile";s.actor=this.actor;const W={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.request=this.actor.send(N,W,(K,he)=>(delete s.request,s.unloadVectorData(),s.aborted?C(null):K?C(K):(s.loadVectorData(he,this.map.painter,"reloadTile"===N),C(null))))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.aborted=!0}unloadTile(s){s.unloadVectorData(),this.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var Ge=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class $e extends u.Evented{constructor(s,C,N,W){super(),this.load=(K,he)=>{this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=D.getImage(this.map._requestManager.transformRequest(this.url,R.Image),(ge,we)=>{this._request=null,this._loaded=!0,ge?this.fire(new u.ErrorEvent(ge)):we&&(this.image=we,K&&(this.coordinates=K),he&&he(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||!this.image)return;const K=this.map.painter.context,he=K.gl;this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new oe(K,this.image,he.RGBA),this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE));let ge=!1;for(const we in this.tiles){const Le=this.tiles[we];"loaded"!==Le.state&&(Le.state="loaded",Le.texture=this.texture,ge=!0)}ge&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=s,this.dispatcher=N,this.coordinates=C.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(W),this.options=C}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=s.url,this.load(s.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(s){this.coordinates=s;const C=s.map(u.MercatorCoordinate.fromLngLat);this.tileID=function(W){let K=1/0,he=1/0,ge=-1/0,we=-1/0;for(const lt of W)K=Math.min(K,lt.x),he=Math.min(he,lt.y),ge=Math.max(ge,lt.x),we=Math.max(we,lt.y);const Le=Math.max(ge-K,we-he),Ve=Math.max(0,Math.floor(-Math.log(Le)/Math.LN2)),We=Math.pow(2,Ve);return new u.CanonicalTileID(Ve,Math.floor((K+ge)/2*We),Math.floor((he+we)/2*We))}(C),this.minzoom=this.maxzoom=this.tileID.z;const N=C.map(W=>this.tileID.getTilePoint(W)._round());return this._boundsArray=new u.RasterBoundsArray,this._boundsArray.emplaceBack(N[0].x,N[0].y,0,0),this._boundsArray.emplaceBack(N[1].x,N[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(N[3].x,N[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(N[2].x,N[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(s,C){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},C(null)):(s.state="errored",C(null))}hasTransition(){return!1}}class He extends $e{constructor(s,C,N,W){super(s,C,N,W),this.load=()=>{this._loaded=!1;const K=this.options;this.urls=[];for(const he of K.urls)this.urls.push(this.map._requestManager.transformRequest(he,R.Source).url);u.getVideo(this.urls,(he,ge)=>{this._loaded=!0,he?this.fire(new u.ErrorEvent(he)):ge&&(this.video=ge,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const K=this.map.painter.context,he=K.gl;this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE),he.texSubImage2D(he.TEXTURE_2D,0,0,0,he.RGBA,he.UNSIGNED_BYTE,this.video)):(this.texture=new oe(K,this.video,he.RGBA),this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE));let ge=!1;for(const we in this.tiles){const Le=this.tiles[we];"loaded"!==Le.state&&(Le.state="loaded",Le.texture=this.texture,ge=!0)}ge&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=C}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const C=this.video.seekable;s<C.start(0)||s>C.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${C.start(0)} and ${C.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Pe extends $e{constructor(s,C,N,W){super(s,C,N,W),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let K=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,K=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,K=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const he=this.map.painter.context,ge=he.gl;this.boundsBuffer||(this.boundsBuffer=he.createVertexBuffer(this._boundsArray,Ge.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(K||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new oe(he,this.canvas,ge.RGBA,{premultiply:!0});let we=!1;for(const Le in this.tiles){const Ve=this.tiles[Le];"loaded"!==Ve.state&&(Ve.state="loaded",Ve.texture=this.texture,we=!0)}we&&this.fire(new u.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),C.coordinates?Array.isArray(C.coordinates)&&4===C.coordinates.length&&!C.coordinates.some(K=>!Array.isArray(K)||2!==K.length||K.some(he=>"number"!=typeof he))||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${s}`,null,'missing required property "coordinates"'))),C.animate&&"boolean"!=typeof C.animate&&this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),C.canvas?"string"==typeof C.canvas||C.canvas instanceof HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${s}`,null,'missing required property "canvas"'))),this.options=C,this.animate=void 0===C.animate||C.animate}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const je={},ht=H=>{switch(H){case"geojson":return Ue;case"image":return $e;case"raster":return _e;case"raster-dem":return Fe;case"vector":return Me;case"video":return He;case"canvas":return Pe}return je[H]};function Re(H,s){const C=u.create();return u.translate(C,C,[1,1,0]),u.scale(C,C,[.5*H.width,.5*H.height,1]),u.multiply(C,C,H.calculatePosMatrix(s.toUnwrapped()))}function tt(H,s,C,N,W,K){const he=function(We,lt,Tt){if(We)for(const kt of We){const Ft=lt[kt];if(Ft&&Ft.source===Tt&&"fill-extrusion"===Ft.type)return!0}else for(const kt in lt){const Ft=lt[kt];if(Ft.source===Tt&&"fill-extrusion"===Ft.type)return!0}return!1}(W&&W.layers,s,H.id),ge=K.maxPitchScaleFactor(),we=H.tilesIn(N,ge,he);we.sort(it);const Le=[];for(const We of we)Le.push({wrappedTileID:We.tileID.wrapped().key,queryResults:We.tile.queryRenderedFeatures(s,C,H._state,We.queryGeometry,We.cameraQueryGeometry,We.scale,W,K,ge,Re(H.transform,We.tileID))});const Ve=function(We){const lt={},Tt={};for(const kt of We){const Ft=kt.queryResults,It=kt.wrappedTileID,ln=Tt[It]=Tt[It]||{};for(const zn in Ft){const Xt=Ft[zn],fn=ln[zn]=ln[zn]||{},Fn=lt[zn]=lt[zn]||[];for(const Hn of Xt)fn[Hn.featureIndex]||(fn[Hn.featureIndex]=!0,Fn.push(Hn))}}return lt}(Le);for(const We in Ve)Ve[We].forEach(lt=>{const Tt=lt.feature,kt=H.getFeatureState(Tt.layer["source-layer"],Tt.id);Tt.source=Tt.layer.source,Tt.layer["source-layer"]&&(Tt.sourceLayer=Tt.layer["source-layer"]),Tt.state=kt});return Ve}function it(H,s){const C=H.tileID,N=s.tileID;return C.overscaledZ-N.overscaledZ||C.canonical.y-N.canonical.y||C.wrap-N.wrap||C.canonical.x-N.canonical.x}class qe{constructor(s,C){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=u.uniqueId(),this.uses=0,this.tileSize=C,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const C=s+this.timeAdded;C<this.fadeEndTime||(this.fadeEndTime=C)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,C,N){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(W,K){const he={};if(!K)return he;for(const ge of W){const we=ge.layerIds.map(Le=>K.getLayer(Le)).filter(Boolean);if(0!==we.length){ge.layers=we,ge.stateDependentLayerIds&&(ge.stateDependentLayers=ge.stateDependentLayerIds.map(Le=>we.filter(Ve=>Ve.id===Le)[0]));for(const Le of we)he[Le.id]=ge}}return he}(s.buckets,C.style),this.hasSymbolBuckets=!1;for(const W in this.buckets){const K=this.buckets[W];if(K instanceof u.SymbolBucket){if(this.hasSymbolBuckets=!0,!N)break;K.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const W in this.buckets){const K=this.buckets[W];if(K instanceof u.SymbolBucket&&K.hasRTLText){this.hasRTLText=!0,u.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const W in this.buckets){const K=this.buckets[W];this.queryPadding=Math.max(this.queryPadding,C.style.getLayer(W).queryRadius(K))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new u.CollisionBoxArray}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const N in this.buckets){const W=this.buckets[N];W.uploadPending()&&W.upload(s)}const C=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new oe(s,this.imageAtlas.image,C.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new oe(s,this.glyphAtlasImage,C.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,C,N,W,K,he,ge,we,Le,Ve){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:W,cameraQueryGeometry:K,scale:he,tileSize:this.tileSize,pixelPosMatrix:Ve,transform:we,params:ge,queryPadding:this.queryPadding*Le},s,C,N):{}}querySourceFeatures(s,C){const N=this.latestFeatureIndex;if(!N||!N.rawTileData)return;const W=N.loadVTLayers(),K=C&&C.sourceLayer?C.sourceLayer:"",he=W._geojsonTileLayer||W[K];if(!he)return;const ge=u.createFilter(C&&C.filter),{z:we,x:Le,y:Ve}=this.tileID.canonical,We={z:we,x:Le,y:Ve};for(let lt=0;lt<he.length;lt++){const Tt=he.feature(lt);if(ge.needGeometry){const It=u.toEvaluationFeature(Tt,!0);if(!ge.filter(new u.EvaluationParameters(this.tileID.overscaledZ),It,this.tileID.canonical))continue}else if(!ge.filter(new u.EvaluationParameters(this.tileID.overscaledZ),Tt))continue;const kt=N.getId(Tt,K),Ft=new u.GeoJSONFeature(Tt,we,Le,Ve,kt);Ft.tile=We,s.push(Ft)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const C=this.expirationTime;if(s.cacheControl){const N=u.parseCacheControl(s.cacheControl);N["max-age"]&&(this.expirationTime=Date.now()+1e3*N["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const N=Date.now();let W=!1;if(this.expirationTime>N)W=!1;else if(C)if(this.expirationTime<C)W=!0;else{const K=this.expirationTime-C;K?this.expirationTime=N+Math.max(K,3e4):W=!0}else W=!0;W?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(s,C){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(s).length)return;const N=this.latestFeatureIndex.loadVTLayers();for(const W in this.buckets){if(!C.style.hasLayer(W))continue;const K=this.buckets[W],he=K.layers[0].sourceLayer||"_geojsonTileLayer",ge=N[he],we=s[he];if(!ge||!we||0===Object.keys(we).length)continue;K.update(we,ge,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Le=C&&C.style&&C.style.getLayer(W);Le&&(this.queryPadding=Math.max(this.queryPadding,Le.queryRadius(K)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=u.browser.now()+s}setDependencies(s,C){const N={};for(const W of C)N[W]=!0;this.dependencies[s]=N}hasDependency(s,C){for(const N of s){const W=this.dependencies[N];if(W)for(const K of C)if(W[K])return!0}return!1}}class Oe{constructor(s,C){this.max=s,this.onRemove=C,this.reset()}reset(){for(const s in this.data)for(const C of this.data[s])C.timeout&&clearTimeout(C.timeout),this.onRemove(C.value);return this.data={},this.order=[],this}add(s,C,N){const W=s.wrapped().key;void 0===this.data[W]&&(this.data[W]=[]);const K={value:C,timeout:void 0};if(void 0!==N&&(K.timeout=setTimeout(()=>{this.remove(s,K)},N)),this.data[W].push(K),this.order.push(W),this.order.length>this.max){const he=this._getAndRemoveByKey(this.order[0]);he&&this.onRemove(he)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const C=this.data[s].shift();return C.timeout&&clearTimeout(C.timeout),0===this.data[s].length&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),C.value}getByKey(s){const C=this.data[s];return C?C[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,C){if(!this.has(s))return this;const N=s.wrapped().key,W=void 0===C?0:this.data[N].indexOf(C),K=this.data[N][W];return this.data[N].splice(W,1),K.timeout&&clearTimeout(K.timeout),0===this.data[N].length&&delete this.data[N],this.onRemove(K.value),this.order.splice(this.order.indexOf(N),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}filter(s){const C=[];for(const N in this.data)for(const W of this.data[N])s(W.value)||C.push(W);for(const N of C)this.remove(N.value.tileID,N)}}class Te{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,C,N){const W=String(C);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][W]=this.stateChanges[s][W]||{},u.extend(this.stateChanges[s][W],N),null===this.deletedStates[s]){this.deletedStates[s]={};for(const K in this.state[s])K!==W&&(this.deletedStates[s][K]=null)}else if(this.deletedStates[s]&&null===this.deletedStates[s][W]){this.deletedStates[s][W]={};for(const K in this.state[s][W])N[K]||(this.deletedStates[s][W][K]=null)}else for(const K in N)this.deletedStates[s]&&this.deletedStates[s][W]&&null===this.deletedStates[s][W][K]&&delete this.deletedStates[s][W][K]}removeFeatureState(s,C,N){if(null===this.deletedStates[s])return;const W=String(C);if(this.deletedStates[s]=this.deletedStates[s]||{},N&&void 0!==C)null!==this.deletedStates[s][W]&&(this.deletedStates[s][W]=this.deletedStates[s][W]||{},this.deletedStates[s][W][N]=null);else if(void 0!==C)if(this.stateChanges[s]&&this.stateChanges[s][W])for(N in this.deletedStates[s][W]={},this.stateChanges[s][W])this.deletedStates[s][W][N]=null;else this.deletedStates[s][W]=null;else this.deletedStates[s]=null}getState(s,C){const N=String(C),W=u.extend({},(this.state[s]||{})[N],(this.stateChanges[s]||{})[N]);if(null===this.deletedStates[s])return{};if(this.deletedStates[s]){const K=this.deletedStates[s][C];if(null===K)return{};for(const he in K)delete W[he]}return W}initializeTileState(s,C){s.setFeatureState(this.state,C)}coalesceChanges(s,C){const N={};for(const W in this.stateChanges){this.state[W]=this.state[W]||{};const K={};for(const he in this.stateChanges[W])this.state[W][he]||(this.state[W][he]={}),u.extend(this.state[W][he],this.stateChanges[W][he]),K[he]=this.state[W][he];N[W]=K}for(const W in this.deletedStates){this.state[W]=this.state[W]||{};const K={};if(null===this.deletedStates[W])for(const he in this.state[W])K[he]={},this.state[W][he]={};else for(const he in this.deletedStates[W]){if(null===this.deletedStates[W][he])this.state[W][he]={};else for(const ge of Object.keys(this.deletedStates[W][he]))delete this.state[W][he][ge];K[he]=this.state[W][he]}N[W]=N[W]||{},u.extend(N[W],K)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(N).length)for(const W in s)s[W].setFeatureState(N,C)}}class Ne extends u.Evented{constructor(s,C,N){super(),this.id=s,this.dispatcher=N,this.on("data",W=>{"source"===W.dataType&&"metadata"===W.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===W.dataType&&"content"===W.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((W,K,he,ge)=>{const we=new(ht(K.type))(W,K,he,ge);if(we.id!==W)throw new Error(`Expected Source id to be ${W} instead of ${we.id}`);return we})(s,C,N,this),this._tiles={},this._cache=new Oe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Te,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const C=this._tiles[s];if("loaded"!==C.state&&"errored"!==C.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,C){return this._source.loadTile(s,C)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){this._source.abortTile&&this._source.abortTile(s,()=>{}),this._source.fire(new u.Event("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const C in this._tiles){const N=this._tiles[C];N.upload(s),N.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(rt).map(s=>s.key)}getRenderableIds(s){const C=[];for(const N in this._tiles)this._isIdRenderable(N,s)&&C.push(this._tiles[N]);return s?C.sort((N,W)=>{const K=N.tileID,he=W.tileID,ge=new u.Point(K.canonical.x,K.canonical.y)._rotate(this.transform.angle),we=new u.Point(he.canonical.x,he.canonical.y)._rotate(this.transform.angle);return K.overscaledZ-he.overscaledZ||we.y-ge.y||we.x-ge.x}).map(N=>N.tileID.key):C.map(N=>N.tileID).sort(rt).map(N=>N.key)}hasRenderableParent(s){const C=this.findLoadedParent(s,0);return!!C&&this._isIdRenderable(C.tileID.key)}_isIdRenderable(s,C){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(C||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)"errored"!==this._tiles[s].state&&this._reloadTile(s,"reloading")}}_reloadTile(s,C){const N=this._tiles[s];N&&("loading"!==N.state&&(N.state=C),this._loadTile(N,this._tileLoaded.bind(this,N,s,C)))}_tileLoaded(s,C,N,W){if(W)return s.state="errored",void(404!==W.status?this._source.fire(new u.ErrorEvent(W,{tile:s})):this.update(this.transform,this.terrain));s.timeAdded=u.browser.now(),"expired"===N&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(C,s),"raster-dem"===this.getSource().type&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new u.Event("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const C=this.getRenderableIds();for(let W=0;W<C.length;W++){const K=C[W];if(s.neighboringTiles&&s.neighboringTiles[K]){const he=this.getTileByID(K);N(s,he),N(he,s)}}function N(W,K){W.needsHillshadePrepare=!0,W.needsTerrainPrepare=!0;let he=K.tileID.canonical.x-W.tileID.canonical.x;const ge=K.tileID.canonical.y-W.tileID.canonical.y,we=Math.pow(2,W.tileID.canonical.z),Le=K.tileID.key;0===he&&0===ge||Math.abs(ge)>1||(Math.abs(he)>1&&(1===Math.abs(he+we)?he+=we:1===Math.abs(he-we)&&(he-=we)),K.dem&&W.dem&&(W.dem.backfillBorder(K.dem,he,ge),W.neighboringTiles&&W.neighboringTiles[Le]&&(W.neighboringTiles[Le].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,C,N,W){for(const K in this._tiles){let he=this._tiles[K];if(W[K]||!he.hasData()||he.tileID.overscaledZ<=C||he.tileID.overscaledZ>N)continue;let ge=he.tileID;for(;he&&he.tileID.overscaledZ>C+1;){const Le=he.tileID.scaledTo(he.tileID.overscaledZ-1);he=this._tiles[Le.key],he&&he.hasData()&&(ge=Le)}let we=ge;for(;we.overscaledZ>C;)if(we=we.scaledTo(we.overscaledZ-1),s[we.key]){W[ge.key]=ge;break}}}findLoadedParent(s,C){if(s.key in this._loadedParentTiles){const N=this._loadedParentTiles[s.key];return N&&N.tileID.overscaledZ>=C?N:null}for(let N=s.overscaledZ-1;N>=C;N--){const W=s.scaledTo(N),K=this._getLoadedTile(W);if(K)return K}}_getLoadedTile(s){const C=this._tiles[s.key];return C&&C.hasData()?C:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const C=Math.ceil(s.width/this._source.tileSize)+1,N=Math.ceil(s.height/this._source.tileSize)+1,W=Math.floor(C*N*(null===this._maxTileCacheZoomLevels?u.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),K="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,W):W;this._cache.setMaxSize(K)}handleWrapJump(s){const C=Math.round((s-(void 0===this._prevLng?s:this._prevLng))/360);if(this._prevLng=s,C){const N={};for(const W in this._tiles){const K=this._tiles[W];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+C),N[K.tileID.key]=K}this._tiles=N;for(const W in this._timers)clearTimeout(this._timers[W]),delete this._timers[W];for(const W in this._tiles)this._setTileReloadTimer(W,this._tiles[W])}}update(s,C){if(this.transform=s,this.terrain=C,!this._sourceLoaded||this._paused)return;let N;this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?N=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ve=>new u.OverscaledTileID(Ve.canonical.z,Ve.wrap,Ve.canonical.z,Ve.canonical.x,Ve.canonical.y)):(N=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:C}),this._source.hasTile&&(N=N.filter(Ve=>this._source.hasTile(Ve)))):N=[];const W=s.coveringZoomLevel(this._source),K=Math.max(W-Ne.maxOverzooming,this._source.minzoom),he=Math.max(W+Ne.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Ve={};for(const We of N)if(We.canonical.z>this._source.minzoom){const lt=We.scaledTo(We.canonical.z-1);Ve[lt.key]=lt;const Tt=We.scaledTo(Math.max(this._source.minzoom,Math.min(We.canonical.z,5)));Ve[Tt.key]=Tt}N=N.concat(Object.values(Ve))}const ge=0===N.length&&!this._updated&&this._didEmitContent;this._updated=!0,ge&&this.fire(new u.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const we=this._updateRetainedTiles(N,W);if(xt(this._source.type)){const Ve={},We={},lt=Object.keys(we),Tt=u.browser.now();for(const kt of lt){const Ft=we[kt],It=this._tiles[kt];if(!It||0!==It.fadeEndTime&&It.fadeEndTime<=Tt)continue;const ln=this.findLoadedParent(Ft,K);ln&&(this._addTile(ln.tileID),Ve[ln.tileID.key]=ln.tileID),We[kt]=Ft}this._retainLoadedChildren(We,W,he,we);for(const kt in Ve)we[kt]||(this._coveredTiles[kt]=!0,we[kt]=Ve[kt]);if(C){const kt={},Ft={};for(const It of N)this._tiles[It.key].hasData()?kt[It.key]=It:Ft[It.key]=It;for(const It in Ft){const ln=Ft[It].children(this._source.maxzoom);this._tiles[ln[0].key]&&this._tiles[ln[1].key]&&this._tiles[ln[2].key]&&this._tiles[ln[3].key]&&(kt[ln[0].key]=we[ln[0].key]=ln[0],kt[ln[1].key]=we[ln[1].key]=ln[1],kt[ln[2].key]=we[ln[2].key]=ln[2],kt[ln[3].key]=we[ln[3].key]=ln[3],delete Ft[It])}for(const It in Ft){const ln=this.findLoadedParent(Ft[It],this._source.minzoom);if(ln){kt[ln.tileID.key]=we[ln.tileID.key]=ln.tileID;for(const zn in kt)kt[zn].isChildOf(ln.tileID)&&delete kt[zn]}}for(const It in this._tiles)kt[It]||(this._coveredTiles[It]=!0)}}for(const Ve in we)this._tiles[Ve].clearFadeHold();const Le=u.keysDifference(this._tiles,we);for(const Ve of Le){const We=this._tiles[Ve];We.hasSymbolBuckets&&!We.holdingForFade()?We.setHoldDuration(this.map._fadeDuration):We.hasSymbolBuckets&&!We.symbolFadeFinished()||this._removeTile(Ve)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,C){const N={},W={},K=Math.max(C-Ne.maxOverzooming,this._source.minzoom),he=Math.max(C+Ne.maxUnderzooming,this._source.minzoom),ge={};for(const we of s){const Le=this._addTile(we);N[we.key]=we,Le.hasData()||C<this._source.maxzoom&&(ge[we.key]=we)}this._retainLoadedChildren(ge,C,he,N);for(const we of s){let Le=this._tiles[we.key];if(Le.hasData())continue;if(C+1>this._source.maxzoom){const We=we.children(this._source.maxzoom)[0],lt=this.getTile(We);if(lt&&lt.hasData()){N[We.key]=We;continue}}else{const We=we.children(this._source.maxzoom);if(N[We[0].key]&&N[We[1].key]&&N[We[2].key]&&N[We[3].key])continue}let Ve=Le.wasRequested();for(let We=we.overscaledZ-1;We>=K;--We){const lt=we.scaledTo(We);if(W[lt.key])break;if(W[lt.key]=!0,Le=this.getTile(lt),!Le&&Ve&&(Le=this._addTile(lt)),Le){const Tt=Le.hasData();if((Ve||Tt)&&(N[lt.key]=lt),Ve=Le.wasRequested(),Tt)break}}}return N}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const C=[];let N,W=this._tiles[s].tileID;for(;W.overscaledZ>0;){if(W.key in this._loadedParentTiles){N=this._loadedParentTiles[W.key];break}C.push(W.key);const K=W.scaledTo(W.overscaledZ-1);if(N=this._getLoadedTile(K),N)break;W=K}for(const K of C)this._loadedParentTiles[K]=N}}_addTile(s){let C=this._tiles[s.key];if(C)return C;C=this._cache.getAndRemove(s),C&&(this._setTileReloadTimer(s.key,C),C.tileID=s,this._state.initializeTileState(C,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,C)));const N=C;return C||(C=new qe(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(C,this._tileLoaded.bind(this,C,s.key,C.state))),C.uses++,this._tiles[s.key]=C,N||this._source.fire(new u.Event("dataloading",{tile:C,coord:C.tileID,dataType:"source"})),C}_setTileReloadTimer(s,C){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const N=C.getExpiryTimeout();N&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},N))}_removeTile(s){const C=this._tiles[s];C&&(C.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),C.uses>0||(C.hasData()&&"reloading"!==C.state?this._cache.add(C.tileID,C,C.getExpiryTimeout()):(C.aborted=!0,this._abortTile(C),this._unloadTile(C))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,C,N){const W=[],K=this.transform;if(!K)return W;const he=N?K.getCameraQueryGeometry(s):s,ge=s.map(kt=>K.pointCoordinate(kt,this.terrain)),we=he.map(kt=>K.pointCoordinate(kt,this.terrain)),Le=this.getIds();let Ve=1/0,We=1/0,lt=-1/0,Tt=-1/0;for(const kt of we)Ve=Math.min(Ve,kt.x),We=Math.min(We,kt.y),lt=Math.max(lt,kt.x),Tt=Math.max(Tt,kt.y);for(let kt=0;kt<Le.length;kt++){const Ft=this._tiles[Le[kt]];if(Ft.holdingForFade())continue;const It=Ft.tileID,ln=Math.pow(2,K.zoom-Ft.tileID.overscaledZ),zn=C*Ft.queryPadding*u.EXTENT/Ft.tileSize/ln,Xt=[It.getTilePoint(new u.MercatorCoordinate(Ve,We)),It.getTilePoint(new u.MercatorCoordinate(lt,Tt))];if(Xt[0].x-zn<u.EXTENT&&Xt[0].y-zn<u.EXTENT&&Xt[1].x+zn>=0&&Xt[1].y+zn>=0){const fn=ge.map(Hn=>It.getTilePoint(Hn)),Fn=we.map(Hn=>It.getTilePoint(Hn));W.push({tile:Ft,tileID:It,queryGeometry:fn,cameraQueryGeometry:Fn,scale:ln})}}return W}getVisibleCoordinates(s){const C=this.getRenderableIds(s).map(N=>this._tiles[N].tileID);for(const N of C)N.posMatrix=this.transform.calculatePosMatrix(N.toUnwrapped());return C}hasTransition(){if(this._source.hasTransition())return!0;if(xt(this._source.type)){const s=u.browser.now();for(const C in this._tiles)if(this._tiles[C].fadeEndTime>=s)return!0}return!1}setFeatureState(s,C,N){this._state.updateState(s=s||"_geojsonTileLayer",C,N)}removeFeatureState(s,C,N){this._state.removeFeatureState(s=s||"_geojsonTileLayer",C,N)}getFeatureState(s,C){return this._state.getState(s=s||"_geojsonTileLayer",C)}setDependencies(s,C,N){const W=this._tiles[s];W&&W.setDependencies(C,N)}reloadTilesForDependencies(s,C){for(const N in this._tiles)this._tiles[N].hasDependency(s,C)&&this._reloadTile(N,"reloading");this._cache.filter(N=>!N.hasDependency(s,C))}}function rt(H,s){const C=Math.abs(2*H.wrap)-+(H.wrap<0),N=Math.abs(2*s.wrap)-+(s.wrap<0);return H.overscaledZ-s.overscaledZ||N-C||s.canonical.y-H.canonical.y||s.canonical.x-H.canonical.x}function xt(H){return"raster"===H||"image"===H||"video"===H}Ne.maxOverzooming=10,Ne.maxUnderzooming=3;const gt="mapboxgl_preloaded_worker_pool";class on{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<on.workerCount;)this.workers.push(new Worker(u.config.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],0===this.numActive()&&(this.workers.forEach(C=>{C.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[gt]}numActive(){return Object.keys(this.active).length}}const Qt=Math.floor(u.browser.hardwareConcurrency/2);let Gt;function Vn(){return Gt||(Gt=new on),Gt}on.workerCount=u.isSafari(globalThis)?Math.max(Math.min(Qt,3),1):1;class un{constructor(s,C){this.reset(s,C)}reset(s,C){this.points=s||[],this._distances=[0];for(let N=1;N<this.points.length;N++)this._distances[N]=this._distances[N-1]+this.points[N].dist(this.points[N-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(C||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(1===this.points.length)return this.points[0];s=u.clamp(s,0,1);let C=1,N=this._distances[C];const W=s*this.paddedLength+this.padding;for(;N<W&&C<this._distances.length;)N=this._distances[++C];const K=C-1,he=this._distances[K],ge=N-he,we=ge>0?(W-he)/ge:0;return this.points[K].mult(1-we).add(this.points[C].mult(we))}}function an(H,s){let C=!0;return"always"===H||"never"!==H&&"never"!==s||(C=!1),C}class cn{constructor(s,C,N){const W=this.boxCells=[],K=this.circleCells=[];this.xCellCount=Math.ceil(s/N),this.yCellCount=Math.ceil(C/N);for(let he=0;he<this.xCellCount*this.yCellCount;he++)W.push([]),K.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=C,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/C,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,C,N,W,K){this._forEachCell(C,N,W,K,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(C),this.bboxes.push(N),this.bboxes.push(W),this.bboxes.push(K)}insertCircle(s,C,N,W){this._forEachCell(C-W,N-W,C+W,N+W,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(C),this.circles.push(N),this.circles.push(W)}_insertBoxCell(s,C,N,W,K,he){this.boxCells[K].push(he)}_insertCircleCell(s,C,N,W,K,he){this.circleCells[K].push(he)}_query(s,C,N,W,K,he,ge){if(N<0||s>this.width||W<0||C>this.height)return[];const we=[];if(s<=0&&C<=0&&this.width<=N&&this.height<=W){if(K)return[{key:null,x1:s,y1:C,x2:N,y2:W}];for(let Le=0;Le<this.boxKeys.length;Le++)we.push({key:this.boxKeys[Le],x1:this.bboxes[4*Le],y1:this.bboxes[4*Le+1],x2:this.bboxes[4*Le+2],y2:this.bboxes[4*Le+3]});for(let Le=0;Le<this.circleKeys.length;Le++){const Ve=this.circles[3*Le],We=this.circles[3*Le+1],lt=this.circles[3*Le+2];we.push({key:this.circleKeys[Le],x1:Ve-lt,y1:We-lt,x2:Ve+lt,y2:We+lt})}}else this._forEachCell(s,C,N,W,this._queryCell,we,{hitTest:K,overlapMode:he,seenUids:{box:{},circle:{}}},ge);return we}query(s,C,N,W){return this._query(s,C,N,W,!1,null)}hitTest(s,C,N,W,K,he){return this._query(s,C,N,W,!0,K,he).length>0}hitTestCircle(s,C,N,W,K){const he=s-N,ge=s+N,we=C-N,Le=C+N;if(ge<0||he>this.width||Le<0||we>this.height)return!1;const Ve=[];return this._forEachCell(he,we,ge,Le,this._queryCellCircle,Ve,{hitTest:!0,overlapMode:W,circle:{x:s,y:C,radius:N},seenUids:{box:{},circle:{}}},K),Ve.length>0}_queryCell(s,C,N,W,K,he,ge,we){const{seenUids:Le,hitTest:Ve,overlapMode:We}=ge,lt=this.boxCells[K];if(null!==lt){const kt=this.bboxes;for(const Ft of lt)if(!Le.box[Ft]){Le.box[Ft]=!0;const It=4*Ft,ln=this.boxKeys[Ft];if(s<=kt[It+2]&&C<=kt[It+3]&&N>=kt[It+0]&&W>=kt[It+1]&&(!we||we(ln))&&(!Ve||!an(We,ln.overlapMode))&&(he.push({key:ln,x1:kt[It],y1:kt[It+1],x2:kt[It+2],y2:kt[It+3]}),Ve))return!0}}const Tt=this.circleCells[K];if(null!==Tt){const kt=this.circles;for(const Ft of Tt)if(!Le.circle[Ft]){Le.circle[Ft]=!0;const It=3*Ft,ln=this.circleKeys[Ft];if(this._circleAndRectCollide(kt[It],kt[It+1],kt[It+2],s,C,N,W)&&(!we||we(ln))&&(!Ve||!an(We,ln.overlapMode))){const zn=kt[It],Xt=kt[It+1],fn=kt[It+2];if(he.push({key:ln,x1:zn-fn,y1:Xt-fn,x2:zn+fn,y2:Xt+fn}),Ve)return!0}}}return!1}_queryCellCircle(s,C,N,W,K,he,ge,we){const{circle:Le,seenUids:Ve,overlapMode:We}=ge,lt=this.boxCells[K];if(null!==lt){const kt=this.bboxes;for(const Ft of lt)if(!Ve.box[Ft]){Ve.box[Ft]=!0;const It=4*Ft,ln=this.boxKeys[Ft];if(this._circleAndRectCollide(Le.x,Le.y,Le.radius,kt[It+0],kt[It+1],kt[It+2],kt[It+3])&&(!we||we(ln))&&!an(We,ln.overlapMode))return he.push(!0),!0}}const Tt=this.circleCells[K];if(null!==Tt){const kt=this.circles;for(const Ft of Tt)if(!Ve.circle[Ft]){Ve.circle[Ft]=!0;const It=3*Ft,ln=this.circleKeys[Ft];if(this._circlesCollide(kt[It],kt[It+1],kt[It+2],Le.x,Le.y,Le.radius)&&(!we||we(ln))&&!an(We,ln.overlapMode))return he.push(!0),!0}}}_forEachCell(s,C,N,W,K,he,ge,we){const Le=this._convertToXCellCoord(s),Ve=this._convertToYCellCoord(C),We=this._convertToXCellCoord(N),lt=this._convertToYCellCoord(W);for(let Tt=Le;Tt<=We;Tt++)for(let kt=Ve;kt<=lt;kt++)if(K.call(this,s,C,N,W,this.xCellCount*kt+Tt,he,ge,we))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,C,N,W,K,he){const ge=W-s,we=K-C,Le=N+he;return Le*Le>ge*ge+we*we}_circleAndRectCollide(s,C,N,W,K,he,ge){const we=(he-W)/2,Le=Math.abs(s-(W+we));if(Le>we+N)return!1;const Ve=(ge-K)/2,We=Math.abs(C-(K+Ve));if(We>Ve+N)return!1;if(Le<=we||We<=Ve)return!0;const lt=Le-we,Tt=We-Ve;return lt*lt+Tt*Tt<=N*N}}function _i(H,s,C,N,W){const K=u.create();return s?(u.scale(K,K,[1/W,1/W,1]),C||u.rotateZ(K,K,N.angle)):u.multiply(K,N.labelPlaneMatrix,H),K}function vi(H,s,C,N,W){if(s){const K=u.clone(H);return u.scale(K,K,[W,W,1]),C||u.rotateZ(K,K,-N.angle),K}return N.glCoordMatrix}function qn(H,s,C){let N;C?(N=[H.x,H.y,C(H.x,H.y),1],u.transformMat4(N,N,s)):(N=[H.x,H.y,0,1],Qe(N,N,s));const W=N[3];return{point:new u.Point(N[0]/W,N[1]/W),signedDistanceFromCamera:W}}function Pi(H,s){return.5+H/s*.5}function ci(H,s){const C=H[0]/H[3],N=H[1]/H[3];return C>=-s[0]&&C<=s[0]&&N>=-s[1]&&N<=s[1]}function Ei(H,s,C,N,W,K,he,ge,we,Le){const Ve=N?H.textSizeData:H.iconSizeData,We=u.evaluateSizeForZoom(Ve,C.transform.zoom),lt=[256/C.width*2+1,256/C.height*2+1],Tt=N?H.text.dynamicLayoutVertexArray:H.icon.dynamicLayoutVertexArray;Tt.clear();const kt=H.lineVertexArray,Ft=N?H.text.placedSymbolArray:H.icon.placedSymbolArray,It=C.transform.width/C.transform.height;let ln=!1;for(let zn=0;zn<Ft.length;zn++){const Xt=Ft.get(zn);if(Xt.hidden||Xt.writingMode===u.WritingMode.vertical&&!ln){Se(Xt.numGlyphs,Tt);continue}let fn;if(ln=!1,Le?(fn=[Xt.anchorX,Xt.anchorY,Le(Xt.anchorX,Xt.anchorY),1],u.transformMat4(fn,fn,s)):(fn=[Xt.anchorX,Xt.anchorY,0,1],Qe(fn,fn,s)),!ci(fn,lt)){Se(Xt.numGlyphs,Tt);continue}const Fn=Pi(C.transform.cameraToCenterDistance,fn[3]),Hn=u.evaluateSizeForFeature(Ve,We,Xt),Bn=he?Hn/Fn:Hn*Fn,ii=new u.Point(Xt.anchorX,Xt.anchorY),ti=qn(ii,W,Le).point,hi={projections:{},offsets:{}},Wi=ji(Xt,Bn,!1,ge,s,W,K,H.glyphOffsetArray,kt,Tt,ti,ii,hi,It,we,Le);ln=Wi.useVertical,(Wi.notEnoughRoom||ln||Wi.needsFlipping&&ji(Xt,Bn,!0,ge,s,W,K,H.glyphOffsetArray,kt,Tt,ti,ii,hi,It,we,Le).notEnoughRoom)&&Se(Xt.numGlyphs,Tt)}N?H.text.dynamicLayoutVertexBuffer.updateData(Tt):H.icon.dynamicLayoutVertexBuffer.updateData(Tt)}function Mi(H,s,C,N,W,K,he,ge,we,Le,Ve,We,lt){const Tt=ge.glyphStartIndex+ge.numGlyphs,kt=ge.lineStartIndex,Ft=ge.lineStartIndex+ge.lineLength,It=s.getoffsetX(ge.glyphStartIndex),ln=s.getoffsetX(Tt-1),zn=Je(H*It,C,N,W,K,he,ge.segment,kt,Ft,we,Le,Ve,We,lt);if(!zn)return null;const Xt=Je(H*ln,C,N,W,K,he,ge.segment,kt,Ft,we,Le,Ve,We,lt);return Xt?{first:zn,last:Xt}:null}function Zi(H,s,C,N){return H===u.WritingMode.horizontal&&Math.abs(C.y-s.y)>Math.abs(C.x-s.x)*N?{useVertical:!0}:(H===u.WritingMode.vertical?s.y<C.y:s.x>C.x)?{needsFlipping:!0}:null}function ji(H,s,C,N,W,K,he,ge,we,Le,Ve,We,lt,Tt,kt,Ft){const It=s/24,ln=H.lineOffsetX*It,zn=H.lineOffsetY*It;let Xt;if(H.numGlyphs>1){const fn=H.glyphStartIndex+H.numGlyphs,Fn=H.lineStartIndex,Hn=H.lineStartIndex+H.lineLength,Bn=Mi(It,ge,ln,zn,C,Ve,We,H,we,K,lt,kt,Ft);if(!Bn)return{notEnoughRoom:!0};const ii=qn(Bn.first.point,he,Ft).point,ti=qn(Bn.last.point,he,Ft).point;if(N&&!C){const hi=Zi(H.writingMode,ii,ti,Tt);if(hi)return hi}Xt=[Bn.first];for(let hi=H.glyphStartIndex+1;hi<fn-1;hi++)Xt.push(Je(It*ge.getoffsetX(hi),ln,zn,C,Ve,We,H.segment,Fn,Hn,we,K,lt,kt,Ft));Xt.push(Bn.last)}else{if(N&&!C){const Fn=qn(We,W,Ft).point,Hn=H.lineStartIndex+H.segment+1,Bn=new u.Point(we.getx(Hn),we.gety(Hn)),ii=qn(Bn,W,Ft),ti=ii.signedDistanceFromCamera>0?ii.point:$i(We,Bn,Fn,1,W,Ft),hi=Zi(H.writingMode,Fn,ti,Tt);if(hi)return hi}const fn=Je(It*ge.getoffsetX(H.glyphStartIndex),ln,zn,C,Ve,We,H.segment,H.lineStartIndex,H.lineStartIndex+H.lineLength,we,K,lt,kt,Ft);if(!fn)return{notEnoughRoom:!0};Xt=[fn]}for(const fn of Xt)u.addDynamicAttributes(Le,fn.point,fn.angle);return{}}function $i(H,s,C,N,W,K){const he=qn(H.add(H.sub(s)._unit()),W,K).point,ge=C.sub(he);return C.add(ge._mult(N/ge.mag()))}function so(H,s){const{projectionCache:C,lineVertexArray:N,labelPlaneMatrix:W,tileAnchorPoint:K,distanceFromAnchor:he,getElevation:ge,previousVertex:we,direction:Le,absOffsetX:Ve}=s;if(C.projections[H])return C.projections[H];const We=new u.Point(N.getx(H),N.gety(H)),lt=qn(We,W,ge);if(lt.signedDistanceFromCamera>0)return C.projections[H]=lt.point,lt.point;const Tt=H-Le;return $i(0===he?K:new u.Point(N.getx(Tt),N.gety(Tt)),We,we,Ve-he+1,W,ge)}function Zn(H,s,C){return H._unit()._perp()._mult(s*C)}function zt(H,s,C,N,W,K,he,ge){const{projectionCache:we,direction:Le}=ge;if(we.offsets[H])return we.offsets[H];const Ve=C.add(s);if(H+Le<N||H+Le>=W)return we.offsets[H]=Ve,Ve;const We=so(H+Le,ge),lt=Zn(We.sub(C),he,Le),Tt=C.add(lt),kt=We.add(lt);return we.offsets[H]=u.findLineIntersection(K,Ve,Tt,kt)||Ve,we.offsets[H]}function Je(H,s,C,N,W,K,he,ge,we,Le,Ve,We,lt,Tt){const kt=N?H-s:H+s;let Ft=kt>0?1:-1,It=0;N&&(Ft*=-1,It=Math.PI),Ft<0&&(It+=Math.PI);let ln,zn,Xt=Ft>0?ge+he:ge+he+1,fn=W,Fn=W,Hn=0,Bn=0;const ii=Math.abs(kt),ti=[];let hi;for(;Hn+Bn<=ii;){if(Xt+=Ft,Xt<ge||Xt>=we)return null;Hn+=Bn,Fn=fn,zn=ln;const bi={projectionCache:We,lineVertexArray:Le,labelPlaneMatrix:Ve,tileAnchorPoint:K,distanceFromAnchor:Hn,getElevation:Tt,previousVertex:Fn,direction:Ft,absOffsetX:ii};if(fn=so(Xt,bi),0===C)ti.push(Fn),hi=fn.sub(Fn);else{let lr;const Yi=fn.sub(Fn);lr=0===Yi.mag()?Zn(so(Xt+Ft,bi).sub(fn),C,Ft):Zn(Yi,C,Ft),zn||(zn=Fn.add(lr)),ln=zt(Xt,lr,fn,ge,we,zn,C,bi),ti.push(zn),hi=ln.sub(zn)}Bn=hi.mag()}const Wi=hi._mult((ii-Hn)/Bn)._add(zn||Fn),qr=It+Math.atan2(fn.y-Fn.y,fn.x-Fn.x);return ti.push(Wi),{point:Wi,angle:lt?qr:0,path:ti}}const nt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Se(H,s){for(let C=0;C<H;C++){const N=s.length;s.resize(N+4),s.float32.set(nt,3*N)}}function Qe(H,s,C){const N=s[0],W=s[1];return H[0]=C[0]*N+C[4]*W+C[12],H[1]=C[1]*N+C[5]*W+C[13],H[3]=C[3]*N+C[7]*W+C[15],H}const ot=100;class dt{constructor(s,C=new cn(s.width+200,s.height+200,25),N=new cn(s.width+200,s.height+200,25)){this.transform=s,this.grid=C,this.ignoredGrid=N,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+ot,this.screenBottomBoundary=s.height+ot,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,C,N,W,K,he){const ge=this.projectAndGetPerspectiveRatio(W,s.anchorPointX,s.anchorPointY,he),we=N*ge.perspectiveRatio,Le=s.x1*we+ge.point.x,Ve=s.y1*we+ge.point.y,We=s.x2*we+ge.point.x,lt=s.y2*we+ge.point.y;return!this.isInsideGrid(Le,Ve,We,lt)||"always"!==C&&this.grid.hitTest(Le,Ve,We,lt,C,K)||ge.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Le,Ve,We,lt],offscreen:this.isOffscreen(Le,Ve,We,lt)}}placeCollisionCircles(s,C,N,W,K,he,ge,we,Le,Ve,We,lt,Tt,kt){const Ft=[],It=new u.Point(C.anchorX,C.anchorY),ln=qn(It,he,kt),zn=Pi(this.transform.cameraToCenterDistance,ln.signedDistanceFromCamera),Xt=(Ve?K/zn:K*zn)/u.ONE_EM,fn=qn(It,ge,kt).point,Fn=Mi(Xt,W,C.lineOffsetX*Xt,C.lineOffsetY*Xt,!1,fn,It,C,N,ge,{projections:{},offsets:{}},!1,kt);let Hn=!1,Bn=!1,ii=!0;if(Fn){const ti=.5*lt*zn+Tt,hi=new u.Point(-100,-100),Wi=new u.Point(this.screenRightBoundary,this.screenBottomBoundary),qr=new un,bi=Fn.first,lr=Fn.last;let Yi=[];for(let fr=bi.path.length-1;fr>=1;fr--)Yi.push(bi.path[fr]);for(let fr=1;fr<lr.path.length;fr++)Yi.push(lr.path[fr]);const ha=2.5*ti;if(we){const fr=Yi.map(ir=>qn(ir,we,kt));Yi=fr.some(ir=>ir.signedDistanceFromCamera<=0)?[]:fr.map(ir=>ir.point)}let Kr=[];if(Yi.length>0){const fr=Yi[0].clone(),ir=Yi[0].clone();for(let cs=1;cs<Yi.length;cs++)fr.x=Math.min(fr.x,Yi[cs].x),fr.y=Math.min(fr.y,Yi[cs].y),ir.x=Math.max(ir.x,Yi[cs].x),ir.y=Math.max(ir.y,Yi[cs].y);Kr=fr.x>=hi.x&&ir.x<=Wi.x&&fr.y>=hi.y&&ir.y<=Wi.y?[Yi]:ir.x<hi.x||fr.x>Wi.x||ir.y<hi.y||fr.y>Wi.y?[]:u.clipLine([Yi],hi.x,hi.y,Wi.x,Wi.y)}for(const fr of Kr){qr.reset(fr,.25*ti);let ir=0;ir=qr.length<=.5*ti?1:Math.ceil(qr.paddedLength/ha)+1;for(let cs=0;cs<ir;cs++){const va=cs/Math.max(ir-1,1),ls=qr.lerp(va),X1=ls.x+ot,As=ls.y+ot;Ft.push(X1,As,ti,0);const x1=X1-ti,Bs=As-ti,f2=X1+ti,O2=As+ti;if(ii=ii&&this.isOffscreen(x1,Bs,f2,O2),Bn=Bn||this.isInsideGrid(x1,Bs,f2,O2),"always"!==s&&this.grid.hitTestCircle(X1,As,ti,s,We)&&(Hn=!0,!Le))return{circles:[],offscreen:!1,collisionDetected:Hn}}}}return{circles:!Le&&Hn||!Bn||zn<this.perspectiveRatioCutoff?[]:Ft,offscreen:ii,collisionDetected:Hn}}queryRenderedSymbols(s){if(0===s.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const C=[];let N=1/0,W=1/0,K=-1/0,he=-1/0;for(const Ve of s){const We=new u.Point(Ve.x+ot,Ve.y+ot);N=Math.min(N,We.x),W=Math.min(W,We.y),K=Math.max(K,We.x),he=Math.max(he,We.y),C.push(We)}const ge=this.grid.query(N,W,K,he).concat(this.ignoredGrid.query(N,W,K,he)),we={},Le={};for(const Ve of ge){const We=Ve.key;if(void 0===we[We.bucketInstanceId]&&(we[We.bucketInstanceId]={}),we[We.bucketInstanceId][We.featureIndex])continue;const lt=[new u.Point(Ve.x1,Ve.y1),new u.Point(Ve.x2,Ve.y1),new u.Point(Ve.x2,Ve.y2),new u.Point(Ve.x1,Ve.y2)];u.polygonIntersectsPolygon(C,lt)&&(we[We.bucketInstanceId][We.featureIndex]=!0,void 0===Le[We.bucketInstanceId]&&(Le[We.bucketInstanceId]=[]),Le[We.bucketInstanceId].push(We.featureIndex))}return Le}insertCollisionBox(s,C,N,W,K,he){(N?this.ignoredGrid:this.grid).insert({bucketInstanceId:W,featureIndex:K,collisionGroupID:he,overlapMode:C},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,C,N,W,K,he){const ge=N?this.ignoredGrid:this.grid,we={bucketInstanceId:W,featureIndex:K,collisionGroupID:he,overlapMode:C};for(let Le=0;Le<s.length;Le+=4)ge.insertCircle(we,s[Le],s[Le+1],s[Le+2])}projectAndGetPerspectiveRatio(s,C,N,W){let K;return W?(K=[C,N,W(C,N),1],u.transformMat4(K,K,s)):(K=[C,N,0,1],Qe(K,K,s)),{point:new u.Point((K[0]/K[3]+1)/2*this.transform.width+ot,(-K[1]/K[3]+1)/2*this.transform.height+ot),perspectiveRatio:.5+this.transform.cameraToCenterDistance/K[3]*.5}}isOffscreen(s,C,N,W){return N<ot||s>=this.screenRightBoundary||W<ot||C>this.screenBottomBoundary}isInsideGrid(s,C,N,W){return N>=0&&s<this.gridRightBoundary&&W>=0&&C<this.gridBottomBoundary}getViewportMatrix(){const s=u.identity([]);return u.translate(s,s,[-100,-100,0]),s}}function Pt(H,s,C){return s*(u.EXTENT/(H.tileSize*Math.pow(2,C-H.tileID.overscaledZ)))}class At{constructor(s,C,N,W){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?C:-C))):W&&N?1:0,this.placed=N}isHidden(){return 0===this.opacity&&!this.placed}}class Wt{constructor(s,C,N,W,K){this.text=new At(s?s.text:null,C,N,K),this.icon=new At(s?s.icon:null,C,W,K)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Yt{constructor(s,C,N){this.text=s,this.icon=C,this.skipFade=N}}class Bt{constructor(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]}}class $t{constructor(s,C,N,W,K){this.bucketInstanceId=s,this.featureIndex=C,this.sourceLayerIndex=N,this.bucketIndex=W,this.tileID=K}}class vn{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const C=++this.maxGroupID;this.collisionGroups[s]={ID:C,predicate:N=>N.collisionGroupID===C}}return this.collisionGroups[s]}}function Cn(H,s,C,N,W){const{horizontalAlign:K,verticalAlign:he}=u.getAnchorAlignment(H);return new u.Point(-(K-.5)*s+N[0]*W,-(he-.5)*C+N[1]*W)}function xn(H,s,C,N,W,K){const{x1:he,x2:ge,y1:we,y2:Le,anchorPointX:Ve,anchorPointY:We}=H,lt=new u.Point(s,C);return N&&lt._rotate(W?K:-K),{x1:he+lt.x,y1:we+lt.y,x2:ge+lt.x,y2:Le+lt.y,anchorPointX:Ve,anchorPointY:We}}class jn{constructor(s,C,N,W,K){this.transform=s.clone(),this.terrain=C,this.collisionIndex=new dt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=N,this.retainedQueryData={},this.collisionGroups=new vn(W),this.collisionCircleArrays={},this.prevPlacement=K,K&&(K.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,C,N,W){const K=N.getBucket(C),he=N.latestFeatureIndex;if(!K||!he||C.id!==K.layerIds[0])return;const ge=N.collisionBoxArray,we=K.layers[0].layout,Le=Math.pow(2,this.transform.zoom-N.tileID.overscaledZ),Ve=N.tileSize/u.EXTENT,We=this.transform.calculatePosMatrix(N.tileID.toUnwrapped()),lt="map"===we.get("text-pitch-alignment"),Tt="map"===we.get("text-rotation-alignment"),kt=Pt(N,1,this.transform.zoom),Ft=_i(We,lt,Tt,this.transform,kt);let It=null;if(lt){const zn=vi(We,lt,Tt,this.transform,kt);It=u.multiply([],this.transform.labelPlaneMatrix,zn)}this.retainedQueryData[K.bucketInstanceId]=new $t(K.bucketInstanceId,he,K.sourceLayerIndex,K.index,N.tileID);const ln={bucket:K,layout:we,posMatrix:We,textLabelPlaneMatrix:Ft,labelToScreenMatrix:It,scale:Le,textPixelRatio:Ve,holdingForFade:N.holdingForFade(),collisionBoxArray:ge,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(K.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(K.sourceID)};if(W)for(const zn of K.sortKeyRanges){const{sortKey:Xt,symbolInstanceStart:fn,symbolInstanceEnd:Fn}=zn;s.push({sortKey:Xt,symbolInstanceStart:fn,symbolInstanceEnd:Fn,parameters:ln})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:K.symbolInstances.length,parameters:ln})}attemptAnchorPlacement(s,C,N,W,K,he,ge,we,Le,Ve,We,lt,Tt,kt,Ft,It){const ln=u.TextAnchorEnum[s.textAnchor],zn=[s.textOffset0,s.textOffset1],Xt=Cn(ln,N,W,zn,K),fn=this.collisionIndex.placeCollisionBox(xn(C,Xt.x,Xt.y,he,ge,this.transform.angle),We,we,Le,Ve.predicate,It);if((!Ft||0!==this.collisionIndex.placeCollisionBox(xn(Ft,Xt.x,Xt.y,he,ge,this.transform.angle),We,we,Le,Ve.predicate,It).box.length)&&fn.box.length>0){let Fn;if(this.prevPlacement&&this.prevPlacement.variableOffsets[lt.crossTileID]&&this.prevPlacement.placements[lt.crossTileID]&&this.prevPlacement.placements[lt.crossTileID].text&&(Fn=this.prevPlacement.variableOffsets[lt.crossTileID].anchor),0===lt.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[lt.crossTileID]={textOffset:zn,width:N,height:W,anchor:ln,textBoxScale:K,prevAnchor:Fn},this.markUsedJustification(Tt,ln,lt,kt),Tt.allowVerticalPlacement&&(this.markUsedOrientation(Tt,kt,lt),this.placedOrientations[lt.crossTileID]=kt),{shift:Xt,placedGlyphBoxes:fn}}}placeLayerBucketPart(s,C,N){const{bucket:W,layout:K,posMatrix:he,textLabelPlaneMatrix:ge,labelToScreenMatrix:we,textPixelRatio:Le,holdingForFade:Ve,collisionBoxArray:We,partiallyEvaluatedTextSize:lt,collisionGroup:Tt}=s.parameters,kt=K.get("text-optional"),Ft=K.get("icon-optional"),It=u.getOverlapMode(K,"text-overlap","text-allow-overlap"),ln="always"===It,zn=u.getOverlapMode(K,"icon-overlap","icon-allow-overlap"),Xt="always"===zn,fn="map"===K.get("text-rotation-alignment"),Fn="map"===K.get("text-pitch-alignment"),Hn="none"!==K.get("icon-text-fit"),Bn="viewport-y"===K.get("symbol-z-order"),ii=ln&&(Xt||!W.hasIconData()||Ft),ti=Xt&&(ln||!W.hasTextData()||kt);!W.collisionArrays&&We&&W.deserializeCollisionBoxes(We);const hi=this.retainedQueryData[W.bucketInstanceId].tileID,Wi=this.terrain?(bi,lr)=>this.terrain.getElevation(hi,bi,lr):null,qr=(bi,lr)=>{var Yi,ha;if(C[bi.crossTileID])return;if(Ve)return void(this.placements[bi.crossTileID]=new Yt(!1,!1,!1));let Kr=!1,fr=!1,ir=!0,cs=null,va={box:null,offscreen:null},ls={box:null,offscreen:null},X1=null,As=null,x1=null,Bs=0,f2=0,O2=0;lr.textFeatureIndex?Bs=lr.textFeatureIndex:bi.useRuntimeCollisionCircles&&(Bs=bi.featureIndex),lr.verticalTextFeatureIndex&&(f2=lr.verticalTextFeatureIndex);const Wl=lr.textBox;if(Wl){const Js=w1=>{let er=u.WritingMode.horizontal;if(W.allowVerticalPlacement&&!w1&&this.prevPlacement){const $1=this.prevPlacement.placedOrientations[bi.crossTileID];$1&&(this.placedOrientations[bi.crossTileID]=$1,er=$1,this.markUsedOrientation(W,er,bi))}return er},p1=(w1,er)=>{if(W.allowVerticalPlacement&&bi.numVerticalGlyphVertices>0&&lr.verticalTextBox){for(const $1 of W.writingModes)if($1===u.WritingMode.vertical?(va=er(),ls=va):va=w1(),va&&va.box&&va.box.length)break}else va=w1()},Z1=bi.textAnchorOffsetStartIndex,Cl=bi.textAnchorOffsetEndIndex;if(Cl===Z1){const w1=(er,$1)=>{const zs=this.collisionIndex.placeCollisionBox(er,It,Le,he,Tt.predicate,Wi);return zs&&zs.box&&zs.box.length&&(this.markUsedOrientation(W,$1,bi),this.placedOrientations[bi.crossTileID]=$1),zs};p1(()=>w1(Wl,u.WritingMode.horizontal),()=>{const er=lr.verticalTextBox;return W.allowVerticalPlacement&&bi.numVerticalGlyphVertices>0&&er?w1(er,u.WritingMode.vertical):{box:null,offscreen:null}}),Js(va&&va.box&&va.box.length)}else{let w1=u.TextAnchorEnum[null===(ha=null===(Yi=this.prevPlacement)||void 0===Yi?void 0:Yi.variableOffsets[bi.crossTileID])||void 0===ha?void 0:ha.anchor];const er=(zs,Y2,p2)=>{const al=zs.x2-zs.x1,n4=zs.y2-zs.y1,Jc=bi.textBoxScale,Y3=Hn&&"never"===zn?Y2:null;let Ml={box:[],offscreen:!1},Ps="never"===It?1:2,nu="never";w1&&Ps++;for(let r4=0;r4<Ps;r4++){for(let Jn=Z1;Jn<Cl;Jn++){const no=W.textAnchorOffsets.get(Jn);if(w1&&no.textAnchor!==w1)continue;const Qr=this.attemptAnchorPlacement(no,zs,al,n4,Jc,fn,Fn,Le,he,Tt,nu,bi,W,p2,Y3,Wi);if(Qr&&(Ml=Qr.placedGlyphBoxes,Ml&&Ml.box&&Ml.box.length))return Kr=!0,cs=Qr.shift,Ml}w1?w1=null:nu=It}return Ml};p1(()=>er(Wl,lr.iconBox,u.WritingMode.horizontal),()=>{const zs=lr.verticalTextBox;return W.allowVerticalPlacement&&!(va&&va.box&&va.box.length)&&bi.numVerticalGlyphVertices>0&&zs?er(zs,lr.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),va&&(Kr=va.box,ir=va.offscreen);const $1=Js(va&&va.box);if(!Kr&&this.prevPlacement){const zs=this.prevPlacement.variableOffsets[bi.crossTileID];zs&&(this.variableOffsets[bi.crossTileID]=zs,this.markUsedJustification(W,zs.anchor,bi,$1))}}}if(X1=va,Kr=X1&&X1.box&&X1.box.length>0,ir=X1&&X1.offscreen,bi.useRuntimeCollisionCircles){const Js=W.text.placedSymbolArray.get(bi.centerJustifiedTextSymbolIndex),p1=u.evaluateSizeForFeature(W.textSizeData,lt,Js),Z1=K.get("text-padding");As=this.collisionIndex.placeCollisionCircles(It,Js,W.lineVertexArray,W.glyphOffsetArray,p1,he,ge,we,N,Fn,Tt.predicate,bi.collisionCircleDiameter,Z1,Wi),As.circles.length&&As.collisionDetected&&!N&&u.warnOnce("Collisions detected, but collision boxes are not shown"),Kr=ln||As.circles.length>0&&!As.collisionDetected,ir=ir&&As.offscreen}if(lr.iconFeatureIndex&&(O2=lr.iconFeatureIndex),lr.iconBox){const Js=p1=>{const Z1=Hn&&cs?xn(p1,cs.x,cs.y,fn,Fn,this.transform.angle):p1;return this.collisionIndex.placeCollisionBox(Z1,zn,Le,he,Tt.predicate,Wi)};ls&&ls.box&&ls.box.length&&lr.verticalIconBox?(x1=Js(lr.verticalIconBox),fr=x1.box.length>0):(x1=Js(lr.iconBox),fr=x1.box.length>0),ir=ir&&x1.offscreen}const bc=kt||0===bi.numHorizontalGlyphVertices&&0===bi.numVerticalGlyphVertices,k2=Ft||0===bi.numIconVertices;if(bc||k2?k2?bc||(fr=fr&&Kr):Kr=fr&&Kr:fr=Kr=fr&&Kr,Kr&&X1&&X1.box&&this.collisionIndex.insertCollisionBox(X1.box,It,K.get("text-ignore-placement"),W.bucketInstanceId,ls&&ls.box&&f2?f2:Bs,Tt.ID),fr&&x1&&this.collisionIndex.insertCollisionBox(x1.box,zn,K.get("icon-ignore-placement"),W.bucketInstanceId,O2,Tt.ID),As&&(Kr&&this.collisionIndex.insertCollisionCircles(As.circles,It,K.get("text-ignore-placement"),W.bucketInstanceId,Bs,Tt.ID),N)){const Js=W.bucketInstanceId;let p1=this.collisionCircleArrays[Js];void 0===p1&&(p1=this.collisionCircleArrays[Js]=new Bt);for(let Z1=0;Z1<As.circles.length;Z1+=4)p1.circles.push(As.circles[Z1+0]),p1.circles.push(As.circles[Z1+1]),p1.circles.push(As.circles[Z1+2]),p1.circles.push(As.collisionDetected?1:0)}if(0===bi.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===W.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[bi.crossTileID]=new Yt(Kr||ii,fr||ti,ir||W.justReloaded),C[bi.crossTileID]=!0};if(Bn){if(0!==s.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const bi=W.getSortedSymbolIndexes(this.transform.angle);for(let lr=bi.length-1;lr>=0;--lr){const Yi=bi[lr];qr(W.symbolInstances.get(Yi),W.collisionArrays[Yi])}}else for(let bi=s.symbolInstanceStart;bi<s.symbolInstanceEnd;bi++)qr(W.symbolInstances.get(bi),W.collisionArrays[bi]);if(N&&W.bucketInstanceId in this.collisionCircleArrays){const bi=this.collisionCircleArrays[W.bucketInstanceId];u.invert(bi.invProjMatrix,he),bi.viewportMatrix=this.collisionIndex.getViewportMatrix()}W.justReloaded=!1}markUsedJustification(s,C,N,W){let K;K=W===u.WritingMode.vertical?N.verticalPlacedTextSymbolIndex:{left:N.leftJustifiedTextSymbolIndex,center:N.centerJustifiedTextSymbolIndex,right:N.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(C)];const he=[N.leftJustifiedTextSymbolIndex,N.centerJustifiedTextSymbolIndex,N.rightJustifiedTextSymbolIndex,N.verticalPlacedTextSymbolIndex];for(const ge of he)ge>=0&&(s.text.placedSymbolArray.get(ge).crossTileID=K>=0&&ge!==K?0:N.crossTileID)}markUsedOrientation(s,C,N){const W=C===u.WritingMode.horizontal||C===u.WritingMode.horizontalOnly?C:0,K=C===u.WritingMode.vertical?C:0,he=[N.leftJustifiedTextSymbolIndex,N.centerJustifiedTextSymbolIndex,N.rightJustifiedTextSymbolIndex];for(const ge of he)s.text.placedSymbolArray.get(ge).placedOrientation=W;N.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(N.verticalPlacedTextSymbolIndex).placedOrientation=K)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const C=this.prevPlacement;let N=!1;this.prevZoomAdjustment=C?C.zoomAdjustment(this.transform.zoom):0;const W=C?C.symbolFadeChange(s):1,K=C?C.opacities:{},he=C?C.variableOffsets:{},ge=C?C.placedOrientations:{};for(const we in this.placements){const Le=this.placements[we],Ve=K[we];Ve?(this.opacities[we]=new Wt(Ve,W,Le.text,Le.icon),N=N||Le.text!==Ve.text.placed||Le.icon!==Ve.icon.placed):(this.opacities[we]=new Wt(null,W,Le.text,Le.icon,Le.skipFade),N=N||Le.text||Le.icon)}for(const we in K){const Le=K[we];if(!this.opacities[we]){const Ve=new Wt(Le,W,!1,!1);Ve.isHidden()||(this.opacities[we]=Ve,N=N||Le.text.placed||Le.icon.placed)}}for(const we in he)this.variableOffsets[we]||!this.opacities[we]||this.opacities[we].isHidden()||(this.variableOffsets[we]=he[we]);for(const we in ge)this.placedOrientations[we]||!this.opacities[we]||this.opacities[we].isHidden()||(this.placedOrientations[we]=ge[we]);if(C&&void 0===C.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");N?this.lastPlacementChangeTime=s:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=C?C.lastPlacementChangeTime:s)}updateLayerOpacities(s,C){const N={};for(const W of C){const K=W.getBucket(s);K&&W.latestFeatureIndex&&s.id===K.layerIds[0]&&this.updateBucketOpacities(K,N,W.collisionBoxArray)}}updateBucketOpacities(s,C,N){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const W=s.layers[0],K=W.layout,he=new Wt(null,0,!1,!1,!0),ge=K.get("text-allow-overlap"),we=K.get("icon-allow-overlap"),Le=W._unevaluatedLayout.hasValue("text-variable-anchor")||W._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ve="map"===K.get("text-rotation-alignment"),We="map"===K.get("text-pitch-alignment"),lt="none"!==K.get("icon-text-fit"),Tt=new Wt(null,0,ge&&(we||!s.hasIconData()||K.get("icon-optional")),we&&(ge||!s.hasTextData()||K.get("text-optional")),!0);!s.collisionArrays&&N&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(N);const kt=(Ft,It,ln)=>{for(let zn=0;zn<It/4;zn++)Ft.opacityVertexArray.emplaceBack(ln);Ft.hasVisibleVertices=Ft.hasVisibleVertices||ln!==to};for(let Ft=0;Ft<s.symbolInstances.length;Ft++){const It=s.symbolInstances.get(Ft),{numHorizontalGlyphVertices:ln,numVerticalGlyphVertices:zn,crossTileID:Xt}=It;let fn=this.opacities[Xt];C[Xt]?fn=he:fn||(fn=Tt,this.opacities[Xt]=fn),C[Xt]=!0;const Fn=It.numIconVertices>0,Hn=this.placedOrientations[It.crossTileID],Bn=Hn===u.WritingMode.vertical,ii=Hn===u.WritingMode.horizontal||Hn===u.WritingMode.horizontalOnly;if(ln>0||zn>0){const ti=Ri(fn.text);kt(s.text,ln,Bn?to:ti),kt(s.text,zn,ii?to:ti);const hi=fn.text.isHidden();[It.rightJustifiedTextSymbolIndex,It.centerJustifiedTextSymbolIndex,It.leftJustifiedTextSymbolIndex].forEach(bi=>{bi>=0&&(s.text.placedSymbolArray.get(bi).hidden=hi||Bn?1:0)}),It.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(It.verticalPlacedTextSymbolIndex).hidden=hi||ii?1:0);const Wi=this.variableOffsets[It.crossTileID];Wi&&this.markUsedJustification(s,Wi.anchor,It,Hn);const qr=this.placedOrientations[It.crossTileID];qr&&(this.markUsedJustification(s,"left",It,qr),this.markUsedOrientation(s,qr,It))}if(Fn){const ti=Ri(fn.icon),hi=!(lt&&It.verticalPlacedIconSymbolIndex&&Bn);It.placedIconSymbolIndex>=0&&(kt(s.icon,It.numIconVertices,hi?ti:to),s.icon.placedSymbolArray.get(It.placedIconSymbolIndex).hidden=fn.icon.isHidden()),It.verticalPlacedIconSymbolIndex>=0&&(kt(s.icon,It.numVerticalIconVertices,hi?to:ti),s.icon.placedSymbolArray.get(It.verticalPlacedIconSymbolIndex).hidden=fn.icon.isHidden())}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const ti=s.collisionArrays[Ft];if(ti){let hi=new u.Point(0,0);if(ti.textBox||ti.verticalTextBox){let qr=!0;if(Le){const bi=this.variableOffsets[Xt];bi?(hi=Cn(bi.anchor,bi.width,bi.height,bi.textOffset,bi.textBoxScale),Ve&&hi._rotate(We?this.transform.angle:-this.transform.angle)):qr=!1}ti.textBox&&jt(s.textCollisionBox.collisionVertexArray,fn.text.placed,!qr||Bn,hi.x,hi.y),ti.verticalTextBox&&jt(s.textCollisionBox.collisionVertexArray,fn.text.placed,!qr||ii,hi.x,hi.y)}const Wi=!(ii||!ti.verticalIconBox);ti.iconBox&&jt(s.iconCollisionBox.collisionVertexArray,fn.icon.placed,Wi,lt?hi.x:0,lt?hi.y:0),ti.verticalIconBox&&jt(s.iconCollisionBox.collisionVertexArray,fn.icon.placed,!Wi,lt?hi.x:0,lt?hi.y:0)}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const Ft=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=Ft.invProjMatrix,s.placementViewportMatrix=Ft.viewportMatrix,s.collisionCircleArray=Ft.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return 0===this.fadeDuration?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,C){const N=this.zoomAtLastRecencyCheck===C?1-this.zoomAdjustment(C):1;return this.zoomAtLastRecencyCheck=C,this.commitTime+this.fadeDuration*N>s}setStale(){this.stale=!0}}function jt(H,s,C,N,W){H.emplaceBack(s?1:0,C?1:0,N||0,W||0),H.emplaceBack(s?1:0,C?1:0,N||0,W||0),H.emplaceBack(s?1:0,C?1:0,N||0,W||0),H.emplaceBack(s?1:0,C?1:0,N||0,W||0)}const Dn=Math.pow(2,25),Ke=Math.pow(2,24),si=Math.pow(2,17),xr=Math.pow(2,16),Zr=Math.pow(2,9),Li=Math.pow(2,8),or=Math.pow(2,1);function Ri(H){if(0===H.opacity&&!H.placed)return 0;if(1===H.opacity&&H.placed)return 4294967295;const s=H.placed?1:0,C=Math.floor(127*H.opacity);return C*Dn+s*Ke+C*si+s*xr+C*Zr+s*Li+C*or+s}const to=0;class Vi{constructor(s){this._sortAcrossTiles="viewport-y"!==s.layout.get("symbol-z-order")&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,C,N,W,K){const he=this._bucketParts;for(;this._currentTileIndex<s.length;)if(C.getBucketParts(he,W,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,K())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,he.sort((ge,we)=>ge.sortKey-we.sortKey));this._currentPartIndex<he.length;)if(C.placeLayerBucketPart(he[this._currentPartIndex],this._seenCrossTileIDs,N),this._currentPartIndex++,K())return!0;return!1}}class Wn{constructor(s,C,N,W,K,he,ge,we){this.placement=new jn(s,C,he,ge,we),this._currentPlacementIndex=N.length-1,this._forceFullPlacement=W,this._showCollisionBoxes=K,this._done=!1}isDone(){return this._done}continuePlacement(s,C,N){const W=u.browser.now(),K=()=>!this._forceFullPlacement&&u.browser.now()-W>2;for(;this._currentPlacementIndex>=0;){const he=C[s[this._currentPlacementIndex]],ge=this.placement.collisionIndex.transform.zoom;if("symbol"===he.type&&(!he.minzoom||he.minzoom<=ge)&&(!he.maxzoom||he.maxzoom>ge)){if(this._inProgressLayer||(this._inProgressLayer=new Vi(he)),this._inProgressLayer.continuePlacement(N[he.source],this.placement,this._showCollisionBoxes,he,K))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Ii=512/u.EXTENT/2;class co{constructor(s,C,N){this.tileID=s,this.bucketInstanceId=N,this._symbolsByKey={};const W=new Map;for(let K=0;K<C.length;K++){const he=C.get(K),ge=he.key,we=W.get(ge);we?we.push(he):W.set(ge,[he])}for(const[K,he]of W){const ge={positions:he.map(we=>({x:Math.floor(we.anchorX*Ii),y:Math.floor(we.anchorY*Ii)})),crossTileIDs:he.map(we=>we.crossTileID)};if(ge.positions.length>128){const we=new u.KDBush(ge.positions.length,16,Uint16Array);for(const{x:Le,y:Ve}of ge.positions)we.add(Le,Ve);we.finish(),delete ge.positions,ge.index=we}this._symbolsByKey[K]=ge}}getScaledCoordinates(s,C){const{x:N,y:W,z:K}=this.tileID.canonical,{x:he,y:ge,z:we}=C.canonical,Le=Ii/Math.pow(2,we-K),Ve=(ge*u.EXTENT+s.anchorY)*Le,We=W*u.EXTENT*Ii;return{x:Math.floor((he*u.EXTENT+s.anchorX)*Le-N*u.EXTENT*Ii),y:Math.floor(Ve-We)}}findMatches(s,C,N){const W=this.tileID.canonical.z<C.canonical.z?1:Math.pow(2,this.tileID.canonical.z-C.canonical.z);for(let K=0;K<s.length;K++){const he=s.get(K);if(he.crossTileID)continue;const ge=this._symbolsByKey[he.key];if(!ge)continue;const we=this.getScaledCoordinates(he,C);if(ge.index){const Le=ge.index.range(we.x-W,we.y-W,we.x+W,we.y+W).sort();for(const Ve of Le){const We=ge.crossTileIDs[Ve];if(!N[We]){N[We]=!0,he.crossTileID=We;break}}}else if(ge.positions)for(let Le=0;Le<ge.positions.length;Le++){const Ve=ge.positions[Le],We=ge.crossTileIDs[Le];if(Math.abs(Ve.x-we.x)<=W&&Math.abs(Ve.y-we.y)<=W&&!N[We]){N[We]=!0,he.crossTileID=We;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class ro{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Po{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const C=Math.round((s-this.lng)/360);if(0!==C)for(const N in this.indexes){const W=this.indexes[N],K={};for(const he in W){const ge=W[he];ge.tileID=ge.tileID.unwrapTo(ge.tileID.wrap+C),K[ge.tileID.key]=ge}this.indexes[N]=K}this.lng=s}addBucket(s,C,N){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===C.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let K=0;K<C.symbolInstances.length;K++)C.symbolInstances.get(K).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const W=this.usedCrossTileIDs[s.overscaledZ];for(const K in this.indexes){const he=this.indexes[K];if(Number(K)>s.overscaledZ)for(const ge in he){const we=he[ge];we.tileID.isChildOf(s)&&we.findMatches(C.symbolInstances,s,W)}else{const ge=he[s.scaledTo(Number(K)).key];ge&&ge.findMatches(C.symbolInstances,s,W)}}for(let K=0;K<C.symbolInstances.length;K++){const he=C.symbolInstances.get(K);he.crossTileID||(he.crossTileID=N.generate(),W[he.crossTileID]=!0)}return void 0===this.indexes[s.overscaledZ]&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new co(s,C.symbolInstances,C.bucketInstanceId),!0}removeBucketCrossTileIDs(s,C){for(const N of C.getCrossTileIDsLists())for(const W of N)delete this.usedCrossTileIDs[s][W]}removeStaleBuckets(s){let C=!1;for(const N in this.indexes){const W=this.indexes[N];for(const K in W)s[W[K].bucketInstanceId]||(this.removeBucketCrossTileIDs(N,W[K]),delete W[K],C=!0)}return C}}class Mr{constructor(){this.layerIndexes={},this.crossTileIDs=new ro,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,C,N){let W=this.layerIndexes[s.id];void 0===W&&(W=this.layerIndexes[s.id]=new Po);let K=!1;const he={};W.handleWrapJump(N);for(const ge of C){const we=ge.getBucket(s);we&&s.id===we.layerIds[0]&&(we.bucketInstanceId||(we.bucketInstanceId=++this.maxBucketInstanceId),W.addBucket(ge.tileID,we,this.crossTileIDs)&&(K=!0),he[we.bucketInstanceId]=!0)}return W.removeStaleBuckets(he)&&(K=!0),K}pruneUnusedLayers(s){const C={};s.forEach(N=>{C[N]=!0});for(const N in this.layerIndexes)C[N]||delete this.layerIndexes[N]}}const ba=(H,s)=>u.emitValidationErrors(H,s&&s.filter(C=>"source.canvas"!==C.identifier)),at=u.pick(u.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),wt=u.pick(u.operations,["setCenter","setZoom","setBearing","setPitch"]),On=u.emptyStyle();class Nn extends u.Evented{constructor(s,C={}){super(),this.map=s,this.dispatcher=new pe(Vn(),this,s._getMapId()),this.imageManager=new ie,this.imageManager.setEventedParent(this),this.glyphManager=new Ce(s._requestManager,C.localIdeographFontFamily),this.lineAtlas=new de(256,512),this.crossTileSymbolIndex=new Mr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());const N=this;this._rtlTextPluginCallback=Nn.registerForPluginStateChange(W=>{N.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:W.pluginStatus,pluginURL:W.pluginURL},(K,he)=>{if(u.triggerPluginCompletionEvent(K),he&&he.every(ge=>ge))for(const ge in N.sourceCaches){const we=N.sourceCaches[ge].getSource().type;"vector"!==we&&"geojson"!==we||N.sourceCaches[ge].reload()}})}),this.on("data",W=>{if("source"!==W.dataType||"metadata"!==W.sourceDataType)return;const K=this.sourceCaches[W.sourceId];if(!K)return;const he=K.getSource();if(he&&he.vectorLayerIds)for(const ge in this._layers){const we=this._layers[ge];we.source===he.id&&this._validateLayer(we)}})}loadURL(s,C={},N){this.fire(new u.Event("dataloading",{dataType:"style"})),C.validate="boolean"!=typeof C.validate||C.validate;const W=this.map._requestManager.transformRequest(s,R.Style);this._request=u.getJSON(W,(K,he)=>{this._request=null,K?this.fire(new u.ErrorEvent(K)):he&&this._load(he,C,N)})}loadJSON(s,C={},N){this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.browser.frame(()=>{this._request=null,C.validate=!1!==C.validate,this._load(s,C,N)})}loadEmpty(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(On,{validate:!1})}_load(s,C,N){var W;const K=C.transformStyle?C.transformStyle(N,s):s;if(!C.validate||!ba(this,u.validateStyle(K))){this._loaded=!0,this.stylesheet=K;for(const he in K.sources)this.addSource(he,K.sources[he],{validate:!1});K.sprite?this._loadSprite(K.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(K.glyphs),this._createLayers(),this.light=new ee(this.stylesheet.light),this.map.setTerrain(null!==(W=this.stylesheet.terrain)&&void 0!==W?W:null),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}}_createLayers(){const s=u.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",s),this._order=s.map(C=>C.id),this._layers={},this._serializedLayers=null;for(const C of s){const N=u.createStyleLayer(C);N.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=N}}_loadSprite(s,C=!1,N=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(W,K,he,ge){const we=Q(W),Le=we.length,Ve=he>1?"@2x":"",We={},lt={},Tt={};for(const{id:kt,url:Ft}of we){const It=K.transformRequest(K.normalizeSpriteURL(Ft,Ve,".json"),R.SpriteJSON),ln=`${kt}_${It.url}`;We[ln]=u.getJSON(It,(fn,Fn)=>{delete We[ln],lt[kt]=Fn,$(ge,lt,Tt,fn,Le)});const zn=K.transformRequest(K.normalizeSpriteURL(Ft,Ve,".png"),R.SpriteImage),Xt=`${kt}_${zn.url}`;We[Xt]=D.getImage(zn,(fn,Fn)=>{delete We[Xt],Tt[kt]=Fn,$(ge,lt,Tt,fn,Le)})}return{cancel(){for(const kt of Object.values(We))kt.cancel()}}}(s,this.map._requestManager,this.map.getPixelRatio(),(W,K)=>{if(this._spriteRequest=null,W)this.fire(new u.ErrorEvent(W));else if(K)for(const he in K){this._spritesImagesIds[he]=[];const ge=this._spritesImagesIds[he]?this._spritesImagesIds[he].filter(we=>!(we in K)):[];for(const we of ge)this.imageManager.removeImage(we),this._changedImages[we]=!0;for(const we in K[he]){const Le="default"===he?we:`${he}:${we}`;this._spritesImagesIds[he].push(Le),Le in this.imageManager.images?this.imageManager.updateImage(Le,K[he][we],!1):this.imageManager.addImage(Le,K[he][we]),C&&(this._changedImages[Le]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),C&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"})),N&&N(W)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}_validateLayer(s){const C=this.sourceCaches[s.source];if(!C)return;const N=s.sourceLayer;if(!N)return;const W=C.getSource();("geojson"===W.type||W.vectorLayerIds&&-1===W.vectorLayerIds.indexOf(N))&&this.fire(new u.ErrorEvent(new Error(`Source layer "${N}" does not exist on source "${W.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s){const C=this._serializedAllLayers();if(!s||0===s.length)return Object.values(C);const N=[];for(const W of s)C[W]&&N.push(C[W]);return N}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const C=Object.keys(this._layers);for(const N of C){const W=this._layers[N];"custom"!==W.type&&(s[N]=W.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const C=this._changed;if(this._changed){const W=Object.keys(this._updatedLayers),K=Object.keys(this._removedLayers);(W.length||K.length)&&this._updateWorkerLayers(W,K);for(const he in this._updatedSources){const ge=this._updatedSources[he];if("reload"===ge)this._reloadSource(he);else{if("clear"!==ge)throw new Error(`Invalid action ${ge}`);this._clearSource(he)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const he in this._updatedPaintProps)this._layers[he].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}const N={};for(const W in this.sourceCaches){const K=this.sourceCaches[W];N[W]=K.used,K.used=!1}for(const W of this._order){const K=this._layers[W];K.recalculate(s,this._availableImages),!K.isHidden(s.zoom)&&K.source&&(this.sourceCaches[K.source].used=!0)}for(const W in N){const K=this.sourceCaches[W];N[W]!==K.used&&K.fire(new u.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:W}))}this.light.recalculate(s),this.z=s.zoom,C&&this.fire(new u.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const C in this.sourceCaches)this.sourceCaches[C].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,C){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(s),removedIds:C})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,C={}){this._checkLoaded();const N=this.serialize();if(s=C.transformStyle?C.transformStyle(N,s):s,ba(this,u.validateStyle(s)))return!1;(s=u.clone$1(s)).layers=u.derefLayers(s.layers);const W=u.diffStyles(N,s).filter(he=>!(he.command in wt));if(0===W.length)return!1;const K=W.filter(he=>!(he.command in at));if(K.length>0)throw new Error(`Unimplemented: ${K.map(he=>he.command).join(", ")}.`);for(const he of W)"setTransition"!==he.command&&this[he.command].apply(this,he.args);return this.stylesheet=s,!0}addImage(s,C){if(this.getImage(s))return this.fire(new u.ErrorEvent(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,C),this._afterImageUpdated(s)}updateImage(s,C){this.imageManager.updateImage(s,C)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new u.ErrorEvent(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,C,N={}){if(this._checkLoaded(),void 0!==this.sourceCaches[s])throw new Error(`Source "${s}" already exists.`);if(!C.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(C).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(C.type)>=0&&this._validate(u.validateStyle.source,`sources.${s}`,C,null,N))return;this.map&&this.map._collectResourceTiming&&(C.collectResourceTiming=!0);const W=this.sourceCaches[s]=new Ne(s,C,this.dispatcher);W.style=this,W.setEventedParent(this,()=>({isSourceLoaded:W.loaded(),source:W.serialize(),sourceId:s})),W.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error("There is no source with this ID");for(const N in this._layers)if(this._layers[N].source===s)return this.fire(new u.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${N}" is using it.`)));const C=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],C.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),C.setEventedParent(null),C.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,C){if(this._checkLoaded(),void 0===this.sourceCaches[s])throw new Error(`There is no source with this ID=${s}`);const N=this.sourceCaches[s].getSource();if("geojson"!==N.type)throw new Error(`geojsonSource.type is ${N.type}, which is !== 'geojson`);N.setData(C),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,C,N={}){this._checkLoaded();const W=s.id;if(this.getLayer(W))return void this.fire(new u.ErrorEvent(new Error(`Layer "${W}" already exists on this map.`)));let K;if("custom"===s.type){if(ba(this,u.validateCustomStyleLayer(s)))return;K=u.createStyleLayer(s)}else{if("source"in s&&"object"==typeof s.source&&(this.addSource(W,s.source),s=u.clone$1(s),s=u.extend(s,{source:W})),this._validate(u.validateStyle.layer,`layers.${W}`,s,{arrayIndex:-1},N))return;K=u.createStyleLayer(s),this._validateLayer(K),K.setEventedParent(this,{layer:{id:W}})}const he=C?this._order.indexOf(C):this._order.length;if(C&&-1===he)this.fire(new u.ErrorEvent(new Error(`Cannot add layer "${W}" before non-existing layer "${C}".`)));else{if(this._order.splice(he,0,W),this._layerOrderChanged=!0,this._layers[W]=K,this._removedLayers[W]&&K.source&&"custom"!==K.type){const ge=this._removedLayers[W];delete this._removedLayers[W],ge.type!==K.type?this._updatedSources[K.source]="clear":(this._updatedSources[K.source]="reload",this.sourceCaches[K.source].pause())}this._updateLayer(K),K.onAdd&&K.onAdd(this.map)}}moveLayer(s,C){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new u.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===C)return;const N=this._order.indexOf(s);this._order.splice(N,1);const W=C?this._order.indexOf(C):this._order.length;C&&-1===W?this.fire(new u.ErrorEvent(new Error(`Cannot move layer "${s}" before non-existing layer "${C}".`))):(this._order.splice(W,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const C=this._layers[s];if(!C)return void this.fire(new u.ErrorEvent(new Error(`Cannot remove non-existing layer "${s}".`)));C.setEventedParent(null);const N=this._order.indexOf(s);this._order.splice(N,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=C,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],C.onRemove&&C.onRemove(this.map)}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,C,N){this._checkLoaded();const W=this.getLayer(s);W?W.minzoom===C&&W.maxzoom===N||(null!=C&&(W.minzoom=C),null!=N&&(W.maxzoom=N),this._updateLayer(W)):this.fire(new u.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,C,N={}){this._checkLoaded();const W=this.getLayer(s);if(W){if(!u.deepEqual(W.filter,C))return null==C?(W.filter=void 0,void this._updateLayer(W)):void(this._validate(u.validateStyle.filter,`layers.${W.id}.filter`,C,null,N)||(W.filter=u.clone$1(C),this._updateLayer(W)))}else this.fire(new u.ErrorEvent(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return u.clone$1(this.getLayer(s).filter)}setLayoutProperty(s,C,N,W={}){this._checkLoaded();const K=this.getLayer(s);K?u.deepEqual(K.getLayoutProperty(C),N)||(K.setLayoutProperty(C,N,W),this._updateLayer(K)):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,C){const N=this.getLayer(s);if(N)return N.getLayoutProperty(C);this.fire(new u.ErrorEvent(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,C,N,W={}){this._checkLoaded();const K=this.getLayer(s);K?u.deepEqual(K.getPaintProperty(C),N)||(K.setPaintProperty(C,N,W)&&this._updateLayer(K),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,C){return this.getLayer(s).getPaintProperty(C)}setFeatureState(s,C){this._checkLoaded();const N=s.source,W=s.sourceLayer,K=this.sourceCaches[N];if(void 0===K)return void this.fire(new u.ErrorEvent(new Error(`The source '${N}' does not exist in the map's style.`)));const he=K.getSource().type;"geojson"===he&&W?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==he||W?(void 0===s.id&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),K.setFeatureState(W,s.id,C)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,C){this._checkLoaded();const N=s.source,W=this.sourceCaches[N];if(void 0===W)return void this.fire(new u.ErrorEvent(new Error(`The source '${N}' does not exist in the map's style.`)));const K=W.getSource().type,he="vector"===K?s.sourceLayer:void 0;"vector"!==K||he?C&&"string"!=typeof s.id&&"number"!=typeof s.id?this.fire(new u.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):W.removeFeatureState(he,s.id,C):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const C=s.source,N=s.sourceLayer,W=this.sourceCaches[C];if(void 0!==W)return"vector"!==W.getSource().type||N?(void 0===s.id&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),W.getFeatureState(N,s.id)):void this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.ErrorEvent(new Error(`The source '${C}' does not exist in the map's style.`)))}getTransition(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=u.mapObject(this.sourceCaches,W=>W.serialize()),C=this._serializeByIds(this._order),N=this.stylesheet;return u.filterObject({version:N.version,name:N.name,metadata:N.metadata,light:N.light,center:N.center,zoom:N.zoom,bearing:N.bearing,pitch:N.pitch,sprite:N.sprite,glyphs:N.glyphs,transition:N.transition,sources:s,layers:C},W=>void 0!==W)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&"raster"!==this.sourceCaches[s.source].getSource().type&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const C=he=>"fill-extrusion"===this._layers[he].type,N={},W=[];for(let he=this._order.length-1;he>=0;he--){const ge=this._order[he];if(C(ge)){N[ge]=he;for(const we of s){const Le=we[ge];if(Le)for(const Ve of Le)W.push(Ve)}}}W.sort((he,ge)=>ge.intersectionZ-he.intersectionZ);const K=[];for(let he=this._order.length-1;he>=0;he--){const ge=this._order[he];if(C(ge))for(let we=W.length-1;we>=0;we--){const Le=W[we].feature;if(N[Le.layer.id]<he)break;K.push(Le),W.pop()}else for(const we of s){const Le=we[ge];if(Le)for(const Ve of Le)K.push(Ve.feature)}}return K}queryRenderedFeatures(s,C,N){C&&C.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",C.filter,null,C);const W={};if(C&&C.layers){if(!Array.isArray(C.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const ge of C.layers){const we=this._layers[ge];if(!we)return this.fire(new u.ErrorEvent(new Error(`The layer '${ge}' does not exist in the map's style and cannot be queried for features.`))),[];W[we.source]=!0}}const K=[];C.availableImages=this._availableImages;const he=this._serializedAllLayers();for(const ge in this.sourceCaches)C.layers&&!W[ge]||K.push(tt(this.sourceCaches[ge],this._layers,he,s,C,N));return this.placement&&K.push(function(ge,we,Le,Ve,We,lt,Tt){const kt={},Ft=lt.queryRenderedSymbols(Ve),It=[];for(const ln of Object.keys(Ft).map(Number))It.push(Tt[ln]);It.sort(it);for(const ln of It){const zn=ln.featureIndex.lookupSymbolFeatures(Ft[ln.bucketInstanceId],we,ln.bucketIndex,ln.sourceLayerIndex,We.filter,We.layers,We.availableImages,ge);for(const Xt in zn){const fn=kt[Xt]=kt[Xt]||[],Fn=zn[Xt];Fn.sort((Hn,Bn)=>{const ii=ln.featureSortOrder;if(ii){const ti=ii.indexOf(Hn.featureIndex);return ii.indexOf(Bn.featureIndex)-ti}return Bn.featureIndex-Hn.featureIndex});for(const Hn of Fn)fn.push(Hn)}}for(const ln in kt)kt[ln].forEach(zn=>{const Xt=zn.feature,fn=Le[ge[ln].source].getFeatureState(Xt.layer["source-layer"],Xt.id);Xt.source=Xt.layer.source,Xt.layer["source-layer"]&&(Xt.sourceLayer=Xt.layer["source-layer"]),Xt.state=fn});return kt}(this._layers,he,this.sourceCaches,s,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(K)}querySourceFeatures(s,C){C&&C.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",C.filter,null,C);const N=this.sourceCaches[s];return N?function(W,K){const he=W.getRenderableIds().map(Le=>W.getTileByID(Le)),ge=[],we={};for(let Le=0;Le<he.length;Le++){const Ve=he[Le],We=Ve.tileID.canonical.key;we[We]||(we[We]=!0,Ve.querySourceFeatures(ge,K))}return ge}(N,C):[]}addSourceType(s,C,N){return ht(s)?N(new Error(`A source type called "${s}" already exists.`)):(je[s]=C,C.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:C.workerSourceURL},N):N(null,null))}getLight(){return this.light.getLight()}setLight(s,C={}){this._checkLoaded();const N=this.light.getLight();let W=!1;for(const he in s)if(!u.deepEqual(s[he],N[he])){W=!0;break}if(!W)return;const K={now:u.browser.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,C),this.light.updateTransitions(K)}_validate(s,C,N,W,K={}){return(!K||!1!==K.validate)&&ba(this,s.call(u.validateStyle,u.extend({key:C,style:this.serialize(),value:N,styleSpec:u.v8Spec},W)))}_remove(s=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const C in this._layers)this._layers[C].setEventedParent(null);for(const C in this.sourceCaches){const N=this.sourceCaches[C];N.setEventedParent(null),N.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const C in this.sourceCaches)this.sourceCaches[C].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,C,N,W,K=!1){let he=!1,ge=!1;const we={};for(const Le of this._order){const Ve=this._layers[Le];if("symbol"!==Ve.type)continue;if(!we[Ve.source]){const lt=this.sourceCaches[Ve.source];we[Ve.source]=lt.getRenderableIds(!0).map(Tt=>lt.getTileByID(Tt)).sort((Tt,kt)=>kt.tileID.overscaledZ-Tt.tileID.overscaledZ||(Tt.tileID.isLessThan(kt.tileID)?-1:1))}const We=this.crossTileSymbolIndex.addLayer(Ve,we[Ve.source],s.center.lng);he=he||We}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((K=K||this._layerOrderChanged||0===N)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.browser.now(),s.zoom))&&(this.pauseablePlacement=new Wn(s,this.map.terrain,this._order,K,C,N,W,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,we),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.browser.now()),ge=!0),he&&this.pauseablePlacement.placement.setStale()),ge||he)for(const Le of this._order){const Ve=this._layers[Le];"symbol"===Ve.type&&this.placement.updateLayerOpacities(Ve,we[Ve.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.browser.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,C,N){this.imageManager.getImages(C.icons,N),this._updateTilesForChangedImages();const W=this.sourceCaches[C.source];W&&W.setDependencies(C.tileID.key,C.type,C.icons)}getGlyphs(s,C,N){this.glyphManager.getGlyphs(C.stacks,N);const W=this.sourceCaches[C.source];W&&W.setDependencies(C.tileID.key,C.type,[""])}getResource(s,C,N){return u.makeRequest(C,N)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,C={}){this._checkLoaded(),s&&this._validate(u.validateStyle.glyphs,"glyphs",s,null,C)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,C,N={},W){this._checkLoaded();const K=[{id:s,url:C}],he=[...Q(this.stylesheet.sprite),...K];this._validate(u.validateStyle.sprite,"sprite",he,null,N)||(this.stylesheet.sprite=he,this._loadSprite(K,!0,W))}removeSprite(s){this._checkLoaded();const C=Q(this.stylesheet.sprite);if(C.find(N=>N.id===s)){if(this._spritesImagesIds[s])for(const N of this._spritesImagesIds[s])this.imageManager.removeImage(N),this._changedImages[N]=!0;C.splice(C.findIndex(N=>N.id===s),1),this.stylesheet.sprite=C.length>0?C:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}else this.fire(new u.ErrorEvent(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return Q(this.stylesheet.sprite)}setSprite(s,C={},N){this._checkLoaded(),s&&this._validate(u.validateStyle.sprite,"sprite",s,null,C)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,N):(this._unloadSprite(),N&&N(null)))}}Nn.registerForPluginStateChange=u.registerForPluginStateChange;var Rn=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),Yn="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Dt={prelude:Kn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:Kn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Kn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Kn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:Kn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:Kn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Kn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Kn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Kn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Kn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:Kn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:Kn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:Kn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:Kn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:Kn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:Kn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Kn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:Kn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:Kn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:Kn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:Kn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Kn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:Kn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Kn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:Kn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Yn),terrainDepth:Kn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Yn),terrainCoords:Kn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Yn)};function Kn(H,s){const C=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,N=s.match(/attribute ([\w]+) ([\w]+)/g),W=H.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),he=K?K.concat(W):W,ge={};return{fragmentSource:H=H.replace(C,(we,Le,Ve,We,lt)=>(ge[lt]=!0,"define"===Le?`\n#ifndef HAS_UNIFORM_u_${lt}\nvarying ${Ve} ${We} ${lt};\n#else\nuniform ${Ve} ${We} u_${lt};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${lt}\n    ${Ve} ${We} ${lt} = u_${lt};\n#endif\n`)),vertexSource:s=s.replace(C,(we,Le,Ve,We,lt)=>{const Tt="float"===We?"vec2":"vec4",kt=lt.match(/color/)?"color":Tt;return ge[lt]?"define"===Le?`\n#ifndef HAS_UNIFORM_u_${lt}\nuniform lowp float u_${lt}_t;\nattribute ${Ve} ${Tt} a_${lt};\nvarying ${Ve} ${We} ${lt};\n#else\nuniform ${Ve} ${We} u_${lt};\n#endif\n`:"vec4"===kt?`\n#ifndef HAS_UNIFORM_u_${lt}\n    ${lt} = a_${lt};\n#else\n    ${Ve} ${We} ${lt} = u_${lt};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${lt}\n    ${lt} = unpack_mix_${kt}(a_${lt}, u_${lt}_t);\n#else\n    ${Ve} ${We} ${lt} = u_${lt};\n#endif\n`:"define"===Le?`\n#ifndef HAS_UNIFORM_u_${lt}\nuniform lowp float u_${lt}_t;\nattribute ${Ve} ${Tt} a_${lt};\n#else\nuniform ${Ve} ${We} u_${lt};\n#endif\n`:"vec4"===kt?`\n#ifndef HAS_UNIFORM_u_${lt}\n    ${Ve} ${We} ${lt} = a_${lt};\n#else\n    ${Ve} ${We} ${lt} = u_${lt};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${lt}\n    ${Ve} ${We} ${lt} = unpack_mix_${kt}(a_${lt}, u_${lt}_t);\n#else\n    ${Ve} ${We} ${lt} = u_${lt};\n#endif\n`}),staticAttributes:N,staticUniforms:he}}class Ot{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,C,N,W,K,he,ge,we,Le){this.context=s;let Ve=this.boundPaintVertexBuffers.length!==W.length;for(let We=0;!Ve&&We<W.length;We++)this.boundPaintVertexBuffers[We]!==W[We]&&(Ve=!0);!this.vao||this.boundProgram!==C||this.boundLayoutVertexBuffer!==N||Ve||this.boundIndexBuffer!==K||this.boundVertexOffset!==he||this.boundDynamicVertexBuffer!==ge||this.boundDynamicVertexBuffer2!==we||this.boundDynamicVertexBuffer3!==Le?this.freshBind(C,N,W,K,he,ge,we,Le):(s.bindVertexArray.set(this.vao),ge&&ge.bind(),K&&K.dynamicDraw&&K.bind(),we&&we.bind(),Le&&Le.bind())}freshBind(s,C,N,W,K,he,ge,we){const Le=s.numAttributes,Ve=this.context,We=Ve.gl;this.vao&&this.destroy(),this.vao=Ve.createVertexArray(),Ve.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=C,this.boundPaintVertexBuffers=N,this.boundIndexBuffer=W,this.boundVertexOffset=K,this.boundDynamicVertexBuffer=he,this.boundDynamicVertexBuffer2=ge,this.boundDynamicVertexBuffer3=we,C.enableAttributes(We,s);for(const lt of N)lt.enableAttributes(We,s);he&&he.enableAttributes(We,s),ge&&ge.enableAttributes(We,s),we&&we.enableAttributes(We,s),C.bind(),C.setVertexAttribPointers(We,s,K);for(const lt of N)lt.bind(),lt.setVertexAttribPointers(We,s,K);he&&(he.bind(),he.setVertexAttribPointers(We,s,K)),W&&W.bind(),ge&&(ge.bind(),ge.setVertexAttribPointers(We,s,K)),we&&(we.bind(),we.setVertexAttribPointers(We,s,K)),Ve.currentNumAttributes=Le}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function ft(H){const s=[];for(let C=0;C<H.length;C++){if(null===H[C])continue;const N=H[C].split(" ");s.push(N.pop())}return s}class St{constructor(s,C,N,W,K,he){const ge=s.gl;this.program=ge.createProgram();const we=ft(C.staticAttributes),Le=N?N.getBinderAttributes():[],Ve=we.concat(Le),We=Dt.prelude.staticUniforms?ft(Dt.prelude.staticUniforms):[],lt=C.staticUniforms?ft(C.staticUniforms):[],Tt=N?N.getBinderUniforms():[],kt=We.concat(lt).concat(Tt),Ft=[];for(const Hn of kt)Ft.indexOf(Hn)<0&&Ft.push(Hn);const It=N?N.defines():[];K&&It.push("#define OVERDRAW_INSPECTOR;"),he&&It.push("#define TERRAIN3D;");const ln=It.concat(Dt.prelude.fragmentSource,C.fragmentSource).join("\n"),zn=It.concat(Dt.prelude.vertexSource,C.vertexSource).join("\n"),Xt=ge.createShader(ge.FRAGMENT_SHADER);if(ge.isContextLost())return void(this.failedToCreate=!0);if(ge.shaderSource(Xt,ln),ge.compileShader(Xt),!ge.getShaderParameter(Xt,ge.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${ge.getShaderInfoLog(Xt)}`);ge.attachShader(this.program,Xt);const fn=ge.createShader(ge.VERTEX_SHADER);if(ge.isContextLost())return void(this.failedToCreate=!0);if(ge.shaderSource(fn,zn),ge.compileShader(fn),!ge.getShaderParameter(fn,ge.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${ge.getShaderInfoLog(fn)}`);ge.attachShader(this.program,fn),this.attributes={};const Fn={};this.numAttributes=Ve.length;for(let Hn=0;Hn<this.numAttributes;Hn++)Ve[Hn]&&(ge.bindAttribLocation(this.program,Hn,Ve[Hn]),this.attributes[Ve[Hn]]=Hn);if(ge.linkProgram(this.program),!ge.getProgramParameter(this.program,ge.LINK_STATUS))throw new Error(`Program failed to link: ${ge.getProgramInfoLog(this.program)}`);ge.deleteShader(fn),ge.deleteShader(Xt);for(let Hn=0;Hn<Ft.length;Hn++){const Bn=Ft[Hn];if(Bn&&!Fn[Bn]){const ii=ge.getUniformLocation(this.program,Bn);ii&&(Fn[Bn]=ii)}}var Hn,Bn;this.fixedUniforms=W(s,Fn),this.terrainUniforms={u_depth:new u.Uniform1i(Hn=s,(Bn=Fn).u_depth),u_terrain:new u.Uniform1i(Hn,Bn.u_terrain),u_terrain_dim:new u.Uniform1f(Hn,Bn.u_terrain_dim),u_terrain_matrix:new u.UniformMatrix4f(Hn,Bn.u_terrain_matrix),u_terrain_unpack:new u.Uniform4f(Hn,Bn.u_terrain_unpack),u_terrain_exaggeration:new u.Uniform1f(Hn,Bn.u_terrain_exaggeration)},this.binderUniforms=N?N.getUniforms(s,Fn):[]}draw(s,C,N,W,K,he,ge,we,Le,Ve,We,lt,Tt,kt,Ft,It,ln,zn){const Xt=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(N),s.setStencilMode(W),s.setColorMode(K),s.setCullFace(he),we){s.activeTexture.set(Xt.TEXTURE2),Xt.bindTexture(Xt.TEXTURE_2D,we.depthTexture),s.activeTexture.set(Xt.TEXTURE3),Xt.bindTexture(Xt.TEXTURE_2D,we.texture);for(const Fn in this.terrainUniforms)this.terrainUniforms[Fn].set(we[Fn])}for(const Fn in this.fixedUniforms)this.fixedUniforms[Fn].set(ge[Fn]);Ft&&Ft.setUniforms(s,this.binderUniforms,Tt,{zoom:kt});let fn=0;switch(C){case Xt.LINES:fn=2;break;case Xt.TRIANGLES:fn=3;break;case Xt.LINE_STRIP:fn=1}for(const Fn of lt.get()){const Hn=Fn.vaos||(Fn.vaos={});(Hn[Le]||(Hn[Le]=new Ot)).bind(s,this,Ve,Ft?Ft.getPaintVertexBuffers():[],We,Fn.vertexOffset,It,ln,zn),Xt.drawElements(C,Fn.primitiveLength*fn,Xt.UNSIGNED_SHORT,Fn.primitiveOffset*fn*2)}}}function Kt(H,s,C){const N=1/Pt(C,1,s.transform.tileZoom),W=Math.pow(2,C.tileID.overscaledZ),K=C.tileSize*Math.pow(2,s.transform.tileZoom)/W,he=K*(C.tileID.canonical.x+C.tileID.wrap*W),ge=K*C.tileID.canonical.y;return{u_image:0,u_texsize:C.imageAtlasTexture.size,u_scale:[N,H.fromScale,H.toScale],u_fade:H.t,u_pixel_coord_upper:[he>>16,ge>>16],u_pixel_coord_lower:[65535&he,65535&ge]}}const Ut=(H,s,C,N)=>{const W=s.style.light,K=W.properties.get("position"),he=[K.x,K.y,K.z],ge=(Le=new u.ARRAY_TYPE(9),u.ARRAY_TYPE!=Float32Array&&(Le[1]=0,Le[2]=0,Le[3]=0,Le[5]=0,Le[6]=0,Le[7]=0),Le[0]=1,Le[4]=1,Le[8]=1,Le);var Le;"viewport"===W.properties.get("anchor")&&function(Le,Ve){var We=Math.sin(Ve),lt=Math.cos(Ve);Le[0]=lt,Le[1]=We,Le[2]=0,Le[3]=-We,Le[4]=lt,Le[5]=0,Le[6]=0,Le[7]=0,Le[8]=1}(ge,-s.transform.angle),function(Le,Ve,We){var lt=Ve[0],Tt=Ve[1],kt=Ve[2];Le[0]=lt*We[0]+Tt*We[3]+kt*We[6],Le[1]=lt*We[1]+Tt*We[4]+kt*We[7],Le[2]=lt*We[2]+Tt*We[5]+kt*We[8]}(he,he,ge);const we=W.properties.get("color");return{u_matrix:H,u_lightpos:he,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[we.r,we.g,we.b],u_vertical_gradient:+C,u_opacity:N}},rn=(H,s,C,N,W,K,he)=>u.extend(Ut(H,s,C,N),Kt(K,s,he),{u_height_factor:-Math.pow(2,W.overscaledZ)/he.tileSize/8}),P1=H=>({u_matrix:H}),Gi=(H,s,C,N)=>u.extend(P1(H),Kt(C,s,N)),La=(H,s)=>({u_matrix:H,u_world:s}),Di=(H,s,C,N,W)=>u.extend(Gi(H,s,C,N),{u_world:W}),Ui=(H,s,C,N)=>{const W=H.transform;let K,he;if("map"===N.paint.get("circle-pitch-alignment")){const ge=Pt(C,1,W.zoom);K=!0,he=[ge,ge]}else K=!1,he=W.pixelsToGLUnits;return{u_camera_to_center_distance:W.cameraToCenterDistance,u_scale_with_map:+("map"===N.paint.get("circle-pitch-scale")),u_matrix:H.translatePosMatrix(s.posMatrix,C,N.paint.get("circle-translate"),N.paint.get("circle-translate-anchor")),u_pitch_with_map:+K,u_device_pixel_ratio:H.pixelRatio,u_extrude_scale:he}},nr=(H,s,C)=>{const N=Pt(C,1,s.zoom),W=Math.pow(2,s.zoom-C.tileID.overscaledZ),K=C.tileID.overscaleFactor();return{u_matrix:H,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:N,u_extrude_scale:[s.pixelsToGLUnits[0]/(N*W),s.pixelsToGLUnits[1]/(N*W)],u_overscale_factor:K}},Be=(H,s,C=1)=>({u_matrix:H,u_color:s,u_overlay:0,u_overlay_scale:C}),_t=H=>({u_matrix:H}),Lt=(H,s,C,N)=>({u_matrix:H,u_extrude_scale:Pt(s,1,C),u_intensity:N});function nn(H,s){const C=Math.pow(2,s.canonical.z),N=s.canonical.y;return[new u.MercatorCoordinate(0,N/C).toLngLat().lat,new u.MercatorCoordinate(0,(N+1)/C).toLngLat().lat]}const Pn=(H,s,C,N)=>{const W=H.transform;return{u_matrix:xa(H,s,C,N),u_ratio:1/Pt(s,1,W.zoom),u_device_pixel_ratio:H.pixelRatio,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},en=(H,s,C,N,W)=>u.extend(Pn(H,s,C,W),{u_image:0,u_image_height:N}),ri=(H,s,C,N,W)=>{const K=H.transform,he=yr(s,K);return{u_matrix:xa(H,s,C,W),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Pt(s,1,K.zoom),u_device_pixel_ratio:H.pixelRatio,u_image:0,u_scale:[he,N.fromScale,N.toScale],u_fade:N.t,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]]}},cr=(H,s,C,N,W,K)=>{const he=H.lineAtlas,ge=yr(s,H.transform),we="round"===C.layout.get("line-cap"),Le=he.getDash(N.from,we),Ve=he.getDash(N.to,we),We=Le.width*W.fromScale,lt=Ve.width*W.toScale;return u.extend(Pn(H,s,C,K),{u_patternscale_a:[ge/We,-Le.height/2],u_patternscale_b:[ge/lt,-Ve.height/2],u_sdfgamma:he.width/(256*Math.min(We,lt)*H.pixelRatio)/2,u_image:0,u_tex_y_a:Le.y,u_tex_y_b:Ve.y,u_mix:W.t})};function yr(H,s){return 1/Pt(H,1,s.tileZoom)}function xa(H,s,C,N){return H.translatePosMatrix(N?N.posMatrix:s.tileID.posMatrix,s,C.paint.get("line-translate"),C.paint.get("line-translate-anchor"))}const Sa=(H,s,C,N,W)=>{return{u_matrix:H,u_tl_parent:s,u_scale_parent:C,u_buffer_scale:1,u_fade_t:N.mix,u_opacity:N.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:(he=W.paint.get("raster-saturation"),he>0?1-1/(1.001-he):-he),u_contrast_factor:(K=W.paint.get("raster-contrast"),K>0?1/(1-K):1+K),u_spin_weights:wa(W.paint.get("raster-hue-rotate"))};var K,he};function wa(H){H*=Math.PI/180;const s=Math.sin(H),C=Math.cos(H);return[(2*C+1)/3,(-Math.sqrt(3)*s-C+1)/3,(Math.sqrt(3)*s-C+1)/3]}const Xs=(H,s,C,N,W,K,he,ge,we,Le)=>{const Ve=W.transform;return{u_is_size_zoom_constant:+("constant"===H||"source"===H),u_is_size_feature_constant:+("constant"===H||"camera"===H),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Ve.cameraToCenterDistance,u_pitch:Ve.pitch/360*2*Math.PI,u_rotate_symbol:+C,u_aspect_ratio:Ve.width/Ve.height,u_fade_change:W.options.fadeDuration?W.symbolFadeChange:1,u_matrix:K,u_label_plane_matrix:he,u_coord_matrix:ge,u_is_text:+we,u_pitch_with_map:+N,u_texsize:Le,u_texture:0}},Qa=(H,s,C,N,W,K,he,ge,we,Le,Ve)=>{const We=W.transform;return u.extend(Xs(H,s,C,N,W,K,he,ge,we,Le),{u_gamma_scale:N?Math.cos(We._pitch)*We.cameraToCenterDistance:1,u_device_pixel_ratio:W.pixelRatio,u_is_halo:+Ve})},Vr=(H,s,C,N,W,K,he,ge,we,Le)=>u.extend(Qa(H,s,C,N,W,K,he,ge,!0,we,!0),{u_texsize_icon:Le,u_texture_icon:1}),l1=(H,s,C)=>({u_matrix:H,u_opacity:s,u_color:C}),Aa=(H,s,C,N,W,K)=>u.extend(function(he,ge,we,Le){const Ve=we.imageManager.getPattern(he.from.toString()),We=we.imageManager.getPattern(he.to.toString()),{width:lt,height:Tt}=we.imageManager.getPixelSize(),kt=Math.pow(2,Le.tileID.overscaledZ),Ft=Le.tileSize*Math.pow(2,we.transform.tileZoom)/kt,It=Ft*(Le.tileID.canonical.x+Le.tileID.wrap*kt),ln=Ft*Le.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ve.tl,u_pattern_br_a:Ve.br,u_pattern_tl_b:We.tl,u_pattern_br_b:We.br,u_texsize:[lt,Tt],u_mix:ge.t,u_pattern_size_a:Ve.displaySize,u_pattern_size_b:We.displaySize,u_scale_a:ge.fromScale,u_scale_b:ge.toScale,u_tile_units_to_pixels:1/Pt(Le,1,we.transform.tileZoom),u_pixel_coord_upper:[It>>16,ln>>16],u_pixel_coord_lower:[65535&It,65535&ln]}}(N,K,C,W),{u_matrix:H,u_opacity:s}),xs={fillExtrusion:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_lightpos:new u.Uniform3f(H,s.u_lightpos),u_lightintensity:new u.Uniform1f(H,s.u_lightintensity),u_lightcolor:new u.Uniform3f(H,s.u_lightcolor),u_vertical_gradient:new u.Uniform1f(H,s.u_vertical_gradient),u_opacity:new u.Uniform1f(H,s.u_opacity)}),fillExtrusionPattern:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_lightpos:new u.Uniform3f(H,s.u_lightpos),u_lightintensity:new u.Uniform1f(H,s.u_lightintensity),u_lightcolor:new u.Uniform3f(H,s.u_lightcolor),u_vertical_gradient:new u.Uniform1f(H,s.u_vertical_gradient),u_height_factor:new u.Uniform1f(H,s.u_height_factor),u_image:new u.Uniform1i(H,s.u_image),u_texsize:new u.Uniform2f(H,s.u_texsize),u_pixel_coord_upper:new u.Uniform2f(H,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(H,s.u_pixel_coord_lower),u_scale:new u.Uniform3f(H,s.u_scale),u_fade:new u.Uniform1f(H,s.u_fade),u_opacity:new u.Uniform1f(H,s.u_opacity)}),fill:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix)}),fillPattern:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_image:new u.Uniform1i(H,s.u_image),u_texsize:new u.Uniform2f(H,s.u_texsize),u_pixel_coord_upper:new u.Uniform2f(H,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(H,s.u_pixel_coord_lower),u_scale:new u.Uniform3f(H,s.u_scale),u_fade:new u.Uniform1f(H,s.u_fade)}),fillOutline:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_world:new u.Uniform2f(H,s.u_world)}),fillOutlinePattern:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_world:new u.Uniform2f(H,s.u_world),u_image:new u.Uniform1i(H,s.u_image),u_texsize:new u.Uniform2f(H,s.u_texsize),u_pixel_coord_upper:new u.Uniform2f(H,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(H,s.u_pixel_coord_lower),u_scale:new u.Uniform3f(H,s.u_scale),u_fade:new u.Uniform1f(H,s.u_fade)}),circle:(H,s)=>({u_camera_to_center_distance:new u.Uniform1f(H,s.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(H,s.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(H,s.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(H,s.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(H,s.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(H,s.u_matrix)}),collisionBox:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_camera_to_center_distance:new u.Uniform1f(H,s.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(H,s.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(H,s.u_extrude_scale),u_overscale_factor:new u.Uniform1f(H,s.u_overscale_factor)}),collisionCircle:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_inv_matrix:new u.UniformMatrix4f(H,s.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(H,s.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(H,s.u_viewport_size)}),debug:(H,s)=>({u_color:new u.UniformColor(H,s.u_color),u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_overlay:new u.Uniform1i(H,s.u_overlay),u_overlay_scale:new u.Uniform1f(H,s.u_overlay_scale)}),clippingMask:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix)}),heatmap:(H,s)=>({u_extrude_scale:new u.Uniform1f(H,s.u_extrude_scale),u_intensity:new u.Uniform1f(H,s.u_intensity),u_matrix:new u.UniformMatrix4f(H,s.u_matrix)}),heatmapTexture:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_world:new u.Uniform2f(H,s.u_world),u_image:new u.Uniform1i(H,s.u_image),u_color_ramp:new u.Uniform1i(H,s.u_color_ramp),u_opacity:new u.Uniform1f(H,s.u_opacity)}),hillshade:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_image:new u.Uniform1i(H,s.u_image),u_latrange:new u.Uniform2f(H,s.u_latrange),u_light:new u.Uniform2f(H,s.u_light),u_shadow:new u.UniformColor(H,s.u_shadow),u_highlight:new u.UniformColor(H,s.u_highlight),u_accent:new u.UniformColor(H,s.u_accent)}),hillshadePrepare:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_image:new u.Uniform1i(H,s.u_image),u_dimension:new u.Uniform2f(H,s.u_dimension),u_zoom:new u.Uniform1f(H,s.u_zoom),u_unpack:new u.Uniform4f(H,s.u_unpack)}),line:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_ratio:new u.Uniform1f(H,s.u_ratio),u_device_pixel_ratio:new u.Uniform1f(H,s.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(H,s.u_units_to_pixels)}),lineGradient:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_ratio:new u.Uniform1f(H,s.u_ratio),u_device_pixel_ratio:new u.Uniform1f(H,s.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(H,s.u_units_to_pixels),u_image:new u.Uniform1i(H,s.u_image),u_image_height:new u.Uniform1f(H,s.u_image_height)}),linePattern:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_texsize:new u.Uniform2f(H,s.u_texsize),u_ratio:new u.Uniform1f(H,s.u_ratio),u_device_pixel_ratio:new u.Uniform1f(H,s.u_device_pixel_ratio),u_image:new u.Uniform1i(H,s.u_image),u_units_to_pixels:new u.Uniform2f(H,s.u_units_to_pixels),u_scale:new u.Uniform3f(H,s.u_scale),u_fade:new u.Uniform1f(H,s.u_fade)}),lineSDF:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_ratio:new u.Uniform1f(H,s.u_ratio),u_device_pixel_ratio:new u.Uniform1f(H,s.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(H,s.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(H,s.u_patternscale_a),u_patternscale_b:new u.Uniform2f(H,s.u_patternscale_b),u_sdfgamma:new u.Uniform1f(H,s.u_sdfgamma),u_image:new u.Uniform1i(H,s.u_image),u_tex_y_a:new u.Uniform1f(H,s.u_tex_y_a),u_tex_y_b:new u.Uniform1f(H,s.u_tex_y_b),u_mix:new u.Uniform1f(H,s.u_mix)}),raster:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_tl_parent:new u.Uniform2f(H,s.u_tl_parent),u_scale_parent:new u.Uniform1f(H,s.u_scale_parent),u_buffer_scale:new u.Uniform1f(H,s.u_buffer_scale),u_fade_t:new u.Uniform1f(H,s.u_fade_t),u_opacity:new u.Uniform1f(H,s.u_opacity),u_image0:new u.Uniform1i(H,s.u_image0),u_image1:new u.Uniform1i(H,s.u_image1),u_brightness_low:new u.Uniform1f(H,s.u_brightness_low),u_brightness_high:new u.Uniform1f(H,s.u_brightness_high),u_saturation_factor:new u.Uniform1f(H,s.u_saturation_factor),u_contrast_factor:new u.Uniform1f(H,s.u_contrast_factor),u_spin_weights:new u.Uniform3f(H,s.u_spin_weights)}),symbolIcon:(H,s)=>({u_is_size_zoom_constant:new u.Uniform1i(H,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(H,s.u_is_size_feature_constant),u_size_t:new u.Uniform1f(H,s.u_size_t),u_size:new u.Uniform1f(H,s.u_size),u_camera_to_center_distance:new u.Uniform1f(H,s.u_camera_to_center_distance),u_pitch:new u.Uniform1f(H,s.u_pitch),u_rotate_symbol:new u.Uniform1i(H,s.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(H,s.u_aspect_ratio),u_fade_change:new u.Uniform1f(H,s.u_fade_change),u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(H,s.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(H,s.u_coord_matrix),u_is_text:new u.Uniform1i(H,s.u_is_text),u_pitch_with_map:new u.Uniform1i(H,s.u_pitch_with_map),u_texsize:new u.Uniform2f(H,s.u_texsize),u_texture:new u.Uniform1i(H,s.u_texture)}),symbolSDF:(H,s)=>({u_is_size_zoom_constant:new u.Uniform1i(H,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(H,s.u_is_size_feature_constant),u_size_t:new u.Uniform1f(H,s.u_size_t),u_size:new u.Uniform1f(H,s.u_size),u_camera_to_center_distance:new u.Uniform1f(H,s.u_camera_to_center_distance),u_pitch:new u.Uniform1f(H,s.u_pitch),u_rotate_symbol:new u.Uniform1i(H,s.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(H,s.u_aspect_ratio),u_fade_change:new u.Uniform1f(H,s.u_fade_change),u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(H,s.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(H,s.u_coord_matrix),u_is_text:new u.Uniform1i(H,s.u_is_text),u_pitch_with_map:new u.Uniform1i(H,s.u_pitch_with_map),u_texsize:new u.Uniform2f(H,s.u_texsize),u_texture:new u.Uniform1i(H,s.u_texture),u_gamma_scale:new u.Uniform1f(H,s.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(H,s.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(H,s.u_is_halo)}),symbolTextAndIcon:(H,s)=>({u_is_size_zoom_constant:new u.Uniform1i(H,s.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(H,s.u_is_size_feature_constant),u_size_t:new u.Uniform1f(H,s.u_size_t),u_size:new u.Uniform1f(H,s.u_size),u_camera_to_center_distance:new u.Uniform1f(H,s.u_camera_to_center_distance),u_pitch:new u.Uniform1f(H,s.u_pitch),u_rotate_symbol:new u.Uniform1i(H,s.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(H,s.u_aspect_ratio),u_fade_change:new u.Uniform1f(H,s.u_fade_change),u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(H,s.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(H,s.u_coord_matrix),u_is_text:new u.Uniform1i(H,s.u_is_text),u_pitch_with_map:new u.Uniform1i(H,s.u_pitch_with_map),u_texsize:new u.Uniform2f(H,s.u_texsize),u_texsize_icon:new u.Uniform2f(H,s.u_texsize_icon),u_texture:new u.Uniform1i(H,s.u_texture),u_texture_icon:new u.Uniform1i(H,s.u_texture_icon),u_gamma_scale:new u.Uniform1f(H,s.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(H,s.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(H,s.u_is_halo)}),background:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_opacity:new u.Uniform1f(H,s.u_opacity),u_color:new u.UniformColor(H,s.u_color)}),backgroundPattern:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_opacity:new u.Uniform1f(H,s.u_opacity),u_image:new u.Uniform1i(H,s.u_image),u_pattern_tl_a:new u.Uniform2f(H,s.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(H,s.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(H,s.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(H,s.u_pattern_br_b),u_texsize:new u.Uniform2f(H,s.u_texsize),u_mix:new u.Uniform1f(H,s.u_mix),u_pattern_size_a:new u.Uniform2f(H,s.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(H,s.u_pattern_size_b),u_scale_a:new u.Uniform1f(H,s.u_scale_a),u_scale_b:new u.Uniform1f(H,s.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(H,s.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(H,s.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(H,s.u_tile_units_to_pixels)}),terrain:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_texture:new u.Uniform1i(H,s.u_texture),u_ele_delta:new u.Uniform1f(H,s.u_ele_delta)}),terrainDepth:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_ele_delta:new u.Uniform1f(H,s.u_ele_delta)}),terrainCoords:(H,s)=>({u_matrix:new u.UniformMatrix4f(H,s.u_matrix),u_texture:new u.Uniform1i(H,s.u_texture),u_terrain_coords_id:new u.Uniform1f(H,s.u_terrain_coords_id),u_ele_delta:new u.Uniform1f(H,s.u_ele_delta)})};class Ba{constructor(s,C,N){this.context=s;const W=s.gl;this.buffer=W.createBuffer(),this.dynamicDraw=!!N,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),W.bufferData(W.ELEMENT_ARRAY_BUFFER,C.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete C.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const C=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),C.bufferSubData(C.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const lo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class aa{constructor(s,C,N,W){this.length=C.length,this.attributes=N,this.itemSize=C.bytesPerElement,this.dynamicDraw=W,this.context=s;const K=s.gl;this.buffer=K.createBuffer(),s.bindVertexBuffer.set(this.buffer),K.bufferData(K.ARRAY_BUFFER,C.arrayBuffer,this.dynamicDraw?K.DYNAMIC_DRAW:K.STATIC_DRAW),this.dynamicDraw||delete C.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const C=this.context.gl;this.bind(),C.bufferSubData(C.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,C){for(let N=0;N<this.attributes.length;N++){const W=C.attributes[this.attributes[N].name];void 0!==W&&s.enableVertexAttribArray(W)}}setVertexAttribPointers(s,C,N){for(let W=0;W<this.attributes.length;W++){const K=this.attributes[W],he=C.attributes[K.name];void 0!==he&&s.vertexAttribPointer(he,K.components,s[lo[K.type]],!1,this.itemSize,K.offset+this.itemSize*(N||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ja=new WeakMap;function Da(H){if(Ja.has(H))return Ja.get(H);{const s=H.getParameter(H.VERSION).startsWith("WebGL 2.0");return Ja.set(H,s),s}}class Dr{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Zs extends Dr{getDefault(){return u.Color.transparent}set(s){const C=this.current;(s.r!==C.r||s.g!==C.g||s.b!==C.b||s.a!==C.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class B1 extends Dr{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Io extends Dr{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class u1 extends Dr{getDefault(){return[!0,!0,!0,!0]}set(s){const C=this.current;(s[0]!==C[0]||s[1]!==C[1]||s[2]!==C[2]||s[3]!==C[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Os extends Dr{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Yr extends Dr{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class To extends Dr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const C=this.current;(s.func!==C.func||s.ref!==C.ref||s.mask!==C.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Sn extends Dr{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const C=this.current;(s[0]!==C[0]||s[1]!==C[1]||s[2]!==C[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class Fc extends Dr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;s?C.enable(C.STENCIL_TEST):C.disable(C.STENCIL_TEST),this.current=s,this.dirty=!1}}class li extends Dr{getDefault(){return[0,1]}set(s){const C=this.current;(s[0]!==C[0]||s[1]!==C[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Sc extends Dr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;s?C.enable(C.DEPTH_TEST):C.disable(C.DEPTH_TEST),this.current=s,this.dirty=!1}}class Vc extends Dr{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Oa extends Dr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;s?C.enable(C.BLEND):C.disable(C.BLEND),this.current=s,this.dirty=!1}}class ps extends Dr{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const C=this.current;(s[0]!==C[0]||s[1]!==C[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class sa extends Dr{getDefault(){return u.Color.transparent}set(s){const C=this.current;(s.r!==C.r||s.g!==C.g||s.b!==C.b||s.a!==C.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class es extends Dr{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Mo extends Dr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;s?C.enable(C.CULL_FACE):C.disable(C.CULL_FACE),this.current=s,this.dirty=!1}}class d1 extends Dr{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class Xr extends Dr{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class zi extends Dr{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class Hr extends Dr{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class ks extends Dr{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const C=this.current;(s[0]!==C[0]||s[1]!==C[1]||s[2]!==C[2]||s[3]!==C[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class ja extends Dr{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class ts extends Dr{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;C.bindRenderbuffer(C.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class $s extends Dr{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;C.bindTexture(C.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Ns extends Dr{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;C.bindBuffer(C.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class j1 extends Dr{getDefault(){return null}set(s){const C=this.gl;C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Br extends Dr{getDefault(){return null}set(s){var C;if(s===this.current&&!this.dirty)return;const N=this.gl;Da(N)?N.bindVertexArray(s):null===(C=N.getExtension("OES_vertex_array_object"))||void 0===C||C.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class jr extends Dr{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;C.pixelStorei(C.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class I1 extends Dr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Lo extends Dr{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const C=this.gl;C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class T1 extends Dr{constructor(s,C){super(s),this.context=s,this.parent=C}getDefault(){return null}}class ns extends T1{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const C=this.gl;C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Ec extends T1{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const C=this.gl;C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Or extends T1{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const C=this.gl;C.framebufferRenderbuffer(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class U1{constructor(s,C,N,W,K){this.context=s,this.width=C,this.height=N;const he=s.gl,ge=this.framebuffer=he.createFramebuffer();if(this.colorAttachment=new ns(s,ge),W)this.depthAttachment=K?new Or(s,ge):new Ec(s,ge);else if(K)throw new Error("Stencil cannot be setted without depth");if(he.checkFramebufferStatus(he.FRAMEBUFFER)!==he.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,C=this.colorAttachment.get();if(C&&s.deleteTexture(C),this.depthAttachment){const N=this.depthAttachment.get();N&&s.deleteRenderbuffer(N)}s.deleteFramebuffer(this.framebuffer)}}class vr{constructor(s,C,N){this.blendFunction=s,this.blendColor=C,this.mask=N}}vr.Replace=[1,0],vr.disabled=new vr(vr.Replace,u.Color.transparent,[!1,!1,!1,!1]),vr.unblended=new vr(vr.Replace,u.Color.transparent,[!0,!0,!0,!0]),vr.alphaBlended=new vr([1,771],u.Color.transparent,[!0,!0,!0,!0]);class Ac{constructor(s){var C,N;if(this.gl=s,this.clearColor=new Zs(this),this.clearDepth=new B1(this),this.clearStencil=new Io(this),this.colorMask=new u1(this),this.depthMask=new Os(this),this.stencilMask=new Yr(this),this.stencilFunc=new To(this),this.stencilOp=new Sn(this),this.stencilTest=new Fc(this),this.depthRange=new li(this),this.depthTest=new Sc(this),this.depthFunc=new Vc(this),this.blend=new Oa(this),this.blendFunc=new ps(this),this.blendColor=new sa(this),this.blendEquation=new es(this),this.cullFace=new Mo(this),this.cullFaceSide=new d1(this),this.frontFace=new Xr(this),this.program=new zi(this),this.activeTexture=new Hr(this),this.viewport=new ks(this),this.bindFramebuffer=new ja(this),this.bindRenderbuffer=new ts(this),this.bindTexture=new $s(this),this.bindVertexBuffer=new Ns(this),this.bindElementBuffer=new j1(this),this.bindVertexArray=new Br(this),this.pixelStoreUnpack=new jr(this),this.pixelStoreUnpackPremultiplyAlpha=new I1(this),this.pixelStoreUnpackFlipY=new Lo(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Da(s)){this.HALF_FLOAT=s.HALF_FLOAT;const W=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(C=s.RGBA16F)&&void 0!==C?C:W?.RGBA16F_EXT,this.RGB16F=null!==(N=s.RGB16F)&&void 0!==N?N:W?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const W=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=W?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,C){return new Ba(this,s,C)}createVertexBuffer(s,C,N){return new aa(this,s,C,N)}createRenderbuffer(s,C,N){const W=this.gl,K=W.createRenderbuffer();return this.bindRenderbuffer.set(K),W.renderbufferStorage(W.RENDERBUFFER,s,C,N),this.bindRenderbuffer.set(null),K}createFramebuffer(s,C,N,W){return new U1(this,s,C,N,W)}clear({color:s,depth:C,stencil:N}){const W=this.gl;let K=0;s&&(K|=W.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),void 0!==C&&(K|=W.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(C),this.depthMask.set(!0)),void 0!==N&&(K|=W.STENCIL_BUFFER_BIT,this.clearStencil.set(N),this.stencilMask.set(255)),W.clear(K)}setCullFace(s){!1===s.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){u.deepEqual(s.blendFunction,vr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Da(this.gl)?this.gl.createVertexArray():null===(s=this.gl.getExtension("OES_vertex_array_object"))||void 0===s?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var C;return Da(this.gl)?this.gl.deleteVertexArray(s):null===(C=this.gl.getExtension("OES_vertex_array_object"))||void 0===C?void 0:C.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class hr{constructor(s,C,N){this.func=s,this.mask=C,this.range=N}}hr.ReadOnly=!1,hr.ReadWrite=!0,hr.disabled=new hr(519,hr.ReadOnly,[0,1]);class Do{constructor(s,C,N,W,K,he){this.test=s,this.ref=C,this.mask=N,this.fail=W,this.depthFail=K,this.pass=he}}Do.disabled=new Do({func:519,mask:0},0,0,7680,7680,7680);class $r{constructor(s,C,N){this.enable=s,this.mode=C,this.frontFace=N}}let Ir;function Ua(H,s,C,N,W,K,he){const ge=H.context,we=ge.gl,Le=H.useProgram("collisionBox"),Ve=[];let We=0,lt=0;for(let Xt=0;Xt<N.length;Xt++){const fn=N[Xt],Fn=s.getTile(fn),Hn=Fn.getBucket(C);if(!Hn)continue;let Bn=fn.posMatrix;0===W[0]&&0===W[1]||(Bn=H.translatePosMatrix(fn.posMatrix,Fn,W,K));const ii=he?Hn.textCollisionBox:Hn.iconCollisionBox,ti=Hn.collisionCircleArray;if(ti.length>0){const hi=u.create(),Wi=Bn;u.mul(hi,Hn.placementInvProjMatrix,H.transform.glCoordMatrix),u.mul(hi,hi,Hn.placementViewportMatrix),Ve.push({circleArray:ti,circleOffset:lt,transform:Wi,invTransform:hi,coord:fn}),We+=ti.length/4,lt=We}ii&&Le.draw(ge,we.LINES,hr.disabled,Do.disabled,H.colorModeForRenderPass(),$r.disabled,nr(Bn,H.transform,Fn),H.style.map.terrain&&H.style.map.terrain.getTerrainData(fn),C.id,ii.layoutVertexBuffer,ii.indexBuffer,ii.segments,null,H.transform.zoom,null,null,ii.collisionVertexBuffer)}if(!he||!Ve.length)return;const Tt=H.useProgram("collisionCircle"),kt=new u.CollisionCircleLayoutArray;kt.resize(4*We),kt._trim();let Ft=0;for(const Xt of Ve)for(let fn=0;fn<Xt.circleArray.length/4;fn++){const Fn=4*fn,Hn=Xt.circleArray[Fn+0],Bn=Xt.circleArray[Fn+1],ii=Xt.circleArray[Fn+2],ti=Xt.circleArray[Fn+3];kt.emplace(Ft++,Hn,Bn,ii,ti,0),kt.emplace(Ft++,Hn,Bn,ii,ti,1),kt.emplace(Ft++,Hn,Bn,ii,ti,2),kt.emplace(Ft++,Hn,Bn,ii,ti,3)}(!Ir||Ir.length<2*We)&&(Ir=function(Xt){const fn=2*Xt,Fn=new u.QuadTriangleArray;Fn.resize(fn),Fn._trim();for(let Hn=0;Hn<fn;Hn++){const Bn=6*Hn;Fn.uint16[Bn+0]=4*Hn+0,Fn.uint16[Bn+1]=4*Hn+1,Fn.uint16[Bn+2]=4*Hn+2,Fn.uint16[Bn+3]=4*Hn+2,Fn.uint16[Bn+4]=4*Hn+3,Fn.uint16[Bn+5]=4*Hn+0}return Fn}(We));const It=ge.createIndexBuffer(Ir,!0),ln=ge.createVertexBuffer(kt,u.collisionCircleLayout.members,!0);for(const Xt of Ve){const fn={u_matrix:Xt.transform,u_inv_matrix:Xt.invTransform,u_camera_to_center_distance:(zn=H.transform).cameraToCenterDistance,u_viewport_size:[zn.width,zn.height]};Tt.draw(ge,we.TRIANGLES,hr.disabled,Do.disabled,H.colorModeForRenderPass(),$r.disabled,fn,H.style.map.terrain&&H.style.map.terrain.getTerrainData(Xt.coord),C.id,ln,It,u.SegmentVector.simpleSegment(0,2*Xt.circleOffset,Xt.circleArray.length,Xt.circleArray.length/2),null,H.transform.zoom,null,null,null)}var zn;ln.destroy(),It.destroy()}$r.disabled=new $r(!1,1029,2305),$r.backCCW=new $r(!0,1029,2305);const G1=u.identity(new Float32Array(16));function Rs(H,s,C,N,W,K){const{horizontalAlign:he,verticalAlign:ge}=u.getAnchorAlignment(H);return new u.Point((-(he-.5)*s/W+N[0])*K,(-(ge-.5)*C/W+N[1])*K)}function is(H,s,C,N,W,K,he,ge,we,Le,Ve){const We=H.text.placedSymbolArray,lt=H.text.dynamicLayoutVertexArray,Tt=H.icon.dynamicLayoutVertexArray,kt={};lt.clear();for(let Ft=0;Ft<We.length;Ft++){const It=We.get(Ft),ln=It.hidden||!It.crossTileID||H.allowVerticalPlacement&&!It.placedOrientation?null:N[It.crossTileID];if(ln){const zn=new u.Point(It.anchorX,It.anchorY),Xt=qn(zn,C?he:K,Ve),fn=Pi(W.cameraToCenterDistance,Xt.signedDistanceFromCamera);let Fn=u.evaluateSizeForFeature(H.textSizeData,we,It)*fn/u.ONE_EM;C&&(Fn*=H.tilePixelRatio/ge);const{width:Hn,height:Bn,anchor:ii,textOffset:ti,textBoxScale:hi}=ln,Wi=Rs(ii,Hn,Bn,ti,hi,Fn),qr=C?qn(zn.add(Wi),K,Ve).point:Xt.point.add(s?Wi.rotate(-W.angle):Wi),bi=H.allowVerticalPlacement&&It.placedOrientation===u.WritingMode.vertical?Math.PI/2:0;for(let lr=0;lr<It.numGlyphs;lr++)u.addDynamicAttributes(lt,qr,bi);Le&&It.associatedIconIndex>=0&&(kt[It.associatedIconIndex]={shiftedAnchor:qr,angle:bi})}else Se(It.numGlyphs,lt)}if(Le){Tt.clear();const Ft=H.icon.placedSymbolArray;for(let It=0;It<Ft.length;It++){const ln=Ft.get(It);if(ln.hidden)Se(ln.numGlyphs,Tt);else{const zn=kt[It];if(zn)for(let Xt=0;Xt<ln.numGlyphs;Xt++)u.addDynamicAttributes(Tt,zn.shiftedAnchor,zn.angle);else Se(ln.numGlyphs,Tt)}}H.icon.dynamicLayoutVertexBuffer.updateData(Tt)}H.text.dynamicLayoutVertexBuffer.updateData(lt)}function Ga(H,s,C){return C.iconsInText&&s?"symbolTextAndIcon":H?"symbolSDF":"symbolIcon"}function Hc(H,s,C,N,W,K,he,ge,we,Le,Ve,We){const lt=H.context,Tt=lt.gl,kt=H.transform,Ft="map"===ge,It="map"===we,ln="viewport"!==ge&&"point"!==C.layout.get("symbol-placement"),zn=Ft&&!It&&!ln,Xt=!C.layout.get("symbol-sort-key").isConstant();let fn=!1;const Fn=H.depthModeForSublayer(0,hr.ReadOnly),Hn=C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Bn=[];for(const ii of N){const ti=s.getTile(ii),hi=ti.getBucket(C);if(!hi)continue;const Wi=W?hi.text:hi.icon;if(!Wi||!Wi.segments.get().length||!Wi.hasVisibleVertices)continue;const qr=Wi.programConfigurations.get(C.id),bi=W||hi.sdfIcons,lr=W?hi.textSizeData:hi.iconSizeData,Yi=It||0!==kt.pitch,ha=H.useProgram(Ga(bi,W,hi),qr),Kr=u.evaluateSizeForZoom(lr,kt.zoom),fr=H.style.map.terrain&&H.style.map.terrain.getTerrainData(ii);let ir,cs,va,ls,X1=[0,0],As=null;if(W)cs=ti.glyphAtlasTexture,va=Tt.LINEAR,ir=ti.glyphAtlasTexture.size,hi.iconsInText&&(X1=ti.imageAtlasTexture.size,As=ti.imageAtlasTexture,ls=Yi||H.options.rotating||H.options.zooming||"composite"===lr.kind||"camera"===lr.kind?Tt.LINEAR:Tt.NEAREST);else{const w1=1!==C.layout.get("icon-size").constantOr(0)||hi.iconsNeedLinear;cs=ti.imageAtlasTexture,va=bi||H.options.rotating||H.options.zooming||w1||Yi?Tt.LINEAR:Tt.NEAREST,ir=ti.imageAtlasTexture.size}const x1=Pt(ti,1,H.transform.zoom),Bs=_i(ii.posMatrix,It,Ft,H.transform,x1),f2=vi(ii.posMatrix,It,Ft,H.transform,x1),O2=Hn&&hi.hasTextData(),Wl="none"!==C.layout.get("icon-text-fit")&&O2&&hi.hasIconData();if(ln){const w1=H.style.map.terrain?($1,zs)=>H.style.map.terrain.getElevation(ii,$1,zs):null,er="map"===C.layout.get("text-rotation-alignment");Ei(hi,ii.posMatrix,H,W,Bs,f2,It,Le,er,w1)}const bc=H.translatePosMatrix(ii.posMatrix,ti,K,he),k2=ln||W&&Hn||Wl?G1:Bs,Js=H.translatePosMatrix(f2,ti,K,he,!0),p1=bi&&0!==C.paint.get(W?"text-halo-width":"icon-halo-width").constantOr(1);let Z1;Z1=bi?hi.iconsInText?Vr(lr.kind,Kr,zn,It,H,bc,k2,Js,ir,X1):Qa(lr.kind,Kr,zn,It,H,bc,k2,Js,W,ir,!0):Xs(lr.kind,Kr,zn,It,H,bc,k2,Js,W,ir);const Cl={program:ha,buffers:Wi,uniformValues:Z1,atlasTexture:cs,atlasTextureIcon:As,atlasInterpolation:va,atlasInterpolationIcon:ls,isSDF:bi,hasHalo:p1};if(Xt&&hi.canOverlap){fn=!0;const w1=Wi.segments.get();for(const er of w1)Bn.push({segments:new u.SegmentVector([er]),sortKey:er.sortKey,state:Cl,terrainData:fr})}else Bn.push({segments:Wi.segments,sortKey:0,state:Cl,terrainData:fr})}fn&&Bn.sort((ii,ti)=>ii.sortKey-ti.sortKey);for(const ii of Bn){const ti=ii.state;if(lt.activeTexture.set(Tt.TEXTURE0),ti.atlasTexture.bind(ti.atlasInterpolation,Tt.CLAMP_TO_EDGE),ti.atlasTextureIcon&&(lt.activeTexture.set(Tt.TEXTURE1),ti.atlasTextureIcon&&ti.atlasTextureIcon.bind(ti.atlasInterpolationIcon,Tt.CLAMP_TO_EDGE)),ti.isSDF){const hi=ti.uniformValues;ti.hasHalo&&(hi.u_is_halo=1,Bc(ti.buffers,ii.segments,C,H,ti.program,Fn,Ve,We,hi,ii.terrainData)),hi.u_is_halo=0}Bc(ti.buffers,ii.segments,C,H,ti.program,Fn,Ve,We,ti.uniformValues,ii.terrainData)}}function Bc(H,s,C,N,W,K,he,ge,we,Le){const Ve=N.context;W.draw(Ve,Ve.gl.TRIANGLES,K,he,ge,$r.disabled,we,Le,C.id,H.layoutVertexBuffer,H.indexBuffer,s,C.paint,N.transform.zoom,H.programConfigurations.get(C.id),H.dynamicLayoutVertexBuffer,H.opacityVertexBuffer)}function ar(H,s,C,N,W){if(!C||!N||!N.imageAtlas)return;const K=N.imageAtlas.patternPositions;let he=K[C.to.toString()],ge=K[C.from.toString()];if(!he||!ge){const we=W.getPaintProperty(s);he=K[we],ge=K[we]}he&&ge&&H.setConstantPatternPositions(he,ge)}function Pa(H,s,C,N,W,K,he){const ge=H.context.gl,we="fill-pattern",Le=C.paint.get(we),Ve=Le&&Le.constantOr(1),We=C.getCrossfadeParameters();let lt,Tt,kt,Ft,It;he?(Tt=Ve&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",lt=ge.LINES):(Tt=Ve?"fillPattern":"fill",lt=ge.TRIANGLES);const ln=Le.constantOr(null);for(const zn of N){const Xt=s.getTile(zn);if(Ve&&!Xt.patternsLoaded())continue;const fn=Xt.getBucket(C);if(!fn)continue;const Fn=fn.programConfigurations.get(C.id),Hn=H.useProgram(Tt,Fn),Bn=H.style.map.terrain&&H.style.map.terrain.getTerrainData(zn);Ve&&(H.context.activeTexture.set(ge.TEXTURE0),Xt.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Fn.updatePaintBuffers(We)),ar(Fn,we,ln,Xt,C);const ii=Bn?zn:null,ti=H.translatePosMatrix(ii?ii.posMatrix:zn.posMatrix,Xt,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor"));if(he){Ft=fn.indexBuffer2,It=fn.segments2;const hi=[ge.drawingBufferWidth,ge.drawingBufferHeight];kt="fillOutlinePattern"===Tt&&Ve?Di(ti,H,We,Xt,hi):La(ti,hi)}else Ft=fn.indexBuffer,It=fn.segments,kt=Ve?Gi(ti,H,We,Xt):P1(ti);Hn.draw(H.context,lt,W,H.stencilModeForClipping(zn),K,$r.disabled,kt,Bn,C.id,fn.layoutVertexBuffer,Ft,It,C.paint,H.transform.zoom,Fn)}}function rs(H,s,C,N,W,K,he){const ge=H.context,we=ge.gl,Le="fill-extrusion-pattern",Ve=C.paint.get(Le),We=Ve.constantOr(1),lt=C.getCrossfadeParameters(),Tt=C.paint.get("fill-extrusion-opacity"),kt=Ve.constantOr(null);for(const Ft of N){const It=s.getTile(Ft),ln=It.getBucket(C);if(!ln)continue;const zn=H.style.map.terrain&&H.style.map.terrain.getTerrainData(Ft),Xt=ln.programConfigurations.get(C.id),fn=H.useProgram(We?"fillExtrusionPattern":"fillExtrusion",Xt);We&&(H.context.activeTexture.set(we.TEXTURE0),It.imageAtlasTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),Xt.updatePaintBuffers(lt)),ar(Xt,Le,kt,It,C);const Fn=H.translatePosMatrix(Ft.posMatrix,It,C.paint.get("fill-extrusion-translate"),C.paint.get("fill-extrusion-translate-anchor")),Hn=C.paint.get("fill-extrusion-vertical-gradient"),Bn=We?rn(Fn,H,Hn,Tt,Ft,lt,It):Ut(Fn,H,Hn,Tt);fn.draw(ge,ge.gl.TRIANGLES,W,K,he,$r.backCCW,Bn,zn,C.id,ln.layoutVertexBuffer,ln.indexBuffer,ln.segments,C.paint,H.transform.zoom,Xt,H.style.map.terrain&&ln.centroidVertexBuffer)}}function ca(H,s,C,N,W,K,he){const ge=H.context,we=ge.gl,Le=C.fbo;if(!Le)return;const Ve=H.useProgram("hillshade"),We=H.style.map.terrain&&H.style.map.terrain.getTerrainData(s);ge.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_2D,Le.colorAttachment.get()),Ve.draw(ge,we.TRIANGLES,W,K,he,$r.disabled,((lt,Tt,kt,Ft)=>{const It=kt.paint.get("hillshade-shadow-color"),ln=kt.paint.get("hillshade-highlight-color"),zn=kt.paint.get("hillshade-accent-color");let Xt=kt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===kt.paint.get("hillshade-illumination-anchor")&&(Xt-=lt.transform.angle);const fn=!lt.options.moving;return{u_matrix:Ft?Ft.posMatrix:lt.transform.calculatePosMatrix(Tt.tileID.toUnwrapped(),fn),u_image:0,u_latrange:nn(0,Tt.tileID),u_light:[kt.paint.get("hillshade-exaggeration"),Xt],u_shadow:It,u_highlight:ln,u_accent:zn}})(H,C,N,We?s:null),We,N.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}function wi(H,s,C,N,W,K){const he=H.context,ge=he.gl,we=s.dem;if(we&&we.data){const Le=we.dim,Ve=we.stride,We=we.getPixels();if(he.activeTexture.set(ge.TEXTURE1),he.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||H.getTileTexture(Ve),s.demTexture){const Tt=s.demTexture;Tt.update(We,{premultiply:!1}),Tt.bind(ge.NEAREST,ge.CLAMP_TO_EDGE)}else s.demTexture=new oe(he,We,ge.RGBA,{premultiply:!1}),s.demTexture.bind(ge.NEAREST,ge.CLAMP_TO_EDGE);he.activeTexture.set(ge.TEXTURE0);let lt=s.fbo;if(!lt){const Tt=new oe(he,{width:Le,height:Le,data:null},ge.RGBA);Tt.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),lt=s.fbo=he.createFramebuffer(Le,Le,!0,!1),lt.colorAttachment.set(Tt.texture)}he.bindFramebuffer.set(lt.framebuffer),he.viewport.set([0,0,Le,Le]),H.useProgram("hillshadePrepare").draw(he,ge.TRIANGLES,N,W,K,$r.disabled,((Tt,kt)=>{const Ft=kt.stride,It=u.create();return u.ortho(It,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(It,It,[0,-u.EXTENT,0]),{u_matrix:It,u_image:1,u_dimension:[Ft,Ft],u_zoom:Tt.overscaledZ,u_unpack:kt.getUnpackVector()}})(s.tileID,we),null,C.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function L1(H,s,C,N,W,K){const he=N.paint.get("raster-fade-duration");if(!K&&he>0){const ge=u.browser.now(),we=(ge-H.timeAdded)/he,Le=s?(ge-s.timeAdded)/he:-1,Ve=C.getSource(),We=W.coveringZoomLevel({tileSize:Ve.tileSize,roundZoom:Ve.roundZoom}),lt=!s||Math.abs(s.tileID.overscaledZ-We)>Math.abs(H.tileID.overscaledZ-We),Tt=lt&&H.refreshedUponExpiration?1:u.clamp(lt?we:1-Le,0,1);return H.refreshedUponExpiration&&we>=1&&(H.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Tt}:{opacity:Tt,mix:0}}return{opacity:1,mix:0}}const Tr=new u.Color(1,0,0,1),In=new u.Color(0,1,0,1),kr=new u.Color(0,0,1,1),Lr=new u.Color(1,0,1,1),os=new u.Color(0,1,1,1);function uo(H,s,C,N){bo(H,0,s+C/2,H.transform.width,C,N)}function qs(H,s,C,N){bo(H,s-C/2,0,C,H.transform.height,N)}function bo(H,s,C,N,W,K){const he=H.context,ge=he.gl;ge.enable(ge.SCISSOR_TEST),ge.scissor(s*H.pixelRatio,C*H.pixelRatio,N*H.pixelRatio,W*H.pixelRatio),he.clear({color:K}),ge.disable(ge.SCISSOR_TEST)}function Kc(H,s,C){const N=H.context,W=N.gl,K=C.posMatrix,he=H.useProgram("debug"),ge=hr.disabled,we=Do.disabled,Le=H.colorModeForRenderPass(),We=H.style.map.terrain&&H.style.map.terrain.getTerrainData(C);N.activeTexture.set(W.TEXTURE0);const lt=s.getTileByID(C.key).latestRawTileData,Tt=Math.floor((lt&&lt.byteLength||0)/1024),kt=s.getTile(C).tileSize,Ft=512/Math.min(kt,512)*(C.overscaledZ/H.transform.zoom)*.5;let It=C.canonical.toString();C.overscaledZ!==C.canonical.z&&(It+=` => ${C.overscaledZ}`),function(ln,zn){ln.initDebugOverlayCanvas();const Xt=ln.debugOverlayCanvas,fn=ln.context.gl,Fn=ln.debugOverlayCanvas.getContext("2d");Fn.clearRect(0,0,Xt.width,Xt.height),Fn.shadowColor="white",Fn.shadowBlur=2,Fn.lineWidth=1.5,Fn.strokeStyle="white",Fn.textBaseline="top",Fn.font="bold 36px Open Sans, sans-serif",Fn.fillText(zn,5,5),Fn.strokeText(zn,5,5),ln.debugOverlayTexture.update(Xt),ln.debugOverlayTexture.bind(fn.LINEAR,fn.CLAMP_TO_EDGE)}(H,`${It} ${Tt}kB`),he.draw(N,W.TRIANGLES,ge,we,vr.alphaBlended,$r.disabled,Be(K,u.Color.transparent,Ft),null,"$debug",H.debugBuffer,H.quadTriangleIndexBuffer,H.debugSegments),he.draw(N,W.LINE_STRIP,ge,we,Le,$r.disabled,Be(K,u.Color.red),We,"$debug",H.debugBuffer,H.tileBorderIndexBuffer,H.debugSegments)}function Wa(H,s,C){const N=H.context,W=N.gl,K=H.colorModeForRenderPass(),he=new hr(W.LEQUAL,hr.ReadWrite,H.depthRangeFor3D),ge=H.useProgram("terrain"),we=s.getTerrainMesh();N.bindFramebuffer.set(null),N.viewport.set([0,0,H.width,H.height]);for(const Le of C){const Ve=H.renderToTexture.getTexture(Le),We=s.getTerrainData(Le.tileID);N.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,Ve.texture);const lt={u_matrix:H.transform.calculatePosMatrix(Le.tileID.toUnwrapped()),u_texture:0,u_ele_delta:s.getMeshFrameDelta(H.transform.zoom)};ge.draw(N,W.TRIANGLES,he,Do.disabled,K,$r.backCCW,lt,We,"terrain",we.vertexBuffer,we.indexBuffer,we.segments)}}class Qc{constructor(s,C){this.context=new Ac(s),this.transform=C,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.create(),renderTime:0},this.setup(),this.numSublayers=Ne.maxUnderzooming+Ne.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mr}resize(s,C,N){if(this.width=Math.floor(s*N),this.height=Math.floor(C*N),this.pixelRatio=N,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const W of this.style._order)this.style._layers[W].resize()}setup(){const s=this.context,C=new u.PosArray;C.emplaceBack(0,0),C.emplaceBack(u.EXTENT,0),C.emplaceBack(0,u.EXTENT),C.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(C,Rn.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);const N=new u.PosArray;N.emplaceBack(0,0),N.emplaceBack(u.EXTENT,0),N.emplaceBack(0,u.EXTENT),N.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=s.createVertexBuffer(N,Rn.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);const W=new u.RasterBoundsArray;W.emplaceBack(0,0,0,0),W.emplaceBack(u.EXTENT,0,u.EXTENT,0),W.emplaceBack(0,u.EXTENT,0,u.EXTENT),W.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=s.createVertexBuffer(W,Ge.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);const K=new u.PosArray;K.emplaceBack(0,0),K.emplaceBack(1,0),K.emplaceBack(0,1),K.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(K,Rn.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);const he=new u.LineStripIndexArray;he.emplaceBack(0),he.emplaceBack(1),he.emplaceBack(3),he.emplaceBack(2),he.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(he);const ge=new u.TriangleIndexArray;ge.emplaceBack(0,1,2),ge.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(ge);const we=this.context.gl;this.stencilClearMode=new Do({func:we.ALWAYS,mask:0},0,255,we.ZERO,we.ZERO,we.ZERO)}clearStencil(){const s=this.context,C=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const N=u.create();u.ortho(N,0,this.width,this.height,0,0,1),u.scale(N,N,[C.drawingBufferWidth,C.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,C.TRIANGLES,hr.disabled,this.stencilClearMode,vr.disabled,$r.disabled,_t(N),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,C){if(this.currentStencilSource===s.source||!s.isTileClipped()||!C||!C.length)return;this.currentStencilSource=s.source;const N=this.context,W=N.gl;this.nextStencilID+C.length>256&&this.clearStencil(),N.setColorMode(vr.disabled),N.setDepthMode(hr.disabled);const K=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const he of C){const ge=this._tileClippingMaskIDs[he.key]=this.nextStencilID++,we=this.style.map.terrain&&this.style.map.terrain.getTerrainData(he);K.draw(N,W.TRIANGLES,hr.disabled,new Do({func:W.ALWAYS,mask:0},ge,255,W.KEEP,W.KEEP,W.REPLACE),vr.disabled,$r.disabled,_t(he.posMatrix),we,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,C=this.context.gl;return new Do({func:C.NOTEQUAL,mask:255},s,255,C.KEEP,C.KEEP,C.REPLACE)}stencilModeForClipping(s){const C=this.context.gl;return new Do({func:C.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,C.KEEP,C.KEEP,C.REPLACE)}stencilConfigForOverlap(s){const C=this.context.gl,N=s.sort((he,ge)=>ge.overscaledZ-he.overscaledZ),W=N[N.length-1].overscaledZ,K=N[0].overscaledZ-W+1;if(K>1){this.currentStencilSource=void 0,this.nextStencilID+K>256&&this.clearStencil();const he={};for(let ge=0;ge<K;ge++)he[ge+W]=new Do({func:C.GEQUAL,mask:255},ge+this.nextStencilID,255,C.KEEP,C.KEEP,C.REPLACE);return this.nextStencilID+=K,[he,N]}return[{[W]:Do.disabled},N]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new vr([s.CONSTANT_COLOR,s.ONE],new u.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?vr.unblended:vr.alphaBlended}depthModeForSublayer(s,C,N){if(!this.opaquePassEnabledForLayer())return hr.disabled;const W=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new hr(N||this.context.gl.LEQUAL,C,[W,W])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,C){this.style=s,this.options=C,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(u.browser.now()),this.imageManager.beginFrame();const N=this.style._order,W=this.style.sourceCaches,K={},he={},ge={};for(const we in W){const Le=W[we];Le.used&&Le.prepare(this.context),K[we]=Le.getVisibleCoordinates(),he[we]=K[we].slice().reverse(),ge[we]=Le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let we=0;we<N.length;we++)if(this.style._layers[N[we]].is3D()){this.opaquePassCutoff=we;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const we=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||we.length)&&(u.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Le,Ve){const We=Le.context,lt=We.gl,Tt=vr.unblended,kt=new hr(lt.LEQUAL,hr.ReadWrite,[0,1]),Ft=Ve.getTerrainMesh(),It=Ve.sourceCache.getRenderableTiles(),ln=Le.useProgram("terrainDepth");We.bindFramebuffer.set(Ve.getFramebuffer("depth").framebuffer),We.viewport.set([0,0,Le.width/devicePixelRatio,Le.height/devicePixelRatio]),We.clear({color:u.Color.transparent,depth:1});for(const zn of It){const Xt=Ve.getTerrainData(zn.tileID),fn={u_matrix:Le.transform.calculatePosMatrix(zn.tileID.toUnwrapped()),u_ele_delta:Ve.getMeshFrameDelta(Le.transform.zoom)};ln.draw(We,lt.TRIANGLES,kt,Do.disabled,Tt,$r.backCCW,fn,Xt,"terrain",Ft.vertexBuffer,Ft.indexBuffer,Ft.segments)}We.bindFramebuffer.set(null),We.viewport.set([0,0,Le.width,Le.height])}(this,this.style.map.terrain),function(Le,Ve){const We=Le.context,lt=We.gl,Tt=vr.unblended,kt=new hr(lt.LEQUAL,hr.ReadWrite,[0,1]),Ft=Ve.getTerrainMesh(),It=Ve.getCoordsTexture(),ln=Ve.sourceCache.getRenderableTiles(),zn=Le.useProgram("terrainCoords");We.bindFramebuffer.set(Ve.getFramebuffer("coords").framebuffer),We.viewport.set([0,0,Le.width/devicePixelRatio,Le.height/devicePixelRatio]),We.clear({color:u.Color.transparent,depth:1}),Ve.coordsIndex=[];for(const Xt of ln){const fn=Ve.getTerrainData(Xt.tileID);We.activeTexture.set(lt.TEXTURE0),lt.bindTexture(lt.TEXTURE_2D,It.texture);const Fn={u_matrix:Le.transform.calculatePosMatrix(Xt.tileID.toUnwrapped()),u_terrain_coords_id:(255-Ve.coordsIndex.length)/255,u_texture:0,u_ele_delta:Ve.getMeshFrameDelta(Le.transform.zoom)};zn.draw(We,lt.TRIANGLES,kt,Do.disabled,Tt,$r.backCCW,Fn,fn,"terrain",Ft.vertexBuffer,Ft.indexBuffer,Ft.segments),Ve.coordsIndex.push(Xt.tileID.key)}We.bindFramebuffer.set(null),We.viewport.set([0,0,Le.width,Le.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const we of N){const Le=this.style._layers[we];if(!Le.hasOffscreenPass()||Le.isHidden(this.transform.zoom))continue;const Ve=he[Le.source];("custom"===Le.type||Ve.length)&&this.renderLayer(this,W[Le.source],Le,Ve)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:C.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=C.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=N.length-1;this.currentLayer>=0;this.currentLayer--){const we=this.style._layers[N[this.currentLayer]],Le=W[we.source],Ve=K[we.source];this._renderTileClippingMasks(we,Ve),this.renderLayer(this,Le,we,Ve)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<N.length;this.currentLayer++){const we=this.style._layers[N[this.currentLayer]],Le=W[we.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(we))continue;const Ve=("symbol"===we.type?ge:he)[we.source];this._renderTileClippingMasks(we,K[we.source]),this.renderLayer(this,Le,we,Ve)}if(this.options.showTileBoundaries){const we=function(Le,Ve){let We=null;const lt=Object.values(Le._layers).flatMap(It=>It.source&&!It.isHidden(Ve)?[Le.sourceCaches[It.source]]:[]),Tt=lt.filter(It=>"vector"===It.getSource().type),kt=lt.filter(It=>"vector"!==It.getSource().type),Ft=It=>{(!We||We.getSource().maxzoom<It.getSource().maxzoom)&&(We=It)};return Tt.forEach(It=>Ft(It)),We||kt.forEach(It=>Ft(It)),We}(this.style,this.transform.zoom);we&&function(Le,Ve,We){for(let lt=0;lt<We.length;lt++)Kc(Le,Ve,We[lt])}(this,we,we.getVisibleCoordinates())}this.options.showPadding&&function(we){const Le=we.transform.padding;uo(we,we.transform.height-(Le.top||0),3,Tr),uo(we,Le.bottom||0,3,In),qs(we,Le.left||0,3,kr),qs(we,we.transform.width-(Le.right||0),3,Lr);const Ve=we.transform.centerPoint;var We,lt,Tt,kt;bo(We=we,(lt=Ve.x)-1,(Tt=we.transform.height-Ve.y)-10,2,20,kt=os),bo(We,lt-10,Tt-1,20,2,kt)}(this),this.context.setDefault()}renderLayer(s,C,N,W){if(!N.isHidden(this.transform.zoom)&&("background"===N.type||"custom"===N.type||(W||[]).length))switch(this.id=N.id,N.type){case"symbol":!function(K,he,ge,we,Le){if("translucent"!==K.renderPass)return;const Ve=Do.disabled,We=K.colorModeForRenderPass();(ge._unevaluatedLayout.hasValue("text-variable-anchor")||ge._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(lt,Tt,kt,Ft,It,ln,zn){const Xt=Tt.transform,fn="map"===It,Fn="map"===ln;for(const Hn of lt){const Bn=Ft.getTile(Hn),ii=Bn.getBucket(kt);if(!ii||!ii.text||!ii.text.segments.get().length)continue;const ti=u.evaluateSizeForZoom(ii.textSizeData,Xt.zoom),hi=Pt(Bn,1,Tt.transform.zoom),Wi=_i(Hn.posMatrix,Fn,fn,Tt.transform,hi),qr="none"!==kt.layout.get("icon-text-fit")&&ii.hasIconData();if(ti){const bi=Math.pow(2,Xt.zoom-Bn.tileID.overscaledZ);is(ii,fn,Fn,zn,Xt,Wi,Hn.posMatrix,bi,ti,qr,Tt.style.map.terrain?(lr,Yi)=>Tt.style.map.terrain.getElevation(Hn,lr,Yi):null)}}}(we,K,ge,he,ge.layout.get("text-rotation-alignment"),ge.layout.get("text-pitch-alignment"),Le),0!==ge.paint.get("icon-opacity").constantOr(1)&&Hc(K,he,ge,we,!1,ge.paint.get("icon-translate"),ge.paint.get("icon-translate-anchor"),ge.layout.get("icon-rotation-alignment"),ge.layout.get("icon-pitch-alignment"),ge.layout.get("icon-keep-upright"),Ve,We),0!==ge.paint.get("text-opacity").constantOr(1)&&Hc(K,he,ge,we,!0,ge.paint.get("text-translate"),ge.paint.get("text-translate-anchor"),ge.layout.get("text-rotation-alignment"),ge.layout.get("text-pitch-alignment"),ge.layout.get("text-keep-upright"),Ve,We),he.map.showCollisionBoxes&&(Ua(K,he,ge,we,ge.paint.get("text-translate"),ge.paint.get("text-translate-anchor"),!0),Ua(K,he,ge,we,ge.paint.get("icon-translate"),ge.paint.get("icon-translate-anchor"),!1))}(s,C,N,W,this.style.placement.variableOffsets);break;case"circle":!function(K,he,ge,we){if("translucent"!==K.renderPass)return;const Le=ge.paint.get("circle-opacity"),Ve=ge.paint.get("circle-stroke-width"),We=ge.paint.get("circle-stroke-opacity"),lt=!ge.layout.get("circle-sort-key").isConstant();if(0===Le.constantOr(1)&&(0===Ve.constantOr(1)||0===We.constantOr(1)))return;const Tt=K.context,kt=Tt.gl,Ft=K.depthModeForSublayer(0,hr.ReadOnly),It=Do.disabled,ln=K.colorModeForRenderPass(),zn=[];for(let Xt=0;Xt<we.length;Xt++){const fn=we[Xt],Fn=he.getTile(fn),Hn=Fn.getBucket(ge);if(!Hn)continue;const Bn=Hn.programConfigurations.get(ge.id),ii=K.useProgram("circle",Bn),ti=Hn.layoutVertexBuffer,hi=Hn.indexBuffer,Wi=K.style.map.terrain&&K.style.map.terrain.getTerrainData(fn),qr={programConfiguration:Bn,program:ii,layoutVertexBuffer:ti,indexBuffer:hi,uniformValues:Ui(K,fn,Fn,ge),terrainData:Wi};if(lt){const bi=Hn.segments.get();for(const lr of bi)zn.push({segments:new u.SegmentVector([lr]),sortKey:lr.sortKey,state:qr})}else zn.push({segments:Hn.segments,sortKey:0,state:qr})}lt&&zn.sort((Xt,fn)=>Xt.sortKey-fn.sortKey);for(const Xt of zn){const{programConfiguration:fn,program:Fn,layoutVertexBuffer:Hn,indexBuffer:Bn,uniformValues:ii,terrainData:ti}=Xt.state;Fn.draw(Tt,kt.TRIANGLES,Ft,It,ln,$r.disabled,ii,ti,ge.id,Hn,Bn,Xt.segments,ge.paint,K.transform.zoom,fn)}}(s,C,N,W);break;case"heatmap":!function(K,he,ge,we){if(0!==ge.paint.get("heatmap-opacity"))if("offscreen"===K.renderPass){const Le=K.context,Ve=Le.gl,We=Do.disabled,lt=new vr([Ve.ONE,Ve.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(Tt,kt,Ft){const It=Tt.gl;Tt.activeTexture.set(It.TEXTURE1),Tt.viewport.set([0,0,kt.width/4,kt.height/4]);let ln=Ft.heatmapFbo;if(ln)It.bindTexture(It.TEXTURE_2D,ln.colorAttachment.get()),Tt.bindFramebuffer.set(ln.framebuffer);else{const zn=It.createTexture();It.bindTexture(It.TEXTURE_2D,zn),It.texParameteri(It.TEXTURE_2D,It.TEXTURE_WRAP_S,It.CLAMP_TO_EDGE),It.texParameteri(It.TEXTURE_2D,It.TEXTURE_WRAP_T,It.CLAMP_TO_EDGE),It.texParameteri(It.TEXTURE_2D,It.TEXTURE_MIN_FILTER,It.LINEAR),It.texParameteri(It.TEXTURE_2D,It.TEXTURE_MAG_FILTER,It.LINEAR),ln=Ft.heatmapFbo=Tt.createFramebuffer(kt.width/4,kt.height/4,!1,!1),function(Xt,fn,Fn,Hn){var Bn,ii;const ti=Xt.gl,hi=null!==(Bn=Xt.HALF_FLOAT)&&void 0!==Bn?Bn:ti.UNSIGNED_BYTE,Wi=null!==(ii=Xt.RGBA16F)&&void 0!==ii?ii:ti.RGBA;ti.texImage2D(ti.TEXTURE_2D,0,Wi,fn.width/4,fn.height/4,0,ti.RGBA,hi,null),Hn.colorAttachment.set(Fn)}(Tt,kt,zn,ln)}})(Le,K,ge),Le.clear({color:u.Color.transparent});for(let Tt=0;Tt<we.length;Tt++){const kt=we[Tt];if(he.hasRenderableParent(kt))continue;const Ft=he.getTile(kt),It=Ft.getBucket(ge);if(!It)continue;const ln=It.programConfigurations.get(ge.id),zn=K.useProgram("heatmap",ln),{zoom:Xt}=K.transform;zn.draw(Le,Ve.TRIANGLES,hr.disabled,We,lt,$r.disabled,Lt(kt.posMatrix,Ft,Xt,ge.paint.get("heatmap-intensity")),null,ge.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,ge.paint,K.transform.zoom,ln)}Le.viewport.set([0,0,K.width,K.height])}else"translucent"===K.renderPass&&(K.context.setColorMode(K.colorModeForRenderPass()),function(Le,Ve){const We=Le.context,lt=We.gl,Tt=Ve.heatmapFbo;if(!Tt)return;We.activeTexture.set(lt.TEXTURE0),lt.bindTexture(lt.TEXTURE_2D,Tt.colorAttachment.get()),We.activeTexture.set(lt.TEXTURE1);let kt=Ve.colorRampTexture;kt||(kt=Ve.colorRampTexture=new oe(We,Ve.colorRamp,lt.RGBA)),kt.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),Le.useProgram("heatmapTexture").draw(We,lt.TRIANGLES,hr.disabled,Do.disabled,Le.colorModeForRenderPass(),$r.disabled,((Ft,It,ln,zn)=>{const Xt=u.create();u.ortho(Xt,0,Ft.width,Ft.height,0,0,1);const fn=Ft.context.gl;return{u_matrix:Xt,u_world:[fn.drawingBufferWidth,fn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:It.paint.get("heatmap-opacity")}})(Le,Ve),null,Ve.id,Le.viewportBuffer,Le.quadTriangleIndexBuffer,Le.viewportSegments,Ve.paint,Le.transform.zoom)}(K,ge))}(s,C,N,W);break;case"line":!function(K,he,ge,we){if("translucent"!==K.renderPass)return;const Le=ge.paint.get("line-opacity"),Ve=ge.paint.get("line-width");if(0===Le.constantOr(1)||0===Ve.constantOr(1))return;const We=K.depthModeForSublayer(0,hr.ReadOnly),lt=K.colorModeForRenderPass(),Tt=ge.paint.get("line-dasharray"),kt=ge.paint.get("line-pattern"),Ft=kt.constantOr(1),It=ge.paint.get("line-gradient"),ln=ge.getCrossfadeParameters(),zn=Ft?"linePattern":Tt?"lineSDF":It?"lineGradient":"line",Xt=K.context,fn=Xt.gl;let Fn=!0;for(const Hn of we){const Bn=he.getTile(Hn);if(Ft&&!Bn.patternsLoaded())continue;const ii=Bn.getBucket(ge);if(!ii)continue;const ti=ii.programConfigurations.get(ge.id),hi=K.context.program.get(),Wi=K.useProgram(zn,ti),qr=Fn||Wi.program!==hi,bi=K.style.map.terrain&&K.style.map.terrain.getTerrainData(Hn),lr=kt.constantOr(null);if(lr&&Bn.imageAtlas){const Kr=Bn.imageAtlas,fr=Kr.patternPositions[lr.to.toString()],ir=Kr.patternPositions[lr.from.toString()];fr&&ir&&ti.setConstantPatternPositions(fr,ir)}const Yi=bi?Hn:null,ha=Ft?ri(K,Bn,ge,ln,Yi):Tt?cr(K,Bn,ge,Tt,ln,Yi):It?en(K,Bn,ge,ii.lineClipsArray.length,Yi):Pn(K,Bn,ge,Yi);if(Ft)Xt.activeTexture.set(fn.TEXTURE0),Bn.imageAtlasTexture.bind(fn.LINEAR,fn.CLAMP_TO_EDGE),ti.updatePaintBuffers(ln);else if(Tt&&(qr||K.lineAtlas.dirty))Xt.activeTexture.set(fn.TEXTURE0),K.lineAtlas.bind(Xt);else if(It){const Kr=ii.gradients[ge.id];let fr=Kr.texture;if(ge.gradientVersion!==Kr.version){let ir=256;if(ge.stepInterpolant){const cs=he.getSource().maxzoom,va=Hn.canonical.z===cs?Math.ceil(1<<K.transform.maxZoom-Hn.canonical.z):1;ir=u.clamp(u.nextPowerOfTwo(ii.maxLineLength/u.EXTENT*1024*va),256,Xt.maxTextureSize)}Kr.gradient=u.renderColorRamp({expression:ge.gradientExpression(),evaluationKey:"lineProgress",resolution:ir,image:Kr.gradient||void 0,clips:ii.lineClipsArray}),Kr.texture?Kr.texture.update(Kr.gradient):Kr.texture=new oe(Xt,Kr.gradient,fn.RGBA),Kr.version=ge.gradientVersion,fr=Kr.texture}Xt.activeTexture.set(fn.TEXTURE0),fr.bind(ge.stepInterpolant?fn.NEAREST:fn.LINEAR,fn.CLAMP_TO_EDGE)}Wi.draw(Xt,fn.TRIANGLES,We,K.stencilModeForClipping(Hn),lt,$r.disabled,ha,bi,ge.id,ii.layoutVertexBuffer,ii.indexBuffer,ii.segments,ge.paint,K.transform.zoom,ti,ii.layoutVertexBuffer2),Fn=!1}}(s,C,N,W);break;case"fill":!function(K,he,ge,we){const Le=ge.paint.get("fill-color"),Ve=ge.paint.get("fill-opacity");if(0===Ve.constantOr(1))return;const We=K.colorModeForRenderPass(),lt=ge.paint.get("fill-pattern"),Tt=K.opaquePassEnabledForLayer()&&!lt.constantOr(1)&&1===Le.constantOr(u.Color.transparent).a&&1===Ve.constantOr(0)?"opaque":"translucent";if(K.renderPass===Tt){const kt=K.depthModeForSublayer(1,"opaque"===K.renderPass?hr.ReadWrite:hr.ReadOnly);Pa(K,he,ge,we,kt,We,!1)}if("translucent"===K.renderPass&&ge.paint.get("fill-antialias")){const kt=K.depthModeForSublayer(ge.getPaintProperty("fill-outline-color")?2:0,hr.ReadOnly);Pa(K,he,ge,we,kt,We,!0)}}(s,C,N,W);break;case"fill-extrusion":!function(K,he,ge,we){const Le=ge.paint.get("fill-extrusion-opacity");if(0!==Le&&"translucent"===K.renderPass){const Ve=new hr(K.context.gl.LEQUAL,hr.ReadWrite,K.depthRangeFor3D);if(1!==Le||ge.paint.get("fill-extrusion-pattern").constantOr(1))rs(K,he,ge,we,Ve,Do.disabled,vr.disabled),rs(K,he,ge,we,Ve,K.stencilModeFor3D(),K.colorModeForRenderPass());else{const We=K.colorModeForRenderPass();rs(K,he,ge,we,Ve,Do.disabled,We)}}}(s,C,N,W);break;case"hillshade":!function(K,he,ge,we){if("offscreen"!==K.renderPass&&"translucent"!==K.renderPass)return;const Le=K.context,Ve=K.depthModeForSublayer(0,hr.ReadOnly),We=K.colorModeForRenderPass(),[lt,Tt]="translucent"===K.renderPass?K.stencilConfigForOverlap(we):[{},we];for(const kt of Tt){const Ft=he.getTile(kt);void 0!==Ft.needsHillshadePrepare&&Ft.needsHillshadePrepare&&"offscreen"===K.renderPass?wi(K,Ft,ge,Ve,Do.disabled,We):"translucent"===K.renderPass&&ca(K,kt,Ft,ge,Ve,lt[kt.overscaledZ],We)}Le.viewport.set([0,0,K.width,K.height])}(s,C,N,W);break;case"raster":!function(K,he,ge,we){if("translucent"!==K.renderPass||0===ge.paint.get("raster-opacity")||!we.length)return;const Le=K.context,Ve=Le.gl,We=he.getSource(),lt=K.useProgram("raster"),Tt=K.colorModeForRenderPass(),[kt,Ft]=We instanceof $e?[{},we]:K.stencilConfigForOverlap(we),It=Ft[Ft.length-1].overscaledZ,ln=!K.options.moving;for(const zn of Ft){const Xt=K.depthModeForSublayer(zn.overscaledZ-It,1===ge.paint.get("raster-opacity")?hr.ReadWrite:hr.ReadOnly,Ve.LESS),fn=he.getTile(zn);fn.registerFadeDuration(ge.paint.get("raster-fade-duration"));const Fn=he.findLoadedParent(zn,0),Hn=L1(fn,Fn,he,ge,K.transform,K.style.map.terrain);let Bn,ii;const ti="nearest"===ge.paint.get("raster-resampling")?Ve.NEAREST:Ve.LINEAR;Le.activeTexture.set(Ve.TEXTURE0),fn.texture.bind(ti,Ve.CLAMP_TO_EDGE,Ve.LINEAR_MIPMAP_NEAREST),Le.activeTexture.set(Ve.TEXTURE1),Fn?(Fn.texture.bind(ti,Ve.CLAMP_TO_EDGE,Ve.LINEAR_MIPMAP_NEAREST),Bn=Math.pow(2,Fn.tileID.overscaledZ-fn.tileID.overscaledZ),ii=[fn.tileID.canonical.x*Bn%1,fn.tileID.canonical.y*Bn%1]):fn.texture.bind(ti,Ve.CLAMP_TO_EDGE,Ve.LINEAR_MIPMAP_NEAREST);const hi=K.style.map.terrain&&K.style.map.terrain.getTerrainData(zn),Wi=hi?zn:null,qr=Wi?Wi.posMatrix:K.transform.calculatePosMatrix(zn.toUnwrapped(),ln),bi=Sa(qr,ii||[0,0],Bn||1,Hn,ge);We instanceof $e?lt.draw(Le,Ve.TRIANGLES,Xt,Do.disabled,Tt,$r.disabled,bi,hi,ge.id,We.boundsBuffer,K.quadTriangleIndexBuffer,We.boundsSegments):lt.draw(Le,Ve.TRIANGLES,Xt,kt[zn.overscaledZ],Tt,$r.disabled,bi,hi,ge.id,K.rasterBoundsBuffer,K.quadTriangleIndexBuffer,K.rasterBoundsSegments)}}(s,C,N,W);break;case"background":!function(K,he,ge,we){const Le=ge.paint.get("background-color"),Ve=ge.paint.get("background-opacity");if(0===Ve)return;const We=K.context,lt=We.gl,Tt=K.transform,kt=Tt.tileSize,Ft=ge.paint.get("background-pattern");if(K.isPatternMissing(Ft))return;const It=!Ft&&1===Le.a&&1===Ve&&K.opaquePassEnabledForLayer()?"opaque":"translucent";if(K.renderPass!==It)return;const ln=Do.disabled,zn=K.depthModeForSublayer(0,"opaque"===It?hr.ReadWrite:hr.ReadOnly),Xt=K.colorModeForRenderPass(),fn=K.useProgram(Ft?"backgroundPattern":"background"),Fn=we||Tt.coveringTiles({tileSize:kt,terrain:K.style.map.terrain});Ft&&(We.activeTexture.set(lt.TEXTURE0),K.imageManager.bind(K.context));const Hn=ge.getCrossfadeParameters();for(const Bn of Fn){const ii=we?Bn.posMatrix:K.transform.calculatePosMatrix(Bn.toUnwrapped()),ti=Ft?Aa(ii,Ve,K,Ft,{tileID:Bn,tileSize:kt},Hn):l1(ii,Ve,Le),hi=K.style.map.terrain&&K.style.map.terrain.getTerrainData(Bn);fn.draw(We,lt.TRIANGLES,zn,ln,Xt,$r.disabled,ti,hi,ge.id,K.tileExtentBuffer,K.quadTriangleIndexBuffer,K.tileExtentSegments)}}(s,0,N,W);break;case"custom":!function(K,he,ge){const we=K.context,Le=ge.implementation;if("offscreen"===K.renderPass){const Ve=Le.prerender;Ve&&(K.setCustomLayerDefaults(),we.setColorMode(K.colorModeForRenderPass()),Ve.call(Le,we.gl,K.transform.customLayerMatrix()),we.setDirty(),K.setBaseState())}else if("translucent"===K.renderPass){K.setCustomLayerDefaults(),we.setColorMode(K.colorModeForRenderPass()),we.setStencilMode(Do.disabled);const Ve="3d"===Le.renderingMode?new hr(K.context.gl.LEQUAL,hr.ReadWrite,K.depthRangeFor3D):K.depthModeForSublayer(0,hr.ReadOnly);we.setDepthMode(Ve),Le.render(we.gl,K.transform.customLayerMatrix()),we.setDirty(),K.setBaseState(),we.bindFramebuffer.set(null)}}(s,0,N)}}translatePosMatrix(s,C,N,W,K){if(!N[0]&&!N[1])return s;const he=K?"map"===W?this.transform.angle:0:"viewport"===W?-this.transform.angle:0;if(he){const Le=Math.sin(he),Ve=Math.cos(he);N=[N[0]*Ve-N[1]*Le,N[0]*Le+N[1]*Ve]}const ge=[K?N[0]:Pt(C,N[0],this.transform.zoom),K?N[1]:Pt(C,N[1],this.transform.zoom),0],we=new Float32Array(16);return u.translate(we,s,ge),we}saveTileTexture(s){const C=this._tileTextures[s.size[0]];C?C.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const C=this._tileTextures[s];return C&&C.length>0?C.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const C=this.imageManager.getPattern(s.from.toString()),N=this.imageManager.getPattern(s.to.toString());return!C||!N}useProgram(s,C){this.cache=this.cache||{};const N=s+(C?C.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[N]||(this.cache[N]=new St(this.context,Dt[s],C,xs[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[N]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new oe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:C}=this.context.gl;return this.width!==s||this.height!==C}}class jc{constructor(s,C){this.points=s,this.planes=C}static fromInvProjectionMatrix(s,C,N){const W=Math.pow(2,N),K=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ge=>{const we=1/(ge=u.transformMat4([],ge,s))[3]/C*W;return u.mul$1(ge,ge,[we,we,1/ge[3],we])}),he=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ge=>{const we=function(lt,Tt){var kt=Tt[0],Ft=Tt[1],It=Tt[2],ln=kt*kt+Ft*Ft+It*It;return ln>0&&(ln=1/Math.sqrt(ln)),lt[0]=Tt[0]*ln,lt[1]=Tt[1]*ln,lt[2]=Tt[2]*ln,lt}([],(lt=[],Tt=j([],K[ge[0]],K[ge[1]]),kt=j([],K[ge[2]],K[ge[1]]),Ft=Tt[0],zn=kt[0],lt[0]=(It=Tt[1])*(fn=kt[2])-(ln=Tt[2])*(Xt=kt[1]),lt[1]=ln*zn-Ft*fn,lt[2]=Ft*Xt-It*zn,lt)),Le=-((Ve=we)[0]*(We=K[ge[1]])[0]+Ve[1]*We[1]+Ve[2]*We[2]);var lt,Tt,kt,Ft,It,ln,zn,Xt,fn,Ve,We;return we.concat(Le)});return new jc(K,he)}}class yc{constructor(s,C){var N,W,K;this.min=s,this.max=C,this.center=function(N,W,K){return N[0]=.5*W[0],N[1]=.5*W[1],N[2]=.5*W[2],N}([],((N=[])[0]=(W=this.min)[0]+(K=this.max)[0],N[1]=W[1]+K[1],N[2]=W[2]+K[2],N))}quadrant(s){const C=[s%2==0,s<2],N=U(this.min),W=U(this.max);for(let K=0;K<C.length;K++)N[K]=C[K]?this.min[K]:this.center[K],W[K]=C[K]?this.center[K]:this.max[K];return W[2]=this.max[2],new yc(N,W)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const C=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let N=!0;for(let W=0;W<s.planes.length;W++){const K=s.planes[W];let he=0;for(let ge=0;ge<C.length;ge++)u.dot(K,C[ge])>=0&&he++;if(0===he)return 0;he!==C.length&&(N=!1)}if(N)return 2;for(let W=0;W<3;W++){let K=Number.MAX_VALUE,he=-Number.MAX_VALUE;for(let ge=0;ge<s.points.length;ge++){const we=s.points[ge][W]-this.min[W];K=Math.min(K,we),he=Math.max(he,we)}if(he<0||K>this.max[W]-this.min[W])return 0}return 1}}class la{constructor(s=0,C=0,N=0,W=0){if(isNaN(s)||s<0||isNaN(C)||C<0||isNaN(N)||N<0||isNaN(W)||W<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=C,this.left=N,this.right=W}interpolate(s,C,N){return null!=C.top&&null!=s.top&&(this.top=u.interpolate.number(s.top,C.top,N)),null!=C.bottom&&null!=s.bottom&&(this.bottom=u.interpolate.number(s.bottom,C.bottom,N)),null!=C.left&&null!=s.left&&(this.left=u.interpolate.number(s.left,C.left,N)),null!=C.right&&null!=s.right&&(this.right=u.interpolate.number(s.right,C.right,N)),this}getCenter(s,C){const N=u.clamp((this.left+s-this.right)/2,0,s),W=u.clamp((this.top+C-this.bottom)/2,0,C);return new u.Point(N,W)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new la(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Si{constructor(s,C,N,W,K){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===K||!!K,this._minZoom=s||0,this._maxZoom=C||22,this._minPitch=N??0,this._maxPitch=W??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new la,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const s=new Si(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this._minEleveationForCurrentTile=s._minEleveationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){void 0===s?s=!0:null===s&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const C=-u.wrap(s,-180,180)*Math.PI/180;var N;this.angle!==C&&(this._unmodified=!1,this.angle=C,this._calcMatrices(),this.rotationMatrix=(N=new u.ARRAY_TYPE(4),u.ARRAY_TYPE!=Float32Array&&(N[1]=0,N[2]=0),N[0]=1,N[3]=1,N),function(N,W,K){var he=W[0],ge=W[1],we=W[2],Le=W[3],Ve=Math.sin(K),We=Math.cos(K);N[0]=he*We+we*Ve,N[1]=ge*We+Le*Ve,N[2]=he*-Ve+we*We,N[3]=ge*-Ve+Le*We}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const C=u.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==C&&(this._unmodified=!1,this._pitch=C,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const C=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==C&&(this._unmodified=!1,this._zoom=C,this.tileZoom=Math.max(0,Math.floor(C)),this.scale=this.zoomScale(C),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,C,N){this._unmodified=!1,this._edgeInsets.interpolate(s,C,N),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const C=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,C)}getVisibleUnwrappedCoordinates(s){const C=[new u.UnwrappedTileID(0,s)];if(this._renderWorldCopies){const N=this.pointCoordinate(new u.Point(0,0)),W=this.pointCoordinate(new u.Point(this.width,0)),K=this.pointCoordinate(new u.Point(this.width,this.height)),he=this.pointCoordinate(new u.Point(0,this.height)),ge=Math.floor(Math.min(N.x,W.x,K.x,he.x)),we=Math.floor(Math.max(N.x,W.x,K.x,he.x)),Le=1;for(let Ve=ge-Le;Ve<=we+Le;Ve++)0!==Ve&&C.push(new u.UnwrappedTileID(Ve,s))}return C}coveringTiles(s){var C,N;let W=this.coveringZoomLevel(s);const K=W;if(void 0!==s.minzoom&&W<s.minzoom)return[];void 0!==s.maxzoom&&W>s.maxzoom&&(W=s.maxzoom);const he=this.pointCoordinate(this.getCameraPoint()),ge=u.MercatorCoordinate.fromLngLat(this.center),we=Math.pow(2,W),Le=[we*he.x,we*he.y,0],Ve=[we*ge.x,we*ge.y,0],We=jc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,W);let lt=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(lt=W);const Tt=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,kt=Xt=>({aabb:new yc([Xt*we,0,0],[(Xt+1)*we,we,0]),zoom:0,x:0,y:0,wrap:Xt,fullyVisible:!1}),Ft=[],It=[],ln=W,zn=s.reparseOverscaled?K:W;if(this._renderWorldCopies)for(let Xt=1;Xt<=3;Xt++)Ft.push(kt(-Xt)),Ft.push(kt(Xt));for(Ft.push(kt(0));Ft.length>0;){const Xt=Ft.pop(),fn=Xt.x,Fn=Xt.y;let Hn=Xt.fullyVisible;if(!Hn){const Wi=Xt.aabb.intersects(We);if(0===Wi)continue;Hn=2===Wi}const Bn=s.terrain?Le:Ve,ii=Xt.aabb.distanceX(Bn),ti=Xt.aabb.distanceY(Bn),hi=Math.max(Math.abs(ii),Math.abs(ti));if(Xt.zoom===ln||hi>Tt+(1<<ln-Xt.zoom)-2&&Xt.zoom>=lt){const Wi=ln-Xt.zoom,qr=Le[0]-.5-(fn<<Wi),bi=Le[1]-.5-(Fn<<Wi);It.push({tileID:new u.OverscaledTileID(Xt.zoom===ln?zn:Xt.zoom,Xt.wrap,Xt.zoom,fn,Fn),distanceSq:P([Ve[0]-.5-fn,Ve[1]-.5-Fn]),tileDistanceToCamera:Math.sqrt(qr*qr+bi*bi)})}else for(let Wi=0;Wi<4;Wi++){const qr=(fn<<1)+Wi%2,bi=(Fn<<1)+(Wi>>1),lr=Xt.zoom+1;let Yi=Xt.aabb.quadrant(Wi);if(s.terrain){const ha=new u.OverscaledTileID(lr,Xt.wrap,lr,qr,bi),Kr=s.terrain.getMinMaxElevation(ha),fr=null!==(C=Kr.minElevation)&&void 0!==C?C:this.elevation,ir=null!==(N=Kr.maxElevation)&&void 0!==N?N:this.elevation;Yi=new yc([Yi.min[0],Yi.min[1],fr],[Yi.max[0],Yi.max[1],ir])}Ft.push({aabb:Yi,zoom:lr,x:qr,y:bi,wrap:Xt.wrap,fullyVisible:Hn})}}return It.sort((Xt,fn)=>Xt.distanceSq-fn.distanceSq).map(Xt=>Xt.tileID)}resize(s,C){this.width=s,this.height=C,this.pixelsToGLUnits=[2/s,-2/C],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const C=u.clamp(s.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.Point(u.mercatorXfromLng(s.lng)*this.worldSize,u.mercatorYfromLat(C)*this.worldSize)}unproject(s){return new u.MercatorCoordinate(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const C=this.pointLocation(this.centerPoint,s),N=s.getElevationForLngLatZoom(C,this.tileZoom);if(!(this.elevation-N))return;const W=this.getCameraPosition(),K=u.MercatorCoordinate.fromLngLat(W.lngLat,W.altitude),he=u.MercatorCoordinate.fromLngLat(C,N),ge=K.x-he.x,we=K.y-he.y,Le=K.z-he.z,Ve=Math.sqrt(ge*ge+we*we+Le*Le),We=this.scaleZoom(this.cameraToCenterDistance/Ve/this.tileSize);this._elevation=N,this._center=C,this.zoom=We}setLocationAtPoint(s,C){const N=this.pointCoordinate(C),W=this.pointCoordinate(this.centerPoint),K=this.locationCoordinate(s),he=new u.MercatorCoordinate(K.x-(N.x-W.x),K.y-(N.y-W.y));this.center=this.coordinateLocation(he),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,C){return C?this.coordinatePoint(this.locationCoordinate(s),C.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,C){return this.coordinateLocation(this.pointCoordinate(s,C))}locationCoordinate(s){return u.MercatorCoordinate.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,C){if(C){const lt=C.pointCoordinate(s);if(null!=lt)return lt}const N=[s.x,s.y,0,1],W=[s.x,s.y,1,1];u.transformMat4(N,N,this.pixelMatrixInverse),u.transformMat4(W,W,this.pixelMatrixInverse);const K=N[3],he=W[3],ge=N[1]/K,we=W[1]/he,Le=N[2]/K,Ve=W[2]/he,We=Le===Ve?0:(0-Le)/(Ve-Le);return new u.MercatorCoordinate(u.interpolate.number(N[0]/K,W[0]/he,We)/this.worldSize,u.interpolate.number(ge,we,We)/this.worldSize)}coordinatePoint(s,C=0,N=this.pixelMatrix){const W=[s.x*this.worldSize,s.y*this.worldSize,C,1];return u.transformMat4(W,W,N),new u.Point(W[0]/W[3],W[1]/W[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return(new ae).extend(this.pointLocation(new u.Point(0,s))).extend(this.pointLocation(new u.Point(this.width,s))).extend(this.pointLocation(new u.Point(this.width,this.height))).extend(this.pointLocation(new u.Point(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new ae([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(s,C=!1){const N=s.key,W=C?this._alignedPosMatrixCache:this._posMatrixCache;if(W[N])return W[N];const K=s.canonical,he=this.worldSize/this.zoomScale(K.z),ge=K.x+Math.pow(2,K.z)*s.wrap,we=u.identity(new Float64Array(16));return u.translate(we,we,[ge*he,K.y*he,0]),u.scale(we,we,[he/u.EXTENT,he/u.EXTENT,1]),u.multiply(we,C?this.alignedProjMatrix:this.projMatrix,we),W[N]=new Float32Array(we),W[N]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s,C,N,W,K=-90,he=90,ge=-180,we=180;const Le=this.size,Ve=this._unmodified;if(this.latRange){const Tt=this.latRange;K=u.mercatorYfromLat(Tt[1])*this.worldSize,he=u.mercatorYfromLat(Tt[0])*this.worldSize,s=he-K<Le.y?Le.y/(he-K):0}if(this.lngRange){const Tt=this.lngRange;ge=u.wrap(u.mercatorXfromLng(Tt[0])*this.worldSize,0,this.worldSize),we=u.wrap(u.mercatorXfromLng(Tt[1])*this.worldSize,0,this.worldSize),we<ge&&(we+=this.worldSize),C=we-ge<Le.x?Le.x/(we-ge):0}const We=this.point,lt=Math.max(C||0,s||0);if(lt)return this.center=this.unproject(new u.Point(C?(we+ge)/2:We.x,s?(he+K)/2:We.y)),this.zoom+=this.scaleZoom(lt),this._unmodified=Ve,void(this._constraining=!1);if(this.latRange){const Tt=We.y,kt=Le.y/2;Tt-kt<K&&(W=K+kt),Tt+kt>he&&(W=he-kt)}if(this.lngRange){const Tt=(ge+we)/2,kt=u.wrap(We.x,Tt-this.worldSize/2,Tt+this.worldSize/2),Ft=Le.x/2;kt-Ft<ge&&(N=ge+Ft),kt+Ft>we&&(N=we-Ft)}void 0===N&&void 0===W||(this.center=this.unproject(new u.Point(void 0!==N?N:We.x,void 0!==W?W:We.y)).wrap()),this._unmodified=Ve,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,C=this.point.x,N=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let W=u.identity(new Float64Array(16));u.scale(W,W,[this.width/2,-this.height/2,1]),u.translate(W,W,[1,-1,0]),this.labelPlaneMatrix=W,W=u.identity(new Float64Array(16)),u.scale(W,W,[1,-1,1]),u.translate(W,W,[-1,-1,0]),u.scale(W,W,[2/this.width,2/this.height,1]),this.glCoordMatrix=W;const K=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),he=Math.min(this.elevation,this._minEleveationForCurrentTile),ge=K-he*this._pixelPerMeter/Math.cos(this._pitch),we=he<0?ge:K,Le=Math.PI/2+this._pitch,Ve=this._fov*(.5+s.y/this.height),We=Math.sin(Ve)*we/Math.sin(u.clamp(Math.PI-Le-Ve,.01,Math.PI-.01)),lt=this.getHorizon(),Tt=2*Math.atan(lt/this.cameraToCenterDistance)*(.5+s.y/(2*lt)),kt=Math.sin(Tt)*we/Math.sin(u.clamp(Math.PI-Le-Tt,.01,Math.PI-.01)),Ft=Math.min(We,kt),It=1.01*(Math.cos(Math.PI/2-this._pitch)*Ft+we),ln=this.height/50;W=new Float64Array(16),u.perspective(W,this._fov,this.width/this.height,ln,It),W[8]=2*-s.x/this.width,W[9]=2*s.y/this.height,u.scale(W,W,[1,-1,1]),u.translate(W,W,[0,0,-this.cameraToCenterDistance]),u.rotateX(W,W,this._pitch),u.rotateZ(W,W,this.angle),u.translate(W,W,[-C,-N,0]),this.mercatorMatrix=u.scale([],W,[this.worldSize,this.worldSize,this.worldSize]),u.scale(W,W,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,W),u.translate(W,W,[0,0,-this.elevation]),this.projMatrix=W,this.invProjMatrix=u.invert([],W),this.pixelMatrix3D=u.multiply(new Float64Array(16),this.labelPlaneMatrix,W);const zn=this.width%2/2,Xt=this.height%2/2,fn=Math.cos(this.angle),Fn=Math.sin(this.angle),Hn=C-Math.round(C)+fn*zn+Fn*Xt,Bn=N-Math.round(N)+fn*Xt+Fn*zn,ii=new Float64Array(W);if(u.translate(ii,ii,[Hn>.5?Hn-1:Hn,Bn>.5?Bn-1:Bn,0]),this.alignedProjMatrix=ii,W=u.invert(new Float64Array(16),this.pixelMatrix),!W)throw new Error("failed to invert matrix");this.pixelMatrixInverse=W,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new u.Point(0,0)),C=[s.x*this.worldSize,s.y*this.worldSize,0,1];return u.transformMat4(C,C,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.Point(0,s))}getCameraQueryGeometry(s){const C=this.getCameraPoint();if(1===s.length)return[s[0],C];{let N=C.x,W=C.y,K=C.x,he=C.y;for(const ge of s)N=Math.min(N,ge.x),W=Math.min(W,ge.y),K=Math.max(K,ge.x),he=Math.max(he,ge.y);return[new u.Point(N,W),new u.Point(K,W),new u.Point(K,he),new u.Point(N,he),new u.Point(N,W)]}}}function ur(H,s){let C,N=!1,W=null,K=null;const he=()=>{W=null,N&&(H.apply(K,C),W=setTimeout(he,s),N=!1)};return(...ge)=>(N=!0,K=this,C=ge,W||he(),W)}class ho{constructor(s){this._getCurrentHash=()=>{const C=window.location.hash.replace("#","");if(this._hashName){let N;return C.split("&").map(W=>W.split("=")).forEach(W=>{W[0]===this._hashName&&(N=W)}),(N&&N[1]||"").split("/")}return C.split("/")},this._onHashChange=()=>{const C=this._getCurrentHash();if(C.length>=3&&!C.some(N=>isNaN(N))){const N=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(C[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+C[2],+C[1]],zoom:+C[0],bearing:N,pitch:+(C[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const C=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,C)}catch{}},this._updateHash=ur(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(s){const C=this._map.getCenter(),N=Math.round(100*this._map.getZoom())/100,W=Math.ceil((N*Math.LN2+Math.log(512/360/.5))/Math.LN10),K=Math.pow(10,W),he=Math.round(C.lng*K)/K,ge=Math.round(C.lat*K)/K,we=this._map.getBearing(),Le=this._map.getPitch();let Ve="";if(Ve+=s?`/${he}/${ge}/${N}`:`${N}/${ge}/${he}`,(we||Le)&&(Ve+="/"+Math.round(10*we)/10),Le&&(Ve+=`/${Math.round(Le)}`),this._hashName){const We=this._hashName;let lt=!1;const Tt=window.location.hash.slice(1).split("&").map(kt=>{const Ft=kt.split("=")[0];return Ft===We?(lt=!0,`${Ft}=${Ve}`):kt}).filter(kt=>kt);return lt||Tt.push(`${We}=${Ve}`),`#${Tt.join("&")}`}return`#${Ve}`}}const fo={linearity:.3,easing:u.bezier(0,0,.3,1)},cc=u.extend({deceleration:2500,maxSpeed:1400},fo),po=u.extend({deceleration:20,maxSpeed:1400},fo),Fs=u.extend({deceleration:1e3,maxSpeed:360},fo),pa=u.extend({deceleration:1e3,maxSpeed:90},fo);class y1{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.browser.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,C=u.browser.now();for(;s.length>0&&C-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const C={zoom:0,bearing:0,pitch:0,pan:new u.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:K}of this._inertiaBuffer)C.zoom+=K.zoomDelta||0,C.bearing+=K.bearingDelta||0,C.pitch+=K.pitchDelta||0,K.panDelta&&C.pan._add(K.panDelta),K.around&&(C.around=K.around),K.pinchAround&&(C.pinchAround=K.pinchAround);const N=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,W={};if(C.pan.mag()){const K=qi(C.pan.mag(),N,u.extend({},cc,s||{}));W.offset=C.pan.mult(K.amount/C.pan.mag()),W.center=this._map.transform.center,h1(W,K)}if(C.zoom){const K=qi(C.zoom,N,po);W.zoom=this._map.transform.zoom+K.amount,h1(W,K)}if(C.bearing){const K=qi(C.bearing,N,Fs);W.bearing=this._map.transform.bearing+u.clamp(K.amount,-179,179),h1(W,K)}if(C.pitch){const K=qi(C.pitch,N,pa);W.pitch=this._map.transform.pitch+K.amount,h1(W,K)}if(W.zoom||W.bearing){const K=void 0===C.pinchAround?C.around:C.pinchAround;W.around=K?this._map.unproject(K):this._map.getCenter()}return this.clear(),u.extend(W,{noMoveStart:!0})}}function h1(H,s){(!H.duration||H.duration<s.duration)&&(H.duration=s.duration,H.easing=s.easing)}function qi(H,s,C){const{maxSpeed:N,linearity:W,deceleration:K}=C,he=u.clamp(H*W/(s/1e3),-N,N),ge=Math.abs(he)/(K*W);return{easing:C.easing,duration:1e3*ge,amount:he*(ge/2)}}class vo extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,C,N,W={}){const K=g.mousePos(C.getCanvasContainer(),N),he=C.unproject(K);super(s,u.extend({point:K,lngLat:he,originalEvent:N},W)),this._defaultPrevented=!1,this.target=C}}class ka extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,C,N){const W="touchend"===s?N.changedTouches:N.touches,K=g.touchPos(C.getCanvasContainer(),W),he=K.map(we=>C.unproject(we)),ge=K.reduce((we,Le,Ve,We)=>we.add(Le.div(We.length)),new u.Point(0,0));super(s,{points:K,point:ge,lngLats:he,lngLat:C.unproject(ge),originalEvent:N}),this._defaultPrevented=!1}}class Ia extends u.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,C,N){super(s,{originalEvent:N}),this._defaultPrevented=!1}}class Gr{constructor(s,C){this._map=s,this._clickTolerance=C.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new Ia(s.type,this._map,s))}mousedown(s,C){return this._mousedownPos=C,this._firePreventable(new vo(s.type,this._map,s))}mouseup(s){this._map.fire(new vo(s.type,this._map,s))}click(s,C){this._mousedownPos&&this._mousedownPos.dist(C)>=this._clickTolerance||this._map.fire(new vo(s.type,this._map,s))}dblclick(s){return this._firePreventable(new vo(s.type,this._map,s))}mouseover(s){this._map.fire(new vo(s.type,this._map,s))}mouseout(s){this._map.fire(new vo(s.type,this._map,s))}touchstart(s){return this._firePreventable(new ka(s.type,this._map,s))}touchmove(s){this._map.fire(new ka(s.type,this._map,s))}touchend(s){this._map.fire(new ka(s.type,this._map,s))}touchcancel(s){this._map.fire(new ka(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class L2{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new vo(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new vo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new vo(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vs{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(u.Point.convert(s),this._map.terrain)}}class Es{constructor(s,C){this._map=s,this._tr=new Vs(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=C.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,C){this.isEnabled()&&s.shiftKey&&0===s.button&&(g.disableDrag(),this._startPos=this._lastPos=C,this._active=!0)}mousemoveWindow(s,C){if(!this._active)return;const N=C;if(this._lastPos.equals(N)||!this._box&&N.dist(this._startPos)<this._clickTolerance)return;const W=this._startPos;this._lastPos=N,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const K=Math.min(W.x,N.x),he=Math.max(W.x,N.x),ge=Math.min(W.y,N.y),we=Math.max(W.y,N.y);g.setTransform(this._box,`translate(${K}px,${ge}px)`),this._box.style.width=he-K+"px",this._box.style.height=we-ge+"px"}mouseupWindow(s,C){if(!this._active||0!==s.button)return;const N=this._startPos,W=C;if(this.reset(),g.suppressClick(),N.x!==W.x||N.y!==W.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:K=>K.fitScreenCoordinates(N,W,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&27===s.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,C){return this._map.fire(new u.Event(s,{originalEvent:C}))}}function ma(H,s){if(H.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${H.length}, points ${s.length}`);const C={};for(let N=0;N<H.length;N++)C[H[N].identifier]=s[N];return C}class Ea{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,C,N){(this.centroid||N.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=s.timeStamp),N.length===this.numTouches&&(this.centroid=function(W){const K=new u.Point(0,0);for(const he of W)K._add(he);return K.div(W.length)}(C),this.touches=ma(N,C)))}touchmove(s,C,N){if(this.aborted||!this.centroid)return;const W=ma(N,C);for(const K in this.touches){const he=W[K];(!he||he.dist(this.touches[K])>30)&&(this.aborted=!0)}}touchend(s,C,N){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),0===N.length){const W=!this.aborted&&this.centroid;if(this.reset(),W)return W}}}class ua{constructor(s){this.singleTap=new Ea(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,C,N){this.singleTap.touchstart(s,C,N)}touchmove(s,C,N){this.singleTap.touchmove(s,C,N)}touchend(s,C,N){const W=this.singleTap.touchend(s,C,N);if(W){const K=s.timeStamp-this.lastTime<500,he=!this.lastTap||this.lastTap.dist(W)<30;if(K&&he||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=W,this.count===this.numTaps)return this.reset(),W}}}class ui{constructor(s){this._tr=new Vs(s),this._zoomIn=new ua({numTouches:1,numTaps:2}),this._zoomOut=new ua({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,C,N){this._zoomIn.touchstart(s,C,N),this._zoomOut.touchstart(s,C,N)}touchmove(s,C,N){this._zoomIn.touchmove(s,C,N),this._zoomOut.touchmove(s,C,N)}touchend(s,C,N){const W=this._zoomIn.touchend(s,C,N),K=this._zoomOut.touchend(s,C,N),he=this._tr;return W?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ge=>ge.easeTo({duration:300,zoom:he.zoom+1,around:he.unproject(W)},{originalEvent:s})}):K?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:ge=>ge.easeTo({duration:300,zoom:he.zoom-1,around:he.unproject(K)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lc{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const C=this._moveFunction(...s);if(C.bearingDelta||C.pitchDelta||C.around||C.panDelta)return this._active=!0,C}dragStart(s,C){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=C.length?C[0]:C,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,C){if(!this.isEnabled())return;const N=this._lastPoint;if(!N)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const W=C.length?C[0]:C;return!this._moved&&W.dist(N)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=W,this._move(N,W))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&g.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const f1={0:1,2:2};class Ar{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const C=g.mouseButton(s);this._eventButton=C}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(C,N){const W=f1[N];return void 0===C.buttons||(C.buttons&W)!==W}(s,this._eventButton)}isValidEndEvent(s){return g.mouseButton(s)===this._eventButton}}class Ks{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return 1===s.targetTouches.length}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}const gi=H=>{H.mousedown=H.dragStart,H.mousemoveWindow=H.dragMove,H.mouseup=H.dragEnd,H.contextmenu=function(s){s.preventDefault()}},So=({enable:H,clickTolerance:s,bearingDegreesPerPixelMoved:C=.8})=>{const N=new Ar({checkCorrectEvent:W=>0===g.mouseButton(W)&&W.ctrlKey||2===g.mouseButton(W)});return new lc({clickTolerance:s,move:(W,K)=>({bearingDelta:(K.x-W.x)*C}),moveStateManager:N,enable:H,assignEvents:gi})},_1=({enable:H,clickTolerance:s,pitchDegreesPerPixelMoved:C=-.5})=>{const N=new Ar({checkCorrectEvent:W=>0===g.mouseButton(W)&&W.ctrlKey||2===g.mouseButton(W)});return new lc({clickTolerance:s,move:(W,K)=>({pitchDelta:(K.y-W.y)*C}),moveStateManager:N,enable:H,assignEvents:gi})};class Qs{constructor(s,C){this._minTouches=s.cooperativeGestures?2:1,this._clickTolerance=s.clickTolerance||1,this._map=C,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(s,C,N){return this._calculateTransform(s,C,N)}touchmove(s,C,N){if(this._map._cooperativeGestures&&(2===this._minTouches&&N.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(s,!1,N.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(N.length<this._minTouches))return s.preventDefault(),this._calculateTransform(s,C,N)}touchend(s,C,N){this._calculateTransform(s,C,N),this._active&&N.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,C,N){N.length>0&&(this._active=!0);const W=ma(N,C),K=new u.Point(0,0),he=new u.Point(0,0);let ge=0;for(const Le in W){const Ve=W[Le],We=this._touches[Le];We&&(K._add(Ve),he._add(Ve.sub(We)),ge++,W[Le]=Ve)}if(this._touches=W,ge<this._minTouches||!he.mag())return;const we=he.div(ge);return this._sum._add(we),this._sum.mag()<this._clickTolerance?void 0:{around:K.div(ge),panDelta:we}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class da{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,C,N){this._firstTwoTouches||N.length<2||(this._firstTwoTouches=[N[0].identifier,N[1].identifier],this._start([C[0],C[1]]))}touchmove(s,C,N){if(!this._firstTwoTouches)return;s.preventDefault();const[W,K]=this._firstTwoTouches,he=as(N,C,W),ge=as(N,C,K);if(!he||!ge)return;const we=this._aroundCenter?null:he.add(ge).div(2);return this._move([he,ge],we,s)}touchend(s,C,N){if(!this._firstTwoTouches)return;const[W,K]=this._firstTwoTouches,he=as(N,C,W),ge=as(N,C,K);he&&ge||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&"center"===s.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function as(H,s,C){for(let N=0;N<H.length;N++)if(H[N].identifier===C)return s[N]}function ga(H,s){return Math.log(H/s)/Math.LN2}class d2 extends da{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,C){const N=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(ga(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ga(this._distance,N),pinchAround:C}}}function Ta(H,s){return 180*H.angleWith(s)/Math.PI}class Ya extends da{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,C){const N=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ta(this._vector,N),pinchAround:C}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const C=25/(Math.PI*this._minDiameter)*360,N=Ta(s,this._startVector);return Math.abs(N)<C}}function Va(H){return Math.abs(H.y)>Math.abs(H.x)}class Xa extends da{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,C,N){super.touchstart(s,C,N),this._currentTouchCount=N.length}_start(s){this._lastPoints=s,Va(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,C,N){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const W=s[0].sub(this._lastPoints[0]),K=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(W,K,N.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(W.y+K.y)/2*-.5}):void 0}gestureBeginsVertically(s,C,N){if(void 0!==this._valid)return this._valid;const W=s.mag()>=2,K=C.mag()>=2;if(!W&&!K)return;if(!W||!K)return void 0===this._firstMove&&(this._firstMove=N),N-this._firstMove<100&&void 0;const he=s.y>0==C.y>0;return Va(s)&&Va(C)&&he}}const Eo={panStep:100,bearingStep:15,pitchStep:10};class Na{constructor(s){this._tr=new Vs(s);const C=Eo;this._panStep=C.panStep,this._bearingStep=C.bearingStep,this._pitchStep=C.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let C=0,N=0,W=0,K=0,he=0;switch(s.keyCode){case 61:case 107:case 171:case 187:C=1;break;case 189:case 109:case 173:C=-1;break;case 37:s.shiftKey?N=-1:(s.preventDefault(),K=-1);break;case 39:s.shiftKey?N=1:(s.preventDefault(),K=1);break;case 38:s.shiftKey?W=1:(s.preventDefault(),he=-1);break;case 40:s.shiftKey?W=-1:(s.preventDefault(),he=1);break;default:return}return this._rotationDisabled&&(N=0,W=0),{cameraAnimation:ge=>{const we=this._tr;ge.easeTo({duration:300,easeId:"keyboardHandler",easing:W1,zoom:C?Math.round(we.zoom)+C*(s.shiftKey?2:1):we.zoom,bearing:we.bearing+N*this._bearingStep,pitch:we.pitch+W*this._pitchStep,offset:[-K*this._panStep,-he*this._panStep],center:we.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function W1(H){return H*(2-H)}const ws=4.000244140625;class b1{constructor(s,C){this._onTimeout=N=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(N)},this._map=s,this._tr=new Vs(s),this._el=s.getCanvasContainer(),this._triggerRenderFrame=C,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&"center"===s.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!s[this._map._metaKey])return;s.preventDefault()}let C=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const N=u.browser.now(),W=N-(this._lastWheelEventTime||0);this._lastWheelEventTime=N,0!==C&&C%ws==0?this._type="wheel":0!==C&&Math.abs(C)<4?this._type="trackpad":W>400?(this._type=null,this._lastValue=C,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(W*C)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,C+=this._lastValue)),s.shiftKey&&C&&(C/=4),this._type&&(this._lastWheelEvent=s,this._delta-=C,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const C=g.mousePos(this._el,s),N=this._tr;this._around=u.LngLat.convert(this._aroundCenter?N.center:N.unproject(C)),this._aroundPoint=N.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(0!==this._delta){const ge="wheel"===this._type&&Math.abs(this._delta)>ws?this._wheelZoomRate:this._defaultZoomRate;let we=2/(1+Math.exp(-Math.abs(this._delta*ge)));this._delta<0&&0!==we&&(we=1/we);const Le="number"==typeof this._targetZoom?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(Le*we))),"wheel"===this._type&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const C="number"==typeof this._targetZoom?this._targetZoom:s.zoom,N=this._startZoom,W=this._easing;let K,he=!1;if("wheel"===this._type&&N&&W){const ge=Math.min((u.browser.now()-this._lastWheelEventTime)/200,1),we=W(ge);K=u.interpolate.number(N,C,we),ge<1?this._frameId||(this._frameId=!0):he=!0}else K=C,he=!0;return this._active=!0,he&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!he,zoomDelta:K-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let C=u.defaultEasing;if(this._prevEase){const N=this._prevEase,W=(u.browser.now()-N.start)/N.duration,K=N.easing(W+.01)-N.easing(W),he=.27/Math.sqrt(K*K+1e-4)*.01,ge=Math.sqrt(.0729-he*he);C=u.bezier(he,ge,.25,1)}return this._prevEase={start:u.browser.now(),duration:s,easing:C},C}reset(){this._active=!1}}class rl{constructor(s,C){this._clickZoom=s,this._tapZoom=C}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zc{constructor(s){this._tr=new Vs(s),this.reset()}reset(){this._active=!1}dblclick(s,C){return s.preventDefault(),{cameraAnimation:N=>{N.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(C)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Y1{constructor(){this._tap=new ua({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,C,N){if(!this._swipePoint)if(this._tapTime){const W=C[0],K=s.timeStamp-this._tapTime<500,he=this._tapPoint.dist(W)<30;K&&he?N.length>0&&(this._swipePoint=W,this._swipeTouch=N[0].identifier):this.reset()}else this._tap.touchstart(s,C,N)}touchmove(s,C,N){if(this._tapTime){if(this._swipePoint){if(N[0].identifier!==this._swipeTouch)return;const W=C[0],K=W.y-this._swipePoint.y;return this._swipePoint=W,s.preventDefault(),this._active=!0,{zoomDelta:K/128}}}else this._tap.touchmove(s,C,N)}touchend(s,C,N){if(this._tapTime)this._swipePoint&&0===N.length&&this.reset();else{const W=this._tap.touchend(s,C,N);W&&(this._tapTime=s.timeStamp,this._tapPoint=W)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ao{constructor(s,C,N){this._el=s,this._mousePan=C,this._touchPan=N}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Wr{constructor(s,C,N){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=C,this._mousePitch=N}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _c{constructor(s,C,N,W){this._el=s,this._touchZoom=C,this._touchRotate=N,this._tapDragZoom=W,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Cs=H=>H.zoom||H.drag||H.pitch||H.rotate;class ol extends u.Event{}function D2(H){return H.panDelta&&H.panDelta.mag()||H.zoomDelta||H.bearingDelta||H.pitchDelta}class ss{constructor(s,C){this.handleWindowEvent=W=>{this.handleEvent(W,`${W.type}Window`)},this.handleEvent=(W,K)=>{if("blur"===W.type)return void this.stop(!0);this._updatingCamera=!0;const he="renderFrame"===W.type?void 0:W,ge={needsRenderFrame:!1},we={},Le={},Ve=W.touches,We=Ve?this._getMapTouches(Ve):void 0,lt=We?g.touchPos(this._el,We):g.mousePos(this._el,W);for(const{handlerName:Ft,handler:It,allowed:ln}of this._handlers){if(!It.isEnabled())continue;let zn;this._blockedByActive(Le,ln,Ft)?It.reset():It[K||W.type]&&(zn=It[K||W.type](W,lt,We),this.mergeHandlerResult(ge,we,zn,Ft,he),zn&&zn.needsRenderFrame&&this._triggerRenderFrame()),(zn||It.isActive())&&(Le[Ft]=It)}const Tt={};for(const Ft in this._previousActiveHandlers)Le[Ft]||(Tt[Ft]=he);this._previousActiveHandlers=Le,(Object.keys(Tt).length||D2(ge))&&(this._changes.push([ge,we,Tt]),this._triggerRenderFrame()),(Object.keys(Le).length||D2(ge))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:kt}=ge;kt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],kt(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new y1(s),this._bearingSnap=C.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(C);const N=this._el;this._listeners=[[N,"touchstart",{passive:!0}],[N,"touchmove",{passive:!1}],[N,"touchend",void 0],[N,"touchcancel",void 0],[N,"mousedown",void 0],[N,"mousemove",void 0],[N,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[N,"mouseover",void 0],[N,"mouseout",void 0],[N,"dblclick",void 0],[N,"click",void 0],[N,"keydown",{capture:!1}],[N,"keyup",void 0],[N,"wheel",{passive:!1}],[N,"contextmenu",void 0],[window,"blur",void 0]];for(const[W,K,he]of this._listeners)g.addEventListener(W,K,W===document?this.handleWindowEvent:this.handleEvent,he)}destroy(){for(const[s,C,N]of this._listeners)g.removeEventListener(s,C,s===document?this.handleWindowEvent:this.handleEvent,N)}_addDefaultHandlers(s){const C=this._map,N=C.getCanvasContainer();this._add("mapEvent",new Gr(C,s));const W=C.boxZoom=new Es(C,s);this._add("boxZoom",W),s.interactive&&s.boxZoom&&W.enable();const K=new ui(C),he=new zc(C);C.doubleClickZoom=new rl(he,K),this._add("tapZoom",K),this._add("clickZoom",he),s.interactive&&s.doubleClickZoom&&C.doubleClickZoom.enable();const ge=new Y1;this._add("tapDragZoom",ge);const we=C.touchPitch=new Xa(C);this._add("touchPitch",we),s.interactive&&s.touchPitch&&C.touchPitch.enable(s.touchPitch);const Le=So(s),Ve=_1(s);C.dragRotate=new Wr(s,Le,Ve),this._add("mouseRotate",Le,["mousePitch"]),this._add("mousePitch",Ve,["mouseRotate"]),s.interactive&&s.dragRotate&&C.dragRotate.enable();const We=(({enable:ln,clickTolerance:zn})=>{const Xt=new Ar({checkCorrectEvent:fn=>0===g.mouseButton(fn)&&!fn.ctrlKey});return new lc({clickTolerance:zn,move:(fn,Fn)=>({around:Fn,panDelta:Fn.sub(fn)}),activateOnStart:!0,moveStateManager:Xt,enable:ln,assignEvents:gi})})(s),lt=new Qs(s,C);C.dragPan=new Ao(N,We,lt),this._add("mousePan",We),this._add("touchPan",lt,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&C.dragPan.enable(s.dragPan);const Tt=new Ya,kt=new d2;C.touchZoomRotate=new _c(N,kt,Tt,ge),this._add("touchRotate",Tt,["touchPan","touchZoom"]),this._add("touchZoom",kt,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&C.touchZoomRotate.enable(s.touchZoomRotate);const Ft=C.scrollZoom=new b1(C,()=>this._triggerRenderFrame());this._add("scrollZoom",Ft,["mousePan"]),s.interactive&&s.scrollZoom&&C.scrollZoom.enable(s.scrollZoom);const It=C.keyboard=new Na(C);this._add("keyboard",It),s.interactive&&s.keyboard&&C.keyboard.enable(),this._add("blockableMapEvent",new L2(C))}_add(s,C,N){this._handlers.push({handlerName:s,handler:C,allowed:N}),this._handlersById[s]=C}stop(s){if(!this._updatingCamera){for(const{handler:C}of this._handlers)C.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Cs(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,C,N){for(const W in s)if(W!==N&&(!C||C.indexOf(W)<0))return!0;return!1}_getMapTouches(s){const C=[];for(const N of s)this._el.contains(N.target)&&C.push(N);return C}mergeHandlerResult(s,C,N,W,K){if(!N)return;u.extend(s,N);const he={handlerName:W,originalEvent:N.originalEvent||K};void 0!==N.zoomDelta&&(C.zoom=he),void 0!==N.panDelta&&(C.drag=he),void 0!==N.pitchDelta&&(C.pitch=he),void 0!==N.bearingDelta&&(C.rotate=he)}_applyChanges(){const s={},C={},N={};for(const[W,K,he]of this._changes)W.panDelta&&(s.panDelta=(s.panDelta||new u.Point(0,0))._add(W.panDelta)),W.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+W.zoomDelta),W.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+W.bearingDelta),W.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+W.pitchDelta),void 0!==W.around&&(s.around=W.around),void 0!==W.pinchAround&&(s.pinchAround=W.pinchAround),W.noInertia&&(s.noInertia=W.noInertia),u.extend(C,K),u.extend(N,he);this._updateMapTransform(s,C,N),this._changes=[]}_updateMapTransform(s,C,N){const W=this._map,K=W._getTransformForUpdate(),he=W.terrain;if(!(D2(s)||he&&this._terrainMovement))return this._fireEvents(C,N,!0);let{panDelta:ge,zoomDelta:we,bearingDelta:Le,pitchDelta:Ve,around:We,pinchAround:lt}=s;void 0!==lt&&(We=lt),W._stop(!0),We=We||W.transform.centerPoint;const Tt=K.pointLocation(ge?We.sub(ge):We);Le&&(K.bearing+=Le),Ve&&(K.pitch+=Ve),we&&(K.zoom+=we),he?this._terrainMovement||!C.drag&&!C.zoom?C.drag&&this._terrainMovement?K.center=K.pointLocation(K.centerPoint.sub(ge)):K.setLocationAtPoint(Tt,We):(this._terrainMovement=!0,this._map._elevationFreeze=!0,K.setLocationAtPoint(Tt,We),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,K.recalculateZoom(W.terrain)})):K.setLocationAtPoint(Tt,We),W._applyUpdatedTransform(K),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(C,N,!0)}_fireEvents(s,C,N){const W=Cs(this._eventsInProgress),K=Cs(s),he={};for(const Ve in s){const{originalEvent:We}=s[Ve];this._eventsInProgress[Ve]||(he[`${Ve}start`]=We),this._eventsInProgress[Ve]=s[Ve]}!W&&K&&this._fireEvent("movestart",K.originalEvent);for(const Ve in he)this._fireEvent(Ve,he[Ve]);K&&this._fireEvent("move",K.originalEvent);for(const Ve in s){const{originalEvent:We}=s[Ve];this._fireEvent(Ve,We)}const ge={};let we;for(const Ve in this._eventsInProgress){const{handlerName:We,originalEvent:lt}=this._eventsInProgress[Ve];this._handlersById[We].isActive()||(delete this._eventsInProgress[Ve],we=C[We]||lt,ge[`${Ve}end`]=we)}for(const Ve in ge)this._fireEvent(Ve,ge[Ve]);const Le=Cs(this._eventsInProgress);if(N&&(W||K)&&!Le){this._updatingCamera=!0;const Ve=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),We=lt=>0!==lt&&-this._bearingSnap<lt&&lt<this._bearingSnap;Ve?(We(Ve.bearing||this._map.getBearing())&&(Ve.bearing=0),Ve.freezeElevation=!0,this._map.easeTo(Ve,{originalEvent:we})):(this._map.fire(new u.Event("moveend",{originalEvent:we})),We(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,C){this._map.fire(new u.Event(s,C?{originalEvent:C}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new ol("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class tu extends u.Evented{constructor(s,C){super(),this._renderFrameCallback=()=>{const N=Math.min((u.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(N)),N<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=C.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,C){return this.jumpTo({center:s},C)}panBy(s,C,N){return s=u.Point.convert(s).mult(-1),this.panTo(this.transform.center,u.extend({offset:s},C),N)}panTo(s,C,N){return this.easeTo(u.extend({center:s},C),N)}getZoom(){return this.transform.zoom}setZoom(s,C){return this.jumpTo({zoom:s},C),this}zoomTo(s,C,N){return this.easeTo(u.extend({zoom:s},C),N)}zoomIn(s,C){return this.zoomTo(this.getZoom()+1,s,C),this}zoomOut(s,C){return this.zoomTo(this.getZoom()-1,s,C),this}getBearing(){return this.transform.bearing}setBearing(s,C){return this.jumpTo({bearing:s},C),this}getPadding(){return this.transform.padding}setPadding(s,C){return this.jumpTo({padding:s},C),this}rotateTo(s,C,N){return this.easeTo(u.extend({bearing:s},C),N)}resetNorth(s,C){return this.rotateTo(0,u.extend({duration:1e3},s),C),this}resetNorthPitch(s,C){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},s),C),this}snapToNorth(s,C){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,C):this}getPitch(){return this.transform.pitch}setPitch(s,C){return this.jumpTo({pitch:s},C),this}cameraForBounds(s,C){s=ae.convert(s);const N=C&&C.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),N,C)}_cameraForBoxAndBearing(s,C,N,W){const K={top:0,bottom:0,right:0,left:0};if("number"==typeof(W=u.extend({padding:K,offset:[0,0],maxZoom:this.transform.maxZoom},W)).padding){const Fn=W.padding;W.padding={top:Fn,bottom:Fn,right:Fn,left:Fn}}W.padding=u.extend(K,W.padding);const he=this.transform,ge=he.padding,we=he.project(u.LngLat.convert(s)),Le=he.project(u.LngLat.convert(C)),Ve=we.rotate(-N*Math.PI/180),We=Le.rotate(-N*Math.PI/180),lt=new u.Point(Math.max(Ve.x,We.x),Math.max(Ve.y,We.y)),Tt=new u.Point(Math.min(Ve.x,We.x),Math.min(Ve.y,We.y)),kt=lt.sub(Tt),Ft=(he.width-(ge.left+ge.right+W.padding.left+W.padding.right))/kt.x,It=(he.height-(ge.top+ge.bottom+W.padding.top+W.padding.bottom))/kt.y;if(It<0||Ft<0)return void u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ln=Math.min(he.scaleZoom(he.scale*Math.min(Ft,It)),W.maxZoom),zn=u.Point.convert(W.offset),Xt=new u.Point((W.padding.left-W.padding.right)/2,(W.padding.top-W.padding.bottom)/2).rotate(N*Math.PI/180),fn=zn.add(Xt).mult(he.scale/he.zoomScale(ln));return{center:he.unproject(we.add(Le).div(2).sub(fn)),zoom:ln,bearing:N}}fitBounds(s,C,N){return this._fitInternal(this.cameraForBounds(s,C),C,N)}fitScreenCoordinates(s,C,N,W,K){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.Point.convert(s)),this.transform.pointLocation(u.Point.convert(C)),N,W),W,K)}_fitInternal(s,C,N){return s?(delete(C=u.extend(s,C)).padding,C.linear?this.easeTo(C,N):this.flyTo(C,N)):this}jumpTo(s,C){this.stop();const N=this._getTransformForUpdate();let W=!1,K=!1,he=!1;return"zoom"in s&&N.zoom!==+s.zoom&&(W=!0,N.zoom=+s.zoom),void 0!==s.center&&(N.center=u.LngLat.convert(s.center)),"bearing"in s&&N.bearing!==+s.bearing&&(K=!0,N.bearing=+s.bearing),"pitch"in s&&N.pitch!==+s.pitch&&(he=!0,N.pitch=+s.pitch),null==s.padding||N.isPaddingEqual(s.padding)||(N.padding=s.padding),this._applyUpdatedTransform(N),this.fire(new u.Event("movestart",C)).fire(new u.Event("move",C)),W&&this.fire(new u.Event("zoomstart",C)).fire(new u.Event("zoom",C)).fire(new u.Event("zoomend",C)),K&&this.fire(new u.Event("rotatestart",C)).fire(new u.Event("rotate",C)).fire(new u.Event("rotateend",C)),he&&this.fire(new u.Event("pitchstart",C)).fire(new u.Event("pitch",C)).fire(new u.Event("pitchend",C)),this.fire(new u.Event("moveend",C))}calculateCameraOptionsFromTo(s,C,N,W=0){const K=u.MercatorCoordinate.fromLngLat(s,C),he=u.MercatorCoordinate.fromLngLat(N,W),ge=he.x-K.x,we=he.y-K.y,Le=he.z-K.z,Ve=Math.hypot(ge,we,Le);if(0===Ve)throw new Error("Can't calculate camera options with same From and To");const We=Math.hypot(ge,we),lt=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Ve/this.transform.tileSize),Tt=180*Math.atan2(ge,-we)/Math.PI;let kt=180*Math.acos(We/Ve)/Math.PI;return kt=Le<0?90-kt:90+kt,{center:he.toLngLat(),zoom:lt,pitch:kt,bearing:Tt}}easeTo(s,C){this._stop(!1,s.easeId),(!1===(s=u.extend({offset:[0,0],duration:500,easing:u.defaultEasing},s)).animate||!s.essential&&u.browser.prefersReducedMotion)&&(s.duration=0);const N=this._getTransformForUpdate(),W=this.getZoom(),K=this.getBearing(),he=this.getPitch(),ge=this.getPadding(),we="zoom"in s?+s.zoom:W,Le="bearing"in s?this._normalizeBearing(s.bearing,K):K,Ve="pitch"in s?+s.pitch:he,We="padding"in s?s.padding:N.padding,lt=u.Point.convert(s.offset);let Tt=N.centerPoint.add(lt);const kt=N.pointLocation(Tt),Ft=u.LngLat.convert(s.center||kt);this._normalizeCenter(Ft);const It=N.project(kt),ln=N.project(Ft).sub(It),zn=N.zoomScale(we-W);let Xt,fn;s.around&&(Xt=u.LngLat.convert(s.around),fn=N.locationPoint(Xt));const Fn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||we!==W,this._rotating=this._rotating||K!==Le,this._pitching=this._pitching||Ve!==he,this._padding=!N.isPaddingEqual(We),this._easeId=s.easeId,this._prepareEase(C,s.noMoveStart,Fn),this.terrain&&this._prepareElevation(Ft),this._ease(Hn=>{if(this._zooming&&(N.zoom=u.interpolate.number(W,we,Hn)),this._rotating&&(N.bearing=u.interpolate.number(K,Le,Hn)),this._pitching&&(N.pitch=u.interpolate.number(he,Ve,Hn)),this._padding&&(N.interpolatePadding(ge,We,Hn),Tt=N.centerPoint.add(lt)),this.terrain&&!s.freezeElevation&&this._updateElevation(Hn),Xt)N.setLocationAtPoint(Xt,fn);else{const Bn=N.zoomScale(N.zoom-W),ii=we>W?Math.min(2,zn):Math.max(.5,zn),ti=Math.pow(ii,1-Hn),hi=N.unproject(It.add(ln.mult(Hn*ti)).mult(Bn));N.setLocationAtPoint(N.renderWorldCopies?hi.wrap():hi,Tt)}this._applyUpdatedTransform(N),this._fireMoveEvents(C)},Hn=>{this.terrain&&this._finalizeElevation(),this._afterEase(C,Hn)},s),this}_prepareEase(s,C,N={}){this._moving=!0,C||N.moving||this.fire(new u.Event("movestart",s)),this._zooming&&!N.zooming&&this.fire(new u.Event("zoomstart",s)),this._rotating&&!N.rotating&&this.fire(new u.Event("rotatestart",s)),this._pitching&&!N.pitching&&this.fire(new u.Event("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const C=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&C!==this._elevationTarget){const N=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(N-(C-(N*s+this._elevationStart))/(1-s)),this._elevationTarget=C}this.transform.elevation=u.interpolate.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(s){if(!this.transformCameraUpdate)return;const C=s.clone(),{center:N,zoom:W,pitch:K,bearing:he,elevation:ge}=this.transformCameraUpdate(C);N&&(C.center=N),void 0!==W&&(C.zoom=W),void 0!==K&&(C.pitch=K),void 0!==he&&(C.bearing=he),void 0!==ge&&(C.elevation=ge),this.transform.apply(C)}_fireMoveEvents(s){this.fire(new u.Event("move",s)),this._zooming&&this.fire(new u.Event("zoom",s)),this._rotating&&this.fire(new u.Event("rotate",s)),this._pitching&&this.fire(new u.Event("pitch",s))}_afterEase(s,C){if(this._easeId&&C&&this._easeId===C)return;delete this._easeId;const N=this._zooming,W=this._rotating,K=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,N&&this.fire(new u.Event("zoomend",s)),W&&this.fire(new u.Event("rotateend",s)),K&&this.fire(new u.Event("pitchend",s)),this.fire(new u.Event("moveend",s))}flyTo(s,C){if(!s.essential&&u.browser.prefersReducedMotion){const Yi=u.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Yi,C)}this.stop(),s=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.defaultEasing},s);const N=this._getTransformForUpdate(),W=this.getZoom(),K=this.getBearing(),he=this.getPitch(),ge=this.getPadding(),we="zoom"in s?u.clamp(+s.zoom,N.minZoom,N.maxZoom):W,Le="bearing"in s?this._normalizeBearing(s.bearing,K):K,Ve="pitch"in s?+s.pitch:he,We="padding"in s?s.padding:N.padding,lt=N.zoomScale(we-W),Tt=u.Point.convert(s.offset);let kt=N.centerPoint.add(Tt);const Ft=N.pointLocation(kt),It=u.LngLat.convert(s.center||Ft);this._normalizeCenter(It);const ln=N.project(Ft),zn=N.project(It).sub(ln);let Xt=s.curve;const fn=Math.max(N.width,N.height),Fn=fn/lt,Hn=zn.mag();if("minZoom"in s){const Yi=u.clamp(Math.min(s.minZoom,W,we),N.minZoom,N.maxZoom),ha=fn/N.zoomScale(Yi-W);Xt=Math.sqrt(ha/Hn*2)}const Bn=Xt*Xt;function ii(Yi){const ha=(Fn*Fn-fn*fn+(Yi?-1:1)*Bn*Bn*Hn*Hn)/(2*(Yi?Fn:fn)*Bn*Hn);return Math.log(Math.sqrt(ha*ha+1)-ha)}function ti(Yi){return(Math.exp(Yi)-Math.exp(-Yi))/2}function hi(Yi){return(Math.exp(Yi)+Math.exp(-Yi))/2}const Wi=ii(!1);let qr=function(Yi){return hi(Wi)/hi(Wi+Xt*Yi)},bi=function(Yi){return fn*((hi(Wi)*(ti(ha=Wi+Xt*Yi)/hi(ha))-ti(Wi))/Bn)/Hn;var ha},lr=(ii(!0)-Wi)/Xt;if(Math.abs(Hn)<1e-6||!isFinite(lr)){if(Math.abs(fn-Fn)<1e-6)return this.easeTo(s,C);const Yi=Fn<fn?-1:1;lr=Math.abs(Math.log(Fn/fn))/Xt,bi=function(){return 0},qr=function(ha){return Math.exp(Yi*Xt*ha)}}return s.duration="duration"in s?+s.duration:1e3*lr/("screenSpeed"in s?+s.screenSpeed/Xt:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=K!==Le,this._pitching=Ve!==he,this._padding=!N.isPaddingEqual(We),this._prepareEase(C,!1),this.terrain&&this._prepareElevation(It),this._ease(Yi=>{const ha=Yi*lr,Kr=1/qr(ha);N.zoom=1===Yi?we:W+N.scaleZoom(Kr),this._rotating&&(N.bearing=u.interpolate.number(K,Le,Yi)),this._pitching&&(N.pitch=u.interpolate.number(he,Ve,Yi)),this._padding&&(N.interpolatePadding(ge,We,Yi),kt=N.centerPoint.add(Tt)),this.terrain&&!s.freezeElevation&&this._updateElevation(Yi);const fr=1===Yi?It:N.unproject(ln.add(zn.mult(bi(ha))).mult(Kr));N.setLocationAtPoint(N.renderWorldCopies?fr.wrap():fr,kt),this._applyUpdatedTransform(N),this._fireMoveEvents(C)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(C)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,C){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const N=this._onEaseEnd;delete this._onEaseEnd,N.call(this,C)}if(!s){const N=this.handlers;N&&N.stop(!1)}return this}_ease(s,C,N){!1===N.animate||0===N.duration?(s(1),C()):(this._easeStart=u.browser.now(),this._easeOptions=N,this._onEaseFrame=s,this._onEaseEnd=C,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,C){s=u.wrap(s,-180,180);const N=Math.abs(s-C);return Math.abs(s-360-C)<N&&(s-=360),Math.abs(s+360-C)<N&&(s+=360),s}_normalizeCenter(s){const C=this.transform;if(!C.renderWorldCopies||C.lngRange)return;const N=s.lng-C.center.lng;s.lng+=N>180?-360:N<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(u.LngLat.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}class Za{constructor(s={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=C=>{!C||"metadata"!==C.sourceDataType&&"visibility"!==C.sourceDataType&&"style"!==C.dataType&&"terrain"!==C.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options&&this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,C){const N=this._map._getUIString(`AttributionControl.${C}`);s.title=N,s.setAttribute("aria-label",N)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(W=>"string"!=typeof W?"":W)):"string"==typeof this.options.customAttribution&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const W=this._map.style.stylesheet;this.styleOwner=W.owner,this.styleId=W.id}const C=this._map.style.sourceCaches;for(const W in C){const K=C[W];if(K.used||K.usedForTerrain){const he=K.getSource();he.attribution&&s.indexOf(he.attribution)<0&&s.push(he.attribution)}}s=s.filter(W=>String(W).trim()),s.sort((W,K)=>W.length-K.length),s=s.filter((W,K)=>{for(let he=K+1;he<s.length;he++)if(s[he].indexOf(W)>=0)return!1;return!0});const N=s.join(" | ");N!==this._attribHTML&&(this._attribHTML=N,s.length?(this._innerContainer.innerHTML=N,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class W2{constructor(s={}){this._updateCompact=()=>{const C=this._container.children;if(C.length){const N=C[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&N.classList.add("maplibregl-compact"):N.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");const C=g.create("a","maplibregl-ctrl-logo");return C.target="_blank",C.rel="noopener nofollow",C.href="https://maplibre.org/",C.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),C.setAttribute("rel","noopener nofollow"),this._container.appendChild(C),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const C=++this._id;return this._queue.push({callback:s,id:C,cancelled:!1}),C}remove(s){const C=this._currentlyRunning,N=C?this._queue.concat(C):this._queue;for(const W of N)if(W.id===s)return void(W.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const C=this._currentlyRunning=this._queue;this._queue=[];for(const N of C)if(!N.cancelled&&(N.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const _r={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var h2=u.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class D1 extends u.Evented{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,C){this.sourceCache.update(s,C),this._renderableTilesKeys=[];const N={};for(const W of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:C}))N[W.key]=!0,this._renderableTilesKeys.push(W.key),this._tiles[W.key]||(W.posMatrix=new Float64Array(16),u.ortho(W.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),this._tiles[W.key]=new qe(W,this.tileSize));for(const W in this._tiles)N[W]||delete this._tiles[W]}freeRtt(s){for(const C in this._tiles){const N=this._tiles[C];(!s||N.tileID.equals(s)||N.tileID.isChildOf(s)||s.isChildOf(N.tileID))&&(N.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const C={};for(const N of this._renderableTilesKeys){const W=this._tiles[N].tileID;if(W.canonical.equals(s.canonical)){const K=s.clone();K.posMatrix=new Float64Array(16),u.ortho(K.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),C[N]=K}else if(W.canonical.isChildOf(s.canonical)){const K=s.clone();K.posMatrix=new Float64Array(16);const he=W.canonical.z-s.canonical.z,ge=W.canonical.x-(W.canonical.x>>he<<he),we=W.canonical.y-(W.canonical.y>>he<<he),Le=u.EXTENT>>he;u.ortho(K.posMatrix,0,Le,0,Le,0,1),u.translate(K.posMatrix,K.posMatrix,[-ge*Le,-we*Le,0]),C[N]=K}else if(s.canonical.isChildOf(W.canonical)){const K=s.clone();K.posMatrix=new Float64Array(16);const he=s.canonical.z-W.canonical.z,ge=s.canonical.x-(s.canonical.x>>he<<he),we=s.canonical.y-(s.canonical.y>>he<<he),Le=u.EXTENT>>he;u.ortho(K.posMatrix,0,u.EXTENT,0,u.EXTENT,0,1),u.translate(K.posMatrix,K.posMatrix,[ge*Le,we*Le,0]),u.scale(K.posMatrix,K.posMatrix,[1/2**he,1/2**he,0]),C[N]=K}}return C}getSourceTile(s,C){const N=this.sourceCache._source;let W=s.overscaledZ-this.deltaZoom;if(W>N.maxzoom&&(W=N.maxzoom),W<N.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(W).key);let K=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!K||!K.dem)&&C)for(;W>=N.minzoom&&(!K||!K.dem);)K=this.sourceCache.getTileByID(s.scaledTo(W--).key);return K}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(C=>C.timeAdded>=s)}}class Uc{constructor(s,C,N){this.painter=s,this.sourceCache=new D1(C),this.options=N,this.exaggeration="number"==typeof N.exaggeration?N.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,C,N,W=u.EXTENT){var K;if(!(C>=0&&C<W&&N>=0&&N<W))return 0;const he=this.getTerrainData(s),ge=null===(K=he.tile)||void 0===K?void 0:K.dem;if(!ge)return 0;const we=((kt=[])[0]=(It=he.u_terrain_matrix)[0]*(ln=(Ft=[C/W*u.EXTENT,N/W*u.EXTENT])[0])+It[4]*(zn=Ft[1])+It[12],kt[1]=It[1]*ln+It[5]*zn+It[13],kt),Le=[we[0]*ge.dim,we[1]*ge.dim],Ve=Math.floor(Le[0]),We=Math.floor(Le[1]),lt=Le[0]-Ve,Tt=Le[1]-We;var kt,Ft,It,ln,zn;return ge.get(Ve,We)*(1-lt)*(1-Tt)+ge.get(Ve+1,We)*lt*(1-Tt)+ge.get(Ve,We+1)*(1-lt)*Tt+ge.get(Ve+1,We+1)*lt*Tt}getElevationForLngLatZoom(s,C){const{tileID:N,mercatorX:W,mercatorY:K}=this._getOverscaledTileIDFromLngLatZoom(s,C);return this.getElevation(N,W%u.EXTENT,K%u.EXTENT,u.EXTENT)}getElevation(s,C,N,W=u.EXTENT){return this.getDEMElevation(s,C,N,W)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const W=this.painter.context,K=new u.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new oe(W,K,W.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new oe(W,new u.RGBAImage({width:1,height:1}),W.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(W.gl.NEAREST,W.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.identity([])}const C=this.sourceCache.getSourceTile(s,!0);if(C&&C.dem&&(!C.demTexture||C.needsTerrainPrepare)){const W=this.painter.context;C.demTexture=this.painter.getTileTexture(C.dem.stride),C.demTexture?C.demTexture.update(C.dem.getPixels(),{premultiply:!1}):C.demTexture=new oe(W,C.dem.getPixels(),W.gl.RGBA,{premultiply:!1}),C.demTexture.bind(W.gl.NEAREST,W.gl.CLAMP_TO_EDGE),C.needsTerrainPrepare=!1}const N=C&&C+C.tileID.key+s.key;if(N&&!this._demMatrixCache[N]){const W=this.sourceCache.sourceCache._source.maxzoom;let K=s.canonical.z-C.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=W?K=s.canonical.z-W:u.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const he=s.canonical.x-(s.canonical.x>>K<<K),ge=s.canonical.y-(s.canonical.y>>K<<K),we=u.fromScaling(new Float64Array(16),[1/(u.EXTENT<<K),1/(u.EXTENT<<K),0]);u.translate(we,we,[he*u.EXTENT,ge*u.EXTENT,0]),this._demMatrixCache[s.key]={matrix:we,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:C&&C.dem&&C.dem.dim||1,u_terrain_matrix:N?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:C&&C.dem&&C.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(C&&C.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:C}}getFramebuffer(s){const C=this.painter,N=C.width/devicePixelRatio,W=C.height/devicePixelRatio;return!this._fbo||this._fbo.width===N&&this._fbo.height===W||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new oe(C.context,{width:N,height:W,data:null},C.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(C.context.gl.NEAREST,C.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new oe(C.context,{width:N,height:W,data:null},C.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(C.context.gl.NEAREST,C.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=C.context.createFramebuffer(N,W,!0,!1),this._fbo.depthAttachment.set(C.context.createRenderbuffer(C.context.gl.DEPTH_COMPONENT16,N,W))),this._fbo.colorAttachment.set("coords"===s?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const C=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let K=0,he=0;K<this._coordsTextureSize;K++)for(let ge=0;ge<this._coordsTextureSize;ge++,he+=4)C[he+0]=255&ge,C[he+1]=255&K,C[he+2]=ge>>8<<4|K>>8,C[he+3]=0;const N=new u.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(C.buffer)),W=new oe(s,N,s.gl.RGBA,{premultiply:!1});return W.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=W,W}pointCoordinate(s){const C=new Uint8Array(4),N=this.painter.context,W=N.gl;N.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),W.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,W.RGBA,W.UNSIGNED_BYTE,C),N.bindFramebuffer.set(null);const K=C[0]+(C[2]>>4<<8),he=C[1]+((15&C[2])<<8),ge=this.coordsIndex[255-C[3]],we=ge&&this.sourceCache.getTileByID(ge);if(!we)return null;const Le=this._coordsTextureSize,Ve=(1<<we.tileID.canonical.z)*Le;return new u.MercatorCoordinate((we.tileID.canonical.x*Le+K)/Ve,(we.tileID.canonical.y*Le+he)/Ve,this.getElevation(we.tileID,K,he,Le))}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.painter.context,C=new u.Pos3dArray,N=new u.TriangleIndexArray,W=this.meshSize,K=u.EXTENT/W,he=W*W;for(let We=0;We<=W;We++)for(let lt=0;lt<=W;lt++)C.emplaceBack(lt*K,We*K,0);for(let We=0;We<he;We+=W+1)for(let lt=0;lt<W;lt++)N.emplaceBack(lt+We,W+lt+We+1,W+lt+We+2),N.emplaceBack(lt+We,W+lt+We+2,lt+We+1);const ge=C.length,we=ge+2*(W+1);for(const We of[0,1])for(let lt=0;lt<=W;lt++)for(const Tt of[0,1])C.emplaceBack(lt*K,We*u.EXTENT,Tt);for(let We=0;We<2*W;We+=2)N.emplaceBack(we+We,we+We+1,we+We+3),N.emplaceBack(we+We,we+We+3,we+We+2),N.emplaceBack(ge+We,ge+We+3,ge+We+1),N.emplaceBack(ge+We,ge+We+2,ge+We+3);const Le=C.length,Ve=Le+2*(W+1);for(const We of[0,1])for(let lt=0;lt<=W;lt++)for(const Tt of[0,1])C.emplaceBack(We*u.EXTENT,lt*K,Tt);for(let We=0;We<2*W;We+=2)N.emplaceBack(Le+We,Le+We+1,Le+We+3),N.emplaceBack(Le+We,Le+We+3,Le+We+2),N.emplaceBack(Ve+We,Ve+We+3,Ve+We+1),N.emplaceBack(Ve+We,Ve+We+2,Ve+We+3);return this._mesh={indexBuffer:s.createIndexBuffer(N),vertexBuffer:s.createVertexBuffer(C,h2.members),segments:u.SegmentVector.simpleSegment(0,0,C.length,N.length)},this._mesh}getMeshFrameDelta(s){return 2*Math.PI*u.earthRadius/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,C){var N;const{tileID:W}=this._getOverscaledTileIDFromLngLatZoom(s,C);return null!==(N=this.getMinMaxElevation(W).minElevation)&&void 0!==N?N:0}getMinMaxElevation(s){const C=this.getTerrainData(s).tile,N={minElevation:null,maxElevation:null};return C&&C.dem&&(N.minElevation=C.dem.min*this.exaggeration,N.maxElevation=C.dem.max*this.exaggeration),N}_getOverscaledTileIDFromLngLatZoom(s,C){const N=u.MercatorCoordinate.fromLngLat(s.wrap()),W=(1<<C)*u.EXTENT,K=N.x*W,he=N.y*W,ge=Math.floor(K/u.EXTENT),we=Math.floor(he/u.EXTENT);return{tileID:new u.OverscaledTileID(C,0,C,ge,we),mercatorX:K,mercatorY:he}}}class Hs{constructor(s,C,N){this._context=s,this._size=C,this._tileSize=N,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const C=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),N=new oe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return N.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),C.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),C.colorAttachment.set(N.texture),{id:s,fbo:C,texture:N,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(C=>s.id!==C),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const C of this._recentlyUsed)if(!this._objects[C].inUse)return this._objects[C];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(s=>!s.inUse)}}const Pc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ms{constructor(s,C){this.painter=s,this.terrain=C,this.pool=new Hs(s.context,30,C.sourceCache.tileSize*C.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,C){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(N=>!s._layers[N].isHidden(C)),this._coordsDescendingInv={};for(const N in s.sourceCaches){this._coordsDescendingInv[N]={};const W=s.sourceCaches[N].getVisibleCoordinates();for(const K of W){const he=this.terrain.sourceCache.getTerrainCoords(K);for(const ge in he)this._coordsDescendingInv[N][ge]||(this._coordsDescendingInv[N][ge]=[]),this._coordsDescendingInv[N][ge].push(he[ge])}}this._coordsDescendingInvStr={};for(const N of s._order){const W=s._layers[N],K=W.source;if(Pc[W.type]&&!this._coordsDescendingInvStr[K]){this._coordsDescendingInvStr[K]={};for(const he in this._coordsDescendingInv[K])this._coordsDescendingInvStr[K][he]=this._coordsDescendingInv[K][he].map(ge=>ge.key).sort().join()}}for(const N of this._renderableTiles)for(const W in this._coordsDescendingInvStr){const K=this._coordsDescendingInvStr[W][N.tileID.key];K&&K!==N.rttCoords[W]&&(N.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;const C=s.type,N=this.painter,W=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Pc[C]&&(this._prevType&&Pc[this._prevType]||this._stacks.push([]),this._prevType=C,this._stacks[this._stacks.length-1].push(s.id),!W))return!0;if(Pc[this._prevType]||Pc[C]&&W){this._prevType=C;const K=this._stacks.length-1,he=this._stacks[K]||[];for(const ge of this._renderableTiles){if(this.pool.isFull()&&(Wa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(ge),ge.rtt[K]){const Le=this.pool.getObjectForId(ge.rtt[K].id);if(Le.stamp===ge.rtt[K].stamp){this.pool.useObject(Le);continue}}const we=this.pool.getOrCreateFreeObject();this.pool.useObject(we),this.pool.stampObject(we),ge.rtt[K]={id:we.id,stamp:we.stamp},N.context.bindFramebuffer.set(we.fbo.framebuffer),N.context.clear({color:u.Color.transparent,stencil:0}),N.currentStencilSource=void 0;for(let Le=0;Le<he.length;Le++){const Ve=N.style._layers[he[Le]],We=Ve.source?this._coordsDescendingInv[Ve.source][ge.tileID.key]:[ge.tileID];N.context.viewport.set([0,0,we.fbo.width,we.fbo.height]),N._renderTileClippingMasks(Ve,We),N.renderLayer(N,N.style.sourceCaches[Ve.source],Ve,We),Ve.source&&(ge.rttCoords[Ve.source]=this._coordsDescendingInvStr[Ve.source][ge.tileID.key])}}return Wa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Pc[C]}return!1}}const De=h,Ye={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},pt=H=>{H.touchstart=H.dragStart,H.touchmoveWindow=H.dragMove,H.touchend=H.dragEnd},ct={showCompass:!0,showZoom:!0,visualizePitch:!1};class Mt{constructor(s,C,N=!1){this.mousedown=he=>{this.startMouse(u.extend({},he,{ctrlKey:!0,preventDefault:()=>he.preventDefault()}),g.mousePos(this.element,he)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=he=>{this.moveMouse(he,g.mousePos(this.element,he))},this.mouseup=he=>{this.mouseRotate.dragEnd(he),this.mousePitch&&this.mousePitch.dragEnd(he),this.offTemp()},this.touchstart=he=>{1!==he.targetTouches.length?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,he.targetTouches)[0],this.startTouch(he,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))},this.touchmove=he=>{1!==he.targetTouches.length?this.reset():(this._lastPos=g.touchPos(this.element,he.targetTouches)[0],this.moveTouch(he,this._lastPos))},this.touchend=he=>{0===he.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const W=s.dragRotate._mouseRotate.getClickTolerance(),K=s.dragRotate._mousePitch.getClickTolerance();this.element=C,this.mouseRotate=So({clickTolerance:W,enable:!0}),this.touchRotate=(({enable:he,clickTolerance:ge,bearingDegreesPerPixelMoved:we=.8})=>{const Le=new Ks;return new lc({clickTolerance:ge,move:(Ve,We)=>({bearingDelta:(We.x-Ve.x)*we}),moveStateManager:Le,enable:he,assignEvents:pt})})({clickTolerance:W,enable:!0}),this.map=s,N&&(this.mousePitch=_1({clickTolerance:K,enable:!0}),this.touchPitch=(({enable:he,clickTolerance:ge,pitchDegreesPerPixelMoved:we=-.5})=>{const Le=new Ks;return new lc({clickTolerance:ge,move:(Ve,We)=>({pitchDelta:(We.y-Ve.y)*we}),moveStateManager:Le,enable:he,assignEvents:pt})})({clickTolerance:K,enable:!0})),g.addEventListener(C,"mousedown",this.mousedown),g.addEventListener(C,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(C,"touchcancel",this.reset)}startMouse(s,C){this.mouseRotate.dragStart(s,C),this.mousePitch&&this.mousePitch.dragStart(s,C),g.disableDrag()}startTouch(s,C){this.touchRotate.dragStart(s,C),this.touchPitch&&this.touchPitch.dragStart(s,C),g.disableDrag()}moveMouse(s,C){const N=this.map,{bearingDelta:W}=this.mouseRotate.dragMove(s,C)||{};if(W&&N.setBearing(N.getBearing()+W),this.mousePitch){const{pitchDelta:K}=this.mousePitch.dragMove(s,C)||{};K&&N.setPitch(N.getPitch()+K)}}moveTouch(s,C){const N=this.map,{bearingDelta:W}=this.touchRotate.dragMove(s,C)||{};if(W&&N.setBearing(N.getBearing()+W),this.touchPitch){const{pitchDelta:K}=this.touchPitch.dragMove(s,C)||{};K&&N.setPitch(N.getPitch()+K)}}off(){const s=this.element;g.removeEventListener(s,"mousedown",this.mousedown),g.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}}let Vt;function hn(H,s,C){if(H=new u.LngLat(H.lng,H.lat),s){const N=new u.LngLat(H.lng-360,H.lat),W=new u.LngLat(H.lng+360,H.lat),K=C.locationPoint(H).distSqr(s);C.locationPoint(N).distSqr(s)<K?H=N:C.locationPoint(W).distSqr(s)<K&&(H=W)}for(;Math.abs(H.lng-C.center.lng)>180;){const N=C.locationPoint(H);if(N.x>=0&&N.y>=0&&N.x<=C.width&&N.y<=C.height)break;H.lng>C.center.lng?H.lng-=360:H.lng+=360}return H}const En={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kn(H,s,C){const N=H.classList;for(const W in En)N.remove(`maplibregl-${C}-anchor-${W}`);N.add(`maplibregl-${C}-anchor-${s}`)}class Xn extends u.Evented{constructor(s){if(super(),this._onKeyPress=C=>{const N=C.code,W=C.charCode||C.keyCode;"Space"!==N&&"Enter"!==N&&32!==W&&13!==W||this.togglePopup()},this._onMapClick=C=>{const N=C.originalEvent.target,W=this._element;this._popup&&(N===W||W.contains(N))&&this.togglePopup()},this._update=C=>{if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=hn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let N="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?N=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(N=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let W="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?W="rotateX(0deg)":"map"===this._pitchAlignment&&(W=`rotateX(${this._map.getPitch()}deg)`),C&&"moveend"!==C.type||(this._pos=this._pos.round()),g.setTransform(this._element,`${En[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${W} ${N}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const K=this._map.unproject(this._pos),he=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=K.distanceTo(this._lngLat)>20*he?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=C=>{if(!this._isDragging){const N=this._clickTolerance||this._map._clickTolerance;this._isDragging=C.point.dist(this._pointerdownPos)>=N}this._isDragging&&(this._pos=C.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new u.Event("dragend")),this._state="inactive"},this._addDragHandler=C=>{this._element.contains(C.originalEvent.target)&&(C.preventDefault(),this._positionDelta=C.point.sub(this._pos).add(this._offset),this._pointerdownPos=C.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&"auto"!==s.pitchAlignment?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=u.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");const C=g.createNS("http://www.w3.org/2000/svg","svg"),N=41,W=27;C.setAttributeNS(null,"display","block"),C.setAttributeNS(null,"height",`${N}px`),C.setAttributeNS(null,"width",`${W}px`),C.setAttributeNS(null,"viewBox",`0 0 ${W} ${N}`);const K=g.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"stroke","none"),K.setAttributeNS(null,"stroke-width","1"),K.setAttributeNS(null,"fill","none"),K.setAttributeNS(null,"fill-rule","evenodd");const he=g.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"fill-rule","nonzero");const ge=g.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ge.setAttributeNS(null,"fill","#000000");const we=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ln of we){const zn=g.createNS("http://www.w3.org/2000/svg","ellipse");zn.setAttributeNS(null,"opacity","0.04"),zn.setAttributeNS(null,"cx","10.5"),zn.setAttributeNS(null,"cy","5.80029008"),zn.setAttributeNS(null,"rx",ln.rx),zn.setAttributeNS(null,"ry",ln.ry),ge.appendChild(zn)}const Le=g.createNS("http://www.w3.org/2000/svg","g");Le.setAttributeNS(null,"fill",this._color);const Ve=g.createNS("http://www.w3.org/2000/svg","path");Ve.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Le.appendChild(Ve);const We=g.createNS("http://www.w3.org/2000/svg","g");We.setAttributeNS(null,"opacity","0.25"),We.setAttributeNS(null,"fill","#000000");const lt=g.createNS("http://www.w3.org/2000/svg","path");lt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),We.appendChild(lt);const Tt=g.createNS("http://www.w3.org/2000/svg","g");Tt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Tt.setAttributeNS(null,"fill","#FFFFFF");const kt=g.createNS("http://www.w3.org/2000/svg","g");kt.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ft=g.createNS("http://www.w3.org/2000/svg","circle");Ft.setAttributeNS(null,"fill","#000000"),Ft.setAttributeNS(null,"opacity","0.25"),Ft.setAttributeNS(null,"cx","5.5"),Ft.setAttributeNS(null,"cy","5.5"),Ft.setAttributeNS(null,"r","5.4999962");const It=g.createNS("http://www.w3.org/2000/svg","circle");It.setAttributeNS(null,"fill","#FFFFFF"),It.setAttributeNS(null,"cx","5.5"),It.setAttributeNS(null,"cy","5.5"),It.setAttributeNS(null,"r","5.4999962"),kt.appendChild(Ft),kt.appendChild(It),he.appendChild(ge),he.appendChild(Le),he.appendChild(We),he.appendChild(Tt),he.appendChild(kt),C.appendChild(he),C.setAttributeNS(null,"height",N*this._scale+"px"),C.setAttributeNS(null,"width",W*this._scale+"px"),this._element.appendChild(C),this._offset=u.Point.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()}),kn(this._element,this._anchor,"marker"),s&&s.className)for(const C of s.className.split(" "))this._element.classList.add(C);this._popup=null}addTo(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=u.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const W=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[W,-1*(24.6+W)],"bottom-right":[-W,-1*(24.6+W)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=s,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?s.remove():s.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(s){return this._offset=u.Point.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&"auto"!==s?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const pn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let An=0,Tn=!1;const Un={maxWidth:100,unit:"metric"};function a(H,s,C){const N=C&&C.maxWidth||100,W=H._container.clientHeight/2,K=H.unproject([0,W]),he=H.unproject([N,W]),ge=K.distanceTo(he);if(C&&"imperial"===C.unit){const we=3.2808*ge;we>5280?d(s,N,we/5280,H._getUIString("ScaleControl.Miles")):d(s,N,we,H._getUIString("ScaleControl.Feet"))}else C&&"nautical"===C.unit?d(s,N,ge/1852,H._getUIString("ScaleControl.NauticalMiles")):ge>=1e3?d(s,N,ge/1e3,H._getUIString("ScaleControl.Kilometers")):d(s,N,ge,H._getUIString("ScaleControl.Meters"))}function d(H,s,C,N){const W=function(K){const he=Math.pow(10,`${Math.floor(K)}`.length-1);let ge=K/he;return ge=ge>=10?10:ge>=5?5:ge>=3?3:ge>=2?2:ge>=1?1:function(we){const Le=Math.pow(10,Math.ceil(-Math.log(we)/Math.LN10));return Math.round(we*Le)/Le}(ge),he*ge}(C);H.style.width=s*(W/C)+"px",H.innerHTML=`${W}&nbsp;${N}`}const E={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},T=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Z(H){if(H){if("number"==typeof H){const s=Math.round(Math.abs(H)/Math.SQRT2);return{center:new u.Point(0,0),top:new u.Point(0,H),"top-left":new u.Point(s,s),"top-right":new u.Point(-s,s),bottom:new u.Point(0,-H),"bottom-left":new u.Point(s,-s),"bottom-right":new u.Point(-s,-s),left:new u.Point(H,0),right:new u.Point(-H,0)}}if(H instanceof u.Point||Array.isArray(H)){const s=u.Point.convert(H);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:u.Point.convert(H.center||[0,0]),top:u.Point.convert(H.top||[0,0]),"top-left":u.Point.convert(H["top-left"]||[0,0]),"top-right":u.Point.convert(H["top-right"]||[0,0]),bottom:u.Point.convert(H.bottom||[0,0]),"bottom-left":u.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":u.Point.convert(H["bottom-right"]||[0,0]),left:u.Point.convert(H.left||[0,0]),right:u.Point.convert(H.right||[0,0])}}return Z(new u.Point(0,0))}const me={extend:(H,...s)=>u.extend(H,...s),run(H){H()},logToElement(H,s=!1,C="log"){const N=window.document.getElementById(C);N&&(s&&(N.innerHTML=""),N.innerHTML+=`<br>${H}`)}},Ie=h;class Xe{static get version(){return Ie}static get workerCount(){return on.workerCount}static set workerCount(s){on.workerCount=s}static get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(s){u.config.MAX_PARALLEL_IMAGE_REQUESTS=s}static get workerUrl(){return u.config.WORKER_URL}static set workerUrl(s){u.config.WORKER_URL=s}static addProtocol(s,C){u.config.REGISTERED_PROTOCOLS[s]=C}static removeProtocol(s){delete u.config.REGISTERED_PROTOCOLS[s]}}return Xe.Map=class extends tu{constructor(H){if(u.PerformanceUtils.mark(u.PerformanceMarkers.create),null!=(H=u.extend({},Ye,H)).minZoom&&null!=H.maxZoom&&H.minZoom>H.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=H.minPitch&&null!=H.maxPitch&&H.minPitch>H.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=H.minPitch&&H.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=H.maxPitch&&H.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Si(H.minZoom,H.maxZoom,H.minPitch,H.maxPitch,H.renderWorldCopies),{bearingSnap:H.bearingSnap}),this._cooperativeGesturesOnWheel=s=>{this._onCooperativeGesture(s,s[this._metaKey],1)},this._contextLost=s=>{s.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:s}))},this._contextRestored=s=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:s}))},this._onMapScroll=s=>{if(s.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=H.interactive,this._cooperativeGestures=H.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=H.maxTileCacheSize,this._maxTileCacheZoomLevels=H.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=H.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=H.preserveDrawingBuffer,this._antialias=H.antialias,this._trackResize=H.trackResize,this._bearingSnap=H.bearingSnap,this._refreshExpiredTiles=H.refreshExpiredTiles,this._fadeDuration=H.fadeDuration,this._crossSourceCollisions=H.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=H.collectResourceTiming,this._renderTaskQueue=new Hi,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},_r,H.locale),this._clickTolerance=H.clickTolerance,this._overridePixelRatio=H.pixelRatio,this._maxCanvasSize=H.maxCanvasSize,this.transformCameraUpdate=H.transformCameraUpdate,this._imageQueueHandle=D.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(H.transformRequest),"string"==typeof H.container){if(this._container=document.getElementById(H.container),!this._container)throw new Error(`Container '${H.container}' not found.`)}else{if(!(H.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=H.container}if(H.maxBounds&&this.setMaxBounds(H.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let s=!1;const C=ur(N=>{this._trackResize&&!this._removed&&this.resize(N)._update()},50);this._resizeObserver=new ResizeObserver(N=>{s?C(N):s=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ss(this,H),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=H.hash&&new ho("string"==typeof H.hash&&H.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:H.center,zoom:H.zoom,bearing:H.bearing,pitch:H.pitch}),H.bounds&&(this.resize(),this.fitBounds(H.bounds,u.extend({},H.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=H.localIdeographFontFamily,this._validateStyle=H.validateStyle,H.style&&this.setStyle(H.style,{localIdeographFontFamily:H.localIdeographFontFamily}),H.attributionControl&&this.addControl(new Za({customAttribution:H.customAttribution})),H.maplibreLogo&&this.addControl(new W2,H.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update("style"===s.dataType),this.fire(new u.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new u.Event(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new u.Event("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(H,s){if(void 0===s&&(s=H.getDefaultPosition?H.getDefaultPosition():"top-right"),!H||!H.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const C=H.onAdd(this);this._controls.push(H);const N=this._controlPositions[s];return-1!==s.indexOf("bottom")?N.insertBefore(C,N.firstChild):N.appendChild(C),this}removeControl(H){if(!H||!H.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(H);return s>-1&&this._controls.splice(s,1),H.onRemove(this),this}hasControl(H){return this._controls.indexOf(H)>-1}calculateCameraOptionsFromTo(H,s,C,N){return null==N&&this.terrain&&(N=this.terrain.getElevationForLngLatZoom(C,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(H,s,C,N)}resize(H){var s;const C=this._containerDimensions(),N=C[0],W=C[1],K=this._getClampedPixelRatio(N,W);if(this._resizeCanvas(N,W,K),this.painter.resize(N,W,K),this.painter.overLimit()){const ge=this.painter.context.gl;this._maxCanvasSize=[ge.drawingBufferWidth,ge.drawingBufferHeight];const we=this._getClampedPixelRatio(N,W);this._resizeCanvas(N,W,we),this.painter.resize(N,W,we)}this.transform.resize(N,W),null===(s=this._requestedCameraState)||void 0===s||s.resize(N,W);const he=!this._moving;return he&&(this.stop(),this.fire(new u.Event("movestart",H)).fire(new u.Event("move",H))),this.fire(new u.Event("resize",H)),he&&this.fire(new u.Event("moveend",H)),this}_getClampedPixelRatio(H,s){const{0:C,1:N}=this._maxCanvasSize,W=this.getPixelRatio(),K=H*W,he=s*W;return Math.min(K>C?C/K:1,he>N?N/he:1)*W}getPixelRatio(){var H;return null!==(H=this._overridePixelRatio)&&void 0!==H?H:devicePixelRatio}setPixelRatio(H){this._overridePixelRatio=H,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(H){return this.transform.setMaxBounds(ae.convert(H)),this._update()}setMinZoom(H){if((H=H??-2)>=-2&&H<=this.transform.maxZoom)return this.transform.minZoom=H,this._update(),this.getZoom()<H&&this.setZoom(H),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(H){if((H=H??22)>=this.transform.minZoom)return this.transform.maxZoom=H,this._update(),this.getZoom()>H&&this.setZoom(H),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(H){if((H=H??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(H>=0&&H<=this.transform.maxPitch)return this.transform.minPitch=H,this._update(),this.getPitch()<H&&this.setPitch(H),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(H){if((H=H??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(H>=this.transform.minPitch)return this.transform.maxPitch=H,this._update(),this.getPitch()>H&&this.setPitch(H),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(H){return this.transform.renderWorldCopies=H,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(H){return this._cooperativeGestures=H,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(H){return this.transform.locationPoint(u.LngLat.convert(H),this.style&&this.terrain)}unproject(H){return this.transform.pointLocation(u.Point.convert(H),this.terrain)}isMoving(){var H;return this._moving||(null===(H=this.handlers)||void 0===H?void 0:H.isMoving())}isZooming(){var H;return this._zooming||(null===(H=this.handlers)||void 0===H?void 0:H.isZooming())}isRotating(){var H;return this._rotating||(null===(H=this.handlers)||void 0===H?void 0:H.isRotating())}_createDelegatedListener(H,s,C){if("mouseenter"===H||"mouseover"===H){let N=!1;return{layer:s,listener:C,delegates:{mousemove:K=>{const he=this.getLayer(s)?this.queryRenderedFeatures(K.point,{layers:[s]}):[];he.length?N||(N=!0,C.call(this,new vo(H,this,K.originalEvent,{features:he}))):N=!1},mouseout:()=>{N=!1}}}}if("mouseleave"===H||"mouseout"===H){let N=!1;return{layer:s,listener:C,delegates:{mousemove:he=>{(this.getLayer(s)?this.queryRenderedFeatures(he.point,{layers:[s]}):[]).length?N=!0:N&&(N=!1,C.call(this,new vo(H,this,he.originalEvent)))},mouseout:he=>{N&&(N=!1,C.call(this,new vo(H,this,he.originalEvent)))}}}}{const N=W=>{const K=this.getLayer(s)?this.queryRenderedFeatures(W.point,{layers:[s]}):[];K.length&&(W.features=K,C.call(this,W),delete W.features)};return{layer:s,listener:C,delegates:{[H]:N}}}}on(H,s,C){if(void 0===C)return super.on(H,s);const N=this._createDelegatedListener(H,s,C);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[H]=this._delegatedListeners[H]||[],this._delegatedListeners[H].push(N);for(const W in N.delegates)this.on(W,N.delegates[W]);return this}once(H,s,C){if(void 0===C)return super.once(H,s);const N=this._createDelegatedListener(H,s,C);for(const W in N.delegates)this.once(W,N.delegates[W]);return this}off(H,s,C){return void 0===C?super.off(H,s):(this._delegatedListeners&&this._delegatedListeners[H]&&(N=>{const W=this._delegatedListeners[H];for(let K=0;K<W.length;K++){const he=W[K];if(he.layer===s&&he.listener===C){for(const ge in he.delegates)this.off(ge,he.delegates[ge]);return W.splice(K,1),this}}})(),this)}queryRenderedFeatures(H,s){if(!this.style)return[];let C;const N=H instanceof u.Point||Array.isArray(H),W=N?H:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(N?{}:H)||{},W instanceof u.Point||"number"==typeof W[0])C=[u.Point.convert(W)];else{const K=u.Point.convert(W[0]),he=u.Point.convert(W[1]);C=[K,new u.Point(he.x,K.y),he,new u.Point(K.x,he.y),K]}return this.style.queryRenderedFeatures(C,s,this.transform)}querySourceFeatures(H,s){return this.style.querySourceFeatures(H,s)}setStyle(H,s){return!1!==(s=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&H?(this._diffStyle(H,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(H,s))}setTransformRequest(H){return this._requestManager.setTransformRequest(H),this}_getUIString(H){const s=this._locale[H];if(null==s)throw new Error(`Missing UI string '${H}'`);return s}_updateStyle(H,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(H,s));const C=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!H)),H?(this.style=new Nn(this,s||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof H?this.style.loadURL(H,s,C):this.style.loadJSON(H,s,C),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Nn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(H,s){if("string"==typeof H){const C=this._requestManager.transformRequest(H,R.Style);u.getJSON(C,(N,W)=>{N?this.fire(new u.ErrorEvent(N)):W&&this._updateDiff(W,s)})}else"object"==typeof H&&this._updateDiff(H,s)}_updateDiff(H,s){try{this.style.setState(H,s)&&this._update(!0)}catch(C){u.warnOnce(`Unable to perform style diff: ${C.message||C.error||C}.  Rebuilding the style from scratch.`),this._updateStyle(H,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")}addSource(H,s){return this._lazyInitEmptyStyle(),this.style.addSource(H,s),this._update(!0)}isSourceLoaded(H){const s=this.style&&this.style.sourceCaches[H];if(void 0!==s)return s.loaded();this.fire(new u.ErrorEvent(new Error(`There is no source with ID '${H}'`)))}setTerrain(H){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),H){const s=this.style.sourceCaches[H.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${H.source}`);for(const C in this.style._layers){const N=this.style._layers[C];"hillshade"===N.type&&N.source===H.source&&u.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Uc(this.painter,s,H),this.painter.renderToTexture=new ms(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=C=>{"style"===C.dataType?this.terrain.sourceCache.freeRtt():"source"===C.dataType&&C.tile&&(C.sourceId!==H.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(C.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.Event("terrain",{terrain:H})),this}getTerrain(){var H,s;return null!==(s=null===(H=this.terrain)||void 0===H?void 0:H.options)&&void 0!==s?s:null}areTilesLoaded(){const H=this.style&&this.style.sourceCaches;for(const s in H){const C=H[s]._tiles;for(const N in C){const W=C[N];if("loaded"!==W.state&&"errored"!==W.state)return!1}}return!0}addSourceType(H,s,C){return this._lazyInitEmptyStyle(),this.style.addSourceType(H,s,C)}removeSource(H){return this.style.removeSource(H),this._update(!0)}getSource(H){return this.style.getSource(H)}addImage(H,s,C={}){const{pixelRatio:N=1,sdf:W=!1,stretchX:K,stretchY:he,content:ge}=C;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||u.isImageBitmap(s))){if(void 0===s.width||void 0===s.height)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:we,height:Le,data:Ve}=s,We=s;return this.style.addImage(H,{data:new u.RGBAImage({width:we,height:Le},new Uint8Array(Ve)),pixelRatio:N,stretchX:K,stretchY:he,content:ge,sdf:W,version:0,userImage:We}),We.onAdd&&We.onAdd(this,H),this}}{const{width:we,height:Le,data:Ve}=u.browser.getImageData(s);this.style.addImage(H,{data:new u.RGBAImage({width:we,height:Le},Ve),pixelRatio:N,stretchX:K,stretchY:he,content:ge,sdf:W,version:0})}}updateImage(H,s){const C=this.style.getImage(H);if(!C)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const N=s instanceof HTMLImageElement||u.isImageBitmap(s)?u.browser.getImageData(s):s,{width:W,height:K,data:he}=N;if(void 0===W||void 0===K)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(W!==C.data.width||K!==C.data.height)return this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const ge=!(s instanceof HTMLImageElement||u.isImageBitmap(s));return C.data.replace(he,ge),this.style.updateImage(H,C),this}getImage(H){return this.style.getImage(H)}hasImage(H){return H?!!this.style.getImage(H):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(H){this.style.removeImage(H)}loadImage(H,s){D.getImage(this._requestManager.transformRequest(H,R.Image),s)}listImages(){return this.style.listImages()}addLayer(H,s){return this._lazyInitEmptyStyle(),this.style.addLayer(H,s),this._update(!0)}moveLayer(H,s){return this.style.moveLayer(H,s),this._update(!0)}removeLayer(H){return this.style.removeLayer(H),this._update(!0)}getLayer(H){return this.style.getLayer(H)}setLayerZoomRange(H,s,C){return this.style.setLayerZoomRange(H,s,C),this._update(!0)}setFilter(H,s,C={}){return this.style.setFilter(H,s,C),this._update(!0)}getFilter(H){return this.style.getFilter(H)}setPaintProperty(H,s,C,N={}){return this.style.setPaintProperty(H,s,C,N),this._update(!0)}getPaintProperty(H,s){return this.style.getPaintProperty(H,s)}setLayoutProperty(H,s,C,N={}){return this.style.setLayoutProperty(H,s,C,N),this._update(!0)}getLayoutProperty(H,s){return this.style.getLayoutProperty(H,s)}setGlyphs(H,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(H,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(H,s,C={}){return this._lazyInitEmptyStyle(),this.style.addSprite(H,s,C,N=>{N||this._update(!0)}),this}removeSprite(H){return this._lazyInitEmptyStyle(),this.style.removeSprite(H),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(H,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(H,s,C=>{C||this._update(!0)}),this}setLight(H,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(H,s),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(H,s){return this.style.setFeatureState(H,s),this._update()}removeFeatureState(H,s){return this.style.removeFeatureState(H,s),this._update()}getFeatureState(H){return this.style.getFeatureState(H)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let H=0,s=0;return this._container&&(H=this._container.clientWidth||400,s=this._container.clientHeight||300),[H,s]}_setupContainer(){const H=this._container;H.classList.add("maplibregl-map");const s=this._canvasContainer=g.create("div","maplibregl-canvas-container",H);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const C=this._containerDimensions(),N=this._getClampedPixelRatio(C[0],C[1]);this._resizeCanvas(C[0],C[1],N);const W=this._controlContainer=g.create("div","maplibregl-control-container",H),K=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(he=>{K[he]=g.create("div",`maplibregl-ctrl-${he} `,W)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=g.create("div","maplibregl-cooperative-gesture-screen",this._container);let H="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(H="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${H}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){g.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(H,s,C){this._canvas.width=Math.floor(C*H),this._canvas.height=Math.floor(C*s),this._canvas.style.width=`${H}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const H={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let s=null;this._canvas.addEventListener("webglcontextcreationerror",N=>{s={requestedAttributes:H},N&&(s.statusMessage=N.statusMessage,s.type=N.type)},{once:!0});const C=this._canvas.getContext("webgl2",H)||this._canvas.getContext("webgl",H);if(!C){const N="Failed to initialize WebGL";throw s?(s.message=N,new Error(JSON.stringify(s))):new Error(N)}this.painter=new Qc(C,this.transform),v.testSupport(C)}_onCooperativeGesture(H,s,C){return!s&&C<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(H){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||H,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(H){return this._update(),this._renderTaskQueue.add(H)}_cancelRenderFrame(H){this._renderTaskQueue.remove(H)}_render(H){const s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(H),this._removed)return;let C=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,K=u.browser.now();this.style.zoomHistory.update(W,K);const he=new u.EvaluationParameters(W,{now:K,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ge=he.crossFadingFactor();1===ge&&ge===this._crossFadingFactor||(C=!0,this._crossFadingFactor=ge),this.style.update(he)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.load),this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||C)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const N=this._sourcesDirty||this._styleDirty||this._placementDirty;return N||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||N||(this._fullyLoaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var H;this._hash&&this._hash.remove();for(const C of this._controls)C.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),D.removeThrottleControl(this._imageQueueHandle),null===(H=this._resizeObserver)||void 0===H||H.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),u.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new u.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.browser.frame(H=>{u.PerformanceUtils.frame(H),this._frame=null,this._render(H)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(H){this._showTileBoundaries!==H&&(this._showTileBoundaries=H,this._update())}get showPadding(){return!!this._showPadding}set showPadding(H){this._showPadding!==H&&(this._showPadding=H,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(H){this._showCollisionBoxes!==H&&(this._showCollisionBoxes=H,H?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(H){this._showOverdrawInspector!==H&&(this._showOverdrawInspector=H,this._update())}get repaint(){return!!this._repaint}set repaint(H){this._repaint!==H&&(this._repaint=H,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(H){this._vertices=H,this._update()}get version(){return De}getCameraTargetElevation(){return this.transform.elevation}},Xe.NavigationControl=class{constructor(H){this._updateZoomButtons=()=>{const s=this._map.getZoom(),C=s===this._map.getMaxZoom(),N=s===this._map.getMinZoom();this._zoomInButton.disabled=C,this._zoomOutButton.disabled=N,this._zoomInButton.setAttribute("aria-disabled",C.toString()),this._zoomOutButton.setAttribute("aria-disabled",N.toString())},this._rotateCompassArrow=()=>{const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,C)=>{const N=this._map._getUIString(`NavigationControl.${C}`);s.title=N,s.setAttribute("aria-label",N)},this.options=u.extend({},ct,H),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(H){return this._map=H,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mt(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(H,s){const C=g.create("button",H,this._container);return C.type="button",C.addEventListener("click",s),C}},Xe.GeolocateControl=class extends u.Evented{constructor(H){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(s),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.Event("geolocate",s)),this._finish()}},this._updateCamera=s=>{const C=new u.LngLat(s.coords.longitude,s.coords.latitude),N=s.coords.accuracy,W=this._map.getBearing(),K=u.extend({bearing:W},this.options.fitBoundsOptions),he=ae.fromLngLat(C,N);this._map.fitBounds(he,K,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const C=new u.LngLat(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(C).addTo(this._map),this._userLocationDotMarker.setLngLat(C).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(1===s.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===s.code&&Tn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.Event("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=s=>{if(this._map){if(this._container.addEventListener("contextmenu",C=>C.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===s){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const C=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C)}else{const C=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=C,this._geolocateButton.setAttribute("aria-label",C)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Xn({element:this._dotElement}),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",C=>{C.geolocateSource||"ACTIVE_LOCK"!==this._watchState||C.originalEvent&&"resize"===C.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.Event("trackuserlocationend")))})}},this.options=u.extend({},pn,H)}onAdd(H){return this._map=H,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(s,C=!1){void 0===Vt||C?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(N=>{Vt="denied"!==N.state,s(Vt)}).catch(()=>{Vt=!!window.navigator.geolocation,s(Vt)}):(Vt=!!window.navigator.geolocation,s(Vt)):s(Vt)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,An=0,Tn=!1}_isOutOfMapMaxBounds(H){const s=this._map.getMaxBounds(),C=H.coords;return s&&(C.longitude<s.getWest()||C.longitude>s.getEast()||C.latitude<s.getSouth()||C.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const H=this._map.getBounds(),s=H.getSouthEast(),C=H.getNorthEast(),N=s.distanceTo(C),W=Math.ceil(this._accuracy/(N/this._map._container.clientHeight)*2);this._circleElement.style.width=`${W}px`,this._circleElement.style.height=`${W}px`}trigger(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":An--,Tn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let H;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),An++,An>1?(H={maximumAge:6e5,timeout:0},Tn=!0):(H=this.options.positionOptions,Tn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Xe.AttributionControl=Za,Xe.LogoControl=W2,Xe.ScaleControl=class{constructor(H){this._onMove=()=>{a(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,a(this._map,this._container,this.options)},this.options=u.extend({},Un,H)}getDefaultPosition(){return"bottom-left"}onAdd(H){return this._map=H,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",H.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Xe.FullscreenControl=class extends u.Evented{constructor(H={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,H&&H.container&&(H.container instanceof HTMLElement?this._container=H.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(H){return this._map=H,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const H=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",H).setAttribute("aria-hidden","true"),H.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const H=this._getTitle();this._fullscreenButton.setAttribute("aria-label",H),this._fullscreenButton.title=H}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new u.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Xe.TerrainControl=class{constructor(H){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=H}onAdd(H){return this._map=H,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Xe.Popup=class extends u.Evented{constructor(H){super(),this.remove=()=>(this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const he of this.options.className.split(" "))this._container.classList.add(he);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=hn(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!s)return;const C=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);let N=this.options.anchor;const W=Z(this.options.offset);if(!N){const he=this._container.offsetWidth,ge=this._container.offsetHeight;let we;we=C.y+W.bottom.y<ge?["top"]:C.y>this._map.transform.height-ge?["bottom"]:[],C.x<he/2?we.push("left"):C.x>this._map.transform.width-he/2&&we.push("right"),N=0===we.length?"bottom":we.join("-")}const K=C.add(W[N]).round();g.setTransform(this._container,`${En[N]} translate(${K.x}px,${K.y}px)`),kn(this._container,N,"popup")},this._onClose=()=>{this.remove()},this.options=u.extend(Object.create(E),H)}addTo(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(H){return this._lngLat=u.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(H){return this.setDOMContent(document.createTextNode(H))}setHTML(H){const s=document.createDocumentFragment(),C=document.createElement("body");let N;for(C.innerHTML=H;N=C.firstChild,N;)s.appendChild(N);return this.setDOMContent(s)}getMaxWidth(){var H;return null===(H=this._container)||void 0===H?void 0:H.style.maxWidth}setMaxWidth(H){return this.options.maxWidth=H,this._update(),this}setDOMContent(H){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(H),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(H){this._container&&this._container.classList.add(H)}removeClassName(H){this._container&&this._container.classList.remove(H)}setOffset(H){return this.options.offset=H,this._update(),this}toggleClassName(H){if(this._container)return this._container.classList.toggle(H)}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const H=this._container.querySelector(T);H&&H.focus()}},Xe.Marker=Xn,Xe.Style=Nn,Xe.LngLat=u.LngLat,Xe.LngLatBounds=ae,Xe.Point=u.Point,Xe.MercatorCoordinate=u.MercatorCoordinate,Xe.Evented=u.Evented,Xe.AJAXError=u.AJAXError,Xe.config=u.config,Xe.CanvasSource=Pe,Xe.GeoJSONSource=Ue,Xe.ImageSource=$e,Xe.RasterDEMTileSource=Fe,Xe.RasterTileSource=_e,Xe.VectorTileSource=Me,Xe.VideoSource=He,Xe.setRTLTextPlugin=u.setRTLTextPlugin,Xe.getRTLTextPluginStatus=u.getRTLTextPluginStatus,Xe.prewarm=function(){Vn().acquire(gt)},Xe.clearPrewarmedResources=function(){const H=Gt;H&&(H.isPreloaded()&&1===H.numActive()?(H.release(gt),Gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},me.extend(Xe,{isSafari:u.isSafari,getPerformanceMetrics:u.PerformanceUtils.getPerformanceMetrics}),Xe}),k}()},3694:Ae=>{"use strict";Ae.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},Ae=>{Ae(Ae.s=40120)}]);