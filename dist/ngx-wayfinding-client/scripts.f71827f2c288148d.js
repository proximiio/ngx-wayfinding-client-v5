!function(N,Ln){"object"==typeof exports&&typeof module<"u"?Ln(exports):"function"==typeof define&&define.amd?define(["exports"],Ln):Ln((N=typeof globalThis<"u"?globalThis:N||self).turf={})}(this,function(N){"use strict";var Ln=6371008.8,$s={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*Ln,kilometers:6371.0088,kilometres:6371.0088,meters:Ln,metres:Ln,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:Ln/1852,radians:1,yards:6967335.223679999},Wl={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ln,yards:1.0936133},ta={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Le(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Jl(t,e,n){switch(t){case"Point":return ft(e).geometry;case"LineString":return Zt(e).geometry;case"Polygon":return dt(e).geometry;case"MultiPoint":return Qo(e).geometry;case"MultiLineString":return di(e).geometry;case"MultiPolygon":return On(e).geometry;default:throw new Error(t+" is invalid")}}function ft(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!De(t[0])||!De(t[1]))throw new Error("coordinates must contain numbers");return Le({type:"Point",coordinates:t},e,n)}function Zl(t,e,n){return void 0===n&&(n={}),rt(t.map(function(r){return ft(r,e)}),n)}function dt(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return Le({type:"Polygon",coordinates:t},e,n)}function Kl(t,e,n){return void 0===n&&(n={}),rt(t.map(function(r){return dt(r,e)}),n)}function Zt(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return Le({type:"LineString",coordinates:t},e,n)}function Ql(t,e,n){return void 0===n&&(n={}),rt(t.map(function(r){return Zt(r,e)}),n)}function rt(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function di(t,e,n){return void 0===n&&(n={}),Le({type:"MultiLineString",coordinates:t},e,n)}function Qo(t,e,n){return void 0===n&&(n={}),Le({type:"MultiPoint",coordinates:t},e,n)}function On(t,e,n){return void 0===n&&(n={}),Le({type:"MultiPolygon",coordinates:t},e,n)}function su(t,e,n){return void 0===n&&(n={}),Le({type:"GeometryCollection",geometries:t},e,n)}function $l(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function uo(t,e){void 0===e&&(e="kilometers");var n=$s[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Fi(t,e){void 0===e&&(e="kilometers");var n=$s[e];if(!n)throw new Error(e+" units is invalid");return t/n}function ea(t,e){return yi(Fi(t,e))}function ki(t){var e=t%360;return e<0&&(e+=360),e}function yi(t){return t%(2*Math.PI)*180/Math.PI}function Ae(t){return t%360*Math.PI/180}function Gi(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return uo(Fi(t,e),n)}function tc(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=ta[e];if(!r)throw new Error("invalid original units");var i=ta[n];if(!i)throw new Error("invalid final units");return t/r*i}function De(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Kt(t){return!!t&&t.constructor===Object}function ec(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!De(e))throw new Error("bbox must only contain numbers")})}function nc(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var ug=Object.freeze({__proto__:null,earthRadius:Ln,factors:$s,unitsFactors:Wl,areaFactors:ta,feature:Le,geometry:Jl,point:ft,points:Zl,polygon:dt,polygons:Kl,lineString:Zt,lineStrings:Ql,featureCollection:rt,multiLineString:di,multiPoint:Qo,multiPolygon:On,geometryCollection:su,round:$l,radiansToLength:uo,lengthToRadians:Fi,lengthToDegrees:ea,bearingToAzimuth:ki,radiansToDegrees:yi,degreesToRadians:Ae,convertLength:Gi,convertArea:tc,isNumber:De,isObject:Kt,validateBBox:ec,validateId:nc});function _e(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,h,c=0,p=0,g=t.type,d="FeatureCollection"===g,m="Feature"===g,f=d?t.features.length:1,_=0;_<f;_++){a=(h=!!(l=d?t.features[_].geometry:m?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var I=0;I<a;I++){var y=0,v=0;if(null!==(s=h?l.geometries[I]:l)){u=s.coordinates;var x=s.type;switch(c=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,p,_,y,v))return!1;p++,y++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],p,_,y,v))return!1;p++,"MultiPoint"===x&&y++}"LineString"===x&&y++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],p,_,y,v))return!1;p++}"MultiLineString"===x&&y++,"Polygon"===x&&v++}"Polygon"===x&&y++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(v=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],p,_,y,v))return!1;p++}v++}y++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===_e(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function au(t,e,n,r){var i=n;return _e(t,function(o,s,a,u,l){i=0===s&&void 0===n?o:e(i,o,s,a,u,l)},r),i}function uu(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function rc(t,e,n){var r=n;return uu(t,function(i,o){r=0===o&&void 0===n?i:e(r,i,o)}),r}function Wt(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function lu(t,e,n){var r=n;return Wt(t,function(i,o){r=0===o&&void 0===n?i:e(r,i,o)}),r}function lo(t){var e=[];return _e(t,function(n){e.push(n)}),e}function Rn(t,e){var n,r,i,o,s,a,u,l,h,c,p=0,g="FeatureCollection"===t.type,d="Feature"===t.type,m=g?t.features.length:1;for(n=0;n<m;n++){for(l=g?t.features[n].properties:d?t.properties:{},h=g?t.features[n].bbox:d?t.bbox:void 0,c=g?t.features[n].id:d?t.id:void 0,s=(u=!!(a=g?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,h,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,h,c))return!1;p++}}function cu(t,e,n){var r=n;return Rn(t,function(i,o,s,a,u){r=0===o&&void 0===n?i:e(r,i,o,s,a,u)}),r}function Ve(t,e){Rn(t,function(n,r,i,o,s){var a,u=null===n?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Le(n,i,{bbox:o,id:s}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<n.coordinates.length;l++)if(!1===e(Le({type:a,coordinates:n.coordinates[l]},i),r,l))return!1})}function ic(t,e,n){var r=n;return Ve(t,function(i,o,s){r=0===o&&0===s&&void 0===n?i:e(r,i,o,s)}),r}function Kr(t,e){Ve(t,function(n,r,i){var o=0;if(n.geometry){var s=n.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var a,u=0,l=0,h=0;return!1!==_e(n,function(c,p,g,d,m){if(void 0===a||r>u||d>l||m>h)return a=c,u=r,l=d,h=m,void(o=0);var f=Zt([a,c],n.properties);if(!1===e(f,r,i,m,o))return!1;o++,a=c})&&void 0}}})}function hu(t,e,n){var r=n,i=!1;return Kr(t,function(o,s,a,u,l){r=!1===i&&void 0===n?o:e(r,o,s,a,u,l),i=!0}),r}function pu(t,e){if(!t)throw new Error("geojson is required");Ve(t,function(n,r,i){if(null!==n.geometry){var s=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===e(n,r,i,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(Zt(s[a],n.properties),r,i,a))return!1}}})}function fu(t,e,n){var r=n;return pu(t,function(i,o,s,a){r=0===o&&void 0===n?i:e(r,i,o,s,a)}),r}function oc(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Zt([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Zt([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Zt([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Zt([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function sc(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return ft(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),ft(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),ft(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),ft(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),ft(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),ft(u[i][o][s],a,e)}throw new Error("geojson is invalid")}var lg=Object.freeze({__proto__:null,coordAll:lo,coordEach:_e,coordReduce:au,featureEach:Wt,featureReduce:lu,findPoint:sc,findSegment:oc,flattenEach:Ve,flattenReduce:ic,geomEach:Rn,geomReduce:cu,lineEach:pu,lineReduce:fu,propEach:uu,propReduce:rc,segmentEach:Kr,segmentReduce:hu});function Ie(t){var e=[1/0,1/0,-1/0,-1/0];return _e(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}function re(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ot(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function gu(t){if(t.length>1&&De(t[0])&&De(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return gu(t[0]);throw new Error("coordinates must only contain numbers")}function ac(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function $o(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function Qr(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function se(t){return"Feature"===t.type?t.geometry:t}function En(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}Ie.default=Ie;var cg=Object.freeze({__proto__:null,getCoord:re,getCoords:ot,containsNumber:gu,geojsonType:ac,featureOf:$o,collectionOf:Qr,getGeom:se,getType:En}),uc=Object.getOwnPropertySymbols,hg=Object.prototype.hasOwnProperty,pg=Object.prototype.propertyIsEnumerable,du=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(i){return e[i]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(i){r[i]=i}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch{return!1}}()?Object.assign:function(t,e){for(var n,r,i=function fg(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))hg.call(n,s)&&(i[s]=n[s]);if(uc){r=uc(n);for(var a=0;a<r.length;a++)pg.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i},lc={successCallback:null,verbose:!1},na={};function gg(t,e,n){n=n||{};for(var r=Object.keys(lc),i=0;i<r.length;i++){var o=r[i],s=n[o];na[o]=s=s??lc[o]}na.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var u,l,h,a=(u=function(u,l){for(var h=u.length-1,c=u[0].length-1,p={rows:h,cols:c,cells:[]},g=0;g<h;++g){p.cells[g]=[];for(var d=0;d<c;++d){var m=0,f=u[g+1][d],_=u[g+1][d+1],I=u[g][d+1],y=u[g][d];if(!(isNaN(f)||isNaN(_)||isNaN(I)||isNaN(y))){m|=f>=l?8:0,m|=_>=l?4:0,m|=I>=l?2:0;var v,x,b,E,A=!1;if(5==(m|=y>=l?1:0)||10===m){var C=(f+_+I+y)/4;5===m&&C<l?(m=10,A=!0):10===m&&C<l&&(m=5,A=!0)}0!==m&&15!==m&&(v=x=b=E=.5,1===m?(b=1-ee(l,f,y),x=1-ee(l,I,y)):2===m?(x=ee(l,y,I),E=1-ee(l,_,I)):3===m?(b=1-ee(l,f,y),E=1-ee(l,_,I)):4===m?(v=ee(l,f,_),E=ee(l,I,_)):5===m?(v=ee(l,f,_),E=ee(l,I,_),x=1-ee(l,I,y),b=1-ee(l,f,y)):6===m?(x=ee(l,y,I),v=ee(l,f,_)):7===m?(b=1-ee(l,f,y),v=ee(l,f,_)):8===m?(b=ee(l,y,f),v=1-ee(l,_,f)):9===m?(x=1-ee(l,I,y),v=1-ee(l,_,f)):10===m?(v=1-ee(l,_,f),E=1-ee(l,_,I),x=ee(l,y,I),b=ee(l,y,f)):11===m?(v=1-ee(l,_,f),E=1-ee(l,_,I)):12===m?(b=ee(l,y,f),E=ee(l,I,_)):13===m?(x=1-ee(l,I,y),E=ee(l,I,_)):14===m?(b=ee(l,y,f),x=ee(l,y,I)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+m),p.cells[g][d]={cval:m,flipped:A,top:v,right:E,bottom:x,left:b})}}}return p}(t,e),l=[],h=0,u.cells.forEach(function(p,g){p.forEach(function(d,m){if(void 0!==d&&5!==(b=d).cval&&10!==b.cval&&!cc(d)){var f=function(E,A,C){var F,P,q=E.length,R=[],O=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],M=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],T=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],B=E[A][C],S=B.cval,J=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][S],j=yu(B,J);R.push([C+j[0],A+j[1]]),j=yu(B,J=T[S]),R.push([C+j[0],A+j[1]]),hc(B);for(var ct=C+O[S],Y=A+M[S],et=S;ct>=0&&Y>=0&&Y<q&&(ct!=C||Y!=A)&&void 0!==(B=E[Y][ct]);){if(0===(S=B.cval)||15===S)return{path:R,info:"mergeable"};J=T[S],F=O[S],P=M[S],5!==S&&10!==S||(5===S?B.flipped?-1===M[et]?(J="left",F=-1,P=0):(J="right",F=1,P=0):-1===O[et]&&(J="bottom",F=0,P=-1):10===S&&(B.flipped?-1===O[et]?(J="top",F=0,P=1):(J="bottom",F=0,P=-1):1===M[et]&&(J="left",F=-1,P=0))),j=yu(B,J),R.push([ct+j[0],Y+j[1]]),hc(B),ct+=F,Y+=P,et=S}return{path:R,info:"closed"}}(u.cells,g,m),_=!1;if("mergeable"===f.info)for(var I=f.path[f.path.length-1][0],y=f.path[f.path.length-1][1],v=h-1;v>=0;v--)if(Math.abs(l[v][0][0]-I)<=1e-7&&Math.abs(l[v][0][1]-y)<=1e-7){for(var x=f.path.length-2;x>=0;--x)l[v].unshift(f.path[x]);_=!0;break}_||(l[h++]=f.path)}var b})}),l);return"function"==typeof na.successCallback&&na.successCallback(a),a}function ee(t,e,n){return(t-e)/(n-e)}function cc(t){return 0===t.cval||15===t.cval}function hc(t){cc(t)||5===t.cval||10===t.cval||(t.cval=15)}function yu(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var pc=fc;function fc(t,e,n,r,i){gc(t,e,n||0,r||t.length-1,i||mg)}function gc(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);gc(t,e,Math.max(n,Math.floor(e-s*u/o+l)),Math.min(r,Math.floor(e+(o-s)*u/o+l)),i)}var h=t[e],c=n,p=r;for(ts(t,n,e),i(t[r],h)>0&&ts(t,n,r);c<p;){for(ts(t,c,p),c++,p--;i(t[c],h)<0;)c++;for(;i(t[p],h)>0;)p--}0===i(t[n],h)?ts(t,n,p):ts(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function ts(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function mg(t,e){return t<e?-1:t>e?1:0}pc.default=fc;var gn=es,vg=es;function es(t,e){if(!(this instanceof es))return new es(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function _g(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function co(t,e){ns(t,0,t.children.length,e,t)}function ns(t,e,n,r,i){i||(i=ho(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],rs(i,t.leaf?r(o):o);return i}function rs(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function dc(t,e){return t.minX-e.minX}function yc(t,e){return t.minY-e.minY}function mu(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ra(t){return t.maxX-t.minX+(t.maxY-t.minY)}function vu(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ia(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ho(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mc(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,pc(t,o,e,n,i),s.push(e,o,o,n))}function Ar(t){var e={exports:{}};return t(e,e.exports),e.exports}es.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!ia(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],ia(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):vu(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ia(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],ia(t,s=e.leaf?n(o):o)){if(e.leaf||vu(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ho([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=_g(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!vu(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:dc,compareMinY:yc,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return co(i=ho(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=ho([])).leaf=!1,i.height=r;var a,u,l,h,c=Math.ceil(o/s),p=c*Math.ceil(Math.sqrt(s));for(mc(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(mc(t,a,l=Math.min(a+p-1,n),c,this.compareMinY),u=a;u<=l;u+=c)h=Math.min(u+c-1,l),i.children.push(this._build(t,u,h,r-1));return co(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,h,c,p,g;r.push(e),!e.leaf&&r.length-1!==n;){for(h=c=1/0,i=0,o=e.children.length;i<o;i++)u=mu(s=e.children[i]),p=t,g=s,(l=(Math.max(g.maxX,p.maxX)-Math.min(g.minX,p.minX))*(Math.max(g.maxY,p.maxY)-Math.min(g.minY,p.minY))-u)<c?(c=l,h=u<h?u:h,a=s):l===c&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=n?t:(0,this.toBBox)(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),rs(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=ho(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,co(n,this.toBBox),co(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=ho([t,e]),this.data.height=t.height+1,this.data.leaf=!1,co(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,h,c,p,g,d,m,f;for(u=l=1/0,r=e;r<=n-e;r++)c=i=ns(t,0,r,this.toBBox),p=o=ns(t,r,n,this.toBBox),g=Math.max(c.minX,p.minX),d=Math.max(c.minY,p.minY),m=Math.min(c.maxX,p.maxX),f=Math.min(c.maxY,p.maxY),s=Math.max(0,m-g)*Math.max(0,f-d),a=mu(i)+mu(o),s<u?(u=s,h=r,l=a<l?a:l):s===u&&a<l&&(l=a,h=r);return h},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:dc,i=t.leaf?this.compareMinY:yc;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=ns(t,0,e,s),u=ns(t,n-e,n,s),l=ra(a)+ra(u);for(i=e;i<n-e;i++)o=t.children[i],rs(a,t.leaf?s(o):o),l+=ra(a);for(i=n-e-1;i>=e;i--)o=t.children[i],rs(u,t.leaf?s(o):o),l+=ra(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)rs(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():co(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},gn.default=vg;var oa=function(t,e,n){var r=t*e,i=vc*t,o=i-(i-t),s=t-o,a=vc*e,u=a-(a-e),l=e-u,h=s*l-(r-o*u-s*u-o*l);return n?(n[0]=h,n[1]=r,n):[h,r]},vc=+(Math.pow(2,27)+1),xg=function(t,e){var b,E,A,C,F,n=0|t.length,r=0|e.length;if(1===n&&1===r)return(F=(b=t[0])-((A=b+(E=e[0]))-(C=A-b))+(E-C))?[F,A]:[A];var i,o,s=new Array(n+r),a=0,u=0,l=0,h=Math.abs,c=t[u],p=h(c),g=e[l],d=h(g);p<d?(o=c,(u+=1)<n&&(p=h(c=t[u]))):(o=g,(l+=1)<r&&(d=h(g=e[l]))),u<n&&p<d||l>=r?(i=c,(u+=1)<n&&(p=h(c=t[u]))):(i=g,(l+=1)<r&&(d=h(g=e[l])));for(var m,f,_=i+o,I=_-i,y=o-I,v=y,x=_;u<n&&l<r;)p<d?(i=c,(u+=1)<n&&(p=h(c=t[u]))):(i=g,(l+=1)<r&&(d=h(g=e[l]))),(y=(o=v)-(I=(_=i+o)-i))&&(s[a++]=y),v=x-((m=x+_)-(f=m-x))+(_-f),x=m;for(;u<n;)(y=(o=v)-(I=(_=(i=c)+o)-i))&&(s[a++]=y),v=x-((m=x+_)-(f=m-x))+(_-f),x=m,(u+=1)<n&&(c=t[u]);for(;l<r;)(y=(o=v)-(I=(_=(i=g)+o)-i))&&(s[a++]=y),v=x-((m=x+_)-(f=m-x))+(_-f),x=m,(l+=1)<r&&(g=e[l]);return v&&(s[a++]=v),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},Eg=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},bg=function(t,e){var n=t.length;if(1===n){var r=oa(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;oa(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){oa(t[u],e,s),Eg(o[1],s[0],o),o[0]&&(i[a++]=o[0]);var h=s[1],c=o[1],p=h+c,g=c-(p-h);o[1]=p,g&&(i[a++]=g)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},wg=function(t,e){var b,E,A,C,F,n=0|t.length,r=0|e.length;if(1===n&&1===r)return(F=(b=t[0])-((A=b+(E=-e[0]))-(C=A-b))+(E-C))?[F,A]:[A];var i,o,s=new Array(n+r),a=0,u=0,l=0,h=Math.abs,c=t[u],p=h(c),g=-e[l],d=h(g);p<d?(o=c,(u+=1)<n&&(p=h(c=t[u]))):(o=g,(l+=1)<r&&(d=h(g=-e[l]))),u<n&&p<d||l>=r?(i=c,(u+=1)<n&&(p=h(c=t[u]))):(i=g,(l+=1)<r&&(d=h(g=-e[l])));for(var m,f,_=i+o,I=_-i,y=o-I,v=y,x=_;u<n&&l<r;)p<d?(i=c,(u+=1)<n&&(p=h(c=t[u]))):(i=g,(l+=1)<r&&(d=h(g=-e[l]))),(y=(o=v)-(I=(_=i+o)-i))&&(s[a++]=y),v=x-((m=x+_)-(f=m-x))+(_-f),x=m;for(;u<n;)(y=(o=v)-(I=(_=(i=c)+o)-i))&&(s[a++]=y),v=x-((m=x+_)-(f=m-x))+(_-f),x=m,(u+=1)<n&&(c=t[u]);for(;l<r;)(y=(o=v)-(I=(_=(i=g)+o)-i))&&(s[a++]=y),v=x-((m=x+_)-(f=m-x))+(_-f),x=m,(l+=1)<r&&(g=-e[l]);return v&&(s[a++]=v),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},_c=Ar(function(t){function e(l,h){for(var c=new Array(l.length-1),p=1;p<l.length;++p)for(var g=c[p-1]=new Array(l.length-1),d=0,m=0;d<l.length;++d)d!==h&&(g[m++]=l[p][d]);return c}function n(l){if(1===l.length)return l[0];if(2===l.length)return["sum(",l[0],",",l[1],")"].join("");var h=l.length>>1;return["sum(",n(l.slice(0,h)),",",n(l.slice(h)),")"].join("")}function r(l){if(2===l.length)return[["sum(prod(",l[0][0],",",l[1][1],"),prod(-",l[0][1],",",l[1][0],"))"].join("")];for(var h=[],c=0;c<l.length;++c)h.push(["scale(",n(r(e(l,c))),",",(p=c,1&p?"-":""),l[0][c],")"].join(""));return h;var p}function i(l){for(var h=[],c=[],p=function(y){for(var v=new Array(y),x=0;x<y;++x){v[x]=new Array(y);for(var b=0;b<y;++b)v[x][b]=["m",b,"[",y-x-1,"]"].join("")}return v}(l),g=[],d=0;d<l;++d)1&d?c.push.apply(c,r(e(p,d))):h.push.apply(h,r(e(p,d))),g.push("m"+d);var m=n(h),f=n(c),_="orientation"+l+"Exact",I=["function ",_,"(",g.join(),"){var p=",m,",n=",f,",d=sub(p,n);return d[d.length-1];};return ",_].join("");return new Function("sum","prod","scale","sub",I)(xg,oa,bg,wg)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(l,h){return h[0]-l[0]},function(l,h,c){var p,g=(l[1]-c[1])*(h[0]-c[0]),d=(l[0]-c[0])*(h[1]-c[1]),m=g-d;if(g>0){if(d<=0)return m;p=g+d}else{if(!(g<0)||d>=0)return m;p=-(g+d)}var f=33306690738754716e-32*p;return m>=f||m<=-f?m:o(l,h,c)},function(l,h,c,p){var g=l[0]-p[0],d=h[0]-p[0],m=c[0]-p[0],f=l[1]-p[1],_=h[1]-p[1],I=c[1]-p[1],y=l[2]-p[2],v=h[2]-p[2],x=c[2]-p[2],b=d*I,E=m*_,A=m*f,C=g*I,F=g*_,P=d*f,q=y*(b-E)+v*(A-C)+x*(F-P),R=7771561172376103e-31*((Math.abs(b)+Math.abs(E))*Math.abs(y)+(Math.abs(A)+Math.abs(C))*Math.abs(v)+(Math.abs(F)+Math.abs(P))*Math.abs(x));return q>R||-q>R?q:s(l,h,c,p)}];function u(l){var h=a[l.length];return h||(h=a[l.length]=i(l.length)),h.apply(void 0,l)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var l=[],h=["slow"],c=0;c<=5;++c)l.push("a"+c),h.push("o"+c);var p=["function getOrientation(",l.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(c=2;c<=5;++c)p.push("case ",c,":return o",c,"(",l.slice(0,c).join(),");");p.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),h.push(p.join(""));var g=Function.apply(void 0,h);for(t.exports=g.apply(void 0,[u].concat(a)),c=0;c<=5;++c)t.exports[c]=a[c]}()}),xc=_c[3],Ec=is,Sg=is;function is(t,e){if(!(this instanceof is))return new is(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Cg,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Cg(t,e){return t<e?-1:t>e?1:0}is.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Ec.default=Sg;var Ng=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],h=e[s][1];u>r!=h>r&&n<(e[s][0]-a)*(r-u)/(h-u)+a&&(i=!i)}return i},sa=_c[3],bc=wc;function wc(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(I){for(var y=I[0],v=I[0],x=I[0],b=I[0],E=0;E<I.length;E++){var A=I[E];A[0]<y[0]&&(y=A),A[0]>x[0]&&(x=A),A[1]<v[1]&&(v=A),A[1]>b[1]&&(b=A)}var C=[y,v,x,b],F=C.slice();for(E=0;E<I.length;E++)Ng(I[E],C)||F.push(I[E]);var P=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(g,d){return t[g][0]-t[d][0]||t[g][1]-t[d][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],l=o.length;l>1&&xc(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&xc(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var h=0,c=(r=0,o.length);r<c;++r)n[h++]=o[r];for(var p=s.length-2;p>0;--p)n[h++]=s[p];return n}(F),q=[];for(E=0;E<P.length;E++)q.push(F[P[E]]);return q}(t),o=gn(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=Cc(u,r),s.push(r)}var l=gn(16);for(a=0;a<s.length;a++)l.insert(_u(s[a]));for(var h=e*e,c=n*n;s.length;){var p=s.shift(),g=p.p,d=p.next.p,m=xu(g,d);if(!(m<c)){var f=m/h;(u=Mg(o,p.prev.p,g,d,p.next.next.p,f,l))&&Math.min(xu(u,g),xu(u,d))<=f&&(s.push(p),s.push(Cc(u,p)),o.remove(u),l.remove(p),l.insert(_u(p)),l.insert(_u(p.next)))}}p=r;var _=[];do{_.push(p.p),p=p.next}while(p!==r);return _.push(p.p),_}function Mg(t,e,n,r,i,o,s){for(var a=new Ec(null,Lg),u=t.data;u;){for(var l=0;l<u.children.length;l++){var h=u.children[l],c=u.leaf?Eu(h,n,r):Og(n,r,h);c>o||a.push({node:h,dist:c})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),g=p.node,d=Eu(g,e,n),m=Eu(g,r,i);if(p.dist<d&&p.dist<m&&Sc(n,g,s)&&Sc(r,g,s))return g}(u=a.pop())&&(u=u.node)}return null}function Lg(t,e){return t.dist-e.dist}function Og(t,e,n){if(Ic(t,n)||Ic(e,n))return 0;var r=aa(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=aa(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=aa(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=aa(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function Ic(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Sc(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),h=Math.max(t[1],e[1]),c=n.search({minX:a,minY:u,maxX:l,maxY:h}),p=0;p<c.length;p++)if(i=c[p].next.p,o=t,(r=c[p].p)!==(s=e)&&i!==o&&sa(r,i,o)>0!=sa(r,i,s)>0&&sa(o,s,r)>0!=sa(o,s,i)>0)return!1;return!0}function _u(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Cc(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function xu(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Eu(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function aa(t,e,n,r,i,o,s,a){var u,l,h,c,p=n-t,g=r-e,d=s-i,m=a-o,f=t-i,_=e-o,I=p*p+g*g,y=p*d+g*m,v=d*d+m*m,x=p*f+g*_,b=d*f+m*_,E=I*v-y*y,A=E,C=E;0===E?(l=0,A=1,c=b,C=v):(c=I*b-y*x,(l=y*b-v*x)<0?(l=0,c=b,C=v):l>A&&(l=A,c=b+y,C=v)),c<0?(c=0,-x<0?l=0:-x>I?l=A:(l=-x,A=I)):c>C&&(c=C,-x+y<0?l=0:-x+y>I?l=A:(l=-x+y,A=I));var F=(1-(h=0===c?0:c/C))*i+h*s-((1-(u=0===l?0:l/A))*t+u*n),P=(1-h)*o+h*a-((1-u)*e+u*r);return F*F+P*P}function Nc(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(_e(t,function(i){n.push([i[0],i[1]])}),!n.length)return null;var r=bc(n,e.concavity);return r.length>3?dt([r]):null}function ae(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var p,g,r=re(t),i=se(e),s=e.bbox,a=i.coordinates;if(s&&0==((g=s)[0]<=(p=r)[0]&&g[1]<=p[1]&&g[2]>=p[0]&&g[3]>=p[1]))return!1;"Polygon"===i.type&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(Pc(r,a[l][0],n.ignoreBoundary)){for(var h=!1,c=1;c<a[l].length&&!h;)Pc(r,a[l][c],!n.ignoreBoundary)&&(h=!0),c++;h||(u=!0)}return u}function Pc(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(r=!r)}return r}function bu(t,e){var n=[];return Wt(t,function(r){var i=!1;if("Point"===r.geometry.type)Rn(e,function(s){ae(r,s)&&(i=!0)}),i&&n.push(r);else{if("MultiPoint"!==r.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var o=[];Rn(e,function(s){_e(r,function(a){ae(a,s)&&(i=!0,o.push(a))})}),i&&n.push(Qo(o))}}),rt(n)}function Qt(t,e,n){void 0===n&&(n={});var r=re(t),i=re(e),o=Ae(i[1]-r[1]),s=Ae(i[0]-r[0]),a=Ae(r[1]),u=Ae(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return uo(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function Mc(t,e){var n=!1;return rt(function(r){if(r.length<3)return[];r.sort(Rg);for(var i,o,s,h=r.length-1,c=r[h].x,p=r[0].x,g=r[h].y,d=g;h--;)r[h].y<g&&(g=r[h].y),r[h].y>d&&(d=r[h].y);var f,_=p-c,I=d-g,y=_>I?_:I,v=.5*(p+c),x=.5*(d+g),b=[new Lc({__sentinel:!0,x:v-20*y,y:x-y},{__sentinel:!0,x:v,y:x+20*y},{__sentinel:!0,x:v+20*y,y:x-y})],E=[],A=[];for(h=r.length;h--;){for(A.length=0,f=b.length;f--;)(_=r[h].x-b[f].x)>0&&_*_>b[f].r?(E.push(b[f]),b.splice(f,1)):_*_+(I=r[h].y-b[f].y)*I>b[f].r||(A.push(b[f].a,b[f].b,b[f].b,b[f].c,b[f].c,b[f].a),b.splice(f,1));for(Tg(A),f=A.length;f;)o=A[--f],i=A[--f],s=r[h],Math.abs(2*((o.x-i.x)*(s.y-o.y)-(o.y-i.y)*(s.x-o.x)))>1e-12&&b.push(new Lc(i,o,s))}for(Array.prototype.push.apply(E,b),h=E.length;h--;)(E[h].a.__sentinel||E[h].b.__sentinel||E[h].c.__sentinel)&&E.splice(h,1);return E}(t.features.map(function(r){var i={x:r.geometry.coordinates[0],y:r.geometry.coordinates[1]};return e?i.z=r.properties[e]:3===r.geometry.coordinates.length&&(n=!0,i.z=r.geometry.coordinates[2]),i})).map(function(r){var i=[r.a.x,r.a.y],o=[r.b.x,r.b.y],s=[r.c.x,r.c.y],a={};return n?(i.push(r.a.z),o.push(r.b.z),s.push(r.c.z)):a={a:r.a.z,b:r.b.z,c:r.c.z},dt([[i,o,s,i]],a)}))}bc.default=wc;var Lc=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),h=a*(t.x+n.x)+u*(t.y+n.y),c=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*l-s*h)/c,this.y=(o*h-a*l)/c,this.r=(r=this.x-t.x)*r+(i=this.y-t.y)*i};function Rg(t,e){return e.x-t.x}function Tg(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function Je(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Oc(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:n[r]=e[r]}}),n.features=e.features.map(function(r){return Oc(r)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return wu(t);default:throw new Error("unknown GeoJSON type")}var e,n}function Oc(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=Rc(t.properties),e.geometry=wu(t.geometry),e}function Rc(t){var e={};return t&&Object.keys(t).forEach(function(n){var r=t[n];e[n]="object"==typeof r?null===r?null:Array.isArray(r)?r.map(function(i){return i}):Rc(r):r}),e}function wu(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(n){return wu(n)}),e):(e.coordinates=Tc(t.coordinates),e)}function Tc(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map(function(n){return Tc(n)})}function ua(t){return t[0].toString()+","+t[1].toString()}function Dg(t){return t}function Ac(t,e){var n=function(l){if(null==l)return Dg;var h,c,p=l.scale[0],g=l.scale[1],d=l.translate[0],m=l.translate[1];return function(f,_){_||(h=c=0);var I=2,y=f.length,v=new Array(y);for(v[0]=(h+=f[0])*p+d,v[1]=(c+=f[1])*g+m;I<y;)v[I]=f[I],++I;return v}}(t.transform),r=t.arcs;function i(l,h){h.length&&h.pop();for(var c=r[l<0?~l:l],p=0,g=c.length;p<g;++p)h.push(n(c[p],p));l<0&&function(d,m){for(var f,_=d.length,I=_-m;I<--_;)f=d[I],d[I++]=d[_],d[_]=f}(h,g)}function o(l){return n(l)}function s(l){for(var h=[],c=0,p=l.length;c<p;++c)i(l[c],h);return h.length<2&&h.push(h[0]),h}function a(l){for(var h=s(l);h.length<4;)h.push(h[0]);return h}function u(l){return l.map(a)}return function l(h){var c,p=h.type;switch(p){case"GeometryCollection":return{type:p,geometries:h.geometries.map(l)};case"Point":c=o(h.coordinates);break;case"MultiPoint":c=h.coordinates.map(o);break;case"LineString":c=s(h.arcs);break;case"MultiLineString":c=h.arcs.map(s);break;case"Polygon":c=u(h.arcs);break;case"MultiPolygon":c=h.arcs.map(u);break;default:return null}return{type:p,coordinates:c}}(e)}function kg(t,e){var n={},r=[],i=[];function o(a){a.forEach(function(u){u.forEach(function(l){(n[l=l<0?~l:l]||(n[l]=[])).push(a)})}),r.push(a)}function s(a){return function(u){for(var l,h=-1,c=u.length,p=u[c-1],g=0;++h<c;)g+=(l=p)[0]*(p=u[h])[1]-l[1]*p[0];return Math.abs(g)}(Ac(t,{type:"Polygon",arcs:[a]}).coordinates[0])}return e.forEach(function a(u){switch(u.type){case"GeometryCollection":u.geometries.forEach(a);break;case"Polygon":o(u.arcs);break;case"MultiPolygon":u.arcs.forEach(o)}}),r.forEach(function(a){if(!a._){var u=[],l=[a];for(a._=1,i.push(u);a=l.pop();)u.push(a),a.forEach(function(h){h.forEach(function(c){n[c<0?~c:c].forEach(function(p){p._||(p._=1,l.push(p))})})})}}),r.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:i.map(function(a){var u,l=[];if(a.forEach(function(d){d.forEach(function(m){m.forEach(function(f){n[f<0?~f:f].length<2&&l.push(f)})})}),(u=(l=function Fg(t,e){var n={},r={},i={},o=[],s=-1;function a(u,l){for(var h in u){var c=u[h];delete l[c.start],delete c.start,delete c.end,c.forEach(function(p){n[p<0?~p:p]=1}),o.push(c)}}return e.forEach(function(u,l){var h,c=t.arcs[u<0?~u:u];c.length<3&&!c[1][0]&&!c[1][1]&&(h=e[++s],e[s]=u,e[l]=h)}),e.forEach(function(u){var l,h,f,_,I,y,c=(y=(I=t.arcs[(f=u)<0?~f:f])[0],t.transform?(_=[0,0],I.forEach(function(v){_[0]+=v[0],_[1]+=v[1]})):_=I[I.length-1],f<0?[_,y]:[y,_]),p=c[0],g=c[1];if(l=i[p])if(delete i[l.end],l.push(u),l.end=g,h=r[g]){delete r[h.start];var d=h===l?l:l.concat(h);r[d.start=l.start]=i[d.end=h.end]=d}else r[l.start]=i[l.end]=l;else if(l=r[g])if(delete r[l.start],l.unshift(u),l.start=p,h=i[p]){delete i[h.end];var m=h===l?l:h.concat(l);r[m.start=h.start]=i[m.end=l.end]=m}else r[l.start]=i[l.end]=l;else r[(l=[u]).start=p]=i[l.end=g]=l}),a(i,r),a(r,i),e.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}(t,l)).length)>1)for(var h,c,p=1,g=s(l[0]);p<u;++p)(h=s(l[p]))>g&&(c=l[0],l[0]=l[p],l[p]=c,g=h);return l}).filter(function(a){return a.length>0})}}var la=Object.prototype.hasOwnProperty;function Iu(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;return{set:function h(d,m){for(var f=e(d)&u,_=s[f],I=0;_!=i;){if(n(_,d))return a[f]=m;if(++I>=t)throw new Error("full hashmap");_=s[f=f+1&u]}return s[f]=d,a[f]=m,m},maybeSet:function c(d,m){for(var f=e(d)&u,_=s[f],I=0;_!=i;){if(n(_,d))return a[f];if(++I>=t)throw new Error("full hashmap");_=s[f=f+1&u]}return s[f]=d,a[f]=m,m},get:function p(d,m){for(var f=e(d)&u,_=s[f],I=0;_!=i;){if(n(_,d))return a[f];if(++I>=t)break;_=s[f=f+1&u]}return m},keys:function g(){for(var d=[],m=0,f=s.length;m<f;++m){var _=s[m];_!=i&&d.push(_)}return d}}}function qi(t,e){return t[0]===e[0]&&t[1]===e[1]}var Dc=new ArrayBuffer(16),Fc=new Float64Array(Dc),ca=new Uint32Array(Dc);function Su(t){Fc[0]=t[0],Fc[1]=t[1];var e=ca[0]^ca[1];return 2147483647&(e<<5^e>>7^ca[2]^ca[3])}function qg(t,e,n,r){Cu(t,e,n),Cu(t,e,e+r),Cu(t,e+r,n)}function Cu(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function zg(t){var e={type:"GeometryCollection",geometries:t.features.map(kc)};return null!=t.bbox&&(e.bbox=t.bbox),e}function kc(t){var e,n=Nu(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Nu(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Nu)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ug(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Vg(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Xg(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==En(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Je(t));var n=[];Ve(t,function(i){n.push(i.geometry)});var r=function jg(t,e){var n=function(p){var g=1/0,d=1/0,m=-1/0,f=-1/0;function _(E){null!=E&&la.call(I,E.type)&&I[E.type](E)}var I={GeometryCollection:function(E){E.geometries.forEach(_)},Point:function(E){y(E.coordinates)},MultiPoint:function(E){E.coordinates.forEach(y)},LineString:function(E){v(E.arcs)},MultiLineString:function(E){E.arcs.forEach(v)},Polygon:function(E){E.arcs.forEach(v)},MultiPolygon:function(E){E.arcs.forEach(x)}};function y(E){var A=E[0],C=E[1];A<g&&(g=A),A>m&&(m=A),C<d&&(d=C),C>f&&(f=C)}function v(E){E.forEach(y)}function x(E){E.forEach(v)}for(var b in p)_(p[b]);return m>=g&&f>=d?[g,d,m,f]:void 0}(t=function Bg(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?zg:"Feature"===n.type?kc:Nu)(n);return r}(t)),r=e>0&&n&&function(p,g,d){var m=g[0],f=g[1],_=g[2],I=g[3],y=_-m?(d-1)/(_-m):1,v=I-f?(d-1)/(I-f):1;function x(R){return[Math.round((R[0]-m)*y),Math.round((R[1]-f)*v)]}function b(R,O){for(var M,k,T,B,S,J=-1,j=0,ct=R.length,Y=new Array(ct);++J<ct;)M=R[J],B=Math.round((M[0]-m)*y),S=Math.round((M[1]-f)*v),B===k&&S===T||(Y[j++]=[k=B,T=S]);for(Y.length=j;j<O;)j=Y.push([Y[0][0],Y[0][1]]);return Y}function E(R){return b(R,2)}function A(R){return b(R,4)}function C(R){return R.map(A)}function F(R){null!=R&&la.call(P,R.type)&&P[R.type](R)}var P={GeometryCollection:function(R){R.geometries.forEach(F)},Point:function(R){R.coordinates=x(R.coordinates)},MultiPoint:function(R){R.coordinates=R.coordinates.map(x)},LineString:function(R){R.arcs=E(R.arcs)},MultiLineString:function(R){R.arcs=R.arcs.map(E)},Polygon:function(R){R.arcs=C(R.arcs)},MultiPolygon:function(R){R.arcs=R.arcs.map(C)}};for(var q in p)F(p[q]);return{scale:[1/y,1/v],translate:[m,f]}}(t,n,e),i=function(p){var g,d,m,f,_=p.coordinates,I=p.lines,y=p.rings,v=I.length+y.length;for(delete p.lines,delete p.rings,m=0,f=I.length;m<f;++m)for(g=I[m];g=g.next;)++v;for(m=0,f=y.length;m<f;++m)for(d=y[m];d=d.next;)++v;var x=Iu(2*v*1.4,Su,qi),b=p.arcs=[];for(m=0,f=I.length;m<f;++m){g=I[m];do{E(g)}while(g=g.next)}for(m=0,f=y.length;m<f;++m)if((d=y[m]).next)do{E(d)}while(d=d.next);else A(d);function E(O){var M,k,T,B,S,J,j,ct;if(T=x.get(M=_[O[0]]))for(j=0,ct=T.length;j<ct;++j)if(C(B=T[j],O))return O[0]=B[0],void(O[1]=B[1]);if(S=x.get(k=_[O[1]]))for(j=0,ct=S.length;j<ct;++j)if(F(J=S[j],O))return O[1]=J[0],void(O[0]=J[1]);T?T.push(O):x.set(M,[O]),S?S.push(O):x.set(k,[O]),b.push(O)}function A(O){var M,k,T,B,S;if(k=x.get(_[O[0]]))for(B=0,S=k.length;B<S;++B){if(P(T=k[B],O))return O[0]=T[0],void(O[1]=T[1]);if(q(T,O))return O[0]=T[1],void(O[1]=T[0])}if(k=x.get(M=_[O[0]+R(O)]))for(B=0,S=k.length;B<S;++B){if(P(T=k[B],O))return O[0]=T[0],void(O[1]=T[1]);if(q(T,O))return O[0]=T[1],void(O[1]=T[0])}k?k.push(O):x.set(M,[O]),b.push(O)}function C(O,M){var k=O[0],T=M[0],B=O[1];if(k-B!=T-M[1])return!1;for(;k<=B;++k,++T)if(!qi(_[k],_[T]))return!1;return!0}function F(O,M){var k=O[0],B=O[1],S=M[1];if(k-B!=M[0]-S)return!1;for(;k<=B;++k,--S)if(!qi(_[k],_[S]))return!1;return!0}function P(O,M){var k=O[0],T=M[0],B=O[1]-k;if(B!==M[1]-T)return!1;for(var S=R(O),J=R(M),j=0;j<B;++j)if(!qi(_[k+(j+S)%B],_[T+(j+J)%B]))return!1;return!0}function q(O,M){var k=O[0],S=M[1],J=O[1]-k;if(J!==S-M[0])return!1;for(var j=R(O),ct=J-R(M),Y=0;Y<J;++Y)if(!qi(_[k+(Y+j)%J],_[S-(Y+ct)%J]))return!1;return!0}function R(O){for(var M=O[0],k=O[1],T=M,B=T,S=_[T];++T<k;){var J=_[T];(J[0]<S[0]||J[0]===S[0]&&J[1]<S[1])&&(B=T,S=J)}return B-M}return p}(function(p){var g,d,m,f=function Gg(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var C=Iu(1.4*o.length,x,b,Int32Array,-1,Int32Array),F=new Int32Array(o.length),P=0,q=o.length;P<q;++P)F[P]=C.maybeSet(P,P);return F}(),l=new Int32Array(o.length),h=new Int32Array(o.length),c=new Int32Array(o.length),p=new Int8Array(o.length),g=0;for(e=0,n=o.length;e<n;++e)l[e]=h[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],m=d[0],f=d[1];for(r=u[m],i=u[++m],++g,p[r]=1;++m<=f;)v(e,r,r=i,i=u[m]);++g,p[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var _=a[e],I=_[0]+1,y=_[1];for(v(e,u[y-1],r=u[I-1],i=u[I]);++I<=y;)v(e,r,r=i,i=u[I])}function v(C,F,P,q){if(l[P]!==C){l[P]=C;var R=h[P];if(R>=0){var O=c[P];R===F&&O===q||R===q&&O===F||(++g,p[P]=1)}else h[P]=F,c[P]=q}}function x(C){return Su(o[C])}function b(C,F){return qi(o[C],o[F])}l=h=c=null;var E,A=function(C,F,P,q,R){3===arguments.length&&(q=Array,R=null);for(var O=new q(C=1<<Math.max(4,Math.ceil(Math.log(C)/Math.LN2))),M=C-1,k=0;k<C;++k)O[k]=R;return{add:function T(J){for(var j=F(J)&M,ct=O[j],Y=0;ct!=R;){if(P(ct,J))return!0;if(++Y>=C)throw new Error("full hashset");ct=O[j=j+1&M]}return O[j]=J,!0},has:function B(J){for(var j=F(J)&M,ct=O[j],Y=0;ct!=R;){if(P(ct,J))return!0;if(++Y>=C)break;ct=O[j=j+1&M]}return!1},values:function S(){for(var J=[],j=0,ct=O.length;j<ct;++j){var Y=O[j];Y!=R&&J.push(Y)}return J}}}(1.4*g,Su,qi);for(e=0,n=o.length;e<n;++e)p[E=u[e]]&&A.add(o[E]);return A}(p),_=p.coordinates,I=p.lines,y=p.rings;for(d=0,m=I.length;d<m;++d)for(var v=I[d],x=v[0],b=v[1];++x<b;)f.has(_[x])&&(g={0:x,1:v[1]},v[1]=x,v=v.next=g);for(d=0,m=y.length;d<m;++d)for(var E=y[d],A=E[0],C=A,F=E[1],P=f.has(_[A]);++C<F;)f.has(_[C])&&(P?(g={0:C,1:E[1]},E[1]=C,E=E.next=g):(qg(_,A,F,F-C),_[F]=_[A],P=!0,C=A));return p}(function(p){var g=-1,d=[],m=[],f=[];function _(E){E&&la.call(I,E.type)&&I[E.type](E)}var I={GeometryCollection:function(E){E.geometries.forEach(_)},LineString:function(E){E.arcs=y(E.arcs)},MultiLineString:function(E){E.arcs=E.arcs.map(y)},Polygon:function(E){E.arcs=E.arcs.map(v)},MultiPolygon:function(E){E.arcs=E.arcs.map(x)}};function y(E){for(var A=0,C=E.length;A<C;++A)f[++g]=E[A];var F={0:g-C+1,1:g};return d.push(F),F}function v(E){for(var A=0,C=E.length;A<C;++A)f[++g]=E[A];var F={0:g-C+1,1:g};return m.push(F),F}function x(E){return E.map(v)}for(var b in p)_(p[b]);return{type:"Topology",coordinates:f,lines:d,rings:m,objects:p}}(t))),o=i.coordinates,s=Iu(1.4*i.arcs.length,Ug,Vg);function a(p){p&&la.call(u,p.type)&&u[p.type](p)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map(function(p,g){return s.set(p,g),o.slice(p[0],p[1]+1)}),delete i.coordinates,o=null;var u={GeometryCollection:function(p){p.geometries.forEach(a)},LineString:function(p){p.arcs=l(p.arcs)},MultiLineString:function(p){p.arcs=p.arcs.map(l)},Polygon:function(p){p.arcs=p.arcs.map(l)},MultiPolygon:function(p){p.arcs=p.arcs.map(h)}};function l(p){var g=[];do{var d=s.get(p);g.push(p[0]<p[1]?d:~d)}while(p=p.next);return g}function h(p){return p.map(l)}for(var c in t)a(t[c]);return r&&(i.transform=r,i.arcs=function(p){for(var g=-1,d=p.length;++g<d;){for(var m,f,_=p[g],I=0,y=1,v=_.length,x=_[0],b=x[0],E=x[1];++I<v;)m=(x=_[I])[0],f=x[1],m===b&&f===E||(_[y++]=[m-b,f-E],b=m,E=f);1===y&&(_[y++]=[0,0]),_.length=y}return p}(i.arcs)),i}({geoms:su(n).geometry});return function(i){return Ac(i,kg.apply(this,arguments))}(r,r.objects.geoms.geometries)}function Bi(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=En(t),i=[];switch(r){case"LineString":i=Pu(t);break;case"MultiLineString":case"Polygon":ot(t).forEach(function(s){i.push(Pu(s))});break;case"MultiPolygon":ot(t).forEach(function(s){var a=[];s.forEach(function(u){a.push(Pu(u))}),i.push(a)});break;case"Point":return t;case"MultiPoint":var o={};ot(t).forEach(function(s){var a=s.join("-");Object.prototype.hasOwnProperty.call(o,a)||(i.push(s),o[a]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):Le({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function Pu(t){var e=ot(t);if(2===e.length&&!Gc(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(i=n.length)>2&&qc(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,Gc(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return qc(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function Gc(t,e){return t[0]===e[0]&&t[1]===e[1]}function qc(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,h=u-s;return(r-o)*h-(i-s)*l==0&&(Math.abs(l)>=Math.abs(h)?l>0?o<=r&&r<=a:a<=r&&r<=o:h>0?s<=i&&i<=u:u<=i&&i<=s)}function Hg(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function Mu(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=Hg(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&Mu(t,e,o,r,i),i.push(t[o]),n-o>1&&Mu(t,o,n,r,i))}function Wg(t,e){var n=t.length-1,r=[t[0]];return Mu(t,0,n,e,r),r.push(t[n]),r}function Lu(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return Wg(t=n?t:function(i,o){for(var s,a,u,l,h,c=i[0],p=[c],g=1,d=i.length;g<d;g++)(l=(a=s=i[g]).x-(u=c).x)*l+(h=a.y-u.y)*h>o&&(p.push(s),c=s);return c!==s&&p.push(s),p}(t,r),r)}function Bc(t,e,n){return Lu(t.map(function(r){return{x:r[0],y:r[1],z:r[2]}}),e,n).map(function(r){return r.z?[r.x,r.y,r.z]:[r.x,r.y]})}function zc(t,e,n){return t.map(function(r){var i=r.map(function(s){return{x:s[0],y:s[1]}});if(i.length<4)throw new Error("invalid polygon");for(var o=Lu(i,e,n).map(function(s){return[s.x,s.y]});!Jg(o);)o=Lu(i,e-=.01*e,n).map(function(s){return[s.x,s.y]});return o[o.length-1][0]===o[0][0]&&o[o.length-1][1]===o[0][1]||o.push(o[0]),o})}function Jg(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var Zg=function(){function t(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(n=0;n<this.length-1;n++){var r=this.points[n],i=this.points[n+1];this.centers.push({x:(r.x+i.x)/2,y:(r.y+i.y)/2,z:(r.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),n=0;n<this.centers.length-1;n++){var o=this.points[n+1].x-(this.centers[n].x+this.centers[n+1].x)/2,s=this.points[n+1].y-(this.centers[n].y+this.centers[n+1].y)/2,a=this.points[n+1].z-(this.centers[n].y+this.centers[n+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n].x+o),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n].y+s),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n].z+a)},{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n+1].x+o),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n+1].y+s),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(e){var n=[],r=this.pos(0);n.push(0);for(var i=0;i<this.duration;i+=10){var o=this.pos(i);Math.sqrt((o.x-r.x)*(o.x-r.x)+(o.y-r.y)*(o.y-r.y)+(o.z-r.z)*(o.z-r.z))>e&&(n.push(i),r=o)}return n},t.prototype.vector=function(e){var n=this.pos(e+10),r=this.pos(e-10);return{angle:180*Math.atan2(n.y-r.y,n.x-r.x)/3.14,speed:Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))}},t.prototype.pos=function(e){var n=e-this.delay;n<0&&(n=0),n>this.duration&&(n=this.duration-1);var r=n/this.duration;if(r>=1)return this.points[this.length-1];var s,a,u,l,c,p,h,i=Math.floor((this.points.length-1)*r);return h=[(p=(c=(this.length-1)*r-i)*c)*c,3*p*(1-c),3*c*(1-c)*(1-c),(1-c)*(1-c)*(1-c)],{x:(l=this.points[i+1]).x*h[0]+(u=this.controls[i+1][0]).x*h[1]+(a=this.controls[i][1]).x*h[2]+(s=this.points[i]).x*h[3],y:l.y*h[0]+u.y*h[1]+a.y*h[2]+s.y*h[3],z:l.z*h[0]+u.z*h[1]+a.z*h[2]+s.z*h[3]}},t}();function jc(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=se(t).coordinates.map(function(l){return{x:l[0],y:l[1]}}),s=new Zg({duration:n,points:o,sharpness:r}),a=function(l){var h=s.pos(l);Math.floor(l/100)%2==0&&i.push([h.x,h.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),Zt(i,e.properties)}function Ou(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return dt([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function Uc(t){return Ou(Ie(t))}function Vc(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(Qt(t.slice(0,2),[r,n])>=Qt(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function Dr(t,e,n,r){void 0===r&&(r={});var i=re(t),o=Ae(i[0]),s=Ae(i[1]),a=Ae(n),u=Fi(e,r.units),l=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a));return ft([yi(o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(l))),yi(l)],r.properties)}function Ru(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(Dr(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),dt([o],i)}function $r(t,e,n){if(void 0===n&&(n={}),!0===n.final)return($r(e,t)+180)%360;var r=re(t),i=re(e),o=Ae(r[0]),s=Ae(i[0]),a=Ae(r[1]),u=Ae(i[1]),l=Math.sin(s-o)*Math.cos(u),h=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return yi(Math.atan2(l,h))}function ha(t,e){void 0===e&&(e={});var n=Ie(t);return ft([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function mi(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return _e(t,function(o){n+=o[0],r+=o[1],i++},!0),ft([n/i,r/i],e.properties)}function pa(t){var e=[];return"FeatureCollection"===t.type?Wt(t,function(n){_e(n,function(r){e.push(ft(r,n.properties))})}):_e(t,function(n){e.push(ft(n,t.properties))}),rt(e)}var Xc=fa,Kg=fa;function fa(t,e,n){n=n||2;var r,i,o,s,a,u,l,h=e&&e.length,c=h?e[0]*n:t.length,p=Yc(t,0,c,n,!0),g=[];if(!p)return g;if(h&&(p=function(m,f,_,I){var y,v,x,b=[];for(y=0,v=f.length;y<v;y++)(x=Yc(m,f[y]*I,y<v-1?f[y+1]*I:m.length,I,!1))===x.next&&(x.steiner=!0),b.push(id(x));for(b.sort(nd),y=0;y<b.length;y++)rd(b[y],_),_=os(_,_.next);return _}(t,e,p,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<c;d+=n)(a=t[d])<r&&(r=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-r,s-i))?1/l:0}return ss(p,g,n,r,i,l),g}function Yc(t,e,n,r,i){var o,s;if(i===Du(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Jc(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Jc(o,t[o],t[o+1],s);return s&&zi(s,s.next)&&(us(s),s=s.next),s}function os(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!zi(r,r.next)&&0!==an(r.prev,r,r.next))r=r.next;else{if(us(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function ss(t,e,n,r,i,o,s){if(t){!s&&o&&function(h,c,p,g){var d=h;do{null===d.z&&(d.z=Tu(d.x,d.y,c,p,g)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next}while(d!==h);d.prevZ.nextZ=null,d.prevZ=null,function(m){var f,_,I,y,v,x,b,E,A=1;do{for(_=m,m=null,v=null,x=0;_;){for(x++,I=_,b=0,f=0;f<A&&(b++,I=I.nextZ);f++);for(E=A;b>0||E>0&&I;)0!==b&&(0===E||!I||_.z<=I.z)?(y=_,_=_.nextZ,b--):(y=I,I=I.nextZ,E--),v?v.nextZ=y:m=y,y.prevZ=v,v=y;_=I}v.nextZ=null,A*=2}while(x>1)}(d)}(t,r,i,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?$g(t,r,i,o):Qg(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),us(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?ss(t=td(t,e,n),e,n,r,i,o,2):2===s&&ed(t,e,n,r,i,o):ss(os(t),e,n,r,i,o,1);break}}}function Qg(t){var e=t.prev,n=t,r=t.next;if(an(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(po(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&an(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function $g(t,e,n,r){var i=t.prev,o=t,s=t.next;if(an(i,o,s)>=0)return!1;for(var l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=Tu(i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,e,n,r),p=Tu(l,h,e,n,r),g=t.prevZ,d=t.nextZ;g&&g.z>=c&&d&&d.z<=p;){if(g!==t.prev&&g!==t.next&&po(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&an(g.prev,g,g.next)>=0||(g=g.prevZ,d!==t.prev&&d!==t.next&&po(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&an(d.prev,d,d.next)>=0))return!1;d=d.nextZ}for(;g&&g.z>=c;){if(g!==t.prev&&g!==t.next&&po(i.x,i.y,o.x,o.y,s.x,s.y,g.x,g.y)&&an(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&po(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&an(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function td(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!zi(i,o)&&Hc(i,r,r.next,o)&&as(i,o)&&as(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),us(r),us(r.next),r=t=o),r=r.next}while(r!==t);return r}function ed(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&od(s,a)){var u=Wc(s,a);return s=os(s,s.next),u=os(u,u.next),ss(s,e,n,r,i,o),void ss(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function nd(t,e){return t.x-e.x}function rd(t,e){if(e=function(r,i){var o,s=i,a=r.x,u=r.y,l=-1/0;do{if(u<=s.y&&u>=s.next.y&&s.next.y!==s.y){var h=s.x+(u-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(h<=a&&h>l){if(l=h,h===a){if(u===s.y)return s;if(u===s.next.y)return s.next}o=s.x<s.next.x?s:s.next}}s=s.next}while(s!==i);if(!o)return null;if(a===l)return o.prev;var c,p=o,g=o.x,d=o.y,m=1/0;for(s=o.next;s!==p;)a>=s.x&&s.x>=g&&a!==s.x&&po(u<d?a:l,u,g,d,u<d?l:a,u,s.x,s.y)&&((c=Math.abs(u-s.y)/(a-s.x))<m||c===m&&s.x>o.x)&&as(s,r)&&(o=s,m=c),s=s.next;return o}(t,e)){var n=Wc(e,t);os(n,n.next)}}function Tu(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function id(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function po(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function od(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(n,r){var i=n;do{if(i.i!==n.i&&i.next.i!==n.i&&i.i!==r.i&&i.next.i!==r.i&&Hc(i,i.next,n,r))return!0;i=i.next}while(i!==n);return!1}(t,e)&&as(t,e)&&as(e,t)&&function(n,r){var i=n,o=!1,s=(n.x+r.x)/2,a=(n.y+r.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&s<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(o=!o),i=i.next}while(i!==n);return o}(t,e)}function an(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function zi(t,e){return t.x===e.x&&t.y===e.y}function Hc(t,e,n,r){return!!(zi(t,e)&&zi(n,r)||zi(t,r)&&zi(n,e))||an(t,e,n)>0!=an(t,e,r)>0&&an(n,r,t)>0!=an(n,r,e)>0}function as(t,e){return an(t.prev,t,t.next)<0?an(t,e,t.next)>=0&&an(t,t.prev,e)>=0:an(t,e,t.prev)<0||an(t,t.next,e)<0}function Wc(t,e){var n=new Au(t.i,t.x,t.y),r=new Au(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Jc(t,e,n,r){var i=new Au(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function us(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Au(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Du(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Zc(t){var e=function(a){for(var u=a[0][0].length,l={vertices:[],holes:[],dimensions:u},h=0,c=0;c<a.length;c++){for(var p=0;p<a[c].length;p++)for(var g=0;g<u;g++)l.vertices.push(a[c][p][g]);c>0&&l.holes.push(h+=a[c-1].length)}return l}(t),n=Xc(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(a,u){var l=n[u];i.push([e.vertices[2*l],e.vertices[2*l+1]])});for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(dt([s]))}return r}function ga(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return Wt(e,function(o,s){var a=Qt(t,o);a<r&&(i=s,r=a)}),(n=Je(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function ji(t){if(!t)throw new Error("geojson is required");var e=[];return Ve(t,function(n){!function(r,i){var o=[],s=r.geometry;if(null!==s){switch(s.type){case"Polygon":o=ot(s);break;case"LineString":o=[ot(s)]}o.forEach(function(a){var u,l,h;(u=a,l=r.properties,h=[],u.reduce(function(c,p){var d,m,f,_,I,y,g=Zt([c,p],l);return g.bbox=[(f=(d=c)[0])<(I=(m=p)[0])?f:I,(_=d[1])<(y=m[1])?_:y,f>I?f:I,_>y?_:y],h.push(g),p}),h).forEach(function(u){u.id=i.length,i.push(u)})})}}(n,e)}),rt(e)}fa.deviation=function(t,e,n,r){var i=e&&e.length,s=Math.abs(Du(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,u=e.length;a<u;a++)s-=Math.abs(Du(t,e[a]*n,a<u-1?e[a+1]*n:t.length,n));var c=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,g=r[a+1]*n,d=r[a+2]*n;c+=Math.abs((t[p]-t[d])*(t[g+1]-t[p+1])-(t[p]-t[g])*(t[d+1]-t[p+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},fa.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Xc.default=Kg;var Ze=Ar(function(t,e){function n(d,m,f){void 0===f&&(f={});var _={type:"Feature"};return(0===f.id||f.id)&&(_.id=f.id),f.bbox&&(_.bbox=f.bbox),_.properties=m||{},_.geometry=d,_}function r(d,m,f){if(void 0===f&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!g(d[0])||!g(d[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:d},m,f)}function i(d,m,f){void 0===f&&(f={});for(var _=0,I=d;_<I.length;_++){var y=I[_];if(y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var v=0;v<y[y.length-1].length;v++)if(y[y.length-1][v]!==y[0][v])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:d},m,f)}function o(d,m,f){if(void 0===f&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:d},m,f)}function s(d,m){void 0===m&&(m={});var f={type:"FeatureCollection"};return m.id&&(f.id=m.id),m.bbox&&(f.bbox=m.bbox),f.features=d,f}function a(d,m,f){return void 0===f&&(f={}),n({type:"MultiLineString",coordinates:d},m,f)}function u(d,m,f){return void 0===f&&(f={}),n({type:"MultiPoint",coordinates:d},m,f)}function l(d,m,f){return void 0===f&&(f={}),n({type:"MultiPolygon",coordinates:d},m,f)}function h(d,m){void 0===m&&(m="kilometers");var f=e.factors[m];if(!f)throw new Error(m+" units is invalid");return d*f}function c(d,m){void 0===m&&(m="kilometers");var f=e.factors[m];if(!f)throw new Error(m+" units is invalid");return d/f}function p(d){return d%(2*Math.PI)*180/Math.PI}function g(d){return!isNaN(d)&&null!==d&&!Array.isArray(d)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(d,m,f){switch(d){case"Point":return r(m).geometry;case"LineString":return o(m).geometry;case"Polygon":return i(m).geometry;case"MultiPoint":return u(m).geometry;case"MultiLineString":return a(m).geometry;case"MultiPolygon":return l(m).geometry;default:throw new Error(d+" is invalid")}},e.point=r,e.points=function(d,m,f){return void 0===f&&(f={}),s(d.map(function(_){return r(_,m)}),f)},e.polygon=i,e.polygons=function(d,m,f){return void 0===f&&(f={}),s(d.map(function(_){return i(_,m)}),f)},e.lineString=o,e.lineStrings=function(d,m,f){return void 0===f&&(f={}),s(d.map(function(_){return o(_,m)}),f)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(d,m,f){return void 0===f&&(f={}),n({type:"GeometryCollection",geometries:d},m,f)},e.round=function(d,m){if(void 0===m&&(m=0),m&&!(m>=0))throw new Error("precision must be a positive number");var f=Math.pow(10,m||0);return Math.round(d*f)/f},e.radiansToLength=h,e.lengthToRadians=c,e.lengthToDegrees=function(d,m){return p(c(d,m))},e.bearingToAzimuth=function(d){var m=d%360;return m<0&&(m+=360),m},e.radiansToDegrees=p,e.degreesToRadians=function(d){return d%360*Math.PI/180},e.convertLength=function(d,m,f){if(void 0===m&&(m="kilometers"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("length must be a positive number");return h(c(d,m),f)},e.convertArea=function(d,m,f){if(void 0===m&&(m="meters"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("area must be a positive number");var _=e.areaFactors[m];if(!_)throw new Error("invalid original units");var I=e.areaFactors[f];if(!I)throw new Error("invalid final units");return d/_*I},e.isNumber=g,e.isObject=function(d){return!!d&&d.constructor===Object},e.validateBBox=function(d){if(!d)throw new Error("bbox is required");if(!Array.isArray(d))throw new Error("bbox must be an Array");if(4!==d.length&&6!==d.length)throw new Error("bbox must be an Array of 4 or 6 numbers");d.forEach(function(m){if(!g(m))throw new Error("bbox must only contain numbers")})},e.validateId=function(d){if(!d)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof d))throw new Error("id must be a number or a string")}});function ls(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,h,c=0,p=0,g=t.type,d="FeatureCollection"===g,m="Feature"===g,f=d?t.features.length:1,_=0;_<f;_++){a=(h=!!(l=d?t.features[_].geometry:m?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var I=0;I<a;I++){var y=0,v=0;if(null!==(s=h?l.geometries[I]:l)){u=s.coordinates;var x=s.type;switch(c=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(u,p,_,y,v))return!1;p++,y++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],p,_,y,v))return!1;p++,"MultiPoint"===x&&y++}"LineString"===x&&y++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],p,_,y,v))return!1;p++}"MultiLineString"===x&&y++,"Polygon"===x&&v++}"Polygon"===x&&y++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(v=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],p,_,y,v))return!1;p++}v++}y++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===ls(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Kc(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function Qc(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Fu(t,e){var n,r,i,o,s,a,u,l,h,c,p=0,g="FeatureCollection"===t.type,d="Feature"===t.type,m=g?t.features.length:1;for(n=0;n<m;n++){for(l=g?t.features[n].properties:d?t.properties:{},h=g?t.features[n].bbox:d?t.bbox:void 0,c=g?t.features[n].id:d?t.id:void 0,s=(u=!!(a=g?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,l,h,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,h,c))return!1;p++}}function da(t,e){Fu(t,function(n,r,i,o,s){var a,u=null===n?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Ze.feature(n,i,{bbox:o,id:s}),r,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<n.coordinates.length;l++)if(!1===e(Ze.feature({type:a,coordinates:n.coordinates[l]},i),r,l))return!1})}function $c(t,e){da(t,function(n,r,i){var o=0;if(n.geometry){var s=n.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var a,u=0,l=0,h=0;return!1!==ls(n,function(c,p,g,d,m){if(void 0===a||r>u||d>l||m>h)return a=c,u=r,l=d,h=m,void(o=0);var f=Ze.lineString([a,c],n.properties);if(!1===e(f,r,i,m,o))return!1;o++,a=c})&&void 0}}})}function th(t,e){if(!t)throw new Error("geojson is required");da(t,function(n,r,i){if(null!==n.geometry){var s=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===e(n,r,i,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(Ze.lineString(s[a],n.properties),r,i,a))return!1}}})}var ku=Object.defineProperty({coordAll:function(t){var e=[];return ls(t,function(n){e.push(n)}),e},coordEach:ls,coordReduce:function(t,e,n,r){var i=n;return ls(t,function(o,s,a,u,l){i=0===s&&void 0===n?o:e(i,o,s,a,u,l)},r),i},featureEach:Qc,featureReduce:function(t,e,n){var r=n;return Qc(t,function(i,o){r=0===o&&void 0===n?i:e(r,i,o)}),r},findPoint:function(t,e){if(!Ze.isObject(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Ze.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Ze.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Ze.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Ze.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Ze.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Ze.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},findSegment:function(t,e){if(!Ze.isObject(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Ze.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Ze.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Ze.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Ze.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},flattenEach:da,flattenReduce:function(t,e,n){var r=n;return da(t,function(i,o,s){r=0===o&&0===s&&void 0===n?i:e(r,i,o,s)}),r},geomEach:Fu,geomReduce:function(t,e,n){var r=n;return Fu(t,function(i,o,s,a,u){r=0===o&&void 0===n?i:e(r,i,o,s,a,u)}),r},lineEach:th,lineReduce:function(t,e,n){var r=n;return th(t,function(i,o,s,a){r=0===o&&void 0===n?i:e(r,i,o,s,a)}),r},propEach:Kc,propReduce:function(t,e,n){var r=n;return Kc(t,function(i,o){r=0===o&&void 0===n?i:e(r,i,o)}),r},segmentEach:$c,segmentReduce:function(t,e,n){var r=n,i=!1;return $c(t,function(o,s,a,u,l){r=!1===i&&void 0===n?o:e(r,o,s,a,u,l),i=!0}),r}},"__esModule",{value:!0});function Gu(t){var e=[1/0,1/0,-1/0,-1/0];return ku.coordEach(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}Gu.default=Gu;var fo=Object.defineProperty({default:Gu},"__esModule",{value:!0}).default,Id=ku.featureEach,eh=Ze.featureCollection;function nh(t){var e=gn(t);return e.insert=function(n){if("Feature"!==n.type)throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:fo(n),gn.prototype.insert.call(this,n)},e.load=function(n){var r=[];return Array.isArray(n)?n.forEach(function(i){if("Feature"!==i.type)throw new Error("invalid features");i.bbox=i.bbox?i.bbox:fo(i),r.push(i)}):Id(n,function(i){if("Feature"!==i.type)throw new Error("invalid features");i.bbox=i.bbox?i.bbox:fo(i),r.push(i)}),gn.prototype.load.call(this,r)},e.remove=function(n,r){if("Feature"!==n.type)throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:fo(n),gn.prototype.remove.call(this,n,r)},e.clear=function(){return gn.prototype.clear.call(this)},e.search=function(n){var r=gn.prototype.search.call(this,this.toBBox(n));return eh(r)},e.collides=function(n){return gn.prototype.collides.call(this,this.toBBox(n))},e.all=function(){var n=gn.prototype.all.call(this);return eh(n)},e.toJSON=function(){return gn.prototype.toJSON.call(this)},e.fromJSON=function(n){return gn.prototype.fromJSON.call(this,n)},e.toBBox=function(n){var r;if(n.bbox)r=n.bbox;else if(Array.isArray(n)&&4===n.length)r=n;else if(Array.isArray(n)&&6===n.length)r=[n[0],n[1],n[3],n[4]];else if("Feature"===n.type)r=fo(n);else{if("FeatureCollection"!==n.type)throw new Error("invalid geojson");r=fo(n)}return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}},e}var cs=nh;function ti(t,e){var n={},r=[];if("LineString"===t.type&&(t=Le(t)),"LineString"===e.type&&(e=Le(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=rh(t,e);return i&&r.push(i),rt(r)}var o=cs();return o.load(ji(e)),Wt(ji(t),function(s){Wt(o.search(s),function(a){var u=rh(s,a);if(u){var l=ot(u).join(",");n[l]||(n[l]=!0,r.push(u))}})}),rt(r)}function rh(t,e){var n=ot(t),r=ot(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],u=r[0][0],l=r[0][1],h=r[1][0],c=r[1][1],p=(c-l)*(s-i)-(h-u)*(a-o);if(0===p)return null;var m=((h-u)*(o-l)-(c-l)*(i-u))/p,f=((s-i)*(o-l)-(a-o)*(i-u))/p;return m>=0&&m<=1&&f>=0&&f<=1?ft([i+m*(s-i),o+m*(a-o)]):null}function ei(t,e,n){void 0===n&&(n={});var r=ft([1/0,1/0],{dist:1/0}),i=0;return Ve(t,function(o){for(var s=ot(o),a=0;a<s.length-1;a++){var u=ft(s[a]);u.properties.dist=Qt(e,u,n);var l=ft(s[a+1]);l.properties.dist=Qt(e,l,n);var h=Qt(u,l,n),c=Math.max(u.properties.dist,l.properties.dist),p=$r(u,l),g=Dr(e,c,p+90,n),d=Dr(e,c,p-90,n),m=ti(Zt([g.geometry.coordinates,d.geometry.coordinates]),Zt([u.geometry.coordinates,l.geometry.coordinates])),f=null;m.features.length>0&&((f=m.features[0]).properties.dist=Qt(e,f,n),f.properties.location=i+Qt(u,f,n)),u.properties.dist<r.properties.dist&&((r=u).properties.index=a,r.properties.location=i),l.properties.dist<r.properties.dist&&((r=l).properties.index=a+1,r.properties.location=i+h),f&&f.properties.dist<r.properties.dist&&((r=f).properties.index=a),i+=h}}),r}function ya(t,e,n){void 0===n&&(n={});var r=re(t),i=re(e);return i[0]+=i[0]-r[0]>180?-360:r[0]-i[0]>180?360:0,Gi(function(o,s,a){var u=a=void 0===a?Ln:Number(a),l=o[1]*Math.PI/180,h=s[1]*Math.PI/180,c=h-l,p=Math.abs(s[0]-o[0])*Math.PI/180;p>Math.PI&&(p-=2*Math.PI);var g=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(l/2+Math.PI/4)),d=Math.abs(g)>1e-11?c/g:Math.cos(l);return Math.sqrt(c*c+d*d*p*p)*u}(r,i),"meters",n.units)}function ih(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=ft(t):"Point"===t.type?t=Le(t):$o(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=Zt(e):"LineString"===e.type?e=Le(e):$o(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return Kr(e,function(o){var u=function(l,h,c,p){var g=[c[0]-h[0],c[1]-h[1]],d=oh([l[0]-h[0],l[1]-h[1]],g);if(d<=0)return qu(l,h,{method:p.method,units:"degrees"});var m=oh(g,g);if(m<=d)return qu(l,c,{method:p.method,units:"degrees"});var f=d/m;return qu(l,[h[0]+f*g[0],h[1]+f*g[1]],{method:p.method,units:"degrees"})}(i,o.geometry.coordinates[0],o.geometry.coordinates[1],n);u<r&&(r=u)}),Gi(r,"degrees",n.units)}function oh(t,e){return t[0]*e[0]+t[1]*e[1]}function qu(t,e,n){return"planar"===n.method?ya(t,e,n):Qt(t,e,n)}function Cd(t,e,n,r,i,o,s,a){var u,l,h,c,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==p.x&&null!==p.y&&p:(c=(n-t)*(l=e-o)-(r-e)*(h=t-i),l=((s-i)*l-(a-o)*h)/u,h=c/u,p.x=t+l*(n-t),p.y=e+l*(r-e),l>=0&&l<=1&&(p.onLine1=!0),h>=0&&h<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}function sh(t){for(var e="FeatureCollection"!==(p=t).type?rt("Feature"!==p.type?[Le(p)]:[p]):p,n=ha(e),r=!1,i=0;!r&&i<e.features.length;){var o,s=e.features[i].geometry,a=!1;if("Point"===s.type)n.geometry.coordinates[0]===s.coordinates[0]&&n.geometry.coordinates[1]===s.coordinates[1]&&(r=!0);else if("MultiPoint"===s.type){var u=!1;for(o=0;!u&&o<s.coordinates.length;)n.geometry.coordinates[0]===s.coordinates[o][0]&&n.geometry.coordinates[1]===s.coordinates[o][1]&&(r=!0,u=!0),o++}else if("LineString"===s.type)for(o=0;!a&&o<s.coordinates.length-1;)ah(n.geometry.coordinates[0],n.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(a=!0,r=!0),o++;else if("MultiLineString"===s.type)for(var l=0;l<s.coordinates.length;){a=!1,o=0;for(var h=s.coordinates[l];!a&&o<h.length-1;)ah(n.geometry.coordinates[0],n.geometry.coordinates[1],h[o][0],h[o][1],h[o+1][0],h[o+1][1])&&(a=!0,r=!0),o++;l++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||ae(n,s)&&(r=!0);i++}var p;if(r)return n;var c=rt([]);for(i=0;i<e.features.length;i++)c.features=c.features.concat(pa(e.features[i]).features);return ft(ga(n,c).geometry.coordinates)}function ah(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}cs.default=nh;var uh=6378137;function Bu(t){return cu(t,function(e,n){return e+function(r){var i,o=0;switch(r.type){case"Polygon":return lh(r.coordinates);case"MultiPolygon":for(i=0;i<r.coordinates.length;i++)o+=lh(r.coordinates[i]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(n)},0)}function lh(t){var e=0;if(t&&t.length>0){e+=Math.abs(ch(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(ch(t[n]))}return e}function ch(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(zu(t[o][0])-zu(e[0]))*Math.sin(zu(n[1]));a=a*uh*uh/2}return a}function zu(t){return t*Math.PI/180}function ju(t,e){return void 0===e&&(e={}),hu(t,function(n,r){var i=r.geometry.coordinates;return n+Qt(i[0],i[1],e)},0)}function hh(t,e,n,r){if(!Kt(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,h=0,c=0;c<i.length&&!(e>=h&&c===i.length-1);c++){if(h>e&&0===o.length){if(!(s=e-h))return o.push(i[c]),Zt(o);a=$r(i[c],i[c-1])-180,u=Dr(i[c],s,a,r),o.push(u.geometry.coordinates)}if(h>=n)return(s=n-h)?(a=$r(i[c],i[c-1])-180,u=Dr(i[c],s,a,r),o.push(u.geometry.coordinates),Zt(o)):(o.push(i[c]),Zt(o));if(h>=e&&o.push(i[c]),c===i.length-1)return Zt(o);h+=Qt(i[c],i[c+1],r)}if(h<e&&i.length===l)throw new Error("Start position is beyond line");var p=i[i.length-1];return Zt([p,p])}function Tn(t,e,n){void 0===n&&(n={});for(var r=re(t),i=ot(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Nd(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Nd(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],h=e[1],c=l-a,p=h-u,g=(n[0]-a)*p-(n[1]-u)*c;if(null!==i){if(Math.abs(g)>i)return!1}else if(0!==g)return!1;return r?"start"===r?Math.abs(c)>=Math.abs(p)?c>0?a<o&&o<=l:l<=o&&o<a:p>0?u<s&&s<=h:h<=s&&s<u:"end"===r?Math.abs(c)>=Math.abs(p)?c>0?a<=o&&o<l:l<o&&o<=a:p>0?u<=s&&s<h:h<s&&s<=u:"both"===r&&(Math.abs(c)>=Math.abs(p)?c>0?a<o&&o<l:l<o&&o<a:p>0?u<s&&s<h:h<s&&s<u):Math.abs(c)>=Math.abs(p)?c>0?a<=o&&o<=l:l<=o&&o<=a:p>0?u<=s&&s<=h:h<=s&&s<=u}function ph(t,e){var n=se(t),r=se(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(s,a){var u,l=!1;for(u=0;u<a.coordinates.length;u++)if(gh(a.coordinates[u],s.coordinates)){l=!0;break}return l}(n,r);case"LineString":return Tn(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ae(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(s,a){for(var u=0;u<s.coordinates.length;u++){for(var l=!1,h=0;h<a.coordinates.length;h++)gh(s.coordinates[u],a.coordinates[h])&&(l=!0);if(!l)return!1}return!0}(n,r);case"LineString":return function(s,a){for(var u=!1,l=0;l<s.coordinates.length;l++){if(!Tn(s.coordinates[l],a))return!1;u||(u=Tn(s.coordinates[l],a,{ignoreEndVertices:!0}))}return u}(n,r);case"Polygon":case"MultiPolygon":return function(s,a){for(var u=!0,l=!1,h=0;h<s.coordinates.length;h++){if(!(l=ae(s.coordinates[1],a))){u=!1;break}l=ae(s.coordinates[1],a,{ignoreBoundary:!0})}return u&&l}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(s,a){for(var u=0;u<s.coordinates.length;u++)if(!Tn(s.coordinates[u],a))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(s,a){if(!fh(Ie(a),Ie(s)))return!1;for(var h=!1,c=0;c<s.coordinates.length-1;c++){if(!ae(s.coordinates[c],a))return!1;h||(h=ae(s.coordinates[c],a,{ignoreBoundary:!0})),!h&&(h=ae(Pd(s.coordinates[c],s.coordinates[c+1]),a,{ignoreBoundary:!0}))}return h}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(s,a){var u=Ie(s);if(!fh(Ie(a),u))return!1;for(var l=0;l<s.coordinates[0].length;l++)if(!ae(s.coordinates[0][l],a))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function fh(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function gh(t,e){return t[0]===e[0]&&t[1]===e[1]}function Pd(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function dh(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],a=t[3],u=e/Qt([i,o],[s,o],n)*(s-i),l=e/Qt([i,o],[i,a],n)*(a-o),h=s-i,c=a-o,p=Math.floor(h/u),g=(c-Math.floor(c/l)*l)/2,d=i+(h-p*u)/2;d<=s;){for(var m=o+g;m<=a;){var f=ft([d,m],n.properties);n.mask?ph(f,n.mask)&&r.push(f):r.push(f),m+=l}d+=u}return rt(r)}function yh(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return _e(t,function(s){!function(a,u,l){a.length>l&&a.splice(l,a.length);for(var h=0;h<a.length;h++)a[h]=Math.round(a[h]*u)/u}(s,o,r)}),t}function Uu(t){if(!t)throw new Error("geojson is required");var e=[];return Ve(t,function(n){e.push(n)}),rt(e)}function hs(t,e){if(!t||!e||t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!hs(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}var mh=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},vh=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function ma(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Od(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(ma([t[go(e-1,t.length-1)],t[e],t[go(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function ps(t,e){if(!t||!e||t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ps(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function go(t,e){return(t%e+e)%e}var _h=Math.PI/180,xh=180/Math.PI,fs=function(t,e){this.lon=t,this.lat=e,this.x=_h*t,this.y=_h*e};fs.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},fs.prototype.antipode=function(){return new fs(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var Eh=function(){this.coords=[],this.length=0};Eh.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Vu=function(t){this.properties=t||{},this.geometries=[]};Vu.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Vu.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(i){e+=i[0]+" "+i[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Xu=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new fs(t.x,t.y),this.end=new fs(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,o=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function bh(t,e){var n=[],r=cs();return Ve(e,function(i){if(n.forEach(function(a,u){a.id=u}),n.length){var o=r.search(i);if(o.features.length){var s=wh(i,o);n=n.filter(function(a){return a.id!==s.id}),r.remove(s),Wt(Yu(s,i),function(a){n.push(a),r.insert(a)})}}else(n=Yu(t,i).features).forEach(function(a){a.bbox||(a.bbox=Vc(Ie(a)))}),r.load(rt(n))}),rt(n)}function Yu(t,e){var n=[],r=ot(t)[0],i=ot(t)[t.geometry.coordinates.length-1];if(Hu(r,re(e))||Hu(i,re(e)))return rt([t]);var o=cs(),s=ji(t);o.load(s);var a=o.search(e);if(!a.features.length)return rt([t]);var u=wh(e,a),l=lu(s,function(h,c,p){var g=ot(c)[1],d=re(e);return p===u.id?(h.push(d),n.push(Zt(h)),Hu(d,g)?[d]:[d,g]):(h.push(g),h)},[r]);return l.length>1&&n.push(Zt(l)),rt(n)}function wh(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return Wt(e,function(i){var o=ei(i,t).properties.dist;o<r&&(n=i,r=o)}),n}function Hu(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ih(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,s=Sh(n),a=Sh(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return Zt(Ru(t,e,i).geometry.coordinates[0],u);for(var l=s,h=s<a?a:a+360,c=l,p=[],g=0;c<h;)p.push(Dr(t,e,c,i).geometry.coordinates),c=l+360*++g/o;return c>h&&p.push(Dr(t,e,h,i).geometry.coordinates),Zt(p,u)}function Sh(t){var e=t%360;return e<0&&(e+=360),e}function gs(t,e){void 0===e&&(e={});var n=se(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return Ch(n,e);case"MultiPolygon":return function(r,i){void 0===i&&(i={});var o=se(r).coordinates,s=i.properties?i.properties:"Feature"===r.type?r.properties:{},a=[];return o.forEach(function(u){a.push(Nh(u,s))}),rt(a)}(n,e);default:throw new Error("invalid poly")}}function Ch(t,e){return void 0===e&&(e={}),Nh(se(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Nh(t,e){return t.length>1?di(t,e):Zt(t[0],e)}function Ph(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(r=e.orderCoords)||void 0===r||r;if("FeatureCollection"===(null!==(i=e.mutate)&&void 0!==i&&i||(t=Je(t)),t.type)){var u=[];return t.features.forEach(function(l){u.push(ot(Mh(l,{},s,a)))}),On(u,o)}return Mh(t,o,s,a)}function Mh(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=se(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=Lh(o)),dt([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(l){if(n&&(l=Lh(l)),r){var h=(g=(c=Ie(Zt(l)))[1],m=c[3],Math.abs(c[0]-c[2])*Math.abs(g-m));h>u?(a.unshift(l),u=h):a.push(l)}else a.push(l);var c,g,m}),dt(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Lh(t){var e=t[0],i=t[t.length-1];return e[0]===i[0]&&e[1]===i[1]||t.push(e),t}function Rd(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(yo(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(yo(a=t[s],e)&r))!==o&&n.push(Wu(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function Wu(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function yo(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Oh(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=Rd(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}Xu.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=xh*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[xh*Math.atan2(i,r),s]},Xu.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var s=this.interpolate(r*i);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,h=180-l,c=-180+l,p=360-l,g=1;g<n.length;++g){var d=n[g-1][0],m=n[g][0],f=Math.abs(m-d);f>p&&(m>h&&d<c||d>h&&m<c)?a=!0:f>u&&(u=f)}var _=[];if(a&&u<l){var I=[];_.push(I);for(var y=0;y<n.length;++y){var v=parseFloat(n[y][0]);if(y>0&&Math.abs(v-n[y-1][0])>p){var x=parseFloat(n[y-1][0]),b=parseFloat(n[y-1][1]),E=parseFloat(n[y][0]),A=parseFloat(n[y][1]);if(x>-180&&x<c&&180===E&&y+1<n.length&&n[y-1][0]>-180&&n[y-1][0]<c){I.push([-180,n[y][1]]),y++,I.push([n[y][0],n[y][1]]);continue}if(x>h&&x<180&&-180===E&&y+1<n.length&&n[y-1][0]>h&&n[y-1][0]<180){I.push([180,n[y][1]]),y++,I.push([n[y][0],n[y][1]]);continue}if(x<c&&E>h){var C=x;x=E,E=C;var F=b;b=A,A=F}if(x>h&&E<c&&(E+=360),x<=180&&E>=180&&x<E){var P=(180-x)/(E-x),q=P*A+(1-P)*b;I.push([n[y-1][0]>h?180:-180,q]),(I=[]).push([n[y-1][0]>h?-180:180,q]),_.push(I)}else _.push(I=[]);I.push([v,n[y][1]])}else I.push([n[y][0],n[y][1]])}}else{var R=[];_.push(R);for(var O=0;O<n.length;++O)R.push([n[O][0],n[O][1]])}for(var M=new Vu(this.properties),k=0;k<_.length;++k){var T=new Eh;M.geometries.push(T);for(var B=_[k],S=0;S<B.length;++S)T.move_to(B[S])}return M};var Rh=Ar(function(t,e){function n(r){var i=[];for(var o in r)i.push(o);return i}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Th=Ar(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(o){return"[object Arguments]"==Object.prototype.toString.call(o)}function i(o){return o&&"object"==typeof o&&"number"==typeof o.length&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i}),mo=Ar(function(t){var e=Array.prototype.slice,n=t.exports=function(o,s,a){return a||(a={}),o===s||(o instanceof Date&&s instanceof Date?o.getTime()===s.getTime():!o||!s||"object"!=typeof o&&"object"!=typeof s?a.strict?o===s:o==s:function(u,l,h){var c,p;if(r(u)||r(l)||u.prototype!==l.prototype)return!1;if(Th(u))return!!Th(l)&&(u=e.call(u),l=e.call(l),n(u,l,h));if(i(u)){if(!i(l)||u.length!==l.length)return!1;for(c=0;c<u.length;c++)if(u[c]!==l[c])return!1;return!0}try{var g=Rh(u),d=Rh(l)}catch{return!1}if(g.length!=d.length)return!1;for(g.sort(),d.sort(),c=g.length-1;c>=0;c--)if(g[c]!=d[c])return!1;for(c=g.length-1;c>=0;c--)if(!n(u[p=g[c]],l[p],h))return!1;return typeof u==typeof l}(o,s,a))};function r(o){return null==o}function i(o){return!(!o||"object"!=typeof o||"number"!=typeof o.length||"function"!=typeof o.copy||"function"!=typeof o.slice||o.length>0&&"number"!=typeof o[0])}});function Ah(t,e,n){if(void 0===n&&(n={}),!Kt(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=cs(),a=ji(t);return s.load(a),Kr(e,function(u){var l=!1;u&&(Wt(s.search(u),function(h){if(!1===l){var c=ot(u).sort(),p=ot(h).sort();mo(c,p)||(0===i?Tn(c[0],h)&&Tn(c[1],h):ei(h,c[0]).properties.dist<=i&&ei(h,c[1]).properties.dist<=i)?(l=!0,r=r?Dh(r,u):u):(0===i?Tn(p[0],u)&&Tn(p[1],u):ei(u,p[0]).properties.dist<=i&&ei(u,p[1]).properties.dist<=i)&&(r=r?Dh(r,h):h)}}),!1===l&&r&&(o.push(r),r=void 0))}),r&&o.push(r),rt(o)}function Dh(t,e){var n=ot(e),r=ot(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return mo(n[0],i)?s.unshift(n[1]):mo(n[0],o)?s.push(n[1]):mo(n[1],i)?s.unshift(n[0]):mo(n[1],o)&&s.push(n[0]),t}function Fh(t){var e=t%360;return e<0&&(e+=360),e}function Ui(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?kh(re(e),re(t)):kh(re(t),re(e)))>180?-(360-r):r}function kh(t,e){var n=Ae(t[1]),r=Ae(e[1]),i=Ae(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(yi(Math.atan2(i,o))+360)%360}function vo(t,e,n,r){void 0===r&&(r={});var i=e<0,o=Gi(Math.abs(e),r.units,"meters");i&&(o=-Math.abs(o));var s=re(t),a=function(u,l,h,c){var p=l/(c=void 0===c?Ln:Number(c)),g=u[0]*Math.PI/180,d=Ae(u[1]),m=Ae(h),f=p*Math.cos(m),_=d+f;Math.abs(_)>Math.PI/2&&(_=_>0?Math.PI-_:-Math.PI-_);var I=Math.log(Math.tan(_/2+Math.PI/4)/Math.tan(d/2+Math.PI/4)),y=Math.abs(I)>1e-11?f/I:Math.cos(d);return[(180*(g+p*Math.sin(m)/y)/Math.PI+540)%360-180,180*_/Math.PI]}(s,o,n);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,ft(a,r.properties)}function Gh(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=ds(a,u,e),n<=0&&r>0?ds(e,a,i)<0||(i=a):n>0&&r<=0&&(Td(e,a,o)||(o=a)),n=r}return[i,o]}function Td(t,e,n){return ds(t,e,n)>0}function ds(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function va(t){for(var e,n,r=ot(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function _a(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return Rn(t,function(n){_a(n,e)}),t;case"LineString":return qh(ot(t),e),t;case"Polygon":return Bh(ot(t),e),t;case"MultiLineString":return ot(t).forEach(function(n){qh(n,e)}),t;case"MultiPolygon":return ot(t).forEach(function(n){Bh(n,e)}),t;case"Point":case"MultiPoint":return t}}function qh(t,e){va(t)===e&&t.reverse()}function Bh(t,e){va(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)va(t[n])===e&&t[n].reverse()}var zh={successCallback:null,verbose:!1,polygons:!1},Vi={};function Dd(t,e,n,r){r=r||{};for(var i=Object.keys(zh),o=0;o<i.length;o++){var s=i[o],a=r[s];Vi[s]=a=a??zh[s]}Vi.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c,p,l=function(h,c,p){for(var g=h.length-1,d=h[0].length-1,m={rows:g,cols:d,cells:[]},f=c+Math.abs(p),_=0;_<g;++_){m.cells[_]=[];for(var I=0;I<d;++I){var y=0,v=h[_+1][I],x=h[_+1][I+1],b=h[_][I+1],E=h[_][I];if(!(isNaN(v)||isNaN(x)||isNaN(b)||isNaN(E))){y|=v<c?0:v>f?128:64,y|=x<c?0:x>f?32:16,y|=b<c?0:b>f?8:4;var A=+(y|=E<c?0:E>f?2:1),C=0;if(17===y||18===y||33===y||34===y||38===y||68===y||72===y||98===y||102===y||132===y||136===y||137===y||152===y||153===y){var F=(v+x+b+E)/4;C=F>f?2:F<c?0:1,34===y?1===C?y=35:0===C&&(y=136):136===y?1===C?(y=35,C=4):0===C&&(y=34):17===y?1===C?(y=155,C=4):0===C&&(y=153):68===y?1===C?(y=103,C=4):0===C&&(y=102):153===y?1===C&&(y=155):102===y?1===C&&(y=103):152===y?C<2&&(y=156,C=1):137===y?C<2&&(y=139,C=1):98===y?C<2&&(y=99,C=1):38===y?C<2&&(y=39,C=1):18===y?C>0?(y=156,C=4):y=152:33===y?C>0?(y=139,C=4):y=137:72===y?C>0?(y=99,C=4):y=98:132===y&&(C>0?(y=39,C=4):y=38)}if(0!=y&&170!=y){var P,q,R,O,M,k,T,B;P=q=R=O=M=k=T=B=.5;var S=[];1===y?(R=1-w(c,b,E),B=1-w(c,v,E),S.push(Q[y])):169===y?(R=w(f,E,b),B=w(f,E,v),S.push(Q[y])):4===y?(k=1-w(c,x,b),O=w(c,E,b),S.push(H[y])):166===y?(k=w(f,b,x),O=1-w(f,b,E),S.push(H[y])):16===y?(M=w(c,b,x),q=w(c,v,x),S.push(W[y])):154===y?(M=1-w(f,x,b),q=1-w(f,x,v),S.push(W[y])):64===y?(T=w(c,E,v),P=1-w(c,x,v),S.push(it[y])):106===y?(T=1-w(f,v,E),P=w(f,v,x),S.push(it[y])):168===y?(O=w(f,E,b),R=w(c,E,b),B=w(c,E,v),T=w(f,E,v),S.push($[y]),S.push(Q[y])):2===y?(O=1-w(c,b,E),R=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),S.push($[y]),S.push(Q[y])):162===y?(M=w(f,b,x),k=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),S.push($[y]),S.push(Q[y])):8===y?(M=1-w(c,x,b),k=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),S.push(W[y]),S.push(H[y])):138===y?(M=1-w(c,x,b),k=1-w(f,x,b),P=1-w(f,x,v),q=1-w(c,x,v),S.push(W[y]),S.push(H[y])):32===y?(M=w(f,b,x),k=w(c,b,x),P=w(c,v,x),q=w(f,v,x),S.push(W[y]),S.push(H[y])):42===y?(B=1-w(f,v,E),T=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x),S.push(st[y]),S.push(it[y])):128===y&&(B=w(c,E,v),T=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v),S.push(st[y]),S.push(it[y])),5===y?(k=1-w(c,x,b),B=1-w(c,v,E),S.push(H[y])):165===y?(k=w(f,b,x),B=w(f,E,v),S.push(H[y])):20===y?(O=w(c,E,b),q=w(c,v,x),S.push($[y])):150===y?(O=1-w(f,b,E),q=1-w(f,x,v),S.push($[y])):80===y?(M=w(c,b,x),T=w(c,E,v),S.push(W[y])):90===y?(M=1-w(f,x,b),T=1-w(f,v,E),S.push(W[y])):65===y?(R=1-w(c,b,E),P=1-w(c,x,v),S.push(Q[y])):105===y?(R=w(f,E,b),P=w(f,v,x),S.push(Q[y])):160===y?(M=w(f,b,x),k=w(c,b,x),B=w(c,E,v),T=w(f,E,v),S.push(W[y]),S.push(H[y])):10===y?(M=1-w(c,x,b),k=1-w(f,x,b),B=1-w(f,v,E),T=1-w(c,v,E),S.push(W[y]),S.push(H[y])):130===y?(O=1-w(c,b,E),R=1-w(f,b,E),P=1-w(f,x,v),q=1-w(c,x,v),S.push($[y]),S.push(Q[y])):40===y?(O=w(f,E,b),R=w(c,E,b),P=w(c,v,x),q=w(f,v,x),S.push($[y]),S.push(Q[y])):101===y?(k=w(f,b,x),P=w(f,v,x),S.push(H[y])):69===y?(k=1-w(c,x,b),P=1-w(c,x,v),S.push(H[y])):149===y?(B=w(f,E,v),q=1-w(f,x,v),S.push(st[y])):21===y?(B=1-w(c,v,E),q=w(c,v,x),S.push(st[y])):86===y?(O=1-w(f,b,E),T=1-w(f,v,E),S.push($[y])):84===y?(O=w(c,E,b),T=w(c,E,v),S.push($[y])):89===y?(M=1-w(f,x,b),R=w(f,E,b),S.push(Q[y])):81===y?(M=w(c,b,x),R=1-w(c,b,E),S.push(Q[y])):96===y?(M=w(f,b,x),k=w(c,b,x),T=w(c,E,v),P=w(f,v,x),S.push(W[y]),S.push(H[y])):74===y?(M=1-w(c,x,b),k=1-w(f,x,b),T=1-w(f,v,E),P=1-w(c,x,v),S.push(W[y]),S.push(H[y])):24===y?(M=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),q=w(c,v,x),S.push(W[y]),S.push(Q[y])):146===y?(M=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),q=1-w(f,x,v),S.push(W[y]),S.push(Q[y])):6===y?(k=1-w(c,x,b),O=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),S.push(H[y]),S.push($[y])):164===y?(k=w(f,b,x),O=w(c,E,b),B=w(c,E,v),T=w(f,E,v),S.push(H[y]),S.push($[y])):129===y?(R=1-w(c,b,E),B=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v),S.push(Q[y]),S.push(st[y])):41===y?(R=w(f,E,b),B=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x),S.push(Q[y]),S.push(st[y])):66===y?(O=1-w(c,b,E),R=1-w(f,b,E),T=1-w(f,v,E),P=1-w(c,x,v),S.push($[y]),S.push(Q[y])):104===y?(O=w(f,E,b),R=w(c,E,b),T=w(c,E,v),P=w(f,v,x),S.push(Q[y]),S.push(jt[y])):144===y?(M=w(c,b,x),B=w(c,E,v),T=w(f,E,v),q=1-w(f,x,v),S.push(W[y]),S.push(it[y])):26===y?(M=1-w(f,x,b),B=1-w(f,v,E),T=1-w(c,v,E),q=w(c,v,x),S.push(W[y]),S.push(it[y])):36===y?(k=w(f,b,x),O=w(c,E,b),P=w(c,v,x),q=w(f,v,x),S.push(H[y]),S.push($[y])):134===y?(k=1-w(c,x,b),O=1-w(f,b,E),P=1-w(f,x,v),q=1-w(c,x,v),S.push(H[y]),S.push($[y])):9===y?(M=1-w(c,x,b),k=1-w(f,x,b),R=w(f,E,b),B=1-w(c,v,E),S.push(W[y]),S.push(H[y])):161===y?(M=w(f,b,x),k=w(c,b,x),R=1-w(c,b,E),B=w(f,E,v),S.push(W[y]),S.push(H[y])):37===y?(k=w(f,b,x),B=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x),S.push(H[y]),S.push(st[y])):133===y?(k=1-w(c,x,b),B=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v),S.push(H[y]),S.push(st[y])):148===y?(O=w(c,E,b),B=w(c,E,v),T=w(f,E,v),q=1-w(f,x,v),S.push($[y]),S.push(it[y])):22===y?(O=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),q=w(c,v,x),S.push($[y]),S.push(it[y])):82===y?(M=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),T=1-w(f,v,E),S.push(W[y]),S.push(Q[y])):88===y?(M=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),T=w(c,E,v),S.push(W[y]),S.push(Q[y])):73===y?(M=1-w(c,x,b),k=1-w(f,x,b),R=w(f,E,b),P=1-w(c,x,v),S.push(W[y]),S.push(H[y])):97===y?(M=w(f,b,x),k=w(c,b,x),R=1-w(c,b,E),P=w(f,v,x),S.push(W[y]),S.push(H[y])):145===y?(M=w(c,b,x),R=1-w(c,b,E),B=w(f,E,v),q=1-w(f,x,v),S.push(W[y]),S.push(st[y])):25===y?(M=1-w(f,x,b),R=w(f,E,b),B=1-w(c,v,E),q=w(c,v,x),S.push(W[y]),S.push(st[y])):70===y?(k=1-w(c,x,b),O=1-w(f,b,E),T=1-w(f,v,E),P=1-w(c,x,v),S.push(H[y]),S.push($[y])):100===y?(k=w(f,b,x),O=w(c,E,b),T=w(c,E,v),P=w(f,v,x),S.push(H[y]),S.push($[y])):34===y?(0===C?(M=1-w(c,x,b),k=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),B=w(c,E,v),T=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v)):(M=w(f,b,x),k=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x)),S.push(W[y]),S.push(H[y]),S.push(st[y]),S.push(it[y])):35===y?(4===C?(M=1-w(c,x,b),k=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),B=w(c,E,v),T=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v)):(M=w(f,b,x),k=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x)),S.push(W[y]),S.push(H[y]),S.push(Q[y]),S.push(it[y])):136===y?(0===C?(M=w(f,b,x),k=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x)):(M=1-w(c,x,b),k=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),B=w(c,E,v),T=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v)),S.push(W[y]),S.push(H[y]),S.push(st[y]),S.push(it[y])):153===y?(0===C?(M=w(c,b,x),R=1-w(c,b,E),B=1-w(c,v,E),q=w(c,v,x)):(M=1-w(f,x,b),R=w(f,E,b),B=w(f,E,v),q=1-w(f,x,v)),S.push(W[y]),S.push(Q[y])):102===y?(0===C?(k=1-w(c,x,b),O=w(c,E,b),T=w(c,E,v),P=1-w(c,x,v)):(k=w(f,b,x),O=1-w(f,b,E),T=1-w(f,v,E),P=w(f,v,x)),S.push(H[y]),S.push(it[y])):155===y?(4===C?(M=w(c,b,x),R=1-w(c,b,E),B=1-w(c,v,E),q=w(c,v,x)):(M=1-w(f,x,b),R=w(f,E,b),B=w(f,E,v),q=1-w(f,x,v)),S.push(W[y]),S.push(st[y])):103===y?(4===C?(k=1-w(c,x,b),O=w(c,E,b),T=w(c,E,v),P=1-w(c,x,v)):(k=w(f,b,x),O=1-w(f,b,E),T=1-w(f,v,E),P=w(f,v,x)),S.push(H[y]),S.push($[y])):152===y?(0===C?(M=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),q=w(c,v,x)):(M=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),B=w(c,E,v),T=w(f,E,v),q=1-w(f,x,v)),S.push(W[y]),S.push($[y]),S.push(Q[y])):156===y?(4===C?(M=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),q=w(c,v,x)):(M=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),B=w(c,E,v),T=w(f,E,v),q=1-w(f,x,v)),S.push(W[y]),S.push(Q[y]),S.push(it[y])):137===y?(0===C?(M=w(f,b,x),k=w(c,b,x),R=1-w(c,b,E),B=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x)):(M=1-w(c,x,b),k=1-w(f,x,b),R=w(f,E,b),B=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v)),S.push(W[y]),S.push(H[y]),S.push(Q[y])):139===y?(4===C?(M=w(f,b,x),k=w(c,b,x),R=1-w(c,b,E),B=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x)):(M=1-w(c,x,b),k=1-w(f,x,b),R=w(f,E,b),B=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v)),S.push(W[y]),S.push(H[y]),S.push(st[y])):98===y?(0===C?(M=1-w(c,x,b),k=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),T=w(c,E,v),P=1-w(c,x,v)):(M=w(f,b,x),k=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),T=1-w(f,v,E),P=w(f,v,x)),S.push(W[y]),S.push(H[y]),S.push(it[y])):99===y?(4===C?(M=1-w(c,x,b),k=1-w(f,x,b),O=w(f,E,b),R=w(c,E,b),T=w(c,E,v),P=1-w(c,x,v)):(M=w(f,b,x),k=w(c,b,x),O=1-w(c,b,E),R=1-w(f,b,E),T=1-w(f,v,E),P=w(f,v,x)),S.push(W[y]),S.push(H[y]),S.push(Q[y])):38===y?(0===C?(k=1-w(c,x,b),O=w(c,E,b),B=w(c,E,v),T=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v)):(k=w(f,b,x),O=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x)),S.push(H[y]),S.push(st[y]),S.push(it[y])):39===y?(4===C?(k=1-w(c,x,b),O=w(c,E,b),B=w(c,E,v),T=w(f,E,v),P=1-w(f,x,v),q=1-w(c,x,v)):(k=w(f,b,x),O=1-w(f,b,E),B=1-w(f,v,E),T=1-w(c,v,E),P=w(c,v,x),q=w(f,v,x)),S.push(H[y]),S.push($[y]),S.push(it[y])):85===y&&(M=1,k=0,O=1,R=0,B=0,T=1,P=0,q=1),(P<0||P>1||q<0||q>1||M<0||M>1||O<0||O>1||B<0||B>1||T<0||T>1)&&console.log("MarchingSquaresJS-isoBands: "+y+" "+A+" "+v+","+x+","+b+","+E+" "+C+" "+P+" "+q+" "+M+" "+k+" "+O+" "+R+" "+B+" "+T),m.cells[_][I]={cval:y,cval_real:A,flipped:C,topleft:P,topright:q,righttop:M,rightbottom:k,bottomright:O,bottomleft:R,leftbottom:B,lefttop:T,edges:S}}}}}return m}(t,e,n);return Vi.polygons?(Vi.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),c=[],p=0,l.cells.forEach(function(g,d){g.forEach(function(m,f){if(void 0!==m){var _=X[m.cval](m);"object"==typeof _&&rl(_)?"object"==typeof _[0]&&rl(_[0])?"object"==typeof _[0][0]&&rl(_[0][0])?_.forEach(function(I){I.forEach(function(y){y[0]+=f,y[1]+=d}),c[p++]=I}):(_.forEach(function(I){I[0]+=f,I[1]+=d}),c[p++]=_):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),u=c):(Vi.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(h){for(var c=[],p=h.rows,g=h.cols,d=[],m=0;m<p;m++)for(var f=0;f<g;f++)if(void 0!==h.cells[m][f]&&h.cells[m][f].edges.length>0){var _=kd(h.cells[m][f]),I=null,y=f,v=m;null!==_&&d.push([_.p[0]+y,_.p[1]+v]);do{if(null===(I=Gd(h.cells[v][y],_.x,_.y,_.o)))break;if(d.push([I.p[0]+y,I.p[1]+v]),y+=I.x,_=I,(v+=I.y)<0||v>=p||y<0||y>=g||void 0===h.cells[v][y]){var x=Fd(h,y-=I.x,v-=I.y,I.x,I.y,I.o);if(null===x)break;x.path.forEach(function(b){d.push(b)}),y=x.i,v=x.j,_=x}}while(void 0!==h.cells[v][y]&&h.cells[v][y].edges.length>0);c.push(d),d=[],h.cells[m][f].edges.length>0&&f--}return c}(l)),"function"==typeof Vi.successCallback&&Vi.successCallback(u),u}var un=64,_r=16,vt=[],_t=[],xt=[],Et=[],bt=[],wt=[],It=[],St=[],Ct=[],Nt=[],Pt=[],Mt=[],Lt=[],Ot=[],Rt=[],Tt=[],At=[],Dt=[],Ft=[],kt=[],Gt=[],qt=[],Bt=[],zt=[];It[85]=Nt[85]=-1,St[85]=Pt[85]=0,Ct[85]=Mt[85]=1,Ft[85]=qt[85]=1,kt[85]=Bt[85]=0,Gt[85]=zt[85]=1,vt[85]=Et[85]=0,_t[85]=bt[85]=-1,xt[85]=Rt[85]=0,Tt[85]=Lt[85]=0,At[85]=Ot[85]=1,wt[85]=Dt[85]=1,qt[1]=qt[169]=0,Bt[1]=Bt[169]=-1,zt[1]=zt[169]=0,Lt[1]=Lt[169]=-1,Ot[1]=Ot[169]=0,Rt[1]=Rt[169]=0,Nt[4]=Nt[166]=0,Pt[4]=Pt[166]=-1,Mt[4]=Mt[166]=1,Tt[4]=Tt[166]=1,At[4]=At[166]=0,Dt[4]=Dt[166]=0,It[16]=It[154]=0,St[16]=St[154]=1,Ct[16]=Ct[154]=1,Et[16]=Et[154]=1,bt[16]=bt[154]=0,wt[16]=wt[154]=1,Ft[64]=Ft[106]=0,kt[64]=kt[106]=1,Gt[64]=Gt[106]=0,vt[64]=vt[106]=-1,_t[64]=_t[106]=0,xt[64]=xt[106]=1,Ft[2]=Ft[168]=0,kt[2]=kt[168]=-1,Gt[2]=Gt[168]=1,qt[2]=qt[168]=0,Bt[2]=Bt[168]=-1,zt[2]=zt[168]=0,Lt[2]=Lt[168]=-1,Ot[2]=Ot[168]=0,Rt[2]=Rt[168]=0,Tt[2]=Tt[168]=-1,At[2]=At[168]=0,Dt[2]=Dt[168]=1,It[8]=It[162]=0,St[8]=St[162]=-1,Ct[8]=Ct[162]=0,Nt[8]=Nt[162]=0,Pt[8]=Pt[162]=-1,Mt[8]=Mt[162]=1,Lt[8]=Lt[162]=1,Ot[8]=Ot[162]=0,Rt[8]=Rt[162]=1,Tt[8]=Tt[162]=1,At[8]=At[162]=0,Dt[8]=Dt[162]=0,It[32]=It[138]=0,St[32]=St[138]=1,Ct[32]=Ct[138]=1,Nt[32]=Nt[138]=0,Pt[32]=Pt[138]=1,Mt[32]=Mt[138]=0,vt[32]=vt[138]=1,_t[32]=_t[138]=0,xt[32]=xt[138]=0,Et[32]=Et[138]=1,bt[32]=bt[138]=0,wt[32]=wt[138]=1,qt[128]=qt[42]=0,Bt[128]=Bt[42]=1,zt[128]=zt[42]=1,Ft[128]=Ft[42]=0,kt[128]=kt[42]=1,Gt[128]=Gt[42]=0,vt[128]=vt[42]=-1,_t[128]=_t[42]=0,xt[128]=xt[42]=1,Et[128]=Et[42]=-1,bt[128]=bt[42]=0,wt[128]=wt[42]=0,Nt[5]=Nt[165]=-1,Pt[5]=Pt[165]=0,Mt[5]=Mt[165]=0,qt[5]=qt[165]=1,Bt[5]=Bt[165]=0,zt[5]=zt[165]=0,Tt[20]=Tt[150]=0,At[20]=At[150]=1,Dt[20]=Dt[150]=1,Et[20]=Et[150]=0,bt[20]=bt[150]=-1,wt[20]=wt[150]=1,It[80]=It[90]=-1,St[80]=St[90]=0,Ct[80]=Ct[90]=1,Ft[80]=Ft[90]=1,kt[80]=kt[90]=0,Gt[80]=Gt[90]=1,Lt[65]=Lt[105]=0,Ot[65]=Ot[105]=1,Rt[65]=Rt[105]=0,vt[65]=vt[105]=0,_t[65]=_t[105]=-1,xt[65]=xt[105]=0,It[160]=It[10]=-1,St[160]=St[10]=0,Ct[160]=Ct[10]=1,Nt[160]=Nt[10]=-1,Pt[160]=Pt[10]=0,Mt[160]=Mt[10]=0,qt[160]=qt[10]=1,Bt[160]=Bt[10]=0,zt[160]=zt[10]=0,Ft[160]=Ft[10]=1,kt[160]=kt[10]=0,Gt[160]=Gt[10]=1,Tt[130]=Tt[40]=0,At[130]=At[40]=1,Dt[130]=Dt[40]=1,Lt[130]=Lt[40]=0,Ot[130]=Ot[40]=1,Rt[130]=Rt[40]=0,vt[130]=vt[40]=0,_t[130]=_t[40]=-1,xt[130]=xt[40]=0,Et[130]=Et[40]=0,bt[130]=bt[40]=-1,wt[130]=wt[40]=1,Nt[37]=Nt[133]=0,Pt[37]=Pt[133]=1,Mt[37]=Mt[133]=1,qt[37]=qt[133]=0,Bt[37]=Bt[133]=1,zt[37]=zt[133]=0,vt[37]=vt[133]=-1,_t[37]=_t[133]=0,xt[37]=xt[133]=0,Et[37]=Et[133]=1,bt[37]=bt[133]=0,wt[37]=wt[133]=0,Tt[148]=Tt[22]=-1,At[148]=At[22]=0,Dt[148]=Dt[22]=0,qt[148]=qt[22]=0,Bt[148]=Bt[22]=-1,zt[148]=zt[22]=1,Ft[148]=Ft[22]=0,kt[148]=kt[22]=1,Gt[148]=Gt[22]=1,Et[148]=Et[22]=-1,bt[148]=bt[22]=0,wt[148]=wt[22]=1,It[82]=It[88]=0,St[82]=St[88]=-1,Ct[82]=Ct[88]=1,Tt[82]=Tt[88]=1,At[82]=At[88]=0,Dt[82]=Dt[88]=1,Lt[82]=Lt[88]=-1,Ot[82]=Ot[88]=0,Rt[82]=Rt[88]=1,Ft[82]=Ft[88]=0,kt[82]=kt[88]=-1,Gt[82]=Gt[88]=0,It[73]=It[97]=0,St[73]=St[97]=1,Ct[73]=Ct[97]=0,Nt[73]=Nt[97]=0,Pt[73]=Pt[97]=-1,Mt[73]=Mt[97]=0,Lt[73]=Lt[97]=1,Ot[73]=Ot[97]=0,Rt[73]=Rt[97]=0,vt[73]=vt[97]=1,_t[73]=_t[97]=0,xt[73]=xt[97]=1,It[145]=It[25]=0,St[145]=St[25]=-1,Ct[145]=Ct[25]=0,Lt[145]=Lt[25]=1,Ot[145]=Ot[25]=0,Rt[145]=Rt[25]=1,qt[145]=qt[25]=0,Bt[145]=Bt[25]=1,zt[145]=zt[25]=1,Et[145]=Et[25]=-1,bt[145]=bt[25]=0,wt[145]=wt[25]=0,Nt[70]=Nt[100]=0,Pt[70]=Pt[100]=1,Mt[70]=Mt[100]=0,Tt[70]=Tt[100]=-1,At[70]=At[100]=0,Dt[70]=Dt[100]=1,Ft[70]=Ft[100]=0,kt[70]=kt[100]=-1,Gt[70]=Gt[100]=1,vt[70]=vt[100]=1,_t[70]=_t[100]=0,xt[70]=xt[100]=0,Nt[101]=Nt[69]=0,Pt[101]=Pt[69]=1,Mt[101]=Mt[69]=0,vt[101]=vt[69]=1,_t[101]=_t[69]=0,xt[101]=xt[69]=0,qt[149]=qt[21]=0,Bt[149]=Bt[21]=1,zt[149]=zt[21]=1,Et[149]=Et[21]=-1,bt[149]=bt[21]=0,wt[149]=wt[21]=0,Tt[86]=Tt[84]=-1,At[86]=At[84]=0,Dt[86]=Dt[84]=1,Ft[86]=Ft[84]=0,kt[86]=kt[84]=-1,Gt[86]=Gt[84]=1,It[89]=It[81]=0,St[89]=St[81]=-1,Ct[89]=Ct[81]=0,Lt[89]=Lt[81]=1,Ot[89]=Ot[81]=0,Rt[89]=Rt[81]=1,It[96]=It[74]=0,St[96]=St[74]=1,Ct[96]=Ct[74]=0,Nt[96]=Nt[74]=-1,Pt[96]=Pt[74]=0,Mt[96]=Mt[74]=1,Ft[96]=Ft[74]=1,kt[96]=kt[74]=0,Gt[96]=Gt[74]=0,vt[96]=vt[74]=1,_t[96]=_t[74]=0,xt[96]=xt[74]=1,It[24]=It[146]=0,St[24]=St[146]=-1,Ct[24]=Ct[146]=1,Tt[24]=Tt[146]=1,At[24]=At[146]=0,Dt[24]=Dt[146]=1,Lt[24]=Lt[146]=0,Ot[24]=Ot[146]=1,Rt[24]=Rt[146]=1,Et[24]=Et[146]=0,bt[24]=bt[146]=-1,wt[24]=wt[146]=0,Nt[6]=Nt[164]=-1,Pt[6]=Pt[164]=0,Mt[6]=Mt[164]=1,Tt[6]=Tt[164]=-1,At[6]=At[164]=0,Dt[6]=Dt[164]=0,qt[6]=qt[164]=0,Bt[6]=Bt[164]=-1,zt[6]=zt[164]=1,Ft[6]=Ft[164]=1,kt[6]=kt[164]=0,Gt[6]=Gt[164]=0,Lt[129]=Lt[41]=0,Ot[129]=Ot[41]=1,Rt[129]=Rt[41]=1,qt[129]=qt[41]=0,Bt[129]=Bt[41]=1,zt[129]=zt[41]=0,vt[129]=vt[41]=-1,_t[129]=_t[41]=0,xt[129]=xt[41]=0,Et[129]=Et[41]=0,bt[129]=bt[41]=-1,wt[129]=wt[41]=0,Tt[66]=Tt[104]=0,At[66]=At[104]=1,Dt[66]=Dt[104]=0,Lt[66]=Lt[104]=-1,Ot[66]=Ot[104]=0,Rt[66]=Rt[104]=1,Ft[66]=Ft[104]=0,kt[66]=kt[104]=-1,Gt[66]=Gt[104]=0,vt[66]=vt[104]=0,_t[66]=_t[104]=-1,xt[66]=xt[104]=1,It[144]=It[26]=-1,St[144]=St[26]=0,Ct[144]=Ct[26]=0,qt[144]=qt[26]=1,Bt[144]=Bt[26]=0,zt[144]=zt[26]=1,Ft[144]=Ft[26]=0,kt[144]=kt[26]=1,Gt[144]=Gt[26]=1,Et[144]=Et[26]=-1,bt[144]=bt[26]=0,wt[144]=wt[26]=1,Nt[36]=Nt[134]=0,Pt[36]=Pt[134]=1,Mt[36]=Mt[134]=1,Tt[36]=Tt[134]=0,At[36]=At[134]=1,Dt[36]=Dt[134]=0,vt[36]=vt[134]=0,_t[36]=_t[134]=-1,xt[36]=xt[134]=1,Et[36]=Et[134]=1,bt[36]=bt[134]=0,wt[36]=wt[134]=0,It[9]=It[161]=-1,St[9]=St[161]=0,Ct[9]=Ct[161]=0,Nt[9]=Nt[161]=0,Pt[9]=Pt[161]=-1,Mt[9]=Mt[161]=0,Lt[9]=Lt[161]=1,Ot[9]=Ot[161]=0,Rt[9]=Rt[161]=0,qt[9]=qt[161]=1,Bt[9]=Bt[161]=0,zt[9]=zt[161]=1,It[136]=0,St[136]=1,Ct[136]=1,Nt[136]=0,Pt[136]=1,Mt[136]=0,Tt[136]=-1,At[136]=0,Dt[136]=1,Lt[136]=-1,Ot[136]=0,Rt[136]=0,qt[136]=0,Bt[136]=-1,zt[136]=0,Ft[136]=0,kt[136]=-1,Gt[136]=1,vt[136]=1,_t[136]=0,xt[136]=0,Et[136]=1,bt[136]=0,wt[136]=1,It[34]=0,St[34]=-1,Ct[34]=0,Nt[34]=0,Pt[34]=-1,Mt[34]=1,Tt[34]=1,At[34]=0,Dt[34]=0,Lt[34]=1,Ot[34]=0,Rt[34]=1,qt[34]=0,Bt[34]=1,zt[34]=1,Ft[34]=0,kt[34]=1,Gt[34]=0,vt[34]=-1,_t[34]=0,xt[34]=1,Et[34]=-1,bt[34]=0,wt[34]=0,It[35]=0,St[35]=1,Ct[35]=1,Nt[35]=0,Pt[35]=-1,Mt[35]=1,Tt[35]=1,At[35]=0,Dt[35]=0,Lt[35]=-1,Ot[35]=0,Rt[35]=0,qt[35]=0,Bt[35]=-1,zt[35]=0,Ft[35]=0,kt[35]=1,Gt[35]=0,vt[35]=-1,_t[35]=0,xt[35]=1,Et[35]=1,bt[35]=0,wt[35]=1,It[153]=0,St[153]=1,Ct[153]=1,Lt[153]=-1,Ot[153]=0,Rt[153]=0,qt[153]=0,Bt[153]=-1,zt[153]=0,Et[153]=1,bt[153]=0,wt[153]=1,Nt[102]=0,Pt[102]=-1,Mt[102]=1,Tt[102]=1,At[102]=0,Dt[102]=0,Ft[102]=0,kt[102]=1,Gt[102]=0,vt[102]=-1,_t[102]=0,xt[102]=1,It[155]=0,St[155]=-1,Ct[155]=0,Lt[155]=1,Ot[155]=0,Rt[155]=1,qt[155]=0,Bt[155]=1,zt[155]=1,Et[155]=-1,bt[155]=0,wt[155]=0,Nt[103]=0,Pt[103]=1,Mt[103]=0,Tt[103]=-1,At[103]=0,Dt[103]=1,Ft[103]=0,kt[103]=-1,Gt[103]=1,vt[103]=1,_t[103]=0,xt[103]=0,It[152]=0,St[152]=1,Ct[152]=1,Tt[152]=-1,At[152]=0,Dt[152]=1,Lt[152]=-1,Ot[152]=0,Rt[152]=0,qt[152]=0,Bt[152]=-1,zt[152]=0,Ft[152]=0,kt[152]=-1,Gt[152]=1,Et[152]=1,bt[152]=0,wt[152]=1,It[156]=0,St[156]=-1,Ct[156]=1,Tt[156]=1,At[156]=0,Dt[156]=1,Lt[156]=-1,Ot[156]=0,Rt[156]=0,qt[156]=0,Bt[156]=-1,zt[156]=0,Ft[156]=0,kt[156]=1,Gt[156]=1,Et[156]=-1,bt[156]=0,wt[156]=1,It[137]=0,St[137]=1,Ct[137]=1,Nt[137]=0,Pt[137]=1,Mt[137]=0,Lt[137]=-1,Ot[137]=0,Rt[137]=0,qt[137]=0,Bt[137]=-1,zt[137]=0,vt[137]=1,_t[137]=0,xt[137]=0,Et[137]=1,bt[137]=0,wt[137]=1,It[139]=0,St[139]=1,Ct[139]=1,Nt[139]=0,Pt[139]=-1,Mt[139]=0,Lt[139]=1,Ot[139]=0,Rt[139]=0,qt[139]=0,Bt[139]=1,zt[139]=0,vt[139]=-1,_t[139]=0,xt[139]=0,Et[139]=1,bt[139]=0,wt[139]=1,It[98]=0,St[98]=-1,Ct[98]=0,Nt[98]=0,Pt[98]=-1,Mt[98]=1,Tt[98]=1,At[98]=0,Dt[98]=0,Lt[98]=1,Ot[98]=0,Rt[98]=1,Ft[98]=0,kt[98]=1,Gt[98]=0,vt[98]=-1,_t[98]=0,xt[98]=1,It[99]=0,St[99]=1,Ct[99]=0,Nt[99]=0,Pt[99]=-1,Mt[99]=1,Tt[99]=1,At[99]=0,Dt[99]=0,Lt[99]=-1,Ot[99]=0,Rt[99]=1,Ft[99]=0,kt[99]=-1,Gt[99]=0,vt[99]=1,_t[99]=0,xt[99]=1,Nt[38]=0,Pt[38]=-1,Mt[38]=1,Tt[38]=1,At[38]=0,Dt[38]=0,qt[38]=0,Bt[38]=1,zt[38]=1,Ft[38]=0,kt[38]=1,Gt[38]=0,vt[38]=-1,_t[38]=0,xt[38]=1,Et[38]=-1,bt[38]=0,wt[38]=0,Nt[39]=0,Pt[39]=1,Mt[39]=1,Tt[39]=-1,At[39]=0,Dt[39]=0,qt[39]=0,Bt[39]=-1,zt[39]=1,Ft[39]=0,kt[39]=1,Gt[39]=0,vt[39]=-1,_t[39]=0,xt[39]=1,Et[39]=1,bt[39]=0,wt[39]=0;var Ju=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Zu=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Ku=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Qu=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},$u=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},tl=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},el=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},nl=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},W=[],H=[],$=[],Q=[],st=[],it=[],jt=[],Ut=[];Q[1]=st[1]=18,Q[169]=st[169]=18,$[4]=H[4]=12,$[166]=H[166]=12,W[16]=Ut[16]=4,W[154]=Ut[154]=4,it[64]=jt[64]=22,it[106]=jt[106]=22,$[2]=it[2]=17,Q[2]=st[2]=18,$[168]=it[168]=17,Q[168]=st[168]=18,W[8]=Q[8]=9,H[8]=$[8]=12,W[162]=Q[162]=9,H[162]=$[162]=12,W[32]=Ut[32]=4,H[32]=jt[32]=1,W[138]=Ut[138]=4,H[138]=jt[138]=1,st[128]=Ut[128]=21,it[128]=jt[128]=22,st[42]=Ut[42]=21,it[42]=jt[42]=22,H[5]=st[5]=14,H[165]=st[165]=14,$[20]=Ut[20]=6,$[150]=Ut[150]=6,W[80]=it[80]=11,W[90]=it[90]=11,Q[65]=jt[65]=3,Q[105]=jt[105]=3,W[160]=it[160]=11,H[160]=st[160]=14,W[10]=it[10]=11,H[10]=st[10]=14,$[130]=Ut[130]=6,Q[130]=jt[130]=3,$[40]=Ut[40]=6,Q[40]=jt[40]=3,H[101]=jt[101]=1,H[69]=jt[69]=1,st[149]=Ut[149]=21,st[21]=Ut[21]=21,$[86]=it[86]=17,$[84]=it[84]=17,W[89]=Q[89]=9,W[81]=Q[81]=9,W[96]=jt[96]=0,H[96]=it[96]=15,W[74]=jt[74]=0,H[74]=it[74]=15,W[24]=$[24]=8,Q[24]=Ut[24]=7,W[146]=$[146]=8,Q[146]=Ut[146]=7,H[6]=it[6]=15,$[6]=st[6]=16,H[164]=it[164]=15,$[164]=st[164]=16,Q[129]=Ut[129]=7,st[129]=jt[129]=20,Q[41]=Ut[41]=7,st[41]=jt[41]=20,$[66]=jt[66]=2,Q[66]=it[66]=19,$[104]=jt[104]=2,Q[104]=it[104]=19,W[144]=st[144]=10,it[144]=Ut[144]=23,W[26]=st[26]=10,it[26]=Ut[26]=23,H[36]=Ut[36]=5,$[36]=jt[36]=2,H[134]=Ut[134]=5,$[134]=jt[134]=2,W[9]=st[9]=10,H[9]=Q[9]=13,W[161]=st[161]=10,H[161]=Q[161]=13,H[37]=Ut[37]=5,st[37]=jt[37]=20,H[133]=Ut[133]=5,st[133]=jt[133]=20,$[148]=st[148]=16,it[148]=Ut[148]=23,$[22]=st[22]=16,it[22]=Ut[22]=23,W[82]=$[82]=8,Q[82]=it[82]=19,W[88]=$[88]=8,Q[88]=it[88]=19,W[73]=jt[73]=0,H[73]=Q[73]=13,W[97]=jt[97]=0,H[97]=Q[97]=13,W[145]=Q[145]=9,st[145]=Ut[145]=21,W[25]=Q[25]=9,st[25]=Ut[25]=21,H[70]=jt[70]=1,$[70]=it[70]=17,H[100]=jt[100]=1,$[100]=it[100]=17,W[34]=Q[34]=9,H[34]=$[34]=12,st[34]=Ut[34]=21,it[34]=jt[34]=22,W[136]=Ut[136]=4,H[136]=jt[136]=1,$[136]=it[136]=17,Q[136]=st[136]=18,W[35]=Ut[35]=4,H[35]=$[35]=12,Q[35]=st[35]=18,it[35]=jt[35]=22,W[153]=Ut[153]=4,Q[153]=st[153]=18,H[102]=$[102]=12,it[102]=jt[102]=22,W[155]=Q[155]=9,st[155]=Ut[155]=23,H[103]=jt[103]=1,$[103]=it[103]=17,W[152]=Ut[152]=4,$[152]=it[152]=17,Q[152]=st[152]=18,W[156]=$[156]=8,Q[156]=st[156]=18,it[156]=Ut[156]=23,W[137]=Ut[137]=4,H[137]=jt[137]=1,Q[137]=st[137]=18,W[139]=Ut[139]=4,H[139]=Q[139]=13,st[139]=jt[139]=20,W[98]=Q[98]=9,H[98]=$[98]=12,it[98]=jt[98]=22,W[99]=jt[99]=0,H[99]=$[99]=12,Q[99]=it[99]=19,H[38]=$[38]=12,st[38]=Ut[38]=21,it[38]=jt[38]=22,H[39]=Ut[39]=5,$[39]=st[39]=16,it[39]=jt[39]=22;var X=[];function w(t,e,n){return(t-e)/(n-e)}function rl(t){return t.constructor.toString().indexOf("Array")>-1}function Fd(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,l=n+i,h=[],c=!1;!c;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(a=(s=t.cells[l-=i][u-=r]).cval_real,-1===i)if(0===o)if(1&a)h.push([u,l]),r=-1,i=0,o=0;else{if(!(4&a)){h.push([u+s.bottomright,l]),r=0,i=1,o=1,c=!0;break}h.push([u+1,l]),r=1,i=0,o=0}else{if(!(1&a)){if(4&a){h.push([u+s.bottomright,l]),r=0,i=1,o=1,c=!0;break}h.push([u+s.bottomleft,l]),r=0,i=1,o=0,c=!0;break}h.push([u,l]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&_r)){if(a&un){h.push([u+s.topleft,l+1]),r=0,i=-1,o=0,c=!0;break}h.push([u+s.topright,l+1]),r=0,i=-1,o=1,c=!0;break}h.push([u+1,l+1]),r=1,i=0,o=1}else h.push([u+1,l+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&un)){if(1&a){h.push([u,l+s.leftbottom]),r=1,i=0,o=0,c=!0;break}h.push([u,l+s.lefttop]),r=1,i=0,o=1,c=!0;break}h.push([u,l+1]),r=0,i=1,o=0}else{if(!(a&un)){console.log("MarchingSquaresJS-isoBands: wtf");break}h.push([u,l+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){h.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,c=!0;break}h.push([u+1,l]),r=0,i=-1,o=1}else{if(!(4&a)){if(a&_r){h.push([u+1,l+s.righttop]),r=-1,i=0,o=1;break}h.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,c=!0;break}h.push([u+1,l]),r=0,i=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(1&a)){h.push([u+s.bottomright,l]),r=0,i=1,o=1,c=!0;break}h.push([u,l])}else{if(!(a&un)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,i=1,o=0;else{if(!(a&_r)){h.push([u+s.topleft,l+1]),r=0,i=-1,o=0,c=!0;break}h.push([u+1,l+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,i=0,o=1;else{if(!(4&a)){h.push([u+1,l+s.righttop]),r=-1,i=0,o=1,c=!0;break}h.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,i=0,o=0;else{if(!(a&un)){h.push([u,l+s.leftbottom]),r=1,i=0,o=0,c=!0;break}h.push([u,l+1]),r=0,i=1,o=0}}if(l+=i,(u+=r)===e&&l===n)break}return{path:h,i:u,j:l,x:r,y:i,o}}function kd(t){if(t.edges.length>0){var n=t.cval_real;switch(t.edges[t.edges.length-1]){case 0:return n&_r?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&_r?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&un?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&un?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&un?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&un?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&un?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&_r?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&un?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&_r?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Gd(t,e,n,r){var i,o,s,a,u,l=t.cval;switch(e){case-1:0===r?(i=H[l],s=Nt[l],a=Pt[l],u=Mt[l]):(i=W[l],s=It[l],a=St[l],u=Ct[l]);break;case 1:0===r?(i=st[l],s=qt[l],a=Bt[l],u=zt[l]):(i=it[l],s=Ft[l],a=kt[l],u=Gt[l]);break;default:switch(n){case-1:0===r?(i=jt[l],s=vt[l],a=_t[l],u=xt[l]):(i=Ut[l],s=Et[l],a=bt[l],u=wt[l]);break;case 1:0===r?(i=Q[l],s=Lt[l],a=Ot[l],u=Rt[l]):(i=$[l],s=Tt[l],a=At[l],u=Dt[l])}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(h,c){delete h.edges[c];for(var p=c+1;p<h.edges.length;p++)h.edges[p-1]=h.edges[p];h.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&_r?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&l?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&l?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&l?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&_r?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&l?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&l?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&l?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&l?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&l?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&l?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&un?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&l?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&l?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&l?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&un?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&l?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&un?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&l?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&un?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&un?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&_r?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&un?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&_r?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function qd(t){var e=[],n=[];t.forEach(function(i){var o=Bu(dt([i]));n.push(o),e.push({ring:i,area:o})}),n.sort(function(i,o){return o-i});var r=[];return n.forEach(function(i){for(var o=0;o<e.length;o++)if(e[o].area===i){r.push(e[o].ring),e.splice(o,1);break}}),r}function Bd(t){for(var e=t.map(function(a){return{lrCoordinates:a,grouped:!1}}),n=[];!jd(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=dt([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||zd(dt([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function zd(t,e){for(var n=pa(t),r=0;r<n.features.length;r++)if(!ae(n.features[r],e))return!1;return!0}function jd(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function jh(t,e,n){if(!Kt(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=mi(t)),!1!==i&&void 0!==i||(t=Je(t)),_e(t,function(o){var s=Ui(r,o)+e,a=ya(r,o),u=ot(vo(r,a,s));o[0]=u[0],o[1]=u[1]})),t}function Uh(t,e,n){if(!Kt(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Je(t)),"FeatureCollection"!==t.type||o?Vh(t,e,r):(Wt(t,function(s,a){t.features[a]=Vh(s,e,r)}),t)}function Vh(t,e,n){var r="Point"===En(t);return n=function(i,o){if(null==o&&(o="centroid"),Array.isArray(o)||"object"==typeof o)return re(o);var s=i.bbox?i.bbox:Ie(i),a=s[0],u=s[1],l=s[2],h=s[3];switch(o){case"sw":case"southwest":case"westsouth":case"bottomleft":return ft([a,u]);case"se":case"southeast":case"eastsouth":case"bottomright":return ft([l,u]);case"nw":case"northwest":case"westnorth":case"topleft":return ft([a,h]);case"ne":case"northeast":case"eastnorth":case"topright":return ft([l,h]);case"center":return ha(i);case void 0:case null:case"centroid":return mi(i);default:throw new Error("invalid origin")}}(t,n),1===e||r||_e(t,function(i){var o=ya(n,i),s=Ui(n,i),a=ot(vo(n,o*e,s));i[0]=a[0],i[1]=a[1],3===i.length&&(i[2]*=e)}),t}function xa(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function il(t,e){return t[0]*e[1]-e[0]*t[1]}function Xh(t,e,n){var r=[],i=ea(e,n),o=ot(t),s=[];return o.forEach(function(a,u){if(u!==o.length-1){var l=(p=a,g=o[u+1],d=i,m=Math.sqrt((p[0]-g[0])*(p[0]-g[0])+(p[1]-g[1])*(p[1]-g[1])),[[p[0]+d*(g[1]-p[1])/m,p[1]+d*(p[0]-g[0])/m],[g[0]+d*(g[1]-p[1])/m,g[1]+d*(p[0]-g[0])/m]]);if(r.push(l),u>0){var h=r[u-1],c=function Ud(t,e){return r=e,!(0===il(xa(t),xa(r)))&&function(n,r){var i,o,c,p,s=n[0],a=xa(n),u=r[0],l=xa(r),h=il(a,l);return function(c,p){return[c[0]+p[0],c[1]+p[1]]}(s,[(c=il([(i=u)[0]-(o=s)[0],i[1]-o[1]],l)/h)*(p=a)[0],c*p[1]])}(t,e);var r}(l,h);!1!==c&&(h[1]=c,l[0]=c),s.push(h[0]),u===o.length-2&&(s.push(l[0]),s.push(l[1]))}2===o.length&&(s.push(l[0]),s.push(l[1]))}var p,g,d,m}),Zt(s,t.properties)}function ol(t,e,n){var s;return((s=(e[0]-t[0])*(n[1]-e[1])-(n[0]-e[0])*(e[1]-t[1]))>0)-(s<0)||+s}function Yh(t,e){return e.geometry.coordinates[0].every(function(n){return ae(ft(n),t)})}X[1]=X[169]=Ju,X[4]=X[166]=Zu,X[16]=X[154]=Ku,X[64]=X[106]=Qu,X[168]=X[2]=$u,X[162]=X[8]=tl,X[138]=X[32]=el,X[42]=X[128]=nl,X[5]=X[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},X[20]=X[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},X[80]=X[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},X[65]=X[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},X[160]=X[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},X[130]=X[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},X[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},X[101]=X[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},X[149]=X[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},X[86]=X[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},X[89]=X[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},X[96]=X[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},X[24]=X[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},X[6]=X[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},X[129]=X[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},X[66]=X[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},X[144]=X[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},X[36]=X[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},X[9]=X[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},X[37]=X[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},X[148]=X[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},X[82]=X[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},X[73]=X[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},X[145]=X[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},X[70]=X[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},X[34]=function(t){return[nl(t),tl(t)]},X[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},X[136]=function(t){return[el(t),$u(t)]},X[153]=function(t){return[Ku(t),Ju(t)]},X[102]=function(t){return[Zu(t),Qu(t)]},X[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},X[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},X[152]=function(t){return[Ku(t),$u(t)]},X[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},X[137]=function(t){return[el(t),Ju(t)]},X[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},X[98]=function(t){return[tl(t),Qu(t)]},X[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},X[38]=function(t){return[Zu(t),nl(t)]},X[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Hh=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(e){return e.join(",")},t.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(n){return n.from.id!==e.from.id})},t.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(n){return n.to.id!==e.to.id})},t.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(n,r){var i=n.to,o=r.to;if(i.coordinates[0]-e.coordinates[0]>=0&&o.coordinates[0]-e.coordinates[0]<0)return 1;if(i.coordinates[0]-e.coordinates[0]<0&&o.coordinates[0]-e.coordinates[0]>=0)return-1;if(i.coordinates[0]-e.coordinates[0]==0&&o.coordinates[0]-e.coordinates[0]==0)return i.coordinates[1]-e.coordinates[1]>=0||o.coordinates[1]-e.coordinates[1]>=0?i.coordinates[1]-o.coordinates[1]:o.coordinates[1]-i.coordinates[1];var s=ol(e.coordinates,i.coordinates,o.coordinates);return s<0?1:s>0?-1:Math.pow(i.coordinates[0]-e.coordinates[0],2)+Math.pow(i.coordinates[1]-e.coordinates[1],2)-(Math.pow(o.coordinates[0]-e.coordinates[0],2)+Math.pow(o.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},t.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},t}(),Vd=function(){function t(e,n){this.from=e,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return Zt([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(e){return ol(e.from.coordinates,e.to.coordinates,this.to.coordinates)},t}(),Wh=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},t.prototype.get=function(e){return this.edges[e]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(e){this.edges.forEach(e)},t.prototype.map=function(e){return this.edges.map(e)},t.prototype.some=function(e){return this.edges.some(e)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var e=this,n=this.edges.reduce(function(s,a,u){return a.from.coordinates[1]>e.edges[s].from.coordinates[1]&&(s=u),s},0),r=(0===n?this.length:n)-1,i=(n+1)%this.length,o=ol(this.edges[r].from.coordinates,this.edges[n].from.coordinates,this.edges[i].from.coordinates);return 0===o?this.edges[r].from.coordinates[0]>this.edges[i].from.coordinates[0]:o>0},t.prototype.toMultiPoint=function(){return Qo(this.edges.map(function(e){return e.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(n){return n.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=dt([e])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=Uc(this.toPolygon())},t.findEdgeRingContaining=function(e,n){var r,i,o=e.getEnvelope();return n.forEach(function(s){var a,u,l,h,c,p,g=s.getEnvelope();if(i&&(r=i.getEnvelope()),u=o,l=(a=g).geometry.coordinates[0].map(function(y){return y[0]}),h=a.geometry.coordinates[0].map(function(y){return y[1]}),c=u.geometry.coordinates[0].map(function(y){return y[0]}),p=u.geometry.coordinates[0].map(function(y){return y[1]}),(Math.max.apply(null,l)!==Math.max.apply(null,c)||Math.max.apply(null,h)!==Math.max.apply(null,p)||Math.min.apply(null,l)!==Math.min.apply(null,c)||Math.min.apply(null,h)!==Math.min.apply(null,p))&&Yh(g,o)){for(var d=e.map(function(y){return y.from.coordinates}),m=void 0,f=function(y){s.some(function(v){return(x=y)[0]===(b=v.from.coordinates)[0]&&x[1]===b[1];var x,b})||(m=y)},_=0,I=d;_<I.length;_++)f(I[_]);m&&s.inside(ft(m))&&(i&&!Yh(r,g)||(i=s))}}),i},t.prototype.inside=function(e){return ae(e,this.toPolygon())},t}(),Xd=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(r){if(!r)throw new Error("No geojson passed");if("FeatureCollection"!==r.type&&"GeometryCollection"!==r.type&&"MultiLineString"!==r.type&&"LineString"!==r.type&&"Feature"!==r.type)throw new Error("Invalid input type '"+r.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return Ve(e,function(r){$o(r,"LineString","Graph::fromGeoJson"),au(r,function(i,o){if(i){var s=n.getNode(i),a=n.getNode(o);n.addEdge(s,a)}return o})}),n},t.prototype.getNode=function(e){var n=Hh.buildId(e),r=this.nodes[n];return r||(r=this.nodes[n]=new Hh(e)),r},t.prototype.addEdge=function(e,n){var r=new Vd(e,n),i=r.getSymetric();this.edges.push(r),this.edges.push(i)},t.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(n){return e.nodes[n]}).forEach(function(n){return e._removeIfDangle(n)})},t.prototype._removeIfDangle=function(e){var n=this;if(e.innerEdges.length<=1){var r=e.getOuterEdges().map(function(i){return i.to});this.removeNode(e),r.forEach(function(i){return n._removeIfDangle(i)})}},t.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(n){n.label===n.symetric.label&&(e.removeEdge(n.symetric),e.removeEdge(n))})},t.prototype._computeNextCWEdges=function(e){var n=this;void 0===e?Object.keys(this.nodes).forEach(function(r){return n._computeNextCWEdges(n.nodes[r])}):e.getOuterEdges().forEach(function(r,i){e.getOuterEdge((0===i?e.getOuterEdges().length:i)-1).symetric.next=r})},t.prototype._computeNextCCWEdges=function(e,n){for(var r,i,o=e.getOuterEdges(),s=o.length-1;s>=0;--s){var a=o[s],u=a.symetric,l=void 0,h=void 0;a.label===n&&(l=a),u.label===n&&(h=u),l&&h&&(h&&(i=h),l&&(i&&(i.next=l,i=void 0),r||(r=l)))}i&&(i.next=r)},t.prototype._findLabeledEdgeRings=function(){var e=[],n=0;return this.edges.forEach(function(r){if(!(r.label>=0)){e.push(r);var i=r;do{i.label=n,i=i.next}while(!r.isEqual(i));n++}}),e},t.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(r){r.label=void 0}),this._findLabeledEdgeRings().forEach(function(r){e._findIntersectionNodes(r).forEach(function(i){e._computeNextCCWEdges(i,r.label)})});var n=[];return this.edges.forEach(function(r){r.ring||n.push(e._findEdgeRing(r))}),n},t.prototype._findIntersectionNodes=function(e){var n=[],r=e,i=function(){var o=0;r.from.getOuterEdges().forEach(function(s){s.label===e.label&&++o}),o>1&&n.push(r.from),r=r.next};do{i()}while(!e.isEqual(r));return n},t.prototype._findEdgeRing=function(e){var n=e,r=new Wh;do{r.push(n),n.ring=r,n=n.next}while(!e.isEqual(n));return r},t.prototype.removeNode=function(e){var n=this;e.getOuterEdges().forEach(function(r){return n.removeEdge(r)}),e.innerEdges.forEach(function(r){return n.removeEdge(r)}),delete this.nodes[e.id]},t.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(n){return!n.isEqual(e)}),e.deleteEdge()},t}();function Jh(t,e){var n=!0;return Ve(t,function(r){Ve(e,function(i){if(!1===n)return!1;n=function(o,s){switch(o.type){case"Point":switch(s.type){case"Point":return!((a=o.coordinates)[0]===(u=s.coordinates)[0]&&a[1]===u[1]);case"LineString":return!Zh(s,o);case"Polygon":return!ae(o,s)}break;case"LineString":switch(s.type){case"Point":return!Zh(o,s);case"LineString":return!(ti(o,s).features.length>0);case"Polygon":return!Kh(s,o)}break;case"Polygon":switch(s.type){case"Point":return!ae(s,o);case"LineString":return!Kh(o,s);case"Polygon":return!function(l,h){for(var c=0,p=l.coordinates[0];c<p.length;c++)if(ae(p[c],h))return!0;for(var g=0,d=h.coordinates[0];g<d.length;g++)if(ae(d[g],l))return!0;return ti(gs(l),gs(h)).features.length>0}(s,o)}}var a,u;return!1}(r.geometry,i.geometry)})}),n}function Zh(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(Yd(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Kh(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(ae(r[n],t))return!0;return ti(e,gs(t)).features.length>0}function Yd(t,e,n){var o=e[0]-t[0],s=e[1]-t[1];return(n[0]-t[0])*s-(n[1]-t[1])*o==0&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function Qh(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function sl(t,e){return t[0]===e[0]&&t[1]===e[1]}function Hd(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function $h(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),np(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function tp(t,e){return ti(t,Ch(e)).features.length>0}function ep(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)ae(ft(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function np(t,e,n,r){var s=e[0]-t[0],a=e[1]-t[1];return(n[0]-t[0])*a-(n[1]-t[1])*s==0&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Fr=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Wd};function rp(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function ip(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Wd(t,e){return mo(t,e,{strict:!0})}Fr.prototype.compare=function(t,e){if(t.type!==e.type||!ip(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=rp(t),i=rp(e);return r.every(function(o){return this.some(function(s){return n.compare(o,s)})},i)}}return!1},Fr.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Fr.prototype.compareLine=function(t,e,n,r){if(!ip(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Fr.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Fr.prototype.comparePath=function(t,e){var n=this;return t.every(function(r,i){return n.compareCoord(r,this[i])},e)},Fr.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(o){return this.some(function(s){return i.compareLine(o,s,1,!0)})},r)}return!1},Fr.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Fr.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Fr.prototype.removePseudo=function(t){return t};var op=Fr;function sp(t,e){var n=!1;return Ve(t,function(r){Ve(e,function(i){if(!0===n)return!0;n=!Jh(r.geometry,i.geometry)})}),n}var Jd=Ar(function(t){function e(n,r,i,o){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(n,r,i,o)}e.prototype.run=function(n,r,i,o){this._init(n,r,i,o);for(var s=0;s<this._datasetLength;s++)if(1!==this._visited[s]){this._visited[s]=1;var a=this._regionQuery(s);if(a.length<this.minPts)this.noise.push(s);else{var u=this.clusters.length;this.clusters.push([]),this._addToCluster(s,u),this._expandCluster(u,a)}}return this.clusters},e.prototype._init=function(n,r,i,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this.noise=[],this._datasetLength=n.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}r&&(this.epsilon=r),i&&(this.minPts=i),o&&(this.distance=o)},e.prototype._expandCluster=function(n,r){for(var i=0;i<r.length;i++){var o=r[i];if(1!==this._visited[o]){this._visited[o]=1;var s=this._regionQuery(o);s.length>=this.minPts&&(r=this._mergeArrays(r,s))}1!==this._assigned[o]&&this._addToCluster(o,n)}},e.prototype._addToCluster=function(n,r){this.clusters[r].push(n),this._assigned[n]=1},e.prototype._regionQuery=function(n){for(var r=[],i=0;i<this._datasetLength;i++)this.distance(this.dataset[n],this.dataset[i])<this.epsilon&&r.push(i);return r},e.prototype._mergeArrays=function(n,r){for(var i=r.length,o=0;o<i;o++){var s=r[o];n.indexOf(s)<0&&n.push(s)}return n},e.prototype._euclideanDistance=function(n,r){for(var i=0,o=Math.min(n.length,r.length);o--;)i+=(n[o]-r[o])*(n[o]-r[o]);return Math.sqrt(i)},t.exports&&(t.exports=e)}),Zd=Ar(function(t){function e(n,r,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(n,r,i)}e.prototype.init=function(n,r,i){this.assignments=[],this.centroids=[],void 0!==n&&(this.dataset=n),void 0!==r&&(this.k=r),void 0!==i&&(this.distance=i)},e.prototype.run=function(n,r){this.init(n,r);for(var i=this.dataset.length,o=0;o<this.k;o++)this.centroids[o]=this.randomCentroid();for(var s=!0;s;){s=this.assign();for(var a=0;a<this.k;a++){for(var u=new Array(p),l=0,h=0;h<p;h++)u[h]=0;for(var c=0;c<i;c++){var p=this.dataset[c].length;if(a===this.assignments[c]){for(h=0;h<p;h++)u[h]+=this.dataset[c][h];l++}}if(l>0){for(h=0;h<p;h++)u[h]/=l;this.centroids[a]=u}else this.centroids[a]=this.randomCentroid(),s=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var n,r,i=this.dataset.length-1;do{r=Math.round(Math.random()*i),n=this.dataset[r]}while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var n,r=!1,i=this.dataset.length,o=0;o<i;o++)(n=this.argmin(this.dataset[o],this.centroids,this.distance))!=this.assignments[o]&&(this.assignments[o]=n,r=!0);return r},e.prototype.getClusters=function(){for(var n,r=new Array(this.k),i=0;i<this.assignments.length;i++)void 0===r[n=this.assignments[i]]&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(n,r,i){for(var o,s=Number.MAX_VALUE,a=0,u=r.length,l=0;l<u;l++)(o=i(n,r[l]))<s&&(s=o,a=l);return a},e.prototype.distance=function(n,r){for(var i=0,o=Math.min(n.length,r.length);o--;){var s=n[o]-r[o];i+=s*s}return Math.sqrt(i)},t.exports&&(t.exports=e)}),ap=Ar(function(t){function e(n,r,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(n,r,i)}e.prototype.insert=function(n,r){for(var i=this._queue.length,o=i;o--;){var s=this._priorities[o];"desc"===this._sorting?r>s&&(i=o):r<s&&(i=o)}this._insertAt(n,r,i)},e.prototype.remove=function(n){for(var r=this._queue.length;r--;)if(n===this._queue[r]){this._queue.splice(r,1),this._priorities.splice(r,1);break}},e.prototype.forEach=function(n){this._queue.forEach(n)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(n){return this._priorities[n]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var n=[],r=0,i=this._queue.length;r<i;r++)n.push([this._queue[r],this._priorities[r]]);return n},e.prototype._init=function(n,r,i){if(n&&r){if(this._queue=[],this._priorities=[],n.length!==r.length)throw new Error("Arrays must have the same length");for(var o=0;o<n.length;o++)this.insert(n[o],r[o])}i&&(this._sorting=i)},e.prototype._insertAt=function(n,r,i){this._queue.length===i?(this._queue.push(n),this._priorities.push(r)):(this._queue.splice(i,0,n),this._priorities.splice(i,0,r))},t.exports&&(t.exports=e)}),Kd=Ar(function(t){if(t.exports)var e=ap;function n(r,i,o,s){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(r,i,o,s)}n.prototype.run=function(r,i,o,s){this._init(r,i,o,s);for(var a=0,u=this.dataset.length;a<u;a++)if(1!==this._processed[a]){this._processed[a]=1,this.clusters.push([a]);var l=this.clusters.length-1;this._orderedList.push(a);var h=new e(null,null,"asc"),c=this._regionQuery(a);void 0!==this._distanceToCore(a)&&(this._updateQueue(a,c,h),this._expandCluster(l,h))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var r=[],i=0,o=this._orderedList.length;i<o;i++){var s=this._orderedList[i];r.push([s,this._reachability[s]])}return r},n.prototype._init=function(r,i,o,s){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),o&&(this.minPts=o),s&&(this.distance=s)},n.prototype._updateQueue=function(r,i,o){var s=this;this._coreDistance=this._distanceToCore(r),i.forEach(function(a){if(void 0===s._processed[a]){var u=s.distance(s.dataset[r],s.dataset[a]),l=Math.max(s._coreDistance,u);void 0===s._reachability[a]?(s._reachability[a]=l,o.insert(a,l)):l<s._reachability[a]&&(s._reachability[a]=l,o.remove(a),o.insert(a,l))}})},n.prototype._expandCluster=function(r,i){for(var o=i.getElements(),s=0,a=o.length;s<a;s++){var u=o[s];if(void 0===this._processed[u]){var l=this._regionQuery(u);this._processed[u]=1,this.clusters[r].push(u),this._orderedList.push(u),void 0!==this._distanceToCore(u)&&(this._updateQueue(u,l,i),this._expandCluster(r,i))}}},n.prototype._distanceToCore=function(r){for(var i=this.epsilon,o=0;o<i;o++)if(this._regionQuery(r,o).length>=this.minPts)return o},n.prototype._regionQuery=function(r,i){i=i||this.epsilon;for(var o=[],s=0,a=this.dataset.length;s<a;s++)this.distance(this.dataset[r],this.dataset[s])<i&&o.push(s);return o},n.prototype._euclideanDistance=function(r,i){for(var o=0,s=Math.min(r.length,i.length);s--;)o+=(r[s]-i[s])*(r[s]-i[s]);return Math.sqrt(o)},t.exports&&(t.exports=n)}),Qd=Ar(function(t){t.exports&&(t.exports={DBSCAN:Jd,KMEANS:Zd,OPTICS:Kd,PriorityQueue:ap})}),up=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},$d=up,t0=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},e0=up;function lp(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function o0(t,e){return ki(Ui(t[0],t[1]))===ki(Ui(e[0],e[1]))}function cp(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function hp(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Ea={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Ea.heuristics.manhattan,o=r.closest||!1,s=new pp(function(m){return m.f}),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return hp(u);u.closed=!0;for(var l=t.neighbors(u),h=0,c=l.length;h<c;++h){var p=l[h];if(!p.closed&&!p.isWall()){var g=u.g+p.getCost(u),d=p.visited;(!d||g<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=g,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),d?s.rescoreElement(p):s.push(p))}}}return o?hp(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function _o(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new ba(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function ba(t,e,n){this.x=t,this.y=e,this.weight=n}function pp(t){this.content=[],this.scoreFunction=t}function s0(t,e){for(var n=0;n<e.features.length;n++)if(ae(t,e.features[n]))return!0;return!1}function fp(t){return function(){return t}}function a0(t){return t[0]}function u0(t){return t[1]}function wa(){this._=null}function Ia(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ys(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ms(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function gp(t){for(;t.L;)t=t.L;return t}function vs(t,e,n,r){var i=[null,null],o=dn.push(i)-1;return i.left=t,i.right=e,n&&Sa(i,t,e,n),r&&Sa(i,e,t,r),jn[t.index].halfedges.push(o),jn[e.index].halfedges.push(o),i}function _s(t,e,n){var r=[e,n];return r.left=t,r}function Sa(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function l0(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],h=0,c=1,p=a[0]-u,g=a[1]-l;if(o=e-u,p||!(o>0)){if(o/=p,p<0){if(o<h)return;o<c&&(c=o)}else if(p>0){if(o>c)return;o>h&&(h=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>c)return;o>h&&(h=o)}else if(p>0){if(o<h)return;o<c&&(c=o)}if(o=n-l,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<c&&(c=o)}else if(g>0){if(o>c)return;o>h&&(h=o)}if(o=i-l,g||!(o<0)){if(o/=g,g<0){if(o>c)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<c&&(c=o)}return!(h>0||c<1)||(h>0&&(t[0]=[u+h*p,l+h*g]),c<1&&(t[1]=[u+c*p,l+c*g]),!0)}}}}}function c0(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,h=t.right,c=l[0],p=l[1],g=h[0],d=h[1],m=(c+g)/2;if(d===p){if(m<e||m>=r)return;if(c>g){if(u){if(u[1]>=i)return}else u=[m,n];o=[m,i]}else{if(u){if(u[1]<n)return}else u=[m,i];o=[m,n]}}else if(a=(p+d)/2-(s=(c-g)/(d-p))*m,s<-1||s>1)if(c>g){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function h0(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function dp(t,e){return e[+(e.left!==t.site)]}function p0(t,e){return e[+(e.left===t.site)]}_o.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Ea.cleanNode(this.nodes[t])},_o.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Ea.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},_o.prototype.markDirty=function(t){this.dirtyNodes.push(t)},_o.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},_o.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},ba.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},ba.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},ba.prototype.isWall=function(){return 0===this.weight},pp.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e&&(i=this.scoreFunction(this.content[s]))<r&&(a=s),o<e&&this.scoreFunction(this.content[o])<(null===a?r:i)&&(a=o),null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},wa.prototype={constructor:wa,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=gp(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ys(this,n),n=(t=n).U),n.C=!1,r.C=!0,ms(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ms(this,n),n=(t=n).U),n.C=!1,r.C=!0,ys(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?gp(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ys(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ms(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ys(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ms(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ys(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ms(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var al,yp=[];function f0(){Ia(this),this.x=this.y=this.arc=this.site=this.cy=null}function xo(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,h=o[0]-s,c=o[1]-a,p=2*(u*c-l*h);if(!(p>=-v0)){var g=u*u+l*l,d=h*h+c*c,m=(c*g-l*d)/p,f=(u*d-h*g)/p,_=yp.pop()||new f0;_.arc=t,_.site=i,_.x=m+s,_.y=(_.cy=f+a)+Math.sqrt(m*m+f*f),t.circle=_;for(var I=null,y=xs._;y;)if(_.y<y.y||_.y===y.y&&_.x<=y.x){if(!y.L){I=y.P;break}y=y.L}else{if(!y.R){I=y;break}y=y.R}xs.insert(I,_),I||(al=_)}}}}function Eo(t){var e=t.circle;e&&(e.P||(al=e.N),xs.remove(e),yp.push(e),Ia(e),t.circle=null)}var mp=[];function g0(){Ia(this),this.edge=this.site=this.circle=null}function vp(t){var e=mp.pop()||new g0;return e.site=t,e}function ul(t){Eo(t),bo.remove(t),mp.push(t),Ia(t)}function d0(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];ul(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<le&&Math.abs(r-u.circle.cy)<le;)o=u.P,a.unshift(u),ul(u),u=o;a.unshift(u),Eo(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<le&&Math.abs(r-l.circle.cy)<le;)s=l.N,a.push(l),ul(l),l=s;a.push(l),Eo(l);var h,c=a.length;for(h=1;h<c;++h)Sa((l=a[h]).edge,(u=a[h-1]).site,l.site,i);(l=a[c-1]).edge=vs((u=a[0]).site,l.site,null,i),xo(u),xo(l)}function y0(t){for(var e,n,r,i,o=t[0],s=t[1],a=bo._;a;)if((r=_p(a,s)-o)>le)a=a.L;else{if(!((i=o-m0(a,s))>le)){r>-le?(e=a.P,n=a):i>-le?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}var x;jn[(x=t).index]={site:x,halfedges:[]};var u=vp(t);if(bo.insert(e,u),e||n){if(e===n)return Eo(e),n=vp(e.site),bo.insert(u,n),u.edge=n.edge=vs(e.site,u.site),xo(e),void xo(n);if(n){Eo(e),Eo(n);var l=e.site,h=l[0],c=l[1],p=t[0]-h,g=t[1]-c,d=n.site,m=d[0]-h,f=d[1]-c,_=2*(p*f-g*m),I=p*p+g*g,y=m*m+f*f,v=[(f*I-g*y)/_+h,(p*y-m*I)/_+c];Sa(n.edge,l,d,v),u.edge=vs(l,t,null,v),n.edge=vs(t,d,null,v),xo(e),xo(n)}else u.edge=vs(e.site,u.site)}}function _p(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var h=a-r,c=1/o-1/l,p=h/l;return c?(-p+Math.sqrt(p*p-2*c*(h*h/(-2*l)-u+l/2+i-o/2)))/c+r:(r+a)/2}function m0(t,e){var n=t.N;if(n)return _p(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var bo,jn,xs,dn,le=1e-6,v0=1e-12;function _0(t,e){return e[1]-t[1]||e[0]-t[0]}function ll(t,e){var n,r,i,o=t.sort(_0).pop();for(dn=[],jn=new Array(t.length),bo=new wa,xs=new wa;;)if(i=al,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(y0(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;d0(i.arc)}if(function(){for(var h,c,p,g,d=0,m=jn.length;d<m;++d)if((h=jn[d])&&(g=(c=h.halfedges).length)){var f=new Array(g),_=new Array(g);for(p=0;p<g;++p)f[p]=p,_[p]=h0(h,dn[c[p]]);for(f.sort(function(I,y){return _[y]-_[I]}),p=0;p<g;++p)_[p]=c[f[p]];for(p=0;p<g;++p)c[p]=_[p]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];(function(h,c,p,g){for(var d,m=dn.length;m--;)c0(d=dn[m],h,c,p,g)&&l0(d,h,c,p,g)&&(Math.abs(d[0][0]-d[1][0])>le||Math.abs(d[0][1]-d[1][1])>le)||delete dn[m]})(s,a,u,l),function(h,c,p,g){var d,m,f,_,I,y,v,x,b,E,A,C,F=jn.length,P=!0;for(d=0;d<F;++d)if(m=jn[d]){for(f=m.site,_=(I=m.halfedges).length;_--;)dn[I[_]]||I.splice(_,1);for(_=0,y=I.length;_<y;)A=(E=p0(m,dn[I[_]]))[0],C=E[1],x=(v=dp(m,dn[I[++_%y]]))[0],b=v[1],(Math.abs(A-x)>le||Math.abs(C-b)>le)&&(I.splice(_,0,dn.push(_s(f,E,Math.abs(A-h)<le&&g-C>le?[h,Math.abs(x-h)<le?b:g]:Math.abs(C-g)<le&&p-A>le?[Math.abs(b-g)<le?x:p,g]:Math.abs(A-p)<le&&C-c>le?[p,Math.abs(x-p)<le?b:c]:Math.abs(C-c)<le&&A-h>le?[Math.abs(b-c)<le?x:h,c]:null))-1),++y);y&&(P=!1)}if(P){var q,R,O,M=1/0;for(d=0,P=null;d<F;++d)(m=jn[d])&&(O=(q=(f=m.site)[0]-h)*q+(R=f[1]-c)*R)<M&&(M=O,P=m);if(P){var k=[h,c],T=[h,g],B=[p,g],S=[p,c];P.halfedges.push(dn.push(_s(f=P.site,k,T))-1,dn.push(_s(f,T,B))-1,dn.push(_s(f,B,S))-1,dn.push(_s(f,S,k))-1)}}for(d=0;d<F;++d)(m=jn[d])&&(m.halfedges.length||delete jn[d])}(s,a,u,l)}this.edges=dn,this.cells=jn,bo=xs=dn=jn=null}function x0(t){return(t=t.slice()).push(t[0]),dt([t])}function xp(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!Kt(r))throw new Error("options must be an object");if(!De(i))throw new Error("steps must be a number");if(!De(s))throw new Error("angle must be a number");var l=re(t);if("degrees"===o)var h=Ae(s);else e=vo(t,e,90,{units:o}),n=vo(t,n,0,{units:o}),e=re(e)[0]-l[0],n=re(n)[1]-l[1];for(var c=[],p=0;p<i;p+=1){var g=-360*p/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Ep(g),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Ep(g),2));if(g<-90&&g>=-270&&(d=-d),g<-180&&g>=-360&&(m=-m),"degrees"===o){var f=d*Math.cos(h)+m*Math.sin(h),_=m*Math.cos(h)-d*Math.sin(h);d=f,m=_}c.push([d+l[0],m+l[1]])}return c.push(c[0]),"degrees"===o?dt([c],u):jh(dt([c],u),s,{pivot:a})}function Ep(t){var e=t*Math.PI/180;return Math.tan(e)}function cl(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return Rn(t,function(o,s,a){var u=e.weight?a?.[e.weight]:void 0;if(!De(u=u??1))throw new Error("weight value must be a number for feature index "+s);(u=Number(u))>0&&_e(o,function(l){n+=l[0]*u,r+=l[1]*u,i+=u})}),ft([n/i,r/i],e.properties,e)}function bp(t,e,n,r,i){var o=r.tolerance||.001,s=0,a=0,u=0,l=0;if(Wt(n,function(p){var g,m=(null===(g=p.properties)||void 0===g?void 0:g.weight)??1;if(!De(m=Number(m)))throw new Error("weight value must be a number");if(m>0){l+=1;var f=m*Qt(p,t);0===f&&(f=1);var _=m/f;s+=p.geometry.coordinates[0]*_,a+=p.geometry.coordinates[1]*_,u+=_}}),l<1)throw new Error("no features to measure");var h=s/u,c=a/u;return 1===l||0===i||Math.abs(h-e[0])<o&&Math.abs(c-e[1])<o?ft([h,c],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([h,c]),bp([h,c],t,n,r,i-1))}function wp(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function E0(t,e){var n=0,r=0;_e(t,function(i,o,s,a,u){u>n&&(n=u,r=o,e.push([]));var h=t.coordinates[u][o-r+1],c=i[0],p=i[1],g=h[0],d=h[1];e[u].push([.75*c+.25*g,.75*p+.25*d]),e[u].push([.25*c+.75*g,.25*p+.75*d])},!0),e.forEach(function(i){i.push(i[0])})}function b0(t,e){var n=0,r=0,i=0;_e(t,function(o,s,a,u,l){u>i&&(i=u,r=s,e.push([[]])),l>n&&(n=l,r=s,e[u].push([]));var c=t.coordinates[u][l][s-r+1],p=o[0],g=o[1],d=c[0],m=c[1];e[u][l].push([.75*p+.25*d,.75*g+.25*m]),e[u][l].push([.25*p+.75*d,.25*g+.75*m])},!0),e.forEach(function(o){o.forEach(function(s){s.push(s[0])})})}function w0(t,e,n){void 0===n&&(n=2);var r=re(t),i=re(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function Ip(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];Wt(t,function(g){a.push(mi(g))});for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var h=l;h<a.length;h++){l===h&&(u[l][h]=0);var c=w0(a[l],a[h],r);u[l][h]=c,u[h][l]=c}for(l=0;l<a.length;l++)for(h=0;h<a.length;h++)0!==(c=u[l][h])&&(u[l][h]=i?c<=n?1:0:c<=n?Math.pow(c,o):0);if(s)for(l=0;l<a.length;l++){var p=u[l].reduce(function(g,d){return g+d},0);for(h=0;h<a.length;h++)u[l][h]=u[l][h]/p}return u}function Sp(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function Cp(t,e){return void 0===e&&(e={}),Pp(t,"mercator",e)}function Np(t,e){return void 0===e&&(e={}),Pp(t,"wgs84",e)}function Pp(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&De(t[0])?t="mercator"===e?Mp(t):Lp(t):(!0!==r&&(t=Je(t)),_e(t,function(i){var o="mercator"===e?Mp(i):Lp(i);i[0]=o[0],i[1]=o[1]})),t}function Mp(t){var o,e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*(o=t[0],o<0?-1:o>0?1:0))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function Lp(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}ll.prototype={constructor:ll,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(r){return dp(e,t[r])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,l,h=n.site,c=-1,p=e[i[o-1]],g=p.left===h?p.right:p.left;++c<o;)s=g,g=(p=e[i[c]]).left===h?p.right:p.left,s&&g&&r<s.index&&r<g.index&&((a=h)[0]-(l=g)[0])*((u=s)[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0&&t.push([h.data,s.data,g.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],h=u*u+l*l;do{i=o.cells[r=s],s=null,i.halfedges.forEach(function(c){var p=o.edges[c],g=p.left;if(g!==i.site&&g||(g=p.right)){var d=t-g[0],m=e-g[1],f=d*d+m*m;f<h&&(h=f,s=g.index)}})}while(null!==s);return o._found=r,null==n||h<=n*n?i.site:null}};var I0=Object.freeze({__proto__:null,toMercator:Cp,toWgs84:Np});function Es(t){return Array.isArray(t)?Dp(t):t&&t.bbox?Dp(t.bbox):[360*Ap(),180*Ap()]}function Op(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(ft(Es(e.bbox)));return rt(n)}function Rp(t,e){void 0===e&&(e={}),null==t&&(t=1),De(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),De(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(o){var s,a=[],u=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(Array(e.num_vertices+1)).map(Math.random);u.forEach(function(l,h,c){c[h]=h>0?l+c[h-1]:l}),u.forEach(function(l){l=2*l*Math.PI/u[u.length-1];var h=Math.random();a.push([h*(e.max_radial_length||10)*Math.sin(l),h*(e.max_radial_length||10)*Math.cos(l)])}),a[a.length-1]=a[0],a=a.map((s=Es(e.bbox),function(l){return[l[0]+s[0],l[1]+s[1]]})),n.push(dt([a]))},i=0;i<t;i++)r();return rt(n)}function Tp(t,e){if(void 0===e&&(e={}),!Kt(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!De(r)||void 0===r||r<2)&&(r=10),De(i)&&void 0!==i||(i=1e-4),De(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Es(n)],l=0;l<r-1;l++){var h=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,c=Math.random()*i;u.push([u[l][0]+c*Math.cos(h),u[l][1]+c*Math.sin(h)])}s.push(Zt(u))}return rt(s)}function Ap(){return Math.random()-.5}function Dp(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var C0=Object.freeze({__proto__:null,randomPosition:Es,randomPoint:Op,randomPolygon:Rp,randomLineString:Tp});function Fp(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return Wt(t,function(r){Ca(r.properties,e)&&n.push(r)}),rt(n)}function hl(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=pl(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(rt(u),s,o)}}function kp(t,e,n,r){var i=r;return hl(t,e,function(o,s,a){i=0===a&&void 0===r?o:n(i,o,s,a)}),i}function pl(t,e){var n={};return Wt(t,function(r,i){var o=r.properties||{};if(Object.prototype.hasOwnProperty.call(o,String(e))){var s=o[e];Object.prototype.hasOwnProperty.call(n,s)?n[s].push(i):n[s]=[i]}}),n}function Ca(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ca(t,e[r]))return!1;return!0}return fl(t,e)}function fl(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Gp(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var N0=Object.freeze({__proto__:null,getCluster:Fp,clusterEach:hl,clusterReduce:kp,createBins:pl,applyFilter:Ca,propertiesContainsFilter:fl,filterProperties:Gp}),vi=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function P0(t,e){return t>e?1:t<e?-1:0}function _i(t,e,n){for(var r=new vi(null,null),i=r,o=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0)||null===e.right||n(t,e.right.key)>0&&(e.right=(a=e.right).left,a.left=e,null===(e=a).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function gl(t,e,n,r){var i=new vi(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=_i(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function qp(t,e,n){var r=null,i=null;if(e){var o=n((e=_i(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function dl(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&dl(t.left,o,!1,r,i),t.right&&dl(t.right,o,!0,r,i)}}var yl=function(){function t(e){void 0===e&&(e=P0),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,n){return this._size++,this._root=gl(e,n,this._root,this._comparator)},t.prototype.add=function(e,n){var r=new vi(e,n);null===this._root&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=_i(e,this._root,i),s=i(e,o.key);return 0===s?this._root=o:(s<0?(r.left=o.left,r.right=o,o.left=null):s>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,n,r){var i;return null===n?null:0===r(e,(n=_i(e,n,r)).key)?(null===n.left?i=n.right:(i=_i(e,n.left,r)).right=n.right,this._size--,i):n},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=_i(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(0===i)return n;n=i<0?n.left:n.right}return null},t.prototype.find=function(e){return this._root&&(this._root=_i(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},t.prototype.contains=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(0===i)return!0;n=i<0?n.left:n.right}return!1},t.prototype.forEach=function(e,n){for(var r=this._root,i=[],o=!1;!o;)null!==r?(i.push(r),r=r.left):0!==i.length?(r=i.pop(),e.call(n,r),r=r.right):o=!0;return this},t.prototype.range=function(e,n,r,i){for(var o=[],s=this._comparator,a=this._root;0!==o.length||a;)if(a)o.push(a),a=a.left;else{if(s((a=o.pop()).key,n)>0)break;if(s(a.key,e)>=0&&r.call(i,a))return this;a=a.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(n){return e.push(n.key)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(n){return e.push(n.data)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===e)return n;i++,n=n.right}else r=!0;return null},t.prototype.next=function(e){var n=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(e.key,n.key);if(0===o)break;o<0?(r=n,n=n.left):n=n.right}return r},t.prototype.prev=function(e){var n=this._root,r=null;if(null!==e.left){for(r=e.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(e.key,n.key);if(0===o)break;o<0?n=n.left:(r=n,n=n.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(e){for(var n=e,r=[],i=!1,o=new vi(null,null),s=o;!i;)n?(r.push(n),n=n.left):r.length>0?n=(n=s=s.next=r.pop()).right:i=!0;return s.next=null,o.next}(this._root)},t.prototype.load=function(e,n,r){void 0===n&&(n=[]),void 0===r&&(r=!1);var i=e.length,o=this._comparator;if(r&&_l(e,n,0,i-1,o),null===this._root)this._root=ml(e,n,0,i),this._size=i;else{var s=function(a,u,l){for(var h=new vi(null,null),c=h,p=a,g=u;null!==p&&null!==g;)l(p.key,g.key)<0?(c.next=p,p=p.next):(c.next=g,g=g.next),c=c.next;return null!==p?c.next=p:null!==g&&(c.next=g),h.next}(this.toList(),function(a,u){for(var l=new vi(null,null),h=l,c=0;c<a.length;c++)h=h.next=new vi(a[c],u[c]);return h.next=null,l.next}(e,n),o);this._root=vl({head:s},0,i=this._size+i)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){void 0===e&&(e=function(r){return String(r.key)});var n=[];return dl(this._root,"",!0,function(r){return n.push(r)},e),n.join("")},t.prototype.update=function(e,n,r){var u,l,i=this._comparator,o=qp(e,this._root,i),s=o.left,a=o.right;i(e,n)<0?a=gl(n,r,a,i):s=gl(n,r,s,i),this._root=(u=s,null===(l=a)?u:(null===u||((l=_i(u.key,l,i)).left=u),l))},t.prototype.split=function(e){return qp(e,this._root,this._comparator)},t}();function ml(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),u=new vi(t[o],e[o]);return u.left=ml(t,e,n,o),u.right=ml(t,e,o+1,r),u}return null}function vl(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=vl(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=vl(t,i+1,n),s}return null}function _l(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}_l(t,e,n,a,i),_l(t,e,a+1,r,i)}}function tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bn(t,e,n){return e&&Bp(t.prototype,e),n&&Bp(t,n),t}var bs=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},xl=function(t,e){return e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y?null:{ll:{x:t.ll.x<e.ll.x?e.ll.x:t.ll.x,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:t.ur.x<e.ur.x?t.ur.x:e.ur.x,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},xi=Number.EPSILON;void 0===xi&&(xi=Math.pow(2,-52));var M0=xi*xi,El=function(t,e){if(-xi<t&&t<xi&&-xi<e&&e<xi)return 0;var n=t-e;return n*n<M0*t*e?0:t<e?-1:1},L0=function(){function t(){tr(this,t),this.reset()}return bn(t,[{key:"reset",value:function(){this.xRounder=new zp,this.yRounder=new zp}},{key:"round",value:function(e,n){return{x:this.xRounder.round(e),y:this.yRounder.round(n)}}}]),t}(),zp=function(){function t(){tr(this,t),this.tree=new yl,this.round(0)}return bn(t,[{key:"round",value:function(e){var n=this.tree.add(e),r=this.tree.prev(n);if(null!==r&&0===El(n.key,r.key))return this.tree.remove(e),r.key;var i=this.tree.next(n);return null!==i&&0===El(n.key,i.key)?(this.tree.remove(e),i.key):e}}]),t}(),ws=new L0,Is=function(t,e){return t.x*e.y-t.y*e.x},jp=function(t,e){return t.x*e.x+t.y*e.y},Up=function(t,e,n){var o=Is({x:e.x-t.x,y:e.y-t.y},{x:n.x-t.x,y:n.y-t.y});return El(o,0)},Na=function(t){return Math.sqrt(jp(t,t))},O0=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return jp(i,r)/Na(i)/Na(r)},Vp=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},Xp=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},kr=function(){function t(e,n){tr(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return bn(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Pa.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,n){return e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0}}]),bn(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var n=e.point.events,r=0,i=n.length;r<i;r++){var o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,n=0;n<e;n++){var r=this.point.events[n];if(void 0===r.segment.consumedBy)for(var i=n+1;i<e;i++){var o=this.point.events[i];void 0===o.consumedBy&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],n=0,r=this.point.events.length;n<r;n++){var i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}},{key:"getLeftmostComparator",value:function(e){var n=this,r=new Map,i=function(o){var s,a,u,l,h,c=o.otherSE;r.set(o,{sine:(s=n.point,a=e.point,u=c.point,l={x:a.x-s.x,y:a.y-s.y},h={x:u.x-s.x,y:u.y-s.y},Is(h,l)/Na(h)/Na(l)),cosine:O0(n.point,e.point,c.point)})};return function(o,s){r.has(o)||i(o),r.has(s)||i(s);var a=r.get(o),u=a.sine,l=a.cosine,h=r.get(s),c=h.sine,p=h.cosine;return u>=0&&c>=0?l<p?1:l>p?-1:0:u<0&&c<0?l<p?-1:l>p?1:0:c<u?-1:c>u?1:0}}}]),t}(),R0=0,Pa=function(){function t(e,n,r,i){tr(this,t),this.id=++R0,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return bn(t,null,[{key:"compare",value:function(e,n){var r=e.leftSE.point.x,i=n.leftSE.point.x,o=e.rightSE.point.x,s=n.rightSE.point.x;if(s<r)return 1;if(o<i)return-1;var a=e.leftSE.point.y,u=n.leftSE.point.y,l=e.rightSE.point.y,h=n.rightSE.point.y;if(r<i){if(u<a&&u<l)return 1;if(u>a&&u>l)return-1;var c=e.comparePoint(n.leftSE.point);if(c<0)return 1;if(c>0)return-1;var p=n.comparePoint(e.rightSE.point);return 0!==p?p:-1}if(r>i){if(a<u&&a<h)return-1;if(a>u&&a>h)return 1;var g=n.comparePoint(e.leftSE.point);if(0!==g)return g;var d=e.comparePoint(n.rightSE.point);return d<0?1:d>0?-1:1}if(a<u)return-1;if(a>u)return 1;if(o<s){var m=n.comparePoint(e.rightSE.point);if(0!==m)return m}if(o>s){var f=e.comparePoint(n.rightSE.point);if(f<0)return 1;if(f>0)return-1}if(o!==s){var _=l-a,I=o-r,y=h-u,v=s-i;if(_>I&&y<v)return 1;if(_<I&&y>v)return-1}return o>s?1:o<s||l<h?-1:l>h?1:e.id<n.id?-1:e.id>n.id?1:0}}]),bn(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<n?e:n},ur:{x:this.rightSE.point.x,y:e>n?e:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return e.x===n.x?0:e.x<n.x?1:-1;if(e.x===n.x+(e.y-n.y)/i.y*i.x)return 0;var u=n.y+(e.x-n.x)/i.x*i.y;return e.y===u?0:e.y<u?-1:1}},{key:"getIntersection",value:function(e){var n=this.bbox(),r=e.bbox(),i=xl(n,r);if(null===i)return null;var o=this.leftSE.point,s=this.rightSE.point,a=e.leftSE.point,u=e.rightSE.point,l=bs(n,a)&&0===this.comparePoint(a),h=bs(r,o)&&0===e.comparePoint(o),c=bs(n,u)&&0===this.comparePoint(u),p=bs(r,s)&&0===e.comparePoint(s);if(h&&l)return p&&!c?s:!p&&c?u:null;if(h)return c&&o.x===u.x&&o.y===u.y?null:o;if(l)return p&&s.x===a.x&&s.y===a.y?null:a;if(p&&c)return null;if(p)return s;if(c)return u;var g=function(d,m,f,_){if(0===m.x)return Xp(f,_,d.x);if(0===_.x)return Xp(d,m,f.x);if(0===m.y)return Vp(f,_,d.y);if(0===_.y)return Vp(d,m,f.y);var I=Is(m,_);if(0==I)return null;var y={x:f.x-d.x,y:f.y-d.y},v=Is(y,m)/I,x=Is(y,_)/I;return{x:(d.x+x*m.x+(f.x+v*_.x))/2,y:(d.y+x*m.y+(f.y+v*_.y))/2}}(o,this.vector(),a,e.vector());return null===g?null:bs(i,g)?ws.round(g.x,g.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new kr(e,!0),o=new kr(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return kr.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),kr.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],h=r.windings[a],c=n.rings.indexOf(l);-1===c?(n.rings.push(l),n.windings.push(h)):n.windings[c]+=h}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys,o=0,s=this.rings.length;o<s;o++){var a=this.rings[o],u=this.windings[o],l=n.indexOf(a);-1===l?(n.push(a),r.push(u)):r[l]+=u}for(var h=[],c=[],p=0,g=n.length;p<g;p++)if(0!==r[p]){var d=n[p],m=d.poly;if(-1===c.indexOf(m))if(d.isExterior)h.push(m);else{-1===c.indexOf(m)&&c.push(m);var f=h.indexOf(d.poly);-1!==f&&h.splice(f,1)}}for(var _=0,I=h.length;_<I;_++){var y=h[_].multiPoly;-1===i.indexOf(y)&&i.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(xr.type){case"union":this._isInResult=0===e.length!=(0===n.length);break;case"intersection":var o,s;e.length<n.length?(o=e.length,s=n.length):(o=n.length,s=e.length),this._isInResult=s===xr.numMultiPolys&&o<s;break;case"xor":var a=Math.abs(e.length-n.length);this._isInResult=a%2==1;break;case"difference":var u=function(l){return 1===l.length&&l[0].isSubject};this._isInResult=u(e)!==u(n);break;default:throw new Error("Unrecognized operation type found ".concat(xr.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=kr.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new kr(i,!0),new kr(o,!1),[r],[s])}}]),t}(),Yp=function(){function t(e,n,r){if(tr(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=ws.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=ws.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Pa.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(Pa.fromRing(o,i,this))}return bn(t,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,r=this.segments.length;n<r;n++){var i=this.segments[n];e.push(i.leftSE),e.push(i.rightSE)}return e}}]),t}(),T0=function(){function t(e,n){if(tr(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Yp(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new Yp(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return bn(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),n=0,r=this.interiorRings.length;n<r;n++)for(var i=this.interiorRings[n].getSweepEvents(),o=0,s=i.length;o<s;o++)e.push(i[o]);return e}}]),t}(),Hp=function(){function t(e,n){if(tr(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new T0(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return bn(t,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,r=this.polys.length;n<r;n++)for(var i=this.polys[n].getSweepEvents(),o=0,s=i.length;o<s;o++)e.push(i[o]);return e}}]),t}(),A0=function(){function t(e){tr(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return bn(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],h=a.point,c=[];s=a,l.push(a=u),a.point!==h;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var g=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(g.x,",")+" ".concat(g.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===p.length){u=p[0].otherSE;break}for(var m=null,f=0,_=c.length;f<_;f++)if(c[f].point===a.point){m=f;break}if(null===m){c.push({index:l.length,point:a.point});var I=a.getLeftmostComparator(s);u=p.sort(I)[0].otherSE;break}var y=c.splice(m)[0],v=l.splice(y.index);v.unshift(v[0].otherSE),n.push(new t(v.reverse()))}n.push(new t(l))}}return n}}]),bn(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,n=[e],r=1,i=this.events.length-1;r<i;r++){var o=this.events[r].point;0!==Up(o,e,this.events[r+1].point)&&(n.push(o),e=o)}if(1===n.length)return null;0===Up(n[0],e,n[1])&&n.shift(),n.push(n[0]);for(var l=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:n.length-1,c=this.isExteriorRing()?n.length:-1,p=[],g=h;g!=c;g+=l)p.push([n[g].x,n[g].y]);return p}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],n=1,r=this.events.length;n<r;n++){var i=this.events[n];kr.compare(e,i)>0&&(e=i)}for(var o=e.segment.prevInResult(),s=o?o.prevInResult():null;;){if(!o)return null;if(!s)return o.ringOut;if(s.ringOut!==o.ringOut)return s.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=s.prevInResult(),s=o?o.prevInResult():null}}}]),t}(),Wp=function(){function t(e){tr(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return bn(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();null!==i&&e.push(i)}return e}}]),t}(),D0=function(){function t(e){tr(this,t),this.rings=e,this.polys=this._composePolys(e)}return bn(t,[{key:"getGeom",value:function(){for(var e=[],n=0,r=this.polys.length;n<r;n++){var i=this.polys[n].getGeom();null!==i&&e.push(i)}return e}},{key:"_composePolys",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(!o.poly)if(o.isExteriorRing())n.push(new Wp(o));else{var s=o.enclosingRing();s.poly||n.push(new Wp(s)),s.poly.addInterior(o)}}return n}}]),t}(),F0=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa.compare;tr(this,t),this.queue=e,this.tree=new yl(n),this.segments=[]}return bn(t,[{key:"process",value:function(e){var n=e.segment,r=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(n),r;var i=e.isLeft?this.tree.insert(n):this.tree.find(n);if(!i)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,s=i,a=void 0,u=void 0;void 0===a;)null===(o=this.tree.prev(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);for(;void 0===u;)null===(s=this.tree.next(s))?u=null:void 0===s.key.consumedBy&&(u=s.key);if(e.isLeft){var l=null;if(a){var h=a.getIntersection(n);if(null!==h&&(n.isAnEndpoint(h)||(l=h),!a.isAnEndpoint(h)))for(var c=this._splitSafely(a,h),p=0,g=c.length;p<g;p++)r.push(c[p])}var d=null;if(u){var m=u.getIntersection(n);if(null!==m&&(n.isAnEndpoint(m)||(d=m),!u.isAnEndpoint(m)))for(var f=this._splitSafely(u,m),_=0,I=f.length;_<I;_++)r.push(f[_])}if(null!==l||null!==d){var y;y=null===l?d:null===d||kr.comparePoints(l,d)<=0?l:d,this.queue.remove(n.rightSE),r.push(n.rightSE);for(var v=n.split(y),x=0,b=v.length;x<b;x++)r.push(v[x])}r.length>0?(this.tree.remove(n),r.push(e)):(this.segments.push(n),n.prev=a)}else{if(a&&u){var E=a.getIntersection(u);if(null!==E){if(!a.isAnEndpoint(E))for(var A=this._splitSafely(a,E),C=0,F=A.length;C<F;C++)r.push(A[C]);if(!u.isAnEndpoint(E))for(var P=this._splitSafely(u,E),q=0,R=P.length;q<R;q++)r.push(P[q])}}this.tree.remove(n)}return r}},{key:"_splitSafely",value:function(e,n){this.tree.remove(e);var r=e.rightSE;this.queue.remove(r);var i=e.split(n);return i.push(r),void 0===e.consumedBy&&this.tree.insert(e),i}}]),t}(),Jp=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,k0=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,xr=new(function(){function t(){tr(this,t)}return bn(t,[{key:"run",value:function(e,n,r){xr.type=e,ws.reset();for(var i=[new Hp(n,!0)],o=0,s=r.length;o<s;o++)i.push(new Hp(r[o],!1));if(xr.numMultiPolys=i.length,"difference"===xr.type)for(var a=i[0],u=1;u<i.length;)null!==xl(i[u].bbox,a.bbox)?u++:i.splice(u,1);if("intersection"===xr.type)for(var l=0,h=i.length;l<h;l++)for(var c=i[l],p=l+1,g=i.length;p<g;p++)if(null===xl(c.bbox,i[p].bbox))return[];for(var d=new yl(kr.compare),m=0,f=i.length;m<f;m++)for(var _=i[m].getSweepEvents(),I=0,y=_.length;I<y;I++)if(d.insert(_[I]),d.size>Jp)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var v=new F0(d),x=d.size,b=d.pop();b;){var E=b.key;if(d.size===x){var A=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(A.id," ")+"[".concat(A.leftSE.point.x,", ").concat(A.leftSE.point.y,"] -> ")+"[".concat(A.rightSE.point.x,", ").concat(A.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>Jp)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(v.segments.length>k0)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var C=v.process(E),F=0,P=C.length;F<P;F++){var q=C[F];void 0===q.consumedBy&&d.insert(q)}x=d.size,b=d.pop()}ws.reset();var R=A0.factory(v.segments);return new D0(R).getGeom()}}]),t}()),ni={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return xr.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return xr.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return xr.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return xr.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var Xi=function(){};Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi},Xi.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var ce=function(t){function e(n){t.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),at=function(){},Zp={MAX_VALUE:{configurable:!0}};at.isNaN=function(t){return Number.isNaN(t)},at.doubleToLongBits=function(t){return t},at.longBitsToDouble=function(t){return t},at.isInfinite=function(t){return!Number.isFinite(t)},Zp.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(at,Zp);var An=function(){},Ma=function(){},wo=function(){};function Dn(){}var L=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Yi={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};L.prototype.setOrdinate=function(t,e){switch(t){case L.X:this.x=e;break;case L.Y:this.y=e;break;case L.Z:this.z=e;break;default:throw new ce("Invalid ordinate index: "+t)}},L.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!Xi.equalsWithTolerance(this.x,e.x,n)&&!!Xi.equalsWithTolerance(this.y,e.y,n)}},L.prototype.getOrdinate=function(t){switch(t){case L.X:return this.x;case L.Y:return this.y;case L.Z:return this.z}throw new ce("Invalid ordinate index: "+t)},L.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||at.isNaN(this.z))&&at.isNaN(t.z)},L.prototype.equals=function(t){return t instanceof L&&this.equals2D(t)},L.prototype.equalInZ=function(t,e){return Xi.equalsWithTolerance(this.z,t.z,e)},L.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},L.prototype.clone=function(){},L.prototype.copy=function(){return new L(this)},L.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},L.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},L.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},L.prototype.hashCode=function(){var t=17;return 37*(t=37*t+L.hashCode(this.x))+L.hashCode(this.y)},L.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},L.prototype.interfaces_=function(){return[An,Ma,Dn]},L.prototype.getClass=function(){return L},L.hashCode=function(){if(1===arguments.length){var e=at.doubleToLongBits(arguments[0]);return Math.trunc((e^e)>>>32)}},Yi.DimensionalComparator.get=function(){return ri},Yi.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Yi.NULL_ORDINATE.get=function(){return at.NaN},Yi.X.get=function(){return 0},Yi.Y.get=function(){return 1},Yi.Z.get=function(){return 2},Object.defineProperties(L,Yi);var ri=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new ce("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};ri.prototype.compare=function(t,e){var n=t,r=e,i=ri.compare(n.x,r.x);if(0!==i)return i;var o=ri.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:ri.compare(n.z,r.z)},ri.prototype.interfaces_=function(){return[wo]},ri.prototype.getClass=function(){return ri},ri.compare=function(t,e){return t<e?-1:t>e?1:at.isNaN(t)?at.isNaN(e)?0:-1:at.isNaN(e)?1:0};var Io=function(){};Io.prototype.create=function(){},Io.prototype.interfaces_=function(){return[]},Io.prototype.getClass=function(){return Io};var D=function(){},Ss={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};D.prototype.interfaces_=function(){return[]},D.prototype.getClass=function(){return D},D.toLocationSymbol=function(t){switch(t){case D.EXTERIOR:return"e";case D.BOUNDARY:return"b";case D.INTERIOR:return"i";case D.NONE:return"-"}throw new ce("Unknown location value: "+t)},Ss.INTERIOR.get=function(){return 0},Ss.BOUNDARY.get=function(){return 1},Ss.EXTERIOR.get=function(){return 2},Ss.NONE.get=function(){return-1},Object.defineProperties(D,Ss);var nt=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},wn=function(){},Kp={LOG_10:{configurable:!0}};wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn},wn.log10=function(t){var e=Math.log(t);return at.isInfinite(e)||at.isNaN(e)?e:e/wn.LOG_10},wn.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},wn.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},wn.wrap=function(t,e){return t<0?e- -t%e:t%e},wn.max=function(){if(3===arguments.length){var e=arguments[1],n=arguments[2],r=arguments[0];return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[0];return o>u&&(u=o),s>u&&(u=s),a>u&&(u=a),u}},wn.average=function(t,e){return(t+e)/2},Kp.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(wn,Kp);var er=function(t){this.str=t};er.prototype.append=function(t){this.str+=t},er.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},er.prototype.toString=function(t){return this.str};var nr=function(t){this.value=t};nr.prototype.intValue=function(){return this.value},nr.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},nr.isNaN=function(t){return Number.isNaN(t)};var Cs=function(){};Cs.isWhitespace=function(t){return t<=32&&t>=0||127===t},Cs.toUpperCase=function(t){return t.toUpperCase()};var G=function t(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},Un={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};G.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},G.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=G.magnitude(n._hi),i=G.TEN.pow(r);(n=n.divide(i)).gt(G.TEN)?(n=n.divide(G.TEN),r+=1):n.lt(G.ONE)&&(n=n.multiply(G.TEN),r-=1);for(var o=r+1,s=new er,a=G.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var h=!1,c=0;l>9?(h=!0,c="9"):c="0"+l,s.append(c),n=n.subtract(G.valueOf(l)).multiply(G.TEN),h&&n.selfAdd(G.TEN);var p=!0,g=G.magnitude(n._hi);if(g<0&&Math.abs(g)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},G.prototype.sqr=function(){return this.multiply(this)},G.prototype.doubleValue=function(){return this._hi+this._lo},G.prototype.subtract=function(){return arguments[0]instanceof G?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},G.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},G.prototype.isZero=function(){return 0===this._hi&&0===this._lo},G.prototype.selfSubtract=function(){if(arguments[0]instanceof G){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},G.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},G.prototype.min=function(t){return this.le(t)?this:t},G.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof G){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var o,a,u,h,n=arguments[0],i=null,s=null,l=null,c=null;return c=(i=(l=G.SPLIT*(u=this._hi/n))-(i=l-u))*(s=(c=G.SPLIT*n)-(s=c-n))-(h=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,c=u+(l=(this._hi-h-c+this._lo-u*arguments[1])/n),this._hi=c,this._lo=u-c+l,this}},G.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},G.prototype.divide=function(){if(arguments[0]instanceof G){var n,i,o,a,t=arguments[0],e=null,r=null,s=null,u=null;n=(o=this._hi/t._hi)-(e=(s=G.SPLIT*o)-(e=s-o)),u=e*(r=(u=G.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var l=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi);return new G(l,o-u+s)}if("number"==typeof arguments[0]){var c=arguments[0];return at.isNaN(c)?G.createNaN():G.copy(this).selfDivide(c,0)}},G.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},G.prototype.pow=function(t){if(0===t)return G.valueOf(1);var e=new G(this),n=G.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},G.prototype.ceil=function(){if(this.isNaN())return G.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new G(t,e)},G.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},G.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},G.prototype.setValue=function(){return arguments[0]instanceof G||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},G.prototype.max=function(t){return this.ge(t)?this:t},G.prototype.sqrt=function(){if(this.isZero())return G.valueOf(0);if(this.isNegative())return G.NaN;var t=1/Math.sqrt(this._hi),n=G.valueOf(this._hi*t),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},G.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof G){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n,r,i,s,a,e=arguments[0],o=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var h,c,g,f,u=arguments[0],l=arguments[1],p=null,d=null,m=null;d=(g=this._hi+u)-(m=g-this._hi),p=(c=this._lo+l)-(f=c-this._lo);var _=(h=g+(m=(d=u-m+(this._hi-d))+c))+(m=(p=l-f+(this._lo-p))+(m+(g-h))),I=m+(h-_);return this._hi=_,this._lo=I,this}},G.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof G){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var o,a,n=arguments[0],i=null,s=null,u=null,l=null;i=(u=G.SPLIT*this._hi)-this._hi,i=u-i;var h=(u=this._hi*n)+(l=i*(s=(l=G.SPLIT*n)-(s=l-n))-u+i*(a=n-s)+(o=this._hi-i)*s+o*a+(this._hi*arguments[1]+this._lo*n)),c=l+(i=u-h);return this._hi=h,this._lo=c,this}},G.prototype.selfSqr=function(){return this.selfMultiply(this)},G.prototype.floor=function(){if(this.isNaN())return G.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new G(t,e)},G.prototype.negate=function(){return this.isNaN()?this:new G(-this._hi,-this._lo)},G.prototype.clone=function(){},G.prototype.multiply=function(){if(arguments[0]instanceof G){var t=arguments[0];return t.isNaN()?G.createNaN():G.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return at.isNaN(e)?G.createNaN():G.copy(this).selfMultiply(e,0)}},G.prototype.isNaN=function(){return at.isNaN(this._hi)},G.prototype.intValue=function(){return Math.trunc(this._hi)},G.prototype.toString=function(){var t=G.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},G.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;return"."===n.charAt(0)?i="0"+n:r<0?i="0."+G.stringOfChar("0",-r)+n:-1===n.indexOf(".")&&(i=n+G.stringOfChar("0",r-n.length)+".0"),this.isNegative()?"-"+i:i},G.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=G.SPLIT*n)-(i=s-n)),o=(a=G.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new G(u,n-u+s)},G.prototype.toSciNotation=function(){if(this.isZero())return G.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=G.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},G.prototype.abs=function(){return this.isNaN()?G.NaN:this.isNegative()?this.negate():new G(this)},G.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},G.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},G.prototype.add=function(){if(arguments[0]instanceof G){var t=arguments[0];return G.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return G.copy(this).selfAdd(e)}},G.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof G){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var r=arguments[1];this._hi=arguments[0],this._lo=r}},G.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},G.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},G.prototype.trunc=function(){return this.isNaN()?G.NaN:this.isPositive()?this.floor():this.ceil()},G.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},G.prototype.interfaces_=function(){return[Dn,An,Ma]},G.prototype.getClass=function(){return G},G.sqr=function(t){return G.valueOf(t).selfMultiply(t)},G.valueOf=function(){return"string"==typeof arguments[0]?G.parse(arguments[0]):"number"==typeof arguments[0]?new G(arguments[0]):void 0},G.sqrt=function(t){return G.valueOf(t).sqrt()},G.parse=function(t){for(var e=0,n=t.length;Cs.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new G,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,Cs.isDigit(l)){var h=l-"0";o.selfMultiply(G.TEN),o.selfAdd(h),s++}else{if("."!==l){if("e"===l||"E"===l){var c=t.substring(e);try{u=nr.parseInt(c)}catch(f){throw f instanceof Error?new Error("Invalid exponent "+c+" in string "+t):f}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var p=o,g=s-a-u;if(0===g)p=o;else if(g>0){var d=G.TEN.pow(g);p=o.divide(d)}else if(g<0){var m=G.TEN.pow(-g);p=o.multiply(m)}return r?p.negate():p},G.createNaN=function(){return new G(at.NaN,at.NaN)},G.copy=function(t){return new G(t)},G.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},G.stringOfChar=function(t,e){for(var n=new er,r=0;r<e;r++)n.append(t);return n.toString()},Un.PI.get=function(){return new G(3.141592653589793,12246467991473532e-32)},Un.TWO_PI.get=function(){return new G(6.283185307179586,24492935982947064e-32)},Un.PI_2.get=function(){return new G(1.5707963267948966,6123233995736766e-32)},Un.E.get=function(){return new G(2.718281828459045,14456468917292502e-32)},Un.NaN.get=function(){return new G(at.NaN,at.NaN)},Un.EPS.get=function(){return 123259516440783e-46},Un.SPLIT.get=function(){return 134217729},Un.MAX_PRINT_DIGITS.get=function(){return 32},Un.TEN.get=function(){return G.valueOf(10)},Un.ONE.get=function(){return G.valueOf(1)},Un.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Un.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(G,Un);var ln=function(){},Qp={DP_SAFE_EPSILON:{configurable:!0}};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.orientationIndex=function(t,e,n){var r=ln.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=G.valueOf(e.x).selfAdd(-t.x),o=G.valueOf(e.y).selfAdd(-t.y),s=G.valueOf(n.x).selfAdd(-e.x),a=G.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},ln.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},ln.intersection=function(t,e,n,r){var i=G.valueOf(r.y).selfSubtract(n.y).selfMultiply(G.valueOf(e.x).selfSubtract(t.x)),o=G.valueOf(r.x).selfSubtract(n.x).selfMultiply(G.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=G.valueOf(r.x).selfSubtract(n.x).selfMultiply(G.valueOf(t.y).selfSubtract(n.y)),u=G.valueOf(r.y).selfSubtract(n.y).selfMultiply(G.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),h=G.valueOf(t.x).selfAdd(G.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),c=G.valueOf(e.x).selfSubtract(t.x).selfMultiply(G.valueOf(t.y).selfSubtract(n.y)),p=G.valueOf(e.y).selfSubtract(t.y).selfMultiply(G.valueOf(t.x).selfSubtract(n.x)),g=c.subtract(p).selfDivide(s).doubleValue(),d=G.valueOf(n.y).selfAdd(G.valueOf(r.y).selfSubtract(n.y).selfMultiply(g)).doubleValue();return new L(h,d)},ln.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return ln.signum(s);r=i+o}else{if(!(i<0)||o>=0)return ln.signum(s);r=-i-o}var a=ln.DP_SAFE_EPSILON*r;return s>=a||-s>=a?ln.signum(s):2},ln.signum=function(t){return t>0?1:t<0?-1:0},Qp.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(ln,Qp);var mt=function(){},Ns={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Ns.X.get=function(){return 0},Ns.Y.get=function(){return 1},Ns.Z.get=function(){return 2},Ns.M.get=function(){return 3},mt.prototype.setOrdinate=function(t,e,n){},mt.prototype.size=function(){},mt.prototype.getOrdinate=function(t,e){},mt.prototype.getCoordinate=function(){},mt.prototype.getCoordinateCopy=function(t){},mt.prototype.getDimension=function(){},mt.prototype.getX=function(t){},mt.prototype.clone=function(){},mt.prototype.expandEnvelope=function(t){},mt.prototype.copy=function(){},mt.prototype.getY=function(t){},mt.prototype.toCoordinateArray=function(){},mt.prototype.interfaces_=function(){return[Ma]},mt.prototype.getClass=function(){return mt},Object.defineProperties(mt,Ns);var $p=function(){},So=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($p),Fe=function(){};Fe.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Fe.getProperty=function(t){return{"line.separator":"\n"}[t]};var Vn=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[1];this.x=arguments[0],this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof L&&arguments[1]instanceof L){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[1],h=arguments[2];this.x=arguments[0],this.y=l,this.w=h}else if(4===arguments.length){var c=arguments[0],p=arguments[1],g=arguments[2],d=arguments[3],m=c.y-p.y,f=p.x-c.x,_=c.x*p.y-p.x*c.y,I=g.y-d.y,y=d.x-g.x,v=g.x*d.y-d.x*g.y;this.x=f*v-y*_,this.y=I*_-m*v,this.w=m*y-I*f}};Vn.prototype.getY=function(){var t=this.y/this.w;if(at.isNaN(t)||at.isInfinite(t))throw new So;return t},Vn.prototype.getX=function(){var t=this.x/this.w;if(at.isNaN(t)||at.isInfinite(t))throw new So;return t},Vn.prototype.getCoordinate=function(){var t=new L;return t.x=this.getX(),t.y=this.getY(),t},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn},Vn.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,h=i*u-a*o,c=(o*l-u*s)/h,p=(a*s-i*l)/h;if(at.isNaN(c)||at.isInfinite(c)||at.isNaN(p)||at.isInfinite(p))throw new So;return new L(c,p)};var Z=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof L){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},tf={serialVersionUID:{configurable:!0}};Z.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Z.prototype.equals=function(t){if(!(t instanceof Z))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Z.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new Z:new Z(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},Z.prototype.isNull=function(){return this._maxx<this._minx},Z.prototype.getMaxX=function(){return this._maxx},Z.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Z){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Z.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof L){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Z.prototype.getMinY=function(){return this._miny},Z.prototype.getMinX=function(){return this._minx},Z.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Z){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Z.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Z.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Z.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Z.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Z.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Z.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Z.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Z.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Z.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Z.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Z)return this.covers(arguments[0]);if(arguments[0]instanceof L)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},Z.prototype.centre=function(){return this.isNull()?null:new L((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Z.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Z){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Z.prototype.getMaxY=function(){return this._maxy},Z.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Z.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+L.hashCode(this._minx))+L.hashCode(this._maxx))+L.hashCode(this._miny))+L.hashCode(this._maxy)},Z.prototype.interfaces_=function(){return[An,Dn]},Z.prototype.getClass=function(){return Z},Z.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),h=Math.max(r.x,i.x);return!(l>u||h<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),h=Math.max(r.y,i.y),l>u||h<a))}},tf.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Z,tf);var rr={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},La=function(t){this.geometryFactory=t||new pt};La.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var i=rr.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=rr.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),Co[n]&&(e=Co[n].apply(this,[i[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},La.prototype.write=function(t){return this.extractGeometry(t)},La.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Gr[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Gr[e].apply(this,[t])+")"};var Gr={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Gr.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Gr.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Gr.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Gr.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Gr.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Gr.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Gr.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Gr.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Co={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(rr.spaces);return this.geometryFactory.createPoint(new L(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(rr.trimParens,"$1"),r.push(Co.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(rr.spaces),r.push(new L(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(rr.spaces),r.push(new L(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(rr.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(rr.trimParens,"$1"),r.push(Co.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(rr.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(rr.trimParens,"$1"),n=Co.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(rr.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(rr.trimParens,"$1"),r.push(Co.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Xn=function(t){this.parser=new La(t)};Xn.prototype.write=function(t){return this.parser.write(t)},Xn.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var qr=function(t){function e(n){t.call(this,n),this.name="RuntimeException",this.message=n,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Oa=function(t){function e(){t.call(this),0===arguments.length?t.call(this):1===arguments.length&&t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qr),lt=function(){};lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt},lt.shouldNeverReachHere=function(){if(0===arguments.length)lt.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Oa("Should never reach here"+(null!==t?": "+t:""))}},lt.isTrue=function(){var t;if(1===arguments.length)lt.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Oa:new Oa(t)},lt.equals=function(){var t,e,n;if(2===arguments.length)lt.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new Oa("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var he=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new L,this._intPt[1]=new L,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Hi={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};he.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},he.prototype.getTopologySummary=function(){var t=new er;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},he.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},he.prototype.getIntersectionNum=function(){return this._result},he.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},he.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},he.prototype.setPrecisionModel=function(t){this._precisionModel=t},he.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},he.prototype.getIntersection=function(t){return this._intPt[t]},he.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},he.prototype.hasIntersection=function(){return this._result!==he.NO_INTERSECTION},he.prototype.getEdgeDistance=function(t,e){return he.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},he.prototype.isCollinear=function(){return this._result===he.COLLINEAR_INTERSECTION},he.prototype.toString=function(){return Xn.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Xn.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},he.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},he.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},he.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},he.prototype.interfaces_=function(){return[]},he.prototype.getClass=function(){return he},he.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return lt.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},he.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return lt.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Hi.DONT_INTERSECT.get=function(){return 0},Hi.DO_INTERSECT.get=function(){return 1},Hi.COLLINEAR.get=function(){return 2},Hi.NO_INTERSECTION.get=function(){return 0},Hi.POINT_INTERSECTION.get=function(){return 1},Hi.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(he,Hi);var Ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(n){var r=new Z(this._inputLines[0][0],this._inputLines[0][1]),i=new Z(this._inputLines[1][0],this._inputLines[1][1]);return r.contains(n)&&i.contains(n)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var n=arguments[0],r=arguments[1],i=arguments[2];if(this._isProper=!1,Z.intersects(r,i,n)&&0===V.orientationIndex(r,i,n)&&0===V.orientationIndex(i,r,n))return this._isProper=!0,(n.equals(r)||n.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(n,r,i,o,s){s.x=this.smallestInAbsValue(n.x,r.x,i.x,o.x),s.y=this.smallestInAbsValue(n.y,r.y,i.y,o.y),n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},e.prototype.safeHCoordinateIntersection=function(n,r,i,o){var s=null;try{s=Vn.intersection(n,r,i,o)}catch(a){if(!(a instanceof So))throw a;s=e.nearestEndpoint(n,r,i,o)}return s},e.prototype.intersection=function(n,r,i,o){var s=this.intersectionWithNormalization(n,r,i,o);return this.isInSegmentEnvelopes(s)||(s=new L(e.nearestEndpoint(n,r,i,o))),null!==this._precisionModel&&this._precisionModel.makePrecise(s),s},e.prototype.smallestInAbsValue=function(n,r,i,o){var s=n,a=Math.abs(s);return Math.abs(r)<a&&(s=r,a=Math.abs(r)),Math.abs(i)<a&&(s=i,a=Math.abs(i)),Math.abs(o)<a&&(s=o),s},e.prototype.checkDD=function(n,r,i,o,s){var a=ln.intersection(n,r,i,o),u=this.isInSegmentEnvelopes(a);Fe.out.println("DD in env = "+u+"  --------------------- "+a),s.distance(a)>1e-4&&Fe.out.println("Distance = "+s.distance(a))},e.prototype.intersectionWithNormalization=function(n,r,i,o){var s=new L(n),a=new L(r),u=new L(i),l=new L(o),h=new L;this.normalizeToEnvCentre(s,a,u,l,h);var c=this.safeHCoordinateIntersection(s,a,u,l);return c.x+=h.x,c.y+=h.y,c},e.prototype.computeCollinearIntersection=function(n,r,i,o){var s=Z.intersects(n,r,i),a=Z.intersects(n,r,o),u=Z.intersects(i,o,n),l=Z.intersects(i,o,r);return s&&a?(this._intPt[0]=i,this._intPt[1]=o,t.COLLINEAR_INTERSECTION):u&&l?(this._intPt[0]=n,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=i,this._intPt[1]=r,!i.equals(r)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=o,this._intPt[1]=n,!o.equals(n)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=o,this._intPt[1]=r,!o.equals(r)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(n,r,i,o,s){var a=n.x<r.x?n.x:r.x,u=n.y<r.y?n.y:r.y,l=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,c=i.x<o.x?i.x:o.x,p=i.y<o.y?i.y:o.y,g=i.x>o.x?i.x:o.x,d=i.y>o.y?i.y:o.y,f=((u>p?u:p)+(h<d?h:d))/2;s.x=((a>c?a:c)+(l<g?l:g))/2,s.y=f,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y,i.x-=s.x,i.y-=s.y,o.x-=s.x,o.y-=s.y},e.prototype.computeIntersect=function(n,r,i,o){if(this._isProper=!1,!Z.intersects(n,r,i,o))return t.NO_INTERSECTION;var s=V.orientationIndex(n,r,i),a=V.orientationIndex(n,r,o);if(s>0&&a>0||s<0&&a<0)return t.NO_INTERSECTION;var u=V.orientationIndex(i,o,n),l=V.orientationIndex(i,o,r);return u>0&&l>0||u<0&&l<0?t.NO_INTERSECTION:0===s&&0===a&&0===u&&0===l?this.computeCollinearIntersection(n,r,i,o):(0===s||0===a||0===u||0===l?(this._isProper=!1,n.equals2D(i)||n.equals2D(o)?this._intPt[0]=n:r.equals2D(i)||r.equals2D(o)?this._intPt[0]=r:0===s?this._intPt[0]=new L(i):0===a?this._intPt[0]=new L(o):0===u?this._intPt[0]=new L(n):0===l&&(this._intPt[0]=new L(r))):(this._isProper=!0,this._intPt[0]=this.intersection(n,r,i,o)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(n,r,i,o){var s=n,a=V.distancePointLine(n,i,o),u=V.distancePointLine(r,i,o);return u<a&&(a=u,s=r),(u=V.distancePointLine(i,n,r))<a&&(a=u,s=i),(u=V.distancePointLine(o,n,r))<a&&(a=u,s=o),s},e}(he),Wi=function(){};Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi},Wi.orientationIndex=function(t,e,n){return Wi.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},Wi.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0&&t<=n))return i}else{if(n>0||!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n||(e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var ir=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};ir.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var o=t.y-this._p.y,a=e.y-this._p.y,u=Wi.signOfDet2x2(t.x-this._p.x,o,e.x-this._p.x,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},ir.prototype.isPointInPolygon=function(){return this.getLocation()!==D.EXTERIOR},ir.prototype.getLocation=function(){return this._isPointOnSegment?D.BOUNDARY:this._crossingCount%2==1?D.INTERIOR:D.EXTERIOR},ir.prototype.isOnSegment=function(){return this._isPointOnSegment},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir},ir.locatePointInRing=function(){if(arguments[0]instanceof L&&nt(arguments[1],mt)){for(var e=arguments[1],n=new ir(arguments[0]),r=new L,i=new L,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof L&&arguments[1]instanceof Array){for(var a=arguments[1],u=new ir(arguments[0]),l=1;l<a.length;l++)if(u.countSegment(a[l],a[l-1]),u.isOnSegment())return u.getLocation();return u.getLocation()}};var V=function(){},Ji={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};V.prototype.interfaces_=function(){return[]},V.prototype.getClass=function(){return V},V.orientationIndex=function(t,e,n){return ln.orientationIndex(t,e,n)},V.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++)e+=(t[r].x-n)*(t[r-1].y-t[r+1].y);return e/2}if(nt(arguments[0],mt)){var a=arguments[0],u=a.size();if(u<3)return 0;var l=new L,h=new L,c=new L;a.getCoordinate(0,h),a.getCoordinate(1,c);var p=h.x;c.x-=p;for(var g=0,d=1;d<u-1;d++)l.y=h.y,h.x=c.x,h.y=c.y,a.getCoordinate(d+1,c),c.x-=p,g+=h.x*(l.y-c.y);return g/2}},V.distanceLineLine=function(t,e,n,r){if(t.equals(e))return V.distancePointLine(t,n,r);if(n.equals(r))return V.distancePointLine(r,t,e);var i=!1;if(Z.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=((t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y))/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?wn.min(V.distancePointLine(t,n,r),V.distancePointLine(e,n,r),V.distancePointLine(n,t,e),V.distancePointLine(r,t,e)):0},V.isPointInRing=function(t,e){return V.locatePointInRing(t,e)!==D.EXTERIOR},V.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new L;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,h=u-o;n+=Math.sqrt(l*l+h*h),i=a,o=u}return n},V.isCCW=function(t){var e=t.length-1;if(e<3)throw new ce("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var h=V.computeOrientation(u,n,l);return 0===h?u.x>l.x:h>0},V.locatePointInRing=function(t,e){return ir.locatePointInRing(t,e)},V.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r)*Math.sqrt(r)},V.computeOrientation=function(t,e,n){return V.orientationIndex(t,e,n)},V.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new ce("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=V.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;return l<=0?o.distance(s):l>=1?o.distance(a):Math.abs(((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u)*Math.sqrt(u)}},V.isOnLine=function(t,e){for(var n=new Ei,r=1;r<e.length;r++)if(n.computeIntersection(t,e[r-1],e[r]),n.hasIntersection())return!0;return!1},Ji.CLOCKWISE.get=function(){return-1},Ji.RIGHT.get=function(){return V.CLOCKWISE},Ji.COUNTERCLOCKWISE.get=function(){return 1},Ji.LEFT.get=function(){return V.COUNTERCLOCKWISE},Ji.COLLINEAR.get=function(){return 0},Ji.STRAIGHT.get=function(){return V.COLLINEAR},Object.defineProperties(V,Ji);var Br=function(){};Br.prototype.filter=function(t){},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br};var tt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Er={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};tt.prototype.isGeometryCollection=function(){return this.getSortIndex()===tt.SORTINDEX_GEOMETRYCOLLECTION},tt.prototype.getFactory=function(){return this._factory},tt.prototype.getGeometryN=function(t){return this},tt.prototype.getArea=function(){return 0},tt.prototype.isRectangle=function(){return!1},tt.prototype.equals=function(){if(arguments[0]instanceof tt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];return e instanceof tt&&this.equalsExact(e)}},tt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},tt.prototype.geometryChanged=function(){this.apply(tt.geometryChangedFilter)},tt.prototype.geometryChangedAction=function(){this._envelope=null},tt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},tt.prototype.getLength=function(){return 0},tt.prototype.getNumGeometries=function(){return 1},tt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},tt.prototype.getUserData=function(){return this._userData},tt.prototype.getSRID=function(){return this._SRID},tt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},tt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===tt.SORTINDEX_GEOMETRYCOLLECTION)throw new ce("This method does not support GeometryCollection arguments")},tt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},tt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},tt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},tt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Z(this._envelope)},tt.prototype.setSRID=function(t){this._SRID=t},tt.prototype.setUserData=function(t){this._userData=t},tt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},tt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},tt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===tt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===tt.SORTINDEX_MULTIPOINT||this.getSortIndex()===tt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===tt.SORTINDEX_MULTIPOLYGON},tt.prototype.interfaces_=function(){return[Ma,An,Dn]},tt.prototype.getClass=function(){return tt},tt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},tt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Er.serialVersionUID.get=function(){return 0x799ea46522854c00},Er.SORTINDEX_POINT.get=function(){return 0},Er.SORTINDEX_MULTIPOINT.get=function(){return 1},Er.SORTINDEX_LINESTRING.get=function(){return 2},Er.SORTINDEX_LINEARRING.get=function(){return 3},Er.SORTINDEX_MULTILINESTRING.get=function(){return 4},Er.SORTINDEX_POLYGON.get=function(){return 5},Er.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Er.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Er.geometryChangedFilter.get=function(){return bl},Object.defineProperties(tt,Er);var bl=function(){};bl.interfaces_=function(){return[Br]},bl.filter=function(t){t.geometryChangedAction()};var br=function(){};br.prototype.filter=function(t){},br.prototype.interfaces_=function(){return[]},br.prototype.getClass=function(){return br};var Fn=function(){},zr={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Fn.prototype.isInBoundary=function(t){},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},zr.Mod2BoundaryNodeRule.get=function(){return No},zr.EndPointBoundaryNodeRule.get=function(){return Po},zr.MultiValentEndPointBoundaryNodeRule.get=function(){return Mo},zr.MonoValentEndPointBoundaryNodeRule.get=function(){return Lo},zr.MOD2_BOUNDARY_RULE.get=function(){return new No},zr.ENDPOINT_BOUNDARY_RULE.get=function(){return new Po},zr.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Mo},zr.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Lo},zr.OGC_SFS_BOUNDARY_RULE.get=function(){return Fn.MOD2_BOUNDARY_RULE},Object.defineProperties(Fn,zr);var No=function(){};No.prototype.isInBoundary=function(t){return t%2==1},No.prototype.interfaces_=function(){return[Fn]},No.prototype.getClass=function(){return No};var Po=function(){};Po.prototype.isInBoundary=function(t){return t>0},Po.prototype.interfaces_=function(){return[Fn]},Po.prototype.getClass=function(){return Po};var Mo=function(){};Mo.prototype.isInBoundary=function(t){return t>1},Mo.prototype.interfaces_=function(){return[Fn]},Mo.prototype.getClass=function(){return Mo};var Lo=function(){};Lo.prototype.isInBoundary=function(t){return 1===t},Lo.prototype.interfaces_=function(){return[Fn]},Lo.prototype.getClass=function(){return Lo};var Se=function(){};function wl(t){this.message=t||""}Se.prototype.add=function(){},Se.prototype.addAll=function(){},Se.prototype.isEmpty=function(){},Se.prototype.iterator=function(){},Se.prototype.size=function(){},Se.prototype.toArray=function(){},Se.prototype.remove=function(){},(wl.prototype=new Error).name="IndexOutOfBoundsException";var Oo=function(){};Oo.prototype.hasNext=function(){},Oo.prototype.next=function(){},Oo.prototype.remove=function(){};var Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Se);function Ro(t){this.message=t||""}(Ro.prototype=new Error).name="NoSuchElementException";var U=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Se&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Se]},e.prototype.add=function(n){return 1===arguments.length?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(n){for(var r=n.iterator();r.hasNext();)this.add(r.next());return!0},e.prototype.set=function(n,r){var i=this.array_[n];return this.array_[n]=r,i},e.prototype.iterator=function(){return new G0(this)},e.prototype.get=function(n){if(n<0||n>=this.size())throw new wl;return this.array_[n]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var n=[],r=0,i=this.array_.length;r<i;r++)n.push(this.array_[r]);return n},e.prototype.remove=function(n){for(var r=!1,i=0,o=this.array_.length;i<o;i++)if(this.array_[i]===n){this.array_.splice(i,1),r=!0;break}return r},e}(Yn),G0=function(t){function e(n){t.call(this),this.arrayList_=n,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Ro;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Oo),Ps=function(t){function e(){if(t.call(this),0!==arguments.length)if(1===arguments.length){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(r){return this.get(r)},e.prototype.addAll=function(){if(2===arguments.length){for(var o=arguments[1],s=!1,a=arguments[0].iterator();a.hasNext();)this.add(a.next(),o),s=!0;return s}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var r=t.prototype.clone.call(this),i=0;i<this.size();i++)r.add(i,this.get(i).copy());return r},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var r=this;if(1===arguments.length)t.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof L&&"boolean"==typeof arguments[1]){var a=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(a))return null;t.prototype.add.call(this,a)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var p=arguments[0],g=arguments[1];if(arguments[2])for(var m=0;m<p.length;m++)r.add(p[m],g);else for(var f=p.length-1;f>=0;f--)r.add(p[f],g);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof L){var _=arguments[0],I=arguments[1];if(!arguments[2]){var v=this.size();if(v>0){if(_>0&&this.get(_-1).equals2D(I))return null;if(_<v&&this.get(_).equals2D(I))return null}}t.prototype.add.call(this,_,I)}}else if(4===arguments.length){var E=arguments[0],A=arguments[1],C=arguments[2],F=arguments[3],P=1;C>F&&(P=-1);for(var q=C;q!==F;q+=P)r.add(E[q],A);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new L(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(U),ht=function(){},Ra={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ra.ForwardComparator.get=function(){return Ms},Ra.BidirectionalComparator.get=function(){return To},Ra.coordArrayType.get=function(){return new Array(0).fill(null)},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht},ht.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},ht.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(ht.indexOf(r,e)<0)return r}return null},ht.scroll=function(t,e){var n=ht.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Fe.arraycopy(t,n,r,0,t.length-n),Fe.arraycopy(t,0,r,t.length-n,n),Fe.arraycopy(r,0,t,0,t.length)},ht.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i||r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},ht.intersection=function(t,e){for(var n=new Ps,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},ht.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},ht.removeRepeatedPoints=function(t){return ht.hasRepeatedPoints(t)?new Ps(t,!1).toCoordinateArray():t},ht.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},ht.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},ht.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new L(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new L(r[i+u])},ht.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},ht.envelope=function(t){for(var e=new Z,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},ht.toCoordinateArray=function(t){return t.toArray(ht.coordArrayType)},ht.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},ht.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},ht.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var r=t[e].compareTo(t[t.length-1-e]);if(0!==r)return r}return 1},ht.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},ht.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},ht.extract=function(t,e,n){e=wn.clamp(e,0,t.length);var r=(n=wn.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(ht,Ra);var Ms=function(){};Ms.prototype.compare=function(t,e){return ht.compare(t,e)},Ms.prototype.interfaces_=function(){return[wo]},Ms.prototype.getClass=function(){return Ms};var To=function(){};To.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=ht.compare(n,r);return ht.isEqualReversed(n,r)?0:i},To.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=ht.increasingDirection(n),o=ht.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0},To.prototype.interfaces_=function(){return[wo]},To.prototype.getClass=function(){return To};var Zi=function(){};Zi.prototype.get=function(){},Zi.prototype.put=function(){},Zi.prototype.size=function(){},Zi.prototype.values=function(){},Zi.prototype.entrySet=function(){};var q0=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Zi);function Ls(t){this.message=t||""}function Ta(){}(Ls.prototype=new Error).name="OperationNotSupported",(Ta.prototype=new Se).contains=function(){};var Il=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Se&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(n){for(var r=0,i=this.array_.length;r<i;r++)if(this.array_[r]===n)return!0;return!1},e.prototype.add=function(n){return!this.contains(n)&&(this.array_.push(n),!0)},e.prototype.addAll=function(n){for(var r=n.iterator();r.hasNext();)this.add(r.next());return!0},e.prototype.remove=function(n){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var n=[],r=0,i=this.array_.length;r<i;r++)n.push(this.array_[r]);return n},e.prototype.iterator=function(){return new B0(this)},e}(Ta),B0=function(t){function e(n){t.call(this),this.hashSet_=n,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Ro;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Ls},e}(Oo);function ef(t){return null===t?0:t.color}function ie(t){return null===t?null:t.parent}function jr(t,e){null!==t&&(t.color=e)}function Sl(t){return null===t?null:t.left}function nf(t){return null===t?null:t.right}function Xe(){this.root_=null,this.size_=0}(Xe.prototype=new q0).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Xe.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Xe.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(ie(t)===Sl(ie(ie(t)))){var n=nf(ie(ie(t)));1===ef(n)?(jr(ie(t),0),jr(n,0),jr(ie(ie(t)),1),t=ie(ie(t))):(t===nf(ie(t))&&(t=ie(t),e.rotateLeft(t)),jr(ie(t),0),jr(ie(ie(t)),1),e.rotateRight(ie(ie(t))))}else{var r=Sl(ie(ie(t)));1===ef(r)?(jr(ie(t),0),jr(r,0),jr(ie(ie(t)),1),t=ie(ie(t))):(t===Sl(ie(t))&&(t=ie(t),e.rotateRight(t)),jr(ie(t),0),jr(ie(ie(t)),1),e.rotateLeft(ie(ie(t))))}this.root_.color=0},Xe.prototype.values=function(){var t=new U,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Xe.successor(e));)t.add(e.value);return t},Xe.prototype.entrySet=function(){var t=new Il,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Xe.successor(e));)t.add(e);return t},Xe.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Xe.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Xe.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Xe.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Xe.prototype.size=function(){return this.size_};var Os=function(){};function rf(){}function or(){this.array_=[],arguments[0]instanceof Se&&this.addAll(arguments[0])}Os.prototype.interfaces_=function(){return[]},Os.prototype.getClass=function(){return Os},rf.prototype=new Ta,(or.prototype=new rf).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},or.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},or.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},or.prototype.remove=function(t){throw new Ls},or.prototype.size=function(){return this.array_.length},or.prototype.isEmpty=function(){return 0===this.array_.length},or.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},or.prototype.iterator=function(){return new Aa(this)};var Aa=function(t){this.treeSet_=t,this.position_=0};Aa.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Ro;return this.treeSet_.array_[this.position_++]},Aa.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Aa.prototype.remove=function(){throw new Ls};var bi=function(){};bi.sort=function(){var t,e,n,i=arguments[0];if(1===arguments.length)i.sort(function(s,a){return s.compareTo(a)});else if(2===arguments.length)n=arguments[1],i.sort(function(s,a){return n.compare(s,a)});else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],e.sort(function(s,a){return n.compare(s,a)}),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},bi.asList=function(t){for(var e=new U,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Vt=function(){},Hn={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Hn.P.get=function(){return 0},Hn.L.get=function(){return 1},Hn.A.get=function(){return 2},Hn.FALSE.get=function(){return-1},Hn.TRUE.get=function(){return-2},Hn.DONTCARE.get=function(){return-3},Hn.SYM_FALSE.get=function(){return"F"},Hn.SYM_TRUE.get=function(){return"T"},Hn.SYM_DONTCARE.get=function(){return"*"},Hn.SYM_P.get=function(){return"0"},Hn.SYM_L.get=function(){return"1"},Hn.SYM_A.get=function(){return"2"},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.toDimensionSymbol=function(t){switch(t){case Vt.FALSE:return Vt.SYM_FALSE;case Vt.TRUE:return Vt.SYM_TRUE;case Vt.DONTCARE:return Vt.SYM_DONTCARE;case Vt.P:return Vt.SYM_P;case Vt.L:return Vt.SYM_L;case Vt.A:return Vt.SYM_A}throw new ce("Unknown dimension value: "+t)},Vt.toDimensionValue=function(t){switch(Cs.toUpperCase(t)){case Vt.SYM_FALSE:return Vt.FALSE;case Vt.SYM_TRUE:return Vt.TRUE;case Vt.SYM_DONTCARE:return Vt.DONTCARE;case Vt.SYM_P:return Vt.P;case Vt.SYM_L:return Vt.L;case Vt.SYM_A:return Vt.A}throw new ce("Unknown dimension symbol: "+t)},Object.defineProperties(Vt,Hn);var sr=function(){};sr.prototype.filter=function(t){},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var Wn=function(){};Wn.prototype.filter=function(t,e){},Wn.prototype.isDone=function(){},Wn.prototype.isGeometryChanged=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Ke=function(t){function e(r,i){if(t.call(this,i),this._geometries=r||[],t.hasNullElements(this._geometries))throw new ce("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var r=new Z,i=0;i<this._geometries.length;i++)r.expandToInclude(this._geometries[i].getEnvelopeInternal());return r},e.prototype.getGeometryN=function(r){return this._geometries[r]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var r=new Array(this.getNumPoints()).fill(null),i=-1,o=0;o<this._geometries.length;o++)for(var s=this._geometries[o].getCoordinates(),a=0;a<s.length;a++)r[++i]=s[a];return r},e.prototype.getArea=function(){for(var r=0,i=0;i<this._geometries.length;i++)r+=this._geometries[i].getArea();return r},e.prototype.equalsExact=function(){if(2===arguments.length){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._geometries.length!==s._geometries.length)return!1;for(var a=0;a<this._geometries.length;a++)if(!this._geometries[a].equalsExact(s._geometries[a],o))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var r=0;r<this._geometries.length;r++)this._geometries[r].normalize();bi.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var r=Vt.FALSE,i=0;i<this._geometries.length;i++)r=Math.max(r,this._geometries[i].getBoundaryDimension());return r},e.prototype.getDimension=function(){for(var r=Vt.FALSE,i=0;i<this._geometries.length;i++)r=Math.max(r,this._geometries[i].getDimension());return r},e.prototype.getLength=function(){for(var r=0,i=0;i<this._geometries.length;i++)r+=this._geometries[i].getLength();return r},e.prototype.getNumPoints=function(){for(var r=0,i=0;i<this._geometries.length;i++)r+=this._geometries[i].getNumPoints();return r},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var i=new Array(this._geometries.length).fill(null),o=0;o<this._geometries.length;o++)i[o]=this._geometries[o].reverse();return this.getFactory().createGeometryCollection(i)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var i=arguments[0],o=new or(bi.asList(this._geometries)),s=new or(bi.asList(i._geometries));return this.compare(o,s)}if(2===arguments.length){for(var u=arguments[1],l=arguments[0],h=this.getNumGeometries(),c=l.getNumGeometries(),p=0;p<h&&p<c;){var g=this.getGeometryN(p),d=l.getGeometryN(p),m=g.compareToSameClass(d,u);if(0!==m)return m;p++}return p<h?1:p<c?-1:0}},e.prototype.apply=function(){var r=this;if(nt(arguments[0],br))for(var i=arguments[0],o=0;o<this._geometries.length;o++)r._geometries[o].apply(i);else if(nt(arguments[0],Wn)){var s=arguments[0];if(0===this._geometries.length)return null;for(var a=0;a<this._geometries.length&&(r._geometries[a].apply(s),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else if(nt(arguments[0],sr)){var u=arguments[0];u.filter(this);for(var l=0;l<this._geometries.length;l++)r._geometries[l].apply(u)}else if(nt(arguments[0],Br)){var h=arguments[0];h.filter(this);for(var c=0;c<this._geometries.length;c++)r._geometries[c].apply(h)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),lt.shouldNeverReachHere(),null},e.prototype.clone=function(){var r=t.prototype.clone.call(this);r._geometries=new Array(this._geometries.length).fill(null);for(var i=0;i<this._geometries.length;i++)r._geometries[i]=this._geometries[i].clone();return r},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var r=new Array(this._geometries.length).fill(null),i=0;i<r.length;i++)r[i]=this._geometries[i].copy();return new e(r,this._factory)},e.prototype.isEmpty=function(){for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(tt),wi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return tt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var r=arguments[0],i=arguments[1];return!!this.isEquivalentClass(r)&&t.prototype.equalsExact.call(this,r,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Vt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var r=this._geometries.length,i=new Array(r).fill(null),o=0;o<this._geometries.length;o++)i[r-1-o]=this._geometries[o].reverse();return this.getFactory().createMultiLineString(i)},e.prototype.getBoundary=function(){return new kn(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var r=new Array(this._geometries.length).fill(null),i=0;i<r.length;i++)r[i]=this._geometries[i].copy();return new e(r,this._factory)},e.prototype.interfaces_=function(){return[Os]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Ke),kn=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Fn.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};kn.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},kn.prototype.getBoundary=function(){return this._geom instanceof fe?this.boundaryLineString(this._geom):this._geom instanceof wi?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},kn.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},kn.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},kn.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new U;this._endpointMap=new Xe;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return ht.toCoordinateArray(n)},kn.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Da,this._endpointMap.put(t,e)),e.count++},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.getBoundary=function(){return 1===arguments.length?new kn(arguments[0]).getBoundary():2===arguments.length?new kn(arguments[0],arguments[1]).getBoundary():void 0};var Da=function(){this.count=null};function z0(){}function j0(){}Da.prototype.interfaces_=function(){return[]},Da.prototype.getClass=function(){return Da};var U0=function(){};function V0(){}function X0(){}function Y0(){}var Gn=function(){},Cl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Gn.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new V0,n=new z0(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[1],o="",a=new Y0(new j0(Gn.getStackTrace(arguments[0]))),u=0;u<i;u++)try{o+=a.readLine()+Gn.NEWLINE}catch(l){if(!(l instanceof X0))throw l;lt.shouldNeverReachHere()}return o}},Gn.split=function(t,e){for(var n=e.length,r=new U,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Gn.toString=function(){if(1===arguments.length)return Gn.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},Gn.spaces=function(t){return Gn.chars(" ",t)},Cl.NEWLINE.get=function(){return Fe.getProperty("line.separator")},Cl.SIMPLE_ORDINATE_FORMAT.get=function(){return new U0("0.#")},Object.defineProperties(Gn,Cl);var de=function(){};de.prototype.interfaces_=function(){return[]},de.prototype.getClass=function(){return de},de.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},de.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,mt.X)===t.getOrdinate(e-1,mt.X)&&t.getOrdinate(0,mt.Y)===t.getOrdinate(e-1,mt.Y)},de.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||at.isNaN(s)&&at.isNaN(a)))return!1}return!0},de.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(de.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)de.copy(e,i-1,r,o,1);return r},de.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)de.swap(t,r,e-r)},de.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},de.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)de.copyCoord(t,e+o,n,r+o)},de.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new er;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Gn.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},de.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?de.createClosedRing(t,e,4):e.getOrdinate(0,mt.X)===e.getOrdinate(n-1,mt.X)&&e.getOrdinate(0,mt.Y)===e.getOrdinate(n-1,mt.Y)?e:de.createClosedRing(t,e,n+1)},de.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();de.copy(e,0,r,0,i);for(var o=i;o<n;o++)de.copy(e,0,r,o,1);return r};var fe=function(t){function e(r,i){t.call(this,i),this._points=null,this.init(r)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Z:this._points.expandEnvelope(new Z)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(this._points.size()!==s._points.size())return!1;for(var a=0;a<this._points.size();a++)if(!this.equal(this._points.getCoordinate(a),s._points.getCoordinate(a),o))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var r=this,i=0;i<Math.trunc(this._points.size()/2);i++){var o=r._points.size()-1-i;if(!r._points.getCoordinate(i).equals(r._points.getCoordinate(o)))return r._points.getCoordinate(i).compareTo(r._points.getCoordinate(o))>0&&de.reverse(r._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Vt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return V.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var r=this._points.copy();return de.reverse(r),this.getFactory().createLineString(r)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var o=arguments[0],s=0,a=0;s<this._points.size()&&a<o._points.size();){var u=this._points.getCoordinate(s).compareTo(o._points.getCoordinate(a));if(0!==u)return u;s++,a++}return s<this._points.size()?1:a<o._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},e.prototype.apply=function(){if(nt(arguments[0],br))for(var i=arguments[0],o=0;o<this._points.size();o++)i.filter(this._points.getCoordinate(o));else if(nt(arguments[0],Wn)){var s=arguments[0];if(0===this._points.size())return null;for(var a=0;a<this._points.size()&&(s.filter(this._points,a),!s.isDone());a++);s.isGeometryChanged()&&this.geometryChanged()}else(nt(arguments[0],sr)||nt(arguments[0],Br))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new kn(this).getBoundary()},e.prototype.isEquivalentClass=function(r){return r instanceof e},e.prototype.clone=function(){var r=t.prototype.clone.call(this);return r._points=this._points.clone(),r},e.prototype.getCoordinateN=function(r){return this._points.getCoordinate(r)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(r){if(null===r&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),1===r.size())throw new ce("Invalid number of points in LineString (found "+r.size()+" - must be 0 or >= 2)");this._points=r},e.prototype.isCoordinate=function(r){for(var i=0;i<this._points.size();i++)if(this._points.getCoordinate(i).equals(r))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(r){return this.getFactory().createPoint(this._points.getCoordinate(r))},e.prototype.interfaces_=function(){return[Os]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(tt),Rs=function(){};Rs.prototype.interfaces_=function(){return[]},Rs.prototype.getClass=function(){return Rs};var yn=function(t){function e(r,i){t.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Z;var r=new Z;return r.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),r},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var r=arguments[0],i=arguments[1];return!!this.isEquivalentClass(r)&&(!(!this.isEmpty()||!r.isEmpty())||this.isEmpty()===r.isEmpty()&&this.equal(r.getCoordinate(),this.getCoordinate(),i))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Vt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var i=arguments[0];return this.getCoordinate().compareTo(i.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},e.prototype.apply=function(){if(nt(arguments[0],br)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this.getCoordinate())}else if(nt(arguments[0],Wn)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this._coordinates,0),i.isGeometryChanged()&&this.geometryChanged()}else(nt(arguments[0],sr)||nt(arguments[0],Br))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var r=t.prototype.clone.call(this);return r._coordinates=this._coordinates.clone(),r},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(r){null===r&&(r=this.getFactory().getCoordinateSequenceFactory().create([])),lt.isTrue(r.size()<=1),this._coordinates=r},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Rs]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(tt),ii=function(){};ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii};var Ce=function(t){function e(r,i,o){if(t.call(this,o),this._shell=null,this._holes=null,null===r&&(r=this.getFactory().createLinearRing()),null===i&&(i=[]),t.hasNullElements(i))throw new ce("holes must not contain null elements");if(r.isEmpty()&&t.hasNonEmptyElements(i))throw new ce("shell is empty but holes are not");this._shell=r,this._holes=i}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var r=new Array(this.getNumPoints()).fill(null),i=-1,o=this._shell.getCoordinates(),s=0;s<o.length;s++)r[++i]=o[s];for(var a=0;a<this._holes.length;a++)for(var u=this._holes[a].getCoordinates(),l=0;l<u.length;l++)r[++i]=u[l];return r},e.prototype.getArea=function(){var r=0;r+=Math.abs(V.signedArea(this._shell.getCoordinateSequence()));for(var i=0;i<this._holes.length;i++)r-=Math.abs(V.signedArea(this._holes[i].getCoordinateSequence()));return r},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var r=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal(),o=0;o<5;o++){var s=r.getX(o);if(s!==i.getMinX()&&s!==i.getMaxX())return!1;var a=r.getY(o);if(a!==i.getMinY()&&a!==i.getMaxY())return!1}for(var u=r.getX(0),l=r.getY(0),h=1;h<=4;h++){var c=r.getX(h),p=r.getY(h);if(c!==u==(p!==l))return!1;u=c,l=p}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var i=arguments[0],o=arguments[1];if(!this.isEquivalentClass(i))return!1;var s=i;if(!this._shell.equalsExact(s._shell,o)||this._holes.length!==s._holes.length)return!1;for(var l=0;l<this._holes.length;l++)if(!this._holes[l].equalsExact(s._holes[l],o))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var i=0;i<this._holes.length;i++)this.normalize(this._holes[i],!1);bi.sort(this._holes)}else if(2===arguments.length){var o=arguments[0],s=arguments[1];if(o.isEmpty())return null;var a=new Array(o.getCoordinates().length-1).fill(null);Fe.arraycopy(o.getCoordinates(),0,a,0,a.length);var u=ht.minCoordinate(o.getCoordinates());ht.scroll(a,u),Fe.arraycopy(a,0,o.getCoordinates(),0,a.length),o.getCoordinates()[a.length]=a[0],V.isCCW(o.getCoordinates())===s&&ht.reverse(o.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var r=0;r+=this._shell.getLength();for(var i=0;i<this._holes.length;i++)r+=this._holes[i].getLength();return r},e.prototype.getNumPoints=function(){for(var r=this._shell.getNumPoints(),i=0;i<this._holes.length;i++)r+=this._holes[i].getNumPoints();return r},e.prototype.reverse=function(){var r=this.copy();r._shell=this._shell.copy().reverse(),r._holes=new Array(this._holes.length).fill(null);for(var i=0;i<this._holes.length;i++)r._holes[i]=this._holes[i].copy().reverse();return r},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var u=arguments[1],l=arguments[0],p=this._shell.compareToSameClass(l._shell,u);if(0!==p)return p;for(var g=this.getNumInteriorRing(),d=l.getNumInteriorRing(),m=0;m<g&&m<d;){var f=this.getInteriorRingN(m),_=l.getInteriorRingN(m),I=f.compareToSameClass(_,u);if(0!==I)return I;m++}return m<g?1:m<d?-1:0}},e.prototype.apply=function(r){var i=this;if(nt(r,br)){this._shell.apply(r);for(var o=0;o<this._holes.length;o++)i._holes[o].apply(r)}else if(nt(r,Wn)){if(this._shell.apply(r),!r.isDone())for(var s=0;s<this._holes.length&&(i._holes[s].apply(r),!r.isDone());s++);r.isGeometryChanged()&&this.geometryChanged()}else if(nt(r,sr))r.filter(this);else if(nt(r,Br)){r.filter(this),this._shell.apply(r);for(var a=0;a<this._holes.length;a++)i._holes[a].apply(r)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var r=new Array(this._holes.length+1).fill(null);r[0]=this._shell;for(var i=0;i<this._holes.length;i++)r[i+1]=this._holes[i];return r.length<=1?this.getFactory().createLinearRing(r[0].getCoordinateSequence()):this.getFactory().createMultiLineString(r)},e.prototype.clone=function(){var r=t.prototype.clone.call(this);r._shell=this._shell.clone(),r._holes=new Array(this._holes.length).fill(null);for(var i=0;i<this._holes.length;i++)r._holes[i]=this._holes[i].clone();return r},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var r=this._shell.copy(),i=new Array(this._holes.length).fill(null),o=0;o<i.length;o++)i[o]=this._holes[o].copy();return new e(r,i,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(r){return this._holes[r]},e.prototype.interfaces_=function(){return[ii]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(tt),Ao=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return tt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var r=arguments[0],i=arguments[1];return!!this.isEquivalentClass(r)&&t.prototype.equalsExact.call(this,r,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Vt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var r=new Array(this._geometries.length).fill(null),i=0;i<r.length;i++)r[i]=this._geometries[i].copy();return new e(r,this._factory)},e.prototype.interfaces_=function(){return[Rs]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Ke),wr=function(t){function e(r,i){r instanceof L&&i instanceof pt&&(r=i.getCoordinateSequenceFactory().create(r)),t.call(this,r,i),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return tt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Vt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var r=this._points.copy();return de.reverse(r),this.getFactory().createLinearRing(r)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new ce("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new ce("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(fe),Ir=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return tt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var r=arguments[0],i=arguments[1];return!!this.isEquivalentClass(r)&&t.prototype.equalsExact.call(this,r,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var i=new Array(this._geometries.length).fill(null),o=0;o<this._geometries.length;o++)i[o]=this._geometries[o].reverse();return this.getFactory().createMultiPolygon(i)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var r=new U,i=0;i<this._geometries.length;i++)for(var o=this._geometries[i].getBoundary(),s=0;s<o.getNumGeometries();s++)r.add(o.getGeometryN(s));var a=new Array(r.size()).fill(null);return this.getFactory().createMultiLineString(r.toArray(a))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var r=new Array(this._geometries.length).fill(null),i=0;i<r.length;i++)r[i]=this._geometries[i].copy();return new e(r,this._factory)},e.prototype.interfaces_=function(){return[ii]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Ke),qn=function(t){this._factory=t||null,this._isUserDataCopied=!1},Fa={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};qn.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},qn.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},qn.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Ke?this.editGeometryCollection(t,e):t instanceof Ce?this.editPolygon(t,e):t instanceof yn||t instanceof fe?e.edit(t,this._factory):(lt.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},qn.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new U,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===Ao?this._factory.createMultiPoint(r.toArray([])):n.getClass()===wi?this._factory.createMultiLineString(r.toArray([])):n.getClass()===Ir?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},qn.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new U,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn},qn.GeometryEditorOperation=function(){},Fa.NoOpGeometryOperation.get=function(){return Ts},Fa.CoordinateOperation.get=function(){return As},Fa.CoordinateSequenceOperation.get=function(){return Ds},Object.defineProperties(qn,Fa);var Ts=function(){};Ts.prototype.edit=function(t,e){return t},Ts.prototype.interfaces_=function(){return[qn.GeometryEditorOperation]},Ts.prototype.getClass=function(){return Ts};var As=function(){};As.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof wr?e.createLinearRing(n):t instanceof fe?e.createLineString(n):t instanceof yn?n.length>0?e.createPoint(n[0]):e.createPoint():t},As.prototype.interfaces_=function(){return[qn.GeometryEditorOperation]},As.prototype.getClass=function(){return As};var Ds=function(){};Ds.prototype.edit=function(t,e){return t instanceof wr?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof fe?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof yn?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Ds.prototype.interfaces_=function(){return[qn.GeometryEditorOperation]},Ds.prototype.getClass=function(){return Ds};var ye=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new L}else if(nt(arguments[0],mt)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new L}},of={serialVersionUID:{configurable:!0}};ye.prototype.setOrdinate=function(t,e,n){switch(e){case mt.X:this._coordinates[t].x=n;break;case mt.Y:this._coordinates[t].y=n;break;case mt.Z:this._coordinates[t].z=n;break;default:throw new ce("invalid ordinateIndex")}},ye.prototype.size=function(){return this._coordinates.length},ye.prototype.getOrdinate=function(t,e){switch(e){case mt.X:return this._coordinates[t].x;case mt.Y:return this._coordinates[t].y;case mt.Z:return this._coordinates[t].z}return at.NaN},ye.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ye.prototype.getCoordinateCopy=function(t){return new L(this._coordinates[t])},ye.prototype.getDimension=function(){return this._dimension},ye.prototype.getX=function(t){return this._coordinates[t].x},ye.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ye(t,this._dimension)},ye.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ye.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ye(t,this._dimension)},ye.prototype.toString=function(){if(this._coordinates.length>0){var t=new er(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ye.prototype.getY=function(t){return this._coordinates[t].y},ye.prototype.toCoordinateArray=function(){return this._coordinates},ye.prototype.interfaces_=function(){return[mt,Dn]},ye.prototype.getClass=function(){return ye},of.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ye,of);var Sr=function(){},Nl={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Sr.prototype.readResolve=function(){return Sr.instance()},Sr.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ye(arguments[0]);if(nt(arguments[0],mt))return new ye(arguments[0])}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new ye(n):new ye(n,r)}},Sr.prototype.interfaces_=function(){return[Io,Dn]},Sr.prototype.getClass=function(){return Sr},Sr.instance=function(){return Sr.instanceObject},Nl.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Nl.instanceObject.get=function(){return new Sr},Object.defineProperties(Sr,Nl);var sf=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(n){return this.map_.get(n)||null},e.prototype.put=function(n,r){return this.map_.set(n,r),r},e.prototype.values=function(){for(var n=new U,r=this.map_.values(),i=r.next();!i.done;)n.add(i.value),i=r.next();return n},e.prototype.entrySet=function(){var n=new Il;return this.map_.entries().forEach(function(r){return n.add(r)}),n},e.prototype.size=function(){return this.map_.size()},e}(Zi),Xt=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ar){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Pl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Xt.prototype.equals=function(t){return t instanceof Xt&&(this._modelType===t._modelType&&this._scale===t._scale)},Xt.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new nr(n).compareTo(new nr(r))},Xt.prototype.getScale=function(){return this._scale},Xt.prototype.isFloating=function(){return this._modelType===Xt.FLOATING||this._modelType===Xt.FLOATING_SINGLE},Xt.prototype.getType=function(){return this._modelType},Xt.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Xt.FLOATING?t="Floating":this._modelType===Xt.FLOATING_SINGLE?t="Floating-Single":this._modelType===Xt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Xt.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return at.isNaN(t)||this._modelType===Xt.FLOATING_SINGLE?t:this._modelType===Xt.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof L){var e=arguments[0];if(this._modelType===Xt.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Xt.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Xt.FLOATING?t=16:this._modelType===Xt.FLOATING_SINGLE?t=6:this._modelType===Xt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Xt.prototype.setScale=function(t){this._scale=Math.abs(t)},Xt.prototype.interfaces_=function(){return[Dn,An]},Xt.prototype.getClass=function(){return Xt},Xt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Pl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Pl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Xt,Pl);var ar=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Ml={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ar.prototype.readResolve=function(){return ar.nameToTypeMap.get(this._name)},ar.prototype.toString=function(){return this._name},ar.prototype.interfaces_=function(){return[Dn]},ar.prototype.getClass=function(){return ar},Ml.serialVersionUID.get=function(){return-552860263173159e4},Ml.nameToTypeMap.get=function(){return new sf},Object.defineProperties(ar,Ml),Xt.Type=ar,Xt.FIXED=new ar("FIXED"),Xt.FLOATING=new ar("FLOATING"),Xt.FLOATING_SINGLE=new ar("FLOATING SINGLE");var pt=function t(){this._precisionModel=new Xt,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?nt(arguments[0],Io)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Xt&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},af={serialVersionUID:{configurable:!0}};pt.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new L(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new L(t.getMinX(),t.getMinY()),new L(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new L(t.getMinX(),t.getMinY()),new L(t.getMinX(),t.getMaxY()),new L(t.getMaxX(),t.getMaxY()),new L(t.getMaxX(),t.getMinY()),new L(t.getMinX(),t.getMinY())]),null)},pt.prototype.createLineString=function(t){return t?t instanceof Array?new fe(this.getCoordinateSequenceFactory().create(t),this):nt(t,mt)?new fe(t,this):void 0:new fe(this.getCoordinateSequenceFactory().create([]),this)},pt.prototype.createMultiLineString=function(){return 0===arguments.length?new wi(null,this):1===arguments.length?new wi(arguments[0],this):void 0},pt.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(pt.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Ce)return this.createMultiPolygon(pt.toPolygonArray(t));if(a instanceof fe)return this.createMultiLineString(pt.toLineStringArray(t));if(a instanceof yn)return this.createMultiPoint(pt.toPointArray(t));lt.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},pt.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},pt.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof L){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(nt(arguments[0],mt))return new yn(arguments[0],this)}},pt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},pt.prototype.createPolygon=function(){if(0===arguments.length)return new Ce(null,null,this);if(1===arguments.length){if(nt(arguments[0],mt))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof wr)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new Ce(arguments[0],arguments[1],this)},pt.prototype.getSRID=function(){return this._SRID},pt.prototype.createGeometryCollection=function(){return 0===arguments.length?new Ke(null,this):1===arguments.length?new Ke(arguments[0],this):void 0},pt.prototype.createGeometry=function(t){return new qn(this).edit(t,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},pt.prototype.getPrecisionModel=function(){return this._precisionModel},pt.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(nt(arguments[0],mt))return new wr(arguments[0],this)}},pt.prototype.createMultiPolygon=function(){return 0===arguments.length?new Ir(null,this):1===arguments.length?new Ir(arguments[0],this):void 0},pt.prototype.createMultiPoint=function(){if(0===arguments.length)return new Ao(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ao(arguments[0],this);if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(nt(arguments[0],mt)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var s=this.getCoordinateSequenceFactory().create(1,r.getDimension());de.copy(r,o,s,0,1),i[o]=this.createPoint(s)}return this.createMultiPoint(i)}}},pt.prototype.interfaces_=function(){return[Dn]},pt.prototype.getClass=function(){return pt},pt.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},pt.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},pt.getDefaultCoordinateSequenceFactory=function(){return Sr.instance()},pt.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},pt.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},pt.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},pt.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},pt.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},pt.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},pt.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},af.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(pt,af);var H0=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],ka=function(t){this.geometryFactory=t||new pt};ka.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!ur[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==H0.indexOf(n)?ur[n].apply(this,[e.coordinates]):ur[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},ka.prototype.write=function(t){var e=t.getGeometryType();if(!Ur[e])throw new Error("Geometry is not supported");return Ur[e].apply(this,[t])};var ur={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!ur[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ur.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new L(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new L(t[0],t[1]),new L(t[2],t[1]),new L(t[2],t[3]),new L(t[0],t[3]),new L(t[0],t[1])])},Point:function(t){var e=new L(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ur.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ur.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ur.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ur.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var s=ur.coordinates.apply(this,[t[i]]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ur.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Ur={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ur.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ur.Point.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r)e.push(Ur.coordinate.apply(this,[n[r]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ur.LineString.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ur.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var o=Ur.LineString.apply(this,[t._holes[r]]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=Ur.Polygon.apply(this,[t._geometries[n]]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ur[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ll=function(t){this.geometryFactory=t||new pt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new ka(this.geometryFactory)};Ll.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Xt.FIXED&&this.reducePrecision(e),e},Ll.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var uf=function(){this.parser=new ka(this.geometryFactory)};uf.prototype.write=function(t){return this.parser.write(t)};var z=function(){},Ga={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function qa(t){this.message=t||""}function lr(){this.array_=[]}z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.opposite=function(t){return t===z.LEFT?z.RIGHT:t===z.RIGHT?z.LEFT:t},Ga.ON.get=function(){return 0},Ga.LEFT.get=function(){return 1},Ga.RIGHT.get=function(){return 2},Object.defineProperties(z,Ga),(qa.prototype=new Error).name="EmptyStackException",(lr.prototype=new Yn).add=function(t){return this.array_.push(t),!0},lr.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},lr.prototype.push=function(t){return this.array_.push(t),t},lr.prototype.pop=function(t){if(0===this.array_.length)throw new qa;return this.array_.pop()},lr.prototype.peek=function(){if(0===this.array_.length)throw new qa;return this.array_[this.array_.length-1]},lr.prototype.empty=function(){return 0===this.array_.length},lr.prototype.isEmpty=function(){return this.empty()},lr.prototype.search=function(t){return this.array_.indexOf(t)},lr.prototype.size=function(){return this.array_.length},lr.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var cr=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};cr.prototype.getCoordinate=function(){return this._minCoord},cr.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},cr.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();lt.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=V.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===V.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===V.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},cr.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length||n[e].y===n[e+1].y)return-1;var r=z.LEFT;return n[e].y<n[e+1].y&&(r=z.RIGHT),r},cr.prototype.getEdge=function(){return this._orientedDe},cr.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},cr.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},cr.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}lt.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===z.LEFT&&(this._orientedDe=this._minDe.getSym())},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var Vr=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new L(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(n,r){return r?n:n+" [ "+r+" ]"},e}(qr),Ba=function(){this.array_=[]};Ba.prototype.addLast=function(t){this.array_.push(t)},Ba.prototype.removeFirst=function(){return this.array_.shift()},Ba.prototype.isEmpty=function(){return 0===this.array_.length};var Qe=function(){this._finder=null,this._dirEdgeList=new U,this._nodes=new U,this._rightMostCoord=null,this._env=null,this._finder=new cr};Qe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Qe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Qe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Vr("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Qe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(z.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Qe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Qe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(z.RIGHT)>=1&&e.getDepth(z.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Qe.prototype.computeDepths=function(t){var e=new Il,n=new Ba,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Qe.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Qe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Z,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Qe.prototype.addReachable=function(t){var e=new lr;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Qe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(z.LEFT,t.getDepth(z.RIGHT)),e.setDepth(z.RIGHT,t.getDepth(z.LEFT))},Qe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Qe.prototype.getNodes=function(){return this._nodes},Qe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Qe.prototype.interfaces_=function(){return[An]},Qe.prototype.getClass=function(){return Qe};var oe=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[z.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)this.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[z.ON]=s,this.location[z.LEFT]=a,this.location[z.RIGHT]=u}};oe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},oe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==D.NONE)return!1;return!0},oe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===D.NONE&&(this.location[e]=t)},oe.prototype.isLine=function(){return 1===this.location.length},oe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[z.ON]=this.location[z.ON],e[z.LEFT]=D.NONE,e[z.RIGHT]=D.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===D.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},oe.prototype.getLocations=function(){return this.location},oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[z.LEFT];this.location[z.LEFT]=this.location[z.RIGHT],this.location[z.RIGHT]=t},oe.prototype.toString=function(){var t=new er;return this.location.length>1&&t.append(D.toLocationSymbol(this.location[z.LEFT])),t.append(D.toLocationSymbol(this.location[z.ON])),this.location.length>1&&t.append(D.toLocationSymbol(this.location[z.RIGHT])),t.toString()},oe.prototype.setLocations=function(t,e,n){this.location[z.ON]=t,this.location[z.LEFT]=e,this.location[z.RIGHT]=n},oe.prototype.get=function(t){return t<this.location.length?this.location[t]:D.NONE},oe.prototype.isArea=function(){return this.location.length>1},oe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===D.NONE)return!0;return!1},oe.prototype.setLocation=function(){1===arguments.length?this.setLocation(z.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(D.NONE)},oe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},oe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},oe.prototype.interfaces_=function(){return[]},oe.prototype.getClass=function(){return oe};var Jt=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new oe(e),this.elt[1]=new oe(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new oe(n.elt[0]),this.elt[1]=new oe(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new oe(D.NONE),this.elt[1]=new oe(D.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new oe(o,s,a),this.elt[1]=new oe(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new oe(D.NONE,D.NONE,D.NONE),this.elt[1]=new oe(D.NONE,D.NONE,D.NONE),this.elt[u].setLocations(l,h,c)}};Jt.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Jt.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Jt.prototype.isNull=function(t){return this.elt[t].isNull()},Jt.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},Jt.prototype.isLine=function(t){return this.elt[t].isLine()},Jt.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new oe(t.elt[n]):e.elt[n].merge(t.elt[n])},Jt.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Jt.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(z.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},Jt.prototype.toString=function(){var t=new er;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Jt.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},Jt.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Jt.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(z.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},Jt.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Jt.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Jt.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new oe(this.elt[t].location[0]))},Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt},Jt.toLineLabel=function(t){for(var e=new Jt(D.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var xe=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new U,this._pts=new U,this._label=new Jt(D.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new U,this._geometryFactory=null;var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()};xe.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=V.isCCW(this._ring.getCoordinates())},xe.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},xe.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new Vr("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Vr("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();lt.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},xe.prototype.getLinearRing=function(){return this._ring},xe.prototype.getCoordinate=function(t){return this._pts.get(t)},xe.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},xe.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},xe.prototype.isHole=function(){return this._isHole},xe.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},xe.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!V.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},xe.prototype.addHole=function(t){this._holes.add(t)},xe.prototype.isShell=function(){return null===this._shell},xe.prototype.getLabel=function(){return this._label},xe.prototype.getEdges=function(){return this._edges},xe.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},xe.prototype.getShell=function(){return this._shell},xe.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var n=arguments[1],r=arguments[0].getLocation(n,z.RIGHT);if(r===D.NONE)return null;if(this._label.getLocation(n)===D.NONE)return this._label.setLocation(n,r),null}},xe.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},xe.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},xe.prototype.interfaces_=function(){return[]},xe.prototype.getClass=function(){return xe};var W0=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(n,r){n.setMinEdgeRing(r)},e.prototype.getNext=function(n){return n.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xe),J0=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var n=new U,r=this._startDe;do{if(null===r.getMinEdgeRing()){var i=new W0(r,this._geometryFactory);n.add(i)}r=r.getNext()}while(r!==this._startDe);return n},e.prototype.setEdgeRing=function(n,r){n.setEdgeRing(r)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this._startDe;do{n.getNode().getEdges().linkMinimalDirectedEdges(this),n=n.getNext()}while(n!==this._startDe)},e.prototype.getNext=function(n){return n.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xe),In=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};In.prototype.setVisited=function(t){this._isVisited=t},In.prototype.setInResult=function(t){this._isInResult=t},In.prototype.isCovered=function(){return this._isCovered},In.prototype.isCoveredSet=function(){return this._isCoveredSet},In.prototype.setLabel=function(t){this._label=t},In.prototype.getLabel=function(){return this._label},In.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},In.prototype.updateIM=function(t){lt.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},In.prototype.isInResult=function(){return this._isInResult},In.prototype.isVisited=function(){return this._isVisited},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In};var za=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var r=arguments[1];this._coord=arguments[0],this._edges=r,this._label=new Jt(0,D.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();)if(n.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(n){},e.prototype.computeMergedLocation=function(n,r){var i=D.NONE;if(i=this._label.getLocation(r),!n.isNull(r)){var o=n.getLocation(r);i!==D.BOUNDARY&&(i=o)}return i},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var n=arguments[0],r=arguments[1];null===this._label?this._label=new Jt(n,r):this._label.setLocation(n,r)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof e)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof Jt)for(var i=arguments[0],o=0;o<2;o++){var s=n.computeMergedLocation(i,o);n._label.getLocation(o)===D.NONE&&n._label.setLocation(o,s)}},e.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},e.prototype.setLabelBoundary=function(n){if(null===this._label)return null;var r=D.NONE;null!==this._label&&(r=this._label.getLocation(n));this._label.setLocation(n,r===D.BOUNDARY?D.INTERIOR:D.BOUNDARY)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(In),hr=function(){this.nodeMap=new Xe,this.nodeFact=null,this.nodeFact=arguments[0]};hr.prototype.find=function(t){return this.nodeMap.get(t)},hr.prototype.addNode=function(){if(arguments[0]instanceof L){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof za){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},hr.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},hr.prototype.iterator=function(){return this.nodeMap.values().iterator()},hr.prototype.values=function(){return this.nodeMap.values()},hr.prototype.getBoundaryNodes=function(t){for(var e=new U,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===D.BOUNDARY&&e.add(r)}return e},hr.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr};var $t=function(){},Fs={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t},$t.isNorthern=function(t){return t===$t.NE||t===$t.NW},$t.isOpposite=function(t,e){return t!==e&&(t-e+4)%4==2},$t.commonHalfPlane=function(t,e){if(t===e)return t;if((t-e+4)%4==2)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},$t.isInHalfPlane=function(t,e){return e===$t.SE?t===$t.SE||t===$t.SW:t===e||t===e+1},$t.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new ce("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?$t.NE:$t.SE:e>=0?$t.NW:$t.SW}if(arguments[0]instanceof L&&arguments[1]instanceof L){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new ce("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?$t.NE:$t.SE:r.y>=n.y?$t.NW:$t.SW}},Fs.NE.get=function(){return 0},Fs.NW.get=function(){return 1},Fs.SW.get=function(){return 2},Fs.SE.get=function(){return 3},Object.defineProperties($t,Fs);var Ye=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var n=arguments[1],r=arguments[2];this._edge=arguments[0],this.init(n,r),this._label=null}else if(4===arguments.length){var s=arguments[1],a=arguments[2],u=arguments[3];this._edge=arguments[0],this.init(s,a),this._label=u}};Ye.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:V.computeOrientation(t._p0,t._p1,this._p1)},Ye.prototype.getDy=function(){return this._dy},Ye.prototype.getCoordinate=function(){return this._p0},Ye.prototype.setNode=function(t){this._node=t},Ye.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ye.prototype.compareTo=function(t){return this.compareDirection(t)},Ye.prototype.getDirectedCoordinate=function(){return this._p1},Ye.prototype.getDx=function(){return this._dx},Ye.prototype.getLabel=function(){return this._label},Ye.prototype.getEdge=function(){return this._edge},Ye.prototype.getQuadrant=function(){return this._quadrant},Ye.prototype.getNode=function(){return this._node},Ye.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ye.prototype.computeLabel=function(t){},Ye.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=$t.quadrant(this._dx,this._dy),lt.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ye.prototype.interfaces_=function(){return[An]},Ye.prototype.getClass=function(){return Ye};var Ol=function(t){function e(){var n=arguments[0],r=arguments[1];if(t.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(n){return this._depth[n]},e.prototype.setVisited=function(n){this._isVisited=n},e.prototype.computeDirectedLabel=function(){this._label=new Jt(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(n,r){if(-999!==this._depth[n]&&this._depth[n]!==r)throw new Vr("assigned depths do not match",this.getCoordinate());this._depth[n]=r},e.prototype.isInteriorAreaEdge=function(){for(var n=this,r=!0,i=0;i<2;i++)n._label.isArea(i)&&n._label.getLocation(i,z.LEFT)===D.INTERIOR&&n._label.getLocation(i,z.RIGHT)===D.INTERIOR||(r=!1);return r},e.prototype.setNextMin=function(n){this._nextMin=n},e.prototype.print=function(n){t.prototype.print.call(this,n),n.print(" "+this._depth[z.LEFT]+"/"+this._depth[z.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},e.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},e.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),r=!this._label.isArea(0)||this._label.allPositionsEqual(0,D.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,D.EXTERIOR);return n&&r&&i},e.prototype.setEdgeRing=function(n){this._edgeRing=n},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},e.prototype.setInResult=function(n){this._isInResult=n},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},e.prototype.setSym=function(n){this._sym=n},e.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},e.prototype.setEdgeDepths=function(n,r){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var o=1;n===z.LEFT&&(o=-1);var s=z.opposite(n),a=r+i*o;this.setDepth(n,r),this.setDepth(s,a)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(n){this._next=n},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(n,r){return n===D.EXTERIOR&&r===D.INTERIOR?1:n===D.INTERIOR&&r===D.EXTERIOR?-1:0},e}(Ye),Do=function(){};Do.prototype.createNode=function(t){return new za(t,null)},Do.prototype.interfaces_=function(){return[]},Do.prototype.getClass=function(){return Do};var pe=function(){this._edges=new U,this._nodes=null,this._edgeEndList=new U,0===arguments.length?this._nodes=new hr(new Do):1===arguments.length&&(this._nodes=new hr(arguments[0]))};pe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},pe.prototype.find=function(t){return this._nodes.find(t)},pe.prototype.addNode=function(){return arguments[0]instanceof za||arguments[0]instanceof L?this._nodes.addNode(arguments[0]):void 0},pe.prototype.getNodeIterator=function(){return this._nodes.iterator()},pe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},pe.prototype.debugPrintln=function(t){Fe.out.println(t)},pe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===D.BOUNDARY},pe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},pe.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&V.computeOrientation(t,e,r)===V.COLLINEAR&&$t.quadrant(t,e)===$t.quadrant(n,r)},pe.prototype.getEdgeEnds=function(){return this._edgeEndList},pe.prototype.debugPrint=function(t){Fe.out.print(t)},pe.prototype.getEdgeIterator=function(){return this._edges.iterator()},pe.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1])||n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},pe.prototype.insertEdge=function(t){this._edges.add(t)},pe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},pe.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new Ol(r,!0),o=new Ol(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},pe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},pe.prototype.getNodes=function(){return this._nodes.values()},pe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},pe.prototype.interfaces_=function(){return[]},pe.prototype.getClass=function(){return pe},pe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var mn=function(){this._geometryFactory=null,this._shellList=new U,this._geometryFactory=arguments[0]};mn.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},mn.prototype.computePolygons=function(t){for(var e=new U,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},mn.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Vr("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},mn.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new U,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},mn.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},mn.prototype.buildMaximalEdgeRings=function(t){for(var e=new U,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new J0(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},mn.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},mn.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},mn.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var c=!1;h.contains(r)&&V.isPointInRing(i,l.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(o=u)}return o},mn.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return lt.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},mn.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];pe.linkResultDirectedEdges(arguments[1]);var r=this.buildMaximalEdgeRings(e),i=new U,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var Fo=function(){};Fo.prototype.getBounds=function(){},Fo.prototype.interfaces_=function(){return[]},Fo.prototype.getClass=function(){return Fo};var Jn=function(){this._bounds=null,this._item=null;var e=arguments[1];this._bounds=arguments[0],this._item=e};Jn.prototype.getItem=function(){return this._item},Jn.prototype.getBounds=function(){return this._bounds},Jn.prototype.interfaces_=function(){return[Fo,Dn]},Jn.prototype.getClass=function(){return Jn};var Xr=function(){this._size=null,this._items=null,this._size=0,this._items=new U,this._items.add(null)};Xr.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Xr.prototype.size=function(){return this._size},Xr.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},Xr.prototype.clear=function(){this._size=0,this._items.clear()},Xr.prototype.isEmpty=function(){return 0===this._size},Xr.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var oi=function(){};oi.prototype.visitItem=function(t){},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi};var Ki=function(){};Ki.prototype.insert=function(t,e){},Ki.prototype.remove=function(t,e){},Ki.prototype.query=function(){},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki};var Ne=function(){this._childBoundables=new U,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},lf={serialVersionUID:{configurable:!0}};Ne.prototype.getLevel=function(){return this._level},Ne.prototype.size=function(){return this._childBoundables.size()},Ne.prototype.getChildBoundables=function(){return this._childBoundables},Ne.prototype.addChildBoundable=function(t){lt.isTrue(null===this._bounds),this._childBoundables.add(t)},Ne.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ne.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ne.prototype.interfaces_=function(){return[Fo,Dn]},Ne.prototype.getClass=function(){return Ne},lf.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ne,lf);var Zn=function(){};Zn.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Zn.min=function(t){return Zn.sort(t),t.get(0)},Zn.sort=function(t,e){var n=t.toArray();e?bi.sort(n,e):bi.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Zn.singletonList=function(t){var e=new U;return e.add(t),e};var Ee=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[1],n=arguments[2];this._boundable1=arguments[0],this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Ee.prototype.expandToQueue=function(t,e){var n=Ee.isComposite(this._boundable1),r=Ee.isComposite(this._boundable2);if(n&&r)return Ee.area(this._boundable1)>Ee.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new ce("neither boundable is composite")},Ee.prototype.isLeaves=function(){return!(Ee.isComposite(this._boundable1)||Ee.isComposite(this._boundable2))},Ee.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},Ee.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new Ee(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},Ee.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Ee.prototype.getDistance=function(){return this._distance},Ee.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Ee.prototype.interfaces_=function(){return[An]},Ee.prototype.getClass=function(){return Ee},Ee.area=function(t){return t.getBounds().getArea()},Ee.isComposite=function(t){return t instanceof Ne};var Oe=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new U,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=t.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var n=arguments[0];lt.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},ja={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Oe.prototype.getNodeCapacity=function(){return this._nodeCapacity},Oe.prototype.lastNode=function(t){return t.get(t.size()-1)},Oe.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var n=0,r=arguments[0].getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ne?n+=this.size(i):i instanceof Jn&&(n+=1)}return n}},Oe.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Jn&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Oe.prototype.itemsTree=function(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new U:e}if(1===arguments.length){for(var n=arguments[0],r=new U,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Ne){var s=this.itemsTree(o);null!==s&&r.add(s)}else o instanceof Jn?r.add(o.getItem()):lt.shouldNeverReachHere()}return r.size()<=0?null:r}},Oe.prototype.insert=function(t,e){lt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Jn(t,e))},Oe.prototype.boundablesAtLevel=function(){if(1===arguments.length){var e=arguments[0],n=new U;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(lt.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Ne?this.boundablesAtLevel(r,a,o):(lt.isTrue(a instanceof Jn),-1===r&&o.add(a))}return null}},Oe.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new U;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(nt(arguments[2],oi)&&arguments[0]instanceof Object&&arguments[1]instanceof Ne)for(var o=arguments[0],a=arguments[2],u=arguments[1].getChildBoundables(),l=0;l<u.size();l++){var h=u.get(l);t.getIntersectsOp().intersects(h.getBounds(),o)&&(h instanceof Ne?t.query(o,h,a):h instanceof Jn?a.visitItem(h.getItem()):lt.shouldNeverReachHere())}else if(nt(arguments[2],Yn)&&arguments[0]instanceof Object&&arguments[1]instanceof Ne)for(var c=arguments[0],g=arguments[2],d=arguments[1].getChildBoundables(),m=0;m<d.size();m++){var f=d.get(m);t.getIntersectsOp().intersects(f.getBounds(),c)&&(f instanceof Ne?t.query(c,f,g):f instanceof Jn?g.add(f.getItem()):lt.shouldNeverReachHere())}},Oe.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Oe.prototype.getRoot=function(){return this.build(),this._root},Oe.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(this.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof Ne&&(s=this.remove(r,l,o))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},Oe.prototype.createHigherLevels=function(t,e){lt.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Oe.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var n=0,r=arguments[0].getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ne){var o=this.depth(i);o>n&&(n=o)}}return n+1}},Oe.prototype.createParentBoundables=function(t,e){var n=this;lt.isTrue(!t.isEmpty());var r=new U;r.add(this.createNode(e));var i=new U(t);Zn.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},Oe.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Oe.prototype.interfaces_=function(){return[Dn]},Oe.prototype.getClass=function(){return Oe},Oe.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},ja.IntersectsOp.get=function(){return Z0},ja.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},ja.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Oe,ja);var Z0=function(){},ko=function(){};ko.prototype.distance=function(t,e){},ko.prototype.interfaces_=function(){return[]},ko.prototype.getClass=function(){return ko};var cf=function(t){function e(r){t.call(this,r=r||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(r,i){lt.isTrue(r.length>0);for(var o=new U,s=0;s<r.length;s++)o.addAll(this.createParentBoundablesFromVerticalSlice(r[s],i));return o},e.prototype.createNode=function(r){return new hf(r)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var r=arguments[0],i=arguments[1];if(r.isNull())return null;t.prototype.insert.call(this,r,i)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(r,i){for(var o=Math.trunc(Math.ceil(r.size()/i)),s=new Array(i).fill(null),a=r.iterator(),u=0;u<i;u++){s[u]=new U;for(var l=0;a.hasNext()&&l<o;){var h=a.next();s[u].add(h),l++}}return s},e.prototype.query=function(){if(1===arguments.length)return t.prototype.query.call(this,arguments[0]);2===arguments.length?t.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(nt(arguments[2],oi)&&arguments[0]instanceof Object&&arguments[1]instanceof Ne||nt(arguments[2],Yn)&&arguments[0]instanceof Object&&arguments[1]instanceof Ne)&&t.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(r,i){return t.prototype.createParentBoundables.call(this,r,i)},e.prototype.remove=function(){return 2===arguments.length?t.prototype.remove.call(this,arguments[0],arguments[1]):t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(r,i){lt.isTrue(!r.isEmpty());var o=Math.trunc(Math.ceil(r.size()/this.getNodeCapacity())),s=new U(r);Zn.sort(s,e.xComparator);var a=this.verticalSlices(s,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(a,i)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(nt(arguments[0],ko)){var r=arguments[0],i=new Ee(this.getRoot(),this.getRoot(),r);return this.nearestNeighbour(i)}if(arguments[0]instanceof Ee)return this.nearestNeighbour(arguments[0],at.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof e&&nt(arguments[1],ko)){var s=arguments[0],a=arguments[1],u=new Ee(this.getRoot(),s.getRoot(),a);return this.nearestNeighbour(u)}if(arguments[0]instanceof Ee&&"number"==typeof arguments[1]){var l=arguments[0],c=arguments[1],p=null,g=new Xr;for(g.add(l);!g.isEmpty()&&c>0;){var d=g.poll(),m=d.getDistance();if(m>=c)break;d.isLeaves()?(c=m,p=d):d.expandToQueue(g,c)}return[p.getBoundable(0).getItem(),p.getBoundable(1).getItem()]}}else if(3===arguments.length){var I=arguments[2],y=new Jn(arguments[0],arguments[1]),v=new Ee(this.getRoot(),y,I);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[Ki,Dn]},e.prototype.getClass=function(){return e},e.centreX=function(r){return e.avg(r.getMinX(),r.getMaxX())},e.avg=function(r,i){return(r+i)/2},e.centreY=function(r){return e.avg(r.getMinY(),r.getMaxY())},n.STRtreeNode.get=function(){return hf},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[wo]},compare:function(r,i){return t.compareDoubles(e.centreX(r.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[wo]},compare:function(r,i){return t.compareDoubles(e.centreY(r.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Oe),hf=function(t){function e(){t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var n=null,r=this.getChildBoundables().iterator();r.hasNext();){var i=r.next();null===n?n=new Z(i.getBounds()):n.expandToInclude(i.getBounds())}return n},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ne),cn=function(){};cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn},cn.relativeSign=function(t,e){return t<e?-1:t>e?1:0},cn.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=cn.relativeSign(e.x,n.x),i=cn.relativeSign(e.y,n.y);switch(t){case 0:return cn.compareValue(r,i);case 1:return cn.compareValue(i,r);case 2:return cn.compareValue(i,-r);case 3:return cn.compareValue(-r,i);case 4:return cn.compareValue(-r,-i);case 5:return cn.compareValue(-i,-r);case 6:return cn.compareValue(-i,r);case 7:return cn.compareValue(r,-i)}return lt.shouldNeverReachHere("invalid octant value"),0},cn.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var si=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new L(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};si.prototype.getCoordinate=function(){return this.coord},si.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},si.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:cn.compare(this._segmentOctant,this.coord,e.coord)},si.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},si.prototype.isInterior=function(){return this._isInterior},si.prototype.interfaces_=function(){return[An]},si.prototype.getClass=function(){return si};var $e=function(){this._nodeMap=new Xe,this._edge=null,this._edge=arguments[0]};$e.prototype.getSplitCoordinates=function(){var t=new Ps;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},$e.prototype.addCollapsedNodes=function(){var t=new U;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},$e.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},$e.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new nr(e+1))}},$e.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new L(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new L(e.coord))},$e.prototype.iterator=function(){return this._nodeMap.values().iterator()},$e.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},$e.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},$e.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new nr(e[0])),r=i}},$e.prototype.getEdge=function(){return this._edge},$e.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},$e.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new L(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new L(e.coord)),new me(o,this._edge.getData())},$e.prototype.add=function(t,e){var n=new si(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(lt.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},$e.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new qr("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new qr("bad split edge end point at "+i)},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Qi=function(){};Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new ce("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof L&&arguments[1]instanceof L){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new ce("Cannot compute the octant for two identical points "+i);return Qi.octant(s,a)}};var Cr=function(){};Cr.prototype.getCoordinates=function(){},Cr.prototype.size=function(){},Cr.prototype.getCoordinate=function(t){},Cr.prototype.isClosed=function(){},Cr.prototype.setData=function(t){},Cr.prototype.getData=function(){},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var ks=function(){};ks.prototype.addIntersection=function(t,e){},ks.prototype.interfaces_=function(){return[Cr]},ks.prototype.getClass=function(){return ks};var me=function(){this._nodeList=new $e(this),this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e};me.prototype.getCoordinates=function(){return this._pts},me.prototype.size=function(){return this._pts.length},me.prototype.getCoordinate=function(t){return this._pts[t]},me.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},me.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},me.prototype.setData=function(t){this._data=t},me.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Qi.octant(t,e)},me.prototype.getData=function(){return this._data},me.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var r=arguments[1],o=new L(arguments[0].getIntersection(arguments[3]));this.addIntersection(o,r)}},me.prototype.toString=function(){return Xn.toLineString(new ye(this._pts))},me.prototype.getNodeList=function(){return this._nodeList},me.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;return r<this._pts.length&&t.equals2D(this._pts[r])&&(n=r),this._nodeList.add(t,n)},me.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},me.prototype.interfaces_=function(){return[ks]},me.prototype.getClass=function(){return me},me.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new U;return me.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var r=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)};var K=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new L,this.p1=new L;else if(1===arguments.length){var t=arguments[0];this.p0=new L(t.p0),this.p1=new L(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var r=arguments[2],i=arguments[3];this.p0=new L(arguments[0],arguments[1]),this.p1=new L(r,i)}},pf={serialVersionUID:{configurable:!0}};K.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},K.prototype.orientationIndex=function(){if(arguments[0]instanceof K){var t=arguments[0],e=V.orientationIndex(this.p0,this.p1,t.p0),n=V.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof L)return V.orientationIndex(this.p0,this.p1,arguments[0])},K.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},K.prototype.isVertical=function(){return this.p0.x===this.p1.x},K.prototype.equals=function(t){if(!(t instanceof K))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},K.prototype.intersection=function(t){var e=new Ei;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},K.prototype.project=function(){if(arguments[0]instanceof L){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new L(t);var e=this.projectionFactor(t),n=new L;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof K){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1||i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new K(s,a)}},K.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},K.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},K.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},K.prototype.distancePerpendicular=function(t){return V.distancePointLinePerpendicular(t,this.p0,this.p1)},K.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},K.prototype.midPoint=function(){return K.midPoint(this.p0,this.p1)},K.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?at.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},K.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=at.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},K.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},K.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},K.prototype.getLength=function(){return this.p0.distance(this.p1)},K.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},K.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},K.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},K.prototype.lineIntersection=function(t){try{return Vn.intersection(this.p0,this.p1,t.p0,t.p1)}catch(e){if(!(e instanceof So))throw e}return null},K.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},K.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new L(n-u,r+a)},K.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},K.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||at.isNaN(e))&&(e=1),e},K.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},K.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},K.prototype.distance=function(){if(arguments[0]instanceof K){var t=arguments[0];return V.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof L)return V.distancePointLine(arguments[0],this.p0,this.p1)},K.prototype.pointAlong=function(t){var e=new L;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},K.prototype.hashCode=function(){var t=at.doubleToLongBits(this.p0.x);t^=31*at.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=at.doubleToLongBits(this.p1.x);return n^=31*at.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},K.prototype.interfaces_=function(){return[An,Dn]},K.prototype.getClass=function(){return K},K.midPoint=function(t,e){return new L((t.x+e.x)/2,(t.y+e.y)/2)},pf.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(K,pf);var Gs=function(){this.tempEnv1=new Z,this.tempEnv2=new Z,this._overlapSeg1=new K,this._overlapSeg2=new K};Gs.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var n=arguments[2],r=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Gs.prototype.interfaces_=function(){return[]},Gs.prototype.getClass=function(){return Gs};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[1],n=arguments[2],r=arguments[3];this._pts=arguments[0],this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){if(r.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){return null===this._env&&(this._env=new Z(this._pts[this._start],this._pts[this._end])),this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var h=Math.trunc((t+e)/2),c=Math.trunc((r+i)/2);t<h&&(r<c&&this.computeOverlapsInternal(t,h,n,r,c,o),c<i&&this.computeOverlapsInternal(t,h,n,c,i,o)),h<e&&(r<c&&this.computeOverlapsInternal(h,e,n,r,c,o),c<i&&this.computeOverlapsInternal(h,e,n,c,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var pr=function(){};pr.prototype.interfaces_=function(){return[]},pr.prototype.getClass=function(){return pr},pr.getChainStartIndices=function(t){var e=0,n=new U;n.add(new nr(e));do{var r=pr.findChainEnd(t,e);n.add(new nr(r)),e=r}while(e<t.length-1);return pr.toIntArray(n)},pr.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=$t.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||$t.quadrant(t[i-1],t[i])===r);)i++;return i-1},pr.getChains=function(){if(1===arguments.length)return pr.getChains(arguments[0],null);if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new U,i=pr.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new vn(e,i[o],i[o+1],n);r.add(s)}return r}},pr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Ii=function(){};Ii.prototype.computeNodes=function(t){},Ii.prototype.getNodedSubstrings=function(){},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var qs=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};qs.prototype.setSegmentIntersector=function(t){this._segInt=t},qs.prototype.interfaces_=function(){return[Ii]},qs.prototype.getClass=function(){return qs};var Rl=function(t){function e(r){r?t.call(this,r):t.call(this),this._monoChains=new U,this._index=new cf,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return me.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(r){for(var i=this,o=pr.getChains(r.getCoordinates(),r).iterator();o.hasNext();){var s=o.next();s.setId(i._idCounter++),i._index.insert(s.getEnvelope(),s),i._monoChains.add(s)}},e.prototype.computeNodes=function(r){this._nodedSegStrings=r;for(var i=r.iterator();i.hasNext();)this.add(i.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var r=this,i=new ff(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var s=o.next(),a=r._index.query(s.getEnvelope()).iterator();a.hasNext();){var u=a.next();if(u.getId()>s.getId()&&(s.computeOverlaps(u,i),r._nOverlaps++),r._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return ff},Object.defineProperties(e,n),e}(qs),ff=function(t){function e(){t.call(this),this._si=null,this._si=arguments[0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0].getContext(),a=i.getContext();this._si.processIntersections(s,r,a,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gs),Yt=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var r=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(r)}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Yr={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Yt.prototype.getEndCapStyle=function(){return this._endCapStyle},Yt.prototype.isSingleSided=function(){return this._isSingleSided},Yt.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Yt.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Yt.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Yt.JOIN_ROUND&&(this._quadrantSegments=Yt.DEFAULT_QUADRANT_SEGMENTS)},Yt.prototype.getJoinStyle=function(){return this._joinStyle},Yt.prototype.setJoinStyle=function(t){this._joinStyle=t},Yt.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Yt.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Yt.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Yt.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Yt.prototype.getMitreLimit=function(){return this._mitreLimit},Yt.prototype.setMitreLimit=function(t){this._mitreLimit=t},Yt.prototype.setSingleSided=function(t){this._isSingleSided=t},Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Yr.CAP_ROUND.get=function(){return 1},Yr.CAP_FLAT.get=function(){return 2},Yr.CAP_SQUARE.get=function(){return 3},Yr.JOIN_ROUND.get=function(){return 1},Yr.JOIN_MITRE.get=function(){return 2},Yr.JOIN_BEVEL.get=function(){return 3},Yr.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Yr.DEFAULT_MITRE_LIMIT.get=function(){return 5},Yr.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Yt,Yr);var ge=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=V.COUNTERCLOCKWISE,this._inputLine=t||null},Bs={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};ge.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},ge.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=ge.DELETE,o=!0,i=!0),n=t.findNextNonDeletedIndex(e=o?r:n),r=t.findNextNonDeletedIndex(n)}return i},ge.prototype.isShallowConcavity=function(t,e,n,r){return V.computeOrientation(t,e,n)===this._angleOrientation&&V.distancePointLine(e,t,n)<r},ge.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/ge.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},ge.prototype.isConcave=function(t,e,n){return V.computeOrientation(t,e,n)===this._angleOrientation},ge.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=V.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},ge.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===ge.DELETE;)e++;return e},ge.prototype.isShallow=function(t,e,n,r){return V.distancePointLine(e,t,n)<r},ge.prototype.collapseLine=function(){for(var t=new Ps,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==ge.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},ge.prototype.interfaces_=function(){return[]},ge.prototype.getClass=function(){return ge},ge.simplify=function(t,e){return new ge(t).simplify(e)},Bs.INIT.get=function(){return 0},Bs.DELETE.get=function(){return 1},Bs.KEEP.get=function(){return 1},Bs.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(ge,Bs);var Sn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new U},gf={COORDINATE_ARRAY_TYPE:{configurable:!0}};Sn.prototype.getCoordinates=function(){return this._ptList.toArray(Sn.COORDINATE_ARRAY_TYPE)},Sn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Sn.prototype.addPt=function(t){var e=new L(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Sn.prototype.revere=function(){},Sn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Sn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Sn.prototype.toString=function(){return(new pt).createLineString(this.getCoordinates()).toString()},Sn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new L(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Sn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},gf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Sn,gf);var yt=function(){},$i={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};yt.prototype.interfaces_=function(){return[]},yt.prototype.getClass=function(){return yt},yt.toDegrees=function(t){return 180*t/Math.PI},yt.normalize=function(t){for(;t>Math.PI;)t-=yt.PI_TIMES_2;for(;t<=-Math.PI;)t+=yt.PI_TIMES_2;return t},yt.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Math.atan2(n.y-e.y,n.x-e.x)}},yt.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},yt.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},yt.interiorAngle=function(t,e,n){var r=yt.angle(e,t),i=yt.angle(e,n);return Math.abs(i-r)},yt.normalizePositive=function(t){if(t<0){for(;t<0;)t+=yt.PI_TIMES_2;t>=yt.PI_TIMES_2&&(t=0)}else{for(;t>=yt.PI_TIMES_2;)t-=yt.PI_TIMES_2;t<0&&(t=0)}return t},yt.angleBetween=function(t,e,n){var r=yt.angle(e,t),i=yt.angle(e,n);return yt.diff(r,i)},yt.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},yt.toRadians=function(t){return t*Math.PI/180},yt.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?yt.COUNTERCLOCKWISE:n<0?yt.CLOCKWISE:yt.NONE},yt.angleBetweenOriented=function(t,e,n){var r=yt.angle(e,t),i=yt.angle(e,n)-r;return i<=-Math.PI?i+yt.PI_TIMES_2:i>Math.PI?i-yt.PI_TIMES_2:i},$i.PI_TIMES_2.get=function(){return 2*Math.PI},$i.PI_OVER_2.get=function(){return Math.PI/2},$i.PI_OVER_4.get=function(){return Math.PI/4},$i.COUNTERCLOCKWISE.get=function(){return V.COUNTERCLOCKWISE},$i.CLOCKWISE.get=function(){return V.CLOCKWISE},$i.NONE.get=function(){return V.COLLINEAR},Object.defineProperties(yt,$i);var ue=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new K,this._seg1=new K,this._offset0=new K,this._offset1=new K,this._side=0,this._hasNarrowConcaveAngle=!1;var n=arguments[1],r=arguments[2];this._precisionModel=arguments[0],this._bufParams=n,this._li=new Ei,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Yt.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},zs={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};ue.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=V.computeOrientation(this._s0,this._s1,this._s2),r=n===V.CLOCKWISE&&this._side===z.LEFT||n===V.COUNTERCLOCKWISE&&this._side===z.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},ue.prototype.addLineEndCap=function(t,e){var n=new K(t,e),r=new K;this.computeOffsetSegment(n,z.LEFT,this._distance,r);var i=new K;this.computeOffsetSegment(n,z.RIGHT,this._distance,i);var a=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Yt.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,V.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Yt.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Yt.CAP_SQUARE:var u=new L;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new L(r.p1.x+u.x,r.p1.y+u.y),h=new L(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(h)}},ue.prototype.getCoordinates=function(){return this._segList.getCoordinates()},ue.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Vn.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(s){if(!(s instanceof So))throw s;o=new L(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},ue.prototype.addFilletCorner=function(t,e,n,r,i){var a=Math.atan2(e.y-t.y,e.x-t.x),h=Math.atan2(n.y-t.y,n.x-t.x);r===V.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,h,r,i),this._segList.addPt(n)},ue.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*ue.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Yt.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Yt.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},ue.prototype.createSquare=function(t){this._segList.addPt(new L(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new L(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new L(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new L(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},ue.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},ue.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},ue.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},ue.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},ue.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=yt.angle(i,this._seg0.p0),s=yt.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=yt.normalize(o+s),u=yt.normalize(a+Math.PI),l=r*n,h=n-l*Math.abs(Math.sin(s)),c=i.x+l*Math.cos(u),p=i.y+l*Math.sin(u),g=new L(c,p),d=new K(i,g),m=d.pointAlongOffset(1,h),f=d.pointAlongOffset(1,-h);this._side===z.LEFT?(this._segList.addPt(m),this._segList.addPt(f)):(this._segList.addPt(f),this._segList.addPt(m))},ue.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===z.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},ue.prototype.addFilletArc=function(t,e,n,r,i){var o=r===V.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,h=new L;l<s;){var c=e+o*l;h.x=t.x+i*Math.cos(c),h.y=t.y+i*Math.sin(c),this._segList.addPt(h),l+=u}},ue.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*ue.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new L((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new L((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},ue.prototype.createCircle=function(t){var e=new L(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},ue.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},ue.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Sn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*ue.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},ue.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Yt.JOIN_BEVEL||this._bufParams.getJoinStyle()===Yt.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,V.CLOCKWISE,this._distance))},ue.prototype.closeRing=function(){this._segList.closeRing()},ue.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},ue.prototype.interfaces_=function(){return[]},ue.prototype.getClass=function(){return ue},zs.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},zs.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},zs.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},zs.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(ue,zs);var hn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[1];this._precisionModel=arguments[0],this._bufParams=e};hn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&ht.reverse(o),o},hn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=ge.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],z.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=ge.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],z.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},hn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===z.RIGHT&&(r=-r);var i=ge.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++)n.addNextSegment(i[s],1!==s);n.closeRing()},hn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=ge.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],z.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=ge.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],z.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},hn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Yt.CAP_ROUND:e.createCircle(t);break;case Yt.CAP_SQUARE:e.createSquare(t)}},hn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],r):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,r):this.computeLineBufferCurve(t,r),r.getCoordinates()},hn.prototype.getBufferParameters=function(){return this._bufParams},hn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},hn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return hn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},hn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=ge.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],z.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=ge.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],z.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},hn.prototype.getSegGen=function(t){return new ue(this._precisionModel,this._bufParams,t)},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new L(t[n]);return e};var to=function(){this._subgraphs=null,this._seg=new K,this._cga=new V,this._subgraphs=arguments[0]},df={DepthSegment:{configurable:!0}};to.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new U,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(nt(arguments[2],Yn)&&arguments[0]instanceof L&&arguments[1]instanceof Ol){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),h=0;h<l.length-1;h++)if(t._seg.p0=l[h],t._seg.p1=l[h+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||V.computeOrientation(t._seg.p0,t._seg.p1,s)===V.RIGHT)){var p=a.getDepth(z.LEFT);t._seg.p0.equals(l[h])||(p=a.getDepth(z.RIGHT));var g=new Si(t._seg,p);u.add(g)}}else if(nt(arguments[2],Yn)&&arguments[0]instanceof L&&nt(arguments[1],Yn))for(var d=arguments[0],f=arguments[2],_=arguments[1].iterator();_.hasNext();){var I=_.next();I.isForward()&&t.findStabbedSegments(d,I,f)}},to.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Zn.min(e)._leftDepth},to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to},df.DepthSegment.get=function(){return Si},Object.defineProperties(to,df);var Si=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[1];this._upwardSeg=new K(arguments[0]),this._leftDepth=e};Si.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Si.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Si.prototype.toString=function(){return this._upwardSeg.toString()},Si.prototype.interfaces_=function(){return[An]},Si.prototype.getClass=function(){return Si};var Ht=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Ht.prototype.area=function(){return Ht.area(this.p0,this.p1,this.p2)},Ht.prototype.signedArea=function(){return Ht.signedArea(this.p0,this.p1,this.p2)},Ht.prototype.interpolateZ=function(t){if(null===t)throw new ce("Supplied point is null.");return Ht.interpolateZ(t,this.p0,this.p1,this.p2)},Ht.prototype.longestSideLength=function(){return Ht.longestSideLength(this.p0,this.p1,this.p2)},Ht.prototype.isAcute=function(){return Ht.isAcute(this.p0,this.p1,this.p2)},Ht.prototype.circumcentre=function(){return Ht.circumcentre(this.p0,this.p1,this.p2)},Ht.prototype.area3D=function(){return Ht.area3D(this.p0,this.p1,this.p2)},Ht.prototype.centroid=function(){return Ht.centroid(this.p0,this.p1,this.p2)},Ht.prototype.inCentre=function(){return Ht.inCentre(this.p0,this.p1,this.p2)},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Ht.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Ht.det=function(t,e,n,r){return t*r-e*n},Ht.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,h=s*l-a*u,c=t.x-i,p=t.y-o;return e.z+(l*c-a*p)/h*(n.z-e.z)+(-u*c+s*p)/h*(r.z-e.z)},Ht.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Ht.isAcute=function(t,e,n){return!!yt.isAcute(t,e,n)&&!!yt.isAcute(e,n,t)&&!!yt.isAcute(n,t,e)},Ht.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,l=2*Ht.det(o,s,a,u),h=Ht.det(s,o*o+s*s,u,a*a+u*u),c=Ht.det(o,o*o+s*s,a,a*a+u*u);return new L(r-h/l,i+c/l)},Ht.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Vn(t.x+n/2,t.y+r/2,1),o=new Vn(t.x-r+n/2,t.y+n+r/2,1);return new Vn(i,o)},Ht.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n));return new L(t.x+i*(n.x-t.x),t.y+i*(n.y-t.y))},Ht.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=i*u-o*a,h=o*s-r*u,c=r*a-i*s;return Math.sqrt(l*l+h*h+c*c)/2},Ht.centroid=function(t,e,n){return new L((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Ht.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o;return new L((r*t.x+i*e.x+o*n.x)/s,(r*t.y+i*e.y+o*n.y)/s)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new U;var e=arguments[1],n=arguments[2];this._inputGeom=arguments[0],this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,D.EXTERIOR,D.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this,n=this._distance,r=z.LEFT;this._distance<0&&(n=-this._distance,r=z.RIGHT);var i=t.getExteriorRing(),o=ht.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,D.EXTERIOR,D.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=ht.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,z.opposite(r),D.INTERIOR,D.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Ht(t[0],t[1],t[2]),r=n.inCentre();return V.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=ht.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,D.EXTERIOR,D.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new me(t,new Jt(0,D.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<wr.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=wr.MINIMUM_VALID_SIZE&&V.isCCW(t)&&(o=i,s=r,n=z.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Ce?this.addPolygon(t):t instanceof fe?this.addLineString(t):t instanceof yn?this.addPoint(t):(t instanceof Ao||t instanceof wi||t instanceof Ir||t instanceof Ke)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Go=function(){};Go.prototype.locate=function(t){},Go.prototype.interfaces_=function(){return[]},Go.prototype.getClass=function(){return Go};var Nr=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Nr.prototype.next=function(){if(this._atStart)return this._atStart=!1,Nr.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Ro;var t=this._parent.getGeometryN(this._index++);return t instanceof Ke?(this._subcollectionIterator=new Nr(t),this._subcollectionIterator.next()):t},Nr.prototype.remove=function(){throw new Error(this.getClass().getName())},Nr.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Nr.prototype.interfaces_=function(){return[Oo]},Nr.prototype.getClass=function(){return Nr},Nr.isAtomic=function(t){return!(t instanceof Ke)};var Cn=function(){this._geom=null,this._geom=arguments[0]};Cn.prototype.locate=function(t){return Cn.locate(t,this._geom)},Cn.prototype.interfaces_=function(){return[Go]},Cn.prototype.getClass=function(){return Cn},Cn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&V.isPointInRing(t,e.getCoordinates())},Cn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Cn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Cn.isPointInRing(t,i))return!1}return!0},Cn.containsPoint=function(t,e){if(e instanceof Ce)return Cn.containsPointInPolygon(t,e);if(e instanceof Ke)for(var n=new Nr(e);n.hasNext();){var r=n.next();if(r!==e&&Cn.containsPoint(t,r))return!0}return!1},Cn.locate=function(t,e){return e.isEmpty()?D.EXTERIOR:Cn.containsPoint(t,e)?D.INTERIOR:D.EXTERIOR};var He=function(){this._edgeMap=new Xe,this._edgeList=null,this._ptInAreaLocation=[D.NONE,D.NONE]};He.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},He.prototype.propagateSideLabels=function(t){for(var e=D.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,z.LEFT)!==D.NONE&&(e=r.getLocation(t,z.LEFT))}if(e===D.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,z.ON)===D.NONE&&a.setLocation(t,z.ON,i),a.isArea(t)){var u=a.getLocation(t,z.LEFT),l=a.getLocation(t,z.RIGHT);if(l!==D.NONE){if(l!==i)throw new Vr("side location conflict",s.getCoordinate());u===D.NONE&&lt.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else lt.isTrue(a.getLocation(t,z.LEFT)===D.NONE,"found single null side"),a.setLocation(t,z.RIGHT,i),a.setLocation(t,z.LEFT,i)}}},He.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},He.prototype.print=function(t){Fe.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},He.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},He.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,z.LEFT);lt.isTrue(r!==D.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();lt.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,z.LEFT),u=s.getLocation(t,z.RIGHT);if(a===u||u!==i)return!1;i=a}return!0},He.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},He.prototype.iterator=function(){return this.getEdges().iterator()},He.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new U(this._edgeMap.values())),this._edgeList},He.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===D.NONE&&(this._ptInAreaLocation[t]=Cn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},He.prototype.toString=function(){var t=new er;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},He.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},He.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===D.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=D.NONE;if(e[u])l=D.EXTERIOR;else{var h=s.getCoordinate();l=this.getLocation(u,h,t)}a.setAllLocationsIfNull(u,l)}},He.prototype.getDegree=function(){return this._edgeMap.size()},He.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var K0=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var r=null,i=null,o=this._SCANNING_FOR_INCOMING,s=0;s<this._resultAreaEdgeList.size();s++){var a=n._resultAreaEdgeList.get(s),u=a.getSym();if(a.getLabel().isArea())switch(null===r&&a.isInResult()&&(r=a),o){case n._SCANNING_FOR_INCOMING:if(!u.isInResult())continue;i=u,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!a.isInResult())continue;i.setNext(a),o=n._SCANNING_FOR_INCOMING}}if(o===this._LINKING_TO_OUTGOING){if(null===r)throw new Vr("no outgoing dirEdge found",this.getCoordinate());lt.isTrue(r.isInResult(),"unable to link last incoming dirEdge"),i.setNext(r)}},e.prototype.insert=function(n){this.insertEdgeEnd(n,n)},e.prototype.getRightmostEdge=function(){var n=this.getEdges(),r=n.size();if(r<1)return null;var i=n.get(0);if(1===r)return i;var o=n.get(r-1),s=i.getQuadrant(),a=o.getQuadrant();return $t.isNorthern(s)&&$t.isNorthern(a)?i:$t.isNorthern(s)||$t.isNorthern(a)?0!==i.getDy()?i:0!==o.getDy()?o:(lt.shouldNeverReachHere("found two horizontal edges incident on node"),null):o},e.prototype.print=function(n){Fe.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var r=this.iterator();r.hasNext();){var i=r.next();n.print("out "),i.print(n),n.println(),n.print("in "),i.getSym().print(n),n.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new U;for(var n=this.iterator();n.hasNext();){var r=n.next();(r.isInResult()||r.getSym().isInResult())&&this._resultAreaEdgeList.add(r)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(n){for(var r=this.iterator();r.hasNext();){var i=r.next().getLabel();i.setAllLocationsIfNull(0,n.getLocation(0)),i.setAllLocationsIfNull(1,n.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var n=null,r=null,i=this._edgeList.size()-1;i>=0;i--){var o=this._edgeList.get(i),s=o.getSym();null===r&&(r=s),null!==n&&s.setNext(n),n=o}r.setNext(n)},e.prototype.computeDepths=function(){if(1===arguments.length){var r=arguments[0],i=this.findIndex(r),o=r.getDepth(z.LEFT),s=r.getDepth(z.RIGHT),a=this.computeDepths(i+1,this._edgeList.size(),o);if(this.computeDepths(0,i,a)!==s)throw new Vr("depth mismatch at "+r.getCoordinate())}else if(3===arguments.length){for(var h=arguments[1],p=arguments[2],g=arguments[0];g<h;g++){var d=this._edgeList.get(g);d.setEdgeDepths(z.RIGHT,p),p=d.getDepth(z.LEFT)}return p}},e.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().merge(r.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(n){for(var r=this,i=null,o=null,s=this._SCANNING_FOR_INCOMING,a=this._resultAreaEdgeList.size()-1;a>=0;a--){var u=r._resultAreaEdgeList.get(a),l=u.getSym();switch(null===i&&u.getEdgeRing()===n&&(i=u),s){case r._SCANNING_FOR_INCOMING:if(l.getEdgeRing()!==n)continue;o=l,s=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(u.getEdgeRing()!==n)continue;o.setNextMin(u),s=r._SCANNING_FOR_INCOMING}}s===this._LINKING_TO_OUTGOING&&(lt.isTrue(null!==i,"found null for first outgoing dirEdge"),lt.isTrue(i.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(i))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var n=0,r=this.iterator();r.hasNext();)r.next().isInResult()&&n++;return n}if(1===arguments.length){for(var o=arguments[0],s=0,a=this.iterator();a.hasNext();)a.next().getEdgeRing()===o&&s++;return s}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var n=D.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){n=D.INTERIOR;break}if(o.isInResult()){n=D.EXTERIOR;break}}}if(n===D.NONE)return null;for(var s=n,a=this.iterator();a.hasNext();){var u=a.next(),l=u.getSym();u.isLineEdge()?u.getEdge().setCovered(s===D.INTERIOR):(u.isInResult()&&(s=D.EXTERIOR),l.isInResult()&&(s=D.INTERIOR))}},e.prototype.computeLabelling=function(n){t.prototype.computeLabelling.call(this,n),this._label=new Jt(D.NONE);for(var r=this.iterator();r.hasNext();)for(var i=r.next().getEdge().getLabel(),o=0;o<2;o++){var s=i.getLocation(o);s!==D.INTERIOR&&s!==D.BOUNDARY||this._label.setLocation(o,D.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(He),yf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(n){return new za(n,new K0)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Do),ai=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};ai.prototype.compareTo=function(t){return ai.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},ai.prototype.interfaces_=function(){return[An]},ai.prototype.getClass=function(){return ai},ai.orientation=function(t){return 1===ht.increasingDirection(t)},ai.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=i)===s,p=(l+=o)===a;if(c&&!p)return-1;if(!c&&p)return 1;if(c&&p)return 0}};var Kn=function(){this._edges=new U,this._ocaMap=new Xe};Kn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Kn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Kn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Kn.prototype.iterator=function(){return this._edges.iterator()},Kn.prototype.getEdges=function(){return this._edges},Kn.prototype.get=function(t){return this._edges.get(t)},Kn.prototype.findEqualEdge=function(t){var e=new ai(t.getCoordinates());return this._ocaMap.get(e)},Kn.prototype.add=function(t){this._edges.add(t);var e=new ai(t.getCoordinates());this._ocaMap.put(e,t)},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Ci=function(){};Ci.prototype.processIntersections=function(t,e,n,r){},Ci.prototype.isDone=function(){},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};var Nn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};Nn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Nn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Nn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Nn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Nn.prototype.getLineIntersector=function(){return this._li},Nn.prototype.hasProperIntersection=function(){return this._hasProper},Nn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Nn.prototype.hasIntersection=function(){return this._hasIntersection},Nn.prototype.isDone=function(){return!1},Nn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Nn.prototype.interfaces_=function(){return[Ci]},Nn.prototype.getClass=function(){return Nn},Nn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var fr=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[1],n=arguments[2];this.coord=new L(arguments[0]),this.segmentIndex=e,this.dist=n};fr.prototype.getSegmentIndex=function(){return this.segmentIndex},fr.prototype.getCoordinate=function(){return this.coord},fr.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},fr.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},fr.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},fr.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},fr.prototype.getDistance=function(){return this.dist},fr.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},fr.prototype.interfaces_=function(){return[An]},fr.prototype.getClass=function(){return fr};var Pr=function(){this._nodeMap=new Xe,this.edge=null,this.edge=arguments[0]};Pr.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Pr.prototype.iterator=function(){return this._nodeMap.values().iterator()},Pr.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Pr.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Pr.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new L(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new Ua(o,new Jt(this.edge._label))},Pr.prototype.add=function(t,e,n){var r=new fr(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Pr.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr};var Ni=function(){};Ni.prototype.getChainStartIndices=function(t){var e=0,n=new U;n.add(new nr(e));do{var r=this.findChainEnd(t,e);n.add(new nr(r)),e=r}while(e<t.length-1);return Ni.toIntArray(n)},Ni.prototype.findChainEnd=function(t,e){for(var n=$t.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&$t.quadrant(t[r-1],t[r])===n;)r++;return r-1},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Hr=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Z,this.env2=new Z;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Ni;this.startIndex=e.getChainStartIndices(this.pts)};Hr.prototype.getCoordinates=function(){return this.pts},Hr.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Hr.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Hr.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],arguments[3])}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],h=this.pts[i],c=this.pts[o],p=s.pts[a],g=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(h,c),this.env2.init(p,g),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),m=Math.trunc((a+u)/2);i<d&&(a<m&&this.computeIntersectsForChain(i,d,s,a,m,l),m<u&&this.computeIntersectsForChain(i,d,s,m,u,l)),d<o&&(a<m&&this.computeIntersectsForChain(d,o,s,a,m,l),m<u&&this.computeIntersectsForChain(d,o,s,m,u,l))}},Hr.prototype.getStartIndexes=function(){return this.startIndex},Hr.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var ke=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},mf={NULL_VALUE:{configurable:!0}};ke.prototype.getDepth=function(t,e){return this._depth[t][e]},ke.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ke.prototype.isNull=function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(this._depth[e][n]!==ke.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===ke.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===ke.NULL_VALUE:void 0},ke.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},ke.prototype.getDelta=function(t){return this._depth[t][z.RIGHT]-this._depth[t][z.LEFT]},ke.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?D.EXTERIOR:D.INTERIOR},ke.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ke.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==D.EXTERIOR&&i!==D.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=ke.depthAtLocation(i):t._depth[n][r]+=ke.depthAtLocation(i))}else 3===arguments.length&&arguments[2]===D.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.depthAtLocation=function(t){return t===D.EXTERIOR?0:t===D.INTERIOR?1:ke.NULL_VALUE},mf.NULL_VALUE.get=function(){return-1},Object.defineProperties(ke,mf);var Ua=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Pr(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ke,this._depthDelta=0,1===arguments.length)e.call(this,arguments[0],null);else if(2===arguments.length){var i=arguments[1];this.pts=arguments[0],this._label=i}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);return n[0]=this.pts[0],n[1]=this.pts[1],new e(n,Jt.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(n){this._isIsolated=n},e.prototype.setName=function(n){this._name=n},e.prototype.equals=function(n){if(!(n instanceof e))return!1;var r=n;if(this.pts.length!==r.pts.length)return!1;for(var i=!0,o=!0,s=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(r.pts[a])||(i=!1),this.pts[a].equals2D(r.pts[--s])||(o=!1),!i&&!o)return!1;return!0},e.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},e.prototype.print=function(n){n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var r=0;r<this.pts.length;r++)r>0&&n.print(","),n.print(this.pts[r].x+" "+this.pts[r].y);n.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(n){e.updateIM(this._label,n)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(n){n.print("edge "+this._name+": ");for(var r=this.pts.length-1;r>=0;r--)n.print(this.pts[r]+" ");n.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Hr(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Z;for(var n=0;n<this.pts.length;n++)this._env.expandToInclude(this.pts[n])}return this._env},e.prototype.addIntersection=function(n,r,i,o){var s=new L(n.getIntersection(o)),a=r,u=n.getEdgeDistance(i,o),l=a+1;l<this.pts.length&&s.equals2D(this.pts[l])&&(a=l,u=0),this.eiList.add(s,a,u)},e.prototype.toString=function(){var n=new er;n.append("edge "+this._name+": "),n.append("LINESTRING (");for(var r=0;r<this.pts.length;r++)r>0&&n.append(","),n.append(this.pts[r].x+" "+this.pts[r].y);return n.append(")  "+this._label+" "+this._depthDelta),n.toString()},e.prototype.isPointwiseEqual=function(n){if(this.pts.length!==n.pts.length)return!1;for(var r=0;r<this.pts.length;r++)if(!this.pts[r].equals2D(n.pts[r]))return!1;return!0},e.prototype.setDepthDelta=function(n){this._depthDelta=n},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(n,r,i){for(var o=0;o<n.getIntersectionNum();o++)this.addIntersection(n,r,i,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var n=arguments[0],r=arguments[1];r.setAtLeastIfValid(n.getLocation(0,z.ON),n.getLocation(1,z.ON),1),n.isArea()&&(r.setAtLeastIfValid(n.getLocation(0,z.LEFT),n.getLocation(1,z.LEFT),2),r.setAtLeastIfValid(n.getLocation(0,z.RIGHT),n.getLocation(1,z.RIGHT),2))},e}(In),tn=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Kn,this._bufParams=t||null};tn.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},tn.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Jt(t.getLabel())).flip(),n.merge(r);var i=tn.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(tn.depthDelta(t.getLabel()))},tn.prototype.buildSubgraphs=function(t,e){for(var n=new U,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new to(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},tn.prototype.createSubgraphs=function(t){for(var e=new U,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Qe;i.create(r),e.add(i)}}return Zn.sort(e,Zn.reverseOrder()),e},tn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},tn.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Rl,n=new Ei;return n.setPrecisionModel(t),e.setSegmentIntersector(new Nn(n)),e},tn.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new hn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new pe(new yf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new mn(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},tn.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new Ua(i.getCoordinates(),new Jt(s));this.insertUniqueEdge(a)}}},tn.prototype.setNoder=function(t){this._workingNoder=t},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},tn.depthDelta=function(t){var e=t.getLocation(0,z.LEFT),n=t.getLocation(0,z.RIGHT);return e===D.INTERIOR&&n===D.EXTERIOR?1:e===D.EXTERIOR&&n===D.INTERIOR?-1:0},tn.convertSegStrings=function(t){for(var e=new pt,n=new U;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ui=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[1];this._noder=arguments[0],this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3];this._noder=arguments[0],this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ui.prototype.rescale=function(){var t=this;if(nt(arguments[0],Se))for(var n=arguments[0].iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Fe.out.println(i)}},ui.prototype.scale=function(){var t=this;if(nt(arguments[0],Se)){for(var e=arguments[0],n=new U,r=e.iterator();r.hasNext();){var i=r.next();n.add(new me(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new L(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);return ht.removeRepeatedPoints(s)}},ui.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ui.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ui.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ui.prototype.interfaces_=function(){return[Ii]},ui.prototype.getClass=function(){return ui};var gr=function(){this._li=new Ei,this._segStrings=null,this._segStrings=arguments[0]},vf={fact:{configurable:!0}};gr.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var r=e.next().getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],s=arguments[1].iterator();s.hasNext();)for(var u=s.next().getCoordinates(),l=1;l<u.length-1;l++)if(u[l].equals(i))throw new qr("found endpt/interior pt intersection at index "+l+" :pt "+i)},gr.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();this.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var h=0;h<u.length-1;h++)this.checkInteriorIntersections(o,l,s,h);else if(4===arguments.length){var c=arguments[0],p=arguments[1],g=arguments[2],d=arguments[3];if(c===g&&p===d)return null;var m=c.getCoordinates()[p],f=c.getCoordinates()[p+1],_=g.getCoordinates()[d],I=g.getCoordinates()[d+1];if(this._li.computeIntersection(m,f,_,I),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,m,f)||this.hasInteriorIntersection(this._li,_,I)))throw new qr("found non-noded intersection at "+m+"-"+f+" and "+_+"-"+I)}},gr.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},gr.prototype.checkCollapses=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();this.checkCollapses(n)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),o=0;o<i.length-2;o++)this.checkCollapse(i[o],i[o+1],i[o+2])},gr.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},gr.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new qr("found non-noded collapse at "+gr.fact.createLineString([t,e,n]))},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},vf.fact.get=function(){return new pt},Object.defineProperties(gr,vf);var pn=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new ce("Scale factor must be non-zero");1!==e&&(this._pt=new L(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new L,this._p1Scaled=new L),this.initCorners(this._pt)},_f={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};pn.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return lt.isTrue(!(s&&a),"Found bad envelope test"),a},pn.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new L(this._maxx,this._maxy),this._corner[1]=new L(this._minx,this._maxy),this._corner[2]=new L(this._minx,this._miny),this._corner[3]=new L(this._maxx,this._miny)},pn.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},pn.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},pn.prototype.getCoordinate=function(){return this._originalPt},pn.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},pn.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=pn.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Z(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},pn.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},pn.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},pn.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn},_f.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(pn,_f);var js=function(){this.tempEnv1=new Z,this.selectedSegment=new K};js.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},js.prototype.interfaces_=function(){return[]},js.prototype.getClass=function(){return js};var qo=function(){this._index=null,this._index=arguments[0]},xf={HotPixelSnapAction:{configurable:!0}};qo.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new Ef(e,n,r);return this._index.query(i,{interfaces_:function(){return[oi]},visitItem:function(s){s.select(i,o)}}),o.isNodeAdded()}},qo.prototype.interfaces_=function(){return[]},qo.prototype.getClass=function(){return qo},xf.HotPixelSnapAction.get=function(){return Ef},Object.defineProperties(qo,xf);var Ef=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var r=arguments[1],i=arguments[2];this._hotPixel=arguments[0],this._parentEdge=r,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var r=arguments[1],i=arguments[0].getContext();if(null!==this._parentEdge&&i===this._parentEdge&&r===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(i,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(js),eo=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new U};eo.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},eo.prototype.isDone=function(){return!1},eo.prototype.getInteriorIntersections=function(){return this._interiorIntersections},eo.prototype.interfaces_=function(){return[Ci]},eo.prototype.getClass=function(){return eo};var Mr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Ei,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Mr.prototype.checkCorrectness=function(t){var e=me.getNodedSubstrings(t),n=new gr(e);try{n.checkValid()}catch(r){if(!(r instanceof $p))throw r;r.printStackTrace()}},Mr.prototype.getNodedSubstrings=function(){return me.getNodedSubstrings(this._nodedSegStrings)},Mr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Mr.prototype.findInteriorIntersections=function(t,e){var n=new eo(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Mr.prototype.computeVertexSnaps=function(){var t=this;if(nt(arguments[0],Se))for(var n=arguments[0].iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof me)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new pn(o[s],t._scaleFactor,t._li);t._pointSnapper.snap(a,i,s)&&i.addIntersection(o[s],s)}},Mr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Rl,this._pointSnapper=new qo(this._noder.getIndex()),this.snapRound(t,this._li)},Mr.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new pn(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},Mr.prototype.interfaces_=function(){return[Ii]},Mr.prototype.getClass=function(){return Mr};var Ge=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Yt,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var n=arguments[1];this._argGeom=arguments[0],this._bufParams=n}},Bo={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ge.prototype.bufferFixedPrecision=function(t){var e=new ui(new Mr(new Xt(1)),t.getScale()),n=new tn(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Ge.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Ge.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(o){if(!(o instanceof Vr))throw o;t._saveException=o}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=Ge.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),i=new Xt(r);this.bufferFixedPrecision(i)}},Ge.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Xt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Ge.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Ge.prototype.bufferOriginalPrecision=function(){try{var t=new tn(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof qr))throw e;this._saveException=e}},Ge.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Ge.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge},Ge.bufferOp=function(){if(2===arguments.length){var e=arguments[1];return new Ge(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof tt&&"number"==typeof arguments[1]){var o=arguments[1],s=arguments[2],a=new Ge(arguments[0]);return a.setQuadrantSegments(s),a.getResultGeometry(o)}if(arguments[2]instanceof Yt&&arguments[0]instanceof tt&&"number"==typeof arguments[1]){var h=arguments[1];return new Ge(arguments[0],arguments[2]).getResultGeometry(h)}}else if(4===arguments.length){var m=arguments[1],f=arguments[2],_=arguments[3],I=new Ge(arguments[0]);return I.setQuadrantSegments(f),I.setEndCapStyle(_),I.getResultGeometry(m)}},Ge.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=wn.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Bo.CAP_ROUND.get=function(){return Yt.CAP_ROUND},Bo.CAP_BUTT.get=function(){return Yt.CAP_FLAT},Bo.CAP_FLAT.get=function(){return Yt.CAP_FLAT},Bo.CAP_SQUARE.get=function(){return Yt.CAP_SQUARE},Bo.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ge,Bo);var en=function(){this._pt=[new L,new L],this._distance=at.NaN,this._isNull=!0};en.prototype.getCoordinates=function(){return this._pt},en.prototype.getCoordinate=function(t){return this._pt[t]},en.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},en.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},en.prototype.getDistance=function(){return this._distance},en.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},en.prototype.interfaces_=function(){return[]},en.prototype.getClass=function(){return en};var Lr=function(){};Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.computeDistance=function(){if(arguments[2]instanceof en&&arguments[0]instanceof fe&&arguments[1]instanceof L)for(var e=arguments[1],n=arguments[2],r=arguments[0].getCoordinates(),i=new K,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof en&&arguments[0]instanceof Ce&&arguments[1]instanceof L){var a=arguments[0],u=arguments[1],l=arguments[2];Lr.computeDistance(a.getExteriorRing(),u,l);for(var h=0;h<a.getNumInteriorRing();h++)Lr.computeDistance(a.getInteriorRingN(h),u,l)}else if(arguments[2]instanceof en&&arguments[0]instanceof tt&&arguments[1]instanceof L){var c=arguments[0],p=arguments[1],g=arguments[2];if(c instanceof fe)Lr.computeDistance(c,p,g);else if(c instanceof Ce)Lr.computeDistance(c,p,g);else if(c instanceof Ke)for(var d=c,m=0;m<d.getNumGeometries();m++){var f=d.getGeometryN(m);Lr.computeDistance(f,p,g)}else g.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof en&&arguments[0]instanceof K&&arguments[1]instanceof L){var I=arguments[1],y=arguments[2],v=arguments[0].closestPoint(I);y.setMinimum(v,I)}};var Pi=function(t){this._maxPtDist=new en,this._inputGeom=t||null},Tl={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Pi.prototype.computeMaxMidpointDistance=function(t){var e=new li(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Pi.prototype.computeMaxVertexDistance=function(t){var e=new no(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Pi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Pi.prototype.getDistancePoints=function(){return this._maxPtDist},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Tl.MaxPointDistanceFilter.get=function(){return no},Tl.MaxMidpointDistanceFilter.get=function(){return li},Object.defineProperties(Pi,Tl);var no=function(t){this._maxPtDist=new en,this._minPtDist=new en,this._geom=t||null};no.prototype.filter=function(t){this._minPtDist.initialize(),Lr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},no.prototype.getMaxPointDistance=function(){return this._maxPtDist},no.prototype.interfaces_=function(){return[br]},no.prototype.getClass=function(){return no};var li=function(t){this._maxPtDist=new en,this._minPtDist=new en,this._geom=t||null};li.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new L((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Lr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},li.prototype.isDone=function(){return!1},li.prototype.isGeometryChanged=function(){return!1},li.prototype.getMaxPointDistance=function(){return this._maxPtDist},li.prototype.interfaces_=function(){return[Wn]},li.prototype.getClass=function(){return li};var Wr=function(t){this._comps=t||null};Wr.prototype.filter=function(t){t instanceof Ce&&this._comps.add(t)},Wr.prototype.interfaces_=function(){return[sr]},Wr.prototype.getClass=function(){return Wr},Wr.getPolygons=function(){if(1===arguments.length)return Wr.getPolygons(arguments[0],new U);if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Ce?n.add(e):e instanceof Ke&&e.apply(new Wr(n)),n}};var qe=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var n=arguments[1];this._lines=arguments[0],this._isForcedToLineString=n}};qe.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof wr){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof fe&&this._lines.add(t)},qe.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},qe.prototype.interfaces_=function(){return[Br]},qe.prototype.getClass=function(){return qe},qe.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(qe.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(qe.getLines(e,n))}},qe.getLines=function(){if(1===arguments.length)return qe.getLines(arguments[0],!1);if(2===arguments.length){if(nt(arguments[0],Se)&&nt(arguments[1],Se)){for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();qe.getLines(i,n)}return n}if(arguments[0]instanceof tt&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new U;return o.apply(new qe(a,s)),a}if(arguments[0]instanceof tt&&nt(arguments[1],Se)){var u=arguments[0],l=arguments[1];return u instanceof fe?l.add(u):u.apply(new qe(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&nt(arguments[0],Se)&&nt(arguments[1],Se)){for(var c=arguments[1],p=arguments[2],g=arguments[0].iterator();g.hasNext();){var d=g.next();qe.getLines(d,c,p)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof tt&&nt(arguments[1],Se)){var f=arguments[1];return arguments[0].apply(new qe(f,arguments[2])),f}}};var Qn=function(){if(this._boundaryRule=Fn.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new ce("Rule must be non-null");this._boundaryRule=t}};Qn.prototype.locateInternal=function(){if(arguments[0]instanceof L&&arguments[1]instanceof Ce){var e=arguments[0],n=arguments[1];if(n.isEmpty())return D.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===D.EXTERIOR)return D.EXTERIOR;if(i===D.BOUNDARY)return D.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=this.locateInPolygonRing(e,s);if(a===D.INTERIOR)return D.EXTERIOR;if(a===D.BOUNDARY)return D.BOUNDARY}return D.INTERIOR}if(arguments[0]instanceof L&&arguments[1]instanceof fe){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return D.EXTERIOR;var h=l.getCoordinates();return l.isClosed()||!u.equals(h[0])&&!u.equals(h[h.length-1])?V.isOnLine(u,h)?D.INTERIOR:D.EXTERIOR:D.BOUNDARY}if(arguments[0]instanceof L&&arguments[1]instanceof yn){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?D.INTERIOR:D.EXTERIOR}},Qn.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?V.locatePointInRing(t,e.getCoordinates()):D.EXTERIOR},Qn.prototype.intersects=function(t,e){return this.locate(t,e)!==D.EXTERIOR},Qn.prototype.updateLocationInfo=function(t){t===D.INTERIOR&&(this._isIn=!0),t===D.BOUNDARY&&this._numBoundaries++},Qn.prototype.computeLocation=function(t,e){var n=this;if(e instanceof yn&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof fe)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ce)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof wi)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof Ir)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof Ke)for(var l=new Nr(e);l.hasNext();){var h=l.next();h!==e&&n.computeLocation(t,h)}},Qn.prototype.locate=function(t,e){return e.isEmpty()?D.EXTERIOR:e instanceof fe||e instanceof Ce?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?D.BOUNDARY:this._numBoundaries>0||this._isIn?D.INTERIOR:D.EXTERIOR)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var nn=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var i=arguments[1],o=arguments[2];this._component=arguments[0],this._segIndex=i,this._pt=o}},bf={INSIDE_AREA:{configurable:!0}};nn.prototype.isInsideArea=function(){return this._segIndex===nn.INSIDE_AREA},nn.prototype.getCoordinate=function(){return this._pt},nn.prototype.getGeometryComponent=function(){return this._component},nn.prototype.getSegmentIndex=function(){return this._segIndex},nn.prototype.interfaces_=function(){return[]},nn.prototype.getClass=function(){return nn},bf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(nn,bf);var ci=function(t){this._pts=t||null};ci.prototype.filter=function(t){t instanceof yn&&this._pts.add(t)},ci.prototype.interfaces_=function(){return[sr]},ci.prototype.getClass=function(){return ci},ci.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof yn?Zn.singletonList(t):ci.getPoints(t,new U)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof yn?n.add(e):e instanceof Ke&&e.apply(new ci(n)),n}};var ro=function(){this._locations=null,this._locations=arguments[0]};ro.prototype.filter=function(t){(t instanceof yn||t instanceof fe||t instanceof Ce)&&this._locations.add(new nn(t,0,t.getCoordinate()))},ro.prototype.interfaces_=function(){return[sr]},ro.prototype.getClass=function(){return ro},ro.getLocations=function(t){var e=new U;return t.apply(new ro(e)),e};var Be=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Qn,this._minDistanceLocation=null,this._minDistance=at.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Be.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=Wr.getPolygons(this._geom[n]);if(o.size()>0){var s=ro.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&nt(arguments[0],Yn)&&nt(arguments[1],Yn)){for(var a=arguments[0],u=arguments[1],l=arguments[2],h=0;h<a.size();h++)for(var c=a.get(h),p=0;p<u.size();p++)if(t.computeContainmentDistance(c,u.get(p),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof nn&&arguments[1]instanceof Ce){var g=arguments[0],d=arguments[1],m=arguments[2],f=g.getCoordinate();if(D.EXTERIOR!==this._ptLocator.locate(f,d))return this._minDistance=0,m[0]=g,m[1]=new nn(d,f),null}},Be.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Be.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=qe.getLines(this._geom[0]),n=qe.getLines(this._geom[1]),r=ci.getPoints(this._geom[0]),i=ci.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Be.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Be.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Be.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Be.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof fe&&arguments[1]instanceof yn){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=V.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var l=new K(i[s],i[s+1]).closestPoint(o);r[0]=new nn(e,s,l),r[1]=new nn(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof fe&&arguments[1]instanceof fe){var h=arguments[0],c=arguments[1],p=arguments[2];if(h.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var g=h.getCoordinates(),d=c.getCoordinates(),m=0;m<g.length-1;m++)for(var f=0;f<d.length-1;f++){var _=V.distanceLineLine(g[m],g[m+1],d[f],d[f+1]);if(_<t._minDistance){t._minDistance=_;var I=new K(g[m],g[m+1]),y=new K(d[f],d[f+1]),v=I.closestPoints(y);p[0]=new nn(h,m,v[0]),p[1]=new nn(c,f,v[1])}if(t._minDistance<=t._terminateDistance)return null}}},Be.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new nn(o,0,o.getCoordinate()),n[1]=new nn(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},Be.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new ce("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Be.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.distance=function(t,e){return new Be(t,e).distance()},Be.isWithinDistance=function(t,e,n){return new Be(t,e,n).distance()<=n},Be.nearestPoints=function(t,e){return new Be(t,e).nearestPoints()};var We=function(){this._pt=[new L,new L],this._distance=at.NaN,this._isNull=!0};We.prototype.getCoordinates=function(){return this._pt},We.prototype.getCoordinate=function(t){return this._pt[t]},We.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},We.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},We.prototype.toString=function(){return Xn.toLineString(this._pt[0],this._pt[1])},We.prototype.getDistance=function(){return this._distance},We.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var dr=function(){};dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},dr.computeDistance=function(){if(arguments[2]instanceof We&&arguments[0]instanceof fe&&arguments[1]instanceof L)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new K,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof We&&arguments[0]instanceof Ce&&arguments[1]instanceof L){var a=arguments[0],u=arguments[1],l=arguments[2];dr.computeDistance(a.getExteriorRing(),u,l);for(var h=0;h<a.getNumInteriorRing();h++)dr.computeDistance(a.getInteriorRingN(h),u,l)}else if(arguments[2]instanceof We&&arguments[0]instanceof tt&&arguments[1]instanceof L){var c=arguments[0],p=arguments[1],g=arguments[2];if(c instanceof fe)dr.computeDistance(c,p,g);else if(c instanceof Ce)dr.computeDistance(c,p,g);else if(c instanceof Ke)for(var d=c,m=0;m<d.getNumGeometries();m++){var f=d.getGeometryN(m);dr.computeDistance(f,p,g)}else g.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof We&&arguments[0]instanceof K&&arguments[1]instanceof L){var I=arguments[1],y=arguments[2],v=arguments[0].closestPoint(I);y.setMinimum(v,I)}};var zn=function(){this._g0=null,this._g1=null,this._ptDist=new We,this._densifyFrac=0;var e=arguments[1];this._g0=arguments[0],this._g1=e},Al={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};zn.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},zn.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new ce("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},zn.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},zn.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},zn.prototype.computeOrientedDistance=function(t,e,n){var r=new io(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new hi(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},zn.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.distance=function(){if(2===arguments.length)return new zn(arguments[0],arguments[1]).distance();if(3===arguments.length){var o=arguments[2],s=new zn(arguments[0],arguments[1]);return s.setDensifyFraction(o),s.distance()}},Al.MaxPointDistanceFilter.get=function(){return io},Al.MaxDensifiedByFractionDistanceFilter.get=function(){return hi},Object.defineProperties(zn,Al);var io=function(){this._maxPtDist=new We,this._minPtDist=new We,this._euclideanDist=new dr,this._geom=null,this._geom=arguments[0]};io.prototype.filter=function(t){this._minPtDist.initialize(),dr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},io.prototype.getMaxPointDistance=function(){return this._maxPtDist},io.prototype.interfaces_=function(){return[br]},io.prototype.getClass=function(){return io};var hi=function(){this._maxPtDist=new We,this._minPtDist=new We,this._geom=null,this._numSubSegs=0;var e=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/e))};hi.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var h=new L(r.x+a*o,r.y+a*s);n._minPtDist.initialize(),dr.computeDistance(n._geom,h,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},hi.prototype.isDone=function(){return!1},hi.prototype.isGeometryChanged=function(){return!1},hi.prototype.getMaxPointDistance=function(){return this._maxPtDist},hi.prototype.interfaces_=function(){return[Wn]},hi.prototype.getClass=function(){return hi};var _n=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Dl={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};_n.prototype.checkMaximumDistance=function(t,e,n){var r=new zn(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Xn.toLineString(i[0],i[1])+")"}},_n.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=_n.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),_n.VERBOSE&&Fe.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},_n.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ce||this._input instanceof Ir||this._input instanceof Ke))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},_n.prototype.getErrorIndicator=function(){return this._errorIndicator},_n.prototype.checkMinimumDistance=function(t,e,n){var r=new Be(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Xn.toLineString(i[0],i[1])+" )"}},_n.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},_n.prototype.getErrorLocation=function(){return this._errorLocation},_n.prototype.getPolygonLines=function(t){for(var e=new U,n=new qe(e),r=Wr.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},_n.prototype.getErrorMessage=function(){return this._errMsg},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},Dl.VERBOSE.get=function(){return!1},Dl.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(_n,Dl);var ze=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Fl={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};ze.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},ze.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*ze.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Z(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Z(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},ze.prototype.checkDistance=function(){var t=new _n(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},ze.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},ze.prototype.checkPolygonal=function(){this._result instanceof Ce||this._result instanceof Ir||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},ze.prototype.getErrorIndicator=function(){return this._errorIndicator},ze.prototype.getErrorLocation=function(){return this._errorLocation},ze.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},ze.prototype.report=function(t){if(!ze.VERBOSE)return null;Fe.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},ze.prototype.getErrorMessage=function(){return this._errorMsg},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.isValidMsg=function(t,e,n){var r=new ze(t,e,n);return r.isValid()?null:r.getErrorMessage()},ze.isValid=function(t,e,n){return!!new ze(t,e,n).isValid()},Fl.VERBOSE.get=function(){return!1},Fl.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ze,Fl);var yr=function(){this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e};yr.prototype.getCoordinates=function(){return this._pts},yr.prototype.size=function(){return this._pts.length},yr.prototype.getCoordinate=function(t){return this._pts[t]},yr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},yr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Qi.octant(this.getCoordinate(t),this.getCoordinate(t+1))},yr.prototype.setData=function(t){this._data=t},yr.prototype.getData=function(){return this._data},yr.prototype.toString=function(){return Xn.toLineString(new ye(this._pts))},yr.prototype.interfaces_=function(){return[Cr]},yr.prototype.getClass=function(){return yr};var Re=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new U,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};Re.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Re.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Re.prototype.getIntersectionSegments=function(){return this._intSegments},Re.prototype.count=function(){return this._intersectionCount},Re.prototype.getIntersections=function(){return this._intersections},Re.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Re.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Re.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection()||t===n&&e===r||this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Re.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Re.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Re.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Re.prototype.interfaces_=function(){return[Ci]},Re.prototype.getClass=function(){return Re},Re.createAllIntersectionsFinder=function(t){var e=new Re(t);return e.setFindAllIntersections(!0),e},Re.createAnyIntersectionFinder=function(t){return new Re(t)},Re.createIntersectionCounter=function(t){var e=new Re(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var $n=function(){this._li=new Ei,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};$n.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},$n.prototype.getIntersections=function(){return this._segInt.getIntersections()},$n.prototype.isValid=function(){return this.execute(),this._isValid},$n.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},$n.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Re(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Rl;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},$n.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Vr(this.getErrorMessage(),this._segInt.getInteriorIntersection())},$n.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Xn.toLineString(t[0],t[1])+" and "+Xn.toLineString(t[2],t[3])},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.computeIntersections=function(t){var e=new $n(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Mi=function t(){this._nv=null,this._nv=new $n(t.toSegmentStrings(arguments[0]))};Mi.prototype.checkValid=function(){this._nv.checkValid()},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.toSegmentStrings=function(t){for(var e=new U,n=t.iterator();n.hasNext();){var r=n.next();e.add(new yr(r.getCoordinates(),r))}return e},Mi.checkValid=function(t){new Mi(t).checkValid()};var oo=function(t){this._mapOp=t};oo.prototype.map=function(t){for(var e=new U,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(pt.toGeometryArray(e))},oo.prototype.interfaces_=function(){return[]},oo.prototype.getClass=function(){return oo},oo.map=function(t,e){return new oo(e).map(t)};var mr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new U,this._resultLineList=new U;var e=arguments[1],n=arguments[2];this._op=arguments[0],this._geometryFactory=e,this._ptLocator=n};mr.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},mr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},mr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},mr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!ut.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},mr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},mr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},mr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},mr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(lt.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(ut.isResultOfOp(r,e)&&e===ut.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var so=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new U;var e=arguments[1];this._op=arguments[0],this._geometryFactory=e};so.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},so.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==ut.INTERSECTION)){var r=n.getLabel();ut.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},so.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},so.prototype.interfaces_=function(){return[]},so.prototype.getClass=function(){return so};var fn=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};fn.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},fn.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof wr&&!r.isEmpty()||(n=!1);for(var i=new U,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof wr||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new U;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},fn.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},fn.prototype.getInputGeometry=function(){return this._inputGeom},fn.prototype.transformMultiLineString=function(t,e){for(var n=new U,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},fn.prototype.transformCoordinates=function(t,e){return this.copy(t)},fn.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},fn.prototype.transformMultiPoint=function(t,e){for(var n=new U,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},fn.prototype.transformMultiPolygon=function(t,e){for(var n=new U,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},fn.prototype.copy=function(t){return t.copy()},fn.prototype.transformGeometryCollection=function(t,e){for(var n=new U,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(pt.toGeometryArray(n)):this._factory.buildGeometry(n)},fn.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof yn)return this.transformPoint(t,null);if(t instanceof Ao)return this.transformMultiPoint(t,null);if(t instanceof wr)return this.transformLinearRing(t,null);if(t instanceof fe)return this.transformLineString(t,null);if(t instanceof wi)return this.transformMultiLineString(t,null);if(t instanceof Ce)return this.transformPolygon(t,null);if(t instanceof Ir)return this.transformMultiPolygon(t,null);if(t instanceof Ke)return this.transformGeometryCollection(t,null);throw new ce("Unknown Geometry subtype: "+t.getClass().getName())},fn.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var Or=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new K,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof fe&&"number"==typeof arguments[1]){var n=arguments[1];t.call(this,arguments[0].getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};Or.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new L(o)),0===r&&this._isClosed&&t.set(t.size()-1,new L(o)))}},Or.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Or.prototype.snapTo=function(t){var e=new Ps(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Or.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new L(i),!1)}},Or.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=at.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i},Or.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var ve=function(t){this._srcGeom=t||null},wf={SNAP_PRECISION_FACTOR:{configurable:!0}};ve.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new If(e,n).transform(this._srcGeom)},ve.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new If(t,n,!0).transform(this._srcGeom),i=r;return e&&nt(i,ii)&&(i=r.buffer(0)),i},ve.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},ve.prototype.extractTargetCoordinates=function(t){for(var e=new or,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},ve.prototype.computeMinimumSegmentLength=function(t){for(var e=at.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},ve.prototype.interfaces_=function(){return[]},ve.prototype.getClass=function(){return ve},ve.snap=function(t,e,n){var r=new Array(2).fill(null),i=new ve(t);r[0]=i.snapTo(e,n);var o=new ve(e);return r[1]=o.snapTo(r[0],n),r},ve.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=ve.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Xt.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var o=arguments[1];return Math.min(ve.computeOverlaySnapTolerance(arguments[0]),ve.computeOverlaySnapTolerance(o))}},ve.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*ve.SNAP_PRECISION_FACTOR},ve.snapToSelf=function(t,e,n){return new ve(t).snapToSelf(e,n)},wf.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(ve,wf);var If=function(t){function e(n,r,i){t.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(n,r){var i=new Or(n,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(r)},e.prototype.transformCoordinates=function(n,r){var i=n.toCoordinateArray(),o=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fn),rn=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};rn.prototype.getCommon=function(){return at.longBitsToDouble(this._commonBits)},rn.prototype.add=function(t){var e=at.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=rn.signExpBits(this._commonBits),this._isFirst=!1,null):rn.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=rn.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=rn.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},rn.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=at.longBitsToDouble(t),r="0000000000000000000000000000000000000000000000000000000000000000"+at.toBinaryString(t),i=r.substring(r.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn},rn.getBit=function(t,e){return t&1<<e?1:0},rn.signExpBits=function(t){return t>>52},rn.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},rn.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(rn.getBit(t,r)!==rn.getBit(e,r))return n;n++}return 52};var pi=function(){this._commonCoord=null,this._ccFilter=new ao},kl={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};pi.prototype.addCommonBits=function(t){var e=new fi(this._commonCoord);t.apply(e),t.geometryChanged()},pi.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new L(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new fi(e);return t.apply(n),t.geometryChanged(),t},pi.prototype.getCommonCoordinate=function(){return this._commonCoord},pi.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},kl.CommonCoordinateFilter.get=function(){return ao},kl.Translater.get=function(){return fi},Object.defineProperties(pi,kl);var ao=function(){this._commonBitsX=new rn,this._commonBitsY=new rn};ao.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ao.prototype.getCommonCoordinate=function(){return new L(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ao.prototype.interfaces_=function(){return[br]},ao.prototype.getClass=function(){return ao};var fi=function(){this.trans=null,this.trans=arguments[0]};fi.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},fi.prototype.isDone=function(){return!1},fi.prototype.isGeometryChanged=function(){return!0},fi.prototype.interfaces_=function(){return[Wn]},fi.prototype.getClass=function(){return fi};var Te=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Te.prototype.selfSnap=function(t){return new ve(t).snapTo(t,this._snapTolerance)},Te.prototype.removeCommonBits=function(t){this._cbr=new pi,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Te.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Te.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=ut.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Te.prototype.checkValid=function(t){t.isValid()||Fe.out.println("Snapped geometry is invalid")},Te.prototype.computeSnapTolerance=function(){this._snapTolerance=ve.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Te.prototype.snap=function(t){var e=this.removeCommonBits(t);return ve.snap(e[0],e[1],this._snapTolerance)},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te},Te.overlayOp=function(t,e,n){return new Te(t,e).getResultGeometry(n)},Te.union=function(t,e){return Te.overlayOp(t,e,ut.UNION)},Te.intersection=function(t,e){return Te.overlayOp(t,e,ut.INTERSECTION)},Te.symDifference=function(t,e){return Te.overlayOp(t,e,ut.SYMDIFFERENCE)},Te.difference=function(t,e){return Te.overlayOp(t,e,ut.DIFFERENCE)};var on=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};on.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=ut.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(i){if(!(i instanceof qr))throw i;r=i}if(!n)try{e=Te.overlayOp(this._geom[0],this._geom[1],t)}catch(i){throw i instanceof qr?r:i}return e},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on},on.overlayOp=function(t,e,n){return new on(t,e).getResultGeometry(n)},on.union=function(t,e){return on.overlayOp(t,e,ut.UNION)},on.intersection=function(t,e){return on.overlayOp(t,e,ut.INTERSECTION)},on.symDifference=function(t,e){return on.overlayOp(t,e,ut.SYMDIFFERENCE)},on.difference=function(t,e){return on.overlayOp(t,e,ut.DIFFERENCE)};var Us=function(){this.mce=null,this.chainIndex=null;var e=arguments[1];this.mce=arguments[0],this.chainIndex=e};Us.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Us.prototype.interfaces_=function(){return[]},Us.prototype.getClass=function(){return Us};var xn=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Gl={INSERT:{configurable:!0},DELETE:{configurable:!0}};xn.prototype.isDelete=function(){return this._eventType===xn.DELETE},xn.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},xn.prototype.getObject=function(){return this._obj},xn.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},xn.prototype.getInsertEvent=function(){return this._insertEvent},xn.prototype.isInsert=function(){return this._eventType===xn.INSERT},xn.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},xn.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},xn.prototype.interfaces_=function(){return[An]},xn.prototype.getClass=function(){return xn},Gl.INSERT.get=function(){return 1},Gl.DELETE.get=function(){return 2},Object.defineProperties(xn,Gl);var Va=function(){};Va.prototype.interfaces_=function(){return[]},Va.prototype.getClass=function(){return Va};var je=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[1],n=arguments[2];this._li=arguments[0],this._includeProper=e,this._recordIsolated=n};je.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(je.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},je.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},je.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},je.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},je.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},je.prototype.hasProperIntersection=function(){return this._hasProper},je.prototype.hasIntersection=function(){return this._hasIntersection},je.prototype.isDone=function(){return this._isDone},je.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},je.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},je.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je},je.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Q0=function(t){function e(){t.call(this),this.events=new U,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){Zn.sort(this.events);for(var n=0;n<this.events.size();n++){var r=this.events.get(n);r.isDelete()&&r.getInsertEvent().setDeleteEventIndex(n)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var r=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var i=0;i<this.events.size();i++){var o=this.events.get(i);if(o.isInsert()&&this.processOverlaps(i,o.getDeleteEventIndex(),o,r),r.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof je&&nt(arguments[0],Yn)&&nt(arguments[1],Yn)){var s=arguments[0],a=arguments[1],u=arguments[2];this.addEdges(s,s),this.addEdges(a,a),this.computeIntersections(u)}else if("boolean"==typeof arguments[2]&&nt(arguments[0],Yn)&&arguments[1]instanceof je){var l=arguments[0],h=arguments[1];arguments[2]?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(h)}},e.prototype.addEdge=function(n,r){for(var i=n.getMonotoneChainEdge(),o=i.getStartIndexes(),s=0;s<o.length-1;s++){var a=new Us(i,s),u=new xn(r,i.getMinX(s),a);this.events.add(u),this.events.add(new xn(i.getMaxX(s),u))}},e.prototype.processOverlaps=function(n,r,i,o){for(var s=i.getObject(),a=n;a<r;a++){var u=this.events.get(a);if(u.isInsert()){var l=u.getObject();i.isSameLabel(u)||(s.computeIntersections(l,o),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var i=arguments[0].iterator();i.hasNext();){var o=i.next();this.addEdge(o,o)}else if(2===arguments.length)for(var a=arguments[1],u=arguments[0].iterator();u.hasNext();){var l=u.next();this.addEdge(l,a)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Va),Rr=function(){this._min=at.POSITIVE_INFINITY,this._max=at.NEGATIVE_INFINITY},Sf={NodeComparator:{configurable:!0}};Rr.prototype.getMin=function(){return this._min},Rr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Rr.prototype.getMax=function(){return this._max},Rr.prototype.toString=function(){return Xn.toLineString(new L(this._min,0),new L(this._max,0))},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Sf.NodeComparator.get=function(){return Vs},Object.defineProperties(Rr,Sf);var Vs=function(){};Vs.prototype.compare=function(t,e){var i=(t._min+t._max)/2,o=(e._min+e._max)/2;return i<o?-1:i>o?1:0},Vs.prototype.interfaces_=function(){return[wo]},Vs.prototype.getClass=function(){return Vs};var $0=function(t){function e(){t.call(this),this._item=null;var r=arguments[1],i=arguments[2];this._min=arguments[0],this._max=r,this._item=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;i.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rr),ty=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var r=arguments[1];this._node1=arguments[0],this._node2=r,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(n,r){this._min=Math.min(n._min,r._min),this._max=Math.max(n._max,r._max)},e.prototype.query=function(n,r,i){if(!this.intersects(n,r))return null;null!==this._node1&&this._node1.query(n,r,i),null!==this._node2&&this._node2.query(n,r,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rr),Tr=function(){this._leaves=new U,this._root=null,this._level=0};Tr.prototype.buildTree=function(){Zn.sort(this._leaves,new Rr.NodeComparator);for(var t=this._leaves,e=null,n=new U;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Tr.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new $0(t,e,n))},Tr.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Tr.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Tr.prototype.printNode=function(t){Fe.out.println(Xn.toLineString(new L(t._min,this._level),new L(t._max,this._level)))},Tr.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Tr.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new ty(t.get(n),t.get(n+1));e.add(i)}}},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr};var zo=function(){this._items=new U};zo.prototype.visitItem=function(t){this._items.add(t)},zo.prototype.getItems=function(){return this._items},zo.prototype.interfaces_=function(){return[oi]},zo.prototype.getClass=function(){return zo};var jo=function(){this._index=null;var t=arguments[0];if(!nt(t,ii))throw new ce("Argument must be Polygonal");this._index=new Li(t)},ql={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};jo.prototype.locate=function(t){var e=new ir(t),n=new Uo(e);return this._index.query(t.y,t.y,n),e.getLocation()},jo.prototype.interfaces_=function(){return[Go]},jo.prototype.getClass=function(){return jo},ql.SegmentVisitor.get=function(){return Uo},ql.IntervalIndexedGeometry.get=function(){return Li},Object.defineProperties(jo,ql);var Uo=function(){this._counter=null,this._counter=arguments[0]};Uo.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Uo.prototype.interfaces_=function(){return[oi]},Uo.prototype.getClass=function(){return Uo};var Li=function(){this._index=new Tr,this.init(arguments[0])};Li.prototype.init=function(t){for(var e=qe.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Li.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new K(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Li.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new zo;return this._index.query(t,e,n),n.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li};var Xs=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new sf,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Qn,2===arguments.length){var r=arguments[1],i=Fn.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=r,this._boundaryNodeRule=i,null!==r&&this.add(r)}else if(3===arguments.length){var s=arguments[1],a=arguments[2];this._argIndex=arguments[0],this._parentGeom=s,this._boundaryNodeRule=a,null!==s&&this.add(s)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(n,r){var i=this._nodes.addNode(r).getLabel(),o=1;i.getLocation(n,z.ON)===D.BOUNDARY&&o++;var s=e.determineBoundary(this._boundaryNodeRule,o);i.setLocation(n,s)},e.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var o=arguments[1],s=arguments[2],a=new je(arguments[0],!0,!1);return a.setIsDoneIfProperInt(s),this.createEdgeSetIntersector().computeIntersections(this._edges,a,o||!(this._parentGeom instanceof wr||this._parentGeom instanceof Ce||this._parentGeom instanceof Ir)),this.addSelfIntersectionNodes(this._argIndex),a}},e.prototype.computeSplitEdges=function(n){for(var r=this._edges.iterator();r.hasNext();)r.next().eiList.addSplitEdges(n)},e.prototype.computeEdgeIntersections=function(n,r,i){var o=new je(r,i,!0);return o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,n._edges,o),o},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof yn){var r=arguments[0].getCoordinate();this.insertPoint(this._argIndex,r,D.INTERIOR)}else arguments[0]instanceof L&&this.insertPoint(this._argIndex,arguments[0],D.INTERIOR)},e.prototype.addPolygon=function(n){this.addPolygonRing(n.getExteriorRing(),D.EXTERIOR,D.INTERIOR);for(var r=0;r<n.getNumInteriorRing();r++){var i=n.getInteriorRingN(r);this.addPolygonRing(i,D.INTERIOR,D.EXTERIOR)}},e.prototype.addEdge=function(n){this.insertEdge(n);var r=n.getCoordinates();this.insertPoint(this._argIndex,r[0],D.BOUNDARY),this.insertPoint(this._argIndex,r[r.length-1],D.BOUNDARY)},e.prototype.addLineString=function(n){var r=ht.removeRepeatedPoints(n.getCoordinates());if(r.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=new Ua(r,new Jt(this._argIndex,D.INTERIOR));this._lineEdgeMap.put(n,i),this.insertEdge(i),lt.isTrue(r.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,r[0]),this.insertBoundaryPoint(this._argIndex,r[r.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),r=new Array(n.size()).fill(null),i=0,o=n.iterator();o.hasNext();){var s=o.next();r[i++]=s.getCoordinate().copy()}return r},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(n,r,i){if(this.isBoundaryNode(n,r))return null;i===D.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,r):this.insertPoint(n,r,i)},e.prototype.addPolygonRing=function(n,r,i){if(n.isEmpty())return null;var o=ht.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var s=r,a=i;V.isCCW(o)&&(s=i,a=r);var u=new Ua(o,new Jt(this._argIndex,D.BOUNDARY,s,a));this._lineEdgeMap.put(n,u),this.insertEdge(u),this.insertPoint(this._argIndex,o[0],D.BOUNDARY)},e.prototype.insertPoint=function(n,r,i){var o=this._nodes.addNode(r),s=o.getLabel();null===s?o._label=new Jt(n,i):s.setLocation(n,i)},e.prototype.createEdgeSetIntersector=function(){return new Q0},e.prototype.addSelfIntersectionNodes=function(n){for(var r=this._edges.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel().getLocation(n),s=i.eiList.iterator();s.hasNext();){var a=s.next();this.addSelfIntersectionNode(n,a.coord,o)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Ir&&(this._useBoundaryDeterminationRule=!1),n instanceof Ce)this.addPolygon(n);else if(n instanceof fe)this.addLineString(n);else if(n instanceof yn)this.addPoint(n);else if(n instanceof Ao)this.addCollection(n);else if(n instanceof wi)this.addCollection(n);else if(n instanceof Ir)this.addCollection(n);else{if(!(n instanceof Ke))throw new Error(n.getClass().getName());this.addCollection(n)}},e.prototype.addCollection=function(n){for(var r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.add(i)}},e.prototype.locate=function(n){return nt(this._parentGeom,ii)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new jo(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},e.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(n,r){return n.isInBoundary(r)?D.BOUNDARY:D.INTERIOR},e}(pe),Vo=function(){if(this._li=new Ei,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Xs(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Fn.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Xs(0,e,r),this._arg[1]=new Xs(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Xs(0,i,s),this._arg[1]=new Xs(1,o,s)}};Vo.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Vo.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Vo.prototype.interfaces_=function(){return[]},Vo.prototype.getClass=function(){return Vo};var Oi=function(){};Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.map=function(){if(arguments[0]instanceof tt&&nt(arguments[1],Oi.MapOp)){for(var t=arguments[0],e=arguments[1],n=new U,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(nt(arguments[0],Se)&&nt(arguments[1],Oi.MapOp)){for(var o=arguments[0],s=arguments[1],a=new U,u=o.iterator();u.hasNext();){var l=u.next(),h=s.map(l);null!==h&&a.add(h)}return a}},Oi.MapOp=function(){};var ut=function(t){function e(){var n=arguments[0];t.call(this,n,arguments[1]),this._ptLocator=new Qn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Kn,this._resultPolyList=new U,this._resultLineList=new U,this._resultPointList=new U,this._graph=new pe(new yf),this._geomFact=n.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(n){var r=this._edgeList.findEqualEdge(n);if(null!==r){var i=r.getLabel(),o=n.getLabel();r.isPointwiseEqual(n)||(o=new Jt(n.getLabel())).flip();var s=r.getDepth();s.isNull()&&s.add(i),s.add(o),i.merge(o)}else this._edgeList.add(n)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getSym();r.isInResult()&&i.isInResult()&&(r.setInResult(!1),i.setInResult(!1))}},e.prototype.isCoveredByLA=function(n){return!!this.isCovered(n,this._resultLineList)||!!this.isCovered(n,this._resultPolyList)},e.prototype.computeGeometry=function(n,r,i,o){var s=new U;return s.addAll(n),s.addAll(r),s.addAll(i),s.isEmpty()?e.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)},e.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();)n.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(n,r){for(var i=r.iterator();i.hasNext();){var o=i.next();if(this._ptLocator.locate(n,o)!==D.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var n=new U,r=this._edgeList.iterator();r.hasNext();){var i=r.next();i.isCollapsed()&&(r.remove(),n.add(i.getCollapsedEdge()))}this._edgeList.addAll(n)},e.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getEdges().getLabel();r.getLabel().merge(i)}},e.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},e.prototype.insertUniqueEdges=function(n){for(var r=n.iterator();r.hasNext();){var i=r.next();this.insertUniqueEdge(i)}},e.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var r=new U;this._arg[0].computeSplitEdges(r),this._arg[1].computeSplitEdges(r),this.insertUniqueEdges(r),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Mi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var i=new mn(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var o=new mr(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var s=new so(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},e.prototype.labelIncompleteNode=function(n,r){var i=this._ptLocator.locate(n.getCoordinate(),this._arg[r].getGeometry());n.getLabel().setLocation(r,i)},e.prototype.copyPoints=function(n){for(var r=this._arg[n].getNodeIterator();r.hasNext();){var i=r.next();this._graph.addNode(i.getCoordinate()).setLabel(n,i.getLabel().getLocation(n))}},e.prototype.findResultAreaEdges=function(n){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(o.getLocation(0,z.RIGHT),o.getLocation(1,z.RIGHT),n)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var r=n.next(),i=r.getLabel(),o=r.getDepth();if(!o.isNull()){o.normalize();for(var s=0;s<2;s++)i.isNull(s)||!i.isArea()||o.isNull(s)||(0===o.getDelta(s)?i.toLine(s):(lt.isTrue(!o.isNull(s,z.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(s,z.LEFT,o.getLocation(s,z.LEFT)),lt.isTrue(!o.isNull(s,z.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(s,z.RIGHT,o.getLocation(s,z.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();)n.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(r,0):this.labelIncompleteNode(r,1)),r.getEdges().updateLabelling(i)}},e.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vo);ut.overlayOp=function(t,e,n){return new ut(t,e).getResultGeometry(n)},ut.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return ut.createEmptyResult(ut.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return oo.map(t,{interfaces_:function(){return[Oi.MapOp]},map:function(r){return r.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),on.overlayOp(t,e,ut.INTERSECTION)},ut.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ut.createEmptyResult(ut.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),on.overlayOp(t,e,ut.SYMDIFFERENCE)},ut.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case ut.INTERSECTION:o=Math.min(r,i);break;case ut.UNION:o=Math.max(r,i);break;case ut.DIFFERENCE:o=r;break;case ut.SYMDIFFERENCE:o=Math.max(r,i)}return o},ut.createEmptyResult=function(t,e,n,r){var i=null;switch(ut.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},ut.difference=function(t,e){return t.isEmpty()?ut.createEmptyResult(ut.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),on.overlayOp(t,e,ut.DIFFERENCE))},ut.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return ut.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===D.BOUNDARY&&(i=D.INTERIOR),o===D.BOUNDARY&&(o=D.INTERIOR),arguments[2]){case ut.INTERSECTION:return i===D.INTERIOR&&o===D.INTERIOR;case ut.UNION:return i===D.INTERIOR||o===D.INTERIOR;case ut.DIFFERENCE:return i===D.INTERIOR&&o!==D.INTERIOR;case ut.SYMDIFFERENCE:return i===D.INTERIOR&&o!==D.INTERIOR||i!==D.INTERIOR&&o===D.INTERIOR}return!1}},ut.INTERSECTION=1,ut.UNION=2,ut.DIFFERENCE=3,ut.SYMDIFFERENCE=4;var gi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Qn,this._seg=new K;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};gi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},gi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?D.BOUNDARY:this._ptLocator.locate(t,this._g)},gi.prototype.extractLinework=function(t){var e=new Xo;t.apply(e);var n=e.getLinework(),r=pt.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi};var Xo=function(){this._linework=null,this._linework=new U};Xo.prototype.getLinework=function(){return this._linework},Xo.prototype.filter=function(t){if(t instanceof Ce){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Xo.prototype.interfaces_=function(){return[sr]},Xo.prototype.getClass=function(){return Xo};var Ri=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};Ri.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Ri.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ri.prototype.getPoints=function(t){for(var e=new U,n=qe.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Ri.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(e.x+t.x)/2,h=(e.y+t.y)/2;if(this._doLeft){var c=new L(l-u,h+a);r.add(c)}if(this._doRight){var p=new L(l+u,h-a);r.add(p)}},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri};var Pn=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new U;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new gi(this._geom[0],this._boundaryDistanceTolerance),new gi(this._geom[1],this._boundaryDistanceTolerance),new gi(this._geom[2],this._boundaryDistanceTolerance)]},Cf={TOLERANCE:{configurable:!0}};Pn.prototype.reportResult=function(t,e,n){Fe.out.println("Overlay result invalid - A:"+D.toLocationSymbol(e[0])+" B:"+D.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+D.toLocationSymbol(e[2]))},Pn.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pn.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Pn.hasLocation(this._location,D.BOUNDARY)||this.isValidResult(i,this._location)}},Pn.prototype.addTestPts=function(t){var e=new Ri(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pn.prototype.isValidResult=function(t,e){var n=ut.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===D.INTERIOR);return r||this.reportResult(t,e,n),r},Pn.prototype.getInvalidLocation=function(){return this._invalidLocation},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pn.computeBoundaryDistanceTolerance=function(t,e){return Math.min(ve.computeSizeBasedSnapTolerance(t),ve.computeSizeBasedSnapTolerance(e))},Pn.isValid=function(t,e,n,r){return new Pn(t,e,r).isValid(n)},Cf.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pn,Cf);var Mn=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Mn.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Mn.prototype.combine=function(){for(var t=new U,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.combine=function(){return 1===arguments.length?new Mn(arguments[0]).combine():2===arguments.length?new Mn(Mn.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Mn(Mn.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Mn.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mn.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new U;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new U;return s.add(r),s.add(i),s.add(o),s}};var be=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new U)},Nf={STRTREE_NODE_CAPACITY:{configurable:!0}};be.prototype.reduceToGeometries=function(t){for(var e=new U,n=t.iterator();n.hasNext();){var r=n.next(),i=null;nt(r,Yn)?i=this.unionTree(r):r instanceof tt&&(i=r),e.add(i)}return e},be.prototype.extractByEnvelope=function(t,e,n){for(var r=new U,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},be.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Mn.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},be.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new cf(be.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},be.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=be.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(be.getGeometry(e,n),be.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},be.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},be.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},be.prototype.unionActual=function(t,e){return be.restrictToPolygons(t.union(e))},be.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},be.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new U,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Mn.combine(r)},be.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var i=arguments[0],o=arguments[1];return i.getFactory().createGeometryCollection([i,o]).buffer(0)}},be.prototype.interfaces_=function(){return[]},be.prototype.getClass=function(){return be},be.restrictToPolygons=function(t){if(nt(t,ii))return t;var e=Wr.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(pt.toPolygonArray(e))},be.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},be.union=function(t){return new be(t).union()},Nf.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(be,Nf);var Xa=function(){};function Ti(){return new Ya}function Ya(){this.reset()}Xa.prototype.interfaces_=function(){return[]},Xa.prototype.getClass=function(){return Xa},Xa.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return ut.createEmptyResult(ut.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),on.overlayOp(t,e,ut.UNION)},Ya.prototype={constructor:Ya,reset:function(){this.s=this.t=0},add:function(t){Pf(Ha,t,this.t),Pf(this,Ha.s,this.s),this.s?this.t+=Ha.t:this.s=Ha.t},valueOf:function(){return this.s}};var Ha=new Ya;function Pf(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}var we=1e-6,ne=Math.PI,Jr=ne/2,Mf=ne/4,Zr=2*ne,Ai=180/ne,vr=ne/180,sn=Math.abs,ey=Math.atan,Yo=Math.atan2,Pe=Math.cos,Me=Math.sin,Ys=Math.sqrt;function Lf(t){return t>1?0:t<-1?ne:Math.acos(t)}function Ho(t){return t>1?Jr:t<-1?-Jr:Math.asin(t)}function Hs(){}function Wa(t,e){t&&Rf.hasOwnProperty(t.type)&&Rf[t.type](t,e)}var Xl,Uf,Of={Feature:function(t,e){Wa(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Wa(n[r].geometry,e)}},Rf={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){Bl(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Bl(n[r],e,0)},Polygon:function(t,e){Tf(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Tf(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Wa(n[r],e)}};function Bl(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function Tf(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Bl(t[n],e,1);e.polygonEnd()}function zl(t){return[Yo(t[1],t[0]),Ho(t[2])]}function Wo(t){var e=t[0],n=t[1],r=Pe(n);return[r*Pe(e),r*Me(e),Me(n)]}function Ja(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Za(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function jl(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ka(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ul(t){var e=Ys(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Af(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return(r=e.invert(r,i))&&t.invert(r[0],r[1])}),n}function Vl(t,e){return[t>ne?t-Zr:t<-ne?t+Zr:t,e]}function Df(t){return function(e,n){return[(e+=t)>ne?e-Zr:e<-ne?e+Zr:e,n]}}function Ff(t){var e=Df(t);return e.invert=Df(-t),e}function kf(t,e){var n=Pe(t),r=Me(t),i=Pe(e),o=Me(e);function s(a,u){var l=Pe(u),h=Pe(a)*l,c=Me(a)*l,p=Me(u),g=p*n+h*r;return[Yo(c*i-g*o,h*n-p*r),Ho(g*i+c*o)]}return s.invert=function(a,u){var l=Pe(u),h=Pe(a)*l,c=Me(a)*l,p=Me(u),g=p*i-c*o;return[Yo(c*i+p*o,h*n+g*r),Ho(g*n-h*r)]},s}function Gf(t,e){(e=Wo(e))[0]-=t,Ul(e);var n=Lf(-e[1]);return((-e[2]<0?-n:n)+Zr-we)%Zr}function qf(){var t,e=[];return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:Hs,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Qa(t,e){return sn(t[0]-e[0])<we&&sn(t[1]-e[1])<we}function $a(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bf(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach(function(d){if(!((m=d.length-1)<=0)){var m,f,_=d[0],I=d[m];if(Qa(_,I)){for(i.lineStart(),o=0;o<m;++o)i.point((_=d[o])[0],_[1]);i.lineEnd()}else a.push(f=new $a(_,d,null,!0)),u.push(f.o=new $a(_,null,f,!1)),a.push(f=new $a(I,d,null,!1)),u.push(f.o=new $a(I,null,f,!0))}}),a.length){for(u.sort(e),zf(a),zf(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,h,c=a[0];;){for(var p=c,g=!0;p.v;)if((p=p.n)===c)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(o=0,s=l.length;o<s;++o)i.point((h=l[o])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g)for(o=(l=p.p.z).length-1;o>=0;--o)i.point((h=l[o])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}l=(p=p.o).z,g=!g}while(!p.v);i.lineEnd()}}}function zf(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function jf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Vf(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}Ti(),Ti(),Ti(),Vl.invert=Vl,1===(Xl=jf).length&&(Uf=Xl,Xl=function(t,e){return jf(Uf(t),e)});var Ws=1e9,tu=-Ws,Yl=Ti();function Xf(t){return t}Ti(),Ti(),Ti();var Jo=1/0,eu=Jo,Js=-Jo,nu=Js,Yf={point:function(t,e){t<Jo&&(Jo=t),t>Js&&(Js=t),e<eu&&(eu=e),e>nu&&(nu=e)},lineStart:Hs,lineEnd:Hs,polygonStart:Hs,polygonEnd:Hs,result:function(){var t=[[Jo,eu],[Js,nu]];return Js=nu=-(eu=Jo=1/0),t}};function Hf(t,e,n,r){return function(i,o){var s,a,u,l=e(o),h=i.invert(r[0],r[1]),c=qf(),p=e(c),g=!1,d={point:m,lineStart:_,lineEnd:I,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=x,a=[],s=[]},polygonEnd:function(){d.point=m,d.lineStart=_,d.lineEnd=I,a=Vf(a);var b=function(E,A){var C=A[0],F=A[1],P=[Me(C),-Pe(C),0],q=0,R=0;Yl.reset();for(var O=0,M=E.length;O<M;++O)if(T=(k=E[O]).length)for(var k,T,B=k[T-1],S=B[0],J=B[1]/2+Mf,j=Me(J),ct=Pe(J),Y=0;Y<T;++Y,S=gt,j=Ue,ct=iu,B=et){var et=k[Y],gt=et[0],te=et[1]/2+Mf,Ue=Me(te),iu=Pe(te),Di=gt-S,Ks=Di>=0?1:-1,Qs=Ks*Di,Zo=Qs>ne,ou=j*Ue;if(Yl.add(Yo(ou*Ks*Me(Qs),ct*iu+ou*Pe(Qs))),q+=Zo?Di+Ks*Zr:Di,Zo^S>=C^gt>=C){var Ko=Za(Wo(B),Wo(et));Ul(Ko);var sg=Za(P,Ko);Ul(sg);var ag=(Zo^Di>=0?-1:1)*Ho(sg[2]);(F>ag||F===ag&&(Ko[0]||Ko[1]))&&(R+=Zo^Di>=0?1:-1)}}return(q<-1e-6||q<we&&Yl<-1e-6)^1&R}(s,h);a.length?(g||(o.polygonStart(),g=!0),Bf(a,iy,b,n,o)):b&&(g||(o.polygonStart(),g=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(b,E){var A=i(b,E);t(b=A[0],E=A[1])&&o.point(b,E)}function f(b,E){var A=i(b,E);l.point(A[0],A[1])}function _(){d.point=f,l.lineStart()}function I(){d.point=m,l.lineEnd()}function y(b,E){u.push([b,E]);var A=i(b,E);p.point(A[0],A[1])}function v(){p.lineStart(),u=[]}function x(){y(u[0][0],u[0][1]),p.lineEnd();var b,E,A,C,F=p.clean(),P=c.result(),q=P.length;if(u.pop(),s.push(u),u=null,q)if(1&F){if((E=(A=P[0]).length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),b=0;b<E;++b)o.point((C=A[b])[0],C[1]);o.lineEnd()}}else q>1&&2&F&&P.push(P.pop().concat(P.shift())),a.push(P.filter(ry))}return d}}function ry(t){return t.length>1}function iy(t,e){return((t=t.x)[0]<0?t[1]-Jr-we:Jr-t[1])-((e=e.x)[0]<0?e[1]-Jr-we:Jr-e[1])}Ti();var Wf=Hf(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var l,h,c,p,g,d,m,a=o>0?ne:-ne,u=sn(o-n);sn(u-ne)<we?(t.point(n,r=(r+s)/2>0?Jr:-Jr),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=ne&&(sn(n-i)<we&&(n-=i*we),sn(o-a)<we&&(o-=a*we),h=r,p=s,m=Me((l=n)-(c=o)),r=sn(m)>we?ey((Me(h)*(d=Pe(p))*Me(c)-Me(p)*(g=Pe(h))*Me(l))/(g*d*m)):(h+p)/2,t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-ne,i=n*Jr),r.point(0,i),r.point(ne,i),r.point(ne,0),r.point(ne,-i),r.point(0,-i),r.point(-ne,-i),r.point(-ne,0),r.point(-ne,i);else if(sn(t[0]-e[0])>we){var o=t[0]<e[0]?ne:-ne;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-ne,-Jr]);function Jf(t){return function(e){var n=new Hl;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Hl(){}function Zf(t,e,n){var h,c,r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),h=n,c=t.stream(Yf),h&&Of.hasOwnProperty(h.type)?Of[h.type](h,c):Wa(h,c);var s=Yf.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Hl.prototype={constructor:Hl,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var sy=Pe(30*vr);function Kf(t,e){return+e?function(n,r){function i(o,s,a,u,l,h,c,p,g,d,m,f,_,I){var y=c-o,v=p-s,x=y*y+v*v;if(x>4*r&&_--){var b=u+d,E=l+m,A=h+f,C=Ys(b*b+E*E+A*A),F=Ho(A/=C),P=sn(sn(A)-1)<we||sn(a-g)<we?(a+g)/2:Yo(E,b),q=n(P,F),R=q[0],O=q[1],M=R-o,k=O-s,T=v*M-y*k;(T*T/x>r||sn((y*M+v*k)/x-.5)>.3||u*d+l*m+h*f<sy)&&(i(o,s,a,u,l,h,R,O,P,b/=C,E/=C,A,_,I),I.point(R,O),i(R,O,P,b,E,A,c,p,g,d,m,f,_,I))}}return function(o){var s,a,u,l,h,c,p,g,d,m,f,_,I={point:y,lineStart:v,lineEnd:b,polygonStart:function(){o.polygonStart(),I.lineStart=E},polygonEnd:function(){o.polygonEnd(),I.lineStart=v}};function y(F,P){F=n(F,P),o.point(F[0],F[1])}function v(){g=NaN,I.point=x,o.lineStart()}function x(F,P){var q=Wo([F,P]),R=n(F,P);i(g,d,p,m,f,_,g=R[0],d=R[1],p=F,m=q[0],f=q[1],_=q[2],16,o),o.point(g,d)}function b(){I.point=y,o.lineEnd()}function E(){v(),I.point=A,I.lineEnd=C}function A(F,P){x(s=F,P),a=g,u=d,l=m,h=f,c=_,I.point=x}function C(){i(g,d,p,m,f,_,a,u,s,l,h,c,16,o),I.lineEnd=b,b()}return I}}(t,e):(n=t,Jf({point:function(r,i){r=n(r,i),this.stream.point(r[0],r[1])}}));var n}var ay=Jf({point:function(t,e){this.stream.point(t*vr,e*vr)}});function uy(t){return function(e){var n,r,i,o,s,a,u,l,h,c,p=150,g=480,d=250,m=0,f=0,_=0,I=0,y=0,v=null,x=Wf,b=null,E=Xf,A=.5,C=Kf(q,A);function F(M){return[(M=s(M[0]*vr,M[1]*vr))[0]*p+r,i-M[1]*p]}function P(M){return(M=s.invert((M[0]-r)/p,(i-M[1])/p))&&[M[0]*Ai,M[1]*Ai]}function q(M,k){return[(M=n(M,k))[0]*p+r,i-M[1]*p]}function R(){var k,T,B;s=Af((k=_,T=I,B=y,o=(k%=Zr)?T||B?Af(Ff(k),kf(T,B)):Ff(k):T||B?kf(T,B):Vl),n);var M=n(m,f);return r=g-M[0]*p,i=d+M[1]*p,O()}function O(){return h=c=null,F}return F.stream=function(M){return h&&c===M?h:h=ay(x(o,C(E(c=M))))},F.clipAngle=function(M){return arguments.length?(x=+M?function oy(t,e){var n=Pe(t),r=n>0,i=sn(n)>we;function o(u,l){return Pe(u)*Pe(l)>n}function s(u,l,h){var c=[1,0,0],p=Za(Wo(u),Wo(l)),g=Ja(p,p),d=p[0],m=g-d*d;if(!m)return!h&&u;var f=n*g/m,_=-n*d/m,I=Za(c,p),y=Ka(c,f);jl(y,Ka(p,_));var v=I,x=Ja(y,v),b=Ja(v,v),E=x*x-b*(Ja(y,y)-1);if(!(E<0)){var A=Ys(E),C=Ka(v,(-x-A)/b);if(jl(C,y),C=zl(C),!h)return C;var F,P=u[0],q=l[0],R=u[1],O=l[1];q<P&&(F=P,P=q,q=F);var M=q-P,k=sn(M-ne)<we;if(!k&&O<R&&(F=R,R=O,O=F),k||M<we?k?R+O>0^C[1]<(sn(C[0]-P)<we?R:O):R<=C[1]&&C[1]<=O:M>ne^(P<=C[0]&&C[0]<=q)){var T=Ka(v,(-x+A)/b);return jl(T,y),[C,zl(T)]}}}function a(u,l){var h=r?t:ne-t,c=0;return u<-h?c|=1:u>h&&(c|=2),l<-h?c|=4:l>h&&(c|=8),c}return Hf(o,function(u){var l,h,c,p,g;return{lineStart:function(){p=c=!1,g=1},point:function(d,m){var f,_=[d,m],I=o(d,m),y=r?I?0:a(d,m):I?a(d+(d<0?ne:-ne),m):0;if(!l&&(p=c=I)&&u.lineStart(),I!==c&&(!(f=s(l,_))||Qa(l,f)||Qa(_,f))&&(_[0]+=we,_[1]+=we,I=o(_[0],_[1])),I!==c)g=0,I?(u.lineStart(),f=s(_,l),u.point(f[0],f[1])):(f=s(l,_),u.point(f[0],f[1]),u.lineEnd()),l=f;else if(i&&l&&r^I){var v;y&h||!(v=s(_,l,!0))||(g=0,r?(u.lineStart(),u.point(v[0][0],v[0][1]),u.point(v[1][0],v[1][1]),u.lineEnd()):(u.point(v[1][0],v[1][1]),u.lineEnd(),u.lineStart(),u.point(v[0][0],v[0][1])))}!I||l&&Qa(l,_)||u.point(_[0],_[1]),l=_,c=I,h=y},lineEnd:function(){c&&u.lineEnd(),l=null},clean:function(){return g|(p&&c)<<1}}},function(u,l,h,c){!function(p,g,d,m,f,_){if(d){var I=Pe(g),y=Me(g),v=m*d;null==f?(f=g+m*Zr,_=g-v/2):(f=Gf(I,f),_=Gf(I,_),(m>0?f<_:f>_)&&(f+=m*Zr));for(var x,b=f;m>0?b>_:b<_;b-=v)x=zl([I,-y*Pe(b),-y*Me(b)]),p.point(x[0],x[1])}}(c,t,e,h,u,l)},r?[0,-t]:[-ne,t-ne])}(v=M*vr,6*vr):(v=null,Wf),O()):v*Ai},F.clipExtent=function(M){return arguments.length?(E=null==M?(b=a=u=l=null,Xf):function ny(t,e,n,r){function i(l,h){return t<=l&&l<=n&&e<=h&&h<=r}function o(l,h,c,p){var g=0,d=0;if(null==l||(g=s(l,c))!==(d=s(h,c))||u(l,h)<0^c>0)do{p.point(0===g||3===g?t:n,g>1?r:e)}while((g=(g+c+4)%4)!==d);else p.point(h[0],h[1])}function s(l,h){return sn(l[0]-t)<we?h>0?0:3:sn(l[0]-n)<we?h>0?2:1:sn(l[1]-e)<we?h>0?1:0:h>0?3:2}function a(l,h){return u(l.x,h.x)}function u(l,h){var c=s(l,1),p=s(h,1);return c!==p?c-p:0===c?h[1]-l[1]:1===c?l[0]-h[0]:2===c?l[1]-h[1]:h[0]-l[0]}return function(l){var h,c,p,g,d,m,f,_,I,y,v,x=l,b=qf(),E={point:A,lineStart:function(){E.point=C,c&&c.push(p=[]),y=!0,I=!1,f=_=NaN},lineEnd:function(){h&&(C(g,d),m&&I&&b.rejoin(),h.push(b.result())),E.point=A,I&&x.lineEnd()},polygonStart:function(){x=b,h=[],c=[],v=!0},polygonEnd:function(){var F=function(){for(var R=0,O=0,M=c.length;O<M;++O)for(var k,T,B=c[O],S=1,J=B.length,j=B[0],ct=j[0],Y=j[1];S<J;++S)k=ct,T=Y,ct=(j=B[S])[0],Y=j[1],T<=r?Y>r&&(ct-k)*(r-T)>(Y-T)*(t-k)&&++R:Y<=r&&(ct-k)*(r-T)<(Y-T)*(t-k)&&--R;return R}(),P=v&&F,q=(h=Vf(h)).length;(P||q)&&(l.polygonStart(),P&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),q&&Bf(h,a,F,o,l),l.polygonEnd()),x=l,h=c=p=null}};function A(F,P){i(F,P)&&x.point(F,P)}function C(F,P){var q=i(F,P);if(c&&p.push([F,P]),y)g=F,d=P,m=q,y=!1,q&&(x.lineStart(),x.point(F,P));else if(q&&I)x.point(F,P);else{var R=[f=Math.max(tu,Math.min(Ws,f)),_=Math.max(tu,Math.min(Ws,_))],O=[F=Math.max(tu,Math.min(Ws,F)),P=Math.max(tu,Math.min(Ws,P))];!function(M,k,T,B,S,J){var j,ct=M[0],Y=M[1],et=0,gt=1,te=k[0]-ct,Ue=k[1]-Y;if(j=T-ct,te||!(j>0)){if(j/=te,te<0){if(j<et)return;j<gt&&(gt=j)}else if(te>0){if(j>gt)return;j>et&&(et=j)}if(j=S-ct,te||!(j<0)){if(j/=te,te<0){if(j>gt)return;j>et&&(et=j)}else if(te>0){if(j<et)return;j<gt&&(gt=j)}if(j=B-Y,Ue||!(j>0)){if(j/=Ue,Ue<0){if(j<et)return;j<gt&&(gt=j)}else if(Ue>0){if(j>gt)return;j>et&&(et=j)}if(j=J-Y,Ue||!(j<0)){if(j/=Ue,Ue<0){if(j>gt)return;j>et&&(et=j)}else if(Ue>0){if(j<et)return;j<gt&&(gt=j)}return et>0&&(M[0]=ct+et*te,M[1]=Y+et*Ue),gt<1&&(k[0]=ct+gt*te,k[1]=Y+gt*Ue),!0}}}}}(R,O,t,e,n,r)?q&&(x.lineStart(),x.point(F,P),v=!1):(I||(x.lineStart(),x.point(R[0],R[1])),x.point(O[0],O[1]),q||x.lineEnd(),v=!1)}f=F,_=P,I=q}return E}}(b=+M[0][0],a=+M[0][1],u=+M[1][0],l=+M[1][1]),O()):null==b?null:[[b,a],[u,l]]},F.scale=function(M){return arguments.length?(p=+M,R()):p},F.translate=function(M){return arguments.length?(g=+M[0],d=+M[1],R()):[g,d]},F.center=function(M){return arguments.length?(m=M[0]%360*vr,f=M[1]%360*vr,R()):[m*Ai,f*Ai]},F.rotate=function(M){return arguments.length?(_=M[0]%360*vr,I=M[1]%360*vr,y=M.length>2?M[2]%360*vr:0,R()):[_*Ai,I*Ai,y*Ai]},F.precision=function(M){return arguments.length?(C=Kf(q,A=M*M),O()):Ys(A)},F.fitExtent=function(M,k){return Zf(F,M,k)},F.fitSize=function(M,k){return Zf(F,[[0,0],M],k)},function(){return n=e.apply(this,arguments),F.invert=n.invert&&P,R()}}(function(){return t})()}var Qf=function(e,n){var t,r=Pe(e),i=Pe(n),o=(t=Lf(t=r*i))&&t/Me(t);return[o*i*Me(e),o*Me(n)]};function ru(t,e,n,r){var i=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var s=[];return Rn(t,function(p){var g=ru(p,e,n,r);g&&s.push(g)}),rt(s)}var g,d,a=(d=[-(g=ha(o).geometry.coordinates)[0],-g[1]],function ly(){return uy(Qf).scale(79.4188).clipAngle(179.999)}().rotate(d).scale(Ln)),u={type:o.type,coordinates:tg(o.coordinates,a)},l=(new Ll).read(u),h=uo(Fi(e,n),"meters"),c=Ge.bufferOp(l,h,r);if(!$f((c=(new uf).write(c)).coordinates))return Le({type:c.type,coordinates:eg(c.coordinates,a)},i)}function $f(t){return Array.isArray(t[0])?$f(t[0]):isNaN(t[0])}function tg(t,e){return"object"!=typeof t[0]?e(t):t.map(function(n){return tg(n,e)})}function eg(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(n){return eg(n,e)})}function Zs(t,e,n){void 0===n&&(n={});var r=se(t),i=se(e),o=ni.intersection(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?dt(o[0],n.properties):On(o,n.properties)}function ng(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(i+s)/2,h=2*e/Qt([i,u],[s,u],n)*(s-i),c=2*e/Qt([l,o],[l,a],n)*(a-o),p=h/2,g=2*p,d=Math.sqrt(3)/2*c,m=s-i,f=a-o,_=3/4*g,I=d,v=Math.floor((m-g)/(g-p/2)),x=(v*_-p/2-m)/2-p/2+_/2,b=Math.floor((f-d)/d),E=(f-b*d)/2,A=b*d-f>d/2;A&&(E-=d/4);for(var C=[],F=[],P=0;P<6;P++){var q=2*Math.PI/6*P;C.push(Math.cos(q)),F.push(Math.sin(q))}for(var R=[],O=0;O<=v;O++)for(var M=0;M<=b;M++){var k=O%2==1;if(!(0===M&&k||0===M&&A)){var T=O*_+i-x,B=M*I+o+E;if(k&&(B-=d/2),!0===n.triangles)hy([T,B],h/2,c/2,JSON.parse(r),C,F).forEach(function(J){n.mask?Zs(n.mask,J)&&R.push(J):R.push(J)});else{var S=cy([T,B],h/2,c/2,JSON.parse(r),C,F);n.mask?Zs(n.mask,S)&&R.push(S):R.push(S)}}}return rt(R)}function cy(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++)s.push([t[0]+e*i[a],t[1]+n*o[a]]);return s.push(s[0].slice()),dt([s],r)}function hy(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(dt([u],r))}return s}function ig(t,e,n){return void 0===n&&(n={}),function(r,i,o,s){void 0===s&&(s={});for(var a=[],u=r[0],l=r[1],h=r[2],c=r[3],p=i/Qt([u,l],[h,l],s)*(h-u),g=o/Qt([u,l],[u,c],s)*(c-l),d=h-u,m=c-l,f=Math.floor(d/p),_=Math.floor(m/g),I=(m-_*g)/2,y=u+(d-f*p)/2,v=0;v<f;v++){for(var x=l+I,b=0;b<_;b++){var E=dt([[[y,x],[y,x+g],[y+p,x+g],[y+p,x],[y,x]]],s.properties);s.mask?sp(s.mask,E)&&a.push(E):a.push(E),x+=g}y+=p}return rt(a)}(t,e,e,n)}function og(t,e,n){void 0===n&&(n={});for(var r=[],i=e/Qt([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/Qt([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,c=null;s%2==0&&u%2==0?(h=dt([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),c=dt([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(h=dt([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties),c=dt([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(h=dt([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties),c=dt([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(h=dt([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),c=dt([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)),n.mask?(Zs(n.mask,h)&&r.push(h),Zs(n.mask,c)&&r.push(c)):(r.push(h),r.push(c)),l+=o,u++}s++,a+=i}return rt(r)}Qf.invert=function(e,n){var r=Ys(e*e+n*n),i=r,o=Me(i),s=Pe(i);return[Yo(e*o,r*s),Ho(r&&n*o/r)]},N.along=function(t,e,n){void 0===n&&(n={});for(var r=se(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var a=$r(r[o],r[o-1])-180;return Dr(r[o],s,a,n)}return ft(r[o])}i+=Qt(r[o],r[o+1],n)}return ft(r[r.length-1])},N.angle=function(t,e,n,r){if(void 0===r&&(r={}),!Kt(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=ki(!0!==r.mercator?$r(i,o):Ui(i,o)),u=ki(!0!==r.mercator?$r(s,o):Ui(s,o)),l=Math.abs(a-u);return!0===r.explementary?360-l:l},N.applyFilter=Ca,N.area=Bu,N.areaFactors=ta,N.bbox=Ie,N.bboxClip=function(t,e){var n=se(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach(function(a){!function(u,l,h){var c,p,g,d,m,f=u.length,_=yo(u[0],l),I=[];for(h||(h=[]),c=1;c<f;c++){for(d=u[c-1],p=g=yo(m=u[c],l);;){if(!(_|p)){I.push(d),p!==g?(I.push(m),c<f-1&&(h.push(I),I=[])):c===f-1&&I.push(m);break}if(_&p)break;_?_=yo(d=Wu(d,m,_,l),l):p=yo(m=Wu(d,m,p,l),l)}_=g}I.length&&h.push(I)}(a,e,s)}),1===s.length?Zt(s[0],i):di(s,i);case"Polygon":return dt(Oh(o,e),i);case"MultiPolygon":return On(o.map(function(a){return Oh(a,e)}),i);default:throw new Error("geometry "+r+" not supported")}},N.bboxPolygon=Ou,N.bearing=$r,N.bearingToAngle=ki,N.bearingToAzimuth=ki,N.bezier=jc,N.bezierSpline=jc,N.booleanClockwise=va,N.booleanContains=function(t,e){var n=se(t),r=se(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":if("Point"===o)return sl(s,a);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(u,l){var h,c=!1;for(h=0;h<u.coordinates.length;h++)if(sl(u.coordinates[h],l.coordinates)){c=!0;break}return c}(n,r);case"MultiPoint":return function(u,l){for(var h=0,c=l.coordinates;h<c.length;h++){for(var p=c[h],g=!1,d=0,m=u.coordinates;d<m.length;d++)if(sl(p,m[d])){g=!0;break}if(!g)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Tn(r,n,{ignoreEndVertices:!0});case"LineString":return function(u,l){for(var h=!1,c=0,p=l.coordinates;c<p.length;c++){var g=p[c];if(Tn({type:"Point",coordinates:g},u,{ignoreEndVertices:!0})&&(h=!0),!Tn({type:"Point",coordinates:g},u,{ignoreEndVertices:!1}))return!1}return h}(n,r);case"MultiPoint":return function(u,l){for(var h=!1,c=0,p=l.coordinates;c<p.length;c++){var g=p[c];if(Tn(g,u,{ignoreEndVertices:!0})&&(h=!0),!Tn(g,u))return!1}return!!h}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ae(r,n,{ignoreBoundary:!0});case"LineString":return function(u,l){var h=!1,c=0;if(!Qh(Ie(u),Ie(l)))return!1;for(;c<l.coordinates.length-1;c++)if(ae({type:"Point",coordinates:Hd(l.coordinates[c],l.coordinates[c+1])},u,{ignoreBoundary:!0})){h=!0;break}return h}(n,r);case"Polygon":return function(u,l){if("Feature"===u.type&&null===u.geometry||"Feature"===l.type&&null===l.geometry)return!1;if(!Qh(Ie(u),Ie(l)))return!1;for(var g=0,d=se(l).coordinates;g<d.length;g++)for(var m=0,f=d[g];m<f.length;m++)if(!ae(f[m],u))return!1;return!0}(n,r);case"MultiPoint":return function(u,l){for(var h=0,c=l.coordinates;h<c.length;h++)if(!ae(c[h],u,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},N.booleanCrosses=function(t,e){var n=se(t),r=se(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return $h(n,r);case"Polygon":return ep(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return $h(r,n);case"LineString":return function(s,a){if(ti(s,a).features.length>0)for(var u=0;u<s.coordinates.length-1;u++)for(var l=0;l<a.coordinates.length-1;l++){var h=!0;if(0!==l&&l!==a.coordinates.length-2||(h=!1),np(s.coordinates[u],s.coordinates[u+1],a.coordinates[l],h))return!0}return!1}(n,r);case"Polygon":return tp(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return ep(r,n);case"LineString":return tp(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},N.booleanDisjoint=Jh,N.booleanEqual=function(t,e){return se(t).type===se(e).type&&new op({precision:6}).compare(Bi(t),Bi(e))},N.booleanIntersects=sp,N.booleanOverlap=function(t,e){var n=se(t),r=se(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new op({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var l=n.coordinates[a],h=r.coordinates[u];if(l[0]===h[0]&&l[1]===h[1])return!0}return!1;case"LineString":case"MultiLineString":Kr(t,function(c){Kr(e,function(p){Ah(c,p).features.length&&s++})});break;case"Polygon":case"MultiPolygon":Kr(t,function(c){Kr(e,function(p){ti(c,p).features.length&&s++})})}return s>0},N.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==cp(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==cp(e,"line2"))throw new Error("line2 must be a LineString");for(var n=ji(Bi(t)).features,r=ji(Bi(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!o0(o,r[i].geometry.coordinates))return!1}return!0},N.booleanPointInPolygon=ae,N.booleanPointOnLine=Tn,N.booleanWithin=ph,N.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return Rn(t,function(s){var a=ru(s,e,r,i);a&&o.push(a)}),rt(o);case"FeatureCollection":return Wt(t,function(s){var a=ru(s,e,r,i);a&&Wt(a,function(u){u&&o.push(u)})}),rt(o)}return ru(t,e,r,i)},N.center=ha,N.centerMean=cl,N.centerMedian=function(t,e){if(void 0===e&&(e={}),!Kt(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!De(n))throw new Error("counter must be a number");var r=e.weight,i=cl(t,{weight:e.weight}),o=rt([]);return Wt(t,function(a){var u;o.features.push(mi(a,{properties:{weight:null===(u=a.properties)||void 0===u?void 0:u[r]}}))}),bp(i.geometry.coordinates,[0,0],o,{tolerance:e.tolerance,medianCandidates:[]},n)},N.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),En(e)){case"Point":return ft(re(e),n.properties);case"Polygon":var r=[];_e(e,function(v){r.push(v)});var i,o,s,a,u,l,h,c,p=mi(e,{properties:n.properties}),g=p.geometry.coordinates,d=0,m=0,f=0,_=r.map(function(v){return[v[0]-g[0],v[1]-g[1]]});for(i=0;i<r.length-1;i++)a=(o=_[i])[0],u=(s=_[i+1])[0],f+=c=a*(h=s[1])-u*(l=o[1]),d+=(a+u)*c,m+=(l+h)*c;if(0===f)return p;var I=1/(.5*f*6);return ft([g[0]+I*d,g[1]+I*m],n.properties);default:var y=Nc(e);return y?t(y,{properties:n.properties}):mi(e,{properties:n.properties})}},N.centroid=mi,N.circle=Ru,N.cleanCoords=Bi,N.clone=Je,N.clusterEach=hl,N.clusterReduce=kp,N.clusters=N0,N.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Je(t)),n.minPoints=n.minPoints||3;var r=new Qd.DBSCAN,i=r.run(lo(t),Gi(e,n.units),n.minPoints,Qt),o=-1;return i.forEach(function(s){o++,s.forEach(function(a){var u=t.features[a];u.properties||(u.properties={}),u.properties.cluster=o,u.properties.dbscan="core"})}),r.noise.forEach(function(s){var a=t.features[s];a.properties||(a.properties={}),a.properties.dbscan=a.properties.cluster?"edge":"noise"}),t},N.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Je(t));var r=lo(t),i=r.slice(0,e.numberOfClusters),o=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,l=r||1e4,h=t.length,c=t[0].length,p=c>0,g=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?$d:t0,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,l=0,h=[],c=0;c<i;c++){for(var p=1/0,g=0;g<u;g++){var d=n(t[c],r[g]);d<=p&&(p=d)}a[c]=p}for(var m=0;m<i;m++)l+=a[m];for(var f=0;f<i;f++)h[f]={i:f,v:t[f],pr:a[f]/l,cs:0};h.sort(function(v,x){return v.pr-x.pr}),h[0].cs=h[0].pr;for(var _=1;_<i;_++)h[_].cs=h[_-1].cs+h[_].pr;for(var I=Math.random(),y=0;y<i-1&&h[y++].cs<I;);r.push(h[y-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var m=Math.floor(Math.random()*h);d[m]||(d[m]=!0,i.push(t[m]))}do{lp(e,0,g);for(var f=0;f<h;f++){for(var _=1/0,I=0,y=0;y<e;y++)(a=p?e0(t[f],i[y]):Math.abs(t[f]-i[y]))<=_&&(_=a,I=y);s[f]=I,g[I]++}for(var v=[],x=(o=[],0);x<e;x++)v[x]=p?lp(c,0,v[x]):0,o[x]=i[x];if(p){for(var b=0;b<e;b++)i[b]=[];for(var E=0;E<h;E++)for(var A=v[s[E]],C=t[E],F=0;F<c;F++)A[F]+=C[F];u=!0;for(var P=0;P<e;P++){for(var q=i[P],R=v[P],O=o[P],M=g[P],k=0;k<c;k++)q[k]=R[k]/M||0;if(u)for(var T=0;T<c;T++)if(O[T]!=q[T]){u=!1;break}}}else{for(var B=0;B<h;B++)v[s[B]]+=t[B];for(var S=0;S<e;S++)i[S]=v[S]/g[S]||0;u=!0;for(var J=0;J<e;J++)if(o[J]!=i[J]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}}(r,e.numberOfClusters,i),s={};return o.centroids.forEach(function(a,u){s[u]=a}),Wt(t,function(a,u){var l=o.idxs[u];a.properties.cluster=l,a.properties.centroid=s[l]}),t},N.collect=function(t,e,n,r){var i=gn(6),o=e.features.map(function(s){var a;return{minX:s.geometry.coordinates[0],minY:s.geometry.coordinates[1],maxX:s.geometry.coordinates[0],maxY:s.geometry.coordinates[1],property:null===(a=s.properties)||void 0===a?void 0:a[n]}});return i.load(o),t.features.forEach(function(s){s.properties||(s.properties={});var a=Ie(s),u=i.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}),l=[];u.forEach(function(h){ae([h.minX,h.minY],s)&&l.push(h.property)}),s.properties[r]=l}),t},N.collectionOf=Qr,N.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return Wt(t,function(n){var r,i,o,s;switch(null===(s=n.geometry)||void 0===s?void 0:s.type){case"Point":e.MultiPoint.coordinates.push(n.geometry.coordinates),e.MultiPoint.properties.push(n.properties);break;case"MultiPoint":(r=e.MultiPoint.coordinates).push.apply(r,n.geometry.coordinates),e.MultiPoint.properties.push(n.properties);break;case"LineString":e.MultiLineString.coordinates.push(n.geometry.coordinates),e.MultiLineString.properties.push(n.properties);break;case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,n.geometry.coordinates),e.MultiLineString.properties.push(n.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(n.geometry.coordinates),e.MultiPolygon.properties.push(n.properties);break;case"MultiPolygon":(o=e.MultiPolygon.coordinates).push.apply(o,n.geometry.coordinates),e.MultiPolygon.properties.push(n.properties)}}),rt(Object.keys(e).filter(function(n){return e[n].coordinates.length}).sort().map(function(n){return Le({type:n,coordinates:e[n].coordinates},{collectedProperties:e[n].properties})}))},N.concave=function(t,e){void 0===e&&(e={});var s,a,n=e.maxEdge||1/0,r=Mc((s=[],a={},Wt(t,function(u){if(u.geometry){var l=u.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(a,l)||(s.push(u),a[l]=!0)}}),rt(s)));if(r.features=r.features.filter(function(o){var s=o.geometry.coordinates[0][0],a=o.geometry.coordinates[0][1],u=o.geometry.coordinates[0][2],l=Qt(s,a,e),h=Qt(a,u,e),c=Qt(s,u,e);return l<=n&&h<=n&&c<=n}),r.features.length<1)return null;var i=function Yg(t,e){if(void 0===e&&(e={}),!Kt(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==En(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Je(t));var r=function(o){var s={};Ve(o,function(u){s[u.geometry.type]=!0});var a=Object.keys(s);return 1===a.length?a[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return function Ag(t,e){if(void 0===e&&(e={}),!Kt(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==En(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Je(t));var r=[],i=fu(t,function(o,s){return function(u,l){var h,c=u.geometry.coordinates,p=l.geometry.coordinates,g=ua(c[0]),d=ua(c[c.length-1]),m=ua(p[0]),f=ua(p[p.length-1]);if(g===f)h=p.concat(c.slice(1));else if(m===d)h=c.concat(p.slice(1));else if(g===m)h=c.slice(1).reverse().concat(p);else{if(d!==f)return null;h=c.concat(p.reverse().slice(1))}return Zt(h)}(o,s)||(r.push(o),s)});return i&&r.push(i),r.length?1===r.length?r[0]:di(r.map(function(o){return o.coordinates})):null}(i,e);case"Polygon":return Xg(i,e);default:throw new Error(r+" is not supported")}}(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),Le(i)},N.containsNumber=gu,N.convertArea=tc,N.convertDistance=Gi,N.convertLength=Gi,N.convex=Nc,N.coordAll=lo,N.coordEach=_e,N.coordReduce=au,N.createBins=pl,N.degrees2radians=Ae,N.degreesToRadians=Ae,N.destination=Dr,N.difference=function(t,e){var n=se(t),r=se(e),i=t.properties||{},o=ni.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?dt(o[0],i):On(o,i)},N.dissolve=function(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;Qr(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return Uu(On(ni.union.apply(null,t.features.map(function(u){return u.geometry.coordinates}))));var i={};Wt(t,function(u){Object.prototype.hasOwnProperty.call(i,u.properties[n])||(i[u.properties[n]]=[]),i[u.properties[n]].push(u)});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=On(ni.union.apply(null,i[o[s]].map(function(u){return u.geometry.coordinates})));a.properties[n]=o[s],r.push(a)}return Uu(rt(r))},N.distance=Qt,N.distanceToDegrees=ea,N.distanceToRadians=Fi,N.distanceWeight=Ip,N.earthRadius=Ln,N.ellipse=xp,N.envelope=Uc,N.explode=pa,N.factors=$s,N.feature=Le,N.featureCollection=rt,N.featureEach=Wt,N.featureOf=$o,N.featureReduce=lu,N.filterProperties=Gp,N.findPoint=sc,N.findSegment=oc,N.flatten=Uu,N.flattenEach=Ve,N.flattenReduce=ic,N.flip=function(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Je(t)),_e(t,function(r){var i=r[0];r[0]=r[1],r[1]=i}),t},N.geojsonType=ac,N.geomEach=Rn,N.geomReduce=cu,N.geometry=Jl,N.geometryCollection=su,N.getCluster=Fp,N.getCoord=re,N.getCoords=ot,N.getGeom=se,N.getType=En,N.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=re(t),e=re(e),i=i||100,o=o||10,new Xu({x:t[0],y:t[1]},{x:e[0],y:e[1]},r=r||{}).Arc(i,{offset:o}).json()},N.helpers=ug,N.hexGrid=ng,N.inside=ae,N.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(Qr(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=Ie(t);switch(r){case"point":case"points":s=dh(a,e,n);break;case"square":case"squares":s=ig(a,e,n);break;case"hex":case"hexes":s=ng(a,e,n);break;case"triangle":case"triangles":s=og(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return Wt(s,function(l){var h=0,c=0;Wt(t,function(g){var d,m=Qt("point"===r?l:mi(l),g,n);if(void 0!==i&&(d=g.properties[i]),void 0===d&&(d=g.geometry.coordinates[2]),void 0===d)throw new Error("zValue is missing");0===m&&(h=d);var f=1/Math.pow(m,o);c+=f,h+=f*d});var p=Je(l);p.properties[i]=h/c,u.push(p)}),rt(u)},N.intersect=Zs,N.invariant=cg,N.isNumber=De,N.isObject=Kt,N.isobands=function(t,e,n){if(!Kt(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Qr(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!Kt(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var u,l,h,c,d,m,I,y,v,s=function Ad(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Qr(t,"Point","input must contain Points");for(var o=function(p,g){var d={};return Wt(p,function(m){var f=ot(m)[1];d[f]||(d[f]=[]),d[f].push(m)}),Object.keys(d).map(function(m){return d[m].sort(function(f,_){return ot(f)[0]-ot(_)[0]})}).sort(function(m,f){return g?ot(m[0])[1]-ot(f[0])[1]:ot(f[0])[1]-ot(m[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];l.push(c.properties[n]?c.properties[n]:0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}(t,{zProperty:r,flip:!0}),a=function(u,l,h){for(var c=[],p=1;p<l.length;p++){var g=+l[p-1],d=+l[p],m=Bd(qd(Dd(u,g,d-g))),f={};f.groupedRings=m,f[h]=g+"-"+d,c.push(f)}return c}(s,e,r);return rt((u=a,l=s,h=t,c=Ie(h),d=c[0],m=c[1],I=(c[2]-c[0])/(l[0].length-1),y=(c[3]-c[1])/(l.length-1),v=function(x){x[0]=x[0]*I+d,x[1]=x[1]*y+m},u.forEach(function(x){x.groupedRings.forEach(function(b){b.forEach(function(E){E.forEach(v)})})}),a=u).map(function(u,l){if(o[l]&&!Kt(o[l]))throw new Error("Each mappedProperty is required to be an Object");var h=du({},i,o[l]);return h[r]=u[r],On(u.groupedRings,h)}))},N.isolines=function(t,e,n){if(!Kt(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(Qr(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!Kt(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a,u,h,g,d,_,I,y,s=function dg(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;Qr(t,"Point","input must contain Points");for(var o=function(p,g){var d={};return Wt(p,function(m){var f=ot(m)[1];d[f]||(d[f]=[]),d[f].push(m)}),Object.keys(d).map(function(m){return d[m].sort(function(f,_){return ot(f)[0]-ot(_)[0]})}).sort(function(m,f){return g?ot(m[0])[1]-ot(f[0])[1]:ot(f[0])[1]-ot(m[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];l.push(c.properties[n]?c.properties[n]:0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}(t,{zProperty:r,flip:!0});return rt((a=function(a,u,l,h,c){for(var p=[],g=1;g<u.length;g++){var d=+u[g],m=du({},h,c[g]);m[l]=d;var f=di(gg(a,d),m);p.push(f)}return p}(s,e,r,i,o),u=s,h=Ie(t),g=h[0],d=h[1],_=(h[2]-h[0])/(u[0].length-1),I=(h[3]-h[1])/(u.length-1),y=function(v){v[0]=v[0]*_+g,v[1]=v[1]*I+d},a.forEach(function(v){_e(v,y)}),a))},N.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(i){e.forEach(function(o){for(var s=0;s<i.length-1;s++)for(var a=s;a<o.length-1;a++)if(i!==o||1!==Math.abs(s-a)&&(0!==s||a!==i.length-2||i[s][0]!==i[i.length-1][0]||i[s][1]!==i[i.length-1][1])){var u=Cd(i[s][0],i[s][1],i[s+1][0],i[s+1][1],o[a][0],o[a][1],o[a+1][0],o[a+1][1]);u&&r.features.push(ft([u[0],u[1]]))}})}),r},N.length=ju,N.lengthToDegrees=ea,N.lengthToRadians=Fi,N.lineArc=Ih,N.lineChunk=function(t,e,n){if(!Kt(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return Ve(t,function(s){i&&(s.geometry.coordinates=s.geometry.coordinates.reverse()),function(a,u,l,h){var c=ju(a,{units:l});if(c<=u)return h(a);var p=c/u;Number.isInteger(p)||(p=Math.floor(p)+1);for(var g=0;g<p;g++)h(hh(a,u*g,u*(g+1),{units:l}))}(s,e,r,function(a){o.push(a)})}),rt(o)},N.lineDistance=ju,N.lineEach=pu,N.lineIntersect=ti,N.lineOffset=function(t,e,n){if(!Kt(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=En(t),o=t.properties;switch(i){case"LineString":return Xh(t,e,r);case"MultiLineString":var s=[];return Ve(t,function(a){s.push(Xh(a,e,r).geometry.coordinates)}),di(s,o);default:throw new Error("geometry "+i+" is not supported")}},N.lineOverlap=Ah,N.lineReduce=fu,N.lineSegment=ji,N.lineSlice=function(t,e,n){var r=ot(n);if("LineString"!==En(n))throw new Error("line must be a LineString");for(var i,o=ei(n,t),s=ei(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),Zt(a,n.properties)},N.lineSliceAlong=hh,N.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=En(t),r=En(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=yh(e,{precision:7});switch(r){case"Point":return Yu(t,i);case"MultiPoint":return bh(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return bh(t,ti(t,i))}},N.lineString=Zt,N.lineStringToPolygon=Ph,N.lineStrings=Ql,N.lineToPolygon=Ph,N.mask=function(t,e){var n,r=function py(t){return dt(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e);return function rg(t){return On(t)}("FeatureCollection"===t.type?2===(n=t).features.length?ni.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):ni.union.apply(ni,n.features.map(function(o){return o.geometry.coordinates})):ni.union(t.geometry.coordinates)).geometry.coordinates.forEach(function(o){r.geometry.coordinates.push(o[0])}),r},N.meta=lg,N.midpoint=function(t,e){return Dr(t,Qt(t,e)/2,$r(t,e))},N.moranIndex=function(t,e){var n=e.inputField,s=Ip(t,{alpha:e.alpha||-1,binary:e.binary||!1,p:e.p||2,standardization:e.standardization||!0,threshold:e.threshold||1e5}),a=[];Wt(t,function(b){a.push((b.properties||{})[n])});for(var u=Sp(a),l=function(b){for(var E=Sp(b),A=0,C=0,F=b;C<F.length;C++)A+=Math.pow(F[C]-E,2);return A/b.length}(a),h=0,c=0,p=0,g=0,d=s.length,m=0;m<d;m++){for(var f=0,_=0;_<d;_++)h+=s[m][_]*(a[m]-u)*(a[_]-u),c+=s[m][_],p+=Math.pow(s[m][_]+s[_][m],2),f+=s[m][_]+s[_][m];g+=Math.pow(f,2)}var I=h/c/l,y=-1/(d-1),v=(d*d*(p*=.5)-d*g+c*c*3)/((d-1)*(d+1)*(c*c))-y*y,x=Math.sqrt(v);return{expectedMoranIndex:y,moranIndex:I,stdNorm:x,zNorm:(I-y)/x}},N.multiLineString=di,N.multiPoint=Qo,N.multiPolygon=On,N.nearest=ga,N.nearestPoint=ga,N.nearestPointOnLine=ei,N.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(u){var l=[];switch(u.geometry?u.geometry.type:u.type){case"GeometryCollection":return Rn(u,function(h){"Point"===h.type&&l.push({type:"Feature",properties:{},geometry:h})}),{type:"FeatureCollection",features:l};case"FeatureCollection":return u.features=u.features.filter(function(h){return"Point"===h.geometry.type}),u;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==En(e))throw new Error("line must be a LineString");var s=1/0,a=null;return Wt(o,function(u){var l=ih(u,e,{units:r});l<s&&(s=l,a=u)}),a&&(a.properties=du({dist:s},a.properties,i)),a},N.planepoint=function(t,e){var n=re(t),r=se(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],h=r[0][0],c=r[0][1],p=void 0!==o?o:r[0][2],g=r[1][0],d=r[1][1],m=void 0!==s?s:r[1][2],f=r[2][0],_=r[2][1],I=void 0!==a?a:r[2][2];return(I*(u-h)*(l-d)+p*(u-g)*(l-_)+m*(u-f)*(l-c)-m*(u-h)*(l-_)-I*(u-g)*(l-c)-p*(u-f)*(l-d))/((u-h)*(l-d)+(u-g)*(l-_)+(u-f)*(l-c)-(u-h)*(l-_)-(u-g)*(l-c)-(u-f)*(l-d))},N.point=ft,N.pointGrid=dh,N.pointOnFeature=sh,N.pointOnLine=ei,N.pointOnSurface=sh,N.pointToLineDistance=ih,N.points=Zl,N.pointsWithinPolygon=bu,N.polygon=dt,N.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return Rn(t,function(i,o,s){var a,u,l;switch(i.type){case"Polygon":a=[[]];for(var h=0;h<r;h++)l=[[]],u=i,h>0&&(u=dt(a).geometry),E0(u,l),a=l.slice(0);n.push(dt(a,s));break;case"MultiPolygon":a=[[[]]];for(var c=0;c<r;c++)l=[[[]]],u=i,c>0&&(u=On(a).geometry),b0(u,l),a=l.slice(0);n.push(On(a,s));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),rt(n)},N.polygonTangents=function(t,e){var n,r,i,o,s=ot(t),a=ot(e),u=Ie(e),l=0,h=null;switch(s[0]>u[0]&&s[0]<u[2]&&s[1]>u[1]&&s[1]<u[3]&&(l=(h=ga(t,pa(e))).properties.featureIndex),En(e)){case"Polygon":n=a[0][l],r=a[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(r=a[0][l]),o=ds(a[0][0],a[0][a[0].length-1],s);var c=Gh(a[0],s,o,i,n,r);n=c[0],r=c[1];break;case"MultiPolygon":for(var p=0,g=0,d=0,m=0;m<a[0].length;m++){p=m;for(var f=!1,_=0;_<a[0][m].length;_++){if(g=_,d===l){f=!0;break}d++}if(f)break}n=a[0][p][g],r=a[0][p][g],o=ds(a[0][0][0],a[0][0][a[0][0].length-1],s),a.forEach(function(I){var y=Gh(I[0],s,o,i,n,r);n=y[0],r=y[1]})}return rt([ft(n),ft(r)])},N.polygonToLine=gs,N.polygonToLineString=gs,N.polygonize=function(t){var e=Xd.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(i){return i.isValid()}).forEach(function(i){i.isHole()?n.push(i):r.push(i)}),n.forEach(function(i){Wh.findEdgeRingContaining(i,r)&&r.push(i)}),rt(r.map(function(i){return i.toPolygon()}))},N.polygons=Kl,N.projection=I0,N.propEach=uu,N.propReduce=rc,N.propertiesContainsFilter=fl,N.radians2degrees=yi,N.radiansToDegrees=yi,N.radiansToDistance=uo,N.radiansToLength=uo,N.random=C0,N.randomLineString=Tp,N.randomPoint=Op,N.randomPolygon=Rp,N.randomPosition=Es,N.rewind=function(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Je(t));var i=[];switch(t.type){case"GeometryCollection":return Rn(t,function(o){_a(o,n)}),t;case"FeatureCollection":return Wt(t,function(o){Wt(_a(o,n),function(s){i.push(s)})}),rt(i)}return _a(t,n)},N.rhumbBearing=Ui,N.rhumbDestination=vo,N.rhumbDistance=ya,N.round=$l,N.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return rt(function(n,r){for(var i,o,s=n.slice(0),a=n.length,u=a-r;a-- >u;)i=s[o=Math.floor((a+1)*Math.random())],s[o]=s[a],s[a]=i;return s.slice(u)}(t.features,e))},N.sector=function(t,e,n,r,i){if(!Kt(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(Fh(n)===Fh(r))return Ru(t,e,i);var s=ot(t),a=Ih(t,e,n,r,i),u=[[s]];return _e(a,function(l){u[0].push(l)}),u[0].push(s),dt(u,o)},N.segmentEach=Kr,N.segmentReduce=hu,N.shortestPath=function(t,e,n){if(!Kt(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||rt([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!De(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=re(t),a=re(e);switch(t=ft(s),e=ft(a),En(o)){case"FeatureCollection":if(0===o.features.length)return Zt([s,a]);break;case"Polygon":o=rt([Le(se(o))]);break;default:throw new Error("invalid obstacles")}var u=o;u.features.push(t),u.features.push(e);var l=Ie(Uh(Ou(Ie(u)),1.15));r||(r=Qt([l[0],l[1]],[l[2],l[1]],n)/100),u.features.pop(),u.features.pop();for(var h=l[0],c=l[1],p=l[2],g=l[3],d=r/Qt([h,c],[p,c],n)*(p-h),m=r/Qt([h,c],[h,g],n)*(g-c),f=p-h,_=g-c,I=Math.floor(f/d),y=Math.floor(_/m),v=(f-I*d)/2,x=[],b=[],E=[],A=[],C=1/0,F=1/0,P=g-(_-y*m)/2,q=0;P>=c;){for(var R=[],O=[],M=h+v,k=0;M<=p;){var T=ft([M,P]),B=s0(T,o);R.push(B?0:1),O.push(M+"|"+P);var S=Qt(T,t);!B&&S<C&&(C=S,E={x:k,y:q});var J=Qt(T,e);!B&&J<F&&(F=J,A={x:k,y:q}),M+=d,k++}b.push(R),x.push(O),P-=m,q++}var j=new _o(b,{diagonal:!0}),et=Ea.search(j,j.grid[E.y][E.x],j.grid[A.y][A.x]),gt=[s];return et.forEach(function(te){var Ue=x[te.x][te.y].split("|");gt.push([+Ue[0],+Ue[1]])}),gt.push(a),Bi(Zt(gt))},N.simplify=function(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Je(t)),Rn(t,function(o){!function(s,a,u){var l=s.type;if("Point"===l||"MultiPoint"===l)return s;Bi(s,!0);var h=s.coordinates;switch(l){case"LineString":s.coordinates=Bc(h,a,u);break;case"MultiLineString":s.coordinates=h.map(function(c){return Bc(c,a,u)});break;case"Polygon":s.coordinates=zc(h,a,u);break;case"MultiPolygon":s.coordinates=h.map(function(c){return zc(c,a,u)})}}(o,n,r)}),t},N.square=Vc,N.squareGrid=ig,N.standardDeviationalEllipse=function(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!De(n))throw new Error("steps must be a number");if(!Kt(i))throw new Error("properties must be a number");var o=lo(t).length,s=cl(t,{weight:r}),a=0,u=0,l=0;Wt(t,function(E){var A=E.properties[r]||1,C=wp(ot(E),ot(s));a+=Math.pow(C.x,2)*A,u+=Math.pow(C.y,2)*A,l+=C.x*C.y*A});var h=a-u,c=Math.sqrt(Math.pow(h,2)+4*Math.pow(l,2)),g=Math.atan((h+c)/(2*l)),d=180*g/Math.PI,m=0,f=0,_=0;Wt(t,function(E){var A=E.properties[r]||1,C=wp(ot(E),ot(s));m+=Math.pow(C.x*Math.cos(g)-C.y*Math.sin(g),2)*A,f+=Math.pow(C.x*Math.sin(g)+C.y*Math.cos(g),2)*A,_+=A});var I=Math.sqrt(2*m/_),y=Math.sqrt(2*f/_),v=xp(s,I,y,{units:"degrees",angle:d,steps:n,properties:i}),x=bu(t,rt([v])),b={meanCenterCoordinates:ot(s),semiMajorAxis:I,semiMinorAxis:y,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*lo(x).length/o};return v.properties.standardDeviationalEllipse=b,v},N.tag=function(t,e,n,r){return t=Je(t),e=Je(e),Wt(t,function(i){i.properties||(i.properties={}),Wt(e,function(o){void 0===i.properties[r]&&ae(i,o)&&(i.properties[r]=o.properties[n])})}),t},N.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Zc(t.geometry.coordinates):t.geometry.coordinates.forEach(function(n){e.features=e.features.concat(Zc(n))}),e},N.tin=Mc,N.toMercator=Cp,N.toWgs84=Np,N.transformRotate=jh,N.transformScale=Uh,N.transformTranslate=function(t,e,n,r){if(!Kt(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Je(t)),_e(t,function(a){var u=ot(vo(a,e,n,{units:i}));a[0]=u[0],a[1]=u[1],o&&3===a.length&&(a[2]+=o)}),t},N.triangleGrid=og,N.truncate=yh,N.union=function(t,e,n){void 0===n&&(n={});var r=se(t),i=se(e),o=ni.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?dt(o[0],n.properties):On(o,n.properties)},N.unitsFactors=Wl,N.unkinkPolygon=function(t){var e=[];return Ve(t,function(n){"Polygon"===n.geometry.type&&Wt(function Ld(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];ps(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(Y){for(var et={},gt=1,te=0,Ue=Y.length;te<Ue;++te){if(Object.prototype.hasOwnProperty.call(et,Y[te])){gt=0;break}et[Y[te]]=1}return gt}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=function Md(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(m(a,u));var l=gn();l.load(s)}for(var h=0;h<r.length;h++)for(var c=0;c<r[h].length-1;c++)if(n)l.search(m(h,c)).forEach(function(f){d(h,c,f.ring,f.edge)});else for(var p=0;p<r.length;p++)for(var g=0;g<r[p].length-1;g++)d(h,c,p,g);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(f,_,I,y){var v,x,b=r[f][_],E=r[f][_+1],A=r[I][y],C=r[I][y+1],F=function(R,O,M,k){if(hs(R,M)||hs(R,k)||hs(O,M)||hs(k,M))return null;var T=R[0],B=R[1],S=O[0],J=O[1],j=M[0],ct=M[1],Y=k[0],et=k[1],gt=(T-S)*(ct-et)-(B-J)*(j-Y);return 0===gt?null:[((T*J-B*S)*(j-Y)-(T-S)*(j*et-ct*Y))/gt,((T*J-B*S)*(ct-et)-(B-J)*(j*et-ct*Y))/gt]}(b,E,A,C);if(null!==F&&(x=C[0]!==A[0]?(F[0]-A[0])/(C[0]-A[0]):(F[1]-A[1])/(C[1]-A[1]),!((v=E[0]!==b[0]?(F[0]-b[0])/(E[0]-b[0]):(F[1]-b[1])/(E[1]-b[1]))>=1||v<=0||x>=1||x<=0))){var q=!o[F];q&&(o[F]=!0),i.push(e?e(F,f,_,b,E,v,I,y,A,C,x,q):F)}}function m(f,_){var I,y,v,x,b=r[f][_],E=r[f][_+1];return b[0]<E[0]?(I=b[0],y=E[0]):(I=E[0],y=b[0]),b[1]<E[1]?(v=b[1],x=E[1]):(v=E[1],x=b[1]),{minX:I,minY:v,maxX:y,maxY:x,ring:f,edge:_}}}(t,function(Y,et,gt,te,Ue,iu,Di,Ks,Qs,Zo,ou,Ko){return[Y,et,gt,te,Ue,iu,Di,Ks,Qs,Zo,ou,Ko]}),a=s.length;if(0==a){var u=[];for(r=0;r<e;r++)u.push(dt([t.geometry.coordinates[r]],{parent:-1,winding:Od(t.geometry.coordinates[r])}));var l=rt(u);return J(),j(),l}var h=[],c=[];for(r=0;r<e;r++){h.push([]);for(var p=0;p<t.geometry.coordinates[r].length-1;p++)h[r].push([new mh(t.geometry.coordinates[r][go(p+1,t.geometry.coordinates[r].length-1)],1,[r,p],[r,go(p+1,t.geometry.coordinates[r].length-1)],void 0)]),c.push(new vh(t.geometry.coordinates[r][p],[r,go(p-1,t.geometry.coordinates[r].length-1)],[r,p],void 0,void 0,!1,!0))}for(r=0;r<a;r++)h[s[r][1]][s[r][2]].push(new mh(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&c.push(new vh(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var g=c.length;for(r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)h[r][p].sort(function(Y,et){return Y.param<et.param?-1:1});var d=[];for(r=0;r<g;r++)d.push({minX:c[r].coord[0],minY:c[r].coord[1],maxX:c[r].coord[0],maxY:c[r].coord[1],index:r});var m=gn();for(m.load(d),r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)for(var f=0;f<h[r][p].length;f++){I=f==h[r][p].length-1?h[r][go(p+1,t.geometry.coordinates[r].length-1)][0].coord:h[r][p][f+1].coord;var _=m.search({minX:I[0],minY:I[1],maxX:I[0],maxY:I[1]})[0];h[r][p][f].nxtIsectAlongEdgeIn=_.index}for(r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)for(f=0;f<h[r][p].length;f++){var I=h[r][p][f].coord,y=(_=m.search({minX:I[0],minY:I[1],maxX:I[0],maxY:I[1]})[0]).index;y<o?c[y].nxtIsectAlongRingAndEdge2=h[r][p][f].nxtIsectAlongEdgeIn:ps(c[y].ringAndEdge1,h[r][p][f].ringAndEdgeIn)?c[y].nxtIsectAlongRingAndEdge1=h[r][p][f].nxtIsectAlongEdgeIn:c[y].nxtIsectAlongRingAndEdge2=h[r][p][f].nxtIsectAlongEdgeIn}var v=[];for(r=0,p=0;p<e;p++){var x=r;for(f=0;f<t.geometry.coordinates[p].length-1;f++)c[r].coord[0]<c[x].coord[0]&&(x=r),r++;var b=c[x].nxtIsectAlongRingAndEdge2;for(f=0;f<c.length;f++)if(c[f].nxtIsectAlongRingAndEdge1==x||c[f].nxtIsectAlongRingAndEdge2==x){var E=f;break}var A=ma([c[E].coord,c[x].coord,c[b].coord],!0)?1:-1;v.push({isect:x,parent:-1,winding:A})}for(v.sort(function(Y,et){return c[Y.isect].coord>c[et.isect].coord?-1:1}),u=[];v.length>0;){var C=v.pop(),F=C.isect,P=C.parent,q=C.winding,R=u.length,O=[c[F].coord],M=F;if(c[F].ringAndEdge1Walkable)var k=c[F].ringAndEdge1,T=c[F].nxtIsectAlongRingAndEdge1;else k=c[F].ringAndEdge2,T=c[F].nxtIsectAlongRingAndEdge2;for(;!ps(c[F].coord,c[T].coord);){O.push(c[T].coord);var B=void 0;for(r=0;r<v.length;r++)if(v[r].isect==T){B=r;break}if(null!=B&&v.splice(B,1),ps(k,c[T].ringAndEdge1)){if(k=c[T].ringAndEdge2,c[T].ringAndEdge2Walkable=!1,c[T].ringAndEdge1Walkable){var S={isect:T};ma([c[M].coord,c[T].coord,c[c[T].nxtIsectAlongRingAndEdge2].coord],1==q)?(S.parent=P,S.winding=-q):(S.parent=R,S.winding=q),v.push(S)}M=T,T=c[T].nxtIsectAlongRingAndEdge2}else k=c[T].ringAndEdge1,c[T].ringAndEdge1Walkable=!1,c[T].ringAndEdge2Walkable&&(S={isect:T},ma([c[M].coord,c[T].coord,c[c[T].nxtIsectAlongRingAndEdge1].coord],1==q)?(S.parent=P,S.winding=-q):(S.parent=R,S.winding=q),v.push(S)),M=T,T=c[T].nxtIsectAlongRingAndEdge1}O.push(c[T].coord),u.push(dt([O],{index:R,parent:P,winding:q,netWinding:void 0}))}function J(){for(var Y=[],et=0;et<l.features.length;et++)-1==l.features[et].properties.parent&&Y.push(et);if(Y.length>1)for(et=0;et<Y.length;et++){for(var gt=-1,te=0;te<l.features.length;te++)Y[et]!=te&&ae(l.features[Y[et]].geometry.coordinates[0][0],l.features[te],{ignoreBoundary:!0})&&Bu(l.features[te])<1/0&&(gt=te);l.features[Y[et]].properties.parent=gt}}function j(){for(var Y=0;Y<l.features.length;Y++)if(-1==l.features[Y].properties.parent){var et=l.features[Y].properties.winding;l.features[Y].properties.netWinding=et,ct(Y,et)}}function ct(Y,et){for(var gt=0;gt<l.features.length;gt++)if(l.features[gt].properties.parent==Y){var te=et+l.features[gt].properties.winding;l.features[gt].properties.netWinding=te,ct(gt,te)}}return l=rt(u),J(),j(),l}(n),function(r){e.push(dt(r.geometry.coordinates,n.properties))})}),rt(e)},N.validateBBox=ec,N.validateId=nc,N.voronoi=function(t,e){if(!Kt(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return Qr(t,"Point","points"),rt(function(){var r=a0,i=u0,o=null;function s(a){return new ll(a.map(function(u,l){var h=[Math.round(r(u,l,a)/le)*le,Math.round(i(u,l,a)/le)*le];return h.index=l,h.data=u,h}),o)}return s.polygons=function(a){return s(a).polygons()},s.links=function(a){return s(a).links()},s.triangles=function(a){return s(a).triangles()},s.x=function(a){return arguments.length?(r="function"==typeof a?a:fp(+a),s):r},s.y=function(a){return arguments.length?(i="function"==typeof a?a:fp(+a),s):i},s.extent=function(a){return arguments.length?(o=null==a?null:[[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]],s):o&&[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},s.size=function(a){return arguments.length?(o=null==a?null:[[0,0],[+a[0],+a[1]]],s):o&&[o[1][0]-o[0][0],o[1][1]-o[0][1]]},s}().x(function(r){return r.geometry.coordinates[0]}).y(function(r){return r.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(x0))},N.within=bu,Object.defineProperty(N,"__esModule",{value:!0})});