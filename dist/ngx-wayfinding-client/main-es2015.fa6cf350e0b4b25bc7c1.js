(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+eSx":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("2o5z")),i=a(n("QTq/")),o=a(n("jDUc")),s=a(n("6D9Q"));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=(0,r.default)(e),a=(0,i.default)(e),l=(0,r.default)(t),u=(0,i.default)(t);return((0,s.default)(Math.atan2(Math.sin((0,o.default)(a)-(0,o.default)(u))*Math.cos((0,o.default)(n)),Math.cos((0,o.default)(l))*Math.sin((0,o.default)(n))-Math.sin((0,o.default)(l))*Math.cos((0,o.default)(n))*Math.cos((0,o.default)(a)-(0,o.default)(u))))+360)%360}},"+qE3":function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise(function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,i)})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,s;if(u(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(t))>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,console&&console.warn&&console.warn(a)}return t}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function _(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,e);else{var u=l.length,c=m(l,u);for(n=0;n<u;++n)o(c[n],this,e)}return!0},a.prototype.on=a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return u(e),this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,d(this,t,e)),this},a.prototype.off=a.prototype.removeListener=function(t,e){var n,r,i,o,s;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return f(this,t,!0)},a.prototype.rawListeners=function(t){return f(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):_.call(t,e)},a.prototype.listenerCount=_,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"/5w7":function(t,e,n){"use strict";t.exports={placeholder:{de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05dc\u05d7\u05e4\u05e9",ja:"\u30b5\u30fc\u30c1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041f\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641c\u7d22",cs:"Vyhled\xe1v\xe1n\xed",hu:"Keres\xe9s",ka:"\u10eb\u10d8\u10d4\u10d1\u10d0",nb:"S\xf8ke",sk:"Vyh\u013ead\xe1vanie",th:"\u0e04\u0e49\u0e19\u0e2b\u0e32",fi:"Hae",is:"Leita",ko:"\uc218\uc0c9",pl:"Szukaj",sl:"Iskanje",fa:"\u062c\u0633\u062a\u062c\u0648",ru:"\u041f\u043e\u0438\u0441\u043a"}}},0:function(t,e,n){t.exports=n("zUnb")},"0KjW":function(t,e,n){"use strict";var r=n("KXza");t.exports=r},"2+Hy":function(t,e,n){"use strict";var r=n("YI60"),i=n("U6jy"),o=n("piyq"),s=n("d0rS"),a=n("jLWS"),l=1;function u(t,e){if(!t)throw new Error("MapiRequest requires a client");if(!e||!e.path||!e.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};e.body&&(n["content-type"]="application/json");var r=i(n,e.headers),s=Object.keys(r).reduce(function(t,e){return t[e.toLowerCase()]=r[e],t},{});this.id=l++,this._options=e,this.emitter=new o,this.client=t,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=e.path,this.method=e.method,this.origin=e.origin||t.origin,this.query=e.query||{},this.params=e.params||{},this.body=e.body||null,this.file=e.file||null,this.encoding=e.encoding||"utf8",this.sendFileAs=e.sendFileAs||null,this.headers=s}u.prototype.url=function(t){var e=s.prependOrigin(this.path,this.origin);e=s.appendQueryObject(e,this.query);var n=this.params,o=null==t?this.client.accessToken:t;if(o){e=s.appendQueryParam(e,"access_token",o);var a=r(o).user;n=i({ownerId:a},n)}return s.interpolateRouteParams(e,n)},u.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(e){return t.response=e,t.emitter.emit(a.EVENT_RESPONSE,e),e},function(e){throw t.error=e,t.emitter.emit(a.EVENT_ERROR,e),e})},u.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),this.response||this.error||this.aborted||(this.aborted=!0,this.client.abortRequest(this))},u.prototype.eachPage=function(t){var e=this;function n(n){t(null,n,function(){delete e._nextPageRequest;var t=n.nextPage();t&&(e._nextPageRequest=t,i(t))})}function r(e){t(e,null,function(){})}function i(t){t.send().then(n,r)}i(this)},u.prototype.clone=function(){return this._extend()},u.prototype._extend=function(t){var e=i(this._options,t);return new u(this.client,e)},t.exports=u},"2SVd":function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},"2o5z":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("jH9d"),i=s(n("M7lk")),o=s(n("KcL1"));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=(0,i.default)(t,r.latitudeKeys);if(null!=n){var s=t[n];return!0===e?s:(0,o.default)(s)}}},"3Q5m":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("jH9d");e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=r.distanceConversion[e];if(n)return t*n;throw new Error("Invalid unit used for distance conversion.")}},"45h8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("wI44")),i=o(n("me/f"));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){var o=(0,r.default)(e,t),s=(0,r.default)(t,n),a=(0,r.default)(e,n),l=Math.acos((0,i.default)((o*o+a*a-s*s)/(2*o*a))),u=Math.acos((0,i.default)((s*s+a*a-o*o)/(2*s*a)));return l>Math.PI/2?o:u>Math.PI/2?s:Math.sin(l)*o}},"4ZJM":function(t,e,n){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",s={};t(s),n=i(s),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=i;else t=i}return r(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r;function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,s;for(void 0===e&&(e=1e-6),i=t,s=0;s<8;s++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i-=o/a}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var s="undefined"!=typeof self?self:{},a=Math.pow(2,53)-1;function l(t,e,r,i){var o=new n(t,e,r,i);return function(t){return o.solve(t)}}var u=l(.25,.1,.25,1);function c(t,e,n){return Math.min(n,Math.max(e,t))}function h(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function p(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var s in o)t[s]=o[s]}return t}var d=1;function f(){return d++}function _(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function m(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function g(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function v(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function b(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function x(t){return Array.isArray(t)?t.map(x):"object"==typeof t&&t?v(t,x):t}var w={};function E(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function S(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function C(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,s=void 0;n<r;i=n++)e+=((s=t[i]).x-(o=t[n]).x)*(o.y+s.y);return e}function I(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function k(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var T=null;function P(t){if(null==T){var e=t.navigator?t.navigator.userAgent:null;T=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return T}function A(t){try{var e=s[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var O,M,L,N,D=s.performance&&s.performance.now?s.performance.now.bind(s.performance):Date.now.bind(Date),R=s.requestAnimationFrame||s.mozRequestAnimationFrame||s.webkitRequestAnimationFrame||s.msRequestAnimationFrame,z=s.cancelAnimationFrame||s.mozCancelAnimationFrame||s.webkitCancelAnimationFrame||s.msCancelAnimationFrame,F={now:D,frame:function(t){var e=R(t);return{cancel:function(){return z(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=s.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return O||(O=s.document.createElement("a")),O.href=t,O.href},hardwareConcurrency:s.navigator&&s.navigator.hardwareConcurrency||4,get devicePixelRatio(){return s.devicePixelRatio},get prefersReducedMotion(){return!!s.matchMedia&&(null==M&&(M=s.matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}},B={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},j={supported:!1,testSupport:function(t){!V&&N&&(U?$(t):L=t)}},V=!1,U=!1;function $(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,N),t.isContextLost())return;j.supported=!0}catch(t){}t.deleteTexture(e),V=!0}s.document&&((N=s.document.createElement("img")).onload=function(){L&&$(L),L=null,U=!0},N.onerror=function(){V=!0,L=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var q="01",G=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function H(t){return 0===t.indexOf("mapbox:")}G.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",q,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},G.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},G.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},G.prototype.normalizeStyleURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},G.prototype.normalizeGlyphsURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},G.prototype.normalizeSourceURL=function(t,e){if(!H(t))return t;var n=Y(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},G.prototype.normalizeSpriteURL=function(t,e,n,r){var i=Y(t);return H(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=""+e+n,K(i))},G.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!H(t))return t;var n=Y(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(F.devicePixelRatio>=2||512===e?"@2x":"")+(j.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var r=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||B.ACCESS_TOKEN;return B.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,r)},G.prototype.canonicalizeTileURL=function(t,e){var n=Y(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=n.path.replace("/v4/","");var i=n.params;return e&&(i=i.filter(function(t){return!t.match(/^access_token=/)})),i.length&&(r+="?"+i.join("&")),r},G.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&H(e),r=[],i=0,o=t.tiles||[];i<o.length;i+=1){var s=o[i];W(s)?r.push(this.canonicalizeTileURL(s,n)):r.push(s)}return r},G.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=Y(B.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){var i=t.params.indexOf("secure");i>=0&&t.params.splice(i,1)}if("/"!==r.path&&(t.path=""+r.path+t.path),!B.REQUIRE_ACCESS_TOKEN)return K(t);if(!(e=e||B.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter(function(t){return-1===t.indexOf("access_token")}),t.params.push("access_token="+e),K(t)};var Z=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function W(t){return Z.test(t)}var X=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Y(t){var e=t.match(X);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function K(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function J(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(s.atob(e[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(t){return null}}var Q=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Q.prototype.getStorageKey=function(t){var e,n=J(B.ACCESS_TOKEN);return e=n&&n.u?s.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))})):B.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Q.prototype.fetchEventData=function(){var t=A("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=s.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=s.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){E("Unable to read from LocalStorage")}},Q.prototype.saveEventData=function(){var t=A("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{s.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&s.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){E("Unable to write to LocalStorage")}},Q.prototype.processRequests=function(t){},Q.prototype.postEvent=function(t,e,n,r){var i=this;if(B.EVENTS_URL){var o=Y(B.EVENTS_URL);o.params.push("access_token="+(r||B.ACCESS_TOKEN||""));var s={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:q,userId:this.anonId},a=e?p(s,e):s,l={url:K(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=xt(l,function(t){i.pendingRequest=null,n(t),i.saveEventData(),i.processRequests(r)})}},Q.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,nt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,r){this.skuToken=n,(B.EVENTS_URL&&r||B.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return H(t)||W(t)}))&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=_()),this.postEvent(i,{skuToken:this.skuToken},function(t){t||r&&(e.success[r]=!0)},t))}},e}(Q),rt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){B.EVENTS_URL&&B.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return H(t)||W(t)})&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=J(B.ACCESS_TOKEN),r=n?n.u:B.ACCESS_TOKEN,i=r!==this.eventData.tokenU;m(this.anonId)||(this.anonId=_(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var s=new Date(this.eventData.lastSuccess),a=new Date(o),l=(o-this.eventData.lastSuccess)/864e5;i=i||l>=1||l<-1||s.getDate()!==a.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)},t)}},e}(Q)),it=rt.postTurnstileEvent.bind(rt),ot=new nt,st=ot.postMapLoadEvent.bind(ot),at=500,lt=50;function ut(){s.caches&&!tt&&(tt=s.caches.open("mapbox-tiles"))}function ct(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ht,pt=1/0;function dt(){return null==ht&&(ht=s.OffscreenCanvas&&new s.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof s.createImageBitmap),ht}var ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ft);var _t,mt,gt=function(t){function e(e,n,r){401===n&&W(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=I()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===s.location.protocol?s.parent:s).location.href},vt=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(yt())&&!/^\w+:/.test(n))){if(s.fetch&&s.Request&&s.AbortController&&s.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,r=new s.AbortController,i=new s.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:r.signal}),o=!1,a=!1,l=(n=i.url).indexOf("sku=")>0&&W(n);"json"===t.type&&i.headers.set("Accept","application/json");var u=function(n,r,o){if(!a){if(n&&"SecurityError"!==n.message&&E(n),r&&o)return c(r);var u=Date.now();s.fetch(i).then(function(n){if(n.ok){var r=l?n.clone():null;return c(n,r,u)}return e(new gt(n.statusText,n.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))})}},c=function(n,r,l){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then(function(t){a||(r&&l&&function(t,e,n){if(ut(),tt){var r={status:e.status,statusText:e.statusText,headers:new s.Headers};e.headers.forEach(function(t,e){return r.headers.set(e,t)});var i=k(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,function(e){var n=new s.Response(e,r);ut(),tt&&tt.then(function(e){return e.put(ct(t.url),n)}).catch(function(t){return E(t.message)})}))}}(i,r,l),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))}).catch(function(t){a||e(new Error(t.message))})};return l?function(t,e){if(ut(),!tt)return e(null);var n=ct(t.url);tt.then(function(t){t.match(n).then(function(r){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=k(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)}).catch(e)}).catch(e)}(i,u):u(null,null),{cancel:function(){a=!0,o||r.abort()}}}(t,e);if(I()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new s.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new gt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},bt=function(t,e){return vt(p(t,{type:"arrayBuffer"}),e)},xt=function(t,e){return vt(p(t,{method:"POST"}),e)},wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";_t=[],mt=0;var Et=function(t,e){if(j.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),mt>=B.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return _t.push(n),n}mt++;var r=!1,i=function(){if(!r)for(r=!0,mt--;_t.length&&mt<B.MAX_PARALLEL_IMAGE_REQUESTS;){var t=_t.shift();t.cancelled||(t.cancel=Et(t.requestParameters,t.callback).cancel)}},o=bt(t,function(t,n,r,o){i(),t?e(t):n&&(dt()?function(t,e){var n=new s.Blob([new Uint8Array(t)],{type:"image/png"});s.createImageBitmap(n).then(function(t){e(null,t)}).catch(function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(n,e):function(t,e,n,r){var i=new s.Image,o=s.URL;i.onload=function(){e(null,i),o.revokeObjectURL(i.src),i.onload=null,s.requestAnimationFrame(function(){i.src=wt})},i.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new s.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=t.byteLength?o.createObjectURL(a):wt}(n,e,r,o))});return{cancel:function(){o.cancel(),i()}}};function St(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Ct(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var It=function(t,e){void 0===e&&(e={}),p(this,e),this.type=t},kt=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",p({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(It),Tt=function(){};Tt.prototype.on=function(t,e){return this._listeners=this._listeners||{},St(t,e,this._listeners),this},Tt.prototype.off=function(t,e){return Ct(t,e,this._listeners),Ct(t,e,this._oneTimeListeners),this},Tt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},St(t,e,this._oneTimeListeners),this},Tt.prototype.fire=function(t,e){"string"==typeof t&&(t=new It(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<s.length;o+=1){var a=s[o];Ct(n,a,this._oneTimeListeners),a.call(this,t)}var l=this._eventedParent;l&&(p(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof kt&&console.error(t.error);return this},Tt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Tt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Pt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},At=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function Ot(t){var e=t.value;return e?[new At(t.key,e,"constants have been deprecated as of v8")]:[]}function Mt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var s in o)t[s]=o[s]}return t}function Lt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Nt(t){if(Array.isArray(t))return t.map(Nt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=Nt(t[n]);return e}return Lt(t)}var Dt=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Rt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};Rt.prototype.concat=function(t){return new Rt(this,t)},Rt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Rt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var zt={kind:"null"},Ft={kind:"number"},Bt={kind:"string"},jt={kind:"boolean"},Vt={kind:"color"},Ut={kind:"object"},$t={kind:"value"},qt={kind:"collator"},Gt={kind:"formatted"},Ht={kind:"resolvedImage"};function Zt(t,e){return{kind:"array",itemType:t,N:e}}function Wt(t){if("array"===t.kind){var e=Wt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Xt=[zt,Ft,Bt,jt,Vt,Gt,Ut,Zt($t),Ht];function Yt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Yt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=Xt;n<r.length;n+=1)if(!Yt(r[n],e))return null}return"Expected "+Wt(t)+" but found "+Wt(e)+" instead."}function Kt(t,e){return e.some(function(e){return e.kind===t.kind})}function Jt(t,e){return e.some(function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t})}var Qt=e(function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,a=t.replace(/ /g,"").toLowerCase();if(a in n)return n[a].slice();if("#"===a[0])return 4===a.length?(e=parseInt(a.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===a.length&&(e=parseInt(a.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=a.indexOf("("),u=a.indexOf(")");if(-1!==l&&u+1===a.length){var c=a.substr(0,l),h=a.substr(l+1,u-(l+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),_=o(h[2]),m=_<=.5?_*(f+1):_+f-_*f,g=2*_-m;return[r(255*s(g,m,d+1/3)),r(255*s(g,m,d)),r(255*s(g,m,d-1/3)),p];default:return null}}return null}}catch(t){}}).parseCSSColor,te=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};te.parse=function(t){if(t){if(t instanceof te)return t;if("string"==typeof t){var e=Qt(t);if(e)return new te(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},te.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+r+")"},te.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},te.black=new te(0,0,0,1),te.white=new te(1,1,1,1),te.transparent=new te(0,0,0,0),te.red=new te(1,0,0,1);var ee=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ee.prototype.compare=function(t,e){return this.collator.compare(t,e)},ee.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ne=function(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i},re=function(t){this.sections=t};re.fromString=function(t){return new re([new ne(t,null,null,null,null)])},re.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},re.factory=function(t){return t instanceof re?t:re.fromString(t)},re.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},re.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}return t};var ie=function(t){this.name=t.name,this.available=t.available};function oe(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function se(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof te)return!0;if(t instanceof ee)return!0;if(t instanceof re)return!0;if(t instanceof ie)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!se(n[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!se(t[r]))return!1;return!0}return!1}function ae(t){if(null===t)return zt;if("string"==typeof t)return Bt;if("boolean"==typeof t)return jt;if("number"==typeof t)return Ft;if(t instanceof te)return Vt;if(t instanceof ee)return qt;if(t instanceof re)return Gt;if(t instanceof ie)return Ht;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=ae(i[r]);if(e){if(e===o)continue;e=$t;break}e=o}return Zt(e||$t,n)}return Ut}function le(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof te||t instanceof re||t instanceof ie?t.toString():JSON.stringify(t)}ie.prototype.toString=function(){return this.name},ie.fromString=function(t){return t?new ie({name:t,available:!1}):null},ie.prototype.serialize=function(){return["image",this.name]};var ue=function(t,e){this.type=t,this.value=e};ue.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!se(t[1]))return e.error("invalid value");var n=t[1],r=ae(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new ue(r,n)},ue.prototype.evaluate=function(){return this.value},ue.prototype.eachChild=function(){},ue.prototype.outputDefined=function(){return!0},ue.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof te?["rgba"].concat(this.value.toArray()):this.value instanceof re?this.value.serialize():this.value};var ce=function(t){this.name="ExpressionEvaluationError",this.message=t};ce.prototype.toJSON=function(){return this.message};var he={string:Bt,number:Ft,boolean:jt,object:Ut},pe=function(t,e){this.type=t,this.args=e};pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,s;if(t.length>2){var a=t[1];if("string"!=typeof a||!(a in he)||"object"===a)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=he[a],r++}else o=$t;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);s=t[2],r++}n=Zt(o,s)}else n=he[i];for(var l=[];r<t.length;r++){var u=e.parse(t[r],r,$t);if(!u)return null;l.push(u)}return new pe(n,l)},pe.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Yt(this.type,ae(n)))return n;if(e===this.args.length-1)throw new ce("Expected value to be of type "+Wt(this.type)+", but found "+Wt(ae(n))+" instead.")}return null},pe.prototype.eachChild=function(t){this.args.forEach(t)},pe.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},pe.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var de=function(t){this.type=Gt,this.sections=t};de.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=t.length-1;++o){var s=t[o];if(i&&"object"==typeof s&&!Array.isArray(s)){i=!1;var a=null;if(s["font-scale"]&&!(a=e.parse(s["font-scale"],1,Ft)))return null;var l=null;if(s["text-font"]&&!(l=e.parse(s["text-font"],1,Zt(Bt))))return null;var u=null;if(s["text-color"]&&!(u=e.parse(s["text-color"],1,Vt)))return null;var c=r[r.length-1];c.scale=a,c.font=l,c.textColor=u}else{var h=e.parse(t[o],1,$t);if(!h)return null;var p=h.type.kind;if("string"!==p&&"value"!==p&&"null"!==p&&"resolvedImage"!==p)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:h,scale:null,font:null,textColor:null})}}return new de(r)},de.prototype.evaluate=function(t){return new re(this.sections.map(function(e){var n=e.content.evaluate(t);return ae(n)===Ht?new ne("",n,null,null,null):new ne(le(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))},de.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},de.prototype.outputDefined=function(){return!1},de.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}return t};var fe=function(t){this.type=Ht,this.input=t};fe.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Bt);return n?new fe(n):e.error("No image name provided.")},fe.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=ie.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},fe.prototype.eachChild=function(t){t(this.input)},fe.prototype.outputDefined=function(){return!1},fe.prototype.serialize=function(){return["image",this.input.serialize()]};var _e={"to-boolean":jt,"to-color":Vt,"to-number":Ft,"to-string":Bt},me=function(t,e){this.type=t,this.args=e};me.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=_e[n],i=[],o=1;o<t.length;o++){var s=e.parse(t[o],o,$t);if(!s)return null;i.push(s)}return new me(r,i)},me.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof te)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":oe(e[0],e[1],e[2],e[3])))return new te(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ce(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var s=null,a=0,l=this.args;a<l.length;a+=1){if(null===(s=l[a].evaluate(t)))return 0;var u=Number(s);if(!isNaN(u))return u}throw new ce("Could not convert "+JSON.stringify(s)+" to number.")}return"formatted"===this.type.kind?re.fromString(le(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ie.fromString(le(this.args[0].evaluate(t))):le(this.args[0].evaluate(t))},me.prototype.eachChild=function(t){this.args.forEach(t)},me.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},me.prototype.serialize=function(){if("formatted"===this.type.kind)return new de([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new fe(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var ge=["Unknown","Point","LineString","Polygon"],ye=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ye.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ye.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ge[this.feature.type]:this.feature.type:null},ye.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ye.prototype.canonicalID=function(){return this.canonical},ye.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ye.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=te.parse(t)),e};var ve=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};ve.prototype.evaluate=function(t){return this._evaluate(t,this.args)},ve.prototype.eachChild=function(t){this.args.forEach(t)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},ve.parse=function(t,e){var n,r=t[0],i=ve.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=s.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),l=null,u=0,c=a;u<c.length;u+=1){var h=c[u],p=h[0],d=h[1];l=new Ve(e.registry,e.path,null,e.scope);for(var f=[],_=!1,m=1;m<t.length;m++){var g=t[m],y=Array.isArray(p)?p[m-1]:p.type,v=l.parse(g,1+f.length,y);if(!v){_=!0;break}f.push(v)}if(!_)if(Array.isArray(p)&&p.length!==f.length)l.error("Expected "+p.length+" arguments, but found "+f.length+" instead.");else{for(var b=0;b<f.length;b++){var x=Array.isArray(p)?p[b]:p.type,w=f[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new ve(r,o,d,f)}}if(1===a.length)(n=e.errors).push.apply(n,l.errors);else{for(var E=(a.length?a:s).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Wt).join(", ")+")":"("+Wt(e.type)+"...)"}).join(" | "),S=[],C=1;C<t.length;C++){var I=e.parse(t[C],1+S.length);if(!I)return null;S.push(Wt(I.type))}e.error("Expected arguments of type "+E+", but found ("+S.join(", ")+") instead.")}return null},ve.register=function(t,e){for(var n in ve.definitions=e,e)t[n]=ve};var be=function(t,e,n){this.type=qt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};function xe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function we(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ee(t,e){var n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*8192),Math.round(r*i*8192)]}function Se(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function Ce(t,e){for(var n,r,i,o,s,a,l,u=!1,c=0,h=e.length;c<h;c++)for(var p=e[c],d=0,f=p.length;d<f-1;d++){if((o=(n=t)[0]-(r=p[d])[0])*(l=n[1]-(i=p[d+1])[1])-(a=n[0]-i[0])*(s=n[1]-r[1])==0&&o*a<=0&&s*l<=0)return!1;Se(t,p[d],p[d+1])&&(u=!u)}return u}function Ie(t,e){for(var n=0;n<e.length;n++)if(Ce(t,e[n]))return!0;return!1}function ke(t,e,n,r){var i=r[0]-n[0],o=r[1]-n[1],s=(t[0]-n[0])*o-i*(t[1]-n[1]),a=(e[0]-n[0])*o-i*(e[1]-n[1]);return s>0&&a<0||s<0&&a>0}function Te(t,e,n){for(var r=0,i=n;r<i.length;r+=1)for(var o=i[r],s=0;s<o.length-1;++s)if(0!=(h=[(c=o[s+1])[0]-(u=o[s])[0],c[1]-u[1]])[0]*(p=[(l=e)[0]-(a=t)[0],l[1]-a[1]])[1]-h[1]*p[0]&&ke(a,l,u,c)&&ke(u,c,a,l))return!0;var a,l,u,c,h,p;return!1}function Pe(t,e){for(var n=0;n<t.length;++n)if(!Ce(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(Te(t[r],t[r+1],e))return!1;return!0}function Ae(t,e){for(var n=0;n<e.length;n++)if(Pe(t,e[n]))return!0;return!1}function Oe(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],s=0;s<t[i].length;s++){var a=Ee(t[i][s],n);xe(e,a),o.push(a)}r.push(o)}return r}function Me(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=Oe(t[i],e,n);r.push(o)}return r}function Le(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===o&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o}xe(e,t)}function Ne(t,e,n,r){for(var i=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],s=[],a=0,l=t;a<l.length;a+=1)for(var u=0,c=l[a];u<c.length;u+=1){var h=c[u],p=[h.x+o[0],h.y+o[1]];Le(p,e,n,i),s.push(p)}return s}function De(t,e,n,r){for(var i,o=8192*Math.pow(2,r.z),s=[8192*r.x,8192*r.y],a=[],l=0,u=t;l<u.length;l+=1){for(var c=[],h=0,p=u[l];h<p.length;h+=1){var d=p[h],f=[d.x+s[0],d.y+s[1]];xe(e,f),c.push(f)}a.push(c)}if(e[2]-e[0]<=o/2){(i=e)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var _=0,m=a;_<m.length;_+=1)for(var g=0,y=m[_];g<y.length;g+=1)Le(y[g],e,n,o)}return a}be.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,jt);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,jt);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,Bt))?null:new be(r,i,o)},be.prototype.evaluate=function(t){return new ee(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},be.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},be.prototype.outputDefined=function(){return!1},be.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Re=function(t,e){this.type=jt,this.geojson=t,this.geometries=e};function ze(t){if(t instanceof ve){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Re)return!1;var e=!0;return t.eachChild(function(t){e&&!ze(t)&&(e=!1)}),e}function Fe(t){if(t instanceof ve&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!Fe(t)&&(e=!1)}),e}function Be(t,e){if(t instanceof ve&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!Be(t,e)&&(n=!1)}),n}Re.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(se(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Re(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Re(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Re(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Re.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=Oe(e.coordinates,r,i),s=Ne(t.geometry(),n,r,i);if(!we(n,r))return!1;for(var a=0,l=s;a<l.length;a+=1)if(!Ce(l[a],o))return!1}if("MultiPolygon"===e.type){var u=Me(e.coordinates,r,i),c=Ne(t.geometry(),n,r,i);if(!we(n,r))return!1;for(var h=0,p=c;h<p.length;h+=1)if(!Ie(p[h],u))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=Oe(e.coordinates,r,i),s=De(t.geometry(),n,r,i);if(!we(n,r))return!1;for(var a=0,l=s;a<l.length;a+=1)if(!Pe(l[a],o))return!1}if("MultiPolygon"===e.type){var u=Me(e.coordinates,r,i),c=De(t.geometry(),n,r,i);if(!we(n,r))return!1;for(var h=0,p=c;h<p.length;h+=1)if(!Ae(p[h],u))return!1}return!0}(t,this.geometries)}return!1},Re.prototype.eachChild=function(){},Re.prototype.outputDefined=function(){return!0},Re.prototype.serialize=function(){return["within",this.geojson]};var je=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};je.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new je(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},je.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},je.prototype.eachChild=function(){},je.prototype.outputDefined=function(){return!1},je.prototype.serialize=function(){return["var",this.name]};var Ve=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new Rt),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};function Ue(t,e){for(var n,r=t.length-1,i=0,o=r,s=0;i<=o;)if((n=t[s=Math.floor((i+o)/2)])<=e){if(s===r||e<t[s+1])return s;i=s+1}else{if(!(n>e))throw new ce("Input is not a number.");o=s-1}return 0}Ve.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Ve.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new pe(e,[t]):"coerce"===n?new me(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var s=this.expectedType,a=o.type;if("string"!==s.kind&&"number"!==s.kind&&"boolean"!==s.kind&&"object"!==s.kind&&"array"!==s.kind||"value"!==a.kind)if("color"!==s.kind&&"formatted"!==s.kind&&"resolvedImage"!==s.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(s,a))return null}else o=n(o,s,e.typeAnnotation||"coerce");else o=n(o,s,e.typeAnnotation||"assert")}if(!(o instanceof ue)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof je)return t(e.boundExpression);if(e instanceof ve&&"error"===e.name)return!1;if(e instanceof be)return!1;if(e instanceof Re)return!1;var n=e instanceof me||e instanceof pe,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof ue}),!!r&&ze(e)&&Be(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new ye;try{o=new ue(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Ve.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Ve(this.registry,r,e||null,i,this.errors)},Ve.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new Dt(r,t))},Ve.prototype.checkSubtype=function(t,e){var n=Yt(t,e);return n&&this.error(n),n};var $e=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],s=o[1];this.labels.push(o[0]),this.outputs.push(s)}};function qe(t,e,n){return t*(1-n)+e*n}$e.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,Ft);if(!n)return null;var r=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],a=t[o+1],l=o,u=o+1;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(r.length&&r[r.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(a,u,i);if(!c)return null;i=i||c.type,r.push([s,c])}return new $e(i,n,r)},$e.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Ue(e,r)].evaluate(t)},$e.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},$e.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},$e.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ge=Object.freeze({__proto__:null,number:qe,color:function(t,e,n){return new te(qe(t.r,e.r,n),qe(t.g,e.g,n),qe(t.b,e.b,n),qe(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return qe(t,e[r],n)})}}),He=6/29*3*(6/29),Ze=Math.PI/180,We=180/Math.PI;function Xe(t){return t>.008856451679035631?Math.pow(t,1/3):t/He+4/29}function Ye(t){return t>6/29?t*t*t:He*(t-4/29)}function Ke(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Je(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Qe(t){var e=Je(t.r),n=Je(t.g),r=Je(t.b),i=Xe((.4124564*e+.3575761*n+.1804375*r)/.95047),o=Xe((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-Xe((.0193339*e+.119192*n+.9503041*r)/1.08883)),alpha:t.a}}function tn(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*Ye(e),n=.95047*Ye(n),r=1.08883*Ye(r),new te(Ke(3.2404542*n-1.5371385*e-.4985314*r),Ke(-.969266*n+1.8760108*e+.041556*r),Ke(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function en(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var nn={forward:Qe,reverse:tn,interpolate:function(t,e,n){return{l:qe(t.l,e.l,n),a:qe(t.a,e.a,n),b:qe(t.b,e.b,n),alpha:qe(t.alpha,e.alpha,n)}}},rn={forward:function(t){var e=Qe(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*We;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Ze,n=t.c;return tn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:en(t.h,e.h,n),c:qe(t.c,e.c,n),l:qe(t.l,e.l,n),alpha:qe(t.alpha,e.alpha,n)}}},on=Object.freeze({__proto__:null,lab:nn,hcl:rn}),sn=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,s=i;o<s.length;o+=1){var a=s[o],l=a[1];this.labels.push(a[0]),this.outputs.push(l)}};function an(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}sn.interpolationFactor=function(t,e,r,i){var o=0;if("exponential"===t.name)o=an(e,t.base,r,i);else if("linear"===t.name)o=an(e,1,r,i);else if("cubic-bezier"===t.name){var s=t.controlPoints;o=new n(s[0],s[1],s[2],s[3]).solve(an(e,1,r,i))}return o},sn.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var s=r[1];if("number"!=typeof s)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:s}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var a=r.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Ft)))return null;var l=[],u=null;"interpolate-hcl"===n||"interpolate-lab"===n?u=Vt:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<o.length;c+=2){var h=o[c],p=o[c+1],d=c+3,f=c+4;if("number"!=typeof h)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=h)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var _=e.parse(p,f,u);if(!_)return null;u=u||_.type,l.push([h,_])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new sn(u,n,r,i,l):e.error("Type "+Wt(u)+" is not interpolatable.")},sn.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=Ue(e,r),s=sn.interpolationFactor(this.interpolation,r,e[o],e[o+1]),a=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?Ge[this.type.kind.toLowerCase()](a,l,s):"interpolate-hcl"===this.operator?rn.reverse(rn.interpolate(rn.forward(a),rn.forward(l),s)):nn.reverse(nn.interpolate(nn.forward(a),nn.forward(l),s))},sn.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},sn.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},sn.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var ln=function(t,e){this.type=t,this.args=e};ln.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,s=t.slice(1);o<s.length;o+=1){var a=e.parse(s[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!a)return null;n=n||a.type,i.push(a)}var l=r&&i.some(function(t){return Yt(r,t.type)});return new ln(l?$t:n,i)},ln.prototype.evaluate=function(t){for(var e,n=null,r=0,i=0,o=this.args;i<o.length&&(r++,(n=o[i].evaluate(t))&&n instanceof ie&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null===n);i+=1);return n},ln.prototype.eachChild=function(t){this.args.forEach(t)},ln.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},ln.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var un=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};un.prototype.evaluate=function(t){return this.result.evaluate(t)},un.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},un.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var s=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return s?new un(n,s):null},un.prototype.outputDefined=function(){return this.result.outputDefined()},un.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var cn=function(t,e,n){this.type=t,this.index=e,this.input=n};cn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Ft),r=e.parse(t[2],2,Zt(e.expectedType||$t));return n&&r?new cn(r.type.itemType,n,r):null},cn.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ce("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new ce("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new ce("Array index must be an integer, but found "+e+" instead.");return n[e]},cn.prototype.eachChild=function(t){t(this.index),t(this.input)},cn.prototype.outputDefined=function(){return!1},cn.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var hn=function(t,e){this.type=jt,this.needle=t,this.haystack=e};hn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,$t),r=e.parse(t[2],2,$t);return n&&r?Kt(n.type,[jt,Bt,Ft,zt,$t])?new hn(n,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Wt(n.type)+" instead"):null},hn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Jt(e,["boolean","string","number","null"]))throw new ce("Expected first argument to be of type boolean, string, number or null, but found "+Wt(ae(e))+" instead.");if(!Jt(n,["string","array"]))throw new ce("Expected second argument to be of type array or string, but found "+Wt(ae(n))+" instead.");return n.indexOf(e)>=0},hn.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},hn.prototype.outputDefined=function(){return!0},hn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pn=function(t,e,n){this.type=Ft,this.needle=t,this.haystack=e,this.fromIndex=n};pn.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,$t),r=e.parse(t[2],2,$t);if(!n||!r)return null;if(!Kt(n.type,[jt,Bt,Ft,zt,$t]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Wt(n.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,Ft);return i?new pn(n,r,i):null}return new pn(n,r)},pn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Jt(e,["boolean","string","number","null"]))throw new ce("Expected first argument to be of type boolean, string, number or null, but found "+Wt(ae(e))+" instead.");if(!Jt(n,["string","array"]))throw new ce("Expected second argument to be of type array or string, but found "+Wt(ae(n))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)},pn.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},pn.prototype.outputDefined=function(){return!1},pn.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var dn=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};dn.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],s=2;s<t.length-1;s+=2){var a=t[s],l=t[s+1];Array.isArray(a)||(a=[a]);var u=e.concat(s);if(0===a.length)return u.error("Expected at least one branch label.");for(var c=0,h=a;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return u.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,ae(p)))return null}else n=ae(p);if(void 0!==i[String(p)])return u.error("Branch labels must be unique.");i[String(p)]=o.length}var d=e.parse(l,s,r);if(!d)return null;r=r||d.type,o.push(d)}var f=e.parse(t[1],1,$t);if(!f)return null;var _=e.parse(t[t.length-1],t.length-1,r);return _?"value"!==f.type.kind&&e.concat(1).checkSubtype(n,f.type)?null:new dn(n,r,f,i,o,_):null},dn.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(ae(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},dn.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},dn.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},dn.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var s=o[i];void 0===(h=r[this.cases[s]])?(r[this.cases[s]]=n.length,n.push([this.cases[s],[s]])):n[h][1].push(s)}for(var a=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,u=n;l<u.length;l+=1){var c=u[l],h=c[0],p=c[1];e.push(1===p.length?a(p[0]):p.map(a)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var fn=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};fn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,jt);if(!o)return null;var s=e.parse(t[i+1],i+1,n);if(!s)return null;r.push([o,s]),n=n||s.type}var a=e.parse(t[t.length-1],t.length-1,n);return a?new fn(n,r,a):null},fn.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},fn.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},fn.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},fn.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var _n=function(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r};function mn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function gn(t,e,n,r){return 0===r.compare(e,n)}function yn(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=jt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,$t);if(!o)return null;if(!mn(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Wt(o.type)+"'.");var s=e.parse(t[2],2,$t);if(!s)return null;if(!mn(n,s.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Wt(s.type)+"'.");if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error("Cannot compare types '"+Wt(o.type)+"' and '"+Wt(s.type)+"'.");r&&("value"===o.type.kind&&"value"!==s.type.kind?o=new pe(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new pe(o.type,[s])));var a=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(a=e.parse(t[3],3,qt)))return null}return new i(o,s,a)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),s=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var a=ae(o),l=ae(s);if(a.kind!==l.kind||"string"!==a.kind&&"number"!==a.kind)throw new ce('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+a.kind+", "+l.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var u=ae(o),c=ae(s);if("string"!==u.kind||"string"!==c.kind)return e(i,o,s)}return this.collator?n(i,o,s,this.collator.evaluate(i)):e(i,o,s)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}_n.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,$t),r=e.parse(t[2],2,Ft);if(!n||!r)return null;if(!Kt(n.type,[Zt($t),Bt,$t]))return e.error("Expected first argument to be of type array or string, but found "+Wt(n.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,Ft);return i?new _n(n.type,n,r,i):null}return new _n(n.type,n,r)},_n.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Jt(e,["string","array"]))throw new ce("Expected first argument to be of type array or string, but found "+Wt(ae(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)},_n.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},_n.prototype.outputDefined=function(){return!1},_n.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var vn=yn("==",function(t,e,n){return e===n},gn),bn=yn("!=",function(t,e,n){return e!==n},function(t,e,n,r){return!gn(0,e,n,r)}),xn=yn("<",function(t,e,n){return e<n},function(t,e,n,r){return r.compare(e,n)<0}),wn=yn(">",function(t,e,n){return e>n},function(t,e,n,r){return r.compare(e,n)>0}),En=yn("<=",function(t,e,n){return e<=n},function(t,e,n,r){return r.compare(e,n)<=0}),Sn=yn(">=",function(t,e,n){return e>=n},function(t,e,n,r){return r.compare(e,n)>=0}),Cn=function(t,e,n,r,i){this.type=Bt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};Cn.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Ft);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,Bt)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,Bt)))return null;var s=null;if(r["min-fraction-digits"]&&!(s=e.parse(r["min-fraction-digits"],1,Ft)))return null;var a=null;return r["max-fraction-digits"]&&!(a=e.parse(r["max-fraction-digits"],1,Ft))?null:new Cn(n,i,o,s,a)},Cn.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Cn.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Cn.prototype.outputDefined=function(){return!1},Cn.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var In=function(t){this.type=Ft,this.input=t};In.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Wt(n.type)+" instead."):new In(n):null},In.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ce("Expected value to be of type string or array, but found "+Wt(ae(e))+" instead.")},In.prototype.eachChild=function(t){t(this.input)},In.prototype.outputDefined=function(){return!1},In.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var kn={"==":vn,"!=":bn,">":wn,"<":xn,">=":Sn,"<=":En,array:pe,at:cn,boolean:pe,case:fn,coalesce:ln,collator:be,format:de,image:fe,in:hn,"index-of":pn,interpolate:sn,"interpolate-hcl":sn,"interpolate-lab":sn,length:In,let:un,literal:ue,match:dn,number:pe,"number-format":Cn,object:pe,slice:_n,step:$e,string:pe,"to-boolean":me,"to-color":me,"to-number":me,"to-string":me,var:je,within:Re};function Tn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var s=o?o.evaluate(t):1,a=oe(n,r,i,s);if(a)throw new ce(a);return new te(n/255*s,r/255*s,i/255*s,s)}function Pn(t,e){return t in e}function An(t,e){var n=e[t];return void 0===n?null:n}function On(t){return{type:t}}function Mn(t){return{result:"success",value:t}}function Ln(t){return{result:"error",value:t}}function Nn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Dn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Rn(t){return!!t.expression&&t.expression.interpolated}function zn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Fn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Bn(t){return t}function jn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Vn(t,e,n,r,i){return jn(typeof n===i?r[n]:void 0,t.default,e.default)}function Un(t,e,n){if("number"!==zn(n))return jn(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=Ue(t.stops.map(function(t){return t[0]}),n);return t.stops[i][1]}function $n(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==zn(n))return jn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=Ue(t.stops.map(function(t){return t[0]}),n),s=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),a=t.stops[o][1],l=t.stops[o+1][1],u=Ge[e.type]||Bn;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=on[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),s))}}return"function"==typeof a.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=a.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return u(n,r,s)}}:u(a,l,s)}function qn(t,e,n){return"color"===e.type?n=te.parse(n):"formatted"===e.type?n=re.fromString(n.toString()):"resolvedImage"===e.type?n=ie.fromString(n.toString()):zn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),jn(n,t.default,e.default)}ve.register(kn,{error:[{kind:"error"},[Bt],function(t,e){throw new ce(e[0].evaluate(t))}],typeof:[Bt,[$t],function(t,e){return Wt(ae(e[0].evaluate(t)))}],"to-rgba":[Zt(Ft,4),[Vt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Vt,[Ft,Ft,Ft],Tn],rgba:[Vt,[Ft,Ft,Ft,Ft],Tn],has:{type:jt,overloads:[[[Bt],function(t,e){return Pn(e[0].evaluate(t),t.properties())}],[[Bt,Ut],function(t,e){var n=e[1];return Pn(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:$t,overloads:[[[Bt],function(t,e){return An(e[0].evaluate(t),t.properties())}],[[Bt,Ut],function(t,e){var n=e[1];return An(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[$t,[Bt],function(t,e){return An(e[0].evaluate(t),t.featureState||{})}],properties:[Ut,[],function(t){return t.properties()}],"geometry-type":[Bt,[],function(t){return t.geometryType()}],id:[$t,[],function(t){return t.id()}],zoom:[Ft,[],function(t){return t.globals.zoom}],"heatmap-density":[Ft,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ft,[],function(t){return t.globals.lineProgress||0}],accumulated:[$t,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Ft,On(Ft),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[Ft,On(Ft),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:Ft,overloads:[[[Ft,Ft],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[Ft],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ft,[Ft,Ft],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[Ft,[Ft,Ft],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[Ft,[],function(){return Math.LN2}],pi:[Ft,[],function(){return Math.PI}],e:[Ft,[],function(){return Math.E}],"^":[Ft,[Ft,Ft],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[Ft,[Ft],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Ft,[Ft],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Ft,[Ft],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Ft,[Ft],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Ft,[Ft],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Ft,[Ft],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Ft,[Ft],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Ft,[Ft],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Ft,On(Ft),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[Ft,On(Ft),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[Ft,[Ft],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Ft,[Ft],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ft,[Ft],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Ft,[Ft],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[jt,[Bt,$t],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[jt,[$t],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[jt,[Bt],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[jt,[Bt,$t],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[jt,[$t],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[jt,[Bt,$t],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[jt,[$t],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[jt,[Bt,$t],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[jt,[$t],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[jt,[Bt,$t],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[jt,[$t],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[jt,[$t],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[jt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[jt,[Zt(Bt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[jt,[Zt($t)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[jt,[Bt,Zt($t)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[jt,[Bt,Zt($t)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:jt,overloads:[[[jt,jt],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[On(jt),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[On(jt),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[jt,[jt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[jt,[Bt],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[Bt,[Bt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Bt,[Bt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Bt,On($t),function(t,e){return e.map(function(e){return le(e.evaluate(t))}).join("")}],"resolved-locale":[Bt,[qt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Gn=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new ye,this._defaultValue=e?function(t){return"color"===t.type&&Fn(t.default)?new te(0,0,0,0):"color"===t.type?te.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Hn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in kn}function Zn(t,e){var n=new Ve(kn,[],e?function(t){var e={color:Vt,string:Bt,number:Ft,enum:Bt,boolean:jt,formatted:Gt,resolvedImage:Ht};return"array"===t.type?Zt(e[t.value]||$t,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Mn(new Gn(r,e)):Ln(n.errors)}Gn.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Gn.prototype.evaluate=function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var s=this.expression.evaluate(this._evaluator);if(null==s||"number"==typeof s&&s!=s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new ce("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(s)+" instead.");return s}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Wn=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Fe(e.expression)};Wn.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},Wn.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)};var Xn=function(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Fe(e.expression),this.interpolationType=r};function Yn(t,e){if("error"===(t=Zn(t,e)).result)return t;var n=t.value.expression,r=ze(n);if(!r&&!Nn(e))return Ln([new Dt("","data expressions not supported")]);var i=Be(n,["zoom"]);if(!i&&!Dn(e))return Ln([new Dt("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof un)n=t(e.result);else if(e instanceof ln)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof $e||e instanceof sn)&&e.input instanceof ve&&"zoom"===e.input.name&&(n=e);return n instanceof Dt||e.eachChild(function(e){var r=t(e);r instanceof Dt?n=r:!n&&r?n=new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new Dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(n);return o||i?o instanceof Dt?Ln([o]):o instanceof sn&&!Rn(e)?Ln([new Dt("",'"interpolate" expressions cannot be used with this property')]):Mn(o?new Xn(r?"camera":"composite",t.value,o.labels,o instanceof sn?o.interpolation:void 0):new Wn(r?"constant":"source",t.value)):Ln([new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Xn.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},Xn.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)},Xn.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?sn.interpolationFactor(this.interpolationType,t,e,n):0};var Kn=function(t,e){this._parameters=t,this._specification=e,Mt(this,function t(e,n){var r,i,o,s="color"===n.type,a=e.stops&&"object"==typeof e.stops[0][0],l=a||!(a||void 0!==e.property),u=e.type||(Rn(n)?"exponential":"interval");if(s&&((e=Mt({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],te.parse(t[1])]})),e.default=te.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!on[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===u)r=$n;else if("interval"===u)r=Un;else if("categorical"===u){r=Vn,i=Object.create(null);for(var c=0,h=e.stops;c<h.length;c+=1){var p=h[c];i[p[0]]=p[1]}o=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');r=qn}if(a){for(var d={},f=[],_=0;_<e.stops.length;_++){var m=e.stops[_],g=m[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},f.push(g)),d[g].stops.push([m[0].value,m[1]])}for(var y=[],v=0,b=f;v<b.length;v+=1){var x=b[v];y.push([d[x].zoom,t(d[x],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:sn.interpolationFactor.bind(void 0,w),zoomStops:y.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return $n({stops:y,base:e.base},n,i).evaluate(i,r)}}}if(l){var E="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:sn.interpolationFactor.bind(void 0,E),zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return r(e,n,t.zoom,i,o)}}}return{kind:"source",evaluate:function(t,s){var a=s&&s.properties?s.properties[e.property]:void 0;return void 0===a?jn(e.default,n.default):r(e,n,a,i,o)}}}(this._parameters,this._specification))};function Jn(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,s=t.styleSpec,a=[],l=zn(n);if("object"!==l)return[new At(e,n,"object expected, "+l+" found")];for(var u in n){var c=u.split(".")[0],h=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=Er;else if(i["*"])p=i["*"];else{if(!r["*"]){a.push(new At(e,n[u],'unknown property "'+u+'"'));continue}p=Er}a=a.concat(p({key:(e?e+".":e)+u,value:n[u],valueSpec:h,style:o,styleSpec:s,object:n,objectKey:u},n))}for(var d in r)i[d]||r[d].required&&void 0===r[d].default&&void 0===n[d]&&a.push(new At(e,n,'missing required property "'+d+'"'));return a}function Qn(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,s=t.arrayElementValidator||Er;if("array"!==zn(e))return[new At(o,e,"array expected, "+zn(e)+" found")];if(n.length&&e.length!==n.length)return[new At(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new At(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var a={type:n.value,values:n.values};i.$version<7&&(a.function=n.function),"object"===zn(n.value)&&(a=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(s({array:e,arrayIndex:u,value:e[u],valueSpec:a,style:r,styleSpec:i,key:o+"["+u+"]"}));return l}function tr(t){var e=t.key,n=t.value,r=t.valueSpec,i=zn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new At(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new At(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new At(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function er(t){var e,n,r,i=t.valueSpec,o=Lt(t.value.type),s={},a="categorical"!==o&&void 0===t.value.property,l=!a,u="array"===zn(t.value.stops)&&"array"===zn(t.value.stops[0])&&"object"===zn(t.value.stops[0][0]),c=Jn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new At(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(Qn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===zn(n)&&0===n.length&&e.push(new At(t.key,n,"array must have at least one stop")),e},default:function(t){return Er({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&a&&c.push(new At(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new At(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Rn(t.valueSpec)&&c.push(new At(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Nn(t.valueSpec)?c.push(new At(t.key,t.value,"property functions not supported")):a&&!Dn(t.valueSpec)&&c.push(new At(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!u||void 0!==t.value.property||c.push(new At(t.key,t.value,'"property" property is required')),c;function h(t){var e=[],o=t.value,a=t.key;if("array"!==zn(o))return[new At(a,o,"array expected, "+zn(o)+" found")];if(2!==o.length)return[new At(a,o,"array length 2 expected, length "+o.length+" found")];if(u){if("object"!==zn(o[0]))return[new At(a,o,"object expected, "+zn(o[0])+" found")];if(void 0===o[0].zoom)return[new At(a,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new At(a,o,"object stop key must have value")];if(r&&r>Lt(o[0].zoom))return[new At(a,o[0].zoom,"stop zoom values must appear in ascending order")];Lt(o[0].zoom)!==r&&(r=Lt(o[0].zoom),n=void 0,s={}),e=e.concat(Jn({key:a+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:tr,value:p}}))}else e=e.concat(p({key:a+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Hn(Nt(o[1]))?e.concat([new At(a+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Er({key:a+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function p(t,r){var a=zn(t.value),l=Lt(t.value),u=null!==t.value?t.value:r;if(e){if(a!==e)return[new At(t.key,u,a+" stop domain type must match previous stop domain type "+e)]}else e=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new At(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==o){var c="number expected, "+a+" found";return Nn(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new At(t.key,u,c)]}return"categorical"!==o||"number"!==a||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===a&&void 0!==n&&l<n?[new At(t.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===o&&l in s?[new At(t.key,u,"stop domain values must be unique")]:(s[l]=!0,[])):[new At(t.key,u,"integer expected, found "+l)]}}function nr(t){var e=("property"===t.expressionContext?Yn:Zn)(Nt(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new At(""+t.key+e.key,t.value,e.message)});var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new At(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Fe(n))return[new At(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Fe(n))return[new At(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Be(n,["zoom","feature-state"]))return[new At(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ze(n))return[new At(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function rr(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Lt(n))&&i.push(new At(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(Lt(n))&&i.push(new At(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function ir(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!ir(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Kn.deserialize=function(t){return new Kn(t._parameters,t._specification)},Kn.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var or={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sr(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};ir(t)||(t=lr(t));var e=Zn(t,or);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var n=1;n<e.length;n++)if(t(e[n]))return!0;return!1}(t)}}function ar(t,e){return t<e?-1:t>e?1:0}function lr(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?ur(t[1],t[2],"=="):"!="===n?pr(ur(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?ur(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(lr))):"all"===n?["all"].concat(t.slice(1).map(lr)):"none"===n?["all"].concat(t.slice(1).map(lr).map(pr)):"in"===n?cr(t[1],t.slice(2)):"!in"===n?pr(cr(t[1],t.slice(2))):"has"===n?hr(t[1]):"!has"===n?pr(hr(t[1])):"within"!==n||t}function ur(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function cr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(ar)]]:["filter-in-small",t,["literal",e]]}}function hr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function pr(t){return["!",t]}function dr(t){return ir(Nt(t.value))?nr(Mt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==zn(n))return[new At(r,n,"array expected, "+zn(n)+" found")];var i,o=e.styleSpec,s=[];if(n.length<1)return[new At(r,n,"filter array must have at least 1 element")];switch(s=s.concat(rr({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Lt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===Lt(n[1])&&s.push(new At(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&s.push(new At(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=zn(n[1]))&&s.push(new At(r+"[1]",n[1],"string expected, "+i+" found"));for(var a=2;a<n.length;a++)i=zn(n[a]),"$type"===Lt(n[1])?s=s.concat(rr({key:r+"["+a+"]",value:n[a],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&s.push(new At(r+"["+a+"]",n[a],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)s=s.concat(t({key:r+"["+l+"]",value:n[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=zn(n[1]),2!==n.length?s.push(new At(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&s.push(new At(r+"[1]",n[1],"string expected, "+i+" found"));break;case"within":i=zn(n[1]),2!==n.length?s.push(new At(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==i&&s.push(new At(r+"[1]",n[1],"object expected, "+i+" found"))}return s}(t)}function fr(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,s=t.objectKey,a=i[e+"_"+t.layerType];if(!a)return[];var l=s.match(/^(.*)-transition$/);if("paint"===e&&l&&a[l[1]]&&a[l[1]].transition)return Er({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var u,c=t.valueSpec||a[s];if(!c)return[new At(n,o,'unknown property "'+s+'"')];if("string"===zn(o)&&Nn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new At(n,o,'"'+s+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var h=[];return"symbol"===t.layerType&&("text-field"===s&&r&&!r.glyphs&&h.push(new At(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&Fn(Nt(o))&&"identity"===Lt(o.type)&&h.push(new At(n,o,'"text-font" does not support identity functions'))),h.concat(Er({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:s}))}function _r(t){return fr(t,"paint")}function mr(t){return fr(t,"layout")}function gr(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new At(r,n,'either "type" or "ref" is required'));var s,a=Lt(n.type),l=Lt(n.ref);if(n.id)for(var u=Lt(n.id),c=0;c<t.arrayIndex;c++){var h=i.layers[c];Lt(h.id)===u&&e.push(new At(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new At(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){Lt(t.id)===l&&(s=t)}),s?s.ref?e.push(new At(r,n.ref,"ref cannot reference another ref layer")):a=Lt(s.type):e.push(new At(r,n.ref,'ref layer "'+l+'" not found'));else if("background"!==a)if(n.source){var p=i.sources&&i.sources[n.source],d=p&&Lt(p.type);p?"vector"===d&&"raster"===a?e.push(new At(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===d&&"raster"!==a?e.push(new At(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==a?e.push(new At(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===d&&p.lineMetrics||e.push(new At(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new At(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new At(r,n.source,'source "'+n.source+'" not found'))}else e.push(new At(r,n,'missing required property "source"'));return e=e.concat(Jn({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Er({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:dr,layout:function(t){return Jn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return mr(Mt({layerType:a},t))}}})},paint:function(t){return Jn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return _r(Mt({layerType:a},t))}}})}}}))}function yr(t){var e=t.value,n=t.key,r=zn(e);return"string"!==r?[new At(n,e,"string expected, "+r+" found")]:[]}var vr={promoteId:function(t){var e=t.key,n=t.value;if("string"===zn(n))return yr({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,yr({key:e+"."+i,value:n[i]}));return r}};function br(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new At(n,e,'"type" is required')];var o,s=Lt(e.type);switch(s){case"vector":case"raster":case"raster-dem":return Jn({key:n,value:e,valueSpec:r["source_"+s.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:vr});case"geojson":if(o=Jn({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:vr}),e.cluster)for(var a in e.clusterProperties){var l=e.clusterProperties[a],u=l[0],c="string"==typeof u?[u,["accumulated"],["get",a]]:u;o.push.apply(o,nr({key:n+"."+a+".map",value:l[1],expressionContext:"cluster-map"})),o.push.apply(o,nr({key:n+"."+a+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return Jn({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Jn({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new At(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rr({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function xr(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],s=zn(e);if(void 0===e)return o;if("object"!==s)return o.concat([new At("light",e,"object expected, "+s+" found")]);for(var a in e){var l=a.match(/^(.*)-transition$/);o=o.concat(l&&r[l[1]]&&r[l[1]].transition?Er({key:a,value:e[a],valueSpec:n.transition,style:i,styleSpec:n}):r[a]?Er({key:a,value:e[a],valueSpec:r[a],style:i,styleSpec:n}):[new At(a,e[a],'unknown property "'+a+'"')])}return o}var wr={"*":function(){return[]},array:Qn,boolean:function(t){var e=t.value,n=t.key,r=zn(e);return"boolean"!==r?[new At(n,e,"boolean expected, "+r+" found")]:[]},number:tr,color:function(t){var e=t.key,n=t.value,r=zn(n);return"string"!==r?[new At(e,n,"color expected, "+r+" found")]:null===Qt(n)?[new At(e,n,'color expected, "'+n+'" found')]:[]},constants:Ot,enum:rr,filter:dr,function:er,layer:gr,object:Jn,source:br,light:xr,string:yr,formatted:function(t){return 0===yr(t).length?[]:nr(t)},resolvedImage:function(t){return 0===yr(t).length?[]:nr(t)}};function Er(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Fn(Lt(e))?er(t):n.expression&&Hn(Nt(e))?nr(t):n.type&&wr[n.type]?wr[n.type](t):Jn(Mt({},t,{valueSpec:n.type?r[n.type]:n}))}function Sr(t){var e=t.value,n=t.key,r=yr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new At(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new At(n,e,'"glyphs" url must include a "{range}" token'))),r}function Cr(t,e){void 0===e&&(e=Pt);var n=[];return n=n.concat(Er({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Sr,"*":function(){return[]}}})),t.constants&&(n=n.concat(Ot({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ir(n)}function Ir(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function kr(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Ir(t.apply(this,e))}}Cr.source=kr(br),Cr.light=kr(xr),Cr.layer=kr(gr),Cr.filter=kr(dr),Cr.paintProperty=kr(_r),Cr.layoutProperty=kr(mr);var Tr=Cr,Pr=Tr.light,Ar=Tr.paintProperty,Or=Tr.layoutProperty;function Mr(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1)t.fire(new kt(new Error(i[r].message))),n=!0;return n}var Lr=Nr;function Nr(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var s=i[3+o],a=i[3+o+1];r.push(s===a?null:i.subarray(s,a))}var l=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var u=0;u<this.d*this.d;u++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}Nr.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Nr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Nr.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Nr.prototype.query=function(t,e,n,r,i){var o=this.min,s=this.max;if(t<=o&&e<=o&&s<=n&&s<=r&&!i)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{},i),a},Nr.prototype._queryCell=function(t,e,n,r,i,o,s,a){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===s[p]){var d=4*p;(a?a(c[d+0],c[d+1],c[d+2],c[d+3]):t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1])?(s[p]=!0,o.push(u[p])):s[p]=!1}}},Nr.prototype._forEachCell=function(t,e,n,r,i,o,s,a){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),p=l;p<=c;p++)for(var d=u;d<=h;d++){var f=this.d*d+p;if((!a||a(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&i.call(this,t,e,n,r,f,o,s,a))return}},Nr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Nr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Nr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,s=0;s<t.length;s++){var a=t[s];i[3+s]=o,i.set(a,o),o+=a.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Dr=s.ImageData,Rr=s.ImageBitmap,zr={};function Fr(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),zr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var Br in Fr("Object",Object),Lr.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Lr.deserialize=function(t){return new Lr(t.buffer)},Fr("Grid",Lr),Fr("Color",te),Fr("Error",Error),Fr("ResolvedImage",ie),Fr("StylePropertyFunction",Kn),Fr("StyleExpression",Gn,{omit:["_evaluator"]}),Fr("ZoomDependentExpression",Xn),Fr("ZoomConstantExpression",Wn),Fr("CompoundExpression",ve,{omit:["_evaluate"]}),kn)kn[Br]._classRegistryKey||Fr("Expression_"+Br,kn[Br]);function jr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Vr(t){return Rr&&t instanceof Rr}function Ur(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(jr(t)||Vr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Dr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1)r.push(Ur(o[i],e));return r}if("object"==typeof t){var s=t.constructor,a=s._classRegistryKey;if(!a)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var u in t)if(t.hasOwnProperty(u)&&!(zr[a].omit.indexOf(u)>=0)){var c=t[u];l[u]=zr[a].shallow.indexOf(u)>=0?c:Ur(c,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==a&&(l.$name=a),l}throw new Error("can't serialize object of type "+typeof t)}function $r(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||jr(t)||Vr(t)||ArrayBuffer.isView(t)||t instanceof Dr)return t;if(Array.isArray(t))return t.map($r);if("object"==typeof t){var e=t.$name||"Object",n=zr[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var s=o[i];if("$name"!==s){var a=t[s];r[s]=zr[e].shallow.indexOf(s)>=0?a:$r(a)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var qr=function(){this.first=!0};qr.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Gr={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Hr(t){for(var e=0,n=t;e<n.length;e+=1)if(Zr(n[e].charCodeAt(0)))return!0;return!1}function Zr(t){return!(746!==t&&747!==t&&(t<4352||!(Gr["Bopomofo Extended"](t)||Gr.Bopomofo(t)||Gr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Gr["CJK Compatibility Ideographs"](t)||Gr["CJK Compatibility"](t)||Gr["CJK Radicals Supplement"](t)||Gr["CJK Strokes"](t)||!(!Gr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Gr["CJK Unified Ideographs Extension A"](t)||Gr["CJK Unified Ideographs"](t)||Gr["Enclosed CJK Letters and Months"](t)||Gr["Hangul Compatibility Jamo"](t)||Gr["Hangul Jamo Extended-A"](t)||Gr["Hangul Jamo Extended-B"](t)||Gr["Hangul Jamo"](t)||Gr["Hangul Syllables"](t)||Gr.Hiragana(t)||Gr["Ideographic Description Characters"](t)||Gr.Kanbun(t)||Gr["Kangxi Radicals"](t)||Gr["Katakana Phonetic Extensions"](t)||Gr.Katakana(t)&&12540!==t||!(!Gr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Gr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Gr["Unified Canadian Aboriginal Syllabics"](t)||Gr["Unified Canadian Aboriginal Syllabics Extended"](t)||Gr["Vertical Forms"](t)||Gr["Yijing Hexagram Symbols"](t)||Gr["Yi Syllables"](t)||Gr["Yi Radicals"](t))))}function Wr(t){return!(Zr(t)||function(t){return!!(Gr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Gr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Gr["Letterlike Symbols"](t)||Gr["Number Forms"](t)||Gr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Gr["Control Pictures"](t)&&9251!==t||Gr["Optical Character Recognition"](t)||Gr["Enclosed Alphanumerics"](t)||Gr["Geometric Shapes"](t)||Gr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Gr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Gr["CJK Symbols and Punctuation"](t)||Gr.Katakana(t)||Gr["Private Use Area"](t)||Gr["CJK Compatibility Forms"](t)||Gr["Small Form Variants"](t)||Gr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Xr(t){return t>=1424&&t<=2303||Gr["Arabic Presentation Forms-A"](t)||Gr["Arabic Presentation Forms-B"](t)}function Yr(t,e){return!(!e&&Xr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Gr.Khmer(t))}function Kr(t){for(var e=0,n=t;e<n.length;e+=1)if(Xr(n[e].charCodeAt(0)))return!0;return!1}var Jr=null,Qr="unavailable",ti=null,ei=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Qr="error"),Jr&&Jr(t)};function ni(){ri.fire(new It("pluginStateChange",{pluginStatus:Qr,pluginURL:ti}))}var ri=new Tt,ii=function(){return Qr},oi=function(){if("deferred"!==Qr||!ti)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Qr="loading",ni(),ti&&bt({url:ti},function(t){t?ei(t):(Qr="loaded",ni())})},si={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Qr||null!=si.applyArabicShaping},isLoading:function(){return"loading"===Qr},setState:function(t){Qr=t.pluginStatus,ti=t.pluginURL},isParsed:function(){return null!=si.applyArabicShaping&&null!=si.processBidirectionalText&&null!=si.processStyledBidirectionalText},getPluginURL:function(){return ti}},ai=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qr,this.transition={})};ai.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!Yr(r[n].charCodeAt(0),e))return!1;return!0}(t,si.isLoaded())},ai.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ai.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var li=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Fn(t))return new Kn(t,e);if(Hn(t)){var n=Yn(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=te.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};li.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},li.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var ui=function(t){this.property=t,this.value=new li(t,void 0)};ui.prototype.transitioned=function(t,e){return new hi(this.property,this.value,e,p({},t.transition,this.transition),t.now)},ui.prototype.untransitioned=function(){return new hi(this.property,this.value,null,{},0)};var ci=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};ci.prototype.getValue=function(t){return x(this._values[t].value.value)},ci.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ui(this._values[t].property)),this._values[t].value=new li(this._values[t].property,null===e?void 0:x(e))},ci.prototype.getTransition=function(t){return x(this._values[t].transition)},ci.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ui(this._values[t].property)),this._values[t].transition=x(e)||void 0},ci.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},ci.prototype.transitioned=function(t,e){for(var n=new pi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},ci.prototype.untransitioned=function(){for(var t=new pi(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var hi=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};hi.prototype.possiblyEvaluate=function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);var s=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(s))}return i};var pi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};pi.prototype.possiblyEvaluate=function(t,e,n){for(var r=new _i(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var s=o[i];r._values[s]=this._values[s].possiblyEvaluate(t,e,n)}return r},pi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var di=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};di.prototype.getValue=function(t){return x(this._values[t].value)},di.prototype.setValue=function(t,e){this._values[t]=new li(this._values[t].property,null===e?void 0:x(e))},di.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},di.prototype.possiblyEvaluate=function(t,e,n){for(var r=new _i(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var s=o[i];r._values[s]=this._values[s].possiblyEvaluate(t,e,n)}return r};var fi=function(t,e,n){this.property=t,this.value=e,this.parameters=n};fi.prototype.isConstant=function(){return"constant"===this.value.kind},fi.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},fi.prototype.evaluate=function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)};var _i=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};_i.prototype.get=function(t){return this._values[t]};var mi=function(t){this.specification=t};mi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},mi.prototype.interpolate=function(t,e,n){var r=Ge[this.specification.type];return r?r(t,e,n):t};var gi=function(t,e){this.specification=t,this.overrides=e};gi.prototype.possiblyEvaluate=function(t,e,n,r){return new fi(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)},gi.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new fi(this,{kind:"constant",value:void 0},t.parameters);var r=Ge[this.specification.type];return r?new fi(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},gi.prototype.evaluate=function(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)};var yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0===t.value)return new fi(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,s=this._calculate(o,o,o,e);return new fi(this,{kind:"constant",value:s},e)}if("camera"===t.expression.kind){var a=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new fi(this,{kind:"constant",value:a},e)}return new fi(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r,i,o){if("source"===t.kind){var s=t.evaluate(e,n,r,i,o);return this._calculate(s,s,s,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(gi),vi=function(t){this.specification=t};vi.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new ai(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ai(Math.floor(e.zoom),e)),t.expression.evaluate(new ai(Math.floor(e.zoom+1),e)),e)}},vi.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},vi.prototype.interpolate=function(t){return t};var bi=function(t){this.specification=t};bi.prototype.possiblyEvaluate=function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)},bi.prototype.interpolate=function(){return!1};var xi=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new li(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new ui(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Fr("DataDrivenProperty",gi),Fr("DataConstantProperty",mi),Fr("CrossFadedDataDrivenProperty",yi),Fr("CrossFadedProperty",vi),Fr("ColorRampProperty",bi);var wi=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new di(n.layout)),n.paint)){for(var r in this._transitionablePaint=new ci(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new _i(n.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(Or,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return y(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Ar,"layers."+this.id+".paint."+t,t,e,n))return!1;if(y(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),s=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var a=this._transitionablePaint._values[t].value;return a.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(t,s,a)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),b(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Mr(this,t.call(Tr,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:Pt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof fi&&Nn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Tt),Ei={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Si=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ci=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ii(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i=Ei[t.type].BYTES_PER_ELEMENT,o=n=ki(n,Math.max(e,i)),s=t.components||1;return r=Math.max(r,i),n+=i*s,{name:t.name,type:t.type,components:s,offset:o}}),size:ki(n,Math.max(r,e)),alignment:e}}function ki(t,e){return Math.ceil(t/e)*e}Ci.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Ci.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Ci.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ci.prototype.clear=function(){this.length=0},Ci.prototype.resize=function(t){this.reserve(t),this.length=t},Ci.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Ci.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(Ci);Ti.prototype.bytesPerElement=4,Fr("StructArrayLayout2i4",Ti);var Pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(Ci);Pi.prototype.bytesPerElement=8,Fr("StructArrayLayout4i8",Pi);var Ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,s){var a=6*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,this.int16[a+4]=o,this.int16[a+5]=s,t},e}(Ci);Ai.prototype.bytesPerElement=12,Fr("StructArrayLayout2i4i12",Ai);var Oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,s){var a=4*t,l=8*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=s,t},e}(Ci);Oi.prototype.bytesPerElement=8,Fr("StructArrayLayout2i4ub8",Oi);var Mi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(Ci);Mi.prototype.bytesPerElement=8,Fr("StructArrayLayout2f8",Mi);var Li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,s,a,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,s,a,l,u)},e.prototype.emplace=function(t,e,n,r,i,o,s,a,l,u,c){var h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=s,this.uint16[h+6]=a,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,t},e}(Ci);Li.prototype.bytesPerElement=20,Fr("StructArrayLayout10ui20",Li);var Ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,s,a,l,u,c,h){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,s,a,l,u,c,h)},e.prototype.emplace=function(t,e,n,r,i,o,s,a,l,u,c,h,p){var d=12*t;return this.int16[d+0]=e,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.uint16[d+4]=o,this.uint16[d+5]=s,this.uint16[d+6]=a,this.uint16[d+7]=l,this.int16[d+8]=u,this.int16[d+9]=c,this.int16[d+10]=h,this.int16[d+11]=p,t},e}(Ci);Ni.prototype.bytesPerElement=24,Fr("StructArrayLayout4i4ui4i24",Ni);var Di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(Ci);Di.prototype.bytesPerElement=12,Fr("StructArrayLayout3f12",Di);var Ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Ci);Ri.prototype.bytesPerElement=4,Fr("StructArrayLayout1ul4",Ri);var zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,s,a,l){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,s,a,l)},e.prototype.emplace=function(t,e,n,r,i,o,s,a,l,u){var c=10*t,h=5*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=r,this.int16[c+3]=i,this.int16[c+4]=o,this.int16[c+5]=s,this.uint32[h+3]=a,this.uint16[c+8]=l,this.uint16[c+9]=u,t},e}(Ci);zi.prototype.bytesPerElement=20,Fr("StructArrayLayout6i1ul2ui20",zi);var Fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,s){var a=6*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,this.int16[a+4]=o,this.int16[a+5]=s,t},e}(Ci);Fi.prototype.bytesPerElement=12,Fr("StructArrayLayout2i2i2i12",Fi);var Bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)},e.prototype.emplace=function(t,e,n,r,i,o){var s=4*t,a=8*t;return this.float32[s+0]=e,this.float32[s+1]=n,this.float32[s+2]=r,this.int16[a+6]=i,this.int16[a+7]=o,t},e}(Ci);Bi.prototype.bytesPerElement=16,Fr("StructArrayLayout2f1f2i16",Bi);var ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=12*t,s=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[s+1]=r,this.float32[s+2]=i,t},e}(Ci);ji.prototype.bytesPerElement=12,Fr("StructArrayLayout2ub2f12",ji);var Vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(Ci);Vi.prototype.bytesPerElement=6,Fr("StructArrayLayout3ui6",Vi);var Ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_,m){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_,m)},e.prototype.emplace=function(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_,m,g){var y=24*t,v=12*t,b=48*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[v+2]=o,this.uint32[v+3]=s,this.uint32[v+4]=a,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[v+7]=h,this.float32[v+8]=p,this.uint8[b+36]=d,this.uint8[b+37]=f,this.uint8[b+38]=_,this.uint32[v+10]=m,this.int16[y+22]=g,t},e}(Ci);Ui.prototype.bytesPerElement=48,Fr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ui);var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_,m,g,y,v,b,x,w,E,S,C,I,k){var T=this.length;return this.resize(T+1),this.emplace(T,t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_,m,g,y,v,b,x,w,E,S,C,I,k)},e.prototype.emplace=function(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_,m,g,y,v,b,x,w,E,S,C,I,k,T){var P=34*t,A=17*t;return this.int16[P+0]=e,this.int16[P+1]=n,this.int16[P+2]=r,this.int16[P+3]=i,this.int16[P+4]=o,this.int16[P+5]=s,this.int16[P+6]=a,this.int16[P+7]=l,this.uint16[P+8]=u,this.uint16[P+9]=c,this.uint16[P+10]=h,this.uint16[P+11]=p,this.uint16[P+12]=d,this.uint16[P+13]=f,this.uint16[P+14]=_,this.uint16[P+15]=m,this.uint16[P+16]=g,this.uint16[P+17]=y,this.uint16[P+18]=v,this.uint16[P+19]=b,this.uint16[P+20]=x,this.uint16[P+21]=w,this.uint16[P+22]=E,this.uint32[A+12]=S,this.float32[A+13]=C,this.float32[A+14]=I,this.float32[A+15]=k,this.float32[A+16]=T,t},e}(Ci);$i.prototype.bytesPerElement=68,Fr("StructArrayLayout8i15ui1ul4f68",$i);var qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Ci);qi.prototype.bytesPerElement=4,Fr("StructArrayLayout1f4",qi);var Gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(Ci);Gi.prototype.bytesPerElement=6,Fr("StructArrayLayout3i6",Gi);var Hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t},e}(Ci);Hi.prototype.bytesPerElement=8,Fr("StructArrayLayout1ul2ui8",Hi);var Zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(Ci);Zi.prototype.bytesPerElement=4,Fr("StructArrayLayout2ui4",Zi);var Wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Ci);Wi.prototype.bytesPerElement=2,Fr("StructArrayLayout1ui2",Wi);var Xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(Ci);Xi.prototype.bytesPerElement=16,Fr("StructArrayLayout4f16",Xi);var Yi=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(Si);Yi.prototype.size=20;var Ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Yi(this,t)},e}(zi);Fr("CollisionBoxArray",Ki);var Ji=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(Si);Ji.prototype.size=48;var Qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Ji(this,t)},e}(Ui);Fr("PlacedSymbolArray",Qi);var to=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,n),e}(Si);to.prototype.size=68;var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new to(this,t)},e}($i);Fr("SymbolInstanceArray",eo);var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(qi);Fr("GlyphOffsetArray",no);var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Gi);Fr("SymbolLineVertexArray",ro);var io=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(Si);io.prototype.size=8;var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new io(this,t)},e}(Hi);Fr("FeatureIndexArray",oo);var so=Ii([{name:"a_pos",components:2,type:"Int16"}],4).members,ao=function(t){void 0===t&&(t=[]),this.segments=t};function lo(t,e){return 256*(t=c(Math.floor(t),0,255))+c(Math.floor(e),0,255)}ao.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>ao.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+ao.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>ao.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},ao.prototype.get=function(){return this.segments},ao.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},ao.simpleSegment=function(t,e,n,r){return new ao([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},ao.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Fr("SegmentVector",ao);var uo=Ii([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),co=e(function(t){t.exports=function(t,e){var n,r,i,o,s,a,l,u;for(r=t.length-(n=3&t.length),i=e,s=3432918353,a=461845907,u=0;u<r;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<15|l>>>17))*a+(((l>>>16)*a&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),ho=e(function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),po=co,fo=ho;po.murmur3=co,po.murmur2=fo;var _o=function(){this.ids=[],this.positions=[],this.indexed=!1};_o.prototype.add=function(t,e,n,r){this.ids.push(go(t)),this.positions.push(e,n,r)},_o.prototype.getPositions=function(t){for(var e=go(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},_o.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){for(;r<i;){for(var o=e[r+i>>1],s=r-1,a=i+1;;){do{s++}while(e[s]<o);do{a--}while(e[a]>o);if(s>=a)break;yo(e,s,a),yo(n,3*s,3*a),yo(n,3*s+1,3*a+1),yo(n,3*s+2,3*a+2)}a-r<i-a?(t(e,n,r,a),r=a+1):(t(e,n,a+1,i),i=a)}}(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}},_o.deserialize=function(t){var e=new _o;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var mo=Math.pow(2,53)-1;function go(t){var e=+t;return!isNaN(e)&&e<=mo?e:po(String(t))}function yo(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Fr("FeaturePositionMap",_o);var vo=function(t,e){this.gl=t.gl,this.location=e},bo=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(vo),xo=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(vo),wo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(vo),Eo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(vo),So=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(vo),Co=function(t){function e(e,n){t.call(this,e,n),this.current=te.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(vo),Io=new Float32Array(16),ko=function(t){function e(e,n){t.call(this,e,n),this.current=Io}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(vo);function To(t){return[lo(255*t.r,255*t.g),lo(255*t.b,255*t.a)]}var Po=function(t,e,n){this.value=t,this.uniformNames=e.map(function(t){return"u_"+t}),this.type=n};Po.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},Po.prototype.getBinding=function(t,e,n){return"color"===this.type?new Co(t,e):new xo(t,e)};var Ao=function(t,e){this.uniformNames=e.map(function(t){return"u_"+t}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ao.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Ao.prototype.setUniform=function(t,e,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)},Ao.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new So(t,e):new xo(t,e)};var Oo=function(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};Oo.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.paintVertexArray.length,s=this.expression.evaluate(new ai(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,s)},Oo.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)},Oo.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var r=To(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Oo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Oo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Mo=function(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map(function(t){return"u_"+t+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new o};Mo.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.expression.evaluate(new ai(this.zoom),e,{},r,[],i),s=this.expression.evaluate(new ai(this.zoom+1),e,{},r,[],i),a=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(a,t,o,s)},Mo.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)},Mo.prototype._setPaintValue=function(t,e,n,r){if("color"===this.type)for(var i=To(n),o=To(r),s=t;s<e;s++)this.paintVertexArray.emplace(s,i[0],i[1],o[0],o[1]);else{for(var a=t;a<e;a++)this.paintVertexArray.emplace(a,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},Mo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Mo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Mo.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=c(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)},Mo.prototype.getBinding=function(t,e,n){return new xo(t,e)};var Lo=function(t,e,n,r,i,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};Lo.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)},Lo.prototype.updatePaintArray=function(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)},Lo.prototype._setPaintValues=function(t,e,n,r){if(r&&n){var i=r[n.min],o=r[n.mid],s=r[n.max];if(i&&o&&s)for(var a=t;a<e;a++)this.zoomInPaintVertexArray.emplace(a,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(a,o.tl[0],o.tl[1],o.br[0],o.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],o.pixelRatio,s.pixelRatio)}},Lo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,uo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,uo.members,this.expression.isStateDependent))},Lo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var No=function(t,e,n){this.binders={},this._buffers=[];var r=[];for(var i in t.paint._values)if(n(i)){var o=t.paint.get(i);if(o instanceof fi&&Nn(o.property.specification)){var s=Ro(i,t.type),a=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],h="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===a.kind)this.binders[i]=h?new Ao(a.value,s):new Po(a.value,s,l),r.push("/u_"+i);else if("source"===a.kind||h){var p=zo(i,l,"source");this.binders[i]=h?new Lo(a,l,u,e,p,t.id):new Oo(a,s,l,p),r.push("/a_"+i)}else{var d=zo(i,l,"composite");this.binders[i]=new Mo(a,s,l,u,e,d),r.push("/z_"+i)}}}this.cacheKey=r.sort().join("")};No.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Oo||e instanceof Mo?e.maxValue:0},No.prototype.populatePaintArrays=function(t,e,n,r,i){for(var o in this.binders){var s=this.binders[o];(s instanceof Oo||s instanceof Mo||s instanceof Lo)&&s.populatePaintArray(t,e,n,r,i)}},No.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var r=this.binders[n];r instanceof Ao&&r.setConstantPatternPositions(t,e)}},No.prototype.updatePaintArrays=function(t,e,n,r,i){var o=!1;for(var s in t)for(var a=0,l=e.getPositions(s);a<l.length;a+=1){var u=l[a],c=n.feature(u.index);for(var h in this.binders){var p=this.binders[h];if((p instanceof Oo||p instanceof Mo||p instanceof Lo)&&!0===p.expression.isStateDependent){var d=r.paint.get(h);p.expression=d.value,p.updatePaintArray(u.start,u.end,c,t[s],i),o=!0}}}return o},No.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof Po||n instanceof Ao)&&t.push.apply(t,n.uniformNames.map(function(t){return"#define HAS_UNIFORM_"+t}))}return t},No.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof Oo||n instanceof Mo)for(var r=0;r<n.paintVertexAttributes.length;r++)t.push(n.paintVertexAttributes[r].name);else if(n instanceof Lo)for(var i=0;i<uo.members.length;i++)t.push(uo.members[i].name)}return t},No.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof Po||n instanceof Ao||n instanceof Mo)for(var r=0,i=n.uniformNames;r<i.length;r+=1)t.push(i[r])}return t},No.prototype.getPaintVertexBuffers=function(){return this._buffers},No.prototype.getUniforms=function(t,e){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Po||i instanceof Ao||i instanceof Mo)for(var o=0,s=i.uniformNames;o<s.length;o+=1){var a=s[o];if(e[a]){var l=i.getBinding(t,e[a],a);n.push({name:a,property:r,binding:l})}}}return n},No.prototype.setUniforms=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1){var s=o[i],a=s.name,l=s.property;this.binders[l].setUniform(s.binding,r,n.get(l),a)}},No.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof Lo){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Oo||n instanceof Mo)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},No.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof Oo||n instanceof Mo||n instanceof Lo)&&n.upload(t)}this.updatePaintBuffers()},No.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Oo||e instanceof Mo||e instanceof Lo)&&e.destroy()}};var Do=function(t,e,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.programConfigurations[o.id]=new No(o,e,n)}this.needsUpload=!1,this._featureMap=new _o,this._bufferOffset=0};function Ro(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function zo(t,e,n){var r={color:{source:Mi,composite:Xi},number:{source:qi,composite:Mi}},i=function(t){return{"line-pattern":{source:Li,composite:Li},"fill-pattern":{source:Li,composite:Li},"fill-extrusion-pattern":{source:Li,composite:Li}}[t]}(t);return i&&i[n]||r[e][n]}Do.prototype.populatePaintArrays=function(t,e,n,r,i,o){for(var s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Do.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var s=o[i];this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(t,this._featureMap,e,s,r)||this.needsUpload}},Do.prototype.get=function(t){return this.programConfigurations[t]},Do.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Do.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Fr("ConstantBinder",Po),Fr("CrossFadedConstantBinder",Ao),Fr("SourceExpressionBinder",Oo),Fr("CrossFadedCompositeBinder",Lo),Fr("CompositeExpressionBinder",Mo),Fr("ProgramConfiguration",No,{omit:["_buffers"]}),Fr("ProgramConfigurationSet",Do);var Fo=Math.pow(2,14)-1,Bo=-Fo-1;function jo(t){for(var e=8192/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var s=i[o],a=Math.round(s.x*e),l=Math.round(s.y*e);s.x=c(a,Bo,Fo),s.y=c(l,Bo,Fo),(a<s.x||a>s.x+1||l<s.y||l>s.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Vo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?jo(t):[]}}function Uo(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var $o=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ti,this.indexArray=new Vi,this.segments=new ao,this.programConfigurations=new Do(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function qo(t,e){for(var n=0;n<t.length;n++)if(Qo(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(Qo(t,e[r]))return!0;return!!Wo(t,e)}function Go(t,e,n){return!!Qo(t,e)||!!Yo(e,t,n)}function Ho(t,e){if(1===t.length)return Jo(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(Qo(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(Jo(e,t[o]))return!0;for(var s=0;s<e.length;s++)if(Wo(t,e[s]))return!0;return!1}function Zo(t,e,n){if(t.length>1){if(Wo(t,e))return!0;for(var r=0;r<e.length;r++)if(Yo(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(Yo(t[i],e,n))return!0;return!1}function Wo(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(Xo(r,i,e[o],e[o+1]))return!0;return!1}function Xo(t,e,n,r){return S(t,n,r)!==S(e,n,r)&&S(t,e,n)!==S(t,e,r)}function Yo(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Ko(t,e[i-1],e[i])<r)return!0;return!1}function Ko(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function Jo(t,e){for(var n,r,i,o=!1,s=0;s<t.length;s++)for(var a=0,l=(n=t[s]).length-1;a<n.length;l=a++)(r=n[a]).y>e.y!=(i=n[l]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function Qo(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],s=t[i];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}function ts(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=S(t,e,n[0]);return o!==S(t,e,n[1])||o!==S(t,e,n[2])||o!==S(t,e,n[3])}function es(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function ns(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function rs(t,e,n,r,o){if(!e[0]&&!e[1])return t;var s=i.convert(e)._mult(o);"viewport"===n&&s._rotate(-r);for(var a=[],l=0;l<t.length;l++)a.push(t[l].sub(s));return a}$o.prototype.populate=function(t,e,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var s=0,a=t;s<a.length;s+=1){var l=a[s],u=l.feature,c=l.id,h=l.index,p=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f=Vo(u,d);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),f,n)){var _=o?o.evaluate(f,{},n):void 0,m={id:c,properties:u.properties,type:u.type,sourceLayerIndex:p,index:h,geometry:d?f.geometry:jo(u),patterns:{},sortKey:_};i.push(m)}}o&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var g=0,y=i;g<y.length;g+=1){var v=y[g],b=v.geometry,x=v.index,w=v.sourceLayerIndex,E=t[x].feature;this.addFeature(v,b,x,n),e.featureIndex.insert(E,b,x,w,this.index)}},$o.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},$o.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},$o.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$o.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,so),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},$o.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},$o.prototype.addFeature=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1)for(var s=0,a=o[i];s<a.length;s+=1){var l=a[s],u=l.x,c=l.y;if(!(u<0||u>=8192||c<0||c>=8192)){var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),p=h.vertexLength;Uo(this.layoutVertexArray,u,c,-1,-1),Uo(this.layoutVertexArray,u,c,1,-1),Uo(this.layoutVertexArray,u,c,1,1),Uo(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),h.vertexLength+=4,h.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)},Fr("CircleBucket",$o,{omit:["layers"]});var is=new xi({"circle-sort-key":new gi(Pt.layout_circle["circle-sort-key"])}),os={paint:new xi({"circle-radius":new gi(Pt.paint_circle["circle-radius"]),"circle-color":new gi(Pt.paint_circle["circle-color"]),"circle-blur":new gi(Pt.paint_circle["circle-blur"]),"circle-opacity":new gi(Pt.paint_circle["circle-opacity"]),"circle-translate":new mi(Pt.paint_circle["circle-translate"]),"circle-translate-anchor":new mi(Pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mi(Pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mi(Pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gi(Pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gi(Pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gi(Pt.paint_circle["circle-stroke-opacity"])}),layout:is},ss="undefined"!=typeof Float32Array?Float32Array:Array;function as(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ls(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],_=e[12],m=e[13],g=e[14],y=e[15],v=n[0],b=n[1],x=n[2],w=n[3];return t[0]=v*r+b*a+x*h+w*_,t[1]=v*i+b*l+x*p+w*m,t[2]=v*o+b*u+x*d+w*g,t[3]=v*s+b*c+x*f+w*y,t[4]=(v=n[4])*r+(b=n[5])*a+(x=n[6])*h+(w=n[7])*_,t[5]=v*i+b*l+x*p+w*m,t[6]=v*o+b*u+x*d+w*g,t[7]=v*s+b*c+x*f+w*y,t[8]=(v=n[8])*r+(b=n[9])*a+(x=n[10])*h+(w=n[11])*_,t[9]=v*i+b*l+x*p+w*m,t[10]=v*o+b*u+x*d+w*g,t[11]=v*s+b*c+x*f+w*y,t[12]=(v=n[12])*r+(b=n[13])*a+(x=n[14])*h+(w=n[15])*_,t[13]=v*i+b*l+x*p+w*m,t[14]=v*o+b*u+x*d+w*g,t[15]=v*s+b*c+x*f+w*y,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)});var us,cs=ls;function hs(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}us=new ss(3),ss!=Float32Array&&(us[0]=0,us[1]=0,us[2]=0),function(){var t=new ss(4);ss!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var ps=(function(){var t=new ss(2);ss!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,os)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new $o(t)},e.prototype.queryRadius=function(t){var e=t;return es("circle-radius",this,e)+es("circle-stroke-width",this,e)+ns(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,s,a){for(var l=rs(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,s),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?l:function(t,e){return t.map(function(t){return ds(t,e)})}(l,a),p=c?u*s:u,d=0,f=r;d<f.length;d+=1)for(var _=0,m=f[d];_<m.length;_+=1){var g=m[_],y=c?g:ds(g,a),v=p,b=hs([],[g.x,g.y,0,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=o.cameraToCenterDistance/b[3]),Go(h,y,v))return!0}return!1},e}(wi));function ds(t,e){var n=hs([],[t.x,t.y,0,1],e);return new i(n[0]/n[3],n[1]/n[3])}var fs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}($o);function _s(t,e,n,r){var i=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function ms(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=_s({},{width:r,height:i},n);gs(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function gs(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var s=t.data,a=e.data,l=0;l<i.height;l++)for(var u=((n.y+l)*t.width+n.x)*o,c=((r.y+l)*e.width+r.x)*o,h=0;h<i.width*o;h++)a[c+h]=s[u+h];return e}Fr("HeatmapBucket",fs,{omit:["layers"]});var ys=function(t,e){_s(this,t,1,e)};ys.prototype.resize=function(t){ms(this,t,1)},ys.prototype.clone=function(){return new ys({width:this.width,height:this.height},new Uint8Array(this.data))},ys.copy=function(t,e,n,r,i){gs(t,e,n,r,i,1)};var vs=function(t,e){_s(this,t,4,e)};vs.prototype.resize=function(t){ms(this,t,4)},vs.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},vs.prototype.clone=function(){return new vs({width:this.width,height:this.height},new Uint8Array(this.data))},vs.copy=function(t,e,n,r,i){gs(t,e,n,r,i,4)},Fr("AlphaImage",ys),Fr("RGBAImage",vs);var bs={paint:new xi({"heatmap-radius":new gi(Pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gi(Pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mi(Pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bi(Pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mi(Pt.paint_heatmap["heatmap-opacity"])})};function xs(t){var e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new vs({width:n,height:r}),o=function(n,r,o){e[t.evaluationKey]=o;var s=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*s.r/s.a),i.data[n+r+1]=Math.floor(255*s.g/s.a),i.data[n+r+2]=Math.floor(255*s.b/s.a),i.data[n+r+3]=Math.floor(255*s.a)};if(t.clips)for(var s=0,a=0;s<r;++s,a+=4*n)for(var l=0,u=0;l<n;l++,u+=4){var c=l/(n-1),h=t.clips[s];o(a,u,h.start*(1-c)+h.end*c)}else for(var p=0,d=0;p<n;p++,d+=4)o(0,d,p/(n-1));return i}var ws=function(t){function e(e){t.call(this,e,bs),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new fs(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=xs({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(wi),Es={paint:new xi({"hillshade-illumination-direction":new mi(Pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mi(Pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mi(Pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mi(Pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mi(Pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mi(Pt.paint_hillshade["hillshade-accent-color"])})},Ss=function(t){function e(e){t.call(this,e,Es)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(wi),Cs=Ii([{name:"a_pos",components:2,type:"Int16"}],4).members,Is=Ts,ks=Ts;function Ts(t,e,n){n=n||2;var r,i,o,s,a,l,u,c=e&&e.length,h=c?e[0]*n:t.length,p=Ps(t,0,h,n,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Ps(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(js(s));for(a.sort(Rs),i=0;i<a.length;i++)zs(a[i],n),n=As(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var f=n;f<h;f+=n)(a=t[f])<r&&(r=a),(l=t[f+1])<i&&(i=l),a>o&&(o=a),l>s&&(s=l);u=0!==(u=Math.max(o-r,s-i))?1/u:0}return Os(p,d,n,r,i,u),d}function Ps(t,e,n,r,i){var o,s;if(i===Qs(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Ys(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Ys(o,t[o],t[o+1],s);return s&&qs(s,s.next)&&(Ks(s),s=s.next),s}function As(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!qs(r,r.next)&&0!==$s(r.prev,r,r.next))r=r.next;else{if(Ks(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Os(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Bs(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ);e++);for(l=u;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}(t,r,i,o);for(var a,l,u=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?Ls(t,r,i,o):Ms(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),Ks(t),t=l.next,u=l.next;else if((t=l)===u){s?1===s?Os(t=Ns(As(t),e,n),e,n,r,i,o,2):2===s&&Ds(t,e,n,r,i,o):Os(As(t),e,n,r,i,o,1);break}}}function Ms(t){var e=t.prev,n=t,r=t.next;if($s(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Vs(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&$s(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ls(t,e,n,r){var i=t.prev,o=t,s=t.next;if($s(i,o,s)>=0)return!1;for(var a=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,u=Bs(i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,e,n,r),c=Bs(a,l,e,n,r),h=t.prevZ,p=t.nextZ;h&&h.z>=u&&p&&p.z<=c;){if(h!==t.prev&&h!==t.next&&Vs(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&$s(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&Vs(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&$s(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&Vs(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&$s(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&Vs(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&$s(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ns(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!qs(i,o)&&Gs(i,r,r.next,o)&&Ws(i,o)&&Ws(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Ks(r),Ks(r.next),r=t=o),r=r.next}while(r!==t);return As(r)}function Ds(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Us(s,a)){var l=Xs(s,a);return s=As(s,s.next),l=As(l,l.next),Os(s,e,n,r,i,o),void Os(l,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function Rs(t,e){return t.x-e.x}function zs(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n;var l,u=n,c=n.x,h=n.y,p=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Vs(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),Ws(r,t)&&(l<p||l===p&&(r.x>n.x||r.x===n.x&&Fs(n,r)))&&(n=r,p=l)),r=r.next}while(r!==u);return n}(t,e)){var n=Xs(e,t);As(e,e.next),As(n,n.next)}}function Fs(t,e){return $s(t.prev,t,e.prev)<0&&$s(e.next,t,t.next)<0}function Bs(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function js(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Vs(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function Us(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Gs(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Ws(t,e)&&Ws(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&($s(t.prev,t,e.prev)||$s(t,e.prev,e))||qs(t,e)&&$s(t.prev,t,t.next)>0&&$s(e.prev,e,e.next)>0)}function $s(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function qs(t,e){return t.x===e.x&&t.y===e.y}function Gs(t,e,n,r){var i=Zs($s(t,e,n)),o=Zs($s(t,e,r)),s=Zs($s(n,r,t)),a=Zs($s(n,r,e));return i!==o&&s!==a||!(0!==i||!Hs(t,n,e))||!(0!==o||!Hs(t,r,e))||!(0!==s||!Hs(n,t,r))||!(0!==a||!Hs(n,e,r))}function Hs(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Zs(t){return t>0?1:t<0?-1:0}function Ws(t,e){return $s(t.prev,t,t.next)<0?$s(t,e,t.next)>=0&&$s(t,t.prev,e)>=0:$s(t,e,t.prev)<0||$s(t,t.next,e)<0}function Xs(t,e){var n=new Js(t.i,t.x,t.y),r=new Js(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ys(t,e,n,r){var i=new Js(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ks(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Js(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Qs(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function ta(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var s=i-r+1,a=n-r+1,l=Math.log(s),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(s-u)/s)*(a-s/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-a*u/s+c)),Math.min(i,Math.floor(n+(s-a)*u/s+c)),o)}var h=e[n],p=r,d=i;for(ea(e,r,n),o(e[i],h)>0&&ea(e,r,i);p<d;){for(ea(e,p,d),p++,d--;o(e[p],h)<0;)p++;for(;o(e[d],h)>0;)d--}0===o(e[r],h)?ea(e,r,d):ea(e,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}}(t,e,n||0,r||t.length-1,i||na)}function ea(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function na(t,e){return t<e?-1:t>e?1:0}function ra(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],s=0;s<n;s++){var a=C(t[s]);0!==a&&(t[s].area=Math.abs(a),void 0===i&&(i=a<0),i===a<0?(r&&o.push(r),r=[t[s]]):r.push(t[s]))}if(r&&o.push(r),e>1)for(var l=0;l<o.length;l++)o[l].length<=e||(ta(o[l],e,1,o[l].length-1,ia),o[l]=o[l].slice(0,e));return o}function ia(t,e){return e.area-t.area}function oa(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,s=e;o<s.length;o+=1){var a=s[o].paint.get(t+"-pattern");a.isConstant()||(i=!0);var l=a.constantOr(null);l&&(i=!0,r[l.to]=!0,r[l.from]=!0)}return i}function sa(t,e,n,r,i){for(var o=i.patternDependencies,s=0,a=e;s<a.length;s+=1){var l=a[s],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:r-1},n,{},i.availableImages),h=u.evaluate({zoom:r},n,{},i.availableImages),p=u.evaluate({zoom:r+1},n,{},i.availableImages);h=h&&h.name?h.name:h,p=p&&p.name?p.name:p,o[c=c&&c.name?c.name:c]=!0,o[h]=!0,o[p]=!0,n.patterns[l.id]={min:c,mid:h,max:p}}}return n}Ts.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(Qs(t,0,i?e[0]*n:t.length,n));if(i)for(var s=0,a=e.length;s<a;s++)o-=Math.abs(Qs(t,e[s]*n,s<a-1?e[s+1]*n:t.length,n));var l=0;for(s=0;s<r.length;s+=3){var u=r[s]*n,c=r[s+1]*n,h=r[s+2]*n;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Ts.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Is.default=ks;var aa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ti,this.indexArray=new Vi,this.indexArray2=new Zi,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new ao,this.segments2=new ao,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};aa.prototype.populate=function(t,e,n){this.hasPattern=oa("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,s=t;o<s.length;o+=1){var a=s[o],l=a.feature,u=a.id,c=a.index,h=a.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=Vo(l,p);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),d,n)){var f=r?r.evaluate(d,{},n,e.availableImages):void 0,_={id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:p?d.geometry:jo(l),patterns:{},sortKey:f};i.push(_)}}r&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var m=0,g=i;m<g.length;m+=1){var y=g[m],v=y.geometry,b=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var w=sa("fill",this.layers,y,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(y,v,b,n,{});e.featureIndex.insert(t[b].feature,v,b,x,this.index)}},aa.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},aa.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},aa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},aa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},aa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Cs),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},aa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},aa.prototype.addFeature=function(t,e,n,r,i){for(var o=0,s=ra(e,500);o<s.length;o+=1){for(var a=s[o],l=0,u=0,c=a;u<c.length;u+=1)l+=c[u].length;for(var h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),p=h.vertexLength,d=[],f=[],_=0,m=a;_<m.length;_+=1){var g=m[_];if(0!==g.length){g!==a[0]&&f.push(d.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(v+g.length-1,v),d.push(g[0].x),d.push(g[0].y);for(var b=1;b<g.length;b++)this.layoutVertexArray.emplaceBack(g[b].x,g[b].y),this.indexArray2.emplaceBack(v+b-1,v+b),d.push(g[b].x),d.push(g[b].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}for(var x=Is(d,f),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(p+x[w],p+x[w+1],p+x[w+2]);h.vertexLength+=l,h.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Fr("FillBucket",aa,{omit:["layers","patternFeatures"]});var la=new xi({"fill-sort-key":new gi(Pt.layout_fill["fill-sort-key"])}),ua={paint:new xi({"fill-antialias":new mi(Pt.paint_fill["fill-antialias"]),"fill-opacity":new gi(Pt.paint_fill["fill-opacity"]),"fill-color":new gi(Pt.paint_fill["fill-color"]),"fill-outline-color":new gi(Pt.paint_fill["fill-outline-color"]),"fill-translate":new mi(Pt.paint_fill["fill-translate"]),"fill-translate-anchor":new mi(Pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new yi(Pt.paint_fill["fill-pattern"])}),layout:la},ca=function(t){function e(e){t.call(this,e,ua)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new aa(t)},e.prototype.queryRadius=function(){return ns(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,s){return Ho(rs(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,s),r)},e.prototype.isTileClipped=function(){return!0},e}(wi),ha=Ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,pa=da;function da(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(fa,this,e)}function fa(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function _a(t){for(var e,n,r=0,i=0,o=t.length,s=o-1;i<o;s=i++)r+=((n=t[s]).x-(e=t[i]).x)*(e.y+n.y);return r}da.types=["Unknown","Point","LineString","Polygon"],da.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,o=0,s=0,a=0,l=[];t.pos<n;){if(o<=0){var u=t.readVarint();r=7&u,o=u>>3}if(o--,1===r||2===r)s+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&l.push(e),e=[]),e.push(new i(s,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&l.push(e),l},da.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,s=1/0,a=-1/0,l=1/0,u=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<s&&(s=i),i>a&&(a=i),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[s,l,a,u]},da.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),s=this.extent*t,a=this.extent*e,l=this.loadGeometry(),u=da.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+s)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+a)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var s=_a(t[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var p={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var ma=ga;function ga(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ya,this,e),this.length=this._features.length}function ya(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function va(t,e,n){if(3===t){var r=new ma(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}ga.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new pa(this._pbf,e,this.extent,this._keys,this._values)};var ba={VectorTile:function(t,e){this.layers=t.readFields(va,{},e)},VectorTileFeature:pa,VectorTileLayer:ma},xa=ba.VectorTileFeature.types,wa=Math.pow(2,13);function Ea(t,e,n,r,i,o,s,a){t.emplaceBack(e,n,2*Math.floor(r*wa)+s,i*wa*2,o*wa*2,Math.round(a))}var Sa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ai,this.indexArray=new Vi,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new ao,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Ca(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}Sa.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=oa("fill-extrusion",this.layers,e);for(var r=0,i=t;r<i.length;r+=1){var o=i[r],s=o.feature,a=o.id,l=o.index,u=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,h=Vo(s,c);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),h,n)){var p={id:a,sourceLayerIndex:u,index:l,geometry:c?h.geometry:jo(s),properties:s.properties,type:s.type,patterns:{}};this.hasPattern?this.features.push(sa("fill-extrusion",this.layers,p,this.zoom,e)):this.addFeature(p,p.geometry,l,n,{}),e.featureIndex.insert(s,p.geometry,l,u,this.index,!0)}}},Sa.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.features;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Sa.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Sa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Sa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Sa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ha),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Sa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Sa.prototype.addFeature=function(t,e,n,r,i){for(var o=0,s=ra(e,500);o<s.length;o+=1){for(var a=s[o],l=0,u=0,c=a;u<c.length;u+=1)l+=c[u].length;for(var h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,d=a;p<d.length;p+=1){var f=d[p];if(0!==f.length&&!((M=f).every(function(t){return t.x<0})||M.every(function(t){return t.x>8192})||M.every(function(t){return t.y<0})||M.every(function(t){return t.y>8192})))for(var _=0,m=0;m<f.length;m++){var g=f[m];if(m>=1){var y=f[m-1];if(!Ca(g,y)){h.vertexLength+4>ao.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=g.sub(y)._perp()._unit(),b=y.dist(g);_+b>32768&&(_=0),Ea(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,_),Ea(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,_),Ea(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,_+=b),Ea(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,_);var x=h.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),h.vertexLength+=4,h.primitiveLength+=2}}}}if(h.vertexLength+l>ao.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===xa[t.type]){for(var w=[],E=[],S=h.vertexLength,C=0,I=a;C<I.length;C+=1){var k=I[C];if(0!==k.length){k!==a[0]&&E.push(w.length/2);for(var T=0;T<k.length;T++){var P=k[T];Ea(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),w.push(P.x),w.push(P.y)}}}for(var A=Is(w,E),O=0;O<A.length;O+=3)this.indexArray.emplaceBack(S+A[O],S+A[O+2],S+A[O+1]);h.primitiveLength+=A.length/3,h.vertexLength+=l}}var M;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Fr("FillExtrusionBucket",Sa,{omit:["layers","features"]});var Ia={paint:new xi({"fill-extrusion-opacity":new mi(Pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gi(Pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mi(Pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mi(Pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yi(Pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gi(Pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gi(Pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mi(Pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ka=function(t){function e(e){t.call(this,e,Ia)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Sa(t)},e.prototype.queryRadius=function(){return ns(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,s,a,l){var u=rs(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,a),c=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),p=function(t,e,n,r){for(var o=[],s=0,a=t;s<a.length;s+=1){var l=a[s],u=[l.x,l.y,0,1];hs(u,u,e),o.push(new i(u[0]/u[3],u[1]/u[3]))}return o}(u,l),d=function(t,e,n,r){for(var o=[],s=[],a=r[8]*e,l=r[9]*e,u=r[10]*e,c=r[11]*e,h=r[8]*n,p=r[9]*n,d=r[10]*n,f=r[11]*n,_=0,m=t;_<m.length;_+=1){for(var g=[],y=[],v=0,b=m[_];v<b.length;v+=1){var x=b[v],w=x.x,E=x.y,S=r[0]*w+r[4]*E+r[12],C=r[1]*w+r[5]*E+r[13],I=r[2]*w+r[6]*E+r[14],k=r[3]*w+r[7]*E+r[15],T=I+u,P=k+c,A=S+h,O=C+p,M=I+d,L=k+f,N=new i((S+a)/P,(C+l)/P);N.z=T/P,g.push(N);var D=new i(A/L,O/L);D.z=M/L,y.push(D)}o.push(g),s.push(y)}return[o,s]}(r,h,c,l);return function(t,e,n){var r=1/0;Ho(n,e)&&(r=Pa(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],s=t[i],a=0;a<o.length-1;a++){var l=o[a],u=[l,o[a+1],s[a+1],s[a],l];qo(n,u)&&(r=Math.min(r,Pa(n,u)))}return r!==1/0&&r}(d[0],d[1],p)},e}(wi);function Ta(t,e){return t.x*e.x+t.y*e.y}function Pa(t,e){if(1===t.length){for(var n,r=0,i=e[r++];!n||i.equals(n);)if(!(n=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],s=t[0],a=n.sub(i),l=o.sub(i),u=s.sub(i),c=Ta(a,a),h=Ta(a,l),p=Ta(l,l),d=Ta(u,a),f=Ta(u,l),_=c*p-h*h,m=(p*d-h*f)/_,g=(c*f-h*d)/_,y=i.z*(1-m-g)+n.z*m+o.z*g;if(isFinite(y))return y}return 1/0}for(var v=1/0,b=0,x=e;b<x.length;b+=1)v=Math.min(v,x[b].z);return v}var Aa=Ii([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Oa=Ii([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ma=ba.VectorTileFeature.types,La=Math.cos(Math.PI/180*37.5),Na=Math.pow(2,14)/.5,Da=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(t){e.gradients[t.id]={}}),this.layoutVertexArray=new Oi,this.layoutVertexArray2=new Mi,this.indexArray=new Vi,this.programConfigurations=new Do(t.layers,t.zoom),this.segments=new ao,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Da.prototype.populate=function(t,e,n){this.hasPattern=oa("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],o=0,s=t;o<s.length;o+=1){var a=s[o],l=a.feature,u=a.id,c=a.index,h=a.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=Vo(l,p);if(this.layers[0]._featureFilter.filter(new ai(this.zoom),d,n)){var f=r?r.evaluate(d,{},n):void 0,_={id:u,properties:l.properties,type:l.type,sourceLayerIndex:h,index:c,geometry:p?d.geometry:jo(l),patterns:{},sortKey:f};i.push(_)}}r&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var m=0,g=i;m<g.length;m+=1){var y=g[m],v=y.geometry,b=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var w=sa("line",this.layers,y,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(y,v,b,n,{});e.featureIndex.insert(t[b].feature,v,b,x,this.index)}},Da.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Da.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Da.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Da.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Da.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Oa)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Aa),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Da.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Da.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Da.prototype.addFeature=function(t,e,n,r,i){var o=this.layers[0].layout,s=o.get("line-join").evaluate(t,{}),a=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var c=0,h=e;c<h.length;c+=1)this.addLine(h[c],t,s,a,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Da.prototype.addLine=function(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var s=0;s<t.length-1;s++)this.totalDistance+=t[s].dist(t[s+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var a="Polygon"===Ma[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var u=0;u<l-1&&t[u].equals(t[u+1]);)u++;if(!(l<(a?3:2))){"bevel"===n&&(i=1.05);var c,h=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),d=void 0,f=void 0,_=void 0,m=void 0;this.e1=this.e2=-1,a&&(m=t[u].sub(c=t[l-2])._unit()._perp());for(var g=u;g<l;g++)if(!(f=g===l-1?a?t[u+1]:void 0:t[g+1])||!t[g].equals(f)){m&&(_=m),c&&(d=c),c=t[g],m=f?f.sub(c)._unit()._perp():_;var y=(_=_||m).add(m);0===y.x&&0===y.y||y._unit();var v=_.x*m.x+_.y*m.y,b=y.x*m.x+y.y*m.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),E=b<La&&d&&f,S=_.x*m.y-_.y*m.x>0;if(E&&g>u){var C=c.dist(d);if(C>2*h){var I=c.sub(c.sub(d)._mult(h/C)._round());this.updateDistance(d,I),this.addCurrentVertex(I,_,0,0,p),d=I}}var k=d&&f,T=k?n:a?"butt":r;if(k&&"round"===T&&(x<o?T="miter":x<=2&&(T="fakeround")),"miter"===T&&x>i&&(T="bevel"),"bevel"===T&&(x>2&&(T="flipbevel"),x<i&&(T="miter")),d&&this.updateDistance(d,c),"miter"===T)y._mult(x),this.addCurrentVertex(c,y,0,0,p);else if("flipbevel"===T){if(x>100)y=m.mult(-1);else{var P=x*_.add(m).mag()/_.sub(m).mag();y._perp()._mult(P*(S?-1:1))}this.addCurrentVertex(c,y,0,0,p),this.addCurrentVertex(c,y.mult(-1),0,0,p)}else if("bevel"===T||"fakeround"===T){var A=-Math.sqrt(x*x-1),O=S?A:0,M=S?0:A;if(d&&this.addCurrentVertex(c,_,O,M,p),"fakeround"===T)for(var L=Math.round(180*w/Math.PI/20),N=1;N<L;N++){var D=N/L;if(.5!==D){var R=D-.5;D+=D*R*(D-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*R*R+(.848013+v*(.215638*v-1.06021)))}var z=m.sub(_)._mult(D)._add(_)._unit()._mult(S?-1:1);this.addHalfVertex(c,z.x,z.y,!1,S,0,p)}f&&this.addCurrentVertex(c,m,-O,-M,p)}else if("butt"===T)this.addCurrentVertex(c,y,0,0,p);else if("square"===T){var F=d?1:-1;this.addCurrentVertex(c,y,F,F,p)}else"round"===T&&(d&&(this.addCurrentVertex(c,_,0,0,p),this.addCurrentVertex(c,_,1,1,p,!0)),f&&(this.addCurrentVertex(c,m,-1,-1,p,!0),this.addCurrentVertex(c,m,0,0,p)));if(E&&g<l-1){var B=c.dist(f);if(B>2*h){var j=c.add(f.sub(c)._mult(h/B)._round());this.updateDistance(c,j),this.addCurrentVertex(j,m,0,0,p),c=j}}}}},Da.prototype.addCurrentVertex=function(t,e,n,r,i,o){void 0===o&&(o=!1);var s=e.y*r-e.x,a=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,s,a,o,!0,-r,i),this.distance>Na/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))},Da.prototype.addHalfVertex=function(t,e,n,r,i,o,s){var a=.5*(this.lineClips?this.scaledDistance*(Na-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&a)<<2,a>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),i?this.e2=l:this.e1=l},Da.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Da.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Fr("LineBucket",Da,{omit:["layers","patternFeatures"]});var Ra=new xi({"line-cap":new mi(Pt.layout_line["line-cap"]),"line-join":new gi(Pt.layout_line["line-join"]),"line-miter-limit":new mi(Pt.layout_line["line-miter-limit"]),"line-round-limit":new mi(Pt.layout_line["line-round-limit"]),"line-sort-key":new gi(Pt.layout_line["line-sort-key"])}),za={paint:new xi({"line-opacity":new gi(Pt.paint_line["line-opacity"]),"line-color":new gi(Pt.paint_line["line-color"]),"line-translate":new mi(Pt.paint_line["line-translate"]),"line-translate-anchor":new mi(Pt.paint_line["line-translate-anchor"]),"line-width":new gi(Pt.paint_line["line-width"]),"line-gap-width":new gi(Pt.paint_line["line-gap-width"]),"line-offset":new gi(Pt.paint_line["line-offset"]),"line-blur":new gi(Pt.paint_line["line-blur"]),"line-dasharray":new vi(Pt.paint_line["line-dasharray"]),"line-pattern":new yi(Pt.paint_line["line-pattern"]),"line-gradient":new bi(Pt.paint_line["line-gradient"])}),layout:Ra},Fa=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new ai(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=p({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(gi))(za.paint.properties["line-width"].specification);Fa.useIntegerZoom=!0;var Ba=function(t){function e(e){t.call(this,e,za),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof $e,this.gradientVersion=(this.gradientVersion+1)%a)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=Fa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Da(t)},e.prototype.queryRadius=function(t){var e=t,n=ja(es("line-width",this,e),es("line-gap-width",this,e)),r=es("line-offset",this,e);return n/2+Math.abs(r)+ns(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,s,a){var l=rs(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,a),u=a/2*ja(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){for(var n=[],r=new i(0,0),o=0;o<t.length;o++){for(var s=t[o],a=[],l=0;l<s.length;l++){var u=s[l],c=s[l+1],h=0===l?r:u.sub(s[l-1])._unit()._perp(),p=l===s.length-1?r:c.sub(u)._unit()._perp(),d=h._add(p)._unit();d._mult(1/(d.x*p.x+d.y*p.y)),a.push(d._mult(e)._add(u))}n.push(a)}return n}(r,c*a)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(Qo(t,i[o]))return!0;if(Zo(t,i,n))return!0}return!1}(l,r,u)},e.prototype.isTileClipped=function(){return!0},e}(wi);function ja(t,e){return e>0?e+2*t:t}var Va=Ii([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ua=Ii([{name:"a_projected_pos",components:3,type:"Float32"}],4),$a=(Ii([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ii([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),qa=(Ii([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ga=Ii([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ha(t,e,n){return t.sections.forEach(function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),si.applyArabicShaping&&(t=si.applyArabicShaping(t)),t}(t.text,e,n)}),t}Ii([{name:"triangle",components:3,type:"Uint16"}]),Ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ii([{type:"Float32",name:"offsetX"}]),Ii([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Za={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Wa=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?i-1:0,p=n?-1:1,d=t[e+h];for(h+=p,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+h],h+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=u}return(d?-1:1)*s*Math.pow(2,o-r)},Xa=function(t,e,n,r,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[n+d]=255&s,d+=f,s/=256,u-=8);t[n+d-f]|=128*_},Ya=Ka;function Ka(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Ka.Varint=0,Ka.Fixed64=1,Ka.Bytes=2,Ka.Fixed32=5;var Ja="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Qa(t){return t.type===Ka.Bytes?t.readVarint()+t.pos:t.pos+1}function tl(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function el(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function nl(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function rl(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function il(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function ol(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function sl(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function al(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function ll(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function ul(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function cl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function hl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function pl(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function dl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function fl(t,e,n){1===t&&n.readMessage(_l,e)}function _l(t,e,n){if(3===t){var r=n.readMessage(ml,{}),i=r.width,o=r.height,s=r.left,a=r.top,l=r.advance;e.push({id:r.id,bitmap:new ys({width:i+6,height:o+6},r.bitmap),metrics:{width:i,height:o,left:s,top:a,advance:l}})}}function ml(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function gl(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort(function(t,e){return e.h-t.h});for(var s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],a=0,l=0,u=0,c=t;u<c.length;u+=1)for(var h=c[u],p=s.length-1;p>=0;p--){var d=s[p];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,l=Math.max(l,h.y+h.h),a=Math.max(a,h.x+h.w),h.w===d.w&&h.h===d.h){var f=s.pop();p<s.length&&(s[p]=f)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(s.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}return{w:a,h:l,fill:e/(a*l)||0}}Ka.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=hl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=dl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=hl(this.buf,this.pos)+4294967296*hl(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=hl(this.buf,this.pos)+4294967296*dl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Wa(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Wa(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return tl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return tl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return tl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return tl(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return tl(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return tl(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Ja?function(t,e,n){return Ja.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,s,a,l=t[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(s=t[i+2],128==(192&(o=t[i+1]))&&128==(192&s)&&((u=(15&l)<<12|(63&o)<<6|63&s)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(s=t[i+2],a=t[i+3],128==(192&(o=t[i+1]))&&128==(192&s)&&128==(192&a)&&((u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Ka.Bytes)return t.push(this.readVarint(e));var n=Qa(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Ka.Bytes)return t.push(this.readSVarint());var e=Qa(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Ka.Bytes)return t.push(this.readBoolean());var e=Qa(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Ka.Bytes)return t.push(this.readFloat());var e=Qa(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Ka.Bytes)return t.push(this.readDouble());var e=Qa(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Ka.Bytes)return t.push(this.readFixed32());var e=Qa(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Ka.Bytes)return t.push(this.readSFixed32());var e=Qa(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Ka.Bytes)return t.push(this.readFixed64());var e=Qa(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Ka.Bytes)return t.push(this.readSFixed64());var e=Qa(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Ka.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ka.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ka.Fixed32)this.pos+=4;else{if(e!==Ka.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),pl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),pl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),pl(this.buf,-1&t,this.pos),pl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),pl(this.buf,-1&t,this.pos),pl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&el(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Xa(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Xa(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&el(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,Ka.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,nl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,rl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,sl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,il,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ol,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,al,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,ll,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,ul,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,cl,e)},writeBytesField:function(t,e){this.writeTag(t,Ka.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Ka.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Ka.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Ka.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Ka.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Ka.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Ka.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Ka.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Ka.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Ka.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var yl=function(t,e){var n=e.pixelRatio,r=e.version,i=e.stretchX,o=e.stretchY,s=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=s,this.version=r},vl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};vl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},vl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},vl.tlbr.get=function(){return this.tl.concat(this.br)},vl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yl.prototype,vl);var bl=function(t,e){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,n,i),this.addImages(e,r,i);var o=gl(i),s=new vs({width:o.w||1,height:o.h||1});for(var a in t){var l=t[a],u=n[a].paddedRect;vs.copy(l.data,s,{x:0,y:0},{x:u.x+1,y:u.y+1},l.data)}for(var c in e){var h=e[c],p=r[c].paddedRect,d=p.x+1,f=p.y+1,_=h.data.width,m=h.data.height;vs.copy(h.data,s,{x:0,y:0},{x:d,y:f},h.data),vs.copy(h.data,s,{x:0,y:m-1},{x:d,y:f-1},{width:_,height:1}),vs.copy(h.data,s,{x:0,y:0},{x:d,y:f+m},{width:_,height:1}),vs.copy(h.data,s,{x:_-1,y:0},{x:d-1,y:f},{width:1,height:m}),vs.copy(h.data,s,{x:0,y:0},{x:d+_,y:f},{width:1,height:m})}this.image=s,this.iconPositions=n,this.patternPositions=r};bl.prototype.addImages=function(t,e,n){for(var r in t){var i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new yl(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},bl.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},bl.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;n.update(e.data,void 0,{x:r[0],y:r[1]})}},Fr("ImagePosition",yl),Fr("ImageAtlas",bl);var xl={horizontal:1,vertical:2,horizontalOnly:3},wl=function(){this.scale=1,this.fontStack="",this.imageName=null};wl.forText=function(t,e){var n=new wl;return n.scale=t||1,n.fontStack=e,n},wl.forImage=function(t){var e=new wl;return e.imageName=t,e};var El=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Sl(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_){var m,g=El.fromFeature(t,i);h===xl.vertical&&g.verticalizePunctuation();var y=si.processBidirectionalText,v=si.processStyledBidirectionalText;if(y&&1===g.sections.length){m=[];for(var b=0,x=y(g.toString(),Ol(g,u,o,e,r,d,f));b<x.length;b+=1){var w=x[b],E=new El;E.text=w,E.sections=g.sections;for(var S=0;S<w.length;S++)E.sectionIndex.push(0);m.push(E)}}else if(v){m=[];for(var C=0,I=v(g.text,g.sectionIndex,Ol(g,u,o,e,r,d,f));C<I.length;C+=1){var k=I[C],T=new El;T.text=k[0],T.sectionIndex=k[1],T.sections=g.sections,m.push(T)}}else m=function(t,e){for(var n=[],r=t.text,i=0,o=0,s=e;o<s.length;o+=1){var a=s[o];n.push(t.substring(i,a)),i=a}return i<r.length&&n.push(t.substring(i,r.length)),n}(g,Ol(g,u,o,e,r,d,f));var P=[],A={positionedLines:P,text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,e,n,r,i,o,s,a,l,u,c,h){for(var p=0,d=-17,f=0,_=0,m="right"===a?1:"left"===a?0:.5,g=0,y=0,v=i;y<v.length;y+=1){var b=v[y];b.trim();var x=b.getMaxScale(),w=24*(x-1),E={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=E;var S=E.positionedGlyphs,C=0;if(b.length()){for(var I=0;I<b.length();I++){var k=b.getSection(I),T=b.getSectionIndex(I),P=b.getCharCode(I),A=0,O=null,M=null,L=null,N=24,D=!(l===xl.horizontal||!c&&!Zr(P)||c&&(Cl[P]||(q=P,Gr.Arabic(q)||Gr["Arabic Supplement"](q)||Gr["Arabic Extended-A"](q)||Gr["Arabic Presentation Forms-A"](q)||Gr["Arabic Presentation Forms-B"](q))));if(k.imageName){var R=r[k.imageName];if(!R)continue;L=k.imageName,t.iconsInText=t.iconsInText||!0,M=R.paddedRect;var z=R.displaySize;k.scale=24*k.scale/h,A=w+(24-z[1]*k.scale),N=(O={width:z[0],height:z[1],left:1,top:-3,advance:D?z[1]:z[0]}).advance;var F=D?z[0]*k.scale-24*x:z[1]*k.scale-24*x;F>0&&F>C&&(C=F)}else{var B=n[k.fontStack],j=B&&B[P];if(j&&j.rect)M=j.rect,O=j.metrics;else{var V=e[k.fontStack],U=V&&V[P];if(!U)continue;O=U.metrics}A=24*(x-k.scale)}D?(t.verticalizable=!0,S.push({glyph:P,imageName:L,x:p,y:d+A,vertical:D,scale:k.scale,fontStack:k.fontStack,sectionIndex:T,metrics:O,rect:M}),p+=N*k.scale+u):(S.push({glyph:P,imageName:L,x:p,y:d+A,vertical:D,scale:k.scale,fontStack:k.fontStack,sectionIndex:T,metrics:O,rect:M}),p+=O.advance*k.scale+u)}0!==S.length&&(f=Math.max(p-u,f),Ll(S,0,S.length-1,m,C)),p=0;var $=o*x+C;E.lineOffset=Math.max(C,w),d+=$,_=Math.max($,_),++g}else d+=o,++g}var q,G=d- -17,H=Ml(s),Z=H.horizontalAlign,W=H.verticalAlign;(function(t,e,n,r,i,o,s,a,l){var u,c=(e-n)*i;u=o!==s?-a*r- -17:(-r*l+.5)*s;for(var h=0,p=t;h<p.length;h+=1)for(var d=0,f=p[h].positionedGlyphs;d<f.length;d+=1){var _=f[d];_.x+=c,_.y+=u}})(t.positionedLines,m,Z,W,f,_,o,G,i.length),t.top+=-W*G,t.bottom=t.top+G,t.left+=-Z*f,t.right=t.left+f}(A,e,n,r,m,s,a,l,h,u,p,_),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(P)&&A}El.fromFeature=function(t,e){for(var n=new El,r=0;r<t.sections.length;r++){var i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n},El.prototype.length=function(){return this.text.length},El.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},El.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},El.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},El.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&Wr(r)&&!Za[t[n+1]]||i&&Wr(i)&&!Za[t[n-1]]||!Za[t[n]]?t[n]:Za[t[n]]}return e}(this.text)},El.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Cl[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Cl[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},El.prototype.substring=function(t,e){var n=new El;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},El.prototype.toString=function(){return this.text},El.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)},El.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(wl.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)},El.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(wl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},El.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Cl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Il={};function kl(t,e,n,r,i,o){if(e.imageName){var s=r[e.imageName];return s?s.displaySize[0]*e.scale*24/o+i:0}var a=n[e.fontStack],l=a&&a[t];return l?l.metrics.advance*e.scale+i:0}function Tl(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Pl(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Al(t,e,n,r,i,o){for(var s=null,a=Tl(e,n,i,o),l=0,u=r;l<u.length;l+=1){var c=u[l],h=Tl(e-c.x,n,i,o)+c.badness;h<=a&&(s=c,a=h)}return{index:t,x:e,priorBreak:s,badness:a}}function Ol(t,e,n,r,i,o,s){if("point"!==o)return[];if(!t)return[];for(var a,l=[],u=function(t,e,n,r,i,o){for(var s=0,a=0;a<t.length();a++){var l=t.getSection(a);s+=kl(t.getCharCode(a),l,r,i,e,o)}return s/Math.max(1,Math.ceil(s/n))}(t,e,n,r,i,s),c=t.text.indexOf("\u200b")>=0,h=0,p=0;p<t.length();p++){var d=t.getSection(p),f=t.getCharCode(p);if(Cl[f]||(h+=kl(f,d,r,i,e,s)),p<t.length()-1){var _=!((a=f)<11904||!(Gr["Bopomofo Extended"](a)||Gr.Bopomofo(a)||Gr["CJK Compatibility Forms"](a)||Gr["CJK Compatibility Ideographs"](a)||Gr["CJK Compatibility"](a)||Gr["CJK Radicals Supplement"](a)||Gr["CJK Strokes"](a)||Gr["CJK Symbols and Punctuation"](a)||Gr["CJK Unified Ideographs Extension A"](a)||Gr["CJK Unified Ideographs"](a)||Gr["Enclosed CJK Letters and Months"](a)||Gr["Halfwidth and Fullwidth Forms"](a)||Gr.Hiragana(a)||Gr["Ideographic Description Characters"](a)||Gr["Kangxi Radicals"](a)||Gr["Katakana Phonetic Extensions"](a)||Gr.Katakana(a)||Gr["Vertical Forms"](a)||Gr["Yi Radicals"](a)||Gr["Yi Syllables"](a)));(Il[f]||_||d.imageName)&&l.push(Al(p+1,h,u,l,Pl(f,t.getCharCode(p+1),_&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Al(t.length(),h,u,l,0,!0))}function Ml(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Ll(t,e,n,r,i){if(r||i)for(var o=t[n],s=(t[n].x+o.metrics.advance*o.scale)*r,a=e;a<=n;a++)t[a].x-=s,t[a].y+=i}function Nl(t,e,n,r,i,o){var s,a=t.image;if(a.content){var l=a.content,u=a.pixelRatio||1;s=[l[0]/u,l[1]/u,a.displaySize[0]-l[2]/u,a.displaySize[1]-l[3]/u]}var c,h,p,d,f=e.left*o,_=e.right*o;"width"===n||"both"===n?(d=i[0]+f-r[3],h=i[0]+_+r[1]):h=(d=i[0]+(f+_-a.displaySize[0])/2)+a.displaySize[0];var m=e.top*o,g=e.bottom*o;return"height"===n||"both"===n?(c=i[1]+m-r[0],p=i[1]+g+r[2]):p=(c=i[1]+(m+g-a.displaySize[1])/2)+a.displaySize[1],{image:a,top:c,right:h,bottom:p,left:d,collisionPadding:s}}Il[10]=!0,Il[32]=!0,Il[38]=!0,Il[40]=!0,Il[41]=!0,Il[43]=!0,Il[45]=!0,Il[47]=!0,Il[173]=!0,Il[183]=!0,Il[8203]=!0,Il[8208]=!0,Il[8211]=!0,Il[8231]=!0;var Dl=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);function Rl(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ai(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var s=o=Math.max(0,o-1);s<r.length&&r[s]<t+1;)s++;s=Math.min(r.length-1,s);var a=r[o],l=r[s];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:l,interpolationType:i}:{kind:"camera",minZoom:a,maxZoom:l,minSize:n.evaluate(new ai(a)),maxSize:n.evaluate(new ai(l)),interpolationType:i}}function zl(t,e,n){var r=e.uSize,i=n.lowerSize;return"source"===t.kind?i/128:"composite"===t.kind?qe(i/128,n.upperSize/128,e.uSizeT):r}function Fl(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,o=i?c(sn.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=qe(t.minSize,t.maxSize,o):n=o}return{uSizeT:n,uSize:r}}Fr("Anchor",Dl);var Bl=Object.freeze({__proto__:null,getSizeData:Rl,evaluateSizeForFeature:zl,evaluateSizeForZoom:Fl,SIZE_PACK_FACTOR:128});function jl(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,s=e.segment+1,a=0;a>-n/2;){if(--s<0)return!1;a-=t[s].dist(o),o=t[s]}a+=t[s].dist(t[s+1]),s++;for(var l=[],u=0;a<n/2;){var c=t[s],h=t[s+1];if(!h)return!1;var p=t[s-1].angleTo(c)-c.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:a,angleDelta:p}),u+=p;a-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;s++,a+=c.dist(h)}return!0}function Vl(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Ul(t,e,n){return t?.6*e*n:0}function $l(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function ql(t,e,n,r,i,o){for(var s=Ul(n,i,o),a=$l(n,r)*o,l=0,u=Vl(t)/2,c=0;c<t.length-1;c++){var h=t[c],p=t[c+1],d=h.dist(p);if(l+d>u){var f=(u-l)/d,_=qe(h.x,p.x,f),m=qe(h.y,p.y,f),g=new Dl(_,m,p.angleTo(h),c);return g._round(),!s||jl(t,g,a,s,e)?g:void 0}l+=d}}function Gl(t,e,n,r,i,o,s,a,l){var u=Ul(r,o,s),c=$l(r,i),h=c*s,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),function t(e,n,r,i,o,s,a,l,u){for(var c=s/2,h=Vl(e),p=0,d=n-r,f=[],_=0;_<e.length-1;_++){for(var m=e[_],g=e[_+1],y=m.dist(g),v=g.angleTo(m);d+r<p+y;){var b=((d+=r)-p)/y,x=qe(m.x,g.x,b),w=qe(m.y,g.y,b);if(x>=0&&x<u&&w>=0&&w<u&&d-c>=0&&d+c<=h){var E=new Dl(x,w,v,_);E._round(),i&&!jl(e,E,s,i,o)||f.push(E)}}p+=y}return l||f.length||a||(f=t(e,p/2,r,i,o,s,a,!0,u)),f}(t,p?e/2*a%e:(c/2+2*o)*s*a%e,e,u,n,h,p,!1,l)}function Hl(t,e,n,r,o){for(var s=[],a=0;a<t.length;a++)for(var l=t[a],u=void 0,c=0;c<l.length-1;c++){var h=l[c],p=l[c+1];h.x<e&&p.x<e||(h.x<e?h=new i(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x<e&&(p=new i(e,h.y+(e-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y<n&&p.y<n||(h.y<n?h=new i(h.x+(n-h.y)/(p.y-h.y)*(p.x-h.x),n)._round():p.y<n&&(p=new i(h.x+(n-h.y)/(p.y-h.y)*(p.x-h.x),n)._round()),h.x>=r&&p.x>=r||(h.x>=r?h=new i(r,h.y+(r-h.x)/(p.x-h.x)*(p.y-h.y))._round():p.x>=r&&(p=new i(r,h.y+(r-h.x)/(p.x-h.x)*(p.y-h.y))._round()),h.y>=o&&p.y>=o||(h.y>=o?h=new i(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round():p.y>=o&&(p=new i(h.x+(o-h.y)/(p.y-h.y)*(p.x-h.x),o)._round()),u&&h.equals(u[u.length-1])||s.push(u=[h]),u.push(p)))))}return s}function Zl(t,e,n,r){var o=[],s=t.image,a=s.pixelRatio,l=s.paddedRect.w-2,u=s.paddedRect.h-2,c=t.right-t.left,h=t.bottom-t.top,p=s.stretchX||[[0,l]],d=s.stretchY||[[0,u]],f=function(t,e){return t+e[1]-e[0]},_=p.reduce(f,0),m=d.reduce(f,0),g=l-_,y=u-m,v=0,b=_,x=0,w=m,E=0,S=g,C=0,I=y;if(s.content&&r){var k=s.content;v=Wl(p,0,k[0]),x=Wl(d,0,k[1]),b=Wl(p,k[0],k[2]),w=Wl(d,k[1],k[3]),E=k[0]-v,C=k[1]-x,S=k[2]-k[0]-b,I=k[3]-k[1]-w}var T=function(r,o,l,u){var p=Yl(r.stretch-v,b,c,t.left),d=Kl(r.fixed-E,S,r.stretch,_),f=Yl(o.stretch-x,w,h,t.top),g=Kl(o.fixed-C,I,o.stretch,m),y=Yl(l.stretch-v,b,c,t.left),k=Kl(l.fixed-E,S,l.stretch,_),T=Yl(u.stretch-x,w,h,t.top),P=Kl(u.fixed-C,I,u.stretch,m),A=new i(p,f),O=new i(y,f),M=new i(y,T),L=new i(p,T),N=new i(d/a,g/a),D=new i(k/a,P/a),R=e*Math.PI/180;if(R){var z=Math.sin(R),F=Math.cos(R),B=[F,-z,z,F];A._matMult(B),O._matMult(B),L._matMult(B),M._matMult(B)}var j=r.stretch+r.fixed,V=o.stretch+o.fixed;return{tl:A,tr:O,bl:L,br:M,tex:{x:s.paddedRect.x+1+j,y:s.paddedRect.y+1+V,w:l.stretch+l.fixed-j,h:u.stretch+u.fixed-V},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:N,pixelOffsetBR:D,minFontScaleX:S/a/c,minFontScaleY:I/a/h,isSDF:n}};if(r&&(s.stretchX||s.stretchY))for(var P=Xl(p,g,_),A=Xl(d,y,m),O=0;O<P.length-1;O++)for(var M=P[O],L=P[O+1],N=0;N<A.length-1;N++)o.push(T(M,A[N],L,A[N+1]));else o.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return o}function Wl(t,e,n){for(var r=0,i=0,o=t;i<o.length;i+=1){var s=o[i];r+=Math.max(e,Math.min(n,s[1]))-Math.max(e,Math.min(n,s[0]))}return r}function Xl(t,e,n){for(var r=[{fixed:-1,stretch:0}],i=0,o=t;i<o.length;i+=1){var s=o[i],a=s[0],l=s[1],u=r[r.length-1];r.push({fixed:a-u.stretch,stretch:u.stretch}),r.push({fixed:a-u.stretch,stretch:u.stretch+(l-a)})}return r.push({fixed:e+1,stretch:n}),r}function Yl(t,e,n,r){return t/e*n+r}function Kl(t,e,n,r){return t-e*n/r}var Jl=function(t,e,n,r,o,s,a,l,u,c){if(this.boxStartIndex=t.length,u){var h=s.top,p=s.bottom,d=s.collisionPadding;d&&(h-=d[1],p+=d[3]);var f=p-h;f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var _=s.top*a-l,m=s.bottom*a+l,g=s.left*a-l,y=s.right*a+l,v=s.collisionPadding;if(v&&(g-=v[0]*a,_-=v[1]*a,y+=v[2]*a,m+=v[3]*a),c){var b=new i(g,_),x=new i(y,_),w=new i(g,m),E=new i(y,m),S=c*Math.PI/180;b._rotate(S),x._rotate(S),w._rotate(S),E._rotate(S),g=Math.min(b.x,x.x,w.x,E.x),y=Math.max(b.x,x.x,w.x,E.x),_=Math.min(b.y,x.y,w.y,E.y),m=Math.max(b.y,x.y,w.y,E.y)}t.emplaceBack(e.x,e.y,g,_,y,m,n,r,o)}this.boxEndIndex=t.length},Ql=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=tu),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function tu(t,e){return t<e?-1:t>e?1:0}function eu(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var r=1/0,o=1/0,s=-1/0,a=-1/0,l=t[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<o)&&(o=c.y),(!u||c.x>s)&&(s=c.x),(!u||c.y>a)&&(a=c.y)}var h=Math.min(s-r,a-o),p=h/2,d=new Ql([],nu);if(0===h)return new i(r,o);for(var f=r;f<s;f+=h)for(var _=o;_<a;_+=h)d.push(new ru(f+p,_+p,p,t));for(var m=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,s=i.length,a=s-1;o<s;a=o++){var l=i[o],u=i[a],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,e+=3*c}return new ru(n/e,r/e,0,t)}(t),g=d.length;d.length;){var y=d.pop();(y.d>m.d||!m.d)&&(m=y,n&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,g)),y.max-m.d<=e||(d.push(new ru(y.p.x-(p=y.h/2),y.p.y-p,p,t)),d.push(new ru(y.p.x+p,y.p.y-p,p,t)),d.push(new ru(y.p.x-p,y.p.y+p,p,t)),d.push(new ru(y.p.x+p,y.p.y+p,p,t)),g+=4)}return n&&(console.log("num probes: "+g),console.log("best distance: "+m.d)),m.p}function nu(t,e){return e.max-t.max}function ru(t,e,n,r){this.p=new i(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],s=0,a=o.length,l=a-1;s<a;l=s++){var u=o[s],c=o[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(n=!n),r=Math.min(r,Ko(t,u,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Ql.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},Ql.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},Ql.prototype.peek=function(){return this.data[0]},Ql.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},Ql.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i};var iu=Number.POSITIVE_INFINITY;function ou(t,e){return e[1]!==iu?function(t,e,n){var r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){var n=0,r=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function su(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function au(t,e,n,r,o,s,a,l,u,c,h,p,d,f,_){var m=function(t,e,n,r,o,s,a,l){for(var u=r.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,c=[],h=0,p=e.positionedLines;h<p.length;h+=1)for(var d=p[h],f=0,_=d.positionedGlyphs;f<_.length;f+=1){var m=_[f];if(m.rect){var g=m.rect||{},y=4,v=!0,b=1,x=0,w=(o||l)&&m.vertical,E=m.metrics.advance*m.scale/2;if(l&&e.verticalizable&&(x=d.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var S=a[m.imageName];v=S.sdf,y=1/(b=S.pixelRatio)}var C=o?[m.x+E,m.y]:[0,0],I=o?[0,0]:[m.x+E+n[0],m.y+n[1]-x],k=[0,0];w&&(k=I,I=[0,0]);var T=(m.metrics.left-y)*m.scale-E+I[0],P=(-m.metrics.top-y)*m.scale+I[1],A=T+g.w*m.scale/b,O=P+g.h*m.scale/b,M=new i(T,P),L=new i(A,P),N=new i(T,O),D=new i(A,O);if(w){var R=new i(-E,E- -17),z=-Math.PI/2,F=12-E,B=new i(22-F,-(m.imageName?F:0)),j=new(Function.prototype.bind.apply(i,[null].concat(k)));M._rotateAround(z,R)._add(B)._add(j),L._rotateAround(z,R)._add(B)._add(j),N._rotateAround(z,R)._add(B)._add(j),D._rotateAround(z,R)._add(B)._add(j)}if(u){var V=Math.sin(u),U=Math.cos(u),$=[U,-V,V,U];M._matMult($),L._matMult($),N._matMult($),D._matMult($)}var q=new i(0,0),G=new i(0,0);c.push({tl:M,tr:L,bl:N,br:D,tex:g,writingMode:e.writingMode,glyphOffset:C,sectionIndex:m.sectionIndex,isSDF:v,pixelOffsetTL:q,pixelOffsetBR:G,minFontScaleX:0,minFontScaleY:0})}}return c}(0,n,l,o,s,a,r,t.allowVerticalPlacement),g=t.textSizeData,y=null;"source"===g.kind?(y=[128*o.layout.get("text-size").evaluate(a,{})])[0]>32640&&E(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===g.kind&&((y=[128*f.compositeTextSizes[0].evaluate(a,{},_),128*f.compositeTextSizes[1].evaluate(a,{},_)])[0]>32640||y[1]>32640)&&E(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,m,y,l,s,a,c,e,u.lineStartIndex,u.lineLength,d,_);for(var v=0,b=h;v<b.length;v+=1)p[b[v]]=t.text.placedSymbolArray.length-1;return 4*m.length}function lu(t){for(var e in t)return t[e];return null}function uu(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],s=o.length-1;s>=0;s--)if(r.dist(o[s])<n)return!0}else i[e]=[];return i[e].push(r),!1}var cu=ba.VectorTileFeature.types,hu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pu(t,e,n,r,i,o,s,a,l,u,c,h,p){var d=a?Math.min(32640,Math.round(a[0])):0,f=a?Math.min(32640,Math.round(a[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,s,(d<<1)+(l?1:0),f,16*u,16*c,256*h,256*p)}function du(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function fu(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(Kr(n[e].text))return!0;return!1}var _u=function(t){this.layoutVertexArray=new Ni,this.indexArray=new Vi,this.programConfigurations=t,this.segments=new ao,this.dynamicLayoutVertexArray=new Di,this.opacityVertexArray=new Ri,this.placedSymbolArray=new Qi};_u.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},_u.prototype.upload=function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Va.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Ua.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,hu,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))},_u.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Fr("SymbolBuffers",_u);var mu=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new ao,this.collisionVertexArray=new ji};mu.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,$a.members,!0)},mu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Fr("CollisionBuffers",mu);var gu=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=as([]),this.placementViewportMatrix=as([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rl(this.zoom,e["text-size"]),this.iconSizeData=Rl(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map(function(t){return xl[t]})),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};gu.prototype.createArrays=function(){this.text=new _u(new Do(this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new _u(new Do(this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.glyphOffsetArray=new no,this.lineVertexArray=new ro,this.symbolInstances=new eo},gu.prototype.calculateGlyphDependencies=function(t,e,n,r,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){var s=Za[t.charAt(o)];s&&(e[s.charCodeAt(0)]=!0)}},gu.prototype.populate=function(t,e,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),s=i.get("text-field"),a=i.get("icon-image"),l=("constant"!==s.value.kind||s.value.value instanceof re&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==a.value.kind||!!a.value.value||Object.keys(a.parameters).length>0,c=i.get("symbol-sort-key");if(this.features=[],l||u){for(var h=e.iconDependencies,p=e.glyphDependencies,d=e.availableImages,f=new ai(this.zoom),_=0,m=t;_<m.length;_+=1){var g=m[_],y=g.feature,v=g.id,b=g.index,x=g.sourceLayerIndex,w=r._featureFilter.needGeometry,E=Vo(y,w);if(r._featureFilter.filter(f,E,n)){w||(E.geometry=jo(y));var S=void 0;if(l){var C=r.getValueAndResolveTokens("text-field",E,n,d),I=re.factory(C);fu(I)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ii()||this.hasRTLText&&si.isParsed())&&(S=Ha(I,r,E))}var k=void 0;if(u){var T=r.getValueAndResolveTokens("icon-image",E,n,d);k=T instanceof ie?T:ie.fromString(T)}if(S||k){var P=this.sortFeaturesByKey?c.evaluate(E,{},n):void 0;if(this.features.push({id:v,text:S,icon:k,index:b,sourceLayerIndex:x,geometry:E.geometry,properties:y.properties,type:cu[y.type],sortKey:P}),k&&(h[k.name]=!0),S){var A=o.evaluate(E,{},n).join(","),O="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(xl.vertical)>=0;for(var M=0,L=S.sections;M<L.length;M+=1){var N=L[M];if(N.image)h[N.image.name]=!0;else{var D=Hr(S.toString()),R=N.fontStack||A,z=p[R]=p[R]||{};this.calculateGlyphDependencies(N.text,z,O,this.allowVerticalPlacement,D)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function s(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function a(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.text?c.text.toString():null;if(p){var d=l(p,h),f=l(p,h,!0);if(d in n&&f in e&&n[d]!==e[f]){var _=a(d,f,h),m=s(d,f,r[_].geometry);delete e[d],delete n[f],n[l(p,r[m].geometry,!0)]=m,r[_].geometry=null}else d in n?s(d,f,h):f in e?a(d,f,h):(o(u),e[d]=i-1,n[f]=i-1)}else o(u)}return r.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},gu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},gu.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},gu.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},gu.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},gu.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},gu.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},gu.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},s=t.segment+1;s<e.length;s++)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s<e.length-1&&(r+=e[s+1].dist(e[s]));for(var a=t.segment||0;a>=0;a--)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:i},a>0&&(i+=e[a-1].dist(e[a]));for(var l=0;l<e.length;l++){var u=o[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},gu.prototype.addSymbols=function(t,e,n,r,i,o,s,a,l,u,c,h){for(var p=t.indexArray,d=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,d,p,this.canOverlap?o.sortKey:void 0),_=this.glyphOffsetArray.length,m=f.vertexLength,g=this.allowVerticalPlacement&&s===xl.vertical?Math.PI/2:0,y=o.text&&o.text.sections,v=0;v<e.length;v++){var b=e[v],x=b.tl,w=b.tr,E=b.bl,S=b.br,C=b.tex,I=b.pixelOffsetTL,k=b.pixelOffsetBR,T=b.minFontScaleX,P=b.minFontScaleY,A=b.glyphOffset,O=b.isSDF,M=b.sectionIndex,L=f.vertexLength,N=A[1];pu(d,a.x,a.y,x.x,N+x.y,C.x,C.y,n,O,I.x,I.y,T,P),pu(d,a.x,a.y,w.x,N+w.y,C.x+C.w,C.y,n,O,k.x,I.y,T,P),pu(d,a.x,a.y,E.x,N+E.y,C.x,C.y+C.h,n,O,I.x,k.y,T,P),pu(d,a.x,a.y,S.x,N+S.y,C.x+C.w,C.y+C.h,n,O,k.x,k.y,T,P),du(t.dynamicLayoutVertexArray,a,g),p.emplaceBack(L,L+1,L+2),p.emplaceBack(L+1,L+2,L+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(A[0]),v!==e.length-1&&M===e[v+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,o,o.index,{},h,y&&y[M])}t.placedSymbolArray.emplaceBack(a.x,a.y,_,this.glyphOffsetArray.length-_,m,l,u,a.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],s,0,!1,0,c)},gu.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},gu.prototype.addCollisionDebugVertices=function(t,e,n,r,o,s,a){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),u=l.vertexLength,c=o.layoutVertexArray,h=o.collisionVertexArray,p=a.anchorX,d=a.anchorY;this._addCollisionDebugVertex(c,h,s,p,d,new i(t,e)),this._addCollisionDebugVertex(c,h,s,p,d,new i(n,e)),this._addCollisionDebugVertex(c,h,s,p,d,new i(n,r)),this._addCollisionDebugVertex(c,h,s,p,d,new i(t,r)),l.vertexLength+=4;var f=o.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),l.primitiveLength+=4},gu.prototype.addDebugCollisionBoxes=function(t,e,n,r){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},gu.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mu(Fi,qa.members,Zi),this.iconCollisionBox=new mu(Fi,qa.members,Zi);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},gu.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i,o,s,a,l){for(var u={},c=e;c<n;c++){var h=t.get(c);u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},u.textFeatureIndex=h.featureIndex;break}for(var p=r;p<i;p++){var d=t.get(p);u.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},u.verticalTextFeatureIndex=d.featureIndex;break}for(var f=o;f<s;f++){var _=t.get(f);u.iconBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},u.iconFeatureIndex=_.featureIndex;break}for(var m=a;m<l;m++){var g=t.get(m);u.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},u.verticalIconFeatureIndex=g.featureIndex;break}return u},gu.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},gu.prototype.hasTextData=function(){return this.text.segments.get().length>0},gu.prototype.hasIconData=function(){return this.icon.segments.get().length>0},gu.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},gu.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},gu.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},gu.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},gu.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[],s=0;s<this.symbolInstances.length;++s){o.push(s);var a=this.symbolInstances.get(s);r.push(0|Math.round(e*a.anchorX+n*a.anchorY)),i.push(a.featureIndex)}return o.sort(function(t,e){return r[t]-r[e]||i[e]-i[t]}),o},gu.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},gu.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var i=this.symbolInstances.get(r[n]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach(function(t,n,r){t>=0&&r.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)}),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Fr("SymbolBucket",gu,{omit:["layers","collisionBoxArray","features","compareText"]}),gu.MAX_GLYPHS=65535,gu.addDynamicAttributes=du;var yu=new xi({"symbol-placement":new mi(Pt.layout_symbol["symbol-placement"]),"symbol-spacing":new mi(Pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mi(Pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gi(Pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mi(Pt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mi(Pt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mi(Pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new mi(Pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mi(Pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new gi(Pt.layout_symbol["icon-size"]),"icon-text-fit":new mi(Pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mi(Pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new gi(Pt.layout_symbol["icon-image"]),"icon-rotate":new gi(Pt.layout_symbol["icon-rotate"]),"icon-padding":new mi(Pt.layout_symbol["icon-padding"]),"icon-keep-upright":new mi(Pt.layout_symbol["icon-keep-upright"]),"icon-offset":new gi(Pt.layout_symbol["icon-offset"]),"icon-anchor":new gi(Pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mi(Pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mi(Pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mi(Pt.layout_symbol["text-rotation-alignment"]),"text-field":new gi(Pt.layout_symbol["text-field"]),"text-font":new gi(Pt.layout_symbol["text-font"]),"text-size":new gi(Pt.layout_symbol["text-size"]),"text-max-width":new gi(Pt.layout_symbol["text-max-width"]),"text-line-height":new mi(Pt.layout_symbol["text-line-height"]),"text-letter-spacing":new gi(Pt.layout_symbol["text-letter-spacing"]),"text-justify":new gi(Pt.layout_symbol["text-justify"]),"text-radial-offset":new gi(Pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mi(Pt.layout_symbol["text-variable-anchor"]),"text-anchor":new gi(Pt.layout_symbol["text-anchor"]),"text-max-angle":new mi(Pt.layout_symbol["text-max-angle"]),"text-writing-mode":new mi(Pt.layout_symbol["text-writing-mode"]),"text-rotate":new gi(Pt.layout_symbol["text-rotate"]),"text-padding":new mi(Pt.layout_symbol["text-padding"]),"text-keep-upright":new mi(Pt.layout_symbol["text-keep-upright"]),"text-transform":new gi(Pt.layout_symbol["text-transform"]),"text-offset":new gi(Pt.layout_symbol["text-offset"]),"text-allow-overlap":new mi(Pt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mi(Pt.layout_symbol["text-ignore-placement"]),"text-optional":new mi(Pt.layout_symbol["text-optional"])}),vu={paint:new xi({"icon-opacity":new gi(Pt.paint_symbol["icon-opacity"]),"icon-color":new gi(Pt.paint_symbol["icon-color"]),"icon-halo-color":new gi(Pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new gi(Pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gi(Pt.paint_symbol["icon-halo-blur"]),"icon-translate":new mi(Pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new mi(Pt.paint_symbol["icon-translate-anchor"]),"text-opacity":new gi(Pt.paint_symbol["text-opacity"]),"text-color":new gi(Pt.paint_symbol["text-color"],{runtimeType:Vt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new gi(Pt.paint_symbol["text-halo-color"]),"text-halo-width":new gi(Pt.paint_symbol["text-halo-width"]),"text-halo-blur":new gi(Pt.paint_symbol["text-halo-blur"]),"text-translate":new mi(Pt.paint_symbol["text-translate"]),"text-translate-anchor":new mi(Pt.paint_symbol["text-translate-anchor"])}),layout:yu},bu=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:zt,this.defaultValue=t};bu.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},bu.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},bu.prototype.outputDefined=function(){return!1},bu.prototype.serialize=function(){return null},Fr("FormatSectionOverride",bu,{omit:["defaultValue"]});var xu=function(t){function e(e){t.call(this,e,vu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var i=[],o=0,s=r;o<s.length;o+=1){var a=s[o];i.indexOf(a)<0&&i.push(a)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Hn(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?String(t[n]):""})}(e.properties,i)},e.prototype.createBucket=function(t){return new gu(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=vu.paint.overridableProperties;t<n.length;t+=1){var r=n[t];if(e.hasPaintOverride(this.layout,r)){var i,o=this.paint.get(r),s=new bu(o),a=new Gn(s,o.property.specification);i="constant"===o.value.kind||"source"===o.value.kind?new Wn("source",a):new Xn("composite",a,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new fi(o.property,i,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,r){return!(!this.layout||n.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),r=vu.paint.properties[e],i=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r.overrides&&r.overrides.hasOverride(n[e]))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof re)o(n.value.value.sections);else if("source"===n.value.kind){var s=function(t){i||(t instanceof ue&&ae(t.value)===Gt?o(t.value.sections):t instanceof de?o(t.sections):t.eachChild(s))},a=n.value;a._styleExpression&&s(a._styleExpression.expression)}return i},e}(wi),wu={paint:new xi({"background-color":new mi(Pt.paint_background["background-color"]),"background-pattern":new vi(Pt.paint_background["background-pattern"]),"background-opacity":new mi(Pt.paint_background["background-opacity"])})},Eu=function(t){function e(e){t.call(this,e,wu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wi),Su={paint:new xi({"raster-opacity":new mi(Pt.paint_raster["raster-opacity"]),"raster-hue-rotate":new mi(Pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mi(Pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mi(Pt.paint_raster["raster-brightness-max"]),"raster-saturation":new mi(Pt.paint_raster["raster-saturation"]),"raster-contrast":new mi(Pt.paint_raster["raster-contrast"]),"raster-resampling":new mi(Pt.paint_raster["raster-resampling"]),"raster-fade-duration":new mi(Pt.paint_raster["raster-fade-duration"])})},Cu=function(t){function e(e){t.call(this,e,Su)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(wi),Iu=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(wi),ku={circle:ps,heatmap:ws,hillshade:Ss,fill:ca,"fill-extrusion":ka,line:Ba,symbol:xu,background:Eu,raster:Cu},Tu=s.HTMLImageElement,Pu=s.HTMLCanvasElement,Au=s.HTMLVideoElement,Ou=s.ImageData,Mu=s.ImageBitmap,Lu=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};Lu.prototype.update=function(t,e,n){var r=t.width,i=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),s=this.context,a=s.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,i],t instanceof Tu||t instanceof Pu||t instanceof Au||t instanceof Ou||Mu&&t instanceof Mu?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,r,i,0,this.format,a.UNSIGNED_BYTE,t.data);else{var l=n||{x:0,y:0},u=l.x,c=l.y;t instanceof Tu||t instanceof Pu||t instanceof Au||t instanceof Ou||Mu&&t instanceof Mu?a.texSubImage2D(a.TEXTURE_2D,0,u,c,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,u,c,r,i,a.RGBA,a.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},Lu.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Lu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Lu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Nu=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Nu.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Nu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Du=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Nu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=I()?t:s};function Ru(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}Du.prototype.send=function(t,e,n,r,i){var o=this;void 0===i&&(i=!1);var s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[s]=n);var a=P(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ur(e,a)},a),{cancel:function(){n&&delete o.callbacks[s],o.target.postMessage({id:s,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Du.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else I()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},Du.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Du.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r($r(e.error)):r(null,$r(e.data)))}else{var i=!1,o=P(this.globalScope)?void 0:[],s=e.hasCallback?function(e,r){i=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?Ur(e):null,data:Ur(r,o)},o)}:function(t){i=!0},a=null,l=$r(e.data);if(this.parent[e.type])a=this.parent[e.type](e.sourceMapId,l,s);else if(this.parent.getWorkerSource){var u=e.type.split(".");a=this.parent.getWorkerSource(e.sourceMapId,u[0],l.source)[u[1]](l,s)}else s(new Error("Could not find function "+e.type));!i&&a&&a.cancel&&(this.cancelCallbacks[t]=a.cancel)}},Du.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var zu=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};zu.prototype.setNorthEast=function(t){return this._ne=t instanceof Fu?new Fu(t.lng,t.lat):Fu.convert(t),this},zu.prototype.setSouthWest=function(t){return this._sw=t instanceof Fu?new Fu(t.lng,t.lat):Fu.convert(t),this},zu.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof Fu)e=t,n=t;else{if(!(t instanceof zu))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(zu.convert(t)):this.extend(Fu.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Fu(e.lng,e.lat),this._ne=new Fu(n.lng,n.lat)),this},zu.prototype.getCenter=function(){return new Fu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},zu.prototype.getSouthWest=function(){return this._sw},zu.prototype.getNorthEast=function(){return this._ne},zu.prototype.getNorthWest=function(){return new Fu(this.getWest(),this.getNorth())},zu.prototype.getSouthEast=function(){return new Fu(this.getEast(),this.getSouth())},zu.prototype.getWest=function(){return this._sw.lng},zu.prototype.getSouth=function(){return this._sw.lat},zu.prototype.getEast=function(){return this._ne.lng},zu.prototype.getNorth=function(){return this._ne.lat},zu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},zu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},zu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},zu.prototype.contains=function(t){var e=Fu.convert(t),n=e.lng,r=e.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i},zu.convert=function(t){return!t||t instanceof zu?t:new zu(t)};var Fu=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Fu.prototype.wrap=function(){return new Fu(h(this.lng,-180,180),this.lat)},Fu.prototype.toArray=function(){return[this.lng,this.lat]},Fu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Fu.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(i,1))},Fu.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new zu(new Fu(this.lng-n,this.lat-e),new Fu(this.lng+n,this.lat+e))},Fu.convert=function(t){if(t instanceof Fu)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Fu(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Fu(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Bu=2*Math.PI*6371008.8;function ju(t){return Bu*Math.cos(t*Math.PI/180)}function Vu(t){return(180+t)/360}function Uu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function $u(t,e){return t/ju(e)}function qu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Gu=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Gu.fromLngLat=function(t,e){void 0===e&&(e=0);var n=Fu.convert(t);return new Gu(Vu(n.lng),Uu(n.lat),$u(e,n.lat))},Gu.prototype.toLngLat=function(){return new Fu(360*this.x-180,qu(this.y))},Gu.prototype.toAltitude=function(){return this.z*ju(qu(this.y))},Gu.prototype.meterInMercatorCoordinateUnits=function(){return 1/Bu*(t=qu(this.y),1/Math.cos(t*Math.PI/180));var t};var Hu=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Xu(0,t,t,e,n)};Hu.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Hu.prototype.url=function(t,e){var n,r,i,o,s,a=(r=this.y,i=this.z,o=Ru(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),s=Ru(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+s[0]+","+s[1]),l=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",a)},Hu.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Hu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Zu=function(t,e){this.wrap=t,this.canonical=e,this.key=Xu(t,e.z,e.z,e.x,e.y)},Wu=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Hu(n,+r,+i),this.key=Xu(e,t,n,r,i)};function Xu(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)}Wu.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Wu.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Wu(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wu(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Wu.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?Xu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Xu(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},Wu.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Wu.prototype.children=function(t){if(this.overscaledZ>=t)return[new Wu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Wu(e,this.wrap,e,n,r),new Wu(e,this.wrap,e,n+1,r),new Wu(e,this.wrap,e,n,r+1),new Wu(e,this.wrap,e,n+1,r+1)]},Wu.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Wu.prototype.wrapped=function(){return new Wu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Wu.prototype.unwrapTo=function(t){return new Wu(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Wu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Wu.prototype.toUnwrapped=function(){return new Zu(this.wrap,this.canonical)},Wu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Wu.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Gu(t.x-this.wrap,t.y))},Fr("CanonicalTileID",Hu),Fr("OverscaledTileID",Wu,{omit:["posMatrix"]});var Yu=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return E('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Yu.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])},Yu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Yu.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Yu.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},Yu.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},Yu.prototype.getPixels=function(){return new vs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Yu.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,s=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=s-1;break;case 1:s=o+1}for(var a=-e*this.dim,l=-n*this.dim,u=o;u<s;u++)for(var c=r;c<i;c++)this.data[this._idx(c,u)]=t.data[this._idx(c+a,u+l)]},Fr("DEMData",Yu);var Ku=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Ku.prototype.encode=function(t){return this._stringToNumber[t]},Ku.prototype.decode=function(t){return this._numberToString[t]};var Ju=function(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i},Qu={geometry:{configurable:!0}};Qu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Qu.geometry.set=function(t){this._geometry=t},Ju.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Ju.prototype,Qu);var tc=function(){this.state={},this.stateChanges={},this.deletedStates={}};tc.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},p(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var s in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][s]&&delete this.deletedStates[t][r][s]},tc.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},tc.prototype.getState=function(t,e){var n=String(e),r=p({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r},tc.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},tc.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),p(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var s in this.deletedStates){this.state[s]=this.state[s]||{};var a={};if(null===this.deletedStates[s])for(var l in this.state[s])a[l]={},this.state[s][l]={};else for(var u in this.deletedStates[s]){if(null===this.deletedStates[s][u])this.state[s][u]={};else for(var c=0,h=Object.keys(this.deletedStates[s][u]);c<h.length;c+=1)delete this.state[s][u][h[c]];a[u]=this.state[s][u]}n[s]=n[s]||{},p(n[s],a)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in t)t[d].setFeatureState(n,e)};var ec=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Lr(8192,16,0),this.grid3D=new Lr(8192,16,0),this.featureIndexArray=new oo,this.promoteId=e};function nc(t,e,n,r,i){return v(t,function(t,o){var s=e instanceof _i?e.get(o):null;return s&&s.evaluate?s.evaluate(n,r,i):s})}function rc(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,s=t;o<s.length;o+=1){var a=s[o];e=Math.min(e,a.x),n=Math.min(n,a.y),r=Math.max(r,a.x),i=Math.max(i,a.y)}return{minX:e,minY:n,maxX:r,maxY:i}}function ic(t,e){return e-t}ec.prototype.insert=function(t,e,n,r,i,o){var s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var a=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var p=u[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&a.insert(s,c[0],c[1],c[2],c[3])}},ec.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ba.VectorTile(new Ya(this.rawTileData)).layers,this.sourceLayerCoder=new Ku(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ec.prototype.query=function(t,e,n,r){var o=this;this.loadVTLayers();for(var s=t.params||{},a=8192/t.tileSize/t.scale,l=sr(s.filter),u=t.queryGeometry,c=t.queryPadding*a,h=rc(u),p=this.grid.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c),d=rc(t.cameraQueryGeometry),f=0,_=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,function(e,n,r,o){return function(t,e,n,r,o){for(var s=0,a=t;s<a.length;s+=1){var l=a[s];if(e<=l.x&&n<=l.y&&r>=l.x&&o>=l.y)return!0}var u=[new i(e,n),new i(e,o),new i(r,o),new i(r,n)];if(t.length>2)for(var c=0,h=u;c<h.length;c+=1)if(Qo(t,h[c]))return!0;for(var p=0;p<t.length-1;p++)if(ts(t[p],t[p+1],u))return!0;return!1}(t.cameraQueryGeometry,e-c,n-c,r+c,o+c)});f<_.length;f+=1)p.push(_[f]);p.sort(ic);for(var m,g={},y=function(i){var c=p[i];if(c!==m){m=c;var h=o.featureIndexArray.get(c),d=null;o.loadMatchingFeature(g,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,l,s.layers,s.availableImages,e,n,r,function(e,n,r){return d||(d=jo(e)),n.queryIntersectsFeature(u,e,r,d,o.z,t.transform,a,t.pixelPosMatrix)})}},v=0;v<p.length;v++)y(v);return g},ec.prototype.loadMatchingFeature=function(t,e,n,r,i,o,s,a,l,u,c){var h=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,h)){var d=this.sourceLayerCoder.decode(n),f=this.vtLayers[d].feature(r);if(i.needGeometry){var _=Vo(f,!0);if(!i.filter(new ai(this.tileID.overscaledZ),_,this.tileID.canonical))return}else if(!i.filter(new ai(this.tileID.overscaledZ),f))return;for(var m=this.getId(f,d),g=0;g<h.length;g++){var y=h[g];if(!(o&&o.indexOf(y)<0)){var v=a[y];if(v){var b={};void 0!==m&&u&&(b=u.getState(v.sourceLayer||"_geojsonTileLayer",m));var x=p({},l[y]);x.paint=nc(x.paint,v.paint,f,b,s),x.layout=nc(x.layout,v.layout,f,b,s);var w=!c||c(f,v,b);if(w){var E=new Ju(f,this.z,this.x,this.y,m);E.layer=x;var S=t[y];void 0===S&&(S=t[y]=[]),S.push({featureIndex:r,feature:E,intersectionZ:w})}}}}}},ec.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o,s,a){var l={};this.loadVTLayers();for(var u=sr(i),c=0,h=t;c<h.length;c+=1)this.loadMatchingFeature(l,n,r,h[c],u,o,s,a,e);return l},ec.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},ec.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},Fr("FeatureIndex",ec,{omit:["rawTileData","sourceLayerCoder"]});var oc=function(t,e){this.tileID=t,this.uid=f(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};oc.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<F.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},oc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},oc.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=function(){var t=o[i],r=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return r.filter(function(e){return e.id===t})[0]}));for(var s=0,a=r;s<a.length;s+=1)n[a[s].id]=t}},i=0,o=t;i<o.length;i+=1)r();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof gu){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var s=this.buckets[o];if(s instanceof gu&&s.hasRTLText){this.hasRTLText=!0,si.isLoading()||si.isLoaded()||"deferred"!==ii()||oi();break}}for(var a in this.queryPadding=0,this.buckets){var l=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Ki},oc.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},oc.prototype.getBucket=function(t){return this.buckets[t.id]},oc.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Lu(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Lu(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},oc.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},oc.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,s,a,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:a,params:s,queryPadding:this.queryPadding*l},t,e,n):{}},oc.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var s=sr(e&&e.filter),a=this.tileID.canonical,l=a.z,u=a.x,c=a.y,h={z:l,x:u,y:c},p=0;p<o.length;p++){var d=o.feature(p);if(s.needGeometry){var f=Vo(d,!0);if(!s.filter(new ai(this.tileID.overscaledZ),f,this.tileID.canonical))continue}else if(!s.filter(new ai(this.tileID.overscaledZ),d))continue;var _=n.getId(d,i),m=new Ju(d,l,u,c,_);m.tile=h,t.push(m)}}},oc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},oc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},oc.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=k(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},oc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},oc.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],a=t[o];if(s&&a&&0!==Object.keys(a).length){i.update(a,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}}},oc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},oc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()},oc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},oc.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=F.now()+t},oc.prototype.setDependencies=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1)n[i[r]]=!0;this.dependencies[t]=n},oc.prototype.hasDependency=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=this.dependencies[r[n]];if(i)for(var o=0,s=e;o<s.length;o+=1)if(i[s[o]])return!0}return!1};var sc=s.performance,ac=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},sc.mark(this._marks.start)};ac.prototype.finish=function(){sc.mark(this._marks.end);var t=sc.getEntriesByName(this._marks.measure);return 0===t.length&&(sc.measure(this._marks.measure,this._marks.start,this._marks.end),t=sc.getEntriesByName(this._marks.measure),sc.clearMarks(this._marks.start),sc.clearMarks(this._marks.end),sc.clearMeasures(this._marks.measure)),t},t.Actor=Du,t.AlphaImage=ys,t.CanonicalTileID=Hu,t.CollisionBoxArray=Ki,t.Color=te,t.DEMData=Yu,t.DataConstantProperty=mi,t.DictionaryCoder=Ku,t.EXTENT=8192,t.ErrorEvent=kt,t.EvaluationParameters=ai,t.Event=It,t.Evented=Tt,t.FeatureIndex=ec,t.FillBucket=aa,t.FillExtrusionBucket=Sa,t.ImageAtlas=bl,t.ImagePosition=yl,t.LineBucket=Da,t.LngLat=Fu,t.LngLatBounds=zu,t.MercatorCoordinate=Gu,t.ONE_EM=24,t.OverscaledTileID=Wu,t.Point=i,t.Point$1=i,t.Properties=xi,t.Protobuf=Ya,t.RGBAImage=vs,t.RequestManager=G,t.RequestPerformance=ac,t.ResourceType=ft,t.SegmentVector=ao,t.SourceFeatureState=tc,t.StructArrayLayout1ui2=Wi,t.StructArrayLayout2f1f2i16=Bi,t.StructArrayLayout2i4=Ti,t.StructArrayLayout3ui6=Vi,t.StructArrayLayout4i8=Pi,t.SymbolBucket=gu,t.Texture=Lu,t.Tile=oc,t.Transitionable=ci,t.Uniform1f=xo,t.Uniform1i=bo,t.Uniform2f=wo,t.Uniform3f=Eo,t.Uniform4f=So,t.UniformColor=Co,t.UniformMatrix4f=ko,t.UnwrappedTileID=Zu,t.ValidationError=At,t.WritingMode=xl,t.ZoomHistory=qr,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=du,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,s){e(t,function(t,e){t&&(o=t),i[s]=e,0==--r&&n(o,i)})})},t.bezier=l,t.bindAll=g,t.browser=F,t.cacheEntryPossiblyAdded=function(t){++pt>lt&&(t.getActor().send("enforceCacheSizeLimit",at),pt=0)},t.clamp=c,t.clearTileCache=function(t){var e=s.caches.delete("mapbox-tiles");t&&e.catch(t).then(function(){return t()})},t.clipLine=Hl,t.clone=function(t){var e=new ss(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=x,t.clone$2=function(t){var e=new ss(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=Ga,t.config=B,t.create=function(){var t=new ss(16);return ss!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new ss(9);return ss!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new ss(4);return ss!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Zn,t.createLayout=Ii,t.createStyleLayer=function(t){return"custom"===t.type?new Iu(t):new ku[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],l=n[2];return t[0]=i*l-o*a,t[1]=o*s-r*l,t[2]=r*a-i*s,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=u,t.emitValidationErrors=Mr,t.endsWith=y,t.enforceCacheSizeLimit=function(t){ut(),tt&&tt.then(function(e){e.keys().then(function(n){for(var r=0;r<n.length-t;r++)e.delete(n[r])})})},t.evaluateSizeForFeature=zl,t.evaluateSizeForZoom=Fl,t.evaluateVariableOffset=ou,t.evented=ri,t.extend=p,t.featureFilter=sr,t.filterObject=b,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Ml,t.getAnchorJustification=su,t.getArrayBuffer=bt,t.getImage=Et,t.getJSON=function(t,e){return vt(p(t,{type:"json"}),e)},t.getRTLTextPluginStatus=ii,t.getReferrer=yt,t.getVideo=function(t,e){var n,r,i=s.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=s.document.createElement("source");n=t[o],r=void 0,(r=s.document.createElement("a")).href=n,(r.protocol!==s.document.location.protocol||r.host!==s.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.identity=as,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],d=e[11],f=e[12],_=e[13],m=e[14],g=e[15],y=n*a-r*s,v=n*l-i*s,b=n*u-o*s,x=r*l-i*a,w=r*u-o*a,E=i*u-o*l,S=c*_-h*f,C=c*m-p*f,I=c*g-d*f,k=h*m-p*_,T=h*g-d*_,P=p*g-d*m,A=y*P-v*T+b*k+x*I-w*C+E*S;return A?(t[0]=(a*P-l*T+u*k)*(A=1/A),t[1]=(i*T-r*P-o*k)*A,t[2]=(_*E-m*w+g*x)*A,t[3]=(p*w-h*E-d*x)*A,t[4]=(l*I-s*P-u*C)*A,t[5]=(n*P-i*I+o*C)*A,t[6]=(m*b-f*E-g*v)*A,t[7]=(c*E-p*b+d*v)*A,t[8]=(s*T-a*I+u*S)*A,t[9]=(r*I-n*T-o*S)*A,t[10]=(f*w-_*b+g*y)*A,t[11]=(h*b-c*w-d*y)*A,t[12]=(a*C-s*k-l*S)*A,t[13]=(n*k-r*C+i*S)*A,t[14]=(_*v-f*x-m*y)*A,t[15]=(c*x-h*v+p*y)*A,t):null},t.isChar=Gr,t.isMapboxURL=H,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.makeRequest=vt,t.mapObject=v,t.mercatorXfromLng=Vu,t.mercatorYfromLat=Uu,t.mercatorZfromAltitude=$u,t.mul=cs,t.multiply=ls,t.mvt=ba,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=qe,t.offscreenCanvasSupported=dt,t.ortho=function(t,e,n,r,i,o,s){var a=1/(e-n),l=1/(r-i),u=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(s+o)*u,t[15]=1,t},t.parseGlyphPBF=function(t){return new Ya(t).readFields(fl,[])},t.pbf=Ya,t.performSymbolLayout=function(t,e,n,r,i,o,s){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var a=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,h=c.maxZoom;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new ai(c.minZoom),s),l["text-size"].possiblyEvaluate(new ai(h),s)]}if("composite"===t.iconSizeData.kind){var p=t.iconSizeData,d=p.maxZoom;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new ai(p.minZoom),s),l["icon-size"].possiblyEvaluate(new ai(d),s)]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new ai(t.zoom+1),s),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new ai(t.zoom+1),s),u.textMaxSize=l["text-size"].possiblyEvaluate(new ai(18));for(var f=24*a.get("text-line-height"),_="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement"),m=a.get("text-keep-upright"),g=a.get("text-size"),y=function(){var o=b[v],l=a.get("text-font").evaluate(o,{},s).join(","),c=g.evaluate(o,{},s),h=u.layoutTextSize.evaluate(o,{},s),p=u.layoutIconSize.evaluate(o,{},s),d={horizontal:{},vertical:void 0},y=o.text,x=[0,0];if(y){var w=y.toString(),S=24*a.get("text-letter-spacing").evaluate(o,{},s),C=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r=n[e].charCodeAt(0),Gr.Arabic(r)||Gr["Arabic Supplement"](r)||Gr["Arabic Extended-A"](r)||Gr["Arabic Presentation Forms-A"](r)||Gr["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(w)?S:0,I=a.get("text-anchor").evaluate(o,{},s),k=a.get("text-variable-anchor");if(!k){var T=a.get("text-radial-offset").evaluate(o,{},s);x=T?ou(I,[24*T,iu]):a.get("text-offset").evaluate(o,{},s).map(function(t){return 24*t})}var P=_?"center":a.get("text-justify").evaluate(o,{},s),A=a.get("symbol-placement"),O="point"===A?24*a.get("text-max-width").evaluate(o,{},s):0,M=function(){t.allowVerticalPlacement&&Hr(w)&&(d.vertical=Sl(y,e,n,i,l,O,f,I,"left",C,x,xl.vertical,!0,A,h,c))};if(!_&&k){for(var L="auto"===P?k.map(function(t){return su(t)}):[P],N=!1,D=0;D<L.length;D++){var R=L[D];if(!d.horizontal[R])if(N)d.horizontal[R]=d.horizontal[0];else{var z=Sl(y,e,n,i,l,O,f,"center",R,C,x,xl.horizontal,!1,A,h,c);z&&(d.horizontal[R]=z,N=1===z.positionedLines.length)}}M()}else{"auto"===P&&(P=su(I));var F=Sl(y,e,n,i,l,O,f,I,P,C,x,xl.horizontal,!1,A,h,c);F&&(d.horizontal[P]=F),M(),Hr(w)&&_&&m&&(d.vertical=Sl(y,e,n,i,l,O,f,I,P,C,x,xl.vertical,!1,A,h,c))}}var B=void 0,j=!1;if(o.icon&&o.icon.name){var V=r[o.icon.name];V&&(B=function(t,e,n){var r=Ml(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}}(i[o.icon.name],a.get("icon-offset").evaluate(o,{},s),a.get("icon-anchor").evaluate(o,{},s)),j=V.sdf,void 0===t.sdfIcons?t.sdfIcons=V.sdf:t.sdfIcons!==V.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(V.pixelRatio!==t.pixelRatio||0!==a.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var U=lu(d.horizontal)||d.vertical;t.iconsInText=!!U&&U.iconsInText,(U||B)&&function(t,e,n,r,i,o,s,a,l,u,c){var h=o.textMaxSize.evaluate(e,{});void 0===h&&(h=s);var p,d=t.layers[0].layout,f=d.get("icon-offset").evaluate(e,{},c),_=lu(n.horizontal),m=s/24,g=t.tilePixelRatio*m,y=t.tilePixelRatio*h/24,v=t.tilePixelRatio*a,b=t.tilePixelRatio*d.get("symbol-spacing"),x=d.get("text-padding")*t.tilePixelRatio,w=d.get("icon-padding")*t.tilePixelRatio,S=d.get("text-max-angle")/180*Math.PI,C="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),I="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),k=d.get("symbol-placement"),T=b/2,P=d.get("icon-text-fit");r&&"none"!==P&&(t.allowVerticalPlacement&&n.vertical&&(p=Nl(r,n.vertical,P,d.get("icon-text-fit-padding"),f,m)),_&&(r=Nl(r,_,P,d.get("icon-text-fit-padding"),f,m)));var A=function(a,h){h.x<0||h.x>=8192||h.y<0||h.y>=8192||function(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_,m,g,y,v,b,x,w,S,C){var I,k,T,P,A,O=t.addToLineVertexArray(e,n),M=0,L=0,N=0,D=0,R=-1,z=-1,F={},B=po(""),j=0,V=0;if(void 0===a._unevaluatedLayout.getValue("text-radial-offset")?(j=(I=a.layout.get("text-offset").evaluate(b,{},S).map(function(t){return 24*t}))[0],V=I[1]):(j=24*a.layout.get("text-radial-offset").evaluate(b,{},S),V=iu),t.allowVerticalPlacement&&r.vertical){var U=a.layout.get("text-rotate").evaluate(b,{},S)+90;P=new Jl(l,e,u,c,h,r.vertical,p,d,f,U),s&&(A=new Jl(l,e,u,c,h,s,m,g,f,U))}if(i){var $=a.layout.get("icon-rotate").evaluate(b,{}),q="none"!==a.layout.get("icon-text-fit"),G=Zl(i,$,w,q),H=s?Zl(s,$,w,q):void 0;T=new Jl(l,e,u,c,h,i,m,g,!1,$),M=4*G.length;var Z=t.iconSizeData,W=null;"source"===Z.kind?(W=[128*a.layout.get("icon-size").evaluate(b,{})])[0]>32640&&E(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Z.kind&&((W=[128*x.compositeIconSizes[0].evaluate(b,{},S),128*x.compositeIconSizes[1].evaluate(b,{},S)])[0]>32640||W[1]>32640)&&E(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,G,W,v,y,b,!1,e,O.lineStartIndex,O.lineLength,-1,S),R=t.icon.placedSymbolArray.length-1,H&&(L=4*H.length,t.addSymbols(t.icon,H,W,v,y,b,xl.vertical,e,O.lineStartIndex,O.lineLength,-1,S),z=t.icon.placedSymbolArray.length-1)}for(var X in r.horizontal){var Y=r.horizontal[X];if(!k){B=po(Y.text);var K=a.layout.get("text-rotate").evaluate(b,{},S);k=new Jl(l,e,u,c,h,Y,p,d,f,K)}var J=1===Y.positionedLines.length;if(N+=au(t,e,Y,o,a,f,b,_,O,r.vertical?xl.horizontal:xl.horizontalOnly,J?Object.keys(r.horizontal):[X],F,R,x,S),J)break}r.vertical&&(D+=au(t,e,r.vertical,o,a,f,b,_,O,xl.vertical,["vertical"],F,z,x,S));var Q=k?k.boxStartIndex:t.collisionBoxArray.length,tt=k?k.boxEndIndex:t.collisionBoxArray.length,et=P?P.boxStartIndex:t.collisionBoxArray.length,nt=P?P.boxEndIndex:t.collisionBoxArray.length,rt=T?T.boxStartIndex:t.collisionBoxArray.length,it=T?T.boxEndIndex:t.collisionBoxArray.length,ot=A?A.boxStartIndex:t.collisionBoxArray.length,st=A?A.boxEndIndex:t.collisionBoxArray.length,at=-1,lt=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};at=lt(k,at),at=lt(P,at),at=lt(T,at);var ut=(at=lt(A,at))>-1?1:0;ut&&(at*=C/24),t.glyphOffsetArray.length>=gu.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,R,z,B,Q,tt,et,nt,rt,it,ot,st,u,N,D,M,L,ut,0,p,j,V,at)}(t,h,a,n,r,i,p,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,g,x,C,l,v,w,I,f,e,o,u,c,s)};if("line"===k)for(var O=0,M=Hl(e.geometry,0,0,8192,8192);O<M.length;O+=1)for(var L=M[O],N=0,D=Gl(L,b,S,n.vertical||_,r,24,y,t.overscaling,8192);N<D.length;N+=1){var R=D[N];_&&uu(t,_.text,T,R)||A(L,R)}else if("line-center"===k)for(var z=0,F=e.geometry;z<F.length;z+=1){var B=F[z];if(B.length>1){var j=ql(B,S,n.vertical||_,r,24,y);j&&A(B,j)}}else if("Polygon"===e.type)for(var V=0,U=ra(e.geometry,0);V<U.length;V+=1){var $=U[V],q=eu($,16);A($[0],new Dl(q.x,q.y,0))}else if("LineString"===e.type)for(var G=0,H=e.geometry;G<H.length;G+=1){var Z=H[G];A(Z,new Dl(Z[0].x,Z[0].y,0))}else if("Point"===e.type)for(var W=0,X=e.geometry;W<X.length;W+=1)for(var Y=0,K=X[W];Y<K.length;Y+=1){var J=K[Y];A([J],new Dl(J.x,J.y,0))}}(t,o,d,B,r,u,h,p,x,j,s)},v=0,b=t.features;v<b.length;v+=1)y();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=si,t.polygonIntersectsPolygon=qo,t.postMapLoadEvent=st,t.postTurnstileEvent=it,t.potpack=gl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Fr,t.registerForPluginStateChange=function(t){return t({pluginStatus:Qr,pluginURL:ti}),ri.on("pluginStateChange",t),t},t.renderColorRamp=xs,t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*a,t[1]=i*l+s*a,t[2]=r*-a+o*l,t[3]=i*-a+s*l,t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=s*i+c*r,t[6]=a*i+h*r,t[7]=l*i+p*r,t[8]=u*i-o*r,t[9]=c*i-s*r,t[10]=h*i-a*r,t[11]=p*i-l*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=s*i+c*r,t[2]=a*i+h*r,t[3]=l*i+p*r,t[4]=u*i-o*r,t[5]=c*i-s*r,t[6]=h*i-a*r,t[7]=p*i-l*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){at=t,lt=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===Qr||"loading"===Qr||"loaded"===Qr)throw new Error("setRTLTextPlugin cannot be called multiple times.");ti=F.resolveURL(t),Qr="deferred",Jr=e,ni(),n||oi()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=Pt,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=Bl,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=hs,t.translate=function(t,e,n){var r,i,o,s,a,l,u,c,h,p,d,f,_=n[0],m=n[1],g=n[2];return e===t?(t[12]=e[0]*_+e[4]*m+e[8]*g+e[12],t[13]=e[1]*_+e[5]*m+e[9]*g+e[13],t[14]=e[2]*_+e[6]*m+e[10]*g+e[14],t[15]=e[3]*_+e[7]*m+e[11]*g+e[15]):(i=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],d=e[10],f=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=d,t[11]=f,t[12]=r*_+a*m+h*g+e[12],t[13]=i*_+l*m+p*g+e[13],t[14]=o*_+u*m+d*g+e[14],t[15]=s*_+c*m+f*g+e[15]),t},t.triggerPluginCompletionEvent=ei,t.uniqueId=f,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Pr,t.validateStyle=Tr,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=ba,t.version="1.13.1",t.warnOnce=E,t.webpSupported=j,t.window=s,t.wrap=h}),r(0,function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var s=Object.keys(t).sort(),a="{",l=0;l<s.length;l++)a+=JSON.stringify(s[l])+":"+e(t[s[l]])+",";return a+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}var r=function(t){this.keyCache={},t&&this.replace(t)};r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var i=this,o=0,s=e;o<s.length;o+=1){var a=s[o];this._layerConfigs[a.id]=a;var l=this._layers[a.id]=t.createStyleLayer(a);l._featureFilter=t.featureFilter(l.filter),this.keyCache[a.id]&&delete this.keyCache[a.id]}for(var u=0,c=r;u<c.length;u+=1){var h=c[u];delete this.keyCache[h],delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var p=0,d=function(t,e){for(var r={},i=0;i<t.length;i++){var o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);var s=r[o];s||(s=r[o]=[]),s.push(t[i])}var a=[];for(var l in r)a.push(r[l]);return a}(t.values(this._layerConfigs),this.keyCache);p<d.length;p+=1){var f=d[p].map(function(t){return i._layers[t.id]}),_=f[0];if("none"!==_.visibility){var m=_.source||"",g=this.familiesBySource[m];g||(g=this.familiesBySource[m]={});var y=_.sourceLayer||"_geojsonTileLayer",v=g[y];v||(v=g[y]=[]),v.push(f)}}};var i=function(e){var n={},r=[];for(var i in e){var o=e[i],s=n[i]={};for(var a in o){var l=o[+a];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};r.push(u),s[a]={rect:u,metrics:l.metrics}}}}var c=t.potpack(r),h=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var p in e){var d=e[p];for(var f in d){var _=d[+f];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var m=n[p][f].rect;t.AlphaImage.copy(_.bitmap,h,{x:0,y:0},{x:m.x+1,y:m.y+1},_.bitmap)}}}this.image=h,this.positions=n};t.register("GlyphAtlas",i);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function s(e,n,r){for(var i=new t.EvaluationParameters(n),o=0,s=e;o<s.length;o+=1)s[o].recalculate(i,r)}function a(e,n){var r=t.getArrayBuffer(e.request,function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),n()}}o.prototype.parse=function(e,n,r,o,a){var l=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var u=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var h,p,d,f,_={},m={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},g=n.familiesBySource[this.source];for(var y in g){var v=e.layers[y];if(v){1===v.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=u.encode(y),x=[],w=0;w<v.length;w++){var E=v.feature(w),S=c.getId(E,y);x.push({feature:E,id:S,index:w,sourceLayerIndex:b})}for(var C=0,I=g[y];C<I.length;C+=1){var k=I[C],T=k[0];T.minzoom&&this.zoom<Math.floor(T.minzoom)||T.maxzoom&&this.zoom>=T.maxzoom||"none"!==T.visibility&&(s(k,this.zoom,r),(_[T.id]=T.createBucket({index:c.bucketLayerIDs.length,layers:k,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,m,this.tileID.canonical),c.bucketLayerIDs.push(k.map(function(t){return t.id})))}}}var P=t.mapObject(m.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(P).length?o.send("getGlyphs",{uid:this.uid,stacks:P},function(t,e){h||(h=t,p=e,M.call(l))}):p={};var A=Object.keys(m.iconDependencies);A.length?o.send("getImages",{icons:A,source:this.source,tileID:this.tileID,type:"icons"},function(t,e){h||(h=t,d=e,M.call(l))}):d={};var O=Object.keys(m.patternDependencies);function M(){if(h)return a(h);if(p&&d&&f){var e=new i(p),n=new t.ImageAtlas(d,f);for(var o in _){var l=_[o];l instanceof t.SymbolBucket?(s(l.layers,this.zoom,r),t.performSymbolLayout(l,p,e.positions,d,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof t.LineBucket||l instanceof t.FillBucket||l instanceof t.FillExtrusionBucket)&&(s(l.layers,this.zoom,r),l.addFeatures(m,this.tileID.canonical,n.patternPositions))}this.status="done",a(null,{buckets:t.values(_).filter(function(t){return!t.isEmpty()}),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}O.length?o.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"patterns"},function(t,e){h||(h=t,f=e,M.call(l))}):f={},M.call(this)};var l=function(t,e,n,r){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||a,this.loading={},this.loaded={}};l.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var s=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),a=this.loading[i]=new o(e);a.abort=this.loadVectorData(e,function(e,o){if(delete r.loading[i],e||!o)return a.status="done",r.loaded[i]=a,n(e);var l=o.rawData,u={};o.expires&&(u.expires=o.expires),o.cacheControl&&(u.cacheControl=o.cacheControl);var c={};if(s){var h=s.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}a.vectorTile=o.vectorTile,a.parse(o.vectorTile,r.layerIndex,r.availableImages,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:l.slice(0)},r,u,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},l.prototype.reloadTile=function(t,e){var n=this,r=this.loaded,i=t.uid,o=this;if(r&&r[i]){var s=r[i];s.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,r){var i=s.reloadCallback;i&&(delete s.reloadCallback,s.parse(s.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),e(t,r)};"parsing"===s.status?s.reloadCallback=a:"done"===s.status&&(s.vectorTile?s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}},l.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},l.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var u=t.window.ImageBitmap,c=function(){this.loaded={}};function h(t,e){if(0!==t.length){p(t[0],e);for(var n=1;n<t.length;n++)p(t[n],!e)}}function p(t,e){for(var n=0,r=0,i=t.length,o=i-1;r<i;o=r++)n+=(t[r][0]-t[o][0])*(t[o][1]+t[r][1]);n>=0!=!!e&&t.reverse()}c.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,s=u&&o instanceof u?this.getImageData(o):o,a=new t.DEMData(r,s,i);this.loaded=this.loaded||{},this.loaded[r]=a,n(null,a)},c.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},c.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var d=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point$1(i[0],i[1])])}return e}for(var o=[],s=0,a=this._feature.geometry;s<a.length;s+=1){for(var l=[],u=0,c=a[s];u<c.length;u+=1){var h=c[u];l.push(new t.Point$1(h[0],h[1]))}o.push(l)}return o},f.prototype.toGeoJSON=function(t,e,n){return d.call(this,t,e,n)};var _=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};_.prototype.feature=function(t){return new f(this._features[t])};var m=t.vectorTile.VectorTileFeature,g=y;function y(t,e){this.options=e||{},this.features=t,this.length=t.length}function v(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}y.prototype.feature=function(t){return new v(this.features[t],this.options.extent)},v.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},v.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var l=s[a];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},v.prototype.toGeoJSON=m.prototype.toGeoJSON;var b=w,x=g;function w(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,E,t.layers[n])}(e,n),n.finish()}function E(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,S,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,P,o[n])}function S(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,C,t),e.writeVarintField(3,n.type),e.writeMessage(4,T,n)}function C(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,s=t.valuecache;for(var a in n.properties){var l=o[a];void 0===l&&(r.push(a),o[a]=l=r.length-1),e.writeVarint(l);var u=n.properties[a],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,p=s[h];void 0===p&&(i.push(u),s[h]=p=i.length-1),e.writeVarint(p)}}function I(t,e){return(e<<3)+(7&t)}function k(t){return t<<1^t>>31}function T(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,s=n.length,a=0;a<s;a++){var l=n[a],u=1;1===r&&(u=l.length),e.writeVarint(I(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&e.writeVarint(I(2,c-1));var p=l[h].x-i,d=l[h].y-o;e.writeVarint(k(p)),e.writeVarint(k(d)),i+=p,o+=d}3===r&&e.writeVarint(I(7,1))}}function P(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function A(t,e,n,r){O(t,n,r),O(e,2*n,2*r),O(e,2*n+1,2*r+1)}function O(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function M(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}b.fromVectorTileJs=w,b.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new g(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return w({layers:n})},b.GeoJSONWrapper=x;var L=function(t){return t[0]},N=function(t){return t[1]},D=function(t,e,n,r,i){void 0===e&&(e=L),void 0===n&&(n=N),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),a=this.coords=new i(2*t.length),l=0;l<t.length;l++)s[l]=l,a[2*l]=e(t[l]),a[2*l+1]=n(t[l]);!function t(e,n,r,i,o,s){if(!(o-i<=r)){var a=i+o>>1;!function t(e,n,r,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,l=r-i+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-l*c/a+h)),Math.min(o,Math.floor(r+(a-l)*c/a+h)),s)}var p=n[2*r+s],d=i,f=o;for(A(e,n,i,r),n[2*o+s]>p&&A(e,n,i,o);d<f;){for(A(e,n,d,f),d++,f--;n[2*d+s]<p;)d++;for(;n[2*f+s]>p;)f--}n[2*i+s]===p?A(e,n,i,f):A(e,n,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}(e,n,a,i,o,s%2),t(e,n,r,i,a-1,s+1),t(e,n,r,a+1,o,s+1)}}(s,a,r,0,s.length-1,0)};D.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,s){for(var a,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),d=u.pop();if(p-d<=s)for(var f=d;f<=p;f++)l=e[2*f+1],(a=e[2*f])>=n&&a<=i&&l>=r&&l<=o&&c.push(t[f]);else{var _=Math.floor((d+p)/2);l=e[2*_+1],(a=e[2*_])>=n&&a<=i&&l>=r&&l<=o&&c.push(t[_]);var m=(h+1)%2;(0===h?n<=a:r<=l)&&(u.push(d),u.push(_-1),u.push(m)),(0===h?i>=a:o>=l)&&(u.push(_+1),u.push(p),u.push(m))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},D.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var s=[0,t.length-1,0],a=[],l=i*i;s.length;){var u=s.pop(),c=s.pop(),h=s.pop();if(c-h<=o)for(var p=h;p<=c;p++)M(e[2*p],e[2*p+1],n,r)<=l&&a.push(t[p]);else{var d=Math.floor((h+c)/2),f=e[2*d],_=e[2*d+1];M(f,_,n,r)<=l&&a.push(t[d]);var m=(u+1)%2;(0===u?n-i<=f:r-i<=_)&&(s.push(h),s.push(d-1),s.push(m)),(0===u?n+i>=f:r+i>=_)&&(s.push(d+1),s.push(c),s.push(m))}}return a}(this.ids,this.coords,t,e,n,this.nodeSize)};var R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},z=function(t){this.options=q(Object.create(R),t),this.trees=new Array(this.options.maxZoom+1)};function F(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function B(t,e){var n=t.geometry.coordinates,r=n[1];return{x:U(n[0]),y:$(r),zoom:1/0,index:e,parentId:-1}}function j(t){return{type:"Feature",id:t.id,properties:V(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,r}function V(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return q(q({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function U(t){return t/360+.5}function $(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function q(t,e){for(var n in e)t[n]=e[n];return t}function G(t){return t.x}function H(t){return t.y}function Z(t,e,n,r,i,o){var s=i-n,a=o-r;if(0!==s||0!==a){var l=((t-n)*s+(e-r)*a)/(s*s+a*a);l>1?(n=i,r=o):l>0&&(n+=s*l,r+=a*l)}return(s=t-n)*s+(a=e-r)*a}function W(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)X(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)X(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)X(t,e[r][i])}(i),i}function X(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Y(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,s=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)K(i,a);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)K(i[u],a);else if("LineString"===o)J(i,a,s,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<i.length;u++)J(i[u],a=[],s,!1),t.push(W(l,"LineString",a,e.properties));return}Q(i,a,s,!1)}else if("Polygon"===o)Q(i,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)Y(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];Q(i[u],c,s,!0),a.push(c)}}t.push(W(l,o,a,e.properties))}}function K(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function J(t,e,n,r){for(var i,o,s=0,a=0;a<t.length;a++){var l=tt(t[a][0]),u=et(t[a][1]);e.push(l),e.push(u),e.push(0),a>0&&(s+=r?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,s=i,a=r-n>>1,l=r-n,u=e[n],c=e[n+1],h=e[r],p=e[r+1],d=n+3;d<r;d+=3){var f=Z(e[d],e[d+1],u,c,h,p);if(f>s)o=d,s=f;else if(f===s){var _=Math.abs(d-a);_<l&&(o=d,l=_)}}s>i&&(o-n>3&&t(e,n,o,i),e[o+2]=s,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function Q(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];J(t[i],o,n,r),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function nt(t,e,n,r,i,o,s,a){if(r/=e,o>=(n/=e)&&s<r)return t;if(s<n||o>=r)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,p=c.type,d=0===i?c.minX:c.minY,f=0===i?c.maxX:c.maxY;if(d>=n&&f<r)l.push(c);else if(!(f<n||d>=r)){var _=[];if("Point"===p||"MultiPoint"===p)rt(h,_,n,r,i);else if("LineString"===p)it(h,_,n,r,i,!1,a.lineMetrics);else if("MultiLineString"===p)st(h,_,n,r,i,!1);else if("Polygon"===p)st(h,_,n,r,i,!0);else if("MultiPolygon"===p)for(var m=0;m<h.length;m++){var g=[];st(h[m],g,n,r,i,!0),g.length&&_.push(g)}if(_.length){if(a.lineMetrics&&"LineString"===p){for(m=0;m<_.length;m++)l.push(W(c.id,p,_[m],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===_.length?(p="LineString",_=_[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===_.length?"Point":"MultiPoint"),l.push(W(c.id,p,_,c.tags))}}}return l.length?l:null}function rt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var s=t[o+i];s>=n&&s<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function it(t,e,n,r,i,o,s){for(var a,l,u=ot(t),c=0===i?lt:ut,h=t.start,p=0;p<t.length-3;p+=3){var d=t[p],f=t[p+1],_=t[p+2],m=t[p+3],g=t[p+4],y=0===i?d:f,v=0===i?m:g,b=!1;s&&(a=Math.sqrt(Math.pow(d-m,2)+Math.pow(f-g,2))),y<n?v>n&&(l=c(u,d,f,m,g,n),s&&(u.start=h+a*l)):y>r?v<r&&(l=c(u,d,f,m,g,r),s&&(u.start=h+a*l)):at(u,d,f,_),v<n&&y>=n&&(l=c(u,d,f,m,g,n),b=!0),v>r&&y<=r&&(l=c(u,d,f,m,g,r),b=!0),!o&&b&&(s&&(u.end=h+a*l),e.push(u),u=ot(t)),s&&(h+=a)}var x=t.length-3;d=t[x],f=t[x+1],_=t[x+2],(y=0===i?d:f)>=n&&y<=r&&at(u,d,f,_),x=u.length-3,o&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&at(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function st(t,e,n,r,i,o){for(var s=0;s<t.length;s++)it(t[s],e,n,r,i,o,!1)}function at(t,e,n,r){t.push(e),t.push(n),t.push(r)}function lt(t,e,n,r,i,o){var s=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*s),t.push(1),s}function ut(t,e,n,r,i,o){var s=(o-n)/(i-n);return t.push(e+(r-e)*s),t.push(o),t.push(1),s}function ct(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],s=o.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)i=ht(o.geometry,e);else if("MultiLineString"===s||"Polygon"===s){i=[];for(var a=0;a<o.geometry.length;a++)i.push(ht(o.geometry[a],e))}else if("MultiPolygon"===s)for(i=[],a=0;a<o.geometry.length;a++){for(var l=[],u=0;u<o.geometry[a].length;u++)l.push(ht(o.geometry[a][u],e));i.push(l)}n.push(W(o.id,s,i,o.tags))}return n}function ht(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function pt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,s=t.x,a=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(dt(u[r],u[r+1],e,o,s,a));else for(r=0;r<u.length;r++){var h=[];for(i=0;i<u[r].length;i+=2)h.push(dt(u[r][i],u[r][i+1],e,o,s,a));l.geometry.push(h)}}return t.transformed=!0,t}function dt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function ft(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<t.length;a++){s.numFeatures++,_t(s,t[a],o,i);var l=t[a].minX,u=t[a].minY,c=t[a].maxX,h=t[a].maxY;l<s.minX&&(s.minX=l),u<s.minY&&(s.minY=u),c>s.maxX&&(s.maxX=c),h>s.maxY&&(s.maxY=h)}return s}function _t(t,e,n,r){var i=e.geometry,o=e.type,s=[];if("Point"===o||"MultiPoint"===o)for(var a=0;a<i.length;a+=3)s.push(i[a]),s.push(i[a+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)mt(s,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(a=0;a<i.length;a++)mt(s,i[a],t,n,"Polygon"===o,0===a);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(a=0;a<u.length;a++)mt(s,u[a],t,n,!0,0===a)}if(s.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(p.id=e.id),t.features.push(p)}}function mt(t,e,n,r,i,o){var s=r*r;if(r>0&&e.size<(i?s:r))n.numPoints+=e.length/3;else{for(var a=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>s)&&(n.numSimplified++,a.push(e[l]),a.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var s=t[r],a=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=s,t[i-1-r]=a}}(a,o),t.push(a)}}function gt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Y(n,t.features[r],e,r);else Y(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=nt(t,1,-1-n,n,0,-1,2,e),o=nt(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=nt(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=ct(i,1).concat(r)),o&&(r=r.concat(ct(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function yt(t,e,n){return 32*((1<<t)*n+e)+t}function vt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new _(r.features),o=b(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}z.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var s="prepare "+t.length+" points";n&&console.time(s),this.points=t;for(var a=[],l=0;l<t.length;l++)t[l].geometry&&a.push(B(t[l],l));this.trees[i+1]=new D(a,G,H,o,Float32Array),n&&console.timeEnd(s);for(var u=i;u>=r;u--){var c=+Date.now();a=this._cluster(a,u),this.trees[u]=new D(a,G,H,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",u,a.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},z.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var s=this.getClusters([n,r,180,o],e),a=this.getClusters([-180,r,i,o],e);return s.concat(a)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,h=l.range(U(n),$(o),U(i),$(r));c<h.length;c+=1){var p=l.points[h[c]];u.push(p.numPoints?j(p):this.points[p.index])}return u},z.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=[],l=0,u=i.within(o.x,o.y,s);l<u.length;l+=1){var c=i.points[u[l]];c.parentId===t&&a.push(c.numPoints?j(c):this.points[c.index])}if(0===a.length)throw new Error(r);return a},z.prototype.getLeaves=function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r},z.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,s=o.radius/o.extent,a=(n-s)/i,l=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((e-s)/i,a,(e+1+s)/i,l),r.points,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-s/i,a,1,l),r.points,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,a,s/i,l),r.points,-1,n,i,u),u.features.length?u:null},z.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},z.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,s=this.getChildren(e);o<s.length;o+=1){var a=s[o],l=a.properties;if(l&&l.cluster?i+l.point_count<=r?i+=l.point_count:i=this._appendLeaves(t,l.cluster_id,n,r,i):i<r?i++:t.push(a),t.length===n)break}return i},z.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var s=0,a=t;s<a.length;s+=1){var l=e[a[s]],u=l.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(l.x*i-n)),Math.round(this.options.extent*(l.y*i-r))]],tags:u?V(l):this.points[l.index].properties},h=void 0;u?h=l.id:this.options.generateId?h=l.index:this.points[l.index].id&&(h=this.points[l.index].id),void 0!==h&&(c.id=h),o.features.push(c)}},z.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},z.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.reduce,o=r.minPoints,s=r.radius/(r.extent*Math.pow(2,e)),a=0;a<t.length;a++){var l=t[a];if(!(l.zoom<=e)){l.zoom=e;for(var u=this.trees[e+1],c=u.within(l.x,l.y,s),h=l.numPoints||1,p=h,d=0,f=c;d<f.length;d+=1){var _=u.points[f[d]];_.zoom>e&&(p+=_.numPoints||1)}if(p>=o){for(var m=l.x*h,g=l.y*h,y=i&&h>1?this._map(l,!0):null,v=(a<<5)+(e+1)+this.points.length,b=0,x=c;b<x.length;b+=1){var w=u.points[x[b]];if(!(w.zoom<=e)){w.zoom=e;var E=w.numPoints||1;m+=w.x*E,g+=w.y*E,w.parentId=v,i&&(y||(y=this._map(l,!0)),i(y,this._map(w)))}}l.parentId=v,n.push(F(m/p,g/p,v,p,y))}else if(n.push(l),p>1)for(var S=0,C=c;S<C.length;S+=1){var I=u.points[C[S]];I.zoom<=e||(I.zoom=e,n.push(I))}}}return n},z.prototype._getOriginId=function(t){return t-this.points.length>>5},z.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},z.prototype._map=function(t,e){if(t.numPoints)return e?q({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?q({},r):r},gt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gt.prototype.splitTile=function(t,e,n,r,i,o,s){for(var a=[t,e,n,r],l=this.options,u=l.debug;a.length;){r=a.pop(),n=a.pop(),e=a.pop(),t=a.pop();var c=1<<e,h=yt(e,n,r),p=this.tiles[h];if(!p&&(u>1&&console.time("creation"),p=this.tiles[h]=ft(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=t,i){if(e===l.maxZoom||e===i)continue;var f=1<<i-e;if(n!==Math.floor(o/f)||r!==Math.floor(s/f))continue}else if(e===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==t.length){u>1&&console.time("clipping");var _,m,g,y,v,b,x=.5*l.buffer/l.extent,w=.5-x,E=.5+x,S=1+x;_=m=g=y=null,v=nt(t,c,n-x,n+E,0,p.minX,p.maxX,l),b=nt(t,c,n+w,n+S,0,p.minX,p.maxX,l),t=null,v&&(_=nt(v,c,r-x,r+E,1,p.minY,p.maxY,l),m=nt(v,c,r+w,r+S,1,p.minY,p.maxY,l),v=null),b&&(g=nt(b,c,r-x,r+E,1,p.minY,p.maxY,l),y=nt(b,c,r+w,r+S,1,p.minY,p.maxY,l),b=null),u>1&&console.timeEnd("clipping"),a.push(_||[],e+1,2*n,2*r),a.push(m||[],e+1,2*n,2*r+1),a.push(g||[],e+1,2*n+1,2*r),a.push(y||[],e+1,2*n+1,2*r+1)}}},gt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var s=1<<t,a=yt(t,e=(e%s+s)%s,n);if(this.tiles[a])return pt(this.tiles[a],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[yt(u,c,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,h),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[a]?pt(this.tiles[a],i):null):null};var bt=function(e){function n(t,n,r,i){e.call(this,t,n,r,vt),i&&(this.loadGeoJSON=i)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,function(o,s){if(o||!s)return n(o);if("object"!=typeof s)return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)h(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)h(e.coordinates[r],n);return e}(s,!0);try{if(r.filter){var a=t.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===a.result)throw new Error(a.value.map(function(t){return t.key+": "+t.message}).join(", "));var l=s.features.filter(function(t){return a.value.evaluate({zoom:0},t)});s={type:"FeatureCollection",features:l}}e._geoJSONIndex=r.cluster?new z(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},s={accumulated:null,zoom:0},a={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u+=1){var h=c[u],p=r[h],d=p[0],f=t.createExpression(p[1]),_=t.createExpression("string"==typeof d?[d,["accumulated"],["get",h]]:d);i[h]=f.value,o[h]=_.value}return n.map=function(t){a.properties=t;for(var e={},n=0,r=l;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(s,a)}return e},n.reduce=function(t,e){a.properties=e;for(var n=0,r=l;n<r.length;n+=1){var i=r[n];s.accumulated=t[i],t[i]=o[i].evaluate(s,a)}},n}(r)).load(s.features):function(t,e){return new gt(t,e)}(s,r.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var u={};if(i){var c=i.finish();c&&(u.resourceTiming={},u.resourceTiming[r.source]=JSON.parse(JSON.stringify(c)))}n(null,u)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(l),xt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return xt.prototype.setReferrer=function(t,e){this.referrer=e},xt.prototype.setImages=function(t,e,n){for(var r in this.availableImages[t]=e,this.workerSources[t]){var i=this.workerSources[t][r];for(var o in i)i[o].availableImages=e}n()},xt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},xt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},xt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},xt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},xt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},xt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},xt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},xt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},xt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},xt.prototype.syncRTLPluginState=function(e,n,r){try{t.plugin.setState(n);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+i),o)}}catch(t){r(t.toString())}},xt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},xt.prototype.getWorkerSource=function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]},xt.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt}),r(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!n(t)}function n(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[n=t&&t.failIfMajorPerformanceCaveat]&&(r[n]=function(t){var n=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t);if(!n)return!1;var r=n.createShader(n.VERTEX_SHADER);return!(!r||n.isContextLost())&&(n.shaderSource(r,"void main() {}"),n.compileShader(r),!0===n.getShaderParameter(r,n.COMPILE_STATUS))}(n)),r[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=n);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(e,n,r){var i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},r=t.window.document&&t.window.document.documentElement.style;function i(t){if(!r)return t[0];for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var o,s=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&s&&(o=r[s],r[s]="none")},n.enableDrag=function(){r&&s&&(r[s]=o)};var a=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[a]=e};var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",u,u),t.window.removeEventListener("test",u,u)}catch(t){l=!1}n.addEventListener=function(t,e,n,r){void 0===r&&(r={}),t.addEventListener(e,n,"passive"in r&&l?r:r.capture)},n.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),t.removeEventListener(e,n,"passive"in r&&l?r:r.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function h(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,n){var r=e.getBoundingClientRect();return new t.Point(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},n.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o=0;o<n.length;o++)i.push(new t.Point(n[o].clientX-r.left-e.clientLeft,n[o].clientY-r.top-e.clientTop));return i},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var p=function(e){function n(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},n.prototype.getImage=function(t){return this.images[t]},n.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},n.prototype._validate=function(e,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),r=!1),r},n.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},n.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},n.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},n.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},n.prototype._notify=function(e,n){for(var r={},i=0,o=e;i<o.length;i+=1){var s=o[i];this.images[s]||this.fire(new t.Event("styleimagemissing",{id:s}));var a=this.images[s];a?r[s]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf,version:a.version,stretchX:a.stretchX,stretchY:a.stretchY,content:a.content,hasRenderCallback:Boolean(a.userImage&&a.userImage.render)}:t.warnOnce('Image "'+s+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},n.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},n.prototype.getPattern=function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},n.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,s=this.atlasImage;for(var a in s.resize({width:i||1,height:o||1}),this.patterns){var l=this.patterns[a].bin,u=l.x+1,c=l.y+1,h=this.images[a].data,p=h.width,d=h.height;t.RGBAImage.copy(h,s,{x:0,y:0},{x:u,y:c},{width:p,height:d}),t.RGBAImage.copy(h,s,{x:0,y:d-1},{x:u,y:c-1},{width:p,height:1}),t.RGBAImage.copy(h,s,{x:0,y:0},{x:u,y:c+d},{width:p,height:1}),t.RGBAImage.copy(h,s,{x:p-1,y:0},{x:u-1,y:c},{width:1,height:d}),t.RGBAImage.copy(h,s,{x:0,y:0},{x:u+p,y:c},{width:1,height:d})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];h(i)&&this.updateImage(r,i)}}},n}(t.Evented),d=m,f=m,_=1e20;function m(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var s=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.d=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Int16Array(s),this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(t,e,n,r,i,o,s){for(var a=0;a<e;a++){for(var l=0;l<n;l++)r[l]=t[l*e+a];for(y(r,i,o,s,n),l=0;l<n;l++)t[l*e+a]=i[l]}for(l=0;l<n;l++){for(a=0;a<e;a++)r[a]=t[l*e+a];for(y(r,i,o,s,e),a=0;a<e;a++)t[l*e+a]=Math.sqrt(i[a])}}function y(t,e,n,r,i){n[0]=0,r[0]=-_,r[1]=+_;for(var o=1,s=0;o<i;o++){for(var a=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);a<=r[s];)s--,a=(t[o]+o*o-(t[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);n[++s]=o,r[s]=a,r[s+1]=+_}for(o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;e[o]=(o-n[s])*(o-n[s])+t[n[s]]}}m.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?_:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?_:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},d.default=f;var v=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};v.prototype.setURL=function(t){this.url=t},v.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var s=0,a=e[o];s<a.length;s+=1)i.push({stack:o,id:a[s]});t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{},ranges:{}});var s=o.glyphs[i];if(void 0===s){if(s=r._tinySDF(o,n,i))return o.glyphs[i]=s,void e(null,{stack:n,id:i,glyph:s});var a=Math.floor(i/256);if(256*a>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[a])e(null,{stack:n,id:i,glyph:s});else{var l=o.requests[a];l||(l=o.requests[a]=[],v.loadGlyphRange(n,a,r.url,r.requestManager,function(t,e){if(e){for(var n in e)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);o.ranges[a]=!0}for(var i=0,s=l;i<s.length;i+=1)(0,s[i])(t,e);delete o.requests[a]})),l.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:s})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var s=o[i],a=s.stack,l=s.id,u=s.glyph;(r[a]||(r[a]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}n(null,r)}})},v.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},v.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o=e.tinySDF;if(!o){var s="400";/bold/i.test(n)?s="900":/medium/i.test(n)?s="500":/light/i.test(n)&&(s="200"),o=e.tinySDF=new v.TinySDF(24,3,8,.25,i,s)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(e,n,r,i,o){var s=256*n,a=s+255,l=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",s+"-"+a),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,s=t.parseGlyphPBF(n);i<s.length;i+=1){var a=s[i];r[a.id]=a}o(null,r)}})},v.TinySDF=d;var b=function(){this.specification=t.styleSpec.light.position};b.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},b.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var x=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new b,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(x),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),E=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},E.prototype.getDashRanges=function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,s=!0;r.push({left:i,right:o,isDash:s,zeroLength:0===t[0]});for(var a=t[0],l=1;l<t.length;l++){var u=t[l];r.push({left:i=a*n,right:o=(a+=u)*n,isDash:s=!s,zeroLength:0===u})}return r},E.prototype.addRoundDash=function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),s=0,a=t[s],l=0;l<this.width;l++){l/a.right>1&&(a=t[++s]);var u=Math.abs(l-a.left),c=Math.abs(l-a.right),h=Math.min(u,c),p=void 0,d=i/n*(r+1);if(a.isDash){var f=r-Math.abs(d);p=Math.sqrt(h*h+f*f)}else p=r-Math.sqrt(h*h+d*d);this.data[o+l]=Math.max(0,Math.min(255,p+128))}},E.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}var i=t[0],o=t[t.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var s=this.width*this.nextRow,a=0,l=t[a],u=0;u<this.width;u++){u/l.right>1&&(l=t[++a]);var c=Math.abs(u-l.left),h=Math.abs(u-l.right),p=Math.min(c,h);this.data[s+u]=Math.max(0,Math.min(255,(l.isDash?p:-p)+128))}},E.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,s=0;s<e.length;s++)o+=e[s];if(0!==o){var a=this.width/o,l=this.getDashRanges(e,this.width,a);n?this.addRoundDash(l,a,r):this.addRegularDash(l)}var u={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,u},E.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var S=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var s=new e.Actor(i[o],r,this.id);s.name="Worker "+o,this.actors.push(s)}};function C(e,n,r){var i=function(i,o){if(i)return r(i);if(o){var s=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(s.vectorLayers=o.vector_layers,s.vectorLayerIds=s.vectorLayers.map(function(t){return t.id})),s.tiles=n.canonicalizeTileset(s,e.url),r(null,s)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}S.prototype.broadcast=function(e,n,r){t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r=r||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=t.Actor;var I=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};I.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},I.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),s=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<s};var k=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(r,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new I(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},n.prototype.setTiles=function(t){var e=this;return this.setSourceProperty(function(){e._options.tiles=t}),this},n.prototype.setUrl=function(t){var e=this;return this.setSourceProperty(function(){e.url=t,e._options.url=t}),this},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,o.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),T=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new I(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var s=r.map.painter.context,a=s.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(s,o,a.RGBA,{useMipmap:!0}),e.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),s.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),P=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),(function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var s=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:s,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",a,i.bind(this)))}}).bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,s=(n.x+1+r)%r,a=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,s,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,s,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,a,n.z,s,n.y+1).key]={backfilled:!1}),l},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(T),A=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var s=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*s,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*s,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.EXTENT,radius:(r.clusterRadius||50)*s,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),e(t))})},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var r=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))})},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),O=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),M=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(i,o){r._loaded=!0,i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())})},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,s=0,a=e;s<a.length;s+=1){var l=a[s];n=Math.min(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.x),o=Math.max(o,l.y)}var u=Math.max(i-n,o-r),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((n+i)/2*h),Math.floor((r+o)/2*h))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map(function(t){return n.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,O.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),L=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(i[r],t.ResourceType.Source).url);t.getVideo(this.urls,function(n,r){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,O.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(M),N=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,O.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(M),D={vector:k,raster:T,"raster-dem":P,geojson:A,video:L,image:M,canvas:N};function R(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function z(t,e,n,r,i,o){var s=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var s in e){var a=e[s];if(a.source===n&&"fill-extrusion"===a.type)return!0}return!1}(i&&i.layers,e,t.id),a=o.maxPitchScaleFactor(),l=t.tilesIn(r,a,s);l.sort(F);for(var u=[],c=0,h=l;c<h.length;c+=1){var p=h[c];u.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,n,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,i,o,a,R(t.transform,p.tileID))})}var d=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],s=o.queryResults,a=o.wrappedTileID,l=n[a]=n[a]||{};for(var u in s)for(var c=s[u],h=l[u]=l[u]||{},p=e[u]=e[u]||[],d=0,f=c;d<f.length;d+=1){var _=f[d];h[_.featureIndex]||(h[_.featureIndex]=!0,p.push(_))}}return e}(u);for(var f in d)d[f].forEach(function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r});return d}function F(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var B=function(t,e){this.max=t,this.onRemove=e,this.reset()};B.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},B.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this},B.prototype.has=function(t){return t.wrapped().key in this.data},B.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},B.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},B.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},B.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},B.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},B.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},B.prototype.filter=function(t){var e=[];for(var n in this.data)for(var r=0,i=this.data[n];r<i.length;r+=1){var o=i[r];t(o.value)||e.push(o)}for(var s=0,a=e;s<a.length;s+=1){var l=a[s];this.remove(l.value.tileID,l)}};var j=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};j.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},j.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var V={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},U=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};U.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},U.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},U.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},U.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[V[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},U.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var $=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};$.prototype.get=function(){return this.current},$.prototype.set=function(t){},$.prototype.getDefault=function(){return this.default},$.prototype.setDefault=function(){this.set(this.default)};var q=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}($),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}($),H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}($),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}($),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}($),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}($),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}($),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}($),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}($),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}($),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}($),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}($),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}($),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}($),it=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}($),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}($),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}($),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}($),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}($),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}($),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}($),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}($),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}($),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}($),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}($),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}($),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}($),gt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}($),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}($),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}($),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}($),xt=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}($),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(xt),Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(xt),St=function(t,e,n,r){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,i),r&&(this.depthAttachment=new Et(t,i))};St.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var Ct=function(t,e,n){this.func=t,this.mask=e,this.range=n};Ct.ReadOnly=!1,Ct.ReadWrite=!0,Ct.disabled=new Ct(519,Ct.ReadOnly,[0,1]);var It=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};It.disabled=new It({func:519,mask:0},0,0,7680,7680,7680);var kt=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};kt.disabled=new kt(kt.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),kt.unblended=new kt(kt.Replace,t.Color.transparent,[!0,!0,!0,!0]),kt.alphaBlended=new kt([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Tt=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Tt.disabled=new Tt(!1,1029,2305),Tt.backCCW=new Tt(!0,1029,2305);var Pt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new q(this),this.clearDepth=new G(this),this.clearStencil=new H(this),this.colorMask=new Z(this),this.depthMask=new W(this),this.stencilMask=new X(this),this.stencilFunc=new Y(this),this.stencilOp=new K(this),this.stencilTest=new J(this),this.depthRange=new Q(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new nt(this),this.blendFunc=new rt(this),this.blendColor=new it(this),this.blendEquation=new ot(this),this.cullFace=new st(this),this.cullFaceSide=new at(this),this.frontFace=new lt(this),this.program=new ut(this),this.activeTexture=new ct(this),this.viewport=new ht(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new ft(this),this.bindVertexBuffer=new _t(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new gt(this),this.pixelStoreUnpack=new yt(this),this.pixelStoreUnpackPremultiplyAlpha=new vt(this),this.pixelStoreUnpackFlipY=new bt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};Pt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Pt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Pt.prototype.createIndexBuffer=function(t,e){return new j(this,t,e)},Pt.prototype.createVertexBuffer=function(t,e,n){return new U(this,t,e,n)},Pt.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},Pt.prototype.createFramebuffer=function(t,e,n){return new St(this,t,e,n)},Pt.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Pt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Pt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Pt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Pt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,kt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Pt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var At=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=function(e,n,r,i){var o=new D[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,r,i,this),this._tiles={},this._cache=new B(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map(function(t){return t.tileID}).sort(Ot).map(function(t){return t.key})},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,e)&&r.push(this._tiles[i]);return e?r.sort(function(e,r){var i=e.tileID,o=r.tileID,s=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),a=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||a.y-s.y||a.x-s.x}).map(function(t){return t.tileID.key}):r.map(function(t){return t.tileID}).sort(Ot).map(function(t){return t.key})},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var s=o.tileID;o&&o.tileID.overscaledZ>e+1;){var a=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[a.key])&&o.hasData()&&(s=a)}for(var l=s;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){r[s.key]=s;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var s in this._tiles)this._setTileReloadTimer(s,this._tiles[s])}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o=e.coveringZoomLevel(this._source),s=Math.max(o-n.maxOverzooming,this._source.minzoom),a=Math.max(o+n.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(i,o);if(Mt(this._source.type)){for(var u={},c={},h=0,p=Object.keys(l);h<p.length;h+=1){var d=p[h],f=l[d],_=this._tiles[d];if(_&&!(_.fadeEndTime&&_.fadeEndTime<=t.browser.now())){var m=this.findLoadedParent(f,s);m&&(this._addTile(m.tileID),u[m.tileID.key]=m.tileID),c[d]=f}}for(var g in this._retainLoadedChildren(c,o,a,l),u)l[g]||(this._coveredTiles[g]=!0,l[g]=u[g])}for(var y in l)this._tiles[y].clearFadeHold();for(var v=0,b=t.keysDifference(this._tiles,l);v<b.length;v+=1){var x=b[v],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),s=Math.max(e+n.maxUnderzooming,this._source.minzoom),a={},l=0,u=t;l<u.length;l+=1){var c=u[l],h=this._addTile(c);r[c.key]=c,h.hasData()||e<this._source.maxzoom&&(a[c.key]=c)}this._retainLoadedChildren(a,e,s,r);for(var p=0,d=t;p<d.length;p+=1){var f=d[p],_=this._tiles[f.key];if(!_.hasData()){if(e+1>this._source.maxzoom){var m=f.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){r[m.key]=m;continue}}else{var y=f.children(this._source.maxzoom);if(r[y[0].key]&&r[y[1].key]&&r[y[2].key]&&r[y[3].key])continue}for(var v=_.wasRequested(),b=f.overscaledZ-1;b>=o;--b){var x=f.scaledTo(b);if(i[x.key])break;if(i[x.key]=!0,!(_=this.getTile(x))&&v&&(_=this._addTile(x)),_&&(r[x.key]=x,v=_.wasRequested(),_.hasData()))break}}}return r},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,s=e;o<s.length;o+=1)this._loadedParentTiles[s[o]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,r){var i=this,o=[],s=this.transform;if(!s)return o;for(var a=r?s.getCameraQueryGeometry(e):e,l=e.map(function(t){return s.pointCoordinate(t)}),u=a.map(function(t){return s.pointCoordinate(t)}),c=this.getIds(),h=1/0,p=1/0,d=-1/0,f=-1/0,_=0,m=u;_<m.length;_+=1){var g=m[_];h=Math.min(h,g.x),p=Math.min(p,g.y),d=Math.max(d,g.x),f=Math.max(f,g.y)}for(var y=function(e){var r=i._tiles[c[e]];if(!r.holdingForFade()){var a=r.tileID,_=Math.pow(2,s.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*t.EXTENT/r.tileSize/_,g=[a.getTilePoint(new t.MercatorCoordinate(h,p)),a.getTilePoint(new t.MercatorCoordinate(d,f))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var y=l.map(function(t){return a.getTilePoint(t)}),v=u.map(function(t){return a.getTilePoint(t)});o.push({tile:r,tileID:a,queryGeometry:y,cameraQueryGeometry:v,scale:_})}}},v=0;v<c.length;v++)y(v);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Mt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter(function(n){return!n.hasDependency(t,e)})},n}(t.Evented);function Ot(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Mt(t){return"raster"===t||"image"===t||"video"===t}function Lt(){return new t.window.Worker(Xi.workerUrl)}At.maxOverzooming=10,At.maxUnderzooming=3;var Nt="mapboxgl_preloaded_worker_pool",Dt=function(){this.active={}};Dt.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new Lt);return this.active[t]=!0,this.workers.slice()},Dt.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},Dt.prototype.isPreloaded=function(){return!!this.active[Nt]},Dt.prototype.numActive=function(){return Object.keys(this.active).length};var Rt,zt=Math.floor(t.browser.hardwareConcurrency/2);function Ft(){return Rt||(Rt=new Dt),Rt}function Bt(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach(function(t){t in n&&(r[t]=n[t])}),r}function jt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Bt(t[r],e[t[r].ref]));return t}Dt.workerCount=Math.max(Math.min(zt,6),1);var Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ut(t,e,n){n.push({command:Vt.addSource,args:[t,e[t]]})}function $t(t,e,n){e.push({command:Vt.removeSource,args:[t]}),n[t]=!0}function qt(t,e,n,r){$t(t,n,r),Ut(t,e,n)}function Gt(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;return!0}function Ht(e,n,r,i,o,s){var a;for(a in n=n||{},e=e||{})e.hasOwnProperty(a)&&(t.deepEqual(e[a],n[a])||r.push({command:s,args:[i,a,n[a],o]}));for(a in n)n.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(t.deepEqual(e[a],n[a])||r.push({command:s,args:[i,a,n[a],o]}))}function Zt(t){return t.id}function Wt(t,e){return t[e.id]=e,t}var Xt=function(t,e){this.reset(t,e)};Xt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,r=this._distances[n],i=e*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,s=this._distances[o],a=r-s,l=a>0?(i-s)/a:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))};var Yt=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Kt(e,n,r,i,o){var s=t.create();return n?(t.scale(s,s,[1/o,1/o,1]),r||t.rotateZ(s,s,i.angle)):t.multiply(s,i.labelPlaneMatrix,e),s}function Jt(e,n,r,i,o){if(n){var s=t.clone(e);return t.scale(s,s,[o,o,1]),r||t.rotateZ(s,s,-i.angle),s}return i.glCoordMatrix}function Qt(e,n){var r=[e.x,e.y,0,1];ce(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function te(t,e){return.5+t/e*.5}function ee(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function ne(e,n,r,i,o,s,a,l){var u=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,r.transform.zoom),h=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();for(var d=e.lineVertexArray,f=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,_=r.transform.width/r.transform.height,m=!1,g=0;g<f.length;g++){var y=f.get(g);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!m)ue(y.numGlyphs,p);else{m=!1;var v=[y.anchorX,y.anchorY,0,1];if(t.transformMat4(v,v,n),ee(v,h)){var b=te(r.transform.cameraToCenterDistance,v[3]),x=t.evaluateSizeForFeature(u,c,y),w=a?x/b:x*b,E=new t.Point(y.anchorX,y.anchorY),S=Qt(E,o).point,C={},I=oe(y,w,!1,l,n,o,s,e.glyphOffsetArray,d,p,S,E,C,_);m=I.useVertical,(I.notEnoughRoom||m||I.needsFlipping&&oe(y,w,!0,l,n,o,s,e.glyphOffsetArray,d,p,S,E,C,_).notEnoughRoom)&&ue(y.numGlyphs,p)}else ue(y.numGlyphs,p)}}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function re(t,e,n,r,i,o,s,a,l,u,c){var h=a.glyphStartIndex+a.numGlyphs,p=a.lineStartIndex,d=a.lineStartIndex+a.lineLength,f=e.getoffsetX(a.glyphStartIndex),_=e.getoffsetX(h-1),m=ae(t*f,n,r,i,o,s,a.segment,p,d,l,u,c);if(!m)return null;var g=ae(t*_,n,r,i,o,s,a.segment,p,d,l,u,c);return g?{first:m,last:g}:null}function ie(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function oe(e,n,r,i,o,s,a,l,u,c,h,p,d,f){var _,m=n/24,g=e.lineOffsetX*m,y=e.lineOffsetY*m;if(e.numGlyphs>1){var v=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=re(m,l,g,y,r,h,p,e,u,s,d);if(!w)return{notEnoughRoom:!0};var E=Qt(w.first.point,a).point,S=Qt(w.last.point,a).point;if(i&&!r){var C=ie(e.writingMode,E,S,f);if(C)return C}_=[w.first];for(var I=e.glyphStartIndex+1;I<v-1;I++)_.push(ae(m*l.getoffsetX(I),g,y,r,h,p,e.segment,b,x,u,s,d));_.push(w.last)}else{if(i&&!r){var k=Qt(p,o).point,T=e.lineStartIndex+e.segment+1,P=new t.Point(u.getx(T),u.gety(T)),A=Qt(P,o),O=A.signedDistanceFromCamera>0?A.point:se(p,P,k,1,o),M=ie(e.writingMode,k,O,f);if(M)return M}var L=ae(m*l.getoffsetX(e.glyphStartIndex),g,y,r,h,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,s,d);if(!L)return{notEnoughRoom:!0};_=[L]}for(var N=0,D=_;N<D.length;N+=1){var R=D[N];t.addDynamicAttributes(c,R.point,R.angle)}return{}}function se(t,e,n,r,i){var o=Qt(t.add(t.sub(e)._unit()),i).point,s=n.sub(o);return n.add(s._mult(r/s.mag()))}function ae(e,n,r,i,o,s,a,l,u,c,h,p){var d=i?e-n:e+n,f=d>0?1:-1,_=0;i&&(f*=-1,_=Math.PI),f<0&&(_+=Math.PI);for(var m=f>0?l+a:l+a+1,g=o,y=o,v=0,b=0,x=Math.abs(d),w=[];v+b<=x;){if((m+=f)<l||m>=u)return null;if(y=g,w.push(g),void 0===(g=p[m])){var E=new t.Point(c.getx(m),c.gety(m)),S=Qt(E,h);if(S.signedDistanceFromCamera>0)g=p[m]=S.point;else{var C=m-f;g=se(0===v?s:new t.Point(c.getx(C),c.gety(C)),E,y,x-v+1,h)}}v+=b,b=y.dist(g)}var I=(x-v)/b,k=g.sub(y),T=k.mult(I)._add(y);T._add(k._unit()._perp()._mult(r*f));var P=_+Math.atan2(g.y-y.y,g.x-y.x);return w.push(T),{point:T,angle:P,path:w}}Yt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Yt.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Yt.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Yt.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Yt.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Yt.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var a=0;a<this.boxKeys.length;a++)s.push({key:this.boxKeys[a],x1:this.bboxes[4*a],y1:this.bboxes[4*a+1],x2:this.bboxes[4*a+2],y2:this.bboxes[4*a+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];s.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return o?s.filter(o):s}return this._forEachCell(t,e,n,r,this._queryCell,s,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?s.length>0:s},Yt.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,s=t+n,a=e-n,l=e+n;if(s<0||o>this.width||l<0||a>this.height)return!r&&[];var u=[];return this._forEachCell(o,a,s,l,this._queryCellCircle,u,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?u.length>0:u},Yt.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Yt.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Yt.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Yt.prototype._queryCell=function(t,e,n,r,i,o,s,a){var l=s.seenUids,u=this.boxCells[i];if(null!==u)for(var c=this.bboxes,h=0,p=u;h<p.length;h+=1){var d=p[h];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(t<=c[f+2]&&e<=c[f+3]&&n>=c[f+0]&&r>=c[f+1]&&(!a||a(this.boxKeys[d]))){if(s.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var _=this.circleCells[i];if(null!==_)for(var m=this.circles,g=0,y=_;g<y.length;g+=1){var v=y[g];if(!l.circle[v]){l.circle[v]=!0;var b=3*v;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],t,e,n,r)&&(!a||a(this.circleKeys[v]))){if(s.hitTest)return o.push(!0),!0;var x=m[b],w=m[b+1],E=m[b+2];o.push({key:this.circleKeys[v],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},Yt.prototype._queryCellCircle=function(t,e,n,r,i,o,s,a){var l=s.circle,u=s.seenUids,c=this.boxCells[i];if(null!==c)for(var h=this.bboxes,p=0,d=c;p<d.length;p+=1){var f=d[p];if(!u.box[f]){u.box[f]=!0;var _=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,h[_+0],h[_+1],h[_+2],h[_+3])&&(!a||a(this.boxKeys[f])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var b=v[y];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(g[x],g[x+1],g[x+2],l.x,l.y,l.radius)&&(!a||a(this.circleKeys[b])))return o.push(!0),!0}}},Yt.prototype._forEachCell=function(t,e,n,r,i,o,s,a){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),p=l;p<=c;p++)for(var d=u;d<=h;d++)if(i.call(this,t,e,n,r,this.xCellCount*d+p,o,s,a))return},Yt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Yt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Yt.prototype._circlesCollide=function(t,e,n,r,i,o){var s=r-t,a=i-e,l=n+o;return l*l>s*s+a*a},Yt.prototype._circleAndRectCollide=function(t,e,n,r,i,o,s){var a=(o-r)/2,l=Math.abs(t-(r+a));if(l>a+n)return!1;var u=(s-i)/2,c=Math.abs(e-(i+u));if(c>u+n)return!1;if(l<=a||c<=u)return!0;var h=l-a,p=c-u;return h*h+p*p<=n*n};var le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ue(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(le,3*r)}}function ce(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var he=function(t,e,n){void 0===e&&(e=new Yt(t.width+200,t.height+200,25)),void 0===n&&(n=new Yt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function pe(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}he.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),s=n*o.perspectiveRatio,a=t.x1*s+o.point.x,l=t.y1*s+o.point.y,u=t.x2*s+o.point.x,c=t.y2*s+o.point.y;return!this.isInsideGrid(a,l,u,c)||!e&&this.grid.hitTest(a,l,u,c,i)?{box:[],offscreen:!1}:{box:[a,l,u,c],offscreen:this.isOffscreen(a,l,u,c)}},he.prototype.placeCollisionCircles=function(e,n,r,i,o,s,a,l,u,c,h,p,d){var f=[],_=new t.Point(n.anchorX,n.anchorY),m=Qt(_,s),g=te(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),y=(c?o/g:o*g)/t.ONE_EM,v=Qt(_,a).point,b=re(y,i,n.lineOffsetX*y,n.lineOffsetY*y,!1,v,_,n,r,a,{}),x=!1,w=!1,E=!0;if(b){for(var S=.5*p*g+d,C=new t.Point(-100,-100),I=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),k=new Xt,T=b.first,P=b.last,A=[],O=T.path.length-1;O>=1;O--)A.push(T.path[O]);for(var M=1;M<P.path.length;M++)A.push(P.path[M]);var L=2.5*S;if(l){var N=A.map(function(t){return Qt(t,l)});A=N.some(function(t){return t.signedDistanceFromCamera<=0})?[]:N.map(function(t){return t.point})}var D=[];if(A.length>0){for(var R=A[0].clone(),z=A[0].clone(),F=1;F<A.length;F++)R.x=Math.min(R.x,A[F].x),R.y=Math.min(R.y,A[F].y),z.x=Math.max(z.x,A[F].x),z.y=Math.max(z.y,A[F].y);D=R.x>=C.x&&z.x<=I.x&&R.y>=C.y&&z.y<=I.y?[A]:z.x<C.x||R.x>I.x||z.y<C.y||R.y>I.y?[]:t.clipLine([A],C.x,C.y,I.x,I.y)}for(var B=0,j=D;B<j.length;B+=1){var V;k.reset(j[B],.25*S),V=k.length<=.5*S?1:Math.ceil(k.paddedLength/L)+1;for(var U=0;U<V;U++){var $=U/Math.max(V-1,1),q=k.lerp($),G=q.x+100,H=q.y+100;f.push(G,H,S,0);var Z=G-S,W=H-S,X=G+S,Y=H+S;if(E=E&&this.isOffscreen(Z,W,X,Y),w=w||this.isInsideGrid(Z,W,X,Y),!e&&this.grid.hitTestCircle(G,H,S,h)&&(x=!0,!u))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!u&&x||!w?[]:f,offscreen:E,collisionDetected:x}},he.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,s=-1/0,a=0,l=e;a<l.length;a+=1){var u=l[a],c=new t.Point(u.x+100,u.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y),n.push(c)}for(var h={},p={},d=0,f=this.grid.query(r,i,o,s).concat(this.ignoredGrid.query(r,i,o,s));d<f.length;d+=1){var _=f[d],m=_.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var g=[new t.Point(_.x1,_.y1),new t.Point(_.x2,_.y1),new t.Point(_.x2,_.y2),new t.Point(_.x1,_.y2)];t.polygonIntersectsPolygon(n,g)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},he.prototype.insertCollisionBox=function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])},he.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,s={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},a=0;a<t.length;a+=4)o.insertCircle(s,t[a],t[a+1],t[a+2])},he.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return ce(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},he.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},he.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary},he.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var de=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};de.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var fe=function(t,e,n,r,i){this.text=new de(t?t.text:null,e,n,i),this.icon=new de(t?t.icon:null,e,r,i)};fe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _e=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},me=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},ge=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},ye=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function ve(e,n,r,i,o){var s=t.getAnchorAlignment(e),a=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*r,u=t.evaluateVariableOffset(e,i);return new t.Point(a+u[0]*o,l+u[1]*o)}function be(e,n,r,i,o,s){var a=e.x1,l=e.x2,u=e.y1,c=e.y2,h=e.anchorPointX,p=e.anchorPointY,d=new t.Point(n,r);return i&&d._rotate(o?s:-s),{x1:a+d.x,y1:u+d.y,x2:l+d.x,y2:c+d.y,anchorPointX:h,anchorPointY:p}}ye.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var xe=function(t,e,n,r){this.transform=t.clone(),this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ye(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function we(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}xe.prototype.getBucketParts=function(e,n,r,i){var o=r.getBucket(n),s=r.latestFeatureIndex;if(o&&s&&n.id===o.layerIds[0]){var a=r.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),f=pe(r,1,this.transform.zoom),_=Kt(h,p,d,this.transform,f),m=null;if(p){var g=Jt(h,p,d,this.transform,f);m=t.multiply([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[o.bucketInstanceId]=new ge(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,r.tileID);var y={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:_,labelToScreenMatrix:m,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(var v=0,b=o.sortKeyRanges;v<b.length;v+=1){var x=b[v];e.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}},xe.prototype.attemptAnchorPlacement=function(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f){var _,m=[h.textOffset0,h.textOffset1],g=ve(t,n,r,m,i),y=this.collisionIndex.placeCollisionBox(be(e,g.x,g.y,o,s,this.transform.angle),c,a,l,u.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(be(f,g.x,g.y,o,s,this.transform.angle),c,a,l,u.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(_=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:m,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:_},this.markUsedJustification(p,t,h,d),p.allowVerticalPlacement&&(this.markUsedOrientation(p,d,h),this.placedOrientations[h.crossTileID]=d),{shift:g,placedGlyphBoxes:y}):void 0},xe.prototype.placeLayerBucketPart=function(e,n,r){var i=this,o=e.parameters,s=o.bucket,a=o.layout,l=o.posMatrix,u=o.textLabelPlaneMatrix,c=o.labelToScreenMatrix,h=o.textPixelRatio,p=o.holdingForFade,d=o.collisionBoxArray,f=o.partiallyEvaluatedTextSize,_=o.collisionGroup,m=a.get("text-optional"),g=a.get("icon-optional"),y=a.get("text-allow-overlap"),v=a.get("icon-allow-overlap"),b="map"===a.get("text-rotation-alignment"),x="map"===a.get("text-pitch-alignment"),w="none"!==a.get("icon-text-fit"),E="viewport-y"===a.get("symbol-z-order"),S=y&&(v||!s.hasIconData()||g),C=v&&(y||!s.hasTextData()||m);!s.collisionArrays&&d&&s.deserializeCollisionBoxes(d);var I=function(e,o){if(!n[e.crossTileID])if(p)i.placements[e.crossTileID]=new _e(!1,!1,!1);else{var d,E=!1,I=!1,k=!0,T=null,P={box:null,offscreen:null},A={box:null,offscreen:null},O=null,M=null,L=0,N=0,D=0;o.textFeatureIndex?L=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),o.verticalTextFeatureIndex&&(N=o.verticalTextFeatureIndex);var R=o.textBox;if(R){var z=function(n){var r=t.WritingMode.horizontal;if(s.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[e.crossTileID];o&&(i.placedOrientations[e.crossTileID]=o,i.markUsedOrientation(s,r=o,e))}return r},F=function(n,r){if(s.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var i=0,a=s.writingModes;i<a.length&&(a[i]===t.WritingMode.vertical?(P=r(),A=P):P=n(),!(P&&P.box&&P.box.length));i+=1);else P=n()};if(a.get("text-variable-anchor")){var B=a.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[e.crossTileID]){var j=i.prevPlacement.variableOffsets[e.crossTileID];B.indexOf(j.anchor)>0&&(B=B.filter(function(t){return t!==j.anchor})).unshift(j.anchor)}var V=function(t,n,r){for(var o=t.x2-t.x1,a=t.y2-t.y1,u=e.textBoxScale,c=w&&!v?n:null,p={box:[],offscreen:!1},d=y?2*B.length:B.length,f=0;f<d;++f){var m=i.attemptAnchorPlacement(B[f%B.length],t,o,a,u,b,x,h,l,_,f>=B.length,e,s,r,c);if(m&&(p=m.placedGlyphBoxes)&&p.box&&p.box.length){E=!0,T=m.shift;break}}return p};F(function(){return V(R,o.iconBox,t.WritingMode.horizontal)},function(){var n=o.verticalTextBox;return s.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&e.numVerticalGlyphVertices>0&&n?V(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),P&&(E=P.box,k=P.offscreen);var U=z(P&&P.box);if(!E&&i.prevPlacement){var $=i.prevPlacement.variableOffsets[e.crossTileID];$&&(i.variableOffsets[e.crossTileID]=$,i.markUsedJustification(s,$.anchor,e,U))}}else{var q=function(t,n){var r=i.collisionIndex.placeCollisionBox(t,y,h,l,_.predicate);return r&&r.box&&r.box.length&&(i.markUsedOrientation(s,n,e),i.placedOrientations[e.crossTileID]=n),r};F(function(){return q(R,t.WritingMode.horizontal)},function(){var n=o.verticalTextBox;return s.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?q(n,t.WritingMode.vertical):{box:null,offscreen:null}}),z(P&&P.box&&P.box.length)}}if(E=(d=P)&&d.box&&d.box.length>0,k=d&&d.offscreen,e.useRuntimeCollisionCircles){var G=s.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),H=t.evaluateSizeForFeature(s.textSizeData,f,G),Z=a.get("text-padding");O=i.collisionIndex.placeCollisionCircles(y,G,s.lineVertexArray,s.glyphOffsetArray,H,l,u,c,r,x,_.predicate,e.collisionCircleDiameter,Z),E=y||O.circles.length>0&&!O.collisionDetected,k=k&&O.offscreen}if(o.iconFeatureIndex&&(D=o.iconFeatureIndex),o.iconBox){var W=function(t){var e=w&&T?be(t,T.x,T.y,b,x,i.transform.angle):t;return i.collisionIndex.placeCollisionBox(e,v,h,l,_.predicate)};I=A&&A.box&&A.box.length&&o.verticalIconBox?(M=W(o.verticalIconBox)).box.length>0:(M=W(o.iconBox)).box.length>0,k=k&&M.offscreen}var X=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Y=g||0===e.numIconVertices;if(X||Y?Y?X||(I=I&&E):E=I&&E:I=E=I&&E,E&&d&&d.box&&i.collisionIndex.insertCollisionBox(d.box,a.get("text-ignore-placement"),s.bucketInstanceId,A&&A.box&&N?N:L,_.ID),I&&M&&i.collisionIndex.insertCollisionBox(M.box,a.get("icon-ignore-placement"),s.bucketInstanceId,D,_.ID),O&&(E&&i.collisionIndex.insertCollisionCircles(O.circles,a.get("text-ignore-placement"),s.bucketInstanceId,L,_.ID),r)){var K=s.bucketInstanceId,J=i.collisionCircleArrays[K];void 0===J&&(J=i.collisionCircleArrays[K]=new me);for(var Q=0;Q<O.circles.length;Q+=4)J.circles.push(O.circles[Q+0]),J.circles.push(O.circles[Q+1]),J.circles.push(O.circles[Q+2]),J.circles.push(O.collisionDetected?1:0)}i.placements[e.crossTileID]=new _e(E||S,I||C,k||s.justReloaded),n[e.crossTileID]=!0}};if(E)for(var k=s.getSortedSymbolIndexes(this.transform.angle),T=k.length-1;T>=0;--T){var P=k[T];I(s.symbolInstances.get(P),s.collisionArrays[P])}else for(var A=e.symbolInstanceStart;A<e.symbolInstanceEnd;A++)I(s.symbolInstances.get(A),s.collisionArrays[A]);if(r&&s.bucketInstanceId in this.collisionCircleArrays){var O=this.collisionCircleArrays[s.bucketInstanceId];t.invert(O.invProjMatrix,l),O.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1},xe.prototype.markUsedJustification=function(e,n,r,i){var o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var s=0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];s<a.length;s+=1){var l=a[s];l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=o>=0&&l!==o?0:r.crossTileID)}},xe.prototype.markUsedOrientation=function(e,n,r){for(var i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,s=0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];s<a.length;s+=1)e.text.placedSymbolArray.get(a[s]).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)},xe.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},s=e?e.placedOrientations:{};for(var a in this.placements){var l=this.placements[a],u=i[a];u?(this.opacities[a]=new fe(u,r,l.text,l.icon),n=n||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[a]=new fe(null,r,l.text,l.icon,l.skipFade),n=n||l.text||l.icon)}for(var c in i){var h=i[c];if(!this.opacities[c]){var p=new fe(h,r,!1,!1);p.isHidden()||(this.opacities[c]=p,n=n||h.text.placed||h.icon.placed)}}for(var d in o)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=o[d]);for(var f in s)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=s[f]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},xe.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],s=o.getBucket(t);s&&o.latestFeatureIndex&&t.id===s.layerIds[0]&&this.updateBucketOpacities(s,n,o.collisionBoxArray)}},xe.prototype.updateBucketOpacities=function(e,n,r){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,s=new fe(null,0,!1,!1,!0),a=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),u=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),h="map"===o.get("text-pitch-alignment"),p="none"!==o.get("icon-text-fit"),d=new fe(null,0,a&&(l||!e.hasIconData()||o.get("icon-optional")),l&&(a||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var f=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)},_=function(r){var o=e.symbolInstances.get(r),a=o.numHorizontalGlyphVertices,l=o.numVerticalGlyphVertices,_=o.crossTileID,m=i.opacities[_];n[_]?m=s:m||(i.opacities[_]=m=d),n[_]=!0;var g=o.numIconVertices>0,y=i.placedOrientations[o.crossTileID],v=y===t.WritingMode.vertical,b=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(a>0||l>0){var x=Ae(m.text);f(e.text,a,v?Oe:x),f(e.text,l,b?Oe:x);var w=m.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||v?1:0)}),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var E=i.variableOffsets[o.crossTileID];E&&i.markUsedJustification(e,E.anchor,o,y);var S=i.placedOrientations[o.crossTileID];S&&(i.markUsedJustification(e,"left",o,S),i.markUsedOrientation(e,S,o))}if(g){var C=Ae(m.icon),I=!(p&&o.verticalPlacedIconSymbolIndex&&v);o.placedIconSymbolIndex>=0&&(f(e.icon,o.numIconVertices,I?C:Oe),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=m.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,o.numVerticalIconVertices,I?Oe:C),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var k=e.collisionArrays[r];if(k){var T=new t.Point(0,0);if(k.textBox||k.verticalTextBox){var P=!0;if(u){var A=i.variableOffsets[_];A?(T=ve(A.anchor,A.width,A.height,A.textOffset,A.textBoxScale),c&&T._rotate(h?i.transform.angle:-i.transform.angle)):P=!1}k.textBox&&we(e.textCollisionBox.collisionVertexArray,m.text.placed,!P||v,T.x,T.y),k.verticalTextBox&&we(e.textCollisionBox.collisionVertexArray,m.text.placed,!P||b,T.x,T.y)}var O=Boolean(!b&&k.verticalIconBox);k.iconBox&&we(e.iconCollisionBox.collisionVertexArray,m.icon.placed,O,p?T.x:0,p?T.y:0),k.verticalIconBox&&we(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!O,p?T.x:0,p?T.y:0)}}},m=0;m<e.symbolInstances.length;m++)_(m);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var g=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=g.invProjMatrix,e.placementViewportMatrix=g.viewportMatrix,e.collisionCircleArray=g.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xe.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},xe.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},xe.prototype.setStale=function(){this.stale=!0};var Ee=Math.pow(2,25),Se=Math.pow(2,24),Ce=Math.pow(2,17),Ie=Math.pow(2,16),ke=Math.pow(2,9),Te=Math.pow(2,8),Pe=Math.pow(2,1);function Ae(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Ee+e*Se+n*Ce+e*Ie+n*ke+e*Te+n*Pe+e}var Oe=0,Me=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Me.prototype.continuePlacement=function(t,e,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(function(t,e){return t.sortKey-e.sortKey}));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1};var Le=function(t,e,n,r,i,o,s){this.placement=new xe(t,i,o,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Le.prototype.isDone=function(){return this._done},Le.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),s=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var a=n[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=l)&&(!a.maxzoom||a.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Me(a)),this._inProgressLayer.continuePlacement(r[a.source],this.placement,this._showCollisionBoxes,a,s))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Le.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Ne=512/t.EXTENT/2,De=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};De.prototype.getScaledCoordinates=function(e,n){var r=Ne/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},De.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var s=this.indexedSymbolInstances[o.key];if(s)for(var a=this.getScaledCoordinates(o,e),l=0,u=s;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-a.x)<=r&&Math.abs(c.coord.y-a.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Re=function(){this.maxCrossTileID=0};Re.prototype.generate=function(){return++this.maxCrossTileID};var ze=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ze.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var s=r[o];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+e),i[s.tileID.key]=s}this.indexes[n]=i}this.lng=t},ze.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var s=this.indexes[o];if(Number(o)>t.overscaledZ)for(var a in s){var l=s[a];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,i)}else{var u=s[t.scaledTo(Number(o)).key];u&&u.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var h=e.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new De(t,e.symbolInstances,e.bucketInstanceId),!0},ze.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},ze.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var Fe=function(){this.layerIndexes={},this.crossTileIDs=new Re,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Fe.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new ze);var i=!1,o={};r.handleWrapJump(n);for(var s=0,a=e;s<a.length;s+=1){var l=a[s],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(i=!0),o[u.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Fe.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Be=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},je=t.pick(Vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ve=t.pick(Vt,["setCenter","setZoom","setBearing","setPitch"]),Ue=function(){var e={},n=t.styleSpec.$version;for(var r in t.styleSpec.$root){var i,o=t.styleSpec.$root[r];o.required&&null!=(i="version"===r?n:"array"===o.type?[]:{})&&(e[r]=i)}return e}(),$e=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new S(Ft(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new v(r._requestManager,i.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Fe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var s=this;this._rtlTextPluginCallback=n.registerForPluginStateChange(function(e){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every(function(t){return t}))for(var r in s.sourceCaches)s.sourceCaches[r].reload()})}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)})},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ue,!1)},n.prototype._load=function(e,n){if(!n||!Be(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=jt(this.stylesheet.layers);this._order=i.map(function(t){return t.id}),this._layers={},this._serializedLayers={};for(var o=0,s=i;o<s.length;o+=1){var a=s[o];(a=t.createStyleLayer(a)).setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=a,this._serializedLayers[a.id]=a.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,r){var i,o,s,a=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,a,".json"),t.ResourceType.SpriteJSON),function(t,e){l=null,s||(s=t,i=e,c())}),u=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,a,".png"),t.ResourceType.SpriteImage),function(t,e){u=null,s||(s=t,o=e,c())});function c(){if(s)r(s);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var a in i){var l=i[a],u=l.width,c=l.height,h=l.x,p=l.y,d=l.sdf,f=l.pixelRatio,_=l.stretchX,m=l.stretchY,g=l.content,y=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,y,{x:h,y:p},{x:0,y:0},{width:u,height:c}),n[a]={data:y,pixelRatio:f,sdf:d,stretchX:_,stretchY:m,content:g}}r(null,n)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))})},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&e.push(i.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var s=this._updatedSources[o];"reload"===s?this._reloadSource(o):"clear"===s&&this._clearSource(o)}for(var a in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var l={};for(var u in this.sourceCaches){var c=this.sourceCaches[u];l[u]=c.used,c.used=!1}for(var h=0,p=this._order;h<p.length;h+=1){var d=this._layers[p[h]];d.recalculate(e,this._availableImages),!d.isHidden(e.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0)}for(var f in l){var _=this.sourceCaches[f];l[f]!==_.used&&_.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Be(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=jt(e.layers);var r=function(e,n){if(!e)return[{command:Vt.setStyle,args:[n]}];var r=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Vt.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||r.push({command:Vt.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||r.push({command:Vt.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||r.push({command:Vt.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||r.push({command:Vt.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||r.push({command:Vt.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||r.push({command:Vt.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||r.push({command:Vt.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||r.push({command:Vt.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||$t(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Gt(e,n,o)?r.push({command:Vt.setGeoJSONSourceData,args:[o,n[o].data]}):qt(o,n,r,i)):Ut(o,n,r))}(e.sources,n.sources,o,i);var s=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:Vt.removeLayer,args:[t.id]}):s.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,s,a,l,u,c,h=(e=e||[]).map(Zt),p=n.map(Zt),d=e.reduce(Wt,{}),f=n.reduce(Wt,{}),_=h.slice(),m=Object.create(null);for(i=0,o=0;i<h.length;i++)f.hasOwnProperty(s=h[i])?o++:(r.push({command:Vt.removeLayer,args:[s]}),_.splice(_.indexOf(s,o),1));for(i=0,o=0;i<p.length;i++)_[_.length-1-i]!==(s=p[p.length-1-i])&&(d.hasOwnProperty(s)?(r.push({command:Vt.removeLayer,args:[s]}),_.splice(_.lastIndexOf(s,_.length-o),1)):o++,r.push({command:Vt.addLayer,args:[f[s],u=_[_.length-i]]}),_.splice(_.length-i,0,s),m[s]=!0);for(i=0;i<p.length;i++)if(a=d[s=p[i]],l=f[s],!m[s]&&!t.deepEqual(a,l))if(t.deepEqual(a.source,l.source)&&t.deepEqual(a["source-layer"],l["source-layer"])&&t.deepEqual(a.type,l.type)){for(c in Ht(a.layout,l.layout,r,s,null,Vt.setLayoutProperty),Ht(a.paint,l.paint,r,s,null,Vt.setPaintProperty),t.deepEqual(a.filter,l.filter)||r.push({command:Vt.setFilter,args:[s,l.filter]}),t.deepEqual(a.minzoom,l.minzoom)&&t.deepEqual(a.maxzoom,l.maxzoom)||r.push({command:Vt.setLayerZoomRange,args:[s,l.minzoom,l.maxzoom]}),a)a.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ht(a[c],l[c],r,s,c.slice(6),Vt.setPaintProperty):t.deepEqual(a[c],l[c])||r.push({command:Vt.setLayerProperty,args:[s,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!a.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ht(a[c],l[c],r,s,c.slice(6),Vt.setPaintProperty):t.deepEqual(a[c],l[c])||r.push({command:Vt.setLayerProperty,args:[s,c,l[c]]}))}else r.push({command:Vt.removeLayer,args:[s]}),u=_[_.lastIndexOf(s)+1],r.push({command:Vt.addLayer,args:[l,u]})}(s,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Vt.setStyle,args:[n]}]}return r}(this.serialize(),e).filter(function(t){return!(t.command in Ve)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in je)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},n.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new At(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(Be(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}var s=n?this._order.indexOf(n):this._order.length;if(n&&-1===s)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(s,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var a=this._removedLayers[i];delete this._removedLayers[i],a.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone$1(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var s=o.getSource().type;"geojson"===s&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,s="vector"===o?e.sourceLayer:void 0;"vector"!==o||s?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(s,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var s=this._order[o];if(n(s)){r[s]=o;for(var a=0,l=t;a<l.length;a+=1){var u=l[a][s];if(u)for(var c=0,h=u;c<h.length;c+=1)i.push(h[c])}}}i.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var p=[],d=this._order.length-1;d>=0;d--){var f=this._order[d];if(n(f))for(var _=i.length-1;_>=0;_--){var m=i[_].feature;if(r[m.layer.id]<d)break;p.push(m),i.pop()}else for(var g=0,y=t;g<y.length;g+=1){var v=y[g][f];if(v)for(var b=0,x=v;b<x.length;b+=1)p.push(x[b].feature)}}return p},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,s=n.layers;o<s.length;o+=1){var a=s[o],l=this._layers[a];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+a+"' does not exist in the map's style and cannot be queried for features."))),[];i[l.source]=!0}}var u=[];for(var c in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[c]||u.push(z(this.sourceCaches[c],this._layers,this._serializedLayers,e,n,r));return this.placement&&u.push(function(t,e,n,r,i,o,s){for(var a={},l=o.queryRenderedSymbols(r),u=[],c=0,h=Object.keys(l).map(Number);c<h.length;c+=1)u.push(s[h[c]]);u.sort(F);for(var p=function(){var n=f[d],r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in r){var s=a[o]=a[o]||[],u=r[o];u.sort(function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex});for(var c=0,h=u;c<h.length;c+=1)s.push(h[c])}},d=0,f=u;d<f.length;d+=1)p();var _=function(e){a[e].forEach(function(r){var i=r.feature,o=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o})};for(var m in a)_(m);return a}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var s=n[o],a=s.tileID.canonical.key;i[a]||(i[a]=!0,s.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.deepEqual(e[o],r[o])){i=!0;break}if(i){var s={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(s)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Be(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i,o){void 0===o&&(o=!1);for(var s=!1,a=!1,l={},u=0,c=this._order;u<c.length;u+=1){var h=this._layers[c[u]];if("symbol"===h.type){if(!l[h.source]){var p=this.sourceCaches[h.source];l[h.source]=p.getRenderableIds(!0).map(function(t){return p.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var d=this.crossTileSymbolIndex.addLayer(h,l[h.source],e.center.lng);s=s||d}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Le(e,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),a=!0),s&&this.pauseablePlacement.placement.setStale()),a||s)for(var f=0,_=this._order;f<_.length;f+=1){var m=this._layers[_[f]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,l[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);$e.getSourceType=function(t){return D[t]},$e.setSourceType=function(t,e){D[t]=e},$e.registerForPluginStateChange=t.registerForPluginStateChange;var qe=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ge=yn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),He=yn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ze=yn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),We=yn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Xe=yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ye=yn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Ke=yn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Je=yn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Qe=yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),tn=yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),en=yn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nn=yn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),rn=yn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),on=yn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),sn=yn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),an=yn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ln=yn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),un=yn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),cn=yn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),hn=yn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pn=yn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),dn=yn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),fn=yn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),_n=yn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),mn=yn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),gn=yn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function yn(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=o?o.concat(i):i,a={};return{fragmentSource:t=t.replace(n,function(t,e,n,r,i){return a[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"}),vertexSource:e=e.replace(n,function(t,e,n,r,i){var o="float"===r?"vec2":"vec4",s=i.match(/color/)?"color":o;return a[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"}),staticAttributes:r,staticUniforms:s}}var vn=Object.freeze({__proto__:null,prelude:Ge,background:He,backgroundPattern:Ze,circle:We,clippingMask:Xe,heatmap:Ye,heatmapTexture:Ke,collisionBox:Je,collisionCircle:Qe,debug:tn,fill:en,fillOutline:nn,fillOutlinePattern:rn,fillPattern:on,fillExtrusion:sn,fillExtrusionPattern:an,hillshadePrepare:ln,hillshade:un,line:cn,lineGradient:hn,linePattern:pn,lineSDF:dn,raster:fn,symbolIcon:_n,symbolSDF:mn,symbolTextAndIcon:gn}),bn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function xn(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var r=t[n].split(" ");e.push(r.pop())}return e}bn.prototype.bind=function(t,e,n,r,i,o,s,a){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===s&&this.boundDynamicVertexBuffer2===a?(t.bindVertexArrayOES.set(this.vao),s&&s.bind(),i&&i.dynamicDraw&&i.bind(),a&&a.bind()):this.freshBind(e,n,r,i,o,s,a)},bn.prototype.freshBind=function(t,e,n,r,i,o,s){var a,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=s;else{a=u.currentNumAttributes||0;for(var h=l;h<a;h++)c.disableVertexAttribArray(h)}e.enableAttributes(c,t);for(var p=0,d=n;p<d.length;p+=1)d[p].enableAttributes(c,t);o&&o.enableAttributes(c,t),s&&s.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var f=0,_=n;f<_.length;f+=1){var m=_[f];m.bind(),m.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),s&&(s.bind(),s.setVertexAttribPointers(c,t,i)),u.currentNumAttributes=l},bn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var wn=function(t,e,n,r,i,o){var s=t.gl;this.program=s.createProgram();for(var a=xn(n.staticAttributes),l=r?r.getBinderAttributes():[],u=a.concat(l),c=n.staticUniforms?xn(n.staticUniforms):[],h=r?r.getBinderUniforms():[],p=[],d=0,f=c.concat(h);d<f.length;d+=1){var _=f[d];p.indexOf(_)<0&&p.push(_)}var m=r?r.defines():[];o&&m.push("#define OVERDRAW_INSPECTOR;");var g=m.concat(Ge.fragmentSource,n.fragmentSource).join("\n"),y=m.concat(Ge.vertexSource,n.vertexSource).join("\n"),v=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(v,g),s.compileShader(v),s.attachShader(this.program,v);var b=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(b,y),s.compileShader(b),s.attachShader(this.program,b),this.attributes={};var x={};this.numAttributes=u.length;for(var w=0;w<this.numAttributes;w++)u[w]&&(s.bindAttribLocation(this.program,w,u[w]),this.attributes[u[w]]=w);s.linkProgram(this.program),s.deleteShader(b),s.deleteShader(v);for(var E=0;E<p.length;E++){var S=p[E];if(S&&!x[S]){var C=s.getUniformLocation(this.program,S);C&&(x[S]=C)}}this.fixedUniforms=i(t,x),this.binderUniforms=r?r.getUniforms(t,x):[]}}};function En(t,e,n){var r=1/pe(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,s=o*(n.tileID.canonical.x+n.tileID.wrap*i),a=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[s>>16,a>>16],u_pixel_coord_lower:[65535&s,65535&a]}}wn.prototype.draw=function(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_){var m,g=t.gl;if(!this.failedToCreate){for(var y in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(s[y]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:p});for(var v=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],b=0,x=c.get();b<x.length;b+=1){var w=x[b],E=w.vaos||(w.vaos={});(E[a]||(E[a]=new bn)).bind(t,this,l,d?d.getPaintVertexBuffers():[],u,w.vertexOffset,f,_),g.drawElements(e,w.primitiveLength*v,g.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var Sn=function(e,n,r,i){var o=n.style.light,s=o.properties.get("position"),a=[s.x,s.y,s.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(l,-n.transform.angle),t.transformMat3(a,a,l);var u=o.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:i}},Cn=function(e,n,r,i,o,s,a){return t.extend(Sn(e,n,r,i),En(s,n,a),{u_height_factor:-Math.pow(2,o.overscaledZ)/a.tileSize/8})},In=function(t){return{u_matrix:t}},kn=function(e,n,r,i){return t.extend(In(e),En(r,n,i))},Tn=function(t,e){return{u_matrix:t,u_world:e}},Pn=function(e,n,r,i,o){return t.extend(kn(e,n,r,i),{u_world:o})},An=function(e,n,r,i){var o,s,a=e.transform;if("map"===i.paint.get("circle-pitch-alignment")){var l=pe(r,1,a.zoom);o=!0,s=[l,l]}else o=!1,s=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:s}},On=function(t,e,n){var r=pe(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},Mn=function(t,e,n){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},Ln=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},Nn=function(t){return{u_matrix:t}},Dn=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:pe(e,1,n),u_intensity:r}},Rn=function(e,n,r){var i=e.transform;return{u_matrix:Vn(e,n,r),u_ratio:1/pe(n,1,i.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},zn=function(e,n,r,i){return t.extend(Rn(e,n,r),{u_image:0,u_image_height:i})},Fn=function(e,n,r,i){var o=e.transform,s=jn(n,o);return{u_matrix:Vn(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/pe(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[s,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Bn=function(e,n,r,i,o){var s=e.lineAtlas,a=jn(n,e.transform),l="round"===r.layout.get("line-cap"),u=s.getDash(i.from,l),c=s.getDash(i.to,l),h=u.width*o.fromScale,p=c.width*o.toScale;return t.extend(Rn(e,n,r),{u_patternscale_a:[a/h,-u.height/2],u_patternscale_b:[a/p,-c.height/2],u_sdfgamma:s.width/(256*Math.min(h,p)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:o.t})};function jn(t,e){return 1/pe(t,1,e.tileZoom)}function Vn(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var Un=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:$n(i.paint.get("raster-hue-rotate"))};var o,s};function $n(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var qn,Gn=function(t,e,n,r,i,o,s,a,l,u){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:a,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Hn=function(e,n,r,i,o,s,a,l,u,c,h){var p=o.transform;return t.extend(Gn(e,n,r,i,o,s,a,l,u,c),{u_gamma_scale:i?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+h})},Zn=function(e,n,r,i,o,s,a,l,u,c){return t.extend(Hn(e,n,r,i,o,s,a,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},Wn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Xn=function(e,n,r,i,o,s){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),s=n.imageManager.getPixelSize(),a=s.width,l=s.height,u=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/u,h=c*(r.tileID.canonical.x+r.tileID.wrap*u),p=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,l],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/pe(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(i,s,r,o),{u_matrix:e,u_opacity:n})},Yn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Kn(e,n,r,i,o,s,a){for(var l=e.context,u=l.gl,c=e.useProgram("collisionBox"),h=[],p=0,d=0,f=0;f<i.length;f++){var _=i[f],m=n.getTile(_),g=m.getBucket(r);if(g){var y=_.posMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(_.posMatrix,m,o,s));var v=a?g.textCollisionBox:g.iconCollisionBox,b=g.collisionCircleArray;if(b.length>0){var x=t.create(),w=y;t.mul(x,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(x,x,g.placementViewportMatrix),h.push({circleArray:b,circleOffset:d,transform:w,invTransform:x}),d=p+=b.length/4}v&&c.draw(l,u.LINES,Ct.disabled,It.disabled,e.colorModeForRenderPass(),Tt.disabled,On(y,e.transform,m),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,null,v.collisionVertexBuffer)}}if(a&&h.length){var E=e.useProgram("collisionCircle"),S=new t.StructArrayLayout2f1f2i16;S.resize(4*p),S._trim();for(var C=0,I=0,k=h;I<k.length;I+=1)for(var T=k[I],P=0;P<T.circleArray.length/4;P++){var A=4*P,O=T.circleArray[A+0],M=T.circleArray[A+1],L=T.circleArray[A+2],N=T.circleArray[A+3];S.emplace(C++,O,M,L,N,0),S.emplace(C++,O,M,L,N,1),S.emplace(C++,O,M,L,N,2),S.emplace(C++,O,M,L,N,3)}(!qn||qn.length<2*p)&&(qn=function(e){var n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[o+0]=4*i+0,r.uint16[o+1]=4*i+1,r.uint16[o+2]=4*i+2,r.uint16[o+3]=4*i+2,r.uint16[o+4]=4*i+3,r.uint16[o+5]=4*i+0}return r}(p));for(var D=l.createIndexBuffer(qn,!0),R=l.createVertexBuffer(S,t.collisionCircleLayout.members,!0),z=0,F=h;z<F.length;z+=1){var B=F[z],j=Mn(B.transform,B.invTransform,e.transform);E.draw(l,u.TRIANGLES,Ct.disabled,It.disabled,e.colorModeForRenderPass(),Tt.disabled,j,r.id,R,D,t.SegmentVector.simpleSegment(0,2*B.circleOffset,B.circleArray.length,B.circleArray.length/2),null,e.transform.zoom,null,null,null)}R.destroy(),D.destroy()}}var Jn=t.identity(new Float32Array(16));function Qn(e,n,r,i,o,s){var a=t.getAnchorAlignment(e),l=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.Point((l/o+c[0])*s,(u/o+c[1])*s)}function tr(e,n,r,i,o,s,a,l,u,c,h){var p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,_={};d.clear();for(var m=0;m<p.length;m++){var g=p.get(m),y=g.hidden||!g.crossTileID||e.allowVerticalPlacement&&!g.placedOrientation?null:i[g.crossTileID];if(y){var v=new t.Point(g.anchorX,g.anchorY),b=Qt(v,r?l:a),x=te(s.cameraToCenterDistance,b.signedDistanceFromCamera),w=o.evaluateSizeForFeature(e.textSizeData,c,g)*x/t.ONE_EM;r&&(w*=e.tilePixelRatio/u);for(var E=Qn(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,w),S=r?Qt(v.add(E),a).point:b.point.add(n?E.rotate(-s.angle):E),C=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,I=0;I<g.numGlyphs;I++)t.addDynamicAttributes(d,S,C);h&&g.associatedIconIndex>=0&&(_[g.associatedIconIndex]={shiftedAnchor:S,angle:C})}else ue(g.numGlyphs,d)}if(h){f.clear();for(var k=e.icon.placedSymbolArray,T=0;T<k.length;T++){var P=k.get(T);if(P.hidden)ue(P.numGlyphs,f);else{var A=_[T];if(A)for(var O=0;O<P.numGlyphs;O++)t.addDynamicAttributes(f,A.shiftedAnchor,A.angle);else ue(P.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function er(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function nr(e,n,r,i,o,s,a,l,u,c,h,p){for(var d=e.context,f=d.gl,_=e.transform,m="map"===l,g="map"===u,y=m&&"point"!==r.layout.get("symbol-placement"),v=m&&!g&&!y,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=!1,w=e.depthModeForSublayer(0,Ct.ReadOnly),E=r.layout.get("text-variable-anchor"),S=[],C=0,I=i;C<I.length;C+=1){var k=I[C],T=n.getTile(k),P=T.getBucket(r);if(P){var A=o?P.text:P.icon;if(A&&A.segments.get().length){var O=A.programConfigurations.get(r.id),M=o||P.sdfIcons,L=o?P.textSizeData:P.iconSizeData,N=g||0!==_.pitch,D=e.useProgram(er(M,o,P),O),R=t.evaluateSizeForZoom(L,_.zoom),z=void 0,F=[0,0],B=void 0,j=void 0,V=null,U=void 0;if(o)B=T.glyphAtlasTexture,j=f.LINEAR,z=T.glyphAtlasTexture.size,P.iconsInText&&(F=T.imageAtlasTexture.size,V=T.imageAtlasTexture,U=N||e.options.rotating||e.options.zooming||"composite"===L.kind||"camera"===L.kind?f.LINEAR:f.NEAREST);else{var $=1!==r.layout.get("icon-size").constantOr(0)||P.iconsNeedLinear;B=T.imageAtlasTexture,j=M||e.options.rotating||e.options.zooming||$||N?f.LINEAR:f.NEAREST,z=T.imageAtlasTexture.size}var q=pe(T,1,e.transform.zoom),G=Kt(k.posMatrix,g,m,e.transform,q),H=Jt(k.posMatrix,g,m,e.transform,q),Z=E&&P.hasTextData(),W="none"!==r.layout.get("icon-text-fit")&&Z&&P.hasIconData();y&&ne(P,k.posMatrix,e,o,G,H,g,c);var X=e.translatePosMatrix(k.posMatrix,T,s,a),Y=y||o&&E||W?Jn:G,K=e.translatePosMatrix(H,T,s,a,!0),J=M&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),Q={program:D,buffers:A,uniformValues:M?P.iconsInText?Zn(L.kind,R,v,g,e,X,Y,K,z,F):Hn(L.kind,R,v,g,e,X,Y,K,o,z,!0):Gn(L.kind,R,v,g,e,X,Y,K,o,z),atlasTexture:B,atlasTextureIcon:V,atlasInterpolation:j,atlasInterpolationIcon:U,isSDF:M,hasHalo:J};if(b&&P.canOverlap){x=!0;for(var tt=0,et=A.segments.get();tt<et.length;tt+=1){var nt=et[tt];S.push({segments:new t.SegmentVector([nt]),sortKey:nt.sortKey,state:Q})}}else S.push({segments:A.segments,sortKey:0,state:Q})}}}x&&S.sort(function(t,e){return t.sortKey-e.sortKey});for(var rt=0,it=S;rt<it.length;rt+=1){var ot=it[rt],st=ot.state;if(d.activeTexture.set(f.TEXTURE0),st.atlasTexture.bind(st.atlasInterpolation,f.CLAMP_TO_EDGE),st.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),st.atlasTextureIcon&&st.atlasTextureIcon.bind(st.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),st.isSDF){var at=st.uniformValues;st.hasHalo&&(at.u_is_halo=1,rr(st.buffers,ot.segments,r,e,st.program,w,h,p,at)),at.u_is_halo=0}rr(st.buffers,ot.segments,r,e,st.program,w,h,p,st.uniformValues)}}function rr(t,e,n,r,i,o,s,a,l){var u=r.context;i.draw(u,u.gl.TRIANGLES,o,s,a,Tt.disabled,l,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ir(t,e,n,r,i,o,s){var a,l,u,c,h,p=t.context.gl,d=n.paint.get("fill-pattern"),f=d&&d.constantOr(1),_=n.getCrossfadeParameters();s?(l=f&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",a=p.LINES):(l=f?"fillPattern":"fill",a=p.TRIANGLES);for(var m=0,g=r;m<g.length;m+=1){var y=g[m],v=e.getTile(y);if(!f||v.patternsLoaded()){var b=v.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=t.useProgram(l,x);f&&(t.context.activeTexture.set(p.TEXTURE0),v.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePaintBuffers(_));var E=d.constantOr(null);if(E&&v.imageAtlas){var S=v.imageAtlas,C=S.patternPositions[E.to.toString()],I=S.patternPositions[E.from.toString()];C&&I&&x.setConstantPatternPositions(C,I)}var k=t.translatePosMatrix(y.posMatrix,v,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){c=b.indexBuffer2,h=b.segments2;var T=[p.drawingBufferWidth,p.drawingBufferHeight];u="fillOutlinePattern"===l&&f?Pn(k,t,_,v,T):Tn(k,T)}else c=b.indexBuffer,h=b.segments,u=f?kn(k,t,_,v):In(k);w.draw(t.context,a,i,t.stencilModeForClipping(y),o,Tt.disabled,u,n.id,b.layoutVertexBuffer,c,h,n.paint,t.transform.zoom,x)}}}}function or(t,e,n,r,i,o,s){for(var a=t.context,l=a.gl,u=n.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),h=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),d=0,f=r;d<f.length;d+=1){var _=f[d],m=e.getTile(_),g=m.getBucket(n);if(g){var y=g.programConfigurations.get(n.id),v=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(t.context.activeTexture.set(l.TEXTURE0),m.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(h));var b=u.constantOr(null);if(b&&m.imageAtlas){var x=m.imageAtlas,w=x.patternPositions[b.to.toString()],E=x.patternPositions[b.from.toString()];w&&E&&y.setConstantPatternPositions(w,E)}var S=t.translatePosMatrix(_.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=n.paint.get("fill-extrusion-vertical-gradient"),I=c?Cn(S,t,C,p,_,h,m):Sn(S,t,C,p);v.draw(a,a.gl.TRIANGLES,i,o,s,Tt.backCCW,I,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,t.transform.zoom,y)}}}function sr(e,n,r,i,o,s){var a=e.context,l=a.gl,u=n.fbo;if(u){var c=e.useProgram("hillshade");a.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get());var h=function(e,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),s=r.paint.get("hillshade-accent-color"),a=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(a-=e.transform.angle);var l,u,c,h=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),h),u_image:0,u_latrange:(l=n.tileID,u=Math.pow(2,l.canonical.z),c=l.canonical.y,[new t.MercatorCoordinate(0,c/u).toLngLat().lat,new t.MercatorCoordinate(0,(c+1)/u).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),a],u_shadow:i,u_highlight:o,u_accent:s}}(e,n,r);c.draw(a,l.TRIANGLES,i,o,s,Tt.disabled,h,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function ar(e,n,r,i,o,s){var a=e.context,l=a.gl,u=n.dem;if(u&&u.data){var c=u.dim,h=u.stride,p=u.getPixels();if(a.activeTexture.set(l.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){var d=n.demTexture;d.update(p,{premultiply:!1}),d.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(a,p,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);a.activeTexture.set(l.TEXTURE0);var f=n.fbo;if(!f){var _=new t.Texture(a,{width:c,height:c,data:null},l.RGBA);_.bind(l.LINEAR,l.CLAMP_TO_EDGE),(f=n.fbo=a.createFramebuffer(c,c,!0)).colorAttachment.set(_.texture)}a.bindFramebuffer.set(f.framebuffer),a.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,i,o,s,Tt.disabled,function(e,n){var r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}}(n.tileID,u),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function lr(e,n,r,i,o){var s=i.paint.get("raster-fade-duration");if(s>0){var a=t.browser.now(),l=(a-e.timeAdded)/s,u=n?(a-n.timeAdded)/s:-1,c=r.getSource(),h=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(e.tileID.overscaledZ-h),d=p&&e.refreshedUponExpiration?1:t.clamp(p?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var ur=new t.Color(1,0,0,1),cr=new t.Color(0,1,0,1),hr=new t.Color(0,0,1,1),pr=new t.Color(1,0,1,1),dr=new t.Color(0,1,1,1);function fr(t,e,n,r){mr(t,0,e+n/2,t.transform.width,n,r)}function _r(t,e,n,r){mr(t,e-n/2,0,n,t.transform.height,r)}function mr(e,n,r,i,o,s){var a=e.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),a.clear({color:s}),l.disable(l.SCISSOR_TEST)}function gr(e,n,r){var i=e.context,o=i.gl,s=r.posMatrix,a=e.useProgram("debug"),l=Ct.disabled,u=It.disabled,c=e.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),a.draw(i,o.LINE_STRIP,l,u,c,Tt.disabled,Ln(s,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var h=n.getTileByID(r.key).latestRawTileData,p=Math.floor((h&&h.byteLength||0)/1024),d=n.getTile(r).tileSize,f=512/Math.min(d,512)*(r.overscaledZ/e.transform.zoom)*.5,_=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(_+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,_+" "+p+"kb"),a.draw(i,o.TRIANGLES,l,u,kt.alphaBlended,Tt.disabled,Ln(s,t.Color.transparent,f),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var yr={symbol:function(e,n,r,i,o){if("translucent"===e.renderPass){var s=It.disabled,a=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,s,a){for(var l=n.transform,u="map"===o,c="map"===s,h=0,p=e;h<p.length;h+=1){var d=p[h],f=i.getTile(d),_=f.getBucket(r);if(_&&_.text&&_.text.segments.get().length){var m=t.evaluateSizeForZoom(_.textSizeData,l.zoom),g=pe(f,1,n.transform.zoom),y=Kt(d.posMatrix,c,u,n.transform,g),v="none"!==r.layout.get("icon-text-fit")&&_.hasIconData();if(m){var b=Math.pow(2,l.zoom-f.tileID.overscaledZ);tr(_,u,c,a,t.symbolSize,l,y,d.posMatrix,b,m,v)}}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&nr(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),s,a),0!==r.paint.get("text-opacity").constantOr(1)&&nr(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),s,a),n.map.showCollisionBoxes&&(Kn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Kn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),s=r.paint.get("circle-stroke-width"),a=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==s.constantOr(1)&&0!==a.constantOr(1)){for(var u=e.context,c=u.gl,h=e.depthModeForSublayer(0,Ct.ReadOnly),p=It.disabled,d=e.colorModeForRenderPass(),f=[],_=0;_<i.length;_++){var m=i[_],g=n.getTile(m),y=g.getBucket(r);if(y){var v=y.programConfigurations.get(r.id),b={programConfiguration:v,program:e.useProgram("circle",v),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:An(e,m,g,r)};if(l)for(var x=0,w=y.segments.get();x<w.length;x+=1){var E=w[x];f.push({segments:new t.SegmentVector([E]),sortKey:E.sortKey,state:b})}else f.push({segments:y.segments,sortKey:0,state:b})}}l&&f.sort(function(t,e){return t.sortKey-e.sortKey});for(var S=0,C=f;S<C.length;S+=1){var I=C[S],k=I.state;k.program.draw(u,c.TRIANGLES,h,p,d,Tt.disabled,k.uniformValues,r.id,k.layoutVertexBuffer,k.indexBuffer,I.segments,r.paint,e.transform.zoom,k.programConfiguration)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,s=o.gl,a=It.disabled,l=new kt([s.ONE,s.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var u=0;u<i.length;u++){var c=i[u];if(!n.hasRenderableParent(c)){var h=n.getTile(c),p=h.getBucket(r);if(p){var d=p.programConfigurations.get(r.id);e.useProgram("heatmap",d).draw(o,s.TRIANGLES,Ct.disabled,a,l,Tt.disabled,Dn(c.posMatrix,h,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,r.paint,e.transform.zoom,d)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var s=n.colorRampTexture;s||(s=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),s.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Ct.disabled,It.disabled,e.colorModeForRenderPass(),Tt.disabled,function(e,n,r,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var s=e.context.gl;return{u_matrix:o,u_world:[s.drawingBufferWidth,s.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),s=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==s.constantOr(1))for(var a=e.depthModeForSublayer(0,Ct.ReadOnly),l=e.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),p=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),f=h?"linePattern":u?"lineSDF":p?"lineGradient":"line",_=e.context,m=_.gl,g=!0,y=0,v=i;y<v.length;y+=1){var b=v[y],x=n.getTile(b);if(!h||x.patternsLoaded()){var w=x.getBucket(r);if(w){var E=w.programConfigurations.get(r.id),S=e.context.program.get(),C=e.useProgram(f,E),I=g||C.program!==S,k=c.constantOr(null);if(k&&x.imageAtlas){var T=x.imageAtlas,P=T.patternPositions[k.to.toString()],A=T.patternPositions[k.from.toString()];P&&A&&E.setConstantPatternPositions(P,A)}var O=h?Fn(e,x,r,d):u?Bn(e,x,r,u,d):p?zn(e,x,r,w.lineClipsArray.length):Rn(e,x,r);if(h)_.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePaintBuffers(d);else if(u&&(I||e.lineAtlas.dirty))_.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(_);else if(p){var M=w.gradients[r.id],L=M.texture;if(r.gradientVersion!==M.version){var N=256;if(r.stepInterpolant){var D=n.getSource().maxzoom,R=b.canonical.z===D?Math.ceil(1<<e.transform.maxZoom-b.canonical.z):1;N=t.clamp(t.nextPowerOfTwo(w.maxLineLength/t.EXTENT*1024*R),256,_.maxTextureSize)}M.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:M.gradient||void 0,clips:w.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new t.Texture(_,M.gradient,m.RGBA),M.version=r.gradientVersion,L=M.texture}_.activeTexture.set(m.TEXTURE0),L.bind(r.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}C.draw(_,m.TRIANGLES,a,e.stencilModeForClipping(b),l,Tt.disabled,O,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,e.transform.zoom,E,w.layoutVertexBuffer2),g=!1}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),s=r.paint.get("fill-opacity");if(0!==s.constantOr(1)){var a=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?Ct.ReadWrite:Ct.ReadOnly);ir(e,n,r,i,c,a,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var h=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ct.ReadOnly);ir(e,n,r,i,h,a,!0)}}},"fill-extrusion":function(t,e,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new Ct(t.context.gl.LEQUAL,Ct.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))or(t,e,n,r,o,It.disabled,kt.disabled),or(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var s=t.colorModeForRenderPass();or(t,e,n,r,o,It.disabled,s)}}},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=t.depthModeForSublayer(0,Ct.ReadOnly),s=t.colorModeForRenderPass(),a="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],l=a[0],u=0,c=a[1];u<c.length;u+=1){var h=c[u],p=e.getTile(h);p.needsHillshadePrepare&&"offscreen"===t.renderPass?ar(t,p,n,o,It.disabled,s):"translucent"===t.renderPass&&sr(t,p,n,o,l[h.overscaledZ],s)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length)for(var i=t.context,o=i.gl,s=e.getSource(),a=t.useProgram("raster"),l=t.colorModeForRenderPass(),u=s instanceof M?[{},r]:t.stencilConfigForOverlap(r),c=u[0],h=u[1],p=h[h.length-1].overscaledZ,d=!t.options.moving,f=0,_=h;f<_.length;f+=1){var m=_[f],g=t.depthModeForSublayer(m.overscaledZ-p,1===n.paint.get("raster-opacity")?Ct.ReadWrite:Ct.ReadOnly,o.LESS),y=e.getTile(m),v=t.transform.calculatePosMatrix(m.toUnwrapped(),d);y.registerFadeDuration(n.paint.get("raster-fade-duration"));var b=e.findLoadedParent(m,0),x=lr(y,b,e,n,t.transform),w=void 0,E=void 0,S="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),y.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),E=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var C=Un(v,E||[0,0],w||1,x,n);s instanceof M?a.draw(i,o.TRIANGLES,g,It.disabled,l,Tt.disabled,C,n.id,s.boundsBuffer,t.quadTriangleIndexBuffer,s.boundsSegments):a.draw(i,o.TRIANGLES,g,c[m.overscaledZ],l,Tt.disabled,C,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,s=o.gl,a=t.transform,l=a.tileSize,u=n.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=!u&&1===r.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var h=It.disabled,p=t.depthModeForSublayer(0,"opaque"===c?Ct.ReadWrite:Ct.ReadOnly),d=t.colorModeForRenderPass(),f=t.useProgram(u?"backgroundPattern":"background"),_=a.coveringTiles({tileSize:l});u&&(o.activeTexture.set(s.TEXTURE0),t.imageManager.bind(t.context));for(var m=n.getCrossfadeParameters(),g=0,y=_;g<y.length;g+=1){var v=y[g],b=t.transform.calculatePosMatrix(v.toUnwrapped()),x=u?Xn(b,i,t,u,{tileID:v,tileSize:l},m):Wn(b,i,r);f.draw(o,s.TRIANGLES,p,h,d,Tt.disabled,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)gr(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(It.disabled);var s="3d"===i.renderingMode?new Ct(t.context.gl.LEQUAL,Ct.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Ct.ReadOnly);r.setDepthMode(s),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},vr=function(t,e){this.context=new Pt(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=At.maxUnderzooming+At.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fe,this.gpuTimers={}};vr.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1)this.style._layers[i[r]].resize()},vr.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,qe.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,qe.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,O.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,qe.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var s=new t.StructArrayLayout1ui2;s.emplaceBack(0),s.emplaceBack(1),s.emplaceBack(3),s.emplaceBack(2),s.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(s);var a=new t.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new It({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},vr.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Ct.disabled,this.stencilClearMode,kt.disabled,Tt.disabled,Nn(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},vr.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(kt.disabled),n.setDepthMode(Ct.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,s=e;o<s.length;o+=1){var a=s[o],l=this._tileClippingMaskIDs[a.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,Ct.disabled,new It({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),kt.disabled,Tt.disabled,Nn(a.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},vr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new It({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},vr.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new It({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},vr.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,r=t.sort(function(t,e){return e.overscaledZ-t.overscaledZ}),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var s={},a=0;a<o;a++)s[a+i]=new It({func:n.GEQUAL,mask:255},a+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[s,r]}return[(e={},e[i]=It.disabled,e),r]},vr.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new kt([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?kt.unblended:kt.alphaBlended},vr.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return Ct.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Ct(n||this.context.gl.LEQUAL,e,[r,r])},vr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},vr.prototype.render=function(e,n){var r=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var s in o){var a=o[s];a.used&&a.prepare(this.context)}var l,u,c={},h={},p={};for(var d in o){var f=o[d];c[d]=f.getVisibleCoordinates(),h[d]=c[d].slice().reverse(),p[d]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _=0;_<i.length;_++)if(this.style._layers[i[_]].is3D()){this.opaquePassCutoff=_;break}this.renderPass="offscreen";for(var m=0,g=i;m<g.length;m+=1){var y=this.style._layers[g[m]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var v=h[y.source];("custom"===y.type||v.length)&&this.renderLayer(this,o[y.source],y,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[i[this.currentLayer]],x=o[b.source],w=c[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var E=this.style._layers[i[this.currentLayer]],S=o[E.source],C=("symbol"===E.type?p:h)[E.source];this._renderTileClippingMasks(E,c[E.source]),this.renderLayer(this,S,E,C)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(u&&u.id)&&(u=r.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<u.getSource().maxzoom)&&(l=u))}),l&&yr.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;fr(t,t.transform.height-(e.top||0),3,ur),fr(t,e.bottom||0,3,cr),_r(t,e.left||0,3,hr),_r(t,t.transform.width-(e.right||0),3,pr);var n=t.transform.centerPoint;!function(t,e,n,r){mr(t,e-1,n-10,2,20,r),mr(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,dr)}(this),this.context.setDefault()},vr.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),yr[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},vr.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},vr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},vr.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},vr.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e},vr.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var s=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(s){var a=Math.sin(s),l=Math.cos(s);r=[r[0]*l-r[1]*a,r[0]*a+r[1]*l]}var u=[o?r[0]:pe(n,r[0],this.transform.zoom),o?r[1]:pe(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},vr.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},vr.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},vr.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},vr.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new wn(this.context,t,vn[t],e,Yn[t],this._showOverdrawInspector)),this.cache[n]},vr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},vr.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},vr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},vr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var br=function(t,e){this.points=t,this.planes=e};br.fromInvProjectionMatrix=function(e,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(n){return t.transformMat4([],n,e)}).map(function(e){return t.scale$1([],e,1/e[3]/n*i)}),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(e){var n=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),i=t.normalize([],t.cross([],n,r)),s=-t.dot(i,o[e[1]]);return i.concat(s)});return new br(o,s)};var xr=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};xr.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],r=t.clone$2(this.min),i=t.clone$2(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new xr(r,i)},xr.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},xr.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},xr.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<e.planes.length;i++){for(var o=e.planes[i],s=0,a=0;a<n.length;a++)s+=t.dot$1(o,n[a])>=0;if(0===s)return 0;s!==n.length&&(r=!1)}if(r)return 2;for(var l=0;l<3;l++){for(var u=Number.MAX_VALUE,c=-Number.MAX_VALUE,h=0;h<e.points.length;h++){var p=e.points[h][l]-this.min[l];u=Math.min(u,p),c=Math.max(c,p)}if(c<0||u>this.max[l]-this.min[l])return 0}return 1};var wr=function(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r};wr.prototype.interpolate=function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this},wr.prototype.getCenter=function(e,n){var r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)},wr.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},wr.prototype.clone=function(){return new wr(this.top,this.bottom,this.left,this.right)},wr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Er=function(e,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wr,this._posMatrixCache={},this._alignedPosMatrixCache={}},Sr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Er.prototype.clone=function(){var t=new Er(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},Sr.minZoom.get=function(){return this._minZoom},Sr.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Sr.maxZoom.get=function(){return this._maxZoom},Sr.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Sr.minPitch.get=function(){return this._minPitch},Sr.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},Sr.maxPitch.get=function(){return this._maxPitch},Sr.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},Sr.renderWorldCopies.get=function(){return this._renderWorldCopies},Sr.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Sr.worldSize.get=function(){return this.tileSize*this.scale},Sr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Sr.size.get=function(){return new t.Point(this.width,this.height)},Sr.bearing.get=function(){return-this.angle/Math.PI*180},Sr.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Sr.pitch.get=function(){return this._pitch/Math.PI*180},Sr.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Sr.fov.get=function(){return this._fov/Math.PI*180},Sr.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Sr.zoom.get=function(){return this._zoom},Sr.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Sr.center.get=function(){return this._center},Sr.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Sr.padding.get=function(){return this._edgeInsets.toJSON()},Sr.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},Sr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Er.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},Er.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},Er.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Er.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),s=this.pointCoordinate(new t.Point(0,this.height)),a=Math.floor(Math.min(r.x,i.x,o.x,s.x)),l=Math.floor(Math.max(r.x,i.x,o.x,s.x)),u=a-1;u<=l+1;u++)0!==u&&n.push(new t.UnwrappedTileID(u,e));return n},Er.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),s=[o*i.x,o*i.y,0],a=br.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=n);var u=function(t){return{aabb:new xr([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],h=[],p=n,d=e.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var f=1;f<=3;f++)c.push(u(-f)),c.push(u(f));for(c.push(u(0));c.length>0;){var _=c.pop(),m=_.x,g=_.y,y=_.fullyVisible;if(!y){var v=_.aabb.intersects(a);if(0===v)continue;y=2===v}var b=_.aabb.distanceX(s),x=_.aabb.distanceY(s),w=Math.max(Math.abs(b),Math.abs(x));if(_.zoom===p||w>3+(1<<p-_.zoom)-2&&_.zoom>=l)h.push({tileID:new t.OverscaledTileID(_.zoom===p?d:_.zoom,_.wrap,_.zoom,m,g),distanceSq:t.sqrLen([s[0]-.5-m,s[1]-.5-g])});else for(var E=0;E<4;E++){var S=(m<<1)+E%2,C=(g<<1)+(E>>1);c.push({aabb:_.aabb.quadrant(E),zoom:_.zoom+1,x:S,y:C,wrap:_.wrap,fullyVisible:y})}}return h.sort(function(t,e){return t.distanceSq-e.distanceSq}).map(function(t){return t.tileID})},Er.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Sr.unmodified.get=function(){return this._unmodified},Er.prototype.zoomScale=function(t){return Math.pow(2,t)},Er.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Er.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},Er.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},Sr.point.get=function(){return this.project(this.center)},Er.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),s=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(s),this._renderWorldCopies&&(this.center=this.center.wrap())},Er.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Er.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Er.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Er.prototype.coordinateLocation=function(t){return t.toLngLat()},Er.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],s=n[1]/i,a=r[1]/o,l=n[2]/i,u=r[2]/o,c=l===u?0:(0-l)/(u-l);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,c)/this.worldSize,t.number(s,a,c)/this.worldSize)},Er.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},Er.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Er.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Er.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Er.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,s=this.worldSize/this.zoomScale(o.z),a=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[a*s,o.y*s,0]),t.scale(l,l,[s/t.EXTENT,s/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]},Er.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Er.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,s=90,a=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;o=t.mercatorYfromLat(h[1])*this.worldSize,e=(s=t.mercatorYfromLat(h[0])*this.worldSize)-o<u.y?u.y/(s-o):0}if(this.lngRange){var p=this.lngRange;a=t.mercatorXfromLng(p[0])*this.worldSize,n=(l=t.mercatorXfromLng(p[1])*this.worldSize)-a<u.x?u.x/(l-a):0}var d=this.point,f=Math.max(n||0,e||0);if(f)return this.center=this.unproject(new t.Point(n?(l+a)/2:d.x,e?(s+o)/2:d.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var _=d.y,m=u.y/2;_-m<o&&(i=o+m),_+m>s&&(i=s-m)}if(this.lngRange){var g=d.x,y=u.x/2;g-y<a&&(r=a+y),g+y>l&&(r=l-y)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:d.x,void 0!==i?i:d.y))),this._unmodified=c,this._constraining=!1}},Er.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,s=o.x,a=o.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),u=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,u,l),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-s,-a,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);var h=this.width%2/2,p=this.height%2/2,d=Math.cos(this.angle),f=Math.sin(this.angle),_=s-Math.round(s)+d*h+f*p,m=a-Math.round(a)+d*p+f*h,g=new Float64Array(c);if(t.translate(g,g,[_>.5?_-1:_,m>.5?m-1:m,0]),this.alignedProjMatrix=g,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Er.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Er.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},Er.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,s=n.y,a=0,l=e;a<l.length;a+=1){var u=l[a];r=Math.min(r,u.x),i=Math.min(i,u.y),o=Math.max(o,u.x),s=Math.max(s,u.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,s),new t.Point(r,s),new t.Point(r,i)]},Object.defineProperties(Er.prototype,Sr);var Cr=function(e){var n,r,i,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),r=!1,i=null,o=function(){i=null,r&&(n(),i=setTimeout(o,300),r=!1)},function(){return r=!0,i||o(),i})};Cr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Cr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Cr.prototype.getHashString=function(e){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),s=Math.round(n.lng*o)/o,a=Math.round(n.lat*o)/o,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=e?"/"+s+"/"+a+"/"+r:r+"/"+a+"/"+s,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){var h=this._hashName,p=!1,d=t.window.location.hash.slice(1).split("&").map(function(t){var e=t.split("=")[0];return e===h?(p=!0,e+"="+c):t}).filter(function(t){return t});return p||d.push(h+"="+c),"#"+d.join("&")}return"#"+c},Cr.prototype._getCurrentHash=function(){var e,n=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map(function(t){return t.split("=")}).forEach(function(t){t[0]===n._hashName&&(e=t)}),(e&&e[1]||"").split("/")):r.split("/")},Cr.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some(function(t){return isNaN(t)})){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Cr.prototype._updateHashUnthrottled=function(){var e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,e)}catch(t){}};var Ir={linearity:.3,easing:t.bezier(0,0,.3,1)},kr=t.extend({deceleration:2500,maxSpeed:1400},Ir),Tr=t.extend({deceleration:20,maxSpeed:1400},Ir),Pr=t.extend({deceleration:1e3,maxSpeed:360},Ir),Ar=t.extend({deceleration:1e3,maxSpeed:90},Ir),Or=function(t){this._map=t,this.clear()};function Mr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Lr(e,n,r){var i=r.maxSpeed,o=r.linearity,s=r.deceleration,a=t.clamp(e*o/(n/1e3),-i,i),l=Math.abs(a)/(s*o);return{easing:r.easing,duration:1e3*l,amount:a*(l/2)}}Or.prototype.clear=function(){this._inertiaBuffer=[]},Or.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Or.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,n=t.browser.now();e.length>0&&n-e[0].time>160;)e.shift()},Or.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},r=0,i=this._inertiaBuffer;r<i.length;r+=1){var o=i[r].settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}var s=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(n.pan.mag()){var l=Lr(n.pan.mag(),s,t.extend({},kr,e||{}));a.offset=n.pan.mult(l.amount/n.pan.mag()),a.center=this._map.transform.center,Mr(a,l)}if(n.zoom){var u=Lr(n.zoom,s,Tr);a.zoom=this._map.transform.zoom+u.amount,Mr(a,u)}if(n.bearing){var c=Lr(n.bearing,s,Pr);a.bearing=this._map.transform.bearing+t.clamp(c.amount,-179,179),Mr(a,c)}if(n.pitch){var h=Lr(n.pitch,s,Ar);a.pitch=this._map.transform.pitch+h.amount,Mr(a,h)}if(a.zoom||a.bearing){var p=void 0===n.pinchAround?n.around:n.pinchAround;a.around=p?this._map.unproject(p):this._map.getCenter()}return this.clear(),t.extend(a,{noMoveStart:!0})}};var Nr=function(e){function r(r,i,o,s){void 0===s&&(s={});var a=n.mousePos(i.getCanvasContainer(),o),l=i.unproject(a);e.call(this,r,t.extend({point:a,lngLat:l,originalEvent:o},s)),this._defaultPrevented=!1,this.target=i}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),Dr=function(e){function r(r,i,o){var s="touchend"===r?o.changedTouches:o.touches,a=n.touchPos(i.getCanvasContainer(),s),l=a.map(function(t){return i.unproject(t)}),u=a.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.Point(0,0)),c=i.unproject(u);e.call(this,r,{points:a,point:u,lngLats:l,lngLat:c,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),Rr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),zr=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};zr.prototype.reset=function(){delete this._mousedownPos},zr.prototype.wheel=function(t){return this._firePreventable(new Rr(t.type,this._map,t))},zr.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Nr(t.type,this._map,t))},zr.prototype.mouseup=function(t){this._map.fire(new Nr(t.type,this._map,t))},zr.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Nr(t.type,this._map,t))},zr.prototype.dblclick=function(t){return this._firePreventable(new Nr(t.type,this._map,t))},zr.prototype.mouseover=function(t){this._map.fire(new Nr(t.type,this._map,t))},zr.prototype.mouseout=function(t){this._map.fire(new Nr(t.type,this._map,t))},zr.prototype.touchstart=function(t){return this._firePreventable(new Dr(t.type,this._map,t))},zr.prototype.touchmove=function(t){this._map.fire(new Dr(t.type,this._map,t))},zr.prototype.touchend=function(t){this._map.fire(new Dr(t.type,this._map,t))},zr.prototype.touchcancel=function(t){this._map.fire(new Dr(t.type,this._map,t))},zr.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},zr.prototype.isEnabled=function(){return!0},zr.prototype.isActive=function(){return!1},zr.prototype.enable=function(){},zr.prototype.disable=function(){};var Fr=function(t){this._map=t};Fr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fr.prototype.mousemove=function(t){this._map.fire(new Nr(t.type,this._map,t))},Fr.prototype.mousedown=function(){this._delayContextMenu=!0},Fr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Nr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fr.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Nr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Fr.prototype.isEnabled=function(){return!0},Fr.prototype.isActive=function(){return!1},Fr.prototype.enable=function(){},Fr.prototype.disable=function(){};var Br=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function jr(t,e){for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}Br.prototype.isEnabled=function(){return!!this._enabled},Br.prototype.isActive=function(){return!!this._active},Br.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Br.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Br.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(n.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Br.prototype.mousemoveWindow=function(t,e){if(this._active){var r=e;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=r,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(i.x,r.x),s=Math.max(i.x,r.x),a=Math.min(i.y,r.y),l=Math.max(i.y,r.y);n.setTransform(this._box,"translate("+o+"px,"+a+"px)"),this._box.style.width=s-o+"px",this._box.style.height=l-a+"px"}}},Br.prototype.mouseupWindow=function(e,r){var i=this;if(this._active&&0===e.button){var o=this._startPos,s=r;if(this.reset(),n.suppressClick(),o.x!==s.x||o.y!==s.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(o,s,i._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Br.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Br.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Br.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Vr=function(t){this.reset(),this.numTouches=t.numTouches};Vr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Vr.prototype.touchstart=function(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){for(var n=new t.Point(0,0),r=0,i=e;r<i.length;r+=1)n._add(i[r]);return n.div(e.length)}(n),this.touches=jr(r,n)))},Vr.prototype.touchmove=function(t,e,n){if(!this.aborted&&this.centroid){var r=jr(n,e);for(var i in this.touches){var o=r[i];(!o||o.dist(this.touches[i])>30)&&(this.aborted=!0)}}},Vr.prototype.touchend=function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var Ur=function(t){this.singleTap=new Vr(t),this.numTaps=t.numTaps,this.reset()};Ur.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ur.prototype.touchstart=function(t,e,n){this.singleTap.touchstart(t,e,n)},Ur.prototype.touchmove=function(t,e,n){this.singleTap.touchmove(t,e,n)},Ur.prototype.touchend=function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(i&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var $r=function(){this._zoomIn=new Ur({numTouches:1,numTaps:2}),this._zoomOut=new Ur({numTouches:2,numTaps:1}),this.reset()};$r.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},$r.prototype.touchstart=function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)},$r.prototype.touchmove=function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)},$r.prototype.touchend=function(t,e,n){var r=this,i=this._zoomIn.touchend(t,e,n),o=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout(function(){return r.reset()},0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout(function(){return r.reset()},0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},$r.prototype.touchcancel=function(){this.reset()},$r.prototype.enable=function(){this._enabled=!0},$r.prototype.disable=function(){this._enabled=!1,this.reset()},$r.prototype.isEnabled=function(){return this._enabled},$r.prototype.isActive=function(){return this._active};var qr={0:1,2:2},Gr=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};Gr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Gr.prototype._correctButton=function(t,e){return!1},Gr.prototype._move=function(t,e){return{}},Gr.prototype.mousedown=function(t,e){if(!this._lastPoint){var r=n.mouseButton(t);this._correctButton(t,r)&&(this._lastPoint=e,this._eventButton=r)}},Gr.prototype.mousemoveWindow=function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){var n=qr[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)},Gr.prototype.mouseupWindow=function(t){this._lastPoint&&n.mouseButton(t)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Gr.prototype.enable=function(){this._enabled=!0},Gr.prototype.disable=function(){this._enabled=!1,this.reset()},Gr.prototype.isEnabled=function(){return this._enabled},Gr.prototype.isActive=function(){return this._active};var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,n){t.prototype.mousedown.call(this,e,n),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(Gr),Zr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Gr),Wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(Gr),Xr=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Xr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Xr.prototype.touchstart=function(t,e,n){return this._calculateTransform(t,e,n)},Xr.prototype.touchmove=function(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)},Xr.prototype.touchend=function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()},Xr.prototype.touchcancel=function(){this.reset()},Xr.prototype._calculateTransform=function(e,n,r){r.length>0&&(this._active=!0);var i=jr(r,n),o=new t.Point(0,0),s=new t.Point(0,0),a=0;for(var l in i){var u=i[l],c=this._touches[l];c&&(o._add(u),s._add(u.sub(c)),a++,i[l]=u)}if(this._touches=i,!(a<this._minTouches)&&s.mag()){var h=s.div(a);if(this._sum._add(h),!(this._sum.mag()<this._clickTolerance))return{around:o.div(a),panDelta:h}}},Xr.prototype.enable=function(){this._enabled=!0},Xr.prototype.disable=function(){this._enabled=!1,this.reset()},Xr.prototype.isEnabled=function(){return this._enabled},Xr.prototype.isActive=function(){return this._active};var Yr=function(){this.reset()};function Kr(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Jr(t,e){return Math.log(t/e)/Math.LN2}Yr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Yr.prototype._start=function(t){},Yr.prototype._move=function(t,e,n){return{}},Yr.prototype.touchstart=function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))},Yr.prototype.touchmove=function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var r=this._firstTwoTouches,i=r[1],o=Kr(n,e,r[0]),s=Kr(n,e,i);if(o&&s){var a=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],a,t)}}},Yr.prototype.touchend=function(t,e,r){if(this._firstTwoTouches){var i=this._firstTwoTouches,o=i[1],s=Kr(r,e,i[0]),a=Kr(r,e,o);s&&a||(this._active&&n.suppressClick(),this.reset())}},Yr.prototype.touchcancel=function(){this.reset()},Yr.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Yr.prototype.disable=function(){this._enabled=!1,this.reset()},Yr.prototype.isEnabled=function(){return this._enabled},Yr.prototype.isActive=function(){return this._active};var Qr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Jr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Jr(this._distance,n),pinchAround:e}},e}(Yr);function ti(t,e){return 180*t.angleWith(e)/Math.PI}var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ti(this._vector,n),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=ti(t,this._startVector);return Math.abs(n)<e},e}(Yr);function ni(t){return Math.abs(t.y)>Math.abs(t.x)}var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,ni(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,n){var r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,n){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,i=e.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return ni(t)&&ni(e)&&o}},e}(Yr),ii={panStep:100,bearingStep:15,pitchStep:10},oi=function(){var t=ii;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1};function si(t){return t*(2-t)}oi.prototype.reset=function(){this._active=!1},oi.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,r=0,i=0,o=0,s=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),s=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),s=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(a){var l=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:si,zoom:n?Math.round(l)+n*(t.shiftKey?2:1):l,bearing:a.getBearing()+r*e._bearingStep,pitch:a.getPitch()+i*e._pitchStep,offset:[-o*e._panStep,-s*e._panStep],center:a.getCenter()},{originalEvent:t})}}}},oi.prototype.enable=function(){this._enabled=!0},oi.prototype.disable=function(){this._enabled=!1,this.reset()},oi.prototype.isEnabled=function(){return this._enabled},oi.prototype.isActive=function(){return this._active},oi.prototype.disableRotation=function(){this._rotationDisabled=!0},oi.prototype.enableRotation=function(){this._rotationDisabled=!1};var ai=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};ai.prototype.setZoomRate=function(t){this._defaultZoomRate=t},ai.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},ai.prototype.isEnabled=function(){return!!this._enabled},ai.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ai.prototype.isZooming=function(){return!!this._zooming},ai.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},ai.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ai.prototype.wheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}},ai.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},ai.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ai.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var s,a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,l=this._startZoom,u=this._easing,c=!1;if("wheel"===this._type&&l&&u){var h=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=u(h);s=t.number(l,a,p),h<1?this._frameId||(this._frameId=!0):c=!0}else s=a,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:s-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ai.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),s=.27/Math.sqrt(o*o+1e-4)*.01,a=Math.sqrt(.0729-s*s);n=t.bezier(s,a,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n},ai.prototype.reset=function(){this._active=!1};var li=function(t,e){this._clickZoom=t,this._tapZoom=e};li.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},li.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},li.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},li.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ui=function(){this.reset()};ui.prototype.reset=function(){this._active=!1},ui.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}},ui.prototype.enable=function(){this._enabled=!0},ui.prototype.disable=function(){this._enabled=!1,this.reset()},ui.prototype.isEnabled=function(){return this._enabled},ui.prototype.isActive=function(){return this._active};var ci=function(){this._tap=new Ur({numTouches:1,numTaps:1}),this.reset()};ci.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ci.prototype.touchstart=function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))},ci.prototype.touchmove=function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)},ci.prototype.touchend=function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)},ci.prototype.touchcancel=function(){this.reset()},ci.prototype.enable=function(){this._enabled=!0},ci.prototype.disable=function(){this._enabled=!1,this.reset()},ci.prototype.isEnabled=function(){return this._enabled},ci.prototype.isActive=function(){return this._active};var hi=function(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n};hi.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},hi.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},hi.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},hi.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pi=function(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n};pi.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pi.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pi.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pi.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var di=function(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};di.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},di.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},di.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},di.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},di.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},di.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var fi=function(t){return t.zoom||t.drag||t.pitch||t.rotate},_i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function mi(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var gi=function(e,r){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Or(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),t.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[t.window,"blur",void 0]];for(var o=0,s=this._listeners;o<s.length;o+=1){var a=s[o],l=a[0];n.addEventListener(l,a[1],l===t.window.document?this.handleWindowEvent:this.handleEvent,a[2])}};gi.prototype.destroy=function(){for(var e=0,r=this._listeners;e<r.length;e+=1){var i=r[e],o=i[0];n.removeEventListener(o,i[1],o===t.window.document?this.handleWindowEvent:this.handleEvent,i[2])}},gi.prototype._addDefaultHandlers=function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new zr(e,t));var r=e.boxZoom=new Br(e,t);this._add("boxZoom",r);var i=new $r,o=new ui;e.doubleClickZoom=new li(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var s=new ci;this._add("tapDragZoom",s);var a=e.touchPitch=new ri;this._add("touchPitch",a);var l=new Zr(t),u=new Wr(t);e.dragRotate=new pi(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Hr(t),h=new Xr(t);e.dragPan=new hi(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var p=new ei,d=new Qr;e.touchZoomRotate=new di(n,d,p,s),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);var f=e.scrollZoom=new ai(e,this);this._add("scrollZoom",f,["mousePan"]);var _=e.keyboard=new oi;this._add("keyboard",_),this._add("blockableMapEvent",new Fr(e));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m+=1){var y=g[m];t.interactive&&t[y]&&e[y].enable(t[y])}},gi.prototype._add=function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e},gi.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,n=this._handlers;e<n.length;e+=1)n[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},gi.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},gi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},gi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},gi.prototype.isMoving=function(){return Boolean(fi(this._eventsInProgress))||this.isZooming()},gi.prototype._blockedByActive=function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1},gi.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},gi.prototype._getMapTouches=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=r[n];this._el.contains(i.target)&&e.push(i)}return e},gi.prototype.handleEvent=function(t,e){if("blur"!==t.type){this._updatingCamera=!0;for(var r="renderFrame"===t.type?void 0:t,i={needsRenderFrame:!1},o={},s={},a=t.touches?this._getMapTouches(t.touches):void 0,l=a?n.touchPos(this._el,a):n.mousePos(this._el,t),u=0,c=this._handlers;u<c.length;u+=1){var h=c[u],p=h.handlerName,d=h.handler,f=h.allowed;if(d.isEnabled()){var _=void 0;this._blockedByActive(s,f,p)?d.reset():d[e||t.type]&&(_=d[e||t.type](t,l,a),this.mergeHandlerResult(i,o,_,p,r),_&&_.needsRenderFrame&&this._triggerRenderFrame()),(_||d.isActive())&&(s[p]=d)}}var m={};for(var g in this._previousActiveHandlers)s[g]||(m[g]=r);this._previousActiveHandlers=s,(Object.keys(m).length||mi(i))&&(this._changes.push([i,o,m]),this._triggerRenderFrame()),(Object.keys(s).length||mi(i))&&this._map._stop(!0),this._updatingCamera=!1;var y=i.cameraAnimation;y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],y(this._map))}else this.stop(!0)},gi.prototype.mergeHandlerResult=function(e,n,r,i,o){if(r){t.extend(e,r);var s={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=s),void 0!==r.panDelta&&(n.drag=s),void 0!==r.pitchDelta&&(n.pitch=s),void 0!==r.bearingDelta&&(n.rotate=s)}},gi.prototype._applyChanges=function(){for(var e={},n={},r={},i=0,o=this._changes;i<o.length;i+=1){var s=o[i],a=s[0],l=s[1],u=s[2];a.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(a.panDelta)),a.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(e.around=a.around),void 0!==a.pinchAround&&(e.pinchAround=a.pinchAround),a.noInertia&&(e.noInertia=a.noInertia),t.extend(n,l),t.extend(r,u)}this._updateMapTransform(e,n,r),this._changes=[]},gi.prototype._updateMapTransform=function(t,e,n){var r=this._map,i=r.transform;if(!mi(t))return this._fireEvents(e,n,!0);var o=t.panDelta,s=t.zoomDelta,a=t.bearingDelta,l=t.pitchDelta,u=t.around,c=t.pinchAround;void 0!==c&&(u=c),r._stop(!0),u=u||r.transform.centerPoint;var h=i.pointLocation(o?u.sub(o):u);a&&(i.bearing+=a),l&&(i.pitch+=l),s&&(i.zoom+=s),i.setLocationAtPoint(h,u),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)},gi.prototype._fireEvents=function(e,n,r){var i=this,o=fi(this._eventsInProgress),s=fi(e),a={};for(var l in e)this._eventsInProgress[l]||(a[l+"start"]=e[l].originalEvent),this._eventsInProgress[l]=e[l];for(var u in!o&&s&&this._fireEvent("movestart",s.originalEvent),a)this._fireEvent(u,a[u]);for(var c in s&&this._fireEvent("move",s.originalEvent),e)this._fireEvent(c,e[c].originalEvent);var h,p={};for(var d in this._eventsInProgress){var f=this._eventsInProgress[d],_=f.handlerName,m=f.originalEvent;this._handlersById[_].isActive()||(delete this._eventsInProgress[d],p[d+"end"]=h=n[_]||m)}for(var g in p)this._fireEvent(g,p[g]);var y=fi(this._eventsInProgress);if(r&&(o||s)&&!y){this._updatingCamera=!0;var v=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),b=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap};v?(b(v.bearing||this._map.getBearing())&&(v.bearing=0),this._map.easeTo(v,{originalEvent:h})):(this._map.fire(new t.Event("moveend",{originalEvent:h})),b(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},gi.prototype._fireEvent=function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},gi.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(e){delete t._frameId,t.handleEvent(new _i("renderFrame",{timeStamp:e})),t._applyChanges()})},gi.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var yi=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){e=t.LngLatBounds.convert(e);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var s=i.padding;i.padding={top:s,bottom:s,right:s,left:s}}i.padding=t.extend(o,i.padding);var a=this.transform,l=a.padding,u=a.project(t.LngLat.convert(e)),c=a.project(t.LngLat.convert(n)),h=u.rotate(-r*Math.PI/180),p=c.rotate(-r*Math.PI/180),d=new t.Point(Math.max(h.x,p.x),Math.max(h.y,p.y)),f=new t.Point(Math.min(h.x,p.x),Math.min(h.y,p.y)),_=d.sub(f),m=(a.width-(l.left+l.right+i.padding.left+i.padding.right))/_.x,g=(a.height-(l.top+l.bottom+i.padding.top+i.padding.bottom))/_.y;if(!(g<0||m<0)){var y=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),i.maxZoom),v="number"==typeof i.offset.x?new t.Point(i.offset.x,i.offset.y):t.Point.convert(i.offset),b=new t.Point((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),x=v.add(b).mult(a.scale/a.zoomScale(y));return{center:a.unproject(u.add(c).div(2).sub(x)),zoom:y,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,s=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(s=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),s&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var i=this.transform,o=this.getZoom(),s=this.getBearing(),a=this.getPitch(),l=this.getPadding(),u="zoom"in e?+e.zoom:o,c="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:a,p="padding"in e?e.padding:i.padding,d=t.Point.convert(e.offset),f=i.centerPoint.add(d),_=i.pointLocation(f),m=t.LngLat.convert(e.center||_);this._normalizeCenter(m);var g,y,v=i.project(_),b=i.project(m).sub(v),x=i.zoomScale(u-o);e.around&&(g=t.LngLat.convert(e.around),y=i.locationPoint(g));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==o,this._rotating=this._rotating||s!==c,this._pitching=this._pitching||h!==a,this._padding=!i.isPaddingEqual(p),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,w),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,u,e)),r._rotating&&(i.bearing=t.number(s,c,e)),r._pitching&&(i.pitch=t.number(a,h,e)),r._padding&&(i.interpolatePadding(l,p,e),f=i.centerPoint.add(d)),g)i.setLocationAtPoint(g,y);else{var _=i.zoomScale(i.zoom-o),m=u>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(m,1-e),E=i.unproject(v.add(b.mult(e*w)).mult(_));i.setLocationAtPoint(i.renderWorldCopies?E.wrap():E,f)}r._fireMoveEvents(n)},function(t){r._afterEase(n,t)},e),this},n.prototype._prepareEase=function(e,n,r){void 0===r&&(r={}),this._moving=!0,n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},n.prototype.flyTo=function(e,n){var r=this;if(!e.essential&&t.browser.prefersReducedMotion){var i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,s=this.getZoom(),a=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):s,h="bearing"in e?this._normalizeBearing(e.bearing,a):a,p="pitch"in e?+e.pitch:l,d="padding"in e?e.padding:o.padding,f=o.zoomScale(c-s),_=t.Point.convert(e.offset),m=o.centerPoint.add(_),g=o.pointLocation(m),y=t.LngLat.convert(e.center||g);this._normalizeCenter(y);var v=o.project(g),b=o.project(y).sub(v),x=e.curve,w=Math.max(o.width,o.height),E=w/f,S=b.mag();if("minZoom"in e){var C=t.clamp(Math.min(e.minZoom,s,c),o.minZoom,o.maxZoom),I=w/o.zoomScale(C-s);x=Math.sqrt(I/S*2)}var k=x*x;function T(t){var e=(E*E-w*w+(t?-1:1)*k*k*S*S)/(2*(t?E:w)*k*S);return Math.log(Math.sqrt(e*e+1)-e)}function P(t){return(Math.exp(t)-Math.exp(-t))/2}function A(t){return(Math.exp(t)+Math.exp(-t))/2}var O=T(0),M=function(t){return A(O)/A(O+x*t)},L=function(t){return w*((A(O)*(P(e=O+x*t)/A(e))-P(O))/k)/S;var e},N=(T(1)-O)/x;if(Math.abs(S)<1e-6||!isFinite(N)){if(Math.abs(w-E)<1e-6)return this.easeTo(e,n);var D=E<w?-1:1;N=Math.abs(Math.log(E/w))/x,L=function(){return 0},M=function(t){return Math.exp(D*x*t)}}return e.duration="duration"in e?+e.duration:1e3*N/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==h,this._pitching=p!==l,this._padding=!o.isPaddingEqual(d),this._prepareEase(n,!1),this._ease(function(e){var i=e*N,f=1/M(i);o.zoom=1===e?c:s+o.scaleZoom(f),r._rotating&&(o.bearing=t.number(a,h,e)),r._pitching&&(o.pitch=t.number(l,p,e)),r._padding&&(o.interpolatePadding(u,d,e),m=o.centerPoint.add(_));var g=1===e?y:o.unproject(v.add(b.mult(L(i))).mult(f));o.setLocationAtPoint(o.renderWorldCopies?g.wrap():g,m),r._fireMoveEvents(n)},function(){return r._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),vi=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};vi.prototype.getDefaultPosition=function(){return"bottom-right"},vi.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=n.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},vi.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},vi.prototype._setElementTitle=function(t,e){var n=this._map._getUIString("AttributionControl."+e);t.title=n,t.setAttribute("aria-label",n)},vi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},vi.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=n.reduce(function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}},vi.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},vi.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort(function(t,e){return t.length-e.length});var s=(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).join(" | ");s!==this._attribHTML&&(this._attribHTML=s,t.length?(this._innerContainer.innerHTML=s,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},vi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var bi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};bi.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},bi.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},bi.prototype.getDefaultPosition=function(){return"bottom-left"},bi.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},bi.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},bi.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var xi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xi.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},xi.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},xi.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,r=e;n<r.length;n+=1){var i=r[n];if(!i.cancelled&&(i.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ei=t.window.HTMLImageElement,Si=t.window.HTMLElement,Ci=t.window.ImageBitmap,Ii={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ki=function(r){function i(e){var n=this;if(null!=(e=t.extend({},Ii,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var i=new Er(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(r.call(this,i,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new xi,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},wi,e.locale),this._clickTolerance=e.clickTolerance,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Si))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return n._update(!1)}),this.on("moveend",function(){return n._update(!1)}),this.on("zoom",function(){return n._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new gi(this,e),this._hash=e.hash&&new Cr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new vi({customAttribution:e.customAttribution})),this.addControl(new bi,e.logoPosition),this.on("style.load",function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)}),this.on("data",function(e){n._update("style"===e.dataType),n.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){n.fire(new t.Event(e.dataType+"dataloading",e))})}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},i.prototype.hasControl=function(t){return this._controls.indexOf(t)>-1},i.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i);var o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},i.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},i.prototype.getMinPitch=function(){return this.transform.minPitch},i.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},i.prototype.getMaxPitch=function(){return this.transform.maxPitch},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},i.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},i.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},i.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},i.prototype._createDelegatedListener=function(t,e,n){var r,i=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var s=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];s.length?o||(o=!0,n.call(i,new Nr(t,i,r.originalEvent,{features:s}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var s=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?s=!0:s&&(s=!1,n.call(i,new Nr(t,i,r.originalEvent)))},mouseout:function(e){s&&(s=!1,n.call(i,new Nr(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}},i.prototype.on=function(t,e,n){if(void 0===n)return r.prototype.on.call(this,t,e);var i=this._createDelegatedListener(t,e,n);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i),i.delegates)this.on(o,i.delegates[o]);return this},i.prototype.once=function(t,e,n){if(void 0===n)return r.prototype.once.call(this,t,e);var i=this._createDelegatedListener(t,e,n);for(var o in i.delegates)this.once(o,i.delegates[o]);return this},i.prototype.off=function(t,e,n){var i=this;return void 0===n?r.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(r){for(var o=r[t],s=0;s<o.length;s++){var a=o[s];if(a.layer===e&&a.listener===n){for(var l in a.delegates)i.off(l,a.delegates[l]);return o.splice(s,1),i}}}(this._delegatedListeners),this)},i.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},i.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new $e(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new $e(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},i.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)})}else"object"==typeof e&&this._updateDiff(e,n)},i.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;void 0===o&&(o=!1);var s=r.stretchX,a=r.stretchY,l=r.content;if(this._lazyInitEmptyStyle(),n instanceof Ei||Ci&&n instanceof Ci){var u=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:u.width,height:u.height},u.data),pixelRatio:i,stretchX:s,stretchY:a,content:l,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,stretchX:s,stretchY:a,content:l,sdf:o,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}},i.prototype.updateImage=function(e,n){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof Ei||Ci&&n instanceof Ci?t.browser.getImageData(n):n,o=i.width,s=i.height,a=i.data;return void 0===o||void 0===s?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||s!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(a,!(n instanceof Ei||Ci&&n instanceof Ci)),void this.style.updateImage(e,r))},i.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},i.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,i)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},i.prototype._resizeCanvas=function(e,n){var r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new vr(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},i.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},i.prototype._onMapScroll=function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(e){var n,r=this,i=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),i=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var s=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,l=t.browser.now();this.style.zoomHistory.update(a,l);var u=new t.EvaluationParameters(a,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=u.crossFadingFactor();1===c&&c===this._crossFadingFactor||(s=!0,this._crossFadingFactor=c),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||s)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=t.browser.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout(function(){var e=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),r.fire(new t.Event("gpu-timing-frame",{cpuTime:h,gpuTime:e}))},50)}if(this.listens("gpu-timing-layer")){var p=this.painter.collectGpuTimers();setTimeout(function(){var e=r.painter.queryGpuTimers(p);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))},50)}var d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0),this}},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Ti(this._canvasContainer),Ti(this._controlContainer),Ti(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},i.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(t){e._frame=null,e._render(t)}))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},i.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},o.version.get=function(){return t.version},Object.defineProperties(i.prototype,o),i}(yi);function Ti(t){t.parentNode&&t.parentNode.removeChild(t)}var Pi={showCompass:!0,showZoom:!0,visualizePitch:!1},Ai=function(e){var r=this;this.options=t.extend({},Pi,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(t){return r._map.zoomIn({},{originalEvent:t})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(t){return r._map.zoomOut({},{originalEvent:t})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(t){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:t}):r._map.resetNorth({},{originalEvent:t})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ai.prototype._updateZoomButtons=function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},Ai.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Ai.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Oi(this._map,this._compass,this.options.visualizePitch)),this._container},Ai.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ai.prototype._createButton=function(t,e){var r=n.create("button",t,this._container);return r.type="button",r.addEventListener("click",e),r},Ai.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var Oi=function(e,r,i){void 0===i&&(i=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new Zr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,i&&(this.mousePitch=new Wr({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(r,"mousedown",this.mousedown),n.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(r,"touchmove",this.touchmove),n.addEventListener(r,"touchend",this.touchend),n.addEventListener(r,"touchcancel",this.reset)};function Mi(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),s=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<s?e=i:r.locationPoint(o).distSqr(n)<s&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var a=r.locationPoint(e);if(a.x>=0&&a.y>=0&&a.x<=r.width&&a.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}Oi.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),n.disableDrag()},Oi.prototype.move=function(t,e){var n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}},Oi.prototype.off=function(){var t=this.element;n.removeEventListener(t,"mousedown",this.mousedown),n.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(t,"touchmove",this.touchmove),n.removeEventListener(t,"touchend",this.touchend),n.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Oi.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(t.window,"mousemove",this.mousemove),n.removeEventListener(t.window,"mouseup",this.mouseup)},Oi.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),n.mousePos(this.element,e)),n.addEventListener(t.window,"mousemove",this.mousemove),n.addEventListener(t.window,"mouseup",this.mouseup)},Oi.prototype.mousemove=function(t){this.move(t,n.mousePos(this.element,t))},Oi.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Oi.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Oi.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Oi.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Oi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ni(t,e,n){var r=t.classList;for(var i in Li)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}var Di,Ri=function(e){function r(r,i){if(e.call(this),(r instanceof t.window.HTMLElement||i)&&(r=t.extend({element:r},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var o=n.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var u=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<c.length;u+=1){var h=c[u],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),l.appendChild(p)}var d=n.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"fill",this._color);var f=n.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),d.appendChild(f);var _=n.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),_.appendChild(m);var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=n.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),y.appendChild(v),y.appendChild(b),a.appendChild(l),a.appendChild(d),a.appendChild(_),a.appendChild(g),a.appendChild(y),o.appendChild(a),o.setAttributeNS(null,"height",41*this._scale+"px"),o.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(o),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),this._element.addEventListener("mousedown",function(t){t.preventDefault()}),Ni(this._element,this._anchor,"marker"),this._popup=null}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Mi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,Li[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+e)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){if(!this._isDragging){var n=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=n}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(t.Evented),zi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fi=0,Bi=!1,ji=function(e){function r(n){e.call(this),this.options=t.extend({},zi,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Di?r(Di):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){r(Di="denied"!==t.state)}):r(Di=!!t.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fi=0,Bi=!1},r.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},r.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})},r.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Bi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;if(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ri(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ri({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))})},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fi--,Bi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fi>1?(e={maximumAge:6e5,timeout:0},Bi=!0):(e=this.options.positionOptions,Bi=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),Vi={maxWidth:100,unit:"metric"},Ui=function(e){this.options=t.extend({},Vi,e),t.bindAll(["_onMove","setUnit"],this)};function $i(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),s=t.unproject([r,i]),a=o.distanceTo(s);if(n&&"imperial"===n.unit){var l=3.2808*a;l>5280?qi(e,r,l/5280,t._getUIString("ScaleControl.Miles")):qi(e,r,l,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?qi(e,r,a/1852,t._getUIString("ScaleControl.NauticalMiles")):a>=1e3?qi(e,r,a/1e3,t._getUIString("ScaleControl.Kilometers")):qi(e,r,a,t._getUIString("ScaleControl.Meters"))}function qi(t,e,n,r){var i,o,s,a=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(s=(s=i/o)>=10?10:s>=5?5:s>=3?3:s>=2?2:s>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(s)));t.style.width=e*(a/n)+"px",t.innerHTML=a+"&nbsp;"+r}Ui.prototype.getDefaultPosition=function(){return"bottom-left"},Ui.prototype._onMove=function(){$i(this._map,this._container,this.options)},Ui.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ui.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ui.prototype.setUnit=function(t){this.options.unit=t,$i(this._map,this._container,this.options)};var Gi=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Gi.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Gi.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Gi.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Gi.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Gi.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Gi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Gi.prototype._isFullscreen=function(){return this._fullscreen},Gi.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Gi.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Hi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Wi=function(e){function r(n){e.call(this),this.options=t.extend(Object.create(Hi),n),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},r.prototype.setDOMContent=function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this},r.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},r.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},r.prototype.setOffset=function(t){return this.options.offset=t,this._update(),this},r.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},r.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._onMouseUp=function(t){this._update(t.point)},r.prototype._onMouseMove=function(t){this._update(t.point)},r.prototype._onDrag=function(t){this._update(t.point)},r.prototype._update=function(e){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return r._container.classList.add(t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Mi(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var i=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,s=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var a,l=this._container.offsetWidth,u=this._container.offsetHeight;a=i.y+s.bottom.y<u?["top"]:i.y>this._map.transform.height-u?["bottom"]:[],i.x<l/2?a.push("left"):i.x>this._map.transform.width-l/2&&a.push("right"),o=0===a.length?"bottom":a.join("-")}var c=i.add(s[o]).round();n.setTransform(this._container,Li[o]+" translate("+c.x+"px,"+c.y+"px)"),Ni(this._container,o,"popup")}},r.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(Zi);t&&t.focus()}},r.prototype._onClose=function(){this.remove()},r}(t.Evented),Xi={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:ki,NavigationControl:Ai,GeolocateControl:ji,AttributionControl:vi,ScaleControl:Ui,FullscreenControl:Gi,Popup:Wi,Marker:Ri,Style:$e,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Ft().acquire(Nt)},clearPrewarmedResources:function(){var t=Rt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Nt),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Dt.workerCount},set workerCount(t){Dt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Xi}),n}()},"4b23":function(t,e,n){for(var r=self.crypto||self.msCrypto,i="-_",o=36;o--;)i+=o.toString(36);for(o=36;o---10;)i+=o.toString(36).toUpperCase();t.exports=function(t){var e="",n=r.getRandomValues(new Uint8Array(t||21));for(o=t||21;o--;)e+=i[63&n[o]];return e}},"5K5J":function(t,e,n){var r;r=function(){var t=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function e(e){return e.match(t)||[]}function n(t){return{language:(t=e(t))[1]||"",extlang:t[2]||"",script:t[3]||"",region:t[4]||""}}function r(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})}function i(t,i,o){function s(n){return e(n)[t]||""}r(s,"pattern",i),r(n,o,s)}return i(1,/^[a-zA-Z]{2,3}$/,"language"),i(2,/^[a-zA-Z]{3}$/,"extlang"),i(3,/^[a-zA-Z]{4}$/,"script"),i(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(n,"split",function(t){return e(t).filter(function(t,e){return t&&e})}),n},t.exports?t.exports=r():this.subtag=r()},"5hfJ":function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t){if(!t.startsWith("POLYGON"))throw new Error("Invalid wkt.");return t.slice(t.indexOf("(")+2,t.indexOf(")")).split(", ").map(function(t){var e,n=(2,function(t){if(Array.isArray(t))return t}(e=t.split(" "))||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),2!==n.length);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(e)||function(t,e){if(t){if("string"==typeof t)return r(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[1];return{longitude:parseFloat(n[0]),latitude:parseFloat(i)}})}},"5kFF":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("jH9d");e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=r.areaConversion[e];if(n)return t*n;throw new Error("Invalid unit used for area conversion.")}},"5oMp":function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},"5vw/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("wI44"))&&r.__esModule?r:{default:r};e.default=function(t,e,n){return(0,i.default)(t,e)<n}},"6BPK":function(t,e,n){var r,i;!function(o,s,a){"use strict";"undefined"!=typeof window&&n("PDX0")?void 0===(i="function"==typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=i):t.exports?t.exports=a():s.exports?s.exports=a():s.Fingerprint2=a()}(0,this,function(){"use strict";void 0===Array.isArray&&(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var t=function(t,e){var n=[0,0,0,0];return n[3]+=(t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]])[3]+(e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]])[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},e=function(t,e){var n=[0,0,0,0];return n[3]+=(t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]])[3]*(e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]])[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},n=function(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:[t[1]<<(e-=32)|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e]},r=function(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},i=function(t,e){return[t[0]^e[0],t[1]^e[1]]},o=function(t){return t=i(t,[0,t[0]>>>1]),t=e(t,[4283543511,3981806797]),t=i(t,[0,t[0]>>>1]),t=e(t,[3301882366,444984403]),i(t,[0,t[0]>>>1])},s=function(s,a){for(var l=(s=s||"").length%16,u=s.length-l,c=[0,a=a||0],h=[0,a],p=[0,0],d=[0,0],f=[2277735313,289559509],_=[1291169091,658871167],m=0;m<u;m+=16)p=[255&s.charCodeAt(m+4)|(255&s.charCodeAt(m+5))<<8|(255&s.charCodeAt(m+6))<<16|(255&s.charCodeAt(m+7))<<24,255&s.charCodeAt(m)|(255&s.charCodeAt(m+1))<<8|(255&s.charCodeAt(m+2))<<16|(255&s.charCodeAt(m+3))<<24],d=[255&s.charCodeAt(m+12)|(255&s.charCodeAt(m+13))<<8|(255&s.charCodeAt(m+14))<<16|(255&s.charCodeAt(m+15))<<24,255&s.charCodeAt(m+8)|(255&s.charCodeAt(m+9))<<8|(255&s.charCodeAt(m+10))<<16|(255&s.charCodeAt(m+11))<<24],p=e(p,f),p=n(p,31),p=e(p,_),c=i(c,p),c=n(c,27),c=t(c,h),c=t(e(c,[0,5]),[0,1390208809]),d=e(d,_),d=n(d,33),d=e(d,f),h=i(h,d),h=n(h,31),h=t(h,c),h=t(e(h,[0,5]),[0,944331445]);switch(p=[0,0],d=[0,0],l){case 15:d=i(d,r([0,s.charCodeAt(m+14)],48));case 14:d=i(d,r([0,s.charCodeAt(m+13)],40));case 13:d=i(d,r([0,s.charCodeAt(m+12)],32));case 12:d=i(d,r([0,s.charCodeAt(m+11)],24));case 11:d=i(d,r([0,s.charCodeAt(m+10)],16));case 10:d=i(d,r([0,s.charCodeAt(m+9)],8));case 9:d=i(d,[0,s.charCodeAt(m+8)]),d=e(d,_),d=n(d,33),d=e(d,f),h=i(h,d);case 8:p=i(p,r([0,s.charCodeAt(m+7)],56));case 7:p=i(p,r([0,s.charCodeAt(m+6)],48));case 6:p=i(p,r([0,s.charCodeAt(m+5)],40));case 5:p=i(p,r([0,s.charCodeAt(m+4)],32));case 4:p=i(p,r([0,s.charCodeAt(m+3)],24));case 3:p=i(p,r([0,s.charCodeAt(m+2)],16));case 2:p=i(p,r([0,s.charCodeAt(m+1)],8));case 1:p=i(p,[0,s.charCodeAt(m)]),p=e(p,f),p=n(p,31),p=e(p,_),c=i(c,p)}return c=i(c,[0,s.length]),h=i(h,[0,s.length]),c=t(c,h),h=t(h,c),c=o(c),h=o(h),c=t(c,h),h=t(h,c),("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)+("00000000"+(h[0]>>>0).toString(16)).slice(-8)+("00000000"+(h[1]>>>0).toString(16)).slice(-8)},a={preprocessor:null,audio:{timeout:1e3,excludeIOS11:!0},fonts:{swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",userDefinedFonts:[],extendedJsFonts:!1},screen:{detectScreenOrientation:!0},plugins:{sortPluginsFor:[/palemoon/i],excludeIE:!1},extraComponents:[],excludes:{enumerateDevices:!0,pixelRatio:!0,doNotTrack:!0,fontsFlash:!0,adBlock:!0},NOT_AVAILABLE:"not available",ERROR:"error",EXCLUDED:"excluded"},l=function(t,e){if(Array.prototype.forEach&&t.forEach===Array.prototype.forEach)t.forEach(e);else if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e(t[n],n,t);else for(var i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},u=function(t,e){var n=[];return null==t?n:Array.prototype.map&&t.map===Array.prototype.map?t.map(e):(l(t,function(t,r,i){n.push(e(t,r,i))}),n)},c=function(t){if(null==navigator.plugins)return t.NOT_AVAILABLE;for(var e=[],n=0,r=navigator.plugins.length;n<r;n++)navigator.plugins[n]&&e.push(navigator.plugins[n]);return h(t)&&(e=e.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:0})),u(e,function(t){var e=u(t,function(t){return[t.type,t.suffixes]});return[t.name,t.description,e]})},h=function(t){for(var e=!1,n=0,r=t.plugins.sortPluginsFor.length;n<r;n++)if(navigator.userAgent.match(t.plugins.sortPluginsFor[n])){e=!0;break}return e},p=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},d=function(){if(!p())return!1;var t=f(),e=!!window.WebGLRenderingContext&&!!t;return _(t),e},f=function(){var t=document.createElement("canvas"),e=null;try{e=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(n){}return e||(e=null),e},_=function(t){var e=t.getExtension("WEBGL_lose_context");null!=e&&e.loseContext()},m=[{key:"userAgent",getData:function(t){t(navigator.userAgent)}},{key:"webdriver",getData:function(t,e){t(null==navigator.webdriver?e.NOT_AVAILABLE:navigator.webdriver)}},{key:"language",getData:function(t,e){t(navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||e.NOT_AVAILABLE)}},{key:"colorDepth",getData:function(t,e){t(window.screen.colorDepth||e.NOT_AVAILABLE)}},{key:"deviceMemory",getData:function(t,e){t(navigator.deviceMemory||e.NOT_AVAILABLE)}},{key:"pixelRatio",getData:function(t,e){t(window.devicePixelRatio||e.NOT_AVAILABLE)}},{key:"hardwareConcurrency",getData:function(t,e){t(function(t){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:t.NOT_AVAILABLE}(e))}},{key:"screenResolution",getData:function(t,e){t(function(t){var e=[window.screen.width,window.screen.height];return t.screen.detectScreenOrientation&&e.sort().reverse(),e}(e))}},{key:"availableScreenResolution",getData:function(t,e){t(function(t){if(window.screen.availWidth&&window.screen.availHeight){var e=[window.screen.availHeight,window.screen.availWidth];return t.screen.detectScreenOrientation&&e.sort().reverse(),e}return t.NOT_AVAILABLE}(e))}},{key:"timezoneOffset",getData:function(t){t((new Date).getTimezoneOffset())}},{key:"timezone",getData:function(t,e){window.Intl&&window.Intl.DateTimeFormat?t((new window.Intl.DateTimeFormat).resolvedOptions().timeZone||e.NOT_AVAILABLE):t(e.NOT_AVAILABLE)}},{key:"sessionStorage",getData:function(t,e){t(function(t){try{return!!window.sessionStorage}catch(e){return t.ERROR}}(e))}},{key:"localStorage",getData:function(t,e){t(function(t){try{return!!window.localStorage}catch(e){return t.ERROR}}(e))}},{key:"indexedDb",getData:function(t,e){t(function(t){if(("msWriteProfilerMark"in window)+("msLaunchUri"in navigator)+("msSaveBlob"in navigator)>=2)return t.EXCLUDED;try{return!!window.indexedDB}catch(e){return t.ERROR}}(e))}},{key:"addBehavior",getData:function(t){t(!!window.HTMLElement.prototype.addBehavior)}},{key:"openDatabase",getData:function(t){t(!!window.openDatabase)}},{key:"cpuClass",getData:function(t,e){t(function(t){return navigator.cpuClass||t.NOT_AVAILABLE}(e))}},{key:"platform",getData:function(t,e){t(function(t){return navigator.platform?navigator.platform:t.NOT_AVAILABLE}(e))}},{key:"doNotTrack",getData:function(t,e){t(function(t){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:t.NOT_AVAILABLE}(e))}},{key:"plugins",getData:function(t,e){"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/Trident/.test(navigator.userAgent)?t(e.plugins.excludeIE?e.EXCLUDED:function(t){var e=[];return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window?e=u(["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"],function(e){try{return new window.ActiveXObject(e),e}catch(n){return t.ERROR}}):e.push(t.NOT_AVAILABLE),navigator.plugins&&(e=e.concat(c(t))),e}(e)):t(c(e))}},{key:"canvas",getData:function(t,e){p()?t(function(t){var e=[],n=document.createElement("canvas");n.width=2e3,n.height=200,n.style.display="inline";var r=n.getContext("2d");return r.rect(0,0,10,10),r.rect(2,2,6,6),e.push("canvas winding:"+(!1===r.isPointInPath(5,5,"evenodd")?"yes":"no")),r.textBaseline="alphabetic",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",r.font=t.dontUseFakeFontInCanvas?"11pt Arial":"11pt no-real-font-123",r.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15),r.fillStyle="rgba(102, 204, 0, 0.2)",r.font="18pt Arial",r.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45),r.globalCompositeOperation="multiply",r.fillStyle="rgb(255,0,255)",r.beginPath(),r.arc(50,50,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(0,255,255)",r.beginPath(),r.arc(100,50,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(255,255,0)",r.beginPath(),r.arc(75,100,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(255,0,255)",r.arc(75,75,75,0,2*Math.PI,!0),r.arc(75,75,25,0,2*Math.PI,!0),r.fill("evenodd"),n.toDataURL&&e.push("canvas fp:"+n.toDataURL()),e}(e)):t(e.NOT_AVAILABLE)}},{key:"webgl",getData:function(t,e){d()?t(function(){var t,e=function(e){return t.clearColor(0,0,0,1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),"["+e[0]+", "+e[1]+"]"};if(!(t=f()))return null;var n=[],r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r);var i=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),r.itemSize=3,r.numItems=3;var o=t.createProgram(),s=t.createShader(t.VERTEX_SHADER);t.shaderSource(s,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),t.compileShader(s);var a=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(a,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),t.compileShader(a),t.attachShader(o,s),t.attachShader(o,a),t.linkProgram(o),t.useProgram(o),o.vertexPosAttrib=t.getAttribLocation(o,"attrVertex"),o.offsetUniform=t.getUniformLocation(o,"uniformOffset"),t.enableVertexAttribArray(o.vertexPosArray),t.vertexAttribPointer(o.vertexPosAttrib,r.itemSize,t.FLOAT,!1,0,0),t.uniform2f(o.offsetUniform,1,1),t.drawArrays(t.TRIANGLE_STRIP,0,r.numItems);try{n.push(t.canvas.toDataURL())}catch(c){}n.push("extensions:"+(t.getSupportedExtensions()||[]).join(";")),n.push("webgl aliased line width range:"+e(t.getParameter(t.ALIASED_LINE_WIDTH_RANGE))),n.push("webgl aliased point size range:"+e(t.getParameter(t.ALIASED_POINT_SIZE_RANGE))),n.push("webgl alpha bits:"+t.getParameter(t.ALPHA_BITS)),n.push("webgl antialiasing:"+(t.getContextAttributes().antialias?"yes":"no")),n.push("webgl blue bits:"+t.getParameter(t.BLUE_BITS)),n.push("webgl depth bits:"+t.getParameter(t.DEPTH_BITS)),n.push("webgl green bits:"+t.getParameter(t.GREEN_BITS)),n.push("webgl max anisotropy:"+function(t){var e=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic");if(e){var n=t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);return 0===n&&(n=2),n}return null}(t)),n.push("webgl max combined texture image units:"+t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),n.push("webgl max cube map texture size:"+t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)),n.push("webgl max fragment uniform vectors:"+t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS)),n.push("webgl max render buffer size:"+t.getParameter(t.MAX_RENDERBUFFER_SIZE)),n.push("webgl max texture image units:"+t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),n.push("webgl max texture size:"+t.getParameter(t.MAX_TEXTURE_SIZE)),n.push("webgl max varying vectors:"+t.getParameter(t.MAX_VARYING_VECTORS)),n.push("webgl max vertex attribs:"+t.getParameter(t.MAX_VERTEX_ATTRIBS)),n.push("webgl max vertex texture image units:"+t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),n.push("webgl max vertex uniform vectors:"+t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS)),n.push("webgl max viewport dims:"+e(t.getParameter(t.MAX_VIEWPORT_DIMS))),n.push("webgl red bits:"+t.getParameter(t.RED_BITS)),n.push("webgl renderer:"+t.getParameter(t.RENDERER)),n.push("webgl shading language version:"+t.getParameter(t.SHADING_LANGUAGE_VERSION)),n.push("webgl stencil bits:"+t.getParameter(t.STENCIL_BITS)),n.push("webgl vendor:"+t.getParameter(t.VENDOR)),n.push("webgl version:"+t.getParameter(t.VERSION));try{var u=t.getExtension("WEBGL_debug_renderer_info");u&&(n.push("webgl unmasked vendor:"+t.getParameter(u.UNMASKED_VENDOR_WEBGL)),n.push("webgl unmasked renderer:"+t.getParameter(u.UNMASKED_RENDERER_WEBGL)))}catch(c){}return t.getShaderPrecisionFormat?(l(["FLOAT","INT"],function(e){l(["VERTEX","FRAGMENT"],function(r){l(["HIGH","MEDIUM","LOW"],function(i){l(["precision","rangeMin","rangeMax"],function(o){var s=t.getShaderPrecisionFormat(t[r+"_SHADER"],t[i+"_"+e])[o];"precision"!==o&&(o="precision "+o);var a=["webgl ",r.toLowerCase()," shader ",i.toLowerCase()," ",e.toLowerCase()," ",o,":",s].join("");n.push(a)})})})}),_(t),n):(_(t),n)}()):t(e.NOT_AVAILABLE)}},{key:"webglVendorAndRenderer",getData:function(t){d()?t(function(){try{var t=f(),e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e.UNMASKED_VENDOR_WEBGL)+"~"+t.getParameter(e.UNMASKED_RENDERER_WEBGL);return _(t),n}catch(r){return null}}()):t()}},{key:"adBlock",getData:function(t){t(function(){var t=document.createElement("div");t.innerHTML="&nbsp;",t.className="adsbox";var e=!1;try{document.body.appendChild(t),e=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(t)}catch(n){e=!1}return e}())}},{key:"hasLiedLanguages",getData:function(t){t(function(){if(void 0!==navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1}())}},{key:"hasLiedResolution",getData:function(t){t(window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight)}},{key:"hasLiedOs",getData:function(t){t(function(){var t,e=navigator.userAgent.toLowerCase(),n=navigator.oscpu,r=navigator.platform.toLowerCase();if(t=e.indexOf("windows phone")>=0?"Windows Phone":e.indexOf("windows")>=0||e.indexOf("win16")>=0||e.indexOf("win32")>=0||e.indexOf("win64")>=0||e.indexOf("win95")>=0||e.indexOf("win98")>=0||e.indexOf("winnt")>=0||e.indexOf("wow64")>=0?"Windows":e.indexOf("android")>=0?"Android":e.indexOf("linux")>=0||e.indexOf("cros")>=0||e.indexOf("x11")>=0?"Linux":e.indexOf("iphone")>=0||e.indexOf("ipad")>=0||e.indexOf("ipod")>=0||e.indexOf("crios")>=0||e.indexOf("fxios")>=0?"iOS":e.indexOf("macintosh")>=0||e.indexOf("mac_powerpc)")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows"!==t&&"Windows Phone"!==t&&"Android"!==t&&"iOS"!==t&&"Other"!==t&&-1===e.indexOf("cros"))return!0;if(void 0!==n){if((n=n.toLowerCase()).indexOf("win")>=0&&"Windows"!==t&&"Windows Phone"!==t)return!0;if(n.indexOf("linux")>=0&&"Linux"!==t&&"Android"!==t)return!0;if(n.indexOf("mac")>=0&&"Mac"!==t&&"iOS"!==t)return!0;if((-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!=("Other"===t))return!0}return r.indexOf("win")>=0&&"Windows"!==t&&"Windows Phone"!==t||(r.indexOf("linux")>=0||r.indexOf("android")>=0||r.indexOf("pike")>=0)&&"Linux"!==t&&"Android"!==t||(r.indexOf("mac")>=0||r.indexOf("ipad")>=0||r.indexOf("ipod")>=0||r.indexOf("iphone")>=0)&&"Mac"!==t&&"iOS"!==t||!(r.indexOf("arm")>=0&&"Windows Phone"===t)&&!(r.indexOf("pike")>=0&&e.indexOf("opera mini")>=0)&&((r.indexOf("win")<0&&r.indexOf("linux")<0&&r.indexOf("mac")<0&&r.indexOf("iphone")<0&&r.indexOf("ipad")<0&&r.indexOf("ipod")<0)!=("Other"===t)||void 0===navigator.plugins&&"Windows"!==t&&"Windows Phone"!==t)}())}},{key:"hasLiedBrowser",getData:function(t){t(function(){var t,e=navigator.userAgent.toLowerCase(),n=navigator.productSub;if(e.indexOf("edge/")>=0||e.indexOf("iemobile/")>=0)return!1;if(e.indexOf("opera mini")>=0)return!1;if(("Chrome"==(t=e.indexOf("firefox/")>=0?"Firefox":e.indexOf("opera/")>=0||e.indexOf(" opr/")>=0?"Opera":e.indexOf("chrome/")>=0?"Chrome":e.indexOf("safari/")>=0?e.indexOf("android 1.")>=0||e.indexOf("android 2.")>=0||e.indexOf("android 3.")>=0||e.indexOf("android 4.")>=0?"AOSP":"Safari":e.indexOf("trident/")>=0?"Internet Explorer":"Other")||"Safari"===t||"Opera"===t)&&"20030107"!==n)return!0;var r,i=eval.toString().length;if(37===i&&"Safari"!==t&&"Firefox"!==t&&"Other"!==t)return!0;if(39===i&&"Internet Explorer"!==t&&"Other"!==t)return!0;if(33===i&&"Chrome"!==t&&"AOSP"!==t&&"Opera"!==t&&"Other"!==t)return!0;try{throw"a"}catch(o){try{o.toSource(),r=!0}catch(s){r=!1}}return r&&"Firefox"!==t&&"Other"!==t}())}},{key:"touchSupport",getData:function(t){t(function(){var t,e=0;void 0!==navigator.maxTouchPoints?e=navigator.maxTouchPoints:void 0!==navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(n){t=!1}return[e,t,"ontouchstart"in window]}())}},{key:"fonts",getData:function(t,e){var n=["monospace","sans-serif","serif"],r=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"];e.fonts.extendedJsFonts&&(r=r.concat(["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"])),r=(r=r.concat(e.fonts.userDefinedFonts)).filter(function(t,e){return r.indexOf(t)===e});var i=document.getElementsByTagName("body")[0],o=document.createElement("div"),s=document.createElement("div"),a={},l={},u=function(){var t=document.createElement("span");return t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="72px",t.style.fontStyle="normal",t.style.fontWeight="normal",t.style.letterSpacing="normal",t.style.lineBreak="auto",t.style.lineHeight="normal",t.style.textTransform="none",t.style.textAlign="left",t.style.textDecoration="none",t.style.textShadow="none",t.style.whiteSpace="normal",t.style.wordBreak="normal",t.style.wordSpacing="normal",t.innerHTML="mmmmmmmmmmlli",t},c=function(t,e){var n=u();return n.style.fontFamily="'"+t+"',"+e,n},h=function(t){for(var e=!1,r=0;r<n.length;r++)if(e=t[r].offsetWidth!==a[n[r]]||t[r].offsetHeight!==l[n[r]])return e;return e},p=function(){for(var t=[],e=0,r=n.length;e<r;e++){var i=u();i.style.fontFamily=n[e],o.appendChild(i),t.push(i)}return t}();i.appendChild(o);for(var d=0,f=n.length;d<f;d++)a[n[d]]=p[d].offsetWidth,l[n[d]]=p[d].offsetHeight;var _=function(){for(var t={},e=0,i=r.length;e<i;e++){for(var o=[],a=0,l=n.length;a<l;a++){var u=c(r[e],n[a]);s.appendChild(u),o.push(u)}t[r[e]]=o}return t}();i.appendChild(s);for(var m=[],g=0,y=r.length;g<y;g++)h(_[r[g]])&&m.push(r[g]);i.removeChild(s),i.removeChild(o),t(m)},pauseBefore:!0},{key:"fontsFlash",getData:function(t,e){return void 0!==window.swfobject?window.swfobject.hasFlashPlayerVersion("9.0.0")?e.fonts.swfPath?void function(t,e){window.___fp_swf_loaded=function(e){t(e)};var n,r=e.fonts.swfContainerId;(n=document.createElement("div")).setAttribute("id",(void 0).fonts.swfContainerId),document.body.appendChild(n),window.swfobject.embedSWF(e.fonts.swfPath,r,"1","1","9.0.0",!1,{onReady:"___fp_swf_loaded"},{allowScriptAccess:"always",menu:"false"},{})}(function(e){t(e)},e):t("missing options.fonts.swfPath"):t("flash not installed"):t("swf object not loaded")},pauseBefore:!0},{key:"audio",getData:function(t,e){var n=e.audio;if(n.excludeIOS11&&navigator.userAgent.match(/OS 11.+Version\/11.+Safari/))return t(e.EXCLUDED);var r=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(null==r)return t(e.NOT_AVAILABLE);var i=new r(1,44100,44100),o=i.createOscillator();o.type="triangle",o.frequency.setValueAtTime(1e4,i.currentTime);var s=i.createDynamicsCompressor();l([["threshold",-50],["knee",40],["ratio",12],["reduction",-20],["attack",0],["release",.25]],function(t){void 0!==s[t[0]]&&"function"==typeof s[t[0]].setValueAtTime&&s[t[0]].setValueAtTime(t[1],i.currentTime)}),o.connect(s),s.connect(i.destination),o.start(0),i.startRendering();var a=setTimeout(function(){return console.warn('Audio fingerprint timed out. Please report bug at https://github.com/fingerprintjs/fingerprintjs with your user agent: "'+navigator.userAgent+'".'),i.oncomplete=function(){},i=null,t("audioTimeout")},n.timeout);i.oncomplete=function(e){var n;try{clearTimeout(a),n=e.renderedBuffer.getChannelData(0).slice(4500,5e3).reduce(function(t,e){return t+Math.abs(e)},0).toString(),o.disconnect(),s.disconnect()}catch(r){return void t(r)}t(n)}}},{key:"enumerateDevices",getData:function(t,e){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return t(e.NOT_AVAILABLE);navigator.mediaDevices.enumerateDevices().then(function(e){t(e.map(function(t){return"id="+t.deviceId+";gid="+t.groupId+";"+t.kind+";"+t.label}))}).catch(function(e){t(e)})}}],g=function(t){throw new Error("'new Fingerprint()' is deprecated, see https://github.com/fingerprintjs/fingerprintjs#upgrade-guide-from-182-to-200")};return g.get=function(t,e){e?t||(t={}):(e=t,t={}),function(t,e){if(null==e)return t;var n,r;for(r in e)null==(n=e[r])||Object.prototype.hasOwnProperty.call(t,r)||(t[r]=n)}(t,a),t.components=t.extraComponents.concat(m);var n={data:[],addPreprocessedComponent:function(e,r){"function"==typeof t.preprocessor&&(r=t.preprocessor(e,r)),n.data.push({key:e,value:r})}},r=-1,i=function(o){if((r+=1)>=t.components.length)e(n.data);else{var s=t.components[r];if(t.excludes[s.key])i(!1);else{if(!o&&s.pauseBefore)return r-=1,void setTimeout(function(){i(!0)},1);try{s.getData(function(t){n.addPreprocessedComponent(s.key,t),i(!1)},t)}catch(a){n.addPreprocessedComponent(s.key,String(a)),i(!1)}}}};i(!1)},g.getPromise=function(t){return new Promise(function(e,n){g.get(t,e)})},g.getV18=function(t,e){return null==e&&(e=t,t={}),g.get(t,function(n){for(var r=[],i=0;i<n.length;i++){var o=n[i];if(o.value===(t.NOT_AVAILABLE||"not available"))r.push({key:o.key,value:"unknown"});else if("plugins"===o.key)r.push({key:"plugins",value:u(o.value,function(t){var e=u(t[2],function(t){return t.join?t.join("~"):t}).join(",");return[t[0],t[1],e].join("::")})});else if(-1!==["canvas","webgl"].indexOf(o.key)&&Array.isArray(o.value))r.push({key:o.key,value:o.value.join("~")});else if(-1!==["sessionStorage","localStorage","indexedDb","addBehavior","openDatabase"].indexOf(o.key)){if(!o.value)continue;r.push({key:o.key,value:1})}else r.push(o.value?o.value.join?{key:o.key,value:o.value.join(";")}:o:{key:o.key,value:o.value})}var a=s(u(r,function(t){return t.value}).join("~~~"),31);e(a,r)})},g.x64hash128=s,g.VERSION="2.1.4",g})},"6D9Q":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t){return 180*t/Math.PI}},"73jG":function(t,e,n){"use strict";var r=n("jLWS");t.exports=function(t){var e,n=t.type||r.ERROR_HTTP;if(t.body)try{e=JSON.parse(t.body)}catch(o){e=t.body}else e=null;var i=t.message||null;i||("string"==typeof e?i=e:e&&"string"==typeof e.message?i=e.message:n===r.ERROR_REQUEST_ABORTED&&(i="Request aborted")),this.message=i,this.type=n,this.statusCode=t.statusCode||null,this.request=t.request,this.body=e}},"9/5/":function(t,e){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,u=a||l||Function("return this")(),c=Object.prototype.toString,h=Math.max,p=Math.min,d=function(){return u.Date.now()};function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function _(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==c.call(t)}(t))return NaN;if(f(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=f(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var a=i.test(t);return a||o.test(t)?s(t.slice(2),a?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,n){var r,i,o,s,a,l,u=0,c=!1,m=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function v(t){return u=t,a=setTimeout(x,e),c?y(t):s}function b(t){var n=t-l;return void 0===l||n>=e||n<0||m&&t-u>=o}function x(){var t=d();if(b(t))return w(t);a=setTimeout(x,function(t){var n=e-(t-l);return m?p(n,o-(t-u)):n}(t))}function w(t){return a=void 0,g&&r?y(t):(r=i=void 0,s)}function E(){var t=d(),n=b(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return v(l);if(m)return a=setTimeout(x,e),y(l)}return void 0===a&&(a=setTimeout(x,e)),s}return e=_(e)||0,f(n)&&(c=!!n.leading,o=(m="maxWait"in n)?h(_(n.maxWait)||0,e):o,g="trailing"in n?!!n.trailing:g),E.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=l=i=a=void 0},E.flush=function(){return void 0===a?s:w(d())},E}},"95co":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=l(n("2o5z")),i=l(n("QTq/")),o=l(n("jDUc")),s=l(n("6D9Q")),a=n("jH9d");function l(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,u=(0,r.default)(t),c=(0,i.default)(t),h=e/l,p=(0,o.default)(n),d=(0,o.default)(u),f=(0,o.default)(c),_=Math.asin(Math.sin(d)*Math.cos(h)+Math.cos(d)*Math.sin(h)*Math.cos(p)),m=f+Math.atan2(Math.sin(p)*Math.sin(h)*Math.cos(d),Math.cos(h)-Math.sin(d)*Math.sin(_)),g=(0,s.default)(m);return(g<a.MINLON||g>a.MAXLON)&&(m=(m+3*Math.PI)%(2*Math.PI)-Math.PI,g=(0,s.default)(m)),{latitude:(0,s.default)(_),longitude:g}}},"9Og4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("jH9d");e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh";switch(e){case"kmh":return t*r.timeConversion.h*r.distanceConversion.km;case"mph":return t*r.timeConversion.h*r.distanceConversion.mi;default:return t}}},"9rSQ":function(t,e,n){"use strict";var r=n("xTJ+");function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},AxvH:function(t,e,n){"use strict";t.exports=function(t){return t?t.split(/,\s*</).reduce(function(t,e){var n=function(t){var e=t.match(/<?([^>]*)>(.*)/);if(!e)return null;var n=e[1],r=e[2].split(";"),i=null,o=r.reduce(function(t,e){var n=function(t){var e=t.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return e?{key:e[1],value:e[2]}:null}(e);return n?"rel"===n.key?(i||(i=n.value),t):(t[n.key]=n.value,t):t},{});return i?{url:n,rel:i,params:o}:null}(e);return n?(n.rel.split(/\s+/).forEach(function(e){t[e]||(t[e]={url:n.url,params:n.params})}),t):t},{}):{}}},Bi8L:function(t,e,n){"use strict";var r=n("R/WN");t.exports=r,"undefined"!=typeof window&&(window.Suggestions=r)},CgaS:function(t,e,n){"use strict";var r=n("xTJ+"),i=n("MLWZ"),o=n("9rSQ"),s=n("UnBK"),a=n("SntB");function l(t){this.defaults=t,this.interceptors={request:new o,response:new o}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method=t.method?t.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},l.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(t){l.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}}),r.forEach(["post","put","patch"],function(t){l.prototype[t]=function(e,n,r){return this.request(a(r||{},{method:t,url:e,data:n}))}}),t.exports=l},Cu2R:function(t,e,n){"use strict";var r=n("ncV3"),i=n("KXza");t.exports=function(t){return function(e){var n;n=r.prototype.isPrototypeOf(e)?e:i(e);var o=Object.create(t);return o.client=n,o}}},DfZB:function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},F0A8:function(t,e,n){var r,i;t.exports=(r={970:t=>{!function(t){"use strict";function e(t){switch(t.length){case 0:return Tr();case 1:return Yo(t[0]);default:return function(t){return fs(function(t){return new Mr(t,!1)}(t))}(t)}}function n(t){return t.length-1|0}function r(t,e){if(null==e){var n=0,r=t.length-1|0;if(n<=r)do{var i=n;if(n=n+1|0,null==t[i])return i}while(n<=r)}else{var o=0,s=t.length-1|0;if(o<=s)do{var a=o;if(o=o+1|0,Dl(e,t[a]))return a}while(o<=s)}return-1}function i(t,e,n,r,i,o,s,a,l){return 0!=(1&a)&&(e=", "),0!=(2&a)&&(n=""),0!=(4&a)&&(r=""),0!=(8&a)&&(i=-1),0!=(16&a)&&(o="..."),0!=(32&a)&&(s=null),function(t,e,n,r,i,o,s){return function(t,e,n,r,i,o,s,a){e.append_2(r),Mo();var l=0,u=t,c=0,h=u.length;t:for(;c<h;){var p=u[c];if(c=c+1|0,(l=l+1|0)>1&&(e.append_2(n),Mo()),!(o<0||l<=o))break t;pi(e,p,a)}return o>=0&&l>o&&(e.append_2(s),Mo()),e.append_2(i),Mo(),e}(t,qa(),e,n,r,i,o,s).toString()}(t,e,n,r,i,o,s)}function o(t,e){for(var n=t,r=0,i=n.length;r<i;){var o=n[r];r=r+1|0,e.add_18(o),Mo()}return e}function s(t){this._$this_withIndex=t}function a(t,e,n,r,i,o,s,a,l){return 0!=(1&a)&&(e=", "),0!=(2&a)&&(n=""),0!=(4&a)&&(r=""),0!=(8&a)&&(i=-1),0!=(16&a)&&(o="..."),0!=(32&a)&&(s=null),function(t,e,n,r,i,o,s){return p(t,qa(),e,n,r,i,o,s).toString()}(t,e,n,r,i,o,s)}function l(t){if(t.isEmpty_29())throw sc("List is empty.");return t.get_29(Pr(t))}function u(t){if(t.isEmpty_29())throw sc("List is empty.");return t.get_29(0)}function c(t,e){return Cu(t,_l)?t.contains_27(e):function(t,e){if(Cu(t,ul))return t.indexOf_6(e);for(var n=0,r=t.iterator_39();r.hasNext_14();){var i=r.next_14();if(Jo(n),Mo(),Dl(e,i))return n;n=n+1|0,Mo()}return-1}(t,e)>=0}function h(t,e){for(var n=t.iterator_39();n.hasNext_14();){var r=n.next_14();e.add_18(r),Mo()}return e}function p(t,e,n,r,i,o,s,a){e.append_2(r),Mo();var l=0,u=t.iterator_39();t:for(;u.hasNext_14();){var c=u.next_14();if((l=l+1|0)>1&&(e.append_2(n),Mo()),!(o<0||l<=o))break t;pi(e,c,a)}return o>=0&&l>o&&(e.append_2(s),Mo()),e.append_2(i),Mo(),e}function d(t){if(Cu(t,_l)){var e;switch(t._get_size__29()){case 0:e=Tr();break;case 1:e=Yo(Cu(t,ul)?t.get_29(0):t.iterator_39().next_14());break;default:e=_(t)}return e}return Dr(f(t))}function f(t){return Cu(t,_l)?_(t):h(t,ps())}function _(t){return fs(t)}function m(t){return 1===t._get_size__29()?t.get_29(0):null}function g(t,e){return e<=jo()._MIN_VALUE_5?Po()._EMPTY:xu(t,e-1|0)}function y(t,e){return t<e?e:t}function v(t,e){return Co().fromClosedRange(t,e,-1)}function b(t,e){return t>e?e:t}function x(t){var e;switch(Pl(t)){case 0:throw sc("Char sequence is empty.");case 1:e=kl(t,0);break;default:throw tc("Char sequence has more than one element.")}return e}function w(t,e){if(!(e>=0))throw tc(zl("Requested character count "+e+" is less than zero."));var n=b(e,t.length);return t.substring(n)}function E(t){this._this$0=t}function S(){}function C(){I=this}var I,k,T,P,A,O,M,L,N,D,R,z,F,B,j,V,U,$,q,G,H,Z,W,X,Y,K,J,Q,tt,et,nt,rt,it,ot,st,at,lt,ut,ct,ht,pt,dt,ft,_t,mt,gt,yt,vt,bt,xt,wt,Et,St,Ct,It,kt,Tt,Pt,At,Ot,Mt,Lt,Nt,Dt,Rt,zt,Ft,Bt,jt,Vt,Ut,$t,qt,Gt,Ht,Zt,Wt,Xt,Yt,Kt,Jt,Qt,te,ee,ne,re,ie,oe,se,ae,le,ue,ce,he,pe,de,fe,_e,me,ge,ye,ve,be,xe,we,Ee,Se,Ce,Ie,ke,Te,Pe,Ae,Oe,Me,Le,Ne,De,Re,ze,Fe,Be,je,Ve,Ue,$e,qe,Ge,He,Ze,We,Xe,Ye,Ke,Je,Qe,tn,en,nn,rn,on,sn,an,ln,un,cn,hn,pn,dn,fn,_n,mn,gn,yn,vn,bn,xn,wn,En,Sn,Cn,In,kn,Tn,Pn,An,On,Mn,Ln,Nn,Dn,Rn,zn,Fn,Bn,jn,Vn,Un,$n,qn,Gn,Hn,Zn,Wn,Xn,Yn,Kn,Jn,Qn,tr,er,nr,rr,ir,or,sr,ar,lr,ur,cr,hr,pr,dr,fr,_r;function mr(){return null==I&&new C,I}function gr(t){this._$entryIterator=t}function yr(t,e){return e===t?"(this Map)":bl(e)}function vr(t,e){var n;t:do{for(var r=t._get_entries__5().iterator_39();r.hasNext_14();){var i=r.next_14();if(Dl(i._get_key__3(),e)){n=i;break t}}n=null}while(0);return n}function br(){k=this}function xr(){return null==k&&new br,k}function wr(t){this._this$0_0=t,kr.call(this)}function Er(t){this._this$0_1=t}function Sr(){xr(),this.__keys=null,this.__values=null}function Cr(){T=this}function Ir(){return null==T&&new Cr,T}function kr(){Ir(),S.call(this)}function Tr(){return null==P&&new Or,P}function Pr(t){return t._get_size__29()-1|0}function Ar(t){return t.length>0?Wu(t):Tr()}function Or(){P=this,this._serialVersionUID=new Kl(-1478467534,-1720727600)}function Mr(t,e){this._values=t,this._isVarargs=e}function Lr(){A=this}function Nr(){return null==A&&new Lr,A}function Dr(t){switch(t._get_size__29()){case 0:return Tr();case 1:return Yo(t.get_29(0));default:return t}}function Rr(t,e){this._index=t,this._value=e}function zr(t){for(var e=ps(),n=t.iterator_39();n.hasNext_14();)Xr(e,n.next_14()),Mo();return e}function Fr(t){this._iteratorFactory=t}function Br(t,e){return Cu(t,_l)?t._get_size__29():e}function jr(t){this._iterator=t,this._index_0=0}function Vr(){}function Ur(t){return t.length>0?(e=t,Zr(n=qs(t.length),e),n):$r();var e,n}function $r(){var t=(null==O&&new Gr,O);return Cu(t,ll)?t:ql()}function qr(t){var e=qs(t.length);return Zr(e,t),e}function Gr(){O=this,this._serialVersionUID_0=new Kl(-888910638,1920087921)}function Hr(t,e){return function(t,e){for(var n=e.iterator_39();n.hasNext_14();){var r=n.next_14(),i=r.component1(),o=r.component2();t.put_4(i,o),Mo()}}(e,t),e}function Zr(t,e){for(var n=e,r=0,i=n.length;r<i;){var o=n[r];r=r+1|0;var s=o.component1(),a=o.component2();t.put_4(s,a),Mo()}}function Wr(t,e){return function(t,e){if(Cu(t,Vr))return t.getOrImplicitDefault(e);var n;t:do{var r=t.get_17(e);if(null!=r||t.containsKey_8(e)){n=null==r||Tu(r)?r:ql();break t}throw sc("Key "+e+" is missing in the map.")}while(0);return n}(t,e)}function Xr(t,e){if(Cu(e,_l))return t.addAll_10(e);for(var n=!1,r=e.iterator_39();r.hasNext_14();){var i=r.next_14();t.add_18(i)&&(n=!0)}return n}function Yr(t){if(t.isEmpty_29())throw sc("List is empty.");return t.removeAt_2(Pr(t))}function Kr(){}function Jr(t){this._this$0_2=t,this._iterator_0=this._this$0_2._sequence.iterator_39()}function Qr(t,e){this._sequence=t,this._transformer=e}function ti(){M=this,this._serialVersionUID_1=new Kl(1993859828,793161749)}function ei(){return null==M&&new ti,M}function ni(){return ei()}function ri(){}function ii(){L=this,this._star=new si(null,null)}function oi(){return null==L&&new ii,L}function si(t,e){if(oi(),this._variance=t,this._type=e,null==this._variance!=(null==this._type))throw tc(zl(null==this._variance?"Star projection must have no type specified.":"The projection variance "+this._variance+" requires type to be specified."))}function ai(){if(z)return Mo();z=!0,N=new li("INVARIANT",0),D=new li("IN",1),R=new li("OUT",2)}function li(t,e){vl.call(this,t,e)}function ui(){return ai(),N}function ci(){return ai(),D}function hi(){return ai(),R}function pi(t,e,n){null!=n?(t.append_2(n(e)),Mo()):null==e||Au(e)?(t.append_2(e),Mo()):e instanceof ol?(t.append_1(e),Mo()):(t.append_2(bl(e)),Mo())}function di(t,e,n){if(t.equals(e))return!0;if(!n)return!1;var r,i=Ha(t),o=Ha(e);if(i.equals(o))r=!0;else{var s=kl(i.toString().toLowerCase(),0),a=o.toString().toLowerCase();r=s.equals(kl(a,0))}return r}function fi(t){return function(t,e){for(var n=function(t){return function(t){return Dr(function(t){return function(t,e){for(var n=t.iterator_39();n.hasNext_14();){var r=n.next_14();e.add_18(r),Mo()}return e}(t,ps())}(t))}(function(t){return function(t,e,n,r,i,o){return function(t,e,n,r){return function(t,e){return new Qr(t,e)}(function(t,e,n,r,i,o,s){return function(t,e,n,r,i){var o,s=Wu(["\r\n","\n","\r"]);return new Ti(t,0,0,(o=new Ai(s,!1),function(t,e){return o.invoke_10(t,e)}))}(t)}(t),(i=new Pi(t),function(t){return i.invoke_8(t)}));var i}(t)}(t)}(t))}(t),r=ps(),i=n.iterator_39();i.hasNext_14();){var o=i.next_14();xi(o)&&(r.add_18(o),Mo())}for(var s=r,a=ds(Br(s,10)),l=s.iterator_39();l.hasNext_14();){var u=l.next_14();a.add_18(_i(u)),Mo()}for(var c=function(t){var e=t.iterator_39();if(!e.hasNext_14())return null;for(var n=e.next_14();e.hasNext_14();){var r=e.next_14();Ol(n,r)>0&&(n=r)}return n}(a),h=null==c?0:c,d=(_u("".length,n._get_size__29()),function(t){var e,n;return 0===Pl("")?(n=new mi,e=function(t){return n.invoke_6(t)}):e=function(t){var e=new gi("");return function(t){return e.invoke_6(t)}}(),e}()),f=Pr(n),_=ps(),m=0,g=n.iterator_39();g.hasNext_14();){var y=g.next_14(),v=m;m=v+1|0;var b,x=Jo(v);if(0!==x&&x!==f||!Qa(y)){var E,S=w(y,h);b=null==(E=null==S?null:d(S))?y:E}else b=null;null==b||(_.add_18(b),Mo()),Mo()}return function(t,e,n,r,i,o,s,a,l,u){return p(t,e,"\n","","",-1,"...",null)}(_,Ua()).toString()}(t)}function _i(t){var e;t:do{var n=0,r=Pl(t)-1|0;if(n<=r)do{var i=n;if(n=n+1|0,!Za(kl(t,i))){e=i;break t}}while(n<=r);e=-1}while(0);return-1===e?t.length:e}function mi(){}function gi(t){this._$indent=t}function yi(t){return function(t,e){Wa(10),Mo();var n,r,i,o=t.length;if(0===o)return null;var s=kl(t,0);if(s.compareTo_9(new ol(48))<0){if(1===o)return null;if(n=1,s.equals(new ol(45)))r=!0,i=jo()._MIN_VALUE_5;else{if(!s.equals(new ol(43)))return null;r=!1,i=0|-jo()._MAX_VALUE_5}}else n=0,r=!1,i=0|-jo()._MAX_VALUE_5;var a=(0|-jo()._MAX_VALUE_5)/36|0,l=a,u=0,c=n;if(c<o)do{var h=c;c=c+1|0;var p=Ka(kl(t,h),10);if(p<0)return null;if(u<l){if(l!==a)return null;if(u<(l=i/10|0))return null}if((u=_u(u,10))<(i+p|0))return null;u=u-p|0}while(c<o);return r?u:0|-u}(t)}function vi(t){throw gc("Invalid number format: '"+t+"'")}function bi(t){return function(t,e){Wa(10),Mo();var n,r,i,o=t.length;if(0===o)return null;var s=kl(t,0);if(s.compareTo_9(new ol(48))<0){if(1===o)return null;if(n=1,s.equals(new ol(45)))r=!0,Yl(),i=new Kl(0,-2147483648);else{if(!s.equals(new ol(43)))return null;r=!1,Yl(),i=new Kl(-1,2147483647).unaryMinus_4()}}else n=0,r=!1,Yl(),i=new Kl(-1,2147483647).unaryMinus_4();Yl();var a=new Kl(-1,2147483647).unaryMinus_4().div_27(bu(36)),l=a,u=new Kl(0,0),c=n;if(c<o)do{var h=c;c=c+1|0;var p=Ka(kl(t,h),10);if(p<0)return null;if(u.compareTo_48(l)<0){if(!l.equals(a))return null;if(l=i.div_27(bu(10)),u.compareTo_48(l)<0)return null}if((u=u.times_27(bu(10))).compareTo_48(i.plus_27(bu(p)))<0)return null;u=u.minus_28(bu(p))}while(c<o);return r?u:u.unaryMinus_4()}(t)}function xi(t){return!Qa(t)}function wi(t){return Pl(t)-1|0}function Ei(t,e,n,r,i,o){return 0!=(2&i)&&(n=wi(t)),0!=(4&i)&&(r=!1),function(t,e,n,r){return r||"string"!=typeof t?Si(t,e,n,0,r,!0):t.lastIndexOf(e,n)}(t,e,n,r)}function Si(t,e,n,r,i,o){var s=o?v(b(n,wi(t)),y(r,0)):xu(y(n,0),b(r,Pl(t)));if("string"==typeof t&&"string"==typeof e){var a=s._first_1,l=s._last,u=s._step_0;if(u>0&&a<=l||u<0&&l<=a)do{var c=a;if(a=a+u|0,el(e,0,t,c,Pl(e),i))return c}while(c!==l)}else{var h=s._first_1,p=s._last,d=s._step_0;if(d>0&&h<=p||d<0&&p<=h)do{var f=h;if(h=h+d|0,Ci(e,0,t,f,Pl(e),i))return f}while(f!==p)}return-1}function Ci(t,e,n,r,i,o){if(r<0||e<0||e>(Pl(t)-i|0)||r>(Pl(n)-i|0))return!1;var s=0;if(s<i)do{var a=s;if(s=s+1|0,!di(kl(t,e+a|0),kl(n,r+a|0),o))return!1}while(s<i);return!0}function Ii(t){if(t._nextSearchIndex<0)t._nextState=0,t._nextItem=null;else{var e;if(t._this$0_3._limit>0){var n=t;n._counter=n._counter+1|0,e=n._counter>=t._this$0_3._limit}else e=!1;if(e||t._nextSearchIndex>Pl(t._this$0_3._input))t._nextItem=xu(t._currentStartIndex,wi(t._this$0_3._input)),t._nextSearchIndex=-1;else{var r=t._this$0_3._getNextMatch(t._this$0_3._input,t._nextSearchIndex);if(null==r)t._nextItem=xu(t._currentStartIndex,wi(t._this$0_3._input)),t._nextSearchIndex=-1;else{var i=r,o=i.component1(),s=i.component2();t._nextItem=g(t._currentStartIndex,o),t._currentStartIndex=o+s|0,t._nextSearchIndex=t._currentStartIndex+(0===s?1:0)|0}}t._nextState=1}}function ki(t){this._this$0_3=t,this._nextState=-1,this._currentStartIndex=function(t,e,n){if(0>n)throw tc("Cannot coerce value to an empty range: maximum "+n+" is less than minimum 0.");return t<0?0:t>n?n:t}(this._this$0_3._startIndex,0,Pl(this._this$0_3._input)),this._nextSearchIndex=this._currentStartIndex,this._nextItem=null,this._counter=0}function Ti(t,e,n,r){this._input=t,this._startIndex=e,this._limit=n,this._getNextMatch=r}function Pi(t){this._$this_splitToSequence=t}function Ai(t,e){this._$delimitersList=t,this._$ignoreCase=e}function Oi(){}function Mi(t){this._initializer=t,this.__value=Ni()}function Li(){F=this}function Ni(){return null==F&&new Li,F}function Di(t,e){this._first=t,this._second=e}function Ri(t,e){return new Di(t,e)}function zi(t,e,n){this._first_0=t,this._second_0=e,this._third=n}function Fi(){B=this,this._MIN_VALUE=0,this._MAX_VALUE=-1,this._SIZE_BYTES=1,this._SIZE_BITS=8}function Bi(){return null==B&&new Fi,B}function ji(t,e){return Ol(255&t,255&e)}function Vi(t){return(255&t).toString()}function Ui(t){Bi(),this._data=t}function $i(){j=this,this._MIN_VALUE_0=0,this._MAX_VALUE_0=-1,this._SIZE_BYTES_0=4,this._SIZE_BITS_0=32}function qi(){return null==j&&new $i,j}function Gi(t,e){return co(t,e)}function Hi(t){return bu(t).and(new Kl(-1,0)).toString()}function Zi(t){qi(),this._data_0=t}function Wi(){V=this,this._MIN_VALUE_1=new Kl(0,0),this._MAX_VALUE_1=new Kl(-1,-1),this._SIZE_BYTES_1=8,this._SIZE_BITS_1=64}function Xi(){return null==V&&new Wi,V}function Yi(t,e){return ho(t,e)}function Ki(t){return function(t,e){if(t.compareTo_48(new Kl(0,0))>=0)return Oc(t,e);var n=t.ushr_0(1).div_27(bu(e)).shl_0(1),r=t.minus_28(n.times_27(bu(e)));return r.compareTo_48(bu(e))>=0&&(r=r.minus_28(bu(e)),n=n.plus_27(bu(1))),Oc(n,e)+Oc(r,e)}(t,10)}function Ji(t){Xi(),this._data_1=t}function Qi(){U=this,this._MIN_VALUE_2=0,this._MAX_VALUE_2=-1,this._SIZE_BYTES_2=2,this._SIZE_BITS_2=16}function to(){return null==U&&new Qi,U}function eo(t,e){return Ol(65535&t,65535&e)}function no(t){return(65535&t).toString()}function ro(t){to(),this._data_2=t}function io(t){return function(t,e){Wa(10),Mo();var n=t.length;if(0===n)return null;Xi();var r,i=new Kl(-1,-1),o=kl(t,0);if(o.compareTo_9(new ol(48))<0){if(1===n||!o.equals(new ol(43)))return null;r=1}else r=0;var s=new Kl(477218588,119304647),a=s,l=bu(10),u=new Kl(0,0),c=r;if(c<n)do{var h=c;c=c+1|0;var p=Ka(kl(t,h),10);if(p<0)return null;if(ho(u,a)>0){if(!Dl(new Ji(a),new Ji(s)))return null;if(ho(u,a=po(i,l))>0)return null}var d=u=u.times_27(l),f=u,_=bu(p).and(new Kl(-1,0));if(ho(u=f.plus_27(_),d)<0)return null}while(c<n);return u}(t)}function oo(t){var e,n=function(t){return uo(t,10)}(t);return null==(null==n?null:new Zi(n))?vi(t):e=n,e}function so(t){var e,n=io(t);return null==(null==n?null:new Ji(n))?vi(t):e=n,e}function ao(t){var e,n=function(t){return function(t,e){var n=uo(t,10);if(null==(null==n?null:new Zi(n)))return null;var r=n;return Bi(),co(r,255)>0?null:mu(r)}(t)}(t);return null==(null==n?null:new Ui(n))?vi(t):e=n,e}function lo(t){var e,n=function(t){return function(t,e){var n=uo(t,10);if(null==(null==n?null:new Zi(n)))return null;var r=n;return to(),co(r,65535)>0?null:yu(r)}(t)}(t);return null==(null==n?null:new ro(n))?vi(t):e=n,e}function uo(t,e){Wa(e),Mo();var n=t.length;if(0===n)return null;qi();var r,i=kl(t,0);if(i.compareTo_9(new ol(48))<0){if(1===n||!i.equals(new ol(43)))return null;r=1}else r=0;var o,s=119304647,a=s,l=e,u=0,c=r;if(c<n)do{var h=c;c=c+1|0;var p=Ka(kl(t,h),e);if(p<0)return null;if(co(u,a)>0){if(!Dl(new Zi(a),new Zi(s)))return null;if(o=l,co(u,a=bu(-1).and(new Kl(-1,0)).div_27(bu(o).and(new Kl(-1,0))).toInt_5())>0)return null}var d=u=_u(u,l);if(co(u=u+p|0,d)<0)return null}while(c<n);return u}function co(t,e){return Ol(t^jo()._MIN_VALUE_5,e^jo()._MIN_VALUE_5)}function ho(t,e){Yl();var n=t.xor(new Kl(0,-2147483648));return Yl(),n.compareTo_48(e.xor(new Kl(0,-2147483648)))}function po(t,e){var n=t,r=e;if(r.compareTo_48(new Kl(0,0))<0)return ho(t,e)<0?new Kl(0,0):new Kl(1,0);if(n.compareTo_48(new Kl(0,0))>=0)return n.div_27(r);var i=n.ushr_0(1).div_27(r).shl_0(1),o=ho(n.minus_28(i.times_27(r)),r)>=0?1:0;return i.plus_27(bu(o))}function fo(){}function _o(){}function mo(){}function go(){}function yo(){}function vo(){}function bo(){}function xo(){}function wo(){}function Eo(t,e,n){wo.call(this),this._step=n,this._finalElement=e,this._hasNext=this._step>0?t<=e:t>=e,this._next=this._hasNext?t:this._finalElement}function So(){$=this}function Co(){return null==$&&new So,$}function Io(t,e,n){if(Co(),0===n)throw tc("Step must be non-zero.");if(n===jo()._MIN_VALUE_5)throw tc("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this._first_1=t,this._last=function(t,e,n){var r;if(n>0)r=t>=e?e:e-Lo(e,t,n)|0;else{if(!(n<0))throw tc("Step is zero.");r=t<=e?e:e+Lo(t,e,0|-n)|0}return r}(t,e,n),this._step_0=n}function ko(){}function To(){q=this,this._EMPTY=new Ao(1,0)}function Po(){return null==q&&new To,q}function Ao(t,e){Po(),Io.call(this,t,e,1)}function Oo(){G=this}function Mo(){return null==G&&new Oo,G}function Lo(t,e,n){return No(No(t,n)-No(e,n)|0,n)}function No(t,e){var n=t%e;return n>=0?n:n+e|0}function Do(){H=this,this._MIN_VALUE_3=-128,this._MAX_VALUE_3=127,this._SIZE_BYTES_3=1,this._SIZE_BITS_3=8}function Ro(){return null==H&&new Do,H}function zo(){Z=this,this._MIN_VALUE_4=-32768,this._MAX_VALUE_4=32767,this._SIZE_BYTES_4=2,this._SIZE_BITS_4=16}function Fo(){return null==Z&&new zo,Z}function Bo(){W=this,this._MIN_VALUE_5=-2147483648,this._MAX_VALUE_5=2147483647,this._SIZE_BYTES_5=4,this._SIZE_BITS_5=32}function jo(){return null==W&&new Bo,W}function Vo(){X=this,this._MIN_VALUE_6=14e-46,this._MAX_VALUE_6=34028235e31,this._POSITIVE_INFINITY=1/0,this._NEGATIVE_INFINITY=-1/0,this._NaN=NaN,this._SIZE_BYTES_6=4,this._SIZE_BITS_6=32}function Uo(){return null==X&&new Vo,X}function $o(){Y=this,this._MIN_VALUE_7=5e-324,this._MAX_VALUE_7=17976931348623157e292,this._POSITIVE_INFINITY_0=1/0,this._NEGATIVE_INFINITY_0=-1/0,this._NaN_0=NaN,this._SIZE_BYTES_7=8,this._SIZE_BITS_7=64}function qo(){return null==Y&&new $o,Y}function Go(){K=this}function Ho(){return null==K&&new Go,K}function Zo(){J=this}function Wo(){return null==J&&new Zo,J}function Xo(){}function Yo(t){return 0===(e=[t]).length?ps():fs(new Mr(e,!0));var e}function Ko(t){return Zr(n=ks((e=[t]).length),e),n;var e,n}function Jo(t){return t<0&&function(){throw _c("Index overflow has happened.")}(),t}function Qo(t){return void 0!==t.toArray?t.toArray():ts(t)}function ts(t){for(var e=[],n=t.iterator_39();n.hasNext_14();)e.push(n.next_14());return e}function es(){S.call(this)}function ns(t){this._$this=t,this._index_1=0,this._last_0=-1}function rs(t,e){this._$this_0=t,ns.call(this,t),mr().checkPositionIndex(e,this._$this_0._get_size__29()),this._set_index__0(e)}function is(t,e,n){os.call(this),this._list=t,this._fromIndex=e,this.__size=0,mr().checkRangeIndexes(this._fromIndex,n,this._list._get_size__29()),this.__size=n-this._fromIndex|0}function os(){es.call(this),this._modCount=0}function ss(t){this._$entryIterator_0=t}function as(t,e){this._key=t,this.__value_0=e}function ls(){hs.call(this)}function us(t){this._this$0_4=t,hs.call(this)}function cs(){Sr.call(this),this.__keys_0=null,this.__values_0=null}function hs(){es.call(this)}function ps(){return t=Object.create(ms.prototype),ms.call(t,[]),t;var t}function ds(t){return e=Object.create(ms.prototype),ms.call(e,[]),e;var e}function fs(t){return function(t,e){return ms.call(e,Qo(t)),e}(t,Object.create(ms.prototype))}function _s(t,e){return mr().checkElementIndex(e,t._get_size__29()),e}function ms(t){os.call(this),this._array=t,this._isReadOnly=!1}function gs(t,e){if(function(){if(null!=Q)return Q;Mo(),Q=!1;var t=[],e=0;if(e<600)do{var n=e;e=e+1|0,t.push(n)}while(e<600);var r,i=(r=new bs,function(t,e){return r.invoke_14(t,e)});t.sort(i);var o=1,s=t.length;if(o<s)do{var a=o;o=o+1|0;var l=t[a-1|0],u=t[a];if((3&l)==(3&u)&&l>=u)return!1}while(o<s);return Q=!0,!0}()){var r=(i=new vs(e),function(t,e){return i.invoke_12(t,e)});t.sort(r)}else!function(t,e,n,r){var i=ys(t,xl(Array(t.length),null),0,n,r);if(i!==t){var o=0;if(o<=n)do{var s=o;o=o+1|0,t[s]=i[s]}while(s!==n)}}(t,0,n(t),e);var i}function ys(t,e,n,r,i){if(n===r)return t;var o=(n+r|0)/2|0,s=ys(t,e,n,o,i),a=ys(t,e,o+1|0,r,i),l=s===e?t:e,u=n,c=o+1|0,h=n;if(h<=r)do{var p=h;if(h=h+1|0,u<=o&&c<=r){var d=s[u],f=a[c];i.compare(d,f)<=0?(l[p]=d,u=u+1|0,Mo()):(l[p]=f,c=c+1|0,Mo())}else u<=o?(l[p]=s[u],u=u+1|0,Mo()):(l[p]=a[c],c=c+1|0,Mo(),Mo())}while(p!==r);return l}function vs(t){this._$comparator=t}function bs(){}function xs(){tt=this}function ws(){}function Es(t){this._$this_1=t,ls.call(this)}function Ss(t){return function(t,e){cs.call(e),Ts.call(e),e._internalMap=t,e._equality=t._get_equality__0()}(new zs((null==tt&&new xs,tt)),t),t}function Cs(){return Ss(Object.create(Ts.prototype))}function Is(t,e,n){if(Ss(n),!(t>=0))throw tc(zl("Negative initial capacity: "+t));if(!(e>=0))throw tc(zl("Non-positive load factor: "+e));return n}function ks(t){return function(t,e){return Is(t,0,e),e}(t,Object.create(Ts.prototype))}function Ts(){this.__entries=null}function Ps(){return t=Object.create(Ms.prototype),hs.call(t),Ms.call(t),t._map=Cs(),t;var t}function As(t){return function(t,e){return function(t,e,n){hs.call(n),Ms.call(n),n._map=function(t,e){return Is(t,0,Object.create(Ts.prototype))}(t)}(t,0,e),e}(t,Object.create(Ms.prototype))}function Os(t,e){return hs.call(e),Ms.call(e),e._map=t,e}function Ms(){}function Ls(t,e){var n=Ds(t,t._equality_0.getHashCode_0(e));if(null==n)return null;var r=n;if(null!=r&&ku(r))return Ns(r,t,e);var i=r;return t._equality_0.equals_1(i._get_key__3(),e)?i:null}function Ns(t,e,n){var r;t:do{for(var i=t,o=0,s=i.length;o<s;){var a=i[o];if(o=o+1|0,e._equality_0.equals_1(a._get_key__3(),n)){r=a;break t}}r=null}while(0);return r}function Ds(t,e){var n=t._backingMap[e];return void 0===n?null:n}function Rs(t){this._this$0_5=t,this._state=-1,this._keys=Object.keys(this._this$0_5._backingMap),this._keyIndex=-1,this._chainOrEntry=null,this._isChain=!1,this._itemIndex=-1,this._lastEntry=null}function zs(t){this._equality_0=t,this._backingMap=this.createJsMap_0(),this._size=0}function Fs(){}function Bs(t){this._$this_2=t,this._last_1=null,this._next_0=null,this._next_0=this._$this_2._$this_4._head}function js(t,e,n){this._$this_3=t,as.call(this,e,n),this._next_1=null,this._prev=null}function Vs(t){this._$this_4=t,ls.call(this)}function Us(){return Ss(t=Object.create(Gs.prototype)),Gs.call(t),t._map_0=Cs(),t;var t}function $s(t,e,n){return Is(t,e,n),Gs.call(n),n._map_0=Cs(),n}function qs(t){return function(t,e){return $s(t,0,e),e}(t,Object.create(Gs.prototype))}function Gs(){this._head=null,this._isReadOnly_0=!1}function Hs(t){return function(t,e){return function(t,e,n){Os(function(t,e){return $s(t,0,Object.create(Gs.prototype))}(t),n),Zs.call(n)}(t,0,e),e}(t,Object.create(Zs.prototype))}function Zs(){}function Ws(){}function Xs(){}function Ys(t){if(Ks(t))throw tc("Cannot round NaN value.");return t>jo()._MAX_VALUE_5?jo()._MAX_VALUE_5:t<jo()._MIN_VALUE_5?jo()._MIN_VALUE_5:gu(Math.round(t))}function Ks(t){return!(t==t)}function Js(t){return!function(t){var e;return Uo(),t===1/0?e=!0:(Uo(),e=t===-1/0),e}(t)&&!function(t){return!(t==t)}(t)}function Qs(t){return!function(t){var e;return qo(),t===1/0?e=!0:(qo(),e=t===-1/0),e}(t)&&!Ks(t)}function ta(t){return(t instanceof ra?t:ql())._get_jClass__2()}function ea(){}function na(){}function ra(t){this._jClass=t}function ia(t,e,n){ra.call(this,t),this._givenSimpleName=e,this._isInstanceFunction=n}function oa(){et=this,ra.call(this,Object),this._simpleName="Nothing"}function sa(){return null==et&&new oa,et}function aa(){}function la(t){ra.call(this,t);var e=t.$metadata$;this._simpleName_0=null==e?null:e.simpleName}function ua(){}function ca(){}function ha(){}function pa(t,e,n){return new _a(t,Wu(e),n)}function da(t){return oi().invariant(t)}function fa(t){this._this$0_6=t}function _a(t,e,n){this._classifier=t,this._arguments=e,this._isMarkedNullable=n}function ma(){}function ga(){}function ya(){}function va(){}function ba(){}function xa(){}function wa(){}function Ea(){}function Sa(){}function Ca(){}function Ia(){}function ka(){}function Ta(){}function Pa(){}function Aa(){}function Oa(){}function Ma(){}function La(){}function Na(){}function Da(t){this._$arity=t}function Ra(){var t;rt=this,this._anyClass=new ia(Object,"Any",(t=new ma,function(e){return t.invoke_58(e)})),this._numberClass=new ia(Number,"Number",function(){var t=new ga;return function(e){return t.invoke_58(e)}}()),this._nothingClass=sa();var e=Boolean;this._booleanClass=new ia(e,"Boolean",function(){var t=new ya;return function(e){return t.invoke_58(e)}}()),this._byteClass=new ia(Number,"Byte",function(){var t=new va;return function(e){return t.invoke_58(e)}}()),this._shortClass=new ia(Number,"Short",function(){var t=new ba;return function(e){return t.invoke_58(e)}}()),this._intClass=new ia(Number,"Int",function(){var t=new xa;return function(e){return t.invoke_58(e)}}()),this._floatClass=new ia(Number,"Float",function(){var t=new wa;return function(e){return t.invoke_58(e)}}()),this._doubleClass=new ia(Number,"Double",function(){var t=new Ea;return function(e){return t.invoke_58(e)}}()),this._arrayClass=new ia(Array,"Array",function(){var t=new Sa;return function(e){return t.invoke_58(e)}}()),this._stringClass=new ia(String,"String",function(){var t=new Ca;return function(e){return t.invoke_58(e)}}());var n=Error;this._throwableClass=new ia(n,"Throwable",function(){var t=new Ia;return function(e){return t.invoke_58(e)}}()),this._booleanArrayClass=new ia(Array,"BooleanArray",function(){var t=new ka;return function(e){return t.invoke_58(e)}}());var r=Uint16Array;this._charArrayClass=new ia(r,"CharArray",function(){var t=new Ta;return function(e){return t.invoke_58(e)}}());var i=Int8Array;this._byteArrayClass=new ia(i,"ByteArray",function(){var t=new Pa;return function(e){return t.invoke_58(e)}}());var o=Int16Array;this._shortArrayClass=new ia(o,"ShortArray",function(){var t=new Aa;return function(e){return t.invoke_58(e)}}());var s=Int32Array;this._intArrayClass=new ia(s,"IntArray",function(){var t=new Oa;return function(e){return t.invoke_58(e)}}()),this._longArrayClass=new ia(Array,"LongArray",function(){var t=new Ma;return function(e){return t.invoke_58(e)}}());var a=Float32Array;this._floatArrayClass=new ia(a,"FloatArray",function(){var t=new La;return function(e){return t.invoke_58(e)}}());var l=Float64Array;this._doubleArrayClass=new ia(l,"DoubleArray",function(){var t=new Na;return function(e){return t.invoke_58(e)}}())}function za(){return null==rt&&new Ra,rt}function Fa(t){return Array.isArray(t)?function(t){var e;switch(t.length){case 1:e=Ba(t[0]);break;case 0:e=sa();break;default:e=new aa}return e}(t):Ba(t)}function Ba(t){if(t===String)return za()._stringClass;var e,n=t.$metadata$;if(null!=n){var r;if(null==n.$kClass$){var i=new la(t);n.$kClass$=i,r=i}else r=n.$kClass$;e=r}else e=new la(t);return e}function ja(t){var e;switch(typeof t){case"string":e=za()._stringClass;break;case"number":e=Tc(t,0)===t?za()._intClass:za()._doubleClass;break;case"boolean":e=za()._booleanClass;break;case"function":e=za().functionClass(t.length);break;default:var n;if(Ou(t))n=za()._booleanArrayClass;else if(Nu(t))n=za()._charArrayClass;else if(Mu(t))n=za()._byteArrayClass;else if(Lu(t))n=za()._shortArrayClass;else if(Du(t))n=za()._intArrayClass;else if(zu(t))n=za()._longArrayClass;else if(Ru(t))n=za()._floatArrayClass;else if(Fu(t))n=za()._doubleArrayClass;else if(Cu(t,na))n=Fa(na);else if(ku(t))n=za()._arrayClass;else{var r=Object.getPrototypeOf(t).constructor;n=r===Object?za()._anyClass:r===Error?za()._throwableClass:Ba(r)}e=n}return e}function Va(){}function Ua(t){return $a(e=Object.create(Ga.prototype)),e;var e}function $a(t){return Ga.call(t,""),t}function qa(){return $a(Object.create(Ga.prototype))}function Ga(t){this._string=void 0!==t?t:""}function Ha(t){var e=t.toString().toUpperCase();return e.length>1?t:kl(e,0)}function Za(t){return function(t){var e=t.toInt_5();return 9<=e&&e<=13||28<=e&&e<=32||160===e||e>4096&&(5760===e||8192<=e&&e<=8202||8232===e||8233===e||8239===e||8287===e||12288===e)}(t)}function Wa(t){if(!(2<=t&&t<=36))throw tc("radix "+t+" was not in valid range 2..36");return t}function Xa(t){var e=+t;return(Ks(e)&&!Ja(t)||0===e&&Qa(t))&&vi(t),e}function Ya(t){var e,n=yi(t);return null==n?vi(t):e=n,e}function Ka(t,e){var n=t.compareTo_9(new ol(48))>=0&&t.compareTo_9(new ol(57))<=0?t.minus(new ol(48)):t.compareTo_9(new ol(65))>=0&&t.compareTo_9(new ol(90))<=0?t.minus(new ol(65))+10|0:t.compareTo_9(new ol(97))>=0&&t.compareTo_9(new ol(122))<=0?t.minus(new ol(97))+10|0:-1;return n>=e?-1:n}function Ja(t){switch(t.toLowerCase()){case"nan":case"+nan":case"-nan":return!0;default:return!1}}function Qa(t){return 0===Pl(t)||function(t,e){var n=t.match("^[\\s\\xA0]+$");return null!=n&&!(0===n.length)}("string"==typeof t?t:zl(t))}function tl(t,e,n){var r;if(null==t)r=null==e;else if(n)if(null==e)r=!1;else{var i=t.toLowerCase(),o=e.toLowerCase();r=i===o||i.toUpperCase()===o.toUpperCase()}else r=t==e;return r}function el(t,e,n,r,i,o){return Ci(t,e,n,r,i,o)}function nl(t){return Pl(t)>0?t.substring(0,1).toUpperCase()+t.substring(1):t}function rl(){it=this,this._MIN_VALUE_8=new ol(0),this._MAX_VALUE_8=new ol(65535),this._MIN_HIGH_SURROGATE=new ol(55296),this._MAX_HIGH_SURROGATE=new ol(56319),this._MIN_LOW_SURROGATE=new ol(56320),this._MAX_LOW_SURROGATE=new ol(57343),this._MIN_SURROGATE=new ol(55296),this._MAX_SURROGATE=new ol(57343),this._SIZE_BYTES_8=2,this._SIZE_BITS_8=16}function il(){return null==it&&new rl,it}function ol(t){il(),this._value_0=65535&t}function sl(){}function al(){}function ll(){}function ul(){}function cl(){}function hl(){}function pl(){}function dl(){}function fl(){}function _l(){}function ml(){}function gl(){}function yl(){ot=this}function vl(t,e){null==ot&&new yl,this._name=t,this._ordinal=e}function bl(t){var e=null==t?null:zl(t);return null==e?"null":e}function xl(t,e){var n=0,r=t.length-1|0;if(n<=r)do{var i=n;n=n+1|0,t[i]=e}while(i!==r);return t}function wl(t){return new Cl(t)}function El(t){var e=xl(Array(t),!1);return e.$type$="BooleanArray",e}function Sl(t){var e,n=Array(t);if(il(),0<new ol(0).toInt_5()?e=!0:(il(),e=0>new ol(65535).toInt_5()),e)throw tc("Invalid Char code: 0");var r=xl(n,new ol(yu(0)));return r.$type$="CharArray",r}function Cl(t){this._$array=t,this._index_2=0}function Il(t){return Tc(t,0)===t?gu(t):(at[0]=t,_u(lt[ct],31)+lt[ut]|0)}function kl(t,e){var n;if(Tl(t)){var r,i=t.charCodeAt(e);if(il(),i<new ol(0).toInt_5()?r=!0:(il(),r=i>new ol(65535).toInt_5()),r)throw tc("Invalid Char code: "+i);n=new ol(yu(i))}else n=t.get_29(e);return n}function Tl(t){return"string"==typeof t}function Pl(t){return Tl(t)?t.length:t._get_length__0()}function Al(){}function Ol(t,e){var n;switch(typeof t){case"number":n="number"==typeof e?Ml(t,e):e instanceof Kl?Ml(t,e.toDouble_4()):Ll(t,e);break;case"string":case"boolean":n=Ll(t,e);break;default:n=function(t,e){return t.compareTo_14(e)}(t,e)}return n}function Ml(t,e){var n;if(t<e)n=-1;else if(t>e)n=1;else if(t===e){var r;if(0!==t)r=0;else{var i=1/t;r=i===1/e?0:i<0?-1:1}n=r}else n=t!=t?e!=e?0:1:-1;return n}function Ll(t,e){return t<e?-1:t>e?1:0}function Nl(t){if(!kc("kotlinHashCodeValue$",t)){var e=Tc(4294967296*Math.random(),0),n=new Object;n.value=e,n.enumerable=!1,Object.defineProperty(t,"kotlinHashCodeValue$",n)}return t.kotlinHashCodeValue$}function Dl(t,e){return null==t?null==e:null!=e&&("object"==typeof t&&"function"==typeof t.equals?t.equals(e):t!=t?e!=e:"number"==typeof t&&"number"==typeof e?t===e&&(0!==t||1/t==1/e):t===e)}function Rl(t){if(null==t)return 0;var e;switch(typeof t){case"object":e="function"==typeof t.hashCode?t.hashCode():Nl(t);break;case"function":e=Nl(t);break;case"number":e=Il(t);break;case"boolean":e=t?1:0;break;default:e=Fl(function(t){return String(t)}(t))}return e}function zl(t){return null==t?"null":Eu(t)?"[...]":t.toString()}function Fl(t){var e=0,n=0,r=t.length-1|0;if(n<=r)do{var i=n;n=n+1|0;var o=t.charCodeAt(i);e=_u(e,31)+o|0}while(i!==r);return e}function Bl(t,e){null!=Error.captureStackTrace?Error.captureStackTrace(t,e):t.stack=(new Error).stack}function jl(t,e,n){Error.call(t),function(t,e,n){if(!Vl(t,"message")){var r;if(null==e){var i;if(null!==e){var o=null==n?null:n.toString();i=null==o?void 0:o}else i=void 0;r=i}else r=e;t.message=r}Vl(t,"cause")||(t.cause=n),t.name=Object.getPrototypeOf(t).constructor.name}(t,e,n)}function Vl(t,e){return Object.getPrototypeOf(t).hasOwnProperty(e)}function Ul(t){var e;return null==t?function(){throw vc()}():e=t,e}function $l(){throw xc()}function ql(){throw Ec()}function Gl(t){throw Cc("lateinit property "+t+" has not been initialized")}function Hl(t){return new Mi(t)}function Zl(t,e){for(var n=t.length,r=e.length,i=0,o=e;i<n&&i<r;){var s=i,a=i;i=a+1|0,o[s]=t[a]}return e}function Wl(t,e,n){var r=t.slice(0,e);void 0!==t.$type$&&(r.$type$=t.$type$);var i=t.length;if(e>i)for(r.length=e;i<e;){var o=i;i=o+1|0,r[o]=n}return r}function Xl(){ht=this,this._MIN_VALUE_9=new Kl(0,-2147483648),this._MAX_VALUE_9=new Kl(-1,2147483647),this._SIZE_BYTES_9=8,this._SIZE_BITS_9=64}function Yl(){return null==ht&&new Xl,ht}function Kl(t,e){Yl(),xo.call(this),this._low=t,this._high=e}function Jl(t,e){if(iu(t,e))return 0;var n=au(t),r=au(e);return n&&!r?-1:!n&&r?1:au(tu(t,e))?-1:1}function Ql(t,e){var n=0,r=0,i=0,o=0;return n=(n=n+((r=(r=r+((i=(i=i+((o=o+((65535&t._low)+(65535&e._low)|0)|0)>>>16)|0)+((t._low>>>16)+(e._low>>>16)|0)|0)>>>16)|0)+((65535&t._high)+(65535&e._high)|0)|0)>>>16)|0)+((t._high>>>16)+(e._high>>>16)|0)|0,new Kl((i&=65535)<<16|(o&=65535),(n&=65535)<<16|(r&=65535))}function tu(t,e){return Ql(t,e.unaryMinus_4())}function eu(t,e){if(lu(t))return pt;if(lu(e))return pt;if(iu(t,mt))return uu(e)?mt:pt;if(iu(e,mt))return uu(t)?mt:pt;if(au(t))return au(e)?eu(cu(t),cu(e)):cu(eu(cu(t),e));if(au(e))return cu(eu(t,cu(e)));if(hu(t,gt)&&hu(e,gt))return pu(ru(t)*ru(e));var n=t._high>>>16,r=65535&t._high,i=t._low>>>16,o=65535&t._low,s=e._high>>>16,a=65535&e._high,l=e._low>>>16,u=65535&e._low,c=0,h=0,p=0,d=0;return p=p+((d=d+_u(o,u)|0)>>>16)|0,d&=65535,h=(h=h+((p=p+_u(i,u)|0)>>>16)|0)+((p=(p&=65535)+_u(o,l)|0)>>>16)|0,p&=65535,c=(c=(c=c+((h=h+_u(r,u)|0)>>>16)|0)+((h=(h&=65535)+_u(i,l)|0)>>>16)|0)+((h=(h&=65535)+_u(o,a)|0)>>>16)|0,h&=65535,c=c+(((_u(n,u)+_u(r,l)|0)+_u(i,a)|0)+_u(o,s)|0)|0,new Kl(p<<16|d,(c&=65535)<<16|h)}function nu(t,e){var n=63&e;return 0===n?t:n<32?new Kl(t._low<<n,t._high<<n|t._low>>>(32-n|0)):new Kl(0,t._low<<(n-32|0))}function ru(t){return 4294967296*t._high+function(t){return t._low>=0?t._low:4294967296+t._low}(t)}function iu(t,e){return t._high===e._high&&t._low===e._low}function ou(t,e){if(e<2||36<e)throw Yu("radix out of range: "+e);if(lu(t))return"0";if(au(t)){if(iu(t,mt)){var n=su(e),r=t.div_27(n),i=tu(eu(r,n),t).toInt_5();return ou(r,e)+i.toString(e)}return"-"+ou(cu(t),e)}for(var o=pu(Math.pow(e,6)),s=t,a="";;){var l=s.div_27(o),u=tu(s,eu(l,o)).toInt_5().toString(e);if(lu(s=l))return u+a;for(;u.length<6;)u="0"+u;a=u+a}}function su(t){return new Kl(t,t<0?-1:0)}function au(t){return t._high<0}function lu(t){return 0===t._high&&0===t._low}function uu(t){return 1==(1&t._low)}function cu(t){return t.unaryMinus_4()}function hu(t,e){return Jl(t,e)<0}function pu(t){if(Ks(t))return pt;if(t<=-0x8000000000000000)return mt;if(t+1>=0x8000000000000000)return _t;if(t<0)return cu(pu(-t));var e=4294967296;return new Kl(Tc(t%e,0),Tc(t/e,0))}function du(t,e){return Jl(t,e)>0}function fu(t,e){return Jl(t,e)>=0}function _u(t,e){return Tc(Ac(t,4294901760)*Ac(e,65535)+Ac(t,65535)*e,0)}function mu(t){return function(t){return t<<24>>24}(t)}function gu(t){return t instanceof Kl?t.toInt_5():function(t){return t>2147483647?2147483647:t<-2147483648?-2147483648:Tc(t,0)}(t)}function yu(t){return function(t){return t<<16>>16}(t)}function vu(t){var e,n=65535&gu(t);if(il(),n<new ol(0).toInt_5()?e=!0:(il(),e=n>new ol(65535).toInt_5()),e)throw tc("Invalid Char code: "+n);return new ol(yu(n))}function bu(t){return su(t)}function xu(t,e){return new Ao(t,e)}function wu(t,e,n,r,i){var o,s;return r.get=r,r.set=i,r.callableName=t,o=r,s=function(t,e,n){var r=yt[t][null==e?0:1];return 0==r.interfaces.length&&r.interfaces.push(n),r}(e,i,n),o.$metadata$=s,o.constructor=o,o}function Eu(t){return!!Su(t)||ArrayBuffer.isView(t)}function Su(t){return Array.isArray(t)}function Cu(t,e){var n=t.constructor;return null!=n&&Iu(n,e)}function Iu(t,e){if(t===e)return!0;var n=t.$metadata$;if(null!=n)for(var r=n.interfaces,i=0,o=r.length;i<o;){var s=r[i];if(i=i+1|0,Iu(s,e))return!0}var a=null!=t.prototype?Object.getPrototypeOf(t.prototype):null,l=null!=a?a.constructor:null;return null!=l&&Iu(l,e)}function ku(t){return!!Su(t)&&!t.$type$}function Tu(t){switch(typeof t){case"string":case"number":case"boolean":case"function":return!0;default:return Pc(t,Object)}}function Pu(t){return"number"==typeof t||t instanceof Kl}function Au(t){return"string"==typeof t||Cu(t,ta(Fa(_o)))}function Ou(t){return!!Su(t)&&"BooleanArray"===t.$type$}function Mu(t){return Pc(t,Int8Array)}function Lu(t){return Pc(t,Int16Array)}function Nu(t){return!!Su(t)&&"CharArray"===t.$type$}function Du(t){return Pc(t,Int32Array)}function Ru(t){return Pc(t,Float32Array)}function zu(t){return!!Su(t)&&"LongArray"===t.$type$}function Fu(t){return Pc(t,Float64Array)}function Bu(t,e){if(!(e>=0))throw tc(zl("Invalid new array size: "+e+"."));var n=Zl(t,Sl(e));return n.$type$="CharArray",n}function ju(t,e){if(!(e>=0))throw tc(zl("Invalid new array size: "+e+"."));return Zl(t,new Float64Array(e))}function Vu(t,e){if(!(e>=0))throw tc(zl("Invalid new array size: "+e+"."));return Zl(t,new Float32Array(e))}function Uu(t,e){if(!(e>=0))throw tc(zl("Invalid new array size: "+e+"."));var n=Wl(t,e,new Kl(0,0));return n.$type$="LongArray",n}function $u(t,e){if(!(e>=0))throw tc(zl("Invalid new array size: "+e+"."));return Zl(t,new Int32Array(e))}function qu(t,e){if(!(e>=0))throw tc(zl("Invalid new array size: "+e+"."));return Zl(t,new Int16Array(e))}function Gu(t,e){if(!(e>=0))throw tc(zl("Invalid new array size: "+e+"."));return Zl(t,new Int8Array(e))}function Hu(t,e){if(!(e>=0))throw tc(zl("Invalid new array size: "+e+"."));var n=Wl(t,e,!1);return n.$type$="BooleanArray",n}function Zu(t,e){return function(t,e){var n=t,r=e;if(n===r)return!0;if(null==n||null==r||!Eu(r)||n.length!=r.length)return!1;var i=0,o=n.length;if(i<o)do{var s=i;if(i=i+1|0,!Dl(n[s],r[s]))return!1}while(i<o);return!0}(t,e)}function Wu(t){return new ms(t)}function Xu(t,e){return jl(e,t,void 0),Ku.call(e),e}function Yu(t){var e=Xu(t,Object.create(Ku.prototype));return Bl(e,Yu),e}function Ku(){Bl(this,Ku)}function Ju(){var t,e=(nc(t=Object.create(ec.prototype)),ec.call(t),t);return Bl(e,Ju),e}function Qu(t,e){return rc(t,e),ec.call(e),e}function tc(t){var e=Qu(t,Object.create(ec.prototype));return Bl(e,tc),e}function ec(){Bl(this,ec)}function nc(t){return function(t){jl(t,void 0,void 0),Ku.call(t)}(t),ic.call(t),t}function rc(t,e){return Xu(t,e),ic.call(e),e}function ic(){Bl(this,ic)}function oc(){var t,e=(nc(t=Object.create(ac.prototype)),ac.call(t),t);return Bl(e,oc),e}function sc(t){var e=function(t,e){return rc(t,e),ac.call(e),e}(t,Object.create(ac.prototype));return Bl(e,sc),e}function ac(){Bl(this,ac)}function lc(t){var e=function(t,e){return rc(t,e),uc.call(e),e}(t,Object.create(uc.prototype));return Bl(e,lc),e}function uc(){Bl(this,uc)}function cc(t){var e=function(t,e){return rc(t,e),hc.call(e),e}(t,Object.create(hc.prototype));return Bl(e,cc),e}function hc(){Bl(this,hc)}function pc(){var t,e=(nc(t=Object.create(fc.prototype)),fc.call(t),t);return Bl(e,pc),e}function dc(t){var e=function(t,e){return rc(t,e),fc.call(e),e}(t,Object.create(fc.prototype));return Bl(e,dc),e}function fc(){Bl(this,fc)}function _c(t){var e=function(t,e){return rc(t,e),mc.call(e),e}(t,Object.create(mc.prototype));return Bl(e,_c),e}function mc(){Bl(this,mc)}function gc(t){var e=function(t,e){return Qu(t,e),yc.call(e),e}(t,Object.create(yc.prototype));return Bl(e,gc),e}function yc(){Bl(this,yc)}function vc(){var t,e=(nc(t=Object.create(bc.prototype)),bc.call(t),t);return Bl(e,vc),e}function bc(){Bl(this,bc)}function xc(){var t,e=(nc(t=Object.create(wc.prototype)),wc.call(t),t);return Bl(e,xc),e}function wc(){Bl(this,wc)}function Ec(){var t,e=(nc(t=Object.create(Sc.prototype)),Sc.call(t),t);return Bl(e,Ec),e}function Sc(){Bl(this,Sc)}function Cc(t){var e=function(t,e){return rc(t,e),Ic.call(e),e}(t,Object.create(Ic.prototype));return Bl(e,Cc),e}function Ic(){Bl(this,Ic)}function kc(t,e){return function(t,e){return t in e}(t,e)}function Tc(t,e){return function(t,e){return t|e}(t,e)}function Pc(t,e){return function(t,e){return t instanceof e}(t,e)}function Ac(t,e){return function(t,e){return t&e}(t,e)}function Oc(t,e){return ou(t,Wa(e))}function Mc(){}function Lc(){}function Nc(){}function Dc(t){this._this$0_7=t}function Rc(t){up.call(this),this._baseClass=t;var e,n=(null==Dt&&new Jh,Dt);this._descriptor=new ph(mh("kotlinx.serialization.Polymorphic",n,[],(e=new Dc(this),function(t){return e.invoke_94(t),Mo()}),4),this._baseClass)}function zc(t,e,n){var r,i=t.findPolymorphicSerializerOrNull_2(e,n);return null==i?function(t,e){var n=t._get_simpleName__4();cp(null==n?""+t:n,e)}(ja(n),t._get_baseClass__0()):r=i,r}function Fc(t,e,n){var r,i=t.findPolymorphicSerializerOrNull_1(e,n);return null==i?cp(n,t._get_baseClass__0()):r=i,r}function Bc(){}function jc(){}function Vc(){}function Uc(t){var e=function(t,e){return $c.call(e,"An unknown field for index "+t),e}(t,Object.create($c.prototype));return Bl(e,Uc),e}function $c(t){Hc(t,this),Bl(this,$c)}function qc(t){var e=function(t,e){return Gc.call(e,"Field '"+t+"' is required, but it was missing",null),e}(t,Object.create(Gc.prototype));return Bl(e,qc),e}function Gc(t,e){!function(t,e,n){(function(t,e,n){(function(t,e,n){(function(t,e,n){jl(n,t,e),Ku.call(n)})(t,e,n),ic.call(n)})(t,e,n),ec.call(n)})(t,e,n),Wc.call(n)}(t,e,this),Bl(this,Gc)}function Hc(t,e){return Qu(t,e),Wc.call(e),e}function Zc(t){var e=Hc(t,Object.create(Wc.prototype));return Bl(e,Zc),e}function Wc(){Bl(this,Wc)}function Xc(t,e){var n,r=Yc(t,e,!0);return null==r?function(t){throw Zc("Serializer for class '"+t._get_simpleName__4()+"' is not found.\nMark the class as @Serializable or provide the serializer explicitly.\nOn Kotlin/JS explicitly declared serializer should be used for interfaces and enums without @Serializable annotation")}(Zp(e)):n=r,n}function Yc(t,e,n){for(var r=Zp(e),i=e._get_isMarkedNullable__0(),o=e._get_arguments__0(),s=ds(Br(o,10)),a=o.iterator_39();a.hasNext_14();){var l,u=a.next_14();t:do{var c=u._type;if(null==c)throw tc(zl("Star projections in type arguments are not allowed, but had "+e));l=c;break t}while(0);s.add_18(l),Mo()}var h,p=s;if(p.isEmpty_29()){var d=Kc(r);h=null==d?t.getContextual$default(r,null,2,null):d}else h=function(t,e,n,r){var i;if(r){for(var o=ds(Br(e,10)),s=e.iterator_39();s.hasNext_14();){var a=s.next_14();o.add_18(Xc(t,a)),Mo()}i=o}else{for(var l=ds(Br(e,10)),u=e.iterator_39();u.hasNext_14();){var c=Jc(t,u.next_14());if(null==c)return null;l.add_18(c),Mo()}i=l}var h,p=i,d=n;if(d.equals(Fa(_l))||d.equals(Fa(ul))||d.equals(Fa(cl))||d.equals(Fa(ms)))h=new Ip(p.get_29(0));else if(d.equals(Fa(Ms)))h=new Pp(p.get_29(0));else if(d.equals(Fa(pl))||d.equals(Fa(hl))||d.equals(Fa(Zs)))h=new Ap(p.get_29(0));else if(d.equals(Fa(Ts)))h=new Op(p.get_29(0),p.get_29(1));else if(d.equals(Fa(ll))||d.equals(Fa(fl))||d.equals(Fa(Gs)))h=new kp(p.get_29(0),p.get_29(1));else if(d.equals(Fa(al)))h=new $d(p.get_29(0),p.get_29(1));else if(d.equals(Fa(Di)))h=function(t,e){return new Gd(t,e)}(p.get_29(0),p.get_29(1));else if(d.equals(Fa(zi)))h=new Zd(p.get_29(0),p.get_29(1),p.get_29(2));else{if(function(t){return t.equals(za()._get_arrayClass_())}(n)){var f=e.get_29(0)._get_classifier__0(),_=new Cp(null!=f&&Cu(f,na)?f:ql(),p.get_29(0));return Cu(_,Mc)?_:ql()}var m=of(n,Qo(p).slice());h=null==m?function(t,e,n){var r=Kc(e);return null==r?t.getContextual_0(e,n):r}(t,n,p):m}return h}(t,p,r,n);var f,_=h;return null==(f=null==_?null:null!=_&&Cu(_,Mc)?_:ql())?null:function(t,e){return e?function(t){return t._get_descriptor__66()._get_isNullable__17()?Cu(t,Mc)?t:ql():new Up(t)}(t):Cu(t,Mc)?t:ql()}(f,i)}function Kc(t){var e=function(t){var e,n=of(t,[]);if(null==n){var r=ta(t).Companion,i=null==r?null:r.serializer();e=null!=i&&Cu(i,Mc)?i:null}else e=n;return e}(t);return null==e?function(t){var e=Kt.get_17(t);return null==e||Cu(e,Mc)?e:ql()}(t):e}function Jc(t,e){return Yc(t,e,!1)}function Qc(t){return Xc(ue,t)}function th(t){return xd()}function eh(t){return null==Qt&&new wd,Qt}function nh(t){return Sd()}function rh(t){return null==ee&&new Cd,ee}function ih(t){return null==ne&&new Id,ne}function oh(t){return Td()}function sh(t){return null==ie&&new Pd,ie}function ah(t){return null==oe&&new Ad,oe}function lh(t){return Md()}function uh(t){return null==Ft&&new Fp,Ft}function ch(t,e){return new kp(t,e)}function hh(t){return new Ip(t)}function ph(t,e){this._original=t,this._kClass=e,this._serialName=this._original._get_serialName__17()+"<"+this._kClass._get_simpleName__4()+">"}function dh(){}function fh(t){this._$this_elementDescriptors=t,this._elementsLeft=this._$this_elementDescriptors._get_elementsCount__17()}function _h(t){this._$this_elementDescriptors_0=t}function mh(t,n,r,i,o,s){var a;return 0!=(8&o)&&(a=new Eh,i=function(t){return a.invoke_94(t),Mo()}),function(t,n,r,i){if(Qa(t))throw tc(zl("Blank serial names are prohibited"));if(Dl(n,Uh()))throw tc(zl("For StructureKind.CLASS please use 'buildClassSerialDescriptor' instead"));var o=new gh(t);return i(o),new xh(t,n,o._elementNames._get_size__29(),e(r),o)}(t,n,r,i)}function gh(t){this._serialName_0=t,this._isNullable=!1,this._annotations=Tr(),this._elementNames=ps(),this._uniqueNames=Ps(),this._elementDescriptors=ps(),this._elementAnnotations=ps(),this._elementOptionality=ps()}function yh(t){var e=t.__hashCode$delegate;return wu("_hashCode",1,ua,function(t){return yh(t)},null),e._get_value__15()}function vh(t){this._this$0_8=t}function bh(t){this._this$0_9=t}function xh(t,e,n,r,i){var o,a;this._serialName_1=t,this._kind=e,this._elementsCount=n,this._annotations_0=i._annotations,this._serialNames=h(o=i._elementNames,As(Br(o,12))),this._elementNames_0=Qo(i._elementNames),this._elementDescriptors_0=Gp(i._elementDescriptors),this._elementAnnotations_0=Qo(i._elementAnnotations),this._elementOptionality_0=function(t){for(var e=El(t._get_size__29()),n=0,r=t.iterator_39();r.hasNext_14();){var i=r.next_14(),o=n;n=o+1|0,e[o]=i}return e}(i._elementOptionality);for(var l=function(t){return new Fr((e=new s(t),function(){return e.invoke_97()}));var e}(this._elementNames_0),u=ds(Br(l,10)),c=l.iterator_39();c.hasNext_14();){var p=c.next_14();u.add_18(Ri(p._value,p._index)),Mo()}this._name2Index=function(t){if(Cu(t,_l)){var e;switch(t._get_size__29()){case 0:e=$r();break;case 1:e=Ko(Cu(t,ul)?t.get_29(0):t.iterator_39().next_14());break;default:e=Hr(t,qs(t._get_size__29()))}return e}return function(t){var e;switch(t._get_size__29()){case 0:e=$r();break;case 1:default:e=t}return e}(Hr(t,Us()))}(u),this._typeParametersDescriptors=Gp(r),this.__hashCode$delegate=Hl((a=new vh(this),function(){return a.invoke_97()}))}function wh(t,n,r,i,o){var s;return 0!=(4&i)&&(s=new Sh,r=function(t){return s.invoke_94(t),Mo()}),function(t,n,r){if(Qa(t))throw tc(zl("Blank serial names are prohibited"));var i=new gh(t);return r(i),new xh(t,Uh(),i._elementNames._get_size__29(),e(n),i)}(t,n,r)}function Eh(){}function Sh(){}function Ch(){vt=this,Ph.call(this)}function Ih(){return null==vt&&new Ch,vt}function kh(){bt=this,Ph.call(this)}function Th(){return null==bt&&new kh,bt}function Ph(){}function Ah(){xt=this,jh.call(this)}function Oh(){wt=this,jh.call(this)}function Mh(){Et=this,jh.call(this)}function Lh(){St=this,jh.call(this)}function Nh(){Ct=this,jh.call(this)}function Dh(){It=this,jh.call(this)}function Rh(){kt=this,jh.call(this)}function zh(){Tt=this,jh.call(this)}function Fh(){Pt=this,jh.call(this)}function Bh(){return null==Pt&&new Fh,Pt}function jh(){Ph.call(this)}function Vh(){At=this,Xh.call(this)}function Uh(){return null==At&&new Vh,At}function $h(){Ot=this,Xh.call(this)}function qh(){return null==Ot&&new $h,Ot}function Gh(){Mt=this,Xh.call(this)}function Hh(){return null==Mt&&new Gh,Mt}function Zh(){Lt=this,Xh.call(this)}function Wh(){return null==Lt&&new Zh,Lt}function Xh(){Ph.call(this)}function Yh(){Nt=this,Qh.call(this)}function Kh(){return null==Nt&&new Yh,Nt}function Jh(){Dt=this,Qh.call(this)}function Qh(){Ph.call(this)}function tp(){}function ep(){}function np(){}function rp(){Rt=this,this._DECODE_DONE=-1,this._UNKNOWN_NAME=-3}function ip(){return null==Rt&&new rp,Rt}function op(){}function sp(){}function ap(){}function lp(t,e){var n=e.decodeStringElement_9(t._get_descriptor__66(),0),r=Fc(t,e,n),i=t._get_descriptor__66();return e.decodeSerializableElement$default_9(i,1,r,null,8,null)}function up(){}function cp(t,e){var n="in the scope of '"+e._get_simpleName__4()+"'";throw Zc(null==t?"Class discriminator was missing and no default polymorphic serializers were registered "+n:"Class '"+t+"' is not registered for polymorphic serialization "+n+".\nMark the base class as 'sealed' or register the serializer explicitly.")}function hp(){}function pp(t){dp.call(this,t),this._serialName_2=t._get_serialName__17()+"Array"}function dp(t){this._elementDescriptor=t,this._elementsCount_0=1}function fp(t){dp.call(this,t)}function _p(t){dp.call(this,t)}function mp(t,e){gp.call(this,"kotlin.collections.LinkedHashMap",t,e)}function gp(t,e,n){this._serialName_3=t,this._keyDescriptor=e,this._valueDescriptor=n,this._elementsCount_1=2}function yp(t){dp.call(this,t)}function vp(t){dp.call(this,t)}function bp(t,e){gp.call(this,"kotlin.collections.HashMap",t,e)}function xp(t){Ep.call(this,t),this._descriptor_0=new pp(t._get_descriptor__66())}function wp(){}function Ep(t){Sp.call(this),this._elementSerializer=t}function Sp(){}function Cp(t,e){Ep.call(this,e),this._kClass_0=t,this._descriptor_1=new fp(e._get_descriptor__66())}function Ip(t){Ep.call(this,t),this._descriptor_2=new _p(t._get_descriptor__66())}function kp(t,e){Tp.call(this,t,e),this._descriptor_3=new mp(t._get_descriptor__66(),e._get_descriptor__66())}function Tp(t,e){Sp.call(this),this._keySerializer=t,this._valueSerializer=e}function Pp(t){Ep.call(this,t),this._descriptor_4=new yp(t._get_descriptor__66())}function Ap(t){Ep.call(this,t),this._descriptor_5=new vp(t._get_descriptor__66())}function Op(t,e){Tp.call(this,t,e),this._descriptor_6=new bp(t._get_descriptor__66(),e._get_descriptor__66())}function Mp(t,e){this._this$0_10=t,this._$serialName=e}function Lp(t,e){this._values_0=e;var n,r=Ih();this._descriptor_7=mh(t,r,[],(n=new Mp(this,t),function(t){return n.invoke_94(t),Mo()}),4)}function Np(t,e){return new Dp(t,new Rp(e))}function Dp(t,e){ed.call(this,t,e,1),this._isInline=!0}function Rp(t){this._$primitiveSerializer=t}function zp(){zt=this,this._descriptor_8=Np("kotlin.UInt",oh(jo()))}function Fp(){Ft=this,this._descriptor_9=Np("kotlin.ULong",ih(Yl()))}function Bp(){Bt=this,this._descriptor_10=Np("kotlin.UByte",ah(Ro()))}function jp(){jt=this,this._descriptor_11=Np("kotlin.UShort",sh(Fo()))}function Vp(t){return Hp(t)}function Up(t){this._serializer=t,this._descriptor_12=new $p(this._serializer._get_descriptor__66())}function $p(t){this._original_0=t,this._serialName_4=this._original_0._get_serialName__17()+"?",this._serialNames_0=Hp(this._original_0)}function qp(t,e){this._objectInstance=e;var n=Wh();this._descriptor_13=mh(t,n,[],null,12)}function Gp(t){var e,n;return null==(n=null==(e=null==t||t.isEmpty_29()?null:t)?null:Qo(e))?Vt:n}function Hp(t){if(Cu(t,hp))return t._get_serialNames__3();var e=As(t._get_elementsCount__17()),n=0,r=t._get_elementsCount__17();if(n<r)do{var i=n;n=n+1|0;var o=t.getElementName_17(i);e.add_18(o),Mo()}while(n<r);return e}function Zp(t){var e=t._get_classifier__0();if(null==e||!Cu(e,na))throw lc(zl("Only KClass supported as classifier, got "+e));var n=e;return Cu(n,na)?n:ql()}function Wp(t,e){var n=Fl(t._get_serialName__17());n=_u(31,n)+function(t){return function(t){var e=t;if(null==e)return 0;var n=1,r=0,i=e.length;if(r<i)do{var o=r;r=r+1|0,n=_u(n,31)+Rl(e[o])|0}while(r<i);return n}(t)}(e)|0;for(var r=function(t){return new _h(t)}(t),i=1,o=r.iterator_39();o.hasNext_14();){var s=o.next_14(),a=_u(31,i),l=s._get_serialName__17(),u=null==l?null:Rl(l);i=a+(null==u?0:u)|0}for(var c=i,h=1,p=r.iterator_39();p.hasNext_14();){var d=p.next_14(),f=_u(31,h),_=d._get_kind__17(),m=null==_?null:Rl(_);h=f+(null==m?0:m)|0}var g=h;return n=_u(31,n)+c|0,_u(31,n)+g|0}function Xp(t){var e=t._childSerializers$delegate;return wu("childSerializers",1,ua,function(t){return Xp(t)},null),e._get_value__15()}function Yp(t){var e=t.__hashCode$delegate_0;return wu("_hashCode",1,ua,function(t){return Yp(t)},null),e._get_value__15()}function Kp(t){this._this$0_11=t}function Jp(t){this._this$0_12=t}function Qp(t){this._this$0_13=t}function td(t){this._this$0_14=t}function ed(t,e,n){this._serialName_5=t,this._generatedSerializer=e,this._elementsCount_2=n,this._added=-1;for(var r=0,i=this._elementsCount_2,o=xl(Array(i),null);r<i;)o[r]="[UNINITIALIZED]",r=r+1|0;var s;this._names=o,this._propertiesAnnotations=xl(Array(this._elementsCount_2),null),this._classAnnotations=null,this._elementsOptionality=El(this._elementsCount_2),this._indices=$r(),this._childSerializers$delegate=Hl((s=new Kp(this),function(){return s.invoke_97()})),this._typeParameterDescriptors$delegate=Hl(function(t){var e=new Jp(t);return function(){return e.invoke_97()}}(this)),this.__hashCode$delegate_0=Hl(function(t){var e=new Qp(t);return function(){return e.invoke_97()}}(this))}function nd(){}function rd(){}function id(){$t=this,xp.call(this,eh(il()))}function od(){qt=this,xp.call(this,nh(qo()))}function sd(){Gt=this,xp.call(this,rh(Uo()))}function ad(){Ht=this,xp.call(this,ih(Yl()))}function ld(){Zt=this,xp.call(this,oh(jo()))}function ud(){Wt=this,xp.call(this,sh(Fo()))}function cd(){Xt=this,xp.call(this,ah(Ro()))}function hd(){Yt=this,xp.call(this,lh(Wo()))}function pd(t){wp.call(this),this._buffer=t,this._position=t.length,this.ensureCapacity_8(10)}function dd(t){wp.call(this),this._buffer_0=t,this._position_0=t.length,this.ensureCapacity_8(10)}function fd(t){wp.call(this),this._buffer_1=t,this._position_1=t.length,this.ensureCapacity_8(10)}function _d(t){wp.call(this),this._buffer_2=t,this._position_2=t.length,this.ensureCapacity_8(10)}function md(t){wp.call(this),this._buffer_3=t,this._position_3=t.length,this.ensureCapacity_8(10)}function gd(t){wp.call(this),this._buffer_4=t,this._position_4=t.length,this.ensureCapacity_8(10)}function yd(t){wp.call(this),this._buffer_5=t,this._position_5=t.length,this.ensureCapacity_8(10)}function vd(t){wp.call(this),this._buffer_6=t,this._position_6=t.length,this.ensureCapacity_8(10)}function bd(){Jt=this,this._descriptor_14=new Dd("kotlin.String",Bh())}function xd(){return null==Jt&&new bd,Jt}function wd(){Qt=this,this._descriptor_15=new Dd("kotlin.Char",(null==Et&&new Mh,Et))}function Ed(){te=this,this._descriptor_16=new Dd("kotlin.Double",(null==Tt&&new zh,Tt))}function Sd(){return null==te&&new Ed,te}function Cd(){ee=this,this._descriptor_17=new Dd("kotlin.Float",(null==kt&&new Rh,kt))}function Id(){ne=this,this._descriptor_18=new Dd("kotlin.Long",(null==It&&new Dh,It))}function kd(){re=this,this._descriptor_19=new Dd("kotlin.Int",(null==Ct&&new Nh,Ct))}function Td(){return null==re&&new kd,re}function Pd(){ie=this,this._descriptor_20=new Dd("kotlin.Short",(null==St&&new Lh,St))}function Ad(){oe=this,this._descriptor_21=new Dd("kotlin.Byte",(null==wt&&new Oh,wt))}function Od(){se=this,this._descriptor_22=new Dd("kotlin.Boolean",(null==xt&&new Ah,xt))}function Md(){return null==se&&new Od,se}function Ld(){ae=this,this._$$delegate_0=new qp("kotlin.Unit",Mo())}function Nd(t){throw lc("Primitive descriptor does not have elements")}function Dd(t,e){this._serialName_6=t,this._kind_0=e}function Rd(){jd.call(this)}function zd(t,e,n){t.pushTag_0(e);var r=n();return t._flag||(t.popTag_5(),Mo()),t._flag=!1,r}function Fd(t,e,n){this._this$0_15=t,this._$deserializer=e,this._$previousValue=n}function Bd(t,e,n){this._this$0_16=t,this._$deserializer_0=e,this._$previousValue_0=n}function jd(){this._tagStack=ps(),this._flag=!1}function Vd(t,e){this._key_0=t,this._value_1=e}function Ud(t,e){this._$keySerializer=t,this._$valueSerializer=e}function $d(t,e){Wd.call(this,t,e);var n,r=Hh();this._descriptor_23=mh("kotlin.collections.Map.Entry",r,[],(n=new Ud(t,e),function(t){return n.invoke_94(t),Mo()}),4)}function qd(t,e){this._$keySerializer_0=t,this._$valueSerializer_0=e}function Gd(t,e){var n;Wd.call(this,t,e),this._descriptor_24=wh("kotlin.Pair",[],(n=new qd(t,e),function(t){return n.invoke_94(t),Mo()}),2)}function Hd(t){this._this$0_17=t}function Zd(t,e,n){var r;this._aSerializer=t,this._bSerializer=e,this._cSerializer=n,this._descriptor_25=wh("kotlin.Triple",[],(r=new Hd(this),function(t){return r.invoke_94(t),Mo()}),2)}function Wd(t,e){this._keySerializer_0=t,this._valueSerializer_0=e}function Xd(){}function Yd(t,e,n,r){Xd.call(this),this._class2ContextualFactory=t,this._polyBase2Serializers=e,this._polyBase2NamedSerializers=n,this._polyBase2DefaultProvider=r}function Kd(){}function Jd(){}function Qd(){}function tf(t){this._$serializer=t}function ef(){}function nf(){}function rf(t,e){if(!(0<=e&&e<=(t.length-1|0)))throw cc("Index "+e+" out of bounds "+function(t){return new Ao(0,n(t))}(t));return t[e]}function of(t,e){var n;try{var r,i=function(t,e){if(t instanceof ra&&e instanceof ra){var n,r=e._get_jClass__2().$metadata$,i=null==r?null:r.associatedObjectKey;if(null==(n=null==i?null:i))return null;var o=n,s=t._get_jClass__2().$metadata$,a=null==s?null:s.associatedObjects;if(null==a)return null;var l=a[o];return null==l?null:l()}return null}(t,Fa(nf));if(null!=i&&Cu(i,Mc))r=null!=i&&Cu(i,Mc)?i:ql();else if(null!=i&&Cu(i,rd)){var o=i.serializer(e.slice());r=Cu(o,Mc)?o:ql()}else r=function(t){var e=ta(t).$metadata$;return"interface"==(null==e?null:e.kind)}(t)?new Rc(t):null;n=r}catch(t){n=null}return n}function sf(){var t;ce=this,lf.call(this,(t=Object.create(hf.prototype),hf.call(t,!1,!1,!1,!1,!1,"    ",!1,!1,"type",!1,!0),t),ue)}function af(){return null==ce&&new sf,ce}function lf(t,e){af(),this._configuration=t,this._serializersModule=e,this._schemaCache=new X_}function uf(t){this._encodeDefaults=t._configuration._encodeDefaults_0,this._ignoreUnknownKeys=t._configuration._ignoreUnknownKeys_0,this._isLenient=t._configuration._isLenient_0,this._allowStructuredMapKeys=t._configuration._allowStructuredMapKeys_0,this._prettyPrint=t._configuration._prettyPrint_0,this._prettyPrintIndent=t._configuration._prettyPrintIndent_0,this._coerceInputValues=t._configuration._coerceInputValues_0,this._useArrayPolymorphism=t._configuration._useArrayPolymorphism_0,this._classDiscriminator=t._configuration._classDiscriminator_0,this._allowSpecialFloatingPointValues=t._configuration._allowSpecialFloatingPointValues_0,this._useAlternativeNames=t._configuration._useAlternativeNames_0,this._serializersModule_0=t._get_serializersModule__18()}function cf(t,e){lf.call(this,t,e),function(t){if(Dl(t._get_serializersModule__18(),ue))return Mo();var e=new Z_(t._get_configuration__3()._useArrayPolymorphism_0,t._get_configuration__3()._classDiscriminator_0);t._get_serializersModule__18().dumpTo_0(e)}(this)}function hf(t,e,n,r,i,o,s,a,l,u,c){this._encodeDefaults_0=t,this._ignoreUnknownKeys_0=e,this._isLenient_0=n,this._allowStructuredMapKeys_0=r,this._prettyPrint_0=i,this._prettyPrintIndent_0=o,this._coerceInputValues_0=s,this._useArrayPolymorphism_0=a,this._classDiscriminator_0=l,this._allowSpecialFloatingPointValues_0=u,this._useAlternativeNames_0=c}function pf(t){this._baseClass_0=t;var e="JsonContentPolymorphicSerializer<"+this._baseClass_0._get_simpleName__4()+">",n=Kh();this._descriptor_26=mh(e,n,[],null,12)}function df(){}function ff(){he=this}function _f(){null==he&&new ff}function mf(){pe=this}function gf(){}function yf(t){null==pe&&new mf,_f.call(this),this._content=t}function vf(){de=this}function bf(){null==de&&new vf,_f.call(this)}function xf(t){return null==t?Cf():new If(t,!0)}function wf(t){return null==t?Cf():new If(t,!1)}function Ef(t){var e,n=t instanceof yf?t:null;return null==n?kf(t,"JsonObject"):e=n,e}function Sf(){fe=this,bf.call(this),this._content_0="null"}function Cf(){return null==fe&&new Sf,fe}function If(t,e){bf.call(this),this._isString=e,this._content_1=zl(t)}function kf(t,e){throw tc("Element "+ja(t)+" is not a "+e)}function Tf(){_e=this}function Pf(t){null==_e&&new Tf,_f.call(this),this._content_2=t}function Af(t){return function(t){return!!tl(t,"true",!0)||!tl(t,"false",!0)&&null}(t._get_content__1())}function Of(t){return Ya(t._get_content__1())}function Mf(){me=this;var t=Qc(pa(Fa(Ts),[da(pa(za()._get_stringClass_(),[],!1)),da(pa(Fa(_f),[],!1))],!1));this._$$delegate_0_0=(Cu(t,Mc)?t:ql())._get_descriptor__66(),this._serialName_7="kotlinx.serialization.json.JsonObject"}function Lf(){ge=this,this._descriptor_27=(null==me&&new Mf,me)}function Nf(){return null==ge&&new Lf,ge}function Df(){}function Rf(){}function zf(){}function Ff(){}function Bf(){}function jf(){}function Vf(){ye=this;var t,e=Kh();this._descriptor_28=mh("kotlinx.serialization.json.JsonElement",e,[],(t=new jf,function(e){return t.invoke_94(e),Mo()}),4)}function Uf(){return null==ye&&new Vf,ye}function $f(){ve=this;var t=Bh();this._descriptor_29=mh("kotlinx.serialization.json.JsonPrimitive",t,[],null,12)}function qf(){return null==ve&&new $f,ve}function Gf(){be=this;var t=Ih();this._descriptor_30=mh("kotlinx.serialization.json.JsonNull",t,[],null,12)}function Hf(){return null==be&&new Gf,be}function Zf(t){!function(t){if(null==(Cu(t,i_)?t:null))throw lc("This serializer can be used only with Json format.Expected Encoder to be JsonEncoder, got "+ja(t))}(t),Mo()}function Wf(t){e_(t),Mo()}function Xf(t){return new r_(t)}function Yf(){xe=this,this._descriptor_31=function(t,e){if(Qa(t))throw tc(zl("Blank serial names are prohibited"));return function(t,e){return function(t){for(var e=Kt._get_keys__5().iterator_39();e.hasNext_14();){var n=nl(Ul(e.next_14()._get_simpleName__4()));if(tl(t,"kotlin."+n,!0)||tl(t,n,!0))throw tc(fi("\n                The name of serial descriptor should uniquely identify associated serializer.\n                For serial name "+t+" there already exist "+nl(n)+"Serializer.\n                Please refer to SerialDescriptor documentation for additional information.\n            "))}}(t),new Dd(t,e)}(t,e)}("kotlinx.serialization.json.JsonLiteral",Bh())}function Kf(){return null==xe&&new Yf,xe}function Jf(){we=this;var t=Qc(pa(Fa(ul),[da(pa(Fa(_f),[],!1))],!1));this._$$delegate_0_1=(Cu(t,Mc)?t:ql())._get_descriptor__66(),this._serialName_8="kotlinx.serialization.json.JsonArray"}function Qf(){Ee=this,this._descriptor_32=(null==we&&new Jf,we)}function t_(){return null==Ee&&new Qf,Ee}function e_(t){var e=Cu(t,df)?t:null;if(null==e)throw lc("This serializer can be used only with Json format.Expected Decoder to be JsonDecoder, got "+ja(t));return e}function n_(t){var e=t._original$delegate;return wu("original",1,ua,function(t){return n_(t)},null),e._get_value__15()}function r_(t){this._$deferred=t,this._original$delegate=Hl(this._$deferred)}function i_(){}function o_(){}function s_(t,e){this._sb=t,this._json=e,this._level=0,this._writingFirst=!0}function a_(t,e){s_.call(this,t,e)}function l_(t){m_.call(this,t),Bl(this,l_)}function u_(t,e,n){return g_(t,e+"\nJSON input: "+y_(n,t))}function c_(t){m_.call(this,t),Bl(this,c_)}function h_(t,e){return new c_("Unexpected special floating-point value "+t+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'\nCurrent output: "+v_(e,0,1))}function p_(t){return new c_("Value of type '"+t._get_serialName__17()+"' can't be used in JSON as a key in the map. It should have either primitive or enum kind, but its kind is '"+t._get_kind__17()+"'.\nUse 'allowStructuredMapKeys = true' in 'Json {}' builder to convert such maps to [key1, value1, key2, value2,...] arrays.")}function d_(t,e){t.fail$default("Unexpected special floating-point value "+e+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'",0,2,null)}function f_(t,e,n){return g_(-1,function(t,e,n){return"Unexpected special floating-point value "+t+" with key "+e+". By default, non-finite floating point values are prohibited because they do not conform JSON specification. It is possible to deserialize them using 'JsonBuilder.allowSpecialFloatingPointValues = true'\nCurrent output: "+v_(n,0,1)}(t,e,n))}function __(t,e){return g_(-1,"Encountered unknown key '"+t+"'.\nUse 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.\nCurrent input: "+v_(e,0,1))}function m_(t){Hc(t,this),Bl(this,m_)}function g_(t,e){return new l_(t>=0?"Unexpected JSON token at offset "+t+": "+e:e)}function y_(t,e){if(t.length<200)return t;if(-1===e){var n=t.length-60|0;return n<=0?t:"....."+t.substring(n)}var r=e-30|0,i=e+30|0,o=r<=0?"":".....",s=i>=t.length?"":".....",a=y(r,0),l=b(i,t.length);return o+t.substring(a,l)+s}function v_(t,e,n,r){return 0!=(1&n)&&(e=-1),y_(t,e)}function b_(t,e){var n=e;return!(n.equals(new ol(125))||n.equals(new ol(93))||n.equals(new ol(58))||n.equals(new ol(44)))}function x_(t,e){t._currentPosition=t._currentPosition-1|0,Mo(),e.equals(new ol(34))&&"null"===t.consumeStringLenient()&&t.fail("Expected string literal but 'null' literal was found.\nUse 'coerceInputValues = true' in 'Json {}` builder to coerce nulls to default values.",t._currentPosition-4|0),w_(t,O_(e))}function w_(t,e){var n=1===e?"quotation mark '\"'":4===e?"comma ','":5===e?"semicolon ':'":6===e?"start of the object '{'":7===e?"end of the object '}'":8===e?"start of the array '['":9===e?"end of the array ']'":"valid token",r=t._currentPosition===t._source.length||t._currentPosition<=0?"EOF":kl(t._source,t._currentPosition-1|0).toString();t.fail("Expected "+n+", but had '"+r+"' instead",t._currentPosition-1|0)}function E_(t){var e=t._currentPosition;t:for(;e<t._source.length;){var n=kl(t._source,e);if(!(n.equals(new ol(32))||n.equals(new ol(10))||n.equals(new ol(13))||n.equals(new ol(9))))break t;e=e+1|0,Mo()}return t._currentPosition=e,e}function S_(t,e,n){for(var r=n,i=e,o=t._source,s=kl(o,r);!s.equals(new ol(34));)s.equals(new ol(92))?i=r=C_(t,i,r):(r=r+1|0)>=o.length&&t.fail("EOF",r),s=kl(o,r);var a=i===e?o.substring(i,r):function(t,e,n){!function(t,e,n){t._escapedString.append_3(t._source,e,n),Mo()}(t,e,n);var r=t._escapedString.toString();return t._escapedString.setLength(0),r}(t,i,r);return t._currentPosition=r+1|0,a}function C_(t,e,n){return t._escapedString.append_3(t._source,e,n),Mo(),function(t,e){var n=e,r=n;n=r+1|0;var i=kl(t._source,r);if(i.equals(new ol(117)))return function(t,e,n){return(n+4|0)>=e.length&&t.fail$default("Unexpected EOF during unicode escape",0,2,null),t._escapedString.append_1(vu((((k_(t,e,n)<<12)+(k_(t,e,n+1|0)<<8)|0)+(k_(t,e,n+2|0)<<4)|0)+k_(t,e,n+3|0)|0)),Mo(),n+4|0}(t,t._source,n);var o=function(t){return t<117?z_()._ESCAPE_2_CHAR[t]:new ol(0)}(i.toInt_5());return o.equals(new ol(0))&&t.fail$default("Invalid escaped char '"+i+"'",0,2,null),t._escapedString.append_1(o),Mo(),n}(t,n+1|0)}function I_(t){var e=Ul(t._peekedString);return t._peekedString=null,e}function k_(t,e,n){var r,i=kl(e,n);return new ol(48)<=i&&i<=new ol(57)?r=i.toInt_5()-48|0:new ol(97)<=i&&i<=new ol(102)?r=10+(i.toInt_5()-97|0)|0:new ol(65)<=i&&i<=new ol(70)?r=10+(i.toInt_5()-65|0)|0:t.fail$default("Invalid toHexChar char '"+i+"' in unicode escape",0,2,null),r}function T_(t,e){var n=e;n===t._source.length&&t.fail$default("EOF",0,2,null);var r,i=n;switch(n=i+1|0,32|kl(t._source,i).toInt_5()){case 116:P_(t,"rue",n),r=!0;break;case 102:P_(t,"alse",n),r=!1;break;default:var o="Expected valid boolean literal prefix, but had '"+t.consumeStringLenient()+"'";t.fail$default(o,0,2,null)}return r}function P_(t,e,n){(t._source.length-n|0)<e.length&&t.fail$default("Unexpected end of boolean literal",0,2,null);var r=0,i=Pl(e)-1|0;if(r<=i)do{var o=r;r=r+1|0;var s=kl(e,o),a=kl(t._source,n+o|0);if(s.toInt_5()!==(32|a.toInt_5())){var l="Expected valid boolean literal prefix, but had '"+t.consumeStringLenient()+"'";t.fail$default(l,0,2,null)}}while(r<=i);t._currentPosition=n+e.length|0}function A_(t){this._source=t,this._currentPosition=0,this._peekedString=null,this._escapedString=qa()}function O_(t){return t.toInt_5()<126?z_()._CHAR_TO_TOKEN[t.toInt_5()]:0}function M_(t,e,n){n.equals(new ol(117))||(t._ESCAPE_2_CHAR[n.toInt_5()]=vu(e))}function L_(t,e,n){return M_(t,e.toInt_5(),n)}function N_(t,e,n){t._CHAR_TO_TOKEN[e]=n}function D_(t,e,n){return N_(t,e.toInt_5(),n)}function R_(){Se=this,this._ESCAPE_2_CHAR=Sl(117),this._CHAR_TO_TOKEN=new Int8Array(126),function(t){var e=0;if(e<=31)do{var n=e;e=e+1|0,M_(t,n,new ol(117))}while(e<=31);M_(t,8,new ol(98)),M_(t,9,new ol(116)),M_(t,10,new ol(110)),M_(t,12,new ol(102)),M_(t,13,new ol(114)),L_(t,new ol(47),new ol(47)),L_(t,new ol(34),new ol(34)),L_(t,new ol(92),new ol(92))}(this),function(t){var e=0;if(e<=32)do{var n=e;e=e+1|0,N_(t,n,127)}while(e<=32);N_(t,9,3),N_(t,10,3),N_(t,13,3),N_(t,32,3),D_(t,new ol(44),4),D_(t,new ol(58),5),D_(t,new ol(123),6),D_(t,new ol(125),7),D_(t,new ol(91),8),D_(t,new ol(93),9),D_(t,new ol(34),1),D_(t,new ol(92),2)}(this)}function z_(){return null==Se&&new R_,Se}function F_(t,e,n){var r=t.getElementIndex_17(n);if(ip(),-3!==r)return r;if(!e._configuration._useAlternativeNames_0)return r;var i,o,s,a=e._schemaCache.getOrPut(t,Ce,(i=new U_(t),(o=function(){return i.invoke_97()}).callableName=i._get_name__1(),o)).get_17(n);return null==a?(ip(),s=-3):s=a,s}function B_(t,e,n){var r=F_(t,e,n);if(ip(),-3===r)throw Zc(t._get_serialName__17()+" does not contain element with name '"+n+"'");return r}function j_(t){var e=null,n=0,r=t._get_elementsCount__17();if(n<r)do{var i=n;n=n+1|0;for(var o=t.getElementAnnotations_17(i),s=ps(),a=o.iterator_39();a.hasNext_14();){var l=a.next_14();l instanceof o_&&(s.add_18(l),Mo())}var u=m(s),c=null==u?null:u._names_0;if(null==c);else{for(var h=wl(c);h.hasNext_14();){var p=h.next_14();null==e&&(e=zm(t._get_elementsCount__17())),V_(Ul(e),t,p,i)}Mo()}Mo()}while(n<r);var d=e;return null==d?$r():d}function V_(t,e,n,r){if((Cu(t,ll)?t:ql()).containsKey_8(n))throw new m_("The suggested name '"+n+"' for property "+e.getElementName_17(r)+" is already one of the names for property "+e.getElementName_17(Wr(t,n))+" in "+e);t.put_4(n,r),Mo()}function U_(t){this._$boundThis=t}function $_(t,e){var n;return n=t._isLenient_1||!e?t._lexer.consumeStringLenient():t._lexer.consumeString(),e||"null"!==n?new If(n,e):Cf()}function q_(t,e){this._lexer=e,this._isLenient_1=t._isLenient_0}function G_(t,e){if(!(e instanceof up)||t._get_json__9()._configuration._useArrayPolymorphism_0)return e.deserialize_70(t);var n=t.decodeJsonElement_5(),r=e._get_descriptor__66();if(!(n instanceof yf))throw g_(-1,"Expected "+Fa(yf)+" as the serialized body of "+r._get_serialName__17()+", but had "+ja(n));var i,o=n,s=t._get_json__9()._configuration._classDiscriminator_0,a=o.get_16(s),l=null==a?null:function(t){var e,n=t instanceof bf?t:null;return null==n?kf(t,"JsonPrimitive"):e=n,e}(a),u=null==l?null:l._get_content__1(),c=e.findPolymorphicSerializerOrNull_1(t,u);null==c?function(t,e){throw u_(-1,"Polymorphic serializer was not found for "+(null==t?"missing class discriminator ('null')":"class discriminator '"+t+"'"),e.toString())}(u,o):i=c;var h=i;return function(t,e,n,r){return new pm(t,n,e,r._get_descriptor__66()).decodeSerializableValue_18(r)}(t._get_json__9(),s,o,Cu(h,Lc)?h:ql())}function H_(t,e,n){var r=e instanceof up?e:ql(),i=zc(r,t,Tu(n)?n:ql());return function(t,e,n){if(!(t instanceof Bc))return Mo();if(Vp(e._get_descriptor__66()).contains_27(n)){var r=t._get_descriptor__66()._get_serialName__17();throw lc(zl("Sealed class '"+e._get_descriptor__66()._get_serialName__17()+"' cannot be serialized as base class '"+r+"' because it has property name that conflicts with JSON class discriminator '"+n+"'. You can either change class discriminator in JsonConfiguration, rename property with @SerialName annotation or fall back to array polymorphism"))}}(r,i,t._get_json__9()._configuration._classDiscriminator_0),function(t){if(t instanceof Ch)throw lc(zl("Enums cannot be serialized polymorphically with 'type' parameter. You can use 'JsonBuilder.useArrayPolymorphism' instead"));if(t instanceof jh)throw lc(zl("Primitives cannot be serialized polymorphically with 'type' parameter. You can use 'JsonBuilder.useArrayPolymorphism' instead"));if(t instanceof Qh)throw lc(zl("Actual serializer for polymorphic cannot be polymorphic itself"))}(i._get_descriptor__66()._get_kind__17()),i}function Z_(t,e){this._useArrayPolymorphism_1=t,this._discriminator=e}function W_(){}function X_(){this._map_1=zm(1)}function Y_(t,e,n){var r=e.getElementDescriptor_17(n);if(!r._get_isNullable__17()&&!t._lexer_0.tryConsumeNotNull())return!0;if(Dl(r._get_kind__17(),Ih())){var i=t._lexer_0.peekString(t._configuration_0._isLenient_0);if(null==i)return!1;var o=F_(r,t._json_0,i);if(ip(),-3===o)return t._lexer_0.consumeString(),Mo(),!0}return!1}function K_(t,e){return t._configuration_0._ignoreUnknownKeys_0?t._lexer_0.skipElement(t._configuration_0._isLenient_0):t._lexer_0.failOnUnknownKey(e),t._lexer_0.tryConsumeComma()}function J_(t){return t._configuration_0._isLenient_0?t._lexer_0.consumeStringLenient():t._lexer_0.consumeKeyString()}function Q_(t,e,n){tp.call(this),this._json_0=t,this._mode=e,this._lexer_0=n,this._serializersModule_1=this._json_0._get_serializersModule__18(),this._currentIndex=-1,this._configuration_0=this._json_0._configuration}function tm(t,e){tp.call(this),this._lexer_1=t,this._serializersModule_2=e._get_serializersModule__18()}function em(t,e,n,r){ep.call(this),this._composer=t,this._json_1=e,this._mode_0=n,this._modeReuseCache=r,this._serializersModule_3=this._json_1._get_serializersModule__18(),this._configuration_1=this._json_1._configuration,this._forceQuoting=!1,this._writePolymorphic=!1;var i=this._mode_0._get_ordinal__0();null!=this._modeReuseCache&&(null===this._modeReuseCache[i]&&this._modeReuseCache[i]===this||(this._modeReuseCache[i]=this))}function nm(t){return!!t._get_isInline__17()&&Ie.contains_27(t)}function rm(t){var e=15&t;return vu(e<10?e+new ol(48).toInt_5()|0:(e-10|0)+new ol(97).toInt_5()|0)}function im(t,e){t.append_1(new ol(34)),Mo();var n=0,r=0,i=Pl(e)-1|0;if(r<=i)do{var o=r;r=r+1|0;var s=kl(e,o).toInt_5();s<ke.length&&null!=ke[s]&&(t.append_3(e,n,o),Mo(),t.append_5(ke[s]),Mo(),n=o+1|0)}while(r<=i);0!==n?(t.append_3(e,n,e.length),Mo()):(t.append_5(e),Mo()),t.append_1(new ol(34)),Mo()}function om(t){var e=t._get_currentTagOrNull__5(),n=null==e?null:t.currentElement_3(e);return null==n?t._get_value__15():n}function sm(t,e){throw u_(-1,"Failed to parse '"+e+"'",zl(om(t)))}function am(t,e){Rd.call(this),this._json_2=t,this._value_2=e,this._configuration_2=this._get_json__9()._configuration}function lm(t,e,n,r,i,o,s){return 0!=(4&i)&&(n=null),0!=(8&i)&&(r=null),pm.call(s,t,e,n,r),s}function um(t,e,n,r,i,o){return lm(t,e,n,r,i,0,Object.create(pm.prototype))}function cm(t,e,n,r){var i,o=e.getElementDescriptor_17(n);if(t.currentElement_3(r)instanceof Sf&&!o._get_isNullable__17())return!0;if(Dl(o._get_kind__17(),Ih())){var s=t.currentElement_3(r),a=s instanceof bf?s:null,l=null==a||(i=a)instanceof Sf?null:i._get_content__1();if(null==l)return!1;var u=l,c=F_(o,t._get_json__9(),u);if(ip(),-3===c)return!0}return!1}function hm(t){this._$boundThis_0=t}function pm(t,e,n,r){am.call(this,t,e),this._value_3=e,this._polyDiscriminator=n,this._polyDescriptor=r,this._position_7=0}function dm(t,e){am.call(this,t,e),this._value_4=e,this._size_0=this._value_4._get_size__29(),this._currentIndex_0=-1}function fm(t,e){am.call(this,t,e),this._value_5=e,this.pushTag_0("primitive")}function _m(t,e){lm(t,e,null,null,12,0,this),this._value_6=e,this._keys_0=d(this._value_6._get_keys__5()),this._size_1=_u(this._keys_0._get_size__29(),2),this._position_8=-1}function mm(){if(Me)return Mo();Me=!0,Te=new gm("OBJ",0,new ol(123),new ol(125)),Pe=new gm("LIST",1,new ol(91),new ol(93)),Ae=new gm("MAP",2,new ol(123),new ol(125)),Oe=new gm("POLY_OBJ",3,new ol(91),new ol(93))}function gm(t,e,n,r){vl.call(this,t,e),this._begin=n,this._end=r}function ym(t,e){var n,r=e._get_kind__17();if(r instanceof Qh)n=Em();else if(Dl(r,qh()))n=xm();else if(Dl(r,Hh())){var i,o=vm(e.getElementDescriptor_17(0)),s=o._get_kind__17();if(s instanceof jh||Dl(s,Ih()))i=wm();else{if(!t._configuration._allowStructuredMapKeys_0)throw p_(o);i=xm()}n=i}else n=bm();return n}function vm(t){return t._get_isInline__17()?t.getElementDescriptor_17(0):t}function bm(){return mm(),Te}function xm(){return mm(),Pe}function wm(){return mm(),Ae}function Em(){return mm(),Oe}function Sm(t){ep.call(this),this._json_3=t,this._result=null}function Cm(){if(Re)return Mo();Re=!0,Le=new Am("OBJ",0),Ne=new Am("MAP",1),De=new Am("LIST",2)}function Im(t){var e=t._current;if(null!=e)return e;Gl("current")}function km(){ze=this}function Tm(){return null==ze&&new km,ze}function Pm(t,e){this._writeMode=t,this._jsObject=e,this._index_3=0}function Am(t,e){vl.call(this,t,e)}function Om(t,e){var n,r=e;return r.equals(Mm())||r.equals(Lm())?n={}:r.equals(Nm())?n=[]:$l(),n}function Mm(){return Cm(),Le}function Lm(){return Cm(),Ne}function Nm(){return Cm(),De}function Dm(t,e){ep.call(this),this._json_4=t,this._encodeNullAsUndefined=e,this._result_0=Tm(),this._currentName=null,this._currentElementIsMapKey=!1,this._writePolymorphic_0=!1}function Rm(){this._sb_0=Ua()}function zm(t){return ks(t)}function Fm(){Fe=this,this._LOCALIZATION_AR="ar",this._LOCALIZATION_EN="en",this._LOCALIZATION_FI="fi"}function Bm(){return null==Fe&&new Fm,Fe}function jm(){}function Vm(t,e){Bm(),this._guidanceTextGenerator=function(t,e,n){var r,i=n;Bm(),"ar"===i?r='{"lang":"ar","route_ready":"\u0623\u0644\u0645\u064e\u0633\u0627\u0631\u0652 \u062c\u0627\u0647\u0632 \u0645\u064f\u0633\u062a\u0648\u0649 \u0627\u0644\u062f\u064d\u0642\u0629 \u0663 \u0623\u0645\u062a\u0627\u0631 \u062a\u0642\u0631\u064a\u0628\u0627\u064b","update_turn_confirmation":"\u0648\u0627\u0635\u0650\u0644\u0652 \u0627\u0644\u062a\u064e\u0642\u064e\u062f\u064f\u0645 \u0644\u0644\u0623\u0645\u0627\u0645\u0652","update_turn":"\u0628\u0639\u062f {{distance}} {{distanceUnit}} {{direction}}","update_turn_left_hard":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0623\u0642\u0652\u0635\u0649 \u0627\u0644\u064a\u064e\u0633\u0627\u0631\u0652","update_turn_left":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0627\u0644\u064a\u064e\u0633\u0627\u0631\u0652","update_turn_left_slight":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0627\u0644\u064a\u064e\u0633\u0627\u0631\u0652 \u0642\u0644\u064a\u0644\u0627\u064b","update_turn_straight":"\u0648\u0627\u0635\u0650\u0644\u0652 \u0627\u0644\u062a\u064e\u0642\u064e\u062f\u064f\u0645\u0652 \u0625\u0644\u0649 \u0627\u0644\u0623\u0645\u0627\u0645\u0652","update_turn_right_slight":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0627\u0644\u064a\u0645\u064a\u0646 \u0642\u064e\u0644\u064a\u0644\u0627\u064b","update_turn_right":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0627\u0644\u064a\u0645\u064a\u0646","update_turn_right_hard":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0623\u0642\u0635\u0649 \u0627\u0644\u064a\u0645\u064a\u0646","update_turn_around":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0648 \u062a\u064e\u0648\u064e\u062c\u064e\u0647\u0652 \u0641\u064a \u0627\u0644\u0625\u062a\u0650\u062c\u0627\u0647 \u0627\u0644\u0645\u064f\u0639\u0627\u0643\u0650\u0633\u0652","update_waypoint":"you will reach waypoint {{waypointTitle}}, then {{turn}}","update_destination":"\u0633\u064e\u0648\u0641\u064e \u062a\u064e\u0635\u0652\u0644\u0652 \u0625\u0644\u0649 \u0627\u0644\u0645\u0643\u0627\u0646\u0652 \u0627\u0644\u0645\u064e\u0642\u0652\u0635\u0648\u062f\u0652","update_levelchange_elevator":"\u0628\u0639\u062f {{distance}} {{distanceUnit}} \u0625\u0633\u062a\u064e\u062e\u0652\u062f\u0650\u0645\u0652 \u0627\u0644\u0645\u0650\u0635\u0652\u0639\u064e\u062f\u0652 \u0648\u062a\u064e\u0648\u064e\u062c\u064e\u0647 \u0625\u0644\u0649 {{levelTo}}","update_levelchange_escalator":"\u0628\u0639\u062f {{distance}} {{distanceUnit}} \u0625\u0633\u062a\u064e\u062e\u0652\u062f\u0650\u0645\u0652 \u0627\u0644\u0633\u0650\u0644\u064e\u0645\u0652 \u0627\u0644\u0643\u064e\u0647\u0652\u0631\u064f\u0628\u0627\u0626\u064a {{levelDirection}}","update_levelchange_stairs":"\u0628\u0639\u062f {{distance}} {{distanceUnit}} \u0625\u0633\u062a\u064e\u062e\u0652\u062f\u0650\u0645\u0652 \u0627\u0644\u0623\u062f\u0652\u0631\u064e\u0627\u062c\u0652 {{levelDirection}}","immediate_turn_left_hard":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0623\u0642\u0635\u0649 \u0627\u0644\u064a\u064e\u0633\u0627\u0631\u0652","immediate_turn_left":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0627\u0644\u064a\u064e\u0633\u0627\u0631\u0652","immediate_turn_left_slight":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0627\u0644\u064a\u064e\u0633\u0627\u0631\u0652 \u0642\u0644\u064a\u0644\u0627\u064b","immediate_turn_straight":"\u0648\u0627\u0635\u0650\u0644\u0652 \u0627\u0644\u062a\u064e\u0642\u064e\u062f\u064f\u0645\u0652 \u0625\u0644\u0649 \u0627\u0644\u0623\u0645\u0627\u0645\u0652","immediate_turn_right_slight":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0627\u0644\u064a\u0645\u064a\u0646 \u0642\u064e\u0644\u064a\u0644\u0627\u064b","immediate_turn_right":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0627\u0644\u064a\u0645\u064a\u0646","immediate_turn_right_hard":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0625\u0644\u0649 \u0623\u0642\u0635\u0649 \u0627\u0644\u064a\u0645\u064a\u0646","immediate_turn_around":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652 \u0648 \u062a\u064e\u0648\u064e\u062c\u064e\u0647\u0652 \u0641\u064a \u0627\u0644\u0625\u062a\u0650\u062c\u064e\u0627\u0647 \u0627\u0644\u0645\u064f\u0639\u0627\u0643\u0650\u0633\u0652","immediate_waypoint":"You have reached waypoint {{waypointTitle}}. {{turn}}","immediate_levelchange_elevator":"\u0625\u0633\u0652\u062a\u064e\u062e\u0652\u062f\u0650\u0645\u0652 \u0627\u0644\u0645\u0650\u0635\u0652\u0639\u064e\u062f\u0652 {{headingDirection}} \u0625\u0644\u0649 \u0627\u0644\u0637\u0627\u0628\u0650\u0642\u0652 {{levelTo}}","immediate_levelchange_escalator":"\u0625\u0633\u0652\u062a\u064e\u062e\u0652\u062f\u0650\u0645\u0652 \u0627\u0644\u0633\u0650\u0644\u064e\u0645\u0652 \u0627\u0644\u0643\u064e\u0647\u0652\u0631\u064f\u0628\u0627\u0626\u064a {{direction}}","immediate_levelchange_stairs":"\u0625\u0633\u0652\u062a\u064e\u062e\u0652\u062f\u0650\u0645\u0652 \u0627\u0644\u0623\u062f\u0652\u0631\u0627\u062c\u0652 {{direction}} \u0625\u0644\u0649 \u0627\u0644\u0637\u0627\u0628\u0650\u0642\u0652 {{levelTo}}","direction_up":"\u0635\u0639\u0648\u062f\u0627\u064b","direction_down":"\u0646\u064f\u0632\u064f\u0648\u0644\u0627\u064b","immediate_levelchange_side_left":"\u0625\u0644\u0649 \u064a\u0633\u0627\u0631\u0650\u0643\u064e","immediate_levelchange_side_right":"\u0625\u0644\u0649 \u064a\u064e\u0645\u0650\u064a\u0646\u0650\u0643\u064e","immediate_levelchange_side_ahead":"\u0623\u0645\u0627\u0645\u064e\u0643\u0652","next_step_destination":"\u062b\u064f\u0645\u064e \u062a\u064e\u0635\u0650\u0644\u0652 \u0625\u0644\u0649 \u0627\u0644\u0645\u064e\u0643\u0627\u0646\u0652 \u0627\u0644\u0645\u064e\u0642\u0652\u0635\u0648\u062f\u0652 \u0628\u0639\u062f {{distance}} {{distanceUnit}}","next_step_landmarks":"\u062b\u064f\u0645\u064e \u062a\u064e\u0642\u064e\u062f\u064e\u0645\u0652 {{distance}} {{distanceUnit}}{{#hasPassingLandmarks}} \u0628\u0650\u0645\u064f\u062d\u0627\u0630\u0627\u062a\u0652 {{/hasPassingLandmarks}}{{#passingLandmarks}}{{landmark}} {{landmarkPosition}}{{#notLast}}, {{/notLast}}{{/passingLandmarks}}{{#hasTowardsLandmarks}} \u0628\u0650\u0625\u062a\u0650\u062c\u0627\u0647\u0652 {{/hasTowardsLandmarks}}{{#towardsLandmarks}}{{#notFirst}}{{#notLast}}, {{/notLast}}{{#isLast}} \u0648 {{/isLast}}{{/notFirst}}{{landmark}}{{/towardsLandmarks}}","next_step_landmarks_landmark_position_left":"\u0625\u0644\u0649 \u064a\u0633\u0627\u0631\u0650\u0643\u064e","next_step_landmarks_landmark_position_right":"\u0625\u0644\u0649 \u064a\u064e\u0645\u0650\u064a\u0646\u0650\u0643\u064e","next_step_levelchanger_elevator":"\u062b\u064f\u0645\u064e \u0633\u064e\u0648\u0652\u0641\u064e \u062a\u064e\u0635\u0650\u0644\u0652 \u0625\u0644\u0649 \u0645\u0650\u0635\u0652\u0639\u064e\u062f\u0652 \u0628\u064e\u0639\u062f {{distance}} {{distanceUnit}}","next_step_levelchanger_escalator":"\u062b\u064f\u0645\u064e \u0633\u064e\u0648\u0641\u064e \u062a\u064e\u0635\u0650\u0644\u0652 \u0625\u0644\u0649 \u0627\u0644\u062f\u064e\u0631\u064e\u062c\u0652 \u0627\u0644\u0643\u064e\u0647\u0652\u0631\u064f\u0628\u064e\u0627\u0626\u064a \u0628\u064e\u0639\u0652\u062f {{distance}} {{distanceUnit}}","next_step_levelchanger_stairs":"\u062b\u064f\u0645\u064e \u0633\u064e\u0648\u0641\u064e \u062a\u064e\u0635\u0650\u0644\u0652 \u0625\u0644\u0649 \u0627\u0644\u0623\u062f\u0652\u0631\u064e\u0627\u062c\u0650 \u0628\u064e\u0639\u062f\u0652 {{distance}} {{distanceUnit}}","passing_landmark":"\u0623\u0646\u062a\u064e \u062a\u064e\u0645\u064f\u0631\u0652 \u0628\u0650\u062c\u0627\u0646\u0650\u0628\u0652 {{#leftLandmarks}}{{landmark}}{{/leftLandmarks}} {{#hasLeftLandmarks}}\u0625\u0644\u0649 \u064a\u064e\u0633\u064e\u0627\u0631\u0650\u0643\u0652{{#hasRightLandmarks}}, {{/hasRightLandmarks}}{{/hasLeftLandmarks}} {{#rightLandmarks}}{{landmark}}{{/rightLandmarks}} {{#hasRightLandmarks}}\u0625\u0644\u0649 \u064a\u0645\u0650\u064a\u0646\u0650\u0643{{/hasRightLandmarks}}","destination_arriving":"\u0623\u0646\u0652\u062a\u064e \u062a\u064e\u0635\u0650\u0644\u0652 \u0625\u0644\u0649 \u0627\u0644\u0645\u064e\u0643\u0627\u0646\u0652 \u0627\u0644\u0645\u064e\u0642\u0652\u0635\u064f\u0648\u062f\u0652","destination_arrived":"\u0644\u064e\u0642\u064e\u062f\u0652 \u0648\u064e\u0635\u064e\u0644\u0652\u062a\u0652 \u0625\u0644\u0649 {{destination}} \u0628\u0650\u0625\u062a\u0650\u062c\u0627\u0647 \u0627\u0644\u0633\u0627\u0639\u064e\u0629 {{hours}}","state_calculating":"","state_recalculating":"\u064a\u062c\u0631\u064a \u0625\u0639\u0627\u062f\u064e\u0629\u0652 \u0627\u0644\u062d\u0650\u0633\u064e\u0627\u0628\u064f","state_route_not_found":"\u0644\u0627 \u064a\u0648\u062c\u064e\u062f\u0652 \u0645\u064e\u0633\u0627\u0631\u0652","state_route_osrm_error":"Unable to reach calculation server, check connection or try later.","state_canceled":"\u062a\u064e\u0645\u064e \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0645\u064e\u0633\u0627\u0631\u0652","hazard":"\u062a\u064e\u0648\u064e\u0642\u064e\u0649 \u0645\u0650\u0646\u0652 {{title}} {{side}}","hazard_side_left":"\u0625\u0644\u0649 \u064a\u0633\u0627\u0631\u0650\u0643\u064e","hazard_side_right":"\u0625\u0644\u0649 \u064a\u064e\u0645\u0650\u064a\u0646\u0650\u0643\u064e","hazard_side_ahead":"\u0623\u0645\u0627\u0645\u064e\u0643\u064e","decision":"\u0623\u0646\u062a\u064e \u0627\u0644\u0623\u0646\u0652 \u0641\u064a {{title}}","segment_enter":"\u0623\u0646\u062a\u064e \u0627\u0644\u0623\u0646\u0652 \u0641\u064a {{title}}","segment_leave":"\u0644\u064e\u0642\u064e\u062f\u0652 \u062e\u064e\u0631\u064e\u062c\u0652\u062a\u064e \u0645\u0650\u0646\u0652 {{title}}","heading_correction":"\u0635\u064e\u062d\u0650\u062d\u0652 \u0645\u064e\u0633\u0627\u0631\u064e\u0643\u0652 \u0625\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u064e\u0629 {{hours}}","heading_start":"\u0625\u0628\u0652\u062f\u064e\u0621 \u0645\u064e\u0633\u0627\u0631\u064e\u0643\u0652 \u0628\u0627\u0644\u0625\u062a\u0650\u062c\u064e\u0627\u0647 \u0625\u0644\u0649 \u0627\u0644\u0633\u064e\u0627\u0639\u064e\u0629 {{hours}}","heading_wrong_way":"\u0625\u0633\u0652\u062a\u064e\u062f\u0650\u0631\u0652\u060c \u0623\u0646\u0652\u062a\u064e \u062a\u064e\u0645\u0652\u0634\u064a \u0628\u0627\u0644\u0625\u062a\u0650\u062c\u064e\u0627\u0647\u0652 \u0627\u0644\u062e\u064e\u0627\u0637\u0650\u0626","exit_levelchanger_elevator":"{{nextStepDirection}}","exit_levelchanger_escalator":"{{nextStepDirection}}","exit_levelchanger_stairs":" {{nextStepDirection}}","level":{"zero":"\u0637\u0648\u0627\u0628\u0650\u0642\u0652","one":"\u0637\u0627\u0628\u0650\u0642\u0652","two":"\u0637\u0627\u0628\u0650\u0642\u0627\u0646\u0652","few":"\u0637\u064e\u0648\u064e\u0627\u0628\u0650\u0642\u0652","more":"\u0637\u064e\u0648\u064e\u0627\u0628\u0650\u0642\u0652","other":"\u0637\u064e\u0648\u064e\u0627\u0628\u0650\u0642\u0652"},"units":{"meter":{"zero":"\u0645\u0650\u062a\u0652\u0631\u0652","one":"\u0645\u0650\u062a\u0652\u0631\u0652","two":"\u0645\u0650\u062a\u0652\u0631\u064e\u0627\u0646\u0652","few":"\u0623\u0645\u0652\u062a\u064e\u0627\u0631\u0652","more":"\u0645\u0650\u062a\u0652\u0631\u0652","other":"\u0623\u0645\u0652\u062a\u064e\u0627\u0631\u0652"},"meters":{"zero":"\u0645\u0650\u062a\u0652\u0631\u0652","one":"\u0645\u0650\u062a\u0652\u0631\u0652","two":"\u0645\u0650\u062a\u0652\u0631\u064e\u0627\u0646\u0652","few":"\u0623\u0645\u0652\u062a\u064e\u0627\u0631\u0652","more":"\u0645\u0650\u062a\u0652\u0631\u0652","other":"\u0623\u0645\u0652\u062a\u064e\u0627\u0631\u0652"},"steps":{"zero":"\u062e\u0650\u0637\u0652\u0648\u064e\u0629","one":"\u062e\u0650\u0637\u0652\u0648\u064e\u0629","two":"\u062e\u0650\u0637\u0652\u0648\u062a\u064e\u0627\u0646","few":"\u062e\u064e\u0637\u064e\u0648\u064e\u0627\u062a\u0652","more":"\u062e\u0650\u0637\u0652\u0648\u064e\u0629","other":"\u062e\u0650\u0637\u0652\u0648\u064e\u0629"}}}':(Bm(),"en"===i?r='{"lang":"en","route_ready":"Route ready, accuracy around 3 meters.","update_turn_confirmation":"Keep going forward.","update_turn":"In {{distance}} {{distanceUnit}} {{direction}}.","update_turn_left_hard":"turn hard left","update_turn_left":"turn left","update_turn_left_slight":"turn slight left","update_turn_straight":"continue straight","update_turn_right_slight":"turn slight right","update_turn_right":"turn right","update_turn_right_hard":"turn hard right","update_turn_around":"turn around","update_waypoint":"you will reach waypoint {{waypointTitle}}, then {{turn}}","update_destination":"you will arrive at your destination","update_levelchange_elevator":"In {{distance}} {{distanceUnit}} use the elevator to level {{levelTo}}.","update_levelchange_escalator":"In {{distance}} {{distanceUnit}} use the escalator {{levelDirection}}.","update_levelchange_stairs":"In {{distance}} {{distanceUnit}} use the stairs {{levelDirection}}.","immediate_turn_left_hard":"Turn hard left.","immediate_turn_left":"Turn left.","immediate_turn_left_slight":"Turn slight left.","immediate_turn_straight":"Continue straight.","immediate_turn_right_slight":"Turn slight right.","immediate_turn_right":"Turn right.","immediate_turn_right_hard":"Turn hard right.","immediate_turn_around":"Turn around.","immediate_waypoint":"You have reached waypoint {{waypointTitle}}. {{turn}}","immediate_levelchange_elevator":"Use the elevator {{headingDirection}} to level {{levelTo}}.","immediate_levelchange_escalator":"Use the escalator {{headingDirection}}.","immediate_levelchange_stairs":"Use the stairs {{headingDirection}} to level {{levelTo}}.","direction_up":"up","direction_down":"down","immediate_levelchange_side_left":"on your left","immediate_levelchange_side_right":"on your right","immediate_levelchange_side_ahead":"ahead of you","next_step_destination":"Then you will reach your destination in {{distance}} {{distanceUnit}}.","next_step_landmarks":"Then continue {{distance}} {{distanceUnit}}{{#hasPassingLandmarks}} passing {{/hasPassingLandmarks}}{{#passingLandmarks}}{{landmark}} {{landmarkPosition}}{{#notLast}}, {{/notLast}}{{/passingLandmarks}}{{#hasTowardsLandmarks}} towards {{/hasTowardsLandmarks}}{{#towardsLandmarks}}{{#notFirst}}{{#notLast}}, {{/notLast}}{{#isLast}} and {{/isLast}}{{/notFirst}}{{landmark}}{{/towardsLandmarks}}.","next_step_landmarks_landmark_position_left":"on the left","next_step_landmarks_landmark_position_right":"on the right","next_step_levelchanger_elevator":"Then in {{distance}} {{distanceUnit}} you will reach an elevator.","next_step_levelchanger_escalator":"Then in {{distance}} {{distanceUnit}} you will reach an escalator.","next_step_levelchanger_stairs":"Then in {{distance}} {{distanceUnit}} you will reach stairs.","passing_landmark":"You are passing {{#leftLandmarks}}{{landmark}}{{/leftLandmarks}} {{#hasLeftLandmarks}}on your left{{#hasRightLandmarks}}, {{/hasRightLandmarks}}{{/hasLeftLandmarks}} {{#rightLandmarks}}{{landmark}}{{/rightLandmarks}} {{#hasRightLandmarks}}on your right{{/hasRightLandmarks}}.","destination_arriving":"You are arriving at the destination.","destination_arrived":"You arrived at the destination {{destination}} at {{hours}} o\'clock.","state_calculating":"","state_recalculating":"Recalculating.","state_route_not_found":"Route not found.","state_route_osrm_error":"Unable to reach calculation server, check connection or try later.","state_canceled":"Route canceled.","hazard":"Watch out for {{title}} {{side}}.","hazard_side_left":"on your left","hazard_side_right":"on your right","hazard_side_ahead":"ahead of you","decision":"You are at {{title}}.","segment_enter":"You are in {{title}}.","segment_leave":"Exiting {{title}}.","heading_correction":"Correct your heading to {{hours}} o\'clock","heading_start":"Start route at your {{hours}} o\'clock.","heading_wrong_way":"You are walking wrong way. Turn around.","exit_levelchanger_elevator":"{{nextStepDirection}}.","exit_levelchanger_escalator":"{{nextStepDirection}}.","exit_levelchanger_stairs":"{{nextStepDirection}}.","level":{"zero":"levels","one":"level","two":"levels","few":"levels","more":"levels","other":"levels"},"units":{"meter":{"zero":"meters","one":"meter","two":"meters","few":"meters","more":"meters","other":"meters"},"meters":{"zero":"meters","one":"meter","two":"meters","few":"meters","more":"meters","other":"meters"},"steps":{"zero":"step","one":"step","two":"steps","few":"steps","more":"steps","other":"steps"},"kilometers":{"zero":"kilometers","one":"kilometer","two":"kilometers","few":"kilometers","more":"kilometers","other":"kilometers"}}}':(Bm(),r="fi"===i?'{"lang":"fi","route_ready":"Reitti on valmis, tarkkuus noin 3 metri\xe4.","update_turn_confirmation":"Jatka eteenp\xe4in.","update_turn":"kulje {{distance}}  {{distanceUnit}}, sitten {{direction}}.","update_turn_left_hard":"k\xe4\xe4nny jyrk\xe4sti vasempaan","update_turn_left":"k\xe4\xe4nny vasempaan","update_turn_left_slight":"k\xe4\xe4nny loivasti vasempaan","update_turn_straight":"jatka suoraan","update_turn_right_slight":"k\xe4\xe4nny loivasti oikeaan","update_turn_right":"k\xe4\xe4nny oikeaan","update_turn_right_hard":"k\xe4\xe4nny jyrk\xe4sti oikeaan","update_turn_around":"k\xe4\xe4nny ymp\xe4ri","update_waypoint":"saavut v\xe4lietapille {{waypointTitle}}, jonka j\xe4lkeen {{turn}}","update_destination":"saavut kohteeseesi","update_levelchange_elevator":"kulje {{distance}} {{distanceUnit}}, sen j\xe4lkeen siirry hissill\xe4 kerrokseen {{levelTo}}.","update_levelchange_escalator":"kulje {{distance}} {{distanceUnit}}, sen j\xe4lkeen siirry liukuportailla {{levelDirection}}.","update_levelchange_stairs":"kulje viel\xe4 {{distance}} {{distanceUnit}}, sen j\xe4lkeen siirry portailla kerrokseen {{levelDirection}}.","immediate_turn_left_hard":"K\xe4\xe4nny jyrk\xe4sti vasempaan.","immediate_turn_left":"K\xe4\xe4nny vasempaan.","immediate_turn_left_slight":"K\xe4\xe4nny loivasti vasempaan.","immediate_turn_straight":"Jatka suoraan.","immediate_turn_right_slight":"K\xe4\xe4nny loivasti oikeaan.","immediate_turn_right":"K\xe4\xe4nny oikeaan.","immediate_turn_right_hard":"K\xe4\xe4nny jyrk\xe4sti oikeaan.","immediate_turn_around":"K\xe4\xe4nny ymp\xe4ri.","immediate_waypoint":"Olet saapunut v\xe4lietappiin {{waypointTitle}}. {{turn}}","immediate_levelchange_elevator":"K\xe4yt\xe4 hissi\xe4 {{headingDirection}} siirty\xe4ksesi kerrokseen {{levelTo}}.","immediate_levelchange_escalator":"K\xe4yt\xe4 liukuportaita {{headingDirection}}.","immediate_levelchange_stairs":"K\xe4yt\xe4 portaita {{headingDirection}} siirty\xe4ksesi kerrokseen {{levelTo}}.","direction_up":"yl\xf6s","direction_down":"alas","immediate_levelchange_side_left":"vasemmalla","immediate_levelchange_side_right":"oikealla","immediate_levelchange_side_ahead":"edess\xe4si","next_step_destination":"Sen j\xe4lkeen kohteeseesi on {{distance}} {{distanceUnit}}.","next_step_landmarks":"Jonka j\xe4lkeen jatka {{distance}} {{distanceUnit}}{{#hasPassingLandmarks}} ohittaen {{/hasPassingLandmarks}}{{#passingLandmarks}}{{landmark}} {{landmarkPosition}}{{#notLast}}, {{/notLast}}{{/passingLandmarks}}{{#hasTowardsLandmarks}} kohti {{/hasTowardsLandmarks}}{{#towardsLandmarks}}{{#notFirst}}{{#notLast}}, {{/notLast}}{{#isLast}} ja {{/isLast}}{{/notFirst}}{{landmark}}{{/towardsLandmarks}}.","next_step_landmarks_landmark_position_left":"vasemmalla","next_step_landmarks_landmark_position_right":"oikealla","next_step_levelchanger_elevator":"Jonka j\xe4lkeen on {{distance}} {{distanceUnit}} matkaa hissille.","next_step_levelchanger_escalator":"Jonka j\xe4lkeen on {{distance}} {{distanceUnit}} matkaa liukuportaille.","next_step_levelchanger_stairs":"Jonka j\xe4lkeen on {{distance}} {{distanceUnit}} matkaa portaille.","passing_landmark":"Olet ohittamassa {{#leftLandmarks}}{{landmark}}{{/leftLandmarks}} {{#hasLeftLandmarks}}vasemmalla{{#hasRightLandmarks}}, {{/hasRightLandmarks}}{{/hasLeftLandmarks}} {{#rightLandmarks}}{{landmark}}{{/rightLandmarks}} {{#hasRightLandmarks}}oikealla{{/hasRightLandmarks}}.","destination_arriving":"Saavut kohteeseen.","destination_arrived":"Olet saapunut kohteeseen {{destination}} joka on kellonsuunnassa {{hours}}.","state_calculating":"Lasketaan.","state_recalculating":"Lasketaan uudelleen.","state_route_not_found":"Reitti\xe4 ei l\xf6ydetty.","state_route_osrm_error":"Palvelimeen ei saatu yhteytt\xe4, ole hyv\xe4 ja tarkista yhteys, jonka j\xe4lkeen yrit\xe4 uudelleen.","state_canceled":"Reitti peruutettu.","hazard":"Varo {{title}} {{side}}.","hazard_side_left":"vasemmalla","hazard_side_right":"oikealla","hazard_side_ahead":"edess\xe4si","decision":"Olet {{title}}.","segment_enter":"Olet {{title}}.","segment_leave":"Poistutaan {{title}}.","heading_correction":"Korjaa suuntaasi kellon suuntaan {{hours}}","heading_start":"Aloita navigointi kellon suuuntaan {{hours}}","heading_wrong_way":"K\xe4velet v\xe4\xe4r\xe4\xe4n suuntaan, ole hyv\xe4 ja k\xe4\xe4nny ymp\xe4ri","exit_levelchanger_elevator":"{{nextStepDirection}}.","exit_levelchanger_escalator":"{{nextStepDirection}}.","exit_levelchanger_stairs":"{{nextStepDirection}}.","level":{"zero":"kerrosta","one":"kerros","two":"kerrosta","few":"kerrosta","more":"kerrosta","other":"kerrosta"},"units":{"meter":{"zero":"metri\xe4","one":"metri","two":"metri\xe4","few":"metri\xe4","more":"metri\xe4","other":"metri\xe4"},"meters":{"zero":"metri\xe4","one":"metri","two":"metri\xe4","few":"metri\xe4","more":"metri\xe4","other":"metri\xe4"},"steps":{"zero":"askelta","one":"askel","two":"askelta","few":"askelta","more":"askelta","other":"askelta"},"kilometers":{"zero":"kilometri\xe4","one":"kilometri","two":"kilometri\xe4","few":"kilometri\xe4","more":"kilometri\xe4","other":"kilometri\xe4"}}}':'{"lang":"en","route_ready":"Route ready, accuracy around 3 meters.","update_turn_confirmation":"Keep going forward.","update_turn":"In {{distance}} {{distanceUnit}} {{direction}}.","update_turn_left_hard":"turn hard left","update_turn_left":"turn left","update_turn_left_slight":"turn slight left","update_turn_straight":"continue straight","update_turn_right_slight":"turn slight right","update_turn_right":"turn right","update_turn_right_hard":"turn hard right","update_turn_around":"turn around","update_waypoint":"you will reach waypoint {{waypointTitle}}, then {{turn}}","update_destination":"you will arrive at your destination","update_levelchange_elevator":"In {{distance}} {{distanceUnit}} use the elevator to level {{levelTo}}.","update_levelchange_escalator":"In {{distance}} {{distanceUnit}} use the escalator {{levelDirection}}.","update_levelchange_stairs":"In {{distance}} {{distanceUnit}} use the stairs {{levelDirection}}.","immediate_turn_left_hard":"Turn hard left.","immediate_turn_left":"Turn left.","immediate_turn_left_slight":"Turn slight left.","immediate_turn_straight":"Continue straight.","immediate_turn_right_slight":"Turn slight right.","immediate_turn_right":"Turn right.","immediate_turn_right_hard":"Turn hard right.","immediate_turn_around":"Turn around.","immediate_waypoint":"You have reached waypoint {{waypointTitle}}. {{turn}}","immediate_levelchange_elevator":"Use the elevator {{headingDirection}} to level {{levelTo}}.","immediate_levelchange_escalator":"Use the escalator {{headingDirection}}.","immediate_levelchange_stairs":"Use the stairs {{headingDirection}} to level {{levelTo}}.","direction_up":"up","direction_down":"down","immediate_levelchange_side_left":"on your left","immediate_levelchange_side_right":"on your right","immediate_levelchange_side_ahead":"ahead of you","next_step_destination":"Then you will reach your destination in {{distance}} {{distanceUnit}}.","next_step_landmarks":"Then continue {{distance}} {{distanceUnit}}{{#hasPassingLandmarks}} passing {{/hasPassingLandmarks}}{{#passingLandmarks}}{{landmark}} {{landmarkPosition}}{{#notLast}}, {{/notLast}}{{/passingLandmarks}}{{#hasTowardsLandmarks}} towards {{/hasTowardsLandmarks}}{{#towardsLandmarks}}{{#notFirst}}{{#notLast}}, {{/notLast}}{{#isLast}} and {{/isLast}}{{/notFirst}}{{landmark}}{{/towardsLandmarks}}.","next_step_landmarks_landmark_position_left":"on the left","next_step_landmarks_landmark_position_right":"on the right","next_step_levelchanger_elevator":"Then in {{distance}} {{distanceUnit}} you will reach an elevator.","next_step_levelchanger_escalator":"Then in {{distance}} {{distanceUnit}} you will reach an escalator.","next_step_levelchanger_stairs":"Then in {{distance}} {{distanceUnit}} you will reach stairs.","passing_landmark":"You are passing {{#leftLandmarks}}{{landmark}}{{/leftLandmarks}} {{#hasLeftLandmarks}}on your left{{#hasRightLandmarks}}, {{/hasRightLandmarks}}{{/hasLeftLandmarks}} {{#rightLandmarks}}{{landmark}}{{/rightLandmarks}} {{#hasRightLandmarks}}on your right{{/hasRightLandmarks}}.","destination_arriving":"You are arriving at the destination.","destination_arrived":"You arrived at the destination {{destination}} at {{hours}} o\'clock.","state_calculating":"","state_recalculating":"Recalculating.","state_route_not_found":"Route not found.","state_route_osrm_error":"Unable to reach calculation server, check connection or try later.","state_canceled":"Route canceled.","hazard":"Watch out for {{title}} {{side}}.","hazard_side_left":"on your left","hazard_side_right":"on your right","hazard_side_ahead":"ahead of you","decision":"You are at {{title}}.","segment_enter":"You are in {{title}}.","segment_leave":"Exiting {{title}}.","heading_correction":"Correct your heading to {{hours}} o\'clock","heading_start":"Start route at your {{hours}} o\'clock.","heading_wrong_way":"You are walking wrong way. Turn around.","exit_levelchanger_elevator":"{{nextStepDirection}}.","exit_levelchanger_escalator":"{{nextStepDirection}}.","exit_levelchanger_stairs":"{{nextStepDirection}}.","level":{"zero":"levels","one":"level","two":"levels","few":"levels","more":"levels","other":"levels"},"units":{"meter":{"zero":"meters","one":"meter","two":"meters","few":"meters","more":"meters","other":"meters"},"meters":{"zero":"meters","one":"meter","two":"meters","few":"meters","more":"meters","other":"meters"},"steps":{"zero":"step","one":"step","two":"steps","few":"steps","more":"steps","other":"steps"},"kilometers":{"zero":"kilometers","one":"kilometer","two":"kilometers","few":"kilometers","more":"kilometers","other":"kilometers"}}}'));var o,s,a=r,l=af(),u=Xc(l._get_serializersModule__18(),pa(Fa(Gg),[],!1)),c=l.decodeFromString_2(Cu(u,Mc)?u:ql(),a),h=new nv,p=(o=new jm,s=function(t){return o.invoke_98(t),Mo()},function(t,e){var n=new uf(t);return e(n),new cf(n.build_8(),n._serializersModule_0)}(af(),s)),d=Xc(p._get_serializersModule__18(),pa(Fa(ul),[da(pa(Fa(jg),[],!1))],!1)),f=p.decodeFromString_2(Cu(d,Mc)?d:ql(),e);h.updateFeatureList(f);var _=h;return new Pv(new $m,_,new Ov,c)}(0,t,e)}function Um(){}function $m(){this._resources=new Um}function qm(){Be=this}function Gm(t){return t instanceof yf?t:ql()}function Hm(t){return(t instanceof bf?t:ql())._get_content__1()}function Zm(t,e){return t.containsKey_7(e)}function Wm(){je=this}function Xm(){return null==je&&new Wm,je}function Ym(){Ve=this;var t=new ed("com.mapbox.geojson.Feature",this,4);t.addElement_0("type",!0),t.addElement_0("id",!0),t.addElement_0("geometry",!0),t.addElement_0("properties",!0),this._descriptor_33=t}function Km(){return null==Ve&&new Ym,Ve}function Jm(){Xm(),this._type_0="Feature",this._internalId=null,this._internalGeometry=null,this._internalProperties=new yf($r())}function Qm(t){null==t._internalProperties&&(t._internalProperties=new yf($r()));var e=Ul(t._internalProperties).get_16("level"),n=null==e?null:zl(e),r=null==n?null:Ya(n);return null==r?0:r}function tg(t){var e=t._internalProperties,n=null==e?null:e.get_16("fixed"),r=null==n?null:zl(n),i=null==r?null:function(t){return null!=t&&"true"===t.toLowerCase()}(r);return null!=i&&i}function eg(){Ue=this}function ng(){null==Ue&&new eg}function rg(){$e=this,pf.call(this,Fa(ng))}function ig(){return null==$e&&new rg,$e}function og(){qe=this}function sg(){return null==qe&&new og,qe}function ag(){Ge=this;var t=new ed("com.mapbox.geojson.LineString",this,2);t.addElement_0("type",!0),t.addElement_0("coordinates",!0),this._descriptor_34=t}function lg(){return null==Ge&&new ag,Ge}function ug(){sg(),ng.call(this),this._type_1="LineString",this._internalCoordinates=[]}function cg(){He=this}function hg(){Ze=this;var t=new ed("com.mapbox.geojson.MultiLineString",this,2);t.addElement_0("type",!0),t.addElement_0("coordinates",!0),this._descriptor_35=t}function pg(){return null==Ze&&new hg,Ze}function dg(){}function fg(){We=this}function _g(){Xe=this;var t=new ed("com.mapbox.geojson.MultiPolygon",this,2);t.addElement_0("type",!0),t.addElement_0("coordinates",!0),this._descriptor_36=t}function mg(){return null==Xe&&new _g,Xe}function gg(){}function yg(){Ye=this}function vg(){return null==Ye&&new yg,Ye}function bg(){Ke=this;var t=new ed("com.mapbox.geojson.Point",this,2);t.addElement_0("type",!0),t.addElement_0("coordinates",!0),this._descriptor_37=t}function xg(){return null==Ke&&new bg,Ke}function wg(t,e,n,r){return function(t,e,n,r,i){return ng.call(i),i._type_4=0==(1&t)?"Point":e,i._coordinates_0=0==(2&t)?[]:n,i}(t,e,n,0,Object.create(Eg.prototype))}function Eg(){vg(),ng.call(this),this._type_4="Point",this._coordinates_0=[]}function Sg(){Je=this}function Cg(){Qe=this;var t=new ed("com.mapbox.geojson.Polygon",this,2);t.addElement_0("type",!0),t.addElement_0("coordinates",!0),this._descriptor_38=t}function Ig(){return null==Qe&&new Cg,Qe}function kg(){}function Tg(){tn=this,this._UNIT_METERS="meters"}function Pg(){return null==tn&&new Tg,tn}function Ag(){en=this}function Og(){return null==en&&new Ag,en}function Mg(){nn=this}function Lg(t,e){for(var n,r=Us(),i=e._get_entries__5().iterator_39();i.hasNext_14();){var o=i.next_14();t:do{if(null==o._get_value__15()){Mo();break t}var s,a=o._get_value__15();if(null!=a&&Cu(a,ll)){var l=o._get_value__15();s=Lg(t,null!=l&&Cu(l,ll)?l:ql())}else if(null!=a&&"boolean"==typeof a){var u=o._get_value__15();s=null==(n=null!=u&&"boolean"==typeof u?u:ql())?Cf():new If(n,!1)}else if(Pu(a)){var c=o._get_value__15();s=wf(Pu(c)?c:ql())}else if(null!=a&&"string"==typeof a){var h=o._get_value__15();s=xf(null!=h&&"string"==typeof h?h:ql())}else s=null;var p=s;if(null!=p){var d=o._get_key__3();r.put_4(d,p),Mo()}}while(0)}return new yf(r)}function Ng(){}function Dg(t){this._template=t}function Rg(){rn=this}function zg(){this._proximi_quantities=""}function Fg(){on=this,this._plurals=new zg}function Bg(){sn=this;var t=new ed("io.proximi.mapbox.data.model.Feature",this,3);t.addElement_0("id",!0),t.addElement_0("geometry",!0),t.addElement_0("properties",!0),this._descriptor_39=t}function jg(){}function Vg(){an=this;var t=new ed("io.proximi.mapbox.data.model.GuidanceTranslation.QuantityString",this,6);t.addElement_0("zero",!1),t.addElement_0("one",!1),t.addElement_0("two",!1),t.addElement_0("few",!1),t.addElement_0("more",!1),t.addElement_0("other",!1),this._descriptor_40=t}function Ug(){return null==an&&new Vg,an}function $g(){}function qg(){ln=this;var t=new ed("io.proximi.mapbox.data.model.GuidanceTranslation",this,64);t.addElement_0("lang",!1),t.addElement_0("route_ready",!1),t.addElement_0("update_turn",!1),t.addElement_0("update_turn_confirmation",!1),t.addElement_0("update_turn_left_hard",!1),t.addElement_0("update_turn_left",!1),t.addElement_0("update_turn_left_slight",!1),t.addElement_0("update_turn_straight",!1),t.addElement_0("update_turn_right_slight",!1),t.addElement_0("update_turn_right",!1),t.addElement_0("update_turn_right_hard",!1),t.addElement_0("update_turn_around",!1),t.addElement_0("update_waypoint",!1),t.addElement_0("update_destination",!1),t.addElement_0("update_levelchange_elevator",!1),t.addElement_0("update_levelchange_escalator",!1),t.addElement_0("update_levelchange_stairs",!1),t.addElement_0("immediate_turn_left_hard",!1),t.addElement_0("immediate_turn_left",!1),t.addElement_0("immediate_turn_left_slight",!1),t.addElement_0("immediate_turn_straight",!1),t.addElement_0("immediate_turn_right_slight",!1),t.addElement_0("immediate_turn_right",!1),t.addElement_0("immediate_turn_right_hard",!1),t.addElement_0("immediate_turn_around",!1),t.addElement_0("immediate_waypoint",!1),t.addElement_0("immediate_levelchange_elevator",!1),t.addElement_0("immediate_levelchange_escalator",!1),t.addElement_0("immediate_levelchange_stairs",!1),t.addElement_0("direction_up",!1),t.addElement_0("direction_down",!1),t.addElement_0("immediate_levelchange_side_left",!1),t.addElement_0("immediate_levelchange_side_right",!1),t.addElement_0("immediate_levelchange_side_ahead",!1),t.addElement_0("next_step_destination",!1),t.addElement_0("next_step_landmarks",!1),t.addElement_0("next_step_landmarks_landmark_position_left",!1),t.addElement_0("next_step_landmarks_landmark_position_right",!1),t.addElement_0("next_step_levelchanger_elevator",!1),t.addElement_0("next_step_levelchanger_escalator",!1),t.addElement_0("next_step_levelchanger_stairs",!1),t.addElement_0("exit_levelchanger_elevator",!0),t.addElement_0("exit_levelchanger_escalator",!0),t.addElement_0("exit_levelchanger_stairs",!0),t.addElement_0("passing_landmark",!1),t.addElement_0("destination_arriving",!1),t.addElement_0("destination_arrived",!1),t.addElement_0("state_calculating",!1),t.addElement_0("state_recalculating",!1),t.addElement_0("state_route_not_found",!1),t.addElement_0("state_route_osrm_error",!1),t.addElement_0("state_canceled",!1),t.addElement_0("hazard",!1),t.addElement_0("hazard_side_left",!1),t.addElement_0("hazard_side_right",!1),t.addElement_0("hazard_side_ahead",!1),t.addElement_0("decision",!1),t.addElement_0("segment_enter",!1),t.addElement_0("segment_leave",!1),t.addElement_0("heading_correction",!1),t.addElement_0("heading_start",!1),t.addElement_0("heading_wrong_way",!1),t.addElement_0("level",!1),t.addElement_0("units",!1),this._descriptor_41=t}function Gg(){}function Hg(t,e){var n=1,r=0;if(r<e)do{r=r+1|0,n*=10}while(r<e);return function(t){if(t%.5!=0)return Math.round(t);var e=Math.floor(t);return e%2==0?e:Math.ceil(t)}(t*n)/n}function Zg(){if(xn)return Mo();xn=!0,un=new Wg("DECISION_POINT",0),cn=new Wg("DOOR",1),hn=new Wg("ELEVATOR",2),pn=new Wg("ENTRANCE",3),dn=new Wg("ESCALATOR",4),fn=new Wg("HAZARD",5),_n=new Wg("LANDMARK",6),mn=new Wg("OUTDOOR_CONNECTOR",7),new Wg("PATH",8),gn=new Wg("POI",9),new Wg("ROUTABLE_AREA",10),new Wg("SEGMENT",11),yn=new Wg("STAIRCASE",12),vn=new Wg("TICKET_GATE",13),bn=new Wg("OTHER",14)}function Wg(t,e){vl.call(this,t,e)}function Xg(){return Zg(),un}function Yg(){return Zg(),hn}function Kg(){return Zg(),dn}function Jg(){return Zg(),fn}function Qg(){return Zg(),yn}function ty(){wn=this}function ey(){En=this;var t=new ed("io.proximi.mapbox.library.Route.RouteNode",this,10);t.addElement_0("bearingFromLastStep",!1),t.addElement_0("coordinates",!1),t.addElement_0("direction",!1),t.addElement_0("distanceFromLastStep",!1),t.addElement_0("level",!1),t.addElement_0("levelChangerId",!1),t.addElement_0("isWaypoint",!1),t.addElement_0("waypointId",!1),t.addElement_0("lineStringFeatureFromLastStep",!1),t.addElement_0("instruction",!0),this._descriptor_42=t}function ny(){return null==En&&new ey,En}function ry(t,e,n,r,i,o,s,a,l){null==wn&&new ty,this._bearingFromLastNode=t,this._coordinates_2=e,this._direction=n,this._distanceFromLastNode=r,this._level_0=i,this._levelChangerId=o,this._isWaypoint=s,this._waypointId=a,this._lineStringFeatureTo=l,this._instruction=null}function iy(t,e,n){if(0===e)return by();if(e===Pr(n))return Fy();var r=n.get_29(e-1|0)._node,i=n.get_29(e)._node,o=n.get_29(e+1|0)._node,s=Zm(Ul(i.properties()),"type")?Hm(Ul(Ul(i.properties()).get_16("type"))):"";if("elevator"===s&&Qm(i)>Qm(o))return My();if("escalator"===s&&Qm(i)>Qm(o))return Ly();if("staircase"===s&&Qm(i)>Qm(o))return Ny();if("elevator"===s&&Qm(i)<Qm(o))return Py();if("escalator"===s&&Qm(i)<Qm(o))return Ay();if("staircase"===s&&Qm(i)<Qm(o))return Oy();if("elevator"===s&&Qm(r)!==Qm(i))return Dy();if("escalator"===s&&Qm(r)!==Qm(i))return Ry();if("staircase"===s&&Qm(r)!==Qm(i))return zy();var a,l=n.get_29(e)._pathToNode,u=null==l?null:l.geometry(),c=null==u?null:u.coordinates_0(),h=n.get_29(e+1|0)._pathToNode,p=null==h?null:h.geometry(),d=null==p?null:p.coordinates_0(),f=null==c?null:c.get_29(Pr(c)-1|0),_=null==d?null:d.get_29(1),m=Og(),g=f,y=null==g?r.geometry():g,v=i.geometry(),b=m.bearing(y,v),x=Og(),w=i.geometry(),E=_;a=null==E?o.geometry():E;var S=x.bearing(w,a)-b;return S>180?S-=360:S<-180&&(S+=360),Bv(S)}function oy(){Sn=this}function sy(){Cn=this;var t=new ed("io.proximi.mapbox.library.Route",this,7);t.addElement_0("distanceMeters",!1),t.addElement_0("distanceCustom",!0),t.addElement_0("distanceCustomUnit",!0),t.addElement_0("destination",!1),t.addElement_0("configuration",!1),t.addElement_0("lastNodeWithPathIndex",!0),t.addElement_0("steps",!1),this._descriptor_43=t}function ay(){null==Sn&&new oy,this._distanceCustom=null,this._distanceCustomUnit=null,this._lastNodeWithPathIndex=0}function ly(){}function uy(){}function cy(){}function hy(){In=this}function py(){kn=this;var t=new ed("io.proximi.mapbox.library.RouteConfiguration",this,4);t.addElement_0("start",!1),t.addElement_0("destination",!1),t.addElement_0("waypointList",!1),t.addElement_0("wayfindingOptions",!1),this._descriptor_44=t}function dy(){return null==kn&&new py,kn}function fy(t,e,n,r){null==In&&new hy,this._start=t,this._destination_0=e,this._waypointList=n,this._wayfindingOptions=r}function _y(){Zn=this}function my(){return null==Zn&&new _y,Zn}function gy(){return[by(),xy(),wy(),Ey(),Sy(),Cy(),Iy(),ky(),Ty(),Py(),Ay(),Oy(),My(),Ly(),Ny(),Dy(),Ry(),zy(),Fy()]}function yy(){if(Wn)return Mo();Wn=!0,Tn=new vy("START",0),Pn=new vy("TURN_AROUND",1),An=new vy("HARD_LEFT",2),On=new vy("LEFT",3),Mn=new vy("SLIGHT_LEFT",4),Ln=new vy("STRAIGHT",5),Nn=new vy("SLIGHT_RIGHT",6),Dn=new vy("RIGHT",7),Rn=new vy("HARD_RIGHT",8),zn=new vy("UP_ELEVATOR",9),Fn=new vy("UP_ESCALATOR",10),Bn=new vy("UP_STAIRS",11),jn=new vy("DOWN_ELEVATOR",12),Vn=new vy("DOWN_ESCALATOR",13),Un=new vy("DOWN_STAIRS",14),$n=new vy("EXIT_ELEVATOR",15),qn=new vy("EXIT_ESCALATOR",16),Gn=new vy("EXIT_STAIRS",17),Hn=new vy("FINISH",18),my()}function vy(t,e){vl.call(this,t,e)}function by(){return yy(),Tn}function xy(){return yy(),Pn}function wy(){return yy(),An}function Ey(){return yy(),On}function Sy(){return yy(),Mn}function Cy(){return yy(),Ln}function Iy(){return yy(),Nn}function ky(){return yy(),Dn}function Ty(){return yy(),Rn}function Py(){return yy(),zn}function Ay(){return yy(),Fn}function Oy(){return yy(),Bn}function My(){return yy(),jn}function Ly(){return yy(),Vn}function Ny(){return yy(),Un}function Dy(){return yy(),$n}function Ry(){return yy(),qn}function zy(){return yy(),Gn}function Fy(){return yy(),Hn}function By(t,e,n,r,i,o,s,a,l,u){this._nodeIndex=t,this._stepBearing=e,this._stepDirection=n,this._stepDistance=r,this._stepDistanceTotal=i,this._nextStepBearing=o,this._nextStepDistance=s,this._nextStepDirection=a,this._pathLengthRemaining=l,this._position_9=u}function jy(){if(or)return Mo();or=!0,Xn=new Vy("CALCULATING",0),Yn=new Vy("RECALCULATING",1),Kn=new Vy("DIRECTION_SOON",2),Jn=new Vy("DIRECTION_IMMEDIATE",3),Qn=new Vy("DIRECTION_NEW",4),tr=new Vy("DIRECTION_UPDATE",5),er=new Vy("FINISHED",6),nr=new Vy("CANCELED",7),rr=new Vy("ROUTE_NOT_FOUND",8),ir=new Vy("ROUTE_OSRM_NETWORK_ERROR",9)}function Vy(t,e){vl.call(this,t,e)}function Uy(){return jy(),Jn}function $y(){return jy(),Qn}function qy(t,e,n,r){this._unitName=t,this._unitConversionToMeters=e,this._minValueInMeters=n,this._decimals=r}function Gy(t,e,n,r){this._value_7=t,this._valueRounded=e,this._valueString=n,this._unitName_0=r}function Hy(){sr=this,this._DEFAULT=new Wy(Ar([new qy("meters",1,0,0),new qy("kilometers",.001,800,1),new qy("kilometers",.001,2e3,0)]))}function Zy(){return null==sr&&new Hy,sr}function Wy(t){Zy(),this._stageList=t}function Xy(){ar=this}function Yy(){lr=this;var t=new ed("io.proximi.mapbox.library.WayfindingOptions",this,9);t.addElement_0("avoidBarriers",!0),t.addElement_0("avoidElevators",!0),t.addElement_0("avoidEscalators",!0),t.addElement_0("avoidNarrowPaths",!0),t.addElement_0("avoidRamps",!0),t.addElement_0("avoidRevolvingDoors",!0),t.addElement_0("avoidStaircases",!0),t.addElement_0("avoidTicketGates",!0),t.addElement_0("pathFixDistance",!0),this._descriptor_45=t}function Ky(){return null==lr&&new Yy,lr}function Jy(t,e,n,r,i,o,s,a,l){null==ar&&new Xy,this._avoidBarriers=t,this._avoidElevators=e,this._avoidEscalators=n,this._avoidNarrowPaths=r,this._avoidRamps=i,this._avoidRevolvingDoors=o,this._avoidStaircases=s,this._avoidTicketGates=a,this._pathFixDistance=l}function Qy(t,e){if(!(t.geometry()instanceof ug))return qo(),1/0;var n=(null==nn&&new Mg,nn),r=t.geometry(),i=n.nearestPointOnLine(e,(r instanceof ug?r:ql()).coordinates_0()),o=Og(),s=i.geometry(),a=s instanceof Eg?s:ql();return Pg(),o.distance(e,a,"meters")}function tv(t,e){var n=Og();return Pg(),n.distance(t,e,"meters")}function ev(t,e){var n;if(t.getLevel()===e)n=!0;else{var r=t.getLevels();n=!0===(null==r?null:r.contains_27(e))}return n}function nv(){this._exitBufferDistance=4,this._decisionCallback=null,this._hazardCallback=null,this._segmentCallback=null,this._landmarkCallback=null,this._decisionList=Tr(),this._hazardList=Tr(),this._segmentList=Tr(),this._levelChangerList=Tr(),this._landmarkList=Tr(),this._ignoredFeatureIdList=Tr(),this._enteredHazardList=Tr(),this._exitedHazardList=Tr(),this._currentHazardList=Tr(),this._enteredSegmentList=Tr(),this._exitedSegmentList=Tr(),this._currentSegmentList=Tr(),this._currentSegmentLastLocationMap=Cs(),this._enteredDecisionList=Tr(),this._exitedDecisionList=Tr(),this._currentDecisionList=Tr(),this._currentLandmarkList=Tr(),this._enteredLandmarkList=Tr(),this._exitedLandmarkList=Tr()}function rv(){ur=this}function iv(){cr=this;var t=new ed("io.proximi.mapbox.navigation.GuidanceTextGenerator.LevelChangerData",this,9);t.addElement_0("distance",!1),t.addElement_0("distanceUnit",!1),t.addElement_0("headingTo",!1),t.addElement_0("headingDirection",!1),t.addElement_0("levelFrom",!1),t.addElement_0("levelsChanged",!1),t.addElement_0("levelUnitString",!1),t.addElement_0("levelDirection",!1),t.addElement_0("levelTo",!1),this._descriptor_46=t}function ov(){hr=this}function sv(){pr=this;var t=new ed("io.proximi.mapbox.navigation.GuidanceTextGenerator.TurnData",this,3);t.addElement_0("distance",!1),t.addElement_0("distanceUnit",!1),t.addElement_0("direction",!1),this._descriptor_47=t}function av(t,e,n,r){return function(t,e,n,r,i){return 0!=(2&n)&&(e=null),Cv.call(i,t,e),i}(t,e,n,0,Object.create(Cv.prototype))}function lv(t){var e=t._textData;if(null!=e)return e;Gl("textData")}function uv(t,e){var n,r=e._stepDirection;if(r.equals(xy())||r.equals(wy())||r.equals(Ey())||r.equals(Sy())||r.equals(Cy())||r.equals(Iy())||r.equals(ky())||r.equals(Ty())||r.equals(Fy()))n=function(t,e){var n=function(t,e){var n,r=t._conversion.convert(e._stepDistance),i=r._valueString,o=wv(t,r._unitName_0,r._value_7),s=xv(t,e._stepDirection);if(Ul(t._route)._nodeList.get_29(e._nodeIndex)._isWaypoint){var a=t._mustache.compile(lv(t)._updateWaypoint),l=qr([new Di("turn",s)]),u=Ul(t._route)._nodeList.get_29(e._nodeIndex)._waypointId;if(null==u);else{var c=Ul(t._route)._configuration_3.getWaypointById(u),h=null==c?null:c.getTitle();l.put_4("waypointTitle",null==h?"":h)}Mo(),n=a.execute_0(l)}else n=s;return new bv(i,o,n)}(t,e);return function(t,e){var n=af(),r=Xc(n._get_serializersModule__18(),pa(Fa(bv),[],!1)),i=n.encodeToString_2(Cu(r,Mc)?r:ql(),e);return t.execute_1(i)}(t._mustache.compile(lv(t)._updateTurn),n)}(t,e);else{if(!(r.equals(Py())||r.equals(Ay())||r.equals(Oy())||r.equals(My())||r.equals(Ly())||r.equals(Ny())))throw lc(zl("Unsupported step direction."));n=function(t,e){var n,r=t._featureManager.getLevelChangerById(Ul(Ul(t._route)._nodeList.get_29(e._nodeIndex)._levelChangerId)),i=yv(t,r,e),o=e._stepDirection;if(o.equals(Py()))n=vv(t,lv(t)._updateLevelchangeElevator,e);else if(o.equals(My()))n=vv(t,lv(t)._updateLevelchangeElevator,e);else if(o.equals(Ay()))n=vv(t,lv(t)._updateLevelchangeEscalator,e);else if(o.equals(Ly()))n=vv(t,lv(t)._updateLevelchangeEscalator,e);else if(o.equals(Oy()))n=vv(t,lv(t)._updateLevelchangeStairs,e);else{if(!o.equals(Ny()))throw lc(zl("Unsupported direction found."));n=vv(t,lv(t)._updateLevelchangeStairs,e)}return Mv(t._mustache.compile(n),i)}(t,e)}return n}function cv(t,e){var n=t._conversion.convert(e),r=Ur([new Di("distance",n._valueString),new Di("distanceUnit",wv(t,n._unitName_0,n._value_7))]);return t._mustache.compile(lv(t)._nextStepDestination).execute_0(r)}function hv(t,e,n){var r,i=Ul(t._route)._nodeList.get_29(e)._bearingFromLastNode,o=Ul(t._route)._nodeList.get_29(e)._distanceFromLastNode,s=t._conversion.convert(o),a=qr([new Di("distance",s._valueString),new Di("distanceUnit",wv(t,s._unitName_0,s._value_7))]);if(!n.isEmpty_29()){for(var l=ps(),u=ps(),c=ps(),h=n.iterator_39();h.hasNext_14();){var p=h.next_14();ev(p,Ul(t._route)._nodeList.get_29(e)._level_0)&&(c.add_18(p),Mo())}for(var _=c,m=ps(),g=_.iterator_39();g.hasNext_14();){var y,v=g.next_14(),b=v.getRange();if(null!=b&&null!=Ul(t._route)._nodeList.get_29(e)._lineStringFeatureTo){var x=Ul(Ul(t._route)._nodeList.get_29(e)._lineStringFeatureTo),w=v._featureGeometry;y=Qy(x,w instanceof Eg?w:ql())<b}else y=!1;y&&(m.add_18(v),Mo())}for(var E=function(t,e){if(Cu(t,_l)){if(t._get_size__29()<=1)return d(t);var n=Qo(t),r=ku(n)?n:ql();return function(t,e){t.length>1&&gs(t,e)}(r,e),Wu(r)}var i=f(t);return function(t,e){!function(t,e){if(t._get_size__29()<=1)return Mo();var n=Qo(t);gs(n,e);var r=0,i=n.length;if(r<i)do{var o=r;r=r+1|0,t.set_2(o,n[o]),Mo()}while(r<i)}(t,e)}(i,e),i}(m,new Iv((r=new kv(t,e),function(t,e){return r.invoke_100(t,e)}))).iterator_39();E.hasNext_14();){var S=E.next_14();t:do{var C=Ul(S.pointToPointDistance(Ul(t._route)._nodeList.get_29(e-1|0)._coordinates_2)),I=Og(),k=Ul(t._route)._nodeList.get_29(e-1|0)._coordinates_2,T=S._featureGeometry,P=Sv(0,i-I.bearing(k,T instanceof Eg?T:ql()));if(Math.abs(P)>90){Mo();break t}var A=Us(),O=S.getTitle();if(A.put_4("landmark",null==O?"":O),Mo(),Math.abs(P)<20&&C>o)u.add_18(A),Mo();else if(P>0){var M=lv(t)._nextStepLandmarksLandmarkPositionLeft;A.put_4("landmarkPosition",M),Mo(),l.add_18(A),Mo()}else{var L=lv(t)._nextStepLandmarksLandmarkPositionRight;A.put_4("landmarkPosition",L),Mo(),l.add_18(A),Mo()}}while(0)}pv(0,l),pv(0,u),a.put_4("passingLandmarks",l),Mo(),a.put_4("towardsLandmarks",u),Mo();var N=!l.isEmpty_29();a.put_4("hasPassingLandmarks",N),Mo();var D=!u.isEmpty_29();a.put_4("hasTowardsLandmarks",D),Mo()}return t._mustache.compile(lv(t)._nextStepLandmarks).execute(a)}function pv(t,e){for(var n=0,r=e.iterator_39();r.hasNext_14();){var i=r.next_14(),o=n;n=o+1|0;var s=Jo(o);0===s?(i.put_4("isFirst",!0),Mo(),i.put_4("notFirst",!1),Mo()):(i.put_4("isFirst",!1),Mo(),i.put_4("notFirst",!0),Mo()),s===(e._get_size__29()-1|0)?(i.put_4("isLast",!0),Mo(),i.put_4("notLast",!1),Mo()):(i.put_4("isLast",!1),Mo(),i.put_4("notLast",!0),Mo())}}function dv(t,e,n,r){var i;t:do{for(var o=n.iterator_39();o.hasNext_14();){var s=o.next_14();if(s._id==Ul(t._route)._nodeList.get_29(e._nodeIndex-2|0)._levelChangerId){i=s;break t}}throw sc("Collection contains no element matching the predicate.")}while(0);var a,l=i,u=Og(),c=Ul(t._route)._nodeList.get_29(e._nodeIndex-2|0)._coordinates_2,h=l._featureGeometry,p=u.bearing(c,h instanceof Eg?h:ql());t:do{for(var d=n.iterator_39();d.hasNext_14();){var f=d.next_14();if(f._id==Ul(t._route)._nodeList.get_29(e._nodeIndex-1|0)._levelChangerId){a=f;break t}}throw sc("Collection contains no element matching the predicate.")}while(0);var _,m=a,g=Og(),y=m._featureGeometry,v=g.bearing(y instanceof Eg?y:ql(),Ul(t._route)._nodeList.get_29(e._nodeIndex-1|0)._coordinates_2),b=Sv(0,v-p),x=Ul(t._route)._nodeList.get_29(e._nodeIndex-2|0)._direction;if(x.equals(Py())||x.equals(My()))_=lv(t)._exitLevelChangerElevator;else if(x.equals(Ay())||x.equals(Ly()))_=lv(t)._exitLevelChangerEscalator;else{if(!x.equals(Oy())&&!x.equals(Ny()))throw lc(zl("Unsupported direction!"));_=lv(t)._exitLevelChangerStairs}var w,E,S=_,C=r,I=null==C?Lv(Ul(t._route)._nodeList.get_29(e._nodeIndex)._bearingFromLastNode-v):C,k=Ur([new Di("exitHours",(w=b,E=Lv(w),E<-165?6:E<-135?7:E<-105?8:E<-75?9:E<-45?10:E<-15?11:E<15?12:E<45?1:E<75?2:E<105?3:E<135?4:E<165?5:6).toString()),new Di("exitDegreesInt",Ys(b).toString()),new Di("exitDegreesDec",Ev(b)),new Di("nextStepHours",Av(I)),new Di("nextStepDegreesInt",Ys(I).toString()),new Di("nextStepDegreesDec",Ev(I)),new Di("nextStepDirection",xv(t,Bv(I))),new Di("levelchanger",l)]);return t._mustache.compile(S).execute(k)}function fv(t,e,n,r){var i,o=Ul(t._route)._nodeList.get_29(e);t:do{for(var s=r.iterator_39();s.hasNext_14();){var a=s.next_14();if(a._id==o._levelChangerId){i=a;break t}}i=null}while(0);var l,u=i,c=t._conversion.convert(n),h=qr([new Di("distance",c._valueString),new Di("distanceUnit",wv(t,c._unitName_0,c._value_7)),new Di("levelchanger",null==u?null:u.getTitle())]),p=null==u?null:u.getType();if(Dl(p,Yg()))l=lv(t)._nextStepLevelchangerElevator;else if(Dl(p,Kg()))l=lv(t)._nextStepLevelchangerEscalator;else{if(!Dl(p,Qg()))throw lc(zl("Unsupported POI type!"));l=lv(t)._nextStepLevelchangerStairs}return t._mustache.compile(l).execute_0(h)}function _v(t){var e=l(Ul(t._route)._nodeList)._bearingFromLastNode,n=Og().bearing(l(Ul(t._route)._nodeList)._coordinates_2,Ul(t._route)._get_destinationPoint_()),r=tv(l(Ul(t._route)._nodeList)._coordinates_2,Ul(t._route)._get_destinationPoint_())>.5?Lv(n-e):0,i=qr([new Di("destination",Ul(t._route)._get_destinationTitle_()),new Di("degreesInt",Ys(r).toString()),new Di("degreesDec",Ev(r)),new Di("hours",Av(r))]);return t._mustache.escapeHTML(!1).compile(lv(t)._destinationArrived).execute(i)}function mv(t){var e=Ul(Ul(t._route)._get_destinationProperties_());if(!Zm(e,"wayfinding_metadata"))return"";var n,r=Gm(e.get_16("wayfinding_metadata"));return a(t._guidanceTts._destinationMetadataKeys,"",null,null,0,null,(n=new Tv(r,t),function(t){return n.invoke_102(t)}),30)}function gv(t,e,n,r,i,o,s,a,l){null==ur&&new rv,this._distance=t,this._distanceUnit=e,this._headingTo=n,this._headingDirection=r,this._levelFrom=i,this._levelsChanged=o,this._levelUnitString=s,this._levelDirection=a,this._levelTo=l}function yv(t,e,n){var r,i=t._conversion.convert(n._stepDistance),o=i._valueString,s=wv(t,i._unitName_0,i._value_7),a=Ul(t._route)._nodeList.get_29(n._nodeIndex),l=Ul(t._route)._nodeList.get_29(n._nodeIndex+1|0),u=t._levelOverrideMap,c=null==u?null:u.get_17(a._level_0),h=null==c?a._level_0:c,p=t._levelOverrideMap,d=null==p?null:p.get_17(l._level_0),f=null==d?l._level_0:d,_=h<f?lv(t)._directionUp:lv(t)._directionDown,m=(r=h-f|0)<0?0|-r:r,g=lv(t)._levels.getStringForQuantity_0(t._context,m),y=Og(),v=e._featureGeometry,b=Lv(y.bearing(n._position_9,v instanceof Eg?v:ql())-n._stepBearing),x=b<-20?lv(t)._immediateLevelchangeSideLeft:b>20?lv(t)._immediateLevelchangeSideRight:lv(t)._immediateLevelchangeSideAhead;return new gv(o,s,gu(b),x,h,m,g,_,f)}function vv(t,e,n){var r=t._featureManager.getLevelChangerById(Ul(Ul(t._route)._nodeList.get_29(n._nodeIndex)._levelChangerId)),i=yv(t,r,n);return Mv(t._mustache.compile(e),i)}function bv(t,e,n){null==hr&&new ov,this._distance_0=t,this._distanceUnit_0=e,this._direction_0=n}function xv(t,e){var n,r=e;if(r.equals(wy()))n=lv(t)._updateTurnLeftHard;else if(r.equals(Ey()))n=lv(t)._updateTurnLeft;else if(r.equals(Sy()))n=lv(t)._updateTurnLeftSlight;else if(r.equals(Cy()))n=lv(t)._updateTurnStraight;else if(r.equals(Iy()))n=lv(t)._updateTurnRightSlight;else if(r.equals(ky()))n=lv(t)._updateTurnRight;else if(r.equals(Ty()))n=lv(t)._updateTurnRightHard;else if(r.equals(xy()))n=lv(t)._updateTurnAround;else{if(!r.equals(Fy()))throw lc(zl("Unsupported direction."));n=lv(t)._updateDestination}return n}function wv(t,e,n){var r=lv(t)._units.get_17(e);if(null==r)throw lc(zl("No translations found for unit: "+e));return r.getStringForQuantity(t._context,n)}function Ev(t,e){return Hg(t,1).toString()}function Sv(t,e){return e>180?e-360:e<-180?e+360:e}function Cv(t,e){this._updateText=t,this._additionalText=e}function Iv(t){this._function=t}function kv(t,e){this._this$0_18=t,this._$nodeIndex=e}function Tv(t,e){this._$metadata=t,this._this$0_19=e}function Pv(t,e,n,r){this._context=t,this._featureManager=e,this._guidanceTts=n,this._route=null,this._levelChangerMetadataKeys=Tr(),this._conversion=Zy()._DEFAULT,this._levelOverrideMap=null,this._mustache=(null==rn&&new Rg,rn).compiler().escapeHTML(!1),null!=r&&(this._textData=r)}function Av(t){var e=Lv(t);return e<-165?6:e<-135?7:e<-105?8:e<-75?9:e<-45?10:e<-15?11:e<15?12:e<45?1:e<75?2:e<105?3:e<135?4:e<165?5:6}function Ov(){this._destinationMetadataKeys=Tr()}function Mv(t,e){var n=af(),r=Xc(n._get_serializersModule__18(),pa(Fa(gv),[],!1)),i=n.encodeToString_2(Cu(r,Mc)?r:ql(),e);return t.execute_1(i)}function Lv(t){return t>180?t-360:t<-180?t+360:t}function Nv(t,e,n,r,i,o){this._from=t,this._toConnector=e,this._toDestination=n,this._toWaypoint=r,this._campusId=i,this._splits=o,this._wayfindingPath=null,this._osrmPath=null,this._pathWeight=null,this._sumWeight=null,this._bestSplit=null}function Dv(t,e,n,r,i,o){this._node=t,this._pathToNode=e,this._campusId_0=n,this._level_1=r,this._connector=i,this._waypoint=o}function Rv(t,e,n){if(0===e)return null;var r=n.get_29(e-1|0).geometry(),i=n.get_29(e).geometry(),o=sg().fromLngLats(Ar([r,i])),s=Xm().fromGeometry(o);return function(t,e){var n=Us(),r=t._internalProperties,i=null==r?null:r._get_entries__5();if(null==i);else{for(var o=i.iterator_39();o.hasNext_14();){var s=o.next_14(),a=s._get_key__3(),l=s._get_value__15();n.put_4(a,l),Mo()}Mo()}Mo();var u=wf(e);n.put_4("level",u),Mo(),t._internalProperties=new yf(n)}(s,Qm(n.get_29(e))),s}function zv(){dr=this}function Fv(){return null==dr&&new zv,dr}function Bv(t){var e=Lv(t);return Math.abs(e)<22.5?Cy():Math.abs(e)>157.5?xy():e<-112.5?wy():e<=-67.5?Ey():e<=-22.5?Sy():e>157.5?Ty():e>=67.5?ky():e>=22.5?Iy():Cy()}function jv(){fr=this}function Vv(){return null==fr&&new jv,fr}function Uv(){Vv(),this._language="en"}(kr.prototype=Object.create(S.prototype)).constructor=kr,(wr.prototype=Object.create(kr.prototype)).constructor=wr,(li.prototype=Object.create(vl.prototype)).constructor=li,(Eo.prototype=Object.create(wo.prototype)).constructor=Eo,(Ao.prototype=Object.create(Io.prototype)).constructor=Ao,(es.prototype=Object.create(S.prototype)).constructor=es,(rs.prototype=Object.create(ns.prototype)).constructor=rs,(os.prototype=Object.create(es.prototype)).constructor=os,(is.prototype=Object.create(os.prototype)).constructor=is,(hs.prototype=Object.create(es.prototype)).constructor=hs,(ls.prototype=Object.create(hs.prototype)).constructor=ls,(us.prototype=Object.create(hs.prototype)).constructor=us,(cs.prototype=Object.create(Sr.prototype)).constructor=cs,(ms.prototype=Object.create(os.prototype)).constructor=ms,(Es.prototype=Object.create(ls.prototype)).constructor=Es,(Ts.prototype=Object.create(cs.prototype)).constructor=Ts,(Ms.prototype=Object.create(hs.prototype)).constructor=Ms,(js.prototype=Object.create(as.prototype)).constructor=js,(Vs.prototype=Object.create(ls.prototype)).constructor=Vs,(Gs.prototype=Object.create(Ts.prototype)).constructor=Gs,(Zs.prototype=Object.create(Ms.prototype)).constructor=Zs,(ia.prototype=Object.create(ra.prototype)).constructor=ia,(oa.prototype=Object.create(ra.prototype)).constructor=oa,(la.prototype=Object.create(ra.prototype)).constructor=la,(Kl.prototype=Object.create(xo.prototype)).constructor=Kl,(Ku.prototype=Object.create(Error.prototype)).constructor=Ku,(ic.prototype=Object.create(Ku.prototype)).constructor=ic,(ec.prototype=Object.create(ic.prototype)).constructor=ec,(ac.prototype=Object.create(ic.prototype)).constructor=ac,(uc.prototype=Object.create(ic.prototype)).constructor=uc,(hc.prototype=Object.create(ic.prototype)).constructor=hc,(fc.prototype=Object.create(ic.prototype)).constructor=fc,(mc.prototype=Object.create(ic.prototype)).constructor=mc,(yc.prototype=Object.create(ec.prototype)).constructor=yc,(bc.prototype=Object.create(ic.prototype)).constructor=bc,(wc.prototype=Object.create(ic.prototype)).constructor=wc,(Sc.prototype=Object.create(ic.prototype)).constructor=Sc,(Ic.prototype=Object.create(ic.prototype)).constructor=Ic,(Rc.prototype=Object.create(up.prototype)).constructor=Rc,(Bc.prototype=Object.create(up.prototype)).constructor=Bc,(Wc.prototype=Object.create(ec.prototype)).constructor=Wc,($c.prototype=Object.create(Wc.prototype)).constructor=$c,(Gc.prototype=Object.create(Wc.prototype)).constructor=Gc,(Ch.prototype=Object.create(Ph.prototype)).constructor=Ch,(kh.prototype=Object.create(Ph.prototype)).constructor=kh,(jh.prototype=Object.create(Ph.prototype)).constructor=jh,(Ah.prototype=Object.create(jh.prototype)).constructor=Ah,(Oh.prototype=Object.create(jh.prototype)).constructor=Oh,(Mh.prototype=Object.create(jh.prototype)).constructor=Mh,(Lh.prototype=Object.create(jh.prototype)).constructor=Lh,(Nh.prototype=Object.create(jh.prototype)).constructor=Nh,(Dh.prototype=Object.create(jh.prototype)).constructor=Dh,(Rh.prototype=Object.create(jh.prototype)).constructor=Rh,(zh.prototype=Object.create(jh.prototype)).constructor=zh,(Fh.prototype=Object.create(jh.prototype)).constructor=Fh,(Xh.prototype=Object.create(Ph.prototype)).constructor=Xh,(Vh.prototype=Object.create(Xh.prototype)).constructor=Vh,($h.prototype=Object.create(Xh.prototype)).constructor=$h,(Gh.prototype=Object.create(Xh.prototype)).constructor=Gh,(Zh.prototype=Object.create(Xh.prototype)).constructor=Zh,(Qh.prototype=Object.create(Ph.prototype)).constructor=Qh,(Yh.prototype=Object.create(Qh.prototype)).constructor=Yh,(Jh.prototype=Object.create(Qh.prototype)).constructor=Jh,(pp.prototype=Object.create(dp.prototype)).constructor=pp,(fp.prototype=Object.create(dp.prototype)).constructor=fp,(_p.prototype=Object.create(dp.prototype)).constructor=_p,(mp.prototype=Object.create(gp.prototype)).constructor=mp,(yp.prototype=Object.create(dp.prototype)).constructor=yp,(vp.prototype=Object.create(dp.prototype)).constructor=vp,(bp.prototype=Object.create(gp.prototype)).constructor=bp,(Ep.prototype=Object.create(Sp.prototype)).constructor=Ep,(xp.prototype=Object.create(Ep.prototype)).constructor=xp,(Cp.prototype=Object.create(Ep.prototype)).constructor=Cp,(Ip.prototype=Object.create(Ep.prototype)).constructor=Ip,(Tp.prototype=Object.create(Sp.prototype)).constructor=Tp,(kp.prototype=Object.create(Tp.prototype)).constructor=kp,(Pp.prototype=Object.create(Ep.prototype)).constructor=Pp,(Ap.prototype=Object.create(Ep.prototype)).constructor=Ap,(Op.prototype=Object.create(Tp.prototype)).constructor=Op,(Dp.prototype=Object.create(ed.prototype)).constructor=Dp,(id.prototype=Object.create(xp.prototype)).constructor=id,(od.prototype=Object.create(xp.prototype)).constructor=od,(sd.prototype=Object.create(xp.prototype)).constructor=sd,(ad.prototype=Object.create(xp.prototype)).constructor=ad,(ld.prototype=Object.create(xp.prototype)).constructor=ld,(ud.prototype=Object.create(xp.prototype)).constructor=ud,(cd.prototype=Object.create(xp.prototype)).constructor=cd,(hd.prototype=Object.create(xp.prototype)).constructor=hd,(pd.prototype=Object.create(wp.prototype)).constructor=pd,(dd.prototype=Object.create(wp.prototype)).constructor=dd,(fd.prototype=Object.create(wp.prototype)).constructor=fd,(_d.prototype=Object.create(wp.prototype)).constructor=_d,(md.prototype=Object.create(wp.prototype)).constructor=md,(gd.prototype=Object.create(wp.prototype)).constructor=gd,(yd.prototype=Object.create(wp.prototype)).constructor=yd,(vd.prototype=Object.create(wp.prototype)).constructor=vd,(Rd.prototype=Object.create(jd.prototype)).constructor=Rd,($d.prototype=Object.create(Wd.prototype)).constructor=$d,(Gd.prototype=Object.create(Wd.prototype)).constructor=Gd,(Yd.prototype=Object.create(Xd.prototype)).constructor=Yd,(Kd.prototype=Object.create(Qd.prototype)).constructor=Kd,(Jd.prototype=Object.create(Qd.prototype)).constructor=Jd,(sf.prototype=Object.create(lf.prototype)).constructor=sf,(cf.prototype=Object.create(lf.prototype)).constructor=cf,(yf.prototype=Object.create(_f.prototype)).constructor=yf,(bf.prototype=Object.create(_f.prototype)).constructor=bf,(Sf.prototype=Object.create(bf.prototype)).constructor=Sf,(If.prototype=Object.create(bf.prototype)).constructor=If,(Pf.prototype=Object.create(_f.prototype)).constructor=Pf,(a_.prototype=Object.create(s_.prototype)).constructor=a_,(m_.prototype=Object.create(Wc.prototype)).constructor=m_,(l_.prototype=Object.create(m_.prototype)).constructor=l_,(c_.prototype=Object.create(m_.prototype)).constructor=c_,(Q_.prototype=Object.create(tp.prototype)).constructor=Q_,(tm.prototype=Object.create(tp.prototype)).constructor=tm,(em.prototype=Object.create(ep.prototype)).constructor=em,(am.prototype=Object.create(Rd.prototype)).constructor=am,(pm.prototype=Object.create(am.prototype)).constructor=pm,(dm.prototype=Object.create(am.prototype)).constructor=dm,(fm.prototype=Object.create(am.prototype)).constructor=fm,(_m.prototype=Object.create(pm.prototype)).constructor=_m,(gm.prototype=Object.create(vl.prototype)).constructor=gm,(Sm.prototype=Object.create(ep.prototype)).constructor=Sm,(Am.prototype=Object.create(vl.prototype)).constructor=Am,(Dm.prototype=Object.create(ep.prototype)).constructor=Dm,(rg.prototype=Object.create(pf.prototype)).constructor=rg,(ug.prototype=Object.create(ng.prototype)).constructor=ug,(dg.prototype=Object.create(ng.prototype)).constructor=dg,(gg.prototype=Object.create(ng.prototype)).constructor=gg,(Eg.prototype=Object.create(ng.prototype)).constructor=Eg,(kg.prototype=Object.create(ng.prototype)).constructor=kg,(Wg.prototype=Object.create(vl.prototype)).constructor=Wg,(vy.prototype=Object.create(vl.prototype)).constructor=vy,(Vy.prototype=Object.create(vl.prototype)).constructor=Vy,s.prototype.invoke_97=function(){return wl(this._$this_withIndex)},s.$metadata$={kind:"class",interfaces:[]},E.prototype.invoke_0=function(t){return t===this._this$0?"(this Collection)":bl(t)},E.prototype.invoke_103=function(t){return this.invoke_0(null==t||Tu(t)?t:ql())},E.$metadata$={kind:"class",interfaces:[]},S.prototype.contains_27=function(t){var e;t:do{if(Cu(this,_l)&&this.isEmpty_29()){e=!1;break t}for(var n=this.iterator_39();n.hasNext_14();)if(Dl(n.next_14(),t)){e=!0;break t}e=!1}while(0);return e},S.prototype.containsAll_22=function(t){var e;t:do{if(Cu(t,_l)&&t.isEmpty_29()){e=!0;break t}for(var n=t.iterator_39();n.hasNext_14();){var r=n.next_14();if(!this.contains_27(r)){e=!1;break t}}e=!0}while(0);return e},S.prototype.isEmpty_29=function(){return 0===this._get_size__29()},S.prototype.toString=function(){return a(this,", ","[","]",0,null,(t=new E(this),function(e){return t.invoke_0(e)}),24);var t},S.prototype.toArray=function(){return ts(this)},S.$metadata$={simpleName:"AbstractCollection",kind:"class",interfaces:[_l]},C.prototype.checkElementIndex=function(t,e){if(t<0||t>=e)throw cc("index: "+t+", size: "+e)},C.prototype.checkPositionIndex=function(t,e){if(t<0||t>e)throw cc("index: "+t+", size: "+e)},C.prototype.checkRangeIndexes=function(t,e,n){if(t<0||e>n)throw cc("fromIndex: "+t+", toIndex: "+e+", size: "+n);if(t>e)throw tc("fromIndex: "+t+" > toIndex: "+e)},C.prototype.checkBoundsIndexes=function(t,e,n){if(t<0||e>n)throw cc("startIndex: "+t+", endIndex: "+e+", size: "+n);if(t>e)throw tc("startIndex: "+t+" > endIndex: "+e)},C.prototype.orderedHashCode=function(t){for(var e=1,n=t.iterator_39();n.hasNext_14();){var r=n.next_14(),i=_u(31,e),o=null==r?null:Rl(r);e=i+(null==o?0:o)|0}return e},C.prototype.orderedEquals=function(t,e){if(t._get_size__29()!==e._get_size__29())return!1;for(var n=e.iterator_39(),r=t.iterator_39();r.hasNext_14();)if(!Dl(r.next_14(),n.next_14()))return!1;return!0},C.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},gr.prototype.hasNext_14=function(){return this._$entryIterator.hasNext_14()},gr.prototype.next_14=function(){return this._$entryIterator.next_14()._get_key__3()},gr.$metadata$={kind:"class",interfaces:[go]},br.prototype.entryHashCode=function(t){var e=t._get_key__3(),n=null==e?null:Rl(e),r=null==n?0:n,i=t._get_value__15(),o=null==i?null:Rl(i);return r^(null==o?0:o)},br.prototype.entryToString=function(t){return t._get_key__3()+"="+t._get_value__15()},br.prototype.entryEquals=function(t,e){return!(null==e||!Cu(e,al))&&!!Dl(t._get_key__3(),e._get_key__3())&&Dl(t._get_value__15(),e._get_value__15())},br.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},wr.prototype.contains_20=function(t){return this._this$0_0.containsKey_8(t)},wr.prototype.contains_27=function(t){return!(null!=t&&!Tu(t))&&this.contains_20(null==t||Tu(t)?t:ql())},wr.prototype.iterator_39=function(){return new gr(this._this$0_0._get_entries__5().iterator_39())},wr.prototype._get_size__29=function(){return this._this$0_0._get_size__29()},wr.$metadata$={kind:"class",interfaces:[]},Er.prototype.invoke_2=function(t){return this._this$0_1.toString_0(t)},Er.prototype.invoke_103=function(t){return this.invoke_2(null!=t&&Cu(t,al)?t:ql())},Er.$metadata$={kind:"class",interfaces:[]},Sr.prototype.containsKey_8=function(t){return!(null==vr(this,t))},Sr.prototype.containsEntry_5=function(t){if(null==t||!Cu(t,al))return!1;var e=t._get_key__3(),n=t._get_value__15(),r=(Cu(this,ll)?this:ql()).get_17(e);return!(!Dl(n,r)||null==r&&!(Cu(this,ll)?this:ql()).containsKey_8(e))},Sr.prototype.equals=function(t){if(t===this)return!0;if(null==t||!Cu(t,ll))return!1;if(this._get_size__29()!==t._get_size__29())return!1;var e;t:do{var n=t._get_entries__5();if(Cu(n,_l)&&n.isEmpty_29()){e=!0;break t}for(var r=n.iterator_39();r.hasNext_14();){var i=r.next_14();if(!this.containsEntry_5(i)){e=!1;break t}}e=!0}while(0);return e},Sr.prototype.get_17=function(t){var e=vr(this,t);return null==e?null:e._get_value__15()},Sr.prototype.hashCode=function(){return Rl(this._get_entries__5())},Sr.prototype.isEmpty_29=function(){return 0===this._get_size__29()},Sr.prototype._get_size__29=function(){return this._get_entries__5()._get_size__29()},Sr.prototype._get_keys__5=function(){return null==this.__keys&&(this.__keys=new wr(this)),Ul(this.__keys)},Sr.prototype.toString=function(){var t;return a(this._get_entries__5(),", ","{","}",0,null,(t=new Er(this),function(e){return t.invoke_2(e)}),24)},Sr.prototype.toString_0=function(t){return yr(this,t._get_key__3())+"="+yr(this,t._get_value__15())},Sr.$metadata$={simpleName:"AbstractMap",kind:"class",interfaces:[ll]},Cr.prototype.unorderedHashCode=function(t){for(var e=0,n=t.iterator_39();n.hasNext_14();){var r=n.next_14(),i=e,o=null==r?null:Rl(r);e=i+(null==o?0:o)|0}return e},Cr.prototype.setEquals=function(t,e){return t._get_size__29()===e._get_size__29()&&t.containsAll_22(e)},Cr.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},kr.prototype.equals=function(t){return t===this||!(null==t||!Cu(t,pl))&&Ir().setEquals(this,t)},kr.prototype.hashCode=function(){return Ir().unorderedHashCode(this)},kr.$metadata$={simpleName:"AbstractSet",kind:"class",interfaces:[pl]},Or.prototype.equals=function(t){return!(null==t||!Cu(t,ul))&&t.isEmpty_29()},Or.prototype.hashCode=function(){return 1},Or.prototype.toString=function(){return"[]"},Or.prototype._get_size__29=function(){return 0},Or.prototype.isEmpty_29=function(){return!0},Or.prototype.contains_7=function(t){return!1},Or.prototype.contains_27=function(t){return!1},Or.prototype.containsAll_6=function(t){return t.isEmpty_29()},Or.prototype.containsAll_22=function(t){return this.containsAll_6(t)},Or.prototype.get_29=function(t){throw cc("Empty list doesn't contain element at index "+t+".")},Or.prototype.indexOf=function(t){return-1},Or.prototype.indexOf_6=function(t){return-1},Or.prototype.iterator_39=function(){return Nr()},Or.prototype.listIterator_4=function(t){if(0!==t)throw cc("Index: "+t);return Nr()},Or.prototype.subList_4=function(t,e){if(0===t&&0===e)return this;throw cc("fromIndex: "+t+", toIndex: "+e)},Or.$metadata$={simpleName:"EmptyList",kind:"object",interfaces:[ul,Xs,Ws]},Mr.prototype._get_size__29=function(){return this._values.length},Mr.prototype.isEmpty_29=function(){return 0===this._values.length},Mr.prototype.contains_5=function(t){return function(t,e){return r(t,e)>=0}(this._values,t)},Mr.prototype.contains_27=function(t){return!(null!=t&&!Tu(t))&&this.contains_5(null==t||Tu(t)?t:ql())},Mr.prototype.containsAll_4=function(t){var e;t:do{if(Cu(t,_l)&&t.isEmpty_29()){e=!0;break t}for(var n=t.iterator_39();n.hasNext_14();){var r=n.next_14();if(!this.contains_5(r)){e=!1;break t}}e=!0}while(0);return e},Mr.prototype.containsAll_22=function(t){return this.containsAll_4(t)},Mr.prototype.iterator_39=function(){return wl(this._values)},Mr.$metadata$={simpleName:"ArrayAsCollection",kind:"class",interfaces:[_l]},Lr.prototype.hasNext_14=function(){return!1},Lr.prototype.hasPrevious_1=function(){return!1},Lr.prototype.next_14=function(){throw oc()},Lr.prototype.previous_1=function(){throw oc()},Lr.$metadata$={simpleName:"EmptyIterator",kind:"object",interfaces:[yo]},Rr.prototype.toString=function(){return"IndexedValue(index="+this._index+", value="+this._value+")"},Rr.prototype.hashCode=function(){return _u(this._index,31)+(null==this._value?0:Rl(this._value))|0},Rr.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof Rr))return!1;var e=t instanceof Rr?t:ql();return this._index===e._index&&!!Dl(this._value,e._value)},Rr.$metadata$={simpleName:"IndexedValue",kind:"class",interfaces:[]},Fr.prototype.iterator_39=function(){return new jr(this._iteratorFactory())},Fr.$metadata$={simpleName:"IndexingIterable",kind:"class",interfaces:[sl]},jr.prototype.hasNext_14=function(){return this._iterator.hasNext_14()},jr.prototype.next_14=function(){var t=this._index_0;return this._index_0=t+1|0,new Rr(Jo(t),this._iterator.next_14())},jr.$metadata$={simpleName:"IndexingIterator",kind:"class",interfaces:[go]},Vr.$metadata$={simpleName:"MapWithDefault",kind:"interface",interfaces:[ll]},Gr.prototype.equals=function(t){return!(null==t||!Cu(t,ll))&&t.isEmpty_29()},Gr.prototype.hashCode=function(){return 0},Gr.prototype.toString=function(){return"{}"},Gr.prototype._get_size__29=function(){return 0},Gr.prototype.isEmpty_29=function(){return!0},Gr.prototype.containsKey_0=function(t){return!1},Gr.prototype.containsKey_8=function(t){return!(null!=t&&!Tu(t))&&this.containsKey_0(null==t||Tu(t)?t:ql())},Gr.prototype.get_1=function(t){return null},Gr.prototype.get_17=function(t){return null==t||Tu(t)?this.get_1(null==t||Tu(t)?t:ql()):null},Gr.prototype._get_entries__5=function(){return ei()},Gr.prototype._get_keys__5=function(){return ei()},Gr.$metadata$={simpleName:"EmptyMap",kind:"object",interfaces:[ll,Xs]},Kr.$metadata$={simpleName:"Sequence",kind:"interface",interfaces:[]},Jr.prototype.next_14=function(){return this._this$0_2._transformer(this._iterator_0.next_14())},Jr.prototype.hasNext_14=function(){return this._iterator_0.hasNext_14()},Jr.$metadata$={kind:"class",interfaces:[go]},Qr.prototype.iterator_39=function(){return new Jr(this)},Qr.$metadata$={simpleName:"TransformingSequence",kind:"class",interfaces:[Kr]},ti.prototype.equals=function(t){return!(null==t||!Cu(t,pl))&&t.isEmpty_29()},ti.prototype.hashCode=function(){return 0},ti.prototype.toString=function(){return"[]"},ti.prototype._get_size__29=function(){return 0},ti.prototype.isEmpty_29=function(){return!0},ti.prototype.contains_7=function(t){return!1},ti.prototype.contains_27=function(t){return!1},ti.prototype.containsAll_6=function(t){return t.isEmpty_29()},ti.prototype.containsAll_22=function(t){return this.containsAll_6(t)},ti.prototype.iterator_39=function(){return Nr()},ti.$metadata$={simpleName:"EmptySet",kind:"object",interfaces:[pl,Xs]},ri.$metadata$={simpleName:"KClassifier",kind:"interface",interfaces:[]},ii.prototype.invariant=function(t){return new si(ui(),t)},ii.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},si.prototype.toString=function(){var t,e=this._variance;return null==e?t="*":Dl(e,ui())?t=bl(this._type):Dl(e,ci())?t="in "+this._type:Dl(e,hi())?t="out "+this._type:$l(),t},si.prototype.hashCode=function(){return _u(null==this._variance?0:this._variance.hashCode(),31)+(null==this._type?0:Rl(this._type))|0},si.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof si))return!1;var e=t instanceof si?t:ql();return!!Dl(this._variance,e._variance)&&!!Dl(this._type,e._type)},si.$metadata$={simpleName:"KTypeProjection",kind:"class",interfaces:[]},li.$metadata$={simpleName:"KVariance",kind:"class",interfaces:[]},mi.prototype.invoke_6=function(t){return t},mi.prototype.invoke_103=function(t){return this.invoke_6(null!=t&&"string"==typeof t?t:ql())},mi.$metadata$={kind:"class",interfaces:[]},gi.prototype.invoke_6=function(t){return this._$indent+t},gi.prototype.invoke_103=function(t){return this.invoke_6(null!=t&&"string"==typeof t?t:ql())},gi.$metadata$={kind:"class",interfaces:[]},ki.prototype.next_14=function(){if(-1===this._nextState&&Ii(this),0===this._nextState)throw oc();var t=this._nextItem,e=t instanceof Ao?t:ql();return this._nextItem=null,this._nextState=-1,e},ki.prototype.hasNext_14=function(){return-1===this._nextState&&Ii(this),1===this._nextState},ki.$metadata$={kind:"class",interfaces:[go]},Ti.prototype.iterator_39=function(){return new ki(this)},Ti.$metadata$={simpleName:"DelimitedRangesSequence",kind:"class",interfaces:[Kr]},Pi.prototype.invoke_8=function(t){return zl((n=this._$this_splitToSequence,r=(e=t)._get_start_(),i=e._get_endInclusive_()+1|0,Tl(n)?n.substring(r,i):n.subSequence_1(r,i)));var e,n,r,i},Pi.prototype.invoke_103=function(t){return this.invoke_8(t instanceof Ao?t:ql())},Pi.$metadata$={kind:"class",interfaces:[]},Ai.prototype.invoke_10=function(t,e){var n=function(t,e,n,r,i){if(!r&&1===e._get_size__29()){var o,s=function(t){if(Cu(t,ul))return function(t){var e;switch(t._get_size__29()){case 0:throw sc("List is empty.");case 1:e=t.get_29(0);break;default:throw tc("List has more than one element.")}return e}(t);var e=t.iterator_39();if(!e.hasNext_14())throw sc("Collection is empty.");var n=e.next_14();if(e.hasNext_14())throw tc("Collection has more than one element.");return n}(e);return(o=function(t,e,n,r,i,o){return function(t,e,n,r){return"string"!=typeof t?function(t,e,n,r,i,o,s,a){return Si(t,e,n,r,!1,!1)}(t,e,n,Pl(t)):t.indexOf(e,n)}(t,e,n)}(t,s,n))<0?null:Ri(o,s)}var a=xu(y(n,0),Pl(t));if("string"==typeof t){var l=a._first_1,u=a._last,c=a._step_0;if(c>0&&l<=u||c<0&&u<=l)do{var h,p=l;l=l+c|0;t:do{for(var d=e.iterator_39();d.hasNext_14();){var f=d.next_14();if(el(f,0,t,p,f.length,r)){h=f;break t}}h=null}while(0);if(null!=h)return Ri(p,h)}while(p!==u)}else{var _=a._first_1,m=a._last,g=a._step_0;if(g>0&&_<=m||g<0&&m<=_)do{var v,b=_;_=_+g|0;t:do{for(var x=e.iterator_39();x.hasNext_14();){var w=x.next_14();if(Ci(w,0,t,b,w.length,r)){v=w;break t}}v=null}while(0);if(null!=v)return Ri(b,v)}while(b!==m)}return null}(t,this._$delimitersList,e,this._$ignoreCase);return null==n?null:Ri(n._first,n._second.length)},Ai.prototype.invoke_101=function(t,e){var n=null!=t&&Au(t)?t:ql();return this.invoke_10(n,null!=e&&"number"==typeof e?e:ql())},Ai.$metadata$={kind:"class",interfaces:[]},Oi.$metadata$={simpleName:"Lazy",kind:"interface",interfaces:[]},Mi.prototype._get_value__15=function(){this.__value===Ni()&&(this.__value=Ul(this._initializer)(),this._initializer=null);var t=this.__value;return null==t||Tu(t)?t:ql()},Mi.prototype.isInitialized=function(){return!(this.__value===Ni())},Mi.prototype.toString=function(){return this.isInitialized()?bl(this._get_value__15()):"Lazy value not initialized yet."},Mi.$metadata$={simpleName:"UnsafeLazyImpl",kind:"class",interfaces:[Oi,Xs]},Li.$metadata$={simpleName:"UNINITIALIZED_VALUE",kind:"object",interfaces:[]},Di.prototype.toString=function(){return"("+this._first+", "+this._second+")"},Di.prototype.component1=function(){return this._first},Di.prototype.component2=function(){return this._second},Di.prototype.hashCode=function(){return _u(null==this._first?0:Rl(this._first),31)+(null==this._second?0:Rl(this._second))|0},Di.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof Di))return!1;var e=t instanceof Di?t:ql();return!!Dl(this._first,e._first)&&!!Dl(this._second,e._second)},Di.$metadata$={simpleName:"Pair",kind:"class",interfaces:[Xs]},zi.prototype.toString=function(){return"("+this._first_0+", "+this._second_0+", "+this._third+")"},zi.prototype.hashCode=function(){var t=null==this._first_0?0:Rl(this._first_0);return t=_u(t,31)+(null==this._second_0?0:Rl(this._second_0))|0,_u(t,31)+(null==this._third?0:Rl(this._third))|0},zi.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof zi))return!1;var e=t instanceof zi?t:ql();return!!Dl(this._first_0,e._first_0)&&!!Dl(this._second_0,e._second_0)&&!!Dl(this._third,e._third)},zi.$metadata$={simpleName:"Triple",kind:"class",interfaces:[Xs]},Fi.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Ui.prototype.compareTo_0=function(t){return ji(this._data,t)},Ui.prototype.compareTo_14=function(t){return function(t,e){return ji(t._data,e instanceof Ui?e._data:ql())}(this,t)},Ui.prototype.toString=function(){return Vi(this._data)},Ui.prototype.hashCode=function(){return this._data},Ui.prototype.equals=function(t){return function(t,e){return e instanceof Ui&&t===(e instanceof Ui?e._data:ql())}(this._data,t)},Ui.$metadata$={simpleName:"UByte",kind:"class",interfaces:[mo]},$i.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Zi.prototype.compareTo_2=function(t){return Gi(this._data_0,t)},Zi.prototype.compareTo_14=function(t){return function(t,e){return Gi(t._data_0,e instanceof Zi?e._data_0:ql())}(this,t)},Zi.prototype.toString=function(){return Hi(this._data_0)},Zi.prototype.hashCode=function(){return this._data_0},Zi.prototype.equals=function(t){return function(t,e){return e instanceof Zi&&t===(e instanceof Zi?e._data_0:ql())}(this._data_0,t)},Zi.$metadata$={simpleName:"UInt",kind:"class",interfaces:[mo]},Wi.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Ji.prototype.compareTo_4=function(t){return Yi(this._data_1,t)},Ji.prototype.compareTo_14=function(t){return function(t,e){return Yi(t._data_1,e instanceof Ji?e._data_1:ql())}(this,t)},Ji.prototype.toString=function(){return Ki(this._data_1)},Ji.prototype.hashCode=function(){return this._data_1.hashCode()},Ji.prototype.equals=function(t){return function(t,e){if(!(e instanceof Ji))return!1;var n=e instanceof Ji?e._data_1:ql();return!!t.equals(n)}(this._data_1,t)},Ji.$metadata$={simpleName:"ULong",kind:"class",interfaces:[mo]},Qi.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},ro.prototype.compareTo_6=function(t){return eo(this._data_2,t)},ro.prototype.compareTo_14=function(t){return function(t,e){return eo(t._data_2,e instanceof ro?e._data_2:ql())}(this,t)},ro.prototype.toString=function(){return no(this._data_2)},ro.prototype.hashCode=function(){return this._data_2},ro.prototype.equals=function(t){return function(t,e){return e instanceof ro&&t===(e instanceof ro?e._data_2:ql())}(this._data_2,t)},ro.$metadata$={simpleName:"UShort",kind:"class",interfaces:[mo]},fo.$metadata$={simpleName:"Annotation",kind:"interface",interfaces:[]},_o.$metadata$={simpleName:"CharSequence",kind:"interface",interfaces:[]},mo.$metadata$={simpleName:"Comparable",kind:"interface",interfaces:[]},go.$metadata$={simpleName:"Iterator",kind:"interface",interfaces:[]},yo.$metadata$={simpleName:"ListIterator",kind:"interface",interfaces:[go]},vo.$metadata$={simpleName:"MutableListIterator",kind:"interface",interfaces:[yo,bo]},bo.$metadata$={simpleName:"MutableIterator",kind:"interface",interfaces:[go]},xo.$metadata$={simpleName:"Number",kind:"class",interfaces:[]},wo.prototype.next_14=function(){return this.nextInt_0()},wo.$metadata$={simpleName:"IntIterator",kind:"class",interfaces:[go]},Eo.prototype.hasNext_14=function(){return this._hasNext},Eo.prototype.nextInt_0=function(){var t=this._next;if(t===this._finalElement){if(!this._hasNext)throw oc();this._hasNext=!1}else this._next=this._next+this._step|0;return t},Eo.$metadata$={simpleName:"IntProgressionIterator",kind:"class",interfaces:[]},So.prototype.fromClosedRange=function(t,e,n){return new Io(t,e,n)},So.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Io.prototype._get_first__0=function(){return this._first_1},Io.prototype._get_last__2=function(){return this._last},Io.prototype.iterator_39=function(){return new Eo(this._first_1,this._last,this._step_0)},Io.prototype.isEmpty_29=function(){return this._step_0>0?this._first_1>this._last:this._first_1<this._last},Io.prototype.equals=function(t){return t instanceof Io&&(!(!this.isEmpty_29()||!t.isEmpty_29())||this._first_1===t._first_1&&this._last===t._last&&this._step_0===t._step_0)},Io.prototype.hashCode=function(){return this.isEmpty_29()?-1:_u(31,_u(31,this._first_1)+this._last|0)+this._step_0|0},Io.prototype.toString=function(){return this._step_0>0?this._first_1+".."+this._last+" step "+this._step_0:this._first_1+" downTo "+this._last+" step "+(0|-this._step_0)},Io.$metadata$={simpleName:"IntProgression",kind:"class",interfaces:[sl]},ko.$metadata$={simpleName:"ClosedRange",kind:"interface",interfaces:[]},To.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Ao.prototype._get_start_=function(){return this._get_first__0()},Ao.prototype._get_endInclusive_=function(){return this._get_last__2()},Ao.prototype.isEmpty_29=function(){return this._get_first__0()>this._get_last__2()},Ao.prototype.equals=function(t){return t instanceof Ao&&(!(!this.isEmpty_29()||!t.isEmpty_29())||this._get_first__0()===t._get_first__0()&&this._get_last__2()===t._get_last__2())},Ao.prototype.hashCode=function(){return this.isEmpty_29()?-1:_u(31,this._get_first__0())+this._get_last__2()|0},Ao.prototype.toString=function(){return this._get_first__0()+".."+this._get_last__2()},Ao.$metadata$={simpleName:"IntRange",kind:"class",interfaces:[ko]},Oo.prototype.toString=function(){return"kotlin.Unit"},Oo.$metadata$={simpleName:"Unit",kind:"object",interfaces:[]},Do.prototype._get_MIN_VALUE__3=function(){return this._MIN_VALUE_3},Do.prototype._get_MAX_VALUE__3=function(){return this._MAX_VALUE_3},Do.prototype._get_SIZE_BYTES__3=function(){return this._SIZE_BYTES_3},Do.prototype._get_SIZE_BITS__3=function(){return this._SIZE_BITS_3},Do.$metadata$={simpleName:"ByteCompanionObject",kind:"object",interfaces:[]},Object.defineProperty(Do.prototype,"MIN_VALUE",{configurable:!0,get:Do.prototype._get_MIN_VALUE__3}),Object.defineProperty(Do.prototype,"MAX_VALUE",{configurable:!0,get:Do.prototype._get_MAX_VALUE__3}),Object.defineProperty(Do.prototype,"SIZE_BYTES",{configurable:!0,get:Do.prototype._get_SIZE_BYTES__3}),Object.defineProperty(Do.prototype,"SIZE_BITS",{configurable:!0,get:Do.prototype._get_SIZE_BITS__3}),zo.prototype._get_MIN_VALUE__3=function(){return this._MIN_VALUE_4},zo.prototype._get_MAX_VALUE__3=function(){return this._MAX_VALUE_4},zo.prototype._get_SIZE_BYTES__3=function(){return this._SIZE_BYTES_4},zo.prototype._get_SIZE_BITS__3=function(){return this._SIZE_BITS_4},zo.$metadata$={simpleName:"ShortCompanionObject",kind:"object",interfaces:[]},Object.defineProperty(zo.prototype,"MIN_VALUE",{configurable:!0,get:zo.prototype._get_MIN_VALUE__3}),Object.defineProperty(zo.prototype,"MAX_VALUE",{configurable:!0,get:zo.prototype._get_MAX_VALUE__3}),Object.defineProperty(zo.prototype,"SIZE_BYTES",{configurable:!0,get:zo.prototype._get_SIZE_BYTES__3}),Object.defineProperty(zo.prototype,"SIZE_BITS",{configurable:!0,get:zo.prototype._get_SIZE_BITS__3}),Bo.prototype._get_MIN_VALUE__3=function(){return this._MIN_VALUE_5},Bo.prototype._get_MAX_VALUE__3=function(){return this._MAX_VALUE_5},Bo.prototype._get_SIZE_BYTES__3=function(){return this._SIZE_BYTES_5},Bo.prototype._get_SIZE_BITS__3=function(){return this._SIZE_BITS_5},Bo.$metadata$={simpleName:"IntCompanionObject",kind:"object",interfaces:[]},Object.defineProperty(Bo.prototype,"MIN_VALUE",{configurable:!0,get:Bo.prototype._get_MIN_VALUE__3}),Object.defineProperty(Bo.prototype,"MAX_VALUE",{configurable:!0,get:Bo.prototype._get_MAX_VALUE__3}),Object.defineProperty(Bo.prototype,"SIZE_BYTES",{configurable:!0,get:Bo.prototype._get_SIZE_BYTES__3}),Object.defineProperty(Bo.prototype,"SIZE_BITS",{configurable:!0,get:Bo.prototype._get_SIZE_BITS__3}),Vo.prototype._get_MIN_VALUE__3=function(){return this._MIN_VALUE_6},Vo.prototype._get_MAX_VALUE__3=function(){return this._MAX_VALUE_6},Vo.prototype._get_POSITIVE_INFINITY__0=function(){return this._POSITIVE_INFINITY},Vo.prototype._get_NEGATIVE_INFINITY__0=function(){return this._NEGATIVE_INFINITY},Vo.prototype._get_NaN__0=function(){return this._NaN},Vo.prototype._get_SIZE_BYTES__3=function(){return this._SIZE_BYTES_6},Vo.prototype._get_SIZE_BITS__3=function(){return this._SIZE_BITS_6},Vo.$metadata$={simpleName:"FloatCompanionObject",kind:"object",interfaces:[]},Object.defineProperty(Vo.prototype,"MIN_VALUE",{configurable:!0,get:Vo.prototype._get_MIN_VALUE__3}),Object.defineProperty(Vo.prototype,"MAX_VALUE",{configurable:!0,get:Vo.prototype._get_MAX_VALUE__3}),Object.defineProperty(Vo.prototype,"POSITIVE_INFINITY",{configurable:!0,get:Vo.prototype._get_POSITIVE_INFINITY__0}),Object.defineProperty(Vo.prototype,"NEGATIVE_INFINITY",{configurable:!0,get:Vo.prototype._get_NEGATIVE_INFINITY__0}),Object.defineProperty(Vo.prototype,"NaN",{configurable:!0,get:Vo.prototype._get_NaN__0}),Object.defineProperty(Vo.prototype,"SIZE_BYTES",{configurable:!0,get:Vo.prototype._get_SIZE_BYTES__3}),Object.defineProperty(Vo.prototype,"SIZE_BITS",{configurable:!0,get:Vo.prototype._get_SIZE_BITS__3}),$o.prototype._get_MIN_VALUE__3=function(){return this._MIN_VALUE_7},$o.prototype._get_MAX_VALUE__3=function(){return this._MAX_VALUE_7},$o.prototype._get_POSITIVE_INFINITY__0=function(){return this._POSITIVE_INFINITY_0},$o.prototype._get_NEGATIVE_INFINITY__0=function(){return this._NEGATIVE_INFINITY_0},$o.prototype._get_NaN__0=function(){return this._NaN_0},$o.prototype._get_SIZE_BYTES__3=function(){return this._SIZE_BYTES_7},$o.prototype._get_SIZE_BITS__3=function(){return this._SIZE_BITS_7},$o.$metadata$={simpleName:"DoubleCompanionObject",kind:"object",interfaces:[]},Object.defineProperty($o.prototype,"MIN_VALUE",{configurable:!0,get:$o.prototype._get_MIN_VALUE__3}),Object.defineProperty($o.prototype,"MAX_VALUE",{configurable:!0,get:$o.prototype._get_MAX_VALUE__3}),Object.defineProperty($o.prototype,"POSITIVE_INFINITY",{configurable:!0,get:$o.prototype._get_POSITIVE_INFINITY__0}),Object.defineProperty($o.prototype,"NEGATIVE_INFINITY",{configurable:!0,get:$o.prototype._get_NEGATIVE_INFINITY__0}),Object.defineProperty($o.prototype,"NaN",{configurable:!0,get:$o.prototype._get_NaN__0}),Object.defineProperty($o.prototype,"SIZE_BYTES",{configurable:!0,get:$o.prototype._get_SIZE_BYTES__3}),Object.defineProperty($o.prototype,"SIZE_BITS",{configurable:!0,get:$o.prototype._get_SIZE_BITS__3}),Go.$metadata$={simpleName:"StringCompanionObject",kind:"object",interfaces:[]},Zo.$metadata$={simpleName:"BooleanCompanionObject",kind:"object",interfaces:[]},Xo.$metadata$={simpleName:"Comparator",kind:"interface",interfaces:[]},es.prototype.addAll_10=function(t){this.checkIsMutable_12();for(var e=!1,n=t.iterator_39();n.hasNext_14();){var r=n.next_14();this.add_18(r)&&(e=!0)}return e},es.prototype.toJSON=function(){return this.toArray()},es.prototype.checkIsMutable_12=function(){},es.$metadata$={simpleName:"AbstractMutableCollection",kind:"class",interfaces:[ml]},ns.prototype._set_index__0=function(t){this._index_1=t},ns.prototype._get_index__0=function(){return this._index_1},ns.prototype._set_last__0=function(t){this._last_0=t},ns.prototype._get_last__2=function(){return this._last_0},ns.prototype.hasNext_14=function(){return this._index_1<this._$this._get_size__29()},ns.prototype.next_14=function(){if(!this.hasNext_14())throw oc();var t=this._index_1;return this._index_1=t+1|0,this._last_0=t,this._$this.get_29(this._last_0)},ns.$metadata$={simpleName:"IteratorImpl",kind:"class",interfaces:[bo]},rs.prototype.hasPrevious_1=function(){return this._get_index__0()>0},rs.prototype.previous_1=function(){if(!this.hasPrevious_1())throw oc();var t=this;return t._set_index__0(t._get_index__0()-1|0),this._set_last__0(t._get_index__0()),this._$this_0.get_29(this._get_last__2())},rs.$metadata$={simpleName:"ListIteratorImpl",kind:"class",interfaces:[vo]},is.prototype.add_9=function(t,e){mr().checkPositionIndex(t,this.__size),this._list.add_9(this._fromIndex+t|0,e),this.__size=this.__size+1|0,Mo()},is.prototype.get_29=function(t){return mr().checkElementIndex(t,this.__size),this._list.get_29(this._fromIndex+t|0)},is.prototype.removeAt_2=function(t){mr().checkElementIndex(t,this.__size);var e=this._list.removeAt_2(this._fromIndex+t|0);return this.__size=this.__size-1|0,Mo(),e},is.prototype.set_2=function(t,e){return mr().checkElementIndex(t,this.__size),this._list.set_2(this._fromIndex+t|0,e)},is.prototype._get_size__29=function(){return this.__size},is.prototype.checkIsMutable_12=function(){return this._list.checkIsMutable_12()},is.$metadata$={simpleName:"SubList",kind:"class",interfaces:[Ws]},os.prototype._set_modCount__0=function(t){this._modCount=t},os.prototype._get_modCount__0=function(){return this._modCount},os.prototype.add_18=function(t){return this.checkIsMutable_12(),this.add_9(this._get_size__29(),t),!0},os.prototype.iterator_39=function(){return new ns(this)},os.prototype.contains_27=function(t){return this.indexOf_6(t)>=0},os.prototype.indexOf_6=function(t){var e=0,n=Pr(this);if(e<=n)do{var r=e;if(e=e+1|0,Dl(this.get_29(r),t))return r}while(r!==n);return-1},os.prototype.listIterator_4=function(t){return new rs(this,t)},os.prototype.subList_4=function(t,e){return new is(this,t,e)},os.prototype.equals=function(t){return t===this||!(null==t||!Cu(t,ul))&&mr().orderedEquals(this,t)},os.prototype.hashCode=function(){return mr().orderedHashCode(this)},os.$metadata$={simpleName:"AbstractMutableList",kind:"class",interfaces:[cl]},ss.prototype.hasNext_14=function(){return this._$entryIterator_0.hasNext_14()},ss.prototype.next_14=function(){return this._$entryIterator_0.next_14()._get_key__3()},ss.$metadata$={kind:"class",interfaces:[bo]},as.prototype._get_key__3=function(){return this._key},as.prototype._get_value__15=function(){return this.__value_0},as.prototype.setValue_1=function(t){var e=this.__value_0;return this.__value_0=t,e},as.prototype.hashCode=function(){return xr().entryHashCode(this)},as.prototype.toString=function(){return xr().entryToString(this)},as.prototype.equals=function(t){return xr().entryEquals(this,t)},as.$metadata$={simpleName:"SimpleEntry",kind:"class",interfaces:[dl]},ls.prototype.contains_27=function(t){return this.containsEntry_4(t)},ls.$metadata$={simpleName:"AbstractEntrySet",kind:"class",interfaces:[]},us.prototype.add_5=function(t){throw dc("Add is not supported on keys")},us.prototype.add_18=function(t){return this.add_5(null==t||Tu(t)?t:ql())},us.prototype.contains_20=function(t){return this._this$0_4.containsKey_8(t)},us.prototype.contains_27=function(t){return!(null!=t&&!Tu(t))&&this.contains_20(null==t||Tu(t)?t:ql())},us.prototype.iterator_39=function(){return new ss(this._this$0_4._get_entries__5().iterator_39())},us.prototype._get_size__29=function(){return this._this$0_4._get_size__29()},us.prototype.checkIsMutable_12=function(){return this._this$0_4.checkIsMutable_12()},us.$metadata$={kind:"class",interfaces:[]},cs.prototype._get_keys__5=function(){return null==this.__keys_0&&(this.__keys_0=new us(this)),Ul(this.__keys_0)},cs.prototype.putAll_1=function(t){this.checkIsMutable_12();for(var e=t._get_entries__5().iterator_39();e.hasNext_14();){var n=e.next_14(),r=n._get_key__3(),i=n._get_value__15();this.put_4(r,i),Mo()}},cs.prototype.checkIsMutable_12=function(){},cs.$metadata$={simpleName:"AbstractMutableMap",kind:"class",interfaces:[fl]},hs.prototype.equals=function(t){return t===this||!(null==t||!Cu(t,pl))&&Ir().setEquals(this,t)},hs.prototype.hashCode=function(){return Ir().unorderedHashCode(this)},hs.$metadata$={simpleName:"AbstractMutableSet",kind:"class",interfaces:[hl]},ms.prototype.ensureCapacity_8=function(t){},ms.prototype._get_size__29=function(){return this._array.length},ms.prototype.get_29=function(t){var e=this._array[_s(this,t)];return null==e||Tu(e)?e:ql()},ms.prototype.set_2=function(t,e){this.checkIsMutable_12(),_s(this,t),Mo();var n=this._array[t];this._array[t]=e;var r=n;return null==r||Tu(r)?r:ql()},ms.prototype.add_18=function(t){this.checkIsMutable_12(),this._array.push(t);var e=this._get_modCount__0();return this._set_modCount__0(e+1|0),Mo(),!0},ms.prototype.add_9=function(t,e){this.checkIsMutable_12(),this._array.splice(function(t,e){return mr().checkPositionIndex(e,t._get_size__29()),e}(this,t),0,e);var n=this._get_modCount__0();this._set_modCount__0(n+1|0),Mo()},ms.prototype.addAll_10=function(t){if(this.checkIsMutable_12(),t.isEmpty_29())return!1;var e=this._array,n=Qo(t);this._array=e.concat(n);var r=this._get_modCount__0();return this._set_modCount__0(r+1|0),Mo(),!0},ms.prototype.removeAt_2=function(t){this.checkIsMutable_12(),_s(this,t),Mo();var e=this._get_modCount__0();return this._set_modCount__0(e+1|0),Mo(),t===Pr(this)?this._array.pop():this._array.splice(t,1)[0]},ms.prototype.indexOf_6=function(t){return r(this._array,t)},ms.prototype.toString=function(){return i(this._array,", ","[","]",0,null,(t=new Al,function(e){return t.invoke_58(e)}),24);var t},ms.prototype.toArray_0=function(){return[].slice.call(this._array)},ms.prototype.toArray=function(){return this.toArray_0()},ms.prototype.checkIsMutable_12=function(){if(this._isReadOnly)throw pc()},ms.$metadata$={simpleName:"ArrayList",kind:"class",interfaces:[cl,Ws]},vs.prototype.invoke_12=function(t,e){return this._$comparator.compare(t,e)},vs.prototype.invoke_101=function(t,e){var n=null==t||Tu(t)?t:ql();return this.invoke_12(n,null==e||Tu(e)?e:ql())},vs.$metadata$={kind:"class",interfaces:[]},bs.prototype.invoke_14=function(t,e){return(3&t)-(3&e)|0},bs.prototype.invoke_101=function(t,e){var n=null!=t&&"number"==typeof t?t:ql();return this.invoke_14(n,null!=e&&"number"==typeof e?e:ql())},bs.$metadata$={kind:"class",interfaces:[]},xs.prototype.equals_1=function(t,e){return Dl(t,e)},xs.prototype.getHashCode_0=function(t){var e=null==t?null:Rl(t);return null==e?0:e},xs.$metadata$={simpleName:"HashCode",kind:"object",interfaces:[ws]},ws.$metadata$={simpleName:"EqualityComparator",kind:"interface",interfaces:[]},Es.prototype.add_13=function(t){throw dc("Add is not supported on entries")},Es.prototype.add_18=function(t){return this.add_13(null!=t&&Cu(t,dl)?t:ql())},Es.prototype.containsEntry_4=function(t){return this._$this_1.containsEntry_5(t)},Es.prototype.iterator_39=function(){return this._$this_1._internalMap.iterator_39()},Es.prototype._get_size__29=function(){return this._$this_1._get_size__29()},Es.$metadata$={simpleName:"EntrySet",kind:"class",interfaces:[]},Ts.prototype.containsKey_8=function(t){return this._internalMap.contains_20(t)},Ts.prototype._get_entries__5=function(){return null==this.__entries&&(this.__entries=this.createEntrySet_0()),Ul(this.__entries)},Ts.prototype.createEntrySet_0=function(){return new Es(this)},Ts.prototype.get_17=function(t){return this._internalMap.get_17(t)},Ts.prototype.put_4=function(t,e){return this._internalMap.put_4(t,e)},Ts.prototype._get_size__29=function(){return this._internalMap._get_size__29()},Ts.$metadata$={simpleName:"HashMap",kind:"class",interfaces:[fl]},Ms.prototype._get_map__0=function(){return this._map},Ms.prototype.add_18=function(t){return null==this._map.put_4(t,this)},Ms.prototype.contains_27=function(t){return this._map.containsKey_8(t)},Ms.prototype.isEmpty_29=function(){return this._map.isEmpty_29()},Ms.prototype.iterator_39=function(){return this._map._get_keys__5().iterator_39()},Ms.prototype._get_size__29=function(){return this._map._get_size__29()},Ms.$metadata$={simpleName:"HashSet",kind:"class",interfaces:[hl]},Rs.prototype.hasNext_14=function(){return-1===this._state&&(this._state=function(t){if(null!=t._chainOrEntry&&t._isChain){var e=t._chainOrEntry.length,n=t;if(n._itemIndex=n._itemIndex+1|0,n._itemIndex<e)return 0}var r=t;if(r._keyIndex=r._keyIndex+1|0,r._keyIndex<t._keys.length){t._chainOrEntry=t._this$0_5._backingMap[t._keys[t._keyIndex]];var i=t._chainOrEntry;return t._isChain=null!=i&&ku(i),t._itemIndex=0,0}return t._chainOrEntry=null,1}(this)),0===this._state},Rs.prototype.next_14=function(){if(!this.hasNext_14())throw oc();var t=this._isChain?this._chainOrEntry[this._itemIndex]:this._chainOrEntry;return this._lastEntry=t,this._state=-1,t},Rs.$metadata$={kind:"class",interfaces:[bo]},zs.prototype._get_equality__0=function(){return this._equality_0},zs.prototype._get_size__29=function(){return this._size},zs.prototype.put_4=function(t,e){var n=this._equality_0.getHashCode_0(t),r=Ds(this,n);if(null==r)this._backingMap[n]=new as(t,e);else{if(null==r||!ku(r)){var i=r;if(this._equality_0.equals_1(i._get_key__3(),t))return i.setValue_1(e);var o=[i,new as(t,e)];return this._backingMap[n]=o,this._size=this._size+1|0,Mo(),null}var s=r,a=Ns(s,this,t);if(null!=a)return a.setValue_1(e);s.push(new as(t,e))}return this._size=this._size+1|0,Mo(),null},zs.prototype.contains_20=function(t){return!(null==Ls(this,t))},zs.prototype.get_17=function(t){var e=Ls(this,t);return null==e?null:e._get_value__15()},zs.prototype.iterator_39=function(){return new Rs(this)},zs.$metadata$={simpleName:"InternalHashCodeMap",kind:"class",interfaces:[Fs]},Fs.prototype.createJsMap_0=function(){var t=Object.create(null);return t.foo=1,delete t.foo,t},Fs.$metadata$={simpleName:"InternalMap",kind:"interface",interfaces:[gl]},Bs.prototype.hasNext_14=function(){return!(null===this._next_0)},Bs.prototype.next_14=function(){if(!this.hasNext_14())throw oc();var t=Ul(this._next_0);this._last_1=t;var e=t._next_1;return this._next_0=e!==this._$this_2._$this_4._head?e:null,t},Bs.$metadata$={simpleName:"EntryIterator",kind:"class",interfaces:[bo]},js.prototype.setValue_1=function(t){return this._$this_3.checkIsMutable_12(),as.prototype.setValue_1.call(this,t)},js.$metadata$={simpleName:"ChainEntry",kind:"class",interfaces:[]},Vs.prototype.add_13=function(t){throw dc("Add is not supported on entries")},Vs.prototype.add_18=function(t){return this.add_13(null!=t&&Cu(t,dl)?t:ql())},Vs.prototype.containsEntry_4=function(t){return this._$this_4.containsEntry_5(t)},Vs.prototype.iterator_39=function(){return new Bs(this)},Vs.prototype._get_size__29=function(){return this._$this_4._get_size__29()},Vs.prototype.checkIsMutable_12=function(){return this._$this_4.checkIsMutable_12()},Vs.$metadata$={simpleName:"EntrySet",kind:"class",interfaces:[]},Gs.prototype.containsKey_8=function(t){return this._map_0.containsKey_8(t)},Gs.prototype.createEntrySet_0=function(){return new Vs(this)},Gs.prototype.get_17=function(t){var e=this._map_0.get_17(t);return null==e?null:e._get_value__15()},Gs.prototype.put_4=function(t,e){this.checkIsMutable_12();var n=this._map_0.get_17(t);if(null==n){var r=new js(this,t,e);return this._map_0.put_4(t,r),Mo(),function(t,e){if(null!=t._next_1||null!=t._prev)throw lc(zl("Check failed."));var n=e._head;if(null==n)e._head=t,t._next_1=t,t._prev=t;else{var r,i=n._prev;t:do{if(null==i)throw lc(zl("Required value was null."));r=i;break t}while(0);var o=r;t._prev=o,t._next_1=n,n._prev=t,o._next_1=t}}(r,this),null}return n.setValue_1(e)},Gs.prototype._get_size__29=function(){return this._map_0._get_size__29()},Gs.prototype.checkIsMutable_12=function(){if(this._isReadOnly_0)throw pc()},Gs.$metadata$={simpleName:"LinkedHashMap",kind:"class",interfaces:[fl]},Zs.prototype.checkIsMutable_12=function(){return this._get_map__0().checkIsMutable_12()},Zs.$metadata$={simpleName:"LinkedHashSet",kind:"class",interfaces:[hl]},Ws.$metadata$={simpleName:"RandomAccess",kind:"interface",interfaces:[]},Xs.$metadata$={simpleName:"Serializable",kind:"interface",interfaces:[]},ea.$metadata$={simpleName:"KCallable",kind:"interface",interfaces:[]},na.$metadata$={simpleName:"KClass",kind:"interface",interfaces:[ri]},ra.prototype._get_jClass__2=function(){return this._jClass},ra.prototype.equals=function(t){return t instanceof ra&&Dl(this._get_jClass__2(),t._get_jClass__2())},ra.prototype.hashCode=function(){var t=this._get_simpleName__4(),e=null==t?null:Fl(t);return null==e?0:e},ra.prototype.toString=function(){return"class "+this._get_simpleName__4()},ra.$metadata$={simpleName:"KClassImpl",kind:"class",interfaces:[na]},ia.prototype.equals=function(t){return t instanceof ia&&!!ra.prototype.equals.call(this,t)&&this._givenSimpleName===t._givenSimpleName},ia.prototype._get_simpleName__4=function(){return this._givenSimpleName},ia.prototype.isInstance_4=function(t){return this._isInstanceFunction(t)},ia.$metadata$={simpleName:"PrimitiveKClassImpl",kind:"class",interfaces:[]},oa.prototype._get_simpleName__4=function(){return this._simpleName},oa.prototype.isInstance_4=function(t){return!1},oa.prototype._get_jClass__2=function(){throw dc("There's no native JS class for Nothing type")},oa.prototype.equals=function(t){return t===this},oa.prototype.hashCode=function(){return 0},oa.$metadata$={simpleName:"NothingKClassImpl",kind:"object",interfaces:[]},aa.prototype._get_simpleName__4=function(){throw lc(zl("Unknown simpleName for ErrorKClass"))},aa.prototype.isInstance_4=function(t){throw lc(zl("Can's check isInstance on ErrorKClass"))},aa.prototype.equals=function(t){return t===this},aa.prototype.hashCode=function(){return 0},aa.$metadata$={simpleName:"ErrorKClass",kind:"class",interfaces:[na]},la.prototype._get_simpleName__4=function(){return this._simpleName_0},la.prototype.isInstance_4=function(t){return function(t,e){if(e===Object)return Tu(t);if(null==t||null==e||"object"!=typeof t&&"function"!=typeof t)return!1;if("function"==typeof e&&Pc(t,e))return!0;var n=function(t){return Object.getPrototypeOf(t)}(e),r=null==n?null:n.constructor;if(null!=r&&kc("$metadata$",r)&&"object"===r.$metadata$.kind)return t===e;var i=e.$metadata$;return null==i?Pc(t,e):"interface"===i.kind&&null!=t.constructor&&Iu(t.constructor,e)}(t,this._get_jClass__2())},la.$metadata$={simpleName:"SimpleKClassImpl",kind:"class",interfaces:[]},ua.$metadata$={simpleName:"KProperty1",kind:"interface",interfaces:[ca]},ca.$metadata$={simpleName:"KProperty",kind:"interface",interfaces:[ea]},ha.$metadata$={simpleName:"KType",kind:"interface",interfaces:[]},fa.prototype.invoke_16=function(t){return null==(e=t)._variance?"*":function(t){var e,n=t;return n.equals(ui())?e="":n.equals(ci())?e="in ":n.equals(hi())?e="out ":$l(),e}(e._variance)+bl(e._type);var e},fa.prototype.invoke_103=function(t){return this.invoke_16(t instanceof si?t:ql())},fa.$metadata$={kind:"class",interfaces:[]},_a.prototype._get_classifier__0=function(){return this._classifier},_a.prototype._get_arguments__0=function(){return this._arguments},_a.prototype._get_isMarkedNullable__0=function(){return this._isMarkedNullable},_a.prototype.equals=function(t){return!!(t instanceof _a&&Dl(this._classifier,t._classifier)&&Dl(this._arguments,t._arguments))&&this._isMarkedNullable===t._isMarkedNullable},_a.prototype.hashCode=function(){return _u(_u(Rl(this._classifier),31)+Rl(this._arguments)|0,31)+(0|this._isMarkedNullable)|0},_a.prototype.toString=function(){var t,e=this._classifier,n=Cu(e,na)?e:null,r=null==n?zl(this._classifier):null!=n._get_simpleName__4()?n._get_simpleName__4():"(non-denotable type)",i=this._arguments.isEmpty_29()?"":a(this._arguments,", ","<",">",0,null,(t=new fa(this),function(e){return t.invoke_16(e)}),24),o=this._isMarkedNullable?"?":"";return function(t,e){var n=null==t?null:zl(t),r=null==n?"null":n,i=null==e?null:zl(e);return r+(null==i?"null":i)}(r,i)+o},_a.$metadata$={simpleName:"KTypeImpl",kind:"class",interfaces:[ha]},ma.prototype.invoke_58=function(t){return Tu(t)},ma.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},ma.$metadata$={kind:"class",interfaces:[]},ga.prototype.invoke_58=function(t){return Pu(t)},ga.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},ga.$metadata$={kind:"class",interfaces:[]},ya.prototype.invoke_58=function(t){return null!=t&&"boolean"==typeof t},ya.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},ya.$metadata$={kind:"class",interfaces:[]},va.prototype.invoke_58=function(t){return null!=t&&"number"==typeof t},va.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},va.$metadata$={kind:"class",interfaces:[]},ba.prototype.invoke_58=function(t){return null!=t&&"number"==typeof t},ba.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},ba.$metadata$={kind:"class",interfaces:[]},xa.prototype.invoke_58=function(t){return null!=t&&"number"==typeof t},xa.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},xa.$metadata$={kind:"class",interfaces:[]},wa.prototype.invoke_58=function(t){return null!=t&&"number"==typeof t},wa.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},wa.$metadata$={kind:"class",interfaces:[]},Ea.prototype.invoke_58=function(t){return null!=t&&"number"==typeof t},Ea.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Ea.$metadata$={kind:"class",interfaces:[]},Sa.prototype.invoke_58=function(t){return null!=t&&ku(t)},Sa.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Sa.$metadata$={kind:"class",interfaces:[]},Ca.prototype.invoke_58=function(t){return null!=t&&"string"==typeof t},Ca.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Ca.$metadata$={kind:"class",interfaces:[]},Ia.prototype.invoke_58=function(t){return t instanceof Error},Ia.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Ia.$metadata$={kind:"class",interfaces:[]},ka.prototype.invoke_58=function(t){return null!=t&&Ou(t)},ka.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},ka.$metadata$={kind:"class",interfaces:[]},Ta.prototype.invoke_58=function(t){return null!=t&&Nu(t)},Ta.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Ta.$metadata$={kind:"class",interfaces:[]},Pa.prototype.invoke_58=function(t){return null!=t&&Mu(t)},Pa.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Pa.$metadata$={kind:"class",interfaces:[]},Aa.prototype.invoke_58=function(t){return null!=t&&Lu(t)},Aa.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Aa.$metadata$={kind:"class",interfaces:[]},Oa.prototype.invoke_58=function(t){return null!=t&&Du(t)},Oa.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Oa.$metadata$={kind:"class",interfaces:[]},Ma.prototype.invoke_58=function(t){return null!=t&&zu(t)},Ma.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Ma.$metadata$={kind:"class",interfaces:[]},La.prototype.invoke_58=function(t){return null!=t&&Ru(t)},La.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},La.$metadata$={kind:"class",interfaces:[]},Na.prototype.invoke_58=function(t){return null!=t&&Fu(t)},Na.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Na.$metadata$={kind:"class",interfaces:[]},Da.prototype.invoke_58=function(t){return"function"==typeof t&&t.length===this._$arity},Da.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Da.$metadata$={kind:"class",interfaces:[]},Ra.prototype._get_anyClass_=function(){return this._anyClass},Ra.prototype._get_numberClass_=function(){return this._numberClass},Ra.prototype._get_nothingClass_=function(){return this._nothingClass},Ra.prototype._get_booleanClass_=function(){return this._booleanClass},Ra.prototype._get_byteClass_=function(){return this._byteClass},Ra.prototype._get_shortClass_=function(){return this._shortClass},Ra.prototype._get_intClass_=function(){return this._intClass},Ra.prototype._get_floatClass_=function(){return this._floatClass},Ra.prototype._get_doubleClass_=function(){return this._doubleClass},Ra.prototype._get_arrayClass_=function(){return this._arrayClass},Ra.prototype._get_stringClass_=function(){return this._stringClass},Ra.prototype._get_throwableClass_=function(){return this._throwableClass},Ra.prototype._get_booleanArrayClass_=function(){return this._booleanArrayClass},Ra.prototype._get_charArrayClass_=function(){return this._charArrayClass},Ra.prototype._get_byteArrayClass_=function(){return this._byteArrayClass},Ra.prototype._get_shortArrayClass_=function(){return this._shortArrayClass},Ra.prototype._get_intArrayClass_=function(){return this._intArrayClass},Ra.prototype._get_longArrayClass_=function(){return this._longArrayClass},Ra.prototype._get_floatArrayClass_=function(){return this._floatArrayClass},Ra.prototype._get_doubleArrayClass_=function(){return this._doubleArrayClass},Ra.prototype.functionClass=function(t){var e,n,r=nt[t];if(null==r){var i=new ia(Function,"Function"+t,(n=new Da(t),function(t){return n.invoke_58(t)}));nt[t]=i,e=i}else e=r;return e},Ra.$metadata$={simpleName:"PrimitiveClasses",kind:"object",interfaces:[]},Object.defineProperty(Ra.prototype,"anyClass",{configurable:!0,get:Ra.prototype._get_anyClass_}),Object.defineProperty(Ra.prototype,"numberClass",{configurable:!0,get:Ra.prototype._get_numberClass_}),Object.defineProperty(Ra.prototype,"nothingClass",{configurable:!0,get:Ra.prototype._get_nothingClass_}),Object.defineProperty(Ra.prototype,"booleanClass",{configurable:!0,get:Ra.prototype._get_booleanClass_}),Object.defineProperty(Ra.prototype,"byteClass",{configurable:!0,get:Ra.prototype._get_byteClass_}),Object.defineProperty(Ra.prototype,"shortClass",{configurable:!0,get:Ra.prototype._get_shortClass_}),Object.defineProperty(Ra.prototype,"intClass",{configurable:!0,get:Ra.prototype._get_intClass_}),Object.defineProperty(Ra.prototype,"floatClass",{configurable:!0,get:Ra.prototype._get_floatClass_}),Object.defineProperty(Ra.prototype,"doubleClass",{configurable:!0,get:Ra.prototype._get_doubleClass_}),Object.defineProperty(Ra.prototype,"arrayClass",{configurable:!0,get:Ra.prototype._get_arrayClass_}),Object.defineProperty(Ra.prototype,"stringClass",{configurable:!0,get:Ra.prototype._get_stringClass_}),Object.defineProperty(Ra.prototype,"throwableClass",{configurable:!0,get:Ra.prototype._get_throwableClass_}),Object.defineProperty(Ra.prototype,"booleanArrayClass",{configurable:!0,get:Ra.prototype._get_booleanArrayClass_}),Object.defineProperty(Ra.prototype,"charArrayClass",{configurable:!0,get:Ra.prototype._get_charArrayClass_}),Object.defineProperty(Ra.prototype,"byteArrayClass",{configurable:!0,get:Ra.prototype._get_byteArrayClass_}),Object.defineProperty(Ra.prototype,"shortArrayClass",{configurable:!0,get:Ra.prototype._get_shortArrayClass_}),Object.defineProperty(Ra.prototype,"intArrayClass",{configurable:!0,get:Ra.prototype._get_intArrayClass_}),Object.defineProperty(Ra.prototype,"longArrayClass",{configurable:!0,get:Ra.prototype._get_longArrayClass_}),Object.defineProperty(Ra.prototype,"floatArrayClass",{configurable:!0,get:Ra.prototype._get_floatArrayClass_}),Object.defineProperty(Ra.prototype,"doubleArrayClass",{configurable:!0,get:Ra.prototype._get_doubleArrayClass_}),Va.$metadata$={simpleName:"Appendable",kind:"interface",interfaces:[]},Ga.prototype._get_length__0=function(){return this._string.length},Ga.prototype.get_29=function(t){var e=this._string;if(!(t>=0&&t<=wi(e)))throw cc("index: "+t+", length: "+this._get_length__0()+"}");return kl(e,t)},Ga.prototype.subSequence_1=function(t,e){return this._string.substring(t,e)},Ga.prototype.append_1=function(t){return this._string=this._string+t,this},Ga.prototype.append_2=function(t){return this._string=this._string+bl(t),this},Ga.prototype.append_3=function(t,e,n){return this.appendRange(null==t?"null":t,e,n)},Ga.prototype.append_4=function(t){return this._string=this._string+bl(t),this},Ga.prototype.append_5=function(t){return this._string=this._string+(null==t?"null":t),this},Ga.prototype.setLength=function(t){if(t<0)throw tc("Negative new length: "+t+".");if(t<=this._get_length__0())this._string=this._string.substring(0,t);else{var e=this._get_length__0();if(e<t)do{e=e+1|0,this._string=this._string+new ol(0)}while(e<t)}},Ga.prototype.toString=function(){return this._string},Ga.prototype.appendRange=function(t,e,n){var r=zl(t);return mr().checkBoundsIndexes(e,n,r.length),this._string=this._string+r.substring(e,n),this},Ga.$metadata$={simpleName:"StringBuilder",kind:"class",interfaces:[Va,_o]},rl.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},ol.prototype.compareTo_9=function(t){return this._value_0-t._value_0|0},ol.prototype.compareTo_14=function(t){return this.compareTo_9(t instanceof ol?t:ql())},ol.prototype.minus=function(t){return this._value_0-t._value_0|0},ol.prototype.toInt_5=function(){return this._value_0},ol.prototype.equals=function(t){return t===this||t instanceof ol&&this._value_0===t._value_0},ol.prototype.hashCode=function(){return this._value_0},ol.prototype.toString=function(){return String.fromCharCode(this._value_0)},ol.$metadata$={simpleName:"Char",kind:"class",interfaces:[mo]},sl.$metadata$={simpleName:"Iterable",kind:"interface",interfaces:[]},al.$metadata$={simpleName:"Entry",kind:"interface",interfaces:[]},ll.$metadata$={simpleName:"Map",kind:"interface",interfaces:[]},ul.$metadata$={simpleName:"List",kind:"interface",interfaces:[_l]},cl.$metadata$={simpleName:"MutableList",kind:"interface",interfaces:[ul,ml]},hl.$metadata$={simpleName:"MutableSet",kind:"interface",interfaces:[pl,ml]},pl.$metadata$={simpleName:"Set",kind:"interface",interfaces:[_l]},dl.$metadata$={simpleName:"MutableEntry",kind:"interface",interfaces:[al]},fl.$metadata$={simpleName:"MutableMap",kind:"interface",interfaces:[ll]},_l.$metadata$={simpleName:"Collection",kind:"interface",interfaces:[sl]},ml.$metadata$={simpleName:"MutableCollection",kind:"interface",interfaces:[_l,gl]},gl.$metadata$={simpleName:"MutableIterable",kind:"interface",interfaces:[sl]},yl.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},vl.prototype._get_ordinal__0=function(){return this._ordinal},vl.prototype.compareTo_11=function(t){return Ol(this._ordinal,t._ordinal)},vl.prototype.compareTo_14=function(t){return this.compareTo_11(t instanceof vl?t:ql())},vl.prototype.equals=function(t){return this===t},vl.prototype.hashCode=function(){return Nl(this)},vl.prototype.toString=function(){return this._name},vl.$metadata$={simpleName:"Enum",kind:"class",interfaces:[mo]},Cl.prototype.hasNext_14=function(){return!(this._index_2===this._$array.length)},Cl.prototype.next_14=function(){if(this._index_2===this._$array.length)throw sc(""+this._index_2);var t=this._index_2;return this._index_2=t+1|0,this._$array[t]},Cl.$metadata$={kind:"class",interfaces:[go]},Al.prototype.invoke_58=function(t){return zl(t)},Al.prototype.invoke_103=function(t){return this.invoke_58(null==t||Tu(t)?t:ql())},Al.$metadata$={kind:"class",interfaces:[]},Xl.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Kl.prototype.compareTo_48=function(t){return Jl(this,t)},Kl.prototype.compareTo_14=function(t){return this.compareTo_48(t instanceof Kl?t:ql())},Kl.prototype.plus_27=function(t){return Ql(this,t)},Kl.prototype.minus_28=function(t){return tu(this,t)},Kl.prototype.times_27=function(t){return eu(this,t)},Kl.prototype.div_27=function(t){return function(t,e){if(lu(e))throw Yu("division by zero");if(lu(t))return pt;if(iu(t,mt)){if(iu(e,dt)||iu(e,ft))return mt;if(iu(e,mt))return dt;var n=nu(function(t,e){return new Kl(t._low>>>1|t._high<<31,t._high>>1)}(t).div_27(e),1);return iu(n,pt)?au(e)?dt:ft:Ql(n,tu(t,eu(e,n)).div_27(e))}if(iu(e,mt))return pt;if(au(t))return au(e)?cu(t).div_27(cu(e)):cu(cu(t).div_27(e));if(au(e))return cu(t.div_27(cu(e)));for(var r=pt,i=t;fu(i,e);){for(var o=ru(i)/ru(e),s=(function(){var t=Math;return t.max.apply(t,[].concat([].slice.call(new Float64Array([1,Math.floor(o)]))))}).call(this),a=Math.ceil(Math.log(s)/Math.LN2),l=a<=48?1:Math.pow(2,a-48),u=pu(s),c=eu(u,e);au(c)||du(c,i);)c=eu(u=pu(s-=l),e);lu(u)&&(u=dt),r=Ql(r,u),i=tu(i,c)}return r}(this,t)},Kl.prototype.unaryMinus_4=function(){return this.inv_0().plus_27(new Kl(1,0))},Kl.prototype.shl_0=function(t){return nu(this,t)},Kl.prototype.ushr_0=function(t){return e=this,0==(n=63&t)?e:n<32?new Kl(e._low>>>n|e._high<<(32-n|0),e._high>>>n):new Kl(32===n?e._high:e._high>>>(n-32|0),0);var e,n},Kl.prototype.and=function(t){return new Kl(this._low&t._low,this._high&t._high)},Kl.prototype.xor=function(t){return new Kl(this._low^t._low,this._high^t._high)},Kl.prototype.inv_0=function(){return new Kl(~this._low,~this._high)},Kl.prototype.toByte_4=function(){return mu(this._low)},Kl.prototype.toShort_4=function(){return yu(this._low)},Kl.prototype.toInt_5=function(){return this._low},Kl.prototype.toDouble_4=function(){return ru(this)},Kl.prototype.valueOf=function(){return this.toDouble_4()},Kl.prototype.equals=function(t){return t instanceof Kl&&iu(this,t)},Kl.prototype.hashCode=function(){return this._low^this._high},Kl.prototype.toString=function(){return ou(this,10)},Kl.$metadata$={simpleName:"Long",kind:"class",interfaces:[mo]},Ku.$metadata$={simpleName:"Exception",kind:"class",interfaces:[]},ec.$metadata$={simpleName:"IllegalArgumentException",kind:"class",interfaces:[]},ic.$metadata$={simpleName:"RuntimeException",kind:"class",interfaces:[]},ac.$metadata$={simpleName:"NoSuchElementException",kind:"class",interfaces:[]},uc.$metadata$={simpleName:"IllegalStateException",kind:"class",interfaces:[]},hc.$metadata$={simpleName:"IndexOutOfBoundsException",kind:"class",interfaces:[]},fc.$metadata$={simpleName:"UnsupportedOperationException",kind:"class",interfaces:[]},mc.$metadata$={simpleName:"ArithmeticException",kind:"class",interfaces:[]},yc.$metadata$={simpleName:"NumberFormatException",kind:"class",interfaces:[]},bc.$metadata$={simpleName:"NullPointerException",kind:"class",interfaces:[]},wc.$metadata$={simpleName:"NoWhenBranchMatchedException",kind:"class",interfaces:[]},Sc.$metadata$={simpleName:"ClassCastException",kind:"class",interfaces:[]},Ic.$metadata$={simpleName:"UninitializedPropertyAccessException",kind:"class",interfaces:[]},Mc.$metadata$={simpleName:"KSerializer",kind:"interface",interfaces:[Nc,Lc]},Lc.$metadata$={simpleName:"DeserializationStrategy",kind:"interface",interfaces:[]},Nc.$metadata$={simpleName:"SerializationStrategy",kind:"interface",interfaces:[]},Dc.prototype.invoke_94=function(t){var e=th(Ho())._get_descriptor__66();t.element$default("type",e,null,!1,12,null);var n=mh("kotlinx.serialization.Polymorphic<"+this._this$0_7._baseClass._get_simpleName__4()+">",Th(),[],null,12);t.element$default("value",n,null,!1,12,null)},Dc.prototype.invoke_103=function(t){return this.invoke_94(t instanceof gh?t:ql()),Mo()},Dc.$metadata$={kind:"class",interfaces:[]},Rc.prototype._get_baseClass__0=function(){return this._baseClass},Rc.prototype._get_descriptor__66=function(){return this._descriptor},Rc.prototype.toString=function(){return"kotlinx.serialization.PolymorphicSerializer(baseClass: "+this._baseClass+")"},Rc.$metadata$={simpleName:"PolymorphicSerializer",kind:"class",interfaces:[]},Bc.$metadata$={simpleName:"SealedClassSerializer",kind:"class",interfaces:[]},jc.$metadata$={simpleName:"StringFormat",kind:"interface",interfaces:[Vc]},Vc.$metadata$={simpleName:"SerialFormat",kind:"interface",interfaces:[]},$c.$metadata$={simpleName:"UnknownFieldException",kind:"class",interfaces:[]},Gc.$metadata$={simpleName:"MissingFieldException",kind:"class",interfaces:[]},Wc.$metadata$={simpleName:"SerializationException",kind:"class",interfaces:[]},ph.prototype.getElementAnnotations_17=function(t){return this._original.getElementAnnotations_17(t)},ph.prototype.getElementDescriptor_17=function(t){return this._original.getElementDescriptor_17(t)},ph.prototype.getElementIndex_17=function(t){return this._original.getElementIndex_17(t)},ph.prototype.getElementName_17=function(t){return this._original.getElementName_17(t)},ph.prototype._get_elementsCount__17=function(){return this._original._get_elementsCount__17()},ph.prototype._get_isInline__17=function(){return this._original._get_isInline__17()},ph.prototype._get_isNullable__17=function(){return this._original._get_isNullable__17()},ph.prototype._get_kind__17=function(){return this._original._get_kind__17()},ph.prototype._get_serialName__17=function(){return this._serialName},ph.prototype.equals=function(t){var e=t instanceof ph?t:null;if(null==e)return!1;var n=e;return!!Dl(this._original,n._original)&&n._kClass.equals(this._kClass)},ph.prototype.hashCode=function(){return _u(31,this._kClass.hashCode())+Fl(this._serialName)|0},ph.prototype.toString=function(){return"ContextDescriptor(kClass: "+this._kClass+", original: "+this._original+")"},ph.$metadata$={simpleName:"ContextDescriptor",kind:"class",interfaces:[dh]},dh.prototype._get_isNullable__17=function(){return!1},dh.prototype._get_isInline__17=function(){return!1},dh.$metadata$={simpleName:"SerialDescriptor",kind:"interface",interfaces:[]},fh.prototype.hasNext_14=function(){return this._elementsLeft>0},fh.prototype.next_14=function(){var t=this._$this_elementDescriptors._get_elementsCount__17(),e=this._elementsLeft;return this._elementsLeft=e-1|0,this._$this_elementDescriptors.getElementDescriptor_17(t-e|0)},fh.$metadata$={kind:"class",interfaces:[go]},_h.prototype.iterator_2_0=function(){return new fh(this._$this_elementDescriptors_0)},_h.prototype.iterator_39=function(){return this.iterator_2_0()},_h.$metadata$={simpleName:"<no name provided>_1",kind:"class",interfaces:[sl]},gh.prototype.element=function(t,e,n,r){if(!this._uniqueNames.add_18(t))throw tc(zl("Element with name '"+t+"' is already registered"));this._elementNames.add_18(t),Mo(),this._elementDescriptors.add_18(e),Mo(),this._elementAnnotations.add_18(n),Mo(),this._elementOptionality.add_18(r),Mo()},gh.prototype.element$default=function(t,e,n,r,i,o){return 0!=(4&i)&&(n=Tr()),0!=(8&i)&&(r=!1),this.element(t,e,n,r)},gh.$metadata$={simpleName:"ClassSerialDescriptorBuilder",kind:"class",interfaces:[]},vh.prototype.invoke_97=function(){return Wp(this._this$0_8,this._this$0_8._typeParametersDescriptors)},vh.$metadata$={kind:"class",interfaces:[]},bh.prototype.invoke_102=function(t){return this._this$0_9.getElementName_17(t)+": "+this._this$0_9.getElementDescriptor_17(t)._get_serialName__17()},bh.prototype.invoke_103=function(t){return this.invoke_102(null!=t&&"number"==typeof t?t:ql())},bh.$metadata$={kind:"class",interfaces:[]},xh.prototype._get_serialName__17=function(){return this._serialName_1},xh.prototype._get_kind__17=function(){return this._kind},xh.prototype._get_elementsCount__17=function(){return this._elementsCount},xh.prototype._get_serialNames__3=function(){return this._serialNames},xh.prototype.getElementName_17=function(t){return rf(this._elementNames_0,t)},xh.prototype.getElementIndex_17=function(t){var e,n=this._name2Index.get_17(t);return null==n?(ip(),e=-3):e=n,e},xh.prototype.getElementAnnotations_17=function(t){return rf(this._elementAnnotations_0,t)},xh.prototype.getElementDescriptor_17=function(t){return rf(this._elementDescriptors_0,t)},xh.prototype.equals=function(t){var e;t:do{if(this===t){e=!0;break t}if(!(t instanceof xh)){e=!1;break t}if(this._get_serialName__17()!==t._get_serialName__17()){e=!1;break t}if(!Zu(this._typeParametersDescriptors,t._typeParametersDescriptors)){e=!1;break t}if(this._get_elementsCount__17()!==t._get_elementsCount__17()){e=!1;break t}var n=0,r=this._get_elementsCount__17();if(n<r)do{var i=n;if(n=n+1|0,this.getElementDescriptor_17(i)._get_serialName__17()!==t.getElementDescriptor_17(i)._get_serialName__17()){e=!1;break t}if(!Dl(this.getElementDescriptor_17(i)._get_kind__17(),t.getElementDescriptor_17(i)._get_kind__17())){e=!1;break t}}while(n<r);e=!0}while(0);return e},xh.prototype.hashCode=function(){return yh(this)},xh.prototype.toString=function(){var t;return a(g(0,this._elementsCount),", ",this._serialName_1+"(",")",0,null,(t=new bh(this),function(e){return t.invoke_102(e)}),24)},xh.$metadata$={simpleName:"SerialDescriptorImpl",kind:"class",interfaces:[dh,hp]},Eh.prototype.invoke_94=function(t){return Mo()},Eh.prototype.invoke_103=function(t){return this.invoke_94(t instanceof gh?t:ql()),Mo()},Eh.$metadata$={kind:"class",interfaces:[]},Sh.prototype.invoke_94=function(t){return Mo()},Sh.prototype.invoke_103=function(t){return this.invoke_94(t instanceof gh?t:ql()),Mo()},Sh.$metadata$={kind:"class",interfaces:[]},Ch.$metadata$={simpleName:"ENUM",kind:"object",interfaces:[]},kh.$metadata$={simpleName:"CONTEXTUAL",kind:"object",interfaces:[]},Ph.prototype.toString=function(){return Ul(ja(this)._get_simpleName__4())},Ph.prototype.hashCode=function(){return Fl(this.toString())},Ph.$metadata$={simpleName:"SerialKind",kind:"class",interfaces:[]},Ah.$metadata$={simpleName:"BOOLEAN",kind:"object",interfaces:[]},Oh.$metadata$={simpleName:"BYTE",kind:"object",interfaces:[]},Mh.$metadata$={simpleName:"CHAR",kind:"object",interfaces:[]},Lh.$metadata$={simpleName:"SHORT",kind:"object",interfaces:[]},Nh.$metadata$={simpleName:"INT",kind:"object",interfaces:[]},Dh.$metadata$={simpleName:"LONG",kind:"object",interfaces:[]},Rh.$metadata$={simpleName:"FLOAT",kind:"object",interfaces:[]},zh.$metadata$={simpleName:"DOUBLE",kind:"object",interfaces:[]},Fh.$metadata$={simpleName:"STRING",kind:"object",interfaces:[]},jh.$metadata$={simpleName:"PrimitiveKind",kind:"class",interfaces:[]},Vh.$metadata$={simpleName:"CLASS",kind:"object",interfaces:[]},$h.$metadata$={simpleName:"LIST",kind:"object",interfaces:[]},Gh.$metadata$={simpleName:"MAP",kind:"object",interfaces:[]},Zh.$metadata$={simpleName:"OBJECT",kind:"object",interfaces:[]},Xh.$metadata$={simpleName:"StructureKind",kind:"class",interfaces:[]},Yh.$metadata$={simpleName:"SEALED",kind:"object",interfaces:[]},Jh.$metadata$={simpleName:"OPEN",kind:"object",interfaces:[]},Qh.$metadata$={simpleName:"PolymorphicKind",kind:"class",interfaces:[]},tp.prototype.decodeValue_1=function(){throw Zc(ja(this)+" can't retrieve untyped values")},tp.prototype.decodeNotNullMark_9=function(){return!0},tp.prototype.decodeNull_9=function(){return null},tp.prototype.decodeBoolean_9=function(){var t=this.decodeValue_1();return"boolean"==typeof t?t:ql()},tp.prototype.decodeByte_9=function(){var t=this.decodeValue_1();return"number"==typeof t?t:ql()},tp.prototype.decodeShort_9=function(){var t=this.decodeValue_1();return"number"==typeof t?t:ql()},tp.prototype.decodeInt_9=function(){var t=this.decodeValue_1();return"number"==typeof t?t:ql()},tp.prototype.decodeLong_9=function(){var t=this.decodeValue_1();return t instanceof Kl?t:ql()},tp.prototype.decodeFloat_9=function(){var t=this.decodeValue_1();return"number"==typeof t?t:ql()},tp.prototype.decodeDouble_9=function(){var t=this.decodeValue_1();return"number"==typeof t?t:ql()},tp.prototype.decodeChar_9=function(){var t=this.decodeValue_1();return t instanceof ol?t:ql()},tp.prototype.decodeString_9=function(){var t=this.decodeValue_1();return"string"==typeof t?t:ql()},tp.prototype.decodeEnum_9=function(t){var e=this.decodeValue_1();return"number"==typeof e?e:ql()},tp.prototype.decodeInline_9=function(t){return this},tp.prototype.decodeSerializableValue_19=function(t,e){return this.decodeSerializableValue_18(t)},tp.prototype.beginStructure_14=function(t){return this},tp.prototype.endStructure_14=function(t){},tp.prototype.decodeBooleanElement_9=function(t,e){return this.decodeBoolean_9()},tp.prototype.decodeByteElement_9=function(t,e){return this.decodeByte_9()},tp.prototype.decodeShortElement_9=function(t,e){return this.decodeShort_9()},tp.prototype.decodeIntElement_9=function(t,e){return this.decodeInt_9()},tp.prototype.decodeLongElement_9=function(t,e){return this.decodeLong_9()},tp.prototype.decodeFloatElement_9=function(t,e){return this.decodeFloat_9()},tp.prototype.decodeDoubleElement_9=function(t,e){return this.decodeDouble_9()},tp.prototype.decodeCharElement_9=function(t,e){return this.decodeChar_9()},tp.prototype.decodeStringElement_9=function(t,e){return this.decodeString_9()},tp.prototype.decodeSerializableElement_9=function(t,e,n,r){return this.decodeSerializableValue_19(n,r)},tp.prototype.decodeNullableSerializableElement_9=function(t,e,n,r){return n._get_descriptor__66()._get_isNullable__17()||this.decodeNotNullMark_9()?this.decodeSerializableValue_19(n,r):this.decodeNull_9()},tp.$metadata$={simpleName:"AbstractDecoder",kind:"class",interfaces:[np,op]},ep.prototype.beginStructure_14=function(t){return this},ep.prototype.endStructure_14=function(t){},ep.prototype.encodeElement_2=function(t,e){return!0},ep.prototype.encodeValue_2=function(t){throw Zc("Non-serializable "+ja(t)+" is not supported by "+ja(this)+" encoder")},ep.prototype.encodeNull_3=function(){throw Zc("'null' is not supported by default")},ep.prototype.encodeBoolean_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeByte_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeShort_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeInt_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeLong_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeFloat_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeDouble_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeChar_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeString_3=function(t){return this.encodeValue_2(t)},ep.prototype.encodeEnum_3=function(t,e){return this.encodeValue_2(e)},ep.prototype.encodeInline_3=function(t){return this},ep.prototype.encodeBooleanElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeBoolean_3(n)},ep.prototype.encodeByteElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeByte_3(n)},ep.prototype.encodeShortElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeShort_3(n)},ep.prototype.encodeIntElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeInt_3(n)},ep.prototype.encodeLongElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeLong_3(n)},ep.prototype.encodeFloatElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeFloat_3(n)},ep.prototype.encodeDoubleElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeDouble_3(n)},ep.prototype.encodeCharElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeChar_3(n)},ep.prototype.encodeStringElement_3=function(t,e,n){this.encodeElement_2(t,e)&&this.encodeString_3(n)},ep.prototype.encodeSerializableElement_3=function(t,e,n,r){this.encodeElement_2(t,e)&&this.encodeSerializableValue_3(n,r)},ep.prototype.encodeNullableSerializableElement_3=function(t,e,n,r){this.encodeElement_2(t,e)&&this.encodeNullableSerializableValue_3(n,r)},ep.$metadata$={simpleName:"AbstractEncoder",kind:"class",interfaces:[sp,ap]},np.prototype.decodeSerializableValue_18=function(t){return t.deserialize_70(this)},np.$metadata$={simpleName:"Decoder",kind:"interface",interfaces:[]},rp.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},op.prototype.decodeSequentially_9=function(){return!1},op.prototype.decodeCollectionSize_9=function(t){return-1},op.prototype.decodeSerializableElement$default_9=function(t,e,n,r,i,o){return 0!=(8&i)&&(r=null),null==o?this.decodeSerializableElement_9(t,e,n,r):o(t,e,n,r)},op.$metadata$={simpleName:"CompositeDecoder",kind:"interface",interfaces:[]},sp.prototype.encodeNotNullMark_3=function(){},sp.prototype.beginCollection_3=function(t,e){return this.beginStructure_14(t)},sp.prototype.encodeSerializableValue_3=function(t,e){t.serialize_107(this,e)},sp.prototype.encodeNullableSerializableValue_3=function(t,e){if(t._get_descriptor__66()._get_isNullable__17())return this.encodeSerializableValue_3(Cu(t,Nc)?t:ql(),e);null==e?this.encodeNull_3():(this.encodeNotNullMark_3(),this.encodeSerializableValue_3(t,e))},sp.$metadata$={simpleName:"Encoder",kind:"interface",interfaces:[]},ap.prototype.shouldEncodeElementDefault_3=function(t,e){return!0},ap.$metadata$={simpleName:"CompositeEncoder",kind:"interface",interfaces:[]},up.prototype.serialize_107=function(t,e){var n=zc(this,t,e),r=this._get_descriptor__66(),i=t.beginStructure_14(r),o=null;try{i.encodeStringElement_3(this._get_descriptor__66(),0,n._get_descriptor__66()._get_serialName__17());var s=this._get_descriptor__66();i.encodeSerializableElement_3(s,1,Cu(n,Nc)?n:ql(),e)}catch(t){throw t instanceof Error?(o=t,t):t}finally{null==o&&i.endStructure_14(r)}},up.prototype.deserialize_70=function(t){var e;t:do{var n=this._get_descriptor__66(),r=t.beginStructure_14(n),i=null;try{var o,s=null,a=null;if(r.decodeSequentially_9())return lp(this,r);e:for(;;){var l=r.decodeElementIndex_9(this._get_descriptor__66());if(ip(),-1===l)break e;if(0===l)s=r.decodeStringElement_9(this._get_descriptor__66(),l);else{if(1!==l)throw Zc("Invalid index in polymorphic deserialization of "+(null==s?"unknown class":s)+"\n Expected 0, 1 or DECODE_DONE(-1), but found "+l);var u;n:do{var c=s;if(null==c)throw tc(zl("Cannot read polymorphic value before its type token"));u=c;break n}while(0);var h=Fc(this,r,s=u),p=this._get_descriptor__66();a=r.decodeSerializableElement$default_9(p,l,h,null,8,null)}}e:do{var d=a;if(null==d)throw tc(zl("Polymorphic value has not been read for class "+s));o=d;break e}while(0);var f=o;e=Tu(f)?f:ql();break t}catch(t){throw t instanceof Error?(i=t,t):t}finally{null==i&&r.endStructure_14(n)}}while(0);return e},up.prototype.findPolymorphicSerializerOrNull_1=function(t,e){return t._get_serializersModule__18().getPolymorphic_2(this._get_baseClass__0(),e)},up.prototype.findPolymorphicSerializerOrNull_2=function(t,e){return t._get_serializersModule__18().getPolymorphic_1(this._get_baseClass__0(),e)},up.$metadata$={simpleName:"AbstractPolymorphicSerializer",kind:"class",interfaces:[Mc]},hp.$metadata$={simpleName:"CachedNames",kind:"interface",interfaces:[]},pp.prototype._get_serialName__17=function(){return this._serialName_2},pp.$metadata$={simpleName:"PrimitiveArrayDescriptor",kind:"class",interfaces:[]},dp.prototype._get_kind__17=function(){return qh()},dp.prototype._get_elementsCount__17=function(){return this._elementsCount_0},dp.prototype.getElementName_17=function(t){return t.toString()},dp.prototype.getElementIndex_17=function(t){var e=yi(t);if(null==e)throw tc(t+" is not a valid list index");return e},dp.prototype.getElementAnnotations_17=function(t){if(!(t>=0))throw tc(zl("Illegal index "+t+", "+this._get_serialName__17()+" expects only non-negative indices"));return Tr()},dp.prototype.getElementDescriptor_17=function(t){if(!(t>=0))throw tc(zl("Illegal index "+t+", "+this._get_serialName__17()+" expects only non-negative indices"));return this._elementDescriptor},dp.prototype.equals=function(t){return this===t||t instanceof dp&&!(!Dl(this._elementDescriptor,t._elementDescriptor)||this._get_serialName__17()!==t._get_serialName__17())},dp.prototype.hashCode=function(){return _u(Rl(this._elementDescriptor),31)+Fl(this._get_serialName__17())|0},dp.prototype.toString=function(){return this._get_serialName__17()+"("+this._elementDescriptor+")"},dp.$metadata$={simpleName:"ListLikeDescriptor",kind:"class",interfaces:[dh]},fp.prototype._get_serialName__17=function(){return"kotlin.Array"},fp.$metadata$={simpleName:"ArrayClassDesc",kind:"class",interfaces:[]},_p.prototype._get_serialName__17=function(){return"kotlin.collections.ArrayList"},_p.$metadata$={simpleName:"ArrayListClassDesc",kind:"class",interfaces:[]},mp.$metadata$={simpleName:"LinkedHashMapClassDesc",kind:"class",interfaces:[]},gp.prototype._get_serialName__17=function(){return this._serialName_3},gp.prototype._get_kind__17=function(){return Hh()},gp.prototype._get_elementsCount__17=function(){return this._elementsCount_1},gp.prototype.getElementName_17=function(t){return t.toString()},gp.prototype.getElementIndex_17=function(t){var e=yi(t);if(null==e)throw tc(t+" is not a valid map index");return e},gp.prototype.getElementAnnotations_17=function(t){if(!(t>=0))throw tc(zl("Illegal index "+t+", "+this._get_serialName__17()+" expects only non-negative indices"));return Tr()},gp.prototype.getElementDescriptor_17=function(t){var e;if(!(t>=0))throw tc(zl("Illegal index "+t+", "+this._get_serialName__17()+" expects only non-negative indices"));switch(t%2){case 0:e=this._keyDescriptor;break;case 1:e=this._valueDescriptor;break;default:throw lc(zl("Unreached"))}return e},gp.prototype.equals=function(t){return this===t||t instanceof gp&&this._get_serialName__17()===t._get_serialName__17()&&!!Dl(this._keyDescriptor,t._keyDescriptor)&&!!Dl(this._valueDescriptor,t._valueDescriptor)},gp.prototype.hashCode=function(){var t=Fl(this._get_serialName__17());return t=_u(31,t)+Rl(this._keyDescriptor)|0,_u(31,t)+Rl(this._valueDescriptor)|0},gp.prototype.toString=function(){return this._get_serialName__17()+"("+this._keyDescriptor+", "+this._valueDescriptor+")"},gp.$metadata$={simpleName:"MapLikeDescriptor",kind:"class",interfaces:[dh]},yp.prototype._get_serialName__17=function(){return"kotlin.collections.HashSet"},yp.$metadata$={simpleName:"HashSetClassDesc",kind:"class",interfaces:[]},vp.prototype._get_serialName__17=function(){return"kotlin.collections.LinkedHashSet"},vp.$metadata$={simpleName:"LinkedHashSetClassDesc",kind:"class",interfaces:[]},bp.$metadata$={simpleName:"HashMapClassDesc",kind:"class",interfaces:[]},xp.prototype._get_descriptor__66=function(){return this._descriptor_0},xp.prototype.builderSize_14=function(t){return t._get_position__7()},xp.prototype.toResult_14=function(t){return t.build_8()},xp.prototype.checkCapacity_14=function(t,e){return t.ensureCapacity_8(e)},xp.prototype.collectionIterator=function(t){throw lc(zl("This method lead to boxing and must not be used, use writeContents instead"))},xp.prototype.collectionIterator_14=function(t){return this.collectionIterator(null==t||Tu(t)?t:ql())},xp.prototype.insert_8=function(t,e,n){throw lc(zl("This method lead to boxing and must not be used, use Builder.append instead"))},xp.prototype.builder_16=function(){return this.toBuilder_30(this.empty_7())},xp.prototype.serialize_3=function(t,e){var n=this.collectionSize_29(e),r=t.beginCollection_3(this._descriptor_0,n);this.writeContent_15(r,e,n),r.endStructure_14(this._descriptor_0)},xp.prototype.serialize_107=function(t,e){return this.serialize_3(t,null==e||Tu(e)?e:ql())},xp.prototype.serialize_12=function(t,e){return this.serialize_3(t,null==e||Tu(e)?e:ql())},xp.prototype.deserialize_70=function(t){return this.merge_5(t,null)},xp.$metadata$={simpleName:"PrimitiveArraySerializer",kind:"class",interfaces:[]},wp.prototype.ensureCapacity$default_7=function(t,e,n){return 0!=(1&e)&&(t=this._get_position__7()+1|0),null==n?this.ensureCapacity_8(t):n(t)},wp.$metadata$={simpleName:"PrimitiveArrayBuilder",kind:"class",interfaces:[]},Ep.prototype.serialize_12=function(t,e){var n=this.collectionSize_29(e),r=t.beginCollection_3(this._get_descriptor__66(),n),i=this.collectionIterator_14(e),o=0;if(o<n)do{var s=o;o=o+1|0,r.encodeSerializableElement_3(this._get_descriptor__66(),s,this._elementSerializer,i.next_14())}while(o<n);r.endStructure_14(this._get_descriptor__66())},Ep.prototype.serialize_107=function(t,e){return this.serialize_12(t,null==e||Tu(e)?e:ql())},Ep.prototype.readAll_5=function(t,e,n,r){if(!(r>=0))throw tc(zl("Size must be known in advance when using READ_ALL"));var i=0;if(i<r)do{var o=i;i=i+1|0,this.readElement_24(t,n+o|0,e,!1)}while(i<r)},Ep.prototype.readElement_24=function(t,e,n,r){var i=this._get_descriptor__66();this.insert_8(n,e,t.decodeSerializableElement$default_9(i,e,this._elementSerializer,null,8,null))},Ep.$metadata$={simpleName:"ListLikeSerializer",kind:"class",interfaces:[]},Sp.prototype.merge_5=function(t,e){var n=null==e?null:this.toBuilder_30(e),r=null==n?this.builder_16():n,i=this.builderSize_14(r),o=t.beginStructure_14(this._get_descriptor__66());if(o.decodeSequentially_9())this.readAll_5(o,r,i,function(t,e,n){var r=e.decodeCollectionSize_9(t._get_descriptor__66());return t.checkCapacity_14(n,r),r}(this,o,r));else t:for(;;){var s=o.decodeElementIndex_9(this._get_descriptor__66());if(ip(),-1===s)break t;this.readElement$default_5(o,i+s|0,r,!1,8,null)}return o.endStructure_14(this._get_descriptor__66()),this.toResult_14(r)},Sp.prototype.deserialize_70=function(t){return this.merge_5(t,null)},Sp.prototype.readElement$default_5=function(t,e,n,r,i,o){return 0!=(8&i)&&(r=!0),null==o?this.readElement_24(t,e,n,r):o(t,e,n,r)},Sp.$metadata$={simpleName:"AbstractCollectionSerializer",kind:"class",interfaces:[Mc]},Cp.prototype._get_descriptor__66=function(){return this._descriptor_1},Cp.prototype.collectionSize_1=function(t){return t.length},Cp.prototype.collectionSize_29=function(t){return this.collectionSize_1(null!=t&&ku(t)?t:ql())},Cp.prototype.collectionIterator_2=function(t){return wl(t)},Cp.prototype.collectionIterator_14=function(t){return this.collectionIterator_2(null!=t&&ku(t)?t:ql())},Cp.prototype.builder_16=function(){return ps()},Cp.prototype.builderSize_2=function(t){return t._get_size__29()},Cp.prototype.builderSize_14=function(t){return this.builderSize_2(t instanceof ms?t:ql())},Cp.prototype.toResult_2=function(t){return Qo(t)},Cp.prototype.toResult_14=function(t){return this.toResult_2(t instanceof ms?t:ql())},Cp.prototype.toBuilder_2=function(t){return fs(Wu(t))},Cp.prototype.toBuilder_30=function(t){return this.toBuilder_2(null!=t&&ku(t)?t:ql())},Cp.prototype.checkCapacity_2=function(t,e){return t.ensureCapacity_8(e)},Cp.prototype.checkCapacity_14=function(t,e){return this.checkCapacity_2(t instanceof ms?t:ql(),e)},Cp.prototype.insert_1=function(t,e,n){t.add_9(e,n)},Cp.prototype.insert_8=function(t,e,n){var r=t instanceof ms?t:ql();return this.insert_1(r,e,null==n||Tu(n)?n:ql())},Cp.$metadata$={simpleName:"ReferenceArraySerializer",kind:"class",interfaces:[]},Ip.prototype._get_descriptor__66=function(){return this._descriptor_2},Ip.prototype.collectionSize_3=function(t){return t._get_size__29()},Ip.prototype.collectionSize_29=function(t){return this.collectionSize_3(null!=t&&Cu(t,ul)?t:ql())},Ip.prototype.collectionIterator_4=function(t){return t.iterator_39()},Ip.prototype.collectionIterator_14=function(t){return this.collectionIterator_4(null!=t&&Cu(t,ul)?t:ql())},Ip.prototype.builder_16=function(){return ps()},Ip.prototype.builderSize_4=function(t){return t._get_size__29()},Ip.prototype.builderSize_14=function(t){return this.builderSize_4(t instanceof ms?t:ql())},Ip.prototype.toResult_4=function(t){return t},Ip.prototype.toResult_14=function(t){return this.toResult_4(t instanceof ms?t:ql())},Ip.prototype.toBuilder_4=function(t){var e=t instanceof ms?t:null;return null==e?fs(t):e},Ip.prototype.toBuilder_30=function(t){return this.toBuilder_4(null!=t&&Cu(t,ul)?t:ql())},Ip.prototype.checkCapacity_4=function(t,e){return t.ensureCapacity_8(e)},Ip.prototype.checkCapacity_14=function(t,e){return this.checkCapacity_4(t instanceof ms?t:ql(),e)},Ip.prototype.insert_3=function(t,e,n){t.add_9(e,n)},Ip.prototype.insert_8=function(t,e,n){var r=t instanceof ms?t:ql();return this.insert_3(r,e,null==n||Tu(n)?n:ql())},Ip.$metadata$={simpleName:"ArrayListSerializer",kind:"class",interfaces:[]},kp.prototype._get_descriptor__66=function(){return this._descriptor_3},kp.prototype.collectionSize_12=function(t){return t._get_size__29()},kp.prototype.collectionSize_29=function(t){return this.collectionSize_12(null!=t&&Cu(t,ll)?t:ql())},kp.prototype.collectionIterator_13=function(t){return t._get_entries__5().iterator_39()},kp.prototype.collectionIterator_14=function(t){return this.collectionIterator_13(null!=t&&Cu(t,ll)?t:ql())},kp.prototype.builder_16=function(){return Us()},kp.prototype.builderSize_6=function(t){return t._get_size__29()},kp.prototype.builderSize_14=function(t){return this.builderSize_6(t instanceof Gs?t:ql())},kp.prototype.toResult_6=function(t){return t},kp.prototype.toResult_14=function(t){return this.toResult_6(t instanceof Gs?t:ql())},kp.prototype.toBuilder_13=function(t){var e=t instanceof Gs?t:null;return null==e?function(t,e){return Ss(e),Gs.call(e),e._map_0=Cs(),e.putAll_1(t),e}(t,Object.create(Gs.prototype)):e},kp.prototype.toBuilder_30=function(t){return this.toBuilder_13(null!=t&&Cu(t,ll)?t:ql())},kp.prototype.checkCapacity_6=function(t,e){},kp.prototype.checkCapacity_14=function(t,e){return this.checkCapacity_6(t instanceof Gs?t:ql(),e)},kp.$metadata$={simpleName:"LinkedHashMapSerializer",kind:"class",interfaces:[]},Tp.prototype.readAll_5=function(t,e,n,r){if(!(r>=0))throw tc(zl("Size must be known in advance when using READ_ALL"));var i=function(t,e){return Co().fromClosedRange(t._first_1,t._last,t._step_0>0?2:-2)}(g(0,_u(r,2))),o=i._first_1,s=i._last,a=i._step_0;if(a>0&&o<=s||a<0&&s<=o)do{var l=o;o=o+a|0,this.readElement_24(t,n+l|0,e,!1)}while(l!==s)},Tp.prototype.readElement_24=function(t,e,n,r){var i,o=this._get_descriptor__66(),s=t.decodeSerializableElement$default_9(o,e,this._keySerializer,null,8,null);if(r){var a=t.decodeElementIndex_9(this._get_descriptor__66());if(a!==(e+1|0))throw tc(zl("Value must follow key in a map, index for key: "+e+", returned index for value: "+a));i=a}else i=e+1|0;var l,u=i;if(!n.containsKey_8(s)||this._valueSerializer._get_descriptor__66()._get_kind__17()instanceof jh){var c=this._get_descriptor__66();l=t.decodeSerializableElement$default_9(c,u,this._valueSerializer,null,8,null)}else l=t.decodeSerializableElement_9(this._get_descriptor__66(),u,this._valueSerializer,Wr(n,s));n.put_4(s,l),Mo()},Tp.prototype.serialize_12=function(t,e){for(var n=this.collectionSize_29(e),r=t.beginCollection_3(this._get_descriptor__66(),n),i=0,o=this.collectionIterator_14(e);o.hasNext_14();){var s=o.next_14(),a=s._get_key__3(),l=s._get_value__15(),u=this._get_descriptor__66(),c=i;i=c+1|0,r.encodeSerializableElement_3(u,c,this._keySerializer,a);var h=this._get_descriptor__66(),p=i;i=p+1|0,r.encodeSerializableElement_3(h,p,this._valueSerializer,l)}r.endStructure_14(this._get_descriptor__66())},Tp.prototype.serialize_107=function(t,e){return this.serialize_12(t,null==e||Tu(e)?e:ql())},Tp.$metadata$={simpleName:"MapLikeSerializer",kind:"class",interfaces:[]},Pp.prototype._get_descriptor__66=function(){return this._descriptor_4},Pp.prototype.collectionSize_10=function(t){return t._get_size__29()},Pp.prototype.collectionSize_29=function(t){return this.collectionSize_10(null!=t&&Cu(t,pl)?t:ql())},Pp.prototype.collectionIterator_11=function(t){return t.iterator_39()},Pp.prototype.collectionIterator_14=function(t){return this.collectionIterator_11(null!=t&&Cu(t,pl)?t:ql())},Pp.prototype.builder_16=function(){return Ps()},Pp.prototype.builderSize_9=function(t){return t._get_size__29()},Pp.prototype.builderSize_14=function(t){return this.builderSize_9(t instanceof Ms?t:ql())},Pp.prototype.toResult_9=function(t){return t},Pp.prototype.toResult_14=function(t){return this.toResult_9(t instanceof Ms?t:ql())},Pp.prototype.toBuilder_11=function(t){var e=t instanceof Ms?t:null;return null==e?function(t){return function(t,e){return hs.call(e),Ms.call(e),e._map=ks(t._get_size__29()),e.addAll_10(t),Mo(),e}(t,Object.create(Ms.prototype))}(t):e},Pp.prototype.toBuilder_30=function(t){return this.toBuilder_11(null!=t&&Cu(t,pl)?t:ql())},Pp.prototype.checkCapacity_9=function(t,e){},Pp.prototype.checkCapacity_14=function(t,e){return this.checkCapacity_9(t instanceof Ms?t:ql(),e)},Pp.prototype.insert_5=function(t,e,n){t.add_18(n),Mo()},Pp.prototype.insert_8=function(t,e,n){var r=t instanceof Ms?t:ql();return this.insert_5(r,e,null==n||Tu(n)?n:ql())},Pp.$metadata$={simpleName:"HashSetSerializer",kind:"class",interfaces:[]},Ap.prototype._get_descriptor__66=function(){return this._descriptor_5},Ap.prototype.collectionSize_10=function(t){return t._get_size__29()},Ap.prototype.collectionSize_29=function(t){return this.collectionSize_10(null!=t&&Cu(t,pl)?t:ql())},Ap.prototype.collectionIterator_11=function(t){return t.iterator_39()},Ap.prototype.collectionIterator_14=function(t){return this.collectionIterator_11(null!=t&&Cu(t,pl)?t:ql())},Ap.prototype.builder_16=function(){return t=Object.create(Zs.prototype),Os(Us(),t),Zs.call(t),t;var t},Ap.prototype.builderSize_11=function(t){return t._get_size__29()},Ap.prototype.builderSize_14=function(t){return this.builderSize_11(t instanceof Zs?t:ql())},Ap.prototype.toResult_11=function(t){return t},Ap.prototype.toResult_14=function(t){return this.toResult_11(t instanceof Zs?t:ql())},Ap.prototype.toBuilder_11=function(t){var e=t instanceof Zs?t:null;return null==e?function(t){return function(t,e){return Os(Us(),e),Zs.call(e),e.addAll_10(t),Mo(),e}(t,Object.create(Zs.prototype))}(t):e},Ap.prototype.toBuilder_30=function(t){return this.toBuilder_11(null!=t&&Cu(t,pl)?t:ql())},Ap.prototype.checkCapacity_11=function(t,e){},Ap.prototype.checkCapacity_14=function(t,e){return this.checkCapacity_11(t instanceof Zs?t:ql(),e)},Ap.prototype.insert_7=function(t,e,n){t.add_18(n),Mo()},Ap.prototype.insert_8=function(t,e,n){var r=t instanceof Zs?t:ql();return this.insert_7(r,e,null==n||Tu(n)?n:ql())},Ap.$metadata$={simpleName:"LinkedHashSetSerializer",kind:"class",interfaces:[]},Op.prototype._get_descriptor__66=function(){return this._descriptor_6},Op.prototype.collectionSize_12=function(t){return t._get_size__29()},Op.prototype.collectionSize_29=function(t){return this.collectionSize_12(null!=t&&Cu(t,ll)?t:ql())},Op.prototype.collectionIterator_13=function(t){return t._get_entries__5().iterator_39()},Op.prototype.collectionIterator_14=function(t){return this.collectionIterator_13(null!=t&&Cu(t,ll)?t:ql())},Op.prototype.builder_16=function(){return Cs()},Op.prototype.builderSize_13=function(t){return t._get_size__29()},Op.prototype.builderSize_14=function(t){return this.builderSize_13(t instanceof Ts?t:ql())},Op.prototype.toResult_13=function(t){return t},Op.prototype.toResult_14=function(t){return this.toResult_13(t instanceof Ts?t:ql())},Op.prototype.toBuilder_13=function(t){var e=t instanceof Ts?t:null;return null==e?function(t,e){return Ss(e),e.putAll_1(t),e}(t,Object.create(Ts.prototype)):e},Op.prototype.toBuilder_30=function(t){return this.toBuilder_13(null!=t&&Cu(t,ll)?t:ql())},Op.prototype.checkCapacity_13=function(t,e){},Op.prototype.checkCapacity_14=function(t,e){return this.checkCapacity_13(t instanceof Ts?t:ql(),e)},Op.$metadata$={simpleName:"HashMapSerializer",kind:"class",interfaces:[]},Mp.prototype.invoke_94=function(t){for(var e=this._this$0_10._values_0,n=0,r=e.length;n<r;){var i=e[n];n=n+1|0;var o=mh(this._$serialName+"."+i._name,Wh(),[],null,12);t.element$default(i._name,o,null,!1,12,null)}},Mp.prototype.invoke_103=function(t){return this.invoke_94(t instanceof gh?t:ql()),Mo()},Mp.$metadata$={kind:"class",interfaces:[]},Lp.prototype._get_descriptor__66=function(){return this._descriptor_7},Lp.prototype.serialize_107=function(t,e){var n,o,s=r(this._values_0,e);if(-1===s)throw Zc(e+" is not a valid enum "+this._descriptor_7._get_serialName__17()+", must be one of "+(null==(o=null==(n=this._values_0)?null:i(n,", ","[","]",0,null,null,56))?"null":o));t.encodeEnum_3(this._descriptor_7,s)},Lp.prototype.deserialize_70=function(t){var e=t.decodeEnum_9(this._descriptor_7);if(!(0<=e&&e<=(this._values_0.length-1|0)))throw Zc(e+" is not among valid "+this._descriptor_7._get_serialName__17()+" enum values, values size is "+this._values_0.length);return this._values_0[e]},Lp.prototype.toString=function(){return"kotlinx.serialization.internal.EnumSerializer<"+this._descriptor_7._get_serialName__17()+">"},Lp.$metadata$={simpleName:"EnumSerializer",kind:"class",interfaces:[Mc]},Dp.prototype._get_isInline__17=function(){return this._isInline},Dp.prototype.hashCode=function(){return _u(ed.prototype.hashCode.call(this),31)},Dp.prototype.equals=function(t){var e;t:do{if(this===t){e=!0;break t}if(!(t instanceof Dp)){e=!1;break t}if(this._get_serialName__17()!==t._get_serialName__17()){e=!1;break t}var n=t;if(!n._isInline||!Zu(this._get_typeParameterDescriptors__0(),n._get_typeParameterDescriptors__0())){e=!1;break t}if(this._get_elementsCount__17()!==t._get_elementsCount__17()){e=!1;break t}var r=0,i=this._get_elementsCount__17();if(r<i)do{var o=r;if(r=r+1|0,this.getElementDescriptor_17(o)._get_serialName__17()!==t.getElementDescriptor_17(o)._get_serialName__17()){e=!1;break t}if(!Dl(this.getElementDescriptor_17(o)._get_kind__17(),t.getElementDescriptor_17(o)._get_kind__17())){e=!1;break t}}while(r<i);e=!0}while(0);return e},Dp.$metadata$={simpleName:"InlineClassDescriptor",kind:"class",interfaces:[]},Rp.prototype.childSerializers_15=function(){return[this._$primitiveSerializer]},Rp.prototype._get_descriptor__66=function(){throw lc(zl("unsupported"))},Rp.prototype.serialize_107=function(t,e){throw lc(zl("unsupported"))},Rp.prototype.deserialize_70=function(t){throw lc(zl("unsupported"))},Rp.$metadata$={kind:"class",interfaces:[nd]},zp.prototype._get_descriptor__66=function(){return this._descriptor_8},zp.prototype.serialize_19=function(t,e){var n=t.encodeInline_3(this._descriptor_8);null==n||(n.encodeInt_3(e),Mo()),Mo()},zp.prototype.serialize_107=function(t,e){return this.serialize_19(t,e instanceof Zi?e._data_0:ql())},zp.prototype.deserialize_15=function(t){return t.decodeInline_9(this._descriptor_8).decodeInt_9()},zp.prototype.deserialize_70=function(t){return new Zi(this.deserialize_15(t))},zp.$metadata$={simpleName:"UIntSerializer",kind:"object",interfaces:[Mc]},Fp.prototype._get_descriptor__66=function(){return this._descriptor_9},Fp.prototype.serialize_21=function(t,e){var n=t.encodeInline_3(this._descriptor_9);null==n||(n.encodeLong_3(e),Mo()),Mo()},Fp.prototype.serialize_107=function(t,e){return this.serialize_21(t,e instanceof Ji?e._data_1:ql())},Fp.prototype.deserialize_17=function(t){return t.decodeInline_9(this._descriptor_9).decodeLong_9()},Fp.prototype.deserialize_70=function(t){return new Ji(this.deserialize_17(t))},Fp.$metadata$={simpleName:"ULongSerializer",kind:"object",interfaces:[Mc]},Bp.prototype._get_descriptor__66=function(){return this._descriptor_10},Bp.prototype.serialize_23=function(t,e){var n=t.encodeInline_3(this._descriptor_10);null==n||(n.encodeByte_3(e),Mo()),Mo()},Bp.prototype.serialize_107=function(t,e){return this.serialize_23(t,e instanceof Ui?e._data:ql())},Bp.prototype.deserialize_19=function(t){return t.decodeInline_9(this._descriptor_10).decodeByte_9()},Bp.prototype.deserialize_70=function(t){return new Ui(this.deserialize_19(t))},Bp.$metadata$={simpleName:"UByteSerializer",kind:"object",interfaces:[Mc]},jp.prototype._get_descriptor__66=function(){return this._descriptor_11},jp.prototype.serialize_25=function(t,e){var n=t.encodeInline_3(this._descriptor_11);null==n||(n.encodeShort_3(e),Mo()),Mo()},jp.prototype.serialize_107=function(t,e){return this.serialize_25(t,e instanceof ro?e._data_2:ql())},jp.prototype.deserialize_21=function(t){return t.decodeInline_9(this._descriptor_11).decodeShort_9()},jp.prototype.deserialize_70=function(t){return new ro(this.deserialize_21(t))},jp.$metadata$={simpleName:"UShortSerializer",kind:"object",interfaces:[Mc]},Up.prototype._get_descriptor__66=function(){return this._descriptor_12},Up.prototype.serialize_27=function(t,e){null!=e?(t.encodeNotNullMark_3(),t.encodeSerializableValue_3(this._serializer,e)):t.encodeNull_3()},Up.prototype.serialize_107=function(t,e){return this.serialize_27(t,null==e||Tu(e)?e:ql())},Up.prototype.deserialize_70=function(t){return t.decodeNotNullMark_9()?t.decodeSerializableValue_18(this._serializer):t.decodeNull_9()},Up.prototype.equals=function(t){return this===t||!(null==t||!ja(this).equals(ja(t)))&&(t instanceof Up||ql(),Mo(),!!Dl(this._serializer,t._serializer))},Up.prototype.hashCode=function(){return Rl(this._serializer)},Up.$metadata$={simpleName:"NullableSerializer",kind:"class",interfaces:[Mc]},$p.prototype.getElementAnnotations_17=function(t){return this._original_0.getElementAnnotations_17(t)},$p.prototype.getElementDescriptor_17=function(t){return this._original_0.getElementDescriptor_17(t)},$p.prototype.getElementIndex_17=function(t){return this._original_0.getElementIndex_17(t)},$p.prototype.getElementName_17=function(t){return this._original_0.getElementName_17(t)},$p.prototype._get_elementsCount__17=function(){return this._original_0._get_elementsCount__17()},$p.prototype._get_isInline__17=function(){return this._original_0._get_isInline__17()},$p.prototype._get_kind__17=function(){return this._original_0._get_kind__17()},$p.prototype._get_serialName__17=function(){return this._serialName_4},$p.prototype._get_serialNames__3=function(){return this._serialNames_0},$p.prototype._get_isNullable__17=function(){return!0},$p.prototype.equals=function(t){return this===t||t instanceof $p&&!!Dl(this._original_0,t._original_0)},$p.prototype.toString=function(){return this._original_0+"?"},$p.prototype.hashCode=function(){return _u(Rl(this._original_0),31)},$p.$metadata$={simpleName:"SerialDescriptorForNullable",kind:"class",interfaces:[dh,hp]},qp.prototype._get_descriptor__66=function(){return this._descriptor_13},qp.prototype.serialize_107=function(t,e){t.beginStructure_14(this._descriptor_13).endStructure_14(this._descriptor_13)},qp.prototype.deserialize_70=function(t){return t.beginStructure_14(this._descriptor_13).endStructure_14(this._descriptor_13),this._objectInstance},qp.$metadata$={simpleName:"ObjectSerializer",kind:"class",interfaces:[Mc]},Kp.prototype.invoke_97=function(){var t=this._this$0_11._generatedSerializer,e=null==t?null:t.childSerializers_15();return null==e?[]:e},Kp.$metadata$={kind:"class",interfaces:[]},Jp.prototype.invoke_97=function(){var t,e=this._this$0_12._generatedSerializer,n=null==e?null:e.typeParametersSerializers_15();if(null==n)t=null;else{for(var r=ds(),i=wl(n);i.hasNext_14();){var o=i.next_14();r.add_18(o._get_descriptor__66()),Mo()}t=r}return Gp(t)},Jp.$metadata$={kind:"class",interfaces:[]},Qp.prototype.invoke_97=function(){return Wp(this._this$0_13,this._this$0_13._get_typeParameterDescriptors__0())},Qp.$metadata$={kind:"class",interfaces:[]},td.prototype.invoke_102=function(t){return this._this$0_14.getElementName_17(t)+": "+this._this$0_14.getElementDescriptor_17(t)._get_serialName__17()},td.prototype.invoke_103=function(t){return this.invoke_102(null!=t&&"number"==typeof t?t:ql())},td.$metadata$={kind:"class",interfaces:[]},ed.prototype._get_serialName__17=function(){return this._serialName_5},ed.prototype._get_elementsCount__17=function(){return this._elementsCount_2},ed.prototype._get_kind__17=function(){return Uh()},ed.prototype._get_serialNames__3=function(){return this._indices._get_keys__5()},ed.prototype._get_typeParameterDescriptors__0=function(){var t=this._typeParameterDescriptors$delegate;return wu("typeParameterDescriptors",1,ua,function(t){return t._get_typeParameterDescriptors__0()},null),t._get_value__15()},ed.prototype.addElement_0=function(t,e){var n=this;n._added=n._added+1|0,this._names[n._added]=t,this._elementsOptionality[this._added]=e,this._propertiesAnnotations[this._added]=null,this._added===(this._elementsCount_2-1|0)&&(this._indices=function(t){var e=Cs(),n=0,r=t._names.length-1|0;if(n<=r)do{var i=n;n=n+1|0,e.put_4(t._names[i],i),Mo()}while(n<=r);return e}(this))},ed.prototype.getElementDescriptor_17=function(t){return rf(Xp(this),t)._get_descriptor__66()},ed.prototype.getElementAnnotations_17=function(t){var e=rf(this._propertiesAnnotations,t);return null==e?Tr():e},ed.prototype.getElementName_17=function(t){return rf(this._names,t)},ed.prototype.getElementIndex_17=function(t){var e,n=this._indices.get_17(t);return null==n?(ip(),e=-3):e=n,e},ed.prototype.equals=function(t){var e;t:do{if(this===t){e=!0;break t}if(!(t instanceof ed)){e=!1;break t}if(this._get_serialName__17()!==t._get_serialName__17()){e=!1;break t}var n=t;if(!Zu(this._get_typeParameterDescriptors__0(),n._get_typeParameterDescriptors__0())){e=!1;break t}if(this._get_elementsCount__17()!==t._get_elementsCount__17()){e=!1;break t}var r=0,i=this._get_elementsCount__17();if(r<i)do{var o=r;if(r=r+1|0,this.getElementDescriptor_17(o)._get_serialName__17()!==t.getElementDescriptor_17(o)._get_serialName__17()){e=!1;break t}if(!Dl(this.getElementDescriptor_17(o)._get_kind__17(),t.getElementDescriptor_17(o)._get_kind__17())){e=!1;break t}}while(r<i);e=!0}while(0);return e},ed.prototype.hashCode=function(){return Yp(this)},ed.prototype.toString=function(){var t;return a(g(0,this._elementsCount_2),", ",this._get_serialName__17()+"(",")",0,null,(t=new td(this),function(e){return t.invoke_102(e)}),24)},ed.$metadata$={simpleName:"PluginGeneratedSerialDescriptor",kind:"class",interfaces:[dh,hp]},nd.prototype.typeParametersSerializers_15=function(){return Ut},nd.$metadata$={simpleName:"GeneratedSerializer",kind:"interface",interfaces:[Mc]},rd.$metadata$={simpleName:"SerializerFactory",kind:"interface",interfaces:[]},id.prototype.collectionSize_14=function(t){return t.length},id.prototype.collectionSize_29=function(t){return this.collectionSize_14(null!=t&&Nu(t)?t:ql())},id.prototype.toBuilder_15=function(t){return new pd(t)},id.prototype.toBuilder_30=function(t){return this.toBuilder_15(null!=t&&Nu(t)?t:ql())},id.prototype.empty_7=function(){return Sl(0)},id.prototype.readElement_9=function(t,e,n,r){n.append_15(t.decodeCharElement_9(this._get_descriptor__66(),e))},id.prototype.readElement_24=function(t,e,n,r){return this.readElement_9(t,e,n instanceof pd?n:ql(),r)},id.prototype.writeContent_0=function(t,e,n){var r=0;if(r<n)do{var i=r;r=r+1|0,t.encodeCharElement_3(this._get_descriptor__66(),i,e[i])}while(r<n)},id.prototype.writeContent_15=function(t,e,n){return this.writeContent_0(t,null!=e&&Nu(e)?e:ql(),n)},id.$metadata$={simpleName:"CharArraySerializer",kind:"object",interfaces:[Mc]},od.prototype.collectionSize_16=function(t){return t.length},od.prototype.collectionSize_29=function(t){return this.collectionSize_16(null!=t&&Fu(t)?t:ql())},od.prototype.toBuilder_17=function(t){return new dd(t)},od.prototype.toBuilder_30=function(t){return this.toBuilder_17(null!=t&&Fu(t)?t:ql())},od.prototype.empty_7=function(){return new Float64Array(0)},od.prototype.readElement_11=function(t,e,n,r){n.append_7(t.decodeDoubleElement_9(this._get_descriptor__66(),e))},od.prototype.readElement_24=function(t,e,n,r){return this.readElement_11(t,e,n instanceof dd?n:ql(),r)},od.prototype.writeContent_2=function(t,e,n){var r=0;if(r<n)do{var i=r;r=r+1|0,t.encodeDoubleElement_3(this._get_descriptor__66(),i,e[i])}while(r<n)},od.prototype.writeContent_15=function(t,e,n){return this.writeContent_2(t,null!=e&&Fu(e)?e:ql(),n)},od.$metadata$={simpleName:"DoubleArraySerializer",kind:"object",interfaces:[Mc]},sd.prototype.collectionSize_18=function(t){return t.length},sd.prototype.collectionSize_29=function(t){return this.collectionSize_18(null!=t&&Ru(t)?t:ql())},sd.prototype.toBuilder_19=function(t){return new fd(t)},sd.prototype.toBuilder_30=function(t){return this.toBuilder_19(null!=t&&Ru(t)?t:ql())},sd.prototype.empty_7=function(){return new Float32Array(0)},sd.prototype.readElement_13=function(t,e,n,r){n.append_8(t.decodeFloatElement_9(this._get_descriptor__66(),e))},sd.prototype.readElement_24=function(t,e,n,r){return this.readElement_13(t,e,n instanceof fd?n:ql(),r)},sd.prototype.writeContent_4=function(t,e,n){var r=0;if(r<n)do{var i=r;r=r+1|0,t.encodeFloatElement_3(this._get_descriptor__66(),i,e[i])}while(r<n)},sd.prototype.writeContent_15=function(t,e,n){return this.writeContent_4(t,null!=e&&Ru(e)?e:ql(),n)},sd.$metadata$={simpleName:"FloatArraySerializer",kind:"object",interfaces:[Mc]},ad.prototype.collectionSize_20=function(t){return t.length},ad.prototype.collectionSize_29=function(t){return this.collectionSize_20(null!=t&&zu(t)?t:ql())},ad.prototype.toBuilder_21=function(t){return new _d(t)},ad.prototype.toBuilder_30=function(t){return this.toBuilder_21(null!=t&&zu(t)?t:ql())},ad.prototype.empty_7=function(){return(t=xl(Array(0),new Kl(0,0))).$type$="LongArray",t;var t},ad.prototype.readElement_15=function(t,e,n,r){n.append_14(t.decodeLongElement_9(this._get_descriptor__66(),e))},ad.prototype.readElement_24=function(t,e,n,r){return this.readElement_15(t,e,n instanceof _d?n:ql(),r)},ad.prototype.writeContent_6=function(t,e,n){var r=0;if(r<n)do{var i=r;r=r+1|0,t.encodeLongElement_3(this._get_descriptor__66(),i,e[i])}while(r<n)},ad.prototype.writeContent_15=function(t,e,n){return this.writeContent_6(t,null!=e&&zu(e)?e:ql(),n)},ad.$metadata$={simpleName:"LongArraySerializer",kind:"object",interfaces:[Mc]},ld.prototype.collectionSize_22=function(t){return t.length},ld.prototype.collectionSize_29=function(t){return this.collectionSize_22(null!=t&&Du(t)?t:ql())},ld.prototype.toBuilder_23=function(t){return new md(t)},ld.prototype.toBuilder_30=function(t){return this.toBuilder_23(null!=t&&Du(t)?t:ql())},ld.prototype.empty_7=function(){return new Int32Array(0)},ld.prototype.readElement_17=function(t,e,n,r){n.append_10(t.decodeIntElement_9(this._get_descriptor__66(),e))},ld.prototype.readElement_24=function(t,e,n,r){return this.readElement_17(t,e,n instanceof md?n:ql(),r)},ld.prototype.writeContent_8=function(t,e,n){var r=0;if(r<n)do{var i=r;r=r+1|0,t.encodeIntElement_3(this._get_descriptor__66(),i,e[i])}while(r<n)},ld.prototype.writeContent_15=function(t,e,n){return this.writeContent_8(t,null!=e&&Du(e)?e:ql(),n)},ld.$metadata$={simpleName:"IntArraySerializer",kind:"object",interfaces:[Mc]},ud.prototype.collectionSize_24=function(t){return t.length},ud.prototype.collectionSize_29=function(t){return this.collectionSize_24(null!=t&&Lu(t)?t:ql())},ud.prototype.toBuilder_25=function(t){return new gd(t)},ud.prototype.toBuilder_30=function(t){return this.toBuilder_25(null!=t&&Lu(t)?t:ql())},ud.prototype.empty_7=function(){return new Int16Array(0)},ud.prototype.readElement_19=function(t,e,n,r){n.append_11(t.decodeShortElement_9(this._get_descriptor__66(),e))},ud.prototype.readElement_24=function(t,e,n,r){return this.readElement_19(t,e,n instanceof gd?n:ql(),r)},ud.prototype.writeContent_10=function(t,e,n){var r=0;if(r<n)do{var i=r;r=r+1|0,t.encodeShortElement_3(this._get_descriptor__66(),i,e[i])}while(r<n)},ud.prototype.writeContent_15=function(t,e,n){return this.writeContent_10(t,null!=e&&Lu(e)?e:ql(),n)},ud.$metadata$={simpleName:"ShortArraySerializer",kind:"object",interfaces:[Mc]},cd.prototype.collectionSize_26=function(t){return t.length},cd.prototype.collectionSize_29=function(t){return this.collectionSize_26(null!=t&&Mu(t)?t:ql())},cd.prototype.toBuilder_27=function(t){return new yd(t)},cd.prototype.toBuilder_30=function(t){return this.toBuilder_27(null!=t&&Mu(t)?t:ql())},cd.prototype.empty_7=function(){return new Int8Array(0)},cd.prototype.readElement_21=function(t,e,n,r){n.append_12(t.decodeByteElement_9(this._get_descriptor__66(),e))},cd.prototype.readElement_24=function(t,e,n,r){return this.readElement_21(t,e,n instanceof yd?n:ql(),r)},cd.prototype.writeContent_12=function(t,e,n){var r=0;if(r<n)do{var i=r;r=r+1|0,t.encodeByteElement_3(this._get_descriptor__66(),i,e[i])}while(r<n)},cd.prototype.writeContent_15=function(t,e,n){return this.writeContent_12(t,null!=e&&Mu(e)?e:ql(),n)},cd.$metadata$={simpleName:"ByteArraySerializer",kind:"object",interfaces:[Mc]},hd.prototype.collectionSize_28=function(t){return t.length},hd.prototype.collectionSize_29=function(t){return this.collectionSize_28(null!=t&&Ou(t)?t:ql())},hd.prototype.toBuilder_29=function(t){return new vd(t)},hd.prototype.toBuilder_30=function(t){return this.toBuilder_29(null!=t&&Ou(t)?t:ql())},hd.prototype.empty_7=function(){return El(0)},hd.prototype.readElement_23=function(t,e,n,r){n.append_13(t.decodeBooleanElement_9(this._get_descriptor__66(),e))},hd.prototype.readElement_24=function(t,e,n,r){return this.readElement_23(t,e,n instanceof vd?n:ql(),r)},hd.prototype.writeContent_14=function(t,e,n){var r=0;if(r<n)do{var i=r;r=r+1|0,t.encodeBooleanElement_3(this._get_descriptor__66(),i,e[i])}while(r<n)},hd.prototype.writeContent_15=function(t,e,n){return this.writeContent_14(t,null!=e&&Ou(e)?e:ql(),n)},hd.$metadata$={simpleName:"BooleanArraySerializer",kind:"object",interfaces:[Mc]},pd.prototype._get_position__7=function(){return this._position},pd.prototype.ensureCapacity_8=function(t){this._buffer.length<t&&(this._buffer=Bu(this._buffer,y(t,_u(this._buffer.length,2))))},pd.prototype.append_15=function(t){this.ensureCapacity$default_7(0,1,null);var e=this._buffer,n=this._position;this._position=n+1|0,e[n]=t},pd.prototype.build_8=function(){return Bu(this._buffer,this._position)},pd.$metadata$={simpleName:"CharArrayBuilder",kind:"class",interfaces:[]},dd.prototype._get_position__7=function(){return this._position_0},dd.prototype.ensureCapacity_8=function(t){this._buffer_0.length<t&&(this._buffer_0=ju(this._buffer_0,y(t,_u(this._buffer_0.length,2))))},dd.prototype.append_7=function(t){this.ensureCapacity$default_7(0,1,null);var e=this._buffer_0,n=this._position_0;this._position_0=n+1|0,e[n]=t},dd.prototype.build_8=function(){return ju(this._buffer_0,this._position_0)},dd.$metadata$={simpleName:"DoubleArrayBuilder",kind:"class",interfaces:[]},fd.prototype._get_position__7=function(){return this._position_1},fd.prototype.ensureCapacity_8=function(t){this._buffer_1.length<t&&(this._buffer_1=Vu(this._buffer_1,y(t,_u(this._buffer_1.length,2))))},fd.prototype.append_8=function(t){this.ensureCapacity$default_7(0,1,null);var e=this._buffer_1,n=this._position_1;this._position_1=n+1|0,e[n]=t},fd.prototype.build_8=function(){return Vu(this._buffer_1,this._position_1)},fd.$metadata$={simpleName:"FloatArrayBuilder",kind:"class",interfaces:[]},_d.prototype._get_position__7=function(){return this._position_2},_d.prototype.ensureCapacity_8=function(t){this._buffer_2.length<t&&(this._buffer_2=Uu(this._buffer_2,y(t,_u(this._buffer_2.length,2))))},_d.prototype.append_14=function(t){this.ensureCapacity$default_7(0,1,null);var e=this._buffer_2,n=this._position_2;this._position_2=n+1|0,e[n]=t},_d.prototype.build_8=function(){return Uu(this._buffer_2,this._position_2)},_d.$metadata$={simpleName:"LongArrayBuilder",kind:"class",interfaces:[]},md.prototype._get_position__7=function(){return this._position_3},md.prototype.ensureCapacity_8=function(t){this._buffer_3.length<t&&(this._buffer_3=$u(this._buffer_3,y(t,_u(this._buffer_3.length,2))))},md.prototype.append_10=function(t){this.ensureCapacity$default_7(0,1,null);var e=this._buffer_3,n=this._position_3;this._position_3=n+1|0,e[n]=t},md.prototype.build_8=function(){return $u(this._buffer_3,this._position_3)},md.$metadata$={simpleName:"IntArrayBuilder",kind:"class",interfaces:[]},gd.prototype._get_position__7=function(){return this._position_4},gd.prototype.ensureCapacity_8=function(t){this._buffer_4.length<t&&(this._buffer_4=qu(this._buffer_4,y(t,_u(this._buffer_4.length,2))))},gd.prototype.append_11=function(t){this.ensureCapacity$default_7(0,1,null);var e=this._buffer_4,n=this._position_4;this._position_4=n+1|0,e[n]=t},gd.prototype.build_8=function(){return qu(this._buffer_4,this._position_4)},gd.$metadata$={simpleName:"ShortArrayBuilder",kind:"class",interfaces:[]},yd.prototype._get_position__7=function(){return this._position_5},yd.prototype.ensureCapacity_8=function(t){this._buffer_5.length<t&&(this._buffer_5=Gu(this._buffer_5,y(t,_u(this._buffer_5.length,2))))},yd.prototype.append_12=function(t){this.ensureCapacity$default_7(0,1,null);var e=this._buffer_5,n=this._position_5;this._position_5=n+1|0,e[n]=t},yd.prototype.build_8=function(){return Gu(this._buffer_5,this._position_5)},yd.$metadata$={simpleName:"ByteArrayBuilder",kind:"class",interfaces:[]},vd.prototype._get_position__7=function(){return this._position_6},vd.prototype.ensureCapacity_8=function(t){this._buffer_6.length<t&&(this._buffer_6=Hu(this._buffer_6,y(t,_u(this._buffer_6.length,2))))},vd.prototype.append_13=function(t){this.ensureCapacity$default_7(0,1,null);var e=this._buffer_6,n=this._position_6;this._position_6=n+1|0,e[n]=t},vd.prototype.build_8=function(){return Hu(this._buffer_6,this._position_6)},vd.$metadata$={simpleName:"BooleanArrayBuilder",kind:"class",interfaces:[]},bd.prototype._get_descriptor__66=function(){return this._descriptor_14},bd.prototype.serialize_38=function(t,e){return t.encodeString_3(e)},bd.prototype.serialize_107=function(t,e){return this.serialize_38(t,null!=e&&"string"==typeof e?e:ql())},bd.prototype.deserialize_70=function(t){return t.decodeString_9()},bd.$metadata$={simpleName:"StringSerializer",kind:"object",interfaces:[Mc]},wd.prototype._get_descriptor__66=function(){return this._descriptor_15},wd.prototype.serialize_40=function(t,e){return t.encodeChar_3(e)},wd.prototype.serialize_107=function(t,e){return this.serialize_40(t,e instanceof ol?e:ql())},wd.prototype.deserialize_70=function(t){return t.decodeChar_9()},wd.$metadata$={simpleName:"CharSerializer",kind:"object",interfaces:[Mc]},Ed.prototype._get_descriptor__66=function(){return this._descriptor_16},Ed.prototype.serialize_42=function(t,e){return t.encodeDouble_3(e)},Ed.prototype.serialize_107=function(t,e){return this.serialize_42(t,null!=e&&"number"==typeof e?e:ql())},Ed.prototype.deserialize_70=function(t){return t.decodeDouble_9()},Ed.$metadata$={simpleName:"DoubleSerializer",kind:"object",interfaces:[Mc]},Cd.prototype._get_descriptor__66=function(){return this._descriptor_17},Cd.prototype.serialize_44=function(t,e){return t.encodeFloat_3(e)},Cd.prototype.serialize_107=function(t,e){return this.serialize_44(t,null!=e&&"number"==typeof e?e:ql())},Cd.prototype.deserialize_70=function(t){return t.decodeFloat_9()},Cd.$metadata$={simpleName:"FloatSerializer",kind:"object",interfaces:[Mc]},Id.prototype._get_descriptor__66=function(){return this._descriptor_18},Id.prototype.serialize_46=function(t,e){return t.encodeLong_3(e)},Id.prototype.serialize_107=function(t,e){return this.serialize_46(t,e instanceof Kl?e:ql())},Id.prototype.deserialize_70=function(t){return t.decodeLong_9()},Id.$metadata$={simpleName:"LongSerializer",kind:"object",interfaces:[Mc]},kd.prototype._get_descriptor__66=function(){return this._descriptor_19},kd.prototype.serialize_48=function(t,e){return t.encodeInt_3(e)},kd.prototype.serialize_107=function(t,e){return this.serialize_48(t,null!=e&&"number"==typeof e?e:ql())},kd.prototype.deserialize_70=function(t){return t.decodeInt_9()},kd.$metadata$={simpleName:"IntSerializer",kind:"object",interfaces:[Mc]},Pd.prototype._get_descriptor__66=function(){return this._descriptor_20},Pd.prototype.serialize_50=function(t,e){return t.encodeShort_3(e)},Pd.prototype.serialize_107=function(t,e){return this.serialize_50(t,null!=e&&"number"==typeof e?e:ql())},Pd.prototype.deserialize_70=function(t){return t.decodeShort_9()},Pd.$metadata$={simpleName:"ShortSerializer",kind:"object",interfaces:[Mc]},Ad.prototype._get_descriptor__66=function(){return this._descriptor_21},Ad.prototype.serialize_52=function(t,e){return t.encodeByte_3(e)},Ad.prototype.serialize_107=function(t,e){return this.serialize_52(t,null!=e&&"number"==typeof e?e:ql())},Ad.prototype.deserialize_70=function(t){return t.decodeByte_9()},Ad.$metadata$={simpleName:"ByteSerializer",kind:"object",interfaces:[Mc]},Od.prototype._get_descriptor__66=function(){return this._descriptor_22},Od.prototype.serialize_54=function(t,e){return t.encodeBoolean_3(e)},Od.prototype.serialize_107=function(t,e){return this.serialize_54(t,null!=e&&"boolean"==typeof e?e:ql())},Od.prototype.deserialize_70=function(t){return t.decodeBoolean_9()},Od.$metadata$={simpleName:"BooleanSerializer",kind:"object",interfaces:[Mc]},Ld.prototype.deserialize_42=function(t){this._$$delegate_0.deserialize_70(t)},Ld.prototype.deserialize_70=function(t){return this.deserialize_42(t),Mo()},Ld.prototype.serialize_56=function(t,e){this._$$delegate_0.serialize_107(t,Mo())},Ld.prototype.serialize_107=function(t,e){return this.serialize_56(t,e instanceof Oo?e:ql())},Ld.prototype._get_descriptor__66=function(){return this._$$delegate_0._descriptor_13},Ld.$metadata$={simpleName:"UnitSerializer",kind:"object",interfaces:[Mc]},Dd.prototype._get_serialName__17=function(){return this._serialName_6},Dd.prototype._get_kind__17=function(){return this._kind_0},Dd.prototype._get_elementsCount__17=function(){return 0},Dd.prototype.getElementName_17=function(t){Nd()},Dd.prototype.getElementIndex_17=function(t){Nd()},Dd.prototype.getElementDescriptor_17=function(t){Nd()},Dd.prototype.getElementAnnotations_17=function(t){Nd()},Dd.prototype.toString=function(){return"PrimitiveDescriptor("+this._serialName_6+")"},Dd.$metadata$={simpleName:"PrimitiveSerialDescriptor",kind:"class",interfaces:[dh]},Rd.prototype.getTag_5=function(t,e){return this.nested_4(this.elementName_4(t,e))},Rd.prototype.nested_4=function(t){var e=this._get_currentTagOrNull__5();return this.composeName_4(null==e?"":e,t)},Rd.prototype.elementName_4=function(t,e){return t.getElementName_17(e)},Rd.prototype.composeName_4=function(t,e){return 0===Pl(t)?e:t+"."+e},Rd.$metadata$={simpleName:"NamedValueDecoder",kind:"class",interfaces:[]},Fd.prototype.invoke_97=function(){return this._this$0_15.decodeSerializableValue_19(this._$deserializer,this._$previousValue)},Fd.$metadata$={kind:"class",interfaces:[]},Bd.prototype.invoke_97=function(){return this._this$0_16.decodeNotNullMark_9()?this._this$0_16.decodeSerializableValue_19(this._$deserializer_0,this._$previousValue_0):this._this$0_16.decodeNull_9()},Bd.$metadata$={kind:"class",interfaces:[]},jd.prototype._get_serializersModule__18=function(){return ue},jd.prototype.decodeTaggedValue_0=function(t){throw Zc(ja(this)+" can't retrieve untyped values")},jd.prototype.decodeTaggedNotNullMark_2=function(t){return!0},jd.prototype.decodeTaggedBoolean_2=function(t){var e=this.decodeTaggedValue_0(t);return"boolean"==typeof e?e:ql()},jd.prototype.decodeTaggedByte_2=function(t){var e=this.decodeTaggedValue_0(t);return"number"==typeof e?e:ql()},jd.prototype.decodeTaggedShort_2=function(t){var e=this.decodeTaggedValue_0(t);return"number"==typeof e?e:ql()},jd.prototype.decodeTaggedInt_2=function(t){var e=this.decodeTaggedValue_0(t);return"number"==typeof e?e:ql()},jd.prototype.decodeTaggedLong_2=function(t){var e=this.decodeTaggedValue_0(t);return e instanceof Kl?e:ql()},jd.prototype.decodeTaggedFloat_2=function(t){var e=this.decodeTaggedValue_0(t);return"number"==typeof e?e:ql()},jd.prototype.decodeTaggedDouble_2=function(t){var e=this.decodeTaggedValue_0(t);return"number"==typeof e?e:ql()},jd.prototype.decodeTaggedChar_2=function(t){var e=this.decodeTaggedValue_0(t);return e instanceof ol?e:ql()},jd.prototype.decodeTaggedString_2=function(t){var e=this.decodeTaggedValue_0(t);return"string"==typeof e?e:ql()},jd.prototype.decodeTaggedEnum_2=function(t,e){var n=this.decodeTaggedValue_0(t);return"number"==typeof n?n:ql()},jd.prototype.decodeTaggedInline_2=function(t,e){return this.pushTag_0(t),this},jd.prototype.decodeSerializableValue_19=function(t,e){return this.decodeSerializableValue_18(t)},jd.prototype.decodeInline_9=function(t){return this.decodeTaggedInline_2(this.popTag_5(),t)},jd.prototype.decodeNotNullMark_9=function(){var t=this._get_currentTagOrNull__5();return null!=t&&this.decodeTaggedNotNullMark_2(t)},jd.prototype.decodeNull_9=function(){return null},jd.prototype.decodeBoolean_9=function(){return this.decodeTaggedBoolean_2(this.popTag_5())},jd.prototype.decodeByte_9=function(){return this.decodeTaggedByte_2(this.popTag_5())},jd.prototype.decodeShort_9=function(){return this.decodeTaggedShort_2(this.popTag_5())},jd.prototype.decodeInt_9=function(){return this.decodeTaggedInt_2(this.popTag_5())},jd.prototype.decodeLong_9=function(){return this.decodeTaggedLong_2(this.popTag_5())},jd.prototype.decodeFloat_9=function(){return this.decodeTaggedFloat_2(this.popTag_5())},jd.prototype.decodeDouble_9=function(){return this.decodeTaggedDouble_2(this.popTag_5())},jd.prototype.decodeChar_9=function(){return this.decodeTaggedChar_2(this.popTag_5())},jd.prototype.decodeString_9=function(){return this.decodeTaggedString_2(this.popTag_5())},jd.prototype.decodeEnum_9=function(t){return this.decodeTaggedEnum_2(this.popTag_5(),t)},jd.prototype.beginStructure_14=function(t){return this},jd.prototype.endStructure_14=function(t){},jd.prototype.decodeBooleanElement_9=function(t,e){return this.decodeTaggedBoolean_2(this.getTag_5(t,e))},jd.prototype.decodeByteElement_9=function(t,e){return this.decodeTaggedByte_2(this.getTag_5(t,e))},jd.prototype.decodeShortElement_9=function(t,e){return this.decodeTaggedShort_2(this.getTag_5(t,e))},jd.prototype.decodeIntElement_9=function(t,e){return this.decodeTaggedInt_2(this.getTag_5(t,e))},jd.prototype.decodeLongElement_9=function(t,e){return this.decodeTaggedLong_2(this.getTag_5(t,e))},jd.prototype.decodeFloatElement_9=function(t,e){return this.decodeTaggedFloat_2(this.getTag_5(t,e))},jd.prototype.decodeDoubleElement_9=function(t,e){return this.decodeTaggedDouble_2(this.getTag_5(t,e))},jd.prototype.decodeCharElement_9=function(t,e){return this.decodeTaggedChar_2(this.getTag_5(t,e))},jd.prototype.decodeStringElement_9=function(t,e){return this.decodeTaggedString_2(this.getTag_5(t,e))},jd.prototype.decodeSerializableElement_9=function(t,e,n,r){var i;return zd(this,this.getTag_5(t,e),(i=new Fd(this,n,r),function(){return i.invoke_97()}))},jd.prototype.decodeNullableSerializableElement_9=function(t,e,n,r){var i;return zd(this,this.getTag_5(t,e),(i=new Bd(this,n,r),function(){return i.invoke_97()}))},jd.prototype._get_currentTagOrNull__5=function(){return(t=this._tagStack).isEmpty_29()?null:t.get_29(t._get_size__29()-1|0);var t},jd.prototype.pushTag_0=function(t){this._tagStack.add_18(t),Mo()},jd.prototype.popTag_5=function(){var t=this._tagStack.removeAt_2(Pr(this._tagStack));return this._flag=!0,t},jd.$metadata$={simpleName:"TaggedDecoder",kind:"class",interfaces:[np,op]},Vd.prototype._get_key__3=function(){return this._key_0},Vd.prototype._get_value__15=function(){return this._value_1},Vd.prototype.toString=function(){return"MapEntry(key="+this._key_0+", value="+this._value_1+")"},Vd.prototype.hashCode=function(){return _u(null==this._key_0?0:Rl(this._key_0),31)+(null==this._value_1?0:Rl(this._value_1))|0},Vd.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof Vd))return!1;var e=t instanceof Vd?t:ql();return!!Dl(this._key_0,e._key_0)&&!!Dl(this._value_1,e._value_1)},Vd.$metadata$={simpleName:"MapEntry",kind:"class",interfaces:[al]},Ud.prototype.invoke_94=function(t){var e=this._$keySerializer._get_descriptor__66();t.element$default("key",e,null,!1,12,null);var n=this._$valueSerializer._get_descriptor__66();t.element$default("value",n,null,!1,12,null)},Ud.prototype.invoke_103=function(t){return this.invoke_94(t instanceof gh?t:ql()),Mo()},Ud.$metadata$={kind:"class",interfaces:[]},$d.prototype._get_descriptor__66=function(){return this._descriptor_23},$d.prototype._get_key__4=function(t){return t._get_key__3()},$d.prototype._get_key__8=function(t){return this._get_key__4(null!=t&&Cu(t,al)?t:ql())},$d.prototype._get_value__6=function(t){return t._get_value__15()},$d.prototype._get_value__10=function(t){return this._get_value__6(null!=t&&Cu(t,al)?t:ql())},$d.prototype.toResult_25=function(t,e){return new Vd(t,e)},$d.$metadata$={simpleName:"MapEntrySerializer",kind:"class",interfaces:[]},qd.prototype.invoke_94=function(t){var e=this._$keySerializer_0._get_descriptor__66();t.element$default("first",e,null,!1,12,null);var n=this._$valueSerializer_0._get_descriptor__66();t.element$default("second",n,null,!1,12,null)},qd.prototype.invoke_103=function(t){return this.invoke_94(t instanceof gh?t:ql()),Mo()},qd.$metadata$={kind:"class",interfaces:[]},Gd.prototype._get_descriptor__66=function(){return this._descriptor_24},Gd.prototype._get_key__6=function(t){return t._first},Gd.prototype._get_key__8=function(t){return this._get_key__6(t instanceof Di?t:ql())},Gd.prototype._get_value__8=function(t){return t._second},Gd.prototype._get_value__10=function(t){return this._get_value__8(t instanceof Di?t:ql())},Gd.prototype.toResult_25=function(t,e){return Ri(t,e)},Gd.$metadata$={simpleName:"PairSerializer",kind:"class",interfaces:[]},Hd.prototype.invoke_94=function(t){var e=this._this$0_17._aSerializer._get_descriptor__66();t.element$default("first",e,null,!1,12,null);var n=this._this$0_17._bSerializer._get_descriptor__66();t.element$default("second",n,null,!1,12,null);var r=this._this$0_17._cSerializer._get_descriptor__66();t.element$default("third",r,null,!1,12,null)},Hd.prototype.invoke_103=function(t){return this.invoke_94(t instanceof gh?t:ql()),Mo()},Hd.$metadata$={kind:"class",interfaces:[]},Zd.prototype._get_descriptor__66=function(){return this._descriptor_25},Zd.prototype.serialize_60=function(t,e){var n=t.beginStructure_14(this._descriptor_25);n.encodeSerializableElement_3(this._descriptor_25,0,this._aSerializer,e._first_0),n.encodeSerializableElement_3(this._descriptor_25,1,this._bSerializer,e._second_0),n.encodeSerializableElement_3(this._descriptor_25,2,this._cSerializer,e._third),n.endStructure_14(this._descriptor_25)},Zd.prototype.serialize_107=function(t,e){return this.serialize_60(t,e instanceof zi?e:ql())},Zd.prototype.deserialize_70=function(t){var e=t.beginStructure_14(this._descriptor_25);return e.decodeSequentially_9()?function(t,e){var n=e.decodeSerializableElement$default_9(t._descriptor_25,0,t._aSerializer,null,8,null),r=e.decodeSerializableElement$default_9(t._descriptor_25,1,t._bSerializer,null,8,null),i=e.decodeSerializableElement$default_9(t._descriptor_25,2,t._cSerializer,null,8,null);return e.endStructure_14(t._descriptor_25),new zi(n,r,i)}(this,e):function(t,e){var n=le,r=le,i=le;t:for(;;){var o=e.decodeElementIndex_9(t._descriptor_25);if(ip(),-1===o)break t;if(0===o)n=e.decodeSerializableElement$default_9(t._descriptor_25,0,t._aSerializer,null,8,null);else if(1===o)r=e.decodeSerializableElement$default_9(t._descriptor_25,1,t._bSerializer,null,8,null);else{if(2!==o)throw Zc("Unexpected index "+o);i=e.decodeSerializableElement$default_9(t._descriptor_25,2,t._cSerializer,null,8,null)}}if(e.endStructure_14(t._descriptor_25),n===le)throw Zc("Element 'first' is missing");if(r===le)throw Zc("Element 'second' is missing");if(i===le)throw Zc("Element 'third' is missing");return new zi(null==n||Tu(n)?n:ql(),null==r||Tu(r)?r:ql(),null==i||Tu(i)?i:ql())}(this,e)},Zd.$metadata$={simpleName:"TripleSerializer",kind:"class",interfaces:[Mc]},Wd.prototype.serialize_62=function(t,e){var n=t.beginStructure_14(this._get_descriptor__66());n.encodeSerializableElement_3(this._get_descriptor__66(),0,this._keySerializer_0,this._get_key__8(e)),n.encodeSerializableElement_3(this._get_descriptor__66(),1,this._valueSerializer_0,this._get_value__10(e)),n.endStructure_14(this._get_descriptor__66())},Wd.prototype.serialize_107=function(t,e){return this.serialize_62(t,null==e||Tu(e)?e:ql())},Wd.prototype.deserialize_70=function(t){var e=t.beginStructure_14(this._get_descriptor__66());if(e.decodeSequentially_9()){var n=this._get_descriptor__66(),r=e.decodeSerializableElement$default_9(n,0,this._keySerializer_0,null,8,null),i=this._get_descriptor__66(),o=e.decodeSerializableElement$default_9(i,1,this._valueSerializer_0,null,8,null);return this.toResult_25(r,o)}var s=le,a=le;t:for(;;){var l=e.decodeElementIndex_9(this._get_descriptor__66());if(ip(),-1===l)break t;if(0===l){var u=this._get_descriptor__66();s=e.decodeSerializableElement$default_9(u,0,this._keySerializer_0,null,8,null)}else{if(1!==l)throw Zc("Invalid index: "+l);var c=this._get_descriptor__66();a=e.decodeSerializableElement$default_9(c,1,this._valueSerializer_0,null,8,null)}}if(e.endStructure_14(this._get_descriptor__66()),s===le)throw Zc("Element 'key' is missing");if(a===le)throw Zc("Element 'value' is missing");var h=null==s||Tu(s)?s:ql();return this.toResult_25(h,null==a||Tu(a)?a:ql())},Wd.$metadata$={simpleName:"KeyValueSerializer",kind:"class",interfaces:[Mc]},Xd.prototype.getContextual$default=function(t,e,n,r){return 0!=(2&n)&&(e=Tr()),null==r?this.getContextual_0(t,e):r(t,e)},Xd.$metadata$={simpleName:"SerializersModule",kind:"class",interfaces:[]};Yd.prototype.getPolymorphic_1=function(t,e){if(!t.isInstance_4(e))return null;var n=this._polyBase2Serializers.get_17(t),r=null==n?null:n.get_17(ja(e));return null!=r&&Cu(r,Nc)?r:null},Yd.prototype.getPolymorphic_2=function(t,e){var n=this._polyBase2NamedSerializers.get_17(t),r=null==n?null:(null!=n&&Cu(n,ll)?n:ql()).get_17(e),i=null!=r&&Cu(r,Mc)?r:null;if(null!=i)return i;var o=this._polyBase2DefaultProvider.get_17(t),s=null!=o&&"function"==typeof o?o:null;return null==s?null:s(e)},Yd.prototype.getContextual_0=function(t,e){var n=this._class2ContextualFactory.get_17(t),r=null==n?null:n.invoke_85(e);return null==r||Cu(r,Mc)?r:null},Yd.prototype.dumpTo_0=function(t){for(var e=this._class2ContextualFactory._get_entries__5().iterator_39();e.hasNext_14();){var n=e.next_14(),r=n._get_key__3(),i=n._get_value__15(),o=i;if(o instanceof Kd){var s=Cu(r,na)?r:ql(),a=i._serializer_0;t.contextual_2(s,Cu(a,Mc)?a:ql())}else o instanceof Jd&&t.contextual_1(r,i._provider)}for(var l=this._polyBase2Serializers._get_entries__5().iterator_39();l.hasNext_14();)for(var u=l.next_14(),c=u._get_key__3(),h=u._get_value__15()._get_entries__5().iterator_39();h.hasNext_14();){var p=h.next_14(),d=p._get_key__3(),f=p._get_value__15(),_=Cu(c,na)?c:ql(),m=Cu(d,na)?d:ql();t.polymorphic_0(_,m,Cu(f,Mc)?f:ql())}for(var g=this._polyBase2DefaultProvider._get_entries__5().iterator_39();g.hasNext_14();){var y=g.next_14(),v=y._get_key__3(),b=y._get_value__15(),x=Cu(v,na)?v:ql();t.polymorphicDefault_0(x,"function"==typeof b?b:ql())}},Yd.$metadata$={simpleName:"SerialModuleImpl",kind:"class",interfaces:[]},Kd.$metadata$={simpleName:"Argless",kind:"class",interfaces:[]},Jd.$metadata$={simpleName:"WithTypeArguments",kind:"class",interfaces:[]},Qd.$metadata$={simpleName:"ContextualProvider",kind:"class",interfaces:[]},tf.prototype.invoke_85=function(t){return this._$serializer},tf.prototype.invoke_103=function(t){return this.invoke_85(null!=t&&Cu(t,ul)?t:ql())},tf.$metadata$={kind:"class",interfaces:[]},ef.prototype.contextual_2=function(t,e){return this.contextual_1(t,(n=new tf(e),function(t){return n.invoke_85(t)}));var n},ef.$metadata$={simpleName:"SerializersModuleCollector",kind:"interface",interfaces:[]},nf.$metadata$={simpleName:"SerializableWith",kind:"class",interfaces:[fo],associatedObjectKey:0},sf.$metadata$={simpleName:"Default",kind:"object",interfaces:[]},lf.prototype._get_configuration__3=function(){return this._configuration},lf.prototype._get_serializersModule__18=function(){return this._serializersModule},lf.prototype.encodeToString_2=function(t,e){var n,r,i,o=new Rm;try{var s=bm(),a=[bm(),xm(),wm(),Em()].length;return(n=o,r=s,i=xl(Array(a),null),function(t,e,n,r,i){return em.call(i,new s_(t,e),e,n,r),i}(n,this,r,i,Object.create(em.prototype))).encodeSerializableValue_3(t,e),o.toString()}finally{o.release()}},lf.prototype.decodeFromString_2=function(t,e){var n=new A_(e),r=new Q_(this,bm(),n).decodeSerializableValue_18(t);return n.expectEof(),r},lf.prototype.decodeFromJsonElement_1=function(t,e){return function(t,e,n){var r,i=e;return i instanceof yf?r=um(t,e,null,null,12):i instanceof Pf?r=new dm(t,e):i instanceof If||Dl(i,Cf())?r=new fm(t,e instanceof bf?e:ql()):$l(),r.decodeSerializableValue_18(n)}(this,e,t)},lf.$metadata$={simpleName:"Json",kind:"class",interfaces:[jc]},uf.prototype.build_8=function(){if(this._useArrayPolymorphism&&"type"!==this._classDiscriminator)throw tc(zl("Class discriminator should not be specified when array polymorphism is specified"));if(this._prettyPrint){if("    "!==this._prettyPrintIndent){var t;t:do{for(var e=this._prettyPrintIndent,n=0,r=e.length;n<r;){var i=kl(e,n);if(n=n+1|0,!(i.equals(new ol(32))||i.equals(new ol(9))||i.equals(new ol(13))||i.equals(new ol(10)))){t=!1;break t}}t=!0}while(0);if(!t)throw tc(zl("Only whitespace, tab, newline and carriage return are allowed as pretty print symbols. Had "+this._prettyPrintIndent))}}else if("    "!==this._prettyPrintIndent)throw tc(zl("Indent should not be specified when default printing mode is used"));return new hf(this._encodeDefaults,this._ignoreUnknownKeys,this._isLenient,this._allowStructuredMapKeys,this._prettyPrint,this._prettyPrintIndent,this._coerceInputValues,this._useArrayPolymorphism,this._classDiscriminator,this._allowSpecialFloatingPointValues,this._useAlternativeNames)},uf.$metadata$={simpleName:"JsonBuilder",kind:"class",interfaces:[]},cf.$metadata$={simpleName:"JsonImpl",kind:"class",interfaces:[]},hf.prototype.toString=function(){return"JsonConfiguration(encodeDefaults="+this._encodeDefaults_0+", ignoreUnknownKeys="+this._ignoreUnknownKeys_0+", isLenient="+this._isLenient_0+", allowStructuredMapKeys="+this._allowStructuredMapKeys_0+", prettyPrint="+this._prettyPrint_0+", prettyPrintIndent='"+this._prettyPrintIndent_0+"', coerceInputValues="+this._coerceInputValues_0+", useArrayPolymorphism="+this._useArrayPolymorphism_0+", classDiscriminator='"+this._classDiscriminator_0+"', allowSpecialFloatingPointValues="+this._allowSpecialFloatingPointValues_0+")"},hf.$metadata$={simpleName:"JsonConfiguration",kind:"class",interfaces:[]},pf.prototype._get_descriptor__66=function(){return this._descriptor_26},pf.prototype.serialize_107=function(t,e){var n,r=t._get_serializersModule__18().getPolymorphic_1(this._baseClass_0,e),i=null==r?Kc(ja(e)):r;null==i?function(t,e,n){var r=e._get_simpleName__4();throw Zc("Class '"+(null==r?""+e:r)+"' is not registered for polymorphic serialization in the scope of '"+n._get_simpleName__4()+"'.\nMark the base class as 'sealed' or register the serializer explicitly.")}(0,ja(e),this._baseClass_0):n=i;var o=n;(Cu(o,Mc)?o:ql()).serialize_107(t,e)},pf.prototype.deserialize_70=function(t){var e=e_(t),n=e.decodeJsonElement_5(),r=this.selectDeserializer_0(n),i=Cu(r,Mc)?r:ql();return e._get_json__9().decodeFromJsonElement_1(i,n)},pf.$metadata$={simpleName:"JsonContentPolymorphicSerializer",kind:"class",interfaces:[Mc]},df.$metadata$={simpleName:"JsonDecoder",kind:"interface",interfaces:[np,op]},ff.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},_f.$metadata$={simpleName:"JsonElement",kind:"class",interfaces:[],associatedObjects:{0:Uf}},mf.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},gf.prototype.invoke_87=function(t){var e=t._get_key__3(),n=t._get_value__15(),r=qa();return im(r,e),r.append_1(new ol(58)),Mo(),r.append_4(n),Mo(),r.toString()},gf.prototype.invoke_103=function(t){return this.invoke_87(null!=t&&Cu(t,al)?t:ql())},gf.$metadata$={kind:"class",interfaces:[]},yf.prototype.containsKey_7=function(t){return this._content.containsKey_8(t)},yf.prototype.containsKey_8=function(t){return null!=t&&"string"==typeof t&&this.containsKey_7(null!=t&&"string"==typeof t?t:ql())},yf.prototype.get_16=function(t){return this._content.get_17(t)},yf.prototype.get_17=function(t){return null==t||"string"!=typeof t?null:this.get_16(null!=t&&"string"==typeof t?t:ql())},yf.prototype.isEmpty_29=function(){return this._content.isEmpty_29()},yf.prototype._get_entries__5=function(){return this._content._get_entries__5()},yf.prototype._get_keys__5=function(){return this._content._get_keys__5()},yf.prototype._get_size__29=function(){return this._content._get_size__29()},yf.prototype.equals=function(t){return Dl(this._content,t)},yf.prototype.hashCode=function(){return Rl(this._content)},yf.prototype.toString=function(){var t;return a(this._content._get_entries__5(),",","{","}",0,null,(t=new gf,function(e){return t.invoke_87(e)}),24)},yf.$metadata$={simpleName:"JsonObject",kind:"class",interfaces:[ll],associatedObjects:{0:Nf}},vf.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},bf.prototype.toString=function(){return this._get_content__1()},bf.$metadata$={simpleName:"JsonPrimitive",kind:"class",interfaces:[],associatedObjects:{0:qf}},Sf.prototype._get_content__1=function(){return this._content_0},Sf.$metadata$={simpleName:"JsonNull",kind:"object",interfaces:[]},If.prototype._get_content__1=function(){return this._content_1},If.prototype.toString=function(){var t;if(this._isString){var e=qa();im(e,this._content_1),t=e.toString()}else t=this._content_1;return t},If.prototype.equals=function(t){return this===t||!(null==t||!ja(this).equals(ja(t)))&&(t instanceof If||ql(),Mo(),this._isString===t._isString&&this._content_1===t._content_1)},If.prototype.hashCode=function(){return _u(31,0|this._isString)+Fl(this._content_1)|0},If.$metadata$={simpleName:"JsonLiteral",kind:"class",interfaces:[]},Tf.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Pf.prototype.contains_26=function(t){return this._content_2.contains_27(t)},Pf.prototype.contains_27=function(t){return t instanceof _f&&this.contains_26(t instanceof _f?t:ql())},Pf.prototype.containsAll_21=function(t){return this._content_2.containsAll_22(t)},Pf.prototype.containsAll_22=function(t){return this.containsAll_21(t)},Pf.prototype.get_29=function(t){return this._content_2.get_29(t)},Pf.prototype.indexOf_5=function(t){return this._content_2.indexOf_6(t)},Pf.prototype.indexOf_6=function(t){return t instanceof _f?this.indexOf_5(t instanceof _f?t:ql()):-1},Pf.prototype.isEmpty_29=function(){return this._content_2.isEmpty_29()},Pf.prototype.iterator_39=function(){return this._content_2.iterator_39()},Pf.prototype.listIterator_4=function(t){return this._content_2.listIterator_4(t)},Pf.prototype.subList_4=function(t,e){return this._content_2.subList_4(t,e)},Pf.prototype._get_size__29=function(){return this._content_2._get_size__29()},Pf.prototype.equals=function(t){return Dl(this._content_2,t)},Pf.prototype.hashCode=function(){return Rl(this._content_2)},Pf.prototype.toString=function(){return a(this._content_2,",","[","]",0,null,null,56)},Pf.$metadata$={simpleName:"JsonArray",kind:"class",interfaces:[ul],associatedObjects:{0:t_}},Mf.prototype.getElementAnnotations_17=function(t){return this._$$delegate_0_0.getElementAnnotations_17(t)},Mf.prototype.getElementDescriptor_17=function(t){return this._$$delegate_0_0.getElementDescriptor_17(t)},Mf.prototype.getElementIndex_17=function(t){return this._$$delegate_0_0.getElementIndex_17(t)},Mf.prototype.getElementName_17=function(t){return this._$$delegate_0_0.getElementName_17(t)},Mf.prototype._get_elementsCount__17=function(){return this._$$delegate_0_0._get_elementsCount__17()},Mf.prototype._get_isInline__17=function(){return this._$$delegate_0_0._get_isInline__17()},Mf.prototype._get_isNullable__17=function(){return this._$$delegate_0_0._get_isNullable__17()},Mf.prototype._get_kind__17=function(){return this._$$delegate_0_0._get_kind__17()},Mf.prototype._get_serialName__17=function(){return this._serialName_7},Mf.$metadata$={simpleName:"JsonObjectDescriptor",kind:"object",interfaces:[dh]},Lf.prototype._get_descriptor__66=function(){return this._descriptor_27},Lf.prototype.serialize_65=function(t,e){Zf(t),ch(th(Ho()),Uf()).serialize_107(t,e)},Lf.prototype.serialize_107=function(t,e){return this.serialize_65(t,e instanceof yf?e:ql())},Lf.prototype.deserialize_70=function(t){return Wf(t),new yf(ch(th(Ho()),Uf()).deserialize_70(t))},Lf.$metadata$={simpleName:"JsonObjectSerializer",kind:"object",interfaces:[Mc]},Df.prototype.invoke_97=function(){return qf()._descriptor_29},Df.$metadata$={kind:"class",interfaces:[]},Rf.prototype.invoke_97=function(){return Hf()._descriptor_30},Rf.$metadata$={kind:"class",interfaces:[]},zf.prototype.invoke_97=function(){return Kf()._descriptor_31},zf.$metadata$={kind:"class",interfaces:[]},Ff.prototype.invoke_97=function(){return Nf()._descriptor_27},Ff.$metadata$={kind:"class",interfaces:[]},Bf.prototype.invoke_97=function(){return t_()._descriptor_32},Bf.$metadata$={kind:"class",interfaces:[]},jf.prototype.invoke_94=function(t){var e,n=Xf((e=new Df,function(){return e.invoke_97()}));t.element$default("JsonPrimitive",n,null,!1,12,null);var r=Xf(function(){var t=new Rf;return function(){return t.invoke_97()}}());t.element$default("JsonNull",r,null,!1,12,null);var i=Xf(function(){var t=new zf;return function(){return t.invoke_97()}}());t.element$default("JsonLiteral",i,null,!1,12,null);var o=Xf(function(){var t=new Ff;return function(){return t.invoke_97()}}());t.element$default("JsonObject",o,null,!1,12,null);var s=Xf(function(){var t=new Bf;return function(){return t.invoke_97()}}());t.element$default("JsonArray",s,null,!1,12,null)},jf.prototype.invoke_103=function(t){return this.invoke_94(t instanceof gh?t:ql()),Mo()},jf.$metadata$={kind:"class",interfaces:[]},Vf.prototype._get_descriptor__66=function(){return this._descriptor_28},Vf.prototype.serialize_67=function(t,e){Zf(t);var n=e;n instanceof bf?t.encodeSerializableValue_3(qf(),e):n instanceof yf?t.encodeSerializableValue_3(Nf(),e):n instanceof Pf&&t.encodeSerializableValue_3(t_(),e)},Vf.prototype.serialize_107=function(t,e){return this.serialize_67(t,e instanceof _f?e:ql())},Vf.prototype.deserialize_70=function(t){return e_(t).decodeJsonElement_5()},Vf.$metadata$={simpleName:"JsonElementSerializer",kind:"object",interfaces:[Mc]},$f.prototype._get_descriptor__66=function(){return this._descriptor_29},$f.prototype.serialize_69=function(t,e){var n;if(Zf(t),e instanceof Sf)n=t.encodeSerializableValue_3(Hf(),Cf());else{var r=Kf();n=t.encodeSerializableValue_3(r,e instanceof If?e:ql())}return n},$f.prototype.serialize_107=function(t,e){return this.serialize_69(t,e instanceof bf?e:ql())},$f.prototype.deserialize_70=function(t){var e=e_(t).decodeJsonElement_5();if(!(e instanceof bf))throw u_(-1,"Unexpected JSON element, expected JsonPrimitive, had "+ja(e),zl(e));return e},$f.$metadata$={simpleName:"JsonPrimitiveSerializer",kind:"object",interfaces:[Mc]},Gf.prototype._get_descriptor__66=function(){return this._descriptor_30},Gf.prototype.serialize_71=function(t,e){Zf(t),t.encodeNull_3()},Gf.prototype.serialize_107=function(t,e){return this.serialize_71(t,e instanceof Sf?e:ql())},Gf.prototype.deserialize_70=function(t){if(Wf(t),t.decodeNotNullMark_9())throw new l_("Expected 'null' literal");return t.decodeNull_9(),Mo(),Cf()},Gf.$metadata$={simpleName:"JsonNullSerializer",kind:"object",interfaces:[Mc]},Yf.prototype._get_descriptor__66=function(){return this._descriptor_31},Yf.prototype.serialize_73=function(t,e){if(Zf(t),e._isString)return t.encodeString_3(e._content_1);var n=bi(e._get_content__1());if(null!=n)return t.encodeLong_3(n);Mo();var r=io(e._content_1);if(null!=(null==r?null:new Ji(r))){var i=t.encodeInline_3(uh(Xi())._get_descriptor__66());return null==i||(i.encodeLong_3(r),Mo()),Mo(),Mo()}Mo();var o=function(t){var e=+t;return Ks(e)&&!Ja(t)||0===e&&Qa(t)?null:e}(e._get_content__1());if(null!=o)return t.encodeDouble_3(o);Mo();var s=Af(e);if(null!=s)return t.encodeBoolean_3(s);Mo(),t.encodeString_3(e._content_1)},Yf.prototype.serialize_107=function(t,e){return this.serialize_73(t,e instanceof If?e:ql())},Yf.prototype.deserialize_70=function(t){var e=e_(t).decodeJsonElement_5();if(!(e instanceof If))throw u_(-1,"Unexpected JSON element, expected JsonLiteral, had "+ja(e),zl(e));return e},Yf.$metadata$={simpleName:"JsonLiteralSerializer",kind:"object",interfaces:[Mc]},Jf.prototype.getElementAnnotations_17=function(t){return this._$$delegate_0_1.getElementAnnotations_17(t)},Jf.prototype.getElementDescriptor_17=function(t){return this._$$delegate_0_1.getElementDescriptor_17(t)},Jf.prototype.getElementIndex_17=function(t){return this._$$delegate_0_1.getElementIndex_17(t)},Jf.prototype.getElementName_17=function(t){return this._$$delegate_0_1.getElementName_17(t)},Jf.prototype._get_elementsCount__17=function(){return this._$$delegate_0_1._get_elementsCount__17()},Jf.prototype._get_isInline__17=function(){return this._$$delegate_0_1._get_isInline__17()},Jf.prototype._get_isNullable__17=function(){return this._$$delegate_0_1._get_isNullable__17()},Jf.prototype._get_kind__17=function(){return this._$$delegate_0_1._get_kind__17()},Jf.prototype._get_serialName__17=function(){return this._serialName_8},Jf.$metadata$={simpleName:"JsonArrayDescriptor",kind:"object",interfaces:[dh]},Qf.prototype._get_descriptor__66=function(){return this._descriptor_32},Qf.prototype.serialize_75=function(t,e){Zf(t),hh(Uf()).serialize_107(t,e)},Qf.prototype.serialize_107=function(t,e){return this.serialize_75(t,e instanceof Pf?e:ql())},Qf.prototype.deserialize_70=function(t){return Wf(t),new Pf(hh(Uf()).deserialize_70(t))},Qf.$metadata$={simpleName:"JsonArraySerializer",kind:"object",interfaces:[Mc]},r_.prototype._get_serialName__17=function(){return n_(this)._get_serialName__17()},r_.prototype._get_kind__17=function(){return n_(this)._get_kind__17()},r_.prototype._get_elementsCount__17=function(){return n_(this)._get_elementsCount__17()},r_.prototype.getElementName_17=function(t){return n_(this).getElementName_17(t)},r_.prototype.getElementIndex_17=function(t){return n_(this).getElementIndex_17(t)},r_.prototype.getElementAnnotations_17=function(t){return n_(this).getElementAnnotations_17(t)},r_.prototype.getElementDescriptor_17=function(t){return n_(this).getElementDescriptor_17(t)},r_.$metadata$={kind:"class",interfaces:[dh]},i_.$metadata$={simpleName:"JsonEncoder",kind:"interface",interfaces:[sp,ap]},o_.$metadata$={simpleName:"JsonNames",kind:"class",interfaces:[fo]},s_.prototype.indent_0=function(){this._writingFirst=!0,this._level=this._level+1|0,Mo()},s_.prototype.unIndent_0=function(){this._level=this._level-1|0,Mo()},s_.prototype.nextItem_0=function(){if(this._writingFirst=!1,this._json._configuration._prettyPrint_0){this.print_13("\n");var t=this._level,e=0;if(e<t)do{e=e+1|0,this.print_13(this._json._configuration._prettyPrintIndent_0)}while(e<t)}},s_.prototype.space_0=function(){this._json._configuration._prettyPrint_0&&this.print_12(new ol(32))},s_.prototype.print_12=function(t){return this._sb.append_15(t)},s_.prototype.print_13=function(t){return this._sb.append_16(t)},s_.prototype.print_14=function(t){return this._sb.append_16(t.toString())},s_.prototype.print_15=function(t){return this._sb.append_16(t.toString())},s_.prototype.print_10=function(t){return this._sb.append_14(bu(t))},s_.prototype.print_11=function(t){return this._sb.append_14(bu(t))},s_.prototype.print_8=function(t){return this._sb.append_14(bu(t))},s_.prototype.print_9=function(t){return this._sb.append_14(t)},s_.prototype.print_16=function(t){return this._sb.append_16(t.toString())},s_.prototype.printQuoted_0=function(t){return this._sb.appendQuoted(t)},s_.$metadata$={simpleName:"Composer",kind:"class",interfaces:[]},a_.prototype.print_8=function(t){return s_.prototype.print_13.call(this,Hi(t))},a_.prototype.print_9=function(t){return s_.prototype.print_13.call(this,Ki(t))},a_.prototype.print_10=function(t){return s_.prototype.print_13.call(this,Vi(t))},a_.prototype.print_11=function(t){return s_.prototype.print_13.call(this,no(t))},a_.$metadata$={simpleName:"ComposerForUnsignedNumbers",kind:"class",interfaces:[]},l_.$metadata$={simpleName:"JsonDecodingException",kind:"class",interfaces:[]},c_.$metadata$={simpleName:"JsonEncodingException",kind:"class",interfaces:[]},m_.$metadata$={simpleName:"JsonException",kind:"class",interfaces:[]},A_.prototype.expectEof=function(){if(10!==this.consumeNextToken_1()){var t="Expected EOF, but had "+kl(this._source,this._currentPosition-1|0)+" instead";this.fail$default(t,0,2,null)}},A_.prototype.tryConsumeComma=function(){var t=E_(this);return t!==this._source.length&&!!kl(this._source,t).equals(new ol(44))&&(this._currentPosition=this._currentPosition+1|0,Mo(),!0)},A_.prototype.canConsumeValue=function(){for(var t=this._currentPosition;t<this._source.length;){var e=kl(this._source,t);if(!(e.equals(new ol(32))||e.equals(new ol(10))||e.equals(new ol(13))||e.equals(new ol(9))))return this._currentPosition=t,b_(0,e);t=t+1|0,Mo()}return this._currentPosition=t,!1},A_.prototype.consumeNextToken=function(t){var e=this.consumeNextToken_1();return e!==t&&w_(this,t),e},A_.prototype.consumeNextToken_0=function(t){for(var e=this._source;this._currentPosition<e.length;){var n=this._currentPosition;this._currentPosition=n+1|0;var r=kl(e,n);if(!(r.equals(new ol(32))||r.equals(new ol(10))||r.equals(new ol(13))||r.equals(new ol(9)))){if(r.equals(t))return Mo();x_(this,t)}}x_(this,t)},A_.prototype.peekNextToken=function(){for(var t=this._source;this._currentPosition<t.length;){var e=kl(t,this._currentPosition);if(!(e.equals(new ol(32))||e.equals(new ol(10))||e.equals(new ol(13))||e.equals(new ol(9))))return O_(e);this._currentPosition=this._currentPosition+1|0,Mo()}return 10},A_.prototype.consumeNextToken_1=function(){for(var t=this._source;this._currentPosition<t.length;){var e=this._currentPosition;this._currentPosition=e+1|0;var n=O_(kl(t,e));if(3!==n)return n}return 10},A_.prototype.tryConsumeNotNull=function(){var t=E_(this);if((this._source.length-t|0)<4)return!0;var e=0;if(e<=3)do{var n=e;if(e=e+1|0,!kl("null",n).equals(kl(this._source,t+n|0)))return!0}while(e<=3);return this._currentPosition=t+4|0,!1},A_.prototype.peekString=function(t){var e,n=this.peekNextToken();if(t){if(1!==n&&0!==n)return null;e=this.consumeStringLenient()}else{if(1!==n)return null;e=this.consumeString()}var r=e;return this._peekedString=r,r},A_.prototype.consumeKeyString=function(){this.consumeNextToken_0(new ol(34));var t=this._currentPosition,e=new ol(34),n=function(t,e,n,r){var i,o;if("string"!=typeof t)i=function(t,e,n,r){if(1===e.length&&"string"==typeof t){var i=t,o=function(t){var e;switch(t.length){case 0:throw sc("Array is empty.");case 1:e=t[0];break;default:throw tc("Array has more than one element.")}return e}(e).toString();return i.indexOf(o,n)}var s=y(n,0),a=wi(t);if(s<=a)do{var l=s;s=s+1|0;var u,c=kl(t,l);t:do{for(var h=e,p=0,d=h.length;p<d;){var f=h[p];if(p=p+1|0,di(f,c,!1)){u=!0;break t}}u=!1}while(0);if(u)return l}while(l!==a);return-1}(t,((o=[e].slice()).$type$="CharArray",o),n);else{var s=t,a=e.toString();i=s.indexOf(a,n)}return i}(this._source,e,t);-1===n&&w_(this,1);var r=t;if(r<n)do{var i=r;if(r=r+1|0,kl(this._source,i).equals(new ol(92)))return S_(this,this._currentPosition,i)}while(r<n);return this._currentPosition=n+1|0,this._source.substring(t,n)},A_.prototype.consumeString=function(){return null!=this._peekedString?I_(this):this.consumeKeyString()},A_.prototype.consumeStringLenient=function(){if(null!=this._peekedString)return I_(this);var t=E_(this);t>=this._source.length&&this.fail("EOF",t);var e=O_(kl(this._source,t));if(1===e)return this.consumeString();if(0!==e){var n="Expected beginning of the string, but got "+kl(this._source,t);this.fail$default(n,0,2,null)}for(;t<this._source.length&&0===O_(kl(this._source,t));)t=t+1|0,Mo();var r=this._source.substring(this._currentPosition,t);return this._currentPosition=t,r},A_.prototype.skipElement=function(t){var e=ps(),n=this.peekNextToken();if(8!==n&&6!==n)return this.consumeStringLenient(),Mo(),Mo();for(;;)if(1!==(n=this.peekNextToken())){var r=n;if(8===r||6===r)e.add_18(n),Mo();else if(9===r){if(8!==l(e))throw u_(this._currentPosition,"found ] instead of }",this._source);Yr(e),Mo()}else if(7===r){if(6!==l(e))throw u_(this._currentPosition,"found } instead of ]",this._source);Yr(e),Mo()}else 10===r&&this.fail$default("Unexpected end of input due to malformed JSON during ignoring unknown keys",0,2,null);if(this.consumeNextToken_1(),Mo(),0===e._get_size__29())return Mo()}else t?(this.consumeStringLenient(),Mo()):(this.consumeKeyString(),Mo())},A_.prototype.toString=function(){return"JsonReader(source='"+this._source+"', currentPosition="+this._currentPosition+")"},A_.prototype.failOnUnknownKey=function(t){var e=Ei(this._source.substring(0,this._currentPosition),t,0,!1,6);this.fail("Encountered an unknown key '"+t+"'.\nUse 'ignoreUnknownKeys = true' in 'Json {}' builder to ignore unknown keys.",e)},A_.prototype.fail=function(t,e){throw u_(e,t,this._source)},A_.prototype.fail$default=function(t,e,n,r){return 0!=(2&n)&&(e=this._currentPosition),this.fail(t,e)},A_.prototype.consumeNumericLiteral=function(){var t,e=E_(this);e===this._source.length&&this.fail$default("EOF",0,2,null),kl(this._source,e).equals(new ol(34))?((e=e+1|0)===this._source.length&&this.fail$default("EOF",0,2,null),t=!0):t=!1;var n,r=t,i=new Kl(0,0),o=!1,s=e,a=!0;t:for(;a;){var l=kl(this._source,e);if(l.equals(new ol(45)))e!==s&&this.fail$default("Unexpected symbol '-' in numeric literal",0,2,null),o=!0,e=e+1|0,Mo();else{if(0!==O_(l))break t;e=e+1|0,Mo(),a=!(e===this._source.length);var u=l.minus(new ol(48));0<=u&&u<=9||this.fail$default("Unexpected symbol '"+l+"' in numeric literal",0,2,null),(i=i.times_27(bu(10)).minus_28(bu(u))).compareTo_48(new Kl(0,0))>0&&this.fail$default("Numeric value overflow",0,2,null)}}if((s===e||o&&s===(e-1|0))&&this.fail$default("Expected numeric literal",0,2,null),r&&(a||this.fail$default("EOF",0,2,null),kl(this._source,e).equals(new ol(34))||this.fail$default("Expected closing quotation mark",0,2,null),e=e+1|0,Mo()),this._currentPosition=e,o)n=i;else{var c=i;Yl(),c.equals(new Kl(0,-2147483648))?this.fail$default("Numeric value overflow",0,2,null):n=i.unaryMinus_4()}return n},A_.prototype.consumeBoolean=function(){return T_(this,E_(this))},A_.prototype.consumeBooleanLenient=function(){var t,e=E_(this);e===this._source.length&&this.fail$default("EOF",0,2,null),kl(this._source,e).equals(new ol(34))?(e=e+1|0,Mo(),t=!0):t=!1;var n=t,r=T_(this,e);return n&&(this._currentPosition===this._source.length&&this.fail$default("EOF",0,2,null),kl(this._source,this._currentPosition).equals(new ol(34))||this.fail$default("Expected closing quotation mark",0,2,null),this._currentPosition=this._currentPosition+1|0,Mo()),r},A_.$metadata$={simpleName:"JsonLexer",kind:"class",interfaces:[]},R_.$metadata$={simpleName:"CharMappings",kind:"object",interfaces:[]},U_.prototype.invoke_97=function(){return j_(this._$boundThis)},U_.prototype._get_name__1=function(){return"buildAlternativeNamesMap"},U_.$metadata$={kind:"class",interfaces:[]},q_.prototype.read=function(){var t,e=this._lexer.peekNextToken();return 1===e?t=$_(this,!0):0===e?t=$_(this,!1):6===e?t=function(t){var e=t._lexer.consumeNextToken(6);4===t._lexer.peekNextToken()&&t._lexer.fail$default("Unexpected leading comma",0,2,null);for(var n=Us();t._lexer.canConsumeValue();){var r=t._isLenient_1?t._lexer.consumeStringLenient():t._lexer.consumeString();t._lexer.consumeNextToken(5),Mo();var i=t.read();n.put_4(r,i),Mo(),4!==(e=t._lexer.consumeNextToken_1())&&7!==e&&t._lexer.fail$default("Expected end of the object or comma",0,2,null)}return 6===e?(t._lexer.consumeNextToken(7),Mo()):4===e&&t._lexer.fail$default("Unexpected trailing comma",0,2,null),new yf(n)}(this):8===e?t=function(t){var e=t._lexer.consumeNextToken_1();4===t._lexer.peekNextToken()&&t._lexer.fail$default("Unexpected leading comma",0,2,null);for(var n=ps();t._lexer.canConsumeValue();){var r=t.read();if(n.add_18(r),Mo(),4!==(e=t._lexer.consumeNextToken_1())){var i=t._lexer;9===e||i.fail("Expected end of the array or comma",i._currentPosition)}}return 8===e?(t._lexer.consumeNextToken(9),Mo()):4===e&&t._lexer.fail$default("Unexpected trailing comma",0,2,null),new Pf(n)}(this):this._lexer.fail$default("Can't begin reading element, unexpected token",0,2,null),t},q_.$metadata$={simpleName:"JsonTreeReader",kind:"class",interfaces:[]},Z_.prototype.contextual_1=function(t,e){},Z_.prototype.polymorphic_0=function(t,e,n){var r=n._get_descriptor__66();!function(t,e,n){var r=e._get_kind__17();if(r instanceof Qh||Dl(r,Th()))throw tc("Serializer for "+n._get_simpleName__4()+" can't be registered as a subclass for polymorphic serialization because its kind "+r+" is not concrete. To work with multiple hierarchies, register it as a base class.");if(t._useArrayPolymorphism_1)return Mo();if(Dl(r,qh())||Dl(r,Hh())||r instanceof jh||r instanceof Ch)throw tc("Serializer for "+n._get_simpleName__4()+" of kind "+r+" cannot be serialized polymorphically with class discriminator.")}(this,r,e),this._useArrayPolymorphism_1||function(t,e,n){var r=0,i=e._get_elementsCount__17();if(r<i)do{var o=r;r=r+1|0;var s=e.getElementName_17(o);if(s===t._discriminator)throw tc("Polymorphic serializer for "+n+" has property '"+s+"' that conflicts with JSON class discriminator. You can either change class discriminator in JsonConfiguration, rename property with @SerialName annotation or fall back to array polymorphism")}while(r<i)}(this,r,e)},Z_.prototype.polymorphicDefault_0=function(t,e){},Z_.$metadata$={simpleName:"PolymorphismValidator",kind:"class",interfaces:[ef]},W_.$metadata$={simpleName:"Key",kind:"class",interfaces:[]},X_.prototype.set_3=function(t,e,n){var r,i=this._map_1,o=i.get_17(t);if(null==o){var s=zm(1);i.put_4(t,s),Mo(),r=s}else r=o;var a=r,l=e instanceof W_?e:ql(),u=Tu(n)?n:ql();a.put_4(l,u),Mo()},X_.prototype.getOrPut=function(t,e,n){var r=this.get_19(t,e);if(null!=r)return r;Mo();var i=n();return this.set_3(t,e,i),i},X_.prototype.get_19=function(t,e){var n=this._map_1.get_17(t),r=null==n?null:n.get_17(e instanceof W_?e:ql());return Tu(r)?r:null},X_.$metadata$={simpleName:"DescriptorSchemaCache",kind:"class",interfaces:[]},Q_.prototype._get_json__9=function(){return this._json_0},Q_.prototype._get_serializersModule__18=function(){return this._serializersModule_1},Q_.prototype.decodeJsonElement_5=function(){return new q_(this._json_0._configuration,this._lexer_0).read()},Q_.prototype.decodeSerializableValue_18=function(t){return G_(this,t)},Q_.prototype.beginStructure_14=function(t){var e,n=ym(this._json_0,t);this._lexer_0.consumeNextToken_0(n._begin),4===(e=this)._lexer_0.peekNextToken()&&e._lexer_0.fail$default("Unexpected leading comma",0,2,null);var r=n;return r.equals(xm())||r.equals(wm())||r.equals(Em())?new Q_(this._json_0,n,this._lexer_0):this._mode.equals(n)?this:new Q_(this._json_0,n,this._lexer_0)},Q_.prototype.endStructure_14=function(t){this._lexer_0.consumeNextToken_0(this._mode._end)},Q_.prototype.decodeNotNullMark_9=function(){return this._lexer_0.tryConsumeNotNull()},Q_.prototype.decodeNull_9=function(){return null},Q_.prototype.decodeElementIndex_9=function(t){var e=this._mode;return e.equals(bm())?function(t,e){for(var n=t._lexer_0.tryConsumeComma();t._lexer_0.canConsumeValue();){n=!1;var r=J_(t);t._lexer_0.consumeNextToken_0(new ol(58));var i,o=F_(e,t._json_0,r);if(ip(),-3!==o){if(!t._configuration_0._coerceInputValues_0||!Y_(t,e,o))return o;n=t._lexer_0.tryConsumeComma(),i=!1}else i=!0;i&&(n=K_(t,r))}return n&&t._lexer_0.fail$default("Unexpected trailing comma",0,2,null),ip(),-1}(this,t):e.equals(wm())?function(t){var e,n=!1,r=!(t._currentIndex%2==0);if(r?-1!==t._currentIndex&&(n=t._lexer_0.tryConsumeComma()):t._lexer_0.consumeNextToken_0(new ol(58)),t._lexer_0.canConsumeValue()){if(r)if(-1===t._currentIndex){var i=t._lexer_0;!n||i.fail("Unexpected trailing comma",i._currentPosition)}else{var o=t._lexer_0;n||o.fail("Expected comma after the key-value pair",o._currentPosition)}var s=t;s._currentIndex=s._currentIndex+1|0,e=s._currentIndex}else n&&t._lexer_0.fail$default("Expected '}', but had ',' instead",0,2,null),ip(),e=-1;return e}(this):function(t){var e,n=t._lexer_0.tryConsumeComma();if(t._lexer_0.canConsumeValue()){-1===t._currentIndex||n||t._lexer_0.fail$default("Expected end of the array or comma",0,2,null);var r=t;r._currentIndex=r._currentIndex+1|0,e=r._currentIndex}else n&&t._lexer_0.fail$default("Unexpected trailing comma",0,2,null),ip(),e=-1;return e}(this)},Q_.prototype.decodeBoolean_9=function(){return this._configuration_0._isLenient_0?this._lexer_0.consumeBooleanLenient():this._lexer_0.consumeBoolean()},Q_.prototype.decodeByte_9=function(){var t=this._lexer_0.consumeNumericLiteral();return t.equals(bu(t.toByte_4()))||this._lexer_0.fail$default("Failed to parse byte for input '"+t+"'",0,2,null),t.toByte_4()},Q_.prototype.decodeShort_9=function(){var t=this._lexer_0.consumeNumericLiteral();return t.equals(bu(t.toShort_4()))||this._lexer_0.fail$default("Failed to parse short for input '"+t+"'",0,2,null),t.toShort_4()},Q_.prototype.decodeInt_9=function(){var t=this._lexer_0.consumeNumericLiteral();return t.equals(bu(t.toInt_5()))||this._lexer_0.fail$default("Failed to parse int for input '"+t+"'",0,2,null),t.toInt_5()},Q_.prototype.decodeLong_9=function(){return this._lexer_0.consumeNumericLiteral()},Q_.prototype.decodeFloat_9=function(){var t;t:do{var e=this._lexer_0,n=e.consumeStringLenient();try{t=Xa(n);break t}catch(t){if(!(t instanceof ec))throw t;e.fail$default("Failed to parse type 'float' for input '"+n+"'",0,2,null)}}while(0);var r=t;if(this._json_0._configuration._allowSpecialFloatingPointValues_0||Js(r))return r;d_(this._lexer_0,r)},Q_.prototype.decodeDouble_9=function(){var t;t:do{var e=this._lexer_0,n=e.consumeStringLenient();try{t=Xa(n);break t}catch(t){if(!(t instanceof ec))throw t;e.fail$default("Failed to parse type 'double' for input '"+n+"'",0,2,null)}}while(0);var r=t;if(this._json_0._configuration._allowSpecialFloatingPointValues_0||Qs(r))return r;d_(this._lexer_0,r)},Q_.prototype.decodeChar_9=function(){var t=this._lexer_0.consumeStringLenient();return 1!==t.length&&this._lexer_0.fail$default("Expected single char, but got '"+t+"'",0,2,null),kl(t,0)},Q_.prototype.decodeString_9=function(){return this._configuration_0._isLenient_0?this._lexer_0.consumeStringLenient():this._lexer_0.consumeString()},Q_.prototype.decodeInline_9=function(t){return nm(t)?new tm(this._lexer_0,this._json_0):tp.prototype.decodeInline_9.call(this,t)},Q_.prototype.decodeEnum_9=function(t){return B_(t,this._json_0,this.decodeString_9())},Q_.$metadata$={simpleName:"StreamingJsonDecoder",kind:"class",interfaces:[df]},tm.prototype._get_serializersModule__18=function(){return this._serializersModule_2},tm.prototype.decodeElementIndex_9=function(t){throw lc(zl("unsupported"))},tm.prototype.decodeInt_9=function(){var t;t:do{var e=this._lexer_1,n=e.consumeStringLenient();try{t=oo(n);break t}catch(t){if(!(t instanceof ec))throw t;e.fail$default("Failed to parse type 'UInt' for input '"+n+"'",0,2,null)}}while(0);return t},tm.prototype.decodeLong_9=function(){var t;t:do{var e=this._lexer_1,n=e.consumeStringLenient();try{t=so(n);break t}catch(t){if(!(t instanceof ec))throw t;e.fail$default("Failed to parse type 'ULong' for input '"+n+"'",0,2,null)}}while(0);return t},tm.prototype.decodeByte_9=function(){var t;t:do{var e=this._lexer_1,n=e.consumeStringLenient();try{t=ao(n);break t}catch(t){if(!(t instanceof ec))throw t;e.fail$default("Failed to parse type 'UByte' for input '"+n+"'",0,2,null)}}while(0);return t},tm.prototype.decodeShort_9=function(){var t;t:do{var e=this._lexer_1,n=e.consumeStringLenient();try{t=lo(n);break t}catch(t){if(!(t instanceof ec))throw t;e.fail$default("Failed to parse type 'UShort' for input '"+n+"'",0,2,null)}}while(0);return t},tm.$metadata$={simpleName:"JsonDecoderForUnsignedTypes",kind:"class",interfaces:[]},em.prototype._get_json__9=function(){return this._json_1},em.prototype._get_serializersModule__18=function(){return this._serializersModule_3},em.prototype.shouldEncodeElementDefault_3=function(t,e){return this._configuration_1._encodeDefaults_0},em.prototype.encodeSerializableValue_3=function(t,e){t:do{if(!(t instanceof up)||this._get_json__9()._configuration._useArrayPolymorphism_0){t.serialize_107(this,e),Mo();break t}var n=H_(this,Cu(t,Nc)?t:ql(),Tu(e)?e:ql());this._writePolymorphic=!0,n.serialize_107(this,e)}while(0)},em.prototype.beginStructure_14=function(t){var e=ym(this._json_1,t);if(e._begin.equals(new ol(0))||(this._composer.print_12(e._begin),this._composer.indent_0()),this._writePolymorphic&&(this._writePolymorphic=!1,function(t,e){t._composer.nextItem_0(),t.encodeString_3(t._configuration_1._classDiscriminator_0),t._composer.print_12(new ol(58)),t._composer.space_0(),t.encodeString_3(e._get_serialName__17())}(this,t)),this._mode_0.equals(e))return this;var n=this._modeReuseCache,r=null==n?null:n[e._get_ordinal__0()];return null==r?new em(this._composer,this._json_1,e,this._modeReuseCache):r},em.prototype.endStructure_14=function(t){this._mode_0._end.equals(new ol(0))||(this._composer.unIndent_0(),this._composer.nextItem_0(),this._composer.print_12(this._mode_0._end))},em.prototype.encodeElement_2=function(t,e){var n=this._mode_0;if(n.equals(xm()))this._composer._writingFirst||this._composer.print_12(new ol(44)),this._composer.nextItem_0();else if(n.equals(wm()))if(this._composer._writingFirst)this._forceQuoting=!0,this._composer.nextItem_0();else{var r;e%2==0?(this._composer.print_12(new ol(44)),this._composer.nextItem_0(),r=!0):(this._composer.print_12(new ol(58)),this._composer.space_0(),r=!1),this._forceQuoting=r}else n.equals(Em())?(0===e&&(this._forceQuoting=!0),1===e&&(this._composer.print_12(new ol(44)),this._composer.space_0(),this._forceQuoting=!1)):(this._composer._writingFirst||this._composer.print_12(new ol(44)),this._composer.nextItem_0(),this.encodeString_3(t.getElementName_17(e)),this._composer.print_12(new ol(58)),this._composer.space_0());return!0},em.prototype.encodeInline_3=function(t){return nm(t)?new em(new a_(this._composer._sb,this._json_1),this._json_1,this._mode_0,null):ep.prototype.encodeInline_3.call(this,t)},em.prototype.encodeNull_3=function(){this._composer.print_13("null")},em.prototype.encodeBoolean_3=function(t){this._forceQuoting?this.encodeString_3(t.toString()):this._composer.print_16(t)},em.prototype.encodeByte_3=function(t){this._forceQuoting?this.encodeString_3(t.toString()):this._composer.print_10(t)},em.prototype.encodeShort_3=function(t){this._forceQuoting?this.encodeString_3(t.toString()):this._composer.print_11(t)},em.prototype.encodeInt_3=function(t){this._forceQuoting?this.encodeString_3(t.toString()):this._composer.print_8(t)},em.prototype.encodeLong_3=function(t){this._forceQuoting?this.encodeString_3(t.toString()):this._composer.print_9(t)},em.prototype.encodeFloat_3=function(t){if(this._forceQuoting?this.encodeString_3(t.toString()):this._composer.print_14(t),!this._configuration_1._allowSpecialFloatingPointValues_0&&!Js(t))throw h_(t,this._composer._sb.toString())},em.prototype.encodeDouble_3=function(t){if(this._forceQuoting?this.encodeString_3(t.toString()):this._composer.print_15(t),!this._configuration_1._allowSpecialFloatingPointValues_0&&!Qs(t))throw h_(t,this._composer._sb.toString())},em.prototype.encodeChar_3=function(t){this.encodeString_3(t.toString())},em.prototype.encodeString_3=function(t){return this._composer.printQuoted_0(t)},em.prototype.encodeEnum_3=function(t,e){this.encodeString_3(t.getElementName_17(e))},em.$metadata$={simpleName:"StreamingJsonEncoder",kind:"class",interfaces:[i_]},am.prototype._get_json__9=function(){return this._json_2},am.prototype._get_value__15=function(){return this._value_2},am.prototype._get_serializersModule__18=function(){return this._get_json__9()._get_serializersModule__18()},am.prototype._get_configuration__3=function(){return this._configuration_2},am.prototype.decodeJsonElement_5=function(){return om(this)},am.prototype.decodeSerializableValue_18=function(t){return G_(this,t)},am.prototype.composeName_4=function(t,e){return e},am.prototype.beginStructure_14=function(t){var e,n=om(this),r=t._get_kind__17();if(Dl(r,qh())||r instanceof Qh){var i=this._get_json__9();if(!(n instanceof Pf))throw g_(-1,"Expected "+Fa(Pf)+" as the serialized body of "+t._get_serialName__17()+", but had "+ja(n));e=new dm(i,n)}else if(Dl(r,Hh())){var o,s=this._get_json__9(),a=vm(t.getElementDescriptor_17(0)),l=a._get_kind__17();if(l instanceof jh||Dl(l,Ih())){var u=this._get_json__9();if(!(n instanceof yf))throw g_(-1,"Expected "+Fa(yf)+" as the serialized body of "+t._get_serialName__17()+", but had "+ja(n));o=new _m(u,n)}else{if(!s._configuration._allowStructuredMapKeys_0)throw p_(a);var c=this._get_json__9();if(!(n instanceof Pf))throw g_(-1,"Expected "+Fa(Pf)+" as the serialized body of "+t._get_serialName__17()+", but had "+ja(n));o=new dm(c,n)}e=o}else{var h=this._get_json__9();if(!(n instanceof yf))throw g_(-1,"Expected "+Fa(yf)+" as the serialized body of "+t._get_serialName__17()+", but had "+ja(n));e=um(h,n,null,null,12)}return e},am.prototype.endStructure_14=function(t){},am.prototype.decodeNotNullMark_9=function(){return!(om(this)instanceof Sf)},am.prototype.getValue_3=function(t){var e=this.currentElement_3(t),n=e instanceof bf?e:null;if(null==n)throw u_(-1,"Expected JsonPrimitive at "+t+", found "+e,zl(om(this)));return n},am.prototype.decodeTaggedEnum_6=function(t,e){return B_(e,this._get_json__9(),this.getValue_3(t)._get_content__1())},am.prototype.decodeTaggedEnum_2=function(t,e){return this.decodeTaggedEnum_6(null!=t&&"string"==typeof t?t:ql(),e)},am.prototype.decodeTaggedNotNullMark_6=function(t){return!(this.currentElement_3(t)===Cf())},am.prototype.decodeTaggedNotNullMark_2=function(t){return this.decodeTaggedNotNullMark_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedBoolean_6=function(t){var e,n=this.getValue_3(t);if(!this._get_json__9()._configuration._isLenient_0&&(n instanceof If?n:ql())._isString)throw u_(-1,"Boolean literal for key '"+t+"' should be unquoted.\nUse 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",zl(om(this)));t:do{var r="boolean";try{var i=Af(n);if(null==i)throw Ju();var o,s=i;null==s?sm(this,r):o=s,e=o;break t}catch(t){if(!(t instanceof ec))throw t;sm(this,r)}}while(0);return e},am.prototype.decodeTaggedBoolean_2=function(t){return this.decodeTaggedBoolean_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedByte_6=function(t){var e;t:do{var n=this.getValue_3(t),r="byte";try{var i,o=Of(n),s=Ro()._MIN_VALUE_3,a=o<=Ro()._MAX_VALUE_3&&s<=o?mu(o):null;null==a?sm(this,r):i=a,e=i;break t}catch(t){if(!(t instanceof ec))throw t;sm(this,r)}}while(0);return e},am.prototype.decodeTaggedByte_2=function(t){return this.decodeTaggedByte_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedShort_6=function(t){var e;t:do{var n=this.getValue_3(t),r="short";try{var i,o=Of(n),s=Fo()._MIN_VALUE_4,a=o<=Fo()._MAX_VALUE_4&&s<=o?yu(o):null;null==a?sm(this,r):i=a,e=i;break t}catch(t){if(!(t instanceof ec))throw t;sm(this,r)}}while(0);return e},am.prototype.decodeTaggedShort_2=function(t){return this.decodeTaggedShort_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedInt_6=function(t){var e;t:do{var n=this.getValue_3(t);try{var r,i=Of(n);null==i?sm(this,"int"):r=i,e=r;break t}catch(t){if(!(t instanceof ec))throw t;sm(this,"int")}}while(0);return e},am.prototype.decodeTaggedInt_2=function(t){return this.decodeTaggedInt_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedLong_6=function(t){var e;t:do{var n=this.getValue_3(t),r="long";try{var i,o=function(t){var e,n=bi(t);return null==n?vi(t):e=n,e}(n._get_content__1());null==o?sm(this,r):i=o,e=i;break t}catch(t){if(!(t instanceof ec))throw t;sm(this,r)}}while(0);return e},am.prototype.decodeTaggedLong_2=function(t){return this.decodeTaggedLong_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedFloat_6=function(t){var e;t:do{var n=this.getValue_3(t),r="float";try{var i,o=Xa(n._get_content__1());null==o?sm(this,r):i=o,e=i;break t}catch(t){if(!(t instanceof ec))throw t;sm(this,r)}}while(0);var s=e;if(this._get_json__9()._configuration._allowSpecialFloatingPointValues_0||Js(s))return s;throw f_(s,t,zl(om(this)))},am.prototype.decodeTaggedFloat_2=function(t){return this.decodeTaggedFloat_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedDouble_6=function(t){var e;t:do{var n=this.getValue_3(t),r="double";try{var i,o=Xa(n._get_content__1());null==o?sm(this,r):i=o,e=i;break t}catch(t){if(!(t instanceof ec))throw t;sm(this,r)}}while(0);var s=e;if(this._get_json__9()._configuration._allowSpecialFloatingPointValues_0||Qs(s))return s;throw f_(s,t,zl(om(this)))},am.prototype.decodeTaggedDouble_2=function(t){return this.decodeTaggedDouble_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedChar_6=function(t){var e;t:do{var n=this.getValue_3(t),r="char";try{var i,o=x(n._get_content__1());null==o?sm(this,r):i=o,e=i;break t}catch(t){if(!(t instanceof ec))throw t;sm(this,r)}}while(0);return e},am.prototype.decodeTaggedChar_2=function(t){return this.decodeTaggedChar_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedString_6=function(t){var e=this.getValue_3(t);if(!this._get_json__9()._configuration._isLenient_0&&!(e instanceof If?e:ql())._isString)throw u_(-1,"String literal for key '"+t+"' should be quoted.\nUse 'isLenient = true' in 'Json {}` builder to accept non-compliant JSON.",zl(om(this)));return e._get_content__1()},am.prototype.decodeTaggedString_2=function(t){return this.decodeTaggedString_6(null!=t&&"string"==typeof t?t:ql())},am.prototype.decodeTaggedInline_6=function(t,e){return nm(e)?new tm(new A_(this.getValue_3(t)._get_content__1()),this._get_json__9()):Rd.prototype.decodeTaggedInline_2.call(this,t,e)},am.prototype.decodeTaggedInline_2=function(t,e){return this.decodeTaggedInline_6(null!=t&&"string"==typeof t?t:ql(),e)},am.$metadata$={simpleName:"AbstractJsonTreeDecoder",kind:"class",interfaces:[df]},hm.prototype.invoke_97=function(){return j_(this._$boundThis_0)},hm.prototype._get_name__1=function(){return"buildAlternativeNamesMap"},hm.$metadata$={kind:"class",interfaces:[]},pm.prototype._get_value__15=function(){return this._value_3},pm.prototype.decodeElementIndex_9=function(t){for(;this._position_7<t._get_elementsCount__17();){var e=this._position_7;this._position_7=e+1|0;var n=this.getTag_5(t,e),r=this._get_value__15();if((Cu(r,ll)?r:ql()).containsKey_8(n)&&(!this._get_configuration__3()._coerceInputValues_0||!cm(this,t,this._position_7-1|0,n)))return this._position_7-1|0}return ip(),-1},pm.prototype.elementName_4=function(t,e){var n=t.getElementName_17(e);if(!this._get_configuration__3()._useAlternativeNames_0)return n;if(this._get_value__15()._get_keys__5().contains_27(n))return n;var r,i,o,s=this._get_json__9()._schemaCache.getOrPut(t,Ce,(r=new hm(t),(i=function(){return r.invoke_97()}).callableName=r._get_name__1(),i)),a=this._get_value__15()._get_keys__5();t:do{for(var l=a.iterator_39();l.hasNext_14();){var u=l.next_14();if(s.get_17(u)===e){o=u;break t}}o=null}while(0);return null==o?n:o},pm.prototype.currentElement_3=function(t){return Wr(this._get_value__15(),t)},pm.prototype.beginStructure_14=function(t){return t===this._polyDescriptor?this:am.prototype.beginStructure_14.call(this,t)},pm.prototype.endStructure_14=function(t){var e;if(this._get_configuration__3()._ignoreUnknownKeys_0||t._get_kind__17()instanceof Qh)return Mo();if(this._get_configuration__3()._useAlternativeNames_0){var n=Vp(t),r=this._get_json__9()._schemaCache.get_19(t,Ce),i=null==r?null:r._get_keys__5();e=function(t,e){var n=function(t){return Cu(t,_l)?t._get_size__29():null}(e),r=null==n?null:t._get_size__29()+n|0,i=Hs(null==r?_u(t._get_size__29(),2):r);return i.addAll_10(t),Mo(),Xr(i,e),Mo(),i}(n,null==i?ni():i)}else e=Vp(t);for(var o=e,s=this._get_value__15()._get_keys__5().iterator_39();s.hasNext_14();){var a=s.next_14();if(!o.contains_27(a)&&a!==this._polyDiscriminator)throw __(a,this._get_value__15().toString())}},pm.$metadata$={simpleName:"JsonTreeDecoder",kind:"class",interfaces:[]},dm.prototype._get_value__15=function(){return this._value_4},dm.prototype.elementName_4=function(t,e){return e.toString()},dm.prototype.currentElement_3=function(t){return this._value_4.get_29(Ya(t))},dm.prototype.decodeElementIndex_9=function(t){for(;this._currentIndex_0<(this._size_0-1|0);)return this._currentIndex_0=this._currentIndex_0+1|0,Mo(),this._currentIndex_0;return ip(),-1},dm.$metadata$={simpleName:"JsonTreeListDecoder",kind:"class",interfaces:[]},fm.prototype._get_value__15=function(){return this._value_5},fm.prototype.decodeElementIndex_9=function(t){return 0},fm.prototype.currentElement_3=function(t){if("primitive"!==t)throw tc(zl("This input can only handle primitives with 'primitive' tag"));return this._value_5},fm.$metadata$={simpleName:"JsonPrimitiveDecoder",kind:"class",interfaces:[]},_m.prototype._get_value__15=function(){return this._value_6},_m.prototype.elementName_4=function(t,e){return this._keys_0.get_29(e/2|0)},_m.prototype.decodeElementIndex_9=function(t){for(;this._position_8<(this._size_1-1|0);)return this._position_8=this._position_8+1|0,Mo(),this._position_8;return ip(),-1},_m.prototype.currentElement_3=function(t){return this._position_8%2==0?xf(t):Wr(this._value_6,t)},_m.prototype.endStructure_14=function(t){},_m.$metadata$={simpleName:"JsonTreeMapDecoder",kind:"class",interfaces:[]},gm.$metadata$={simpleName:"WriteMode",kind:"class",interfaces:[]},Sm.prototype._get_json__9=function(){return this._json_3},Sm.prototype._get_serializersModule__18=function(){return this._json_3._get_serializersModule__18()},Sm.prototype.encodeNull_3=function(){this._result=null},Sm.prototype.encodeLong_3=function(t){var e,n=t.toDouble_4();if(!this._json_3._configuration._isLenient_0&&(e=t,e.compareTo_48(new Kl(0,0))<0?e.unaryMinus_4():e).toDouble_4()>9007199254740991)throw tc(t+" can't be deserialized to number due to a potential precision loss. Use the JsonConfiguration option isLenient to serialise anyway");this.encodeValue_2(n)},Sm.prototype.encodeChar_3=function(t){this.encodeValue_2(t.toString())},Sm.prototype.encodeValue_2=function(t){this._result=t},Sm.prototype.encodeEnum_3=function(t,e){this.encodeValue_2(t.getElementName_17(e))},Sm.prototype.endStructure_14=function(t){},Sm.$metadata$={simpleName:"DynamicPrimitiveEncoder",kind:"class",interfaces:[i_]},km.$metadata$={simpleName:"NoOutputMark",kind:"object",interfaces:[]},Pm.prototype._get_parent_=function(){var t=this._parent;if(null!=t)return t;Gl("parent")},Pm.$metadata$={simpleName:"Node",kind:"class",interfaces:[]},Am.$metadata$={simpleName:"WriteMode",kind:"class",interfaces:[]},Dm.prototype._get_json__9=function(){return this._json_4},Dm.prototype._get_serializersModule__18=function(){return this._json_4._get_serializersModule__18()},Dm.prototype.encodeElement_2=function(t,e){var n;return Im(this)._index_3=e,this._currentDescriptor=t,Im(this)._writeMode.equals(Lm())?this._currentElementIsMapKey=Im(this)._index_3%2==0:(n=!!Im(this)._writeMode.equals(Nm())&&t._get_kind__17()instanceof Qh,this._currentName=n?e.toString():t.getElementName_17(e)),!0},Dm.prototype.encodeValue_2=function(t){this._currentElementIsMapKey?this._currentName=zl(t):this._result_0===Tm()?this._result_0=t:Im(this)._jsObject[this._currentName]=t},Dm.prototype.encodeChar_3=function(t){this.encodeValue_2(t.toString())},Dm.prototype.encodeNull_3=function(){if(this._currentElementIsMapKey)this._currentName=null;else{if(this._encodeNullAsUndefined)return Mo();Im(this)._jsObject[this._currentName]=null}},Dm.prototype.encodeEnum_3=function(t,e){this.encodeValue_2(t.getElementName_17(e))},Dm.prototype.encodeLong_3=function(t){var e=t.toDouble_4(),n=Math.abs(e)>9007199254740991;if(!this._json_4._configuration._isLenient_0&&n)throw tc(t+" can't be serialized to number due to a potential precision loss. Use the JsonConfiguration option isLenient to serialize anyway");if(this._currentElementIsMapKey&&n)throw tc("Long with value "+t+" can't be used in json as map key, because its value is larger than Number.MAX_SAFE_INTEGER");this.encodeValue_2(e)},Dm.prototype.encodeFloat_3=function(t){this.encodeDouble_3(t)},Dm.prototype.encodeDouble_3=function(t){if(this._currentElementIsMapKey){var e=!(Math.floor(t)===t);if(!Qs(t)||e)throw tc("Double with value "+t+" can't be used in json as map key, because its value is not an integer.")}this.encodeValue_2(t)},Dm.prototype.shouldEncodeElementDefault_3=function(t,e){return this._json_4._configuration._encodeDefaults_0},Dm.prototype.encodeSerializableValue_3=function(t,e){t:do{if(!(t instanceof up)||this._get_json__9()._configuration._useArrayPolymorphism_0){t.serialize_107(this,e),Mo();break t}var n=H_(this,Cu(t,Nc)?t:ql(),Tu(e)?e:ql());this._writePolymorphic_0=!0,n.serialize_107(this,e)}while(0)},Dm.prototype.beginStructure_14=function(t){if(this._currentElementIsMapKey)throw tc("Value of type "+t._get_serialName__17()+" can't be used in json as map key. It should have either primitive or enum kind, but its kind is "+t._get_kind__17()+".");var e=this.selectMode(t);if(this._result_0===Tm())this._result_0=Om(0,e),this._current=new Pm(e,this._result_0),Im(this)._parent=Im(this);else{var n=Om(0,e);Im(this)._jsObject[this._currentName]=n,function(t,e,n){var r=new Pm(n,e);r._parent=Im(t),t._current=r}(this,n,e)}return this._writePolymorphic_0&&(this._writePolymorphic_0=!1,Im(this)._jsObject[this._json_4._configuration._classDiscriminator_0]=t._get_serialName__17()),Im(this)._index_3=0,this},Dm.prototype.endStructure_14=function(t){var e;(e=this)._current=Im(e)._get_parent_(),e._currentElementIsMapKey=!1},Dm.prototype.selectMode=function(t){var e,n=t._get_kind__17();if(Dl(n,Uh())||Dl(n,Wh())||Dl(n,Th()))e=Mm();else if(Dl(n,qh())||n instanceof Qh)e=Nm();else if(Dl(n,Hh()))e=Lm();else{if(n instanceof jh||Dl(n,Ih()))throw lc(zl("DynamicObjectSerializer does not support serialization of singular primitive values or enum types."));$l()}return e},Dm.$metadata$={simpleName:"DynamicObjectEncoder",kind:"class",interfaces:[i_]},Rm.prototype.append_14=function(t){this._sb_0.append_4(t),Mo()},Rm.prototype.append_15=function(t){this._sb_0.append_1(t),Mo()},Rm.prototype.append_16=function(t){this._sb_0.append_5(t),Mo()},Rm.prototype.appendQuoted=function(t){im(this._sb_0,t)},Rm.prototype.toString=function(){return this._sb_0.toString()},Rm.prototype.release=function(){},Rm.$metadata$={simpleName:"JsonStringBuilder",kind:"class",interfaces:[]},Fm.prototype._get_LOCALIZATION_AR_=function(){return this._LOCALIZATION_AR},Fm.prototype._get_LOCALIZATION_EN_=function(){return this._LOCALIZATION_EN},Fm.prototype._get_LOCALIZATION_FI_=function(){return this._LOCALIZATION_FI},Fm.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Object.defineProperty(Fm.prototype,"LOCALIZATION_AR",{configurable:!0,get:Fm.prototype._get_LOCALIZATION_AR_}),Object.defineProperty(Fm.prototype,"LOCALIZATION_EN",{configurable:!0,get:Fm.prototype._get_LOCALIZATION_EN_}),Object.defineProperty(Fm.prototype,"LOCALIZATION_FI",{configurable:!0,get:Fm.prototype._get_LOCALIZATION_FI_}),jm.prototype.invoke_98=function(t){t._ignoreUnknownKeys=!0},jm.prototype.invoke_103=function(t){return this.invoke_98(t instanceof uf?t:ql()),Mo()},jm.$metadata$={kind:"class",interfaces:[]},Vm.prototype.generateRoute=function(t,e){return this.generateRoute_0(t,void 0===e?null:e)},Vm.prototype.generateRoute_0=function(t,e){var n,r=af(),i=Xc(r._get_serializersModule__18(),pa(Fa(ul),[da(pa(Fa(Jm),[],!1))],!1)),o=r.decodeFromString_2(Cu(i,Mc)?i:ql(),t),s=e;if(null==s)n=null;else{var a=af(),c=Xc(a._get_serializersModule__18(),pa(Fa(Jm),[],!1));n=a.decodeFromString_2(Cu(c,Mc)?c:ql(),s)}var h=(null==n&&l(o),new Nv(u(o),null,l(o),null,null,Tr()));h._wayfindingPath=o;var p,d=h,f=Fv().convertWayfindingSplitToSteps(d,!1,!1),_=function(t,e,n){ay.call(n),n._destination=t._destination_0,n._configuration_3=t;for(var r=0,i=n,o=ds(Br(e,10)),s=0,a=e.iterator_39();a.hasNext_14();){var l=a.next_14(),u=s;s=u+1|0;var c,h=Jo(u),p=l._node.geometry(),d=p instanceof Eg?p:ql(),f=0===h?0:(I=e.get_29(h-1|0)._node,k=l._node,T=I.geometry(),P=k.geometry(),Og().bearing(T,P)),_=iy(0,h,e),m=l._level_1,g=!(null==l._waypoint),y=l._waypoint,v=null==y?null:y.id();if(null!=l._pathToNode){var b=Og(),x=Ul(l._pathToNode).geometry();Pg(),c=b.length_0(x,"meters")}else c=0;var w=c;r+=w;var E=!Zm(Ul((C=l._node).properties()),"type")||"elevator"!==Hm(Ul(Ul(C.properties()).get_16("type")))&&"escalator"!==Hm(Ul(Ul(C.properties()).get_16("type")))&&"staircase"!==Hm(Ul(Ul(C.properties()).get_16("type")))?null:Ul(l._node.id()),S=l._pathToNode;null!=S&&(n._lastNodeWithPathIndex=h),o.add_18(new ry(f,d,_,w,m,E,g,v,S)),Mo()}var C,I,k,T,P;return i._nodeList=o,n._distanceMeters=r,n}(new fy(null,l(o),Tr(),(p=Object.create(Jy.prototype),Jy.call(p,!1,!1,!1,!1,!1,!1,!1,!1,0),p)),f,Object.create(ay.prototype));this._guidanceTextGenerator.generateStaticInstructionsForRoute(_);var m=af(),g=Xc(m._get_serializersModule__18(),pa(Fa(ay),[],!1));return function(t,e,n){if(e._get_descriptor__66()._get_kind__17()instanceof jh||e._get_descriptor__66()._get_kind__17()instanceof Ch){var r=new Sm(t);return r.encodeSerializableValue_3(e,n),r._result}var i=new Dm(t,!1);return i.encodeSerializableValue_3(e,n),i._result_0}(m,Cu(g,Mc)?g:ql(),_)},Vm.prototype.generateRoute$default=function(t,e,n,r){return 0!=(2&n)&&(e=null),this.generateRoute_0(t,e)},Vm.$metadata$={simpleName:"RouteFactory",kind:"class",interfaces:[]},Um.prototype.getQuantityString=function(t,e){return 0===e?"ZERO":1===e?"ONE":2===e?"TWO":2<=e&&e<=4?"FEW":5<=e&&e<=100?"MANY":"OTHER"},Um.$metadata$={simpleName:"Resources",kind:"class",interfaces:[]},$m.prototype._get_resources_=function(){return this._resources},$m.$metadata$={simpleName:"Context",kind:"class",interfaces:[]},Object.defineProperty($m.prototype,"resources",{configurable:!0,get:$m.prototype._get_resources_}),qm.prototype.e=function(t,e){(function(){var n=console;return n.log.apply(n,[].concat([t,e]))}).call(this)},qm.$metadata$={simpleName:"Log",kind:"object",interfaces:[]},Wm.prototype.fromGeometry=function(t){var e=new Jm;return e._internalGeometry=t,e},Wm.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Ym.prototype._get_descriptor__66=function(){return this._descriptor_33},Ym.prototype.childSerializers_15=function(){return[xd(),new Up(xd()),new Up(ig()),new Up(Nf())]},Ym.prototype.deserialize_70=function(t){var e,n,r,i,o,s,a=this._descriptor_33,l=!0,u=0,c=0,h=null,p=null,d=null,f=null,_=t.beginStructure_14(a);if(_.decodeSequentially_9())h=_.decodeStringElement_9(a,0),c|=1,p=_.decodeNullableSerializableElement_9(a,1,xd(),p),c|=2,d=_.decodeNullableSerializableElement_9(a,2,ig(),d),c|=4,f=_.decodeNullableSerializableElement_9(a,3,Nf(),f),c|=8;else for(;l;)switch(u=_.decodeElementIndex_9(a)){case-1:l=!1;break;case 0:h=_.decodeStringElement_9(a,0),c|=1;break;case 1:p=_.decodeNullableSerializableElement_9(a,1,xd(),p),c|=2;break;case 2:d=_.decodeNullableSerializableElement_9(a,2,ig(),d),c|=4;break;case 3:f=_.decodeNullableSerializableElement_9(a,3,Nf(),f),c|=8;break;default:throw Uc(u)}return _.endStructure_14(a),e=c,n=h,r=p,i=d,o=f,(s=Object.create(Jm.prototype))._type_0=0==(1&e)?"Feature":n,s._internalId=0==(2&e)?null:r,s._internalGeometry=0==(4&e)?null:i,s._internalProperties=0==(8&e)?new yf($r()):o,s},Ym.prototype.serialize_77=function(t,e){var n=this._descriptor_33,r=t.beginStructure_14(n);(r.shouldEncodeElementDefault_3(n,0)||"Feature"!==e._type_0)&&r.encodeStringElement_3(n,0,e._type_0),(r.shouldEncodeElementDefault_3(n,1)||null!=e._internalId)&&r.encodeNullableSerializableElement_3(n,1,xd(),e._internalId),(r.shouldEncodeElementDefault_3(n,2)||null!=e._internalGeometry)&&r.encodeNullableSerializableElement_3(n,2,ig(),e._internalGeometry),(!!r.shouldEncodeElementDefault_3(n,3)||!Dl(e._internalProperties,new yf($r())))&&r.encodeNullableSerializableElement_3(n,3,Nf(),e._internalProperties),r.endStructure_14(n)},Ym.prototype.serialize_107=function(t,e){return this.serialize_77(t,e instanceof Jm?e:ql())},Ym.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},Jm.prototype.getStringProperty=function(t){var e=this._internalProperties,n=null==e?null:e.get_16(t);return null==n?null:zl(n)},Jm.prototype.id=function(){return this._internalId},Jm.prototype.geometry=function(){return this._internalGeometry},Jm.prototype.properties=function(){return this._internalProperties},Jm.$metadata$={simpleName:"Feature",kind:"class",interfaces:[],associatedObjects:{0:Km}},eg.prototype.serializer=function(){return ig()},eg.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},ng.$metadata$={simpleName:"Geometry",kind:"class",interfaces:[],associatedObjects:{0:ig}},rg.prototype.selectDeserializer_0=function(t){var e,n=Ef(t).get_16("type");switch(null==n?null:Hm(n)){case"Point":e=vg().serializer();break;case"LineString":e=sg().serializer_3();break;case"MultiLineString":e=(null==He&&new cg,He).serializer_3();break;case"Polygon":e=(null==Je&&new Sg,Je).serializer_3();break;case"MultiPolygon":e=(null==We&&new fg,We).serializer_3();break;default:var r=Ef(t).get_16("type"),i="error deserializing "+(null==r?null:zl(r));throw lc(zl(i))}return e},rg.$metadata$={simpleName:"GeometryDeserializer",kind:"object",interfaces:[]},og.prototype.fromLngLats=function(t){for(var e=new ug,n=e,r=ds(Br(t,10)),i=t.iterator_39();i.hasNext_14();){var o=i.next_14();r.add_18([o._coordinates_0[0],o._coordinates_0[1]]),Mo()}return n._internalCoordinates=Qo(r),e},og.prototype.serializer_3=function(){return lg()},og.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},ag.prototype._get_descriptor__66=function(){return this._descriptor_34},ag.prototype.childSerializers_15=function(){return[xd(),new Cp(za()._get_arrayClass_(),new Cp(za()._get_doubleClass_(),Sd()))]},ag.prototype.deserialize_70=function(t){var e=this._descriptor_34,n=!0,r=0,i=0,o=null,s=null,a=t.beginStructure_14(e);if(a.decodeSequentially_9())o=a.decodeStringElement_9(e,0),i|=1,s=a.decodeSerializableElement_9(e,1,new Cp(za()._get_arrayClass_(),new Cp(za()._get_doubleClass_(),Sd())),s),i|=2;else for(;n;)switch(r=a.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=a.decodeStringElement_9(e,0),i|=1;break;case 1:s=a.decodeSerializableElement_9(e,1,new Cp(za()._get_arrayClass_(),new Cp(za()._get_doubleClass_(),Sd())),s),i|=2;break;default:throw Uc(r)}return a.endStructure_14(e),function(t,e,n,r,i){return ng.call(i),i._type_1=0==(1&t)?"LineString":e,i._internalCoordinates=0==(2&t)?[]:n,i}(i,o,s,0,Object.create(ug.prototype))},ag.prototype.serialize_80=function(t,e){var n=this._descriptor_34,r=t.beginStructure_14(n);(r.shouldEncodeElementDefault_3(n,0)||"LineString"!==e._type_1)&&r.encodeStringElement_3(n,0,e._type_1),(!!r.shouldEncodeElementDefault_3(n,1)||!Dl(e._internalCoordinates,[]))&&r.encodeSerializableElement_3(n,1,new Cp(za()._get_arrayClass_(),new Cp(za()._get_doubleClass_(),Sd())),e._internalCoordinates),r.endStructure_14(n)},ag.prototype.serialize_107=function(t,e){return this.serialize_80(t,e instanceof ug?e:ql())},ag.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},ug.prototype.coordinates_0=function(){for(var t=this._internalCoordinates,e=ds(),n=t,r=0,i=n.length;r<i;){var o=n[r];r=r+1|0,e.add_18(vg().fromLngLat(o[0],o[1])),Mo()}return e},ug.$metadata$={simpleName:"LineString",kind:"class",interfaces:[],associatedObjects:{0:lg}},cg.prototype.serializer_3=function(){return pg()},cg.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},hg.prototype._get_descriptor__66=function(){return this._descriptor_35},hg.prototype.childSerializers_15=function(){return[xd(),new Cp(za()._get_arrayClass_(),new Cp(za()._get_arrayClass_(),new Cp(za()._get_doubleClass_(),Sd())))]},hg.prototype.deserialize_70=function(t){var e=this._descriptor_35,n=!0,r=0,i=0,o=null,s=null,a=t.beginStructure_14(e);if(a.decodeSequentially_9())o=a.decodeStringElement_9(e,0),i|=1,s=a.decodeSerializableElement_9(e,1,new Cp(za()._get_arrayClass_(),new Cp(za()._get_arrayClass_(),new Cp(za()._get_doubleClass_(),Sd()))),s),i|=2;else for(;n;)switch(r=a.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=a.decodeStringElement_9(e,0),i|=1;break;case 1:s=a.decodeSerializableElement_9(e,1,new Cp(za()._get_arrayClass_(),new Cp(za()._get_arrayClass_(),new Cp(za()._get_doubleClass_(),Sd()))),s),i|=2;break;default:throw Uc(r)}return a.endStructure_14(e),function(t,e,n,r,i){return ng.call(i),i._type_2=0==(1&t)?"MultiLineString":e,i._internalCoordinates_0=0==(2&t)?[]:n,i}(i,o,s,0,Object.create(dg.prototype))},hg.prototype.serialize_82=function(t,e){var n=this._descriptor_35,r=t.beginStructure_14(n);(r.shouldEncodeElementDefault_3(n,0)||"MultiLineString"!==e._type_2)&&r.encodeStringElement_3(n,0,e._type_2),(!!r.shouldEncodeElementDefault_3(n,1)||!Dl(e._internalCoordinates_0,[]))&&r.encodeSerializableElement_3(n,1,new Cp(za()._get_arrayClass_(),new Cp(za()._get_arrayClass_(),new Cp(za()._get_doubleClass_(),Sd()))),e._internalCoordinates_0),r.endStructure_14(n)},hg.prototype.serialize_107=function(t,e){return this.serialize_82(t,e instanceof dg?e:ql())},hg.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},dg.$metadata$={simpleName:"MultiLineString",kind:"class",interfaces:[],associatedObjects:{0:pg}},fg.prototype.serializer_3=function(){return mg()},fg.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},_g.prototype._get_descriptor__66=function(){return this._descriptor_36},_g.prototype.childSerializers_15=function(){return[xd(),new Ip(new Ip(new Ip(new Cp(za()._get_doubleClass_(),Sd()))))]},_g.prototype.deserialize_70=function(t){var e,n,r,i,o=this._descriptor_36,s=!0,a=0,l=0,u=null,c=null,h=t.beginStructure_14(o);if(h.decodeSequentially_9())u=h.decodeStringElement_9(o,0),l|=1,c=h.decodeSerializableElement_9(o,1,new Ip(new Ip(new Ip(new Cp(za()._get_doubleClass_(),Sd())))),c),l|=2;else for(;s;)switch(a=h.decodeElementIndex_9(o)){case-1:s=!1;break;case 0:u=h.decodeStringElement_9(o,0),l|=1;break;case 1:c=h.decodeSerializableElement_9(o,1,new Ip(new Ip(new Ip(new Cp(za()._get_doubleClass_(),Sd())))),c),l|=2;break;default:throw Uc(a)}return h.endStructure_14(o),e=l,n=u,r=c,i=Object.create(gg.prototype),ng.call(i),i._type_3=0==(1&e)?"MultiPolygon":n,i._coordinates=0==(2&e)?Tr():r,i},_g.prototype.serialize_84=function(t,e){var n=this._descriptor_36,r=t.beginStructure_14(n);(r.shouldEncodeElementDefault_3(n,0)||"MultiPolygon"!==e._type_3)&&r.encodeStringElement_3(n,0,e._type_3),(!!r.shouldEncodeElementDefault_3(n,1)||!Dl(e._coordinates,Tr()))&&r.encodeSerializableElement_3(n,1,new Ip(new Ip(new Ip(new Cp(za()._get_doubleClass_(),Sd())))),e._coordinates),r.endStructure_14(n)},_g.prototype.serialize_107=function(t,e){return this.serialize_84(t,e instanceof gg?e:ql())},_g.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},gg.$metadata$={simpleName:"MultiPolygon",kind:"class",interfaces:[],associatedObjects:{0:mg}},yg.prototype.fromLngLat=function(t,e){var n=new Eg;return n._coordinates_0=[t,e],n},yg.prototype.serializer=function(){return xg()},yg.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},bg.prototype._get_descriptor__66=function(){return this._descriptor_37},bg.prototype.childSerializers_15=function(){return[xd(),new Cp(za()._get_doubleClass_(),Sd())]},bg.prototype.deserialize_70=function(t){var e=this._descriptor_37,n=!0,r=0,i=0,o=null,s=null,a=t.beginStructure_14(e);if(a.decodeSequentially_9())o=a.decodeStringElement_9(e,0),i|=1,s=a.decodeSerializableElement_9(e,1,new Cp(za()._get_doubleClass_(),Sd()),s),i|=2;else for(;n;)switch(r=a.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=a.decodeStringElement_9(e,0),i|=1;break;case 1:s=a.decodeSerializableElement_9(e,1,new Cp(za()._get_doubleClass_(),Sd()),s),i|=2;break;default:throw Uc(r)}return a.endStructure_14(e),wg(i,o,s)},bg.prototype.serialize_86=function(t,e){var n=this._descriptor_37,r=t.beginStructure_14(n);(r.shouldEncodeElementDefault_3(n,0)||"Point"!==e._type_4)&&r.encodeStringElement_3(n,0,e._type_4),(!!r.shouldEncodeElementDefault_3(n,1)||!Dl(e._coordinates_0,[]))&&r.encodeSerializableElement_3(n,1,new Cp(za()._get_doubleClass_(),Sd()),e._coordinates_0),r.endStructure_14(n)},bg.prototype.serialize_107=function(t,e){return this.serialize_86(t,e instanceof Eg?e:ql())},bg.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},Object.defineProperty(bg.prototype,"descriptor",{configurable:!0,get:bg.prototype._get_descriptor__66}),Eg.prototype._set_type_=function(t){this._type_4=t},Eg.prototype._get_type_=function(){return this._type_4},Eg.prototype._set_coordinates_=function(t){this._coordinates_0=t},Eg.prototype._get_coordinates_=function(){return this._coordinates_0},Eg.$metadata$={simpleName:"Point",kind:"class",interfaces:[],associatedObjects:{0:xg}},Object.defineProperty(Eg.prototype,"type",{configurable:!0,get:Eg.prototype._get_type_,set:Eg.prototype._set_type_}),Object.defineProperty(Eg.prototype,"coordinates",{configurable:!0,get:Eg.prototype._get_coordinates_,set:Eg.prototype._set_coordinates_}),Sg.prototype.serializer_3=function(){return Ig()},Sg.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Cg.prototype._get_descriptor__66=function(){return this._descriptor_38},Cg.prototype.childSerializers_15=function(){return[xd(),new Ip(new Ip(new Cp(za()._get_doubleClass_(),Sd())))]},Cg.prototype.deserialize_70=function(t){var e,n,r,i,o=this._descriptor_38,s=!0,a=0,l=0,u=null,c=null,h=t.beginStructure_14(o);if(h.decodeSequentially_9())u=h.decodeStringElement_9(o,0),l|=1,c=h.decodeSerializableElement_9(o,1,new Ip(new Ip(new Cp(za()._get_doubleClass_(),Sd()))),c),l|=2;else for(;s;)switch(a=h.decodeElementIndex_9(o)){case-1:s=!1;break;case 0:u=h.decodeStringElement_9(o,0),l|=1;break;case 1:c=h.decodeSerializableElement_9(o,1,new Ip(new Ip(new Cp(za()._get_doubleClass_(),Sd()))),c),l|=2;break;default:throw Uc(a)}return h.endStructure_14(o),e=l,n=u,r=c,i=Object.create(kg.prototype),ng.call(i),i._type_5=0==(1&e)?"Polygon":n,i._coordinates_1=0==(2&e)?Tr():r,i},Cg.prototype.serialize_88=function(t,e){var n=this._descriptor_38,r=t.beginStructure_14(n);(r.shouldEncodeElementDefault_3(n,0)||"Polygon"!==e._type_5)&&r.encodeStringElement_3(n,0,e._type_5),(!!r.shouldEncodeElementDefault_3(n,1)||!Dl(e._coordinates_1,Tr()))&&r.encodeSerializableElement_3(n,1,new Ip(new Ip(new Cp(za()._get_doubleClass_(),Sd()))),e._coordinates_1),r.endStructure_14(n)},Cg.prototype.serialize_107=function(t,e){return this.serialize_88(t,e instanceof kg?e:ql())},Cg.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},kg.$metadata$={simpleName:"Polygon",kind:"class",interfaces:[],associatedObjects:{0:Ig}},Tg.$metadata$={simpleName:"TurfConstants",kind:"object",interfaces:[]},Ag.prototype.distance=function(t,e,n){return Xa(zl(function(t,e,n){return turf.distance(t,e,n)}(t._coordinates_0,e._coordinates_0,n)))},Ag.prototype.length_0=function(t,e){return Xa(zl(function(t,e){return turf.length(turf.lineString(t),{units:e})}(t._internalCoordinates,e)))},Ag.prototype.bearing=function(t,e){return Xa(zl(turf.bearing(t._coordinates_0,e._coordinates_0)))},Ag.$metadata$={simpleName:"TurfMeasurement",kind:"object",interfaces:[]},Mg.prototype.nearestPointOnLine=function(t,e){return function(t,e){return turf.nearestPointOnLine(t,e)}(sg().fromLngLats(e),t)},Mg.$metadata$={simpleName:"TurfMisc",kind:"object",interfaces:[]},Ng.prototype.escapeHTML=function(t){return this},Ng.prototype.compile=function(t){return new Dg(null==t?"":t)},Ng.$metadata$={simpleName:"Compiler",kind:"class",interfaces:[]},Dg.prototype.execute=function(t){var e=Lg(this,t),n=af(),r=Xc(n._get_serializersModule__18(),pa(Fa(yf),[],!1)),i=n.encodeToString_2(Cu(r,Mc)?r:ql(),e);return this.execute_1(i)},Dg.prototype.execute_0=function(t){var e=af(),n=Xc(e._get_serializersModule__18(),pa(Fa(ll),[da(pa(za()._get_stringClass_(),[],!1)),da(pa(za()._get_stringClass_(),[],!0))],!1)),r=e.encodeToString_2(Cu(n,Mc)?n:ql(),t);return this.execute_1(r)},Dg.prototype.execute_1=function(t){return zl(mustache.render(this._template,JSON.parse(t)))},Dg.$metadata$={simpleName:"Template",kind:"class",interfaces:[]},Rg.prototype.compiler=function(){return new Ng},Rg.$metadata$={simpleName:"Mustache",kind:"object",interfaces:[]},zg.$metadata$={simpleName:"Plurals",kind:"class",interfaces:[]},Fg.$metadata$={simpleName:"R",kind:"object",interfaces:[]},Bg.prototype._get_descriptor__66=function(){return this._descriptor_39},Bg.prototype.childSerializers_15=function(){return[new Up(xd()),new Up(ig()),new Up(Nf())]},Bg.prototype.deserialize_70=function(t){var e,n,r,i,o,s=this._descriptor_39,a=!0,l=0,u=0,c=null,h=null,p=null,d=t.beginStructure_14(s);if(d.decodeSequentially_9())c=d.decodeNullableSerializableElement_9(s,0,xd(),c),u|=1,h=d.decodeNullableSerializableElement_9(s,1,ig(),h),u|=2,p=d.decodeNullableSerializableElement_9(s,2,Nf(),p),u|=4;else for(;a;)switch(l=d.decodeElementIndex_9(s)){case-1:a=!1;break;case 0:c=d.decodeNullableSerializableElement_9(s,0,xd(),c),u|=1;break;case 1:h=d.decodeNullableSerializableElement_9(s,1,ig(),h),u|=2;break;case 2:p=d.decodeNullableSerializableElement_9(s,2,Nf(),p),u|=4;break;default:throw Uc(l)}return d.endStructure_14(s),e=u,n=c,r=h,i=p,(o=Object.create(jg.prototype))._id=0==(1&e)?null:n,o._featureGeometry=0==(2&e)?null:r,o._featureProperties=0==(4&e)?null:i,o},Bg.prototype.serialize_90=function(t,e){var n=this._descriptor_39,r=t.beginStructure_14(n);(r.shouldEncodeElementDefault_3(n,0)||null!=e._id)&&r.encodeNullableSerializableElement_3(n,0,xd(),e._id),(r.shouldEncodeElementDefault_3(n,1)||null!=e._featureGeometry)&&r.encodeNullableSerializableElement_3(n,1,ig(),e._featureGeometry),(r.shouldEncodeElementDefault_3(n,2)||null!=e._featureProperties)&&r.encodeNullableSerializableElement_3(n,2,Nf(),e._featureProperties),r.endStructure_14(n)},Bg.prototype.serialize_107=function(t,e){return this.serialize_90(t,e instanceof jg?e:ql())},Bg.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},jg.prototype.getLevel=function(){throw lc(zl("dummy function!"))},jg.prototype.getTitle=function(){throw lc(zl("dummy function!"))},jg.prototype.getLevels=function(){throw lc(zl("dummy function!"))},jg.prototype.getType=function(){var t=this._featureProperties,e=(null==t||t.get_16("type"),this._featureProperties),n=null==e?null:e.get_16("type");switch(null==n?null:Hm(n)){case"decision":return Xg();case"door":return Zg(),cn;case"elevator":return Yg();case"entrance":return Zg(),pn;case"escalator":return Kg();case"hazard":return Jg();case"landmark":return Zg(),_n;case"poi":return Zg(),gn;case"staircase":return Qg();case"ticket_gate":return Zg(),vn;case"outdoor_connector":return Zg(),mn;default:return Zg(),bn}},jg.prototype.getRange=function(){throw lc(zl("dummy function!"))},jg.prototype.pointToPointDistance=function(t){var e=this._featureGeometry;return null==e?null:e instanceof Eg?Og().distance(e,t,"meters"):null},jg.$metadata$={simpleName:"Feature",kind:"class",interfaces:[],associatedObjects:{0:function(){return null==sn&&new Bg,sn}}},Vg.prototype._get_descriptor__66=function(){return this._descriptor_40},Vg.prototype.childSerializers_15=function(){return[new Up(xd()),new Up(xd()),new Up(xd()),new Up(xd()),new Up(xd()),new Up(xd())]},Vg.prototype.deserialize_70=function(t){var e=this._descriptor_40,n=!0,r=0,i=0,o=null,s=null,a=null,l=null,u=null,c=null,h=t.beginStructure_14(e);if(h.decodeSequentially_9())o=h.decodeNullableSerializableElement_9(e,0,xd(),o),i|=1,s=h.decodeNullableSerializableElement_9(e,1,xd(),s),i|=2,a=h.decodeNullableSerializableElement_9(e,2,xd(),a),i|=4,l=h.decodeNullableSerializableElement_9(e,3,xd(),l),i|=8,u=h.decodeNullableSerializableElement_9(e,4,xd(),u),i|=16,c=h.decodeNullableSerializableElement_9(e,5,xd(),c),i|=32;else for(;n;)switch(r=h.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=h.decodeNullableSerializableElement_9(e,0,xd(),o),i|=1;break;case 1:s=h.decodeNullableSerializableElement_9(e,1,xd(),s),i|=2;break;case 2:a=h.decodeNullableSerializableElement_9(e,2,xd(),a),i|=4;break;case 3:l=h.decodeNullableSerializableElement_9(e,3,xd(),l),i|=8;break;case 4:u=h.decodeNullableSerializableElement_9(e,4,xd(),u),i|=16;break;case 5:c=h.decodeNullableSerializableElement_9(e,5,xd(),c),i|=32;break;default:throw Uc(r)}return h.endStructure_14(e),function(t,e,n,r,i,o,s,a,l){if(0==(1&t))throw qc("zero");if(l._zero=e,0==(2&t))throw qc("one");if(l._one=n,0==(4&t))throw qc("two");if(l._two=r,0==(8&t))throw qc("few");if(l._few=i,0==(16&t))throw qc("more");if(l._many=o,0==(32&t))throw qc("other");return l._other=s,l}(i,o,s,a,l,u,c,0,Object.create($g.prototype))},Vg.prototype.serialize_92=function(t,e){var n=this._descriptor_40,r=t.beginStructure_14(n);r.encodeNullableSerializableElement_3(n,0,xd(),e._zero),r.encodeNullableSerializableElement_3(n,1,xd(),e._one),r.encodeNullableSerializableElement_3(n,2,xd(),e._two),r.encodeNullableSerializableElement_3(n,3,xd(),e._few),r.encodeNullableSerializableElement_3(n,4,xd(),e._many),r.encodeNullableSerializableElement_3(n,5,xd(),e._other),r.endStructure_14(n)},Vg.prototype.serialize_107=function(t,e){return this.serialize_92(t,e instanceof $g?e:ql())},Vg.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},$g.prototype.getStringForQuantity=function(t,e){return this.getStringForQuantity_0(t,Ys(e))},$g.prototype.getStringForQuantity_0=function(t,e){var n,r,i=t._resources.getQuantityString((null==on&&new Fg,on)._plurals._proximi_quantities,e);switch(i){case"ZERO":n=this._zero;break;case"ONE":n=this._one;break;case"TWO":n=this._two;break;case"FEW":n=this._few;break;case"MANY":n=this._many;break;case"OTHER":n=this._other;break;default:n=null}return null!=n?r=n:((null==Be&&new qm,Be).e("GuidanceTranslation","Missing translation for quantity "+i),r=""),r},$g.prototype.toString=function(){return"QuantityString(zero="+this._zero+", one="+this._one+", two="+this._two+", few="+this._few+", many="+this._many+", other="+this._other+")"},$g.prototype.hashCode=function(){var t=null==this._zero?0:Fl(this._zero);return t=_u(t,31)+(null==this._one?0:Fl(this._one))|0,t=_u(t,31)+(null==this._two?0:Fl(this._two))|0,t=_u(t,31)+(null==this._few?0:Fl(this._few))|0,t=_u(t,31)+(null==this._many?0:Fl(this._many))|0,_u(t,31)+(null==this._other?0:Fl(this._other))|0},$g.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof $g))return!1;var e=t instanceof $g?t:ql();return this._zero==e._zero&&this._one==e._one&&this._two==e._two&&this._few==e._few&&this._many==e._many&&this._other==e._other},$g.$metadata$={simpleName:"QuantityString",kind:"class",interfaces:[],associatedObjects:{0:Ug}},qg.prototype._get_descriptor__66=function(){return this._descriptor_41},qg.prototype.childSerializers_15=function(){return[xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),new Up(xd()),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),new Up(xd()),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),xd(),Ug(),new kp(xd(),Ug())]},qg.prototype.deserialize_70=function(t){var e=this._descriptor_41,n=!0,r=0,i=0,o=0,s=null,a=null,l=null,u=null,c=null,h=null,p=null,d=null,f=null,_=null,m=null,g=null,y=null,v=null,b=null,x=null,w=null,E=null,S=null,C=null,I=null,k=null,T=null,P=null,A=null,O=null,M=null,L=null,N=null,D=null,R=null,z=null,F=null,B=null,j=null,V=null,U=null,$=null,q=null,G=null,H=null,Z=null,W=null,X=null,Y=null,K=null,J=null,Q=null,tt=null,et=null,nt=null,rt=null,it=null,ot=null,st=null,at=null,lt=null,ut=null,ct=null,ht=null,pt=null,dt=null,ft=null,_t=null,mt=t.beginStructure_14(e);if(mt.decodeSequentially_9())s=mt.decodeStringElement_9(e,0),i|=1,a=mt.decodeStringElement_9(e,1),i|=2,l=mt.decodeStringElement_9(e,2),i|=4,u=mt.decodeStringElement_9(e,3),i|=8,c=mt.decodeStringElement_9(e,4),i|=16,h=mt.decodeStringElement_9(e,5),i|=32,p=mt.decodeStringElement_9(e,6),i|=64,d=mt.decodeStringElement_9(e,7),i|=128,f=mt.decodeStringElement_9(e,8),i|=256,_=mt.decodeStringElement_9(e,9),i|=512,m=mt.decodeStringElement_9(e,10),i|=1024,g=mt.decodeStringElement_9(e,11),i|=2048,y=mt.decodeNullableSerializableElement_9(e,12,xd(),y),i|=4096,v=mt.decodeStringElement_9(e,13),i|=8192,b=mt.decodeStringElement_9(e,14),i|=16384,x=mt.decodeStringElement_9(e,15),i|=32768,w=mt.decodeStringElement_9(e,16),i|=65536,E=mt.decodeStringElement_9(e,17),i|=131072,S=mt.decodeStringElement_9(e,18),i|=262144,C=mt.decodeStringElement_9(e,19),i|=524288,I=mt.decodeStringElement_9(e,20),i|=1048576,k=mt.decodeStringElement_9(e,21),i|=2097152,T=mt.decodeStringElement_9(e,22),i|=4194304,P=mt.decodeStringElement_9(e,23),i|=8388608,A=mt.decodeStringElement_9(e,24),i|=16777216,O=mt.decodeNullableSerializableElement_9(e,25,xd(),O),i|=33554432,M=mt.decodeStringElement_9(e,26),i|=67108864,L=mt.decodeStringElement_9(e,27),i|=134217728,N=mt.decodeStringElement_9(e,28),i|=268435456,D=mt.decodeStringElement_9(e,29),i|=536870912,R=mt.decodeStringElement_9(e,30),i|=1073741824,z=mt.decodeStringElement_9(e,31),i|=-2147483648,F=mt.decodeStringElement_9(e,32),o|=1,B=mt.decodeStringElement_9(e,33),o|=2,j=mt.decodeStringElement_9(e,34),o|=4,V=mt.decodeStringElement_9(e,35),o|=8,U=mt.decodeStringElement_9(e,36),o|=16,$=mt.decodeStringElement_9(e,37),o|=32,q=mt.decodeStringElement_9(e,38),o|=64,G=mt.decodeStringElement_9(e,39),o|=128,H=mt.decodeStringElement_9(e,40),o|=256,Z=mt.decodeStringElement_9(e,41),o|=512,W=mt.decodeStringElement_9(e,42),o|=1024,X=mt.decodeStringElement_9(e,43),o|=2048,Y=mt.decodeStringElement_9(e,44),o|=4096,K=mt.decodeStringElement_9(e,45),o|=8192,J=mt.decodeStringElement_9(e,46),o|=16384,Q=mt.decodeStringElement_9(e,47),o|=32768,tt=mt.decodeStringElement_9(e,48),o|=65536,et=mt.decodeStringElement_9(e,49),o|=131072,nt=mt.decodeStringElement_9(e,50),o|=262144,rt=mt.decodeStringElement_9(e,51),o|=524288,it=mt.decodeStringElement_9(e,52),o|=1048576,ot=mt.decodeStringElement_9(e,53),o|=2097152,st=mt.decodeStringElement_9(e,54),o|=4194304,at=mt.decodeStringElement_9(e,55),o|=8388608,lt=mt.decodeStringElement_9(e,56),o|=16777216,ut=mt.decodeStringElement_9(e,57),o|=33554432,ct=mt.decodeStringElement_9(e,58),o|=67108864,ht=mt.decodeStringElement_9(e,59),o|=134217728,pt=mt.decodeStringElement_9(e,60),o|=268435456,dt=mt.decodeStringElement_9(e,61),o|=536870912,ft=mt.decodeSerializableElement_9(e,62,Ug(),ft),o|=1073741824,_t=mt.decodeSerializableElement_9(e,63,new kp(xd(),Ug()),_t),o|=-2147483648;else for(;n;)switch(r=mt.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:s=mt.decodeStringElement_9(e,0),i|=1;break;case 1:a=mt.decodeStringElement_9(e,1),i|=2;break;case 2:l=mt.decodeStringElement_9(e,2),i|=4;break;case 3:u=mt.decodeStringElement_9(e,3),i|=8;break;case 4:c=mt.decodeStringElement_9(e,4),i|=16;break;case 5:h=mt.decodeStringElement_9(e,5),i|=32;break;case 6:p=mt.decodeStringElement_9(e,6),i|=64;break;case 7:d=mt.decodeStringElement_9(e,7),i|=128;break;case 8:f=mt.decodeStringElement_9(e,8),i|=256;break;case 9:_=mt.decodeStringElement_9(e,9),i|=512;break;case 10:m=mt.decodeStringElement_9(e,10),i|=1024;break;case 11:g=mt.decodeStringElement_9(e,11),i|=2048;break;case 12:y=mt.decodeNullableSerializableElement_9(e,12,xd(),y),i|=4096;break;case 13:v=mt.decodeStringElement_9(e,13),i|=8192;break;case 14:b=mt.decodeStringElement_9(e,14),i|=16384;break;case 15:x=mt.decodeStringElement_9(e,15),i|=32768;break;case 16:w=mt.decodeStringElement_9(e,16),i|=65536;break;case 17:E=mt.decodeStringElement_9(e,17),i|=131072;break;case 18:S=mt.decodeStringElement_9(e,18),i|=262144;break;case 19:C=mt.decodeStringElement_9(e,19),i|=524288;break;case 20:I=mt.decodeStringElement_9(e,20),i|=1048576;break;case 21:k=mt.decodeStringElement_9(e,21),i|=2097152;break;case 22:T=mt.decodeStringElement_9(e,22),i|=4194304;break;case 23:P=mt.decodeStringElement_9(e,23),i|=8388608;break;case 24:A=mt.decodeStringElement_9(e,24),i|=16777216;break;case 25:O=mt.decodeNullableSerializableElement_9(e,25,xd(),O),i|=33554432;break;case 26:M=mt.decodeStringElement_9(e,26),i|=67108864;break;case 27:L=mt.decodeStringElement_9(e,27),i|=134217728;break;case 28:N=mt.decodeStringElement_9(e,28),i|=268435456;break;case 29:D=mt.decodeStringElement_9(e,29),i|=536870912;break;case 30:R=mt.decodeStringElement_9(e,30),i|=1073741824;break;case 31:z=mt.decodeStringElement_9(e,31),i|=-2147483648;break;case 32:F=mt.decodeStringElement_9(e,32),o|=1;break;case 33:B=mt.decodeStringElement_9(e,33),o|=2;break;case 34:j=mt.decodeStringElement_9(e,34),o|=4;break;case 35:V=mt.decodeStringElement_9(e,35),o|=8;break;case 36:U=mt.decodeStringElement_9(e,36),o|=16;break;case 37:$=mt.decodeStringElement_9(e,37),o|=32;break;case 38:q=mt.decodeStringElement_9(e,38),o|=64;break;case 39:G=mt.decodeStringElement_9(e,39),o|=128;break;case 40:H=mt.decodeStringElement_9(e,40),o|=256;break;case 41:Z=mt.decodeStringElement_9(e,41),o|=512;break;case 42:W=mt.decodeStringElement_9(e,42),o|=1024;break;case 43:X=mt.decodeStringElement_9(e,43),o|=2048;break;case 44:Y=mt.decodeStringElement_9(e,44),o|=4096;break;case 45:K=mt.decodeStringElement_9(e,45),o|=8192;break;case 46:J=mt.decodeStringElement_9(e,46),o|=16384;break;case 47:Q=mt.decodeStringElement_9(e,47),o|=32768;break;case 48:tt=mt.decodeStringElement_9(e,48),o|=65536;break;case 49:et=mt.decodeStringElement_9(e,49),o|=131072;break;case 50:nt=mt.decodeStringElement_9(e,50),o|=262144;break;case 51:rt=mt.decodeStringElement_9(e,51),o|=524288;break;case 52:it=mt.decodeStringElement_9(e,52),o|=1048576;break;case 53:ot=mt.decodeStringElement_9(e,53),o|=2097152;break;case 54:st=mt.decodeStringElement_9(e,54),o|=4194304;break;case 55:at=mt.decodeStringElement_9(e,55),o|=8388608;break;case 56:lt=mt.decodeStringElement_9(e,56),o|=16777216;break;case 57:ut=mt.decodeStringElement_9(e,57),o|=33554432;break;case 58:ct=mt.decodeStringElement_9(e,58),o|=67108864;break;case 59:ht=mt.decodeStringElement_9(e,59),o|=134217728;break;case 60:pt=mt.decodeStringElement_9(e,60),o|=268435456;break;case 61:dt=mt.decodeStringElement_9(e,61),o|=536870912;break;case 62:ft=mt.decodeSerializableElement_9(e,62,Ug(),ft),o|=1073741824;break;case 63:_t=mt.decodeSerializableElement_9(e,63,new kp(xd(),Ug()),_t),o|=-2147483648;break;default:throw Uc(r)}return mt.endStructure_14(e),function(t,e,n,r,i,o,s,a,l,u,c,h,p,d,f,_,m,g,y,v,b,x,w,E,S,C,I,k,T,P,A,O,M,L,N,D,R,z,F,B,j,V,U,$,q,G,H,Z,W,X,Y,K,J,Q,tt,et,nt,rt,it,ot,st,at,lt,ut,ct,ht,pt,dt,ft){if(0==(1&t))throw qc("lang");if(ft._lang=r,0==(2&t))throw qc("route_ready");if(ft._routeReady=i,0==(4&t))throw qc("update_turn");if(ft._updateTurn=o,0==(8&t))throw qc("update_turn_confirmation");if(ft._updateTurnConfirmation=s,0==(16&t))throw qc("update_turn_left_hard");if(ft._updateTurnLeftHard=a,0==(32&t))throw qc("update_turn_left");if(ft._updateTurnLeft=l,0==(64&t))throw qc("update_turn_left_slight");if(ft._updateTurnLeftSlight=u,0==(128&t))throw qc("update_turn_straight");if(ft._updateTurnStraight=c,0==(256&t))throw qc("update_turn_right_slight");if(ft._updateTurnRightSlight=h,0==(512&t))throw qc("update_turn_right");if(ft._updateTurnRight=p,0==(1024&t))throw qc("update_turn_right_hard");if(ft._updateTurnRightHard=d,0==(2048&t))throw qc("update_turn_around");if(ft._updateTurnAround=f,0==(4096&t))throw qc("update_waypoint");if(ft._updateWaypoint=_,0==(8192&t))throw qc("update_destination");if(ft._updateDestination=m,0==(16384&t))throw qc("update_levelchange_elevator");if(ft._updateLevelchangeElevator=g,0==(32768&t))throw qc("update_levelchange_escalator");if(ft._updateLevelchangeEscalator=y,0==(65536&t))throw qc("update_levelchange_stairs");if(ft._updateLevelchangeStairs=v,0==(131072&t))throw qc("immediate_turn_left_hard");if(ft._immediateTurnLeftHard=b,0==(262144&t))throw qc("immediate_turn_left");if(ft._immediateTurnLeft=x,0==(524288&t))throw qc("immediate_turn_left_slight");if(ft._immediateTurnLeftSlight=w,0==(1048576&t))throw qc("immediate_turn_straight");if(ft._immediateTurnStraight=E,0==(2097152&t))throw qc("immediate_turn_right_slight");if(ft._immediateTurnRightSlight=S,0==(4194304&t))throw qc("immediate_turn_right");if(ft._immediateTurnRight=C,0==(8388608&t))throw qc("immediate_turn_right_hard");if(ft._immediateTurnRightHard=I,0==(16777216&t))throw qc("immediate_turn_around");if(ft._immediateTurnAround=k,0==(33554432&t))throw qc("immediate_waypoint");if(ft._immediateWaypoint=T,0==(67108864&t))throw qc("immediate_levelchange_elevator");if(ft._immediateLevelchangeElevator=P,0==(134217728&t))throw qc("immediate_levelchange_escalator");if(ft._immediateLevelchangeEscalator=A,0==(268435456&t))throw qc("immediate_levelchange_stairs");if(ft._immediateLevelchangeStairs=O,0==(536870912&t))throw qc("direction_up");if(ft._directionUp=M,0==(1073741824&t))throw qc("direction_down");if(ft._directionDown=L,0==(-2147483648&t))throw qc("immediate_levelchange_side_left");if(ft._immediateLevelchangeSideLeft=N,0==(1&e))throw qc("immediate_levelchange_side_right");if(ft._immediateLevelchangeSideRight=D,0==(2&e))throw qc("immediate_levelchange_side_ahead");if(ft._immediateLevelchangeSideAhead=R,0==(4&e))throw qc("next_step_destination");if(ft._nextStepDestination=z,0==(8&e))throw qc("next_step_landmarks");if(ft._nextStepLandmarks=F,0==(16&e))throw qc("next_step_landmarks_landmark_position_left");if(ft._nextStepLandmarksLandmarkPositionLeft=B,0==(32&e))throw qc("next_step_landmarks_landmark_position_right");if(ft._nextStepLandmarksLandmarkPositionRight=j,0==(64&e))throw qc("next_step_levelchanger_elevator");if(ft._nextStepLevelchangerElevator=V,0==(128&e))throw qc("next_step_levelchanger_escalator");if(ft._nextStepLevelchangerEscalator=U,0==(256&e))throw qc("next_step_levelchanger_stairs");if(ft._nextStepLevelchangerStairs=$,ft._exitLevelChangerElevator=0==(512&e)?"":q,ft._exitLevelChangerEscalator=0==(1024&e)?"":G,ft._exitLevelChangerStairs=0==(2048&e)?"":H,0==(4096&e))throw qc("passing_landmark");if(ft._passingLandmark=Z,0==(8192&e))throw qc("destination_arriving");if(ft._destinationArriving=W,0==(16384&e))throw qc("destination_arrived");if(ft._destinationArrived=X,0==(32768&e))throw qc("state_calculating");if(ft._stateCalculating=Y,0==(65536&e))throw qc("state_recalculating");if(ft._stateRecalculating=K,0==(131072&e))throw qc("state_route_not_found");if(ft._stateRouteNotFound=J,0==(262144&e))throw qc("state_route_osrm_error");if(ft._stateRouteOsrmError=Q,0==(524288&e))throw qc("state_canceled");if(ft._stateCanceled=tt,0==(1048576&e))throw qc("hazard");if(ft._hazard=et,0==(2097152&e))throw qc("hazard_side_left");if(ft._hazardSideLeft=nt,0==(4194304&e))throw qc("hazard_side_right");if(ft._hazardSideRight=rt,0==(8388608&e))throw qc("hazard_side_ahead");if(ft._hazardSideAhead=it,0==(16777216&e))throw qc("decision");if(ft._decision=ot,0==(33554432&e))throw qc("segment_enter");if(ft._segmentEnter=st,0==(67108864&e))throw qc("segment_leave");if(ft._segmentLeave=at,0==(134217728&e))throw qc("heading_correction");if(ft._headingCorrection=lt,0==(268435456&e))throw qc("heading_start");if(ft._headingStart=ut,0==(536870912&e))throw qc("heading_wrong_way");if(ft._headingWrongWay=ct,0==(1073741824&e))throw qc("level");if(ft._levels=ht,0==(-2147483648&e))throw qc("units");return ft._units=pt,ft}(i,o,0,s,a,l,u,c,h,p,d,f,_,m,g,y,v,b,x,w,E,S,C,I,k,T,P,A,O,M,L,N,D,R,z,F,B,j,V,U,$,q,G,H,Z,W,X,Y,K,J,Q,tt,et,nt,rt,it,ot,st,at,lt,ut,ct,ht,pt,dt,ft,_t,0,Object.create(Gg.prototype))},qg.prototype.serialize_94=function(t,e){var n=this._descriptor_41,r=t.beginStructure_14(n);r.encodeStringElement_3(n,0,e._lang),r.encodeStringElement_3(n,1,e._routeReady),r.encodeStringElement_3(n,2,e._updateTurn),r.encodeStringElement_3(n,3,e._updateTurnConfirmation),r.encodeStringElement_3(n,4,e._updateTurnLeftHard),r.encodeStringElement_3(n,5,e._updateTurnLeft),r.encodeStringElement_3(n,6,e._updateTurnLeftSlight),r.encodeStringElement_3(n,7,e._updateTurnStraight),r.encodeStringElement_3(n,8,e._updateTurnRightSlight),r.encodeStringElement_3(n,9,e._updateTurnRight),r.encodeStringElement_3(n,10,e._updateTurnRightHard),r.encodeStringElement_3(n,11,e._updateTurnAround),r.encodeNullableSerializableElement_3(n,12,xd(),e._updateWaypoint),r.encodeStringElement_3(n,13,e._updateDestination),r.encodeStringElement_3(n,14,e._updateLevelchangeElevator),r.encodeStringElement_3(n,15,e._updateLevelchangeEscalator),r.encodeStringElement_3(n,16,e._updateLevelchangeStairs),r.encodeStringElement_3(n,17,e._immediateTurnLeftHard),r.encodeStringElement_3(n,18,e._immediateTurnLeft),r.encodeStringElement_3(n,19,e._immediateTurnLeftSlight),r.encodeStringElement_3(n,20,e._immediateTurnStraight),r.encodeStringElement_3(n,21,e._immediateTurnRightSlight),r.encodeStringElement_3(n,22,e._immediateTurnRight),r.encodeStringElement_3(n,23,e._immediateTurnRightHard),r.encodeStringElement_3(n,24,e._immediateTurnAround),r.encodeNullableSerializableElement_3(n,25,xd(),e._immediateWaypoint),r.encodeStringElement_3(n,26,e._immediateLevelchangeElevator),r.encodeStringElement_3(n,27,e._immediateLevelchangeEscalator),r.encodeStringElement_3(n,28,e._immediateLevelchangeStairs),r.encodeStringElement_3(n,29,e._directionUp),r.encodeStringElement_3(n,30,e._directionDown),r.encodeStringElement_3(n,31,e._immediateLevelchangeSideLeft),r.encodeStringElement_3(n,32,e._immediateLevelchangeSideRight),r.encodeStringElement_3(n,33,e._immediateLevelchangeSideAhead),r.encodeStringElement_3(n,34,e._nextStepDestination),r.encodeStringElement_3(n,35,e._nextStepLandmarks),r.encodeStringElement_3(n,36,e._nextStepLandmarksLandmarkPositionLeft),r.encodeStringElement_3(n,37,e._nextStepLandmarksLandmarkPositionRight),r.encodeStringElement_3(n,38,e._nextStepLevelchangerElevator),r.encodeStringElement_3(n,39,e._nextStepLevelchangerEscalator),r.encodeStringElement_3(n,40,e._nextStepLevelchangerStairs),(r.shouldEncodeElementDefault_3(n,41)||""!==e._exitLevelChangerElevator)&&r.encodeStringElement_3(n,41,e._exitLevelChangerElevator),(r.shouldEncodeElementDefault_3(n,42)||""!==e._exitLevelChangerEscalator)&&r.encodeStringElement_3(n,42,e._exitLevelChangerEscalator),(r.shouldEncodeElementDefault_3(n,43)||""!==e._exitLevelChangerStairs)&&r.encodeStringElement_3(n,43,e._exitLevelChangerStairs),r.encodeStringElement_3(n,44,e._passingLandmark),r.encodeStringElement_3(n,45,e._destinationArriving),r.encodeStringElement_3(n,46,e._destinationArrived),r.encodeStringElement_3(n,47,e._stateCalculating),r.encodeStringElement_3(n,48,e._stateRecalculating),r.encodeStringElement_3(n,49,e._stateRouteNotFound),r.encodeStringElement_3(n,50,e._stateRouteOsrmError),r.encodeStringElement_3(n,51,e._stateCanceled),r.encodeStringElement_3(n,52,e._hazard),r.encodeStringElement_3(n,53,e._hazardSideLeft),r.encodeStringElement_3(n,54,e._hazardSideRight),r.encodeStringElement_3(n,55,e._hazardSideAhead),r.encodeStringElement_3(n,56,e._decision),r.encodeStringElement_3(n,57,e._segmentEnter),r.encodeStringElement_3(n,58,e._segmentLeave),r.encodeStringElement_3(n,59,e._headingCorrection),r.encodeStringElement_3(n,60,e._headingStart),r.encodeStringElement_3(n,61,e._headingWrongWay),r.encodeSerializableElement_3(n,62,Ug(),e._levels),r.encodeSerializableElement_3(n,63,new kp(xd(),Ug()),e._units),r.endStructure_14(n)},qg.prototype.serialize_107=function(t,e){return this.serialize_94(t,e instanceof Gg?e:ql())},qg.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},Gg.$metadata$={simpleName:"GuidanceTranslation",kind:"class",interfaces:[],associatedObjects:{0:function(){return null==ln&&new qg,ln}}},Wg.prototype.isLevelChanger=function(){return!(!this.equals(Yg())&&!this.equals(Kg()))||this.equals(Qg())},Wg.$metadata$={simpleName:"ProximiioFeatureType",kind:"class",interfaces:[]},ty.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},ey.prototype._get_descriptor__66=function(){return this._descriptor_42},ey.prototype.childSerializers_15=function(){return[Sd(),xg(),new Lp("io.proximi.mapbox.library.RouteStepDirection",gy()),Sd(),Td(),new Up(xd()),Md(),new Up(xd()),new Up(Km()),new Up(new Ip(xd()))]},ey.prototype.deserialize_70=function(t){var e=this._descriptor_42,n=!0,r=0,i=0,o=0,s=null,a=null,l=0,u=0,c=null,h=!1,p=null,d=null,f=null,_=t.beginStructure_14(e);if(_.decodeSequentially_9())o=_.decodeDoubleElement_9(e,0),i|=1,s=_.decodeSerializableElement_9(e,1,xg(),s),i|=2,a=_.decodeSerializableElement_9(e,2,new Lp("io.proximi.mapbox.library.RouteStepDirection",gy()),a),i|=4,l=_.decodeDoubleElement_9(e,3),i|=8,u=_.decodeIntElement_9(e,4),i|=16,c=_.decodeNullableSerializableElement_9(e,5,xd(),c),i|=32,h=_.decodeBooleanElement_9(e,6),i|=64,p=_.decodeNullableSerializableElement_9(e,7,xd(),p),i|=128,d=_.decodeNullableSerializableElement_9(e,8,Km(),d),i|=256,f=_.decodeNullableSerializableElement_9(e,9,new Ip(xd()),f),i|=512;else for(;n;)switch(r=_.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=_.decodeDoubleElement_9(e,0),i|=1;break;case 1:s=_.decodeSerializableElement_9(e,1,xg(),s),i|=2;break;case 2:a=_.decodeSerializableElement_9(e,2,new Lp("io.proximi.mapbox.library.RouteStepDirection",gy()),a),i|=4;break;case 3:l=_.decodeDoubleElement_9(e,3),i|=8;break;case 4:u=_.decodeIntElement_9(e,4),i|=16;break;case 5:c=_.decodeNullableSerializableElement_9(e,5,xd(),c),i|=32;break;case 6:h=_.decodeBooleanElement_9(e,6),i|=64;break;case 7:p=_.decodeNullableSerializableElement_9(e,7,xd(),p),i|=128;break;case 8:d=_.decodeNullableSerializableElement_9(e,8,Km(),d),i|=256;break;case 9:f=_.decodeNullableSerializableElement_9(e,9,new Ip(xd()),f),i|=512;break;default:throw Uc(r)}return _.endStructure_14(e),function(t,e,n,r,i,o,s,a,l,u,c,h,p){if(0==(1&t))throw qc("bearingFromLastStep");if(p._bearingFromLastNode=e,0==(2&t))throw qc("coordinates");if(p._coordinates_2=n,0==(4&t))throw qc("direction");if(p._direction=r,0==(8&t))throw qc("distanceFromLastStep");if(p._distanceFromLastNode=i,0==(16&t))throw qc("level");if(p._level_0=o,0==(32&t))throw qc("levelChangerId");if(p._levelChangerId=s,0==(64&t))throw qc("isWaypoint");if(p._isWaypoint=a,0==(128&t))throw qc("waypointId");if(p._waypointId=l,0==(256&t))throw qc("lineStringFeatureFromLastStep");return p._lineStringFeatureTo=u,p._instruction=0==(512&t)?null:c,p}(i,o,s,a,l,u,c,h,p,d,f,0,Object.create(ry.prototype))},ey.prototype.serialize_96=function(t,e){var n=this._descriptor_42,r=t.beginStructure_14(n);r.encodeDoubleElement_3(n,0,e._bearingFromLastNode),r.encodeSerializableElement_3(n,1,xg(),e._coordinates_2),r.encodeSerializableElement_3(n,2,new Lp("io.proximi.mapbox.library.RouteStepDirection",gy()),e._direction),r.encodeDoubleElement_3(n,3,e._distanceFromLastNode),r.encodeIntElement_3(n,4,e._level_0),r.encodeNullableSerializableElement_3(n,5,xd(),e._levelChangerId),r.encodeBooleanElement_3(n,6,e._isWaypoint),r.encodeNullableSerializableElement_3(n,7,xd(),e._waypointId),r.encodeNullableSerializableElement_3(n,8,Km(),e._lineStringFeatureTo),(r.shouldEncodeElementDefault_3(n,9)||null!=e._instruction)&&r.encodeNullableSerializableElement_3(n,9,new Ip(xd()),e._instruction),r.endStructure_14(n)},ey.prototype.serialize_107=function(t,e){return this.serialize_96(t,e instanceof ry?e:ql())},ey.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},ry.prototype.toString=function(){return"RouteNode(bearingFromLastNode="+this._bearingFromLastNode+", coordinates="+this._coordinates_2+", direction="+this._direction+", distanceFromLastNode="+this._distanceFromLastNode+", level="+this._level_0+", levelChangerId="+this._levelChangerId+", isWaypoint="+this._isWaypoint+", waypointId="+this._waypointId+", lineStringFeatureTo="+this._lineStringFeatureTo+")"},ry.prototype.hashCode=function(){var t=Il(this._bearingFromLastNode);return t=_u(t,31)+Rl(this._coordinates_2)|0,t=_u(t,31)+this._direction.hashCode()|0,t=_u(t,31)+Il(this._distanceFromLastNode)|0,t=_u(t,31)+this._level_0|0,t=_u(t,31)+(null==this._levelChangerId?0:Fl(this._levelChangerId))|0,t=_u(t,31)+(0|this._isWaypoint)|0,t=_u(t,31)+(null==this._waypointId?0:Fl(this._waypointId))|0,_u(t,31)+(null==this._lineStringFeatureTo?0:Rl(this._lineStringFeatureTo))|0},ry.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof ry))return!1;var e=t instanceof ry?t:ql();return!!(Dl(this._bearingFromLastNode,e._bearingFromLastNode)&&Dl(this._coordinates_2,e._coordinates_2)&&this._direction.equals(e._direction)&&Dl(this._distanceFromLastNode,e._distanceFromLastNode)&&this._level_0===e._level_0&&this._levelChangerId==e._levelChangerId&&this._isWaypoint===e._isWaypoint&&this._waypointId==e._waypointId&&Dl(this._lineStringFeatureTo,e._lineStringFeatureTo))},ry.$metadata$={simpleName:"RouteNode",kind:"class",interfaces:[],associatedObjects:{0:ny}},oy.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},sy.prototype._get_descriptor__66=function(){return this._descriptor_43},sy.prototype.childSerializers_15=function(){return[Sd(),new Up(Sd()),new Up(xd()),Km(),dy(),Td(),new Ip(ny())]},sy.prototype.deserialize_70=function(t){var e=this._descriptor_43,n=!0,r=0,i=0,o=0,s=null,a=null,l=null,u=null,c=0,h=null,p=t.beginStructure_14(e);if(p.decodeSequentially_9())o=p.decodeDoubleElement_9(e,0),i|=1,s=p.decodeNullableSerializableElement_9(e,1,Sd(),s),i|=2,a=p.decodeNullableSerializableElement_9(e,2,xd(),a),i|=4,l=p.decodeSerializableElement_9(e,3,Km(),l),i|=8,u=p.decodeSerializableElement_9(e,4,dy(),u),i|=16,c=p.decodeIntElement_9(e,5),i|=32,h=p.decodeSerializableElement_9(e,6,new Ip(ny()),h),i|=64;else for(;n;)switch(r=p.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=p.decodeDoubleElement_9(e,0),i|=1;break;case 1:s=p.decodeNullableSerializableElement_9(e,1,Sd(),s),i|=2;break;case 2:a=p.decodeNullableSerializableElement_9(e,2,xd(),a),i|=4;break;case 3:l=p.decodeSerializableElement_9(e,3,Km(),l),i|=8;break;case 4:u=p.decodeSerializableElement_9(e,4,dy(),u),i|=16;break;case 5:c=p.decodeIntElement_9(e,5),i|=32;break;case 6:h=p.decodeSerializableElement_9(e,6,new Ip(ny()),h),i|=64;break;default:throw Uc(r)}return p.endStructure_14(e),function(t,e,n,r,i,o,s,a,l,u){if(0==(1&t))throw qc("distanceMeters");if(u._distanceMeters=e,u._distanceCustom=0==(2&t)?null:n,u._distanceCustomUnit=0==(4&t)?null:r,0==(8&t))throw qc("destination");if(u._destination=i,0==(16&t))throw qc("configuration");if(u._configuration_3=o,u._lastNodeWithPathIndex=0==(32&t)?0:s,0==(64&t))throw qc("steps");return u._nodeList=a,u}(i,o,s,a,l,u,c,h,0,Object.create(ay.prototype))},sy.prototype.serialize_98=function(t,e){var n=this._descriptor_43,r=t.beginStructure_14(n);r.encodeDoubleElement_3(n,0,e._distanceMeters),(r.shouldEncodeElementDefault_3(n,1)||null!=e._distanceCustom)&&r.encodeNullableSerializableElement_3(n,1,Sd(),e._distanceCustom),(r.shouldEncodeElementDefault_3(n,2)||null!=e._distanceCustomUnit)&&r.encodeNullableSerializableElement_3(n,2,xd(),e._distanceCustomUnit),r.encodeSerializableElement_3(n,3,Km(),e._destination),r.encodeSerializableElement_3(n,4,dy(),e._configuration_3),(r.shouldEncodeElementDefault_3(n,5)||0!==e._lastNodeWithPathIndex)&&r.encodeIntElement_3(n,5,e._lastNodeWithPathIndex),r.encodeSerializableElement_3(n,6,new Ip(ny()),e._nodeList),r.endStructure_14(n)},sy.prototype.serialize_107=function(t,e){return this.serialize_98(t,e instanceof ay?e:ql())},sy.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},ay.prototype._get_destinationTitle_=function(){var t=this._get_destinationProperties_(),e=null==t?null:t.get_16("title_i18n"),n=null==e?null:Gm(e),r=null==n?null:n.get_16(Vv().getDefault()._language),i=null==r?null:Hm(r);if(null!=i&&0!==Pl(i))return i;var o=this._get_destinationProperties_(),s=null==o?null:o.get_16("title_i18n"),a=null==s?null:Gm(s),l=null==a?null:a.get_16("en"),u=null==l?null:Hm(l);return null!=u&&0!==Pl(u)?u:this._destination.getStringProperty("title")},ay.prototype._get_destinationPoint_=function(){return this._destination.geometry()},ay.prototype._get_destinationProperties_=function(){return this._destination.properties()},ay.$metadata$={simpleName:"Route",kind:"class",interfaces:[],associatedObjects:{0:function(){return null==Cn&&new sy,Cn}}},ly.$metadata$={simpleName:"Waypoint",kind:"interface",interfaces:[]},uy.$metadata$={simpleName:"VariableWaypoint",kind:"class",interfaces:[ly]},cy.$metadata$={simpleName:"SimpleWaypoint",kind:"class",interfaces:[ly]},hy.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},py.prototype._get_descriptor__66=function(){return this._descriptor_44},py.prototype.childSerializers_15=function(){return[new Up(Km()),Km(),new Ip(new Rc(Fa(ly))),Ky()]},py.prototype.deserialize_70=function(t){var e=this._descriptor_44,n=!0,r=0,i=0,o=null,s=null,a=null,l=null,u=t.beginStructure_14(e);if(u.decodeSequentially_9())o=u.decodeNullableSerializableElement_9(e,0,Km(),o),i|=1,s=u.decodeSerializableElement_9(e,1,Km(),s),i|=2,a=u.decodeSerializableElement_9(e,2,new Ip(new Rc(Fa(ly))),a),i|=4,l=u.decodeSerializableElement_9(e,3,Ky(),l),i|=8;else for(;n;)switch(r=u.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=u.decodeNullableSerializableElement_9(e,0,Km(),o),i|=1;break;case 1:s=u.decodeSerializableElement_9(e,1,Km(),s),i|=2;break;case 2:a=u.decodeSerializableElement_9(e,2,new Ip(new Rc(Fa(ly))),a),i|=4;break;case 3:l=u.decodeSerializableElement_9(e,3,Ky(),l),i|=8;break;default:throw Uc(r)}return u.endStructure_14(e),function(t,e,n,r,i,o,s){if(0==(1&t))throw qc("start");if(s._start=e,0==(2&t))throw qc("destination");if(s._destination_0=n,0==(4&t))throw qc("waypointList");if(s._waypointList=r,0==(8&t))throw qc("wayfindingOptions");return s._wayfindingOptions=i,s}(i,o,s,a,l,0,Object.create(fy.prototype))},py.prototype.serialize_100=function(t,e){var n=this._descriptor_44,r=t.beginStructure_14(n);r.encodeNullableSerializableElement_3(n,0,Km(),e._start),r.encodeSerializableElement_3(n,1,Km(),e._destination_0),r.encodeSerializableElement_3(n,2,new Ip(new Rc(Fa(ly))),e._waypointList),r.encodeSerializableElement_3(n,3,Ky(),e._wayfindingOptions),r.endStructure_14(n)},py.prototype.serialize_107=function(t,e){return this.serialize_100(t,e instanceof fy?e:ql())},py.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},fy.prototype.getWaypointById=function(t){var e;t:do{for(var n=this._waypointList,r=ds(Br(n,10)),i=n.iterator_39();i.hasNext_14();){var o,s=i.next_14(),a=s;if(a instanceof cy)o=Yo(s._feature);else{if(!(a instanceof uy))throw lc(zl("Unsupported waypoint subclass!"));o=s._features}r.add_18(o),Mo()}for(var l=zr(r).iterator_39();l.hasNext_14();){var u=l.next_14();if(u._id===t){e=u;break t}}e=null}while(0);return e},fy.prototype.toString=function(){return"RouteConfiguration(start="+this._start+", destination="+this._destination_0+", waypointList="+this._waypointList+", wayfindingOptions="+this._wayfindingOptions+")"},fy.prototype.hashCode=function(){var t=null==this._start?0:Rl(this._start);return t=_u(t,31)+Rl(this._destination_0)|0,t=_u(t,31)+Rl(this._waypointList)|0,_u(t,31)+Rl(this._wayfindingOptions)|0},fy.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof fy))return!1;var e=t instanceof fy?t:ql();return!!(Dl(this._start,e._start)&&Dl(this._destination_0,e._destination_0)&&Dl(this._waypointList,e._waypointList)&&Dl(this._wayfindingOptions,e._wayfindingOptions))},fy.$metadata$={simpleName:"RouteConfiguration",kind:"class",interfaces:[],associatedObjects:{0:dy}},_y.prototype.getLevelChangeList=function(){return Ar([My(),Ly(),Ny(),Py(),Ay(),Oy()])},_y.prototype.isLevelChange=function(t){return c(this.getLevelChangeList(),t)},_y.prototype.getTurnList=function(){return Ar([xy(),wy(),Ey(),Sy(),Cy(),Iy(),ky(),Ty()])},_y.prototype.isTurn=function(t){return c(this.getTurnList(),t)},_y.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},vy.prototype.isTurn_0=function(){return my().getTurnList().contains_27(this)},vy.prototype.isLevelChangeExit=function(){return!(!this.equals(Dy())&&!this.equals(Ry()))||this.equals(zy())},vy.$metadata$={simpleName:"RouteStepDirection",kind:"class",interfaces:[]},By.prototype.toString=function(){return"RouteUpdateData(nodeIndex="+this._nodeIndex+", stepBearing="+this._stepBearing+", stepDirection="+this._stepDirection+", stepDistance="+this._stepDistance+", stepDistanceTotal="+this._stepDistanceTotal+", nextStepBearing="+this._nextStepBearing+", nextStepDistance="+this._nextStepDistance+", nextStepDirection="+this._nextStepDirection+", pathLengthRemaining="+this._pathLengthRemaining+", position="+this._position_9+")"},By.prototype.hashCode=function(){var t=this._nodeIndex;return t=_u(t,31)+Il(this._stepBearing)|0,t=_u(t,31)+this._stepDirection.hashCode()|0,t=_u(t,31)+Il(this._stepDistance)|0,t=_u(t,31)+Il(this._stepDistanceTotal)|0,t=_u(t,31)+(null==this._nextStepBearing?0:Il(this._nextStepBearing))|0,t=_u(t,31)+(null==this._nextStepDistance?0:Il(this._nextStepDistance))|0,t=_u(t,31)+(null==this._nextStepDirection?0:this._nextStepDirection.hashCode())|0,t=_u(t,31)+Il(this._pathLengthRemaining)|0,_u(t,31)+Rl(this._position_9)|0},By.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof By))return!1;var e=t instanceof By?t:ql();return!!(this._nodeIndex===e._nodeIndex&&Dl(this._stepBearing,e._stepBearing)&&this._stepDirection.equals(e._stepDirection)&&Dl(this._stepDistance,e._stepDistance)&&Dl(this._stepDistanceTotal,e._stepDistanceTotal)&&Dl(this._nextStepBearing,e._nextStepBearing)&&Dl(this._nextStepDistance,e._nextStepDistance)&&Dl(this._nextStepDirection,e._nextStepDirection)&&Dl(this._pathLengthRemaining,e._pathLengthRemaining)&&Dl(this._position_9,e._position_9))},By.$metadata$={simpleName:"RouteUpdateData",kind:"class",interfaces:[]},Vy.$metadata$={simpleName:"RouteUpdateType",kind:"class",interfaces:[]},qy.prototype.toString=function(){return"UnitStage(unitName="+this._unitName+", unitConversionToMeters="+this._unitConversionToMeters+", minValueInMeters="+this._minValueInMeters+", decimals="+this._decimals+")"},qy.prototype.hashCode=function(){var t=Fl(this._unitName);return t=_u(t,31)+Il(this._unitConversionToMeters)|0,t=_u(t,31)+Il(this._minValueInMeters)|0,_u(t,31)+this._decimals|0},qy.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof qy))return!1;var e=t instanceof qy?t:ql();return this._unitName===e._unitName&&!!Dl(this._unitConversionToMeters,e._unitConversionToMeters)&&!!Dl(this._minValueInMeters,e._minValueInMeters)&&this._decimals===e._decimals},qy.$metadata$={simpleName:"UnitStage",kind:"class",interfaces:[]},Gy.prototype.toString=function(){return"ConversionResult(value="+this._value_7+", valueRounded="+this._valueRounded+", valueString="+this._valueString+", unitName="+this._unitName_0+")"},Gy.prototype.hashCode=function(){var t=Il(this._value_7);return t=_u(t,31)+Il(this._valueRounded)|0,t=_u(t,31)+Fl(this._valueString)|0,_u(t,31)+Fl(this._unitName_0)|0},Gy.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof Gy))return!1;var e=t instanceof Gy?t:ql();return!!Dl(this._value_7,e._value_7)&&!!Dl(this._valueRounded,e._valueRounded)&&this._valueString===e._valueString&&this._unitName_0===e._unitName_0},Gy.$metadata$={simpleName:"ConversionResult",kind:"class",interfaces:[]},Hy.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Wy.prototype.convert=function(t){var e,n=this._stageList;t:do{for(var r=n.listIterator_4(n._get_size__29());r.hasPrevious_1();){var i=r.previous_1();if(i._minValueInMeters<=t){e=i;break t}}e=null}while(0);var o,s=e;if(null!=s){var a=t*s._unitConversionToMeters,l=Hg(a,s._decimals),u=l.toString();o=new Gy(a,l,u,s._unitName)}else o=Zy()._DEFAULT.convert(t);return o},Wy.$metadata$={simpleName:"UnitConversion",kind:"class",interfaces:[]},Xy.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Yy.prototype._get_descriptor__66=function(){return this._descriptor_45},Yy.prototype.childSerializers_15=function(){return[Md(),Md(),Md(),Md(),Md(),Md(),Md(),Md(),Sd()]},Yy.prototype.deserialize_70=function(t){var e,n,r,i,o,s,a,l,u,c,h,p=this._descriptor_45,d=!0,f=0,_=0,m=!1,g=!1,y=!1,v=!1,b=!1,x=!1,w=!1,E=!1,S=0,C=t.beginStructure_14(p);if(C.decodeSequentially_9())m=C.decodeBooleanElement_9(p,0),_|=1,g=C.decodeBooleanElement_9(p,1),_|=2,y=C.decodeBooleanElement_9(p,2),_|=4,v=C.decodeBooleanElement_9(p,3),_|=8,b=C.decodeBooleanElement_9(p,4),_|=16,x=C.decodeBooleanElement_9(p,5),_|=32,w=C.decodeBooleanElement_9(p,6),_|=64,E=C.decodeBooleanElement_9(p,7),_|=128,S=C.decodeDoubleElement_9(p,8),_|=256;else for(;d;)switch(f=C.decodeElementIndex_9(p)){case-1:d=!1;break;case 0:m=C.decodeBooleanElement_9(p,0),_|=1;break;case 1:g=C.decodeBooleanElement_9(p,1),_|=2;break;case 2:y=C.decodeBooleanElement_9(p,2),_|=4;break;case 3:v=C.decodeBooleanElement_9(p,3),_|=8;break;case 4:b=C.decodeBooleanElement_9(p,4),_|=16;break;case 5:x=C.decodeBooleanElement_9(p,5),_|=32;break;case 6:w=C.decodeBooleanElement_9(p,6),_|=64;break;case 7:E=C.decodeBooleanElement_9(p,7),_|=128;break;case 8:S=C.decodeDoubleElement_9(p,8),_|=256;break;default:throw Uc(f)}return C.endStructure_14(p),e=_,n=m,r=g,i=y,o=v,s=b,a=x,l=w,u=E,c=S,(h=Object.create(Jy.prototype))._avoidBarriers=0!=(1&e)&&n,h._avoidElevators=0!=(2&e)&&r,h._avoidEscalators=0!=(4&e)&&i,h._avoidNarrowPaths=0!=(8&e)&&o,h._avoidRamps=0!=(16&e)&&s,h._avoidRevolvingDoors=0!=(32&e)&&a,h._avoidStaircases=0!=(64&e)&&l,h._avoidTicketGates=0!=(128&e)&&u,h._pathFixDistance=0==(256&e)?0:c,h},Yy.prototype.serialize_102=function(t,e){var n=this._descriptor_45,r=t.beginStructure_14(n);(r.shouldEncodeElementDefault_3(n,0)||!1!==e._avoidBarriers)&&r.encodeBooleanElement_3(n,0,e._avoidBarriers),(r.shouldEncodeElementDefault_3(n,1)||!1!==e._avoidElevators)&&r.encodeBooleanElement_3(n,1,e._avoidElevators),(r.shouldEncodeElementDefault_3(n,2)||!1!==e._avoidEscalators)&&r.encodeBooleanElement_3(n,2,e._avoidEscalators),(r.shouldEncodeElementDefault_3(n,3)||!1!==e._avoidNarrowPaths)&&r.encodeBooleanElement_3(n,3,e._avoidNarrowPaths),(r.shouldEncodeElementDefault_3(n,4)||!1!==e._avoidRamps)&&r.encodeBooleanElement_3(n,4,e._avoidRamps),(r.shouldEncodeElementDefault_3(n,5)||!1!==e._avoidRevolvingDoors)&&r.encodeBooleanElement_3(n,5,e._avoidRevolvingDoors),(r.shouldEncodeElementDefault_3(n,6)||!1!==e._avoidStaircases)&&r.encodeBooleanElement_3(n,6,e._avoidStaircases),(r.shouldEncodeElementDefault_3(n,7)||!1!==e._avoidTicketGates)&&r.encodeBooleanElement_3(n,7,e._avoidTicketGates),!r.shouldEncodeElementDefault_3(n,8)&&Dl(e._pathFixDistance,0)||r.encodeDoubleElement_3(n,8,e._pathFixDistance),r.endStructure_14(n)},Yy.prototype.serialize_107=function(t,e){return this.serialize_102(t,e instanceof Jy?e:ql())},Yy.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},Jy.$metadata$={simpleName:"WayfindingOptions",kind:"class",interfaces:[],associatedObjects:{0:Ky}},nv.prototype._get_landmarkList_=function(){return function(t,e,n){for(var r=ps(),i=t.iterator_39();i.hasNext_14();){var o=i.next_14();c(n,o._id)||(r.add_18(o),Mo())}return r}(this._landmarkList,0,this._ignoredFeatureIdList)},nv.prototype.updateFeatureList=function(t){for(var e=ps(),n=t.iterator_39();n.hasNext_14();){var r=n.next_14();r.getType().equals(Xg())&&(e.add_18(r),Mo())}this._decisionList=e;for(var i=ps(),o=t.iterator_39();o.hasNext_14();){var s=o.next_14();s.getType().equals(Jg())&&(i.add_18(s),Mo())}this._hazardList=i;for(var a=ps(),l=t.iterator_39();l.hasNext_14();){var u=l.next_14();u.getType().isLevelChanger()&&(a.add_18(u),Mo())}this._levelChangerList=a},nv.prototype.getLevelChangerById=function(t){var e,n=this._levelChangerList;t:do{for(var r=n.iterator_39();r.hasNext_14();){var i=r.next_14();if(i._id===t){e=i;break t}}e=null}while(0);return Ul(e)},nv.$metadata$={simpleName:"GuidanceFeatureManager",kind:"class",interfaces:[]},rv.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},iv.prototype._get_descriptor__66=function(){return this._descriptor_46},iv.prototype.childSerializers_15=function(){return[xd(),xd(),Td(),xd(),Td(),Td(),xd(),xd(),Td()]},iv.prototype.deserialize_70=function(t){var e=this._descriptor_46,n=!0,r=0,i=0,o=null,s=null,a=0,l=null,u=0,c=0,h=null,p=null,d=0,f=t.beginStructure_14(e);if(f.decodeSequentially_9())o=f.decodeStringElement_9(e,0),i|=1,s=f.decodeStringElement_9(e,1),i|=2,a=f.decodeIntElement_9(e,2),i|=4,l=f.decodeStringElement_9(e,3),i|=8,u=f.decodeIntElement_9(e,4),i|=16,c=f.decodeIntElement_9(e,5),i|=32,h=f.decodeStringElement_9(e,6),i|=64,p=f.decodeStringElement_9(e,7),i|=128,d=f.decodeIntElement_9(e,8),i|=256;else for(;n;)switch(r=f.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=f.decodeStringElement_9(e,0),i|=1;break;case 1:s=f.decodeStringElement_9(e,1),i|=2;break;case 2:a=f.decodeIntElement_9(e,2),i|=4;break;case 3:l=f.decodeStringElement_9(e,3),i|=8;break;case 4:u=f.decodeIntElement_9(e,4),i|=16;break;case 5:c=f.decodeIntElement_9(e,5),i|=32;break;case 6:h=f.decodeStringElement_9(e,6),i|=64;break;case 7:p=f.decodeStringElement_9(e,7),i|=128;break;case 8:d=f.decodeIntElement_9(e,8),i|=256;break;default:throw Uc(r)}return f.endStructure_14(e),function(t,e,n,r,i,o,s,a,l,u,c,h){if(0==(1&t))throw qc("distance");if(h._distance=e,0==(2&t))throw qc("distanceUnit");if(h._distanceUnit=n,0==(4&t))throw qc("headingTo");if(h._headingTo=r,0==(8&t))throw qc("headingDirection");if(h._headingDirection=i,0==(16&t))throw qc("levelFrom");if(h._levelFrom=o,0==(32&t))throw qc("levelsChanged");if(h._levelsChanged=s,0==(64&t))throw qc("levelUnitString");if(h._levelUnitString=a,0==(128&t))throw qc("levelDirection");if(h._levelDirection=l,0==(256&t))throw qc("levelTo");return h._levelTo=u,h}(i,o,s,a,l,u,c,h,p,d,0,Object.create(gv.prototype))},iv.prototype.serialize_104=function(t,e){var n=this._descriptor_46,r=t.beginStructure_14(n);r.encodeStringElement_3(n,0,e._distance),r.encodeStringElement_3(n,1,e._distanceUnit),r.encodeIntElement_3(n,2,e._headingTo),r.encodeStringElement_3(n,3,e._headingDirection),r.encodeIntElement_3(n,4,e._levelFrom),r.encodeIntElement_3(n,5,e._levelsChanged),r.encodeStringElement_3(n,6,e._levelUnitString),r.encodeStringElement_3(n,7,e._levelDirection),r.encodeIntElement_3(n,8,e._levelTo),r.endStructure_14(n)},iv.prototype.serialize_107=function(t,e){return this.serialize_104(t,e instanceof gv?e:ql())},iv.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},ov.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},sv.prototype._get_descriptor__66=function(){return this._descriptor_47},sv.prototype.childSerializers_15=function(){return[xd(),xd(),xd()]},sv.prototype.deserialize_70=function(t){var e=this._descriptor_47,n=!0,r=0,i=0,o=null,s=null,a=null,l=t.beginStructure_14(e);if(l.decodeSequentially_9())o=l.decodeStringElement_9(e,0),i|=1,s=l.decodeStringElement_9(e,1),i|=2,a=l.decodeStringElement_9(e,2),i|=4;else for(;n;)switch(r=l.decodeElementIndex_9(e)){case-1:n=!1;break;case 0:o=l.decodeStringElement_9(e,0),i|=1;break;case 1:s=l.decodeStringElement_9(e,1),i|=2;break;case 2:a=l.decodeStringElement_9(e,2),i|=4;break;default:throw Uc(r)}return l.endStructure_14(e),function(t,e,n,r,i,o){if(0==(1&t))throw qc("distance");if(o._distance_0=e,0==(2&t))throw qc("distanceUnit");if(o._distanceUnit_0=n,0==(4&t))throw qc("direction");return o._direction_0=r,o}(i,o,s,a,0,Object.create(bv.prototype))},sv.prototype.serialize_106=function(t,e){var n=this._descriptor_47,r=t.beginStructure_14(n);r.encodeStringElement_3(n,0,e._distance_0),r.encodeStringElement_3(n,1,e._distanceUnit_0),r.encodeStringElement_3(n,2,e._direction_0),r.endStructure_14(n)},sv.prototype.serialize_107=function(t,e){return this.serialize_106(t,e instanceof bv?e:ql())},sv.$metadata$={simpleName:"$serializer",kind:"object",interfaces:[nd]},gv.prototype.toString=function(){return"LevelChangerData(distance="+this._distance+", distanceUnit="+this._distanceUnit+", headingTo="+this._headingTo+", headingDirection="+this._headingDirection+", levelFrom="+this._levelFrom+", levelsChanged="+this._levelsChanged+", levelUnitString="+this._levelUnitString+", levelDirection="+this._levelDirection+", levelTo="+this._levelTo+")"},gv.prototype.hashCode=function(){var t=Fl(this._distance);return t=_u(t,31)+Fl(this._distanceUnit)|0,t=_u(t,31)+this._headingTo|0,t=_u(t,31)+Fl(this._headingDirection)|0,t=_u(t,31)+this._levelFrom|0,t=_u(t,31)+this._levelsChanged|0,t=_u(t,31)+Fl(this._levelUnitString)|0,t=_u(t,31)+Fl(this._levelDirection)|0,_u(t,31)+this._levelTo|0},gv.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof gv))return!1;var e=t instanceof gv?t:ql();return this._distance===e._distance&&this._distanceUnit===e._distanceUnit&&this._headingTo===e._headingTo&&this._headingDirection===e._headingDirection&&this._levelFrom===e._levelFrom&&this._levelsChanged===e._levelsChanged&&this._levelUnitString===e._levelUnitString&&this._levelDirection===e._levelDirection&&this._levelTo===e._levelTo},gv.$metadata$={simpleName:"LevelChangerData",kind:"class",interfaces:[],associatedObjects:{0:function(){return null==cr&&new iv,cr}}},bv.prototype.toString=function(){return"TurnData(distance="+this._distance_0+", distanceUnit="+this._distanceUnit_0+", direction="+this._direction_0+")"},bv.prototype.hashCode=function(){var t=Fl(this._distance_0);return t=_u(t,31)+Fl(this._distanceUnit_0)|0,_u(t,31)+Fl(this._direction_0)|0},bv.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof bv))return!1;var e=t instanceof bv?t:ql();return this._distance_0===e._distance_0&&this._distanceUnit_0===e._distanceUnit_0&&this._direction_0===e._direction_0},bv.$metadata$={simpleName:"TurnData",kind:"class",interfaces:[],associatedObjects:{0:function(){return null==pr&&new sv,pr}}},Cv.prototype.toString=function(){return"RouteUpdateTextResult(updateText="+this._updateText+", additionalText="+this._additionalText+")"},Cv.prototype.hashCode=function(){return _u(Fl(this._updateText),31)+(null==this._additionalText?0:Fl(this._additionalText))|0},Cv.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof Cv))return!1;var e=t instanceof Cv?t:ql();return this._updateText===e._updateText&&this._additionalText==e._additionalText},Cv.$metadata$={simpleName:"RouteUpdateTextResult",kind:"class",interfaces:[]},Iv.prototype.compare_0=function(t,e){return this._function(t,e)},Iv.prototype.compare=function(t,e){return this.compare_0(t,e)},Iv.$metadata$={simpleName:"sam$kotlin_Comparator$0",kind:"class",interfaces:[Xo]},kv.prototype.invoke_100=function(t,e){return function(t,e){return t===e?0:null==t?-1:null==e?1:Ol(null!=t&&("string"==(r=typeof(n=t))||"boolean"===r||Pu(n)||Cu(n,ta(Fa(mo))))?t:ql(),e);var n,r}(t.pointToPointDistance(Ul(this._this$0_18._route)._nodeList.get_29(this._$nodeIndex-1|0)._coordinates_2),e.pointToPointDistance(Ul(this._this$0_18._route)._nodeList.get_29(this._$nodeIndex-1|0)._coordinates_2))},kv.prototype.invoke_101=function(t,e){var n=t instanceof jg?t:ql();return this.invoke_100(n,e instanceof jg?e:ql())},kv.$metadata$={kind:"class",interfaces:[]},Tv.prototype.invoke_102=function(t){var e;if(Zm(this._$metadata,t.toString())&&Zm(Gm(this._$metadata.get_16(t.toString())),this._this$0_19._get_language_())){var n=Gm(this._$metadata.get_16(t.toString())).get_16(this._this$0_19._get_language_()),r=null==n?null:Hm(n);e=null==r?"":r}else e="";return e},Tv.prototype.invoke_103=function(t){return this.invoke_102(null!=t&&"number"==typeof t?t:ql())},Tv.$metadata$={kind:"class",interfaces:[]},Pv.prototype._get_language_=function(){return Vv().getDefault()._language},Pv.prototype.setUnitConversion=function(t){this._conversion=t},Pv.prototype.generateStaticInstructionsForRoute=function(t){var e=function(t,e){var n=t._levelOverrideMap,r=new Pv(t._context,t._featureManager,t._guidanceTts,lv(t));return r.setUnitConversion(r._conversion),r._levelOverrideMap=n,r._route=e,r}(this,t);if(!Dl(this._conversion,Zy()._DEFAULT)){var n=this._conversion.convert(t._distanceMeters);t._distanceCustom=n._value_7,t._distanceCustomUnit=n._unitName_0}for(var r=0,i=t._nodeList.iterator_39();i.hasNext_14();){var o=i.next_14();t:do{var s=r;r=s+1|0;var a=Jo(s);if(0===a){Mo();break t}if(o._direction.isLevelChangeExit()){Mo();break t}var l=a>1&&my().isLevelChange(t._nodeList.get_29(a-2|0)._direction),u=o,c=e.generateUpdateString($y(),new By(a,o._bearingFromLastNode,o._direction,o._distanceFromLastNode,o._distanceFromLastNode,a<Pr(t._nodeList)?t._nodeList.get_29(a+1|0)._bearingFromLastNode:null,a<Pr(t._nodeList)?t._nodeList.get_29(a+1|0)._distanceFromLastNode:null,a<Pr(t._nodeList)?t._nodeList.get_29(a+1|0)._direction:null,0,vg().fromLngLat(0,0)),l),h=ps();Pl(c._updateText)>0&&(h.add_18(c._updateText),Mo());var p=c._additionalText;null!=p&&0!==Pl(p)&&(h.add_18(Ul(c._additionalText)),Mo()),u._instruction=h}while(0)}},Pv.prototype.generateUpdateString=function(t,e,n){var r,i=t;i.equals((jy(),Xn))?r=av(lv(this)._stateCalculating,null,2):i.equals((jy(),Yn))?r=av(lv(this)._stateRecalculating,null,2):i.equals((jy(),rr))?r=av(lv(this)._stateRouteNotFound,null,2):i.equals((jy(),ir))?r=av(lv(this)._stateRouteOsrmError,null,2):i.equals((jy(),nr))?r=av(lv(this)._stateCanceled,null,2):i.equals((jy(),er))?r=new Cv(_v(this),mv(this)):i.equals($y())?r=av(uv(this,Ul(e)),null,2):i.equals((jy(),tr))?r=av(function(t,e){var n=Ko(new Di("update",uv(t,e)));return t._mustache.compile(lv(t)._updateTurnConfirmation).execute_0(n)}(this,Ul(e)),null,2):i.equals((jy(),Kn))?r=av(uv(this,Ul(e)),null,2):i.equals(Uy())?r=function(t,e,n,r){var i,o="",s=e._stepDirection;if(s.equals(xy()))i=lv(t)._immediateTurnAround;else if(s.equals(wy()))i=lv(t)._immediateTurnLeftHard;else if(s.equals(Ey()))i=lv(t)._immediateTurnLeft;else if(s.equals(Sy()))i=lv(t)._immediateTurnLeftSlight;else if(s.equals(Cy()))i=lv(t)._immediateTurnStraight;else if(s.equals(Iy()))i=lv(t)._immediateTurnRightSlight;else if(s.equals(ky()))i=lv(t)._immediateTurnRight;else if(s.equals(Ty()))i=lv(t)._immediateTurnRightHard;else if(s.equals(Fy()))i=_v(t);else if(s.equals(Py()))i=vv(t,lv(t)._immediateLevelchangeElevator,e);else if(s.equals(Ay()))i=vv(t,lv(t)._immediateLevelchangeEscalator,e);else if(s.equals(Oy()))i=vv(t,lv(t)._immediateLevelchangeStairs,e);else if(s.equals(My()))i=vv(t,lv(t)._immediateLevelchangeElevator,e);else if(s.equals(Ly()))i=vv(t,lv(t)._immediateLevelchangeEscalator,e);else{if(!s.equals(Ny()))throw lc(zl("Unsupported step direction."));i=vv(t,lv(t)._immediateLevelchangeStairs,e)}var a,l=i;if(Ul(t._route)._nodeList.get_29(e._nodeIndex)._isWaypoint){var u=t._mustache.compile(lv(t)._immediateWaypoint),c=qr([new Di("turn",l)]),h=Ul(t._route)._nodeList.get_29(e._nodeIndex)._waypointId;if(null==h);else{var p=Ul(t._route)._configuration_3.getWaypointById(h),d=null==p?null:p.getTitle();c.put_4("waypointTitle",null==d?"":d)}Mo(),a=u.execute_0(c)}else a=l;var f=a;if(e._stepDirection.equals(Fy())&&(o+=mv(t)),!my().isLevelChange(e._stepDirection)&&my().isTurn(e._nextStepDirection)){var _=hv(t,e._nodeIndex+1|0,r);o+=0===Pl(o)?_:" "+_}if(Fy().equals(e._nextStepDirection)){var m=cv(t,Ul(e._nextStepDistance));o+=0===Pl(o)?m:" "+m}if(my().isLevelChange(e._nextStepDirection)){var g=fv(t,e._nodeIndex+1|0,Ul(e._nextStepDistance),n);o+=0===Pl(o)?g:" "+g}return new Cv(f,o)}(this,Ul(e),this._featureManager._levelChangerList,this._featureManager._get_landmarkList_()):$l();var o=r;return n&&null!=e?function(t,e,n,r){if(null==Ul(t._route)._nodeList.get_29(e._nodeIndex-1|0)._levelChangerId)return r;var i,o;t:do{for(var s=t._featureManager._levelChangerList.iterator_39();s.hasNext_14();){var a=s.next_14();if(a._id==Ul(t._route)._nodeList.get_29(e._nodeIndex-1|0)._levelChangerId){i=a;break t}}i=null}while(0);if(null==i)return r;var l=i._featureGeometry;if(tv(l instanceof Eg?l:ql(),Ul(t._route)._nodeList.get_29(e._nodeIndex-1|0)._coordinates_2)<.2){var u;if(Ul(t._route)._nodeList.get_29(e._nodeIndex)._direction.isTurn_0()){var c;if(n.equals(Uy())){var h=Ul(t._route)._nodeList.get_29(e._nodeIndex)._bearingFromLastNode,p=Lv(Ul(t._route)._nodeList.get_29(e._nodeIndex+1|0)._bearingFromLastNode-h);c=new Cv(dv(t,e,t._featureManager._levelChangerList,p),null)}else c=new Cv(dv(t,e,t._featureManager._levelChangerList,0),r._updateText);u=c}else u=new Cv(dv(t,e,t._featureManager._levelChangerList,0),r._updateText);o=u}else o=new Cv(function(t,e,n,r,i,o){return dv(t,e,n,null)}(t,e,t._featureManager._levelChangerList),my().isTurn(e._stepDirection)||my().isTurn(e._stepDirection)?hv(t,e._nodeIndex,t._featureManager._get_landmarkList_()):Fy().equals(e._stepDirection)?cv(t,e._stepDistance):my().isLevelChange(e._stepDirection)?fv(t,e._nodeIndex,e._stepDistance,t._featureManager._levelChangerList):null);return o}(this,e,t,o):o},Pv.$metadata$={simpleName:"GuidanceTextGenerator",kind:"class",interfaces:[]},Ov.$metadata$={simpleName:"GuidanceTts",kind:"class",interfaces:[]},Nv.prototype.toString=function(){return"RouteSplit(from="+this._from+", toConnector="+this._toConnector+", toDestination="+this._toDestination+", toWaypoint="+this._toWaypoint+", campusId="+this._campusId+", splits="+this._splits+")"},Nv.prototype.hashCode=function(){var t=Rl(this._from);return t=_u(t,31)+(null==this._toConnector?0:Rl(this._toConnector))|0,t=_u(t,31)+(null==this._toDestination?0:Rl(this._toDestination))|0,t=_u(t,31)+(null==this._toWaypoint?0:Rl(this._toWaypoint))|0,t=_u(t,31)+(null==this._campusId?0:Fl(this._campusId))|0,_u(t,31)+Rl(this._splits)|0},Nv.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof Nv))return!1;var e=t instanceof Nv?t:ql();return!!(Dl(this._from,e._from)&&Dl(this._toConnector,e._toConnector)&&Dl(this._toDestination,e._toDestination)&&Dl(this._toWaypoint,e._toWaypoint)&&this._campusId==e._campusId&&Dl(this._splits,e._splits))},Nv.$metadata$={simpleName:"RouteSplit",kind:"class",interfaces:[]},Dv.prototype.toString=function(){return"RouteStep(node="+this._node+", pathToNode="+this._pathToNode+", campusId="+this._campusId_0+", level="+this._level_1+", connector="+this._connector+", waypoint="+this._waypoint+")"},Dv.prototype.hashCode=function(){var t=Rl(this._node);return t=_u(t,31)+(null==this._pathToNode?0:Rl(this._pathToNode))|0,t=_u(t,31)+(null==this._campusId_0?0:Fl(this._campusId_0))|0,t=_u(t,31)+this._level_1|0,t=_u(t,31)+(null==this._connector?0:Rl(this._connector))|0,_u(t,31)+(null==this._waypoint?0:Rl(this._waypoint))|0},Dv.prototype.equals=function(t){if(this===t)return!0;if(!(t instanceof Dv))return!1;var e=t instanceof Dv?t:ql();return!!(Dl(this._node,e._node)&&Dl(this._pathToNode,e._pathToNode)&&this._campusId_0==e._campusId_0&&this._level_1===e._level_1&&Dl(this._connector,e._connector)&&Dl(this._waypoint,e._waypoint))},Dv.$metadata$={simpleName:"RouteStep",kind:"class",interfaces:[]},zv.prototype.convertWayfindingSplitToSteps=function(t,e,n){for(var r=n&&tg(u(Ul(t._wayfindingPath)))?1:0,i=null!=t._toWaypoint&&tg(l(Ul(t._wayfindingPath)))?Ul(t._wayfindingPath)._get_size__29()-1|0:Ul(t._wayfindingPath)._get_size__29(),o=Ul(t._wayfindingPath).subList_4(r,i),s=Pr(o),a=ds(Br(o,10)),c=0,h=o.iterator_39();h.hasNext_14();){var p,d=h.next_14();t:do{var f=c;c=f+1|0;var _=Jo(f);if(e&&0===_||_>s){p=null;break t}var m=Qm(d);p=new Dv(d,_>0&&m===Qm(o.get_29(_-1|0))?Rv(Fv(),_,o):null,t._campusId,m,_===s?t._toConnector:null,_===s?t._toWaypoint:null)}while(0);a.add_18(p),Mo()}return function(t,e){for(var n=t.iterator_39();n.hasNext_14();){var r=n.next_14();null!=r&&(e.add_18(r),Mo())}return e}(a,ps())},zv.$metadata$={simpleName:"Router",kind:"object",interfaces:[]},jv.prototype.getDefault=function(){return new Uv},jv.$metadata$={simpleName:"Companion",kind:"object",interfaces:[]},Uv.$metadata$={simpleName:"Locale",kind:"class",interfaces:[]},Sr.prototype._get_entries__5=ll.prototype._get_entries__5,wo.prototype.hasNext_14=go.prototype.hasNext_14,os.prototype.get_29=ul.prototype.get_29,cs.prototype._get_entries__5=fl.prototype._get_entries__5,zs.prototype.createJsMap_0=Fs.prototype.createJsMap_0,ra.prototype._get_simpleName__4=na.prototype._get_simpleName__4,ra.prototype.isInstance_4=na.prototype.isInstance_4,up.prototype._get_descriptor__66=Mc.prototype._get_descriptor__66,xh.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,xh.prototype._get_isInline__17=dh.prototype._get_isInline__17,tp.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,tp.prototype._get_serializersModule__18=np.prototype._get_serializersModule__18,tp.prototype.decodeSerializableValue_18=np.prototype.decodeSerializableValue_18,tp.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,tp.prototype.decodeElementIndex_9=op.prototype.decodeElementIndex_9,tp.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,ep.prototype._get_serializersModule__18=sp.prototype._get_serializersModule__18,ep.prototype.encodeNotNullMark_3=sp.prototype.encodeNotNullMark_3,ep.prototype.beginCollection_3=sp.prototype.beginCollection_3,ep.prototype.encodeSerializableValue_3=sp.prototype.encodeSerializableValue_3,ep.prototype.encodeNullableSerializableValue_3=sp.prototype.encodeNullableSerializableValue_3,ep.prototype.shouldEncodeElementDefault_3=ap.prototype.shouldEncodeElementDefault_3,dp.prototype._get_serialName__17=dh.prototype._get_serialName__17,dp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,dp.prototype._get_isInline__17=dh.prototype._get_isInline__17,pp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,pp.prototype._get_isInline__17=dh.prototype._get_isInline__17,fp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,fp.prototype._get_isInline__17=dh.prototype._get_isInline__17,_p.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,_p.prototype._get_isInline__17=dh.prototype._get_isInline__17,gp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,gp.prototype._get_isInline__17=dh.prototype._get_isInline__17,mp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,mp.prototype._get_isInline__17=dh.prototype._get_isInline__17,yp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,yp.prototype._get_isInline__17=dh.prototype._get_isInline__17,vp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,vp.prototype._get_isInline__17=dh.prototype._get_isInline__17,bp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,bp.prototype._get_isInline__17=dh.prototype._get_isInline__17,Sp.prototype._get_descriptor__66=Mc.prototype._get_descriptor__66,ed.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,ed.prototype._get_isInline__17=dh.prototype._get_isInline__17,Dp.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,Rp.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,Dd.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,Dd.prototype._get_isInline__17=dh.prototype._get_isInline__17,jd.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,jd.prototype.decodeSerializableValue_18=np.prototype.decodeSerializableValue_18,jd.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,jd.prototype.decodeElementIndex_9=op.prototype.decodeElementIndex_9,jd.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,Rd.prototype.decodeSerializableValue_18=np.prototype.decodeSerializableValue_18,Rd.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,Rd.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,Rd.prototype.decodeElementIndex_9=op.prototype.decodeElementIndex_9,Rd.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,Wd.prototype._get_descriptor__66=Mc.prototype._get_descriptor__66,r_.prototype._get_isNullable__17=dh.prototype._get_isNullable__17,r_.prototype._get_isInline__17=dh.prototype._get_isInline__17,Z_.prototype.contextual_2=ef.prototype.contextual_2,Q_.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,Q_.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,Q_.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,tm.prototype.decodeSerializableValue_18=np.prototype.decodeSerializableValue_18,tm.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,tm.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,tm.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,em.prototype.encodeNotNullMark_3=sp.prototype.encodeNotNullMark_3,em.prototype.beginCollection_3=sp.prototype.beginCollection_3,em.prototype.encodeNullableSerializableValue_3=sp.prototype.encodeNullableSerializableValue_3,am.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,am.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,am.prototype.decodeElementIndex_9=op.prototype.decodeElementIndex_9,am.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,pm.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,pm.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,pm.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,dm.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,dm.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,dm.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,fm.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,fm.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,fm.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,_m.prototype.decodeSerializableElement$default_9=op.prototype.decodeSerializableElement$default_9,_m.prototype.decodeSequentially_9=op.prototype.decodeSequentially_9,_m.prototype.decodeCollectionSize_9=op.prototype.decodeCollectionSize_9,Sm.prototype.encodeNotNullMark_3=sp.prototype.encodeNotNullMark_3,Sm.prototype.beginCollection_3=sp.prototype.beginCollection_3,Sm.prototype.encodeSerializableValue_3=sp.prototype.encodeSerializableValue_3,Sm.prototype.encodeNullableSerializableValue_3=sp.prototype.encodeNullableSerializableValue_3,Sm.prototype.shouldEncodeElementDefault_3=ap.prototype.shouldEncodeElementDefault_3,Dm.prototype.encodeNotNullMark_3=sp.prototype.encodeNotNullMark_3,Dm.prototype.beginCollection_3=sp.prototype.beginCollection_3,Dm.prototype.encodeNullableSerializableValue_3=sp.prototype.encodeNullableSerializableValue_3,Ym.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,ag.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,hg.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,_g.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,bg.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,Cg.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,Bg.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,Vg.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,qg.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,ey.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,sy.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,py.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,Yy.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,iv.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,sv.prototype.typeParametersSerializers_15=nd.prototype.typeParametersSerializers_15,Q=null,nt=xl(Array(0),null),st=new ArrayBuffer(8),at=new Float64Array(st),lt=new Int32Array(st),at[0]=-1,ct=1-(ut=0!==lt[0]?1:0)|0,pt=su(0),dt=su(1),ft=su(-1),_t=new Kl(-1,2147483647),mt=new Kl(0,-2147483648),gt=su(16777216),yt=[[{kind:"class",interfaces:[]},{kind:"class",interfaces:[]}],[{kind:"class",interfaces:[]},{kind:"class",interfaces:[]}],[{kind:"class",interfaces:[]},{kind:"class",interfaces:[]}]],Vt=[],Ut=[],Kt=Ur([Ri(za()._get_stringClass_(),th(Ho())),Ri(Fa(ol),eh(il())),Ri(za()._get_charArrayClass_(),(null==$t&&new id,$t)),Ri(za()._get_doubleClass_(),nh(qo())),Ri(za()._get_doubleArrayClass_(),(null==qt&&new od,qt)),Ri(za()._get_floatClass_(),rh(Uo())),Ri(za()._get_floatArrayClass_(),(null==Gt&&new sd,Gt)),Ri(Fa(Kl),ih(Yl())),Ri(za()._get_longArrayClass_(),(null==Ht&&new ad,Ht)),Ri(za()._get_intClass_(),oh(jo())),Ri(za()._get_intArrayClass_(),(null==Zt&&new ld,Zt)),Ri(za()._get_shortClass_(),sh(Fo())),Ri(za()._get_shortArrayClass_(),(null==Wt&&new ud,Wt)),Ri(za()._get_byteClass_(),ah(Ro())),Ri(za()._get_byteArrayClass_(),(null==Xt&&new cd,Xt)),Ri(za()._get_booleanClass_(),lh(Wo())),Ri(za()._get_booleanArrayClass_(),(null==Yt&&new hd,Yt)),Ri(Fa(Oo),(Mo(),null==ae&&new Ld,ae))]),le=new Object,ue=new Yd($r(),$r(),$r(),$r()),Ce=new W_,_r=[(qi(),null==zt&&new zp,zt)._get_descriptor__66(),uh(Xi())._get_descriptor__66(),(Bi(),null==Bt&&new Bp,Bt)._get_descriptor__66(),(to(),null==jt&&new jp,jt)._get_descriptor__66()],Ie=_r.length>0?function(t){var e;switch(t.length){case 0:return ni();case 1:return o(e=[t[0]],As(e.length));default:return o(t,Hs(t.length))}}(_r):ni(),ke=function(){var t=xl(Array(93),null),e=0;if(e<=31)do{var n=e;e=e+1|0;var r=rm(n>>12),i=rm(n>>8),o=rm(n>>4),s=rm(n);t[n]="\\u"+r+i+o+s}while(e<=31);return t[new ol(34).toInt_5()]='\\"',t[new ol(92).toInt_5()]="\\\\",t[new ol(9).toInt_5()]="\\t",t[new ol(8).toInt_5()]="\\b",t[new ol(10).toInt_5()]="\\n",t[new ol(13).toInt_5()]="\\r",t[12]="\\f",t}(),t.RouteFactory=Vm;var $v=t.android||(t.android={}),qv=$v.content||($v.content={});qv.Context=$m,qv.Context.Resources=Um;var Gv=t.com||(t.com={}),Hv=Gv.mapbox||(Gv.mapbox={}),Zv=Hv.geojson||(Hv.geojson={});Zv.Geometry=ng,Zv.Point=Eg,Zv.Point.Point_init_$Create$=wg}(t.exports)}},i={},function t(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return r[e](o,o.exports,t),o.exports}(970))},Fqnj:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t){var e=Math.pow(10,12);return Math.round(t*e)/e};e.default=function(t){var e,n=(2,function(t){if(Array.isArray(t))return t}(e=t.toString().split("."))||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),2!==n.length);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(e)||function(t,e){if(t){if("string"==typeof t)return r(t,2);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[1],s=Math.abs(Number(n[0])),a=i(60*Number("0."+(o||0))),l=Math.floor(a),u=i(60*(a%l||0));return s+"\xb0 "+Number(l.toFixed(6)).toString().split(".").map(function(t,e){return 0===e?t.padStart(2,"0"):t}).join(".")+"' "+Number(u.toFixed(4)).toString().split(".").map(function(t,e){return 0===e?t.padStart(2,"0"):t}).join(".")+'"'}},G31G:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("45h8"))&&r.__esModule?r:{default:r};e.default=function(t,e,n,r){return(0,i.default)(t,e,n)<r}},HSsa:function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},HkEB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("2o5z")),i=o(n("QTq/"));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){for(var n=!1,o=e.length,s=-1,a=o-1;++s<o;a=s)((0,i.default)(e[s])<=(0,i.default)(t)&&(0,i.default)(t)<(0,i.default)(e[a])||(0,i.default)(e[a])<=(0,i.default)(t)&&(0,i.default)(t)<(0,i.default)(e[s]))&&(0,r.default)(t)<((0,r.default)(e[a])-(0,r.default)(e[s]))*((0,i.default)(t)-(0,i.default)(e[s]))/((0,i.default)(e[a])-(0,i.default)(e[s]))+(0,r.default)(e[s])&&(n=!n);return n}},JEQr:function(t,e,n){"use strict";var r=n("xTJ+"),i=n("yK9s"),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,l={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(a=n("tQ2B")),a),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){l.headers[t]={}}),r.forEach(["post","put","patch"],function(t){l.headers[t]=r.merge(o)}),t.exports=l},JKJh:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("2o5z")),i=o(n("QTq/"));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){if(!1===Array.isArray(t)||0===t.length)throw new Error("No points were given.");return t.reduce(function(t,e){var n=(0,r.default)(e),o=(0,i.default)(e);return{maxLat:Math.max(n,t.maxLat),minLat:Math.min(n,t.minLat),maxLng:Math.max(o,t.maxLng),minLng:Math.min(o,t.minLng)}},{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}},KXza:function(t,e,n){"use strict";var r=n("oGbY"),i=n("ncV3");function o(t){i.call(this,t)}(o.prototype=Object.create(i.prototype)).constructor=o,o.prototype.sendRequest=r.browserSend,o.prototype.abortRequest=r.browserAbort,t.exports=function(t){return new o(t)}},KcL1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=l(n("Zdlu")),i=l(n("dkTa")),o=l(n("rT3r")),s=l(n("vONA")),a=l(n("eRSq"));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.default=function t(e){if((0,r.default)(e))return Number(e);if((0,i.default)(e))return(0,o.default)(e);if((0,s.default)(e)){var n=(0,a.default)(e);return Array.isArray(e)?e.map(function(e,n){return[0,1].includes(n)?t(e):e}):c(c(c({},e),n.latitude&&h({},n.latitude,t(e[n.latitude]))),n.longitude&&h({},n.longitude,t(e[n.longitude])))}return Array.isArray(e)?e.map(function(e){return(0,s.default)(e)?t(e):e}):e}},KtRk:function(t,e,n){"use strict";var r=n("U6jy"),i=n("pit/");t.exports=r(i,{file:function(t){if("undefined"!=typeof window){if(t instanceof global.Blob||t instanceof global.ArrayBuffer)return;return"Blob or ArrayBuffer"}if("string"!=typeof t&&void 0===t.pipe)return"Filename or Readable stream"},date:function(t){if("boolean"==typeof t)return"date";try{var e=new Date(t);if(e.getTime&&isNaN(e.getTime()))return"date"}catch(n){return"date"}},coordinates:function(t){return i.tuple(i.number,i.number)(t)},assertShape:function(t,e){return i.assert(i.strictShape(t),e)}})},LFDd:function(t,e,n){"use strict";var r=n("U6jy"),i=n("KtRk"),o=n("baNz"),s=n("eFQn"),a=n("Cu2R"),l={},u=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];l.forwardGeocode=function(t){i.assertShape({query:i.required(i.string),mode:i.oneOf("mapbox.places","mapbox.places-permanent"),countries:i.arrayOf(i.string),proximity:i.coordinates,types:i.arrayOf(i.oneOf(u)),autocomplete:i.boolean,bbox:i.arrayOf(i.number),limit:i.number,language:i.arrayOf(i.string),routing:i.boolean})(t),t.mode=t.mode||"mapbox.places";var e=s(r({country:t.countries},o(t,["proximity","types","autocomplete","bbox","limit","language","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(t,["mode","query"]),query:e})},l.reverseGeocode=function(t){i.assertShape({query:i.required(i.coordinates),mode:i.oneOf("mapbox.places","mapbox.places-permanent"),countries:i.arrayOf(i.string),types:i.arrayOf(i.oneOf(u)),bbox:i.arrayOf(i.number),limit:i.number,language:i.arrayOf(i.string),reverseMode:i.oneOf("distance","score"),routing:i.boolean})(t),t.mode=t.mode||"mapbox.places";var e=s(r({country:t.countries},o(t,["country","types","bbox","limit","language","reverseMode","routing"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:o(t,["mode","query"]),query:e})},t.exports=a(l)},LYNF:function(t,e,n){"use strict";var r=n("OH9c");t.exports=function(t,e,n,i,o){var s=new Error(t);return r(s,e,n,i,o)}},Lmem:function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},M7lk:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t,e){return e.reduce(function(e,n){if(null==t)throw new Error("'".concat(t,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(t,n)&&void 0!==n&&void 0===e?(e=n,n):e},void 0)}},MLWZ:function(t,e,n){"use strict";var r=n("xTJ+");function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))}))}),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},NBE3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("2o5z")),i=a(n("QTq/")),o=a(n("jDUc")),s=a(n("6D9Q"));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=(0,o.default)((0,i.default)(e))-(0,o.default)((0,i.default)(t)),a=Math.log(Math.tan((0,o.default)((0,r.default)(e))/2+Math.PI/4)/Math.tan((0,o.default)((0,r.default)(t))/2+Math.PI/4));return Math.abs(n)>Math.PI&&(n=n>0?-1*(2*Math.PI-n):2*Math.PI+n),((0,s.default)(Math.atan2(n,a))+360)%360}},"NkL+":function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===r.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},Nrgg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("wI44"))&&r.__esModule?r:{default:r};e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default,r=n(t,e),o=Number(e.time)-Number(t.time),s=r/o*1e3;return s}},OH9c:function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},OTTw:function(t,e,n){"use strict";var r=n("xTJ+");t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},OTo6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("JKJh"))&&r.__esModule?r:{default:r};e.default=function(t){var e=(0,i.default)(t),n=e.minLng+(e.maxLng-e.minLng)/2;return{latitude:parseFloat((e.minLat+(e.maxLat-e.minLat)/2).toFixed(6)),longitude:parseFloat(n.toFixed(6))}}},"P8+q":function(t,e,n){var r;t.exports=r={},r.simpleFilter=function(t,e){return e.filter(function(e){return r.test(t,e)})},r.test=function(t,e){return null!==r.match(t,e)},r.match=function(t,e,n){var r,i=0,o=[],s=e.length,a=0,l=0,u=(n=n||{}).pre||"",c=n.post||"",h=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var p=0;p<s;p++)r=e[p],h[p]===t[i]?(r=u+r+c,i+=1,l+=1+l):l=0,a+=l,o[o.length]=r;return i===t.length?(a=h===t?1/0:a,{rendered:o.join(""),score:a}):null},r.filter=function(t,e,n){return e&&0!==e.length?"string"!=typeof t?e:(n=n||{},e.reduce(function(e,i,o,s){var a=i;n.extract&&(a=n.extract(i));var l=r.match(t,a,n);return null!=l&&(e[e.length]={string:l.rendered,score:l.score,index:o,original:i}),e},[]).sort(function(t,e){return e.score-t.score||t.index-e.index})):[]}},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},"QTq/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("jH9d"),i=s(n("M7lk")),o=s(n("KcL1"));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=(0,i.default)(t,r.longitudeKeys);if(null!=n){var s=t[n];return!0===e?s:(0,o.default)(s)}}},"R/WN":function(t,e,n){"use strict";var r=n("U6jy"),i=n("P8+q"),o=n("SX8C"),s=function(t,e,n){return this.options=r({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n=n||{}),this.el=t,this.data=e||[],this.list=new o(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(t){this.handleKeyUp(t.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(t){this.handleKeyDown(t)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(t){this.handlePaste(t)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};s.prototype.handleKeyUp=function(t){40!==t&&38!==t&&27!==t&&13!==t&&9!==t&&this.handleInputChange(this.el.value)},s.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},s.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},s.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}},s.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates((function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}).bind(this))},s.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},s.prototype.update=function(t){this.data=t,this.handleKeyUp()},s.prototype.clear=function(){this.data=[],this.list.clear()},s.prototype.normalize=function(t){return t.toLowerCase()},s.prototype.match=function(t,e){return t.indexOf(e)>-1},s.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},s.prototype.getCandidates=function(t){var e={pre:"<strong>",post:"</strong>",extract:(function(t){return this.getItemValue(t)}).bind(this)};t(this.options.filter?i.filter(this.query,this.data,e).map((function(t){return{original:t.original,string:this.render(t.original,t.string)}}).bind(this)):this.data.map((function(t){return{original:t,string:this.render(t)}}).bind(this)))},s.prototype.getItemValue=function(t){return t},s.prototype.render=function(t,e){if(e)return e;for(var n=this.getItemValue(t.original?t.original:t),r=this.normalize(n),i=r.lastIndexOf(this.query);i>-1;){var o=i+this.query.length;n=n.slice(0,i)+"<strong>"+n.slice(i,o)+"</strong>"+n.slice(o),i=r.slice(0,i).lastIndexOf(this.query)}return n},s.prototype.renderError=function(t){this.list.drawError(t)},t.exports=s},"Rn+g":function(t,e,n){"use strict";var r=n("LYNF");t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},"SJ/V":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("wI44"))&&r.__esModule?r:{default:r};e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default;return n="function"==typeof n?n:i.default,e.slice().sort(function(e,r){return n(t,e)-n(t,r)})}},SX8C:function(t,e,n){"use strict";var r=function(t){return this.component=t,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};r.prototype.show=function(){this.element.style.display="block"},r.prototype.hide=function(){this.element.style.display="none"},r.prototype.add=function(t){this.items.push(t)},r.prototype.clear=function(){this.items=[],this.active=0},r.prototype.isEmpty=function(){return!this.items.length},r.prototype.isVisible=function(){return"block"===this.element.style.display},r.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},r.prototype.drawItem=function(t,e){var n=document.createElement("li"),r=document.createElement("a");e&&(n.className+=" active"),r.innerHTML=t.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),n.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,t)}).bind(this))},r.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},r.prototype.move=function(t){this.active=t,this.draw()},r.prototype.previous=function(){this.move(0===this.active?this.items.length-1:this.active-1)},r.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},r.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()},t.exports=r},"Smn/":function(t,e,n){"use strict";t.exports=function(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=e(r,t[r]),n},{})}},SntB:function(t,e,n){"use strict";var r=n("xTJ+");t.exports=function(t,e){e=e||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function l(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function u(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=l(void 0,t[i])):n[i]=l(t[i],e[i])}r.forEach(i,function(t){r.isUndefined(e[t])||(n[t]=l(void 0,e[t]))}),r.forEach(o,u),r.forEach(s,function(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=l(void 0,t[i])):n[i]=l(void 0,e[i])}),r.forEach(a,function(r){r in e?n[r]=l(t[r],e[r]):r in t&&(n[r]=l(void 0,t[r]))});var c=i.concat(o).concat(s).concat(a),h=Object.keys(t).concat(Object.keys(e)).filter(function(t){return-1===c.indexOf(t)});return r.forEach(h,u),n}},SsYf:function(t,e){t.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},U6jy:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},UnBK:function(t,e,n){"use strict";var r=n("xTJ+"),i=n("xAGQ"),o=n("Lmem"),s=n("JEQr");function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return a(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},"WVt+":function(t,e,n){!function(t){"use strict";var e=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*e,kilometers:6371.0088,kilometres:6371.0088,meters:e,metres:e,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:e/1852,radians:1,yards:6967335.223679999},r={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e,yards:1.0936133},i={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){switch(t){case"Point":return a(e).geometry;case"LineString":return h(e).geometry;case"Polygon":return u(e).geometry;case"MultiPoint":return _(e).geometry;case"MultiLineString":return f(e).geometry;case"MultiPolygon":return m(e).geometry;default:throw new Error(t+" is invalid")}}function a(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!k(t[0])||!k(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return a(t,e)}),n)}function u(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return u(t,e)}),n)}function h(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),d(t.map(function(t){return h(t,e)}),n)}function d(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function f(t,e,n){return void 0===n&&(n={}),o({type:"MultiLineString",coordinates:t},e,n)}function _(t,e,n){return void 0===n&&(n={}),o({type:"MultiPoint",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),o({type:"MultiPolygon",coordinates:t},e,n)}function g(t,e,n){return void 0===n&&(n={}),o({type:"GeometryCollection",geometries:t},e,n)}function y(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function v(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t*r}function b(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t/r}function x(t,e){return E(b(t,e))}function w(t){var e=t%360;return e<0&&(e+=360),e}function E(t){return t%(2*Math.PI)*180/Math.PI}function S(t){return t%360*Math.PI/180}function C(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return v(b(t,e),n)}function I(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=i[e];if(!r)throw new Error("invalid original units");var o=i[n];if(!o)throw new Error("invalid final units");return t/r*o}function k(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function T(t){return!!t&&t.constructor===Object}function P(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!k(t))throw new Error("bbox must only contain numbers")})}function A(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var O=Object.freeze({__proto__:null,earthRadius:e,factors:n,unitsFactors:r,areaFactors:i,feature:o,geometry:s,point:a,points:l,polygon:u,polygons:c,lineString:h,lineStrings:p,featureCollection:d,multiLineString:f,multiPoint:_,multiPolygon:m,geometryCollection:g,round:y,radiansToLength:v,lengthToRadians:b,lengthToDegrees:x,bearingToAzimuth:w,radiansToDegrees:E,degreesToRadians:S,convertLength:C,convertArea:I,isNumber:k,isObject:T,validateBBox:P,validateId:A});function M(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function L(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function N(t){if(t.length>1&&k(t[0])&&k(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return N(t[0]);throw new Error("coordinates must only contain numbers")}function D(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function R(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function z(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function F(t){return"Feature"===t.type?t.geometry:t}function B(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}var j=Object.freeze({__proto__:null,getCoord:M,getCoords:L,containsNumber:N,geojsonType:D,featureOf:R,collectionOf:z,getGeom:F,getType:B});function V(t,e,n){if(null!==t)for(var r,i,o,s,a,l,u,c,h=0,p=0,d=t.type,f="FeatureCollection"===d,_="Feature"===d,m=f?t.features.length:1,g=0;g<m;g++){a=(c=!!(u=f?t.features[g].geometry:_?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<a;y++){var v=0,b=0;if(null!==(s=c?u.geometries[y]:u)){l=s.coordinates;var x=s.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,g,v,b))return!1;p++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,g,v,b))return!1;p++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,g,v,b))return!1;p++}"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,g,v,b))return!1;p++}b++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===V(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function U(t,e,n,r){var i=n;return V(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i}function $(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function q(t,e,n){var r=n;return $(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function G(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function H(t,e,n){var r=n;return G(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function Z(t){var e=[];return V(t,function(t){e.push(t)}),e}function W(t,e){var n,r,i,o,s,a,l,u,c,h,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,_=d?t.features.length:1;for(n=0;n<_;n++){for(u=d?t.features[n].properties:f?t.properties:{},c=d?t.features[n].bbox:f?t.bbox:void 0,h=d?t.features[n].id:f?t.id:void 0,s=(l=!!(a=d?t.features[n].geometry:f?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=l?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,c,h))return!1;p++}}function X(t,e,n){var r=n;return W(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r}function Y(t,e){W(t,function(t,n,r,i,s){var a,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(o(t,r,{bbox:i,id:s}),n,0)&&void 0}switch(l){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++)if(!1===e(o({type:a,coordinates:t.coordinates[u]},r),n,u))return!1})}function K(t,e,n){var r=n;return Y(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function J(t,e){Y(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,l=0,u=0;return!1!==V(t,function(o,c,p,d,f){if(void 0===s||n>a||d>l||f>u)return s=o,a=n,l=d,u=f,void(i=0);var _=h([s,o],t.properties);if(!1===e(_,n,r,f,i))return!1;i++,s=o})&&void 0}}})}function Q(t,e,n){var r=n,i=!1;return J(t,function(t,o,s,a,l){r=!1===i&&void 0===n?t:e(r,t,o,s,a,l),i=!0}),r}function tt(t,e){if(!t)throw new Error("geojson is required");Y(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.coordinates;switch(t.geometry.type){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var o=0;o<i.length;o++)if(!1===e(h(i[o],t.properties),n,r,o))return!1}}})}function et(t,e,n){var r=n;return tt(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r}function nt(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),h([l[s],l[s+1]],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),h([l[o][s],l[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),h([l[i][s],l[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s-1),h([l[i][o][s],l[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function rt(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return a(u,l,e);case"MultiPoint":return i<0&&(i=u.length+i),a(u[i],l,e);case"LineString":return s<0&&(s=u.length+s),a(u[s],l,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a(u[o][s],l,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),a(u[i][s],l,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),a(u[i][o][s],l,e)}throw new Error("geojson is invalid")}var it=Object.freeze({__proto__:null,coordEach:V,coordReduce:U,propEach:$,propReduce:q,featureEach:G,featureReduce:H,coordAll:Z,geomEach:W,geomReduce:X,flattenEach:Y,flattenReduce:K,segmentEach:J,segmentReduce:Q,lineEach:tt,lineReduce:et,findSegment:nt,findPoint:rt});function ot(t){var e=[1/0,1/0,-1/0,-1/0];return V(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}ot.default=ot;var st=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;function ut(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ct=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=ut(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))at.call(n,s)&&(i[s]=n[s]);if(st){r=st(n);for(var a=0;a<r.length;a++)lt.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i},ht={successCallback:null,verbose:!1},pt={};function dt(t,e,n){n=n||{};for(var r=Object.keys(ht),i=0;i<r.length;i++){var o=r[i],s=n[o];pt[o]=s=null!=s?s:ht[o]}pt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=function(t){var e=[],n=0;return t.cells.forEach(function(r,i){r.forEach(function(r,o){if(void 0!==r&&5!==(p=r).cval&&10!==p.cval&&!_t(r)){var s=function(t,e,n){var r,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],u=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],c=t[e][n],h=c.cval,p=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h],d=gt(c,p);s.push([n+d[0],e+d[1]]),d=gt(c,p=u[h]),s.push([n+d[0],e+d[1]]),mt(c);for(var f=n+a[h],_=e+l[h],m=h;f>=0&&_>=0&&_<o&&(f!=n||_!=e)&&void 0!==(c=t[_][f]);){if(0===(h=c.cval)||15===h)return{path:s,info:"mergeable"};p=u[h],r=a[h],i=l[h],5!==h&&10!==h||(5===h?c.flipped?-1===l[m]?(p="left",r=-1,i=0):(p="right",r=1,i=0):-1===a[m]&&(p="bottom",r=0,i=-1):10===h&&(c.flipped?-1===a[m]?(p="top",r=0,i=1):(p="bottom",r=0,i=-1):1===l[m]&&(p="left",r=-1,i=0))),d=gt(c,p),s.push([f+d[0],_+d[1]]),mt(c),f+=r,_+=i,m=h}return{path:s,info:"closed"}}(t.cells,i,o),a=!1;if("mergeable"===s.info)for(var l=s.path[s.path.length-1][0],u=s.path[s.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-l)<=1e-7&&Math.abs(e[c][0][1]-u)<=1e-7){for(var h=s.path.length-2;h>=0;--h)e[c].unshift(s.path[h]);a=!0;break}a||(e[n++]=s.path)}var p})}),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,l=t[o+1][s],u=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){a|=l>=e?8:0,a|=u>=e?4:0,a|=c>=e?2:0;var p,d,f,_,m=!1;if(5==(a|=h>=e?1:0)||10===a){var g=(l+u+c+h)/4;5===a&&g<e?(a=10,m=!0):10===a&&g<e&&(a=5,m=!0)}0!==a&&15!==a&&(p=d=f=_=.5,1===a?(f=1-ft(e,l,h),d=1-ft(e,c,h)):2===a?(d=ft(e,h,c),_=1-ft(e,u,c)):3===a?(f=1-ft(e,l,h),_=1-ft(e,u,c)):4===a?(p=ft(e,l,u),_=ft(e,c,u)):5===a?(p=ft(e,l,u),_=ft(e,c,u),d=1-ft(e,c,h),f=1-ft(e,l,h)):6===a?(d=ft(e,h,c),p=ft(e,l,u)):7===a?(f=1-ft(e,l,h),p=ft(e,l,u)):8===a?(f=ft(e,h,l),p=1-ft(e,u,l)):9===a?(d=1-ft(e,c,h),p=1-ft(e,u,l)):10===a?(p=1-ft(e,u,l),_=1-ft(e,u,c),d=ft(e,h,c),f=ft(e,h,l)):11===a?(p=1-ft(e,u,l),_=1-ft(e,u,c)):12===a?(f=ft(e,h,l),_=ft(e,c,u)):13===a?(d=1-ft(e,c,h),_=ft(e,c,u)):14===a?(f=ft(e,h,l),d=ft(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:m,top:p,right:_,bottom:d,left:f})}}}return i}(t,e));return"function"==typeof pt.successCallback&&pt.successCallback(a),a}function ft(t,e,n){return(t-e)/(n-e)}function _t(t){return 0===t.cval||15===t.cval}function mt(t){_t(t)||5===t.cval||10===t.cval||(t.cval=15)}function gt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var yt=vt;function vt(t,e,n,r,i){bt(t,e,n||0,r||t.length-1,i||wt)}function bt(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1);bt(t,e,Math.max(n,Math.floor(e-s*l/o+u)),Math.min(r,Math.floor(e+(o-s)*l/o+u)),i)}var c=t[e],h=n,p=r;for(xt(t,n,e),i(t[r],c)>0&&xt(t,n,r);h<p;){for(xt(t,h,p),h++,p--;i(t[h],c)<0;)h++;for(;i(t[p],c)>0;)p--}0===i(t[n],c)?xt(t,n,p):xt(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function xt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function wt(t,e){return t<e?-1:t>e?1:0}yt.default=vt;var Et=Ct,St=Ct;function Ct(t,e){if(!(this instanceof Ct))return new Ct(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function It(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function kt(t,e){Tt(t,0,t.children.length,e,t)}function Tt(t,e,n,r,i){i||(i=Rt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Pt(i,t.leaf?r(o):o);return i}function Pt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function At(t,e){return t.minX-e.minX}function Ot(t,e){return t.minY-e.minY}function Mt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Lt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Nt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Dt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Rt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function zt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,yt(t,o,e,n,i),s.push(e,o,o,n))}function Ft(t){var e={exports:{}};return t(e,e.exports),e.exports}Ct.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Dt(t,e))return n;for(var i,o,s,a,l=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Dt(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):Nt(t,a)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Dt(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Dt(t,s=e.leaf?n(o):o)){if(e.leaf||Nt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Rt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),r=l[l.length-1],n=u.pop(),o=!0),s.leaf&&-1!==(i=It(t,s.children,e)))return s.children.splice(i,1),l.push(s),this._condense(l),this;o||s.leaf||!Nt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(l.push(s),u.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:At,compareMinY:Ot,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return kt(i=Rt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=Rt([])).leaf=!1,i.height=r;var a,l,u,c,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(zt(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(zt(t,a,u=Math.min(a+p-1,n),h,this.compareMinY),l=a;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(t,l,c,r-1));return kt(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,l,u,c,h,p,d;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)l=Mt(s=e.children[i]),p=t,d=s,(u=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-l)<h?(h=u,c=l<c?l:c,a=s):u===h&&l<c&&(c=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=n?t:(0,this.toBBox)(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),Pt(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Rt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,kt(n,this.toBBox),kt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Rt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,kt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,l,u,c,h,p,d,f,_,m;for(l=u=1/0,r=e;r<=n-e;r++)h=i=Tt(t,0,r,this.toBBox),p=o=Tt(t,r,n,this.toBBox),d=Math.max(h.minX,p.minX),f=Math.max(h.minY,p.minY),_=Math.min(h.maxX,p.maxX),m=Math.min(h.maxY,p.maxY),s=Math.max(0,_-d)*Math.max(0,m-f),a=Mt(i)+Mt(o),s<l?(l=s,c=r,u=a<u?a:u):s===l&&a<u&&(u=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:At,i=t.leaf?this.compareMinY:Ot;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Tt(t,0,e,s),l=Tt(t,n-e,n,s),u=Lt(a)+Lt(l);for(i=e;i<n-e;i++)o=t.children[i],Pt(a,t.leaf?s(o):o),u+=Lt(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Pt(l,t.leaf?s(o):o),u+=Lt(l);return u},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Pt(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():kt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Et.default=St;var Bt=function(t,e,n){var r=t*e,i=jt*t,o=i-(i-t),s=t-o,a=jt*e,l=a-(a-e),u=e-l,c=s*u-(r-o*l-s*l-o*u);return n?(n[0]=c,n[1]=r,n):[c,r]},jt=+(Math.pow(2,27)+1),Vt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,l=0,u=0,c=Math.abs,h=t[l],p=c(h),d=e[u],f=c(d);p<f?(o=h,(l+=1)<n&&(p=c(h=t[l]))):(o=d,(u+=1)<r&&(f=c(d=e[u]))),l<n&&p<f||u>=r?(i=h,(l+=1)<n&&(p=c(h=t[l]))):(i=d,(u+=1)<r&&(f=c(d=e[u])));for(var _,m,g=i+o,y=g-i,v=o-y,b=v,x=g;l<n&&u<r;)p<f?(i=h,(l+=1)<n&&(p=c(h=t[l]))):(i=d,(u+=1)<r&&(f=c(d=e[u]))),(v=(o=b)-(y=(g=i+o)-i))&&(s[a++]=v),b=x-((_=x+g)-(m=_-x))+(g-m),x=_;for(;l<n;)(v=(o=b)-(y=(g=(i=h)+o)-i))&&(s[a++]=v),b=x-((_=x+g)-(m=_-x))+(g-m),x=_,(l+=1)<n&&(h=t[l]);for(;u<r;)(v=(o=b)-(y=(g=(i=d)+o)-i))&&(s[a++]=v),b=x-((_=x+g)-(m=_-x))+(g-m),x=_,(u+=1)<r&&(d=e[u]);return b&&(s[a++]=b),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},Ut=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},$t=function(t,e){var n=t.length;if(1===n){var r=Bt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Bt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var l=1;l<n;++l){Bt(t[l],e,s),Ut(o[1],s[0],o),o[0]&&(i[a++]=o[0]);var u=s[1],c=o[1],h=u+c,p=c-(h-u);o[1]=h,p&&(i[a++]=p)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},qt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,l=0,u=0,c=Math.abs,h=t[l],p=c(h),d=-e[u],f=c(d);p<f?(o=h,(l+=1)<n&&(p=c(h=t[l]))):(o=d,(u+=1)<r&&(f=c(d=-e[u]))),l<n&&p<f||u>=r?(i=h,(l+=1)<n&&(p=c(h=t[l]))):(i=d,(u+=1)<r&&(f=c(d=-e[u])));for(var _,m,g=i+o,y=g-i,v=o-y,b=v,x=g;l<n&&u<r;)p<f?(i=h,(l+=1)<n&&(p=c(h=t[l]))):(i=d,(u+=1)<r&&(f=c(d=-e[u]))),(v=(o=b)-(y=(g=i+o)-i))&&(s[a++]=v),b=x-((_=x+g)-(m=_-x))+(g-m),x=_;for(;l<n;)(v=(o=b)-(y=(g=(i=h)+o)-i))&&(s[a++]=v),b=x-((_=x+g)-(m=_-x))+(g-m),x=_,(l+=1)<n&&(h=t[l]);for(;u<r;)(v=(o=b)-(y=(g=(i=d)+o)-i))&&(s[a++]=v),b=x-((_=x+g)-(m=_-x))+(g-m),x=_,(u+=1)<r&&(d=-e[u]);return b&&(s[a++]=b),x&&(s[a++]=x),a||(s[a++]=0),s.length=a,s},Gt=Ft(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));return i;var s}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],l=0;l<t;++l)0==(1&l)?i.push.apply(i,r(e(s,l))):o.push.apply(o,r(e(s,l))),a.push("m"+l);var u=n(i),c=n(o),h="orientation"+t+"Exact",p=["function ",h,"(",a.join(),"){var p=",u,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",p)(Vt,Bt,$t,qt)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=i-s;if(i>0){if(s<=0)return a;r=i+s}else{if(!(i<0))return a;if(s>=0)return a;r=-(i+s)}var l=33306690738754716e-32*r;return a>=l||a<=-l?a:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],l=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],p=e[2]-r[2],d=n[2]-r[2],f=o*c,_=a*u,m=a*l,g=i*c,y=i*u,v=o*l,b=h*(f-_)+p*(m-g)+d*(y-v),x=7771561172376103e-31*((Math.abs(f)+Math.abs(_))*Math.abs(h)+(Math.abs(m)+Math.abs(g))*Math.abs(p)+(Math.abs(y)+Math.abs(v))*Math.abs(d));return b>x||-b>x?b:s(t,e,n,r)}];function l(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[l].concat(a)),r=0;r<=5;++r)t.exports[r]=a[r]}()}),Ht=Gt[3],Zt=Xt,Wt=Xt;function Xt(t,e){if(!(this instanceof Xt))return new Xt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Yt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Yt(t,e){return t<e?-1:t>e?1:0}Xt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},Zt.default=Wt;var Kt=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],l=e[o][1],u=e[s][1];l>r!=u>r&&n<(e[s][0]-a)*(r-l)/(u-l)+a&&(i=!i)}return i},Jt=Gt[3],Qt=te;function te(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],l=a.slice();for(o=0;o<t.length;o++)Kt(t[o],a)||l.push(t[o]);var u=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort(function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]});var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],l=t[a],u=o.length;u>1&&Ht(t[o[u-2]],t[o[u-1]],l)<=0;)u-=1,o.pop();for(o.push(a),u=s.length;u>1&&Ht(t[s[u-2]],t[s[u-1]],l)>=0;)u-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var p=s.length-2;p>0;--p)n[c++]=s[p];return n}(l),c=[];for(o=0;o<u.length;o++)c.push(l[u[o]]);return c}(t),o=Et(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var l=i[a];o.remove(l),r=ae(l,r),s.push(r)}var u=Et(16);for(a=0;a<s.length;a++)u.insert(se(s[a]));for(var c=e*e,h=n*n;s.length;){var p=s.shift(),d=p.p,f=p.next.p,_=le(d,f);if(!(_<h)){var m=_/c;(l=ee(o,p.prev.p,d,f,p.next.next.p,m,u))&&Math.min(le(l,d),le(l,f))<=m&&(s.push(p),s.push(ae(l,p)),o.remove(l),u.remove(p),u.insert(se(p)),u.insert(se(p.next)))}}p=r;var g=[];do{g.push(p.p),p=p.next}while(p!==r);return g.push(p.p),g}function ee(t,e,n,r,i,o,s){for(var a=new Zt(null,ne),l=t.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],h=l.leaf?ue(c,n,r):re(n,r,c);h>o||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),d=p.node,f=ue(d,e,n),_=ue(d,r,i);if(p.dist<f&&p.dist<_&&oe(n,d,s)&&oe(r,d,s))return d}(l=a.pop())&&(l=l.node)}return null}function ne(t,e){return t.dist-e.dist}function re(t,e,n){if(ie(t,n)||ie(e,n))return 0;var r=ce(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=ce(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=ce(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=ce(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function ie(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function oe(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:a,minY:l,maxX:u,maxY:c}),p=0;p<h.length;p++)if(i=h[p].next.p,o=t,(r=h[p].p)!==(s=e)&&i!==o&&Jt(r,i,o)>0!=Jt(r,i,s)>0&&Jt(o,s,r)>0!=Jt(o,s,i)>0)return!1;return!0}function se(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function ae(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function le(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ue(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function ce(t,e,n,r,i,o,s,a){var l,u,c,h,p=n-t,d=r-e,f=s-i,_=a-o,m=t-i,g=e-o,y=p*p+d*d,v=p*f+d*_,b=f*f+_*_,x=p*m+d*g,w=f*m+_*g,E=y*b-v*v,S=E,C=E;0===E?(u=0,S=1,h=w,C=b):(h=y*w-v*x,(u=v*w-b*x)<0?(u=0,h=w,C=b):u>S&&(u=S,h=w+v,C=b)),h<0?(h=0,-x<0?u=0:-x>y?u=S:(u=-x,S=y)):h>C&&(h=C,-x+v<0?u=0:-x+v>y?u=S:(u=-x+v,S=y));var I=(1-(c=0===h?0:h/C))*i+c*s-((1-(l=0===u?0:u/S))*t+l*n),k=(1-c)*o+c*a-((1-l)*e+l*r);return I*I+k*k}function he(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(V(t,function(t){n.push([t[0],t[1]])}),!n.length)return null;var r=Qt(n,e.concavity);return r.length>3?u([r]):null}function pe(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=M(t),i=F(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var l=!1,u=0;u<a.length&&!l;u++)if(de(r,a[u][0],n.ignoreBoundary)){for(var c=!1,h=1;h<a[u].length&&!c;)de(r,a[u][h],!n.ignoreBoundary)&&(c=!0),h++;c||(l=!0)}return l}function de(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],l=e[o][0],u=e[o][1];if(t[1]*(s-l)+a*(l-t[0])+u*(t[0]-s)==0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(u-t[1])<=0)return!n;a>t[1]!=u>t[1]&&t[0]<(l-s)*(t[1]-a)/(u-a)+s&&(r=!r)}return r}function fe(t,e){var n=[];return G(t,function(t){var r=!1;W(e,function(e){pe(t,e)&&(r=!0)}),r&&n.push(t)}),d(n)}function _e(t,e,n){void 0===n&&(n={});var r=M(t),i=M(e),o=S(i[1]-r[1]),s=S(i[0]-r[0]),a=S(r[1]),l=S(i[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(l);return v(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}function me(t,e){var n=!1;return d(function(t){if(t.length<3)return[];t.sort(ye);for(var e,n,r,i=t.length-1,o=t[i].x,s=t[0].x,a=t[i].y,l=a;i--;)t[i].y<a&&(a=t[i].y),t[i].y>l&&(l=t[i].y);var u,c=s-o,h=l-a,p=c>h?c:h,d=.5*(s+o),f=.5*(l+a),_=[new ge({__sentinel:!0,x:d-20*p,y:f-p},{__sentinel:!0,x:d,y:f+20*p},{__sentinel:!0,x:d+20*p,y:f-p})],m=[],g=[];for(i=t.length;i--;){for(g.length=0,u=_.length;u--;)(c=t[i].x-_[u].x)>0&&c*c>_[u].r?(m.push(_[u]),_.splice(u,1)):c*c+(h=t[i].y-_[u].y)*h>_[u].r||(g.push(_[u].a,_[u].b,_[u].b,_[u].c,_[u].c,_[u].a),_.splice(u,1));for(ve(g),u=g.length;u;)n=g[--u],e=g[--u],r=t[i],Math.abs(2*((n.x-e.x)*(r.y-n.y)-(n.y-e.y)*(r.x-n.x)))>1e-12&&_.push(new ge(e,n,r))}for(Array.prototype.push.apply(m,_),i=m.length;i--;)(m[i].a.__sentinel||m[i].b.__sentinel||m[i].c.__sentinel)&&m.splice(i,1);return m}(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},u([[e,r,i,e]],o)}))}Qt.default=te;var ge=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+l*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(l*u-s*c)/h,this.y=(o*c-a*u)/h,this.r=(r=this.x-t.x)*r+(i=this.y-t.y)*i};function ye(t,e){return e.x-t.x}function ve(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function be(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return xe(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return xe(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ee(t);default:throw new Error("unknown GeoJSON type")}}function xe(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=we(t.properties),e.geometry=Ee(t.geometry),e}function we(t){var e={};return t?(Object.keys(t).forEach(function(n){var r=t[n];e[n]="object"==typeof r?null===r?null:Array.isArray(r)?r.map(function(t){return t}):we(r):r}),e):e}function Ee(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Ee(t)}),e):(e.coordinates=Se(t.coordinates),e)}function Se(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map(function(t){return Se(t)})}function Ce(t){return t[0].toString()+","+t[1].toString()}function Ie(t){return t}function ke(t,e){var n=function(t){if(null==t)return Ie;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+s;l<u;)c[l]=t[l],++l;return c}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}function Te(t,e){var n={},r=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)o+=(e=i)[0]*(i=t[n])[1]-e[1]*i[0];return Math.abs(o)}(ke(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}}),r.forEach(function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(e){var r,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&i.push(t)})})}),(r=(i=function(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],l=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=l,o=r[l]){delete r[o.start];var u=o===n?n:n.concat(o);r[u.start=n.start]=i[u.end=o.end]=u}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=l]=n}),a(i,r),a(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}(t,i)).length)>1)for(var o,a,l=1,u=s(i[0]);l<r;++l)(o=s(i[l]))>u&&(a=i[0],i[0]=i[l],i[l]=a,u=o);return i}).filter(function(t){return t.length>0})}}var Pe=Object.prototype.hasOwnProperty;function Ae(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),l=t-1,u=0;u<t;++u)s[u]=i;function c(r,o){for(var u=e(r)&l,c=s[u],h=0;c!=i;){if(n(c,r))return a[u]=o;if(++h>=t)throw new Error("full hashmap");c=s[u=u+1&l]}return s[u]=r,a[u]=o,o}function h(r,o){for(var u=e(r)&l,c=s[u],h=0;c!=i;){if(n(c,r))return a[u];if(++h>=t)throw new Error("full hashmap");c=s[u=u+1&l]}return s[u]=r,a[u]=o,o}function p(r,o){for(var u=e(r)&l,c=s[u],h=0;c!=i;){if(n(c,r))return a[u];if(++h>=t)break;c=s[u=u+1&l]}return o}function d(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}return{set:c,maybeSet:h,get:p,keys:d}}function Oe(t,e){return t[0]===e[0]&&t[1]===e[1]}var Me=new ArrayBuffer(16),Le=new Float64Array(Me),Ne=new Uint32Array(Me);function De(t){Le[0]=t[0],Le[1]=t[1];var e=Ne[0]^Ne[1];return 2147483647&(e<<5^e>>7^Ne[2]^Ne[3])}function Re(t,e,n,r){ze(t,e,n),ze(t,e,e+r),ze(t,e+r,n)}function ze(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Fe(t){var e={type:"GeometryCollection",geometries:t.features.map(Be)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Be(t){var e,n=je(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function je(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(je)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ve(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Ue(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function $e(t,e){if(void 0===e&&(e={}),!T(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==B(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=be(t));var r=function(t){var e={};Y(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return function(t,e){if(void 0===e&&(e={}),!T(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==B(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=be(t));var r=[],i=et(t,function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Ce(r[0]),s=Ce(r[r.length-1]),a=Ce(i[0]),l=Ce(i[i.length-1]);if(o===l)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==l)return null;n=r.concat(i.reverse().slice(1))}return h(n)}(t,e)||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:f(r.map(function(t){return t.coordinates})):null}(i,e);case"Polygon":return function(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==B(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=be(t));var n=[];Y(t,function(t){n.push(t.geometry)});var r=function(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&Pe.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){l(t.arcs)},MultiLineString:function(t){t.arcs.forEach(l)},Polygon:function(t){t.arcs.forEach(l)},MultiPolygon:function(t){t.arcs.forEach(u)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>r&&(r=o),s<n&&(n=s),s>i&&(i=s)}function l(t){t.forEach(a)}function u(t){t.forEach(l)}for(var c in t)o(t[c]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=function(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Fe:"Feature"===n.type?Be:je)(n);return r}(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=o-r?(n-1)/(o-r):1,l=s-i?(n-1)/(s-i):1;function u(t){return[Math.round((t[0]-r)*a),Math.round((t[1]-i)*l)]}function c(t,e){for(var n,o,s,u,c,h=-1,p=0,d=t.length,f=new Array(d);++h<d;)n=t[h],u=Math.round((n[0]-r)*a),c=Math.round((n[1]-i)*l),u===o&&c===s||(f[p++]=[o=u,s=c]);for(f.length=p;p<e;)p=f.push([f[0][0],f[0][1]]);return f}function h(t){return c(t,2)}function p(t){return c(t,4)}function d(t){return t.map(p)}function f(t){null!=t&&Pe.call(_,t.type)&&_[t.type](t)}var _={GeometryCollection:function(t){t.geometries.forEach(f)},Point:function(t){t.coordinates=u(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(u)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=d(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(d)}};for(var m in t)f(t[m]);return{scale:[1/a,1/l],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,l=s.length+a.length;for(delete t.lines,delete t.rings,r=0,i=s.length;r<i;++r)for(e=s[r];e=e.next;)++l;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++l;var u=Ae(2*l*1.4,De,Oe),c=t.arcs=[];for(r=0,i=s.length;r<i;++r){e=s[r];do{h(e)}while(e=e.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{h(n)}while(n=n.next);else p(n);function h(t){var e,n,r,i,s,a,l,h;if(r=u.get(e=o[t[0]]))for(l=0,h=r.length;l<h;++l)if(d(i=r[l],t))return t[0]=i[0],void(t[1]=i[1]);if(s=u.get(n=o[t[1]]))for(l=0,h=s.length;l<h;++l)if(f(a=s[l],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):u.set(e,[t]),s?s.push(t):u.set(n,[t]),c.push(t)}function p(t){var e,n,r,i,s;if(n=u.get(o[t[0]]))for(i=0,s=n.length;i<s;++i){if(_(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(m(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=u.get(e=o[t[0]+g(t)]))for(i=0,s=n.length;i<s;++i){if(_(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(m(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):u.set(e,[t]),c.push(t)}function d(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Oe(o[n],o[r]))return!1;return!0}function f(t,e){var n=t[0],r=t[1],i=e[1];if(n-r!=e[0]-i)return!1;for(;n<=r;++n,--i)if(!Oe(o[n],o[i]))return!1;return!0}function _(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var s=g(t),a=g(e),l=0;l<i;++l)if(!Oe(o[n+(l+s)%i],o[r+(l+a)%i]))return!1;return!0}function m(t,e){var n=t[0],r=e[1],i=t[1]-n;if(i!==r-e[0])return!1;for(var s=g(t),a=i-g(e),l=0;l<i;++l)if(!Oe(o[n+(l+s)%i],o[r-(l+a)%i]))return!1;return!0}function g(t){for(var e=t[0],n=t[1],r=e,i=r,s=o[r];++r<n;){var a=o[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=r,s=a)}return i-e}return t}(function(t){var e,n,r,i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,l=function(){for(var t=Ae(1.4*o.length,x,w,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),u=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),p=new Int8Array(o.length),d=0;for(e=0,n=o.length;e<n;++e)u[e]=c[e]=h[e]=-1;for(e=0,n=s.length;e<n;++e){var f=s[e],_=f[0],m=f[1];for(r=l[_],i=l[++_],++d,p[r]=1;++_<=m;)b(e,r,r=i,i=l[_]);++d,p[i]=1}for(e=0,n=o.length;e<n;++e)u[e]=-1;for(e=0,n=a.length;e<n;++e){var g=a[e],y=g[0]+1,v=g[1];for(b(e,l[v-1],r=l[y-1],i=l[y]);++y<=v;)b(e,r,r=i,i=l[y])}function b(t,e,n,r){if(u[n]!==t){u[n]=t;var i=c[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++d,p[n]=1)}else c[n]=e,h[n]=r}}function x(t){return De(o[t])}function w(t,e){return Oe(o[t],o[e])}u=c=h=null;var E,S=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;function l(r){for(var a=e(r)&s,l=o[a],u=0;l!=i;){if(n(l,r))return!0;if(++u>=t)throw new Error("full hashset");l=o[a=a+1&s]}return o[a]=r,!0}function u(r){for(var a=e(r)&s,l=o[a],u=0;l!=i;){if(n(l,r))return!0;if(++u>=t)break;l=o[a=a+1&s]}return!1}function c(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:l,has:u,values:c}}(1.4*d,De,Oe);for(e=0,n=o.length;e<n;++e)p[E=l[e]]&&S.add(o[E]);return S}(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var l=s[n],u=l[0],c=l[1];++u<c;)i.has(o[u])&&(e={0:u,1:l[1]},l[1]=u,l=l.next=e);for(n=0,r=a.length;n<r;++n)for(var h=a[n],p=h[0],d=p,f=h[1],_=i.has(o[p]);++d<f;)i.has(o[d])&&(_?(e={0:d,1:h[1]},h[1]=d,h=h.next=e):(Re(o,p,f,f-d),o[f]=o[p],_=!0,d=p));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&Pe.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}};function a(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function l(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function u(t){return t.map(l)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,s=Ae(1.4*i.arcs.length,Ve,Ue);function a(t){t&&Pe.call(l,t.type)&&l[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map(function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)}),delete i.coordinates,o=null;var l={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function u(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(u)}for(var h in t)a(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,l=o.length,u=o[0],c=u[0],h=u[1];++s<l;)r=(u=o[s])[0],i=u[1],r===c&&i===h||(o[a++]=[r-c,i-h],c=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}({geoms:g(n).geometry});return function(t){return ke(t,Te.apply(this,arguments))}(r,r.objects.geoms.geometries)}(i,e);default:throw new Error(r+" is not supported")}}function qe(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=B(t),i=[];switch(r){case"LineString":i=Ge(t);break;case"MultiLineString":case"Polygon":L(t).forEach(function(t){i.push(Ge(t))});break;case"MultiPolygon":L(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Ge(t))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var s={};L(t).forEach(function(t){var e=t.join("-");s.hasOwnProperty(e)||(i.push(t),s[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):o({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function Ge(t){var e=L(t);if(2===e.length&&!He(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(i=n.length)>2&&Ze(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,He(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return Ze(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function He(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ze(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],l=e[1],u=a-o,c=l-s;return 0==(r-o)*c-(i-s)*u&&(Math.abs(u)>=Math.abs(c)?u>0?o<=r&&r<=a:a<=r&&r<=o:c>0?s<=i&&i<=l:l<=i&&i<=s)}function We(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function Xe(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var l=We(t[a],t[e],t[n]);l>s&&(o=a,s=l)}s>r&&(o-e>1&&Xe(t,e,o,r,i),i.push(t[o]),n-o>1&&Xe(t,o,n,r,i))}function Ye(t,e){var n=t.length-1,r=[t[0]];return Xe(t,0,n,e,r),r.push(t[n]),r}function Ke(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return Ye(t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],l=[a],u=1,c=t.length;u<c;u++)(o=(r=n=t[u]).x-(i=a).x)*o+(s=r.y-i.y)*s>e&&(l.push(n),a=n);return a!==n&&l.push(n),l}(t,r),r)}function Je(t,e,n){return Ke(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function Qe(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=Ke(r,e,n).map(function(t){return[t.x,t.y]});!tn(i);)i=Ke(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function tn(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var en=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function nn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=F(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new en({duration:n,points:o,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},l=0;l<s.duration;l+=10)a(l);return a(s.duration),h(i,e.properties)}function rn(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return u([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function on(t){return rn(ot(t))}function sn(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(_e(t.slice(0,2),[r,n])>=_e(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function an(t,e,n,r){void 0===r&&(r={});var i=M(t),o=S(i[0]),s=S(i[1]),l=S(n),u=b(e,r.units),c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(l));return a([E(o+Math.atan2(Math.sin(l)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c))),E(c)],r.properties)}function ln(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(an(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),u([o],i)}function un(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){return(un(e,t)+180)%360}(t,e);var r=M(t),i=M(e),o=S(r[0]),s=S(i[0]),a=S(r[1]),l=S(i[1]),u=Math.sin(s-o)*Math.cos(l),c=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(s-o);return E(Math.atan2(u,c))}function cn(t,e){void 0===e&&(e={});var n=ot(t);return a([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function hn(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return V(t,function(t){n+=t[0],r+=t[1],i++},!0),a([n/i,r/i],e.properties)}function pn(t){var e=[];return"FeatureCollection"===t.type?G(t,function(t){V(t,function(n){e.push(a(n,t.properties))})}):V(t,function(n){e.push(a(n,t.properties))}),d(e)}var dn=_n,fn=_n;function _n(t,e,n){n=n||2;var r,i,o,s,a,l,u,c=e&&e.length,h=c?e[0]*n:t.length,p=mn(t,0,h,n,!0),d=[];if(!p)return d;if(c&&(p=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=mn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(In(s));for(a.sort(En),i=0;i<a.length;i++)Sn(a[i],n),n=gn(n,n.next);return n}(t,e,p,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var f=n;f<h;f+=n)(a=t[f])<r&&(r=a),(l=t[f+1])<i&&(i=l),a>o&&(o=a),l>s&&(s=l);u=0!==(u=Math.max(o-r,s-i))?1/u:0}return yn(p,d,n,r,i,u),d}function mn(t,e,n,r,i){var o,s;if(i===zn(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Nn(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Nn(o,t[o],t[o+1],s);return s&&An(s,s.next)&&(Dn(s),s=s.next),s}function gn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!An(r,r.next)&&0!==Pn(r.prev,r,r.next))r=r.next;else{if(Dn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function yn(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Cn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,u=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ);e++);for(l=u;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}(t,r,i,o);for(var a,l,u=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?bn(t,r,i,o):vn(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),Dn(t),t=l.next,u=l.next;else if((t=l)===u){s?1===s?yn(t=xn(t,e,n),e,n,r,i,o,2):2===s&&wn(t,e,n,r,i,o):yn(gn(t),e,n,r,i,o,1);break}}}function vn(t){var e=t.prev,n=t,r=t.next;if(Pn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(kn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Pn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function bn(t,e,n,r){var i=t.prev,o=t,s=t.next;if(Pn(i,o,s)>=0)return!1;for(var a=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,u=Cn(i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,e,n,r),c=Cn(a,l,e,n,r),h=t.prevZ,p=t.nextZ;h&&h.z>=u&&p&&p.z<=c;){if(h!==t.prev&&h!==t.next&&kn(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&Pn(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==t.prev&&p!==t.next&&kn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Pn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=u;){if(h!==t.prev&&h!==t.next&&kn(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&Pn(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=c;){if(p!==t.prev&&p!==t.next&&kn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&Pn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function xn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!An(i,o)&&On(i,r,r.next,o)&&Mn(i,o)&&Mn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Dn(r),Dn(r.next),r=t=o),r=r.next}while(r!==t);return r}function wn(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Tn(s,a)){var l=Ln(s,a);return s=gn(s,s.next),l=gn(l,l.next),yn(s,e,n,r,i,o),void yn(l,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function En(t,e){return t.x-e.x}function Sn(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var l,u=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&kn(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(i-r.x))<p||l===p&&r.x>n.x)&&Mn(r,t)&&(n=r,p=l),r=r.next;return n}(t,e)){var n=Ln(e,t);gn(n,n.next)}}function Cn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function In(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function kn(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function Tn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&On(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Mn(t,e)&&Mn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Pn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function An(t,e){return t.x===e.x&&t.y===e.y}function On(t,e,n,r){return!!(An(t,e)&&An(n,r)||An(t,r)&&An(n,e))||Pn(t,e,n)>0!=Pn(t,e,r)>0&&Pn(n,r,t)>0!=Pn(n,r,e)>0}function Mn(t,e){return Pn(t.prev,t,t.next)<0?Pn(t,e,t.next)>=0&&Pn(t,t.prev,e)>=0:Pn(t,e,t.prev)<0||Pn(t,t.next,e)<0}function Ln(t,e){var n=new Rn(t.i,t.x,t.y),r=new Rn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Nn(t,e,n,r){var i=new Rn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Dn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Rn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function zn(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Fn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n}(t),n=dn(e.vertices,e.holes,2),r=[],i=[];n.forEach(function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(u([s]))}return r}function Bn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return G(e,function(e,n){var o=_e(t,e);o<r&&(i=n,r=o)}),(n=be(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function jn(t){if(!t)throw new Error("geojson is required");var e=[];return Y(t,function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=L(r);break;case"LineString":n=[L(r)]}n.forEach(function(n){(function(t,e){var n=[];return t.reduce(function(t,r){var i=h([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r}),n})(n,t.properties).forEach(function(t){t.id=e.length,e.push(t)})})}}(t,e)}),d(e)}_n.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(zn(t,0,i?e[0]*n:t.length,n));if(i)for(var s=0,a=e.length;s<a;s++)o-=Math.abs(zn(t,e[s]*n,s<a-1?e[s+1]*n:t.length,n));var l=0;for(s=0;s<r.length;s+=3){var u=r[s]*n,c=r[s+1]*n,h=r[s+2]*n;l+=Math.abs((t[u]-t[h])*(t[c+1]-t[u+1])-(t[u]-t[c])*(t[h+1]-t[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},_n.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n},dn.default=fn;var Vn=Ft(function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function p(t){return t%(2*Math.PI)*180/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return r(t,e)}),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return i(t,e)}),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map(function(t){return o(t,e)}),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return p(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!d(t))throw new Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}});function Un(t,e,n){if(null!==t)for(var r,i,o,s,a,l,u,c,h=0,p=0,d=t.type,f="FeatureCollection"===d,_="Feature"===d,m=f?t.features.length:1,g=0;g<m;g++){a=(c=!!(u=f?t.features[g].geometry:_?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<a;y++){var v=0,b=0;if(null!==(s=c?u.geometries[y]:u)){l=s.coordinates;var x=s.type;switch(h=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,g,v,b))return!1;p++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],p,g,v,b))return!1;p++,"MultiPoint"===x&&v++}"LineString"===x&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(!1===e(l[r][i],p,g,v,b))return!1;p++}"MultiLineString"===x&&v++,"Polygon"===x&&b++}"Polygon"===x&&v++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-h;o++){if(!1===e(l[r][i][o],p,g,v,b))return!1;p++}b++}v++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Un(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $n(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function qn(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Gn(t,e){var n,r,i,o,s,a,l,u,c,h,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,_=d?t.features.length:1;for(n=0;n<_;n++){for(u=d?t.features[n].properties:f?t.properties:{},c=d?t.features[n].bbox:f?t.bbox:void 0,h=d?t.features[n].id:f?t.id:void 0,s=(l=!!(a=d?t.features[n].geometry:f?t.geometry:t)&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=l?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,u,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,c,h))return!1;p++}}function Hn(t,e){Gn(t,function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Vn.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++)if(!1===e(Vn.feature({type:s,coordinates:t.coordinates[l]},r),n,l))return!1})}function Zn(t,e){Hn(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,l=0,u=0;return!1!==Un(t,function(o,c,h,p,d){if(void 0===s||n>a||p>l||d>u)return s=o,a=n,l=p,u=d,void(i=0);var f=Vn.lineString([s,o],t.properties);if(!1===e(f,n,r,d,i))return!1;i++,s=o})&&void 0}}})}function Wn(t,e){if(!t)throw new Error("geojson is required");Hn(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.coordinates;switch(t.geometry.type){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var o=0;o<i.length;o++)if(!1===e(Vn.lineString(i[o],t.properties),n,r,o))return!1}}})}var Xn=Object.defineProperty({coordEach:Un,coordReduce:function(t,e,n,r){var i=n;return Un(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i},propEach:$n,propReduce:function(t,e,n){var r=n;return $n(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r},featureEach:qn,featureReduce:function(t,e,n){var r=n;return qn(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r},coordAll:function(t){var e=[];return Un(t,function(t){e.push(t)}),e},geomEach:Gn,geomReduce:function(t,e,n){var r=n;return Gn(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r},flattenEach:Hn,flattenReduce:function(t,e,n){var r=n;return Hn(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r},segmentEach:Zn,segmentReduce:function(t,e,n){var r=n,i=!1;return Zn(t,function(t,o,s,a,l){r=!1===i&&void 0===n?t:e(r,t,o,s,a,l),i=!0}),r},lineEach:Wn,lineReduce:function(t,e,n){var r=n;return Wn(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r},findSegment:function(t,e){if(!Vn.isObject(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),Vn.lineString([l[s],l[s+1]],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),Vn.lineString([l[o][s],l[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),Vn.lineString([l[i][s],l[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s-1),Vn.lineString([l[i][o][s],l[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},findPoint:function(t,e){if(!Vn.isObject(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return Vn.point(l,a,e);case"MultiPoint":return i<0&&(i=l.length+i),Vn.point(l[i],a,e);case"LineString":return s<0&&(s=l.length+s),Vn.point(l[s],a,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),Vn.point(l[o][s],a,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),Vn.point(l[i][s],a,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s),Vn.point(l[i][o][s],a,e)}throw new Error("geojson is invalid")}},"__esModule",{value:!0});function Yn(t){var e=[1/0,1/0,-1/0,-1/0];return Xn.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}Yn.default=Yn;var Kn=Object.defineProperty({default:Yn},"__esModule",{value:!0}).default,Jn=Xn.featureEach,Qn=Vn.featureCollection;function tr(t){var e=Et(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Kn(t),Et.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Kn(t),e.push(t)}):Jn(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Kn(t),e.push(t)}),Et.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Kn(t),Et.prototype.remove.call(this,t,e)},e.clear=function(){return Et.prototype.clear.call(this)},e.search=function(t){var e=Et.prototype.search.call(this,this.toBBox(t));return Qn(e)},e.collides=function(t){return Et.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Et.prototype.all.call(this);return Qn(t)},e.toJSON=function(){return Et.prototype.toJSON.call(this)},e.fromJSON=function(t){return Et.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Kn(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Kn(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var er=tr;function nr(t,e){var n={},r=[];if("LineString"===t.type&&(t=o(t)),"LineString"===e.type&&(e=o(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=rr(t,e);return i&&r.push(i),d(r)}var s=er();return s.load(jn(e)),G(jn(t),function(t){G(s.search(t),function(e){var i=rr(t,e);if(i){var o=L(i).join(",");n[o]||(n[o]=!0,r.push(i))}})}),d(r)}function rr(t,e){var n=L(t),r=L(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],l=n[1][1],u=r[0][0],c=r[0][1],h=r[1][0],p=r[1][1],d=(p-c)*(s-i)-(h-u)*(l-o);if(0===d)return null;var f=((h-u)*(o-c)-(p-c)*(i-u))/d,_=((s-i)*(o-c)-(l-o)*(i-u))/d;return f>=0&&f<=1&&_>=0&&_<=1?a([i+f*(s-i),o+f*(l-o)]):null}function ir(t,e,n){void 0===n&&(n={});var r=a([1/0,1/0],{dist:1/0}),i=0;return Y(t,function(t){for(var o=L(t),s=0;s<o.length-1;s++){var l=a(o[s]);l.properties.dist=_e(e,l,n);var u=a(o[s+1]);u.properties.dist=_e(e,u,n);var c=_e(l,u,n),p=Math.max(l.properties.dist,u.properties.dist),d=un(l,u),f=an(e,p,d+90,n),_=an(e,p,d-90,n),m=nr(h([f.geometry.coordinates,_.geometry.coordinates]),h([l.geometry.coordinates,u.geometry.coordinates])),g=null;m.features.length>0&&((g=m.features[0]).properties.dist=_e(e,g,n),g.properties.location=i+_e(l,g,n)),l.properties.dist<r.properties.dist&&((r=l).properties.index=s,r.properties.location=i),u.properties.dist<r.properties.dist&&((r=u).properties.index=s+1,r.properties.location=i+c),g&&g.properties.dist<r.properties.dist&&((r=g).properties.index=s),i+=c}}),r}function or(t,n,r){void 0===r&&(r={});var i=M(t),o=M(n);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,C(function(t,n,r){var i=r=void 0===r?e:Number(r),o=t[1]*Math.PI/180,s=n[1]*Math.PI/180,a=s-o,l=Math.abs(n[0]-t[0])*Math.PI/180;l>Math.PI&&(l-=2*Math.PI);var u=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(u)>1e-11?a/u:Math.cos(o);return Math.sqrt(a*a+c*c*l*l)*i}(i,o),"meters",r.units)}function sr(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=a(t):"Point"===t.type?t=o(t):R(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=h(e):"LineString"===e.type?e=o(e):R(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return J(e,function(t){var e=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=ar([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return lr(t,e,{method:r.method,units:"degrees"});var s=ar(i,i);if(s<=o)return lr(t,n,{method:r.method,units:"degrees"});var a=o/s;return lr(t,[e[0]+a*i[0],e[1]+a*i[1]],{method:r.method,units:"degrees"})}(i,t.geometry.coordinates[0],t.geometry.coordinates[1],n);e<r&&(r=e)}),C(r,"degrees",n.units)}function ar(t,e){return t[0]*e[0]+t[1]*e[1]}function lr(t,e,n){return"planar"===n.method?or(t,e,n):_e(t,e,n)}function ur(t,e,n,r,i,o,s,a){var l,u,c,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(l=(a-o)*(n-t)-(s-i)*(r-e))?null!==p.x&&null!==p.y&&p:(h=(n-t)*(u=e-o)-(r-e)*(c=t-i),u=((s-i)*u-(a-o)*c)/l,c=h/l,p.x=t+u*(n-t),p.y=e+u*(r-e),u>=0&&u<=1&&(p.onLine1=!0),c>=0&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}function cr(t){for(var e=function(t){return"FeatureCollection"!==t.type?d("Feature"!==t.type?[o(t)]:[t]):t}(t),n=cn(e),r=!1,i=0;!r&&i<e.features.length;){var s,l=e.features[i].geometry,u=!1;if("Point"===l.type)n.geometry.coordinates[0]===l.coordinates[0]&&n.geometry.coordinates[1]===l.coordinates[1]&&(r=!0);else if("MultiPoint"===l.type){var c=!1;for(s=0;!c&&s<l.coordinates.length;)n.geometry.coordinates[0]===l.coordinates[s][0]&&n.geometry.coordinates[1]===l.coordinates[s][1]&&(r=!0,c=!0),s++}else if("LineString"===l.type)for(s=0;!u&&s<l.coordinates.length-1;)hr(n.geometry.coordinates[0],n.geometry.coordinates[1],l.coordinates[s][0],l.coordinates[s][1],l.coordinates[s+1][0],l.coordinates[s+1][1])&&(u=!0,r=!0),s++;else if("MultiLineString"===l.type)for(var h=0;h<l.coordinates.length;){u=!1,s=0;for(var p=l.coordinates[h];!u&&s<p.length-1;)hr(n.geometry.coordinates[0],n.geometry.coordinates[1],p[s][0],p[s][1],p[s+1][0],p[s+1][1])&&(u=!0,r=!0),s++;h++}else"Polygon"!==l.type&&"MultiPolygon"!==l.type||pe(n,l)&&(r=!0);i++}if(r)return n;var f=d([]);for(i=0;i<e.features.length;i++)f.features=f.features.concat(pn(e.features[i]).features);return a(Bn(n,f).geometry.coordinates)}function hr(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function pr(t){return X(t,function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return dr(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=dr(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}function dr(t){var e=0;if(t&&t.length>0){e+=Math.abs(fr(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(fr(t[n]))}return e}function fr(t){var e,n,r,i,o,s,a=0,l=t.length;if(l>2){for(s=0;s<l;s++)s===l-2?(r=l-2,i=l-1,o=0):s===l-1?(r=l-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(_r(t[o][0])-_r(e[0]))*Math.sin(_r(n[1]));a=6378137*a*6378137/2}return a}function _r(t){return t*Math.PI/180}function mr(t,e){return void 0===e&&(e={}),Q(t,function(t,n){var r=n.geometry.coordinates;return t+_e(r[0],r[1],e)},0)}function gr(t,e,n,r){if(!T(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,l,u=i.length,c=0,p=0;p<i.length&&!(e>=c&&p===i.length-1);p++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(i[p]),h(o);a=un(i[p],i[p-1])-180,l=an(i[p],s,a,r),o.push(l.geometry.coordinates)}if(c>=n)return(s=n-c)?(a=un(i[p],i[p-1])-180,l=an(i[p],s,a,r),o.push(l.geometry.coordinates),h(o)):(o.push(i[p]),h(o));if(c>=e&&o.push(i[p]),p===i.length-1)return h(o);c+=_e(i[p],i[p+1],r)}if(c<e&&i.length===u)throw new Error("Start position is beyond line");var d=i[i.length-1];return h([d,d])}function yr(t,e,n){void 0===n&&(n={});for(var r=M(t),i=L(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),vr(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function vr(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],l=t[1],u=e[0],c=e[1],h=u-a,p=c-l,d=(n[0]-a)*p-(n[1]-l)*h;if(null!==i){if(Math.abs(d)>i)return!1}else if(0!==d)return!1;return r?"start"===r?Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<=u:u<=o&&o<a:p>0?l<s&&s<=c:c<=s&&s<l:"end"===r?Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<u:u<o&&o<=a:p>0?l<=s&&s<c:c<s&&s<=l:"both"===r&&(Math.abs(h)>=Math.abs(p)?h>0?a<o&&o<u:u<o&&o<a:p>0?l<s&&s<c:c<s&&s<l):Math.abs(h)>=Math.abs(p)?h>0?a<=o&&o<=u:u<=o&&o<=a:p>0?l<=s&&s<=c:c<=s&&s<=l}function br(t,e){var n=F(t),r=F(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(wr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return yr(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return pe(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)wr(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!yr(t.coordinates[r],e))return!1;n||(n=yr(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=pe(t.coordinates[1],e))){n=!1;break}r=pe(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!yr(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){if(!xr(ot(e),ot(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!pe(t.coordinates[r],e))return!1;n||(n=pe(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=pe(Er(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=ot(t);if(!xr(ot(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!pe(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function xr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function wr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Er(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Sr(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],l=t[3],u=e/_e([i,o],[s,o],n)*(s-i),c=e/_e([i,o],[i,l],n)*(l-o),h=s-i,p=l-o,f=Math.floor(h/u),_=(p-Math.floor(p/c)*c)/2,m=i+(h-f*u)/2;m<=s;){for(var g=o+_;g<=l;){var y=a([m,g],n.properties);n.mask?br(y,n.mask)&&r.push(y):r.push(y),g+=c}m+=u}return d(r)}function Cr(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return V(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function Ir(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Ir(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}er.default=tr;var kr=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Tr=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Pr(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Ar(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Pr([t[Mr(e-1,t.length-1)],t[e],t[Mr(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function Or(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Or(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Mr(t,e){return(t%e+e)%e}var Lr=Math.PI/180,Nr=180/Math.PI,Dr=function(t,e){this.lon=t,this.lat=e,this.x=Lr*t,this.y=Lr*e};Dr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Dr.prototype.antipode=function(){return new Dr(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var Rr=function(){this.coords=[],this.length=0};Rr.prototype.move_to=function(t){this.length++,this.coords.push(t)};var zr=function(t){this.properties=t||{},this.geometries=[]};zr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},zr.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Fr=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Dr(t.x,t.y),this.end=new Dr(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(i)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function Br(t,e){var n=[],r=er();return Y(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=Vr(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),G(jr(o,e),function(t){n.push(t),r.insert(t)})}}else(n=jr(t,e).features).forEach(function(t){t.bbox||(t.bbox=sn(ot(t)))}),r.load(d(n))}),d(n)}function jr(t,e){var n=[],r=L(t)[0],i=L(t)[t.geometry.coordinates.length-1];if(Ur(r,M(e))||Ur(i,M(e)))return d([t]);var o=er(),s=jn(t);o.load(s);var a=o.search(e);if(!a.features.length)return d([t]);var l=Vr(e,a),u=H(s,function(t,r,i){var o=L(r)[1],s=M(e);return i===l.id?(t.push(s),n.push(h(t)),Ur(s,o)?[s]:[s,o]):(t.push(o),t)},[r]);return u.length>1&&n.push(h(u)),d(n)}function Vr(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return G(e,function(e){var i=ir(e,t).properties.dist;i<r&&(n=e,r=i)}),n}function Ur(t,e){return t[0]===e[0]&&t[1]===e[1]}function $r(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,s=qr(n),a=qr(r),l=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return h(ln(t,e,i).geometry.coordinates[0],l);for(var u=s,c=s<a?a:a+360,p=u,d=[],f=0;p<c;)d.push(an(t,e,p,i).geometry.coordinates),p=u+360*++f/o;return p>c&&d.push(an(t,e,c,i).geometry.coordinates),h(d,l)}function qr(t){var e=t%360;return e<0&&(e+=360),e}function Gr(t,e){void 0===e&&(e={});var n=F(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return Hr(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=F(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach(function(t){i.push(Zr(t,r))}),d(i)}(n,e);default:throw new Error("invalid poly")}}function Hr(t,e){return void 0===e&&(e={}),Zr(F(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Zr(t,e){return t.length>1?f(t,e):h(t[0],e)}function Wr(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(r=e.orderCoords)||void 0===r||r;switch(null!==(i=e.mutate)&&void 0!==i&&i||(t=be(t)),t.type){case"FeatureCollection":var l=[];return t.features.forEach(function(t){l.push(L(Xr(t,{},s,a)))}),m(l,o);default:return Xr(t,o,s,a)}}function Xr(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=F(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=Yr(o)),u([o],e);case"MultiLineString":var a=[],l=0;return o.forEach(function(t){if(n&&(t=Yr(t)),r){var e=function(t){var e=t[1],n=t[3];return Math.abs(t[0]-t[2])*Math.abs(e-n)}(ot(h(t)));e>l?(a.unshift(t),l=e):a.push(t)}else a.push(t)}),u(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Yr(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]||t.push(e),t}function Kr(t,e){var n,r,i,o,s,a,l;for(r=1;r<=8;r*=2){for(n=[],o=!(Qr(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(l=!(Qr(a=t[s],e)&r))!==o&&n.push(Jr(i,a,r,e)),l&&n.push(a),i=a,o=l;if(!(t=n).length)break}return n}function Jr(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Qr(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function ti(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=Kr(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}Fr.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Nr*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Nr*Math.atan2(i,r),s]},Fr.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=this.interpolate(r*i);n.push(o)}for(var s=!1,a=0,l=e&&e.offset?e.offset:10,u=180-l,c=-180+l,h=360-l,p=1;p<n.length;++p){var d=n[p-1][0],f=n[p][0],_=Math.abs(f-d);_>h&&(f>u&&d<c||d>u&&f<c)?s=!0:_>a&&(a=_)}var m=[];if(s&&a<l){var g=[];m.push(g);for(var y=0;y<n.length;++y){var v=parseFloat(n[y][0]);if(y>0&&Math.abs(v-n[y-1][0])>h){var b=parseFloat(n[y-1][0]),x=parseFloat(n[y-1][1]),w=parseFloat(n[y][0]),E=parseFloat(n[y][1]);if(b>-180&&b<c&&180===w&&y+1<n.length&&n[y-1][0]>-180&&n[y-1][0]<c){g.push([-180,n[y][1]]),y++,g.push([n[y][0],n[y][1]]);continue}if(b>u&&b<180&&-180===w&&y+1<n.length&&n[y-1][0]>u&&n[y-1][0]<180){g.push([180,n[y][1]]),y++,g.push([n[y][0],n[y][1]]);continue}if(b<c&&w>u){var S=b;b=w,w=S;var C=x;x=E,E=C}if(b>u&&w<c&&(w+=360),b<=180&&w>=180&&b<w){var I=(180-b)/(w-b),k=I*E+(1-I)*x;g.push([n[y-1][0]>u?180:-180,k]),(g=[]).push([n[y-1][0]>u?-180:180,k]),m.push(g)}else m.push(g=[]);g.push([v,n[y][1]])}else g.push([n[y][0],n[y][1]])}}else{var T=[];m.push(T);for(var P=0;P<n.length;++P)T.push([n[P][0],n[P][1]])}for(var A=new zr(this.properties),O=0;O<m.length;++O){var M=new Rr;A.geometries.push(M);for(var L=m[O],N=0;N<L.length;++N)M.move_to(L[N])}return A};var ei=Ft(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),ni=Ft(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i}),ri=Ft(function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,l;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(ni(t))return!!ni(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var u=ei(t),c=ei(o)}catch(t){return!1}if(u.length!=c.length)return!1;for(u.sort(),c.sort(),a=u.length-1;a>=0;a--)if(u[a]!=c[a])return!1;for(a=u.length-1;a>=0;a--)if(!n(t[l=u[a]],o[l],s))return!1;return typeof t==typeof o}(t,o,s))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}});function ii(t,e,n){if(void 0===n&&(n={}),!T(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=er(),a=jn(t);return s.load(a),J(e,function(t){var e=!1;t&&(G(s.search(t),function(n){if(!1===e){var o=L(t).sort(),s=L(n).sort();ri(o,s)||(0===i?yr(o[0],n)&&yr(o[1],n):ir(n,o[0]).properties.dist<=i&&ir(n,o[1]).properties.dist<=i)?(e=!0,r=r?oi(r,t):t):(0===i?yr(s[0],t)&&yr(s[1],t):ir(t,s[0]).properties.dist<=i&&ir(t,s[1]).properties.dist<=i)&&(r=r?oi(r,n):n)}}),!1===e&&r&&(o.push(r),r=void 0))}),r&&o.push(r),d(o)}function oi(t,e){var n=L(e),r=L(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return ri(n[0],i)?s.unshift(n[1]):ri(n[0],o)?s.push(n[1]):ri(n[1],i)?s.unshift(n[0]):ri(n[1],o)&&s.push(n[0]),t}function si(t){var e=t%360;return e<0&&(e+=360),e}function ai(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?li(M(e),M(t)):li(M(t),M(e)))>180?-(360-r):r}function li(t,e){var n=S(t[1]),r=S(e[1]),i=S(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(E(Math.atan2(i,o))+360)%360}function ui(t,n,r,i){void 0===i&&(i={});var o=n<0,s=C(Math.abs(n),i.units,"meters");o&&(s=-Math.abs(s));var l=M(t),u=function(t,n,r,i){var o=n/(i=void 0===i?e:Number(i)),s=t[0]*Math.PI/180,a=S(t[1]),l=S(r),u=o*Math.cos(l),c=a+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),p=Math.abs(h)>1e-11?u/h:Math.cos(a);return[(180*(s+o*Math.sin(l)/p)/Math.PI+540)%360-180,180*c/Math.PI]}(l,s,r);return u[0]+=u[0]-l[0]>180?-360:l[0]-u[0]>180?360:0,a(u,i.properties)}function ci(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],l=t[s+1];s===t.length-1&&(l=t[0]),r=pi(a,l,e),n<=0&&r>0?pi(e,a,i)<0||(i=a):n>0&&r<=0&&(hi(e,a,o)||(o=a)),n=r}return[i,o]}function hi(t,e,n){return pi(t,e,n)>0}function pi(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function di(t){for(var e,n,r=L(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function fi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return W(t,function(t){fi(t,e)}),t;case"LineString":return _i(L(t),e),t;case"Polygon":return mi(L(t),e),t;case"MultiLineString":return L(t).forEach(function(t){_i(t,e)}),t;case"MultiPolygon":return L(t).forEach(function(t){mi(t,e)}),t;case"Point":case"MultiPoint":return t}}function _i(t,e){di(t)===e&&t.reverse()}function mi(t,e){di(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)di(t[n])===e&&t[n].reverse()}var gi={successCallback:null,verbose:!1,polygons:!1},yi={};function vi(t,e,n,r){r=r||{};for(var i=Object.keys(gi),o=0;o<i.length;o++){var s=i[o],a=r[s];yi[s]=a=null!=a?a:gi[s]}yi.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,u=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var l=0;l<i;++l){var u=0,c=t[a+1][l],h=t[a+1][l+1],p=t[a][l+1],d=t[a][l];if(!(isNaN(c)||isNaN(h)||isNaN(p)||isNaN(d))){u|=c<e?0:c>s?128:64,u|=h<e?0:h>s?32:16,u|=p<e?0:p>s?8:4;var f=+(u|=d<e?0:d>s?2:1),_=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var m=(c+h+p+d)/4;_=m>s?2:m<e?0:1,34===u?1===_?u=35:0===_&&(u=136):136===u?1===_?(u=35,_=4):0===_&&(u=34):17===u?1===_?(u=155,_=4):0===_&&(u=153):68===u?1===_?(u=103,_=4):0===_&&(u=102):153===u?1===_&&(u=155):102===u?1===_&&(u=103):152===u?_<2&&(u=156,_=1):137===u?_<2&&(u=139,_=1):98===u?_<2&&(u=99,_=1):38===u?_<2&&(u=39,_=1):18===u?_>0?(u=156,_=4):u=152:33===u?_>0?(u=139,_=4):u=137:72===u?_>0?(u=99,_=4):u=98:132===u&&(_>0?(u=39,_=4):u=38)}if(0!=u&&170!=u){var g,y,v,b,x,w,E,S;g=y=v=b=x=w=E=S=.5;var C=[];1===u?(v=1-ao(e,p,d),S=1-ao(e,c,d),C.push(eo[u])):169===u?(v=ao(s,d,p),S=ao(s,d,c),C.push(eo[u])):4===u?(w=1-ao(e,h,p),b=ao(e,d,p),C.push(Qi[u])):166===u?(w=ao(s,p,h),b=1-ao(s,p,d),C.push(Qi[u])):16===u?(x=ao(e,p,h),y=ao(e,c,h),C.push(Ji[u])):154===u?(x=1-ao(s,h,p),y=1-ao(s,h,c),C.push(Ji[u])):64===u?(E=ao(e,d,c),g=1-ao(e,h,c),C.push(ro[u])):106===u?(E=1-ao(s,c,d),g=ao(s,c,h),C.push(ro[u])):168===u?(b=ao(s,d,p),v=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),C.push(to[u]),C.push(eo[u])):2===u?(b=1-ao(e,p,d),v=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),C.push(to[u]),C.push(eo[u])):162===u?(x=ao(s,p,h),w=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),C.push(to[u]),C.push(eo[u])):8===u?(x=1-ao(e,h,p),w=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),C.push(Ji[u]),C.push(Qi[u])):138===u?(x=1-ao(e,h,p),w=1-ao(s,h,p),g=1-ao(s,h,c),y=1-ao(e,h,c),C.push(Ji[u]),C.push(Qi[u])):32===u?(x=ao(s,p,h),w=ao(e,p,h),g=ao(e,c,h),y=ao(s,c,h),C.push(Ji[u]),C.push(Qi[u])):42===u?(S=1-ao(s,c,d),E=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h),C.push(no[u]),C.push(ro[u])):128===u&&(S=ao(e,d,c),E=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c),C.push(no[u]),C.push(ro[u])),5===u?(w=1-ao(e,h,p),S=1-ao(e,c,d),C.push(Qi[u])):165===u?(w=ao(s,p,h),S=ao(s,d,c),C.push(Qi[u])):20===u?(b=ao(e,d,p),y=ao(e,c,h),C.push(to[u])):150===u?(b=1-ao(s,p,d),y=1-ao(s,h,c),C.push(to[u])):80===u?(x=ao(e,p,h),E=ao(e,d,c),C.push(Ji[u])):90===u?(x=1-ao(s,h,p),E=1-ao(s,c,d),C.push(Ji[u])):65===u?(v=1-ao(e,p,d),g=1-ao(e,h,c),C.push(eo[u])):105===u?(v=ao(s,d,p),g=ao(s,c,h),C.push(eo[u])):160===u?(x=ao(s,p,h),w=ao(e,p,h),S=ao(e,d,c),E=ao(s,d,c),C.push(Ji[u]),C.push(Qi[u])):10===u?(x=1-ao(e,h,p),w=1-ao(s,h,p),S=1-ao(s,c,d),E=1-ao(e,c,d),C.push(Ji[u]),C.push(Qi[u])):130===u?(b=1-ao(e,p,d),v=1-ao(s,p,d),g=1-ao(s,h,c),y=1-ao(e,h,c),C.push(to[u]),C.push(eo[u])):40===u?(b=ao(s,d,p),v=ao(e,d,p),g=ao(e,c,h),y=ao(s,c,h),C.push(to[u]),C.push(eo[u])):101===u?(w=ao(s,p,h),g=ao(s,c,h),C.push(Qi[u])):69===u?(w=1-ao(e,h,p),g=1-ao(e,h,c),C.push(Qi[u])):149===u?(S=ao(s,d,c),y=1-ao(s,h,c),C.push(no[u])):21===u?(S=1-ao(e,c,d),y=ao(e,c,h),C.push(no[u])):86===u?(b=1-ao(s,p,d),E=1-ao(s,c,d),C.push(to[u])):84===u?(b=ao(e,d,p),E=ao(e,d,c),C.push(to[u])):89===u?(x=1-ao(s,h,p),v=ao(s,d,p),C.push(eo[u])):81===u?(x=ao(e,p,h),v=1-ao(e,p,d),C.push(eo[u])):96===u?(x=ao(s,p,h),w=ao(e,p,h),E=ao(e,d,c),g=ao(s,c,h),C.push(Ji[u]),C.push(Qi[u])):74===u?(x=1-ao(e,h,p),w=1-ao(s,h,p),E=1-ao(s,c,d),g=1-ao(e,h,c),C.push(Ji[u]),C.push(Qi[u])):24===u?(x=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),y=ao(e,c,h),C.push(Ji[u]),C.push(eo[u])):146===u?(x=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),y=1-ao(s,h,c),C.push(Ji[u]),C.push(eo[u])):6===u?(w=1-ao(e,h,p),b=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),C.push(Qi[u]),C.push(to[u])):164===u?(w=ao(s,p,h),b=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),C.push(Qi[u]),C.push(to[u])):129===u?(v=1-ao(e,p,d),S=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c),C.push(eo[u]),C.push(no[u])):41===u?(v=ao(s,d,p),S=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h),C.push(eo[u]),C.push(no[u])):66===u?(b=1-ao(e,p,d),v=1-ao(s,p,d),E=1-ao(s,c,d),g=1-ao(e,h,c),C.push(to[u]),C.push(eo[u])):104===u?(b=ao(s,d,p),v=ao(e,d,p),E=ao(e,d,c),g=ao(s,c,h),C.push(eo[u]),C.push(io[u])):144===u?(x=ao(e,p,h),S=ao(e,d,c),E=ao(s,d,c),y=1-ao(s,h,c),C.push(Ji[u]),C.push(ro[u])):26===u?(x=1-ao(s,h,p),S=1-ao(s,c,d),E=1-ao(e,c,d),y=ao(e,c,h),C.push(Ji[u]),C.push(ro[u])):36===u?(w=ao(s,p,h),b=ao(e,d,p),g=ao(e,c,h),y=ao(s,c,h),C.push(Qi[u]),C.push(to[u])):134===u?(w=1-ao(e,h,p),b=1-ao(s,p,d),g=1-ao(s,h,c),y=1-ao(e,h,c),C.push(Qi[u]),C.push(to[u])):9===u?(x=1-ao(e,h,p),w=1-ao(s,h,p),v=ao(s,d,p),S=1-ao(e,c,d),C.push(Ji[u]),C.push(Qi[u])):161===u?(x=ao(s,p,h),w=ao(e,p,h),v=1-ao(e,p,d),S=ao(s,d,c),C.push(Ji[u]),C.push(Qi[u])):37===u?(w=ao(s,p,h),S=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h),C.push(Qi[u]),C.push(no[u])):133===u?(w=1-ao(e,h,p),S=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c),C.push(Qi[u]),C.push(no[u])):148===u?(b=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),y=1-ao(s,h,c),C.push(to[u]),C.push(ro[u])):22===u?(b=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),y=ao(e,c,h),C.push(to[u]),C.push(ro[u])):82===u?(x=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),E=1-ao(s,c,d),C.push(Ji[u]),C.push(eo[u])):88===u?(x=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),E=ao(e,d,c),C.push(Ji[u]),C.push(eo[u])):73===u?(x=1-ao(e,h,p),w=1-ao(s,h,p),v=ao(s,d,p),g=1-ao(e,h,c),C.push(Ji[u]),C.push(Qi[u])):97===u?(x=ao(s,p,h),w=ao(e,p,h),v=1-ao(e,p,d),g=ao(s,c,h),C.push(Ji[u]),C.push(Qi[u])):145===u?(x=ao(e,p,h),v=1-ao(e,p,d),S=ao(s,d,c),y=1-ao(s,h,c),C.push(Ji[u]),C.push(no[u])):25===u?(x=1-ao(s,h,p),v=ao(s,d,p),S=1-ao(e,c,d),y=ao(e,c,h),C.push(Ji[u]),C.push(no[u])):70===u?(w=1-ao(e,h,p),b=1-ao(s,p,d),E=1-ao(s,c,d),g=1-ao(e,h,c),C.push(Qi[u]),C.push(to[u])):100===u?(w=ao(s,p,h),b=ao(e,d,p),E=ao(e,d,c),g=ao(s,c,h),C.push(Qi[u]),C.push(to[u])):34===u?(0===_?(x=1-ao(e,h,p),w=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c)):(x=ao(s,p,h),w=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h)),C.push(Ji[u]),C.push(Qi[u]),C.push(no[u]),C.push(ro[u])):35===u?(4===_?(x=1-ao(e,h,p),w=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c)):(x=ao(s,p,h),w=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h)),C.push(Ji[u]),C.push(Qi[u]),C.push(eo[u]),C.push(ro[u])):136===u?(0===_?(x=ao(s,p,h),w=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h)):(x=1-ao(e,h,p),w=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c)),C.push(Ji[u]),C.push(Qi[u]),C.push(no[u]),C.push(ro[u])):153===u?(0===_?(x=ao(e,p,h),v=1-ao(e,p,d),S=1-ao(e,c,d),y=ao(e,c,h)):(x=1-ao(s,h,p),v=ao(s,d,p),S=ao(s,d,c),y=1-ao(s,h,c)),C.push(Ji[u]),C.push(eo[u])):102===u?(0===_?(w=1-ao(e,h,p),b=ao(e,d,p),E=ao(e,d,c),g=1-ao(e,h,c)):(w=ao(s,p,h),b=1-ao(s,p,d),E=1-ao(s,c,d),g=ao(s,c,h)),C.push(Qi[u]),C.push(ro[u])):155===u?(4===_?(x=ao(e,p,h),v=1-ao(e,p,d),S=1-ao(e,c,d),y=ao(e,c,h)):(x=1-ao(s,h,p),v=ao(s,d,p),S=ao(s,d,c),y=1-ao(s,h,c)),C.push(Ji[u]),C.push(no[u])):103===u?(4===_?(w=1-ao(e,h,p),b=ao(e,d,p),E=ao(e,d,c),g=1-ao(e,h,c)):(w=ao(s,p,h),b=1-ao(s,p,d),E=1-ao(s,c,d),g=ao(s,c,h)),C.push(Qi[u]),C.push(to[u])):152===u?(0===_?(x=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),y=ao(e,c,h)):(x=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),y=1-ao(s,h,c)),C.push(Ji[u]),C.push(to[u]),C.push(eo[u])):156===u?(4===_?(x=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),y=ao(e,c,h)):(x=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),y=1-ao(s,h,c)),C.push(Ji[u]),C.push(eo[u]),C.push(ro[u])):137===u?(0===_?(x=ao(s,p,h),w=ao(e,p,h),v=1-ao(e,p,d),S=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h)):(x=1-ao(e,h,p),w=1-ao(s,h,p),v=ao(s,d,p),S=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c)),C.push(Ji[u]),C.push(Qi[u]),C.push(eo[u])):139===u?(4===_?(x=ao(s,p,h),w=ao(e,p,h),v=1-ao(e,p,d),S=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h)):(x=1-ao(e,h,p),w=1-ao(s,h,p),v=ao(s,d,p),S=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c)),C.push(Ji[u]),C.push(Qi[u]),C.push(no[u])):98===u?(0===_?(x=1-ao(e,h,p),w=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),E=ao(e,d,c),g=1-ao(e,h,c)):(x=ao(s,p,h),w=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),E=1-ao(s,c,d),g=ao(s,c,h)),C.push(Ji[u]),C.push(Qi[u]),C.push(ro[u])):99===u?(4===_?(x=1-ao(e,h,p),w=1-ao(s,h,p),b=ao(s,d,p),v=ao(e,d,p),E=ao(e,d,c),g=1-ao(e,h,c)):(x=ao(s,p,h),w=ao(e,p,h),b=1-ao(e,p,d),v=1-ao(s,p,d),E=1-ao(s,c,d),g=ao(s,c,h)),C.push(Ji[u]),C.push(Qi[u]),C.push(eo[u])):38===u?(0===_?(w=1-ao(e,h,p),b=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c)):(w=ao(s,p,h),b=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h)),C.push(Qi[u]),C.push(no[u]),C.push(ro[u])):39===u?(4===_?(w=1-ao(e,h,p),b=ao(e,d,p),S=ao(e,d,c),E=ao(s,d,c),g=1-ao(s,h,c),y=1-ao(e,h,c)):(w=ao(s,p,h),b=1-ao(s,p,d),S=1-ao(s,c,d),E=1-ao(e,c,d),g=ao(e,c,h),y=ao(s,c,h)),C.push(Qi[u]),C.push(to[u]),C.push(ro[u])):85===u&&(x=1,w=0,b=1,v=0,S=0,E=1,g=0,y=1),(g<0||g>1||y<0||y>1||x<0||x>1||b<0||b>1||S<0||S>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+f+" "+c+","+h+","+p+","+d+" "+_+" "+g+" "+y+" "+x+" "+w+" "+b+" "+v+" "+S+" "+E),o.cells[a][l]={cval:u,cval_real:f,flipped:_,topleft:g,topright:y,righttop:x,rightbottom:w,bottomright:b,bottomleft:v,leftbottom:S,lefttop:E,edges:C}}}}}return o}(t,e,n);return yi.polygons?(yi.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],n=0;return t.cells.forEach(function(t,r){t.forEach(function(t,i){if(void 0!==t){var o=so[t.cval](t);"object"==typeof o&&lo(o)?"object"==typeof o[0]&&lo(o[0])?"object"==typeof o[0][0]&&lo(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(u)):(yi.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=co(t.cells[o][s]),l=null,u=s,c=o;null!==a&&i.push([a.p[0]+u,a.p[1]+c]);do{if(null===(l=ho(t.cells[c][u],a.x,a.y,a.o)))break;if(i.push([l.p[0]+u,l.p[1]+c]),u+=l.x,a=l,(c+=l.y)<0||c>=n||u<0||u>=r||void 0===t.cells[c][u]){var h=uo(t,u-=l.x,c-=l.y,l.x,l.y,l.o);if(null===h)break;h.path.forEach(function(t){i.push(t)}),u=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][u]&&t.cells[c][u].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(u)),"function"==typeof yi.successCallback&&yi.successCallback(l),l}var bi=[],xi=[],wi=[],Ei=[],Si=[],Ci=[],Ii=[],ki=[],Ti=[],Pi=[],Ai=[],Oi=[],Mi=[],Li=[],Ni=[],Di=[],Ri=[],zi=[],Fi=[],Bi=[],ji=[],Vi=[],Ui=[],$i=[];Ii[85]=Pi[85]=-1,ki[85]=Ai[85]=0,Ti[85]=Oi[85]=1,Fi[85]=Vi[85]=1,Bi[85]=Ui[85]=0,ji[85]=$i[85]=1,bi[85]=Ei[85]=0,xi[85]=Si[85]=-1,wi[85]=Ni[85]=0,Di[85]=Mi[85]=0,Ri[85]=Li[85]=1,Ci[85]=zi[85]=1,Vi[1]=Vi[169]=0,Ui[1]=Ui[169]=-1,$i[1]=$i[169]=0,Mi[1]=Mi[169]=-1,Li[1]=Li[169]=0,Ni[1]=Ni[169]=0,Pi[4]=Pi[166]=0,Ai[4]=Ai[166]=-1,Oi[4]=Oi[166]=1,Di[4]=Di[166]=1,Ri[4]=Ri[166]=0,zi[4]=zi[166]=0,Ii[16]=Ii[154]=0,ki[16]=ki[154]=1,Ti[16]=Ti[154]=1,Ei[16]=Ei[154]=1,Si[16]=Si[154]=0,Ci[16]=Ci[154]=1,Fi[64]=Fi[106]=0,Bi[64]=Bi[106]=1,ji[64]=ji[106]=0,bi[64]=bi[106]=-1,xi[64]=xi[106]=0,wi[64]=wi[106]=1,Fi[2]=Fi[168]=0,Bi[2]=Bi[168]=-1,ji[2]=ji[168]=1,Vi[2]=Vi[168]=0,Ui[2]=Ui[168]=-1,$i[2]=$i[168]=0,Mi[2]=Mi[168]=-1,Li[2]=Li[168]=0,Ni[2]=Ni[168]=0,Di[2]=Di[168]=-1,Ri[2]=Ri[168]=0,zi[2]=zi[168]=1,Ii[8]=Ii[162]=0,ki[8]=ki[162]=-1,Ti[8]=Ti[162]=0,Pi[8]=Pi[162]=0,Ai[8]=Ai[162]=-1,Oi[8]=Oi[162]=1,Mi[8]=Mi[162]=1,Li[8]=Li[162]=0,Ni[8]=Ni[162]=1,Di[8]=Di[162]=1,Ri[8]=Ri[162]=0,zi[8]=zi[162]=0,Ii[32]=Ii[138]=0,ki[32]=ki[138]=1,Ti[32]=Ti[138]=1,Pi[32]=Pi[138]=0,Ai[32]=Ai[138]=1,Oi[32]=Oi[138]=0,bi[32]=bi[138]=1,xi[32]=xi[138]=0,wi[32]=wi[138]=0,Ei[32]=Ei[138]=1,Si[32]=Si[138]=0,Ci[32]=Ci[138]=1,Vi[128]=Vi[42]=0,Ui[128]=Ui[42]=1,$i[128]=$i[42]=1,Fi[128]=Fi[42]=0,Bi[128]=Bi[42]=1,ji[128]=ji[42]=0,bi[128]=bi[42]=-1,xi[128]=xi[42]=0,wi[128]=wi[42]=1,Ei[128]=Ei[42]=-1,Si[128]=Si[42]=0,Ci[128]=Ci[42]=0,Pi[5]=Pi[165]=-1,Ai[5]=Ai[165]=0,Oi[5]=Oi[165]=0,Vi[5]=Vi[165]=1,Ui[5]=Ui[165]=0,$i[5]=$i[165]=0,Di[20]=Di[150]=0,Ri[20]=Ri[150]=1,zi[20]=zi[150]=1,Ei[20]=Ei[150]=0,Si[20]=Si[150]=-1,Ci[20]=Ci[150]=1,Ii[80]=Ii[90]=-1,ki[80]=ki[90]=0,Ti[80]=Ti[90]=1,Fi[80]=Fi[90]=1,Bi[80]=Bi[90]=0,ji[80]=ji[90]=1,Mi[65]=Mi[105]=0,Li[65]=Li[105]=1,Ni[65]=Ni[105]=0,bi[65]=bi[105]=0,xi[65]=xi[105]=-1,wi[65]=wi[105]=0,Ii[160]=Ii[10]=-1,ki[160]=ki[10]=0,Ti[160]=Ti[10]=1,Pi[160]=Pi[10]=-1,Ai[160]=Ai[10]=0,Oi[160]=Oi[10]=0,Vi[160]=Vi[10]=1,Ui[160]=Ui[10]=0,$i[160]=$i[10]=0,Fi[160]=Fi[10]=1,Bi[160]=Bi[10]=0,ji[160]=ji[10]=1,Di[130]=Di[40]=0,Ri[130]=Ri[40]=1,zi[130]=zi[40]=1,Mi[130]=Mi[40]=0,Li[130]=Li[40]=1,Ni[130]=Ni[40]=0,bi[130]=bi[40]=0,xi[130]=xi[40]=-1,wi[130]=wi[40]=0,Ei[130]=Ei[40]=0,Si[130]=Si[40]=-1,Ci[130]=Ci[40]=1,Pi[37]=Pi[133]=0,Ai[37]=Ai[133]=1,Oi[37]=Oi[133]=1,Vi[37]=Vi[133]=0,Ui[37]=Ui[133]=1,$i[37]=$i[133]=0,bi[37]=bi[133]=-1,xi[37]=xi[133]=0,wi[37]=wi[133]=0,Ei[37]=Ei[133]=1,Si[37]=Si[133]=0,Ci[37]=Ci[133]=0,Di[148]=Di[22]=-1,Ri[148]=Ri[22]=0,zi[148]=zi[22]=0,Vi[148]=Vi[22]=0,Ui[148]=Ui[22]=-1,$i[148]=$i[22]=1,Fi[148]=Fi[22]=0,Bi[148]=Bi[22]=1,ji[148]=ji[22]=1,Ei[148]=Ei[22]=-1,Si[148]=Si[22]=0,Ci[148]=Ci[22]=1,Ii[82]=Ii[88]=0,ki[82]=ki[88]=-1,Ti[82]=Ti[88]=1,Di[82]=Di[88]=1,Ri[82]=Ri[88]=0,zi[82]=zi[88]=1,Mi[82]=Mi[88]=-1,Li[82]=Li[88]=0,Ni[82]=Ni[88]=1,Fi[82]=Fi[88]=0,Bi[82]=Bi[88]=-1,ji[82]=ji[88]=0,Ii[73]=Ii[97]=0,ki[73]=ki[97]=1,Ti[73]=Ti[97]=0,Pi[73]=Pi[97]=0,Ai[73]=Ai[97]=-1,Oi[73]=Oi[97]=0,Mi[73]=Mi[97]=1,Li[73]=Li[97]=0,Ni[73]=Ni[97]=0,bi[73]=bi[97]=1,xi[73]=xi[97]=0,wi[73]=wi[97]=1,Ii[145]=Ii[25]=0,ki[145]=ki[25]=-1,Ti[145]=Ti[25]=0,Mi[145]=Mi[25]=1,Li[145]=Li[25]=0,Ni[145]=Ni[25]=1,Vi[145]=Vi[25]=0,Ui[145]=Ui[25]=1,$i[145]=$i[25]=1,Ei[145]=Ei[25]=-1,Si[145]=Si[25]=0,Ci[145]=Ci[25]=0,Pi[70]=Pi[100]=0,Ai[70]=Ai[100]=1,Oi[70]=Oi[100]=0,Di[70]=Di[100]=-1,Ri[70]=Ri[100]=0,zi[70]=zi[100]=1,Fi[70]=Fi[100]=0,Bi[70]=Bi[100]=-1,ji[70]=ji[100]=1,bi[70]=bi[100]=1,xi[70]=xi[100]=0,wi[70]=wi[100]=0,Pi[101]=Pi[69]=0,Ai[101]=Ai[69]=1,Oi[101]=Oi[69]=0,bi[101]=bi[69]=1,xi[101]=xi[69]=0,wi[101]=wi[69]=0,Vi[149]=Vi[21]=0,Ui[149]=Ui[21]=1,$i[149]=$i[21]=1,Ei[149]=Ei[21]=-1,Si[149]=Si[21]=0,Ci[149]=Ci[21]=0,Di[86]=Di[84]=-1,Ri[86]=Ri[84]=0,zi[86]=zi[84]=1,Fi[86]=Fi[84]=0,Bi[86]=Bi[84]=-1,ji[86]=ji[84]=1,Ii[89]=Ii[81]=0,ki[89]=ki[81]=-1,Ti[89]=Ti[81]=0,Mi[89]=Mi[81]=1,Li[89]=Li[81]=0,Ni[89]=Ni[81]=1,Ii[96]=Ii[74]=0,ki[96]=ki[74]=1,Ti[96]=Ti[74]=0,Pi[96]=Pi[74]=-1,Ai[96]=Ai[74]=0,Oi[96]=Oi[74]=1,Fi[96]=Fi[74]=1,Bi[96]=Bi[74]=0,ji[96]=ji[74]=0,bi[96]=bi[74]=1,xi[96]=xi[74]=0,wi[96]=wi[74]=1,Ii[24]=Ii[146]=0,ki[24]=ki[146]=-1,Ti[24]=Ti[146]=1,Di[24]=Di[146]=1,Ri[24]=Ri[146]=0,zi[24]=zi[146]=1,Mi[24]=Mi[146]=0,Li[24]=Li[146]=1,Ni[24]=Ni[146]=1,Ei[24]=Ei[146]=0,Si[24]=Si[146]=-1,Ci[24]=Ci[146]=0,Pi[6]=Pi[164]=-1,Ai[6]=Ai[164]=0,Oi[6]=Oi[164]=1,Di[6]=Di[164]=-1,Ri[6]=Ri[164]=0,zi[6]=zi[164]=0,Vi[6]=Vi[164]=0,Ui[6]=Ui[164]=-1,$i[6]=$i[164]=1,Fi[6]=Fi[164]=1,Bi[6]=Bi[164]=0,ji[6]=ji[164]=0,Mi[129]=Mi[41]=0,Li[129]=Li[41]=1,Ni[129]=Ni[41]=1,Vi[129]=Vi[41]=0,Ui[129]=Ui[41]=1,$i[129]=$i[41]=0,bi[129]=bi[41]=-1,xi[129]=xi[41]=0,wi[129]=wi[41]=0,Ei[129]=Ei[41]=0,Si[129]=Si[41]=-1,Ci[129]=Ci[41]=0,Di[66]=Di[104]=0,Ri[66]=Ri[104]=1,zi[66]=zi[104]=0,Mi[66]=Mi[104]=-1,Li[66]=Li[104]=0,Ni[66]=Ni[104]=1,Fi[66]=Fi[104]=0,Bi[66]=Bi[104]=-1,ji[66]=ji[104]=0,bi[66]=bi[104]=0,xi[66]=xi[104]=-1,wi[66]=wi[104]=1,Ii[144]=Ii[26]=-1,ki[144]=ki[26]=0,Ti[144]=Ti[26]=0,Vi[144]=Vi[26]=1,Ui[144]=Ui[26]=0,$i[144]=$i[26]=1,Fi[144]=Fi[26]=0,Bi[144]=Bi[26]=1,ji[144]=ji[26]=1,Ei[144]=Ei[26]=-1,Si[144]=Si[26]=0,Ci[144]=Ci[26]=1,Pi[36]=Pi[134]=0,Ai[36]=Ai[134]=1,Oi[36]=Oi[134]=1,Di[36]=Di[134]=0,Ri[36]=Ri[134]=1,zi[36]=zi[134]=0,bi[36]=bi[134]=0,xi[36]=xi[134]=-1,wi[36]=wi[134]=1,Ei[36]=Ei[134]=1,Si[36]=Si[134]=0,Ci[36]=Ci[134]=0,Ii[9]=Ii[161]=-1,ki[9]=ki[161]=0,Ti[9]=Ti[161]=0,Pi[9]=Pi[161]=0,Ai[9]=Ai[161]=-1,Oi[9]=Oi[161]=0,Mi[9]=Mi[161]=1,Li[9]=Li[161]=0,Ni[9]=Ni[161]=0,Vi[9]=Vi[161]=1,Ui[9]=Ui[161]=0,$i[9]=$i[161]=1,Ii[136]=0,ki[136]=1,Ti[136]=1,Pi[136]=0,Ai[136]=1,Oi[136]=0,Di[136]=-1,Ri[136]=0,zi[136]=1,Mi[136]=-1,Li[136]=0,Ni[136]=0,Vi[136]=0,Ui[136]=-1,$i[136]=0,Fi[136]=0,Bi[136]=-1,ji[136]=1,bi[136]=1,xi[136]=0,wi[136]=0,Ei[136]=1,Si[136]=0,Ci[136]=1,Ii[34]=0,ki[34]=-1,Ti[34]=0,Pi[34]=0,Ai[34]=-1,Oi[34]=1,Di[34]=1,Ri[34]=0,zi[34]=0,Mi[34]=1,Li[34]=0,Ni[34]=1,Vi[34]=0,Ui[34]=1,$i[34]=1,Fi[34]=0,Bi[34]=1,ji[34]=0,bi[34]=-1,xi[34]=0,wi[34]=1,Ei[34]=-1,Si[34]=0,Ci[34]=0,Ii[35]=0,ki[35]=1,Ti[35]=1,Pi[35]=0,Ai[35]=-1,Oi[35]=1,Di[35]=1,Ri[35]=0,zi[35]=0,Mi[35]=-1,Li[35]=0,Ni[35]=0,Vi[35]=0,Ui[35]=-1,$i[35]=0,Fi[35]=0,Bi[35]=1,ji[35]=0,bi[35]=-1,xi[35]=0,wi[35]=1,Ei[35]=1,Si[35]=0,Ci[35]=1,Ii[153]=0,ki[153]=1,Ti[153]=1,Mi[153]=-1,Li[153]=0,Ni[153]=0,Vi[153]=0,Ui[153]=-1,$i[153]=0,Ei[153]=1,Si[153]=0,Ci[153]=1,Pi[102]=0,Ai[102]=-1,Oi[102]=1,Di[102]=1,Ri[102]=0,zi[102]=0,Fi[102]=0,Bi[102]=1,ji[102]=0,bi[102]=-1,xi[102]=0,wi[102]=1,Ii[155]=0,ki[155]=-1,Ti[155]=0,Mi[155]=1,Li[155]=0,Ni[155]=1,Vi[155]=0,Ui[155]=1,$i[155]=1,Ei[155]=-1,Si[155]=0,Ci[155]=0,Pi[103]=0,Ai[103]=1,Oi[103]=0,Di[103]=-1,Ri[103]=0,zi[103]=1,Fi[103]=0,Bi[103]=-1,ji[103]=1,bi[103]=1,xi[103]=0,wi[103]=0,Ii[152]=0,ki[152]=1,Ti[152]=1,Di[152]=-1,Ri[152]=0,zi[152]=1,Mi[152]=-1,Li[152]=0,Ni[152]=0,Vi[152]=0,Ui[152]=-1,$i[152]=0,Fi[152]=0,Bi[152]=-1,ji[152]=1,Ei[152]=1,Si[152]=0,Ci[152]=1,Ii[156]=0,ki[156]=-1,Ti[156]=1,Di[156]=1,Ri[156]=0,zi[156]=1,Mi[156]=-1,Li[156]=0,Ni[156]=0,Vi[156]=0,Ui[156]=-1,$i[156]=0,Fi[156]=0,Bi[156]=1,ji[156]=1,Ei[156]=-1,Si[156]=0,Ci[156]=1,Ii[137]=0,ki[137]=1,Ti[137]=1,Pi[137]=0,Ai[137]=1,Oi[137]=0,Mi[137]=-1,Li[137]=0,Ni[137]=0,Vi[137]=0,Ui[137]=-1,$i[137]=0,bi[137]=1,xi[137]=0,wi[137]=0,Ei[137]=1,Si[137]=0,Ci[137]=1,Ii[139]=0,ki[139]=1,Ti[139]=1,Pi[139]=0,Ai[139]=-1,Oi[139]=0,Mi[139]=1,Li[139]=0,Ni[139]=0,Vi[139]=0,Ui[139]=1,$i[139]=0,bi[139]=-1,xi[139]=0,wi[139]=0,Ei[139]=1,Si[139]=0,Ci[139]=1,Ii[98]=0,ki[98]=-1,Ti[98]=0,Pi[98]=0,Ai[98]=-1,Oi[98]=1,Di[98]=1,Ri[98]=0,zi[98]=0,Mi[98]=1,Li[98]=0,Ni[98]=1,Fi[98]=0,Bi[98]=1,ji[98]=0,bi[98]=-1,xi[98]=0,wi[98]=1,Ii[99]=0,ki[99]=1,Ti[99]=0,Pi[99]=0,Ai[99]=-1,Oi[99]=1,Di[99]=1,Ri[99]=0,zi[99]=0,Mi[99]=-1,Li[99]=0,Ni[99]=1,Fi[99]=0,Bi[99]=-1,ji[99]=0,bi[99]=1,xi[99]=0,wi[99]=1,Pi[38]=0,Ai[38]=-1,Oi[38]=1,Di[38]=1,Ri[38]=0,zi[38]=0,Vi[38]=0,Ui[38]=1,$i[38]=1,Fi[38]=0,Bi[38]=1,ji[38]=0,bi[38]=-1,xi[38]=0,wi[38]=1,Ei[38]=-1,Si[38]=0,Ci[38]=0,Pi[39]=0,Ai[39]=1,Oi[39]=1,Di[39]=-1,Ri[39]=0,zi[39]=0,Vi[39]=0,Ui[39]=-1,$i[39]=1,Fi[39]=0,Bi[39]=1,ji[39]=0,bi[39]=-1,xi[39]=0,wi[39]=1,Ei[39]=1,Si[39]=0,Ci[39]=0;var qi=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Gi=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Hi=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Zi=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Wi=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Xi=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Yi=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Ki=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ji=[],Qi=[],to=[],eo=[],no=[],ro=[],io=[],oo=[];eo[1]=no[1]=18,eo[169]=no[169]=18,to[4]=Qi[4]=12,to[166]=Qi[166]=12,Ji[16]=oo[16]=4,Ji[154]=oo[154]=4,ro[64]=io[64]=22,ro[106]=io[106]=22,to[2]=ro[2]=17,eo[2]=no[2]=18,to[168]=ro[168]=17,eo[168]=no[168]=18,Ji[8]=eo[8]=9,Qi[8]=to[8]=12,Ji[162]=eo[162]=9,Qi[162]=to[162]=12,Ji[32]=oo[32]=4,Qi[32]=io[32]=1,Ji[138]=oo[138]=4,Qi[138]=io[138]=1,no[128]=oo[128]=21,ro[128]=io[128]=22,no[42]=oo[42]=21,ro[42]=io[42]=22,Qi[5]=no[5]=14,Qi[165]=no[165]=14,to[20]=oo[20]=6,to[150]=oo[150]=6,Ji[80]=ro[80]=11,Ji[90]=ro[90]=11,eo[65]=io[65]=3,eo[105]=io[105]=3,Ji[160]=ro[160]=11,Qi[160]=no[160]=14,Ji[10]=ro[10]=11,Qi[10]=no[10]=14,to[130]=oo[130]=6,eo[130]=io[130]=3,to[40]=oo[40]=6,eo[40]=io[40]=3,Qi[101]=io[101]=1,Qi[69]=io[69]=1,no[149]=oo[149]=21,no[21]=oo[21]=21,to[86]=ro[86]=17,to[84]=ro[84]=17,Ji[89]=eo[89]=9,Ji[81]=eo[81]=9,Ji[96]=io[96]=0,Qi[96]=ro[96]=15,Ji[74]=io[74]=0,Qi[74]=ro[74]=15,Ji[24]=to[24]=8,eo[24]=oo[24]=7,Ji[146]=to[146]=8,eo[146]=oo[146]=7,Qi[6]=ro[6]=15,to[6]=no[6]=16,Qi[164]=ro[164]=15,to[164]=no[164]=16,eo[129]=oo[129]=7,no[129]=io[129]=20,eo[41]=oo[41]=7,no[41]=io[41]=20,to[66]=io[66]=2,eo[66]=ro[66]=19,to[104]=io[104]=2,eo[104]=ro[104]=19,Ji[144]=no[144]=10,ro[144]=oo[144]=23,Ji[26]=no[26]=10,ro[26]=oo[26]=23,Qi[36]=oo[36]=5,to[36]=io[36]=2,Qi[134]=oo[134]=5,to[134]=io[134]=2,Ji[9]=no[9]=10,Qi[9]=eo[9]=13,Ji[161]=no[161]=10,Qi[161]=eo[161]=13,Qi[37]=oo[37]=5,no[37]=io[37]=20,Qi[133]=oo[133]=5,no[133]=io[133]=20,to[148]=no[148]=16,ro[148]=oo[148]=23,to[22]=no[22]=16,ro[22]=oo[22]=23,Ji[82]=to[82]=8,eo[82]=ro[82]=19,Ji[88]=to[88]=8,eo[88]=ro[88]=19,Ji[73]=io[73]=0,Qi[73]=eo[73]=13,Ji[97]=io[97]=0,Qi[97]=eo[97]=13,Ji[145]=eo[145]=9,no[145]=oo[145]=21,Ji[25]=eo[25]=9,no[25]=oo[25]=21,Qi[70]=io[70]=1,to[70]=ro[70]=17,Qi[100]=io[100]=1,to[100]=ro[100]=17,Ji[34]=eo[34]=9,Qi[34]=to[34]=12,no[34]=oo[34]=21,ro[34]=io[34]=22,Ji[136]=oo[136]=4,Qi[136]=io[136]=1,to[136]=ro[136]=17,eo[136]=no[136]=18,Ji[35]=oo[35]=4,Qi[35]=to[35]=12,eo[35]=no[35]=18,ro[35]=io[35]=22,Ji[153]=oo[153]=4,eo[153]=no[153]=18,Qi[102]=to[102]=12,ro[102]=io[102]=22,Ji[155]=eo[155]=9,no[155]=oo[155]=23,Qi[103]=io[103]=1,to[103]=ro[103]=17,Ji[152]=oo[152]=4,to[152]=ro[152]=17,eo[152]=no[152]=18,Ji[156]=to[156]=8,eo[156]=no[156]=18,ro[156]=oo[156]=23,Ji[137]=oo[137]=4,Qi[137]=io[137]=1,eo[137]=no[137]=18,Ji[139]=oo[139]=4,Qi[139]=eo[139]=13,no[139]=io[139]=20,Ji[98]=eo[98]=9,Qi[98]=to[98]=12,ro[98]=io[98]=22,Ji[99]=io[99]=0,Qi[99]=to[99]=12,eo[99]=ro[99]=19,Qi[38]=to[38]=12,no[38]=oo[38]=21,ro[38]=io[38]=22,Qi[39]=oo[39]=5,to[39]=no[39]=16,ro[39]=io[39]=22;var so=[];function ao(t,e,n){return(t-e)/(n-e)}function lo(t){return t.constructor.toString().indexOf("Array")>-1}function uo(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,l=e+r,u=n+i,c=[],h=!1;!h;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(a=(s=t.cells[u-=i][l-=r]).cval_real,-1===i)if(0===o)if(1&a)c.push([l,u]),r=-1,i=0,o=0;else{if(!(4&a)){c.push([l+s.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l+1,u]),r=1,i=0,o=0}else{if(!(1&a)){if(4&a){c.push([l+s.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l+s.bottomleft,u]),r=0,i=1,o=0,h=!0;break}c.push([l,u]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(16&a)){if(64&a){c.push([l+s.topleft,u+1]),r=0,i=-1,o=0,h=!0;break}c.push([l+s.topright,u+1]),r=0,i=-1,o=1,h=!0;break}c.push([l+1,u+1]),r=1,i=0,o=1}else c.push([l+1,u+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(64&a)){if(1&a){c.push([l,u+s.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([l,u+s.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([l,u+1]),r=0,i=1,o=0}else{if(!(64&a)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){c.push([l+1,u+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}else{if(!(4&a)){if(16&a){c.push([l+1,u+s.righttop]),r=-1,i=0,o=1;break}c.push([l+1,u+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}}else if(a=(s=t.cells[u][l]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])r=0,i=-1,o=1;else{if(!(1&a)){c.push([l+s.bottomright,u]),r=0,i=1,o=1,h=!0;break}c.push([l,u])}else{if(!(64&a)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])r=0,i=1,o=0;else{if(!(16&a)){c.push([l+s.topleft,u+1]),r=0,i=-1,o=0,h=!0;break}c.push([l+1,u+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l+1])r=1,i=0,o=1;else{if(!(4&a)){c.push([l+1,u+s.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([l+1,u]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l-1])r=-1,i=0,o=0;else{if(!(64&a)){c.push([l,u+s.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([l,u+1]),r=0,i=1,o=0}}if(u+=i,(l+=r)===e&&u===n)break}return{path:c,i:l,j:u,x:r,y:i,o}}function co(t){if(t.edges.length>0){var e=t.cval_real;switch(t.edges[t.edges.length-1]){case 0:return 16&e?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&e?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&e?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&e?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return 16&e?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&e?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&e?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&e?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&e?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&e?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&e?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return 64&e?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&e?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&e?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&e?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return 64&e?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&e?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return 64&e?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&e?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return 64&e?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return 64&e?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return 16&e?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return 64&e?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return 16&e?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function ho(t,e,n,r){var i,o,s,a,l,u=t.cval;switch(e){case-1:switch(r){case 0:i=Qi[u],s=Pi[u],a=Ai[u],l=Oi[u];break;default:i=Ji[u],s=Ii[u],a=ki[u],l=Ti[u]}break;case 1:switch(r){case 0:i=no[u],s=Vi[u],a=Ui[u],l=$i[u];break;default:i=ro[u],s=Fi[u],a=Bi[u],l=ji[u]}break;default:switch(n){case-1:switch(r){case 0:i=io[u],s=bi[u],a=xi[u],l=wi[u];break;default:i=oo[u],s=Ei[u],a=Si[u],l=Ci[u]}break;case 1:switch(r){case 0:i=eo[u],s=Mi[u],a=Li[u],l=Ni[u];break;default:i=to[u],s=Di[u],a=Ri[u],l=zi[u]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,i){case 0:16&u?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&u?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&u?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&u?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:16&u?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&u?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&u?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&u?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&u?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&u?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&u?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:64&u?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&u?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&u?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&u?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:64&u?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&u?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:64&u?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&u?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:64&u?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:64&u?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:16&u?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:64&u?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:16&u?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+l)),{p:[e,n],x:s,y:a,o:l}}function po(t){var e=[],n=[];t.forEach(function(t){var r=pr(u([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}function fo(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!mo(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=u([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||_o(u([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function _o(t,e){for(var n=pn(t),r=0;r<n.features.length;r++)if(!pe(n.features[r],e))return!1;return!0}function mo(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function go(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=hn(t)),!1!==i&&void 0!==i||(t=be(t)),V(t,function(t){var n=ai(r,t)+e,i=or(r,t),o=L(ui(r,i,n));t[0]=o[0],t[1]=o[1]})),t}function yo(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=be(t)),"FeatureCollection"!==t.type||o?vo(t,e,r):(G(t,function(n,i){t.features[i]=vo(n,e,r)}),t)}function vo(t,e,n){var r="Point"===B(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return M(e);var n=t.bbox?t.bbox:ot(t),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return a([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return a([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return a([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return a([o,s]);case"center":return cn(t);case void 0:case null:case"centroid":return hn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||V(t,function(t){var r=or(n,t),i=ai(n,t),o=L(ui(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t}function bo(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function xo(t,e){return t[0]*e[1]-e[0]*t[1]}function wo(t,e,n){var r=[],i=x(e,n),o=L(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=(u=t,c=o[e+1],h=i,p=Math.sqrt((u[0]-c[0])*(u[0]-c[0])+(u[1]-c[1])*(u[1]-c[1])),[[u[0]+h*(c[1]-u[1])/p,u[1]+h*(u[0]-c[0])/p],[c[0]+h*(c[1]-u[1])/p,c[1]+h*(u[0]-c[0])/p]]);if(r.push(n),e>0){var a=r[e-1],l=function(t,e){return!function(t,e){return 0===xo(bo(t),bo(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=bo(t),s=e[0],a=bo(e),l=xo(o,a);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(xo([(n=s)[0]-(r=i)[0],n[1]-r[1]],a)/l,o))}(t,e)}(n,a);!1!==l&&(a[1]=l,n[0]=l),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var u,c,h,p}),h(s,t.properties)}function Eo(t,e,n){return function(t){return(t>0)-(t<0)||+t}((e[0]-t[0])*(n[1]-e[1])-(n[0]-e[0])*(e[1]-t[1]))}function So(t,e){return e.geometry.coordinates[0].every(function(e){return pe(a(e),t)})}so[1]=so[169]=qi,so[4]=so[166]=Gi,so[16]=so[154]=Hi,so[64]=so[106]=Zi,so[168]=so[2]=Wi,so[162]=so[8]=Xi,so[138]=so[32]=Yi,so[42]=so[128]=Ki,so[5]=so[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},so[20]=so[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},so[80]=so[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},so[65]=so[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},so[160]=so[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},so[130]=so[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},so[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},so[101]=so[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},so[149]=so[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},so[86]=so[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},so[89]=so[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},so[96]=so[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},so[24]=so[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},so[6]=so[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},so[129]=so[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},so[66]=so[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},so[144]=so[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},so[36]=so[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},so[9]=so[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},so[37]=so[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},so[148]=so[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},so[82]=so[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},so[73]=so[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},so[145]=so[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},so[70]=so[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},so[34]=function(t){return[Ki(t),Xi(t)]},so[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},so[136]=function(t){return[Yi(t),Wi(t)]},so[153]=function(t){return[Hi(t),qi(t)]},so[102]=function(t){return[Gi(t),Zi(t)]},so[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},so[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},so[152]=function(t){return[Hi(t),Wi(t)]},so[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},so[137]=function(t){return[Yi(t),qi(t)]},so[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},so[98]=function(t){return[Xi(t),Zi(t)]},so[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},so[38]=function(t){return[Gi(t),Ki(t)]},so[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Co=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=Eo(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),Io=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return h([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return Eo(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),ko=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=Eo(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return _(this.edges.map(function(t){return t.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=u([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=on(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach(function(e){var o,s,l,u,c,h,p=e.getEnvelope();if(r&&(n=r.getEnvelope()),s=i,l=(o=p).geometry.coordinates.map(function(t){return t[0]}),u=o.geometry.coordinates.map(function(t){return t[1]}),c=s.geometry.coordinates.map(function(t){return t[0]}),h=s.geometry.coordinates.map(function(t){return t[1]}),(Math.max(null,l)!==Math.max(null,c)||Math.max(null,u)!==Math.max(null,h)||Math.min(null,l)!==Math.min(null,c)||Math.min(null,u)!==Math.min(null,h))&&So(p,i)){var d=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return(n=t)[0]===(r=e.from.coordinates)[0]&&n[1]===r[1];var n,r})});d&&e.inside(a(d))&&(r&&!So(n,p)||(r=e))}}),r},t.prototype.inside=function(t){return pe(t,this.toPolygon())},t}(),To=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return Y(e,function(t){R(t,"LineString","Graph::fromGeoJson"),U(t,function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e})}),n},t.prototype.getNode=function(t){var e=Co.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Co(t)),n},t.prototype.addEdge=function(t,e){var n=new Io(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,l=void 0,u=void 0;s.label===e&&(l=s),a.label===e&&(u=a),l&&u&&(u&&(r=u),l&&(r&&(r.next=l,r=void 0),n||(n=l)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}}),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new ko;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()},t}();function Po(t,e){var n=!0;return Y(t,function(t){Y(e,function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!((n=t.coordinates)[0]===(r=e.coordinates)[0]&&n[1]===r[1]);case"LineString":return!Ao(e,t);case"Polygon":return!pe(t,e)}break;case"LineString":switch(e.type){case"Point":return!Ao(t,e);case"LineString":return!function(t,e){return nr(t,e).features.length>0}(t,e);case"Polygon":return!Oo(e,t)}break;case"Polygon":switch(e.type){case"Point":return!pe(e,t);case"LineString":return!Oo(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(pe(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(pe(o[i],t))return!0;return nr(Gr(t),Gr(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)})}),n}function Ao(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(Mo(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Oo(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(pe(r[n],t))return!0;return nr(e,Gr(t)).features.length>0}function Mo(t,e,n){var r=e[0]-t[0],i=e[1]-t[1];return 0==(n[0]-t[0])*i-(n[1]-t[1])*r&&(Math.abs(r)>=Math.abs(i)?r>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:i>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function Lo(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function No(t,e){return t[0]===e[0]&&t[1]===e[1]}function Do(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Ro(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Bo(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function zo(t,e){return nr(t,Hr(e)).features.length>0}function Fo(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)pe(a(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function Bo(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];return 0==(n[0]-t[0])*o-(n[1]-t[1])*i&&(r?Math.abs(i)>=Math.abs(o)?i>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:o>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(i)>=Math.abs(o)?i>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:o>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var jo=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:$o};function Vo(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Uo(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function $o(t,e){return ri(t,e,{strict:!0})}jo.prototype.compare=function(t,e){if(t.type!==e.type||!Uo(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Vo(t),i=Vo(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},jo.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},jo.prototype.compareLine=function(t,e,n,r){if(!Uo(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},jo.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},jo.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},jo.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},jo.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},jo.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},jo.prototype.removePseudo=function(t){return t};var qo=jo;function Go(t,e){var n=F(t),r=F(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new qo({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var l=0;l<r.coordinates.length;l++){var u=n.coordinates[a],c=r.coordinates[l];if(u[0]===c[0]&&u[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":J(t,function(t){J(e,function(e){ii(t,e).features.length&&s++})});break;case"Polygon":case"MultiPolygon":J(t,function(t){J(e,function(e){nr(t,e).features.length&&s++})})}return s>0}function Ho(t,e){var n=!1;return Y(t,function(t){Y(e,function(e){if(!0===n)return!0;n=!Po(t.geometry,e.geometry)})}),n}var Zo=Ft(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Wo=Ft(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,l=0;l<c;l++)s[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)s[l]+=this.dataset[u][l];a++}}if(a>0){for(l=0;l<c;l++)s[l]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Xo=Ft(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),Yo=Ft(function(t){if(t.exports)var e=Xo;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var l=new e(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(a,l))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e];t.push([r,this._reachability[r]])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}})},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)}),Ko=Ft(function(t){t.exports&&(t.exports={DBSCAN:Zo,KMEANS:Wo,OPTICS:Yo,PriorityQueue:Xo})}),Jo=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},Qo=Jo,ts=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},es=Jo;function ns(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function rs(t,e){return w(ai(t[0],t[1]))===w(ai(e[0],e[1]))}function is(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function os(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var ss={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||ss.heuristics.manhattan,o=r.closest||!1,s=new us(function(t){return t.f}),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var l=s.pop();if(l===n)return os(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var p=u[c];if(!p.closed&&!p.isWall()){var d=l.g+p.getCost(l),f=p.visited;(!f||d<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||i(p,n),p.g=d,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),f?s.rescoreElement(p):s.push(p))}}}return o?os(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function as(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new ls(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function ls(t,e,n){this.x=t,this.y=e,this.weight=n}function us(t){this.content=[],this.scoreFunction=t}function cs(t,e){for(var n=0;n<e.features.length;n++)if(pe(t,e.features[n]))return!0;return!1}function hs(t){return function(){return t}}function ps(t){return t[0]}function ds(t){return t[1]}function fs(){this._=null}function _s(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ms(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function gs(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ys(t){for(;t.L;)t=t.L;return t}function vs(t,e,n,r){var i=[null,null],o=$s.push(i)-1;return i.left=t,i.right=e,n&&xs(i,t,e,n),r&&xs(i,e,t,r),Vs[t.index].halfedges.push(o),Vs[e.index].halfedges.push(o),i}function bs(t,e,n){var r=[e,n];return r.left=t,r}function xs(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function ws(t,e,n,r,i){var o,s=t[0],a=t[1],l=s[0],u=s[1],c=0,h=1,p=a[0]-l,d=a[1]-u;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=r-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>c&&(c=o)}if(o=i-u,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*p,u+c*d]),h<1&&(t[1]=[l+h*p,u+h*d]),!0)}}}}}function Es(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,l=t[0],u=t.left,c=t.right,h=u[0],p=u[1],d=c[0],f=c[1],_=(h+d)/2;if(f===p){if(_<e||_>=r)return;if(h>d){if(l){if(l[1]>=i)return}else l=[_,n];o=[_,i]}else{if(l){if(l[1]<n)return}else l=[_,i];o=[_,n]}}else if(a=(p+f)/2-(s=(h-d)/(f-p))*_,s<-1||s>1)if(h>d){if(l){if(l[1]>=i)return}else l=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(l){if(l[1]<n)return}else l=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<f){if(l){if(l[0]>=r)return}else l=[e,s*e+a];o=[r,s*r+a]}else{if(l){if(l[0]<e)return}else l=[r,s*r+a];o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function Ss(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Cs(t,e){return e[+(e.left!==t.site)]}function Is(t,e){return e[+(e.left===t.site)]}as.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)ss.cleanNode(this.nodes[t])},as.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)ss.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},as.prototype.markDirty=function(t){this.dirtyNodes.push(t)},as.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},as.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},ls.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},ls.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},ls.prototype.isWall=function(){return 0===this.weight},us.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e&&(i=this.scoreFunction(this.content[s]))<r&&(a=s),o<e&&this.scoreFunction(this.content[o])<(null===a?r:i)&&(a=o),null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},fs.prototype={constructor:fs,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ys(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ms(this,n),n=(t=n).U),n.C=!1,r.C=!0,gs(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(gs(this,n),n=(t=n).U),n.C=!1,r.C=!0,ms(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?ys(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,i.L=t=n.R,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ms(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,gs(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ms(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,gs(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ms(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,gs(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var ks,Ts=[];function Ps(){_s(this),this.x=this.y=this.arc=this.site=this.cy=null}function As(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],l=r[0]-s,u=r[1]-a,c=o[0]-s,h=o[1]-a,p=2*(l*h-u*c);if(!(p>=-Gs)){var d=l*l+u*u,f=c*c+h*h,_=(h*d-u*f)/p,m=(l*f-c*d)/p,g=Ts.pop()||new Ps;g.arc=t,g.site=i,g.x=_+s,g.y=(g.cy=m+a)+Math.sqrt(_*_+m*m),t.circle=g;for(var y=null,v=Us._;v;)if(g.y<v.y||g.y===v.y&&g.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}Us.insert(y,g),y||(ks=g)}}}}function Os(t){var e=t.circle;e&&(e.P||(ks=e.N),Us.remove(e),Ts.push(e),_s(e),t.circle=null)}var Ms=[];function Ls(){_s(this),this.edge=this.site=this.circle=null}function Ns(t){var e=Ms.pop()||new Ls;return e.site=t,e}function Ds(t){Os(t),js.remove(t),Ms.push(t),_s(t)}function Rs(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Ds(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<qs&&Math.abs(r-l.circle.cy)<qs;)o=l.P,a.unshift(l),Ds(l),l=o;a.unshift(l),Os(l);for(var u=s;u.circle&&Math.abs(n-u.circle.x)<qs&&Math.abs(r-u.circle.cy)<qs;)s=u.N,a.push(u),Ds(u),u=s;a.push(u),Os(u);var c,h=a.length;for(c=1;c<h;++c)xs((u=a[c]).edge,(l=a[c-1]).site,u.site,i);(u=a[h-1]).edge=vs((l=a[0]).site,u.site,null,i),As(l),As(u)}function zs(t){for(var e,n,r,i,o=t[0],s=t[1],a=js._;a;)if((r=Fs(a,s)-o)>qs)a=a.L;else{if(!((i=o-Bs(a,s))>qs)){r>-qs?(e=a.P,n=a):i>-qs?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Vs[t.index]={site:t,halfedges:[]}}(t);var l=Ns(t);if(js.insert(e,l),e||n){if(e===n)return Os(e),n=Ns(e.site),js.insert(l,n),l.edge=n.edge=vs(e.site,l.site),As(e),void As(n);if(n){Os(e),Os(n);var u=e.site,c=u[0],h=u[1],p=t[0]-c,d=t[1]-h,f=n.site,_=f[0]-c,m=f[1]-h,g=2*(p*m-d*_),y=p*p+d*d,v=_*_+m*m,b=[(m*y-d*v)/g+c,(p*v-_*y)/g+h];xs(n.edge,u,f,b),l.edge=vs(u,t,null,b),n.edge=vs(t,f,null,b),As(e),As(n)}else l.edge=vs(e.site,l.site)}}function Fs(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],l=n[1],u=l-e;if(!u)return a;var c=a-r,h=1/o-1/u,p=c/u;return h?(-p+Math.sqrt(p*p-2*h*(c*c/(-2*u)-l+u/2+i-o/2)))/h+r:(r+a)/2}function Bs(t,e){var n=t.N;if(n)return Fs(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var js,Vs,Us,$s,qs=1e-6,Gs=1e-12;function Hs(t,e){return e[1]-t[1]||e[0]-t[0]}function Zs(t,e){var n,r,i,o=t.sort(Hs).pop();for($s=[],Vs=new Array(t.length),js=new fs,Us=new fs;;)if(i=ks,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(zs(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Rs(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Vs.length;i<o;++i)if((t=Vs[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=Ss(t,$s[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,r){for(var i,o=$s.length;o--;)Es(i=$s[o],t,e,n,r)&&ws(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>qs||Math.abs(i[0][1]-i[1][1])>qs)||delete $s[o]}(s,a,l,u),function(t,e,n,r){var i,o,s,a,l,u,c,h,p,d,f,_,m=Vs.length,g=!0;for(i=0;i<m;++i)if(o=Vs[i]){for(s=o.site,a=(l=o.halfedges).length;a--;)$s[l[a]]||l.splice(a,1);for(a=0,u=l.length;a<u;)f=(d=Is(o,$s[l[a]]))[0],_=d[1],h=(c=Cs(o,$s[l[++a%u]]))[0],p=c[1],(Math.abs(f-h)>qs||Math.abs(_-p)>qs)&&(l.splice(a,0,$s.push(bs(s,d,Math.abs(f-t)<qs&&r-_>qs?[t,Math.abs(h-t)<qs?p:r]:Math.abs(_-r)<qs&&n-f>qs?[Math.abs(p-r)<qs?h:n,r]:Math.abs(f-n)<qs&&_-e>qs?[n,Math.abs(h-n)<qs?p:e]:Math.abs(_-e)<qs&&f-t>qs?[Math.abs(p-e)<qs?h:t,e]:null))-1),++u);u&&(g=!1)}if(g){var y,v,b,x=1/0;for(i=0,g=null;i<m;++i)(o=Vs[i])&&(b=(y=(s=o.site)[0]-t)*y+(v=s[1]-e)*v)<x&&(x=b,g=o);if(g){var w=[t,e],E=[t,r],S=[n,r],C=[n,e];g.halfedges.push($s.push(bs(s=g.site,w,E))-1,$s.push(bs(s,E,S))-1,$s.push(bs(s,S,C))-1,$s.push(bs(s,C,w))-1)}}for(i=0;i<m;++i)(o=Vs[i])&&(o.halfedges.length||delete Vs[i])}(s,a,l,u)}this.edges=$s,this.cells=Vs,js=Us=$s=Vs=null}function Ws(t){return(t=t.slice()).push(t[0]),u([t])}function Xs(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,l=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!T(r))throw new Error("options must be an object");if(!k(i))throw new Error("steps must be a number");if(!k(s))throw new Error("angle must be a number");var c=M(t);if("degrees"===o)var h=S(s);else e=ui(t,e,90,{units:o}),n=ui(t,n,0,{units:o}),e=M(e)[0]-c[0],n=M(n)[1]-c[1];for(var p=[],d=0;d<i;d+=1){var f=-360*d/i,_=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Ys(f),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Ys(f),2));if(f<-90&&f>=-270&&(_=-_),f<-180&&f>=-360&&(m=-m),"degrees"===o){var g=_*Math.cos(h)+m*Math.sin(h),y=m*Math.cos(h)-_*Math.sin(h);_=g,m=y}p.push([_+c[0],m+c[1]])}return p.push(p[0]),"degrees"===o?u([p],l):go(u([p],l),s,{pivot:a})}function Ys(t){var e=t*Math.PI/180;return Math.tan(e)}function Ks(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return W(t,function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!k(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&V(t,function(t){n+=t[0]*a,r+=t[1]*a,i+=a})}),a([n/i,r/i],e.properties,e)}function Js(t,e,n,r,i){var o=r.tolerance||.001,s=0,l=0,u=0,c=0;if(G(n,function(e){var n,r=null===(n=e.properties)||void 0===n?void 0:n.weight,i=null==r?1:r;if(!k(i=Number(i)))throw new Error("weight value must be a number");if(i>0){c+=1;var o=i*_e(e,t);0===o&&(o=1);var a=i/o;s+=e.geometry.coordinates[0]*a,l+=e.geometry.coordinates[1]*a,u+=a}}),c<1)throw new Error("no features to measure");var h=s/u,p=l/u;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(p-e[1])<o?a([h,p],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([h,p]),Js([h,p],t,n,r,i-1))}function Qs(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ta(t,e){var n=0,r=0;V(t,function(i,o,s,a,l){l>n&&(n=l,r=o,e.push([]));var u=t.coordinates[l][o-r+1],c=i[0],h=i[1],p=u[0],d=u[1];e[l].push([.75*c+.25*p,.75*h+.25*d]),e[l].push([.25*c+.75*p,.25*h+.75*d])},!0),e.forEach(function(t){t.push(t[0])})}function ea(t,e){var n=0,r=0,i=0;V(t,function(o,s,a,l,u){l>i&&(i=l,r=s,e.push([[]])),u>n&&(n=u,r=s,e[l].push([]));var c=t.coordinates[l][u][s-r+1],h=o[0],p=o[1],d=c[0],f=c[1];e[l][u].push([.75*h+.25*d,.75*p+.25*f]),e[l][u].push([.25*h+.75*d,.25*p+.75*f])},!0),e.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function na(t,e,n){void 0===n&&(n=2);var r=M(t),i=M(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function ra(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];G(t,function(t){a.push(hn(t))});for(var l=[],u=0;u<a.length;u++)l[u]=[];for(u=0;u<a.length;u++)for(var c=u;c<a.length;c++){u===c&&(l[u][c]=0);var h=na(a[u],a[c],r);l[u][c]=h,l[c][u]=h}for(u=0;u<a.length;u++)for(c=0;c<a.length;c++)0!==(h=l[u][c])&&(l[u][c]=i?h<=n?1:0:h<=n?Math.pow(h,o):0);if(s)for(u=0;u<a.length;u++){var p=l[u].reduce(function(t,e){return t+e},0);for(c=0;c<a.length;c++)l[u][c]=l[u][c]/p}return l}function ia(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function oa(t,e){return void 0===e&&(e={}),aa(t,"mercator",e)}function sa(t,e){return void 0===e&&(e={}),aa(t,"wgs84",e)}function aa(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&k(t[0])?t="mercator"===e?la(t):ua(t):(!0!==r&&(t=be(t)),V(t,function(t){var n="mercator"===e?la(t):ua(t);t[0]=n[0],t[1]=n[1]})),t}function la(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function ua(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}Zs.prototype={constructor:Zs,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Cs(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,l,u,c=n.site,h=-1,p=e[i[o-1]],d=p.left===c?p.right:p.left;++h<o;)s=d,d=(p=e[i[h]]).left===c?p.right:p.left,s&&d&&r<s.index&&r<d.index&&((a=c)[0]-(u=d)[0])*((l=s)[1]-a[1])-(a[0]-l[0])*(u[1]-a[1])<0&&t.push([c.data,s.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var l=t-i.site[0],u=e-i.site[1],c=l*l+u*u;do{i=o.cells[r=s],s=null,i.halfedges.forEach(function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var l=t-a[0],u=e-a[1],h=l*l+u*u;h<c&&(c=h,s=a.index)}})}while(null!==s);return o._found=r,null==n||c<=n*n?i.site:null}};var ca=Object.freeze({__proto__:null,toMercator:oa,toWgs84:sa});function ha(t){return Array.isArray(t)?ma(t):t&&t.bbox?ma(t.bbox):[360*_a(),180*_a()]}function pa(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(a(ha(e.bbox)));return d(n)}function da(t,e){void 0===e&&(e={}),null==t&&(t=1),k(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),k(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=Array.apply(null,new Array(e.num_vertices+1)).map(Math.random);o.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),o.forEach(function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])}),i[i.length-1]=i[0],i=i.map((r=ha(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(u([i]))},i=0;i<t;i++)r();return d(n)}function fa(t,e){if(void 0===e&&(e={}),!T(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!k(r)||void 0===r||r<2)&&(r=10),k(i)&&void 0!==i||(i=1e-4),k(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var l=[ha(n)],u=0;u<r-1;u++){var c=(0===u?2*Math.random()*Math.PI:Math.tan((l[u][1]-l[u-1][1])/(l[u][0]-l[u-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*i;l.push([l[u][0]+p*Math.cos(c),l[u][1]+p*Math.sin(c)])}s.push(h(l))}return d(s)}function _a(){return Math.random()-.5}function ma(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var ga=Object.freeze({__proto__:null,randomPosition:ha,randomPoint:pa,randomPolygon:da,randomLineString:fa});function ya(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return G(t,function(t){wa(t.properties,e)&&n.push(t)}),d(n)}function va(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=xa(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],l=[],u=0;u<a.length;u++)l.push(t.features[a[u]]);n(d(l),s,o)}}function ba(t,e,n,r){var i=r;return va(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function xa(t,e){var n={};return G(t,function(t,r){var i=t.properties||{};if(i.hasOwnProperty(String(e))){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}}),n}function wa(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!wa(t,e[r]))return!1;return!0}return Ea(t,e)}function Ea(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Sa(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}var Ca=Object.freeze({__proto__:null,getCluster:ya,clusterEach:va,clusterReduce:ba,createBins:xa,applyFilter:wa,propertiesContainsFilter:Ea,filterProperties:Sa}),Ia=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function ka(t,e){return t>e?1:t<e?-1:0}function Ta(t,e,n){for(var r=new Ia(null,null),i=r,o=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(e.right=(a=e.right).left,a.left=e,null===(e=a).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function Pa(t,e,n,r){var i=new Ia(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=Ta(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function Aa(t,e,n){var r=null,i=null;if(e){var o=n((e=Ta(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function Oa(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&Oa(t.left,o,!1,r,i),t.right&&Oa(t.right,o,!0,r,i)}}var Ma=function(){function t(t){void 0===t&&(t=ka),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=Pa(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new Ia(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=Ta(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=Ta(t,e,n)).key)?(null===e.left?r=e.right:(r=Ta(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Ta(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=Ta(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){return t.push(e.key)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){return t.push(e.data)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new Ia(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&Da(t,e,0,r-1,i),null===this._root)this._root=La(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new Ia(null,null),i=r,o=t,s=e;null!==o&&null!==s;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return null!==o?i.next=o:null!==s&&(i.next=s),r.next}(this.toList(),function(t,e){for(var n=new Ia(null,null),r=n,i=0;i<t.length;i++)r=r.next=new Ia(t[i],e[i]);return r.next=null,n.next}(t,e),i);this._root=Na({head:o},0,r=this._size+r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return Oa(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=Aa(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=Pa(e,n,s,r):o=Pa(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=Ta(t.key,e,n)).left=t),e)}(o,s,r)},t.prototype.split=function(t){return Aa(t,this._root,this._comparator)},t}();function La(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=new Ia(t[o],e[o]);return s.left=La(t,e,n,o),s.right=La(t,e,o+1,r),s}return null}function Na(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=Na(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=Na(t,i+1,n),s}return null}function Da(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var l=t[s];t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}Da(t,e,n,a,i),Da(t,e,a+1,r,i)}}function Ra(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fa(t,e,n){return e&&za(t.prototype,e),n&&za(t,n),t}var Ba=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},ja=function(t,e){return e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y?null:{ll:{x:t.ll.x<e.ll.x?e.ll.x:t.ll.x,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:t.ur.x<e.ur.x?t.ur.x:e.ur.x,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Va=Number.EPSILON;void 0===Va&&(Va=Math.pow(2,-52));var Ua=Va*Va,$a=function(t,e){if(-Va<t&&t<Va&&-Va<e&&e<Va)return 0;var n=t-e;return n*n<Ua*t*e?0:t<e?-1:1},qa=function(){function t(){Ra(this,t),this.reset()}return Fa(t,[{key:"reset",value:function(){this.xRounder=new Ga,this.yRounder=new Ga}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Ga=function(){function t(){Ra(this,t),this.tree=new Ma,this.round(0)}return Fa(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===$a(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===$a(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),Ha=new qa,Za=function(t,e){return t.x*e.y-t.y*e.x},Wa=function(t,e){return t.x*e.x+t.y*e.y},Xa=function(t,e,n){var r=Za({x:e.x-t.x,y:e.y-t.y},{x:n.x-t.x,y:n.y-t.y});return $a(r,0)},Ya=function(t){return Math.sqrt(Wa(t,t))},Ka=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Wa(i,r)/Ya(i)/Ya(r)},Ja=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},Qa=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},tl=function(){function t(e,n){Ra(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Fa(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:nl.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Fa(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,l,u=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=u.point,a={x:o.x-i.x,y:o.y-i.y},l={x:s.x-i.x,y:s.y-i.y},Za(l,a)/Ya(l)/Ya(a)),cosine:Ka(e.point,t.point,u.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),l=a.sine,u=a.cosine;return o>=0&&l>=0?s<u?1:s>u?-1:0:o<0&&l<0?s<u?-1:s>u?1:0:l<o?-1:l>o?1:0}}}]),t}(),el=0,nl=function(){function t(e,n,r,i){Ra(this,t),this.id=++el,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return Fa(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(a<s&&a<l)return 1;if(a>s&&a>l)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(s<a&&s<u)return-1;if(s>a&&s>u)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(i>o){var _=t.comparePoint(e.rightSE.point);if(_<0)return 1;if(_>0)return-1}if(i!==o){var m=l-s,g=i-n,y=u-a,v=o-r;if(m>g&&y<v)return 1;if(m<g&&y>v)return-1}return i>o?1:i<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Fa(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;if(t.x===e.x+(t.y-e.y)/r.y*r.x)return 0;var i=e.y+(t.x-e.x)/r.x*r.y;return t.y===i?0:t.y<i?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=ja(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=Ba(e,s)&&0===this.comparePoint(s),u=Ba(n,i)&&0===t.comparePoint(i),c=Ba(e,a)&&0===this.comparePoint(a),h=Ba(n,o)&&0===t.comparePoint(o);if(u&&l)return h&&!c?o:!h&&c?a:null;if(u)return c&&i.x===a.x&&i.y===a.y?null:i;if(l)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var p=function(t,e,n,r){if(0===e.x)return Qa(n,r,t.x);if(0===r.x)return Qa(t,e,n.x);if(0===e.y)return Ja(n,r,t.y);if(0===r.y)return Ja(t,e,n.y);var i=Za(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=Za(o,e)/i,a=Za(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}}(i,this.vector(),s,t.vector());return null===p?null:Ba(r,p)?Ha.round(p.x,p.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new tl(e,!0),o=new tl(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return tl.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),tl.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,l=r.rings.length;a<l;a++){var u=r.rings[a],c=r.windings[a],h=n.rings.indexOf(u);-1===h?(n.rings.push(u),n.windings.push(c)):n.windings[h]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],l=e.indexOf(s);-1===l?(e.push(s),n.push(a)):n[l]+=a}for(var u=[],c=[],h=0,p=e.length;h<p;h++)if(0!==n[h]){var d=e[h],f=d.poly;if(-1===c.indexOf(f))if(d.isExterior)u.push(f);else{-1===c.indexOf(f)&&c.push(f);var _=u.indexOf(d.poly);-1!==_&&u.splice(_,1)}}for(var m=0,g=u.length;m<g;m++){var y=u[m].multiPoly;-1===r.indexOf(y)&&r.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(pl.type){case"union":this._isInResult=0===t.length!=(0===e.length);break;case"intersection":var n,r;t.length<e.length?(n=t.length,r=e.length):(n=e.length,r=t.length),this._isInResult=r===pl.numMultiPolys&&n<r;break;case"xor":var i=Math.abs(t.length-e.length);this._isInResult=i%2==1;break;case"difference":var o=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=o(t)!==o(e);break;default:throw new Error("Unrecognized operation type found ".concat(pl.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=tl.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new tl(i,!0),new tl(o,!1),[r],[s])}}]),t}(),rl=function(){function t(e,n,r){if(Ra(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Ha.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=Ha.round(e[s][0],e[s][1]);l.x===o.x&&l.y===o.y||(this.segments.push(nl.fromRing(o,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),o=l)}i.x===o.x&&i.y===o.y||this.segments.push(nl.fromRing(o,i,this))}return Fa(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),il=function(){function t(e,n){if(Ra(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new rl(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new rl(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Fa(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),ol=function(){function t(e,n){if(Ra(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new il(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Fa(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),sl=function(){function t(e){Ra(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return Fa(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,l=o.rightSE,u=[a],c=a.point,h=[];s=a,u.push(a=l),a.point!==c;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var d=u[0].point,f=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var _=null,m=0,g=h.length;m<g;m++)if(h[m].point===a.point){_=m;break}if(null===_){h.push({index:u.length,point:a.point});var y=a.getLeftmostComparator(s);l=p.sort(y)[0].otherSE;break}var v=h.splice(_)[0],b=u.splice(v.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(u))}}return n}}]),Fa(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point;0!==Xa(i,t,this.events[n+1].point)&&(e.push(i),t=i)}if(1===e.length)return null;0===Xa(e[0],t,e[1])&&e.shift(),e.push(e[0]);for(var o=this.isExteriorRing()?1:-1,s=this.isExteriorRing()?0:e.length-1,a=this.isExteriorRing()?e.length:-1,l=[],u=s;u!=a;u+=o)l.push([e[u].x,e[u].y]);return l}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];tl.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),al=function(){function t(e){Ra(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Fa(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),ll=function(){function t(e){Ra(this,t),this.rings=e,this.polys=this._composePolys(e)}return Fa(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new al(i));else{var o=i.enclosingRing();o.poly||e.push(new al(o)),o.poly.addInterior(i)}}return e}}]),t}(),ul=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nl.compare;Ra(this,t),this.queue=e,this.tree=new Ma(n),this.segments=[]}return Fa(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var l=null;if(s){var u=s.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!s.isAnEndpoint(u)))for(var c=this._splitSafely(s,u),h=0,p=c.length;h<p;h++)n.push(c[h])}var d=null;if(a){var f=a.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(d=f),!a.isAnEndpoint(f)))for(var _=this._splitSafely(a,f),m=0,g=_.length;m<g;m++)n.push(_[m])}if(null!==l||null!==d){var y;y=null===l?d:null===d||tl.comparePoints(l,d)<=0?l:d,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var v=e.split(y),b=0,x=v.length;b<x;b++)n.push(v[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var w=s.getIntersection(a);if(null!==w){if(!s.isAnEndpoint(w))for(var E=this._splitSafely(s,w),S=0,C=E.length;S<C;S++)n.push(E[S]);if(!a.isAnEndpoint(w))for(var I=this._splitSafely(a,w),k=0,T=I.length;k<T;k++)n.push(I[k])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),cl="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,hl="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,pl=new(function(){function t(){Ra(this,t)}return Fa(t,[{key:"run",value:function(t,e,n){pl.type=t,Ha.reset();for(var r=[new ol(e,!0)],i=0,o=n.length;i<o;i++)r.push(new ol(n[i],!1));if(pl.numMultiPolys=r.length,"difference"===pl.type)for(var s=r[0],a=1;a<r.length;)null!==ja(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===pl.type)for(var l=0,u=r.length;l<u;l++)for(var c=r[l],h=l+1,p=r.length;h<p;h++)if(null===ja(c.bbox,r[h].bbox))return[];for(var d=new Ma(tl.compare),f=0,_=r.length;f<_;f++)for(var m=r[f].getSweepEvents(),g=0,y=m.length;g<y;g++)if(d.insert(m[g]),d.size>cl)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var v=new ul(d),b=d.size,x=d.pop();x;){var w=x.key;if(d.size===b){var E=w.segment;throw new Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(E.id," ")+"[".concat(E.leftSE.point.x,", ").concat(E.leftSE.point.y,"] -> ")+"[".concat(E.rightSE.point.x,", ").concat(E.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>cl)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(v.segments.length>hl)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var S=v.process(w),C=0,I=S.length;C<I;C++){var k=S[C];void 0===k.consumedBy&&d.insert(k)}b=d.size,x=d.pop()}Ha.reset();var T=sl.factory(v.segments);return new ll(T).getGeom()}}]),t}());"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var dl=function(){};dl.prototype.interfaces_=function(){return[]},dl.prototype.getClass=function(){return dl},dl.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var fl=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),_l=function(){},ml={MAX_VALUE:{configurable:!0}};_l.isNaN=function(t){return Number.isNaN(t)},_l.doubleToLongBits=function(t){return t},_l.longBitsToDouble=function(t){return t},_l.isInfinite=function(t){return!Number.isFinite(t)},ml.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_l,ml);var gl=function(){},yl=function(){},vl=function(){};function bl(){}var xl=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},wl={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};xl.prototype.setOrdinate=function(t,e){switch(t){case xl.X:this.x=e;break;case xl.Y:this.y=e;break;case xl.Z:this.z=e;break;default:throw new fl("Invalid ordinate index: "+t)}},xl.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!dl.equalsWithTolerance(this.x,e.x,n)&&!!dl.equalsWithTolerance(this.y,e.y,n)}},xl.prototype.getOrdinate=function(t){switch(t){case xl.X:return this.x;case xl.Y:return this.y;case xl.Z:return this.z}throw new fl("Invalid ordinate index: "+t)},xl.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_l.isNaN(this.z))&&_l.isNaN(t.z)},xl.prototype.equals=function(t){return t instanceof xl&&this.equals2D(t)},xl.prototype.equalInZ=function(t,e){return dl.equalsWithTolerance(this.z,t.z,e)},xl.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},xl.prototype.clone=function(){},xl.prototype.copy=function(){return new xl(this)},xl.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},xl.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},xl.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},xl.prototype.hashCode=function(){var t=17;return 37*(t=37*t+xl.hashCode(this.x))+xl.hashCode(this.y)},xl.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},xl.prototype.interfaces_=function(){return[gl,yl,bl]},xl.prototype.getClass=function(){return xl},xl.hashCode=function(){if(1===arguments.length){var t=_l.doubleToLongBits(arguments[0]);return Math.trunc((t^t)>>>32)}},wl.DimensionalComparator.get=function(){return El},wl.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},wl.NULL_ORDINATE.get=function(){return _l.NaN},wl.X.get=function(){return 0},wl.Y.get=function(){return 1},wl.Z.get=function(){return 2},Object.defineProperties(xl,wl);var El=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new fl("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};El.prototype.compare=function(t,e){var n=t,r=e,i=El.compare(n.x,r.x);if(0!==i)return i;var o=El.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:El.compare(n.z,r.z)},El.prototype.interfaces_=function(){return[vl]},El.prototype.getClass=function(){return El},El.compare=function(t,e){return t<e?-1:t>e?1:_l.isNaN(t)?_l.isNaN(e)?0:-1:_l.isNaN(e)?1:0};var Sl=function(){};Sl.prototype.create=function(){},Sl.prototype.interfaces_=function(){return[]},Sl.prototype.getClass=function(){return Sl};var Cl=function(){},Il={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Cl.prototype.interfaces_=function(){return[]},Cl.prototype.getClass=function(){return Cl},Cl.toLocationSymbol=function(t){switch(t){case Cl.EXTERIOR:return"e";case Cl.BOUNDARY:return"b";case Cl.INTERIOR:return"i";case Cl.NONE:return"-"}throw new fl("Unknown location value: "+t)},Il.INTERIOR.get=function(){return 0},Il.BOUNDARY.get=function(){return 1},Il.EXTERIOR.get=function(){return 2},Il.NONE.get=function(){return-1},Object.defineProperties(Cl,Il);var kl=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Tl=function(){},Pl={LOG_10:{configurable:!0}};Tl.prototype.interfaces_=function(){return[]},Tl.prototype.getClass=function(){return Tl},Tl.log10=function(t){var e=Math.log(t);return _l.isInfinite(e)||_l.isNaN(e)?e:e/Tl.LOG_10},Tl.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Tl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Tl.wrap=function(t,e){return t<0?e- -t%e:t%e},Tl.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}},Tl.average=function(t,e){return(t+e)/2},Pl.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Tl,Pl);var Al=function(t){this.str=t};Al.prototype.append=function(t){this.str+=t},Al.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Al.prototype.toString=function(t){return this.str};var Ol=function(t){this.value=t};Ol.prototype.intValue=function(){return this.value},Ol.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Ol.isNaN=function(t){return Number.isNaN(t)};var Ml=function(){};Ml.isWhitespace=function(t){return t<=32&&t>=0||127===t},Ml.toUpperCase=function(t){return t.toUpperCase()};var Ll=function t(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},Nl={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Ll.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Ll.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Ll.magnitude(n._hi),i=Ll.TEN.pow(r);(n=n.divide(i)).gt(Ll.TEN)?(n=n.divide(Ll.TEN),r+=1):n.lt(Ll.ONE)&&(n=n.multiply(Ll.TEN),r-=1);for(var o=r+1,s=new Al,a=Ll.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,s.append(h),n=n.subtract(Ll.valueOf(u)).multiply(Ll.TEN),c&&n.selfAdd(Ll.TEN);var p=!0,d=Ll.magnitude(n._hi);if(d<0&&Math.abs(d)>=a-l&&(p=!1),!p)break}return e[0]=r,s.toString()},Ll.prototype.sqr=function(){return this.multiply(this)},Ll.prototype.doubleValue=function(){return this._hi+this._lo},Ll.prototype.subtract=function(){return arguments[0]instanceof Ll?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},Ll.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Ll.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Ll.prototype.selfSubtract=function(){if(arguments[0]instanceof Ll){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Ll.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Ll.prototype.min=function(t){return this.le(t)?this:t},Ll.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Ll){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null,l=null,u=null;return u=(n=(a=Ll.SPLIT*(s=this._hi/e))-(n=a-s))*(i=(u=Ll.SPLIT*e)-(i=u-e))-(l=s*e)+n*(o=e-i)+(r=s-n)*i+r*o,u=s+(a=(this._hi-l-u+this._lo-s*arguments[1])/e),this._hi=u,this._lo=s-u+a,this}},Ll.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Ll.prototype.divide=function(){if(arguments[0]instanceof Ll){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,l=null;n=(o=this._hi/t._hi)-(e=(s=Ll.SPLIT*o)-(e=s-o)),l=e*(r=(l=Ll.SPLIT*t._hi)-(r=l-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var u=l=o+(s=(this._hi-a-l+this._lo-o*t._lo)/t._hi);return new Ll(u,o-l+s)}if("number"==typeof arguments[0]){var c=arguments[0];return _l.isNaN(c)?Ll.createNaN():Ll.copy(this).selfDivide(c,0)}},Ll.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Ll.prototype.pow=function(t){if(0===t)return Ll.valueOf(1);var e=new Ll(this),n=Ll.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Ll.prototype.ceil=function(){if(this.isNaN())return Ll.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Ll(t,e)},Ll.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},Ll.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Ll.prototype.setValue=function(){return arguments[0]instanceof Ll||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},Ll.prototype.max=function(t){return this.ge(t)?this:t},Ll.prototype.sqrt=function(){if(this.isZero())return Ll.valueOf(0);if(this.isNegative())return Ll.NaN;var t=1/Math.sqrt(this._hi),e=Ll.valueOf(this._hi*t),n=this.subtract(e.sqr())._hi*(.5*t);return e.add(n)},Ll.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Ll){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,p=null,d=null,f=null,_=null,m=null;f=(d=this._hi+l)-(_=d-this._hi),p=(h=this._lo+u)-(m=h-this._lo);var g=(c=d+(_=(f=l-_+(this._hi-f))+h))+(_=(p=u-m+(this._lo-p))+(_+(d-c))),y=_+(c-g);return this._hi=g,this._lo=y,this}},Ll.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Ll){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;n=(s=Ll.SPLIT*this._hi)-this._hi,n=s-n;var l=(s=this._hi*e)+(a=n*(i=(a=Ll.SPLIT*e)-(i=a-e))-s+n*(o=e-i)+(r=this._hi-n)*i+r*o+(this._hi*arguments[1]+this._lo*e)),u=a+(n=s-l);return this._hi=l,this._lo=u,this}},Ll.prototype.selfSqr=function(){return this.selfMultiply(this)},Ll.prototype.floor=function(){if(this.isNaN())return Ll.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Ll(t,e)},Ll.prototype.negate=function(){return this.isNaN()?this:new Ll(-this._hi,-this._lo)},Ll.prototype.clone=function(){},Ll.prototype.multiply=function(){if(arguments[0]instanceof Ll){var t=arguments[0];return t.isNaN()?Ll.createNaN():Ll.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _l.isNaN(e)?Ll.createNaN():Ll.copy(this).selfMultiply(e,0)}},Ll.prototype.isNaN=function(){return _l.isNaN(this._hi)},Ll.prototype.intValue=function(){return Math.trunc(this._hi)},Ll.prototype.toString=function(){var t=Ll.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Ll.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;return"."===n.charAt(0)?i="0"+n:r<0?i="0."+Ll.stringOfChar("0",-r)+n:-1===n.indexOf(".")&&(i=n+Ll.stringOfChar("0",r-n.length)+".0"),this.isNegative()?"-"+i:i},Ll.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=Ll.SPLIT*n)-(i=s-n)),o=(a=Ll.SPLIT*this._hi)-this._hi;var l=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new Ll(l,n-l+s)},Ll.prototype.toSciNotation=function(){if(this.isZero())return Ll.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Ll.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Ll.prototype.abs=function(){return this.isNaN()?Ll.NaN:this.isNegative()?this.negate():new Ll(this)},Ll.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Ll.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Ll.prototype.add=function(){if(arguments[0]instanceof Ll){var t=arguments[0];return Ll.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Ll.copy(this).selfAdd(e)}},Ll.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof Ll){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var e=arguments[1];this._hi=arguments[0],this._lo=e}},Ll.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Ll.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Ll.prototype.trunc=function(){return this.isNaN()?Ll.NaN:this.isPositive()?this.floor():this.ceil()},Ll.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Ll.prototype.interfaces_=function(){return[bl,gl,yl]},Ll.prototype.getClass=function(){return Ll},Ll.sqr=function(t){return Ll.valueOf(t).selfMultiply(t)},Ll.valueOf=function(){return"string"==typeof arguments[0]?Ll.parse(arguments[0]):"number"==typeof arguments[0]?new Ll(arguments[0]):void 0},Ll.sqrt=function(t){return Ll.valueOf(t).sqrt()},Ll.parse=function(t){for(var e=0,n=t.length;Ml.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Ll,s=0,a=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,Ml.isDigit(u)){var c=u-"0";o.selfMultiply(Ll.TEN),o.selfAdd(c),s++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=Ol.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=s}}var p=o,d=s-a-l;if(0===d)p=o;else if(d>0){var f=Ll.TEN.pow(d);p=o.divide(f)}else if(d<0){var _=Ll.TEN.pow(-d);p=o.multiply(_)}return r?p.negate():p},Ll.createNaN=function(){return new Ll(_l.NaN,_l.NaN)},Ll.copy=function(t){return new Ll(t)},Ll.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Ll.stringOfChar=function(t,e){for(var n=new Al,r=0;r<e;r++)n.append(t);return n.toString()},Nl.PI.get=function(){return new Ll(3.141592653589793,12246467991473532e-32)},Nl.TWO_PI.get=function(){return new Ll(6.283185307179586,24492935982947064e-32)},Nl.PI_2.get=function(){return new Ll(1.5707963267948966,6123233995736766e-32)},Nl.E.get=function(){return new Ll(2.718281828459045,14456468917292502e-32)},Nl.NaN.get=function(){return new Ll(_l.NaN,_l.NaN)},Nl.EPS.get=function(){return 123259516440783e-46},Nl.SPLIT.get=function(){return 134217729},Nl.MAX_PRINT_DIGITS.get=function(){return 32},Nl.TEN.get=function(){return Ll.valueOf(10)},Nl.ONE.get=function(){return Ll.valueOf(1)},Nl.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Nl.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Ll,Nl);var Dl=function(){},Rl={DP_SAFE_EPSILON:{configurable:!0}};Dl.prototype.interfaces_=function(){return[]},Dl.prototype.getClass=function(){return Dl},Dl.orientationIndex=function(t,e,n){var r=Dl.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Ll.valueOf(e.x).selfAdd(-t.x),o=Ll.valueOf(e.y).selfAdd(-t.y),s=Ll.valueOf(n.x).selfAdd(-e.x),a=Ll.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},Dl.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Dl.intersection=function(t,e,n,r){var i=Ll.valueOf(r.y).selfSubtract(n.y).selfMultiply(Ll.valueOf(e.x).selfSubtract(t.x)),o=Ll.valueOf(r.x).selfSubtract(n.x).selfMultiply(Ll.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=Ll.valueOf(r.x).selfSubtract(n.x).selfMultiply(Ll.valueOf(t.y).selfSubtract(n.y)),l=Ll.valueOf(r.y).selfSubtract(n.y).selfMultiply(Ll.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(l).selfDivide(s).doubleValue(),c=Ll.valueOf(t.x).selfAdd(Ll.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=Ll.valueOf(e.x).selfSubtract(t.x).selfMultiply(Ll.valueOf(t.y).selfSubtract(n.y)),p=Ll.valueOf(e.y).selfSubtract(t.y).selfMultiply(Ll.valueOf(t.x).selfSubtract(n.x)),d=h.subtract(p).selfDivide(s).doubleValue(),f=Ll.valueOf(n.y).selfAdd(Ll.valueOf(r.y).selfSubtract(n.y).selfMultiply(d)).doubleValue();return new xl(c,f)},Dl.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return Dl.signum(s);r=i+o}else{if(!(i<0))return Dl.signum(s);if(o>=0)return Dl.signum(s);r=-i-o}var a=Dl.DP_SAFE_EPSILON*r;return s>=a||-s>=a?Dl.signum(s):2},Dl.signum=function(t){return t>0?1:t<0?-1:0},Rl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Dl,Rl);var zl=function(){},Fl={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Fl.X.get=function(){return 0},Fl.Y.get=function(){return 1},Fl.Z.get=function(){return 2},Fl.M.get=function(){return 3},zl.prototype.setOrdinate=function(t,e,n){},zl.prototype.size=function(){},zl.prototype.getOrdinate=function(t,e){},zl.prototype.getCoordinate=function(){},zl.prototype.getCoordinateCopy=function(t){},zl.prototype.getDimension=function(){},zl.prototype.getX=function(t){},zl.prototype.clone=function(){},zl.prototype.expandEnvelope=function(t){},zl.prototype.copy=function(){},zl.prototype.getY=function(t){},zl.prototype.toCoordinateArray=function(){},zl.prototype.interfaces_=function(){return[yl]},zl.prototype.getClass=function(){return zl},Object.defineProperties(zl,Fl);var Bl=function(){},jl=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bl),Vl=function(){};Vl.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Vl.getProperty=function(t){return{"line.separator":"\n"}[t]};var Ul=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[1];this.x=arguments[0],this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],i=arguments[1];this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y}else if(arguments[0]instanceof xl&&arguments[1]instanceof xl){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[1],l=arguments[2];this.x=arguments[0],this.y=a,this.w=l}else if(4===arguments.length){var u=arguments[0],c=arguments[1],h=arguments[2],p=arguments[3],d=u.y-c.y,f=c.x-u.x,_=u.x*c.y-c.x*u.y,m=h.y-p.y,g=p.x-h.x,y=h.x*p.y-p.x*h.y;this.x=f*y-g*_,this.y=m*_-d*y,this.w=d*g-m*f}};Ul.prototype.getY=function(){var t=this.y/this.w;if(_l.isNaN(t)||_l.isInfinite(t))throw new jl;return t},Ul.prototype.getX=function(){var t=this.x/this.w;if(_l.isNaN(t)||_l.isInfinite(t))throw new jl;return t},Ul.prototype.getCoordinate=function(){var t=new xl;return t.x=this.getX(),t.y=this.getY(),t},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-a*o,h=(o*u-l*s)/c,p=(a*s-i*u)/c;if(_l.isNaN(h)||_l.isInfinite(h)||_l.isNaN(p)||_l.isInfinite(p))throw new jl;return new xl(h,p)};var $l=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof xl){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},ql={serialVersionUID:{configurable:!0}};$l.prototype.getArea=function(){return this.getWidth()*this.getHeight()},$l.prototype.equals=function(t){if(!(t instanceof $l))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},$l.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new $l:new $l(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},$l.prototype.isNull=function(){return this._maxx<this._minx},$l.prototype.getMaxX=function(){return this._maxx},$l.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof $l){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},$l.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof $l){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof xl){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},$l.prototype.getMinY=function(){return this._miny},$l.prototype.getMinX=function(){return this._minx},$l.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof $l){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},$l.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},$l.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},$l.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},$l.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},$l.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},$l.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},$l.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},$l.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},$l.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},$l.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof $l)return this.covers(arguments[0]);if(arguments[0]instanceof xl)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},$l.prototype.centre=function(){return this.isNull()?null:new xl((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},$l.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof $l){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},$l.prototype.getMaxY=function(){return this._maxy},$l.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},$l.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+xl.hashCode(this._minx))+xl.hashCode(this._maxx))+xl.hashCode(this._miny))+xl.hashCode(this._maxy)},$l.prototype.interfaces_=function(){return[gl,bl]},$l.prototype.getClass=function(){return $l},$l.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>l||c<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),u>l||c<a))}},ql.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties($l,ql);var Gl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Hl=function(t){this.geometryFactory=t||new Oc};Hl.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var r=Gl.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=Gl.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),Wl[n]&&(e=Wl[n].apply(this,[r[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Hl.prototype.write=function(t){return this.extractGeometry(t)},Hl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Zl[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Zl[e].apply(this,[t])+")"};var Zl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Zl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Zl.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Zl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Zl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Zl.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Zl.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Zl.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Zl.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Wl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Gl.spaces);return this.geometryFactory.createPoint(new xl(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Gl.trimParens,"$1"),r.push(Wl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Gl.spaces),r.push(new xl(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Gl.spaces),r.push(new xl(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Gl.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Gl.trimParens,"$1"),r.push(Wl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Gl.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(Gl.trimParens,"$1"),n=Wl.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Gl.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Gl.trimParens,"$1"),r.push(Wl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Xl=function(t){this.parser=new Hl(t)};Xl.prototype.write=function(t){return this.parser.write(t)},Xl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Yl=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Kl=function(t){function e(){t.call(this),0===arguments.length?t.call(this):1===arguments.length&&t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yl),Jl=function(){};Jl.prototype.interfaces_=function(){return[]},Jl.prototype.getClass=function(){return Jl},Jl.shouldNeverReachHere=function(){if(0===arguments.length)Jl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Kl("Should never reach here"+(null!==t?": "+t:""))}},Jl.isTrue=function(){var t;if(1===arguments.length)Jl.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Kl:new Kl(t)},Jl.equals=function(){var t,e,n;if(2===arguments.length)Jl.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new Kl("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Ql=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new xl,this._intPt[1]=new xl,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},tu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Ql.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Ql.prototype.getTopologySummary=function(){var t=new Al;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Ql.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},Ql.prototype.getIntersectionNum=function(){return this._result},Ql.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Ql.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Ql.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ql.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},Ql.prototype.getIntersection=function(t){return this._intPt[t]},Ql.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Ql.prototype.hasIntersection=function(){return this._result!==Ql.NO_INTERSECTION},Ql.prototype.getEdgeDistance=function(t,e){return Ql.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Ql.prototype.isCollinear=function(){return this._result===Ql.COLLINEAR_INTERSECTION},Ql.prototype.toString=function(){return Xl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Xl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Ql.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Ql.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Ql.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Ql.prototype.interfaces_=function(){return[]},Ql.prototype.getClass=function(){return Ql},Ql.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return Jl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Ql.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return Jl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},tu.DONT_INTERSECT.get=function(){return 0},tu.DO_INTERSECT.get=function(){return 1},tu.COLLINEAR.get=function(){return 2},tu.NO_INTERSECTION.get=function(){return 0},tu.POINT_INTERSECTION.get=function(){return 1},tu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Ql,tu);var eu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new $l(this._inputLines[0][0],this._inputLines[0][1]),n=new $l(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,$l.intersects(n,r,e)&&0===iu.orientationIndex(n,r,e)&&0===iu.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Ul.intersection(t,n,r,i)}catch(s){if(!(s instanceof jl))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new xl(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Dl.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Vl.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Vl.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new xl(t),o=new xl(e),s=new xl(n),a=new xl(r),l=new xl;this.normalizeToEnvCentre(i,o,s,a,l);var u=this.safeHCoordinateIntersection(i,o,s,a);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=$l.intersects(e,n,r),s=$l.intersects(e,n,i),a=$l.intersects(r,i,e),l=$l.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,d=((s>c?s:c)+(l<p?l:p))/2;i.x=((o>u?o:u)+(a<h?a:h))/2,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!$l.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=iu.orientationIndex(e,n,r),s=iu.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=iu.orientationIndex(r,i,e),l=iu.orientationIndex(r,i,n);return a>0&&l>0||a<0&&l<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===l?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===l?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new xl(r):0===s?this._intPt[0]=new xl(i):0===a?this._intPt[0]=new xl(e):0===l&&(this._intPt[0]=new xl(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=iu.distancePointLine(t,n,r),s=iu.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=iu.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=iu.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(Ql),nu=function(){};nu.prototype.interfaces_=function(){return[]},nu.prototype.getClass=function(){return nu},nu.orientationIndex=function(t,e,n){return nu.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},nu.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var ru=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};ru.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.y-this._p.y,o=e.y-this._p.y,s=nu.signOfDet2x2(t.x-this._p.x,i,e.x-this._p.x,o);if(0===s)return this._isPointOnSegment=!0,null;o<i&&(s=-s),s>0&&this._crossingCount++}},ru.prototype.isPointInPolygon=function(){return this.getLocation()!==Cl.EXTERIOR},ru.prototype.getLocation=function(){return this._isPointOnSegment?Cl.BOUNDARY:this._crossingCount%2==1?Cl.INTERIOR:Cl.EXTERIOR},ru.prototype.isOnSegment=function(){return this._isPointOnSegment},ru.prototype.interfaces_=function(){return[]},ru.prototype.getClass=function(){return ru},ru.locatePointInRing=function(){if(arguments[0]instanceof xl&&kl(arguments[1],zl)){for(var t=arguments[1],e=new ru(arguments[0]),n=new xl,r=new xl,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof xl&&arguments[1]instanceof Array){for(var o=arguments[1],s=new ru(arguments[0]),a=1;a<o.length;a++)if(s.countSegment(o[a],o[a-1]),s.isOnSegment())return s.getLocation();return s.getLocation()}};var iu=function(){},ou={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};iu.prototype.interfaces_=function(){return[]},iu.prototype.getClass=function(){return iu},iu.orientationIndex=function(t,e,n){return Dl.orientationIndex(t,e,n)},iu.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++)e+=(t[r].x-n)*(t[r-1].y-t[r+1].y);return e/2}if(kl(arguments[0],zl)){var i=arguments[0],o=i.size();if(o<3)return 0;var s=new xl,a=new xl,l=new xl;i.getCoordinate(0,a),i.getCoordinate(1,l);var u=a.x;l.x-=u;for(var c=0,h=1;h<o-1;h++)s.y=a.y,a.x=l.x,a.y=l.y,i.getCoordinate(h+1,l),l.x-=u,c+=a.x*(s.y-l.y);return c/2}},iu.distanceLineLine=function(t,e,n,r){if(t.equals(e))return iu.distancePointLine(t,n,r);if(n.equals(r))return iu.distancePointLine(r,t,e);var i=!1;if($l.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,a=((t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y))/o;(a<0||a>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?Tl.min(iu.distancePointLine(t,n,r),iu.distancePointLine(e,n,r),iu.distancePointLine(n,t,e),iu.distancePointLine(r,t,e)):0},iu.isPointInRing=function(t,e){return iu.locatePointInRing(t,e)!==Cl.EXTERIOR},iu.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new xl;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,l=r.y,u=a-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=a,o=l}return n},iu.isCCW=function(t){var e=t.length-1;if(e<3)throw new fl("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var l=t[s],u=t[a];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=iu.computeOrientation(l,n,u);return 0===c?l.x>u.x:c>0},iu.locatePointInRing=function(t,e){return ru.locatePointInRing(t,e)},iu.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r)*Math.sqrt(r)},iu.computeOrientation=function(t,e,n){return iu.orientationIndex(t,e,n)},iu.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new fl("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=iu.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var l=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),u=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/l;return u<=0?o.distance(s):u>=1?o.distance(a):Math.abs(((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/l)*Math.sqrt(l)}},iu.isOnLine=function(t,e){for(var n=new eu,r=1;r<e.length;r++)if(n.computeIntersection(t,e[r-1],e[r]),n.hasIntersection())return!0;return!1},ou.CLOCKWISE.get=function(){return-1},ou.RIGHT.get=function(){return iu.CLOCKWISE},ou.COUNTERCLOCKWISE.get=function(){return 1},ou.LEFT.get=function(){return iu.COUNTERCLOCKWISE},ou.COLLINEAR.get=function(){return 0},ou.STRAIGHT.get=function(){return iu.COLLINEAR},Object.defineProperties(iu,ou);var su=function(){};su.prototype.filter=function(t){},su.prototype.interfaces_=function(){return[]},su.prototype.getClass=function(){return su};var au=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},lu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};au.prototype.isGeometryCollection=function(){return this.getSortIndex()===au.SORTINDEX_GEOMETRYCOLLECTION},au.prototype.getFactory=function(){return this._factory},au.prototype.getGeometryN=function(t){return this},au.prototype.getArea=function(){return 0},au.prototype.isRectangle=function(){return!1},au.prototype.equals=function(){if(arguments[0]instanceof au){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];return e instanceof au&&this.equalsExact(e)}},au.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},au.prototype.geometryChanged=function(){this.apply(au.geometryChangedFilter)},au.prototype.geometryChangedAction=function(){this._envelope=null},au.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},au.prototype.getLength=function(){return 0},au.prototype.getNumGeometries=function(){return 1},au.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},au.prototype.getUserData=function(){return this._userData},au.prototype.getSRID=function(){return this._SRID},au.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},au.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===au.SORTINDEX_GEOMETRYCOLLECTION)throw new fl("This method does not support GeometryCollection arguments")},au.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},au.prototype.norm=function(){var t=this.copy();return t.normalize(),t},au.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},au.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new $l(this._envelope)},au.prototype.setSRID=function(t){this._SRID=t},au.prototype.setUserData=function(t){this._userData=t},au.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},au.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},au.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===au.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===au.SORTINDEX_MULTIPOINT||this.getSortIndex()===au.SORTINDEX_MULTILINESTRING||this.getSortIndex()===au.SORTINDEX_MULTIPOLYGON},au.prototype.interfaces_=function(){return[yl,gl,bl]},au.prototype.getClass=function(){return au},au.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},au.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},lu.serialVersionUID.get=function(){return 0x799ea46522854c00},lu.SORTINDEX_POINT.get=function(){return 0},lu.SORTINDEX_MULTIPOINT.get=function(){return 1},lu.SORTINDEX_LINESTRING.get=function(){return 2},lu.SORTINDEX_LINEARRING.get=function(){return 3},lu.SORTINDEX_MULTILINESTRING.get=function(){return 4},lu.SORTINDEX_POLYGON.get=function(){return 5},lu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},lu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},lu.geometryChangedFilter.get=function(){return uu},Object.defineProperties(au,lu);var uu=function(){};uu.interfaces_=function(){return[su]},uu.filter=function(t){t.geometryChangedAction()};var cu=function(){};cu.prototype.filter=function(t){},cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu};var hu=function(){},pu={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};hu.prototype.isInBoundary=function(t){},hu.prototype.interfaces_=function(){return[]},hu.prototype.getClass=function(){return hu},pu.Mod2BoundaryNodeRule.get=function(){return du},pu.EndPointBoundaryNodeRule.get=function(){return fu},pu.MultiValentEndPointBoundaryNodeRule.get=function(){return _u},pu.MonoValentEndPointBoundaryNodeRule.get=function(){return mu},pu.MOD2_BOUNDARY_RULE.get=function(){return new du},pu.ENDPOINT_BOUNDARY_RULE.get=function(){return new fu},pu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _u},pu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mu},pu.OGC_SFS_BOUNDARY_RULE.get=function(){return hu.MOD2_BOUNDARY_RULE},Object.defineProperties(hu,pu);var du=function(){};du.prototype.isInBoundary=function(t){return t%2==1},du.prototype.interfaces_=function(){return[hu]},du.prototype.getClass=function(){return du};var fu=function(){};fu.prototype.isInBoundary=function(t){return t>0},fu.prototype.interfaces_=function(){return[hu]},fu.prototype.getClass=function(){return fu};var _u=function(){};_u.prototype.isInBoundary=function(t){return t>1},_u.prototype.interfaces_=function(){return[hu]},_u.prototype.getClass=function(){return _u};var mu=function(){};mu.prototype.isInBoundary=function(t){return 1===t},mu.prototype.interfaces_=function(){return[hu]},mu.prototype.getClass=function(){return mu};var gu=function(){};function yu(t){this.message=t||""}gu.prototype.add=function(){},gu.prototype.addAll=function(){},gu.prototype.isEmpty=function(){},gu.prototype.iterator=function(){},gu.prototype.size=function(){},gu.prototype.toArray=function(){},gu.prototype.remove=function(){},(yu.prototype=new Error).name="IndexOutOfBoundsException";var vu=function(){};vu.prototype.hasNext=function(){},vu.prototype.next=function(){},vu.prototype.remove=function(){};var bu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(gu);function xu(t){this.message=t||""}(xu.prototype=new Error).name="NoSuchElementException";var wu=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof gu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,gu]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Eu(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new yu;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(bu),Eu=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new xu;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(vu),Su=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[1],r=!1,i=arguments[0].iterator();i.hasNext();)e.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length)t.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof xl&&"boolean"==typeof arguments[1]){var n=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(n))return null;t.prototype.add.call(this,n)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];if(arguments[2])for(var o=0;o<r.length;o++)e.add(r[o],i);else for(var s=r.length-1;s>=0;s--)e.add(r[s],i);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof xl){var a=arguments[0],l=arguments[1];if(!arguments[2]){var u=this.size();if(u>0){if(a>0&&this.get(a-1).equals2D(l))return null;if(a<u&&this.get(a).equals2D(l))return null}}t.prototype.add.call(this,a,l)}}else if(4===arguments.length){var c=arguments[0],h=arguments[1],p=arguments[2],d=arguments[3],f=1;p>d&&(f=-1);for(var _=p;_!==d;_+=f)e.add(c[_],h);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new xl(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(wu),Cu=function(){},Iu={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Iu.ForwardComparator.get=function(){return ku},Iu.BidirectionalComparator.get=function(){return Tu},Iu.coordArrayType.get=function(){return new Array(0).fill(null)},Cu.prototype.interfaces_=function(){return[]},Cu.prototype.getClass=function(){return Cu},Cu.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Cu.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Cu.indexOf(r,e)<0)return r}return null},Cu.scroll=function(t,e){var n=Cu.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Vl.arraycopy(t,n,r,0,t.length-n),Vl.arraycopy(t,0,r,t.length-n,n),Vl.arraycopy(r,0,t,0,t.length)},Cu.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},Cu.intersection=function(t,e){for(var n=new Su,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Cu.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Cu.removeRepeatedPoints=function(t){return Cu.hasRepeatedPoints(t)?new Su(t,!1).toCoordinateArray():t},Cu.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Cu.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Cu.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new xl(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=new xl(r[i+l])},Cu.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},Cu.envelope=function(t){for(var e=new $l,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Cu.toCoordinateArray=function(t){return t.toArray(Cu.coordArrayType)},Cu.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Cu.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Cu.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t[e].compareTo(t[t.length-1-e]);if(0!==n)return n}return 1},Cu.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Cu.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Cu.extract=function(t,e,n){e=Tl.clamp(e,0,t.length);var r=(n=Tl.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(Cu,Iu);var ku=function(){};ku.prototype.compare=function(t,e){return Cu.compare(t,e)},ku.prototype.interfaces_=function(){return[vl]},ku.prototype.getClass=function(){return ku};var Tu=function(){};Tu.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Cu.compare(n,r);return Cu.isEqualReversed(n,r)?0:i},Tu.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Cu.increasingDirection(n),o=Cu.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[s].compareTo(r[a]);if(0!==u)return u;s+=i,a+=o}return 0},Tu.prototype.interfaces_=function(){return[vl]},Tu.prototype.getClass=function(){return Tu};var Pu=function(){};Pu.prototype.get=function(){},Pu.prototype.put=function(){},Pu.prototype.size=function(){},Pu.prototype.values=function(){},Pu.prototype.entrySet=function(){};var Au=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Pu);function Ou(t){this.message=t||""}function Mu(){}(Ou.prototype=new Error).name="OperationNotSupported",(Mu.prototype=new gu).contains=function(){};var Lu=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof gu&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Nu(this)},e}(Mu),Nu=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new xu;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Ou},e}(vu);function Du(t){return null===t?0:t.color}function Ru(t){return null===t?null:t.parent}function zu(t,e){null!==t&&(t.color=e)}function Fu(t){return null===t?null:t.left}function Bu(t){return null===t?null:t.right}function ju(){this.root_=null,this.size_=0}(ju.prototype=new Au).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},ju.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},ju.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Ru(t)===Fu(Ru(Ru(t)))){var n=Bu(Ru(Ru(t)));1===Du(n)?(zu(Ru(t),0),zu(n,0),zu(Ru(Ru(t)),1),t=Ru(Ru(t))):(t===Bu(Ru(t))&&(t=Ru(t),e.rotateLeft(t)),zu(Ru(t),0),zu(Ru(Ru(t)),1),e.rotateRight(Ru(Ru(t))))}else{var r=Fu(Ru(Ru(t)));1===Du(r)?(zu(Ru(t),0),zu(r,0),zu(Ru(Ru(t)),1),t=Ru(Ru(t))):(t===Fu(Ru(t))&&(t=Ru(t),e.rotateRight(t)),zu(Ru(t),0),zu(Ru(Ru(t)),1),e.rotateLeft(Ru(Ru(t))))}this.root_.color=0},ju.prototype.values=function(){var t=new wu,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=ju.successor(e));)t.add(e.value);return t},ju.prototype.entrySet=function(){var t=new Lu,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=ju.successor(e));)t.add(e);return t},ju.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},ju.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},ju.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},ju.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},ju.prototype.size=function(){return this.size_};var Vu=function(){};function Uu(){}function $u(){this.array_=[],arguments[0]instanceof gu&&this.addAll(arguments[0])}Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu},Uu.prototype=new Mu,($u.prototype=new Uu).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},$u.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},$u.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},$u.prototype.remove=function(t){throw new Ou},$u.prototype.size=function(){return this.array_.length},$u.prototype.isEmpty=function(){return 0===this.array_.length},$u.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},$u.prototype.iterator=function(){return new qu(this)};var qu=function(t){this.treeSet_=t,this.position_=0};qu.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new xu;return this.treeSet_.array_[this.position_++]},qu.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},qu.prototype.remove=function(){throw new Ou};var Gu=function(){};Gu.sort=function(){var t,e,n,r=arguments[0];if(1===arguments.length)r.sort(function(t,e){return t.compareTo(e)});else if(2===arguments.length)n=arguments[1],r.sort(function(t,e){return n.compare(t,e)});else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var i=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<i.length;t++)r.push(i[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],e.sort(function(t,e){return n.compare(t,e)}),i=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<i.length;t++)r.push(i[t])},Gu.asList=function(t){for(var e=new wu,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Hu=function(){},Zu={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Zu.P.get=function(){return 0},Zu.L.get=function(){return 1},Zu.A.get=function(){return 2},Zu.FALSE.get=function(){return-1},Zu.TRUE.get=function(){return-2},Zu.DONTCARE.get=function(){return-3},Zu.SYM_FALSE.get=function(){return"F"},Zu.SYM_TRUE.get=function(){return"T"},Zu.SYM_DONTCARE.get=function(){return"*"},Zu.SYM_P.get=function(){return"0"},Zu.SYM_L.get=function(){return"1"},Zu.SYM_A.get=function(){return"2"},Hu.prototype.interfaces_=function(){return[]},Hu.prototype.getClass=function(){return Hu},Hu.toDimensionSymbol=function(t){switch(t){case Hu.FALSE:return Hu.SYM_FALSE;case Hu.TRUE:return Hu.SYM_TRUE;case Hu.DONTCARE:return Hu.SYM_DONTCARE;case Hu.P:return Hu.SYM_P;case Hu.L:return Hu.SYM_L;case Hu.A:return Hu.SYM_A}throw new fl("Unknown dimension value: "+t)},Hu.toDimensionValue=function(t){switch(Ml.toUpperCase(t)){case Hu.SYM_FALSE:return Hu.FALSE;case Hu.SYM_TRUE:return Hu.TRUE;case Hu.SYM_DONTCARE:return Hu.DONTCARE;case Hu.SYM_P:return Hu.P;case Hu.SYM_L:return Hu.L;case Hu.SYM_A:return Hu.A}throw new fl("Unknown dimension symbol: "+t)},Object.defineProperties(Hu,Zu);var Wu=function(){};Wu.prototype.filter=function(t){},Wu.prototype.interfaces_=function(){return[]},Wu.prototype.getClass=function(){return Wu};var Xu=function(){};Xu.prototype.filter=function(t,e){},Xu.prototype.isDone=function(){},Xu.prototype.isGeometryChanged=function(){},Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu};var Yu=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new fl("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new $l,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Gu.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Hu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Hu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createGeometryCollection(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new $u(Gu.asList(this._geometries)),r=new $u(Gu.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[1],o=arguments[0],s=this.getNumGeometries(),a=o.getNumGeometries(),l=0;l<s&&l<a;){var u=t.getGeometryN(l),c=o.getGeometryN(l),h=u.compareToSameClass(c,i);if(0!==h)return h;l++}return l<s?1:l<a?-1:0}},e.prototype.apply=function(){var t=this;if(kl(arguments[0],cu))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(kl(arguments[0],Xu)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(kl(arguments[0],Wu)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(kl(arguments[0],su)){var a=arguments[0];a.filter(this);for(var l=0;l<this._geometries.length;l++)t._geometries[l].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Jl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(au),Ku=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return au.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Hu.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Ju(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Vu]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Yu),Ju=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=hu.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Ju.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Ju.prototype.getBoundary=function(){return this._geom instanceof uc?this.boundaryLineString(this._geom):this._geom instanceof Ku?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ju.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Ju.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ju.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new wu;this._endpointMap=new ju;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return Cu.toCoordinateArray(n)},Ju.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Qu,this._endpointMap.put(t,e)),e.count++},Ju.prototype.interfaces_=function(){return[]},Ju.prototype.getClass=function(){return Ju},Ju.getBoundary=function(){return 1===arguments.length?new Ju(arguments[0]).getBoundary():2===arguments.length?new Ju(arguments[0],arguments[1]).getBoundary():void 0};var Qu=function(){this.count=null};function tc(){}function ec(){}Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu};var nc=function(){};function rc(){}function ic(){}function oc(){}var sc=function(){},ac={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};sc.prototype.interfaces_=function(){return[]},sc.prototype.getClass=function(){return sc},sc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},sc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new rc,n=new tc(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[1],i="",o=new oc(new ec(sc.getStackTrace(arguments[0]))),s=0;s<r;s++)try{i+=o.readLine()+sc.NEWLINE}catch(t){if(!(t instanceof ic))throw t;Jl.shouldNeverReachHere()}return i}},sc.split=function(t,e){for(var n=e.length,r=new wu,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),l=0;l<a.length;l++)a[l]=r.get(l);return a},sc.toString=function(){if(1===arguments.length)return sc.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},sc.spaces=function(t){return sc.chars(" ",t)},ac.NEWLINE.get=function(){return Vl.getProperty("line.separator")},ac.SIMPLE_ORDINATE_FORMAT.get=function(){return new nc("0.#")},Object.defineProperties(sc,ac);var lc=function(){};lc.prototype.interfaces_=function(){return[]},lc.prototype.getClass=function(){return lc},lc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},lc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,zl.X)===t.getOrdinate(e-1,zl.X)&&t.getOrdinate(0,zl.Y)===t.getOrdinate(e-1,zl.Y)},lc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_l.isNaN(s)&&_l.isNaN(a)))return!1}return!0},lc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(lc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)lc.copy(e,i-1,r,o,1);return r},lc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)lc.swap(t,r,e-r)},lc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},lc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)lc.copyCoord(t,e+o,n,r+o)},lc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Al;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(sc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},lc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?lc.createClosedRing(t,e,4):e.getOrdinate(0,zl.X)===e.getOrdinate(n-1,zl.X)&&e.getOrdinate(0,zl.Y)===e.getOrdinate(n-1,zl.Y)?e:lc.createClosedRing(t,e,n+1)},lc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();lc.copy(e,0,r,0,i);for(var o=i;o<n;o++)lc.copy(e,0,r,o,1);return r};var uc=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new $l:this._points.expandEnvelope(new $l)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&lc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Hu.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return iu.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return lc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0,r=0;n<this._points.size()&&r<e._points.size();){var i=t._points.getCoordinate(n).compareTo(e._points.getCoordinate(r));if(0!==i)return i;n++,r++}return n<this._points.size()?1:r<e._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},e.prototype.apply=function(){var t=this;if(kl(arguments[0],cu))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(kl(arguments[0],Xu)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else(kl(arguments[0],Wu)||kl(arguments[0],su))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Ju(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new fl("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Vu]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(au),cc=function(){};cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc};var hc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new $l;var t=new $l;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Hu.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},e.prototype.apply=function(){if(kl(arguments[0],cu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(kl(arguments[0],Xu)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(kl(arguments[0],Wu)||kl(arguments[0],su))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Jl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[cc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(au),pc=function(){};pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var dc=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new fl("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new fl("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(iu.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(iu.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a);if(l!==o==(u!==s))return!1;o=l,s=u}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(!this._shell.equalsExact(i._shell,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!e._holes[o].equalsExact(i._holes[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Gu.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);Vl.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=Cu.minCoordinate(n.getCoordinates());Cu.scroll(i,o),Vl.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],iu.isCCW(n.getCoordinates())===r&&Cu.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var e=arguments[1],n=arguments[0],r=this._shell.compareToSameClass(n._shell,e);if(0!==r)return r;for(var i=this.getNumInteriorRing(),o=n.getNumInteriorRing(),s=0;s<i&&s<o;){var a=t.getInteriorRingN(s),l=n.getInteriorRingN(s),u=a.compareToSameClass(l,e);if(0!==u)return u;s++}return s<i?1:s<o?-1:0}},e.prototype.apply=function(t){var e=this;if(kl(t,cu)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(kl(t,Xu)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(kl(t,Wu))t.filter(this);else if(kl(t,su)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[pc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(au),fc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return au.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Hu.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[cc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Yu),_c=function(t){function e(e,n){e instanceof xl&&n instanceof Oc&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return au.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Hu.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return lc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new fl("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new fl("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(uc),mc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return au.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<this._geometries.length;e++)t[e]=this._geometries[e].reverse();return this.getFactory().createMultiPolygon(t)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new wu,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[pc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Yu),gc=function(t){this._factory=t||null,this._isUserDataCopied=!1},yc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};gc.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},gc.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},gc.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Yu?this.editGeometryCollection(t,e):t instanceof dc?this.editPolygon(t,e):t instanceof hc||t instanceof uc?e.edit(t,this._factory):(Jl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},gc.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new wu,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===fc?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ku?this._factory.createMultiLineString(r.toArray([])):n.getClass()===mc?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},gc.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new wu,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},gc.prototype.interfaces_=function(){return[]},gc.prototype.getClass=function(){return gc},gc.GeometryEditorOperation=function(){},yc.NoOpGeometryOperation.get=function(){return vc},yc.CoordinateOperation.get=function(){return bc},yc.CoordinateSequenceOperation.get=function(){return xc},Object.defineProperties(gc,yc);var vc=function(){};vc.prototype.edit=function(t,e){return t},vc.prototype.interfaces_=function(){return[gc.GeometryEditorOperation]},vc.prototype.getClass=function(){return vc};var bc=function(){};bc.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof _c?e.createLinearRing(n):t instanceof uc?e.createLineString(n):t instanceof hc?n.length>0?e.createPoint(n[0]):e.createPoint():t},bc.prototype.interfaces_=function(){return[gc.GeometryEditorOperation]},bc.prototype.getClass=function(){return bc};var xc=function(){};xc.prototype.edit=function(t,e){return t instanceof _c?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof uc?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof hc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},xc.prototype.interfaces_=function(){return[gc.GeometryEditorOperation]},xc.prototype.getClass=function(){return xc};var wc=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new xl}else if(kl(arguments[0],zl)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],l=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=l;for(var u=0;u<a;u++)t._coordinates[u]=new xl}},Ec={serialVersionUID:{configurable:!0}};wc.prototype.setOrdinate=function(t,e,n){switch(e){case zl.X:this._coordinates[t].x=n;break;case zl.Y:this._coordinates[t].y=n;break;case zl.Z:this._coordinates[t].z=n;break;default:throw new fl("invalid ordinateIndex")}},wc.prototype.size=function(){return this._coordinates.length},wc.prototype.getOrdinate=function(t,e){switch(e){case zl.X:return this._coordinates[t].x;case zl.Y:return this._coordinates[t].y;case zl.Z:return this._coordinates[t].z}return _l.NaN},wc.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var t=arguments[0],e=arguments[1];e.x=this._coordinates[t].x,e.y=this._coordinates[t].y,e.z=this._coordinates[t].z}},wc.prototype.getCoordinateCopy=function(t){return new xl(this._coordinates[t])},wc.prototype.getDimension=function(){return this._dimension},wc.prototype.getX=function(t){return this._coordinates[t].x},wc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new wc(t,this._dimension)},wc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},wc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new wc(t,this._dimension)},wc.prototype.toString=function(){if(this._coordinates.length>0){var t=new Al(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},wc.prototype.getY=function(t){return this._coordinates[t].y},wc.prototype.toCoordinateArray=function(){return this._coordinates},wc.prototype.interfaces_=function(){return[zl,bl]},wc.prototype.getClass=function(){return wc},Ec.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(wc,Ec);var Sc=function(){},Cc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Sc.prototype.readResolve=function(){return Sc.instance()},Sc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new wc(arguments[0]);if(kl(arguments[0],zl))return new wc(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new wc(t):new wc(t,e)}},Sc.prototype.interfaces_=function(){return[Sl,bl]},Sc.prototype.getClass=function(){return Sc},Sc.instance=function(){return Sc.instanceObject},Cc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Cc.instanceObject.get=function(){return new Sc},Object.defineProperties(Sc,Cc);var Ic=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new wu,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Lu;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Pu),kc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Pc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Tc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};kc.prototype.equals=function(t){return t instanceof kc&&this._modelType===t._modelType&&this._scale===t._scale},kc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Ol(n).compareTo(new Ol(r))},kc.prototype.getScale=function(){return this._scale},kc.prototype.isFloating=function(){return this._modelType===kc.FLOATING||this._modelType===kc.FLOATING_SINGLE},kc.prototype.getType=function(){return this._modelType},kc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===kc.FLOATING?t="Floating":this._modelType===kc.FLOATING_SINGLE?t="Floating-Single":this._modelType===kc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},kc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _l.isNaN(t)||this._modelType===kc.FLOATING_SINGLE?t:this._modelType===kc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof xl){var e=arguments[0];if(this._modelType===kc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},kc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===kc.FLOATING?t=16:this._modelType===kc.FLOATING_SINGLE?t=6:this._modelType===kc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},kc.prototype.setScale=function(t){this._scale=Math.abs(t)},kc.prototype.interfaces_=function(){return[bl,gl]},kc.prototype.getClass=function(){return kc},kc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Tc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Tc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(kc,Tc);var Pc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Ac={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Pc.prototype.readResolve=function(){return Pc.nameToTypeMap.get(this._name)},Pc.prototype.toString=function(){return this._name},Pc.prototype.interfaces_=function(){return[bl]},Pc.prototype.getClass=function(){return Pc},Ac.serialVersionUID.get=function(){return-552860263173159e4},Ac.nameToTypeMap.get=function(){return new Ic},Object.defineProperties(Pc,Ac),kc.Type=Pc,kc.FIXED=new Pc("FIXED"),kc.FLOATING=new Pc("FLOATING"),kc.FLOATING_SINGLE=new Pc("FLOATING SINGLE");var Oc=function t(){this._precisionModel=new kc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?kl(arguments[0],Sl)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof kc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Mc={serialVersionUID:{configurable:!0}};Oc.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new xl(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new xl(t.getMinX(),t.getMinY()),new xl(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new xl(t.getMinX(),t.getMinY()),new xl(t.getMinX(),t.getMaxY()),new xl(t.getMaxX(),t.getMaxY()),new xl(t.getMaxX(),t.getMinY()),new xl(t.getMinX(),t.getMinY())]),null)},Oc.prototype.createLineString=function(t){return t?t instanceof Array?new uc(this.getCoordinateSequenceFactory().create(t),this):kl(t,zl)?new uc(t,this):void 0:new uc(this.getCoordinateSequenceFactory().create([]),this)},Oc.prototype.createMultiLineString=function(){return 0===arguments.length?new Ku(null,this):1===arguments.length?new Ku(arguments[0],this):void 0},Oc.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Oc.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof dc)return this.createMultiPolygon(Oc.toPolygonArray(t));if(a instanceof uc)return this.createMultiLineString(Oc.toLineStringArray(t));if(a instanceof hc)return this.createMultiPoint(Oc.toPointArray(t));Jl.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},Oc.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Oc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(kl(arguments[0],zl))return new hc(arguments[0],this)}},Oc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Oc.prototype.createPolygon=function(){if(0===arguments.length)return new dc(null,null,this);if(1===arguments.length){if(kl(arguments[0],zl))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof _c)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new dc(arguments[0],arguments[1],this)},Oc.prototype.getSRID=function(){return this._SRID},Oc.prototype.createGeometryCollection=function(){return 0===arguments.length?new Yu(null,this):1===arguments.length?new Yu(arguments[0],this):void 0},Oc.prototype.createGeometry=function(t){return new gc(this).edit(t,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},Oc.prototype.getPrecisionModel=function(){return this._precisionModel},Oc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(kl(arguments[0],zl))return new _c(arguments[0],this)}},Oc.prototype.createMultiPolygon=function(){return 0===arguments.length?new mc(null,this):1===arguments.length?new mc(arguments[0],this):void 0},Oc.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new fc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new fc(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(kl(arguments[0],zl)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=t.getCoordinateSequenceFactory().create(1,n.getDimension());lc.copy(n,i,o,0,1),r[i]=t.createPoint(o)}return this.createMultiPoint(r)}}},Oc.prototype.interfaces_=function(){return[bl]},Oc.prototype.getClass=function(){return Oc},Oc.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Oc.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Oc.getDefaultCoordinateSequenceFactory=function(){return Sc.instance()},Oc.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Oc.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Oc.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Oc.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Oc.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Oc.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Oc.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Mc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Oc,Mc);var Lc=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Nc=function(t){this.geometryFactory=t||new Oc};Nc.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Dc[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Lc.indexOf(n)?Dc[n].apply(this,[e.coordinates]):Dc[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},Nc.prototype.write=function(t){var e=t.getGeometryType();if(!Rc[e])throw new Error("Geometry is not supported");return Rc[e].apply(this,[t])};var Dc={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!Dc[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Dc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new xl(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new xl(t[0],t[1]),new xl(t[2],t[1]),new xl(t[2],t[3]),new xl(t[0],t[3]),new xl(t[0],t[1])])},Point:function(t){var e=new xl(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Dc.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Dc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Dc.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Dc.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=Dc.coordinates.apply(this,[t[i]]),s=this.geometryFactory.createLinearRing(o);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Dc.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Rc={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Rc.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Rc.Point.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r)e.push(Rc.coordinate.apply(this,[n[r]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Rc.LineString.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Rc.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=Rc.LineString.apply(this,[t._holes[r]]);e.push(i.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Rc.Polygon.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Rc[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},zc=function(t){this.geometryFactory=t||new Oc,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Nc(this.geometryFactory)};zc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===kc.FIXED&&this.reducePrecision(e),e},zc.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Fc=function(){this.parser=new Nc(this.geometryFactory)};Fc.prototype.write=function(t){return this.parser.write(t)};var Bc=function(){},jc={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Vc(t){this.message=t||""}function Uc(){this.array_=[]}Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.opposite=function(t){return t===Bc.LEFT?Bc.RIGHT:t===Bc.RIGHT?Bc.LEFT:t},jc.ON.get=function(){return 0},jc.LEFT.get=function(){return 1},jc.RIGHT.get=function(){return 2},Object.defineProperties(Bc,jc),(Vc.prototype=new Error).name="EmptyStackException",(Uc.prototype=new bu).add=function(t){return this.array_.push(t),!0},Uc.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Uc.prototype.push=function(t){return this.array_.push(t),t},Uc.prototype.pop=function(t){if(0===this.array_.length)throw new Vc;return this.array_.pop()},Uc.prototype.peek=function(){if(0===this.array_.length)throw new Vc;return this.array_[this.array_.length-1]},Uc.prototype.empty=function(){return 0===this.array_.length},Uc.prototype.isEmpty=function(){return this.empty()},Uc.prototype.search=function(t){return this.array_.indexOf(t)},Uc.prototype.size=function(){return this.array_.length},Uc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var $c=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};$c.prototype.getCoordinate=function(){return this._minCoord},$c.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},$c.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Jl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=iu.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===iu.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===iu.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},$c.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Bc.LEFT;return n[e].y<n[e+1].y&&(r=Bc.RIGHT),r},$c.prototype.getEdge=function(){return this._orientedDe},$c.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},$c.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},$c.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}Jl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Bc.LEFT&&(this._orientedDe=this._minDe.getSym())},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c};var qc=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new xl(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Yl),Gc=function(){this.array_=[]};Gc.prototype.addLast=function(t){this.array_.push(t)},Gc.prototype.removeFirst=function(){return this.array_.shift()},Gc.prototype.isEmpty=function(){return 0===this.array_.length};var Hc=function(){this._finder=null,this._dirEdgeList=new wu,this._nodes=new wu,this._rightMostCoord=null,this._env=null,this._finder=new $c};Hc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Hc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Hc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new qc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Hc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Bc.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Hc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Hc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Bc.RIGHT)>=1&&e.getDepth(Bc.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Hc.prototype.computeDepths=function(t){var e=new Lu,n=new Gc,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Hc.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},Hc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new $l,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Hc.prototype.addReachable=function(t){var e=new Uc;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Hc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Bc.LEFT,t.getDepth(Bc.RIGHT)),e.setDepth(Bc.RIGHT,t.getDepth(Bc.LEFT))},Hc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Hc.prototype.getNodes=function(){return this._nodes},Hc.prototype.getDirectedEdges=function(){return this._dirEdgeList},Hc.prototype.interfaces_=function(){return[gl]},Hc.prototype.getClass=function(){return Hc};var Zc=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Bc.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)e.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Bc.ON]=o,this.location[Bc.LEFT]=s,this.location[Bc.RIGHT]=a}};Zc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Zc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Cl.NONE)return!1;return!0},Zc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Cl.NONE&&(this.location[e]=t)},Zc.prototype.isLine=function(){return 1===this.location.length},Zc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Bc.ON]=this.location[Bc.ON],e[Bc.LEFT]=Cl.NONE,e[Bc.RIGHT]=Cl.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Cl.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Zc.prototype.getLocations=function(){return this.location},Zc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Bc.LEFT];this.location[Bc.LEFT]=this.location[Bc.RIGHT],this.location[Bc.RIGHT]=t},Zc.prototype.toString=function(){var t=new Al;return this.location.length>1&&t.append(Cl.toLocationSymbol(this.location[Bc.LEFT])),t.append(Cl.toLocationSymbol(this.location[Bc.ON])),this.location.length>1&&t.append(Cl.toLocationSymbol(this.location[Bc.RIGHT])),t.toString()},Zc.prototype.setLocations=function(t,e,n){this.location[Bc.ON]=t,this.location[Bc.LEFT]=e,this.location[Bc.RIGHT]=n},Zc.prototype.get=function(t){return t<this.location.length?this.location[t]:Cl.NONE},Zc.prototype.isArea=function(){return this.location.length>1},Zc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Cl.NONE)return!0;return!1},Zc.prototype.setLocation=function(){1===arguments.length?this.setLocation(Bc.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},Zc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Cl.NONE)},Zc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Zc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Wc=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Zc(e),this.elt[1]=new Zc(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Zc(n.elt[0]),this.elt[1]=new Zc(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Zc(Cl.NONE),this.elt[1]=new Zc(Cl.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Zc(o,s,a),this.elt[1]=new Zc(o,s,a)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Zc(Cl.NONE,Cl.NONE,Cl.NONE),this.elt[1]=new Zc(Cl.NONE,Cl.NONE,Cl.NONE),this.elt[l].setLocations(u,c,h)}};Wc.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Wc.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Wc.prototype.isNull=function(t){return this.elt[t].isNull()},Wc.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},Wc.prototype.isLine=function(t){return this.elt[t].isLine()},Wc.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Zc(t.elt[n]):e.elt[n].merge(t.elt[n])},Wc.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Wc.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(Bc.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},Wc.prototype.toString=function(){var t=new Al;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Wc.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},Wc.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Wc.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(Bc.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},Wc.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Wc.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Wc.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Zc(this.elt[t].location[0]))},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.toLineLabel=function(t){for(var e=new Wc(Cl.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Xc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new wu,this._pts=new wu,this._label=new Wc(Cl.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new wu,this._geometryFactory=null;var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()};Xc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=iu.isCCW(this._ring.getCoordinates())},Xc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Xc.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new qc("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new qc("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();Jl.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Xc.prototype.getLinearRing=function(){return this._ring},Xc.prototype.getCoordinate=function(t){return this._pts.get(t)},Xc.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Xc.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Xc.prototype.isHole=function(){return this._isHole},Xc.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Xc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!iu.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Xc.prototype.addHole=function(t){this._holes.add(t)},Xc.prototype.isShell=function(){return null===this._shell},Xc.prototype.getLabel=function(){return this._label},Xc.prototype.getEdges=function(){return this._edges},Xc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Xc.prototype.getShell=function(){return this._shell},Xc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Bc.RIGHT);if(n===Cl.NONE)return null;if(this._label.getLocation(e)===Cl.NONE)return this._label.setLocation(e,n),null}},Xc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Xc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc};var Yc=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xc),Kc=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var t=new wu,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Yc(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xc),Jc=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(this._label=arguments[0])};Jc.prototype.setVisited=function(t){this._isVisited=t},Jc.prototype.setInResult=function(t){this._isInResult=t},Jc.prototype.isCovered=function(){return this._isCovered},Jc.prototype.isCoveredSet=function(){return this._isCoveredSet},Jc.prototype.setLabel=function(t){this._label=t},Jc.prototype.getLabel=function(){return this._label},Jc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Jc.prototype.updateIM=function(t){Jl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Jc.prototype.isInResult=function(){return this._isInResult},Jc.prototype.isVisited=function(){return this._isVisited},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc};var Qc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[1];this._coord=arguments[0],this._edges=e,this._label=new Wc(0,Cl.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Cl.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Cl.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Wc(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof Wc)for(var n=arguments[0],r=0;r<2;r++){var i=t.computeMergedLocation(n,r);t._label.getLocation(r)===Cl.NONE&&t._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Cl.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Cl.BOUNDARY:n=Cl.INTERIOR;break;case Cl.INTERIOR:default:n=Cl.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Jc),th=function(){this.nodeMap=new ju,this.nodeFact=null,this.nodeFact=arguments[0]};th.prototype.find=function(t){return this.nodeMap.get(t)},th.prototype.addNode=function(){if(arguments[0]instanceof xl){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Qc){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},th.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},th.prototype.iterator=function(){return this.nodeMap.values().iterator()},th.prototype.values=function(){return this.nodeMap.values()},th.prototype.getBoundaryNodes=function(t){for(var e=new wu,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Cl.BOUNDARY&&e.add(r)}return e},th.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th};var eh=function(){},nh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},eh.isNorthern=function(t){return t===eh.NE||t===eh.NW},eh.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},eh.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},eh.isInHalfPlane=function(t,e){return e===eh.SE?t===eh.SE||t===eh.SW:t===e||t===e+1},eh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new fl("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?eh.NE:eh.SE:e>=0?eh.NW:eh.SW}if(arguments[0]instanceof xl&&arguments[1]instanceof xl){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new fl("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?eh.NE:eh.SE:r.y>=n.y?eh.NW:eh.SW}},nh.NE.get=function(){return 0},nh.NW.get=function(){return 1},nh.SW.get=function(){return 2},nh.SE.get=function(){return 3},Object.defineProperties(eh,nh);var rh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var t=arguments[1],e=arguments[2],n=null;this._edge=arguments[0],this.init(t,e),this._label=n}else if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3];this._edge=arguments[0],this.init(r,i),this._label=o}};rh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:iu.computeOrientation(t._p0,t._p1,this._p1)},rh.prototype.getDy=function(){return this._dy},rh.prototype.getCoordinate=function(){return this._p0},rh.prototype.setNode=function(t){this._node=t},rh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},rh.prototype.compareTo=function(t){return this.compareDirection(t)},rh.prototype.getDirectedCoordinate=function(){return this._p1},rh.prototype.getDx=function(){return this._dx},rh.prototype.getLabel=function(){return this._label},rh.prototype.getEdge=function(){return this._edge},rh.prototype.getQuadrant=function(){return this._quadrant},rh.prototype.getNode=function(){return this._node},rh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},rh.prototype.computeLabel=function(t){},rh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=eh.quadrant(this._dx,this._dy),Jl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},rh.prototype.interfaces_=function(){return[gl]},rh.prototype.getClass=function(){return rh};var ih=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Wc(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new qc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Bc.LEFT)===Cl.INTERIOR&&t._label.getLocation(n,Bc.RIGHT)===Cl.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Bc.LEFT]+"/"+this._depth[Bc.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Cl.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Cl.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Bc.LEFT&&(r=-1);var i=Bc.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Cl.EXTERIOR&&e===Cl.INTERIOR?1:t===Cl.INTERIOR&&e===Cl.EXTERIOR?-1:0},e}(rh),oh=function(){};oh.prototype.createNode=function(t){return new Qc(t,null)},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh};var sh=function(){this._edges=new wu,this._nodes=null,this._edgeEndList=new wu,0===arguments.length?this._nodes=new th(new oh):1===arguments.length&&(this._nodes=new th(arguments[0]))};sh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},sh.prototype.find=function(t){return this._nodes.find(t)},sh.prototype.addNode=function(){return arguments[0]instanceof Qc||arguments[0]instanceof xl?this._nodes.addNode(arguments[0]):void 0},sh.prototype.getNodeIterator=function(){return this._nodes.iterator()},sh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},sh.prototype.debugPrintln=function(t){Vl.out.println(t)},sh.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Cl.BOUNDARY},sh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},sh.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&iu.computeOrientation(t,e,r)===iu.COLLINEAR&&eh.quadrant(t,e)===eh.quadrant(n,r)},sh.prototype.getEdgeEnds=function(){return this._edgeEndList},sh.prototype.debugPrint=function(t){Vl.out.print(t)},sh.prototype.getEdgeIterator=function(){return this._edges.iterator()},sh.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},sh.prototype.insertEdge=function(t){this._edges.add(t)},sh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},sh.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new ih(r,!0),o=new ih(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},sh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},sh.prototype.getNodes=function(){return this._nodes.values()},sh.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh},sh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var ah=function(){this._geometryFactory=null,this._shellList=new wu,this._geometryFactory=arguments[0]};ah.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},ah.prototype.computePolygons=function(t){for(var e=new wu,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},ah.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new qc("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},ah.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new wu,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},ah.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},ah.prototype.buildMaximalEdgeRings=function(t){for(var e=new wu,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Kc(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},ah.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},ah.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},ah.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&iu.isPointInRing(i,u.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=l)}return o},ah.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return Jl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},ah.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];sh.linkResultDirectedEdges(arguments[1]);var n=this.buildMaximalEdgeRings(e),r=new wu,i=this.buildMinimalEdgeRings(n,this._shellList,r);this.sortShellsAndHoles(i,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},ah.prototype.interfaces_=function(){return[]},ah.prototype.getClass=function(){return ah};var lh=function(){};lh.prototype.getBounds=function(){},lh.prototype.interfaces_=function(){return[]},lh.prototype.getClass=function(){return lh};var uh=function(){this._bounds=null,this._item=null;var t=arguments[1];this._bounds=arguments[0],this._item=t};uh.prototype.getItem=function(){return this._item},uh.prototype.getBounds=function(){return this._bounds},uh.prototype.interfaces_=function(){return[lh,bl]},uh.prototype.getClass=function(){return uh};var ch=function(){this._size=null,this._items=null,this._size=0,this._items=new wu,this._items.add(null)};ch.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},ch.prototype.size=function(){return this._size},ch.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},ch.prototype.clear=function(){this._size=0,this._items.clear()},ch.prototype.isEmpty=function(){return 0===this._size},ch.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch};var hh=function(){};hh.prototype.visitItem=function(t){},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh};var ph=function(){};ph.prototype.insert=function(t,e){},ph.prototype.remove=function(t,e){},ph.prototype.query=function(){},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph};var dh=function(){this._childBoundables=new wu,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(this._level=arguments[0])},fh={serialVersionUID:{configurable:!0}};dh.prototype.getLevel=function(){return this._level},dh.prototype.size=function(){return this._childBoundables.size()},dh.prototype.getChildBoundables=function(){return this._childBoundables},dh.prototype.addChildBoundable=function(t){Jl.isTrue(null===this._bounds),this._childBoundables.add(t)},dh.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},dh.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},dh.prototype.interfaces_=function(){return[lh,bl]},dh.prototype.getClass=function(){return dh},fh.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(dh,fh);var _h=function(){};_h.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},_h.min=function(t){return _h.sort(t),t.get(0)},_h.sort=function(t,e){var n=t.toArray();e?Gu.sort(n,e):Gu.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},_h.singletonList=function(t){var e=new wu;return e.add(t),e};var mh=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[1],e=arguments[2];this._boundable1=arguments[0],this._boundable2=t,this._itemDistance=e,this._distance=this.distance()};mh.prototype.expandToQueue=function(t,e){var n=mh.isComposite(this._boundable1),r=mh.isComposite(this._boundable2);if(n&&r)return mh.area(this._boundable1)>mh.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new fl("neither boundable is composite")},mh.prototype.isLeaves=function(){return!(mh.isComposite(this._boundable1)||mh.isComposite(this._boundable2))},mh.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},mh.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new mh(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},mh.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},mh.prototype.getDistance=function(){return this._distance},mh.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},mh.prototype.interfaces_=function(){return[gl]},mh.prototype.getClass=function(){return mh},mh.area=function(t){return t.getBounds().getArea()},mh.isComposite=function(t){return t instanceof dh};var gh=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new wu,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=t.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var e=arguments[0];Jl.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}},yh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};gh.prototype.getNodeCapacity=function(){return this._nodeCapacity},gh.prototype.lastNode=function(t){return t.get(t.size()-1)},gh.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var r=n.next();r instanceof dh?e+=t.size(r):r instanceof uh&&(e+=1)}return e}},gh.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof uh&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},gh.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new wu:e}if(1===arguments.length){for(var n=arguments[0],r=new wu,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof dh){var s=t.itemsTree(o);null!==s&&r.add(s)}else o instanceof uh?r.add(o.getItem()):Jl.shouldNeverReachHere()}return r.size()<=0?null:r}},gh.prototype.insert=function(t,e){Jl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new uh(t,e))},gh.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new wu;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(Jl.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof dh?t.boundablesAtLevel(r,a,o):(Jl.isTrue(a instanceof uh),-1===r&&o.add(a))}return null}},gh.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new wu;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(kl(arguments[2],hh)&&arguments[0]instanceof Object&&arguments[1]instanceof dh)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),l=0;l<a.size();l++){var u=a.get(l);t.getIntersectsOp().intersects(u.getBounds(),o)&&(u instanceof dh?t.query(o,u,s):u instanceof uh?s.visitItem(u.getItem()):Jl.shouldNeverReachHere())}else if(kl(arguments[2],bu)&&arguments[0]instanceof Object&&arguments[1]instanceof dh)for(var c=arguments[0],h=arguments[2],p=arguments[1].getChildBoundables(),d=0;d<p.size();d++){var f=p.get(d);t.getIntersectsOp().intersects(f.getBounds(),c)&&(f instanceof dh?t.query(c,f,h):f instanceof uh?h.add(f.getItem()):Jl.shouldNeverReachHere())}},gh.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},gh.prototype.getRoot=function(){return this.build(),this._root},gh.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,l=i.getChildBoundables().iterator();l.hasNext();){var u=l.next();if(t.getIntersectsOp().intersects(u.getBounds(),r)&&u instanceof dh&&(s=t.remove(r,u,o))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},gh.prototype.createHigherLevels=function(t,e){Jl.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},gh.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof dh){var i=t.depth(r);i>e&&(e=i)}}return e+1}},gh.prototype.createParentBoundables=function(t,e){var n=this;Jl.isTrue(!t.isEmpty());var r=new wu;r.add(this.createNode(e));var i=new wu(t);_h.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},gh.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},gh.prototype.interfaces_=function(){return[bl]},gh.prototype.getClass=function(){return gh},gh.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},yh.IntersectsOp.get=function(){return vh},yh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},yh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(gh,yh);var vh=function(){},bh=function(){};bh.prototype.distance=function(t,e){},bh.prototype.interfaces_=function(){return[]},bh.prototype.getClass=function(){return bh};var xh=function(t){function e(n){t.call(this,n=n||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){Jl.isTrue(t.length>0);for(var n=new wu,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new wh(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new wu;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length)return t.prototype.query.call(this,arguments[0]);2===arguments.length?t.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(kl(arguments[2],hh)&&arguments[0]instanceof Object&&arguments[1]instanceof dh||kl(arguments[2],bu)&&arguments[0]instanceof Object&&arguments[1]instanceof dh)&&t.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){return 2===arguments.length?t.prototype.remove.call(this,arguments[0],arguments[1]):t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Jl.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new wu(t);_h.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(kl(arguments[0],bh)){var t=arguments[0],n=new mh(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof mh)return this.nearestNeighbour(arguments[0],_l.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof e&&kl(arguments[1],bh)){var r=arguments[0],i=arguments[1],o=new mh(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(o)}if(arguments[0]instanceof mh&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],l=null,u=new ch;for(u.add(s);!u.isEmpty()&&a>0;){var c=u.poll(),h=c.getDistance();if(h>=a)break;c.isLeaves()?(a=h,l=c):c.expandToQueue(u,a)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new uh(arguments[0],arguments[1]),f=new mh(this.getRoot(),d,p);return this.nearestNeighbour(f)[0]}},e.prototype.interfaces_=function(){return[ph,bl]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return wh},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[vl]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[vl]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(gh),wh=function(t){function e(){t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new $l(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dh),Eh=function(){};Eh.prototype.interfaces_=function(){return[]},Eh.prototype.getClass=function(){return Eh},Eh.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Eh.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Eh.relativeSign(e.x,n.x),i=Eh.relativeSign(e.y,n.y);switch(t){case 0:return Eh.compareValue(r,i);case 1:return Eh.compareValue(i,r);case 2:return Eh.compareValue(i,-r);case 3:return Eh.compareValue(-r,i);case 4:return Eh.compareValue(-r,-i);case 5:return Eh.compareValue(-i,-r);case 6:return Eh.compareValue(-i,r);case 7:return Eh.compareValue(r,-i)}return Jl.shouldNeverReachHere("invalid octant value"),0},Eh.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Sh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new xl(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Sh.prototype.getCoordinate=function(){return this.coord},Sh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Sh.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Eh.compare(this._segmentOctant,this.coord,e.coord)},Sh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Sh.prototype.isInterior=function(){return this._isInterior},Sh.prototype.interfaces_=function(){return[gl]},Sh.prototype.getClass=function(){return Sh};var Ch=function(){this._nodeMap=new ju,this._edge=null,this._edge=arguments[0]};Ch.prototype.getSplitCoordinates=function(){var t=new Su;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Ch.prototype.addCollapsedNodes=function(){var t=new wu;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Ch.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ch.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Ol(e+1))}},Ch.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new xl(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new xl(e.coord))},Ch.prototype.iterator=function(){return this._nodeMap.values().iterator()},Ch.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Ch.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Ch.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Ol(e[0])),r=i}},Ch.prototype.getEdge=function(){return this._edge},Ch.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Ch.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new xl(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new xl(e.coord)),new Ph(o,this._edge.getData())},Ch.prototype.add=function(t,e){var n=new Sh(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(Jl.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Ch.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Yl("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Yl("bad split edge end point at "+i)},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch};var Ih=function(){};Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih},Ih.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new fl("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof xl&&arguments[1]instanceof xl){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new fl("Cannot compute the octant for two identical points "+i);return Ih.octant(s,a)}};var kh=function(){};kh.prototype.getCoordinates=function(){},kh.prototype.size=function(){},kh.prototype.getCoordinate=function(t){},kh.prototype.isClosed=function(){},kh.prototype.setData=function(t){},kh.prototype.getData=function(){},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh};var Th=function(){};Th.prototype.addIntersection=function(t,e){},Th.prototype.interfaces_=function(){return[kh]},Th.prototype.getClass=function(){return Th};var Ph=function(){this._nodeList=new Ch(this),this._pts=null,this._data=null;var t=arguments[1];this._pts=arguments[0],this._data=t};Ph.prototype.getCoordinates=function(){return this._pts},Ph.prototype.size=function(){return this._pts.length},Ph.prototype.getCoordinate=function(t){return this._pts[t]},Ph.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ph.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Ph.prototype.setData=function(t){this._data=t},Ph.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Ih.octant(t,e)},Ph.prototype.getData=function(){return this._data},Ph.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var t=arguments[1],e=new xl(arguments[0].getIntersection(arguments[3]));this.addIntersection(e,t)}},Ph.prototype.toString=function(){return Xl.toLineString(new wc(this._pts))},Ph.prototype.getNodeList=function(){return this._nodeList},Ph.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;return r<this._pts.length&&t.equals2D(this._pts[r])&&(n=r),this._nodeList.add(t,n)},Ph.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Ph.prototype.interfaces_=function(){return[Th]},Ph.prototype.getClass=function(){return Ph},Ph.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new wu;return Ph.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var Ah=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new xl,this.p1=new xl;else if(1===arguments.length){var t=arguments[0];this.p0=new xl(t.p0),this.p1=new xl(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[2],n=arguments[3];this.p0=new xl(arguments[0],arguments[1]),this.p1=new xl(e,n)}},Oh={serialVersionUID:{configurable:!0}};Ah.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Ah.prototype.orientationIndex=function(){if(arguments[0]instanceof Ah){var t=arguments[0],e=iu.orientationIndex(this.p0,this.p1,t.p0),n=iu.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof xl)return iu.orientationIndex(this.p0,this.p1,arguments[0])},Ah.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Ah.prototype.isVertical=function(){return this.p0.x===this.p1.x},Ah.prototype.equals=function(t){if(!(t instanceof Ah))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Ah.prototype.intersection=function(t){var e=new eu;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Ah.prototype.project=function(){if(arguments[0]instanceof xl){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new xl(t);var e=this.projectionFactor(t),n=new xl;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Ah){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new Ah(s,a)}},Ah.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Ah.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Ah.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Ah.prototype.distancePerpendicular=function(t){return iu.distancePointLinePerpendicular(t,this.p0,this.p1)},Ah.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Ah.prototype.midPoint=function(){return Ah.midPoint(this.p0,this.p1)},Ah.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_l.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Ah.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_l.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},Ah.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Ah.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Ah.prototype.getLength=function(){return this.p0.distance(this.p1)},Ah.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Ah.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Ah.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Ah.prototype.lineIntersection=function(t){try{return Ul.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof jl))throw t}return null},Ah.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Ah.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,l=e*o/s}return new xl(n-l,r+a)},Ah.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Ah.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_l.isNaN(e))&&(e=1),e},Ah.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Ah.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Ah.prototype.distance=function(){if(arguments[0]instanceof Ah){var t=arguments[0];return iu.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof xl)return iu.distancePointLine(arguments[0],this.p0,this.p1)},Ah.prototype.pointAlong=function(t){var e=new xl;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Ah.prototype.hashCode=function(){var t=_l.doubleToLongBits(this.p0.x);t^=31*_l.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_l.doubleToLongBits(this.p1.x);return n^=31*_l.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Ah.prototype.interfaces_=function(){return[gl,bl]},Ah.prototype.getClass=function(){return Ah},Ah.midPoint=function(t,e){return new xl((t.x+e.x)/2,(t.y+e.y)/2)},Oh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Ah,Oh);var Mh=function(){this.tempEnv1=new $l,this.tempEnv2=new $l,this._overlapSeg1=new Ah,this._overlapSeg2=new Ah};Mh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[2],e=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),t.getLineSegment(e,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh};var Lh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[1],e=arguments[2],n=arguments[3];this._pts=arguments[0],this._start=t,this._end=e,this._context=n};Lh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Lh.prototype.computeSelect=function(t,e,n,r){if(r.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var i=Math.trunc((e+n)/2);e<i&&this.computeSelect(t,e,i,r),i<n&&this.computeSelect(t,i,n,r)},Lh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Lh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Lh.prototype.setId=function(t){this._id=t},Lh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Lh.prototype.getEnvelope=function(){return null===this._env&&(this._env=new $l(this._pts[this._start],this._pts[this._end])),this._env},Lh.prototype.getEndIndex=function(){return this._end},Lh.prototype.getStartIndex=function(){return this._start},Lh.prototype.getContext=function(){return this._context},Lh.prototype.getId=function(){return this._id},Lh.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var Nh=function(){};Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Nh.getChainStartIndices=function(t){var e=0,n=new wu;n.add(new Ol(e));do{var r=Nh.findChainEnd(t,e);n.add(new Ol(r)),e=r}while(e<t.length-1);return Nh.toIntArray(n)},Nh.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=eh.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||eh.quadrant(t[i-1],t[i])===r);)i++;return i-1},Nh.getChains=function(){if(1===arguments.length)return Nh.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new wu,r=Nh.getChainStartIndices(t),i=0;i<r.length-1;i++){var o=new Lh(t,r[i],r[i+1],e);n.add(o)}return n}},Nh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Dh=function(){};Dh.prototype.computeNodes=function(t){},Dh.prototype.getNodedSubstrings=function(){},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh};var Rh=function(){this._segInt=null,0===arguments.length||1===arguments.length&&this.setSegmentIntersector(arguments[0])};Rh.prototype.setSegmentIntersector=function(t){this._segInt=t},Rh.prototype.interfaces_=function(){return[Dh]},Rh.prototype.getClass=function(){return Rh};var zh=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new wu,this._index=new xh,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Ph.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=Nh.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Fh(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Fh},Object.defineProperties(e,n),e}(Rh),Fh=function(t){function e(){t.call(this),this._si=null,this._si=arguments[0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mh),Bh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var e=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(e)}else if(4===arguments.length){var n=arguments[1],r=arguments[2],i=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(n),this.setJoinStyle(r),this.setMitreLimit(i)}},jh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Bh.prototype.getEndCapStyle=function(){return this._endCapStyle},Bh.prototype.isSingleSided=function(){return this._isSingleSided},Bh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Bh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Bh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Bh.JOIN_ROUND&&(this._quadrantSegments=Bh.DEFAULT_QUADRANT_SEGMENTS)},Bh.prototype.getJoinStyle=function(){return this._joinStyle},Bh.prototype.setJoinStyle=function(t){this._joinStyle=t},Bh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Bh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Bh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Bh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Bh.prototype.getMitreLimit=function(){return this._mitreLimit},Bh.prototype.setMitreLimit=function(t){this._mitreLimit=t},Bh.prototype.setSingleSided=function(t){this._isSingleSided=t},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},jh.CAP_ROUND.get=function(){return 1},jh.CAP_FLAT.get=function(){return 2},jh.CAP_SQUARE.get=function(){return 3},jh.JOIN_ROUND.get=function(){return 1},jh.JOIN_MITRE.get=function(){return 2},jh.JOIN_BEVEL.get=function(){return 3},jh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},jh.DEFAULT_MITRE_LIMIT.get=function(){return 5},jh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Bh,jh);var Vh=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=iu.COUNTERCLOCKWISE,this._inputLine=t||null},Uh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Vh.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Vh.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=Vh.DELETE,o=!0,i=!0),n=t.findNextNonDeletedIndex(e=o?r:n),r=t.findNextNonDeletedIndex(n)}return i},Vh.prototype.isShallowConcavity=function(t,e,n,r){return iu.computeOrientation(t,e,n)===this._angleOrientation&&iu.distancePointLine(e,t,n)<r},Vh.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Vh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Vh.prototype.isConcave=function(t,e,n){return iu.computeOrientation(t,e,n)===this._angleOrientation},Vh.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=iu.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Vh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Vh.DELETE;)e++;return e},Vh.prototype.isShallow=function(t,e,n,r){return iu.distancePointLine(e,t,n)<r},Vh.prototype.collapseLine=function(){for(var t=new Su,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Vh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh},Vh.simplify=function(t,e){return new Vh(t).simplify(e)},Uh.INIT.get=function(){return 0},Uh.DELETE.get=function(){return 1},Uh.KEEP.get=function(){return 1},Uh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Vh,Uh);var $h=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new wu},qh={COORDINATE_ARRAY_TYPE:{configurable:!0}};$h.prototype.getCoordinates=function(){return this._ptList.toArray($h.COORDINATE_ARRAY_TYPE)},$h.prototype.setPrecisionModel=function(t){this._precisionModel=t},$h.prototype.addPt=function(t){var e=new xl(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},$h.prototype.revere=function(){},$h.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},$h.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},$h.prototype.toString=function(){return(new Oc).createLineString(this.getCoordinates()).toString()},$h.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new xl(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},$h.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h},qh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties($h,qh);var Gh=function(){},Hh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh},Gh.toDegrees=function(t){return 180*t/Math.PI},Gh.normalize=function(t){for(;t>Math.PI;)t-=Gh.PI_TIMES_2;for(;t<=-Math.PI;)t+=Gh.PI_TIMES_2;return t},Gh.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Math.atan2(n.y-e.y,n.x-e.x)}},Gh.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},Gh.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},Gh.interiorAngle=function(t,e,n){var r=Gh.angle(e,t),i=Gh.angle(e,n);return Math.abs(i-r)},Gh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Gh.PI_TIMES_2;t>=Gh.PI_TIMES_2&&(t=0)}else{for(;t>=Gh.PI_TIMES_2;)t-=Gh.PI_TIMES_2;t<0&&(t=0)}return t},Gh.angleBetween=function(t,e,n){var r=Gh.angle(e,t),i=Gh.angle(e,n);return Gh.diff(r,i)},Gh.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Gh.toRadians=function(t){return t*Math.PI/180},Gh.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Gh.COUNTERCLOCKWISE:n<0?Gh.CLOCKWISE:Gh.NONE},Gh.angleBetweenOriented=function(t,e,n){var r=Gh.angle(e,t),i=Gh.angle(e,n)-r;return i<=-Math.PI?i+Gh.PI_TIMES_2:i>Math.PI?i-Gh.PI_TIMES_2:i},Hh.PI_TIMES_2.get=function(){return 2*Math.PI},Hh.PI_OVER_2.get=function(){return Math.PI/2},Hh.PI_OVER_4.get=function(){return Math.PI/4},Hh.COUNTERCLOCKWISE.get=function(){return iu.COUNTERCLOCKWISE},Hh.CLOCKWISE.get=function(){return iu.CLOCKWISE},Hh.NONE.get=function(){return iu.COLLINEAR},Object.defineProperties(Gh,Hh);var Zh=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Ah,this._seg1=new Ah,this._offset0=new Ah,this._offset1=new Ah,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[1],n=arguments[2];this._precisionModel=arguments[0],this._bufParams=e,this._li=new eu,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Bh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},Wh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Zh.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=iu.computeOrientation(this._s0,this._s1,this._s2),r=n===iu.CLOCKWISE&&this._side===Bc.LEFT||n===iu.COUNTERCLOCKWISE&&this._side===Bc.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Zh.prototype.addLineEndCap=function(t,e){var n=new Ah(t,e),r=new Ah;this.computeOffsetSegment(n,Bc.LEFT,this._distance,r);var i=new Ah;this.computeOffsetSegment(n,Bc.RIGHT,this._distance,i);var o=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Bh.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,o+Math.PI/2,o-Math.PI/2,iu.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Bh.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Bh.CAP_SQUARE:var s=new xl;s.x=Math.abs(this._distance)*Math.cos(o),s.y=Math.abs(this._distance)*Math.sin(o);var a=new xl(r.p1.x+s.x,r.p1.y+s.y),l=new xl(i.p1.x+s.x,i.p1.y+s.y);this._segList.addPt(a),this._segList.addPt(l)}},Zh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Zh.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Ul.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof jl))throw t;o=new xl(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Zh.prototype.addFilletCorner=function(t,e,n,r,i){var o=Math.atan2(e.y-t.y,e.x-t.x),s=Math.atan2(n.y-t.y,n.x-t.x);r===iu.CLOCKWISE?o<=s&&(o+=2*Math.PI):o>=s&&(o-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,o,s,r,i),this._segList.addPt(n)},Zh.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Zh.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Bh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Bh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Zh.prototype.createSquare=function(t){this._segList.addPt(new xl(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new xl(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new xl(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new xl(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Zh.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Zh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Zh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Zh.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Zh.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Gh.angle(i,this._seg0.p0),s=Gh.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=Gh.normalize(o+s),l=Gh.normalize(a+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(s)),h=i.x+u*Math.cos(l),p=i.y+u*Math.sin(l),d=new xl(h,p),f=new Ah(i,d),_=f.pointAlongOffset(1,c),m=f.pointAlongOffset(1,-c);this._side===Bc.LEFT?(this._segList.addPt(_),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(_))},Zh.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Bc.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=i*n*o/a,u=i*n*s/a;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},Zh.prototype.addFilletArc=function(t,e,n,r,i){var o=r===iu.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=s/a,u=0,c=new xl;u<s;){var h=e+o*u;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),u+=l}},Zh.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Zh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new xl((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new xl((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Zh.prototype.createCircle=function(t){var e=new xl(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Zh.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Zh.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new $h,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Zh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Zh.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Bh.JOIN_BEVEL||this._bufParams.getJoinStyle()===Bh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,iu.CLOCKWISE,this._distance))},Zh.prototype.closeRing=function(){this._segList.closeRing()},Zh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh},Wh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Wh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Wh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Wh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Zh,Wh);var Xh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[1];this._precisionModel=arguments[0],this._bufParams=t};Xh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Cu.reverse(o),o},Xh.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Vh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Bc.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Vh.simplify(t,r),l=a.length-1;n.initSideSegments(a[0],a[1],Bc.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()},Xh.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Bc.RIGHT&&(r=-r);var i=Vh.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++)n.addNextSegment(i[s],1!==s);n.closeRing()},Xh.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Vh.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Bc.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Vh.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Bc.LEFT);for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Xh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Bh.CAP_ROUND:e.createCircle(t);break;case Bh.CAP_SQUARE:e.createSquare(t)}},Xh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],r):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,r):this.computeLineBufferCurve(t,r),r.getCoordinates()},Xh.prototype.getBufferParameters=function(){return this._bufParams},Xh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Xh.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Xh.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Xh.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Vh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Bc.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Vh.simplify(t,r),l=a.length-1;n.initSideSegments(a[0],a[1],Bc.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()},Xh.prototype.getSegGen=function(t){return new Zh(this._precisionModel,this._bufParams,t)},Xh.prototype.interfaces_=function(){return[]},Xh.prototype.getClass=function(){return Xh},Xh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new xl(t[n]);return e};var Yh=function(){this._subgraphs=null,this._seg=new Ah,this._cga=new iu,this._subgraphs=arguments[0]},Kh={DepthSegment:{configurable:!0}};Yh.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new wu,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(kl(arguments[2],bu)&&arguments[0]instanceof xl&&arguments[1]instanceof ih){for(var s=arguments[0],a=arguments[1],l=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(t._seg.p0=u[c],t._seg.p1=u[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||iu.computeOrientation(t._seg.p0,t._seg.p1,s)===iu.RIGHT)){var h=a.getDepth(Bc.LEFT);t._seg.p0.equals(u[c])||(h=a.getDepth(Bc.RIGHT));var p=new Jh(t._seg,h);l.add(p)}}else if(kl(arguments[2],bu)&&arguments[0]instanceof xl&&kl(arguments[1],bu))for(var d=arguments[0],f=arguments[2],_=arguments[1].iterator();_.hasNext();){var m=_.next();m.isForward()&&t.findStabbedSegments(d,m,f)}},Yh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:_h.min(e)._leftDepth},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},Kh.DepthSegment.get=function(){return Jh},Object.defineProperties(Yh,Kh);var Jh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[1];this._upwardSeg=new Ah(arguments[0]),this._leftDepth=t};Jh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Jh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Jh.prototype.toString=function(){return this._upwardSeg.toString()},Jh.prototype.interfaces_=function(){return[gl]},Jh.prototype.getClass=function(){return Jh};var Qh=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Qh.prototype.area=function(){return Qh.area(this.p0,this.p1,this.p2)},Qh.prototype.signedArea=function(){return Qh.signedArea(this.p0,this.p1,this.p2)},Qh.prototype.interpolateZ=function(t){if(null===t)throw new fl("Supplied point is null.");return Qh.interpolateZ(t,this.p0,this.p1,this.p2)},Qh.prototype.longestSideLength=function(){return Qh.longestSideLength(this.p0,this.p1,this.p2)},Qh.prototype.isAcute=function(){return Qh.isAcute(this.p0,this.p1,this.p2)},Qh.prototype.circumcentre=function(){return Qh.circumcentre(this.p0,this.p1,this.p2)},Qh.prototype.area3D=function(){return Qh.area3D(this.p0,this.p1,this.p2)},Qh.prototype.centroid=function(){return Qh.centroid(this.p0,this.p1,this.p2)},Qh.prototype.inCentre=function(){return Qh.inCentre(this.p0,this.p1,this.p2)},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Qh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Qh.det=function(t,e,n,r){return t*r-e*n},Qh.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,l=n.y-o,u=r.y-o,c=s*u-a*l,h=t.x-i,p=t.y-o;return e.z+(u*h-a*p)/c*(n.z-e.z)+(-l*h+s*p)/c*(r.z-e.z)},Qh.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Qh.isAcute=function(t,e,n){return!!Gh.isAcute(t,e,n)&&!!Gh.isAcute(e,n,t)&&!!Gh.isAcute(n,t,e)},Qh.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,l=e.y-i,u=2*Qh.det(o,s,a,l),c=Qh.det(s,o*o+s*s,l,a*a+l*l),h=Qh.det(o,o*o+s*s,a,a*a+l*l);return new xl(r-c/u,i+h/u)},Qh.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Ul(t.x+n/2,t.y+r/2,1),o=new Ul(t.x-r+n/2,t.y+n+r/2,1);return new Ul(i,o)},Qh.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n));return new xl(t.x+i*(n.x-t.x),t.y+i*(n.y-t.y))},Qh.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,l=n.z-t.z,u=i*l-o*a,c=o*s-r*l,h=r*a-i*s;return Math.sqrt(u*u+c*c+h*h)/2},Qh.centroid=function(t,e,n){return new xl((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Qh.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o;return new xl((r*t.x+i*e.x+o*n.x)/s,(r*t.y+i*e.y+o*n.y)/s)};var tp=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new wu;var t=arguments[1],e=arguments[2];this._inputGeom=arguments[0],this._distance=t,this._curveBuilder=e};tp.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Cl.EXTERIOR,Cl.INTERIOR)},tp.prototype.addPolygon=function(t){var e=this,n=this._distance,r=Bc.LEFT;this._distance<0&&(n=-this._distance,r=Bc.RIGHT);var i=t.getExteriorRing(),o=Cu.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,Cl.EXTERIOR,Cl.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),l=Cu.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(l,n,Bc.opposite(r),Cl.INTERIOR,Cl.EXTERIOR)}},tp.prototype.isTriangleErodedCompletely=function(t,e){var n=new Qh(t[0],t[1],t[2]),r=n.inCentre();return iu.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},tp.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Cu.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Cl.EXTERIOR,Cl.INTERIOR)},tp.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Ph(t,new Wc(0,Cl.BOUNDARY,e,n));this._curveList.add(r)},tp.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},tp.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<_c.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=_c.MINIMUM_VALID_SIZE&&iu.isCCW(t)&&(o=i,s=r,n=Bc.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},tp.prototype.add=function(t){if(t.isEmpty())return null;t instanceof dc?this.addPolygon(t):t instanceof uc?this.addLineString(t):t instanceof hc?this.addPoint(t):(t instanceof fc||t instanceof Ku||t instanceof mc||t instanceof Yu)&&this.addCollection(t)},tp.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},tp.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function(){};ep.prototype.locate=function(t){},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep};var np=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};np.prototype.next=function(){if(this._atStart)return this._atStart=!1,np.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new xu;var t=this._parent.getGeometryN(this._index++);return t instanceof Yu?(this._subcollectionIterator=new np(t),this._subcollectionIterator.next()):t},np.prototype.remove=function(){throw new Error(this.getClass().getName())},np.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},np.prototype.interfaces_=function(){return[vu]},np.prototype.getClass=function(){return np},np.isAtomic=function(t){return!(t instanceof Yu)};var rp=function(){this._geom=null,this._geom=arguments[0]};rp.prototype.locate=function(t){return rp.locate(t,this._geom)},rp.prototype.interfaces_=function(){return[ep]},rp.prototype.getClass=function(){return rp},rp.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&iu.isPointInRing(t,e.getCoordinates())},rp.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!rp.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(rp.isPointInRing(t,i))return!1}return!0},rp.containsPoint=function(t,e){if(e instanceof dc)return rp.containsPointInPolygon(t,e);if(e instanceof Yu)for(var n=new np(e);n.hasNext();){var r=n.next();if(r!==e&&rp.containsPoint(t,r))return!0}return!1},rp.locate=function(t,e){return e.isEmpty()?Cl.EXTERIOR:rp.containsPoint(t,e)?Cl.INTERIOR:Cl.EXTERIOR};var ip=function(){this._edgeMap=new ju,this._edgeList=null,this._ptInAreaLocation=[Cl.NONE,Cl.NONE]};ip.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},ip.prototype.propagateSideLabels=function(t){for(var e=Cl.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Bc.LEFT)!==Cl.NONE&&(e=r.getLocation(t,Bc.LEFT))}if(e===Cl.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Bc.ON)===Cl.NONE&&a.setLocation(t,Bc.ON,i),a.isArea(t)){var l=a.getLocation(t,Bc.LEFT),u=a.getLocation(t,Bc.RIGHT);if(u!==Cl.NONE){if(u!==i)throw new qc("side location conflict",s.getCoordinate());l===Cl.NONE&&Jl.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=l}else Jl.isTrue(a.getLocation(t,Bc.LEFT)===Cl.NONE,"found single null side"),a.setLocation(t,Bc.RIGHT,i),a.setLocation(t,Bc.LEFT,i)}}},ip.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},ip.prototype.print=function(t){Vl.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},ip.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},ip.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Bc.LEFT);Jl.isTrue(r!==Cl.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();Jl.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Bc.LEFT),l=s.getLocation(t,Bc.RIGHT);if(a===l)return!1;if(l!==i)return!1;i=a}return!0},ip.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},ip.prototype.iterator=function(){return this.getEdges().iterator()},ip.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new wu(this._edgeMap.values())),this._edgeList},ip.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Cl.NONE&&(this._ptInAreaLocation[t]=rp.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},ip.prototype.toString=function(){var t=new Al;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},ip.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},ip.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Cl.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=Cl.NONE;if(e[l])u=Cl.EXTERIOR;else{var c=s.getCoordinate();u=this.getLocation(l,c,t)}a.setAllLocationsIfNull(l,u)}},ip.prototype.getDegree=function(){return this._edgeMap.size()},ip.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},ip.prototype.interfaces_=function(){return[]},ip.prototype.getClass=function(){return ip};var op=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new qc("no outgoing dirEdge found",this.getCoordinate());Jl.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){this.insertEdgeEnd(t,t)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return eh.isNorthern(i)&&eh.isNorthern(o)?n:eh.isNorthern(i)||eh.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(Jl.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Vl.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new wu;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(Bc.LEFT),i=e.getDepth(Bc.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r);if(this.computeDepths(0,n,o)!==i)throw new qc("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var s=arguments[1],a=arguments[2],l=arguments[0];l<s;l++){var u=t._edgeList.get(l);u.setEdgeDepths(Bc.RIGHT,a),a=u.getDepth(Bc.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;r.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Jl.isTrue(null!==n,"found null for first outgoing dirEdge"),Jl.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Cl.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Cl.INTERIOR;break}if(r.isInResult()){t=Cl.EXTERIOR;break}}}if(t===Cl.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===Cl.INTERIOR):(s.isInResult()&&(i=Cl.EXTERIOR),a.isInResult()&&(i=Cl.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Wc(Cl.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Cl.INTERIOR&&o!==Cl.BOUNDARY||this._label.setLocation(i,Cl.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ip),sp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(t){return new Qc(t,new op)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(oh),ap=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};ap.prototype.compareTo=function(t){return ap.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},ap.prototype.interfaces_=function(){return[gl]},ap.prototype.getClass=function(){return ap},ap.orientation=function(t){return 1===Cu.increasingDirection(t)},ap.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=i)===s,p=(u+=o)===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var lp=function(){this._edges=new wu,this._ocaMap=new ju};lp.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},lp.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},lp.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},lp.prototype.iterator=function(){return this._edges.iterator()},lp.prototype.getEdges=function(){return this._edges},lp.prototype.get=function(t){return this._edges.get(t)},lp.prototype.findEqualEdge=function(t){var e=new ap(t.getCoordinates());return this._ocaMap.get(e)},lp.prototype.add=function(t){this._edges.add(t);var e=new ap(t.getCoordinates());this._ocaMap.put(e,t)},lp.prototype.interfaces_=function(){return[]},lp.prototype.getClass=function(){return lp};var up=function(){};up.prototype.processIntersections=function(t,e,n,r){},up.prototype.isDone=function(){},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up};var cp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};cp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(cp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},cp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},cp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},cp.prototype.getLineIntersector=function(){return this._li},cp.prototype.hasProperIntersection=function(){return this._hasProper},cp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},cp.prototype.hasIntersection=function(){return this._hasIntersection},cp.prototype.isDone=function(){return!1},cp.prototype.hasInteriorIntersection=function(){return this._hasInterior},cp.prototype.interfaces_=function(){return[up]},cp.prototype.getClass=function(){return cp},cp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hp=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[1],e=arguments[2];this.coord=new xl(arguments[0]),this.segmentIndex=t,this.dist=e};hp.prototype.getSegmentIndex=function(){return this.segmentIndex},hp.prototype.getCoordinate=function(){return this.coord},hp.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},hp.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},hp.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},hp.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},hp.prototype.getDistance=function(){return this.dist},hp.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},hp.prototype.interfaces_=function(){return[gl]},hp.prototype.getClass=function(){return hp};var pp=function(){this._nodeMap=new ju,this.edge=null,this.edge=arguments[0]};pp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},pp.prototype.iterator=function(){return this._nodeMap.values().iterator()},pp.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},pp.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},pp.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);r||n--;var i=new Array(n).fill(null),o=0;i[o++]=new xl(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)i[o++]=this.edge.pts[s];return r&&(i[o]=e.coord),new gp(i,new Wc(this.edge._label))},pp.prototype.add=function(t,e,n){var r=new hp(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},pp.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp};var dp=function(){};dp.prototype.getChainStartIndices=function(t){var e=0,n=new wu;n.add(new Ol(e));do{var r=this.findChainEnd(t,e);n.add(new Ol(r)),e=r}while(e<t.length-1);return dp.toIntArray(n)},dp.prototype.findChainEnd=function(t,e){for(var n=eh.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&eh.quadrant(t[r-1],t[r])===n;)r++;return r-1},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var fp=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new $l,this.env2=new $l;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new dp;this.startIndex=e.getChainStartIndices(this.pts)};fp.prototype.getCoordinates=function(){return this.pts},fp.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},fp.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},fp.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],arguments[3])}else if(6===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=arguments[5],u=this.pts[r],c=this.pts[i],h=o.pts[s],p=o.pts[a];if(i-r==1&&a-s==1)return l.addIntersections(this.e,r,o.e,s),null;if(this.env1.init(u,c),this.env2.init(h,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+i)/2),f=Math.trunc((s+a)/2);r<d&&(s<f&&this.computeIntersectsForChain(r,d,o,s,f,l),f<a&&this.computeIntersectsForChain(r,d,o,f,a,l)),d<i&&(s<f&&this.computeIntersectsForChain(d,i,o,s,f,l),f<a&&this.computeIntersectsForChain(d,i,o,f,a,l))}},fp.prototype.getStartIndexes=function(){return this.startIndex},fp.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var _p=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},mp={NULL_VALUE:{configurable:!0}};_p.prototype.getDepth=function(t,e){return this._depth[t][e]},_p.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},_p.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==_p.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===_p.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===_p.NULL_VALUE:void 0},_p.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},_p.prototype.getDelta=function(t){return this._depth[t][Bc.RIGHT]-this._depth[t][Bc.LEFT]},_p.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Cl.EXTERIOR:Cl.INTERIOR},_p.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},_p.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==Cl.EXTERIOR&&i!==Cl.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=_p.depthAtLocation(i):t._depth[n][r]+=_p.depthAtLocation(i))}else 3===arguments.length&&arguments[2]===Cl.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.depthAtLocation=function(t){return t===Cl.EXTERIOR?0:t===Cl.INTERIOR?1:_p.NULL_VALUE},mp.NULL_VALUE.get=function(){return-1},Object.defineProperties(_p,mp);var gp=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new pp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new _p,this._depthDelta=0,1===arguments.length)e.call(this,arguments[0],null);else if(2===arguments.length){var n=arguments[1];this.pts=arguments[0],this._label=n}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Wc.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new fp(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new $l;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new xl(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;a<this.pts.length&&i.equals2D(this.pts[a])&&(o=a,s=0),this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new Al;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Bc.ON),e.getLocation(1,Bc.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Bc.LEFT),e.getLocation(1,Bc.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Bc.RIGHT),e.getLocation(1,Bc.RIGHT),2))},e}(Jc),yp=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new lp,this._bufParams=t||null};yp.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},yp.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Wc(t.getLabel())).flip(),n.merge(r);var i=yp.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(yp.depthDelta(t.getLabel()))},yp.prototype.buildSubgraphs=function(t,e){for(var n=new wu,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Yh(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},yp.prototype.createSubgraphs=function(t){for(var e=new wu,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Hc;i.create(r),e.add(i)}}return _h.sort(e,_h.reverseOrder()),e},yp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},yp.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new zh,n=new eu;return n.setPrecisionModel(t),e.setSegmentIntersector(new cp(n)),e},yp.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Xh(n,this._bufParams),i=new tp(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new sh(new sp),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new ah(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},yp.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new gp(i.getCoordinates(),new Wc(s));this.insertUniqueEdge(a)}}},yp.prototype.setNoder=function(t){this._workingNoder=t},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp},yp.depthDelta=function(t){var e=t.getLocation(0,Bc.LEFT),n=t.getLocation(0,Bc.RIGHT);return e===Cl.INTERIOR&&n===Cl.EXTERIOR?1:e===Cl.EXTERIOR&&n===Cl.INTERIOR?-1:0},yp.convertSegStrings=function(t){for(var e=new Oc,n=new wu;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var vp=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[1];this._noder=arguments[0],this._scaleFactor=t,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var e=arguments[1],n=arguments[2],r=arguments[3];this._noder=arguments[0],this._scaleFactor=e,this._offsetX=n,this._offsetY=r,this._isScaled=!this.isIntegerPrecision()}};vp.prototype.rescale=function(){var t=this;if(kl(arguments[0],gu))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],i=0;i<r.length;i++)r[i].x=r[i].x/t._scaleFactor+t._offsetX,r[i].y=r[i].y/t._scaleFactor+t._offsetY;2===r.length&&r[0].equals2D(r[1])&&Vl.out.println(r)}},vp.prototype.scale=function(){var t=this;if(kl(arguments[0],gu)){for(var e=arguments[0],n=new wu,r=e.iterator();r.hasNext();){var i=r.next();n.add(new Ph(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new xl(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);return Cu.removeRepeatedPoints(s)}},vp.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},vp.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},vp.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},vp.prototype.interfaces_=function(){return[Dh]},vp.prototype.getClass=function(){return vp};var bp=function(){this._li=new eu,this._segStrings=null,this._segStrings=arguments[0]},xp={fact:{configurable:!0}};bp.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next().getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var r=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var o=i.next().getCoordinates(),s=1;s<o.length-1;s++)if(o[s].equals(r))throw new Yl("found endpt/interior pt intersection at index "+s+" :pt "+r)},bp.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),l=s.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<l.length-1;c++)t.checkInteriorIntersections(o,u,s,c);else if(4===arguments.length){var h=arguments[0],p=arguments[1],d=arguments[2],f=arguments[3];if(h===d&&p===f)return null;var _=h.getCoordinates()[p],m=h.getCoordinates()[p+1],g=d.getCoordinates()[f],y=d.getCoordinates()[f+1];if(this._li.computeIntersection(_,m,g,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,_,m)||this.hasInteriorIntersection(this._li,g,y)))throw new Yl("found non-noded intersection at "+_+"-"+m+" and "+g+"-"+y)}},bp.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},bp.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0].getCoordinates(),i=0;i<r.length-2;i++)t.checkCollapse(r[i],r[i+1],r[i+2])},bp.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},bp.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Yl("found non-noded collapse at "+bp.fact.createLineString([t,e,n]))},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp},xp.fact.get=function(){return new Oc},Object.defineProperties(bp,xp);var wp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new fl("Scale factor must be non-zero");1!==e&&(this._pt=new xl(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new xl,this._p1Scaled=new xl),this.initCorners(this._pt)},Ep={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};wp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Jl.isTrue(!(s&&a),"Found bad envelope test"),a},wp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new xl(this._maxx,this._maxy),this._corner[1]=new xl(this._minx,this._maxy),this._corner[2]=new xl(this._minx,this._miny),this._corner[3]=new xl(this._maxx,this._miny)},wp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},wp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},wp.prototype.getCoordinate=function(){return this._originalPt},wp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},wp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=wp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new $l(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},wp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},wp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},wp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},wp.prototype.interfaces_=function(){return[]},wp.prototype.getClass=function(){return wp},Ep.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(wp,Ep);var Sp=function(){this.tempEnv1=new $l,this.selectedSegment=new Ah};Sp.prototype.select=function(){1===arguments.length||2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp};var Cp=function(){this._index=null,this._index=arguments[0]},Ip={HotPixelSnapAction:{configurable:!0}};Cp.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getSafeEnvelope(),i=new kp(t,e,n);return this._index.query(r,{interfaces_:function(){return[hh]},visitItem:function(t){t.select(r,i)}}),i.isNodeAdded()}},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Ip.HotPixelSnapAction.get=function(){return kp},Object.defineProperties(Cp,Ip);var kp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[1],n=arguments[2];this._hotPixel=arguments[0],this._parentEdge=e,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sp),Tp=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new wu};Tp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Tp.prototype.isDone=function(){return!1},Tp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Tp.prototype.interfaces_=function(){return[up]},Tp.prototype.getClass=function(){return Tp};var Pp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new eu,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Pp.prototype.checkCorrectness=function(t){var e=Ph.getNodedSubstrings(t),n=new bp(e);try{n.checkValid()}catch(t){if(!(t instanceof Bl))throw t;t.printStackTrace()}},Pp.prototype.getNodedSubstrings=function(){return Ph.getNodedSubstrings(this._nodedSegStrings)},Pp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Pp.prototype.findInteriorIntersections=function(t,e){var n=new Tp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Pp.prototype.computeVertexSnaps=function(){var t=this;if(kl(arguments[0],gu))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof Ph)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length;o++){var s=new wp(i[o],t._scaleFactor,t._li);t._pointSnapper.snap(s,r,o)&&r.addIntersection(i[o],o)}},Pp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new zh,this._pointSnapper=new Cp(this._noder.getIndex()),this.snapRound(t,this._li)},Pp.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new wp(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},Pp.prototype.interfaces_=function(){return[Dh]},Pp.prototype.getClass=function(){return Pp};var Ap=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Bh,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var t=arguments[1];this._argGeom=arguments[0],this._bufParams=t}},Op={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ap.prototype.bufferFixedPrecision=function(t){var e=new vp(new Pp(new kc(1)),t.getScale()),n=new yp(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Ap.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Ap.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof qc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=Ap.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),r=new kc(n);this.bufferFixedPrecision(r)}},Ap.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===kc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Ap.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Ap.prototype.bufferOriginalPrecision=function(){try{var t=new yp(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Yl))throw t;this._saveException=t}},Ap.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Ap.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new Ap(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof au&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new Ap(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Bh&&arguments[0]instanceof au&&"number"==typeof arguments[1]){var i=arguments[1];return new Ap(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],l=new Ap(arguments[0]);return l.setQuadrantSegments(s),l.setEndCapStyle(a),l.getResultGeometry(o)}},Ap.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Tl.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},Op.CAP_ROUND.get=function(){return Bh.CAP_ROUND},Op.CAP_BUTT.get=function(){return Bh.CAP_FLAT},Op.CAP_FLAT.get=function(){return Bh.CAP_FLAT},Op.CAP_SQUARE.get=function(){return Bh.CAP_SQUARE},Op.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ap,Op);var Mp=function(){this._pt=[new xl,new xl],this._distance=_l.NaN,this._isNull=!0};Mp.prototype.getCoordinates=function(){return this._pt},Mp.prototype.getCoordinate=function(t){return this._pt[t]},Mp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Mp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},Mp.prototype.getDistance=function(){return this._distance},Mp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp};var Lp=function(){};Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.computeDistance=function(){if(arguments[2]instanceof Mp&&arguments[0]instanceof uc&&arguments[1]instanceof xl)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new Ah,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof Mp&&arguments[0]instanceof dc&&arguments[1]instanceof xl){var s=arguments[0],a=arguments[1],l=arguments[2];Lp.computeDistance(s.getExteriorRing(),a,l);for(var u=0;u<s.getNumInteriorRing();u++)Lp.computeDistance(s.getInteriorRingN(u),a,l)}else if(arguments[2]instanceof Mp&&arguments[0]instanceof au&&arguments[1]instanceof xl){var c=arguments[0],h=arguments[1],p=arguments[2];if(c instanceof uc)Lp.computeDistance(c,h,p);else if(c instanceof dc)Lp.computeDistance(c,h,p);else if(c instanceof Yu)for(var d=c,f=0;f<d.getNumGeometries();f++){var _=d.getGeometryN(f);Lp.computeDistance(_,h,p)}else p.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof Mp&&arguments[0]instanceof Ah&&arguments[1]instanceof xl){var m=arguments[1],g=arguments[2],y=arguments[0].closestPoint(m);g.setMinimum(y,m)}};var Np=function(t){this._maxPtDist=new Mp,this._inputGeom=t||null},Dp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Np.prototype.computeMaxMidpointDistance=function(t){var e=new zp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Np.prototype.computeMaxVertexDistance=function(t){var e=new Rp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Np.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Np.prototype.getDistancePoints=function(){return this._maxPtDist},Np.prototype.interfaces_=function(){return[]},Np.prototype.getClass=function(){return Np},Dp.MaxPointDistanceFilter.get=function(){return Rp},Dp.MaxMidpointDistanceFilter.get=function(){return zp},Object.defineProperties(Np,Dp);var Rp=function(t){this._maxPtDist=new Mp,this._minPtDist=new Mp,this._geom=t||null};Rp.prototype.filter=function(t){this._minPtDist.initialize(),Lp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Rp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rp.prototype.interfaces_=function(){return[cu]},Rp.prototype.getClass=function(){return Rp};var zp=function(t){this._maxPtDist=new Mp,this._minPtDist=new Mp,this._geom=t||null};zp.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new xl((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Lp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},zp.prototype.isDone=function(){return!1},zp.prototype.isGeometryChanged=function(){return!1},zp.prototype.getMaxPointDistance=function(){return this._maxPtDist},zp.prototype.interfaces_=function(){return[Xu]},zp.prototype.getClass=function(){return zp};var Fp=function(t){this._comps=t||null};Fp.prototype.filter=function(t){t instanceof dc&&this._comps.add(t)},Fp.prototype.interfaces_=function(){return[Wu]},Fp.prototype.getClass=function(){return Fp},Fp.getPolygons=function(){if(1===arguments.length)return Fp.getPolygons(arguments[0],new wu);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof dc?e.add(t):t instanceof Yu&&t.apply(new Fp(e)),e}};var Bp=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var t=arguments[1];this._lines=arguments[0],this._isForcedToLineString=t}};Bp.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof _c){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof uc&&this._lines.add(t)},Bp.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Bp.prototype.interfaces_=function(){return[su]},Bp.prototype.getClass=function(){return Bp},Bp.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Bp.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Bp.getLines(e,n))}},Bp.getLines=function(){if(1===arguments.length)return Bp.getLines(arguments[0],!1);if(2===arguments.length){if(kl(arguments[0],gu)&&kl(arguments[1],gu)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();Bp.getLines(n,t)}return t}if(arguments[0]instanceof au&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=new wu;return r.apply(new Bp(o,i)),o}if(arguments[0]instanceof au&&kl(arguments[1],gu)){var s=arguments[0],a=arguments[1];return s instanceof uc?a.add(s):s.apply(new Bp(a)),a}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&kl(arguments[0],gu)&&kl(arguments[1],gu)){for(var l=arguments[1],u=arguments[2],c=arguments[0].iterator();c.hasNext();){var h=c.next();Bp.getLines(h,l,u)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof au&&kl(arguments[1],gu)){var p=arguments[1];return arguments[0].apply(new Bp(p,arguments[2])),p}}};var jp=function(){if(this._boundaryRule=hu.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new fl("Rule must be non-null");this._boundaryRule=t}};jp.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof xl&&arguments[1]instanceof dc){var e=arguments[0],n=arguments[1];if(n.isEmpty())return Cl.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===Cl.EXTERIOR)return Cl.EXTERIOR;if(i===Cl.BOUNDARY)return Cl.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===Cl.INTERIOR)return Cl.EXTERIOR;if(a===Cl.BOUNDARY)return Cl.BOUNDARY}return Cl.INTERIOR}if(arguments[0]instanceof xl&&arguments[1]instanceof uc){var l=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(l))return Cl.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!l.equals(c[0])&&!l.equals(c[c.length-1])?iu.isOnLine(l,c)?Cl.INTERIOR:Cl.EXTERIOR:Cl.BOUNDARY}if(arguments[0]instanceof xl&&arguments[1]instanceof hc){var h=arguments[0];return arguments[1].getCoordinate().equals2D(h)?Cl.INTERIOR:Cl.EXTERIOR}},jp.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?iu.locatePointInRing(t,e.getCoordinates()):Cl.EXTERIOR},jp.prototype.intersects=function(t,e){return this.locate(t,e)!==Cl.EXTERIOR},jp.prototype.updateLocationInfo=function(t){t===Cl.INTERIOR&&(this._isIn=!0),t===Cl.BOUNDARY&&this._numBoundaries++},jp.prototype.computeLocation=function(t,e){var n=this;if(e instanceof hc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof uc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof dc)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ku)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof mc)for(var s=e,a=0;a<s.getNumGeometries();a++){var l=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,l))}else if(e instanceof Yu)for(var u=new np(e);u.hasNext();){var c=u.next();c!==e&&n.computeLocation(t,c)}},jp.prototype.locate=function(t,e){return e.isEmpty()?Cl.EXTERIOR:e instanceof uc||e instanceof dc?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Cl.BOUNDARY:this._numBoundaries>0||this._isIn?Cl.INTERIOR:Cl.EXTERIOR)},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp};var Vp=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[1],n=arguments[2];this._component=arguments[0],this._segIndex=e,this._pt=n}},Up={INSIDE_AREA:{configurable:!0}};Vp.prototype.isInsideArea=function(){return this._segIndex===Vp.INSIDE_AREA},Vp.prototype.getCoordinate=function(){return this._pt},Vp.prototype.getGeometryComponent=function(){return this._component},Vp.prototype.getSegmentIndex=function(){return this._segIndex},Vp.prototype.interfaces_=function(){return[]},Vp.prototype.getClass=function(){return Vp},Up.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Vp,Up);var $p=function(t){this._pts=t||null};$p.prototype.filter=function(t){t instanceof hc&&this._pts.add(t)},$p.prototype.interfaces_=function(){return[Wu]},$p.prototype.getClass=function(){return $p},$p.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof hc?_h.singletonList(t):$p.getPoints(t,new wu)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof hc?n.add(e):e instanceof Yu&&e.apply(new $p(n)),n}};var qp=function(){this._locations=null,this._locations=arguments[0]};qp.prototype.filter=function(t){(t instanceof hc||t instanceof uc||t instanceof dc)&&this._locations.add(new Vp(t,0,t.getCoordinate()))},qp.prototype.interfaces_=function(){return[Wu]},qp.prototype.getClass=function(){return qp},qp.getLocations=function(t){var e=new wu;return t.apply(new qp(e)),e};var Gp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new jp,this._minDistanceLocation=null,this._minDistance=_l.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e,this._terminateDistance=n}};Gp.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=Fp.getPolygons(this._geom[n]);if(o.size()>0){var s=qp.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&kl(arguments[0],bu)&&kl(arguments[1],bu)){for(var a=arguments[0],l=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),p=0;p<l.size();p++)if(t.computeContainmentDistance(h,l.get(p),u),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Vp&&arguments[1]instanceof dc){var d=arguments[0],f=arguments[1],_=arguments[2],m=d.getCoordinate();if(Cl.EXTERIOR!==this._ptLocator.locate(m,f))return this._minDistance=0,_[0]=d,_[1]=new Vp(f,m),null}},Gp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Gp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Bp.getLines(this._geom[0]),n=Bp.getLines(this._geom[1]),r=$p.getPoints(this._geom[0]),i=$p.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Gp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Gp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Gp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Gp.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof uc&&arguments[1]instanceof hc){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=iu.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var l=new Ah(i[s],i[s+1]).closestPoint(o);r[0]=new Vp(e,s,l),r[1]=new Vp(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof uc&&arguments[1]instanceof uc){var u=arguments[0],c=arguments[1],h=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var p=u.getCoordinates(),d=c.getCoordinates(),f=0;f<p.length-1;f++)for(var _=0;_<d.length-1;_++){var m=iu.distanceLineLine(p[f],p[f+1],d[_],d[_+1]);if(m<t._minDistance){t._minDistance=m;var g=new Ah(p[f],p[f+1]),y=new Ah(d[_],d[_+1]),v=g.closestPoints(y);h[0]=new Vp(u,f,v[0]),h[1]=new Vp(c,_,v[1])}if(t._minDistance<=t._terminateDistance)return null}}},Gp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),l=o.getCoordinate().distance(a.getCoordinate());if(l<r._minDistance&&(r._minDistance=l,n[0]=new Vp(o,0,o.getCoordinate()),n[1]=new Vp(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},Gp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new fl("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Gp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Gp.prototype.interfaces_=function(){return[]},Gp.prototype.getClass=function(){return Gp},Gp.distance=function(t,e){return new Gp(t,e).distance()},Gp.isWithinDistance=function(t,e,n){return new Gp(t,e,n).distance()<=n},Gp.nearestPoints=function(t,e){return new Gp(t,e).nearestPoints()};var Hp=function(){this._pt=[new xl,new xl],this._distance=_l.NaN,this._isNull=!0};Hp.prototype.getCoordinates=function(){return this._pt},Hp.prototype.getCoordinate=function(t){return this._pt[t]},Hp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Hp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},Hp.prototype.toString=function(){return Xl.toLineString(this._pt[0],this._pt[1])},Hp.prototype.getDistance=function(){return this._distance},Hp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp};var Zp=function(){};Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.computeDistance=function(){if(arguments[2]instanceof Hp&&arguments[0]instanceof uc&&arguments[1]instanceof xl)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Ah,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Hp&&arguments[0]instanceof dc&&arguments[1]instanceof xl){var a=arguments[0],l=arguments[1],u=arguments[2];Zp.computeDistance(a.getExteriorRing(),l,u);for(var c=0;c<a.getNumInteriorRing();c++)Zp.computeDistance(a.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Hp&&arguments[0]instanceof au&&arguments[1]instanceof xl){var h=arguments[0],p=arguments[1],d=arguments[2];if(h instanceof uc)Zp.computeDistance(h,p,d);else if(h instanceof dc)Zp.computeDistance(h,p,d);else if(h instanceof Yu)for(var f=h,_=0;_<f.getNumGeometries();_++){var m=f.getGeometryN(_);Zp.computeDistance(m,p,d)}else d.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Hp&&arguments[0]instanceof Ah&&arguments[1]instanceof xl){var g=arguments[1],y=arguments[2],v=arguments[0].closestPoint(g);y.setMinimum(v,g)}};var Wp=function(){this._g0=null,this._g1=null,this._ptDist=new Hp,this._densifyFrac=0;var t=arguments[1];this._g0=arguments[0],this._g1=t},Xp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Wp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Wp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new fl("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Wp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Wp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Wp.prototype.computeOrientedDistance=function(t,e,n){var r=new Yp(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Kp(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Wp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp},Wp.distance=function(){if(2===arguments.length)return new Wp(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Wp(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Xp.MaxPointDistanceFilter.get=function(){return Yp},Xp.MaxDensifiedByFractionDistanceFilter.get=function(){return Kp},Object.defineProperties(Wp,Xp);var Yp=function(){this._maxPtDist=new Hp,this._minPtDist=new Hp,this._euclideanDist=new Zp,this._geom=null,this._geom=arguments[0]};Yp.prototype.filter=function(t){this._minPtDist.initialize(),Zp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Yp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Yp.prototype.interfaces_=function(){return[cu]},Yp.prototype.getClass=function(){return Yp};var Kp=function(){this._maxPtDist=new Hp,this._minPtDist=new Hp,this._geom=null,this._numSubSegs=0;var t=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/t))};Kp.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var l=new xl(r.x+a*o,r.y+a*s);n._minPtDist.initialize(),Zp.computeDistance(n._geom,l,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},Kp.prototype.isDone=function(){return!1},Kp.prototype.isGeometryChanged=function(){return!1},Kp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Kp.prototype.interfaces_=function(){return[Xu]},Kp.prototype.getClass=function(){return Kp};var Jp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Qp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Jp.prototype.checkMaximumDistance=function(t,e,n){var r=new Wp(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Xl.toLineString(i[0],i[1])+")"}},Jp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Jp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Jp.VERBOSE&&Vl.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Jp.prototype.checkNegativeValid=function(){if(!(this._input instanceof dc||this._input instanceof mc||this._input instanceof Yu))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Jp.prototype.getErrorIndicator=function(){return this._errorIndicator},Jp.prototype.checkMinimumDistance=function(t,e,n){var r=new Gp(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Xl.toLineString(i[0],i[1])+" )"}},Jp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Jp.prototype.getErrorLocation=function(){return this._errorLocation},Jp.prototype.getPolygonLines=function(t){for(var e=new wu,n=new Bp(e),r=Fp.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Jp.prototype.getErrorMessage=function(){return this._errMsg},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Qp.VERBOSE.get=function(){return!1},Qp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Jp,Qp);var td=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},ed={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};td.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},td.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*td.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new $l(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new $l(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},td.prototype.checkDistance=function(){var t=new Jp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},td.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},td.prototype.checkPolygonal=function(){this._result instanceof dc||this._result instanceof mc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},td.prototype.getErrorIndicator=function(){return this._errorIndicator},td.prototype.getErrorLocation=function(){return this._errorLocation},td.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},td.prototype.report=function(t){if(!td.VERBOSE)return null;Vl.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},td.prototype.getErrorMessage=function(){return this._errorMsg},td.prototype.interfaces_=function(){return[]},td.prototype.getClass=function(){return td},td.isValidMsg=function(t,e,n){var r=new td(t,e,n);return r.isValid()?null:r.getErrorMessage()},td.isValid=function(t,e,n){return!!new td(t,e,n).isValid()},ed.VERBOSE.get=function(){return!1},ed.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(td,ed);var nd=function(){this._pts=null,this._data=null;var t=arguments[1];this._pts=arguments[0],this._data=t};nd.prototype.getCoordinates=function(){return this._pts},nd.prototype.size=function(){return this._pts.length},nd.prototype.getCoordinate=function(t){return this._pts[t]},nd.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},nd.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Ih.octant(this.getCoordinate(t),this.getCoordinate(t+1))},nd.prototype.setData=function(t){this._data=t},nd.prototype.getData=function(){return this._data},nd.prototype.toString=function(){return Xl.toLineString(new wc(this._pts))},nd.prototype.interfaces_=function(){return[kh]},nd.prototype.getClass=function(){return nd};var rd=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new wu,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};rd.prototype.getInteriorIntersection=function(){return this._interiorIntersection},rd.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},rd.prototype.getIntersectionSegments=function(){return this._intSegments},rd.prototype.count=function(){return this._intersectionCount},rd.prototype.getIntersections=function(){return this._intersections},rd.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},rd.prototype.setKeepIntersections=function(t){this._keepIntersections=t},rd.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},rd.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},rd.prototype.hasIntersection=function(){return null!==this._interiorIntersection},rd.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},rd.prototype.interfaces_=function(){return[up]},rd.prototype.getClass=function(){return rd},rd.createAllIntersectionsFinder=function(t){var e=new rd(t);return e.setFindAllIntersections(!0),e},rd.createAnyIntersectionFinder=function(t){return new rd(t)},rd.createIntersectionCounter=function(t){var e=new rd(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var id=function(){this._li=new eu,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};id.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},id.prototype.getIntersections=function(){return this._segInt.getIntersections()},id.prototype.isValid=function(){return this.execute(),this._isValid},id.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},id.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new rd(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new zh;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},id.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new qc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},id.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Xl.toLineString(t[0],t[1])+" and "+Xl.toLineString(t[2],t[3])},id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id},id.computeIntersections=function(t){var e=new id(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var od=function t(){this._nv=null,this._nv=new id(t.toSegmentStrings(arguments[0]))};od.prototype.checkValid=function(){this._nv.checkValid()},od.prototype.interfaces_=function(){return[]},od.prototype.getClass=function(){return od},od.toSegmentStrings=function(t){for(var e=new wu,n=t.iterator();n.hasNext();){var r=n.next();e.add(new nd(r.getCoordinates(),r))}return e},od.checkValid=function(t){new od(t).checkValid()};var sd=function(t){this._mapOp=t};sd.prototype.map=function(t){for(var e=new wu,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Oc.toGeometryArray(e))},sd.prototype.interfaces_=function(){return[]},sd.prototype.getClass=function(){return sd},sd.map=function(t,e){return new sd(e).map(t)};var ad=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new wu,this._resultLineList=new wu;var t=arguments[1],e=arguments[2];this._op=arguments[0],this._geometryFactory=t,this._ptLocator=e};ad.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},ad.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},ad.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},ad.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Vd.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},ad.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},ad.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},ad.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},ad.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(Jl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Vd.isResultOfOp(r,e)&&e===Vd.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},ad.prototype.interfaces_=function(){return[]},ad.prototype.getClass=function(){return ad};var ld=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new wu;var t=arguments[1];this._op=arguments[0],this._geometryFactory=t};ld.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},ld.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Vd.INTERSECTION)){var r=n.getLabel();Vd.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},ld.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld};var ud=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};ud.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},ud.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof _c&&!r.isEmpty()||(n=!1);for(var i=new wu,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof _c||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new wu;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},ud.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},ud.prototype.getInputGeometry=function(){return this._inputGeom},ud.prototype.transformMultiLineString=function(t,e){for(var n=new wu,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},ud.prototype.transformCoordinates=function(t,e){return this.copy(t)},ud.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},ud.prototype.transformMultiPoint=function(t,e){for(var n=new wu,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},ud.prototype.transformMultiPolygon=function(t,e){for(var n=new wu,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},ud.prototype.copy=function(t){return t.copy()},ud.prototype.transformGeometryCollection=function(t,e){for(var n=new wu,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Oc.toGeometryArray(n)):this._factory.buildGeometry(n)},ud.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof hc)return this.transformPoint(t,null);if(t instanceof fc)return this.transformMultiPoint(t,null);if(t instanceof _c)return this.transformLinearRing(t,null);if(t instanceof uc)return this.transformLineString(t,null);if(t instanceof Ku)return this.transformMultiLineString(t,null);if(t instanceof dc)return this.transformPolygon(t,null);if(t instanceof mc)return this.transformMultiPolygon(t,null);if(t instanceof Yu)return this.transformGeometryCollection(t,null);throw new fl("Unknown Geometry subtype: "+t.getClass().getName())},ud.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud};var cd=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Ah,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof uc&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};cd.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new xl(o)),0===r&&this._isClosed&&t.set(t.size()-1,new xl(o)))}},cd.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},cd.prototype.snapTo=function(t){var e=new Su(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},cd.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new xl(i),!1)}},cd.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=_l.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i},cd.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},cd.prototype.interfaces_=function(){return[]},cd.prototype.getClass=function(){return cd},cd.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var hd=function(t){this._srcGeom=t||null},pd={SNAP_PRECISION_FACTOR:{configurable:!0}};hd.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new dd(e,n).transform(this._srcGeom)},hd.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new dd(t,n,!0).transform(this._srcGeom),i=r;return e&&kl(i,pc)&&(i=r.buffer(0)),i},hd.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},hd.prototype.extractTargetCoordinates=function(t){for(var e=new $u,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},hd.prototype.computeMinimumSegmentLength=function(t){for(var e=_l.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},hd.prototype.interfaces_=function(){return[]},hd.prototype.getClass=function(){return hd},hd.snap=function(t,e,n){var r=new Array(2).fill(null),i=new hd(t);r[0]=i.snapTo(e,n);var o=new hd(e);return r[1]=o.snapTo(r[0],n),r},hd.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=hd.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===kc.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[1];return Math.min(hd.computeOverlaySnapTolerance(arguments[0]),hd.computeOverlaySnapTolerance(i))}},hd.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*hd.SNAP_PRECISION_FACTOR},hd.snapToSelf=function(t,e,n){return new hd(t).snapToSelf(e,n)},pd.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(hd,pd);var dd=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(t,e){var n=new cd(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ud),fd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};fd.prototype.getCommon=function(){return _l.longBitsToDouble(this._commonBits)},fd.prototype.add=function(t){var e=_l.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=fd.signExpBits(this._commonBits),this._isFirst=!1,null):fd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=fd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=fd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},fd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_l.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_l.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd},fd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},fd.signExpBits=function(t){return t>>52},fd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},fd.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(fd.getBit(t,r)!==fd.getBit(e,r))return n;n++}return 52};var _d=function(){this._commonCoord=null,this._ccFilter=new gd},md={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};_d.prototype.addCommonBits=function(t){var e=new yd(this._commonCoord);t.apply(e),t.geometryChanged()},_d.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new xl(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new yd(e);return t.apply(n),t.geometryChanged(),t},_d.prototype.getCommonCoordinate=function(){return this._commonCoord},_d.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},_d.prototype.interfaces_=function(){return[]},_d.prototype.getClass=function(){return _d},md.CommonCoordinateFilter.get=function(){return gd},md.Translater.get=function(){return yd},Object.defineProperties(_d,md);var gd=function(){this._commonBitsX=new fd,this._commonBitsY=new fd};gd.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},gd.prototype.getCommonCoordinate=function(){return new xl(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},gd.prototype.interfaces_=function(){return[cu]},gd.prototype.getClass=function(){return gd};var yd=function(){this.trans=null,this.trans=arguments[0]};yd.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},yd.prototype.isDone=function(){return!1},yd.prototype.isGeometryChanged=function(){return!0},yd.prototype.interfaces_=function(){return[Xu]},yd.prototype.getClass=function(){return yd};var vd=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};vd.prototype.selfSnap=function(t){return new hd(t).snapTo(t,this._snapTolerance)},vd.prototype.removeCommonBits=function(t){this._cbr=new _d,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},vd.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},vd.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Vd.overlayOp(e[0],e[1],t);return this.prepareResult(n)},vd.prototype.checkValid=function(t){t.isValid()||Vl.out.println("Snapped geometry is invalid")},vd.prototype.computeSnapTolerance=function(){this._snapTolerance=hd.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},vd.prototype.snap=function(t){var e=this.removeCommonBits(t);return hd.snap(e[0],e[1],this._snapTolerance)},vd.prototype.interfaces_=function(){return[]},vd.prototype.getClass=function(){return vd},vd.overlayOp=function(t,e,n){return new vd(t,e).getResultGeometry(n)},vd.union=function(t,e){return vd.overlayOp(t,e,Vd.UNION)},vd.intersection=function(t,e){return vd.overlayOp(t,e,Vd.INTERSECTION)},vd.symDifference=function(t,e){return vd.overlayOp(t,e,Vd.SYMDIFFERENCE)},vd.difference=function(t,e){return vd.overlayOp(t,e,Vd.DIFFERENCE)};var bd=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};bd.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Vd.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Yl))throw t;r=t}if(!n)try{e=vd.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Yl?r:t}return e},bd.prototype.interfaces_=function(){return[]},bd.prototype.getClass=function(){return bd},bd.overlayOp=function(t,e,n){return new bd(t,e).getResultGeometry(n)},bd.union=function(t,e){return bd.overlayOp(t,e,Vd.UNION)},bd.intersection=function(t,e){return bd.overlayOp(t,e,Vd.INTERSECTION)},bd.symDifference=function(t,e){return bd.overlayOp(t,e,Vd.SYMDIFFERENCE)},bd.difference=function(t,e){return bd.overlayOp(t,e,Vd.DIFFERENCE)};var xd=function(){this.mce=null,this.chainIndex=null;var t=arguments[1];this.mce=arguments[0],this.chainIndex=t};xd.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},xd.prototype.interfaces_=function(){return[]},xd.prototype.getClass=function(){return xd};var wd=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Ed={INSERT:{configurable:!0},DELETE:{configurable:!0}};wd.prototype.isDelete=function(){return this._eventType===wd.DELETE},wd.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},wd.prototype.getObject=function(){return this._obj},wd.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},wd.prototype.getInsertEvent=function(){return this._insertEvent},wd.prototype.isInsert=function(){return this._eventType===wd.INSERT},wd.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},wd.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},wd.prototype.interfaces_=function(){return[gl]},wd.prototype.getClass=function(){return wd},Ed.INSERT.get=function(){return 1},Ed.DELETE.get=function(){return 2},Object.defineProperties(wd,Ed);var Sd=function(){};Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd};var Cd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[1],e=arguments[2];this._li=arguments[0],this._includeProper=t,this._recordIsolated=e};Cd.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Cd.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Cd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Cd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},Cd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Cd.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},Cd.prototype.hasProperIntersection=function(){return this._hasProper},Cd.prototype.hasIntersection=function(){return this._hasIntersection},Cd.prototype.isDone=function(){return this._isDone},Cd.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},Cd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},Cd.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},Cd.prototype.interfaces_=function(){return[]},Cd.prototype.getClass=function(){return Cd},Cd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Id=function(t){function e(){t.call(this),this.events=new wu,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){_h.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Cd&&kl(arguments[0],bu)&&kl(arguments[1],bu)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&kl(arguments[0],bu)&&arguments[1]instanceof Cd){var a=arguments[0],l=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(l)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new xd(n,i),s=new wd(e,n.getMinX(i),o);this.events.add(s),this.events.add(new wd(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.addEdge(n,n)}else if(2===arguments.length)for(var r=arguments[1],i=arguments[0].iterator();i.hasNext();){var o=i.next();t.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sd),kd=function(){this._min=_l.POSITIVE_INFINITY,this._max=_l.NEGATIVE_INFINITY},Td={NodeComparator:{configurable:!0}};kd.prototype.getMin=function(){return this._min},kd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},kd.prototype.getMax=function(){return this._max},kd.prototype.toString=function(){return Xl.toLineString(new xl(this._min,0),new xl(this._max,0))},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd},Td.NodeComparator.get=function(){return Pd},Object.defineProperties(kd,Td);var Pd=function(){};Pd.prototype.compare=function(t,e){var n=(t._min+t._max)/2,r=(e._min+e._max)/2;return n<r?-1:n>r?1:0},Pd.prototype.interfaces_=function(){return[vl]},Pd.prototype.getClass=function(){return Pd};var Ad=function(t){function e(){t.call(this),this._item=null;var e=arguments[1],n=arguments[2];this._min=arguments[0],this._max=e,this._item=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kd),Od=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[1];this._node1=arguments[0],this._node2=e,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kd),Md=function(){this._leaves=new wu,this._root=null,this._level=0};Md.prototype.buildTree=function(){_h.sort(this._leaves,new kd.NodeComparator);for(var t=this._leaves,e=null,n=new wu;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Md.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Ad(t,e,n))},Md.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Md.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Md.prototype.printNode=function(t){Vl.out.println(Xl.toLineString(new xl(t._min,this._level),new xl(t._max,this._level)))},Md.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Md.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new Od(t.get(n),t.get(n+1));e.add(i)}}},Md.prototype.interfaces_=function(){return[]},Md.prototype.getClass=function(){return Md};var Ld=function(){this._items=new wu};Ld.prototype.visitItem=function(t){this._items.add(t)},Ld.prototype.getItems=function(){return this._items},Ld.prototype.interfaces_=function(){return[hh]},Ld.prototype.getClass=function(){return Ld};var Nd=function(){this._index=null;var t=arguments[0];if(!kl(t,pc))throw new fl("Argument must be Polygonal");this._index=new zd(t)},Dd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Nd.prototype.locate=function(t){var e=new ru(t),n=new Rd(e);return this._index.query(t.y,t.y,n),e.getLocation()},Nd.prototype.interfaces_=function(){return[ep]},Nd.prototype.getClass=function(){return Nd},Dd.SegmentVisitor.get=function(){return Rd},Dd.IntervalIndexedGeometry.get=function(){return zd},Object.defineProperties(Nd,Dd);var Rd=function(){this._counter=null,this._counter=arguments[0]};Rd.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Rd.prototype.interfaces_=function(){return[hh]},Rd.prototype.getClass=function(){return Rd};var zd=function(){this._index=new Md,this.init(arguments[0])};zd.prototype.init=function(t){for(var e=Bp.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},zd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Ah(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},zd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ld;return this._index.query(t,e,n),n.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},zd.prototype.interfaces_=function(){return[]},zd.prototype.getClass=function(){return zd};var Fd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Ic,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new jp,2===arguments.length){var e=arguments[1],n=hu.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)}else if(3===arguments.length){var r=arguments[1],i=arguments[2];this._argIndex=arguments[0],this._parentGeom=r,this._boundaryNodeRule=i,null!==r&&this.add(r)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Bc.ON)===Cl.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var t=arguments[1],e=arguments[2],n=new Cd(arguments[0],!0,!1);return n.setIsDoneIfProperInt(e),this.createEdgeSetIntersector().computeIntersections(this._edges,n,t||!(this._parentGeom instanceof _c||this._parentGeom instanceof dc||this._parentGeom instanceof mc)),this.addSelfIntersectionNodes(this._argIndex),n}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new Cd(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof hc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Cl.INTERIOR)}else arguments[0]instanceof xl&&this.insertPoint(this._argIndex,arguments[0],Cl.INTERIOR)},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Cl.EXTERIOR,Cl.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Cl.INTERIOR,Cl.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Cl.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Cl.BOUNDARY)},e.prototype.addLineString=function(t){var e=Cu.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new gp(e,new Wc(this._argIndex,Cl.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Jl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Cl.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Cu.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;iu.isCCW(r)&&(i=n,o=e);var s=new gp(r,new Wc(this._argIndex,Cl.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],Cl.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Wc(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Id},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof mc&&(this._useBoundaryDeterminationRule=!1),e instanceof dc)this.addPolygon(e);else if(e instanceof uc)this.addLineString(e);else if(e instanceof hc)this.addPoint(e);else if(e instanceof fc)this.addCollection(e);else if(e instanceof Ku)this.addCollection(e);else if(e instanceof mc)this.addCollection(e);else{if(!(e instanceof Yu))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return kl(this._parentGeom,pc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Nd(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Cl.BOUNDARY:Cl.INTERIOR},e}(sh),Bd=function(){if(this._li=new eu,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Fd(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=hu.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Fd(0,e,r),this._arg[1]=new Fd(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Fd(0,i,s),this._arg[1]=new Fd(1,o,s)}};Bd.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Bd.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Bd.prototype.interfaces_=function(){return[]},Bd.prototype.getClass=function(){return Bd};var jd=function(){};jd.prototype.interfaces_=function(){return[]},jd.prototype.getClass=function(){return jd},jd.map=function(){if(arguments[0]instanceof au&&kl(arguments[1],jd.MapOp)){for(var t=arguments[0],e=arguments[1],n=new wu,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(kl(arguments[0],gu)&&kl(arguments[1],jd.MapOp)){for(var o=arguments[0],s=arguments[1],a=new wu,l=o.iterator();l.hasNext();){var u=l.next(),c=s.map(u);null!==c&&a.add(c)}return a}},jd.MapOp=function(){};var Vd=function(t){function e(){var e=arguments[0];t.call(this,e,arguments[1]),this._ptLocator=new jp,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new lp,this._resultPolyList=new wu,this._resultLineList=new wu,this._resultPointList=new wu,this._graph=new sh(new sp),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Wc(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new wu;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Cl.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new wu,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new wu;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),od.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new ah(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new ad(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new ld(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Bc.RIGHT),i.getLocation(1,Bc.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Jl.isTrue(!r.isNull(i,Bc.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Bc.LEFT,r.getLocation(i,Bc.LEFT)),Jl.isTrue(!r.isNull(i,Bc.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Bc.RIGHT,r.getLocation(i,Bc.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bd);Vd.overlayOp=function(t,e,n){return new Vd(t,e).getResultGeometry(n)},Vd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Vd.createEmptyResult(Vd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return sd.map(t,{interfaces_:function(){return[jd.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),bd.overlayOp(t,e,Vd.INTERSECTION)},Vd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Vd.createEmptyResult(Vd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),bd.overlayOp(t,e,Vd.SYMDIFFERENCE)},Vd.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Vd.INTERSECTION:o=Math.min(r,i);break;case Vd.UNION:o=Math.max(r,i);break;case Vd.DIFFERENCE:o=r;break;case Vd.SYMDIFFERENCE:o=Math.max(r,i)}return o},Vd.createEmptyResult=function(t,e,n,r){var i=null;switch(Vd.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Vd.difference=function(t,e){return t.isEmpty()?Vd.createEmptyResult(Vd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),bd.overlayOp(t,e,Vd.DIFFERENCE))},Vd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Vd.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===Cl.BOUNDARY&&(i=Cl.INTERIOR),o===Cl.BOUNDARY&&(o=Cl.INTERIOR),arguments[2]){case Vd.INTERSECTION:return i===Cl.INTERIOR&&o===Cl.INTERIOR;case Vd.UNION:return i===Cl.INTERIOR||o===Cl.INTERIOR;case Vd.DIFFERENCE:return i===Cl.INTERIOR&&o!==Cl.INTERIOR;case Vd.SYMDIFFERENCE:return i===Cl.INTERIOR&&o!==Cl.INTERIOR||i!==Cl.INTERIOR&&o===Cl.INTERIOR}return!1}},Vd.INTERSECTION=1,Vd.UNION=2,Vd.DIFFERENCE=3,Vd.SYMDIFFERENCE=4;var Ud=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new jp,this._seg=new Ah;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ud.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Ud.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Cl.BOUNDARY:this._ptLocator.locate(t,this._g)},Ud.prototype.extractLinework=function(t){var e=new $d;t.apply(e);var n=e.getLinework(),r=Oc.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ud.prototype.interfaces_=function(){return[]},Ud.prototype.getClass=function(){return Ud};var $d=function(){this._linework=null,this._linework=new wu};$d.prototype.getLinework=function(){return this._linework},$d.prototype.filter=function(t){if(t instanceof dc){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},$d.prototype.interfaces_=function(){return[Wu]},$d.prototype.getClass=function(){return $d};var qd=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};qd.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},qd.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},qd.prototype.getPoints=function(t){for(var e=new wu,n=Bp.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},qd.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,l=n*o/s,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new xl(u-l,c+a);r.add(h)}if(this._doRight){var p=new xl(u+l,c-a);r.add(p)}},qd.prototype.interfaces_=function(){return[]},qd.prototype.getClass=function(){return qd};var Gd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new wu;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ud(this._geom[0],this._boundaryDistanceTolerance),new Ud(this._geom[1],this._boundaryDistanceTolerance),new Ud(this._geom[2],this._boundaryDistanceTolerance)]},Hd={TOLERANCE:{configurable:!0}};Gd.prototype.reportResult=function(t,e,n){Vl.out.println("Overlay result invalid - A:"+Cl.toLocationSymbol(e[0])+" B:"+Cl.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Cl.toLocationSymbol(e[2]))},Gd.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Gd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!Gd.hasLocation(this._location,Cl.BOUNDARY)||this.isValidResult(i,this._location)}},Gd.prototype.addTestPts=function(t){var e=new qd(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Gd.prototype.isValidResult=function(t,e){var n=Vd.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Cl.INTERIOR);return r||this.reportResult(t,e,n),r},Gd.prototype.getInvalidLocation=function(){return this._invalidLocation},Gd.prototype.interfaces_=function(){return[]},Gd.prototype.getClass=function(){return Gd},Gd.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Gd.computeBoundaryDistanceTolerance=function(t,e){return Math.min(hd.computeSizeBasedSnapTolerance(t),hd.computeSizeBasedSnapTolerance(e))},Gd.isValid=function(t,e,n,r){return new Gd(t,e,r).isValid(n)},Hd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Gd,Hd);var Zd=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Zd.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Zd.prototype.combine=function(){for(var t=new wu,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Zd.prototype.interfaces_=function(){return[]},Zd.prototype.getClass=function(){return Zd},Zd.combine=function(){return 1===arguments.length?new Zd(arguments[0]).combine():2===arguments.length?new Zd(Zd.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Zd(Zd.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Zd.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Zd.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new wu;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new wu;return s.add(r),s.add(i),s.add(o),s}};var Wd=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new wu)},Xd={STRTREE_NODE_CAPACITY:{configurable:!0}};Wd.prototype.reduceToGeometries=function(t){for(var e=new wu,n=t.iterator();n.hasNext();){var r=n.next(),i=null;kl(r,bu)?i=this.unionTree(r):r instanceof au&&(i=r),e.add(i)}return e},Wd.prototype.extractByEnvelope=function(t,e,n){for(var r=new wu,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Wd.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Zd.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Wd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new xh(Wd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Wd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Wd.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Wd.getGeometry(e,n),Wd.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Wd.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Wd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Wd.prototype.unionActual=function(t,e){return Wd.restrictToPolygons(t.union(e))},Wd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Wd.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new wu,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Zd.combine(r)},Wd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Wd.prototype.interfaces_=function(){return[]},Wd.prototype.getClass=function(){return Wd},Wd.restrictToPolygons=function(t){if(kl(t,pc))return t;var e=Fp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Oc.toPolygonArray(e))},Wd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Wd.union=function(t){return new Wd(t).union()},Xd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Wd,Xd);var Yd=function(){};function Kd(){return new Jd}function Jd(){this.reset()}Yd.prototype.interfaces_=function(){return[]},Yd.prototype.getClass=function(){return Yd},Yd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Vd.createEmptyResult(Vd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),bd.overlayOp(t,e,Vd.UNION)},Jd.prototype={constructor:Jd,reset:function(){this.s=this.t=0},add:function(t){tf(Qd,t,this.t),tf(this,Qd.s,this.s),this.s?this.t+=Qd.t:this.s=Qd.t},valueOf:function(){return this.s}};var Qd=new Jd;function tf(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}var ef=1e-6,nf=Math.PI,rf=nf/2,of=nf/4,sf=2*nf,af=180/nf,lf=nf/180,uf=Math.abs,cf=Math.atan,hf=Math.atan2,pf=Math.cos,df=Math.sin,ff=Math.sqrt;function _f(t){return t>1?0:t<-1?nf:Math.acos(t)}function mf(t){return t>1?rf:t<-1?-rf:Math.asin(t)}function gf(){}function yf(t,e){t&&wf.hasOwnProperty(t.type)&&wf[t.type](t,e)}var vf,bf,xf={Feature:function(t,e){yf(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)yf(n[r].geometry,e)}},wf={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){Ef(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ef(n[r],e,0)},Polygon:function(t,e){Sf(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Sf(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)yf(n[r],e)}};function Ef(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function Sf(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ef(t[n],e,1);e.polygonEnd()}function Cf(t){return[hf(t[1],t[0]),mf(t[2])]}function If(t){var e=t[0],n=t[1],r=pf(n);return[r*pf(e),r*df(e),df(n)]}function kf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Tf(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Af(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Of(t){var e=ff(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Mf(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Lf(t,e){return[t>nf?t-sf:t<-nf?t+sf:t,e]}function Nf(t){return function(e,n){return[(e+=t)>nf?e-sf:e<-nf?e+sf:e,n]}}function Df(t){var e=Nf(t);return e.invert=Nf(-t),e}function Rf(t,e){var n=pf(t),r=df(t),i=pf(e),o=df(e);function s(t,e){var s=pf(e),a=pf(t)*s,l=df(t)*s,u=df(e),c=u*n+a*r;return[hf(l*i-c*o,a*n-u*r),mf(c*i+l*o)]}return s.invert=function(t,e){var s=pf(e),a=pf(t)*s,l=df(t)*s,u=df(e),c=u*i-l*o;return[hf(l*i+u*o,a*n+c*r),mf(c*n-a*r)]},s}function zf(t,e){(e=If(e))[0]-=t,Of(e);var n=_f(-e[1]);return((-e[2]<0?-n:n)+sf-ef)%sf}function Ff(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:gf,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Bf(t,e){return uf(t[0]-e[0])<ef&&uf(t[1]-e[1])<ef}function jf(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Vf(t,e,n,r,i){var o,s,a=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Bf(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new jf(r,t,null,!0)),l.push(n.o=new jf(r,null,n,!1)),a.push(n=new jf(s,t,null,!1)),l.push(n.o=new jf(s,null,n,!0))}}),a.length){for(l.sort(e),Uf(a),Uf(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n;for(var u,c,h=a[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;u=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(o=0,s=u.length;o<s;++o)i.point((c=u[o])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d)for(o=(u=p.p.z).length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(p.x,p.p.x,-1,i);p=p.p}u=(p=p.o).z,d=!d}while(!p.v);i.lineEnd()}}}function Uf(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function $f(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function qf(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}Kd(),Kd(),Kd(),Lf.invert=Lf,1===(vf=$f).length&&(bf=vf,vf=function(t,e){return $f(bf(t),e)});var Gf=1e9,Hf=-Gf;function Zf(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,u){var c=0,h=0;if(null==i||(c=s(i,a))!==(h=s(o,a))||l(i,o)<0^a>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+a+4)%4)!==h);else u.point(o[0],o[1])}function s(r,i){return uf(r[0]-t)<ef?i>0?0:3:uf(r[0]-n)<ef?i>0?2:1:uf(r[1]-e)<ef?i>0?1:0:i>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var l,u,c,h,p,d,f,_,m,g,y,v=s,b=Ff(),x={point:w,lineStart:function(){x.point=E,u&&u.push(c=[]),g=!0,m=!1,f=_=NaN},lineEnd:function(){l&&(E(h,p),d&&m&&b.rejoin(),l.push(b.result())),x.point=w,m&&v.lineEnd()},polygonStart:function(){v=b,l=[],u=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=u.length;n<i;++n)for(var o,s,a=u[n],l=1,c=a.length,h=a[0],p=h[0],d=h[1];l<c;++l)o=p,s=d,p=(h=a[l])[0],d=h[1],s<=r?d>r&&(p-o)*(r-s)>(d-s)*(t-o)&&++e:d<=r&&(p-o)*(r-s)<(d-s)*(t-o)&&--e;return e}(),n=y&&e,i=(l=qf(l)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Vf(l,a,e,o,s),s.polygonEnd()),v=s,l=u=c=null}};function w(t,e){i(t,e)&&v.point(t,e)}function E(o,s){var a=i(o,s);if(u&&c.push([o,s]),g)h=o,p=s,d=a,g=!1,a&&(v.lineStart(),v.point(o,s));else if(a&&m)v.point(o,s);else{var l=[f=Math.max(Hf,Math.min(Gf,f)),_=Math.max(Hf,Math.min(Gf,_))],b=[o=Math.max(Hf,Math.min(Gf,o)),s=Math.max(Hf,Math.min(Gf,s))];!function(t,e,n,r,i,o){var s,a=t[0],l=t[1],u=0,c=1,h=e[0]-a,p=e[1]-l;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<u)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>u&&(u=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>u&&(u=s)}else if(h>0){if(s<u)return;s<c&&(c=s)}if(s=r-l,p||!(s>0)){if(s/=p,p<0){if(s<u)return;s<c&&(c=s)}else if(p>0){if(s>c)return;s>u&&(u=s)}if(s=o-l,p||!(s<0)){if(s/=p,p<0){if(s>c)return;s>u&&(u=s)}else if(p>0){if(s<u)return;s<c&&(c=s)}return u>0&&(t[0]=a+u*h,t[1]=l+u*p),c<1&&(e[0]=a+c*h,e[1]=l+c*p),!0}}}}}(l,b,t,e,n,r)?a&&(v.lineStart(),v.point(o,s),y=!1):(m||(v.lineStart(),v.point(l[0],l[1])),v.point(b[0],b[1]),a||v.lineEnd(),y=!1)}f=o,_=s,m=a}return x}}var Wf=Kd();function Xf(t){return t}Kd(),Kd(),Kd();var Yf=1/0,Kf=Yf,Jf=-Yf,Qf=Jf,t_={point:function(t,e){t<Yf&&(Yf=t),t>Jf&&(Jf=t),e<Kf&&(Kf=e),e>Qf&&(Qf=e)},lineStart:gf,lineEnd:gf,polygonStart:gf,polygonEnd:gf,result:function(){var t=[[Yf,Kf],[Jf,Qf]];return Jf=Qf=-(Kf=Yf=1/0),t}};function e_(t,e,n,r){return function(i,o){var s,a,l,u=e(o),c=i.invert(r[0],r[1]),h=Ff(),p=e(h),d=!1,f={point:_,lineStart:g,lineEnd:y,polygonStart:function(){f.point=v,f.lineStart=b,f.lineEnd=x,a=[],s=[]},polygonEnd:function(){f.point=_,f.lineStart=g,f.lineEnd=y,a=qf(a);var t=function(t,e){var n=e[0],r=e[1],i=[df(n),-pf(n),0],o=0,s=0;Wf.reset();for(var a=0,l=t.length;a<l;++a)if(c=(u=t[a]).length)for(var u,c,h=u[c-1],p=h[0],d=h[1]/2+of,f=df(d),_=pf(d),m=0;m<c;++m,p=y,f=b,_=x,h=g){var g=u[m],y=g[0],v=g[1]/2+of,b=df(v),x=pf(v),w=y-p,E=w>=0?1:-1,S=E*w,C=S>nf,I=f*b;if(Wf.add(hf(I*E*df(S),_*x+I*pf(S))),o+=C?w+E*sf:w,C^p>=n^y>=n){var k=Tf(If(h),If(g));Of(k);var T=Tf(i,k);Of(T);var P=(C^w>=0?-1:1)*mf(T[2]);(r>P||r===P&&(k[0]||k[1]))&&(s+=C^w>=0?1:-1)}}return(o<-1e-6||o<ef&&Wf<-1e-6)^1&s}(s,c);a.length?(d||(o.polygonStart(),d=!0),Vf(a,r_,t,n,o)):t&&(d||(o.polygonStart(),d=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function _(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function m(t,e){var n=i(t,e);u.point(n[0],n[1])}function g(){f.point=m,u.lineStart()}function y(){f.point=_,u.lineEnd()}function v(t,e){l.push([t,e]);var n=i(t,e);p.point(n[0],n[1])}function b(){p.lineStart(),l=[]}function x(){v(l[0][0],l[0][1]),p.lineEnd();var t,e,n,r,i=p.clean(),u=h.result(),c=u.length;if(l.pop(),s.push(l),l=null,c)if(1&i){if((e=(n=u[0]).length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&u.push(u.pop().concat(u.shift())),a.push(u.filter(n_))}return f}}function n_(t){return t.length>1}function r_(t,e){return((t=t.x)[0]<0?t[1]-rf-ef:rf-t[1])-((e=e.x)[0]<0?e[1]-rf-ef:rf-e[1])}Kd();var i_=e_(function(){return!0},function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?nf:-nf,l=uf(o-n);uf(l-nf)<ef?(t.point(n,r=(r+s)/2>0?rf:-rf),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&l>=nf&&(uf(n-i)<ef&&(n-=i*ef),uf(o-a)<ef&&(o-=a*ef),r=function(t,e,n,r){var i,o,s=df(t-n);return uf(s)>ef?cf((df(e)*(o=pf(r))*df(n)-df(r)*(i=pf(e))*df(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)r.point(-nf,i=n*rf),r.point(0,i),r.point(nf,i),r.point(nf,0),r.point(nf,-i),r.point(0,-i),r.point(-nf,-i),r.point(-nf,0),r.point(-nf,i);else if(uf(t[0]-e[0])>ef){var o=t[0]<e[0]?nf:-nf;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-nf,-rf]);function o_(t,e){var n=pf(t),r=n>0,i=uf(n)>ef;function o(t,e){return pf(t)*pf(e)>n}function s(t,e,r){var i=[1,0,0],o=Tf(If(t),If(e)),s=kf(o,o),a=o[0],l=s-a*a;if(!l)return!r&&t;var u=n*s/l,c=-n*a/l,h=Tf(i,o),p=Af(i,u);Pf(p,Af(o,c));var d=h,f=kf(p,d),_=kf(d,d),m=f*f-_*(kf(p,p)-1);if(!(m<0)){var g=ff(m),y=Af(d,(-f-g)/_);if(Pf(y,p),y=Cf(y),!r)return y;var v,b=t[0],x=e[0],w=t[1],E=e[1];x<b&&(v=b,b=x,x=v);var S=x-b,C=uf(S-nf)<ef;if(!C&&E<w&&(v=w,w=E,E=v),C||S<ef?C?w+E>0^y[1]<(uf(y[0]-b)<ef?w:E):w<=y[1]&&y[1]<=E:S>nf^(b<=y[0]&&y[0]<=x)){var I=Af(d,(-f+g)/_);return Pf(I,p),[y,Cf(I)]}}}function a(e,n){var i=r?t:nf-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return e_(o,function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,p){var d,f=[h,p],_=o(h,p),m=r?_?0:a(h,p):_?a(h+(h<0?nf:-nf),p):0;if(!e&&(u=l=_)&&t.lineStart(),_!==l&&(!(d=s(e,f))||Bf(e,d)||Bf(f,d))&&(f[0]+=ef,f[1]+=ef,_=o(f[0],f[1])),_!==l)c=0,_?(t.lineStart(),d=s(f,e),t.point(d[0],d[1])):(d=s(e,f),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&r^_){var g;m&n||!(g=s(f,e,!0))||(c=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!_||e&&Bf(e,f)||t.point(f[0],f[1]),e=f,l=_,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}},function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=pf(e),a=df(e),l=r*n;null==i?(i=e+r*sf,o=e-l/2):(i=zf(s,i),o=zf(s,o),(r>0?i<o:i>o)&&(i+=r*sf));for(var u,c=i;r>0?c>o:c<o;c-=l)u=Cf([s,-a*pf(c),-a*df(c)]),t.point(u[0],u[1])}}(o,t,e,i,n,r)},r?[0,-t]:[-nf,t-nf])}function s_(t){return function(e){var n=new a_;for(var r in t)n[r]=t[r];return n.stream=e,n}}function a_(){}function l_(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&xf.hasOwnProperty(t.type)?xf[t.type](t,e):yf(t,e)}(n,t.stream(t_));var s=t_.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),l=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,u=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([l,u])}a_.prototype={constructor:a_,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var u_=pf(30*lf);function c_(t,e){return+e?function(t,e){function n(r,i,o,s,a,l,u,c,h,p,d,f,_,m){var g=u-r,y=c-i,v=g*g+y*y;if(v>4*e&&_--){var b=s+p,x=a+d,w=l+f,E=ff(b*b+x*x+w*w),S=mf(w/=E),C=uf(uf(w)-1)<ef||uf(o-h)<ef?(o+h)/2:hf(x,b),I=t(C,S),k=I[0],T=I[1],P=k-r,A=T-i,O=y*P-g*A;(O*O/v>e||uf((g*P+y*A)/v-.5)>.3||s*p+a*d+l*f<u_)&&(n(r,i,o,s,a,l,k,T,C,b/=E,x/=E,w,_,m),m.point(k,T),n(k,T,C,b,x,w,u,c,h,p,d,f,_,m))}}return function(e){var r,i,o,s,a,l,u,c,h,p,d,f,_={point:m,lineStart:g,lineEnd:v,polygonStart:function(){e.polygonStart(),_.lineStart=b},polygonEnd:function(){e.polygonEnd(),_.lineStart=g}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function g(){c=NaN,_.point=y,e.lineStart()}function y(r,i){var o=If([r,i]),s=t(r,i);n(c,h,u,p,d,f,c=s[0],h=s[1],u=r,p=o[0],d=o[1],f=o[2],16,e),e.point(c,h)}function v(){_.point=m,e.lineEnd()}function b(){g(),_.point=x,_.lineEnd=w}function x(t,e){y(r=t,e),i=c,o=h,s=p,a=d,l=f,_.point=y}function w(){n(c,h,u,p,d,f,i,o,r,s,a,l,16,e),_.lineEnd=v,v()}return _}}(t,e):function(t){return s_({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var h_=s_({point:function(t,e){this.stream.point(t*lf,e*lf)}}),p_=function(t,e){var n=pf(t),r=pf(e),i=function(t){return(t=_f(t))&&t/df(t)}(n*r);return[i*r*df(t),i*df(e)]};function d_(t,n,r,i){var s=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var l=[];return W(t,function(t){var e=d_(t,n,r,i);e&&l.push(e)}),d(l)}var u=function(t){var n=cn(t).geometry.coordinates,r=[-n[0],-n[1]];return function(t){return function(t){var e,n,r,i,o,s,a,l,u,c,h=150,p=480,d=250,f=0,_=0,m=0,g=0,y=0,v=null,b=i_,x=null,w=Xf,E=.5,S=c_(k,E);function C(t){return[(t=o(t[0]*lf,t[1]*lf))[0]*h+n,r-t[1]*h]}function I(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*af,t[1]*af]}function k(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function T(){o=Mf(i=function(t,e,n){return(t%=sf)?e||n?Mf(Df(t),Rf(e,n)):Df(t):e||n?Rf(e,n):Lf}(m,g,y),e);var t=e(f,_);return n=p-t[0]*h,r=d+t[1]*h,P()}function P(){return u=c=null,C}return C.stream=function(t){return u&&c===t?u:u=h_(b(i,S(w(c=t))))},C.clipAngle=function(t){return arguments.length?(b=+t?o_(v=t*lf,6*lf):(v=null,i_),P()):v*af},C.clipExtent=function(t){return arguments.length?(w=null==t?(x=s=a=l=null,Xf):Zf(x=+t[0][0],s=+t[0][1],a=+t[1][0],l=+t[1][1]),P()):null==x?null:[[x,s],[a,l]]},C.scale=function(t){return arguments.length?(h=+t,T()):h},C.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],T()):[p,d]},C.center=function(t){return arguments.length?(f=t[0]%360*lf,_=t[1]%360*lf,T()):[f*af,_*af]},C.rotate=function(t){return arguments.length?(m=t[0]%360*lf,g=t[1]%360*lf,y=t.length>2?t[2]%360*lf:0,T()):[m*af,g*af,y*af]},C.precision=function(t){return arguments.length?(S=c_(k,E=t*t),P()):ff(E)},C.fitExtent=function(t,e){return l_(C,t,e)},C.fitSize=function(t,e){return function(t,e,n){return l_(t,[[0,0],e],n)}(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&I,T()}}(function(){return t})()}(p_).scale(79.4188).clipAngle(179.999).rotate(r).scale(e)}(a),c={type:a.type,coordinates:__(a.coordinates,u)},h=(new zc).read(c),p=v(b(n,r),"meters"),f=Ap.bufferOp(h,p,i);if(!f_((f=(new Fc).write(f)).coordinates))return o({type:f.type,coordinates:m_(f.coordinates,u)},s)}function f_(t){return Array.isArray(t[0])?f_(t[0]):isNaN(t[0])}function __(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return __(t,e)})}function m_(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return m_(t,e)})}function g_(t,e,n){void 0===n&&(n={});var r=F(t),i=F(e),o=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return pl.run("union",t,n)}(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?u(o[0],n.properties):m(o,n.properties)}function y_(t,e,n){void 0===n&&(n={});var r=F(t),i=F(e),o=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return pl.run("intersection",t,n)}(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?u(o[0],n.properties):m(o,n.properties)}function v_(t,e){return function(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,n){var o=function(t,e){return t-e}(e,t);o>=0&&(void 0===i||o<i)&&(i=o,r=n)}),r}(t,e)}function b_(t,e){return nr(h(Z(t)),h(Z(e))).features.length>0}function x_(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],l=(o+a)/2,u=(i+s)/2,c=2*e/_e([i,l],[s,l],n)*(s-i),h=2*e/_e([u,o],[u,a],n)*(a-o),p=c/2,f=2*p,_=Math.sqrt(3)/2*h,m=s-i,g=a-o,y=3/4*f,v=_,b=Math.floor((m-f)/(f-p/2)),x=(b*y-p/2-m)/2-p/2+y/2,w=Math.floor((g-_)/_),E=(g-w*_)/2,S=w*_-g>_/2;S&&(E-=_/4);for(var C=[],I=[],k=0;k<6;k++){var T=2*Math.PI/6*k;C.push(Math.cos(T)),I.push(Math.sin(T))}for(var P=[],A=0;A<=b;A++)for(var O=0;O<=w;O++){var M=A%2==1;if(!(0===O&&M||0===O&&S)){var L=A*y+i-x,N=O*v+o+E;if(M&&(N-=_/2),!0===n.triangles)E_([L,N],c/2,h/2,JSON.parse(r),C,I).forEach(function(t){n.mask?y_(n.mask,t)&&P.push(t):P.push(t)});else{var D=w_([L,N],c/2,h/2,JSON.parse(r),C,I);n.mask?y_(n.mask,D)&&P.push(D):P.push(D)}}}return d(P)}function w_(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++)s.push([t[0]+e*i[a],t[1]+n*o[a]]);return s.push(s[0].slice()),u([s],r)}function E_(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var l=[];l.push(t),l.push([t[0]+e*i[a],t[1]+n*o[a]]),l.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),l.push(t),s.push(u([l],r))}return s}function S_(t){if(t.features.length<=1)return t;var e=function(t){var e=Et(),n=[];return Y(t,function(t,e){var r=ot(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],r={};return Y(t,function(t,i){if(r[i])return!0;for(e.remove({index:i},C_),r[i]=!0;;){var o=ot(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0)for(var a=s.map(function(t){return r[t.index]=!0,e.remove({index:t.index},C_),t.geojson}),l=0,u=a.length;l<u;l++)t=g_(t,a[l]);if(0===s.length)break}n.push(t)}),d(n)}function C_(t,e){return t.index===e.index}function I_(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],s=t[1],a=t[2],l=t[3],c=e/_e([o,s],[a,s],r)*(a-o),h=n/_e([o,s],[o,l],r)*(l-s),p=a-o,f=l-s,_=Math.floor(p/c),m=Math.floor(f/h),g=(f-m*h)/2,y=o+(p-_*c)/2,v=0;v<_;v++){for(var b=s+g,x=0;x<m;x++){var w=u([[[y,b],[y,b+h],[y+c,b+h],[y+c,b],[y,b]]],r.properties);r.mask?Ho(r.mask,w)&&i.push(w):i.push(w),b+=h}y+=c}return d(i)}(t,e,e,n)}function k_(t,e,n){void 0===n&&(n={});for(var r=[],i=e/_e([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/_e([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var l=0,c=t[1];c<=t[3];){var h=null,p=null;s%2==0&&l%2==0?(h=u([[[a,c],[a,c+o],[a+i,c],[a,c]]],n.properties),p=u([[[a,c+o],[a+i,c+o],[a+i,c],[a,c+o]]],n.properties)):s%2==0&&l%2==1?(h=u([[[a,c],[a+i,c+o],[a+i,c],[a,c]]],n.properties),p=u([[[a,c],[a,c+o],[a+i,c+o],[a,c]]],n.properties)):l%2==0&&s%2==1?(h=u([[[a,c],[a,c+o],[a+i,c+o],[a,c]]],n.properties),p=u([[[a,c],[a+i,c+o],[a+i,c],[a,c]]],n.properties)):l%2==1&&s%2==1&&(h=u([[[a,c],[a,c+o],[a+i,c],[a,c]]],n.properties),p=u([[[a,c+o],[a+i,c+o],[a+i,c],[a,c+o]]],n.properties)),n.mask?(y_(n.mask,h)&&r.push(h),y_(n.mask,p)&&r.push(p)):(r.push(h),r.push(p)),c+=o,l++}s++,a+=i}return d(r)}p_.invert=function(t,e){var n=ff(t*t+e*e),r=n,i=df(r),o=pf(r);return[hf(t*i,n*o),mf(n&&e*i/n)]},t.along=function(t,e,n){void 0===n&&(n={});for(var r=F(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var l=un(r[o],r[o-1])-180;return an(r[o],s,l,n)}return a(r[o])}i+=_e(r[o],r[o+1],n)}return a(r[r.length-1])},t.angle=function(t,e,n,r){if(void 0===r&&(r={}),!T(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=w(!0!==r.mercator?un(i,o):ai(i,o)),l=w(!0!==r.mercator?un(s,o):ai(s,o)),u=Math.abs(a-l);return!0===r.explementary?360-u:u},t.applyFilter=wa,t.area=pr,t.areaFactors=i,t.bbox=ot,t.bboxClip=function(t,e){var n=F(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach(function(t){!function(t,e,n){var r,i,o,s,a,l=t.length,u=Qr(t[0],e),c=[];for(n||(n=[]),r=1;r<l;r++){for(s=t[r-1],i=o=Qr(a=t[r],e);;){if(!(u|i)){c.push(s),i!==o?(c.push(a),r<l-1&&(n.push(c),c=[])):r===l-1&&c.push(a);break}if(u&i)break;u?u=Qr(s=Jr(s,a,u,e),e):i=Qr(a=Jr(s,a,i,e),e)}u=o}c.length&&n.push(c)}(t,e,s)}),1===s.length?h(s[0],i):f(s,i);case"Polygon":return u(ti(o,e),i);case"MultiPolygon":return m(o.map(function(t){return ti(t,e)}),i);default:throw new Error("geometry "+r+" not supported")}},t.bboxPolygon=rn,t.bearing=un,t.bearingToAngle=w,t.bearingToAzimuth=w,t.bezier=nn,t.bezierSpline=nn,t.booleanClockwise=di,t.booleanContains=function(t,e){var n=F(t),r=F(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":switch(o){case"Point":return No(s,a);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(No(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(No(i,a[s])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return yr(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(yr({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!yr({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(yr(o,t,{ignoreEndVertices:!0})&&(n=!0),!yr(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return pe(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!Lo(ot(t),ot(e)))return!1;for(;r<e.coordinates.length-1;r++)if(pe({type:"Point",coordinates:Do(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!Lo(ot(t),ot(e)))return!1;for(var n=0,r=F(e).coordinates;n<r.length;n++)for(var i=0,o=r[n];i<o.length;i++)if(!pe(o[i],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!pe(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=F(t),r=F(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return Ro(n,r);case"Polygon":return Fo(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return Ro(r,n);case"LineString":return function(t,e){if(nr(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Bo(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return zo(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Fo(r,n);case"LineString":return zo(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanDisjoint=Po,t.booleanEqual=function(t,e){return F(t).type===F(e).type&&new qo({precision:6}).compare(qe(t),qe(e))},t.booleanIntersects=Ho,t.booleanOverlap=Go,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==is(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==is(e,"line2"))throw new Error("line2 must be a LineString");for(var n=jn(qe(t)).features,r=jn(qe(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!rs(o,r[i].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=pe,t.booleanPointOnLine=yr,t.booleanWithin=br,t.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return W(t,function(t){var n=d_(t,e,r,i);n&&o.push(n)}),d(o);case"FeatureCollection":return G(t,function(t){var n=d_(t,e,r,i);n&&G(n,function(t){t&&o.push(t)})}),d(o)}return d_(t,e,r,i)},t.center=cn,t.centerMean=Ks,t.centerMedian=function(t,e){if(void 0===e&&(e={}),!T(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!k(n))throw new Error("counter must be a number");var r=e.weight,i=Ks(t,{weight:e.weight}),o=d([]);return G(t,function(t){var e;o.features.push(hn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))}),Js(i.geometry.coordinates,[0,0],o,{tolerance:e.tolerance,medianCandidates:[]},n)},t.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),B(e)){case"Point":return a(M(e),n.properties);case"Polygon":var r=[];V(e,function(t){r.push(t)});var i,o,s,l,u,c,h,p,d=hn(e,{properties:n.properties}),f=d.geometry.coordinates,_=0,m=0,g=0,y=r.map(function(t){return[t[0]-f[0],t[1]-f[1]]});for(i=0;i<r.length-1;i++)l=(o=y[i])[0],u=(s=y[i+1])[0],g+=p=l*(h=s[1])-u*(c=o[1]),_+=(l+u)*p,m+=(c+h)*p;if(0===g)return d;var v=1/(.5*g*6);return a([f[0]+v*_,f[1]+v*m],n.properties);default:var b=he(e);return b?t(b,{properties:n.properties}):hn(e,{properties:n.properties})}},t.centroid=hn,t.circle=ln,t.cleanCoords=qe,t.clone=be,t.clusterEach=va,t.clusterReduce=ba,t.clusters=Ca,t.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=be(t)),n.minPoints=n.minPoints||3;var r=new Ko.DBSCAN,i=r.run(Z(t),C(e,n.units),n.minPoints,_e),o=-1;return i.forEach(function(e){o++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"})}),r.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.dbscan=n.properties.cluster?"edge":"noise"}),t},t.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=be(t));var r=Z(t),i=r.slice(0,e.numberOfClusters),o=function(t,e,n,r){var i=[],o=[],s=[],a=[],l=!1,u=r||1e4,c=t.length,h=t[0].length,p=h>0,d=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a;n[l]||(n[l]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?Qo:ts,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],l=r.length,u=0,c=[],h=0;h<i;h++){for(var p=1/0,d=0;d<l;d++){var f=n(t[h],r[d]);f<=p&&(p=f)}a[h]=p}for(var _=0;_<i;_++)u+=a[_];for(var m=0;m<i;m++)c[m]={i:m,v:t[m],pr:a[m]/u,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var g=1;g<i;g++)c[g].cs=c[g-1].cs+c[g].pr;for(var y=Math.random(),v=0;v<i-1&&c[v++].cs<y;);r.push(c[v-1].v)}return r}(t,e):n;else for(var f={};i.length<e;){var _=Math.floor(Math.random()*c);f[_]||(f[_]=!0,i.push(t[_]))}do{ns(e,0,d);for(var m=0;m<c;m++){for(var g=1/0,y=0,v=0;v<e;v++)(a=p?es(t[m],i[v]):Math.abs(t[m]-i[v]))<=g&&(g=a,y=v);s[m]=y,d[y]++}for(var b=[],x=(o=[],0);x<e;x++)b[x]=p?ns(h,0,b[x]):0,o[x]=i[x];if(p){for(var w=0;w<e;w++)i[w]=[];for(var E=0;E<c;E++)for(var S=b[s[E]],C=t[E],I=0;I<h;I++)S[I]+=C[I];l=!0;for(var k=0;k<e;k++){for(var T=i[k],P=b[k],A=o[k],O=d[k],M=0;M<h;M++)T[M]=P[M]/O||0;if(l)for(var L=0;L<h;L++)if(A[L]!=T[L]){l=!1;break}}}else{for(var N=0;N<c;N++)b[s[N]]+=t[N];for(var D=0;D<e;D++)i[D]=b[D]/d[D]||0;l=!0;for(var R=0;R<e;R++)if(o[R]!=i[R]){l=!1;break}}l=l||--u<=0}while(!l);return{it:1e4-u,k:e,idxs:s,centroids:i}}(r,e.numberOfClusters,i),s={};return o.centroids.forEach(function(t,e){s[e]=t}),G(t,function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]}),t},t.collect=function(t,e,n,r){var i=Et(6),o=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=ot(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach(function(e){pe([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[r]=o}),t},t.collectionOf=z,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return G(t,function(t){var n,r,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}}),d(Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return o({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})}))},t.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=me(function(t){var e=[],n={};return G(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}}),d(e)}(t));if(r.features=r.features.filter(function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=_e(r,i,e),a=_e(i,o,e),l=_e(r,o,e);return s<=n&&a<=n&&l<=n}),r.features.length<1)return null;var i=$e(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),o(i)},t.containsNumber=N,t.convertArea=I,t.convertDistance=C,t.convertLength=C,t.convex=he,t.coordAll=Z,t.coordEach=V,t.coordReduce=U,t.createBins=xa,t.degrees2radians=S,t.degreesToRadians=S,t.destination=an,t.difference=function(t,e){var n=F(t),r=F(e),i=t.properties||{},o=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return pl.run("difference",t,n)}(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?u(o[0],i):m(o,i)},t.dissolve=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;z(t,"Polygon","dissolve");var r=be(t),i=r.features,o=[];i.forEach(function(t,e){t.properties.origIndexPosition=e});var s=er();for(var a in s.load(r),i){var l=i[a],u=!1;if(s.search(l).features.forEach(function(t){l=i[a];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=v_(e,o);0!==r&&(e-=r)}if(e!==+a){var c=i[e];c&&l&&(void 0!==n&&c.properties[n]!==l.properties[n]||Go(l,c)&&b_(l,c)&&(i[a]=g_(l,c),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),s.remove(t),i.splice(e,1),l.properties.origIndexPosition=a,s.remove(l,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),u=!0))}}),u){if(!l)continue;l.properties.origIndexPosition=a,s.insert(l),a--}}return i.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),r},t.distance=_e,t.distanceToDegrees=x,t.distanceToRadians=b,t.distanceWeight=ra,t.earthRadius=e,t.ellipse=Xs,t.envelope=on,t.explode=pn,t.factors=n,t.feature=o,t.featureCollection=d,t.featureEach=G,t.featureOf=R,t.featureReduce=H,t.filterProperties=Sa,t.findPoint=rt,t.findSegment=nt,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return Y(t,function(t){e.push(t)}),d(e)},t.flattenEach=Y,t.flattenReduce=K,t.flip=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=be(t)),V(t,function(t){var e=t[0];t[0]=t[1],t[1]=e}),t},t.geojsonType=D,t.geomEach=W,t.geomReduce=X,t.geometry=s,t.geometryCollection=g,t.getCluster=ya,t.getCoord=M,t.getCoords=L,t.getGeom=F,t.getType=B,t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=M(t),e=M(e),i=i||100,o=o||10,new Fr({x:t[0],y:t[1]},{x:e[0],y:e[1]},r=r||{}).Arc(i,{offset:o}).json()},t.helpers=O,t.hexGrid=x_,t.inside=pe,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(z(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=ot(t);switch(r){case"point":case"points":s=Sr(a,e,n);break;case"square":case"squares":s=I_(a,e,n);break;case"hex":case"hexes":s=x_(a,e,n);break;case"triangle":case"triangles":s=k_(a,e,n);break;default:throw new Error("invalid gridType")}var l=[];return G(s,function(e){var s=0,a=0;G(t,function(t){var l,u=_e("point"===r?e:hn(e),t,n);if(void 0!==i&&(l=t.properties[i]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing");0===u&&(s=l);var c=1/Math.pow(u,o);a+=c,s+=c*l});var u=be(e);u.properties[i]=s/a,l.push(u)}),d(l)},t.intersect=y_,t.invariant=j,t.isNumber=k,t.isObject=T,t.isobands=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(z(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!T(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;z(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return G(t,function(t){var e=L(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return L(t)[0]-L(e)[0]})}).sort(function(t,n){return e?L(t[0])[1]-L(n[0])[1]:L(n[0])[1]-L(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var l=o[a],u=[],c=0;c<l.length;c++){var h=l[c];u.push(h.properties[n]?h.properties[n]:0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(u)}return s}(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=fo(po(vi(t,o,s-o))),l={};l.groupedRings=a,l[n]=o+"-"+s,r.push(l)}return r}(s,e,r);return d((a=function(t,e,n){var r=ot(n),i=r[0],o=r[1],s=(r[2]-r[0])/(e[0].length-1),a=(r[3]-r[1])/(e.length-1),l=function(t){t[0]=t[0]*s+i,t[1]=t[1]*a+o};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(l)})})}),t}(a,s,t)).map(function(t,e){if(o[e]&&!T(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ct({},i,o[e]);return n[r]=t[r],m(t.groupedRings,n)}))},t.isolines=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(z(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!T(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;z(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return G(t,function(t){var e=L(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){return n[t].sort(function(t,e){return L(t)[0]-L(e)[0]})}).sort(function(t,n){return e?L(t[0])[1]-L(n[0])[1]:L(n[0])[1]-L(t[0])[1]})}(t,r),s=[],a=0;a<o.length;a++){for(var l=o[a],u=[],c=0;c<l.length;c++){var h=l[c];u.push(h.properties[n]?h.properties[n]:0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(u)}return s}(t,{zProperty:r,flip:!0});return d(function(t,e,n){var r=ot(n),i=r[0],o=r[1],s=(r[2]-r[0])/(e[0].length-1),a=(r[3]-r[1])/(e.length-1),l=function(t){t[0]=t[0]*s+i,t[1]=t[1]*a+o};return t.forEach(function(t){V(t,l)}),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],l=ct({},r,i[s]);l[n]=a;var u=f(dt(t,a),l);o.push(u)}return o}(s,e,r,i,o),s,t))},t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=ur(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(a([o[0],o[1]]))}})}),r},t.length=mr,t.lengthToDegrees=x,t.lengthToRadians=b,t.lineArc=$r,t.lineChunk=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return Y(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=mr(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)r(gr(t,e*s,e*(s+1),{units:n}))}(t,e,r,function(t){o.push(t)})}),d(o)},t.lineDistance=mr,t.lineEach=tt,t.lineIntersect=nr,t.lineOffset=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=B(t),o=t.properties;switch(i){case"LineString":return wo(t,e,r);case"MultiLineString":var s=[];return Y(t,function(t){s.push(wo(t,e,r).geometry.coordinates)}),f(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.lineOverlap=ii,t.lineReduce=et,t.lineSegment=jn,t.lineSlice=function(t,e,n){var r=L(n);if("LineString"!==B(n))throw new Error("line must be a LineString");for(var i,o=ir(n,t),s=ir(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],l=i[0].properties.index+1;l<i[1].properties.index+1;l++)a.push(r[l]);return a.push(i[1].geometry.coordinates),h(a,n.properties)},t.lineSliceAlong=gr,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=B(t),r=B(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Cr(e,{precision:7});switch(r){case"Point":return jr(t,i);case"MultiPoint":return Br(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Br(t,nr(t,i))}},t.lineString=h,t.lineStringToPolygon=Wr,t.lineStrings=p,t.lineToPolygon=Wr,t.mask=function(t,e){var n,r,i=function(t){return u(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),o=(n=[],r=[],Y(t,function(t){var e=t.geometry.coordinates,i=e[0],o=e.slice(1);n.push(u([i])),o.forEach(function(t){r.push(u([t]))})}),[d(n),d(r)]),s=o[0],a=o[1];return function(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),Y(e,function(t){r.push(t.geometry.coordinates[0])}),Y(n,function(t){r.push(t.geometry.coordinates[0])}),u(r)}(i,s=S_(s),a=S_(a))},t.meta=it,t.midpoint=function(t,e){return an(t,_e(t,e)/2,un(t,e))},t.moranIndex=function(t,e){var n=e.inputField,r=ra(t,{alpha:e.alpha||-1,binary:e.binary||!1,p:e.p||2,standardization:e.standardization||!0,threshold:e.threshold||1e5}),i=[];G(t,function(t){i.push((t.properties||{})[n])});for(var o=ia(i),s=function(t){for(var e=ia(t),n=0,r=0,i=t;r<i.length;r++)n+=Math.pow(i[r]-e,2);return n/t.length}(i),a=0,l=0,u=0,c=0,h=r.length,p=0;p<h;p++){for(var d=0,f=0;f<h;f++)a+=r[p][f]*(i[p]-o)*(i[f]-o),l+=r[p][f],u+=Math.pow(r[p][f]+r[f][p],2),d+=r[p][f]+r[f][p];c+=Math.pow(d,2)}var _=a/l/s,m=-1/(h-1),g=(h*h*(u*=.5)-h*c+l*l*3)/((h-1)*(h+1)*(l*l))-m*m,y=Math.sqrt(g);return{expectedMoranIndex:m,moranIndex:_,stdNorm:y,zNorm:(_-m)/y}},t.multiLineString=f,t.multiPoint=_,t.multiPolygon=m,t.nearest=Bn,t.nearestPoint=Bn,t.nearestPointOnLine=ir,t.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return W(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==B(e))throw new Error("line must be a LineString");var s=1/0,a=null;return G(o,function(t){var n=sr(t,e,{units:r});n<s&&(s=n,a=t)}),a&&(a.properties=ct({dist:s},a.properties,i)),a},t.planepoint=function(t,e){var n=M(t),r=F(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,l=n[0],u=n[1],c=r[0][0],h=r[0][1],p=void 0!==o?o:r[0][2],d=r[1][0],f=r[1][1],_=void 0!==s?s:r[1][2],m=r[2][0],g=r[2][1],y=void 0!==a?a:r[2][2];return(y*(l-c)*(u-f)+p*(l-d)*(u-g)+_*(l-m)*(u-h)-_*(l-c)*(u-g)-y*(l-d)*(u-h)-p*(l-m)*(u-f))/((l-c)*(u-f)+(l-d)*(u-g)+(l-m)*(u-h)-(l-c)*(u-g)-(l-d)*(u-h)-(l-m)*(u-f))},t.point=a,t.pointGrid=Sr,t.pointOnFeature=cr,t.pointOnLine=ir,t.pointOnSurface=cr,t.pointToLineDistance=sr,t.points=l,t.pointsWithinPolygon=fe,t.polygon=u,t.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return W(t,function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var l=0;l<r;l++)a=[[]],s=t,l>0&&(s=u(o).geometry),ta(s,a),o=a.slice(0);n.push(u(o,i));break;case"MultiPolygon":o=[[[]]];for(var c=0;c<r;c++)a=[[[]]],s=t,c>0&&(s=m(o).geometry),ea(s,a),o=a.slice(0);n.push(m(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),d(n)},t.polygonTangents=function(t,e){var n,r,i,o,s=L(t),l=L(e),u=ot(e),c=0,h=null;switch(s[0]>u[0]&&s[0]<u[2]&&s[1]>u[1]&&s[1]<u[3]&&(c=(h=Bn(t,pn(e))).properties.featureIndex),B(e)){case"Polygon":n=l[0][c],r=l[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(r=l[0][c]),o=pi(l[0][0],l[0][l[0].length-1],s);var p=ci(l[0],s,o,i,n,r);n=p[0],r=p[1];break;case"MultiPolygon":for(var f=0,_=0,m=0,g=0;g<l[0].length;g++){f=g;for(var y=!1,v=0;v<l[0][g].length;v++){if(_=v,m===c){y=!0;break}m++}if(y)break}n=l[0][f][_],r=l[0][f][_],o=pi(l[0][0][0],l[0][0][l[0][0].length-1],s),l.forEach(function(t){var e=ci(t[0],s,o,i,n,r);n=e[0],r=e[1]})}return d([a(n),a(r)])},t.polygonToLine=Gr,t.polygonToLineString=Gr,t.polygonize=function(t){var e=To.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){ko.findEdgeRingContaining(t,r)&&r.push(t)}),d(r.map(function(t){return t.toPolygon()}))},t.polygons=c,t.projection=ca,t.propEach=$,t.propReduce=q,t.propertiesContainsFilter=Ea,t.radians2degrees=E,t.radiansToDegrees=E,t.radiansToDistance=v,t.radiansToLength=v,t.random=ga,t.randomLineString=fa,t.randomPoint=pa,t.randomPolygon=da,t.randomPosition=ha,t.rewind=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=be(t));var i=[];switch(t.type){case"GeometryCollection":return W(t,function(t){fi(t,n)}),t;case"FeatureCollection":return G(t,function(t){G(fi(t,n),function(t){i.push(t)})}),d(i)}return fi(t,n)},t.rhumbBearing=ai,t.rhumbDestination=ui,t.rhumbDistance=or,t.round=y,t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.sector=function(t,e,n,r,i){if(!T(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(si(n)===si(r))return ln(t,e,i);var s=L(t),a=$r(t,e,n,r,i),l=[[s]];return V(a,function(t){l[0].push(t)}),l[0].push(s),u(l,o)},t.segmentEach=J,t.segmentReduce=Q,t.shortestPath=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,s=n.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!k(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var l=M(t),u=M(e);switch(t=a(l),e=a(u),B(s)){case"FeatureCollection":if(0===s.features.length)return h([l,u]);break;case"Polygon":s=d([o(F(s))]);break;default:throw new Error("invalid obstacles")}var c=s;c.features.push(t),c.features.push(e);var p=ot(yo(rn(ot(c)),1.15));r||(r=_e([p[0],p[1]],[p[2],p[1]],n)/100),c.features.pop(),c.features.pop();for(var f=p[0],_=p[1],m=p[2],g=p[3],y=r/_e([f,_],[m,_],n)*(m-f),v=r/_e([f,_],[f,g],n)*(g-_),b=m-f,x=g-_,w=Math.floor(b/y),E=Math.floor(x/v),S=(b-w*y)/2,C=[],I=[],P=[],A=[],O=1/0,L=1/0,N=g-(x-E*v)/2,D=0;N>=_;){for(var R=[],z=[],j=f+S,V=0;j<=m;){var U=a([j,N]),$=cs(U,s);R.push($?0:1),z.push(j+"|"+N);var q=_e(U,t);!$&&q<O&&(O=q,P={x:V,y:D});var G=_e(U,e);!$&&G<L&&(L=G,A={x:V,y:D}),j+=y,V++}I.push(R),C.push(z),N-=v,D++}var H=new as(I,{diagonal:!0}),Z=ss.search(H,H.grid[P.y][P.x],H.grid[A.y][A.x]),W=[l];return Z.forEach(function(t){var e=C[t.x][t.y].split("|");W.push([+e[0],+e[1]])}),W.push(u),qe(h(W))},t.simplify=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=be(t)),W(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;qe(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=Je(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return Je(t,e,n)});break;case"Polygon":t.coordinates=Qe(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return Qe(t,e,n)})}}(t,n,r)}),t},t.square=sn,t.squareGrid=I_,t.standardDeviationalEllipse=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!k(n))throw new Error("steps must be a number");if(!T(i))throw new Error("properties must be a number");var o=Z(t).length,s=Ks(t,{weight:r}),a=0,l=0,u=0;G(t,function(t){var e=t.properties[r]||1,n=Qs(L(t),L(s));a+=Math.pow(n.x,2)*e,l+=Math.pow(n.y,2)*e,u+=n.x*n.y*e});var c=a-l,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(u,2)),p=Math.atan((c+h)/(2*u)),f=180*p/Math.PI,_=0,m=0,g=0;G(t,function(t){var e=t.properties[r]||1,n=Qs(L(t),L(s));_+=Math.pow(n.x*Math.cos(p)-n.y*Math.sin(p),2)*e,m+=Math.pow(n.x*Math.sin(p)+n.y*Math.cos(p),2)*e,g+=e});var y=Math.sqrt(2*_/g),v=Math.sqrt(2*m/g),b=Xs(s,y,v,{units:"degrees",angle:f,steps:n,properties:i}),x=fe(t,d([b])),w={meanCenterCoordinates:L(s),semiMajorAxis:y,semiMinorAxis:v,numberOfFeatures:o,angle:f,percentageWithinEllipse:100*Z(x).length/o};return b.properties.standardDeviationalEllipse=w,b},t.tag=function(t,e,n,r){return t=be(t),e=be(e),G(t,function(t){t.properties||(t.properties={}),G(e,function(e){void 0===t.properties[r]&&pe(t,e)&&(t.properties[r]=e.properties[n])})}),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Fn(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Fn(t))}),e},t.tin=me,t.toMercator=oa,t.toWgs84=sa,t.transformRotate=go,t.transformScale=yo,t.transformTranslate=function(t,e,n,r){if(!T(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=be(t)),V(t,function(t){var r=L(ui(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t},t.triangleGrid=k_,t.truncate=Cr,t.union=g_,t.unitsFactors=r,t.unkinkPolygon=function(t){var e=[];return Y(t,function(t){"Polygon"===t.geometry.type&&G(function(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];Or(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var l=0;l<r[a].length-1;l++)s.push(_(a,l));var u=Et();u.load(s)}for(var c=0;c<r.length;c++)for(var h=0;h<r[c].length-1;h++)if(n)u.search(_(c,h)).forEach(function(t){f(c,h,t.ring,t.edge)});else for(var p=0;p<r.length;p++)for(var d=0;d<r[p].length-1;d++)f(c,h,p,d);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function f(t,n,s,a){var l,u,c=r[t][n],h=r[t][n+1],p=r[s][a],d=r[s][a+1],f=function(t,e,n,r){if(Ir(t,n)||Ir(t,r)||Ir(e,n)||Ir(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],l=n[0],u=n[1],c=r[0],h=r[1],p=(i-s)*(u-h)-(o-a)*(l-c);return 0===p?null:[((i*a-o*s)*(l-c)-(i-s)*(l*h-u*c))/p,((i*a-o*s)*(u-h)-(o-a)*(l*h-u*c))/p]}(c,h,p,d);if(null!==f&&(u=d[0]!==p[0]?(f[0]-p[0])/(d[0]-p[0]):(f[1]-p[1])/(d[1]-p[1]),!((l=h[0]!==c[0]?(f[0]-c[0])/(h[0]-c[0]):(f[1]-c[1])/(h[1]-c[1]))>=1||l<=0||u>=1||u<=0))){var _=!o[f];_&&(o[f]=!0),i.push(e?e(f,t,n,c,h,l,s,a,p,d,u,_):f)}}function _(t,e){var n,i,o,s,a=r[t][e],l=r[t][e+1];return a[0]<l[0]?(n=a[0],i=l[0]):(n=l[0],i=a[0]),a[1]<l[1]?(o=a[1],s=l[1]):(o=l[1],s=a[1]),{minX:n,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}(t,function(t,e,n,r,i,o,s,a,l,u,c,h){return[t,e,n,r,i,o,s,a,l,u,c,h]}),a=s.length;if(0==a){var l=[];for(r=0;r<e;r++)l.push(u([t.geometry.coordinates[r]],{parent:-1,winding:Ar(t.geometry.coordinates[r])}));var c=d(l);return F(),B(),c}var h=[],p=[];for(r=0;r<e;r++){h.push([]);for(var f=0;f<t.geometry.coordinates[r].length-1;f++)h[r].push([new kr(t.geometry.coordinates[r][Mr(f+1,t.geometry.coordinates[r].length-1)],1,[r,f],[r,Mr(f+1,t.geometry.coordinates[r].length-1)],void 0)]),p.push(new Tr(t.geometry.coordinates[r][f],[r,Mr(f-1,t.geometry.coordinates[r].length-1)],[r,f],void 0,void 0,!1,!0))}for(r=0;r<a;r++)h[s[r][1]][s[r][2]].push(new kr(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&p.push(new Tr(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var _=p.length;for(r=0;r<h.length;r++)for(f=0;f<h[r].length;f++)h[r][f].sort(function(t,e){return t.param<e.param?-1:1});var m=[];for(r=0;r<_;r++)m.push({minX:p[r].coord[0],minY:p[r].coord[1],maxX:p[r].coord[0],maxY:p[r].coord[1],index:r});var g=Et();for(g.load(m),r=0;r<h.length;r++)for(f=0;f<h[r].length;f++)for(var y=0;y<h[r][f].length;y++){b=y==h[r][f].length-1?h[r][Mr(f+1,t.geometry.coordinates[r].length-1)][0].coord:h[r][f][y+1].coord;var v=g.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];h[r][f][y].nxtIsectAlongEdgeIn=v.index}for(r=0;r<h.length;r++)for(f=0;f<h[r].length;f++)for(y=0;y<h[r][f].length;y++){var b=h[r][f][y].coord,x=(v=g.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;x<o?p[x].nxtIsectAlongRingAndEdge2=h[r][f][y].nxtIsectAlongEdgeIn:Or(p[x].ringAndEdge1,h[r][f][y].ringAndEdgeIn)?p[x].nxtIsectAlongRingAndEdge1=h[r][f][y].nxtIsectAlongEdgeIn:p[x].nxtIsectAlongRingAndEdge2=h[r][f][y].nxtIsectAlongEdgeIn}var w=[];for(r=0,f=0;f<e;f++){var E=r;for(y=0;y<t.geometry.coordinates[f].length-1;y++)p[r].coord[0]<p[E].coord[0]&&(E=r),r++;var S=p[E].nxtIsectAlongRingAndEdge2;for(y=0;y<p.length;y++)if(p[y].nxtIsectAlongRingAndEdge1==E||p[y].nxtIsectAlongRingAndEdge2==E){var C=y;break}var I=Pr([p[C].coord,p[E].coord,p[S].coord],!0)?1:-1;w.push({isect:E,parent:-1,winding:I})}for(w.sort(function(t,e){return p[t.isect].coord>p[e.isect].coord?-1:1}),l=[];w.length>0;){var k=w.pop(),T=k.isect,P=k.parent,A=k.winding,O=l.length,M=[p[T].coord],L=T;if(p[T].ringAndEdge1Walkable)var N=p[T].ringAndEdge1,D=p[T].nxtIsectAlongRingAndEdge1;else N=p[T].ringAndEdge2,D=p[T].nxtIsectAlongRingAndEdge2;for(;!Or(p[T].coord,p[D].coord);){M.push(p[D].coord);var R=void 0;for(r=0;r<w.length;r++)if(w[r].isect==D){R=r;break}if(null!=R&&w.splice(R,1),Or(N,p[D].ringAndEdge1)){if(N=p[D].ringAndEdge2,p[D].ringAndEdge2Walkable=!1,p[D].ringAndEdge1Walkable){var z={isect:D};Pr([p[L].coord,p[D].coord,p[p[D].nxtIsectAlongRingAndEdge2].coord],1==A)?(z.parent=P,z.winding=-A):(z.parent=O,z.winding=A),w.push(z)}L=D,D=p[D].nxtIsectAlongRingAndEdge2}else N=p[D].ringAndEdge1,p[D].ringAndEdge1Walkable=!1,p[D].ringAndEdge2Walkable&&(z={isect:D},Pr([p[L].coord,p[D].coord,p[p[D].nxtIsectAlongRingAndEdge1].coord],1==A)?(z.parent=P,z.winding=-A):(z.parent=O,z.winding=A),w.push(z)),L=D,D=p[D].nxtIsectAlongRingAndEdge1}M.push(p[D].coord),l.push(u([M],{index:O,parent:P,winding:A,netWinding:void 0}))}function F(){for(var t=[],e=0;e<c.features.length;e++)-1==c.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<c.features.length;r++)t[e]!=r&&pe(c.features[t[e]].geometry.coordinates[0][0],c.features[r],{ignoreBoundary:!0})&&pr(c.features[r])<1/0&&(n=r);c.features[t[e]].properties.parent=n}}function B(){for(var t=0;t<c.features.length;t++)if(-1==c.features[t].properties.parent){var e=c.features[t].properties.winding;c.features[t].properties.netWinding=e,j(t,e)}}function j(t,e){for(var n=0;n<c.features.length;n++)if(c.features[n].properties.parent==t){var r=e+c.features[n].properties.winding;c.features[n].properties.netWinding=r,j(n,r)}}return c=d(l),F(),B(),c}(t),function(n){e.push(u(n.geometry.coordinates,t.properties))})}),d(e)},t.validateBBox=P,t.validateId=A,t.voronoi=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return z(t,"Point","points"),d(function(){var t=ps,e=ds,n=null;function r(r){return new Zs(r.map(function(n,i){var o=[Math.round(t(n,i,r)/qs)*qs,Math.round(e(n,i,r)/qs)*qs];return o.index=i,o.data=n,o}),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:hs(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:hs(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Ws))},t.within=fe,Object.defineProperty(t,"__esModule",{value:!0})}(e)},WpKc:function(t,e,n){"use strict";var r=n("4b23");function i(t){this.origin=t.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=t.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=t,this.send=this.send.bind(this),this.countries=t.countries?t.countries.split(","):null,this.types=t.types?t.types.split(","):null,this.bbox=t.bbox?t.bbox:null,this.language=t.language?t.language.split(","):null,this.limit=t.limit?+t.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(t),this.eventQueue=new Array,this.flushInterval=t.flushInterval||1e3,this.maxQueueSize=t.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}i.prototype={select:function(t,e){var n=this.getSelectedIndex(t,e),r=this.getEventPayload("search.select",e);if(r.resultIndex=n,r.resultPlaceName=t.place_name,r.resultId=t.id,(n!==this.lastSentIndex||r.queryString!==this.lastSentInput)&&-1!=n&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,r.queryString))return this.push(r)},start:function(t){var e=this.getEventPayload("search.start",t);if(e.queryString)return this.push(e)},keyevent:function(t,e){if(t.key&&!t.metaKey&&-1===[9,27,37,39,13,38,40].indexOf(t.keyCode)){var n=this.getEventPayload("search.keystroke",e);if(n.lastAction=t.key,n.queryString)return this.push(n)}},send:function(t,e){if(!this.enableEventLogging)return e?e():void 0;var n=this.getRequestOptions(t);this.request(n,(function(t){return t?this.handleError(t,e):e?e():void 0}).bind(this))},getRequestOptions:function(t){return Array.isArray(t)||(t=[t]),{method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}},getEventPayload:function(t,e){var n;n=e.options.proximity?[e.options.proximity.longitude,e.options.proximity.latitude]:null;var r=e._map?e._map.getZoom():void 0,i={event:t,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",proximity:n,limit:e.options.limit,mapZoom:r,keyboardLocale:this.locale};return i.queryString="search.select"===t?e.inputString:"search.select"!=t&&e._inputEl?e._inputEl.value:e.inputString,i},request:function(t,e){var n=new XMLHttpRequest;for(var r in n.onreadystatechange=function(){if(4==this.readyState)return e(204==this.status?null:this.statusText)},n.open(t.method,t.host+"/"+t.path,!0),t.headers)n.setRequestHeader(r,t.headers[r]);n.send(t.body)},handleError:function(t,e){if(e)return e(t)},generateSessionID:function(){return r()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(t,e){if(e._typeahead){var n=t.id;return e._typeahead.data.map(function(t){return t.id}).indexOf(n)}},shouldEnableLogging:function(t){return!(!1===t.enableEventLogging||t.origin&&-1==t.origin.indexOf("api.mapbox.com")||t.localGeocoder||t.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(t,e){this.eventQueue.push(t),(this.eventQueue.length>=this.maxQueueSize||e)&&this.flush()},remove:function(){this.flush()}},t.exports=i},XwJu:function(t,e,n){"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},YI60:function(t,e,n){"use strict";var r=n("aqBw"),i={};function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t){if(i[t])return i[t];var e=t.split("."),n=e[0],s=e[1];if(!s)throw new Error("Invalid token");var a=function(t){try{return JSON.parse(r.decode(t))}catch(e){throw new Error("Invalid token")}}(s),l={usage:n,user:a.u};return o(a,"a")&&(l.authorization=a.a),o(a,"exp")&&(l.expires=1e3*a.exp),o(a,"iat")&&(l.created=1e3*a.iat),o(a,"scopes")&&(l.scopes=a.scopes),o(a,"client")&&(l.client=a.client),o(a,"ll")&&(l.lastLogin=a.ll),o(a,"iu")&&(l.impersonator=a.iu),i[t]=l,l}},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},ZPc1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("SJ/V"))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t,e)[0]}},Zdlu:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t){var e=t.toString().trim();return!isNaN(parseFloat(e))&&parseFloat(e)===Number(e)}},aqBw:function(t,e,n){(function(t){var r;!function(i){"object"==typeof global&&global;var o=function(t){this.message=t};(o.prototype=new Error).name="InvalidCharacterError";var s=function(t){throw new o(t)},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,u={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,r,i,o=t.length%3,l="",u=-1,c=t.length-o;++u<c;)e=t.charCodeAt(u)<<16,n=t.charCodeAt(++u)<<8,r=t.charCodeAt(++u),l+=a.charAt((i=e+n+r)>>18&63)+a.charAt(i>>12&63)+a.charAt(i>>6&63)+a.charAt(63&i);return 2==o?(e=t.charCodeAt(u)<<8,n=t.charCodeAt(++u),l+=a.charAt((i=e+n)>>10)+a.charAt(i>>4&63)+a.charAt(i<<2&63)+"="):1==o&&(i=t.charCodeAt(u),l+=a.charAt(i>>2)+a.charAt(i<<4&63)+"=="),l},decode:function(t){var e=(t=String(t).replace(l,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",u=-1;++u<e;)r=a.indexOf(t.charAt(u)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};void 0===(r=(function(){return u}).call(e,n,e,t))||(t.exports=r)}()}).call(this,n("YuTi")(t))},baNz:function(t,e,n){"use strict";t.exports=function(t,e){var n=function(t,n){return-1!==e.indexOf(t)&&void 0!==n};return"function"==typeof e&&(n=e),Object.keys(t).filter(function(e){return n(e,t[e])}).reduce(function(e,n){return e[n]=t[n],e},{})}},bo1M:function(t,e,n){var r,i;i=function(t){var e=["N","E","A","D"];function n(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function r(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function i(t,e,n){i.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(t,e){o.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function s(t,e){s.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function a(t,e,n){a.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(t,e,n){var r=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,r),t}function u(t){var e=typeof t;return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"function"==typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function c(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}function h(t){var e=0,n=u(t);if("array"===n)return t.forEach(function(t){e+=h(t)}),e+c("[type: array, hash: "+e+"]");if("object"===n){for(var r in t)if(t.hasOwnProperty(r)){var i="[ type: object, key: "+r+", value hash: "+h(t[r])+"]";e+=c(i)}return e}return e+c("[ type: "+n+" ; value: "+t+"]")}function p(t,e,n,r,l,c,d,f){n=n||[],d=d||[];var _=(l=l||[]).slice(0);if(null!=c){if(r){if("function"==typeof r&&r(_,c))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(_,c))return;if(r.normalize){var m=r.normalize(_,c,t,e);m&&(t=m[0],e=m[1])}}}_.push(c)}"regexp"===u(t)&&"regexp"===u(e)&&(t=t.toString(),e=e.toString());var g,y,v,b,x=typeof t,w=typeof e,E="undefined"!==x||d&&d.length>0&&d[d.length-1].lhs&&Object.getOwnPropertyDescriptor(d[d.length-1].lhs,c),S="undefined"!==w||d&&d.length>0&&d[d.length-1].rhs&&Object.getOwnPropertyDescriptor(d[d.length-1].rhs,c);if(!E&&S)n.push(new o(_,e));else if(!S&&E)n.push(new s(_,t));else if(u(t)!==u(e))n.push(new i(_,t,e));else if("date"===u(t)&&t-e!=0)n.push(new i(_,t,e));else if("object"===x&&null!==t&&null!==e){for(g=d.length-1;g>-1;--g)if(d[g].lhs===t){b=!0;break}if(b)t!==e&&n.push(new i(_,t,e));else{if(d.push({lhs:t,rhs:e}),Array.isArray(t)){for(f&&(t.sort(function(t,e){return h(t)-h(e)}),e.sort(function(t,e){return h(t)-h(e)})),g=e.length-1,y=t.length-1;g>y;)n.push(new a(_,g,new o(void 0,e[g--])));for(;y>g;)n.push(new a(_,y,new s(void 0,t[y--])));for(;g>=0;--g)p(t[g],e[g],n,r,_,g,d,f)}else{var C=Object.keys(t),I=Object.keys(e);for(g=0;g<C.length;++g)(b=I.indexOf(v=C[g]))>=0?(p(t[v],e[v],n,r,_,v,d,f),I[b]=null):p(t[v],void 0,n,r,_,v,d,f);for(g=0;g<I.length;++g)(v=I[g])&&p(void 0,e[v],n,r,_,v,d,f)}d.length=d.length-1}}else t!==e&&("number"===x&&isNaN(t)&&isNaN(e)||n.push(new i(_,t,e)))}function d(t,e,n,r,i){var o=[];if(p(t,e,o,r,null,null,null,i),n)for(var s=0;s<o.length;++s)n(o[s]);return o}function f(t,e,n,r){var i=d(t,e,r?function(t){t&&r.push(t)}:void 0,n);return r||(i.length?i:void 0)}function _(t,e,n){if(n.path&&n.path.length){var r,i=t[e],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":_(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":_(t[e],n.index,n.item);break;case"D":t=l(t,e);break;case"E":case"N":t[e]=n.rhs}return t}function m(t,n,r){if(void 0===r&&n&&~e.indexOf(n.kind)&&(r=n),t&&r&&r.kind){for(var i=t,o=-1,s=r.path?r.path.length-1:0;++o<s;)void 0===i[r.path[o]]&&(i[r.path[o]]=void 0!==r.path[o+1]&&"number"==typeof r.path[o+1]?[]:{}),i=i[r.path[o]];switch(r.kind){case"A":r.path&&void 0===i[r.path[o]]&&(i[r.path[o]]=[]),_(r.path?i[r.path[o]]:i,r.index,r.item);break;case"D":delete i[r.path[o]];break;case"E":case"N":i[r.path[o]]=r.rhs}}}function g(t,e,n){if(n.path&&n.path.length){var r,i=t[e],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":g(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":g(t[e],n.index,n.item);break;case"D":case"E":t[e]=n.lhs;break;case"N":t=l(t,e)}return t}return n(i,r),n(o,r),n(s,r),n(a,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},orderIndependentDiff:{value:function(t,e,n,r){var i=d(t,e,r?function(t){t&&r.push(t)}:void 0,n,!0);return r||(i.length?i:void 0)},enumerable:!0},observableDiff:{value:d,enumerable:!0},orderIndependentObservableDiff:{value:function(t,e,n,r,i,o,s){return p(t,e,n,r,i,o,s,!0)},enumerable:!0},orderIndepHash:{value:h,enumerable:!0},applyDiff:{value:function(t,e,n){t&&e&&d(t,e,function(r){n&&!n(t,e,r)||m(t,e,r)})},enumerable:!0},applyChange:{value:m,enumerable:!0},revertChange:{value:function(t,e,n){if(t&&e&&n&&n.kind){var r,i,o=t;for(i=n.path.length-1,r=0;r<i;r++)void 0===o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":g(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),f.DeepDiff=f,t&&(t.DeepDiff=f),f}(this),void 0===(r=(function(){return i}).call(e,n,e,t))||(t.exports=r)},cRm7:function(t,e,n){"use strict";var r=n("AxvH");function i(t,e){this.request=t,this.headers=e.headers,this.rawBody=e.body,this.statusCode=e.statusCode;try{this.body=JSON.parse(e.body||"{}")}catch(n){this.body=e.body}this.links=r(this.headers.link)}i.prototype.hasNextPage=function(){return!!this.links.next},i.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null},t.exports=i},cryX:function(t,e,n){"use strict";t.exports=function(t){var e={};return t?(t.trim().split(/[\r|\n]+/).forEach(function(t){var n=function(t){var e=t.indexOf(":");return{name:t.substring(0,e).trim().toLowerCase(),value:t.substring(e+1).trim()}}(t);e[n.name]=n.value}),e):e}},d0rS:function(t,e,n){"use strict";function r(t){return Array.isArray(t)?t.map(encodeURIComponent).join(","):encodeURIComponent(String(t))}function i(t,e,n){if(!1===n||null===n)return t;var i=/\?/.test(t)?"&":"?",o=encodeURIComponent(e);return void 0!==n&&""!==n&&!0!==n&&(o+="="+r(n)),""+t+i+o}t.exports={appendQueryObject:function(t,e){if(!e)return t;var n=t;return Object.keys(e).forEach(function(t){var r=e[t];void 0!==r&&(Array.isArray(r)&&(r=r.filter(function(t){return null!=t}).join(",")),n=i(n,t,r))}),n},appendQueryParam:i,prependOrigin:function(t,e){if(!e)return t;if("http"===t.slice(0,4))return t;var n="/"===t[0]?"":"/";return""+e.replace(/\/$/,"")+n+t},interpolateRouteParams:function(t,e){return e?t.replace(/\/:([a-zA-Z0-9]+)/g,function(t,n){var i=e[n];if(void 0===i)throw new Error("Unspecified route parameter "+n);return"/"+r(i)}):t}}},dkTa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("jH9d");e.default=function(t){return r.sexagesimalPattern.test(t.toString().trim())}},eFQn:function(t,e,n){"use strict";var r=n("Smn/");t.exports=function(t){return r(t,function(t,e){return"boolean"==typeof e?JSON.stringify(e):e})}},eRSq:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=n("jH9d"),o=(r=n("M7lk"))&&r.__esModule?r:{default:r};function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){l(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:i.longitudeKeys,latitude:i.latitudeKeys,altitude:i.altitudeKeys},n=(0,o.default)(t,e.longitude),r=(0,o.default)(t,e.latitude),s=(0,o.default)(t,e.altitude);return a({latitude:r,longitude:n},s?{altitude:s}:{})}},endd:function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},eqyj:function(t,e,n){"use strict";var r=n("xTJ+");t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},fCuW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("wI44"))&&r.__esModule?r:{default:r};e.default=function(t,e,n){return(0,i.default)(e,t)+(0,i.default)(t,n)===(0,i.default)(e,n)}},fxgB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=l(n("2o5z")),i=l(n("QTq/")),o=l(n("jDUc")),s=l(n("6D9Q")),a=n("jH9d");function l(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n,l,u=(0,r.default)(t),c=(0,i.default)(t),h=(0,o.default)(u),p=(0,o.default)(c),d=e/a.earthRadius,f=h-d,_=h+d,m=(0,o.default)(a.MAXLAT),g=(0,o.default)(a.MINLAT),y=(0,o.default)(a.MAXLON),v=(0,o.default)(a.MINLON);if(f>g&&_<m){var b=Math.asin(Math.sin(d)/Math.cos(h));(n=p-b)<v&&(n+=2*Math.PI),(l=p+b)>y&&(l-=2*Math.PI)}else f=Math.max(f,g),_=Math.min(_,m),n=v,l=y;return[{latitude:(0,s.default)(f),longitude:(0,s.default)(n)},{latitude:(0,s.default)(_),longitude:(0,s.default)(l)}]}},g7np:function(t,e,n){"use strict";var r=n("2SVd"),i=n("5oMp");t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},i8yS:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("2o5z")),i=a(n("QTq/")),o=a(n("jDUc")),s=a(n("6D9Q"));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){if(!1===Array.isArray(t)||0===t.length)return!1;var e=t.length,n=t.reduce(function(t,e){var n=(0,o.default)((0,r.default)(e)),s=(0,o.default)((0,i.default)(e));return{X:t.X+Math.cos(n)*Math.cos(s),Y:t.Y+Math.cos(n)*Math.sin(s),Z:t.Z+Math.sin(n)}},{X:0,Y:0,Z:0}),a=n.X/e,l=n.Y/e,u=n.Z/e;return{longitude:(0,s.default)(Math.atan2(l,a)),latitude:(0,s.default)(Math.atan2(u,Math.sqrt(a*a+l*l)))}}},iFvi:function(t,e,n){"use strict";var r=n("Bi8L"),i=n("9/5/"),o=n("U6jy"),s=n("+qE3").EventEmitter,a=n("SsYf"),l=n("0KjW"),u=n("LFDd"),c=n("WpKc"),h=n("/5w7"),p=n("5K5J");function d(t){this._eventEmitter=new s,this.options=o({},this.options,t),this.inputString="",this.fresh=!0,this.lastSelected=null}d.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(t){return t.place_name},render:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"}},addTo:function(t){function e(t,e){if(!document.body.contains(e))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const n=t.onAdd();e.appendChild(n)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else{if("string"!=typeof t)throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element");{const n=document.querySelectorAll(t);if(0===n.length)throw new Error("Element ",t,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,n[0])}}},onAdd:function(t){if(t&&"string"!=typeof t&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=u(l({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new c(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",i(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(t){this.eventManager.keyevent(t,this)}).bind(this));var o=document.createElement("div");o.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),o.appendChild(this._clearEl),o.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(o),this._typeahead=new r(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),e},createIcon:function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),"innerHTML"in n)n.innerHTML=e;else{var r=document.createElement("div");r.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",n.appendChild(r.firstChild.firstChild)}return n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this._geocode(e)},_onKeyDown:function(t){var e=27,n=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var r=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!r||!r.value)return this.fresh=!0,t.keyCode!==n&&this.clear(t),this._clearEl.style.display="none";t.metaKey||-1!==[n,e,37,39,13,38,40].indexOf(t.keyCode)||r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;if(t&&JSON.stringify(t)!==this.lastSelected){var e;if(this._clearEl.style.display="none",this.options.flyTo)if(t.properties&&a[t.properties.short_code])e=o({},this.options.flyTo),this._map&&this._map.fitBounds(a[t.properties.short_code].bbox,e);else if(t.bbox){var n=t.bbox;e=o({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],e)}else(e=o({},{zoom:this.options.zoom},this.options.flyTo)).center=t.center,this._map&&this._map.flyTo(e);this.options.marker&&this._mapboxgl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._eventEmitter.emit("result",{result:t}),this.eventManager.select(t,this)}},_geocode:function(t){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t}),this.inputString=t;var e,n=this,r=null,i=["bbox","limit","proximity","countries","types","language","reverseMode","mode"].reduce(function(t,e){return n.options[e]&&(t[e]=["countries","types","language"].indexOf(e)>-1?n.options[e].split(/[\s,]+/):n.options[e],"proximity"===e&&n.options[e]&&"number"==typeof n.options[e].longitude&&"number"==typeof n.options[e].latitude&&(t[e]=[n.options[e].longitude,n.options[e].latitude])),t},{});if(this.options.localGeocoderOnly)e=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(t)){var s=t.split(/[\s(,)?]+/).map(function(t){return parseFloat(t,10)}).reverse();"proximity"in(i=o(i,{query:s,limit:1}))&&delete i.proximity,e=this.geocoderService.reverseGeocode(i).send()}else i=o(i,{query:t}),e=this.geocoderService.forwardGeocode(i).send();var a=[];this.options.localGeocoder&&((a=this.options.localGeocoder(t))||(a=[]));var l=[];return e.catch((function(t){r=t}).bind(this)).then((function(e){this._loadingEl.style.display="none";var n={};return e?"200"==e.statusCode&&((n=e.body).request=e.request,n.headers=e.headers):n={type:"FeatureCollection",features:[]},n.config=i,this.fresh&&(this.eventManager.start(this),this.fresh=!1),n.features=n.features?a.concat(n.features):a,this.options.externalGeocoder?(l=this.options.externalGeocoder(t,n.features)||[]).then(function(t){return n.features=n.features?t.concat(n.features):t,n},function(){return n}):n}).bind(this)).then((function(t){if(r)throw r;this.options.filter&&t.features.length&&(t.features=t.features.filter(this.options.filter)),t.features.length?(this._clearEl.style.display="block",this._eventEmitter.emit("results",t),this._typeahead.update(t.features)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",t))}).bind(this)).catch((function(t){this._loadingEl.style.display="none",a.length&&this.options.localGeocoder||l.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:a}),this._eventEmitter.emit("error",{error:t})}).bind(this)),e},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){t.relatedTarget&&this._clear(t)},_onQueryResult:function(t){var e=t.body;if(e.features.length){var n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat})}else this.setProximity(null)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=p.language(t),n=h.placeholder[e];if(n)return n}return"Search"},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this._geocode(t),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setOrigin:function(t){return this.options.origin=t,this.geocoderService=u(l({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},_handleMarker:function(t){if(this._map){this._removeMarker();var e=o({},{color:"#4668F2"},this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(e),t.center?this.mapMarker.setLngLat(t.center).addTo(this._map):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this.eventManager.remove(),this}},t.exports=d},jDUc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t){return t*Math.PI/180}},jH9d:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.areaConversion=e.timeConversion=e.distanceConversion=e.altitudeKeys=e.latitudeKeys=e.longitudeKeys=e.MAXLON=e.MINLON=e.MAXLAT=e.MINLAT=e.earthRadius=e.sexagesimalPattern=void 0,e.sexagesimalPattern=/^([0-9]{1,3})\xb0\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['\u2032]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["\u2033]\s*)?([NEOSW]?)$/,e.earthRadius=6378137,e.MINLAT=-90,e.MAXLAT=90,e.MINLON=-180,e.MAXLON=180,e.longitudeKeys=["lng","lon","longitude",0],e.latitudeKeys=["lat","latitude",1],e.altitudeKeys=["alt","altitude","elevation","elev",2],e.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},e.timeConversion={m:60,h:3600,d:86400};var r={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};e.areaConversion=r,r.sqm=r.m2,r.sqkm=r.km2,r.sqft=r.ft2,r.sqyd=r.yd2,r.sqin=r.in2},jIQF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(e,"computeDestinationPoint",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"convertArea",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"convertSpeed",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"decimalToSexagesimal",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"findNearest",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"getAreaOfPolygon",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getBounds",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"getBoundsOfDistance",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"getCenter",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getCenterOfBounds",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"getCompassDirection",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"getCoordinateKey",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"getCoordinateKeys",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"getDistance",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"getDistanceFromLine",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"getGreatCircleBearing",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"getLatitude",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"getLongitude",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"getPathLength",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(e,"getPreciseDistance",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(e,"getRhumbLineBearing",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"getRoughCompassDirection",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(e,"getSpeed",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"isDecimal",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(e,"isPointInLine",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(e,"isPointInPolygon",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(e,"isPointNearLine",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(e,"isPointWithinRadius",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(e,"isSexagesimal",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(e,"isValidCoordinate",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(e,"isValidLatitude",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(e,"isValidLongitude",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(e,"orderByDistance",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(e,"sexagesimalToDecimal",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(e,"toDecimal",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(e,"toRad",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(e,"toDeg",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(e,"wktToPolygon",{enumerable:!0,get:function(){return U.default}});var i=q(n("95co")),o=q(n("5kFF")),s=q(n("3Q5m")),a=q(n("9Og4")),l=q(n("Fqnj")),u=q(n("ZPc1")),c=q(n("t3RW")),h=q(n("JKJh")),p=q(n("fxgB")),d=q(n("i8yS")),f=q(n("OTo6")),_=q(n("mpC8")),m=q(n("M7lk")),g=q(n("eRSq")),y=q(n("wI44")),v=q(n("45h8")),b=q(n("+eSx")),x=q(n("2o5z")),w=q(n("QTq/")),E=q(n("m5sM")),S=q(n("mbFH")),C=q(n("NBE3")),I=q(n("z+Es")),k=q(n("Nrgg")),T=q(n("Zdlu")),P=q(n("fCuW")),A=q(n("HkEB")),O=q(n("G31G")),M=q(n("5vw/")),L=q(n("dkTa")),N=q(n("vONA")),D=q(n("sCiF")),R=q(n("mSAH")),z=q(n("SJ/V")),F=q(n("rT3r")),B=q(n("KcL1")),j=q(n("jDUc")),V=q(n("6D9Q")),U=q(n("5hfJ")),$=n("jH9d");function q(t){return t&&t.__esModule?t:{default:t}}Object.keys($).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return $[t]}}))})},jLWS:function(t,e,n){"use strict";t.exports={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"}},"jfS+":function(t,e,n){"use strict";var r=n("endd");function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},m5sM:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("wI44"))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.default;return t.reduce(function(t,n){return"object"===o(t)&&null!==t.last&&(t.distance+=e(n,t.last)),t.last=n,t},{last:null,distance:0}).distance}},mSAH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("Zdlu")),i=a(n("dkTa")),o=a(n("rT3r")),s=n("jH9d");function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){return(0,r.default)(e)?!(parseFloat(e)>s.MAXLON||e<s.MINLON):!!(0,i.default)(e)&&t((0,o.default)(e))}},mbFH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("2o5z")),i=a(n("QTq/")),o=a(n("jDUc")),s=n("jH9d");function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n=void 0===n||isNaN(n)?1:n;var a,l,u,c,h,p,d,f=(0,r.default)(t),_=(0,i.default)(t),m=(0,r.default)(e),g=(0,i.default)(e),y=6356752.314245,v=1/298.257223563,b=(0,o.default)(g-_),x=Math.atan((1-v)*Math.tan((0,o.default)(parseFloat(f)))),w=Math.atan((1-v)*Math.tan((0,o.default)(parseFloat(m)))),E=Math.sin(x),S=Math.cos(x),C=Math.sin(w),I=Math.cos(w),k=b,T=100;do{var P=Math.sin(k),A=Math.cos(k);if(0===(p=Math.sqrt(I*P*(I*P)+(S*C-E*I*A)*(S*C-E*I*A))))return 0;a=E*C+S*I*A,l=Math.atan2(p,a),h=a-2*E*C/(c=1-(u=S*I*P/p)*u),isNaN(h)&&(h=0);var O=v/16*c*(4+v*(4-3*c));d=k,k=b+(1-O)*v*u*(l+O*p*(h+O*a*(2*h*h-1)))}while(Math.abs(k-d)>1e-12&&--T>0);if(0===T)return NaN;var M=c*(s.earthRadius*s.earthRadius-y*y)/(y*y),L=1+M/16384*(4096+M*(M*(320-175*M)-768)),N=M/1024*(256+M*(M*(74-47*M)-128)),D=N*p*(h+N/4*(a*(2*h*h-1)-N/6*h*(4*p*p-3)*(4*h*h-3))),R=y*L*(l-D);return Math.round(R/n)*n}},"me/f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t){return t>1?1:t<-1?-1:t}},mpC8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("NBE3"))&&r.__esModule?r:{default:r};e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default,r="function"==typeof n?n(t,e):(0,i.default)(t,e);if(isNaN(r))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(r/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}},ncV3:function(t,e,n){"use strict";var r=n("YI60"),i=n("2+Hy"),o=n("jLWS");function s(t){if(!t||!t.accessToken)throw new Error("Cannot create a client without an access token");r(t.accessToken),this.accessToken=t.accessToken,this.origin=t.origin||o.API_ORIGIN}s.prototype.createRequest=function(t){return new i(this,t)},t.exports=s},oAJy:function(t,e,n){t.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return i(e[s][1][t]||t)},u,u.exports,t,e,n,r)}return n[s].exports}for(var o=!1,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){(function(t){"use strict";var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(c),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var t,e;r=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}r=!1}e.exports=function(t){1!==u.push(t)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r(function(){var r;try{r=e(n)}catch(i){return o.reject(t,i)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)})}function p(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var s=f(function(){e(i,r)});"error"===s.status&&r(s.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}e.exports=u,u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(i);return this.state!==l?h(n,this.state===a?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(p,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)d(t,r);else{t.state=a,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},u.reject=function(t){var e=new this(i);return o.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,u=new this(i);++l<n;)c(t[l],l);return u;function c(t,i){e.resolve(t).then(function(t){s[i]=t,++a!==n||r||(r=!0,o.resolve(u,s))},function(t){r||(r=!0,o.reject(u,t))})}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r=-1,s=new this(i);++r<e;)this.resolve(t[r]).then(function(t){n||(n=!0,o.resolve(s,t))},function(t){n||(n=!0,o.reject(s,t))});return s}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var s=Promise;function a(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function l(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function u(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h=void 0,p={},d=Object.prototype.toString;function f(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function _(t){var e=p[t.name],n={};n.promise=new s(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady=e.dbReady?e.dbReady.then(function(){return n.promise}):n.promise}function m(t){var e=p[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function g(t,e){var n=p[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function y(t,e){return new s(function(n,r){if(p[t.name]=p[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);_(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var s=i.open.apply(i,o);e&&(s.onupgradeneeded=function(e){var n=s.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),s.onerror=function(t){t.preventDefault(),r(s.error)},s.onsuccess=function(){n(s.result),m(t)}})}function v(t){return y(t,!1)}function b(t){return y(t,!0)}function x(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version>t.db.version;if(t.version<t.db.version&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function w(t){return o([f(atob(t.data))],{type:t.type})}function E(t){return t&&t.__local_forage_encoded_blob}function S(t){var e=this,n=e._initReady().then(function(){var t=p[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return l(n,t,t),n}function C(t,e,n,r){void 0===r&&(r=1);try{var i=t.db.transaction(t.storeName,e);n(null,i)}catch(o){if(r>0&&(!t.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return s.resolve().then(function(){if(!t.db||"NotFoundError"===o.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),b(t)}).then(function(){return function(t){_(t);for(var e=p[t.name],n=e.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,v(t).then(function(e){return t.db=e,x(t)?b(t):e}).then(function(r){t.db=e.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r}).catch(function(e){throw g(t,e),e})}(t).then(function(){C(t,e,n,r-1)})}).catch(n);n(o)}}var I={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var i=p[n.name];i||(p[n.name]=i={forages:[],db:null,dbReady:null,deferredOperations:[]}),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=S);var o=[];function a(){return s.resolve()}for(var l=0;l<i.forages.length;l++){var u=i.forages[l];u!==e&&o.push(u._initReady().catch(a))}var c=i.forages.slice(0);return s.all(o).then(function(){return n.db=i.db,v(n)}).then(function(t){return n.db=t,x(n,e._defaultConfig.version)?b(n):t}).then(function(t){n.db=i.db=t,e._dbInfo=n;for(var r=0;r<c.length;r++){var o=c[r];o!==e&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}})},_support:function(){try{if(!i||!i.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}}(),iterate:function(t,e){var n=this,r=new s(function(e,r){n.ready().then(function(){C(n._dbInfo,"readonly",function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;E(r)&&(r=w(r));var i=t(r,n.key,a++);void 0!==i?e(i):n.continue()}else e()},s.onerror=function(){r(s.error)}}catch(l){r(l)}})}).catch(r)});return a(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=new s(function(e,r){n.ready().then(function(){C(n._dbInfo,"readonly",function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),E(t)&&(t=w(t)),e(t)},s.onerror=function(){r(s.error)}}catch(a){r(a)}})}).catch(r)});return a(r,e),r},setItem:function(t,e,n){var r=this;t=u(t);var i=new s(function(n,i){var a;r.ready().then(function(){return a=r._dbInfo,"[object Blob]"===d.call(e)?function(t){return"boolean"==typeof h?s.resolve(h):function(t){return new s(function(e){var n=t.transaction("local-forage-detect-blob-support","readwrite"),r=o([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}}).catch(function(){return!1})}(t).then(function(t){return h=t})}(a.db).then(function(t){return t?e:(n=e,new s(function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)}));var n}):e}).then(function(e){C(r._dbInfo,"readwrite",function(o,s){if(o)return i(o);try{var a=s.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var l=a.put(e,t);s.oncomplete=function(){void 0===e&&(e=null),n(e)},s.onabort=s.onerror=function(){i(l.error?l.error:l.transaction.error)}}catch(u){i(u)}})}).catch(i)});return a(i,n),i},removeItem:function(t,e){var n=this;t=u(t);var r=new s(function(e,r){n.ready().then(function(){C(n._dbInfo,"readwrite",function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){r(s.error)},o.onabort=function(){r(s.error?s.error:s.transaction.error)}}catch(a){r(a)}})}).catch(r)});return a(r,e),r},clear:function(t){var e=this,n=new s(function(t,n){e.ready().then(function(){C(e._dbInfo,"readwrite",function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){n(o.error?o.error:o.transaction.error)}}catch(s){n(s)}})}).catch(n)});return a(n,t),n},length:function(t){var e=this,n=new s(function(t,n){e.ready().then(function(){C(e._dbInfo,"readonly",function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}}catch(s){n(s)}})}).catch(n)});return a(n,t),n},key:function(t,e){var n=this,r=new s(function(e,r){t<0?e(null):n.ready().then(function(){C(n._dbInfo,"readonly",function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,l=s.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===t||a?e(n.key):(a=!0,n.advance(t)):e(null)},l.onerror=function(){r(l.error)}}catch(u){r(u)}})}).catch(r)});return a(r,e),r},keys:function(t){var e=this,n=new s(function(t,n){e.ready().then(function(){C(e._dbInfo,"readonly",function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var e=o.result;e?(s.push(e.key),e.continue()):t(s)},o.onerror=function(){n(o.error)}}catch(a){n(a)}})}).catch(n)});return a(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;if(t.name){var l=t.name===n.name&&o._dbInfo.db?s.resolve(o._dbInfo.db):v(t).then(function(e){var n=p[t.name],r=n.forages;n.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e});r=l.then(t.storeName?function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;_(t);var r=p[t.name],o=r.forages;e.close();for(var a=0;a<o.length;a++){var l=o[a];l._dbInfo.db=null,l._dbInfo.version=n}return new s(function(e,r){var o=i.open(t.name,n);o.onerror=function(t){o.result.close(),r(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}}).then(function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,m(n._dbInfo)}}).catch(function(e){throw(g(t,e)||s.resolve()).catch(function(){}),e})}}:function(e){_(t);var n=p[t.name],r=n.forages;e.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new s(function(e,n){var r=i.deleteDatabase(t.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}}).then(function(t){n.db=t;for(var e=0;e<r.length;e++)m(r[e]._dbInfo)}).catch(function(e){throw(g(t,e)||s.resolve()).catch(function(){}),e})})}else r=s.reject("Invalid arguments");return a(r,e),r}},k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:".length,A=P+"arbf".length,O=Object.prototype.toString;function M(t){var e,n,r,i,o,s=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var u=new ArrayBuffer(s),c=new Uint8Array(u);for(e=0;e<a;e+=4)n=k.indexOf(t[e]),r=k.indexOf(t[e+1]),i=k.indexOf(t[e+2]),o=k.indexOf(t[e+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return u}function L(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=k[n[e]>>2],r+=k[(3&n[e])<<4|n[e+1]>>4],r+=k[(15&n[e+1])<<2|n[e+2]>>6],r+=k[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var N={serialize:function(t,e){var n="";if(t&&(n=O.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===O.call(t.buffer))){var r,i="__lfsc__:";t instanceof ArrayBuffer?(r=t,i+="arbf"):(r=t.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":e(new Error("Failed to get type for BinaryArray"))),e(i+L(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+t.type+"~"+L(this.result);e("__lfsc__:blob"+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(s){console.error("Couldn't convert value into a JSON string: ",t),e(null,s)}},deserialize:function(t){if("__lfsc__:"!==t.substring(0,P))return JSON.parse(t);var e,n=t.substring(A),r=t.substring(P,A);if("blob"===r&&T.test(n)){var i=n.match(T);e=i[1],n=n.substring(i[0].length)}var s=M(n);switch(r){case"arbf":return s;case"blob":return o([s],{type:e});case"si08":return new Int8Array(s);case"ui08":return new Uint8Array(s);case"uic8":return new Uint8ClampedArray(s);case"si16":return new Int16Array(s);case"ur16":return new Uint16Array(s);case"si32":return new Int32Array(s);case"ui32":return new Uint32Array(s);case"fl32":return new Float32Array(s);case"fl64":return new Float64Array(s);default:throw new Error("Unkown type: "+r)}},stringToBuffer:M,bufferToString:L};function D(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function R(t,e,n,r,i,o){t.executeSql(n,r,i,function(t,s){s.code===s.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(t,a){a.rows.length?o(t,s):D(t,e,function(){t.executeSql(n,r,i,o)},o)},o):o(t,s)},o)}function z(t,e,n,r){var i=this;t=u(t);var o=new s(function(o,s){i.ready().then(function(){void 0===e&&(e=null);var a=e,l=i._dbInfo;l.serializer.serialize(e,function(e,u){u?s(u):l.db.transaction(function(n){R(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],function(){o(a)},function(t,e){s(e)})},function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void o(z.apply(i,[t,a,n,r-1]));s(e)}})})}).catch(s)});return a(o,n),o}function F(t){return new s(function(e,n){t.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:t,storeNames:i})},function(t,e){n(e)})},function(t){n(t)})})}var B={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var i=new s(function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction(function(i){D(i,n,function(){e._dbInfo=n,t()},function(t,e){r(e)})},r)});return n.serializer=N,i},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,r=new s(function(e,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){R(n,i,"SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){var l=o.item(a),u=l.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=t(u,l.key,a+1)))return void e(u)}e()},function(t,e){r(e)})})}).catch(r)});return a(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=new s(function(e,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){R(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)},function(t,e){r(e)})})}).catch(r)});return a(r,e),r},setItem:function(t,e,n){return z.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=u(t);var r=new s(function(e,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){R(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],function(){e()},function(t,e){r(e)})})}).catch(r)});return a(r,e),r},clear:function(t){var e=this,n=new s(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){R(e,r,"DELETE FROM "+r.storeName,[],function(){t()},function(t,e){n(e)})})}).catch(n)});return a(n,t),n},length:function(t){var e=this,n=new s(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){R(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(e,n){var r=n.rows.item(0).c;t(r)},function(t,e){n(e)})})}).catch(n)});return a(n,t),n},key:function(t,e){var n=this,r=new s(function(e,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){R(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)},function(t,e){r(e)})})}).catch(r)});return a(r,e),r},keys:function(t){var e=this,n=new s(function(t,n){e.ready().then(function(){var r=e._dbInfo;r.db.transaction(function(e){R(e,r,"SELECT key FROM "+r.storeName,[],function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)},function(t,e){n(e)})})}).catch(n)});return a(n,t),n},dropInstance:function(t,e){e=c.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;return a(r=t.name?new s(function(e){var r;r=t.name===n.name?i._dbInfo.db:openDatabase(t.name,"","",0),e(t.storeName?{db:r,storeNames:[t.storeName]}:F(r))}).then(function(t){return new s(function(e,n){t.db.transaction(function(r){function i(t){return new s(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(t,e){n(e)})})}for(var o=[],a=0,l=t.storeNames.length;a<l;a++)o.push(i(t.storeNames[a]));s.all(o).then(function(){e()}).catch(function(t){n(t)})},function(t){n(t)})})}):s.reject("Invalid arguments"),e),r}};function j(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}var V={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=j(t,this._defaultConfig),!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(t){return!0}}()||localStorage.length>0?(this._dbInfo=e,e.serializer=N,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then(function(){for(var e=n._dbInfo,r=e.keyPrefix,i=r.length,o=localStorage.length,s=1,a=0;a<o;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(i),s++)))return u}}});return a(r,e),r},getItem:function(t,e){var n=this;t=u(t);var r=n.ready().then(function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r});return a(r,e),r},setItem:function(t,e,n){var r=this;t=u(t);var i=r.ready().then(function(){void 0===e&&(e=null);var n=e;return new s(function(i,o){var s=r._dbInfo;s.serializer.serialize(e,function(e,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+t,e),i(n)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||o(a),o(a)}})})});return a(i,n),i},removeItem:function(t,e){var n=this;t=u(t);var r=n.ready().then(function(){localStorage.removeItem(n._dbInfo.keyPrefix+t)});return a(r,e),r},clear:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}});return a(n,t),n},length:function(t){var e=this.keys().then(function(t){return t.length});return a(e,t),e},key:function(t,e){var n=this,r=n.ready().then(function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(i){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e});return a(r,e),r},keys:function(t){var e=this,n=e.ready().then(function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&r.push(o.substring(t.keyPrefix.length))}return r});return a(n,t),n},dropInstance:function(t,e){if(e=c.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return a(r=t.name?new s(function(e){e(t.storeName?j(t,i._defaultConfig):t.name+"/")}).then(function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):s.reject("Invalid arguments"),e),r}},U=function(t,e){for(var n=t.length,r=0;r<n;){if((i=t[r])===(o=e)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;r++}var i,o;return!1},$=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},q={},G={},H={INDEXEDDB:I,WEBSQL:B,LOCALSTORAGE:V},Z=[H.INDEXEDDB._driver,H.WEBSQL._driver,H.LOCALSTORAGE._driver],W=["dropInstance"],X=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(W),Y={description:"",driver:Z.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function K(t,e){t[e]=function(){var n=arguments;return t.ready().then(function(){return t[e].apply(t,n)})}}function J(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(arguments[0][n]=$(e[n])?e[n].slice():e[n])}return arguments[0]}var Q=new(function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),H)if(H.hasOwnProperty(n)){var r=H[n],i=r._driver;this[n]=i,q[i]||this.defineDriver(r)}this._defaultConfig=J({},Y),this._config=J({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new s(function(e,n){try{var r=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(i);for(var o=X.concat("_initStorage"),l=0,u=o.length;l<u;l++){var c=o[l];if((!U(W,c)||t[c])&&"function"!=typeof t[c])return void n(i)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=s.reject(e);return a(n,arguments[arguments.length-1]),n}},n=0,r=W.length;n<r;n++){var i=W[n];t[i]||(t[i]=e(i))}}();var h=function(n){q[r]&&console.info("Redefining LocalForage driver: "+r),q[r]=t,G[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,n):h(!!t._support):h(!0)}catch(p){n(p)}});return l(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=q[t]?s.resolve(q[t]):s.reject(new Error("Driver not found."));return l(r,e,n),r},t.prototype.getSerializer=function(t){var e=s.resolve(N);return l(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return l(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;$(t)||(t=[t]);var i=this._getSupportedDrivers(t);function o(){r._config.driver=r.driver()}function a(t){return r._extend(t),o(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch(function(){return s.resolve()}):s.resolve();return this._driverSet=u.then(function(){var t=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then(function(t){r._driver=t._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var i=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}o();var l=new Error("No available storage method found.");return r._driverSet=s.reject(l),r._driverSet}()}}(i)})}).catch(function(){o();var t=new Error("No available storage method found.");return r._driverSet=s.reject(t),r._driverSet}),l(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!G[t]},t.prototype._extend=function(t){J(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=X.length;t<e;t++)K(this,X[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=Q},{3:3}]},{},[4])(4)},oGbY:function(t,e,n){"use strict";var r=n("cRm7"),i=n("73jG"),o=n("jLWS"),s=n("cryX"),a={};function l(t){var e=t.total,n=t.loaded;return{total:e,transferred:n,percent:100*n/e}}function u(t,e){return new Promise(function(n,r){e.onprogress=function(e){t.emitter.emit(o.EVENT_PROGRESS_DOWNLOAD,l(e))};var s=t.file;s&&(e.upload.onprogress=function(e){t.emitter.emit(o.EVENT_PROGRESS_UPLOAD,l(e))}),e.onerror=function(t){r(t)},e.onabort=function(){var e=new i({request:t,type:o.ERROR_REQUEST_ABORTED});r(e)},e.onload=function(){if(delete a[t.id],e.status<200||e.status>=400){var o=new i({request:t,body:e.response,statusCode:e.status});r(o)}else n(e)};var u=t.body;"string"==typeof u?e.send(u):u?e.send(JSON.stringify(u)):s?e.send(s):e.send(),a[t.id]=e}).then(function(e){return function(t,e){return new r(t,{body:e.response,headers:s(e.getAllResponseHeaders()),statusCode:e.status})}(t,e)})}function c(t,e){var n=t.url(e),r=new window.XMLHttpRequest;return r.open(t.method,n),Object.keys(t.headers).forEach(function(e){r.setRequestHeader(e,t.headers[e])}),r}t.exports={browserAbort:function(t){var e=a[t.id];e&&(e.abort(),delete a[t.id])},sendRequestXhr:u,browserSend:function(t){return Promise.resolve().then(function(){var e=c(t,t.client.accessToken);return u(t,e)})},createRequestXhr:c}},"pit/":function(t,e,n){"use strict";var r=n("NkL+"),i=n("U6jy"),o={};function s(t){var e=Array.isArray(t);return function(n){var r=a(o.plainArray,n);if(r)return r;if(e&&n.length!==t.length)return"an array with "+t.length+" items";for(var i=0;i<n.length;i++)if(r=a(e?t[i]:t,n[i]))return[i].concat(r)}}function a(t,e){if(null!=e||t.hasOwnProperty("__required")){var n=t(e);return n?Array.isArray(n)?n:[n]:void 0}}function l(t,e){var n=t.length,r=t[n-1],o=t.slice(0,n-1);return 0===o.length&&(o=["value"]),e=i(e,{path:o}),"function"==typeof r?r(e):c(e,function(t){return"must be "+(/^an? /.test(e=t)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e)+".";var e}(r))}function u(t){return t.length<2?t[0]:2===t.length?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t.slice(-1)}function c(t,e){return(h(t.path)?"Item at position ":"")+t.path.join(".")+" "+e}function h(t){return"number"==typeof t[t.length-1]||"number"==typeof t[0]}o.assert=function(t,e){return e=e||{},function(n){var r=a(t,n);if(r){var i=l(r,e);throw e.apiName&&(i=e.apiName+": "+i),new Error(i)}}},o.shape=function(t){var e,n=(e=t,Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}}));return function(t){var e,r=a(o.plainObject,t);if(r)return r;for(var i=[],s=0;s<n.length;s++)(r=a(n[s].value,t[e=n[s].key]))&&i.push([e].concat(r));return i.length<2?i[0]:function(t){i=i.map(function(e){return"- "+e[0]+": "+l(e,t).split("\n").join("\n  ")});var e=t.path.join(".");return"The following properties"+("value"===e?"":" of "+e)+" have invalid values:\n  "+i.join("\n  ")}}},o.strictShape=function(t){var e=o.shape(t);return function(n){var r=e(n);if(r)return r;var i=Object.keys(n).reduce(function(e,n){return void 0===t[n]&&e.push(n),e},[]);return 0!==i.length?function(){return"The following keys are invalid: "+i.join(", ")}:void 0}},o.arrayOf=function(t){return s(t)},o.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return s(t)},o.required=function(t){function e(e){return null==e?function(t){return c(t,h(t.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return e.__required=!0,e},o.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(e){var n=t.map(function(t){return a(t,e)}).filter(Boolean);if(n.length===t.length)return n.every(function(t){return 1===t.length&&"string"==typeof t[0]})?u(n.map(function(t){return t[0]})):n.reduce(function(t,e){return e.length>t.length?e:t})}},o.equal=function(t){return function(e){if(e!==t)return JSON.stringify(t)}},o.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),e=t.map(function(t){return o.equal(t)});return o.oneOfType.apply(this,e)},o.range=function(t){var e=t[0],n=t[1];return function(t){if(a(o.number,t)||t<e||t>n)return"number between "+e+" & "+n+" (inclusive)"}},o.any=function(){},o.boolean=function(t){if("boolean"!=typeof t)return"boolean"},o.number=function(t){if("number"!=typeof t)return"number"},o.plainArray=function(t){if(!Array.isArray(t))return"array"},o.plainObject=function(t){if(!r(t))return"object"},o.string=function(t){if("string"!=typeof t)return"string"},o.func=function(t){if("function"!=typeof t)return"function"},o.validate=a,o.processMessage=l,t.exports=o},piyq:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=this._events[i?i+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var n=0,r=e.length,o=new Array(r);n<r;n++)o[n]=e[n].fn;return o},u.prototype.listenerCount=function(t){var e=this._events[i?i+t:t];return e?e.fn?1:e.length:0},u.prototype.emit=function(t,e,n,r,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var l,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,o),!0;case 6:return c.fn.call(c.context,e,n,r,o,s),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var p,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,r);break;default:if(!l)for(p=1,l=new Array(h-1);p<h;p++)l[p-1]=arguments[p];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return l(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||l(this,o);else{for(var a=0,u=[],c=s.length;a<c;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:l(this,o)}return this},u.prototype.removeAllListeners=function(t){var e;return t?this._events[e=i?i+t:t]&&l(this,e):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},rT3r:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("jH9d");e.default=function(t){var e=new RegExp(r.sexagesimalPattern).exec(t);if(null==e)throw new Error("Given value is not in sexagesimal format");var n=Number(e[2])/60||0,i=Number(e[4])/3600||0,o=parseFloat(e[1])+n+i;return["S","W"].includes(e[7])?-o:o}},sCiF:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("Zdlu")),i=a(n("dkTa")),o=a(n("rT3r")),s=n("jH9d");function a(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e){return(0,r.default)(e)?!(parseFloat(e)>s.MAXLAT||e<s.MINLAT):!!(0,i.default)(e)&&t((0,o.default)(e))}},t3RW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("jDUc")),i=a(n("2o5z")),o=a(n("QTq/")),s=n("jH9d");function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e=0;if(t.length>2){for(var n,a,l,u=0;u<t.length;u++){u===t.length-2?(n=t.length-2,a=t.length-1,l=0):u===t.length-1?(n=t.length-1,a=0,l=1):(n=u,a=u+1,l=u+2);var c=(0,o.default)(t[n]),h=(0,i.default)(t[a]),p=(0,o.default)(t[l]);e+=((0,r.default)(p)-(0,r.default)(c))*Math.sin((0,r.default)(h))}e=e*s.earthRadius*s.earthRadius/2}return Math.abs(e)}},tQ2B:function(t,e,n){"use strict";var r=n("xTJ+"),i=n("Rn+g"),o=n("eqyj"),s=n("MLWZ"),a=n("g7np"),l=n("w0Vi"),u=n("OTTw"),c=n("LYNF");t.exports=function(t){return new Promise(function(e,n){var h=t.data,p=t.headers;r.isFormData(h)&&delete p["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";p.Authorization="Basic "+btoa(f+":"+_)}var m=a(t.baseURL,t.url);if(d.open(t.method.toUpperCase(),s(m,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?l(d.getAllResponseHeaders()):null;i(e,n,{data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:t,request:d}),d=null}},d.onabort=function(){d&&(n(c("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){n(c("Network Error",t,null,d)),d=null},d.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(c(e,t,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var g=(t.withCredentials||u(m))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;g&&(p[t.xsrfHeaderName]=g)}if("setRequestHeader"in d&&r.forEach(p,function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete p[e]:d.setRequestHeader(e,t)}),r.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),t.responseType)try{d.responseType=t.responseType}catch(y){if("json"!==t.responseType)throw y}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){d&&(d.abort(),n(t),d=null)}),h||(h=null),d.send(h)})}},uUT0:function(t,e){const n=t=>void 0===t,r=t=>Array.isArray(t),i=t=>t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.slice,o=(t,e,s,a)=>((e=e||{}).indices=!n(e.indices)&&e.indices,e.nullsAsUndefineds=!n(e.nullsAsUndefineds)&&e.nullsAsUndefineds,e.booleansAsIntegers=!n(e.booleansAsIntegers)&&e.booleansAsIntegers,e.allowEmptyArrays=!n(e.allowEmptyArrays)&&e.allowEmptyArrays,s=s||new FormData,n(t)||(null===t?e.nullsAsUndefineds||s.append(a,""):"boolean"==typeof t?s.append(a,e.booleansAsIntegers?t?1:0:t):r(t)?t.length?t.forEach((t,n)=>{o(t,e,s,a+"["+(e.indices?n:"")+"]")}):e.allowEmptyArrays&&s.append(a+"[]",""):t instanceof Date?s.append(a,t.toISOString()):!(t=>t===Object(t))(t)||(t=>i(t)&&"string"==typeof t.name&&("object"==typeof t.lastModifiedDate||"number"==typeof t.lastModified))(t)||i(t)?s.append(a,t):Object.keys(t).forEach(n=>{const i=t[n];if(r(i))for(;n.length>2&&n.lastIndexOf("[]")===n.length-2;)n=n.substring(0,n.length-2);o(i,e,s,a?a+"["+n+"]":n)})),s);t.exports={serialize:o}},vDqi:function(t,e,n){t.exports=n("zuR4")},vONA:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(n("eRSq")),i=s(n("sCiF")),o=s(n("mSAH"));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e=(0,r.default)(t),n=e.latitude,s=e.longitude;if(Array.isArray(t)&&t.length>=2)return(0,o.default)(t[0])&&(0,i.default)(t[1]);if(void 0===n||void 0===s)return!1;var a=t[s],l=t[n];return void 0!==l&&void 0!==a&&!1!==(0,i.default)(l)&&!1!==(0,o.default)(a)}},w0Vi:function(t,e,n){"use strict";var r=n("xTJ+"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},wI44:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=l(n("2o5z")),i=l(n("QTq/")),o=l(n("jDUc")),s=l(n("me/f")),a=n("jH9d");function l(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n=void 0===n||isNaN(n)?1:n;var l=(0,r.default)(t),u=(0,i.default)(t),c=(0,r.default)(e),h=(0,i.default)(e),p=Math.acos((0,s.default)(Math.sin((0,o.default)(c))*Math.sin((0,o.default)(l))+Math.cos((0,o.default)(c))*Math.cos((0,o.default)(l))*Math.cos((0,o.default)(u)-(0,o.default)(h))))*a.earthRadius;return Math.round(p/n)*n}},xAGQ:function(t,e,n){"use strict";var r=n("xTJ+");t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},"xTJ+":function(t,e,n){"use strict";var r=n("HSsa"),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function l(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isPlainObject:l,isUndefined:s,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function n(n,r){e[r]=l(e[r])&&l(n)?t(e[r],n):l(n)?t({},n):o(n)?n.slice():n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},yK9s:function(t,e,n){"use strict";var r=n("xTJ+");t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},yLV6:function(t,e,n){var r;!function(i,o,s,a){"use strict";var l,u=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),h=Math.round,p=Math.abs,d=Date.now;function f(t,e,n){return setTimeout(x(t,n),e)}function _(t,e,n){return!!Array.isArray(t)&&(m(t,n[e],n),!0)}function m(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function g(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var y=g(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&void 0===t[r[i]])&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),v=g(function(t,e){return y(t,e,!0)},"merge","Use `assign`.");function b(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function E(t,e){return void 0===t?e:t}function S(t,e,n){m(T(e),function(e){t.addEventListener(e,n,!1)})}function C(t,e,n){m(T(e),function(e){t.removeEventListener(e,n,!1)})}function I(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function k(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function P(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function A(t){return Array.prototype.slice.call(t,0)}function O(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];P(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function M(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<u.length;){if((r=(n=u[o])?n+i:e)in t)return r;o++}}var L=1;function N(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var D="ontouchstart"in i,R=void 0!==M(i,"PointerEvent"),z=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F=["x","y"],B=["clientX","clientY"];function j(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function V(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,s=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=U(e)),i>1&&!n.firstMultiple?n.firstMultiple=U(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,l=e.center=$(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Z(a,l),e.distance=H(a,l),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=G(e.deltaX,e.deltaY);var u,c,h=q(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=p(h.x)>p(h.y)?h.x:h.y,e.scale=s?(u=s.pointers,H((c=r)[0],c[1],B)/H(u[0],u[1],B)):1,e.rotation=s?function(t,e){return Z(e[1],e[0],B)+Z(t[1],t[0],B)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(a>25||void 0===s.velocity)){var l=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,c=q(a,l,u);r=c.x,i=c.y,n=p(c.x)>p(c.y)?c.x:c.y,o=G(l,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var f=t.element;I(e.srcEvent.target,f)&&(f=e.srcEvent.target),e.target=f}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function U(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:e,center:$(e),deltaX:t.deltaX,deltaY:t.deltaY}}function $(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function q(t,e,n){return{x:e/t||0,y:n/t||0}}function G(t,e){return t===e?1:p(t)>=p(e)?t<0?2:4:e<0?8:16}function H(t,e,n){n||(n=F);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function Z(t,e,n){return n||(n=F),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}j.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(N(this.element),this.evWin,this.domHandler)}};var W={mousedown:1,mousemove:2,mouseup:4};function X(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,j.apply(this,arguments)}b(X,j,{handler:function(t){var e=W[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Y={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},K={2:"touch",3:"pen",4:"mouse",5:"kinect"},J="pointerdown",Q="pointermove pointerup pointercancel";function tt(){this.evEl=J,this.evWin=Q,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(J="MSPointerDown",Q="MSPointerMove MSPointerUp MSPointerCancel"),b(tt,j,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Y[r],o=K[t.pointerType]||t.pointerType,s="touch"==o,a=P(e,t.pointerId,"pointerId");1&i&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&i&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function nt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,j.apply(this,arguments)}function rt(t,e){var n=A(t.touches),r=A(t.changedTouches);return 12&e&&(n=O(n.concat(r),"identifier",!0)),[n,r]}b(nt,j,{handler:function(t){var e=et[t.type];if(1===e&&(this.started=!0),this.started){var n=rt.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var it={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ot(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},j.apply(this,arguments)}function st(t,e){var n=A(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=A(t.changedTouches),a=[],l=this.target;if(o=n.filter(function(t){return I(t.target,l)}),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[O(o.concat(a),"identifier",!0),a]:void 0}function at(){j.apply(this,arguments);var t=x(this.handler,this);this.touch=new ot(this.manager,t),this.mouse=new X(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function lt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ut.call(this,e)):12&t&&ut.call(this,e)}function ut(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},2500)}}function ct(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}b(ot,j,{handler:function(t){var e=it[t.type],n=st.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}),b(at,j,{handler:function(t,e,n){var r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)lt.call(this,e,n);else if(r&&ct.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ht=M(c.style,"touchAction"),pt=void 0!==ht,dt=function(){if(!pt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();function ft(t,e){this.manager=t,this.set(e)}function _t(t){this.options=l({},this.defaults,t||{}),this.id=L++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function mt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function gt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function yt(t,e){var n=e.manager;return n?n.get(t):t}function vt(){_t.apply(this,arguments)}function bt(){vt.apply(this,arguments),this.pX=null,this.pY=null}function xt(){vt.apply(this,arguments)}function wt(){_t.apply(this,arguments),this._timer=null,this._input=null}function Et(){vt.apply(this,arguments)}function St(){vt.apply(this,arguments)}function Ct(){_t.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function It(t,e){return(e=e||{}).recognizers=E(e.recognizers,It.defaults.preset),new kt(t,e)}function kt(t,e){this.options=l({},It.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(R?tt:z?ot:D?at:X))(this,V),this.touchAction=new ft(this,this.options.touchAction),Tt(this,!0),m(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Tt(t,e){var n,r=t.element;r.style&&(m(t.options.cssProps,function(i,o){n=M(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}ft.prototype={set:function(t){"compute"==t&&(t=this.compute()),pt&&this.manager.element.style&&dt[t]&&(this.manager.element.style[ht]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(k(t,"none"))return"none";var e=k(t,"pan-x"),n=k(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":k(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=k(r,"none")&&!dt.none,o=k(r,"pan-y")&&!dt["pan-y"],s=k(r,"pan-x")&&!dt["pan-x"];if(i&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!s||!o)return i||o&&6&n||s&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},_t.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(_(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=yt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return _(t,"dropRecognizeWith",this)||(t=yt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(_(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=yt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(_(t,"dropRequireFailure",this))return this;t=yt(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+mt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+mt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},b(vt,_t,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:32}}),b(bt,vt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return vt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=gt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),b(xt,vt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),b(wt,_t,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=f(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),b(Et,vt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),b(St,vt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return bt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=gt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),b(Ct,_t,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||H(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=f(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=f(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),It.VERSION="2.0.7",It.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Et,{enable:!1}],[xt,{enable:!1},["rotate"]],[St,{direction:6}],[bt,{direction:6},["swipe"]],[Ct],[Ct,{event:"doubletap",taps:2},["tap"]],[wt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},kt.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof _t)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(_(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(_(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=P(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var n=this.handlers;return m(T(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(void 0!==t){var n=this.handlers;return m(T(t),function(t){e?n[t]&&n[t].splice(P(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Tt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(It,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:kt,Input:j,TouchAction:ft,TouchInput:ot,MouseInput:X,PointerEventInput:tt,TouchMouseInput:at,SingleTouchInput:nt,Recognizer:_t,AttrRecognizer:vt,Tap:Ct,Pan:bt,Swipe:St,Pinch:xt,Rotate:Et,Press:wt,on:S,off:C,each:m,merge:v,extend:y,assign:l,inherit:b,bindFn:x,prefixed:M}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=It,void 0===(r=(function(){return It}).call(e,n,e,t))||(t.exports=r)}(window,document)},"z+Es":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t){return/^NNE|NE|NNW|N$/.test(t)?"N":/^ENE|E|ESE|SE$/.test(t)?"E":/^SSE|S|SSW|SW$/.test(t)?"S":/^WSW|W|WNW|NW$/.test(t)?"W":void 0}},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const c=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){e=a instanceof c?p(a.errors):[a]}}if(l(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(u(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof c?e=e.concat(p(a.errors)):e.push(a)}}}if(e)throw new c(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function p(t){return t.reduce((t,e)=>t.concat(e instanceof c?e.errors:e),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new _(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new _(this,t,e,n)}}[d](){return this}static create(t,e,n){const r=new f(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class _ extends f{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function g(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof f)return t;if(t[d])return t[d]()}return t||e||n?new f(t,e,n):new f(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=v(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?g:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=v(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function v(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class x extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class w extends f{constructor(t){super(t),this.destination=t}}let E=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new w(this)}lift(t){const e=new S(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new x(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new S(t,e),t})();class S extends E{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function C(t){return t&&"function"==typeof t.schedule}function I(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new k(t,e))}}class k{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new T(t,this.project,this.thisArg))}}class T extends f{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const P=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const O=A(),M=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function L(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const N=t=>{if(t&&"function"==typeof t[m])return r=t,t=>{const e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(M(t))return P(t);if(L(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[O])return e=t,t=>{const n=e[O]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function D(t,e){return new y(n=>{const r=new h;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function R(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[m]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(L(t))return function(t,e){return new y(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(M(t))return D(t,e);if(function(t){return t&&"function"==typeof t[O]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[O](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(N(t))}class z extends f{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class F extends f{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function B(t,e){if(e.closed)return;if(t instanceof y)return t.subscribe(e);let n;try{n=N(t)(e)}catch(r){e.error(r)}return n}function j(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(j((n,r)=>R(t(n,r)).pipe(I((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new V(t,n)))}class V{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new U(t,this.project,this.concurrent))}}class U extends F{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new z(this),n=this.destination;n.add(e);const r=B(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function $(t=Number.POSITIVE_INFINITY){return j(g,t)}function q(t,e){return e?D(t,e):new y(P(t))}function G(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return C(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:$(e)(q(t,n))}function H(){return function(t){return t.lift(new Z(t))}}class Z{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new W(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class W extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class X extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new K(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return H()(this)}}const Y=(()=>{const t=X.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class K extends w{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function J(){return new E}function Q(t){for(let e in t)if(t[e]===Q)return e;throw Error("Could not find renamed property on target object.")}function tt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function et(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(et).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function nt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const rt=Q({__forward_ref__:Q});function it(t){return t.__forward_ref__=it,t.toString=function(){return et(this())},t}function ot(t){return st(t)?t():t}function st(t){return"function"==typeof t&&t.hasOwnProperty(rt)&&t.__forward_ref__===it}class at extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function lt(t){return"string"==typeof t?t:null==t?"":String(t)}function ut(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():lt(t)}function ct(t,e){const n=e?` in ${e}`:"";throw new at("201",`No provider for ${ut(t)} found${n}`)}function ht(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pt(t){return{providers:t.providers||[],imports:t.imports||[]}}function dt(t){return ft(t,mt)||ft(t,yt)}function ft(t,e){return t.hasOwnProperty(e)?t[e]:null}function _t(t){return t&&(t.hasOwnProperty(gt)||t.hasOwnProperty(vt))?t[gt]:null}const mt=Q({"\u0275prov":Q}),gt=Q({"\u0275inj":Q}),yt=Q({ngInjectableDef:Q}),vt=Q({ngInjectorDef:Q});var bt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let xt;function wt(t){const e=xt;return xt=t,e}function Et(t,e,n){const r=dt(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&bt.Optional?null:void 0!==e?e:void ct(et(t),"Injector")}function St(t){return{toString:t}.toString()}var Ct=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),It=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const kt="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,Pt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,At="undefined"!=typeof global&&global,Ot=kt||At||Tt||Pt,Mt={},Lt=[],Nt=[],Dt=Q({"\u0275cmp":Q}),Rt=Q({"\u0275dir":Q}),zt=Q({"\u0275pipe":Q}),Ft=Q({"\u0275mod":Q}),Bt=Q({"\u0275loc":Q}),jt=Q({"\u0275fac":Q}),Vt=Q({__NG_ELEMENT_ID__:Q});let Ut=0;function $t(t){return St(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ct.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||It.Emulated,id:"c",styles:t.styles||Nt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Ut++,n.inputs=Wt(t.inputs,e),n.outputs=Wt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(qt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Gt):null,n})}function qt(t){return Kt(t)||function(t){return t[Rt]||null}(t)}function Gt(t){return function(t){return t[zt]||null}(t)}const Ht={};function Zt(t){const e={type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&St(()=>{Ht[t.id]=t.type}),e}function Wt(t,e){if(null==t)return Mt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Xt=$t;function Yt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Kt(t){return t[Dt]||null}function Jt(t,e){const n=t[Ft]||null;if(!n&&!0===e)throw new Error(`Type ${et(t)} does not have '\u0275mod' property.`);return n}function Qt(t){return Array.isArray(t)&&"object"==typeof t[1]}function te(t){return Array.isArray(t)&&!0===t[1]}function ee(t){return 0!=(8&t.flags)}function ne(t){return 2==(2&t.flags)}function re(t){return 1==(1&t.flags)}function ie(t){return null!==t.template}function oe(t,e){return t.hasOwnProperty(jt)?t[jt]:null}class se{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ae(){return le}function le(t){return t.type.prototype.ngOnChanges&&(t.setInput=ce),ue}function ue(){const t=he(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Mt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function ce(t,e,n,r){const i=he(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Mt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new se(l&&l.currentValue,e,s===Mt),t[r]=e}function he(t){return t.__ngSimpleChanges__||null}let pe;function de(){return void 0!==pe?pe:"undefined"!=typeof document?document:void 0}function fe(t){return!!t.listen}ae.ngInherit=!0;const _e={createRenderer:(t,e)=>de()};function me(t){for(;Array.isArray(t);)t=t[0];return t}function ge(t,e){return me(e[t])}function ye(t,e){return me(e[t.index])}function ve(t,e){return t.data[e]}function be(t,e){return t[e]}function xe(t,e){const n=e[t];return Qt(n)?n:n[0]}function we(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ee(t){return 4==(4&t[2])}function Se(t){return 128==(128&t[2])}function Ce(t,e){return null==e?null:t[e]}function Ie(t){t[18]=0}function ke(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Te={lFrame:Qe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Pe(){return Te.bindingsEnabled}function Ae(){return Te.lFrame.lView}function Oe(){return Te.lFrame.tView}function Me(t){Te.lFrame.contextLView=t}function Le(){let t=Ne();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ne(){return Te.lFrame.currentTNode}function De(t,e){const n=Te.lFrame;n.currentTNode=t,n.isParent=e}function Re(){return Te.lFrame.isParent}function ze(){Te.lFrame.isParent=!1}function Fe(){return Te.isInCheckNoChangesMode}function Be(t){Te.isInCheckNoChangesMode=t}function je(){const t=Te.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ve(){return Te.lFrame.bindingIndex}function Ue(){return Te.lFrame.bindingIndex++}function $e(t){const e=Te.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function qe(t,e){const n=Te.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ge(e)}function Ge(t){Te.lFrame.currentDirectiveIndex=t}function He(t){const e=Te.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function Ze(){return Te.lFrame.currentQueryIndex}function We(t){Te.lFrame.currentQueryIndex=t}function Xe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Ye(t,e,n){if(n&bt.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&bt.Host||(r=Xe(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Te.lFrame=Je();return r.currentTNode=e,r.lView=t,!0}function Ke(t){const e=Je(),n=t[1];Te.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Je(){const t=Te.lFrame,e=null===t?null:t.child;return null===e?Qe(t):e}function Qe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function tn(){const t=Te.lFrame;return Te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const en=tn;function nn(){const t=tn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function rn(){return Te.lFrame.selectedIndex}function on(t){Te.lFrame.selectedIndex=t}function sn(){const t=Te.lFrame;return ve(t.tView,t.selectedIndex)}function an(){Te.lFrame.currentNamespace="http://www.w3.org/2000/svg"}function ln(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function un(t,e,n){pn(t,e,3,n)}function cn(t,e,n,r){(3&t[2])===n&&pn(t,e,n,r)}function hn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function pn(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(dn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function dn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}class fn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function _n(t,e,n){const r=fe(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];gn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function mn(t){return 3===t||4===t||6===t}function gn(t){return 64===t.charCodeAt(0)}function yn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||vn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function vn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function bn(t){return-1!==t}function xn(t){return 32767&t}function wn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let En=!0;function Sn(t){const e=En;return En=t,e}let Cn=0;function In(t,e){const n=Tn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,kn(r.data,t),kn(e,null),kn(r.blueprint,null));const i=Pn(t,e),o=t.injectorIndex;if(bn(i)){const t=xn(i),n=wn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function kn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Tn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Pn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function An(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Vt)&&(r=n[Vt]),null==r&&(r=n[Vt]=Cn++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function On(t,e,n){if(n&bt.Optional)return t;ct(e,"NodeInjector")}function Mn(t,e,n,r){if(n&bt.Optional&&void 0===r&&(r=null),0==(n&(bt.Self|bt.Host))){const i=t[9],o=wt(void 0);try{return i?i.get(e,r,n&bt.Optional):Et(e,r,n&bt.Optional)}finally{wt(o)}}return On(r,e,n)}function Ln(t,e,n,r=bt.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Vt)?t[Vt]:void 0;return"number"==typeof e?e>=0?255&e:Dn:e}(n);if("function"==typeof o){if(!Ye(e,t,r))return r&bt.Host?On(i,n,r):Mn(e,n,r,i);try{const t=o();if(null!=t||r&bt.Optional)return t;ct(n)}finally{en()}}else if("number"==typeof o){let i=null,s=Tn(t,e),a=-1,l=r&bt.Host?e[16][6]:null;for((-1===s||r&bt.SkipSelf)&&(a=-1===s?Pn(t,e):e[s+8],-1!==a&&jn(r,!1)?(i=e[1],s=xn(a),e=wn(a,e)):s=-1);-1!==s;){const t=e[1];if(Bn(o,s,t.data)){const t=Rn(s,e,n,i,r,l);if(t!==Nn)return t}a=e[s+8],-1!==a&&jn(r,e[1].data[s+8]===l)&&Bn(o,s,e)?(i=t,s=xn(a),e=wn(a,e)):s=-1}}}return Mn(e,n,r,i)}const Nn={};function Dn(){return new Vn(Le(),Ae())}function Rn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],l=zn(a,s,n,null==r?ne(a)&&En:r!=s&&0!=(3&a.type),i&bt.Host&&o===a);return null!==l?Fn(e,s,l,a):Nn}function zn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,u=o>>20,c=i?a+u:t.directiveEnd;for(let h=r?a:a+u;h<c;h++){const t=s[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(i){const t=s[l];if(t&&ie(t)&&t.type===n)return l}return null}function Fn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof fn){const s=i;s.resolving&&function(t,e){throw new at("200",`Circular dependency in DI detected for ${t}`)}(ut(o[n]));const a=Sn(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?wt(s.injectImpl):null;Ye(t,r,bt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=le(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==l&&wt(l),Sn(a),s.resolving=!1,en()}}return i}function Bn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function jn(t,e){return!(t&bt.Self||t&bt.Host&&e)}class Vn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ln(this._tNode,this._lView,t,void 0,e)}}function Un(t){return St(()=>{const e=t.prototype.constructor,n=e[jt]||$n(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[jt]||$n(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function $n(t){return st(t)?()=>{const e=$n(ot(t));return e&&e()}:oe(t)}function qn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(mn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Le(),t)}function Gn(t,e,n){return St(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Hn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ht({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zn=new Hn("AnalyzeForEntryComponents"),Wn=Function;function Xn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Xn(r,e)):e!==t&&e.push(r)}return e}function Yn(t,e){t.forEach(t=>Array.isArray(t)?Yn(t,e):e(t))}function Kn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Jn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Qn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function tr(t,e,n){let r=nr(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function er(t,e){const n=nr(t,e);if(n>=0)return t[1|n]}function nr(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const rr={},ir=/\n/gm,or=Q({provide:String,useValue:Q});let sr;function ar(t){const e=sr;return sr=t,e}function lr(t,e=bt.Default){if(void 0===sr)throw new Error("inject() must be called from an injection context");return null===sr?Et(t,void 0,e):sr.get(t,e&bt.Optional?null:void 0,e)}function ur(t,e=bt.Default){return(xt||lr)(ot(t),e)}const cr=ur;function hr(t){const e=[];for(let n=0;n<t.length;n++){const r=ot(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=bt.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(ur(t,n))}else e.push(ur(r))}return e}function pr(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const dr=pr(Gn("Inject",t=>({token:t})),-1),fr=pr(Gn("Optional"),8),_r=pr(Gn("SkipSelf"),4);let mr,gr;function yr(t){var e;return(null===(e=function(){if(void 0===mr&&(mr=null,Ot.trustedTypes))try{mr=Ot.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return mr}())||void 0===e?void 0:e.createHTML(t))||t}function vr(t){var e;return(null===(e=function(){if(void 0===gr&&(gr=null,Ot.trustedTypes))try{gr=Ot.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return gr}())||void 0===e?void 0:e.createHTML(t))||t}class br{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xr extends br{getTypeName(){return"HTML"}}class wr extends br{getTypeName(){return"Style"}}class Er extends br{getTypeName(){return"Script"}}class Sr extends br{getTypeName(){return"URL"}}class Cr extends br{getTypeName(){return"ResourceURL"}}function Ir(t){return t instanceof br?t.changingThisBreaksApplicationSecurity:t}function kr(t,e){const n=Tr(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Tr(t){return t instanceof br&&t.getTypeName()||null}class Pr{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(yr(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Ar{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=yr(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=yr(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Or=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Mr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Lr(t){return(t=String(t)).match(Or)||t.match(Mr)?t:"unsafe:"+t}function Nr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Dr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Rr=Nr("area,br,col,hr,img,wbr"),zr=Nr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Fr=Nr("rp,rt"),Br=Dr(Fr,zr),jr=Dr(Rr,Dr(zr,Nr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dr(Fr,Nr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Br),Vr=Nr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ur=Nr("srcset"),$r=Dr(Vr,Ur,Nr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Nr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),qr=Nr("script,style,template");class Gr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!jr.hasOwnProperty(e))return this.sanitizedSomething=!0,!qr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!$r.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Vr[o]&&(s=Lr(s)),Ur[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Lr(t.trim())).join(", ")),this.buf.push(" ",e,'="',Wr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();jr.hasOwnProperty(e)&&!Rr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Wr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Hr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zr=/([^\#-~ |!])/g;function Wr(t){return t.replace(/&/g,"&amp;").replace(Hr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Zr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xr;function Yr(t,e){let n=null;try{Xr=Xr||function(t){const e=new Ar(t);return function(){try{return!!(new window.DOMParser).parseFromString(yr(""),"text/html")}catch(t){return!1}}()?new Pr(e):e}(t);let r=e?String(e):"";n=Xr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Xr.getInertBodyElement(r)}while(r!==o);return yr((new Gr).sanitizeChildren(Kr(n)||n))}finally{if(n){const t=Kr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Kr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Jr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Qr(t){const e=ei();return e?vr(e.sanitize(Jr.HTML,t)||""):kr(t,"HTML")?vr(Ir(t)):Yr(de(),lt(t))}function ti(t){const e=ei();return e?e.sanitize(Jr.URL,t)||"":kr(t,"URL")?Ir(t):Lr(lt(t))}function ei(){const t=Ae();return t&&t[12]}function ni(t){return t.ngDebugContext}function ri(t){return t.ngOriginalError}function ii(t,...e){t.error(...e)}class oi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||ii}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?ni(t)?ni(t):this._findContext(ri(t)):null}_findOriginalError(t){let e=ri(t);for(;e&&ri(e);)e=ri(e);return e}}function si(t,e){t.__ngContext__=e}const ai=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ot))();function li(t){return t instanceof Function?t():t}var ui=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function ci(t,e){return(void 0)(t,e)}function hi(t){const e=t[3];return te(e)?e[3]:e}function pi(t){return fi(t[13])}function di(t){return fi(t[4])}function fi(t){for(;null!==t&&!te(t);)t=t[4];return t}function _i(t,e,n,r,i){if(null!=r){let o,s=!1;te(r)?o=r:Qt(r)&&(s=!0,r=r[0]);const a=me(r);0===t&&null!==n?null==i?Ei(e,n,a):wi(e,n,a,i||null,!0):1===t&&null!==n?wi(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Ci(t,e);r&&function(t,e,n,r){fe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==me(n)&&_i(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];Li(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function mi(t,e,n){return fe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function gi(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ke(i,-1)),n.splice(r,1)}function yi(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&gi(o,r),e>0&&(t[n-1][4]=r[4]);const s=Jn(t,10+e);Li(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function vi(t,e){if(!(256&e[2])){const n=e[11];fe(n)&&n.destroyNode&&Li(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return bi(t[1],t);for(;e;){let n=null;if(Qt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Qt(e)&&bi(e[1],e),e=e[3];null===e&&(e=t),Qt(e)&&bi(e[1],e),n=e&&e[4]}e=n}}(e)}}function bi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof fn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):me(e[t]),a=r[i=n[o+2]],l=n[o+3];"boolean"==typeof l?s.removeEventListener(n[o],a,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&fe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&te(e[3])){n!==e[3]&&gi(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xi(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===It.None||e===It.Emulated)return null}return ye(r,n)}(t,e.parent,n)}function wi(t,e,n,r,i){fe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ei(t,e,n){fe(t)?t.appendChild(e,n):e.appendChild(n)}function Si(t,e,n,r,i){null!==r?wi(t,e,n,r,i):Ei(t,e,n)}function Ci(t,e){return fe(t)?t.parentNode(e):e.parentNode}function Ii(t,e,n){return ki(t,e,n)}let ki=function(t,e,n){return 40&t.type?ye(t,n):null};function Ti(t,e,n,r){const i=xi(t,r,e),o=e[11],s=Ii(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Si(o,i,n[a],s,!1);else Si(o,i,n,s,!1)}function Pi(t,e){if(null!==e){const n=e.type;if(3&n)return ye(e,t);if(4&n)return Oi(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Pi(t,n);{const n=t[e.index];return te(n)?Oi(-1,n):me(n)}}if(32&n)return ci(e,t)()||me(t[e.index]);{const n=Ai(t,e);return null!==n?Array.isArray(n)?n[0]:Pi(hi(t[16]),n):Pi(t,e.next)}}return null}function Ai(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Oi(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Pi(t,r)}return e[7]}function Mi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&si(me(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Mi(t,e,n.child,r,i,o,!1),_i(e,t,i,a,o);else if(32&l){const s=ci(n,r);let l;for(;l=s();)_i(e,t,i,l,o);_i(e,t,i,a,o)}else 16&l?Ni(t,e,r,n,i,o):_i(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Li(t,e,n,r,i,o){Mi(n,r,t.firstChild,e,i,o,!1)}function Ni(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)_i(e,t,i,a[l],o);else Mi(t,e,a,s[3],i,o,!0)}function Di(t,e,n){fe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ri(t,e,n){fe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function zi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function Fi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==zi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Bi(t){return 4===t.type&&"ng-template"!==t.value}function ji(t,e,n){return e===(4!==t.type||n?t.value:"ng-template")}function Vi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(mn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!ji(t,l,n)||""===l&&1===e.length){if(Ui(r))return!1;s=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!Fi(t.attrs,u,n)){if(Ui(r))return!1;s=!0}continue}const c=$i(8&r?"class":l,i,Bi(t),n);if(-1===c){if(Ui(r))return!1;s=!0;continue}if(""!==u){let t;t=c>o?"":i[c+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==zi(e,u,0)||2&r&&u!==t){if(Ui(r))return!1;s=!0}}}}else{if(!s&&!Ui(r)&&!Ui(l))return!1;if(s&&Ui(l))continue;s=!1,r=l|1&r}}return Ui(r)||s}function Ui(t){return 0==(1&t)}function $i(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function qi(t,e,n=!1){for(let r=0;r<e.length;r++)if(Vi(t,e[r],n))return!0;return!1}function Gi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Hi(t,e){return t?":not("+e.trim()+")":e}function Zi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Ui(s)||(e+=Hi(o,i),i=""),r=s,o=o||!Ui(r);n++}return""!==i&&(e+=Hi(o,i)),e}const Wi={};function Xi(t){Yi(Oe(),Ae(),rn()+t,Fe())}function Yi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&un(e,r,n)}else{const r=t.preOrderHooks;null!==r&&cn(e,r,0,n)}on(n)}function Ki(t,e){return t<<17|e<<2}function Ji(t){return t>>17&32767}function Qi(t){return 2|t}function to(t){return(131068&t)>>2}function eo(t,e){return-131069&t|e<<2}function no(t){return 1|t}function ro(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];We(i),n.contentQueries(2,e[o],o)}}}function io(t,e,n,r,i,o,s,a,l,u){const c=e.blueprint.slice();return c[0]=i,c[2]=140|r,Ie(c),c[3]=c[15]=t,c[8]=n,c[10]=s||t&&t[10],c[11]=a||t&&t[11],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=o,c[16]=2==e.type?t[16]:c,c}function oo(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Ne(),s=Re(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Te.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Te.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return De(o,!0),o}function so(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ao(t,e,n){Ke(e);try{const r=t.viewQuery;null!==r&&Fo(1,r,n);const i=t.template;null!==i&&co(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ro(t,e),t.staticViewQueries&&Fo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Lo(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,nn()}}function lo(t,e,n,r){const i=e[2];if(256==(256&i))return;Ke(e);const o=Fe();try{Ie(e),Te.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&co(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&un(e,n,null)}else{const n=t.preOrderHooks;null!==n&&cn(e,n,0,null),hn(e,0)}if(function(t){for(let e=pi(t);null!==e;e=di(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ke(r,1),n[2]|=1024}}}(e),function(t){for(let e=pi(t);null!==e;e=di(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];Se(n)&&lo(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ro(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&un(e,n)}else{const n=t.contentHooks;null!==n&&cn(e,n,1),hn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)on(~r);else{const i=r,o=n[++t],s=n[++t];qe(o,i),s(2,e[i])}}}finally{on(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Oo(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&Fo(2,l,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&un(e,n)}else{const n=t.viewHooks;null!==n&&cn(e,n,2),hn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ke(e[3],-1))}finally{nn()}}function uo(t,e,n,r){const i=e[10],o=!Fe(),s=Ee(e);try{o&&!s&&i.begin&&i.begin(),s&&ao(t,e,r),lo(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function co(t,e,n,r,i){const o=rn(),s=2&r;try{on(-1),s&&e.length>20&&Yi(t,e,20,Fe()),n(r,i)}finally{on(o)}}function ho(t,e,n){if(ee(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function po(t,e,n){Pe()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||In(n,e),si(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ie(r);o&&ko(e,n,r);const l=Fn(e,t,a,n);si(l,e),null!==s&&To(0,a-i,l,r,0,s),o&&(xe(n.index,e)[8]=l)}}(t,e,n,ye(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Te.lFrame.currentDirectiveIndex;try{on(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Ge(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||wo(r,i)}}finally{on(-1),Ge(s)}}(t,e,n))}function fo(t,e,n=ye){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function _o(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=mo(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function mo(t,e,n,r,i,o,s,a,l,u){const c=20+r,h=c+i,p=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Wi);return n}(c,h),d="function"==typeof u?u():u;return p[1]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:d,incompleteFirstPass:!1}}function go(t,e,n,r){const i=jo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Vo(t).push(r,i.length-1))}function yo(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function vo(t,e,n,r,i,o,s,a){const l=ye(e,n);let u,c=e.inputs;var h;!a&&null!=c&&(u=c[r])?(qo(t,n,u,r,i),ne(e)&&function(t,e){const n=xe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,fe(o)?o.setProperty(l,r,i):gn(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function bo(t,e,n,r){let i=!1;if(Pe()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];qi(n,s.selectors,!1)&&(i||(i=[]),An(In(n,e),t,s.type),ie(s)?(Eo(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Co(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,l=so(t,e,o.length,null);for(let i=0;i<o.length;i++){const u=o[i];n.mergedAttrs=yn(n.mergedAttrs,u.hostAttrs),Io(t,n,e,l,u),So(l,u,s),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const c=u.type.prototype;!r&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],n=t.inputs,u=null===i||Bi(e)?null:Po(n,i);o.push(u),s=yo(n,l,s),a=yo(t.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new at("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=yn(n.mergedAttrs,n.attrs),i}function xo(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function wo(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Eo(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function So(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ie(e)&&(n[""]=t)}}function Co(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Io(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=oe(i.type)),s=new fn(o,ie(i),null);t.blueprint[r]=s,n[r]=s,xo(t,e,0,r,so(t,n,i.hostVars,Wi),i)}function ko(t,e,n){const r=ye(e,t),i=_o(n),o=t[10],s=No(t,io(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function To(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Po(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ao(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Oo(t,e){const n=xe(e,t);if(Se(n)){const t=n[1];80&n[2]?lo(t,n,t.template,n[8]):n[5]>0&&Mo(n)}}function Mo(t){for(let n=pi(t);null!==n;n=di(n))for(let t=10;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];lo(t,e,t.template,e[8])}else e[5]>0&&Mo(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=xe(e[n],t);Se(r)&&r[5]>0&&Mo(r)}}function Lo(t,e){const n=xe(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),ao(r,n,n[8])}function No(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Do(t){for(;t;){t[2]|=64;const e=hi(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ro(t,e,n){const r=e[10];r.begin&&r.begin();try{lo(t,e,t.template,n)}catch(i){throw $o(e,i),i}finally{r.end&&r.end()}}function zo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=we(n),i=r[1];uo(i,r,i.template,n)}}(t[8])}function Fo(t,e,n){We(0),e(t,n)}const Bo=(()=>Promise.resolve(null))();function jo(t){return t[7]||(t[7]=[])}function Vo(t){return t.cleanup||(t.cleanup=[])}function Uo(t,e,n){return(null===t||ie(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function $o(t,e){const n=t[9],r=n?n.get(oi,null):null;r&&r.handleError(e)}function qo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],u=t.data[s];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Go(t,e,n){const r=ge(e,t);!function(t,e,n){fe(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Ho(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=nt(i,t):2==o&&(r=nt(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Zo=new Hn("INJECTOR",-1);class Wo{get(t,e=rr){if(e===rr){const e=new Error(`NullInjectorError: No provider for ${et(t)}!`);throw e.name="NullInjectorError",e}return e}}const Xo=new Hn("Set Injector scope."),Yo={},Ko={},Jo=[];let Qo;function ts(){return void 0===Qo&&(Qo=new Wo),Qo}function es(t,e=null,n=null,r){return new ns(t,n,e||ts(),r)}class ns{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Yn(e,n=>this.processProvider(n,t,e)),Yn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Zo,os(void 0,this));const o=this.records.get(Xo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:et(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=rr,n=bt.Default){this.assertNotDestroyed();const r=ar(this);try{if(!(n&bt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Hn)&&dt(t);e=n&&this.injectableDefInScope(n)?os(rs(t),Yo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&bt.Self?ts():this.parent).get(t,e=n&bt.Optional&&e===rr?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(et(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=et(e);if(Array.isArray(e))i=e.map(et).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):et(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ir,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{ar(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(et(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=ot(t)))return!1;let r=_t(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=_t(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Yn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Yn(r,t=>this.processProvider(t,n,r||Jo))}}this.injectorDefTypes.add(o);const a=oe(o)||(()=>new o);this.records.set(o,os(a,Yo));const l=r.providers;if(null!=l&&!s){const e=t;Yn(l,t=>this.processProvider(t,e,l))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=as(t=ot(t))?t:ot(t&&t.provide);const i=function(t,e,n){return ss(t)?os(void 0,t.useValue):os(is(t),Yo)}(t);if(as(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=os(void 0,Yo,!0),e.factory=()=>hr(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Yo&&(e.value=Ko,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function rs(t){const e=dt(t),n=null!==e?e.factory:oe(t);if(null!==n)return n;if(t instanceof Hn)throw new Error(`Token ${et(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Qn(e,"?");throw new Error(`Can't resolve all parameters for ${et(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[mt]||t[yt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function is(t,e,n){let r;if(as(t)){const e=ot(t);return oe(e)||rs(e)}if(ss(t))r=()=>ot(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...hr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>ur(ot(t.useExisting));else{const e=ot(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return oe(e)||rs(e);r=()=>new e(...hr(t.deps))}var i;return r}function os(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ss(t){return null!==t&&"object"==typeof t&&or in t}function as(t){return"function"==typeof t}const ls=function(t,e,n){return function(t,e=null,n=null,r){const i=es(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let us=(()=>{class t{static create(t,e){return Array.isArray(t)?ls(t,e,""):ls(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=rr,t.NULL=new Wo,t.\u0275prov=ht({token:t,providedIn:"any",factory:()=>ur(Zo)}),t.__NG_ELEMENT_ID__=-1,t})();function cs(t,e){ln(we(t)[1],Le())}function hs(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(ie(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ps(t.inputs),e.declaredInputs=ps(t.declaredInputs),e.outputs=ps(t.outputs);const n=i.hostBindings;n&&_s(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&ds(t,o),s&&fs(t,s),tt(t.inputs,i.inputs),tt(t.declaredInputs,i.declaredInputs),tt(t.outputs,i.outputs),ie(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===hs&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yn(i.hostAttrs,n=yn(n,i.hostAttrs))}}(r)}function ps(t){return t===Mt?{}:t===Nt?[]:t}function ds(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function fs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function _s(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let ms=null;function gs(){if(!ms){const t=Ot.Symbol;if(t&&t.iterator)ms=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ms=n)}}}return ms}class ys{constructor(t){this.wrapped=t}static wrap(t){return new ys(t)}static unwrap(t){return ys.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof ys}}function vs(t){return!!bs(t)&&(Array.isArray(t)||!(t instanceof Map)&&gs()in t)}function bs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function xs(t,e,n){return t[e]=n}function ws(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Es(t,e,n,r){const i=ws(t,e,n);return ws(t,e+1,r)||i}function Ss(t,e,n,r){const i=Ae();return ws(i,Ue(),e)&&(Oe(),function(t,e,n,r,i,o){const s=ye(t,e);!function(t,e,n,r,i,o,s){if(null==o)fe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?lt(o):s(o,r||"",i);fe(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(sn(),i,t,e,n,r)),Ss}function Cs(t,e,n,r){return ws(t,Ue(),n)?e+lt(n)+r:Wi}function Is(t,e,n,r,i,o,s,a){const l=Ae(),u=Oe(),c=t+20,h=u.firstCreatePass?function(t,e,n,r,i,o,s,a,l){const u=e.consts,c=oo(e,t,4,s||null,Ce(u,a));bo(e,n,c,Ce(u,l)),ln(e,c);const h=c.tViews=mo(2,c,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,r,i,o,s):u.data[c];De(h,!1);const p=l[11].createComment("");Ti(u,l,p,h),si(p,l),No(l,l[c]=Ao(p,l,p,h)),re(h)&&po(u,l,h),null!=s&&fo(l,h,a)}function ks(t){return be(Te.lFrame.contextLView,20+t)}function Ts(t,e=bt.Default){const n=Ae();return null===n?ur(t,e):Ln(Le(),n,ot(t),e)}function Ps(t,e,n){const r=Ae();return ws(r,Ue(),e)&&vo(Oe(),sn(),r,t,e,r[11],n,!1),Ps}function As(t,e,n,r,i){const o=i?"class":"style";qo(t,n,e.inputs[o],o,r)}function Os(t,e,n,r){const i=Ae(),o=Oe(),s=20+t,a=i[11],l=i[s]=mi(a,e,Te.lFrame.currentNamespace),u=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,l=oo(e,t,2,i,Ce(a,o));return bo(e,n,l,Ce(a,s)),null!==l.attrs&&Ho(l,l.attrs,!1),null!==l.mergedAttrs&&Ho(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,i,0,e,n,r):o.data[s];De(u,!0);const c=u.mergedAttrs;null!==c&&_n(a,l,c);const h=u.classes;null!==h&&Ri(a,l,h);const p=u.styles;null!==p&&Di(a,l,p),64!=(64&u.flags)&&Ti(o,i,l,u),0===Te.lFrame.elementDepthCount&&si(l,i),Te.lFrame.elementDepthCount++,re(u)&&(po(o,i,u),ho(o,u,i)),null!==r&&fo(i,u)}function Ms(){let t=Le();Re()?ze():(t=t.parent,De(t,!1));const e=t;Te.lFrame.elementDepthCount--;const n=Oe();n.firstCreatePass&&(ln(n,t),ee(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&As(n,e,Ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&As(n,e,Ae(),e.stylesWithoutHost,!1)}function Ls(t,e,n,r){Os(t,e,n,r),Ms()}function Ns(t,e,n){const r=Ae(),i=Oe(),o=t+20,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Ce(o,r),a=oo(e,t,8,"ng-container",s);return null!==s&&Ho(a,s,!0),bo(e,n,a,Ce(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];De(s,!0);const a=r[o]=r[11].createComment("");Ti(i,r,a,s),si(a,r),re(s)&&(po(i,r,s),ho(i,s,r)),null!=n&&fo(r,s)}function Ds(){let t=Le();const e=Oe();Re()?ze():(t=t.parent,De(t,!1)),e.firstCreatePass&&(ln(e,t),ee(t)&&e.queries.elementEnd(t))}function Rs(t,e,n){Ns(t,e,n),Ds()}function zs(){return Ae()}function Fs(t){return!!t&&"function"==typeof t.then}const Bs=function(t){return!!t&&"function"==typeof t.subscribe};function js(t,e,n=!1,r){const i=Ae(),o=Oe(),s=Le();return Us(o,i,i[11],s,t,e,n,r),js}function Vs(t,e,n=!1,r){const i=Le(),o=Ae(),s=Oe();return Us(s,o,Uo(He(s.data),i,o),i,t,e,n,r),Vs}function Us(t,e,n,r,i,o,s=!1,a){const l=re(r),u=t.firstCreatePass&&Vo(t),c=jo(e);let h=!0;if(3&r.type){const p=ye(r,e),d=a?a(p):Mt,f=d.target||p,_=c.length,m=a?t=>a(me(t[r.index])).target:r.index;if(fe(n)){let s=null;if(!a&&l&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=qs(r,e,0,o,!1);const t=n.listen(d.name||f,i,o);c.push(o,t),u&&u.push(i,m,_,_+1)}}else o=qs(r,e,0,o,!0),f.addEventListener(i,o,s),c.push(o),u&&u.push(i,m,_,s)}else o=qs(r,e,0,o,!1);const p=r.outputs;let d;if(h&&null!==p&&(d=p[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=c.length;c.push(o,t),u&&u.push(i,r.index,s,-(s+1))}}}function $s(t,e,n,r){try{return!1!==n(r)}catch(i){return $o(t,i),!1}}function qs(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?xe(t.index,e):e;0==(32&e[2])&&Do(s);let a=$s(e,0,r,o),l=n.__ngNextListenerFn__;for(;l;)a=$s(e,0,l,o)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Gs(t=1){return function(t){return(Te.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Te.lFrame.contextLView))[8]}(t)}function Hs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?qi(t,o,!0):Gi(r,o))return i}else n=i}return n}function Zs(t){const e=Ae()[16][6];if(!e.projection){const n=e.projection=Qn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Hs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Ws(t,e=0,n){const r=Ae(),i=Oe(),o=oo(i,20+t,16,null,n||null);null===o.projection&&(o.projection=e),ze(),64!=(64&o.flags)&&function(t,e,n){Ni(e[11],0,e,n,xi(t,n,e),Ii(n.parent||e[6],n,e))}(i,r,o)}function Xs(t,e,n){return Ys(t,"",e,"",n),Xs}function Ys(t,e,n,r,i){const o=Ae(),s=Cs(o,e,n,r);return s!==Wi&&vo(Oe(),sn(),o,t,s,o[11],i,!1),Ys}function Ks(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ji(o):to(o),l=!1;for(;0!==a&&(!1===l||s);){const n=t[a+1];Js(t[a],e)&&(l=!0,t[a+1]=r?no(n):Qi(n)),a=r?Ji(n):to(n)}l&&(t[n+1]=r?Qi(o):no(o))}function Js(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&nr(t,e)>=0}const Qs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ta(t){return t.substring(Qs.key,Qs.keyEnd)}function ea(t){return t.substring(Qs.value,Qs.valueEnd)}function na(t,e){const n=Qs.textEnd;return n===e?-1:(e=Qs.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Qs.key=e,n),oa(t,e,n))}function ra(t,e){const n=Qs.textEnd;let r=Qs.key=oa(t,e,n);return n===r?-1:(r=Qs.keyEnd=function(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=sa(t,r,n),r=Qs.value=oa(t,r,n),r=Qs.valueEnd=function(t,e,n){let r=-1,i=-1,o=-1,s=e,a=s;for(;s<n;){const l=t.charCodeAt(s++);if(59===l)return a;34===l||39===l?a=s=aa(t,l,s,n):e===s-4&&85===o&&82===i&&76===r&&40===l?a=s=aa(t,41,s,n):l>32&&(a=s),o=i,i=r,r=-33&l}return a}(t,r,n),sa(t,r,n))}function ia(t){Qs.key=0,Qs.keyEnd=0,Qs.value=0,Qs.valueEnd=0,Qs.textEnd=t.length}function oa(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function sa(t,e,n,r){return(e=oa(t,e,n))<n&&e++,e}function aa(t,e,n,r){let i=-1,o=n;for(;o<r;){const n=t.charCodeAt(o++);if(n==e&&92!==i)return o;i=92==n&&92===i?0:n}throw new Error}function la(t,e,n){return pa(t,e,n,!1),la}function ua(t,e){return pa(t,e,null,!0),ua}function ca(t,e){for(let n=function(t){return ia(t),ra(t,oa(t,0,Qs.textEnd))}(e);n>=0;n=ra(e,n))ya(t,ta(e),ea(e))}function ha(t,e){for(let n=function(t){return ia(t),na(t,oa(t,0,Qs.textEnd))}(e);n>=0;n=na(e,n))tr(t,ta(e),!0)}function pa(t,e,n,r){const i=Ae(),o=Oe(),s=$e(2);o.firstUpdatePass&&_a(o,t,s,r),e!==Wi&&ws(i,s,e)&&va(o,o.data[rn()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=et(Ir(t)))),t}(e,n),r,s)}function da(t,e,n,r){const i=Oe(),o=$e(2);i.firstUpdatePass&&_a(i,null,o,r);const s=Ae();if(n!==Wi&&ws(s,o,n)){const a=i.data[rn()];if(wa(a,r)&&!fa(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=nt(t,n||"")),As(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Wi&&(i=Lt);let l=0,u=0,c=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==c||null!==h;){const p=l<i.length?i[l+1]:void 0,d=u<o.length?o[u+1]:void 0;let f,_=null;c===h?(l+=2,u+=2,p!==d&&(_=h,f=d)):null===h||null!==c&&c<h?(l+=2,_=c):(u+=2,_=h,f=d),null!==_&&va(t,e,n,r,_,f,s,a),c=l<i.length?i[l]:null,h=u<o.length?o[u]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return Lt;const r=[],i=Ir(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function fa(t,e){return e>=t.expandoStartIndex}function _a(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[rn()],s=fa(t,n);wa(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=He(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ga(n=ma(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ma(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==to(r))return t[Ji(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=ma(null,t,e,n[1],r),n=ga(n,e.attrs,r),function(t,e,n,r){t[Ji(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ga(r,t[o].hostAttrs,n);return ga(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ji(s),l=to(s);t[r]=n;let u,c=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||nr(t,u)>0)&&(c=!0)}else u=n;if(i)if(0!==l){const e=Ji(t[a+1]);t[r+1]=Ki(e,a),0!==e&&(t[e+1]=eo(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Ki(a,0),0!==a&&(t[a+1]=eo(t[a+1],r)),a=r;else t[r+1]=Ki(l,0),0===a?a=r:t[l+1]=eo(t[l+1],r),l=r;c&&(t[r+1]=Qi(t[r+1])),Ks(t,u,r,!0),Ks(t,u,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&nr(o,e)>=0&&(n[r+1]=no(n[r+1]))}(e,u,t,r,o),s=Ki(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function ma(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=ga(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ga(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),tr(t,s,!!n||e[++o]))}return void 0===t?null:t}function ya(t,e,n){tr(t,e,Ir(n))}function va(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,u=l[a+1];xa(1==(1&u)?ba(l,e,n,i,to(u),s):void 0)||(xa(o)||2==(2&u)&&(o=ba(l,null,n,i,a,s)),function(t,e,n,r,i){const o=fe(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:ui.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=ui.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,ge(rn(),n),i,o))}function ba(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),l=o?e[1]:e,u=null===l;let c=n[i+1];c===Wi&&(c=u?Lt:void 0);let h=u?er(c,r):l===r?c:void 0;if(o&&!xa(h)&&(h=er(e,r)),xa(h)&&(a=h,s))return a;const p=t[i+1];i=s?Ji(p):to(p)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=er(t,r))}return a}function xa(t){return void 0!==t}function wa(t,e){return 0!=(t.flags&(e?16:32))}function Ea(t,e=""){const n=Ae(),r=Oe(),i=t+20,o=r.firstCreatePass?oo(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return fe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ti(r,n,s,o),De(o,!1)}function Sa(t){return Ca("",t,""),Sa}function Ca(t,e,n){const r=Ae(),i=Cs(r,t,e,n);return i!==Wi&&Go(r,rn(),i),Ca}function Ia(t,e,n,r,i){const o=Ae(),s=function(t,e,n,r,i,o){const s=Es(t,Ve(),n,i);return $e(2),s?e+lt(n)+r+lt(i)+o:Wi}(o,t,e,n,r,i);return s!==Wi&&Go(o,rn(),s),Ia}function ka(t,e,n){const r=Ae();return ws(r,Ue(),e)&&vo(Oe(),sn(),r,t,e,r[11],n,!0),ka}function Ta(t,e,n){const r=Ae();if(ws(r,Ue(),e)){const i=Oe(),o=sn();vo(i,o,r,t,e,Uo(He(i.data),o,r),n,!0)}return Ta}const Pa=void 0;var Aa=["en",[["a","p"],["AM","PM"],Pa],[["AM","PM"],Pa,Pa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Pa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Pa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Pa,"{1} 'at' {0}",Pa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Oa={};function Ma(t){return t in Oa||(Oa[t]=Ot.ng&&Ot.ng.common&&Ot.ng.common.locales&&Ot.ng.common.locales[t]),Oa[t]}var La=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let Na="en-US";function Da(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Na=t.toLowerCase().replace(/_/g,"-"))}function Ra(t,e,n,r,i){if(t=ot(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ra(t[o],e,n,r,i);else{const o=Oe(),s=Ae();let a=as(t)?t:ot(t.provide),l=is(t);const u=Le(),c=1048575&u.providerIndexes,h=u.directiveStart,p=u.providerIndexes>>20;if(as(t)||!t.multi){const r=new fn(l,i,Ts),d=Ba(a,e,i?c:c+p,h);-1===d?(An(In(u,s),o,a),za(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Ba(a,e,c+p,h),f=Ba(a,e,c,c+p),_=d>=0&&n[d],m=f>=0&&n[f];if(i&&!m||!i&&!_){An(In(u,s),o,a);const c=function(t,e,n,r,i){const o=new fn(t,n,Ts);return o.multi=[],o.index=e,o.componentProviders=0,Fa(o,i,r&&!n),o}(i?Va:ja,n.length,i,r,l);!i&&m&&(n[f].providerFactory=c),za(o,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(c),s.push(c)}else za(o,t,d>-1?d:f,Fa(n[i?f:d],l,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function za(t,e,n,r){const i=as(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Fa(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ba(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ja(t,e,n,r){return Ua(this.multi,[])}function Va(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Fn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ua(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ua(i,o);return o}function Ua(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function $a(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Oe();if(r.firstCreatePass){const i=ie(t);Ra(n,r.data,r.blueprint,i,!0),Ra(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class qa{}class Ga{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${et(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ha=(()=>{class t{}return t.NULL=new Ga,t})();function Za(...t){}function Wa(t,e){return new Ya(ye(t,e))}const Xa=function(){return Wa(Le(),Ae())};let Ya=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Xa,t})();function Ka(t){return t instanceof Ya?t.nativeElement:t}class Ja{}let Qa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>tl(),t})();const tl=function(){const t=Ae(),e=xe(Le().index,t);return function(t){return t[11]}(Qt(e)?e:t)};let el=(()=>{class t{}return t.\u0275prov=ht({token:t,providedIn:"root",factory:()=>null}),t})();class nl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const rl=new nl("11.2.14");class il{constructor(){}supports(t){return vs(t)}create(t){return new sl(t)}}const ol=(t,e)=>e;class sl{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ol}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<cl(n,r,i)?e:n,s=cl(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!vs(t))throw new Error(`Error trying to diff '${et(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[gs()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new al(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ul),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ul),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class al{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ll{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ul{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new ll,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cl(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class hl{constructor(){}supports(t){return t instanceof Map||bs(t)}create(){return new pl}}class pl{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bs(t)))throw new Error(`Error trying to diff '${et(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new dl(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class dl{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fl(){return new _l([new il])}let _l=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||fl()),deps:[[t,new _r,new fr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ht({token:t,providedIn:"root",factory:fl}),t})();function ml(){return new gl([new hl])}let gl=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ml()),deps:[[t,new _r,new fr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ht({token:t,providedIn:"root",factory:ml}),t})();function yl(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(me(o)),te(o))for(let t=10;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&yl(e[1],e,n,r)}const s=n.type;if(8&s)yl(t,e,n.child,r);else if(32&s){const t=ci(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Ai(e,n);if(Array.isArray(t))r.push(...t);else{const n=hi(e[16]);yl(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class vl{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return yl(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(te(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(yi(t,n),Jn(e,n))}this._attachedToViewContainer=!1}vi(this._lView[1],this._lView)}onDestroy(t){go(this._lView[1],this._lView,null,t)}markForCheck(){Do(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ro(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Be(!0);try{Ro(t,e,n)}finally{Be(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Li(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class bl extends vl{constructor(t){super(t),this._view=t}detectChanges(){zo(this._view)}checkNoChanges(){!function(t){Be(!0);try{zo(t)}finally{Be(!1)}}(this._view)}get context(){return null}}const xl=function(t=!1){return function(t,e,n){if(!n&&ne(t)){const n=xe(t.index,e);return new vl(n,n)}return 47&t.type?new vl(e[16],e):null}(Le(),Ae(),t)};let wl=(()=>{class t{}return t.__NG_ELEMENT_ID__=xl,t.__ChangeDetectorRef__=!0,t})();const El=[new hl],Sl=new _l([new il]),Cl=new gl(El),Il=function(){return Al(Le(),Ae())};let kl=(()=>{class t{}return t.__NG_ELEMENT_ID__=Il,t})();const Tl=kl,Pl=class extends Tl{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=io(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),ao(e,n,t),new vl(n)}};function Al(t,e){return 4&t.type?new Pl(e,t,Wa(t,e)):null}class Ol{}class Ml{}const Ll=function(){return Bl(Le(),Ae())};let Nl=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ll,t})();const Dl=Nl,Rl=class extends Dl{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Wa(this._hostTNode,this._hostLView)}get injector(){return new Vn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pn(this._hostTNode,this._hostLView);if(bn(t)){const e=wn(t,this._hostLView),n=xn(t);return new Vn(e[1].data[n+8],e)}return new Vn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=zl(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ol,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(te(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Rl(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],Kn(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Oi(i,o),a=n[11],l=Ci(a,o[7]);return null!==l&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Li(t,r,n,1,i,o)}(r,o[6],a,n,l,s),t.attachToViewContainerRef(),Kn(Fl(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=zl(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=yi(this._lContainer,e);n&&(Jn(Fl(this._lContainer),e),vi(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=yi(this._lContainer,e);return n&&null!=Jn(Fl(this._lContainer),e)?new vl(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function zl(t){return t[8]}function Fl(t){return t[8]||(t[8]=[])}function Bl(t,e){let n;const r=e[t.index];if(te(r))n=r;else{let i;if(8&t.type)i=me(r);else{const n=e[11];i=n.createComment("");const r=ye(t,e);wi(n,Ci(n,r),i,function(t,e){return fe(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ao(r,e,i,t),No(e,n)}return new Rl(n,t,e)}const jl={};class Vl extends Ha{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Kt(t);return new ql(e,this.ngModule)}}function Ul(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const $l=new Hn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ai});class ql extends qa{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Zi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ul(this.componentDef.inputs)}get outputs(){return Ul(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,jl,i);return o!==jl||r===jl?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ja,_e),s=i.get(el,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(fe(t))return t.selectRootElement(e,n===It.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):mi(o.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:ai,clean:Bo,playerHandler:null,flags:0},p=mo(0,null,null,1,0,null,null,null,null,null),d=io(null,p,h,c,null,null,o,a,s,i);let f,_;Ke(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=oo(s,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(Ho(a,l,!0),null!==t&&(_n(i,t,l),null!==a.classes&&Ri(i,t,a.classes),null!==a.styles&&Di(i,t,a.styles)));const u=r.createRenderer(t,e),c=io(n,_o(e),null,e.onPush?64:16,n[20],a,r,u,null,null);return s.firstCreatePass&&(An(In(a,n),s,e.type),Eo(s,a),Co(a,n.length,1)),No(n,c),n[20]=c}(u,this.componentDef,d,o,a);if(u)if(n)_n(a,u,["ng-version",rl.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Ui(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&_n(a,u,t),e&&e.length>0&&Ri(a,u,e.join(" "))}if(_=ve(p,20),void 0!==e){const t=_.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}f=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Le();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Io(t,r,e,so(t,e,1,null),n));const i=Fn(e,t,r.directiveStart,r);si(i,e);const o=ye(r,e);return o&&si(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Le();e.contentQueries(1,s,t.directiveStart)}const a=Le();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(on(a.index),xo(n[1],a,0,a.directiveStart,a.directiveEnd,e),wo(e,s)),s}(t,this.componentDef,d,h,[cs]),ao(p,d,null)}finally{nn()}return new Gl(this.componentType,f,Wa(_,d),d,_)}}class Gl extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new bl(r),this.componentType=t}get injector(){return new Vn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Hl=new Map;class Zl extends Ol{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Vl(this);const n=Jt(t),r=t[Bt]||null;r&&Da(r),this._bootstrapComponents=li(n.bootstrap),this._r3Injector=es(t,e,[{provide:Ol,useValue:this},{provide:Ha,useValue:this.componentFactoryResolver}],et(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=us.THROW_IF_NOT_FOUND,n=bt.Default){return t===us||t===Ol||t===Zo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Wl extends Ml{constructor(t){super(),this.moduleType=t,null!==Jt(t)&&function(t){const e=new Set;!function t(n){const r=Jt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${et(e)} vs ${et(e.name)}`)}(i,Hl.get(i),n),Hl.set(i,n));const o=li(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Zl(this.moduleType,t)}}function Xl(t,e,n){const r=je()+t,i=Ae();return i[r]===Wi?xs(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Yl(t,e,n,r){return tu(Ae(),je(),t,e,n,r)}function Kl(t,e,n,r,i){return eu(Ae(),je(),t,e,n,r,i)}function Jl(t,e,n,r,i,o){return nu(Ae(),je(),t,e,n,r,i,o)}function Ql(t,e){const n=t[e];return n===Wi?void 0:n}function tu(t,e,n,r,i,o){const s=e+n;return ws(t,s,i)?xs(t,s+1,o?r.call(o,i):r(i)):Ql(t,s+1)}function eu(t,e,n,r,i,o,s){const a=e+n;return Es(t,a,i,o)?xs(t,a+2,s?r.call(s,i,o):r(i,o)):Ql(t,a+2)}function nu(t,e,n,r,i,o,s,a){const l=e+n;return function(t,e,n,r,i){const o=Es(t,e,n,r);return ws(t,e+2,i)||o}(t,l,i,o,s)?xs(t,l+3,a?r.call(a,i,o,s):r(i,o,s)):Ql(t,l+3)}function ru(t,e){const n=Oe();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new at("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=oe(r.type)),s=wt(Ts);try{const t=Sn(!1),e=o();return Sn(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ae(),i,e),e}finally{wt(s)}}function iu(t,e,n){const r=t+20,i=Ae(),o=be(i,r);return au(i,su(i,r)?tu(i,je(),e,o.transform,n,o):o.transform(n))}function ou(t,e,n,r){const i=t+20,o=Ae(),s=be(o,i);return au(o,su(o,i)?eu(o,je(),e,s.transform,n,r,s):s.transform(n,r))}function su(t,e){return t[1].data[e].pure}function au(t,e){return ys.isWrapped(e)&&(e=ys.unwrap(e),t[Ve()]=Wi),e}function lu(t){return e=>{setTimeout(t,void 0,e)}}const uu=class extends E{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,i,o;let s=t,a=e||(()=>null),l=n;if(t&&"object"==typeof t){const e=t;s=null===(r=e.next)||void 0===r?void 0:r.bind(e),a=null===(i=e.error)||void 0===i?void 0:i.bind(e),l=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(a=lu(a),s&&(s=lu(s)),l&&(l=lu(l)));const u=super.subscribe({next:s,error:a,complete:l});return t instanceof h&&t.add(u),u}};function cu(){return this._results[gs()]()}class hu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=gs(),n=hu.prototype;n[e]||(n[e]=cu)}get changes(){return this._changes||(this._changes=new uu)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const n=Xn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class pu{constructor(t){this.queryList=t,this.matches=null}clone(){return new pu(this.queryList)}setDirty(){this.queryList.setDirty()}}class du{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new du(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==ku(t,e).matches&&this.queries[e].setDirty()}}class fu{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class _u{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new _u(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class mu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new mu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,gu(e,i)),this.matchTNodeWithReadOption(t,e,zn(e,t,i,!1,!1))}else n===kl?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,zn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ya||r===Nl||r===kl&&4&e.type)this.addMatch(e.index,-2);else{const n=zn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function gu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function yu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Wa(t,e):4&t.type?Al(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ya?Wa(e,t):n===kl?Al(e,t):n===Nl?Bl(e,t):void 0}(t,e,r):Fn(t,t[1],n,e)}function vu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:yu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function bu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=vu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=10;t<s.length;t++){const e=s[t];e[17]===e[3]&&bu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];bu(n[1],n,i,r)}}}}}return r}function xu(t){const e=Ae(),n=Oe(),r=Ze();We(r+1);const i=ku(n,r);if(t.dirty&&Ee(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?bu(n,e,r,[]):vu(n,e,i,r);t.reset(o,Ka),t.notifyOnChanges()}return!0}return!1}function wu(t,e,n){const r=Oe();r.firstCreatePass&&(Iu(r,new fu(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Cu(r,Ae(),e)}function Eu(t,e,n,r){const i=Oe();if(i.firstCreatePass){const o=Le();Iu(i,new fu(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Cu(i,Ae(),n)}function Su(){return t=Ae(),e=Ze(),t[19].queries[e].queryList;var t,e}function Cu(t,e,n){const r=new hu(4==(4&n));go(t,e,r,r.destroy),null===e[19]&&(e[19]=new du),e[19].queries.push(new pu(r))}function Iu(t,e,n){null===t.queries&&(t.queries=new _u),t.queries.track(new mu(e,n))}function ku(t,e){return t.queries.getByIndex(e)}function Tu(t,e){return Al(t,e)}const Pu=new Hn("Application Initializer");let Au=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Za,this.reject=Za,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Fs(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(ur(Pu,8))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const Ou=new Hn("AppId"),Mu={provide:Ou,useFactory:function(){return`${Lu()}${Lu()}${Lu()}`},deps:[]};function Lu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Nu=new Hn("Platform Initializer"),Du=new Hn("Platform ID"),Ru=new Hn("appBootstrapListener");let zu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const Fu=new Hn("LocaleId"),Bu=new Hn("DefaultCurrencyCode");class ju{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Vu=function(t){return new Wl(t)},Uu=Vu,$u=function(t){return Promise.resolve(Vu(t))},qu=function(t){const e=Vu(t),n=li(Jt(t).declarations).reduce((t,e)=>{const n=Kt(e);return n&&t.push(new ql(n)),t},[]);return new ju(e,n)},Gu=qu,Hu=function(t){return Promise.resolve(qu(t))};let Zu=(()=>{class t{constructor(){this.compileModuleSync=Uu,this.compileModuleAsync=$u,this.compileModuleAndAllComponentsSync=Gu,this.compileModuleAndAllComponentsAsync=Hu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const Wu=(()=>Promise.resolve(0))();function Xu(t){"undefined"==typeof Zone?Wu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Yu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new uu(!1),this.onMicrotaskEmpty=new uu(!1),this.onStable=new uu(!1),this.onError=new uu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=!n&&e,this.shouldCoalesceRunChangeDetection=n,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Ot.requestAnimationFrame,e=Ot.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ot,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Qu(t),Ju(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Qu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return tc(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),ec(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return tc(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),ec(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Qu(t),Ju(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Yu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ku,Za,Za);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Ku={};function Ju(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function tc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ec(t){t._nesting--,Ju(t)}class nc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new uu,this.onMicrotaskEmpty=new uu,this.onStable=new uu,this.onError=new uu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let rc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yu.assertNotInAngularZone(),Xu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(ur(Yu))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),ic=(()=>{class t{constructor(){this._applications=new Map,ac.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return ac.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();class oc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let sc,ac=new oc,lc=!0,uc=!1;function cc(){return uc=!0,lc}const hc=new Hn("AllowMultipleToken");class pc{constructor(t,e){this.name=t,this.token=e}}function dc(t,e,n=[]){const r=`Platform: ${e}`,i=new Hn(r);return(e=[])=>{let o=fc();if(!o||o.injector.get(hc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Xo,useValue:"platform"});!function(t){if(sc&&!sc.destroyed&&!sc.injector.get(hc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");sc=t.get(_c);const e=t.get(Nu,null);e&&e.forEach(t=>t())}(us.create({providers:t,name:r}))}return function(t){const e=fc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function fc(){return sc&&!sc.destroyed?sc:null}let _c=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new nc:("zone.js"===t?void 0:t)||new Yu({enableLongStackTrace:cc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Yu,useValue:n}];return n.run(()=>{const e=us.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(oi,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{yc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Fs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Au);return t.runInitializers(),t.donePromise.then(()=>(Da(i.injector.get(Fu,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=mc({},e);return function(t,e,n){const r=new Wl(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(gc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${et(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(ur(us))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();function mc(t,e){return Array.isArray(e)?e.reduce(mc,t):Object.assign(Object.assign({},t),e)}let gc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),s=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Yu.assertNotInAngularZone(),Xu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Yu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=G(o,s.pipe(t=>{return H()((e=J,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Y);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof qa?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ol),i=n.create(us.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(rc,null),a=s&&i.injector.get(ic);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),yc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;yc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ru,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(ur(Yu),ur(us),ur(oi),ur(Ha),ur(Au))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();function yc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class vc{}class bc{}const xc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let wc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||xc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Ec(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ec(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(ur(Zu),ur(bc,8))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();function Ec(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Sc=dc(null,"core",[{provide:Du,useValue:"unknown"},{provide:_c,deps:[us]},{provide:ic,deps:[]},{provide:zu,deps:[]}]),Cc=[{provide:gc,useClass:gc,deps:[Yu,us,oi,Ha,Au]},{provide:$l,deps:[Yu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Au,useClass:Au,deps:[[new fr,Pu]]},{provide:Zu,useClass:Zu,deps:[]},Mu,{provide:_l,useFactory:function(){return Sl},deps:[]},{provide:gl,useFactory:function(){return Cl},deps:[]},{provide:Fu,useFactory:function(t){return Da(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new dr(Fu),new fr,new _r]]},{provide:Bu,useValue:"USD"}];let Ic=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(ur(gc))},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:Cc}),t})(),kc=null;function Tc(){return kc}const Pc=new Hn("DocumentToken");let Ac=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:Oc,token:t,providedIn:"platform"}),t})();function Oc(){return ur(Lc)}const Mc=new Hn("Location Initialized");let Lc=(()=>{class t extends Ac{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Tc().getLocation(),this._history=Tc().getHistory()}getBaseHrefFromDOM(){return Tc().getBaseHref(this._doc)}onPopState(t){Tc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Tc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Nc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Nc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc))},t.\u0275prov=ht({factory:Dc,token:t,providedIn:"platform"}),t})();function Nc(){return!!window.history.pushState}function Dc(){return new Lc(ur(Pc))}function Rc(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function zc(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Fc(t){return t&&"?"!==t[0]?"?"+t:t}let Bc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:jc,token:t,providedIn:"root"}),t})();function jc(t){const e=ur(Pc).location;return new Uc(ur(Ac),e&&e.origin||"")}const Vc=new Hn("appBaseHref");let Uc=(()=>{class t extends Bc{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Rc(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Fc(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Fc(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Fc(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(ur(Ac),ur(Vc,8))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),$c=(()=>{class t extends Bc{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Rc(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Fc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Fc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(ur(Ac),ur(Vc,8))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),qc=(()=>{class t{constructor(t,e){this._subject=new uu,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=zc(Hc(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Fc(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Hc(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fc(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fc(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(ur(Bc),ur(Ac))},t.normalizeQueryParams=Fc,t.joinWithSlash=Rc,t.stripTrailingSlash=zc,t.\u0275prov=ht({factory:Gc,token:t,providedIn:"root"}),t})();function Gc(){return new qc(ur(Bc),ur(Ac))}function Hc(t){return t.replace(/\/index.html$/,"")}var Zc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Wc{}let Xc=(()=>{class t extends Wc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ma(e);if(n)return n;const r=e.split("-")[0];if(n=Ma(r),n)return n;if("en"===r)return Aa;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[La.PluralCase]}(e||this.locale)(t)){case Zc.Zero:return"zero";case Zc.One:return"one";case Zc.Two:return"two";case Zc.Few:return"few";case Zc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(ur(Fu))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();function Yc(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let Kc=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(vs(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${et(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Ts(_l),Ts(gl),Ts(Ya),Ts(Qa))},t.\u0275dir=Xt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class Jc{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Jc(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new th(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new th(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ts(Nl),Ts(kl),Ts(_l))},t.\u0275dir=Xt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class th{constructor(t,e){this.record=t,this.view=e}}let eh=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new nh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ts(Nl),Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class nh{constructor(){this.$implicit=null,this.ngIf=null}}function rh(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${et(e)}'.`)}class ih{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let oh=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),sh=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new ih(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Ts(Nl),Ts(kl),Ts(oh,9))},t.\u0275dir=Xt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),ah=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(Ts(Nl))},t.\u0275dir=Xt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[ae]}),t})(),lh=(()=>{class t{transform(t){return JSON.stringify(t,null,2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Yt({name:"json",type:t,pure:!1}),t})(),uh=(()=>{class t{transform(e,n,r){if(null==e)return null;if(!this.supports(e))throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${et(t)}'`)}(t,e);return e.slice(n,r)}supports(t){return"string"==typeof t||Array.isArray(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Yt({name:"slice",type:t,pure:!1}),t})(),ch=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[{provide:Wc,useClass:Xc}]}),t})(),hh=(()=>{class t{}return t.\u0275prov=ht({token:t,providedIn:"root",factory:()=>new ph(ur(Pc),window)}),t})();class ph{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=dh(this.window.history)||dh(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function dh(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class fh extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new fh,kc||(kc=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=mh||(mh=document.querySelector("base"),mh)?mh.getAttribute("href"):null;return null==e?null:(n=e,_h||(_h=document.createElement("a")),_h.setAttribute("href",n),"/"===_h.pathname.charAt(0)?_h.pathname:"/"+_h.pathname);var n}resetBaseElement(){mh=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Yc(document.cookie,t)}}let _h,mh=null;const gh=new Hn("TRANSITION_ID"),yh=[{provide:Pu,useFactory:function(t,e,n){return()=>{n.get(Au).donePromise.then(()=>{const n=Tc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[gh,Pc,us],multi:!0}];class vh{static init(){var t;t=new vh,ac=t}addToWindow(t){Ot.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ot.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ot.getAllAngularRootElements=()=>t.getAllRootElements(),Ot.frameworkStabilizers||(Ot.frameworkStabilizers=[]),Ot.frameworkStabilizers.push(t=>{const e=Ot.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Tc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const bh=new Hn("EventManagerPlugins");let xh=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(ur(bh),ur(Yu))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();class wh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Tc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Eh=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),Sh=(()=>{class t extends Eh{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Ch),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ch))}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();function Ch(t){Tc().remove(t)}const Ih={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},kh=/%COMP%/g;function Th(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Th(t,i,n):(i=i.replace(kh,t),n.push(i))}return n}function Ph(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ah=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Oh(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case It.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Mh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case It.ShadowDom:return new Lh(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Th(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(ur(xh),ur(Sh),ur(Ou))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();class Oh{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Ih[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Ih[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Ih[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(ui.DashCase|ui.Important)?t.style.setProperty(e,n,r&ui.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ui.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ph(n)):this.eventManager.addEventListener(t,e,Ph(n))}}class Mh extends Oh{constructor(t,e,n,r){super(t),this.component=n;const i=Th(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(kh,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(kh,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Lh extends Oh{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Th(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Nh=(()=>{class t extends wh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const Dh=["alt","control","meta","shift"],Rh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Bh=(()=>{class t extends wh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Tc().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Dh.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&zh.hasOwnProperty(e)&&(e=zh[e]))}return Rh[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Dh.forEach(r=>{r!=n&&(0,Fh[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),jh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return ur(Vh)},token:t,providedIn:"root"}),t})(),Vh=(()=>{class t extends jh{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Jr.NONE:return e;case Jr.HTML:return kr(e,"HTML")?Ir(e):Yr(this._doc,String(e)).toString();case Jr.STYLE:return kr(e,"Style")?Ir(e):e;case Jr.SCRIPT:if(kr(e,"Script"))return Ir(e);throw new Error("unsafe value used in a script context");case Jr.URL:return Tr(e),kr(e,"URL")?Ir(e):Lr(String(e));case Jr.RESOURCE_URL:if(kr(e,"ResourceURL"))return Ir(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new xr(t)}bypassSecurityTrustStyle(t){return new wr(t)}bypassSecurityTrustScript(t){return new Er(t)}bypassSecurityTrustUrl(t){return new Sr(t)}bypassSecurityTrustResourceUrl(t){return new Cr(t)}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc))},t.\u0275prov=ht({factory:function(){return t=ur(Zo),new Vh(t.get(Pc));var t},token:t,providedIn:"root"}),t})();const Uh=dc(Sc,"browser",[{provide:Du,useValue:"browser"},{provide:Nu,useValue:function(){fh.makeCurrent(),vh.init()},multi:!0},{provide:Pc,useFactory:function(){return function(t){pe=t}(document),document},deps:[]}]),$h=[[],{provide:Xo,useValue:"root"},{provide:oi,useFactory:function(){return new oi},deps:[]},{provide:bh,useClass:Nh,multi:!0,deps:[Pc,Yu,Du]},{provide:bh,useClass:Bh,multi:!0,deps:[Pc]},[],{provide:Ah,useClass:Ah,deps:[xh,Sh,Ou]},{provide:Ja,useExisting:Ah},{provide:Eh,useExisting:Sh},{provide:Sh,useClass:Sh,deps:[Pc]},{provide:rc,useClass:rc,deps:[Yu]},{provide:xh,useClass:xh,deps:[bh,Yu]},[]];let qh=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ou,useValue:e.appId},{provide:gh,useExisting:Ou},yh]}}}return t.\u0275fac=function(e){return new(e||t)(ur(t,12))},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:$h,imports:[ch,Ic]}),t})();function Gh(...t){let e=t[t.length-1];return C(e)?(t.pop(),D(t,e)):q(t)}function Hh(t,e){return j(t,e,1)}function Zh(t,e){return function(n){return n.lift(new Wh(t,e))}}"undefined"!=typeof window&&window,n("yLV6");class Wh{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Xh(t,this.predicate,this.thisArg))}}class Xh extends f{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class Yh{}class Kh{}class Jh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Jh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Jh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Jh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Qh{encodeKey(t){return tp(t)}encodeValue(t){return tp(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function tp(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class ep{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Qh,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new ep({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function np(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function rp(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ip(t){return"undefined"!=typeof FormData&&t instanceof FormData}class op{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Jh),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new ep,this.urlWithParams=e}serializeBody(){return null===this.body?null:np(this.body)||rp(this.body)||ip(this.body)||"string"==typeof this.body?this.body:this.body instanceof ep?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ip(this.body)?null:rp(this.body)?this.body.type||null:np(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ep?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new op(e,n,i,{params:l,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var sp=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class ap{constructor(t,e=200,n="OK"){this.headers=t.headers||new Jh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class lp extends ap{constructor(t={}){super(t),this.type=sp.ResponseHeader}clone(t={}){return new lp({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class up extends ap{constructor(t={}){super(t),this.type=sp.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new up({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class cp extends ap{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function hp(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let pp=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof op)r=t;else{let i,o;i=n.headers instanceof Jh?n.headers:new Jh(n.headers),n.params&&(o=n.params instanceof ep?n.params:new ep({fromObject:n.params})),r=new op(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Gh(r).pipe(Hh(t=>this.handler.handle(t)));if(t instanceof op||"events"===n.observe)return i;const o=i.pipe(Zh(t=>t instanceof up));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(I(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(I(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(I(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(I(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new ep).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,hp(n,e))}post(t,e,n={}){return this.request("POST",t,hp(n,e))}put(t,e,n={}){return this.request("PUT",t,hp(n,e))}}return t.\u0275fac=function(e){return new(e||t)(ur(Yh))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();class dp{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const fp=new Hn("HTTP_INTERCEPTORS");let _p=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const mp=/^\)\]\}',?\n/;class gp{}let yp=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),vp=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Jh(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new lp({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),l=null;204!==i&&(l=void 0===n.response?n.responseText:n.response),0===i&&(i=l?200:0);let u=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(mp,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=t,u&&(u=!1,l={error:c,text:l})}}u?(e.next(new up({body:l,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new cp({error:l,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new cp({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let l=!1;const u=r=>{l||(e.next(o()),l=!0);let i={type:sp.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},c=t=>{let n={type:sp.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:sp.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(ur(gp))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const bp=new Hn("XSRF_COOKIE_NAME"),xp=new Hn("XSRF_HEADER_NAME");class wp{}let Ep=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yc(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc),ur(Du),ur(bp))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),Sp=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(ur(wp),ur(xp))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),Cp=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(fp,[]);this.chain=t.reduceRight((t,e)=>new dp(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(ur(Kh),ur(us))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),Ip=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Sp,useClass:_p}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:bp,useValue:e.cookieName}:[],e.headerName?{provide:xp,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[Sp,{provide:fp,useExisting:Sp,multi:!0},{provide:wp,useClass:Ep},{provide:bp,useValue:"XSRF-TOKEN"},{provide:xp,useValue:"X-XSRF-TOKEN"}]}),t})(),kp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[pp,{provide:Yh,useClass:Cp},vp,{provide:Kh,useExisting:vp},yp,{provide:gp,useExisting:yp}],imports:[[Ip.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();class Tp extends E{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}class Pp extends f{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Ap extends f{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Op(t,e,n,r,i=new Ap(t,n,r)){if(!i.closed)return e instanceof y?e.subscribe(i):N(e)(i)}const Mp={};class Lp{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Np(t,this.resultSelector))}}class Np extends Pp{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Mp),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Op(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Mp?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Dp=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Rp(...t){return $(1)(Gh(...t))}const zp=new y(t=>t.complete());function Fp(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):zp}function Bp(t){return new y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?R(n):Fp()).subscribe(e)})}function jp(t,e){return"function"==typeof e?n=>n.pipe(jp((n,r)=>R(t(n,r)).pipe(I((t,i)=>e(n,t,r,i))))):e=>e.lift(new Vp(t))}class Vp{constructor(t){this.project=t}call(t,e){return e.subscribe(new Up(t,this.project))}}class Up extends F{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new z(this),r=this.destination;r.add(n),this.innerSubscription=B(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const $p=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function qp(t){return e=>0===t?Fp():e.lift(new Gp(t))}class Gp{constructor(t){if(this.total=t,this.total<0)throw new $p}call(t,e){return e.subscribe(new Hp(t,this.total))}}class Hp extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Zp(...t){const e=t[t.length-1];return C(e)?(t.pop(),n=>Rp(t,n,e)):e=>Rp(t,e)}function Wp(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Xp(t,e,n))}}class Xp{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Yp(t,this.accumulator,this.seed,this.hasSeed))}}class Yp extends f{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Kp(t){return function(e){const n=new Jp(t),r=e.lift(n);return n.caught=r}}class Jp{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Qp(t,this.selector,this.caught))}}class Qp extends F{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new z(this);this.add(r);const i=B(n,r);i!==r&&this.add(i)}}}function td(t){return function(e){return 0===t?Fp():e.lift(new ed(t))}}class ed{constructor(t){if(this.total=t,this.total<0)throw new $p}call(t,e){return e.subscribe(new nd(t,this.total))}}class nd extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function rd(t=sd){return e=>e.lift(new id(t))}class id{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new od(t,this.errorFactory))}}class od extends f{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function sd(){return new Dp}function ad(t=null){return e=>e.lift(new ld(t))}class ld{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ud(t,this.defaultValue))}}class ud extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function cd(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zh((e,n)=>t(e,n,r)):g,qp(1),n?ad(e):rd(()=>new Dp))}function hd(){}function pd(t,e,n){return function(r){return r.lift(new dd(t,e,n))}}class dd{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new fd(t,this.nextOrObserver,this.error,this.complete))}}class fd extends f{constructor(t,e,n,i){super(t),this._tapNext=hd,this._tapError=hd,this._tapComplete=hd,this._tapError=n||hd,this._tapComplete=i||hd,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||hd,this._tapError=e.error||hd,this._tapComplete=e.complete||hd)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class _d{constructor(t){this.callback=t}call(t,e){return e.subscribe(new md(t,this.callback))}}class md extends f{constructor(t,e){super(t),this.add(new h(e))}}class gd{constructor(t,e){this.id=t,this.url=e}}class yd extends gd{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vd extends gd{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class bd extends gd{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xd extends gd{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wd extends gd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ed extends gd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sd extends gd{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cd extends gd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Id extends gd{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kd{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Td{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Pd{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ad{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Od{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Md{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ld{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Nd{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Dd(t){return new Nd(t)}function Rd(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function zd(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Fd(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Bd(t[i],e[i]))return!1;return!0}function Bd(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function jd(t){return Array.prototype.concat.apply([],t)}function Vd(t){return t.length>0?t[t.length-1]:null}function Ud(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function $d(t){return Bs(t)?t:Fs(t)?R(Promise.resolve(t)):Gh(t)}function qd(t,e,n){return n?function(t,e){return Fd(t,e)}(t.queryParams,e.queryParams)&&Gd(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Bd(t[n],e[n]))}(t.queryParams,e.queryParams)&&Hd(t.root,e.root)}function Gd(t,e){if(!Kd(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Gd(t.children[n],e.children[n]))return!1}return!0}function Hd(t,e){return Zd(t,e,e.segments)}function Zd(t,e,n){if(t.segments.length>n.length)return!!Kd(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Kd(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Hd(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Kd(t.segments,r)&&!!t.children.primary&&Zd(t.children.primary,e,i)}}class Wd{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dd(this.queryParams)),this._queryParamMap}toString(){return tf.serialize(this)}}class Xd{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ud(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ef(this)}}class Yd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Dd(this.parameters)),this._parameterMap}toString(){return uf(this)}}function Kd(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Jd{}class Qd{parse(t){const e=new ff(t);return new Wd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${nf(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${of(e)}=${of(t)}`).join("&"):`${of(e)}=${of(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const tf=new Qd;function ef(t){return t.segments.map(t=>uf(t)).join("/")}function nf(t,e){if(!t.hasChildren())return ef(t);if(e){const e=t.children.primary?nf(t.children.primary,!1):"",n=[];return Ud(t.children,(t,e)=>{"primary"!==e&&n.push(`${e}:${nf(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Ud(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),Ud(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>"primary"===n?[nf(t.children.primary,!1)]:[`${n}:${nf(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${ef(t)}/${e[0]}`:`${ef(t)}/(${e.join("//")})`}}function rf(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function of(t){return rf(t).replace(/%3B/gi,";")}function sf(t){return rf(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function af(t){return decodeURIComponent(t)}function lf(t){return af(t.replace(/\+/g,"%20"))}function uf(t){return`${sf(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${sf(t)}=${sf(e[t])}`).join("")}`;var e}const cf=/^[^\/()?;=#]+/;function hf(t){const e=t.match(cf);return e?e[0]:""}const pf=/^[^=?&#]+/,df=/^[^?&#]+/;class ff{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xd([],{}):new Xd([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Xd(t,e)),n}parseSegment(){const t=hf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Yd(af(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=hf(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=hf(this.remaining);t&&(n=t,this.capture(n))}t[af(e)]=af(n)}parseQueryParam(t){const e=function(t){const e=t.match(pf);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(df);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=lf(e),i=lf(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=hf(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Xd([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class _f{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=mf(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=mf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=gf(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return gf(t,this._root).map(t=>t.value)}}function mf(t,e){if(t===e.value)return e;for(const n of e.children){const e=mf(t,n);if(e)return e}return null}function gf(t,e){if(t===e.value)return[e];for(const n of e.children){const r=gf(t,n);if(r.length)return r.unshift(e),r}return[]}class yf{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function vf(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class bf extends _f{constructor(t,e){super(t),this.snapshot=e,If(this,t)}toString(){return this.snapshot.toString()}}function xf(t,e){const n=function(t,e){const n=new Sf([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Cf("",new yf(n,[]))}(t,e),r=new Tp([new Yd("",{})]),i=new Tp({}),o=new Tp({}),s=new Tp({}),a=new Tp(""),l=new wf(r,i,s,a,o,"primary",e,n.root);return l.snapshot=n.root,new bf(new yf(l,[]),n)}class wf{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(I(t=>Dd(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(I(t=>Dd(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ef(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Sf{constructor(t,e,n,r,i,o,s,a,l,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Cf extends _f{constructor(t,e){super(e),this.url=t,If(this,e)}toString(){return kf(this._root)}}function If(t,e){e.value._routerState=t,e.children.forEach(e=>If(t,e))}function kf(t){const e=t.children.length>0?` { ${t.children.map(kf).join(", ")} } `:"";return`${t.value}${e}`}function Tf(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fd(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Fd(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fd(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Fd(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Pf(t,e){var n,r;return Fd(t.params,e.params)&&Kd(n=t.url,r=e.url)&&n.every((t,e)=>Fd(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Pf(t.parent,e.parent))}function Af(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Af(t,e,r);return Af(t,e)})}(t,e,n);return new yf(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Of(e,t),t}}const n=new wf(new Tp((r=e.value).url),new Tp(r.params),new Tp(r.queryParams),new Tp(r.fragment),new Tp(r.data),r.outlet,r.component,r),i=e.children.map(e=>Af(t,e));return new yf(n,i)}var r}function Of(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Of(t.children[n],e.children[n])}function Mf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Lf(t){return"object"==typeof t&&null!=t&&t.outlets}function Nf(t,e,n,r,i){let o={};return r&&Ud(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Wd(n.root===t?e:Df(n.root,t,e),o,i)}function Df(t,e,n){const r={};return Ud(t.children,(t,i)=>{r[i]=t===e?n:Df(t,e,n)}),new Xd(t.segments,r)}class Rf{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Mf(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Lf);if(r&&r!==Vd(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zf{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Ff(t,e,n){if(t||(t=new Xd([],{})),0===t.segments.length&&t.hasChildren())return Bf(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Lf(s))break;const a=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!$f(a,l,e))return o;r+=2}else{if(!$f(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Xd(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Xd(t.segments.slice(r.pathIndex),t.children),Bf(e,0,i)}return r.match&&0===i.length?new Xd(t.segments,{}):r.match&&!t.hasChildren()?jf(t,e,n):r.match?Bf(t,0,i):jf(t,e,n)}function Bf(t,e,n){if(0===n.length)return new Xd(t.segments,{});{const r=function(t){return Lf(t[0])?t[0].outlets:{primary:t}}(n),i={};return Ud(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Ff(t.children[r],e,n))}),Ud(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Xd(t.segments,i)}}function jf(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Lf(o)){const t=Vf(o.outlets);return new Xd(r,t)}if(0===i&&Mf(n[0])){r.push(new Yd(t.segments[e].path,Uf(n[0]))),i++;continue}const s=Lf(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Mf(a)?(r.push(new Yd(s,Uf(a))),i+=2):(r.push(new Yd(s,{})),i++)}return new Xd(r,{})}function Vf(t){const e={};return Ud(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=jf(new Xd([],{}),0,t))}),e}function Uf(t){const e={};return Ud(t,(t,n)=>e[n]=`${t}`),e}function $f(t,e,n){return t==n.path&&Fd(e,n.parameters)}class qf{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Tf(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=vf(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Ud(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=vf(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=vf(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Md(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ad(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Tf(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Gf(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Gf(t){Tf(t.value),t.children.forEach(Gf)}class Hf{constructor(t,e){this.routes=t,this.module=e}}function Zf(t){return"function"==typeof t}function Wf(t){return t instanceof Wd}const Xf=Symbol("INITIAL_VALUE");function Yf(){return jp(t=>function(...t){let e,n;return C(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),q(t,n).lift(new Lp(e))}(t.map(t=>t.pipe(qp(1),Zp(Xf)))).pipe(Wp((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Xf)return t;if(r===Xf&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Wf(r))return r}return t},t)},Xf),Zh(t=>t!==Xf),I(t=>Wf(t)?t:!0===t),qp(1)))}let Kf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$t({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ls(0,"router-outlet")},directives:function(){return[$_]},encapsulation:2}),t})();function Jf(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Qf(r,t_(e,r))}}function Qf(t,e){t.children&&Jf(t.children,e)}function t_(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function e_(t){const e=t.children&&t.children.map(e_),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Kf),n}function n_(t){return t.outlet||"primary"}function r_(t,e){const n=t.filter(t=>n_(t)===e);return n.push(...t.filter(t=>n_(t)!==e)),n}const i_={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function o_(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},i_):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||zd)(n,t,e);if(!i)return Object.assign({},i_);const o={};Ud(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function s_(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>a_(t,e,n)&&"primary"!==n_(n))}(t,n,r)){const i=new Xd(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==n_(o)){const n=new Xd([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[n_(o)]=n}return i}(t,e,r,new Xd(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>a_(t,e,n))}(t,n,r)){const o=new Xd(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(a_(t,n,a)&&!i[n_(a)]){const n=new Xd([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[n_(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Xd(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function a_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function l_(t,e,n,r){return!!(n_(t)===r||"primary"!==r&&a_(e,n,t))&&("**"===t.path||o_(e,t,n).matched)}function u_(t,e,n){return 0===e.length&&!t.children[n]}class c_{constructor(t){this.segmentGroup=t||null}}class h_{constructor(t){this.urlTree=t}}function p_(t){return new y(e=>e.error(new c_(t)))}function d_(t){return new y(e=>e.error(new h_(t)))}function f_(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class __{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Ol)}apply(){const t=s_(this.urlTree.root,[],[],this.config).segmentGroup,e=new Xd(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,"primary").pipe(I(t=>this.createUrlTree(m_(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Kp(t=>{if(t instanceof h_)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof c_)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(I(e=>this.createUrlTree(m_(e),t.queryParams,t.fragment))).pipe(Kp(t=>{if(t instanceof c_)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Xd([],{primary:t}):t;return new Wd(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(I(t=>new Xd([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return R(r).pipe(Hh(r=>{const i=n.children[r],o=r_(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(I(t=>({segment:t,outlet:r})))}),Wp((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zh((e,n)=>t(e,n,r)):g,td(1),n?ad(e):rd(()=>new Dp))}())}expandSegment(t,e,n,r,i,o){return R(n).pipe(Hh(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Kp(t=>{if(t instanceof c_)return Gh(null);throw t}))),cd(t=>!!t),Kp((t,n)=>{if(t instanceof Dp||"EmptyError"===t.name){if(u_(e,r,i))return Gh(new Xd([],{}));throw new c_(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return l_(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):p_(e):p_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?d_(i):this.lineralizeSegments(n,i).pipe(j(n=>{const i=new Xd(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:u}=o_(e,r,i);if(!s)return p_(e);const c=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?d_(c):this.lineralizeSegments(r,c).pipe(j(r=>this.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Gh(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(I(t=>(n._loadedConfig=t,new Xd(r,{})))):Gh(new Xd(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=o_(e,n,r);if(!o)return p_(e);const l=r.slice(a);return this.getChildConfig(t,n,r).pipe(j(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:u}=s_(e,s,l,o),c=new Xd(a.segments,a.children);if(0===u.length&&c.hasChildren())return this.expandChildren(r,o,c).pipe(I(t=>new Xd(s,t)));if(0===o.length&&0===u.length)return Gh(new Xd(s,{}));const h=n_(n)===i;return this.expandSegment(r,c,o,u,h?"primary":i,!0).pipe(I(t=>new Xd(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Gh(new Hf(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Gh(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(j(n=>n?this.configLoader.load(t.injector,e).pipe(I(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(Rd(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Gh(new Hf([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Gh(r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Zf(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Zf(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return $d(o)})).pipe(Yf(),pd(t=>{if(!Wf(t))return;const e=Rd(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),I(t=>!0===t)):Gh(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Gh(n);if(r.numberOfChildren>1||!r.children.primary)return f_(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Wd(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Ud(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Ud(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Xd(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function m_(t){const e={};for(const n of Object.keys(t.children)){const r=m_(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Xd(t.segments.concat(e.segments),e.children)}return t}(new Xd(t.segments,e))}class g_{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class y_{constructor(t,e){this.component=t,this.route=e}}function v_(t,e,n){const r=t._root;return x_(r,e?e._root:null,n,[r.value])}function b_(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function x_(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=vf(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Kd(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Kd(t.url,e.url)||!Fd(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pf(t,e)||!Fd(t.queryParams,e.queryParams);case"paramsChange":default:return!Pf(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new g_(r)):(o.data=s.data,o._resolvedData=s._resolvedData),x_(t,e,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new y_(a.outlet.component,s))}else s&&w_(e,a,i),i.canActivateChecks.push(new g_(r)),x_(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Ud(o,(t,e)=>w_(t,n.getContext(e),i)),i}function w_(t,e,n){const r=vf(t),i=t.value;Ud(r,(t,r)=>{w_(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new y_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class E_{}function S_(t){return new y(e=>e.error(t))}class C_{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=s_(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary");if(null===e)return null;const n=new Sf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new yf(n,e),i=new Cf(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Ef(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=r_(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=k_(n);return r.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return u_(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!l_(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Vd(n).parameters:{};i=new Sf(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,A_(t),n_(t),t.component,t,T_(e),P_(e)+n.length,O_(t))}else{const r=o_(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Sf(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,A_(t),n_(t),t.component,t,T_(e),P_(e)+o.length,O_(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=s_(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new yf(i,t)]}if(0===a.length&&0===u.length)return[new yf(i,[])];const c=n_(t)===r,h=this.processSegment(a,l,u,c?"primary":r);return null===h?null:[new yf(i,h)]}}function I_(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function k_(t){const e=[],n=new Set;for(const r of t){if(!I_(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=k_(r.children);e.push(new yf(r.value,t))}return e.filter(t=>!n.has(t))}function T_(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function P_(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function A_(t){return t.data||{}}function O_(t){return t.resolve||{}}function M_(t){return jp(e=>{const n=t(e);return n?R(n).pipe(I(()=>e)):Gh(e)})}class L_ extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const N_=new Hn("ROUTES");class D_{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(I(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Hf(jd(r.injector.get(N_,void 0,bt.Self|bt.Optional)).map(e_),r)}),Kp(t=>{throw e._loader$=void 0,t}));return e._loader$=new X(n,()=>new E).pipe(H()),e._loader$}loadModuleFactory(t){return"string"==typeof t?R(this.loader.load(t)):$d(t()).pipe(j(t=>t instanceof Ml?Gh(t):R(this.compiler.compileModuleAsync(t))))}}class R_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new z_,this.attachRef=null}}class z_{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new R_,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class F_{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function B_(t){throw t}function j_(t,e,n){return e.parse("/")}function V_(t,e){return Gh(null)}let U_=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new E,this.errorHandler=B_,this.malformedUriErrorHandler=j_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:V_,afterPreactivation:V_},this.urlHandlingStrategy=new F_,this.routeReuseStrategy=new L_,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(Ol),this.console=i.get(zu);const l=i.get(Yu);this.isNgZoneEnabled=l instanceof Yu&&Yu.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new Wd(new Xd([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new D_(o,s,t=>this.triggerEvent(new kd(t)),t=>this.triggerEvent(new Td(t))),this.routerState=xf(this.currentUrlTree,this.rootComponentType),this.transitions=new Tp({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Zh(t=>0!==t.id),I(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),jp(t=>{let n=!1,r=!1;return Gh(t).pipe(pd(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),jp(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Gh(t).pipe(jp(t=>{const n=this.transitions.getValue();return e.next(new yd(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?zp:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,jp(t=>function(t,e,n,r,i){return new __(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(I(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),pd(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return j(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new C_(t,e,n,r,i,o).recognize();return null===s?S_(new E_):Gh(s)}catch(s){return S_(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(I(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),pd(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new wd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new yd(n,this.serializeUrl(r),i,o);e.next(a);const l=xf(r,this.rootComponentType).snapshot;return Gh(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),zp}),M_(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),pd(t=>{const e=new Ed(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),I(t=>Object.assign(Object.assign({},t),{guards:v_(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return j(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Gh(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return R(t).pipe(j(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Gh(o.map(o=>{const s=b_(o,e,i);let a;if(function(t){return t&&Zf(t.canDeactivate)}(s))a=$d(s.canDeactivate(t,e,n,r));else{if(!Zf(s))throw new Error("Invalid CanDeactivate guard");a=$d(s(t,e,n,r))}return a.pipe(cd())})).pipe(Yf()):Gh(!0)}(t.component,t.route,n,e,r)),cd(t=>!0!==t,!0))}(s,r,i,t).pipe(j(n=>n&&"boolean"==typeof n?function(t,e,n,r){return R(e).pipe(Hh(e=>Rp(function(t,e){return null!==t&&e&&e(new Pd(t)),Gh(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Od(t)),Gh(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Bp(()=>Gh(e.guards.map(i=>{const o=b_(i,e.node,n);let s;if(function(t){return t&&Zf(t.canActivateChild)}(o))s=$d(o.canActivateChild(r,t));else{if(!Zf(o))throw new Error("Invalid CanActivateChild guard");s=$d(o(r,t))}return s.pipe(cd())})).pipe(Yf())));return Gh(i).pipe(Yf())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Gh(r.map(r=>Bp(()=>{const i=b_(r,e,n);let o;if(function(t){return t&&Zf(t.canActivate)}(i))o=$d(i.canActivate(e,t));else{if(!Zf(i))throw new Error("Invalid CanActivate guard");o=$d(i(e,t))}return o.pipe(cd())}))).pipe(Yf()):Gh(!0)}(t,e.route,n))),cd(t=>!0!==t,!0))}(r,o,t,e):Gh(n)),I(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),pd(t=>{if(Wf(t.guardsResult)){const e=Rd(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Sd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Zh(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new bd(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),M_(t=>{if(t.guards.canActivateChecks.length)return Gh(t).pipe(pd(t=>{const e=new Cd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),jp(t=>{let n=!1;return Gh(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,j(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Gh(t);let o=0;return R(n).pipe(Hh(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Gh({});const o={};return R(i).pipe(j(i=>function(t,e,n,r){const i=b_(t,e,r);return $d(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(pd(t=>{o[i]=t}))),td(1),j(()=>Object.keys(o).length===i.length?Gh(o):zp))}(t._resolve,t,e,r).pipe(I(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Ef(t,n).resolve),null)))}(t.route,e,r,i)),pd(()=>o++),td(1),j(e=>o===n.length?Gh(t):zp))})),pd({next:()=>n=!0,complete:()=>{if(!n){const n=new bd(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),pd(t=>{const e=new Id(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),M_(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),I(t=>{const e=function(t,e,n){const r=Af(t,e._root,n?n._root:void 0);return new bf(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),pd(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),I(t=>(new qf(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),pd({next(){n=!0},complete(){n=!0}}),function(t){return e=>e.lift(new _d(t))}(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new bd(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Kp(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Wf(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new bd(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new xd(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return zp}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Jf(t),this.config=t.map(e_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,l=s?this.currentUrlTree.fragment:i;let u=null;switch(o){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,r,i){if(0===n.length)return Nf(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Rf(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Ud(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Rf(n,e,r)}(n);if(o.toRoot())return Nf(e.root,new Xd([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new zf(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new zf(t,t===e.root,0)}const r=Mf(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new zf(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Bf(s.segmentGroup,s.index,o.commands):Ff(s.segmentGroup,s.index,o.commands);return Nf(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,u,l)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Wf(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Wf(t))return qd(this.currentUrlTree,t,e);const n=this.parseUrl(t);return qd(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new vd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let l,u,c;i?(l=i.resolve,u=i.reject,c=i.promise):c=new Promise((t,e)=>{l=t,u=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(ur(Wn),ur(Jd),ur(z_),ur(qc),ur(us),ur(vc),ur(Zu),ur(void 0))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),$_=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new uu,this.deactivateEvents=new uu,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new q_(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Ts(z_),Ts(Nl),Ts(Ha),qn("name"),Ts(wl))},t.\u0275dir=Xt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class q_{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===wf?this.route:t===z_?this.childContexts:this.parent.get(t,e)}}class G_{}class H_{preload(t,e){return Gh(null)}}let Z_=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new D_(e,n,e=>t.triggerEvent(new kd(e)),e=>t.triggerEvent(new Td(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zh(t=>t instanceof vd),Hh(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Ol);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return R(n).pipe($(),I(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Gh(e._loadedConfig):this.loader.load(t.injector,e)).pipe(j(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(ur(U_),ur(vc),ur(Zu),ur(us),ur(G_))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),W_=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof vd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ld&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Ld(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(ur(U_),ur(hh),ur(void 0))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const X_=new Hn("ROUTER_CONFIGURATION"),Y_=new Hn("ROUTER_FORROOT_GUARD"),K_=[qc,{provide:Jd,useClass:Qd},{provide:U_,useFactory:function(t,e,n,r,i,o,s,a={},l,u){const c=new U_(null,t,e,n,r,i,o,jd(s));if(l&&(c.urlHandlingStrategy=l),u&&(c.routeReuseStrategy=u),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,c),a.enableTracing){const t=Tc();c.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return c},deps:[Jd,z_,qc,us,vc,Zu,N_,X_,[class{},new fr],[class{},new fr]]},z_,{provide:wf,useFactory:function(t){return t.routerState.root},deps:[U_]},{provide:vc,useClass:wc},Z_,H_,class{preload(t,e){return e().pipe(Kp(()=>Gh(null)))}},{provide:X_,useValue:{enableTracing:!1}}];function J_(){return new pc("Router",U_)}let Q_=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[K_,rm(e),{provide:Y_,useFactory:nm,deps:[[U_,new fr,new _r]]},{provide:X_,useValue:n||{}},{provide:Bc,useFactory:em,deps:[Ac,[new dr(Vc),new fr],X_]},{provide:W_,useFactory:tm,deps:[U_,hh,X_]},{provide:G_,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:H_},{provide:pc,multi:!0,useFactory:J_},[im,{provide:Pu,multi:!0,useFactory:om,deps:[im]},{provide:am,useFactory:sm,deps:[im]},{provide:Ru,multi:!0,useExisting:am}]]}}static forChild(e){return{ngModule:t,providers:[rm(e)]}}}return t.\u0275fac=function(e){return new(e||t)(ur(Y_,8),ur(U_,8))},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})();function tm(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new W_(t,e,n)}function em(t,e,n={}){return n.useHash?new $c(t,e):new Uc(t,e)}function nm(t){return"guarded"}function rm(t){return[{provide:Zn,multi:!0,useValue:t},{provide:N_,multi:!0,useValue:t}]}let im=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new E}appInitializer(){return this.injector.get(Mc,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(U_),r=this.injector.get(X_);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Gh(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(X_),n=this.injector.get(Z_),r=this.injector.get(W_),i=this.injector.get(U_),o=this.injector.get(gc);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(ur(us))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();function om(t){return t.appInitializer.bind(t)}function sm(t){return t.bootstrapListener.bind(t)}const am=new Hn("Router Initializer"),lm=[{path:"**",redirectTo:"/map",pathMatch:"full"}];let um=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[Q_.forRoot(lm)],Q_]}),t})();function cm(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}l((r=r.apply(t,e||[])).next())})}const hm="ngx-wayfinding-";let pm=(()=>{class t{constructor(){}static loadInitialState(){return Object.keys(localStorage).reduce((t,e)=>{if(e.includes(hm)){const n=e.replace(hm,"").toLowerCase().split(".").map(t=>t.split("-").map((t,e)=>0===e?t:t.charAt(0).toUpperCase()+t.slice(1)).join(""));let r=t;n.forEach((t,i)=>{i!==n.length-1?(r[t]=r[t]||{},r=r[t]):r[t]=JSON.parse(localStorage.getItem(e))})}return t},{})}setItem(t,e){localStorage.setItem(`${hm}${t}`,JSON.stringify(e))}getItem(t){return JSON.parse(localStorage.getItem(`${hm}${t}`))}removeItem(t){localStorage.removeItem(`${hm}${t}`)}testLocalStorage(){let t;if(this.setItem("testKey","testValue"),t=this.getItem("testKey"),this.removeItem("testKey"),"testValue"!==t)throw new Error("localStorage did not return expected value")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),dm=(()=>{class t{constructor(){}static loadInitialState(){return Object.keys(sessionStorage).reduce((t,e)=>{if(e.includes("ngx-wayfinding-")){const n=e.replace("ngx-wayfinding-","").toLowerCase().split(".").map(t=>t.split("-").map((t,e)=>0===e?t:t.charAt(0).toUpperCase()+t.slice(1)).join(""));let r=t;n.forEach((t,i)=>{i!==n.length-1?(r[t]=r[t]||{},r=r[t]):r[t]=JSON.parse(sessionStorage.getItem(e))})}return t},{})}setItem(t,e){sessionStorage.setItem(`ngx-wayfinding-${t}`,JSON.stringify(e))}getItem(t){return JSON.parse(sessionStorage.getItem(`ngx-wayfinding-${t}`))}removeItem(t){sessionStorage.removeItem(`ngx-wayfinding-${t}`)}testSessionStorage(){let t;if(this.setItem("testKey","testValue"),t=this.getItem("testKey"),this.removeItem("testKey"),"testValue"!==t)throw new Error("sessionStorage did not return expected value")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var fm=n("vDqi");const _m=n.n(fm).a.create({baseURL:"https://api.proximi.fi",timeout:6e4}),mm=t=>{const e={};return Object.keys(t).forEach(n=>{var r;void 0!==t[n]&&(e[(r=n,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())]=t[n])}),e};var gm=n("oAJy");const ym="defineDriver"in gm?gm:n.n(gm).a,vm={INDEXED_DB:ym.INDEXEDDB,LOCAL_STORAGE:ym.LOCALSTORAGE,WEB_SQL:ym.WEBSQL};for(const sL of[ym.INDEXEDDB,ym.LOCALSTORAGE,ym.WEBSQL])delete vm[sL];Object.freeze(vm);const bm=new Hn("Default NgForage config"),xm=Symbol("Default Config");let wm=(()=>{class t{constructor(t){this[xm]={cacheTime:3e5,description:"",driver:[vm.INDEXED_DB,vm.WEB_SQL,vm.LOCAL_STORAGE],name:"ngForage",size:4980736,storeName:"ng_forage",version:1},t&&this.configure(t)}get cacheTime(){return this[xm].cacheTime}set cacheTime(t){this[xm].cacheTime=t}get config(){return{cacheTime:this.cacheTime,description:this.description,driver:this.driver,name:this.name,size:this.size,storeName:this.storeName,version:this.version}}get description(){return this[xm].description}set description(t){this[xm].description=t}get driver(){return"string"==typeof this[xm].driver?this[xm].driver:this[xm].driver.slice()}set driver(t){this[xm].driver=t}get name(){return this[xm].name}set name(t){this[xm].name=t}get size(){return this[xm].size}set size(t){this[xm].size=t}get storeName(){return this[xm].storeName}set storeName(t){this[xm].storeName=t}get version(){return this[xm].version}set version(t){this[xm].version=t}configure(t){return(t=t||{}).driver&&t.driver.slice&&(t.driver=t.driver.slice()),Object.assign(this[xm],t),this}defineDriver(t){return ym.defineDriver(t)}toJSON(){return this.config}toString(){return JSON.stringify(this.toJSON())}}return t.\u0275fac=function(e){return new(e||t)(ur(bm,8))},t.\u0275prov=ht({factory:function(){return new t(ur(bm,8))},token:t,providedIn:"root"}),t})();const Em={},Sm=Symbol("Config");let Cm=(()=>{class t{constructor(t){this[Sm]=t}getInstance(t){const e=function(t){return[(e=t.driver,e?Array.isArray(e)?e.slice().sort().join(","):e:""),t.name,t.size,t.storeName,t.version,t.description,t.cacheTime].join("|");var e}(t=Object.assign({},this[Sm].config,t||{}));return Em[e]||(Em[e]=ym.createInstance(t)),Em[e]}}return t.\u0275fac=function(e){return new(e||t)(ur(wm))},t.\u0275prov=ht({factory:function(){return new t(ur(wm))},token:t,providedIn:"root"}),t})();const Im=Symbol("Store");let km=(()=>{class t{constructor(t,e){this.config={},this.storeNeedsRecalc=!0,this.baseConfig=t,this.fact=e}get description(){return this.config.description||this.baseConfig.description}set description(t){this.config.description=t,this.storeNeedsRecalc=!0}get driver(){return this.config.driver||this.baseConfig.driver}set driver(t){this.config.driver=t,this.storeNeedsRecalc=!0}get name(){return this.config.name||this.baseConfig.name}set name(t){this.config.name=t,this.storeNeedsRecalc=!0}get size(){return this.config.size||this.baseConfig.size}set size(t){this.config.size=t,this.storeNeedsRecalc=!0}get storeName(){return this.config.storeName||this.baseConfig.storeName}set storeName(t){this.config.storeName=t,this.storeNeedsRecalc=!0}get version(){return"version"in this.config?this.config.version:this.baseConfig.version}set version(t){this.config.version=t,this.storeNeedsRecalc=!0}get finalConfig(){return Object.assign({},this.baseConfig.config,this.config)}get store(){return!this.storeNeedsRecalc&&this[Im]||(this[Im]=this.fact.getInstance(this.finalConfig),this.storeNeedsRecalc=!1),this[Im]}configure(t){return t=t||{},Array.isArray(t.driver)&&(t.driver=t.driver.slice()),Object.assign(this.config,t),this.storeNeedsRecalc=!0,this}toJSON(){return{description:this.description,driver:this.driver,name:this.name,size:this.size,storeName:this.storeName,version:this.version}}toString(){return JSON.stringify(this.toJSON())}}return t.\u0275fac=function(e){return new(e||t)(ur(wm),ur(Cm))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),Tm=(()=>{class t extends km{get activeDriver(){return this.store.driver()}clear(){return this.store.clear()}clone(e){const n=new t(this.baseConfig,this.fact);return n.configure(Object.assign(this.finalConfig,e||{})),n}getItem(t){return this.store.getItem(t)}iterate(t){return this.store.iterate(t)}key(t){return this.store.key(t)}keys(){return this.store.keys()}length(){return this.store.length()}ready(){return this.store.ready()}removeItem(t){return this.store.removeItem(t)}setItem(t,e){return this.store.setItem(t,e)}supports(t){return this.store.supports(t)}}return t.\u0275fac=function(e){return Pm(e||t)},t.\u0275prov=ht({factory:function(){return new t(ur(wm),ur(Cm))},token:t,providedIn:"root"}),t})();const Pm=Un(Tm);Symbol("NgForageConfig"),Symbol("InstanceFactory");let Am=(()=>{class t{constructor(t,e,n,r,i,o){this.http=t,this.router=e,this.activatedRoute=n,this.localStorageService=r,this.sessionStorageService=i,this.ngf=o,this.isAuthenticated=!1,this.authStatusListener=new E}getToken(){return this.token}getIsAuth(){return this.isAuthenticated}getCurrentUser(){return this.user}getCurrentUserConfig(){return this.config}getCurrentUserData(){return this.data}getAuthStatusListener(){return this.authStatusListener.asObservable()}login(){this.http.get("/wayfinding/auth").subscribe(t=>{const e=t.user.token;this.token=e,e&&(this.isAuthenticated=!0,this.user=t.user,this.config=t.config,this.data=t.data,this.setAxios(e),this.authStatusListener.next(!0),this.saveAuthData(e,this.user,this.config,this.data),this.router.navigate(["/map"],{queryParams:this.activatedRoute.snapshot.queryParams,queryParamsHandling:"merge"}))},t=>{this.authStatusListener.next(!1)})}autoAuthUser(){return cm(this,void 0,void 0,function*(){const t=yield this.getAuthData();t&&(this.token=t.token,this.setAxios(this.token),this.isAuthenticated=!0,this.user=t.user,this.config=t.config,this.data=t.data,this.authStatusListener.next(!0))})}logout(){this.token=null,this.setAxios(),this.isAuthenticated=!1,this.authStatusListener.next(!1),this.user=null,this.config=null,this.data=null,this.clearAuthData(),this.router.navigate(["/login"])}saveAuthData(t,e,n,r){this.ngf.setItem("AUTH",{isAuthenticated:!0,token:t,user:e,config:n,data:r})}clearAuthData(){console.log("clear auth data"),this.ngf.setItem("AUTH",{isAuthenticated:!1,token:null,user:null,config:null,data:null})}getAuthData(){return cm(this,void 0,void 0,function*(){const t=yield this.ngf.getItem("AUTH");if(console.log(t),t&&t.token&&t.user&&t.data)return t})}setAxios(t){t?_m.defaults.headers.common.Authorization=`Bearer ${t}`:delete _m.defaults.headers.common.Authorization}}return t.\u0275fac=function(e){return new(e||t)(ur(pp),ur(U_),ur(wf),ur(pm),ur(dm),ur(Tm))},t.\u0275prov=ht({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Om=n("6BPK"),Mm=n.n(Om),Lm=n("uUT0"),Nm=function(t,e,n,r){var i="",o="";if(n){var s=new Date;s.setTime(s.getTime()+60*n*1e3),i="; expires="+s.toGMTString()}r&&(o="; domain="+r),document.cookie=t+"="+escape(e)+i+o+"; path=/"},Dm={urlPrefix:"",visitsUrl:"/ahoy/visits",eventsUrl:"/ahoy/events",page:null,platform:"Web",useBeacon:!0,startOnReady:!0,trackVisits:!0,cookies:!0,cookieDomain:null,headers:{},visitParams:{},withCredentials:!1,visitDuration:240,visitorDuration:1051200},Rm=window.ahoy||window.Ahoy||{};Rm.configure=function(t){for(var e in t)t.hasOwnProperty(e)&&(Dm[e]=t[e])},Rm.configure(Rm);var zm,Fm,Bm,jm,Vm=window.jQuery||window.Zepto||window.$,Um=!1,$m=[],qm="undefined"!=typeof JSON&&void 0!==JSON.stringify,Gm=[];function Hm(){return Dm.urlPrefix+Dm.eventsUrl}function Zm(t,e,n){Nm(t,e,n,Dm.cookieDomain||Dm.domain)}function Wm(t){return function(t){var e,n,r=t+"=",i=document.cookie.split(";");for(e=0;e<i.length;e++){for(n=i[e];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(r))return unescape(n.substring(r.length,n.length))}return null}(t)}function Xm(t){Nm(t,"",-1)}function Ym(t){Wm("ahoy_debug")&&window.console.log(t)}function Km(){for(var t;t=$m.shift();)t();Um=!0}function Jm(t,e){var n=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return n?n.apply(t,[e])?t:t.parentElement?Jm(t.parentElement,e):null:(Ym("Unable to match"),null)}function Qm(t,e,n){document.addEventListener(t,function(t){var r=Jm(t.target,e);r&&n.call(r,t)})}function tg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}function eg(){Dm.cookies&&qm&&Zm("ahoy_events",JSON.stringify(Gm),1)}function ng(){var t=document.querySelector("meta[name=csrf-token]");return t&&t.content}function rg(t){var e=ng();e&&t.setRequestHeader("X-CSRF-Token",e)}function ig(t,e,n){if(qm)if(Vm&&Vm.ajax)Vm.ajax({type:"POST",url:t,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:rg,success:n,headers:Dm.headers,xhrFields:{withCredentials:Dm.withCredentials}});else{var r=new XMLHttpRequest;for(var i in r.open("POST",t,!0),r.withCredentials=Dm.withCredentials,r.setRequestHeader("Content-Type","application/json"),Dm.headers)Dm.headers.hasOwnProperty(i)&&r.setRequestHeader(i,Dm.headers[i]);r.onload=function(){200===r.status&&n()},rg(r),r.send(JSON.stringify(e))}}function og(t){var e={events:[t]};return Dm.cookies&&(e.visit_token=t.visit_token,e.visitor_token=t.visitor_token),delete t.visit_token,delete t.visitor_token,e}function sg(t){Rm.ready(function(){ig(Hm(),og(t),function(){for(var e=0;e<Gm.length;e++)if(Gm[e].id==t.id){Gm.splice(e,1);break}eg()})})}function ag(){return Dm.page||window.location.pathname}function lg(t){return t&&t.length>0?t:null}function ug(t){return function(t){for(var e in t)t.hasOwnProperty(e)&&null===t[e]&&delete t[e];return t}({tag:this.tagName.toLowerCase(),id:lg(this.id),class:lg(this.className),page:ag(),section:cg(this)})}function cg(t){for(;t&&t!==document;t=t.parentNode)if(t.hasAttribute("data-section"))return t.getAttribute("data-section");return null}function hg(){if(Um=!1,zm=Rm.getVisitId(),Fm=Rm.getVisitorId(),Bm=Wm("ahoy_track"),!1===Dm.cookies||!1===Dm.trackVisits)Ym("Visit tracking disabled"),Km();else if(zm&&Fm&&!Bm)Ym("Active visit"),Km();else if(zm||Zm("ahoy_visit",zm=tg(),Dm.visitDuration),Wm("ahoy_visit")){Ym("Visit started"),Fm||Zm("ahoy_visitor",Fm=tg(),Dm.visitorDuration);var t={visit_token:zm,visitor_token:Fm,platform:Dm.platform,landing_page:window.location.href,screen_width:window.screen.width,screen_height:window.screen.height,js:!0};for(var e in document.referrer.length>0&&(t.referrer=document.referrer),Dm.visitParams)Dm.visitParams.hasOwnProperty(e)&&(t[e]=Dm.visitParams[e]);Ym(t),ig(Dm.urlPrefix+Dm.visitsUrl,t,function(){Xm("ahoy_track"),Km()})}else Ym("Cookies disabled"),Km()}Rm.ready=function(t){Um?t():$m.push(t)},Rm.getVisitId=Rm.getVisitToken=function(){return Wm("ahoy_visit")},Rm.getVisitorId=Rm.getVisitorToken=function(){return Wm("ahoy_visitor")},Rm.reset=function(){return Xm("ahoy_visit"),Xm("ahoy_visitor"),Xm("ahoy_events"),Xm("ahoy_track"),!0},Rm.debug=function(t){return!1===t?Xm("ahoy_debug"):Zm("ahoy_debug","t",525600),!0},Rm.track=function(t,e){var n={name:t,properties:e||{},time:(new Date).getTime()/1e3,id:tg(),js:!0};return Rm.ready(function(){Dm.cookies&&!Rm.getVisitId()&&hg(),Rm.ready(function(){Ym(n),n.visit_token=Rm.getVisitId(),n.visitor_token=Rm.getVisitorId(),(Dm.useBeacon||Dm.trackNow)&&0===Object.keys(Dm.headers).length&&qm&&void 0!==window.navigator.sendBeacon&&!Dm.withCredentials?function(t){Rm.ready(function(){var e,n=og(t),r=(e=document.querySelector("meta[name=csrf-param]"))&&e.content,i=ng();r&&i&&(n[r]=i),n.events_json=JSON.stringify(n.events),delete n.events,window.navigator.sendBeacon(Hm(),Object(Lm.serialize)(n))})}(n):(Gm.push(n),eg(),setTimeout(function(){sg(n)},1e3))})}),!0},Rm.trackView=function(t){var e={url:window.location.href,title:document.title,page:ag()};if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);Rm.track("$view",e)},Rm.trackClicks=function(){Qm("click","a, button, input[type=submit]",function(t){var e=ug.call(this,t);e.text="input"==e.tag?this.value:(this.textContent||this.innerText||this.innerHTML).replace(/[\s\r\n]+/g," ").trim(),e.href=this.href,Rm.track("$click",e)})},Rm.trackSubmits=function(){Qm("submit","form",function(t){var e=ug.call(this,t);Rm.track("$submit",e)})},Rm.trackChanges=function(){Qm("change","input, textarea, select",function(t){var e=ug.call(this,t);Rm.track("$change",e)})},Rm.trackAll=function(){Rm.trackView(),Rm.trackClicks(),Rm.trackSubmits(),Rm.trackChanges()};try{Gm=JSON.parse(Wm("ahoy_events")||"[]")}catch(iL){}for(var pg=0;pg<Gm.length;pg++)sg(Gm[pg]);Rm.start=function(){hg(),Rm.start=function(){}},jm=function(){Dm.startOnReady&&Rm.start()},"interactive"===document.readyState||"complete"===document.readyState?setTimeout(jm,0):document.addEventListener("DOMContentLoaded",jm);var dg=Rm;function fg(t){return null!=t&&"false"!=`${t}`}function _g(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function mg(t){return Array.isArray(t)?t:[t]}function gg(t){return null==t?"":"string"==typeof t?t:`${t}px`}function yg(t){return t instanceof Ya?t.nativeElement:t}function vg(t,e,n,i){return r(n)&&(i=n,n=void 0),i?vg(t,e,n).pipe(I(t=>l(t)?i(...t):i(t))):new y(r=>{bg(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function bg(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)bg(t[o],e,n,r,i)}r.add(o)}class xg extends h{constructor(t,e){super()}schedule(t,e=0){return this}}class wg extends xg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(iL){r=!0,n=!!iL&&iL||new Error(iL)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class Eg extends wg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}let Sg=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Cg extends Sg{constructor(t,e=Sg.now){super(t,()=>Cg.delegate&&Cg.delegate!==this?Cg.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Cg.delegate&&Cg.delegate!==this?Cg.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class Ig extends Cg{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const kg=new Ig(Eg);let Tg=1;const Pg=(()=>Promise.resolve())(),Ag={};function Og(t){return t in Ag&&(delete Ag[t],!0)}const Mg={setImmediate(t){const e=Tg++;return Ag[e]=!0,Pg.then(()=>Og(e)&&t()),e},clearImmediate(t){Og(t)}};class Lg extends wg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=Mg.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Mg.clearImmediate(e),t.scheduled=void 0)}}class Ng extends Cg{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const Dg=new Ng(Lg);class Rg{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new zg(t,this.compare,this.keySelector))}}class zg extends f{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const Fg=new Cg(wg);class Bg{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new jg(t,this.durationSelector))}}class jg extends F{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=B(n,new z(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Vg(t){return!l(t)&&t-parseFloat(t)+1>=0}function Ug(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function $g(t,e=Fg){return n=()=>function(t=0,e,n){let r=-1;return Vg(e)?r=Number(e)<1?1:Number(e):C(e)&&(n=e),C(n)||(n=Fg),new y(e=>{const i=Vg(t)?t:+t-n.now();return n.schedule(Ug,i,{index:0,period:r,subscriber:e})})}(t,e),function(t){return t.lift(new Bg(n))};var n}function qg(t){return e=>e.lift(new Gg(t))}class Gg{constructor(t){this.notifier=t}call(t,e){const n=new Hg(t),r=B(this.notifier,new z(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class Hg extends F{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let Zg;try{Zg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(oL){Zg=!1}let Wg,Xg=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Zg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(ur(Du))},t.\u0275prov=ht({factory:function(){return new t(ur(Du))},token:t,providedIn:"root"}),t})(),Yg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})();const Kg=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Jg(){if(Wg)return Wg;if("object"!=typeof document||!document)return Wg=new Set(Kg),Wg;let t=document.createElement("input");return Wg=new Set(Kg.filter(e=>(t.setAttribute("type",e),t.type===e))),Wg}let Qg,ty,ey;function ny(t){return function(){if(null==Qg&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Qg=!0}))}finally{Qg=Qg||!1}return Qg}()?t:!!t.capture}function ry(){if(null==ty){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ty=!1,ty;if("scrollBehavior"in document.documentElement.style)ty=!0;else{const t=Element.prototype.scrollTo;ty=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return ty}function iy(t){if(function(){if(null==ey){const t="undefined"!=typeof document?document.head:null;ey=!(!t||!t.createShadowRoot&&!t.attachShadow)}return ey}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}const oy=new Hn("cdk-dir-doc",{providedIn:"root",factory:function(){return cr(Pc)}});let sy=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new uu,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(ur(oy,8))},t.\u0275prov=ht({factory:function(){return new t(ur(oy,8))},token:t,providedIn:"root"}),t})(),ay=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})(),ly=(()=>{class t{constructor(){this._listeners=[]}notify(t,e){for(let n of this._listeners)n(t,e)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(e=>t!==e)}}ngOnDestroy(){this._listeners=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})(),uy=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new E,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new y(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe($g(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Gh()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Zh(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=yg(e),r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>vg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(ur(Yu),ur(Xg),ur(Pc,8))},t.\u0275prov=ht({factory:function(){return new t(ur(Yu),ur(Xg),ur(Pc,8))},token:t,providedIn:"root"}),t})(),cy=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new E,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe($g(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(ur(Xg),ur(Yu),ur(Pc,8))},t.\u0275prov=ht({factory:function(){return new t(ur(Xg),ur(Yu),ur(Pc,8))},token:t,providedIn:"root"}),t})(),hy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})(),py=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ay,Yg,hy],ay,hy]}),t})();class dy{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class fy extends dy{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class _y extends dy{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class my extends dy{constructor(t){super(),this.element=t instanceof Ya?t.nativeElement:t}}class gy{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof fy?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof _y?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof my?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class yy extends gy{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let vy=(()=>{class t extends gy{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new uu,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ha),Ts(Nl),Ts(Pc))},t.\u0275dir=Xt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[hs]}),t})(),by=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})();const xy=ry();class wy{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=gg(-this._previousScrollPosition.left),t.style.top=gg(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),xy&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),xy&&(e.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class Ey{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Sy{enable(){}disable(){}attach(){}}function Cy(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function Iy(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class ky{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();Cy(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ty=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new Sy,this.close=t=>new Ey(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new wy(this._viewportRuler,this._document),this.reposition=t=>new ky(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(ur(uy),ur(cy),ur(Yu),ur(Pc))},t.\u0275prov=ht({factory:function(){return new t(ur(uy),ur(cy),ur(Yu),ur(Pc))},token:t,providedIn:"root"}),t})();class Py{constructor(t){if(this.scrollStrategy=new Sy,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class Ay{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class Oy{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let My=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc))},t.\u0275prov=ht({factory:function(){return new t(ur(Pc))},token:t,providedIn:"root"}),t})(),Ly=(()=>{class t extends My{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc))},t.\u0275prov=ht({factory:function(){return new t(ur(Pc))},token:t,providedIn:"root"}),t})(),Ny=(()=>{class t extends My{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const i=n[r];if(!(i._outsidePointerEvents.observers.length<1)&&i.hasAttached()){if(i.overlayElement.contains(e))break;i._outsidePointerEvents.next(t)}}}}add(t){if(super.add(t),!this._isAttached){const t=this._document.body;t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc),ur(Xg))},t.\u0275prov=ht({factory:function(){return new t(ur(Pc),ur(Xg))},token:t,providedIn:"root"}),t})();const Dy=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let Ry=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){if(this._platform.isBrowser||Dy){const t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const t=this._document.createElement("div");t.classList.add("cdk-overlay-container"),Dy?t.setAttribute("platform","test"):this._platform.isBrowser||t.setAttribute("platform","server"),this._document.body.appendChild(t),this._containerElement=t}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc),ur(Xg))},t.\u0275prov=ht({factory:function(){return new t(ur(Pc),ur(Xg))},token:t,providedIn:"root"}),t})();class zy{constructor(t,e,n,r,i,o,s,a,l){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=s,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new E,this._attachments=new E,this._detachments=new E,this._locationChanges=h.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new E,this._outsidePointerEvents=new E,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(qp(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=gg(this._config.width),t.height=gg(this._config.height),t.minWidth=gg(this._config.minWidth),t.minHeight=gg(this._config.minHeight),t.maxWidth=gg(this._config.maxWidth),t.maxHeight=gg(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;mg(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(qg(G(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const Fy=/([A-Za-z%]+)$/;class By{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new E,this._resizeSubscription=h.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),l=this._getOverlayFit(a,e,n,o);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(l,a,n)?r.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!i||i.overlayFit.visibleArea<l.visibleArea)&&(i={overlayFit:l,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&jy(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}_getOverlayFit(t,e,n,r){const i=Uy(e);let{x:o,y:s}=t,a=this._getOffset(r,"x"),l=this._getOffset(r,"y");a&&(o+=a),l&&(s+=l);let u=0-s,c=s+i.height-n.height,h=this._subtractOverflows(i.width,0-o,o+i.width-n.width),p=this._subtractOverflows(i.height,u,c),d=h*p;return{visibleArea:d,isCompletelyWithinViewport:i.width*i.height===d,fitsInViewportVertically:p===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,o=Vy(this._overlayRef.getConfig().minHeight),s=Vy(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Uy(e),i=this._viewportRect,o=Math.max(t.x+r.width-i.width,0),s=Math.max(t.y+r.height-i.height,0),a=Math.max(i.top-n.top-t.y,0),l=Math.max(i.left-n.left-t.x,0);let u=0,c=0;return u=r.width<=i.width?l||-o:t.x<this._viewportMargin?i.left-n.left-t.x:0,c=r.height<=i.height?a||-s:t.y<this._viewportMargin?i.top-n.top-t.y:0,this._previousPushAmount={x:u,y:c},{x:t.x+u,y:t.y+c}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new Oy(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,o,s,a,l,u;if("top"===e.overlayY)o=t.y,i=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-t.y+2*this._viewportMargin,i=n.height-s+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;i=2*e,o=t.y-e,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)u=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)l=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,l=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.x-r/2)}return{top:o,left:l,bottom:s,right:u,width:a,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=gg(n.height),r.top=gg(n.top),r.bottom=gg(n.bottom),r.width=gg(n.width),r.left=gg(n.left),r.right=gg(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=gg(t)),i&&(r.maxWidth=gg(i))}this._lastBoundingBoxSize=n,jy(this._boundingBox.style,r)}_resetBoundingBoxStyles(){jy(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){jy(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();jy(n,this._getExactOverlayY(e,t,r)),jy(n,this._getExactOverlayX(e,t,r))}else n.position="static";let s="",a=this._getOffset(e,"x"),l=this._getOffset(e,"y");a&&(s+=`translateX(${a}px) `),l&&(s+=`translateY(${l}px)`),n.transform=s.trim(),o.maxHeight&&(r?n.maxHeight=gg(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=gg(o.maxWidth):i&&(n.maxWidth="")),jy(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=gg(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=gg(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Iy(t,n),isOriginOutsideView:Cy(t,n),isOverlayClipped:Iy(e,n),isOverlayOutsideView:Cy(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&mg(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ya)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function jy(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Vy(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(Fy);return n&&"px"!==n?null:parseFloat(e)}return t||null}function Uy(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class $y{constructor(t,e,n,r,i,o,s){this._preferredPositions=[],this._positionStrategy=new By(n,r,i,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new Ay(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}class qy{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:o,maxHeight:s}=n,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Gy=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new qy}connectedTo(t,e,n){return new $y(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new By(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(ur(cy),ur(Pc),ur(Xg),ur(Ry))},t.\u0275prov=ht({factory:function(){return new t(ur(cy),ur(Pc),ur(Xg),ur(Ry))},token:t,providedIn:"root"}),t})(),Hy=0,Zy=(()=>{class t{constructor(t,e,n,r,i,o,s,a,l,u,c){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=s,this._document=a,this._directionality=l,this._location=u,this._outsideClickDispatcher=c}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new Py(t);return i.direction=i.direction||this._directionality.value,new zy(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+Hy++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(gc)),new yy(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(ur(Ty),ur(Ry),ur(Ha),ur(Gy),ur(Ly),ur(us),ur(Yu),ur(Pc),ur(sy),ur(qc),ur(Ny))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const Wy={provide:new Hn("cdk-connected-overlay-scroll-strategy"),deps:[Zy],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Xy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[Zy,Wy],imports:[[ay,by,py],py]}),t})();var Yy=n("jIQF");class Ky{constructor(t){this.id=t.id||(t.properties?t.properties.id:void 0)}get exists(){return void 0!==this.id}}class Jy extends Ky{constructor(t){super(t),this.name=t.name,this.place_id=t.place_id,this.level=t.level||0,this.floorplan_image_url=t.floorplan_image_url,t.anchors&&(this.anchors=[[t.anchors[0].lng,t.anchors[0].lat],[t.anchors[1].lng,t.anchors[1].lat],[t.anchors[3].lng,t.anchors[3].lat],[t.anchors[2].lng,t.anchors[2].lat]])}get hasFloorplan(){return this.floorplan_image_url&&this.floorplan_image_url.length>1&&this.anchors}}class Qy extends Ky{constructor(t){super(t),this.name=t.name,this.address=t.address,this.lat=t.lat?t.lat:t.location?t.location.lat:60.1669635,this.lng=t.lng?t.lng:t.location?t.location.lng:24.9217484}get hasLocation(){return!isNaN(this.lat)&&!isNaN(this.lng)}}class tv{constructor(){this._observers=[]}observe(t){this._observers.push(t)}cancel(t){const e=this._observers.findIndex(e=>e===t);e>=0&&this._observers.splice(e,1)}notify(t,e){this._observers.forEach(n=>n(t,e,this))}}class ev{get json(){return mm(this)}}class nv{constructor(t){this.id=t.id,this.type=t.type,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.metadata=t.metadata}get json(){const{id:t,type:e,source:n,sourceLayer:r,minzoom:i,maxzoom:o,filter:s,metadata:a}=this,l={id:t,type:e};return n&&(l.source=n),r&&(l["source-layer"]=r),i&&(l.minzoom=i),o&&(l.maxzoom=o),s&&(l.filter=s),this.metadata&&(l.metadata=a),this.paint&&(l.paint=this.paint.json),this.layout&&(l.layout=this.layout.json),l}setFilterLevel(t){this.filter.forEach((e,n)=>{if("proximiio-levelchangers"===this.id){const r=`__level_${t}`;3===n&&(e[1]=r),4===n&&(e[1][1]=r)}if(Array.isArray(e)){let r=!1;if("=="===e[0]){const n=e[1];"to-number"===n[0]&&"get"===n[1][0]&&"level"===n[1][1]&&(e[2]=t,r=!0),"get"===n[0]&&"level"===n[1]&&(e[2]=t,r=!0)}if("<="===e[0]){const n=e[1];"to-number"===n[0]&&"get"===n[1][0]&&"level_min"===n[1][1]&&(e[2]=t,r=!0),"get"===n[0]&&"level_min"===n[1]&&(e[2]=t,r=!0)}if(">="===e[0]){const n=e[1];"to-number"===n[0]&&"get"===n[1][0]&&"level_max"===n[1][1]&&(e[2]=t,r=!0),"get"===n[0]&&"level_max"===n[1]&&(e[2]=t,r=!0)}r&&(this.filter[n]=e)}})}}class rv extends ev{constructor(t){super(),this.backgroundColor=t["background-color"]||"#000000",this.backgroundPattern=t["background-pattern"],this.backgroundOpacity=t["background-opacity"]||1}}class iv extends ev{constructor(t){super(),this.visibility=t.visibility||"visible"}}class ov extends nv{constructor(t){super(t),this.paint=new rv(t.paint||{}),this.layout=new iv(t.layout||{})}}class sv extends ev{constructor(t){super(),this.rasterOpacity=t["raster-opacity"]||1,this.rasterHueRotate=t["raster-hue-rotate"]||0,this.rasterBrightnessMin=t["raster-brightness-min"]||0,this.rasterBrightnessMax=t["raster-brightness-max"]||1,this.rasterSaturation=t["raster-saturation"]||0,this.rasterContrast=t["raster-contrast"]||0,this.rasterResampling=t["raster-resampling"]||"linear",this.rasterFadeDuration=t["raster-fade-duration"]||300}}class av extends ev{constructor(t){super(),this.visibility=t.visibility||"visible"}}class lv extends nv{constructor(t){super(t),this.paint=new sv(t.paint||{}),this.layout=new av(t.layout||{})}}class uv extends ev{constructor(t){super(),this.fillAntialias=t["fill-antialias"]||!0,this.fillOpacity=t["fill-opacity"]||1,this.fillColor=t["fill-color"]||"#000000",this.fillOutlineColor=t["fill-outline-color"],this.fillTranslate=t["fill-translate"]||[0,0],this.fillTranslateAnchor=t["fill-translate-anchor"]||"map",this.fillPattern=t["fill-pattern"]}}class cv extends ev{constructor(t){super(),this.visibility=t.visibility||"visible"}}class hv extends nv{constructor(t){super(t),this.paint=new uv(t.paint||{}),this.layout=new cv(t.layout||{})}}class pv extends ev{constructor(t){super(),this.lineColor=t["line-color"]||"#000000",this.lineOpacity=t["line-opacity"]||1,this.lineTranslate=t["line-translate"]||[0,0],this.lineTranslateAnchor=t["line-translate-anchor"]||"map",this.lineWidth=t["line-width"]||1,this.lineGapWidth=t["line-gap-width"]||0,this.lineOffset=t["line-offset"]||0,this.lineBlur=t["line-blur"]||0,this.lineDashArray=t["line-dash-array"],this.linePattern=t["line-pattern"],this.lineGradient=t["line-gradient"]}}class dv extends ev{constructor(t){super(),this.visibility=t.visibility||"visible",this.lineCap=t["line-cap"]||"butt",this.lineJoin=t["line-join"]||"miter",this.lineMiterLimit=t["line-miter-limit"]||2,this.lineRoundLimit=t["line-round-limit"]||1.05}}class fv extends nv{constructor(t){super(t),this.paint=new pv(t.paint||{}),this.layout=new dv(t.layout||{})}}class _v extends ev{constructor(t){super(),this.fillExtrusionColor=t["fill-extrusion-color"]||"#000000",this.fillExtrusionOpacity=t["fill-extrusion-opacity"]||1,this.fillExtrusionTranslate=t["fill-extrusion-translate"]||[0,0],this.fillExtrusionTranslateAnchor=t["fill-extrusion-translate-anchor"]||"map",this.fillExtrusionPattern=t["fill-extrusion-pattern"],this.fillExtrusionHeight=t["fill-extrusion-height"]||0,this.fillExtrusionBase=t["fill-extrusion-base"]||0,this.fillExtrusionVerticalGradient=t["fill-extrusion-vertical-gradient"]||!0}}class mv extends ev{constructor(t){super(),this.visibility=t.visibility||"visible"}}class gv extends nv{constructor(t){super(t),this.paint=new _v(t.paint||{}),this.layout=new mv(t.layout||{})}}class yv extends ev{constructor(t){super(),this.iconColor=t["icon-color"]||"#000000",this.iconOpacity=t["icon-opacity"]||1,this.iconHaloColor=t["icon-halo-color"]||"rgba(0, 0, 0, 0)",this.iconHaloWidth=t["icon-halo-width"]||0,this.iconHaloBlur=t["icon-halo-blur"]||0,this.iconTranslate=t["icon-translate"]||[0,0],this.iconTranslateAnchor=t["icon-translate-anchor"]||"map",this.textOpacity=t["text-opacity"]||1,this.textColor=t["text-color"]||"#000000",this.textHaloColor=t["text-halo-color"]||"rgba(0, 0, 0, 0)",this.textHaloWidth=t["text-halo-width"]||0,this.textHaloBlur=t["text-halo-blur"]||0,this.textTranslate=t["text-translate"]||[0,0],this.textTranslateAnchor=t["text-translate-anchor"]||"map"}}class vv extends ev{constructor(t){super(),this.visibility=t.visibility||"visible",this.symbolPlacement=t["symbol-placement"]||"point",this.symbolSpacing=t["symbol-spacing"]||250,this.symbolAvoidEdges=t["symbol-avoid-edges"]||!1,this.symbolSortKey=t["symbol-sort-key"],this.symbolZOrder=t["symbol-z-order"]||"auto",this.iconAllowOverlap=t["icon-allow-overlap"]||!1,this.iconIgnorePlacement=t["icon-ignore-placement"]||!1,this.iconOptional=t["icon-optional"]||!1,this.iconRotationAlignment=t["icon-rotation-alignment"]||"auto",this.iconSize=t["icon-size"]||1,this.iconTextFit=t["icon-text-fit"]||"none",this.iconTextFitPadding=t["icon-text-fit-padding"]||[0,0,0,0],this.iconImage=t["icon-image"],this.iconRotate=t["icon-rotate"]||0,this.iconPadding=t["icon-padding"]||2,this.iconKeepUpright=t["icon-keep-upright"]||!1,this.iconOffset=t["icon-offset"]||[0,0],this.iconAnchor=t["icon-anchor"]||"center",this.iconPitchAlignment=t["icon-pitch-alignment"]||"auto",this.textPitchAlignment=t["text-pitch-alignment"]||"auto",this.textRotationAlignment=t["text-rotation-alignment"]||"auto",this.textFont="string"==typeof t["text-font"]&&"{textFont}"===t["text-font"]||"object"==typeof t["text-font"]&&"textFont"===t["text-font"].property?["match",["string",["get","textFont"]],"Klokantech Noto Sans Bold",["literal",["Klokantech Noto Sans Bold"]],"Klokantech Noto Sans CJK Bold",["literal",["Klokantech Noto Sans CJK Bold"]],"Klokantech Noto Sans CJK Regular",["literal",["Klokantech Noto Sans CJK Regular"]],"Klokantech Noto Sans Italic",["literal",["Klokantech Noto Sans Italic"]],"Klokantech Noto Sans Regular",["literal",["Klokantech Noto Sans Regular"]],"Noto Sans Bold",["literal",["Noto Sans Bold"]],"Noto Sans Bold Italic",["literal",["Noto Sans Bold Italic"]],"Noto Sans Italic",["literal",["Noto Sans Italic"]],"Noto Sans Regular",["literal",["Noto Sans Regular"]],"Open Sans Bold",["literal",["Open Sans Bold"]],"Open Sans Italic",["literal",["Open Sans Italic"]],"Open Sans Regular",["literal",["Open Sans Regular"]],"Open Sans Semibold",["literal",["Open Sans Semibold"]],"Open Sans Semibold Italic",["literal",["Open Sans Semibold Italic"]],["literal",["Klokantech Noto Sans Bold"]]]:t["text-font"],this.textField=t["text-field"]||"",this.textSize=t["text-size"]||16,this.textMaxWidth=t["text-max-width"]||10,this.textLineHeight=t["text-line-height"]||1.2,this.textLetterSpacing=t["text-letter-spacing"]||0,this.textJustify=t["text-justify"]||"center",this.textRadialOffset=t["text-radial-offset"]||0,this.textVariableAnchor=t["text-variable-anchor"],this.textAnchor=t["text-anchor"]||"center",this.textMaxAngle=t["text-max-angle"]||45,this.textWritingMode=t["text-writing-mode"],this.textRotate=t["text-rotate"]||0,this.textPadding=t["text-padding"]||2,this.textKeepUpright=t["text-keep-upright"]||!0,this.textTransform=t["text-transform"]||"none",this.textOffset=t["text-offset"]||[0,0],this.textAllowOverlap=t["text-allow-overlap"]||!1,this.textIgnorePlacement=t["text-ignore-placement"]||!1,this.textOptional=t["text-optional"]||!1}get json(){const t=mm(this);return t["symbol-z-order"]=this.symbolZOrder,delete t["symbol-zorder"],t}}class bv extends nv{constructor(t){super(t),this.paint=new yv(t.paint||{}),this.layout=new vv(t.layout||{})}}class xv extends ev{constructor(t){super(),this.heatmapRadius=t["heatmap-radius"]||30,this.heatmapWeight=t["heatmap-weight"]||1,this.heatmapIntensity=t["heatmap-intensity"]||1,this.heatmapOpacity=t["heatmap-opacity"]||1,this.heatmapColor=t["heatmap-color"]||""}}class wv extends ev{constructor(t){super(),this.visibility=t.visibility||"visible"}}class Ev extends nv{constructor(t){super(t),this.paint=new xv(t.paint||{}),this.layout=new wv(t.layout||{})}}class Sv extends ev{constructor(t){super(),this.circleRadius=t["circle-radius"]||5,this.circleColor=t["circle-color"]||"#000000",this.circleBlur=t["circle-blur"]||0,this.circleOpacity=t["circle-opacity"]||1,this.circleTranslate=t["circle-translate"]||[0,0],this.circleTranslateAnchor=t["circle-translate-anchor"]||"map",this.circlePitchScale=t["circle-pitch-scale"]||"map",this.circlePitchAlignment=t["circle-pitch-alignment"]||"viewport",this.circleStrokeWidth=t["circle-stroke-width"]||1,this.circleStrokeColor=t["circle-stroke-color"]||"#000000",this.circleStrokeOpacity=t["circle-stroke-opacity"]||1}}class Cv extends ev{constructor(t){super(),this.visibility=t.visibility||"visible",this.circleSortKey=t["circle-sort-key"]||0}}class Iv extends nv{constructor(t){super(t),this.type="circle",this.paint=new Sv(t.paint||{}),this.layout=new Cv(t.layout||{})}}class kv extends ev{constructor(t){super(),this.hillshadeIlluminationDirection=t["hillshade-illumination-direction"]||335,this.hillshadeIlluminationAnchor=t["hillshade-illumination-anchor"]||"viewport",this.hillshadeExaggeration=t["hillshade-exaggeration"]||.5,this.hillshadeShadowColor=t["hillshade-shadow-color"]||'#000000"',this.hillshadeHighlightColor=t["hillshade-highlight-color"]||"#ffffff",this.hillshadeAccentColor=t["hillshade-accent-color"]||"#000000"}}class Tv extends ev{constructor(t){super(),this.visibility=t.visibility||"visible"}}class Pv extends nv{constructor(t){super(t),this.paint=new kv(t.paint||{}),this.layout=new Tv(t.layout||{})}}var Av=n("bo1M"),Ov={"proximiio:languages":{en:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"},fi:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"}},en:{title:"English",level:{zero:"levels",one:"level",two:"levels",few:"levels",many:"levels",other:"levels"},meter:{zero:"meters",one:"meter",two:"meters",few:"meters",many:"meters",other:"meters"},turn_before:"In %d %s %s.",turn_prepare:"Prepare to %s in %d %s.",turn_now:"%s.",continue:"Continue %d %s.",levelchange:"Use %s to get to %d %s.",turn_left_hard:"turn hard left",turn_left:"turn left",turn_left_slight:"turn slight left",turn_straight:"continue straight",turn_right_slight:"turn slight right",turn_right:"turn right",turn_right_hard:"turn right",turn_around:"turn around",destination_nearing:"In %d %s you will arrive at your destination.",destination_reached:"You have reached your destination",canceled:"Navigation was canceled.",calculating:"Calculating route...",recalculating:"Recalculating route...",path_not_found:"Unable to find path.",level_change_down:"go %d %s up to %s %d.",level_change_up:"go %d %s up to %s %d.",passing_poi:"Passing %s on your %s",left:"left",right:"right"}};class Mv extends tv{constructor(t){super(),this.overlay=!1,this.segments=!1,this.routable=!1,this.cluster=!0,this.rooms=!0,this.id=t.id,this.organization_id=t.organization_id,this.version=t.version||1,this.name=t.name||"New Style",this.metadata=Object.assign(Ov,t.metadata||{}),this.center=t.center||[18.555,48.4437],this.zoom=t.zoom||8,this.bearing=t.bearing||0,this.pitch=t.pitch||0,this.sources=t.sources||[],this.glyphs=t.glyphs||"",this.layers=(t.layers||[]).map(t=>"background"===t.type?new ov(t).json:"raster"===t.type?new lv(t).json:"fill"===t.type?new hv(t).json:"line"===t.type?new fv(t).json:"fill-extrusion"===t.type?new gv(t).json:"symbol"===t.type?new bv(t).json:"heatmap"===t.type?new Ev(t).json:"circle"===t.type?new Iv(t).json:"hillshade"===t.type?new Pv(t).json:new nv(t)).concat(this.getUniversalLayers("main")).concat(this.getSyntheticLayers())}getUniversalLayers(t){const e=["all",["==",["geometry-type"],"Polygon"],["any",["==",["get","segment"],!1],["!",["has","segment"]]],["any",["==",["get","routable"],!1],["!",["has","routable"]]],["==",["get","level"],0]],n=["all",["==",["geometry-type"],"Polygon"],["has","segment"],["==",["get","segment"],!0],["==",["get","level"],0]],r=["all",["==",["geometry-type"],"Polygon"],["has","routable"],["==",["get","routable"],!0],["==",["get","level"],0]],i=["all",["==",["geometry-type"],"Polygon"],["has","room"],["==",["get","room"],!0],["==",["get","level"],0]],o={minzoom:1,maxzoom:24,source:t};return[new hv(Object.assign(Object.assign({},o),{id:`${t}-polygon-fill`,type:"fill",filter:e,layout:{visibility:"none"},paint:{"fill-color":"#08c","fill-opacity":.3}})).json,new fv(Object.assign(Object.assign({},o),{id:`${t}-polygon-outline`,type:"line",filter:e,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#08c","line-width":1,"line-opacity":1}})).json,new fv(Object.assign(Object.assign({},o),{id:`${t}-room-outline`,type:"line",roomFilter:i,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":["get","color"],"line-width":1,"line-opacity":1}})).json,new hv(Object.assign(Object.assign({},o),{id:`${t}-room-fill`,type:"fill",filter:i,layout:{visibility:"none"},paint:{"fill-color":["get","color"],"fill-opacity":.3}})).json,new hv(Object.assign(Object.assign({},o),{id:`${t}-segment-fill`,type:"fill",filter:n,layout:{visibility:"none"},paint:{"fill-color":"#0c8","fill-opacity":.3}})).json,new fv(Object.assign(Object.assign({},o),{id:`${t}-segment-outline`,type:"line",filter:n,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#0c8","line-width":1,"line-opacity":1}})).json,new hv(Object.assign(Object.assign({},o),{id:`${t}-routable-fill`,type:"fill",filter:r,layout:{visibility:"none"},paint:{"fill-color":"#c80","fill-opacity":.3}})).json,new fv(Object.assign(Object.assign({},o),{id:`${t}-routable-outline`,type:"line",filter:r,layout:{"line-join":"bevel",visibility:"none"},paint:{"line-color":"#c80","line-width":1,"line-opacity":1}})).json]}getSyntheticLayers(){return[new hv({type:"fill",minzoom:1,maxzoom:24,source:"synthetic",id:"synthetic-polygon-fill",filter:["all",["==",["geometry-type"],"Polygon"]],layout:{visibility:"visible"},paint:{"fill-color":"#08c","fill-opacity":.3}}).json,new fv({type:"line",minzoom:1,maxzoom:24,source:"synthetic",id:"synthetic-polygon-outline",filter:["all",["==",["geometry-type"],"Polygon"]],layout:{"line-join":"bevel",visibility:"visible"},paint:{"line-color":"#08c","line-width":1,"line-opacity":1}}).json]}usesPrefixes(){return void 0!==this.layers.find(t=>"proximiio-paths"===t.id)}getLayer(t){return this.layers.find(e=>e.id===t)}getLayerIndex(t){return this.layers.findIndex(e=>e.id===t)}getLayers(t){return this.layers.filter(e=>e.source&&e.source===t)}getSources(){const t=[];return Object.keys(this.sources).forEach(e=>{const n=this.sources[e];n.id=e,t.push(n)}),t}setSource(t,e){this.sources[t]=e.source}setLevel(t){[...this.getLayers("main"),...this.getLayers("route")].forEach(e=>{e.filter&&e.filter.forEach((n,r)=>{if("proximiio-levelchangers"===e.id){const e=`__level_${t}`;3===r&&(n[1]=e),4===r&&(n[1][1]=e)}if(Array.isArray(n)){let i=!1;if("=="===n[0]){const e=n[1];"to-number"===e[0]&&"get"===e[1][0]&&"level"===e[1][1]&&(n[2]=t,i=!0),"get"===e[0]&&"level"===e[1]&&(n[2]=t,i=!0)}if("<="===n[0]){const e=n[1];"to-number"===e[0]&&"get"===e[1][0]&&"level_min"===e[1][1]&&(n[2]=t,i=!0),"get"===e[0]&&"level_min"===e[1]&&(n[2]=t,i=!0)}if(">="===n[0]){const e=n[1];"to-number"===e[0]&&"get"===e[1][0]&&"level_max"===e[1][1]&&(n[2]=t,i=!0),"get"===e[0]&&"level_max"===e[1]&&(n[2]=t,i=!0)}i&&(e.filter[r]=n)}})}),this.notify("filter-change")}get polygonEditing(){return this.metadata["proximiio:polygon-editing"]||!1}toggleCluster(){this.cluster=!this.cluster,this.notify("cluster-toggled")}togglePolygonEditing(){this.metadata["proximiio:polygon-editing"]=!this.metadata["proximiio:polygon-editing"]||!this.metadata["proximiio:polygon-editing"],console.log("polygon-editing-toggled",this.metadata["proximiio:polygon-editing"]),this.notify("polygon-editing-toggled")}toggleRooms(){this.rooms=!this.rooms,this.notify("roomsss-toggled")}toggleOverlay(){this.overlay=!this.overlay,this.notify("overlay-toggled")}toggleSegments(){this.segments=!this.segments,this.notify("segments-toggled")}toggleRoutable(){this.routable=!this.routable,this.notify("routable-toggled")}togglePaths(t){const e=this.layers.find(t=>"proximiio-paths"===t.id||"paths"===t.id);if(e){const n=new fv(Object.assign({},e.json));n.layout.visibility=t?"visible":"none",this.updateLayer(n)}}updateLayer(t){const e=this.getLayerIndex(t.id),n=[];if(e>=0){const r=this.layers[e],i=Object(Av.diff)(r.json,t.json);console.log("change",i),i&&(n.push(i),this.layers.splice(e,1,t),this.notify("layer-update",{layer:t,changes:n.length>0?n[0]:[]}))}}setMetadata(t,e,n){this.metadata[`${t}:${e}`]=n,this.notify("metadata-update")}get namespaces(){const t=Object.keys(this.metadata).filter(t=>t.indexOf(":")>0),e=new Set(t.map(t=>t.split(":")[0]));return Array.from(e).sort((t,e)=>t.localeCompare(e))}namespaceItems(t){return Object.keys(this.metadata).filter(e=>0===e.indexOf(`${t}:`)).map(t=>t.split(":").slice(1).join(":"))}get json(){const t=Object.assign({},this);return delete t._observers,delete t.overlay,t.layers=this.layers.map(t=>t.json),JSON.parse(JSON.stringify(t))}}let Lv=(()=>{class t{constructor(){this.state={initializing:!0,floor:new Jy({}),floors:[],place:new Qy({}),places:[],style:new Mv({}),styles:[],latitude:60.1669635,longitude:24.9217484,loadingRoute:!1,noPlaces:!1,options:{coordinates:[0,0],zoom:19,pitch:40,bearing:10,bounds:[[0,0],[0,0]]},defaultLocation:{coordinates:[51.48091652702158,25.336680584406395],level:0,isStartPoint:!0},textNavigation:null,accessibleRoute:!1}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Nv=(()=>{class t{constructor(t,e){this.stateService=t,this.authService=e,this.defaultFloorLevel=0,this.endPointLabel="Etsi kartalta",this.startPointLabel="Where are you now?",this.placeSelectorLabel="Pick up a place",this.amenityToggles=[{label:"All Visible",icon:"assets/kaikki_kohteet.svg",amenities:["all"]}],this.activeAmenitiesToggle=["all"],this.sidebarStatus=new E,this.startPointListener=new E,this.endPointListener=new E,this.selectedPlaceListener=new E,this.accessibleOnlyToggleListener=new E,this.amenityToggleListener=new E,this.floorChangeListener=new E}getStartPointListener(){return this.startPointListener.asObservable()}getEndPointListener(){return this.endPointListener.asObservable()}getSelectedPlaceListener(){return this.selectedPlaceListener.asObservable()}getAccessibleOnlyToggleListener(){return this.accessibleOnlyToggleListener.asObservable()}getAmenityToggleListener(){return this.amenityToggleListener.asObservable()}getFloorChangeListener(){return this.floorChangeListener.asObservable()}onSetEndPoi(t){this.selectedEndPoi=t,this.endPointListener.next(t)}onAccessibleRouteToggle(){this.stateService.state.accessibleRoute=!this.stateService.state.accessibleRoute,this.accessibleOnlyToggleListener.next()}onAmenityToggle(t){this.activeAmenitiesToggle=this.activeAmenitiesToggle[0]===t.amenities[0]?[""]:t.amenities,this.amenityToggleListener.next(this.activeAmenitiesToggle)}get sortedPOIs(){return this.currentUser=this.authService.getCurrentUser(),this.config=this.authService.getCurrentUserConfig(),this.currentUserData=this.authService.getCurrentUserData(),this.selectedPlace=this.currentUserData.defaultPlace,this.features=this.currentUserData.features,this.filteredFeatures=[...this.currentUserData.features.features],this.amenities=this.currentUserData.amenities,this.onlyAccessible=!!this.config.accessible_only&&this.config.accessible_only,this.filteredFeatures.filter(t=>"poi"===t.properties.usecase).sort((t,e)=>t.properties.title>e.properties.title?-1:1).sort((t,e)=>t.properties.level>e.properties.level?1:-1).map(t=>{const e=Object(Yy.isPointWithinRadius)({lat:t.geometry.coordinates[1],lng:t.geometry.coordinates[0]},{lat:this.selectedPlace.location.lat,lng:this.selectedPlace.location.lng},1e4);return Object.assign(Object.assign({},t),{icon:this.amenities.filter(e=>e.id===t.properties.amenity)[0]?this.amenities.filter(e=>e.id===t.properties.amenity)[0].icon:"",category:this.amenities.filter(e=>e.id===t.properties.amenity)[0]?this.amenities.filter(e=>e.id===t.properties.amenity)[0].title:"",search_query:t.properties.title+" "+t.properties.level,coordinates:t.geometry.coordinates,isInside:e})}).filter(t=>t.isInside)}}return t.\u0275fac=function(e){return new(e||t)(ur(Lv),ur(Am))},t.\u0275prov=ht({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Dv(t){return(Dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Rv(t,e,n[e])})}return t}function Fv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Bv={},jv={};try{"undefined"!=typeof window&&(Bv=window),"undefined"!=typeof document&&(jv=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(iL){}var Vv=(Bv.navigator||{}).userAgent,Uv=void 0===Vv?"":Vv,$v=Bv,qv=jv,Gv=!!qv.documentElement&&!!qv.head&&"function"==typeof qv.addEventListener&&"function"==typeof qv.createElement,Hv=(~Uv.indexOf("MSIE")||Uv.indexOf("Trident/"),[1,2,3,4,5,6,7,8,9,10]),Zv=Hv.concat([11,12,13,14,15,16,17,18,19,20]),Wv={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Xv=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Wv.GROUP,Wv.SWAP_OPACITY,Wv.PRIMARY,Wv.SECONDARY].concat(Hv.map(function(t){return"".concat(t,"x")})).concat(Zv.map(function(t){return"w-".concat(t)})),$v.FontAwesomeConfig||{});qv&&"function"==typeof qv.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(t){var e=Fv(t,2),n=e[1],r=function(t){return""===t||"false"!==t&&("true"===t||t)}(function(t){var e=qv.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}(e[0]));null!=r&&(Xv[n]=r)});var Yv=zv({},{familyPrefix:"fa",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Xv);Yv.autoReplaceSvg||(Yv.observeMutations=!1);var Kv=zv({},Yv);$v.FontAwesomeConfig=Kv;var Jv=$v||{};Jv.___FONT_AWESOME___||(Jv.___FONT_AWESOME___={}),Jv.___FONT_AWESOME___.styles||(Jv.___FONT_AWESOME___.styles={}),Jv.___FONT_AWESOME___.hooks||(Jv.___FONT_AWESOME___.hooks={}),Jv.___FONT_AWESOME___.shims||(Jv.___FONT_AWESOME___.shims=[]);var Qv=Jv.___FONT_AWESOME___,tb=[];Gv&&((qv.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(qv.readyState)||qv.addEventListener("DOMContentLoaded",function t(){qv.removeEventListener("DOMContentLoaded",t),tb.map(function(t){return t()})}));var eb,nb=function(){},rb="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,ib="undefined"==typeof setImmediate?setTimeout:setImmediate,ob=[];function sb(){for(var t=0;t<ob.length;t++)ob[t][0](ob[t][1]);ob=[],eb=!1}function ab(t,e){ob.push([t,e]),eb||(eb=!0,ib(sb,0))}function lb(t){var e=t.owner,n=e._state,r=e._data,i=t[n],o=t.then;if("function"==typeof i){n="fulfilled";try{r=i(r)}catch(iL){pb(o,iL)}}ub(o,r)||("fulfilled"===n&&cb(o,r),"rejected"===n&&pb(o,r))}function ub(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"===Dv(e))){var r=e.then;if("function"==typeof r)return r.call(e,function(r){n||(n=!0,e===r?hb(t,r):cb(t,r))},function(e){n||(n=!0,pb(t,e))}),!0}}catch(iL){return n||pb(t,iL),!0}return!1}function cb(t,e){t!==e&&ub(t,e)||hb(t,e)}function hb(t,e){"pending"===t._state&&(t._state="settled",t._data=e,ab(fb,t))}function pb(t,e){"pending"===t._state&&(t._state="settled",t._data=e,ab(_b,t))}function db(t){t._then=t._then.forEach(lb)}function fb(t){t._state="fulfilled",db(t)}function _b(t){t._state="rejected",db(t),!t._handled&&rb&&global.process.emit("unhandledRejection",t._data,t)}function mb(t){global.process.emit("rejectionHandled",t)}function gb(t){if("function"!=typeof t)throw new TypeError("Promise resolver "+t+" is not a function");if(this instanceof gb==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(t,e){function n(t){pb(e,t)}try{t(function(t){cb(e,t)},n)}catch(iL){n(iL)}}(t,this)}gb.prototype={constructor:gb,_state:"pending",_then:null,_data:void 0,_handled:!1,then:function(t,e){var n={owner:this,then:new this.constructor(nb),fulfilled:t,rejected:e};return!e&&!t||this._handled||(this._handled=!0,"rejected"===this._state&&rb&&ab(mb,this)),"fulfilled"===this._state||"rejected"===this._state?ab(lb,n):this._then.push(n),n.then},catch:function(t){return this.then(null,t)}},gb.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new gb(function(e,n){var r=[],i=0;function o(t){return i++,function(n){r[t]=n,--i||e(r)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"==typeof s.then?s.then(o(a),n):r[a]=s;i||e(r)})},gb.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new gb(function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)})},gb.resolve=function(t){return t&&"object"===Dv(t)&&t.constructor===gb?t:new gb(function(e){e(t)})},gb.reject=function(t){return new gb(function(e,n){n(t)})};var yb={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function vb(){for(var t=12,e="";t-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function bb(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xb(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n],";")},"")}function wb(t){return t.size!==yb.size||t.x!==yb.x||t.y!==yb.y||t.rotate!==yb.rotate||t.flipX||t.flipY}function Eb(t){var e=t.transform,n=t.iconWidth,r={transform:"translate(".concat(t.containerWidth/2," 256)")},i="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),s="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(i," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(n/2*-1," -256)")}}}var Sb={x:0,y:0,width:"100%",height:"100%"};function Cb(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Ib(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,o=t.iconName,s=t.transform,a=t.symbol,l=t.title,u=t.maskId,c=t.titleId,h=t.extra,p=t.watchable,d=void 0!==p&&p,f=r.found?r:n,_=f.width,m=f.height,g="fak"===i,y=g?"":"fa-w-".concat(Math.ceil(_/m*16)),v=[Kv.replacementClass,o?"".concat(Kv.familyPrefix,"-").concat(o):"",y].filter(function(t){return-1===h.classes.indexOf(t)}).filter(function(t){return""!==t||!!t}).concat(h.classes).join(" "),b={children:[],attributes:zv({},h.attributes,{"data-prefix":i,"data-icon":o,class:v,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(_," ").concat(m)})},x=g&&!~h.classes.indexOf("fa-fw")?{width:"".concat(_/m*16*.0625,"em")}:{};d&&(b.attributes["data-fa-i2svg"]=""),l&&b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(c||vb())},children:[l]});var w=zv({},b,{prefix:i,iconName:o,main:n,mask:r,maskId:u,transform:s,symbol:a,styles:zv({},x,h.styles)}),E=r.found&&n.found?function(t){var e,n=t.children,r=t.attributes,i=t.main,o=t.mask,s=t.maskId,a=i.icon,l=o.icon,u=Eb({transform:t.transform,containerWidth:o.width,iconWidth:i.width}),c={tag:"rect",attributes:zv({},Sb,{fill:"white"})},h=a.children?{children:a.children.map(Cb)}:{},p={tag:"g",attributes:zv({},u.inner),children:[Cb(zv({tag:a.tag,attributes:zv({},a.attributes,u.path)},h))]},d={tag:"g",attributes:zv({},u.outer),children:[p]},f="mask-".concat(s||vb()),_="clip-".concat(s||vb()),m={tag:"mask",attributes:zv({},Sb,{id:f,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[c,d]},g={tag:"defs",children:[{tag:"clipPath",attributes:{id:_},children:(e=l,"g"===e.tag?e.children:[e])},m]};return n.push(g,{tag:"rect",attributes:zv({fill:"currentColor","clip-path":"url(#".concat(_,")"),mask:"url(#".concat(f,")")},Sb)}),{children:n,attributes:r}}(w):function(t){var e=t.children,n=t.attributes,r=t.main,i=t.transform,o=xb(t.styles);if(o.length>0&&(n.style=o),wb(i)){var s=Eb({transform:i,containerWidth:r.width,iconWidth:r.width});e.push({tag:"g",attributes:zv({},s.outer),children:[{tag:"g",attributes:zv({},s.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:zv({},r.icon.attributes,s.path)}]}]})}else e.push(r.icon);return{children:e,attributes:n}}(w),S=E.attributes;return w.children=E.children,w.attributes=S,a?function(t){var e=t.iconName,n=t.children,r=t.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:zv({},t.attributes,{id:!0===r?"".concat(t.prefix,"-").concat(Kv.familyPrefix,"-").concat(e):r}),children:n}]}]}(w):function(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,o=t.styles,s=t.transform;if(wb(s)&&n.found&&!r.found){var a={x:n.width/n.height/2,y:.5};i.style=xb(zv({},o,{"transform-origin":"".concat(a.x+s.x/16,"em ").concat(a.y+s.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}(w)}var kb=function(t,e,n,r){var i,o,s,a=Object.keys(t),l=a.length,u=void 0!==r?function(t,e){return function(n,r,i,o){return t.call(e,n,r,i,o)}}(e,r):e;for(void 0===n?(i=1,s=t[a[0]]):(i=0,s=n);i<l;i++)s=u(s,t[o=a[i]],o,t);return s};function Tb(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,o=Object.keys(e).reduce(function(t,n){var r=e[n];return r.icon?t[r.iconName]=r.icon:t[n]=r,t},{});"function"!=typeof Qv.hooks.addPack||i?Qv.styles[t]=zv({},Qv.styles[t]||{},o):Qv.hooks.addPack(t,o),"fas"===t&&Tb("fa",e)}var Pb=Qv.styles,Ab=Qv.shims,Ob=function(){var t=function(t){return kb(Pb,function(e,n,r){return e[r]=kb(n,t,{}),e},{})};t(function(t,e,n){return e[3]&&(t[e[3]]=n),t}),t(function(t,e,n){var r=e[2];return t[n]=n,r.forEach(function(e){t[e]=n}),t});var e="far"in Pb;kb(Ab,function(t,n){var r=n[1];return"far"!==r||e||(r="fas"),t[n[0]]={prefix:r,iconName:n[2]},t},{})};function Mb(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}function Lb(t){var e=t.tag,n=t.attributes,r=void 0===n?{}:n,i=t.children,o=void 0===i?[]:i;return"string"==typeof t?bb(t):"<".concat(e," ").concat(function(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(bb(t[n]),'" ')},"").trim()}(r),">").concat(o.map(Lb).join(""),"</").concat(e,">")}function Nb(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}Ob(),(Nb.prototype=Object.create(Error.prototype)).constructor=Nb;var Db={fill:"currentColor"},Rb={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},zb=(zv({},Db,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),zv({},Rb,{attributeName:"opacity"}));function Fb(t){var e=t[0],n=t[1],r=Fv(t.slice(4),1)[0];return{found:!0,width:e,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Kv.familyPrefix,"-").concat(Wv.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Kv.familyPrefix,"-").concat(Wv.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Kv.familyPrefix,"-").concat(Wv.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}function Bb(){Kv.autoAddCss&&!qb&&(function(t){if(t&&Gv){var e=qv.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=qv.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],s=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(r=o)}qv.head.insertBefore(e,r)}}(function(){var t="svg-inline--fa",e=Kv.familyPrefix,n=Kv.replacementClass,r='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if("fa"!==e||n!==t){var i=new RegExp("\\.".concat("fa","\\-"),"g"),o=new RegExp("\\--".concat("fa","\\-"),"g"),s=new RegExp("\\.".concat(t),"g");r=r.replace(i,".".concat(e,"-")).replace(o,"--".concat(e,"-")).replace(s,".".concat(n))}return r}()),qb=!0)}function jb(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(t){return Lb(t)})}}),Object.defineProperty(t,"node",{get:function(){if(Gv){var e=qv.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function Vb(t){var e=t.prefix,n=void 0===e?"fa":e,r=t.iconName;if(r)return Mb($b.definitions,n,r)||Mb(Qv.styles,n,r)}zv({},Db,{cx:"256",cy:"364",r:"28"}),zv({},Rb,{attributeName:"r",values:"28;14;28;28;14;28;"}),zv({},zb,{values:"1;0;1;1;0;1;"}),zv({},Db,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),zv({},zb,{values:"1;0;0;0;0;1;"}),zv({},Db,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),zv({},zb,{values:"0;0;1;1;0;0;"});var Ub,$b=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.definitions={}}var e;return(e=[{key:"add",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(function(e){t.definitions[e]=zv({},t.definitions[e]||{},i[e]),Tb(e,i[e]),Ob()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var n=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(n).map(function(e){var r=n[e],i=r.prefix,o=r.iconName,s=r.icon;t[i]||(t[i]={}),t[i][o]=s}),t}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()),qb=!1,Gb=(Ub=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.transform,r=void 0===n?yb:n,i=e.symbol,o=void 0!==i&&i,s=e.mask,a=void 0===s?null:s,l=e.maskId,u=void 0===l?null:l,c=e.title,h=void 0===c?null:c,p=e.titleId,d=void 0===p?null:p,f=e.classes,_=void 0===f?[]:f,m=e.attributes,g=void 0===m?{}:m,y=e.styles,v=void 0===y?{}:y;if(t){var b=t.prefix,x=t.iconName,w=t.icon;return jb(zv({type:"icon"},t),function(){return Bb(),Kv.autoA11y&&(h?g["aria-labelledby"]="".concat(Kv.replacementClass,"-title-").concat(d||vb()):(g["aria-hidden"]="true",g.focusable="false")),Ib({icons:{main:Fb(w),mask:a?Fb(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:x,transform:zv({},yb,r),symbol:o,title:h,maskId:u,titleId:d,extra:{attributes:g,styles:v,classes:_}})})}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t||{}).icon?t:Vb(t||{}),r=e.mask;return r&&(r=(r||{}).icon?r:Vb(r||{})),Ub(n,zv({},e,{mask:r}))});const Hb=["*"];let Zb=(()=>{class t{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null,this.globalLibrary=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Wb=(()=>{class t{constructor(){this.definitions={}}addIcons(...t){for(const e of t)e.prefix in this.definitions||(this.definitions[e.prefix]={}),this.definitions[e.prefix][e.iconName]=e}addIconPacks(...t){for(const e of t){const t=Object.keys(e).map(t=>e[t]);this.addIcons(...t)}}getIconDefinition(t,e){return t in this.definitions&&e in this.definitions[t]?this.definitions[t][e]:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Xb=t=>{const e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-inverse":t.inverse,"fa-layers-counter":t.counter,"fa-flip-horizontal":"horizontal"===t.flip||"both"===t.flip,"fa-flip-vertical":"vertical"===t.flip||"both"===t.flip,[`fa-${t.size}`]:null!==t.size,[`fa-rotate-${t.rotate}`]:null!==t.rotate,[`fa-pull-${t.pull}`]:null!==t.pull,[`fa-stack-${t.stackItemSize}`]:null!=t.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let Yb=(()=>{class t{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[ae]}),t})(),Kb=(()=>{class t{constructor(t,e){this.renderer=t,this.elementRef=e}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return t.\u0275fac=function(e){return new(e||t)(Ts(Qa),Ts(Ya))},t.\u0275cmp=$t({type:t,selectors:[["fa-stack"]],inputs:{size:"size"},features:[ae],ngContentSelectors:Hb,decls:1,vars:0,template:function(t,e){1&t&&(Zs(),Ws(0))},encapsulation:2}),t})(),Jb=(()=>{class t{constructor(t,e,n,r,i){this.sanitizer=t,this.config=e,this.iconLibrary=n,this.stackItem=r,this.classes=[],null!=i&&null==r&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let e=null;if(e=null==this.icon?this.config.fallbackIcon:this.icon,t){const t=this.findIconDefinition(e);if(null!=t){const e=this.buildParams();this.renderIcon(t,e)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const e=((t,e)=>{return void 0!==(n=t).prefix&&void 0!==n.iconName?t:Array.isArray(t)&&2===t.length?{prefix:t[0],iconName:t[1]}:"string"==typeof t?{prefix:e,iconName:t}:void 0;var n})(t,this.config.defaultPrefix);if("icon"in e)return e;const n=this.iconLibrary.getIconDefinition(e.prefix,e.iconName);if(null!=n)return n;const r=Vb(e);if(null!=r){const t="Global icon library is deprecated. Consult https://github.com/FortAwesome/angular-fontawesome/blob/master/UPGRADING.md for the migration instructions.";if("unset"===this.config.globalLibrary)console.error("FontAwesome: "+t);else if(!this.config.globalLibrary)throw new Error(t);return r}return(t=>{throw new Error(`Could not find icon with iconName=${t.iconName} and prefix=${t.prefix} in the icon library.`)})(e),null}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},e="string"==typeof this.transform?function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t?t.toLowerCase().split(" ").reduce(function(t,e){var n=e.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return t.flipX=!0,t;if(r&&"v"===i)return t.flipY=!0,t;if(i=parseFloat(i),isNaN(i))return t;switch(r){case"grow":t.size=t.size+i;break;case"shrink":t.size=t.size-i;break;case"left":t.x=t.x-i;break;case"right":t.x=t.x+i;break;case"up":t.y=t.y-i;break;case"down":t.y=t.y+i;break;case"rotate":t.rotate=t.rotate+i}return t},e):e}(this.transform):this.transform;return{title:this.title,transform:e,classes:[...Xb(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,e){const n=Gb(t,e);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(n.html.join("\n"))}}return t.\u0275fac=function(e){return new(e||t)(Ts(jh),Ts(Zb),Ts(Wb),Ts(Yb,8),Ts(Kb,8))},t.\u0275cmp=$t({type:t,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,e){2&t&&(ka("innerHTML",e.renderedIconHTML,Qr),Ss("title",e.title))},inputs:{classes:"classes",icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",transform:"transform",a11yRole:"a11yRole"},features:[ae],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),Qb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})();function tx(t,e){return new y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const l=R(t[a]);let u=!1;n.add(l.subscribe({next:t=>{u||(u=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&u||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class ex{}const nx=new Hn("NgValueAccessor"),rx={provide:nx,useExisting:it(()=>ox),multi:!0},ix=new Hn("CompositionEventMode");let ox=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Tc()?Tc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Ts(Qa),Ts(Ya),Ts(ix,8))},t.\u0275dir=Xt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&js("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[$a([rx])]}),t})();function sx(t){return null==t||0===t.length}function ax(t){return null!=t&&"number"==typeof t.length}const lx=new Hn("NgValidators"),ux=new Hn("NgAsyncValidators"),cx=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class hx{static min(t){return function(t){return e=>{if(sx(e.value)||sx(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(sx(e.value)||sx(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return sx(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return sx(t.value)||cx.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>sx(e.value)||!ax(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>ax(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return px;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(sx(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return yx(t)}static composeAsync(t){return bx(t)}}function px(t){return null}function dx(t){return null!=t}function fx(t){const e=Fs(t)?R(t):t;return Bs(e),e}function _x(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function mx(t,e){return e.map(e=>e(t))}function gx(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function yx(t){if(!t)return null;const e=t.filter(dx);return 0==e.length?null:function(t){return _x(mx(t,e))}}function vx(t){return null!=t?yx(gx(t)):null}function bx(t){if(!t)return null;const e=t.filter(dx);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(l(e))return tx(e,null);if(u(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return tx(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return tx(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(I(t=>e(...t)))}return tx(t,null)}(mx(t,e).map(fx)).pipe(I(_x))}}function xx(t){return null!=t?bx(gx(t)):null}function wx(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Ex(t){return t._rawValidators}function Sx(t){return t._rawAsyncValidators}let Cx=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=vx(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=xx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t}),t})(),Ix=(()=>{class t extends Cx{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return kx(e||t)},t.\u0275dir=Xt({type:t,features:[hs]}),t})();const kx=Un(Ix);class Tx extends Cx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Px{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Ax=(()=>{class t extends Px{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ts(Tx,2))},t.\u0275dir=Xt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&ua("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[hs]}),t})(),Ox=(()=>{class t extends Px{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ix,10))},t.\u0275dir=Xt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&ua("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[hs]}),t})();function Mx(t,e){return[...e.path,t]}function Lx(t,e){Rx(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Fx(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Fx(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Nx(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),zx(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Dx(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Rx(t,e,n){const r=Ex(t);null!==e.validator?t.setValidators(wx(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Sx(t);if(null!==e.asyncValidator?t.setAsyncValidators(wx(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Dx(e._rawValidators,n),Dx(e._rawAsyncValidators,n)}}function zx(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Ex(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=Sx(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};Dx(e._rawValidators,t),Dx(e._rawAsyncValidators,t)}return r}function Fx(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Bx(t,e){Rx(t,e,!1)}function jx(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}function Vx(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Ux(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===ox?n=t:Object.getPrototypeOf(t.constructor)===ex?r=t:i=t}),i||r||n||null}function $x(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function qx(t){return(Wx(t)?t.validators:t)||null}function Gx(t){return Array.isArray(t)?vx(t):t||null}function Hx(t,e){return(Wx(e)?e.asyncValidators:t)||null}function Zx(t){return Array.isArray(t)?xx(t):t||null}function Wx(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Xx{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Gx(this._rawValidators),this._composedAsyncValidatorFn=Zx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Gx(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Zx(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING",this._hasOwnPendingAsyncValidator=!0;const e=fx(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Kx?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Jx&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new uu,this.statusChanges=new uu}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Wx(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Yx extends Xx{constructor(t=null,e,n){super(qx(e),Hx(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){$x(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){$x(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Kx extends Xx{constructor(t,e,n){super(qx(e),Hx(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Yx?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Jx extends Xx{constructor(t,e,n){super(qx(e),Hx(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Yx?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Qx={provide:Ix,useExisting:it(()=>ew)},tw=(()=>Promise.resolve(null))();let ew=(()=>{class t extends Ix{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new uu,this.form=new Kx({},vx(t),xx(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){tw.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Lx(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){tw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),$x(this._directives,t)})}addFormGroup(t){tw.then(()=>{const e=this._findContainer(t.path),n=new Kx({});Bx(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){tw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){tw.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Vx(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Ts(lx,10),Ts(ux,10))},t.\u0275dir=Xt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&js("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[$a([Qx]),hs]}),t})();const nw={provide:Tx,useExisting:it(()=>iw)},rw=(()=>Promise.resolve(null))();let iw=(()=>{class t extends Tx{constructor(t,e,n,r){super(),this.control=new Yx,this._registered=!1,this.update=new uu,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Ux(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),jx(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Mx(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Lx(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){rw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;rw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ix,9),Ts(lx,10),Ts(ux,10),Ts(nx,10))},t.\u0275dir=Xt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[$a([nw]),hs,ae]}),t})(),ow=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const sw={provide:nx,useExisting:it(()=>aw),multi:!0};let aw=(()=>{class t extends ex{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ts(Qa),Ts(Ya))},t.\u0275dir=Xt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&js("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[$a([sw]),hs]}),t})(),lw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})();const uw=new Hn("NgModelWithFormControlWarning"),cw={provide:Ix,useExisting:it(()=>hw)};let hw=(()=>{class t extends Ix{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new uu,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zx(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Lx(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Nx(t.control||null,t,!1),$x(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Vx(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(Nx(e||null,t),n instanceof Yx&&(Lx(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);Bx(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return zx(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Rx(this.form,this,!1),this._oldForm&&zx(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(Ts(lx,10),Ts(ux,10))},t.\u0275dir=Xt({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&js("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[$a([cw]),hs,ae]}),t})();const pw={provide:Tx,useExisting:it(()=>dw)};let dw=(()=>{class t extends Tx{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new uu,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Ux(0,r)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),jx(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Mx(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ix,13),Ts(lx,10),Ts(ux,10),Ts(nx,10),Ts(uw,8))},t.\u0275dir=Xt({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[$a([pw]),hs,ae]}),t._ngModelWarningSentOnce=!1,t})(),fw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[lw]]}),t})(),_w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[fw]}),t})(),mw=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:uw,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[fw]}),t})(),gw=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new Kx(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new Yx(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Jx(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Yx||t instanceof Kx||t instanceof Jx?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:mw}),t})();function yw(t,e=Fg){return n=>n.lift(new vw(t,e))}class vw{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new bw(t,this.dueTime,this.scheduler))}}class bw extends f{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(xw,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function xw(t){t.debouncedNext()}const ww=["content"],Ew=["scroll"],Sw=["padding"],Cw=function(t){return{searchTerm:t}};function Iw(t,e){if(1&t&&(Os(0,"div",6),Rs(1,7),Ms()),2&t){const t=Gs();Xi(1),Ps("ngTemplateOutlet",t.headerTemplate)("ngTemplateOutletContext",Yl(2,Cw,t.filterValue))}}function kw(t,e){if(1&t&&(Os(0,"div",8),Rs(1,7),Ms()),2&t){const t=Gs();Xi(1),Ps("ngTemplateOutlet",t.footerTemplate)("ngTemplateOutletContext",Yl(2,Cw,t.filterValue))}}const Tw=["*"],Pw=["searchInput"];function Aw(t,e){if(1&t){const t=zs();Os(0,"span",15),js("click",function(){Me(t);const e=Gs().$implicit;return Gs(2).unselect(e)}),Ea(1,"\xd7"),Ms(),Ls(2,"span",16)}if(2&t){const t=Gs().$implicit,e=Gs(2);Xi(2),Ps("ngItemLabel",t.label)("escape",e.escapeHTML)}}function Ow(t,e){}const Mw=function(t,e,n){return{item:t,clear:e,label:n}};function Lw(t,e){if(1&t&&(Os(0,"div",12),Is(1,Aw,3,2,"ng-template",null,13,Tu),Is(3,Ow,0,0,"ng-template",14),Ms()),2&t){const t=e.$implicit,n=ks(2),r=Gs(2);ua("ng-value-disabled",t.disabled),Xi(3),Ps("ngTemplateOutlet",r.labelTemplate||n)("ngTemplateOutletContext",Jl(4,Mw,t.value,r.clearItem,t.label))}}function Nw(t,e){if(1&t&&(Ns(0),Is(1,Lw,4,8,"div",11),Ds()),2&t){const t=Gs();Xi(1),Ps("ngForOf",t.selectedItems)("ngForTrackBy",t.trackByOption)}}function Dw(t,e){}const Rw=function(t,e){return{items:t,clear:e}};function zw(t,e){if(1&t&&Is(0,Dw,0,0,"ng-template",14),2&t){const t=Gs();Ps("ngTemplateOutlet",t.multiLabelTemplate)("ngTemplateOutletContext",Kl(2,Rw,t.selectedValues,t.clearItem))}}function Fw(t,e){1&t&&Ls(0,"div",19)}function Bw(t,e){}function jw(t,e){if(1&t&&(Ns(0),Is(1,Fw,1,0,"ng-template",null,17,Tu),Is(3,Bw,0,0,"ng-template",18),Ds()),2&t){const t=ks(2),e=Gs();Xi(3),Ps("ngTemplateOutlet",e.loadingSpinnerTemplate||t)}}function Vw(t,e){1&t&&(Os(0,"span",20),Os(1,"span",21),Ea(2,"\xd7"),Ms(),Ms()),2&t&&Xs("title",Gs().clearAllText)}function Uw(t,e){if(1&t&&Ls(0,"span",27),2&t){const t=Gs().$implicit,e=Gs(2);Ps("ngItemLabel",t.label)("escape",e.escapeHTML)}}function $w(t,e){}const qw=function(t,e,n,r){return{item:t,item$:e,index:n,searchTerm:r}};function Gw(t,e){if(1&t){const t=zs();Os(0,"div",25),js("click",function(){Me(t);const n=e.$implicit;return Gs(2).toggleItem(n)})("mouseover",function(){Me(t);const n=e.$implicit;return Gs(2).onItemHover(n)}),Is(1,Uw,1,2,"ng-template",null,26,Tu),Is(3,$w,0,0,"ng-template",14),Ms()}if(2&t){const t=e.$implicit,u=ks(2),c=Gs(2);ua("ng-option-disabled",t.disabled)("ng-option-selected",t.selected)("ng-optgroup",t.children)("ng-option",!t.children)("ng-option-child",!!t.parent)("ng-option-marked",t===c.itemsList.markedItem),Ss("role",t.children?"group":"option")("aria-selected",t.selected)("id",null==t?null:t.htmlId),Xi(3),Ps("ngTemplateOutlet",t.children?c.optgroupTemplate||u:c.optionTemplate||u)("ngTemplateOutletContext",(n=17,r=qw,i=t.value,o=t,s=t.index,a=c.searchTerm,function(t,e,n,r,i,o,s,a,l){const u=e+n;return function(t,e,n,r,i,o){const s=Es(t,e,n,r);return Es(t,e+2,i,o)||s}(t,u,i,o,s,a)?xs(t,u+4,l?r.call(l,i,o,s,a):r(i,o,s,a)):Ql(t,u+4)}(Ae(),je(),n,r,i,o,s,a,l)))}var n,r,i,o,s,a,l}function Hw(t,e){if(1&t&&(Os(0,"span"),Os(1,"span",30),Ea(2),Ms(),Ea(3),Ms()),2&t){const t=Gs(3);Xi(2),Sa(t.addTagText),Xi(1),Ca('"',t.searchTerm,'"')}}function Zw(t,e){}function Ww(t,e){if(1&t){const t=zs();Os(0,"div",28),js("mouseover",function(){return Me(t),Gs(2).itemsList.unmarkItem()})("click",function(){return Me(t),Gs(2).selectTag()}),Is(1,Hw,4,2,"ng-template",null,29,Tu),Is(3,Zw,0,0,"ng-template",14),Ms()}if(2&t){const t=ks(2),e=Gs(2);ua("ng-option-marked",!e.itemsList.markedItem),Xi(3),Ps("ngTemplateOutlet",e.tagTemplate||t)("ngTemplateOutletContext",Yl(4,Cw,e.searchTerm))}}function Xw(t,e){if(1&t&&(Os(0,"div",32),Ea(1),Ms()),2&t){const t=Gs(3);Xi(1),Sa(t.notFoundText)}}function Yw(t,e){}function Kw(t,e){if(1&t&&(Ns(0),Is(1,Xw,2,1,"ng-template",null,31,Tu),Is(3,Yw,0,0,"ng-template",14),Ds()),2&t){const t=ks(2),e=Gs(2);Xi(3),Ps("ngTemplateOutlet",e.notFoundTemplate||t)("ngTemplateOutletContext",Yl(2,Cw,e.searchTerm))}}function Jw(t,e){if(1&t&&(Os(0,"div",32),Ea(1),Ms()),2&t){const t=Gs(3);Xi(1),Sa(t.typeToSearchText)}}function Qw(t,e){}function tE(t,e){if(1&t&&(Ns(0),Is(1,Jw,2,1,"ng-template",null,33,Tu),Is(3,Qw,0,0,"ng-template",18),Ds()),2&t){const t=ks(2),e=Gs(2);Xi(3),Ps("ngTemplateOutlet",e.typeToSearchTemplate||t)}}function eE(t,e){if(1&t&&(Os(0,"div",32),Ea(1),Ms()),2&t){const t=Gs(3);Xi(1),Sa(t.loadingText)}}function nE(t,e){}function rE(t,e){if(1&t&&(Ns(0),Is(1,eE,2,1,"ng-template",null,34,Tu),Is(3,nE,0,0,"ng-template",14),Ds()),2&t){const t=ks(2),e=Gs(2);Xi(3),Ps("ngTemplateOutlet",e.loadingTextTemplate||t)("ngTemplateOutletContext",Yl(2,Cw,e.searchTerm))}}function iE(t,e){if(1&t){const t=zs();Os(0,"ng-dropdown-panel",22),js("update",function(e){return Me(t),Gs().viewPortItems=e})("scroll",function(e){return Me(t),Gs().scroll.emit(e)})("scrollToEnd",function(e){return Me(t),Gs().scrollToEnd.emit(e)})("outsideClick",function(){return Me(t),Gs().close()}),Ns(1),Is(2,Gw,4,22,"div",23),Is(3,Ww,4,6,"div",24),Ds(),Is(4,Kw,4,4,"ng-container",3),Is(5,tE,4,1,"ng-container",3),Is(6,rE,4,4,"ng-container",3),Ms()}if(2&t){const t=Gs();ua("ng-select-multiple",t.multiple),Ps("virtualScroll",t.virtualScroll)("bufferAmount",t.bufferAmount)("appendTo",t.appendTo)("position",t.dropdownPosition)("headerTemplate",t.headerTemplate)("footerTemplate",t.footerTemplate)("filterValue",t.searchTerm)("items",t.itemsList.filteredItems)("markedItem",t.itemsList.markedItem)("ngClass",t.appendTo?t.classes:null)("id",t.dropdownId),Xi(2),Ps("ngForOf",t.viewPortItems)("ngForTrackBy",t.trackByOption),Xi(1),Ps("ngIf",t.showAddTag),Xi(1),Ps("ngIf",t.showNoItemsFound()),Xi(1),Ps("ngIf",t.showTypeToSearch()),Xi(1),Ps("ngIf",t.loading&&0===t.itemsList.filteredItems.length)}}const oE=/[&<>"']/g,sE=RegExp(oE.source),aE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function lE(t){return null!=t}function uE(t){return"object"==typeof t&&lE(t)}function cE(t){return t instanceof Function}let hE=(()=>{class t{constructor(t){this.element=t,this.escape=!0}ngOnChanges(t){var e;this.element.nativeElement.innerHTML=this.escape?(e=this.ngItemLabel)&&sE.test(e)?e.replace(oE,t=>aE[t]):e:this.ngItemLabel}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya))},t.\u0275dir=Xt({type:t,selectors:[["","ngItemLabel",""]],inputs:{escape:"escape",ngItemLabel:"ngItemLabel"},features:[ae]}),t})(),pE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-option-tmp",""]]}),t})(),dE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-optgroup-tmp",""]]}),t})(),fE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-label-tmp",""]]}),t})(),_E=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-multi-label-tmp",""]]}),t})(),mE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-header-tmp",""]]}),t})(),gE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-footer-tmp",""]]}),t})(),yE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-notfound-tmp",""]]}),t})(),vE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-typetosearch-tmp",""]]}),t})(),bE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-loadingtext-tmp",""]]}),t})(),xE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-tag-tmp",""]]}),t})(),wE=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["","ng-loadingspinner-tmp",""]]}),t})(),EE=(()=>{class t{warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})();function SE(){return"axxxxxxxxxxx".replace(/[x]/g,function(t){return(16*Math.random()|0).toString(16)})}const CE={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};function IE(t){return t.replace(/[^\u0000-\u007E]/g,t=>CE[t]||t)}class kE{constructor(t,e){this._ngSelect=t,this._selectionModel=e,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let t=this.selectedItems.length-1;for(;t>=0;t--){let e=this.selectedItems[t];if(!e.disabled)return e}return null}setItems(t){this._items=t.map((t,e)=>this.mapItem(t,e)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(t){if(t.selected||this.maxItemsSelected)return;const e=this._ngSelect.multiple;e||this.clearSelected(),this._selectionModel.select(t,e,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(t)}unselect(t){t.selected&&(this._selectionModel.unselect(t,this._ngSelect.multiple),this._ngSelect.hideSelected&&lE(t.index)&&this._ngSelect.multiple&&this._showSelected(t))}findItem(t){let e;return e=this._ngSelect.compareWith?e=>this._ngSelect.compareWith(e.value,t):this._ngSelect.bindValue?e=>!e.children&&this.resolveNested(e.value,this._ngSelect.bindValue)===t:e=>e.value===t||!e.children&&e.label&&e.label===this.resolveNested(t,this._ngSelect.bindLabel),this._items.find(t=>e(t))}addItem(t){const e=this.mapItem(t,this._items.length);return this._items.push(e),this._filteredItems.push(e),e}clearSelected(t=!1){this._selectionModel.clear(t),this._items.forEach(e=>{e.selected=t&&e.selected&&e.disabled,e.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(t){return t=IE(t).toLocaleLowerCase(),this.filteredItems.find(e=>IE(e.label).toLocaleLowerCase().substr(0,t.length)===t)}filter(t){if(!t)return void this.resetFilteredItems();this._filteredItems=[],t=this._ngSelect.searchFn?t:IE(t).toLocaleLowerCase();const e=this._ngSelect.searchFn||this._defaultSearchFn,n=this._ngSelect.hideSelected;for(const r of Array.from(this._groups.keys())){const i=[];for(const o of this._groups.get(r))n&&(o.parent&&o.parent.selected||o.selected)||e(t,this._ngSelect.searchFn?o.value:o)&&i.push(o);if(i.length>0){const[t]=i.slice(-1);if(t.parent){const e=this._items.find(e=>e===t.parent);this._filteredItems.push(e)}this._filteredItems.push(...i)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._filteredItems=this._ngSelect.hideSelected&&this.selectedItems.length>0?this._items.filter(t=>!t.selected):this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(t){this._markedIndex=this._filteredItems.indexOf(t)}markSelectedOrDefault(t){if(0===this._filteredItems.length)return;const e=this._getLastMarkedIndex();this._markedIndex=e>-1?e:t?this.filteredItems.findIndex(t=>!t.disabled):-1}resolveNested(t,e){if(!uE(t))return t;if(-1===e.indexOf("."))return t[e];{let n=e.split("."),r=t;for(let t=0,e=n.length;t<e;++t){if(null==r)return null;r=r[n[t]]}return r}}mapItem(t,e){const n=lE(t.$ngOptionLabel)?t.$ngOptionLabel:this.resolveNested(t,this._ngSelect.bindLabel),r=lE(t.$ngOptionValue)?t.$ngOptionValue:t;return{index:e,label:lE(n)?n.toString():"",value:r,disabled:t.disabled,htmlId:`${this._ngSelect.dropdownId}-${e}`}}mapSelectedItems(){const t=this._ngSelect.multiple;for(const e of this.selectedItems){const n=this._ngSelect.bindValue?this.resolveNested(e.value,this._ngSelect.bindValue):e.value,r=lE(n)?this.findItem(n):null;this._selectionModel.unselect(e,t),this._selectionModel.select(r||e,t,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(t=>-1===this.selectedItems.indexOf(t)))}_showSelected(t){if(this._filteredItems.push(t),t.parent){const e=t.parent;this._filteredItems.find(t=>t===e)||this._filteredItems.push(e)}else if(t.children)for(const e of t.children)e.selected=!1,this._filteredItems.push(e);this._filteredItems=[...this._filteredItems.sort((t,e)=>t.index-e.index)]}_hideSelected(t){this._filteredItems=this._filteredItems.filter(e=>e!==t),t.parent?t.parent.children.every(t=>t.selected)&&(this._filteredItems=this._filteredItems.filter(e=>e!==t.parent)):t.children&&(this._filteredItems=this.filteredItems.filter(e=>e.parent!==t))}_defaultSearchFn(t,e){return IE(e.label).toLocaleLowerCase().indexOf(t)>-1}_getNextItemIndex(t){return t>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(t){0===this._filteredItems.length||this._filteredItems.every(t=>t.disabled)||(this._markedIndex=this._getNextItemIndex(t),this.markedItem.disabled&&this._stepToItem(t))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected)return-1;if(this._markedIndex>-1&&void 0===this.markedItem)return-1;const t=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&t<0?-1:Math.max(this.markedIndex,t)}_groupBy(t,e){const n=new Map;if(0===t.length)return n;if(Array.isArray(t[0].value[e])){for(const r of t){const t=(r.value[e]||[]).map((t,e)=>this.mapItem(t,e));n.set(r,t)}return n}const r=cE(this._ngSelect.groupBy),i=t=>{let n=r?e(t.value):t.value[e];return lE(n)?n:void 0};for(const o of t){let t=i(o);const e=n.get(t);e?e.push(o):n.set(t,[o])}return n}_flatten(t){const e=cE(this._ngSelect.groupBy),n=[];for(const r of Array.from(t.keys())){let i=n.length;if(void 0===r){const e=t.get(void 0)||[];n.push(...e.map(t=>(t.index=i++,t)));continue}const o=uE(r),s={label:o?"":String(r),children:void 0,parent:null,index:i++,disabled:!this._ngSelect.selectableGroup,htmlId:SE()},a=e?this._ngSelect.bindLabel:this._ngSelect.groupBy,l=this._ngSelect.groupValue||(()=>o?r.value:{[a]:r}),u=t.get(r).map(t=>(t.parent=s,t.children=void 0,t.index=i++,t));s.children=u,s.value=l(r,u.map(t=>t.value)),n.push(s),n.push(...u)}return n}}var TE=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Esc=27]="Esc",t[t.Space=32]="Space",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowDown=40]="ArrowDown",t[t.Backspace=8]="Backspace",t}({});let PE=(()=>{class t{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(t,e,n){const r=this._dimensions,i=r.itemHeight*e,o=Math.max(0,t)/i*e;let s=Math.min(e,Math.ceil(o)+(r.itemsPerViewport+1));const a=Math.max(0,s-r.itemsPerViewport);let l=Math.min(a,Math.floor(o)),u=r.itemHeight*Math.ceil(l)-r.itemHeight*Math.min(l,n);return u=isNaN(u)?0:u,l=isNaN(l)?-1:l,s=isNaN(s)?-1:s,l-=n,l=Math.max(0,l),s+=n,s=Math.min(e,s),{topPadding:u,scrollHeight:i,start:l,end:s}}setDimensions(t,e){const n=Math.max(1,Math.floor(e/t));this._dimensions={itemHeight:t,panelHeight:e,itemsPerViewport:n}}getScrollTo(t,e,n){const{panelHeight:r}=this.dimensions,i=t+e,o=n+r;return r>=i&&n===t?null:i>o?n+i-o:t<=n?t:null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const AE="undefined"!=typeof requestAnimationFrame?kg:Dg;let OE=(()=>{class t{constructor(t,e,n,r,i){this._renderer=t,this._zone=e,this._panelService=n,this._document=i,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new uu,this.scroll=new uu,this.scrollToEnd=new uu,this.outsideClick=new uu,this._destroy$=new E,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=r.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(t){t!==this._itemsLength&&(this._itemsLength=t,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){const{itemHeight:t,panelHeight:e}=this._panelService.dimensions,n=this.markedItem.index*t;return e>n?0:n}return 0}handleMousedown(t){"INPUT"!==t.target.tagName&&t.preventDefault()}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown()}ngOnChanges(t){if(t.items){const e=t.items;this._onItemsChange(e.currentValue,e.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(t,e=!1){if(!t)return;const n=this.items.indexOf(t);if(n<0||n>=this.itemsLength)return;let r;if(this.virtualScroll){const t=this._panelService.dimensions.itemHeight;r=this._panelService.getScrollTo(n*t,t,this._lastScrollPosition)}else{const n=this._dropdown.querySelector(`#${t.htmlId}`);r=this._panelService.getScrollTo(n.offsetTop,n.clientHeight,e?n.offsetTop:this._lastScrollPosition)}lE(r)&&(this._scrollablePanel.scrollTop=r)}scrollToTag(){const t=this._scrollablePanel;t.scrollTop=t.scrollHeight-t.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),"top"===this._currentPosition?(this._renderer.addClass(this._dropdown,"ng-select-top"),this._renderer.removeClass(this._dropdown,"ng-select-bottom"),this._renderer.addClass(this._select,"ng-select-top"),this._renderer.removeClass(this._select,"ng-select-bottom")):(this._renderer.addClass(this._dropdown,"ng-select-bottom"),this._renderer.removeClass(this._dropdown,"ng-select-top"),this._renderer.addClass(this._select,"ng-select-bottom"),this._renderer.removeClass(this._select,"ng-select-top")),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_handleScroll(){this._zone.runOutsideAngular(()=>{vg(this.scrollElementRef.nativeElement,"scroll").pipe(qg(this._destroy$),$g(0,AE)).subscribe(t=>{const e=t.path||t.composedPath&&t.composedPath();this._onContentScrolled(e&&0!==e.length?e[0].scrollTop:t.target.scrollTop)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{G(vg(this._document,"touchstart",{capture:!0}),vg(this._document,"mousedown",{capture:!0})).pipe(qg(this._destroy$)).subscribe(t=>this._checkToClose(t))})}_checkToClose(t){if(this._select.contains(t.target)||this._dropdown.contains(t.target))return;const e=t.path||t.composedPath&&t.composedPath();t.target&&t.target.shadowRoot&&e&&e[0]&&this._select.contains(e[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(t,e){this.items=t||[],this._scrollToEndFired=!1,this.itemsLength=t.length,this.virtualScroll?this._updateItemsRange(e):(this._setVirtualHeight(),this._updateItems(e))}_updateItems(t){this.update.emit(this.items),!1!==t&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._panelService.setDimensions(0,this._scrollablePanel.clientHeight),this._handleDropdownPosition(),this.scrollTo(this.markedItem,t)})})}_updateItemsRange(t){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{t?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(t){this.virtualScroll&&this._renderItemsRange(t),this._lastScrollPosition=t,this._fireScrollToEnd(t)}_updateVirtualHeight(t){this._updateScrollHeight&&(this._virtualPadding.style.height=`${t}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(t=null){if(t&&this._lastScrollPosition===t)return;const e=this._panelService.calculateItems(t=t||this._scrollablePanel.scrollTop,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(e.scrollHeight),this._contentPanel.style.transform=`translateY(${e.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(e.start,e.end)),this.scroll.emit({start:e.start,end:e.end})}),lE(t)&&0===this._lastScrollPosition&&(this._scrollablePanel.scrollTop=t,this._lastScrollPosition=t)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||0===this.itemsLength)return Promise.resolve(this._panelService.dimensions);const[t]=this.items;return this.update.emit([t]),Promise.resolve().then(()=>{const e=this._dropdown.querySelector(`#${t.htmlId}`).clientHeight;return this._virtualPadding.style.height=e*this.itemsLength+"px",this._panelService.setDimensions(e,this._scrollablePanel.clientHeight),this._panelService.dimensions})}_fireScrollToEnd(t){this._scrollToEndFired||0===t||t+this._dropdown.clientHeight>=(this.virtualScroll?this._virtualPadding:this._contentPanel).clientHeight&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(t){if("auto"!==this.position)return this.position;const e=this._select.getBoundingClientRect(),n=document.documentElement.scrollTop||document.body.scrollTop;return e.top+window.pageYOffset+e.height+t.getBoundingClientRect().height>n+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){const t=this._select.getBoundingClientRect(),e=this._parent.getBoundingClientRect();this._dropdown.style.left=t.left-e.left+"px",this._dropdown.style.width=t.width+"px",this._dropdown.style.minWidth=t.width+"px"}_updateYPosition(){const t=this._select.getBoundingClientRect(),e=this._parent.getBoundingClientRect(),n=t.height;"top"===this._currentPosition?(this._dropdown.style.bottom=e.bottom-t.bottom+n+"px",this._dropdown.style.top="auto"):"bottom"===this._currentPosition&&(this._dropdown.style.top=t.top-e.top+n+"px",this._dropdown.style.bottom="auto")}}return t.\u0275fac=function(e){return new(e||t)(Ts(Qa),Ts(Yu),Ts(PE),Ts(Ya),Ts(Pc,8))},t.\u0275cmp=$t({type:t,selectors:[["ng-dropdown-panel"]],viewQuery:function(t,e){if(1&t&&(wu(ww,3,Ya),wu(Ew,3,Ya),wu(Sw,3,Ya)),2&t){let t;xu(t=Su())&&(e.contentElementRef=t.first),xu(t=Su())&&(e.scrollElementRef=t.first),xu(t=Su())&&(e.paddingElementRef=t.first)}},hostBindings:function(t,e){1&t&&js("mousedown",function(t){return e.handleMousedown(t)})},inputs:{items:"items",position:"position",virtualScroll:"virtualScroll",filterValue:"filterValue",markedItem:"markedItem",appendTo:"appendTo",bufferAmount:"bufferAmount",headerTemplate:"headerTemplate",footerTemplate:"footerTemplate"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[ae],ngContentSelectors:Tw,decls:9,vars:6,consts:[["class","ng-dropdown-header",4,"ngIf"],[1,"ng-dropdown-panel-items","scroll-host"],["scroll",""],["padding",""],["content",""],["class","ng-dropdown-footer",4,"ngIf"],[1,"ng-dropdown-header"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ng-dropdown-footer"]],template:function(t,e){1&t&&(Zs(),Is(0,Iw,2,4,"div",0),Os(1,"div",1,2),Ls(3,"div",null,3),Os(5,"div",null,4),Ws(7),Ms(),Ms(),Is(8,kw,2,4,"div",5)),2&t&&(Ps("ngIf",e.headerTemplate),Xi(3),ua("total-padding",e.virtualScroll),Xi(2),ua("scrollable-content",e.virtualScroll&&e.items.length),Xi(3),Ps("ngIf",e.footerTemplate))},directives:[eh,ah],encapsulation:2,changeDetection:0}),t})(),ME=(()=>{class t{constructor(t){this.elementRef=t,this.stateChange$=new E,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=this._isDisabled(t)}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(t){t.disabled&&this.stateChange$.next({value:this.value,disabled:this._disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this._disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}_isDisabled(t){return null!=t&&"false"!=`${t}`}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya))},t.\u0275cmp=$t({type:t,selectors:[["ng-option"]],inputs:{disabled:"disabled",value:"value"},features:[ae],ngContentSelectors:Tw,decls:1,vars:0,template:function(t,e){1&t&&(Zs(),Ws(0))},encapsulation:2,changeDetection:0}),t})(),LE=(()=>{class t{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})();const NE=new Hn("ng-select-selection-model");let DE=(()=>{class t{constructor(t,e,n,r,i,o,s){this.classes=t,this.autoFocus=e,this._cd=o,this._console=s,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=t=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new uu,this.focusEvent=new uu,this.changeEvent=new uu,this.openEvent=new uu,this.closeEvent=new uu,this.searchEvent=new uu,this.clearEvent=new uu,this.addEvent=new uu,this.removeEvent=new uu,this.scroll=new uu,this.scrollToEnd=new uu,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=SE(),this.escapeHTML=!0,this.useDefaultClass=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new E,this._keyPress$=new E,this._onChange=t=>{},this._onTouched=()=>{},this.clearItem=t=>{const e=this.selectedItems.find(e=>e.value===t);this.unselect(e)},this.trackByOption=(t,e)=>this.trackByFn?this.trackByFn(e.value):e,this._mergeGlobalConfig(n),this.itemsList=new kE(this,r()),this.element=i.nativeElement}get items(){return this._items}set items(t){this._itemsAreUsed=!0,this._items=t}get compareWith(){return this._compareWith}set compareWith(t){if(null!=t&&!cE(t))throw Error("`compareWith` must be a function.");this._compareWith=t}get clearSearchOnAdd(){return lE(this._clearSearchOnAdd)?this._clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(t){this._clearSearchOnAdd=t}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(t=>t.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(t){t.multiple&&this.itemsList.clearSelected(),t.items&&this._setItems(t.items.currentValue||[]),t.isOpen&&(this._manualOpen=lE(t.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),lE(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(t){if(TE[t.which]){if(!1===this.keyDownFn(t))return;this.handleKeyCode(t)}else t.key&&1===t.key.length&&this._keyPress$.next(t.key.toLocaleLowerCase())}handleKeyCode(t){switch(t.which){case TE.ArrowDown:this._handleArrowDown(t);break;case TE.ArrowUp:this._handleArrowUp(t);break;case TE.Space:this._handleSpace(t);break;case TE.Enter:this._handleEnter(t);break;case TE.Tab:this._handleTab(t);break;case TE.Esc:this.close(),t.preventDefault();break;case TE.Backspace:this._handleBackspace()}}handleMousedown(t){const e=t.target;"INPUT"!==e.tagName&&t.preventDefault(),e.classList.contains("ng-clear-wrapper")?this.handleClearClick():e.classList.contains("ng-arrow-wrapper")?this.handleArrowClick():e.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(t){this.itemsList.clearSelected(),this._handleWriteValue(t),this._cd.markForCheck()}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._disabled=t,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this.itemsList.maxItemsSelected||this._manualOpen||(this._isTypeahead||this.addTag||!this.itemsList.noItemsToSelect)&&(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){this.isOpen&&!this._manualOpen&&(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(t){!t||t.disabled||this.disabled||(this.multiple&&t.selected?this.unselect(t):this.select(t),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(t){t.selected||(this.itemsList.select(t),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(t.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(t){t&&(this.itemsList.unselect(t),this.focus(),this._updateNgModel(),this.removeEvent.emit(t))}selectTag(){let t;t=cE(this.addTag)?this.addTag(this.searchTerm):this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};const e=t=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(t,null):this.itemsList.addItem(t);t instanceof Promise?t.then(t=>this.select(e(t))).catch(()=>{}):t&&this.select(e(t))}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}get showAddTag(){if(!this._validTerm)return!1;const t=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(e=>e.label.toLowerCase()===t)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(e=>e.label.toLowerCase()===t))&&!this.loading}showNoItemsFound(){const t=0===this.itemsList.filteredItems.length;return(t&&!this._isTypeahead&&!this.loading||t&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return 0===this.itemsList.filteredItems.length&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(t){this._isComposing=!1,this.searchWhileComposing||this.filter(t)}filter(t){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=t,this._isTypeahead&&(this._validTerm||0===this.minTermLength)&&this.typeahead.next(t),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:t,items:this.itemsList.filteredItems.map(t=>t.value)}),this.open())}onInputFocus(t){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(t),this.focused=!0)}onInputBlur(t){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(t),this.isOpen||this.disabled||this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(t){t.disabled||this.itemsList.markItem(t)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){const t=this.selectedItems&&this.selectedItems[0];this.searchTerm=t&&t.label||null}_setItems(t){const e=t[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=lE(e)?!uE(e):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(t),t.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&lE(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){const t=t=>{this.items=t.map(t=>({$ngOptionValue:t.value,$ngOptionLabel:t.elementRef.nativeElement.innerHTML,disabled:t.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},e=()=>{const t=G(this.ngOptions.changes,this._destroy$);G(...this.ngOptions.map(t=>t.stateChange$)).pipe(qg(t)).subscribe(t=>{const e=this.itemsList.findItem(t.value);e.disabled=t.disabled,e.label=t.label||e.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe(Zp(this.ngOptions),qg(this._destroy$)).subscribe(n=>{this.bindLabel=this._defaultLabel,t(n),e()})}_isValidWriteValue(t){if(!lE(t)||this.multiple&&""===t||Array.isArray(t)&&0===t.length)return!1;const e=t=>!(!lE(this.compareWith)&&uE(t)&&this.bindValue&&(this._console.warn(`Setting object(${JSON.stringify(t)}) as your model with bindValue is not allowed unless [compareWith] is used.`),1));return this.multiple?Array.isArray(t)?t.every(t=>e(t)):(this._console.warn("Multiple select ngModel should be array."),!1):e(t)}_handleWriteValue(t){if(!this._isValidWriteValue(t))return;const e=t=>{let e=this.itemsList.findItem(t);if(e)this.itemsList.select(e);else{const n=uE(t),r=!n&&!this.bindValue;n||r?this.itemsList.select(this.itemsList.mapItem(t,null)):this.bindValue&&(e={[this.bindLabel]:null,[this.bindValue]:t},this.itemsList.select(this.itemsList.mapItem(e,null)))}};this.multiple?t.forEach(t=>e(t)):e(t)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(qg(this._destroy$),pd(t=>this._pressedKeys.push(t)),yw(200),Zh(()=>this._pressedKeys.length>0),I(()=>this._pressedKeys.join(""))).subscribe(t=>{const e=this.itemsList.findByLabel(t);e&&(this.isOpen?(this.itemsList.markItem(e),this._scrollToMarked(),this._cd.markForCheck()):this.select(e)),this._pressedKeys=[]})}_setInputAttributes(){const t=this.searchInput.nativeElement,e=Object.assign({type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId},this.inputAttrs);for(const n of Object.keys(e))t.setAttribute(n,e[n])}_updateNgModel(){const t=[];for(const n of this.selectedItems)if(this.bindValue){let e=null;e=n.children?n.value[(this.groupValue?this.bindValue:this.groupBy)||this.groupBy]:this.itemsList.resolveNested(n.value,this.bindValue),t.push(e)}else t.push(n.value);const e=this.selectedItems.map(t=>t.value);this.multiple?(this._onChange(t),this.changeEvent.emit(e)):(this._onChange(lE(t[0])?t[0]:null),this.changeEvent.emit(e[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(t){this.searchTerm=t,this._isTypeahead&&this.typeahead.next(t)}_scrollToMarked(){this.isOpen&&this.dropdownPanel&&this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){this.isOpen&&this.dropdownPanel&&this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.multiple&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(t){(!1!==this.isOpen||this.addTag)&&(this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),t.preventDefault()):this.showAddTag?(this.selectTag(),t.preventDefault()):this.close():this.close())}_handleEnter(t){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else{if(!this.openOnEnter)return;this.open()}t.preventDefault()}_handleSpace(t){this.isOpen||this._manualOpen||(this.open(),t.preventDefault())}_handleArrowDown(t){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),t.preventDefault()}_handleArrowUp(t){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),t.preventDefault())}_nextItemIsTag(t){const e=this.itemsList.markedIndex+t;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(e<0||e===this.itemsList.filteredItems.length)}_handleBackspace(){!this.searchTerm&&this.clearable&&this.clearOnBackspace&&this.hasValue&&(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){const t=this.searchTerm&&this.searchTerm.trim();return t&&t.length>=this.minTermLength}_mergeGlobalConfig(t){this.placeholder=this.placeholder||t.placeholder,this.notFoundText=this.notFoundText||t.notFoundText,this.typeToSearchText=this.typeToSearchText||t.typeToSearchText,this.addTagText=this.addTagText||t.addTagText,this.loadingText=this.loadingText||t.loadingText,this.clearAllText=this.clearAllText||t.clearAllText,this.virtualScroll=lE(this.virtualScroll)?this.virtualScroll:!!lE(t.disableVirtualScroll)&&!t.disableVirtualScroll,this.openOnEnter=lE(this.openOnEnter)?this.openOnEnter:t.openOnEnter,this.appendTo=this.appendTo||t.appendTo,this.bindValue=this.bindValue||t.bindValue,this.bindLabel=this.bindLabel||t.bindLabel,this.appearance=this.appearance||t.appearance}}return t.\u0275fac=function(e){return new(e||t)(qn("class"),qn("autofocus"),Ts(LE),Ts(NE),Ts(Ya),Ts(wl),Ts(EE))},t.\u0275cmp=$t({type:t,selectors:[["ng-select"]],contentQueries:function(t,e,n){if(1&t&&(Eu(n,pE,1,kl),Eu(n,dE,1,kl),Eu(n,fE,1,kl),Eu(n,_E,1,kl),Eu(n,mE,1,kl),Eu(n,gE,1,kl),Eu(n,yE,1,kl),Eu(n,vE,1,kl),Eu(n,bE,1,kl),Eu(n,xE,1,kl),Eu(n,wE,1,kl),Eu(n,ME,1)),2&t){let t;xu(t=Su())&&(e.optionTemplate=t.first),xu(t=Su())&&(e.optgroupTemplate=t.first),xu(t=Su())&&(e.labelTemplate=t.first),xu(t=Su())&&(e.multiLabelTemplate=t.first),xu(t=Su())&&(e.headerTemplate=t.first),xu(t=Su())&&(e.footerTemplate=t.first),xu(t=Su())&&(e.notFoundTemplate=t.first),xu(t=Su())&&(e.typeToSearchTemplate=t.first),xu(t=Su())&&(e.loadingTextTemplate=t.first),xu(t=Su())&&(e.tagTemplate=t.first),xu(t=Su())&&(e.loadingSpinnerTemplate=t.first),xu(t=Su())&&(e.ngOptions=t)}},viewQuery:function(t,e){if(1&t&&(wu(OE,1),wu(Pw,3)),2&t){let t;xu(t=Su())&&(e.dropdownPanel=t.first),xu(t=Su())&&(e.searchInput=t.first)}},hostVars:20,hostBindings:function(t,e){1&t&&js("keydown",function(t){return e.handleKeyDown(t)}),2&t&&ua("ng-select",e.useDefaultClass)("ng-select-single",!e.multiple)("ng-select-multiple",e.multiple)("ng-select-taggable",e.addTag)("ng-select-searchable",e.searchable)("ng-select-clearable",e.clearable)("ng-select-opened",e.isOpen)("ng-select-disabled",e.disabled)("ng-select-filtered",e.filtered)("ng-select-typeahead",e.typeahead)},inputs:{markFirst:"markFirst",dropdownPosition:"dropdownPosition",loading:"loading",closeOnSelect:"closeOnSelect",hideSelected:"hideSelected",selectOnTab:"selectOnTab",bufferAmount:"bufferAmount",selectableGroup:"selectableGroup",selectableGroupAsModel:"selectableGroupAsModel",searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:"clearOnBackspace",labelForId:"labelForId",inputAttrs:"inputAttrs",readonly:"readonly",searchWhileComposing:"searchWhileComposing",minTermLength:"minTermLength",editableSearchTerm:"editableSearchTerm",keyDownFn:"keyDownFn",multiple:"multiple",addTag:"addTag",searchable:"searchable",clearable:"clearable",isOpen:"isOpen",items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",bindLabel:"bindLabel",placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",virtualScroll:"virtualScroll",openOnEnter:"openOnEnter",appendTo:"appendTo",bindValue:"bindValue",appearance:"appearance",maxSelectedItems:"maxSelectedItems",groupBy:"groupBy",groupValue:"groupValue",tabIndex:"tabIndex",typeahead:"typeahead"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[$a([{provide:nx,useExisting:it(()=>t),multi:!0},PE]),ae],decls:14,vars:19,consts:[[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[4,"ngIf"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"readOnly","disabled","value","input","compositionstart","compositionend","focus","blur","change"],["searchInput",""],["class","ng-clear-wrapper",3,"title",4,"ngIf"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["class","ng-dropdown-panel","role","listbox","aria-label","Options list",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id","update","scroll","scrollToEnd","outsideClick",4,"ngIf"],["class","ng-value",3,"ng-value-disabled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ng-value"],["defaultLabelTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],["defaultLoadingSpinnerTemplate",""],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],[1,"ng-clear-wrapper",3,"title"],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id","update","scroll","scrollToEnd","outsideClick"],["class","ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked","click","mouseover",4,"ngFor","ngForOf","ngForTrackBy"],["class","ng-option","role","option",3,"ng-option-marked","mouseover","click",4,"ngIf"],[1,"ng-option",3,"click","mouseover"],["defaultOptionTemplate",""],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],["defaultTagTemplate",""],[1,"ng-tag-label"],["defaultNotFoundTemplate",""],[1,"ng-option","ng-option-disabled"],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""]],template:function(t,e){if(1&t){const t=zs();Os(0,"div",0),js("mousedown",function(t){return e.handleMousedown(t)}),Os(1,"div",1),Os(2,"div",2),Ea(3),Ms(),Is(4,Nw,2,2,"ng-container",3),Is(5,zw,1,5,void 0,3),Os(6,"div",4),Os(7,"input",5,6),js("input",function(){Me(t);const n=ks(8);return e.filter(n.value)})("compositionstart",function(){return e.onCompositionStart()})("compositionend",function(){Me(t);const n=ks(8);return e.onCompositionEnd(n.value)})("focus",function(t){return e.onInputFocus(t)})("blur",function(t){return e.onInputBlur(t)})("change",function(t){return t.stopPropagation()}),Ms(),Ms(),Ms(),Is(9,jw,4,1,"ng-container",3),Is(10,Vw,3,1,"span",7),Os(11,"span",8),Ls(12,"span",9),Ms(),Ms(),Is(13,iE,7,19,"ng-dropdown-panel",10)}2&t&&(ua("ng-appearance-outline","outline"===e.appearance)("ng-has-value",e.hasValue),Xi(3),Sa(e.placeholder),Xi(1),Ps("ngIf",(!e.multiLabelTemplate||!e.multiple)&&e.selectedItems.length>0),Xi(1),Ps("ngIf",e.multiple&&e.multiLabelTemplate&&e.selectedValues.length>0),Xi(1),Ss("aria-expanded",e.isOpen)("aria-owns",e.isOpen?e.dropdownId:null),Xi(1),Ps("readOnly",!e.searchable||e.itemsList.maxItemsSelected)("disabled",e.disabled)("value",e.searchTerm?e.searchTerm:""),Ss("id",e.labelForId)("tabindex",e.tabIndex)("aria-activedescendant",e.isOpen?null==e.itemsList||null==e.itemsList.markedItem?null:e.itemsList.markedItem.htmlId:null)("aria-controls",e.isOpen?e.dropdownId:null),Xi(2),Ps("ngIf",e.loading),Xi(1),Ps("ngIf",e.showClear()),Xi(3),Ps("ngIf",e.isOpen))},directives:[eh,Qc,ah,hE,OE,Kc],styles:['.ng-select{display:block;position:relative}.ng-select,.ng-select div,.ng-select input,.ng-select span{box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;cursor:default;user-select:none}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{background:none transparent;border:0;box-shadow:none;box-sizing:content-box;cursor:default;outline:none;padding:0;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;padding:0;user-select:none;width:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{left:0;position:absolute;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;cursor:pointer;position:relative;user-select:none;width:17px}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{-webkit-animation:load8 .8s linear infinite;animation:load8 .8s linear infinite;border:2px solid rgba(66,66,66,.2);border-left-color:#424242;border-radius:50%;font-size:10px;height:17px;margin-right:5px;position:relative;text-indent:-9999em;transform:translateZ(0);width:17px}.ng-select .ng-spinner-loader:after{border-radius:50%;height:17px;width:17px}@-webkit-keyframes load8{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes load8{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ng-select .ng-arrow-wrapper{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;cursor:pointer;position:relative;text-align:center;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{display:inline-block;height:0;pointer-events:none;position:relative;width:0}.ng-dropdown-panel{-webkit-overflow-scrolling:touch;box-sizing:border-box;opacity:0;position:absolute;width:100%;z-index:1050}.ng-dropdown-panel .ng-dropdown-panel-items{box-sizing:border-box;display:block;height:auto;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup,.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{-webkit-overflow-scrolling:touch;display:block;overflow:hidden;overflow-y:auto;position:relative}.ng-dropdown-panel .scrollable-content{height:100%;left:0;position:absolute;top:0;width:100%}.ng-dropdown-panel .total-padding{opacity:0;width:1px}'],encapsulation:2,changeDetection:0}),t})();class RE{constructor(){this._selected=[]}get value(){return this._selected}select(t,e,n){if(t.selected=!0,(!t.children||!e&&n)&&this._selected.push(t),e)if(t.parent){const e=t.parent.children.length,n=t.parent.children.filter(t=>t.selected).length;t.parent.selected=e===n}else t.children&&(this._setChildrenSelectedState(t.children,!0),this._removeChildren(t),this._selected=n&&this._activeChildren(t)?[...this._selected.filter(e=>e.parent!==t),t]:[...this._selected,...t.children.filter(t=>!t.disabled)])}unselect(t,e){if(this._selected=this._selected.filter(e=>e!==t),t.selected=!1,e)if(t.parent&&t.parent.selected){const e=t.parent.children;this._removeParent(t.parent),this._removeChildren(t.parent),this._selected.push(...e.filter(e=>e!==t&&!e.disabled)),t.parent.selected=!1}else t.children&&(this._setChildrenSelectedState(t.children,!1),this._removeChildren(t))}clear(t){this._selected=t?this._selected.filter(t=>t.disabled):[]}_setChildrenSelectedState(t,e){for(const n of t)n.disabled||(n.selected=e)}_removeChildren(t){this._selected=[...this._selected.filter(e=>e.parent!==t),...t.children.filter(e=>e.parent===t&&e.disabled&&e.selected)]}_removeParent(t){this._selected=this._selected.filter(e=>e!==t)}_activeChildren(t){return t.children.every(t=>!t.disabled||t.selected)}}const zE=function(){return new RE};let FE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[{provide:NE,useValue:zE}],imports:[[ch]]}),t})(),BE=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})(),jE=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=yg(t);return new y(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new E,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(ur(BE))},t.\u0275prov=ht({factory:function(){return new t(ur(BE))},token:t,providedIn:"root"}),t})(),VE=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new uu,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=fg(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=_g(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(yw(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ts(jE),Ts(Ya),Ts(Yu))},t.\u0275dir=Xt({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),UE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[BE]}),t})(),$E=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(oL){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===GE(e))return!1;if(!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=GE(t);return t.hasAttribute("contenteditable")?-1!==i:"iframe"!==r&&"object"!==r&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==i:"video"===r?-1!==i&&(null!==i||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||qE(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(ur(Xg))},t.\u0275prov=ht({factory:function(){return new t(ur(Xg))},token:t,providedIn:"root"}),t})();function qE(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function GE(t){if(!qE(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class HE{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),!this._checker.isFocusable(t)){const e=this._getFirstTabbableElement(t);return null==e||e.focus(),!!e}return t.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(qp(1)).subscribe(t)}}let ZE=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new HE(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(ur($E),ur(Yu),ur(Pc))},t.\u0275prov=ht({factory:function(){return new t(ur($E),ur(Yu),ur(Pc))},token:t,providedIn:"root"}),t})();function WE(t){return 0===t.buttons}function XE(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const YE=new Hn("cdk-focus-monitor-default-options"),KE=ny({passive:!0,capture:!0});let JE=(()=>{class t{constructor(t,e,n,r){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=WE(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{XE(t)?this._lastTouchTarget||this._setOriginForCurrentEventQueue("keyboard"):(null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=QE(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650))},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=QE(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let r=e;r;r=r.parentElement)n.call(this,t,r)},this._document=n,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=yg(t);if(!this._platform.isBrowser||1!==n.nodeType)return Gh(null);const r=iy(n)||this._getDocument(),i=this._elementInfo.get(n);if(i)return e&&(i.checkChildren=!0),i.subject;const o={checkChildren:e,subject:new E,rootNode:r};return this._elementInfo.set(n,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const e=yg(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const r=yg(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=QE(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);n&&(n.checkChildren||e===QE(t))&&this._originChanged(e,this._getFocusOrigin(t),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,KE),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,KE)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,KE),t.addEventListener("mousedown",this._documentMousedownListener,KE),t.addEventListener("touchstart",this._documentTouchstartListener,KE),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,KE),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,KE),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,KE),t.removeEventListener("mousedown",this._documentMousedownListener,KE),t.removeEventListener("touchstart",this._documentTouchstartListener,KE),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,r)=>{(r===t||n.checkChildren&&r.contains(t))&&e.push([r,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(ur(Yu),ur(Xg),ur(Pc,8),ur(YE,8))},t.\u0275prov=ht({factory:function(){return new t(ur(Yu),ur(Xg),ur(Pc,8),ur(YE,8))},token:t,providedIn:"root"}),t})();function QE(t){return t.composedPath?t.composedPath()[0]:t.target}let tS=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275fac=function(e){return new(e||t)(ur(Xg),ur(Pc))},t.\u0275prov=ht({factory:function(){return new t(ur(Xg),ur(Pc))},token:t,providedIn:"root"}),t})(),eS=(()=>{class t{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)(ur(tS))},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[Yg,UE]]}),t})();const nS=new nl("11.2.13");class rS{}function iS(t,e){return{type:7,name:t,definitions:e,options:{}}}function oS(t,e=null){return{type:4,styles:e,timings:t}}function sS(t,e=null){return{type:2,steps:t,options:e}}function aS(t){return{type:6,styles:t,offset:null}}function lS(t,e,n){return{type:0,name:t,styles:e,options:n}}function uS(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function cS(t){Promise.resolve(null).then(t)}class hS{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cS(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class pS{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?cS(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function dS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function fS(t){switch(t.length){case 0:return new hS;case 1:return t[0];default:return new pS(t)}}function _S(t,e,n,r,i={},o={}){const s=[],a=[];let l=-1,u=null;if(r.forEach(t=>{const n=t.offset,r=n==l,c=r&&u||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,s),a){case"!":a=i[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,r,a,s)}c[r]=a}),r||a.push(c),u=c,l=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function mS(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&gS(n,"start",t)));break;case"done":t.onDone(()=>r(n&&gS(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&gS(n,"destroy",t)))}}function gS(t,e,n){const r=n.totalTime,i=yS(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),o=t._data;return null!=o&&(i._data=o),i}function yS(t,e,n,r,i="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function vS(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function bS(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let xS=(t,e)=>!1,wS=(t,e)=>!1,ES=(t,e,n)=>[];const SS=dS();(SS||"undefined"!=typeof Element)&&(xS=(t,e)=>t.contains(e),wS=(()=>{if(SS||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):wS}})(),ES=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let CS=null,IS=!1;function kS(t){CS||(CS=("undefined"!=typeof document?document.body:null)||{},IS=!!CS.style&&"WebkitAppearance"in CS.style);let e=!0;return CS.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in CS.style,!e&&IS)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in CS.style),e}const TS=wS,PS=xS,AS=ES;function OS(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let MS=(()=>{class t{validateStyleProperty(t){return kS(t)}matchesElement(t,e){return TS(t,e)}containsElement(t,e){return PS(t,e)}query(t,e,n){return AS(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,o=[],s){return new hS(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),LS=(()=>{class t{}return t.NOOP=new MS,t})();function NS(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:DS(parseFloat(e[1]),e[2])}function DS(t,e){switch(e){case"s":return 1e3*t;default:return t}}function RS(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=DS(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(i=DS(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else r=t;if(!n){let n=!1,o=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:o}}(t,e,n)}function zS(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function FS(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else zS(t,n);return n}function BS(t,e,n){return n?e+":"+n+";":""}function jS(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=BS(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=BS(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function VS(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=XS(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),dS()&&jS(t))}function US(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=XS(e);t.style[n]=""}),dS()&&jS(t))}function $S(t){return Array.isArray(t)?1==t.length?t[0]:sS(t):t}const qS=new RegExp("{{\\s*(.+?)\\s*}}","g");function GS(t){let e=[];if("string"==typeof t){let n;for(;n=qS.exec(t);)e.push(n[1]);qS.lastIndex=0}return e}function HS(t,e,n){const r=t.toString(),i=r.replace(qS,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function ZS(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const WS=/-+([a-z0-9])/g;function XS(t){return t.replace(WS,(...t)=>t[1].toUpperCase())}function YS(t,e){return 0===t||0===e}function KS(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let o=e[0],s=[];if(r.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var i=1;i<e.length;i++){let n=e[i];s.forEach(function(e){n[e]=QS(t,e)})}}return e}function JS(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function QS(t,e){return window.getComputedStyle(t)[e]}function tC(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],o=r[2],s=r[3];e.push(rC(i,s)),"<"!=o[0]||"*"==i&&"*"==s||e.push(rC(s,i))}(t,n,e)):n.push(t),n}const eC=new Set(["true","1"]),nC=new Set(["false","0"]);function rC(t,e){const n=eC.has(t)||nC.has(t),r=eC.has(e)||nC.has(e);return(i,o)=>{let s="*"==t||t==i,a="*"==e||e==o;return!s&&n&&"boolean"==typeof i&&(s=i?eC.has(t):nC.has(t)),!a&&r&&"boolean"==typeof o&&(a=o?eC.has(e):nC.has(e)),s&&a}}const iC=new RegExp("s*:selfs*,?","g");function oC(t,e,n){return new sC(t).build(e,n)}class sC{constructor(t){this._driver=t}build(t,e){const n=new aC(e);return this._resetContextStyleTimingState(n),JS(this,$S(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,o.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,o=r||{};if(n.styles.forEach(t=>{if(lC(t)){const e=t;Object.keys(e).forEach(t=>{GS(e[t]).forEach(t=>{o.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=ZS(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=JS(this,$S(t.animation),e);return{type:1,matchers:tC(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:uC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>JS(this,t,e)),options:uC(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=JS(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:uC(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return cC(RS(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=cC(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||RS(r,e),cC(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:aS({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,o=!1;if(!i){o=!0;const t={};n.easing&&(t.easing=n.easing),i=aS(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(i,e);s.isEmptyStep=o,r=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(lC(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(i!=r&&i>=s.startTime&&r<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=s.startTime),a&&(o[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=GS(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let o=!1,s=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(lC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(lC(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),s=s||u<0||u>1,o=o||u<a,a=u,i.push(u),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let c=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,p=e.currentTime,d=e.currentAnimateTimings,f=d.duration;return l.forEach((t,r)=>{const o=c>0?r==h?1:c*r:i[r],s=o*f;e.currentTime=p+d.delay+s,d.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:JS(this,$S(t.animation),e),options:uC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:uC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:uC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(iC,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,vS(e.collectedStyles,e.currentQuerySelector,{});const s=JS(this,$S(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:uC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:RS(t.timings,e.errors,!0);return{type:12,animation:JS(this,$S(t.animation),e),timings:n,options:null}}}class aC{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function lC(t){return!Array.isArray(t)&&"object"==typeof t}function uC(t){var e;return t?(t=zS(t)).params&&(t.params=(e=t.params)?zS(e):null):t={},t}function cC(t,e,n){return{duration:t,delay:e,easing:n}}function hC(t,e,n,r,i,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class pC{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const dC=new RegExp(":enter","g"),fC=new RegExp(":leave","g");function _C(t,e,n,r,i,o={},s={},a,l,u=[]){return(new mC).buildKeyframes(t,e,n,r,i,o,s,a,l,u)}class mC{buildKeyframes(t,e,n,r,i,o,s,a,l,u=[]){l=l||new pC;const c=new yC(t,e,l,r,i,u,[]);c.options=a,c.currentTimeline.setStyles([o],null,c.errors,a),JS(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[hC(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);i!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?NS(n.duration):null,o=null!=n.delay?NS(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,o);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),JS(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=gC);const t=NS(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>JS(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?NS(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);i&&s.delayNextStep(i),JS(this,o,s),r=Math.max(r,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return RS(e.params?HS(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*i),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?NS(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=gC);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,r)=>{e.currentQueryIndex=r;const s=e.createSubContext(t.options,n);i&&s.delayNextStep(i),n===e.element&&(a=s.currentTimeline),JS(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,o=Math.abs(i.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;JS(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const gC={};class yC{constructor(t,e,n,r,i,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=gC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new vC(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=NS(n.duration)),null!=n.delay&&(r.delay=NS(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=HS(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new yC(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=gC,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new bC(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,o){let s=[];if(r&&s.push(this.element),t.length>0){t=(t=t.replace(dC,"."+this._enterClassName)).replace(fC,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return i||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class vC{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new vC(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},o=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]="*"})):FS(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=HS(o[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,o)=>{const s=FS(i,!0);Object.keys(s).forEach(n=>{const r=s[n];"!"==r?t.add(n):"*"==r&&e.add(n)}),n||(s.offset=o/this.duration),r.push(s)});const i=t.size?ZS(t.values()):[],o=e.size?ZS(e.values()):[];if(n){const t=r[0],e=zS(t);t.offset=0,e.offset=1,r=[t,e]}return hC(this.element,r,i,o,this.duration,this.startTime,this.easing,!1)}}class bC extends vC{constructor(t,e,n,r,i,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],o=n+e,s=e/o,a=FS(t[0],!1);a.offset=0,i.push(a);const l=FS(t[0],!1);l.offset=xC(s),i.push(l);const u=t.length-1;for(let r=1;r<=u;r++){let s=FS(t[r],!1);s.offset=xC((e+s.offset*n)/o),i.push(s)}n=o,e=0,r="",t=i}return hC(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function xC(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class wC{}class EC extends wC{normalizePropertyName(t,e){return XS(t)}normalizeStyleValue(t,e,n,r){let i="";const o=n.toString().trim();if(SC[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+i}}const SC=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function CC(t,e,n,r,i,o,s,a,l,u,c,h,p){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:p}}const IC={};class kC{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],o=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):o}build(t,e,n,r,i,o,s,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||IC,p=this.buildStyles(n,s&&s.params||IC,c),d=a&&a.params||IC,f=this.buildStyles(r,d,c),_=new Set,m=new Map,g=new Map,y="void"===r,v={params:Object.assign(Object.assign({},h),d)},b=u?[]:_C(t,e,this.ast.animation,i,o,p,f,v,l,c);let x=0;if(b.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),c.length)return CC(e,this._triggerName,n,r,y,p,f,[],[],m,g,x,c);b.forEach(t=>{const n=t.element,r=vS(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=vS(g,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&_.add(n)});const w=ZS(_.values());return CC(e,this._triggerName,n,r,y,p,f,b,w,m,g,x)}}class TC{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=zS(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let o=i[t];o.length>1&&(o=HS(o,r,e)),n[t]=o})}}),n}}class PC{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new TC(t.style,t.options&&t.options.params||{})}),AC(this.states,"true","1"),AC(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new kC(t,e,this.states))}),this.fallbackTransition=new kC(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function AC(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const OC=new pC;class MC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=oC(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=_S(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let o;const s=new Map;if(i?(o=_C(this._driver,e,i,"ng-enter","ng-leave",{},{},n,OC,r),o.forEach(t=>{const e=vS(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),o=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=fS(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=yS(e,"","","");return mS(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const LC=[],NC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},DC={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class RC{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(r=n?t.value:t)?r:null,n){const e=zS(t);delete e.value,this.options=e}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const zC=new RC("void");class FC{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,GC(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const o=vS(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=vS(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(GC(t,"ng-trigger"),GC(t,"ng-trigger-"+e),a[e]=zC),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),o=new jC(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(GC(t,"ng-trigger"),GC(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const l=new RC(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[e]=l,a||(a=zC),"void"!==l.value&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,l.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{US(t,n),VS(t,r)})}return}const u=vS(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=i.matchTransition(a.value,l.value,t,l.params),h=!1;if(!c){if(!r)return;c=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:l,player:o,isFallbackTransition:h}),h||(GC(t,"ng-animate-queued"),o.onStart(()=>{HC(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),u.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&fS(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const o=this._triggers[i].fallbackTransition,s=n[i]||zC,a=new RC("void"),l=new jC(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:o,fromState:s,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==NC||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){GC(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,o=this._elementListeners.get(i);o&&o.forEach(e=>{if(e.name==n.triggerName){const r=yS(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,mS(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class BC{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new FC(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(VC(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!VC(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),GC(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),HC(t,"ng-animate-disabled"))}removeNode(t,e,n,r){if(VC(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return VC(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return fS(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=NC,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)GC(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?fS(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new pC,r=[],i=new Map,o=[],s=new Map,a=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(t=>{u.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)u.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=qC(h,this.collectedEnterElements),d=new Map;let f=0;p.forEach((t,e)=>{const n="ng-enter"+f++;d.set(e,n),t.forEach(t=>GC(t,n))});const _=[],m=new Set,g=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(_.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):g.add(t))}const y=new Map,v=qC(h,Array.from(m));v.forEach((t,e)=>{const n="ng-leave"+f++;y.set(e,n),t.forEach(t=>GC(t,n))}),t.push(()=>{p.forEach((t,e)=>{const n=d.get(e);t.forEach(t=>HC(t,n))}),v.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>HC(t,n))}),_.forEach(t=>{this.processLeaveNode(t)})});const b=[],x=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(b.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const u=!c||!this.driver.containsElement(c,i),h=y.get(i),p=d.get(i),f=this._buildInstruction(t,n,p,h,u);if(f.errors&&f.errors.length)x.push(f);else{if(u)return e.onStart(()=>US(i,f.fromStyles)),e.onDestroy(()=>VS(i,f.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>US(i,f.fromStyles)),e.onDestroy(()=>VS(i,f.toStyles)),void r.push(e);f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,f.timelines),o.push({instruction:f,player:e,element:i}),f.queriedElements.forEach(t=>vS(s,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=l.get(e);r||l.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const w=new Map,E=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,w))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{vS(w,e,[]).push(t),t.destroy()})});const S=_.filter(t=>XC(t,a,l)),C=new Map;$C(C,this.driver,g,l,"*").forEach(t=>{XC(t,a,l)&&S.push(t)});const I=new Map;p.forEach((t,e)=>{$C(I,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=C.get(t),n=I.get(t);C.set(t,Object.assign(Object.assign({},e),n))});const k=[],T=[],P={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(u.has(e))return o.onDestroy(()=>VS(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void r.push(o);let t=P;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,w,i,I,C);if(o.setRealPlayer(n),t===P)k.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=fS(e)),r.push(o)}}else US(e,s.fromStyles),o.onDestroy(()=>VS(e,s.toStyles)),T.push(o),u.has(e)&&r.push(o)}),T.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=fS(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<_.length;A++){const t=_[A],e=t.__ng_removed;if(HC(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,".ng-animating",!0);for(let t=0;t<r.length;t++){let e=s.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?ZC(this,t,r):this.processLeaveNode(t)}return _.length=0,k.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),k}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||"void"==i;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&o.push(e)})}}return(n||r)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==r,l=vS(n,t,[]);this._getPreviousPlayers(t,a,i,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}US(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,o){const s=e.triggerName,a=e.element,l=[],u=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;u.add(h);const p=h.__ng_removed;if(p&&p.removedBeforeQueried)return new hS(e.duration,e.delay);const d=h!==a,f=function(t){const e=[];return WC(t,e),e}((n.get(h)||LC).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),_=i.get(h),m=o.get(h),g=_S(0,this._normalizer,0,e.keyframes,_,m),y=this._buildPlayer(e,g,f);if(e.subTimeline&&r&&c.add(h),d){const e=new jC(t,s,h);e.setRealPlayer(y),l.push(e)}return y});l.forEach(t=>{vS(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),u.forEach(t=>GC(t,"ng-animating"));const p=fS(h);return p.onDestroy(()=>{u.forEach(t=>HC(t,"ng-animating")),VS(a,e.toStyles)}),c.forEach(t=>{vS(r,t,[]).push(p)}),p}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new hS(t.duration,t.delay)}}class jC{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new hS,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>mS(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){vS(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function VC(t){return t&&1===t.nodeType}function UC(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function $C(t,e,n,r,i){const o=[];n.forEach(t=>o.push(UC(t)));const s=[];r.forEach((n,r)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=DC,s.push(r))}),t.set(r,o)});let a=0;return n.forEach(t=>UC(t,o[a++])),s}function qC(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function o(t){if(!t)return 1;let e=i.get(t);if(e)return e;const s=t.parentNode;return e=n.has(s)?s:r.has(s)?1:o(s),i.set(t,e),e}return e.forEach(t=>{const e=o(t);1!==e&&n.get(e).push(t)}),n}function GC(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function HC(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function ZC(t,e,n){fS(n).onDone(()=>t.processLeaveNode(e))}function WC(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof pS?WC(r.players,e):e.push(r)}}function XC(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class YC{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new BC(t,e,n),this._timelineEngine=new MC(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const o=t+"-"+r;let s=this._triggerCache[o];if(!s){const t=[],e=oC(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new PC(t,e)}(r,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,r,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=bS(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=bS(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function KC(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=QC(e[0]),e.length>1&&(r=QC(e[e.length-1]))):e&&(n=QC(e)),n||r?new JC(t,n,r):null}let JC=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&VS(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(VS(this._element,this._initialStyles),this._endStyles&&(VS(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(US(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(US(this._element,this._endStyles),this._endStyles=null),VS(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function QC(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];tI(i)&&(e=e||{},e[i]=t[i])}return e}function tI(t){return"display"===t||"position"===t}class eI{constructor(t,e,n,r,i,o,s){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=aI(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),sI(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),oI(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){nI(this._element,this._name,"paused")}resume(){nI(this._element,this._name,"running")}setPosition(t){const e=rI(this._element,this._name);this._position=t*this._duration,sI(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),oI(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=aI(t,"").split(","),r=iI(n,e);r>=0&&(n.splice(r,1),sI(t,"",n.join(",")))}(this._element,this._name))}}function nI(t,e,n){sI(t,"PlayState",n,rI(t,e))}function rI(t,e){const n=aI(t,"");return n.indexOf(",")>0?iI(n.split(","),e):iI([n],e)}function iI(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function oI(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function sI(t,e,n,r){const i="animation"+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function aI(t,e){return t.style["animation"+e]||""}class lI{constructor(t,e,n,r,i,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new eI(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:QS(this.element,n))})}this.currentSnapshot=t}}class uI extends hS{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=OS(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class cI{constructor(){this._count=0,this._head=document.querySelector("head")}validateStyleProperty(t){return kS(t)}matchesElement(t,e){return TS(t,e)}containsElement(t,e){return PS(t,e)}query(t,e,n){return AS(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>OS(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const o=document.createElement("style");return o.textContent=r,o}animate(t,e,n,r,i,o=[],s){const a=o.filter(t=>t instanceof lI),l={};YS(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=KS(t,e,l));if(0==n)return new uI(t,u);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);const p=KC(t,e),d=new lI(t,e,c,n,r,i,u,p);return d.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),d}}class hI{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:QS(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class pI{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(dI().toString()),this._cssKeyframesDriver=new cI}validateStyleProperty(t){return kS(t)}matchesElement(t,e){return TS(t,e)}containsElement(t,e){return PS(t,e)}query(t,e,n){return AS(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,o);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const l={},u=o.filter(t=>t instanceof hI);YS(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=KC(t,e=KS(t,e=e.map(t=>FS(t,!1)),l));return new hI(t,e,a,c)}}function dI(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let fI=(()=>{class t extends rS{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:It.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?sS(t):t;return gI(this._renderer,null,e,"register",[n]),new _I(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(ur(Ja),ur(Pc))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();class _I extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new mI(this._id,t,e||{},this._renderer)}}class mI{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return gI(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function gI(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}let yI=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new vI("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(o),new bI(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(ur(Ja),ur(YC),ur(Yu))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();class vI{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class bI extends vI{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),o="";return"@"!=i.charAt(0)&&([i,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let xI=(()=>{class t extends YC{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(ur(Pc),ur(LS),ur(wC))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const wI=new Hn("AnimationModuleType"),EI=[{provide:LS,useFactory:function(){return"function"==typeof dI()?new pI:new cI}},{provide:wI,useValue:"BrowserAnimations"},{provide:rS,useClass:fI},{provide:wC,useFactory:function(){return new EC}},{provide:YC,useClass:xI},{provide:Ja,useFactory:function(t,e,n){return new yI(t,e,n)},deps:[Ah,YC,Yu]}];let SI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:EI,imports:[qh]}),t})();const CI=new nl("11.2.13"),II=new Hn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let kI,TI=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return cc()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&CI.full!==nS.full&&console.warn("The Angular Material version ("+CI.full+") does not match the Angular CDK version ("+nS.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(ur(tS),ur(II,8),ur(Pc))},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ay],ay]}),t})();function PI(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=fg(t)}}}function AI(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function OI(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=fg(t)}}}function MI(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new E}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{kI="undefined"!=typeof Intl}catch(oL){kI=!1}let LI=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})(),NI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),t})();function DI(t,e,n){const r=t.nativeElement.classList;n?r.add(e):r.remove(e)}let RI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[TI],TI]}),t})();class zI{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const FI={enterDuration:450,exitDuration:400},BI=ny({passive:!0}),jI=["mousedown","touchstart"],VI=["mouseup","mouseleave","touchend","touchcancel"];class UI{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=yg(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),i=Object.assign(Object.assign({},FI),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function(t,e,n){const r=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),i=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(r*r+i*i)}(t,e,r),s=t-r.left,a=e-r.top,l=i.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=s-o+"px",u.style.top=a-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const c=new zI(this,u,n);return c.state=0,this._activeRipples.add(c),n.persistent||(this._mostRecentTransientRipple=c),this._runTimeoutOutsideZone(()=>{const t=c===this._mostRecentTransientRipple;c.state=1,n.persistent||t&&this._isPointerDown||c.fadeOut()},l),c}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},FI),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=yg(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(jI))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(VI),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=WE(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!XE(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,BI)})})}_removeTriggerEvents(){this._triggerElement&&(jI.forEach(t=>{this._triggerElement.removeEventListener(t,this,BI)}),this._pointerUpEventsRegistered&&VI.forEach(t=>{this._triggerElement.removeEventListener(t,this,BI)}))}}const $I=new Hn("mat-ripple-global-options");let qI=(()=>{class t{constructor(t,e,n,r,i){this._elementRef=t,this._animationMode=i,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=r||{},this._rippleRenderer=new UI(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya),Ts(Yu),Ts(Xg),Ts($I,8),Ts(wI,8))},t.\u0275dir=Xt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&ua("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),GI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[TI,Yg],TI]}),t})(),HI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[TI]]}),t})(),ZI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[GI,ch,TI,HI]]}),t})();const WI=["underline"],XI=["connectionContainer"],YI=["inputContainer"],KI=["label"];function JI(t,e){1&t&&(Ns(0),Os(1,"div",14),Ls(2,"div",15),Ls(3,"div",16),Ls(4,"div",17),Ms(),Os(5,"div",18),Ls(6,"div",15),Ls(7,"div",16),Ls(8,"div",17),Ms(),Ds())}function QI(t,e){1&t&&(Os(0,"div",19),Ws(1,1),Ms())}function tk(t,e){if(1&t&&(Ns(0),Ws(1,2),Os(2,"span"),Ea(3),Ms(),Ds()),2&t){const t=Gs(2);Xi(3),Sa(t._control.placeholder)}}function ek(t,e){1&t&&Ws(0,3,["*ngSwitchCase","true"])}function nk(t,e){1&t&&(Os(0,"span",23),Ea(1," *"),Ms())}function rk(t,e){if(1&t){const t=zs();Os(0,"label",20,21),js("cdkObserveContent",function(){return Me(t),Gs().updateOutlineGap()}),Is(2,tk,4,1,"ng-container",12),Is(3,ek,1,0,"ng-content",12),Is(4,nk,2,0,"span",22),Ms()}if(2&t){const t=Gs();ua("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Ps("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Ss("for",t._control.id)("aria-owns",t._control.id),Xi(2),Ps("ngSwitchCase",!1),Xi(1),Ps("ngSwitchCase",!0),Xi(1),Ps("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function ik(t,e){1&t&&(Os(0,"div",24),Ws(1,4),Ms())}function ok(t,e){if(1&t&&(Os(0,"div",25,26),Ls(2,"span",27),Ms()),2&t){const t=Gs();Xi(2),ua("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function sk(t,e){1&t&&(Os(0,"div"),Ws(1,5),Ms()),2&t&&Ps("@transitionMessages",Gs()._subscriptAnimationState)}function ak(t,e){if(1&t&&(Os(0,"div",31),Ea(1),Ms()),2&t){const t=Gs(2);Ps("id",t._hintLabelId),Xi(1),Sa(t.hintLabel)}}function lk(t,e){if(1&t&&(Os(0,"div",28),Is(1,ak,2,2,"div",29),Ws(2,6),Ls(3,"div",30),Ws(4,7),Ms()),2&t){const t=Gs();Ps("@transitionMessages",t._subscriptAnimationState),Xi(1),Ps("ngIf",t.hintLabel)}}const uk=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],ck=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let hk=0;const pk=new Hn("MatError");let dk=(()=>{class t{constructor(){this.id="mat-error-"+hk++}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["mat-error"]],hostAttrs:["role","alert",1,"mat-error"],hostVars:1,hostBindings:function(t,e){2&t&&Ss("id",e.id)},inputs:{id:"id"},features:[$a([{provide:pk,useExisting:t}])]}),t})();const fk={transitionMessages:iS("transitionMessages",[lS("enter",aS({opacity:1,transform:"translateY(0%)"})),uS("void => enter",[aS({opacity:0,transform:"translateY(-5px)"}),oS("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let _k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t}),t})();const mk=new Hn("MatHint");let gk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["mat-label"]]}),t})(),yk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["mat-placeholder"]]}),t})();const vk=new Hn("MatPrefix"),bk=new Hn("MatSuffix");let xk=0;class wk{constructor(t){this._elementRef=t}}const Ek=AI(wk,"primary"),Sk=new Hn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Ck=new Hn("MatFormField");let Ik=(()=>{class t extends Ek{constructor(t,e,n,r,i,o,s,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=r,this._defaults=i,this._platform=o,this._ngZone=s,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new E,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+xk++,this._labelId="mat-form-field-label-"+xk++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=i&&i.appearance?i.appearance:"legacy",this._hideRequiredMarker=!(!i||null==i.hideRequiredMarker)&&i.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=fg(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Zp(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(qg(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(qg(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),G(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Zp(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Zp(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(qg(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,vg(this._label.nativeElement,"transitionend").pipe(qp(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&t.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const r=this._connectionContainerRef.nativeElement,i=r.querySelectorAll(".mat-form-field-outline-start"),o=r.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const i=r.getBoundingClientRect();if(0===i.width&&0===i.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const o=this._getStartEnd(i),s=t.children,a=this._getStartEnd(s[0].getBoundingClientRect());let l=0;for(let t=0;t<s.length;t++)l+=s[t].offsetWidth;e=Math.abs(a-o)-5,n=l>0?.75*l+10:0}for(let s=0;s<i.length;s++)i[s].style.width=`${e}px`;for(let s=0;s<o.length;s++)o[s].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya),Ts(wl),Ts(Ya),Ts(sy,8),Ts(Sk,8),Ts(Xg),Ts(Yu),Ts(wI,8))},t.\u0275cmp=$t({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){if(1&t&&(Eu(n,_k,1),Eu(n,_k,3),Eu(n,gk,1),Eu(n,gk,3),Eu(n,yk,1),Eu(n,pk,1),Eu(n,mk,1),Eu(n,vk,1),Eu(n,bk,1)),2&t){let t;xu(t=Su())&&(e._controlNonStatic=t.first),xu(t=Su())&&(e._controlStatic=t.first),xu(t=Su())&&(e._labelChildNonStatic=t.first),xu(t=Su())&&(e._labelChildStatic=t.first),xu(t=Su())&&(e._placeholderChild=t.first),xu(t=Su())&&(e._errorChildren=t),xu(t=Su())&&(e._hintChildren=t),xu(t=Su())&&(e._prefixChildren=t),xu(t=Su())&&(e._suffixChildren=t)}},viewQuery:function(t,e){if(1&t&&(wu(WI,1),wu(XI,3),wu(YI,1),wu(KI,1)),2&t){let t;xu(t=Su())&&(e.underlineRef=t.first),xu(t=Su())&&(e._connectionContainerRef=t.first),xu(t=Su())&&(e._inputContainerRef=t.first),xu(t=Su())&&(e._label=t.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,e){2&t&&ua("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[$a([{provide:Ck,useExisting:t}]),hs],ngContentSelectors:ck,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(Zs(uk),Os(0,"div",0),Os(1,"div",1,2),js("click",function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)}),Is(3,JI,9,0,"ng-container",3),Is(4,QI,2,0,"div",4),Os(5,"div",5,6),Ws(7),Os(8,"span",7),Is(9,rk,5,16,"label",8),Ms(),Ms(),Is(10,ik,2,0,"div",9),Ms(),Is(11,ok,3,4,"div",10),Os(12,"div",11),Is(13,sk,2,1,"div",12),Is(14,lk,5,2,"div",13),Ms(),Ms()),2&t&&(Xi(3),Ps("ngIf","outline"==e.appearance),Xi(1),Ps("ngIf",e._prefixChildren.length),Xi(5),Ps("ngIf",e._hasFloatingLabel()),Xi(1),Ps("ngIf",e._suffixChildren.length),Xi(1),Ps("ngIf","outline"!=e.appearance),Xi(1),Ps("ngSwitch",e._getDisplayedMessages()),Xi(1),Ps("ngSwitchCase","error"),Xi(1),Ps("ngSwitchCase","hint"))},directives:[eh,oh,sh,VE],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[fk.transitionMessages]},changeDetection:0}),t})(),kk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ch,TI,UE],TI]}),t})();function Tk(t){return"function"==typeof t}const Pk=(t,e="ngOnDestroy")=>n=>{const r=t[e];if(!1===Tk(r))throw new Error(`${t.constructor.name} is using untilDestroyed but doesn't implement ${e}`);return t.__takeUntilDestroy||(t.__takeUntilDestroy=new E,t[e]=function(){Tk(r)&&r.apply(this,arguments),t.__takeUntilDestroy.next(!0),t.__takeUntilDestroy.complete()}),n.pipe(qg(t.__takeUntilDestroy))};class Ak{constructor(t){this.ngSelect=t}isErrorState(t,e){return t?!!(t&&t.invalid&&(t.touched||e&&e.submitted)):this.ngSelect.required&&this.ngSelect.empty}}let Ok=(()=>{class t{constructor(e,n,r,i){this.host=e,this.ngControl=n,this._parentForm=r,this._parentFormGroup=i,this.id="ng-select-"+t.nextId++,this.describedBy="",this.errorState=!1,this._defaultErrorStateMatcher=new Ak(this),this.stateChanges=new E,this.focused=!1,this._required=!1,this._disabled=!1,e.focusEvent.asObservable().pipe(Pk(this)).subscribe(t=>{this.focused=!0,this.stateChanges.next()}),e.blurEvent.asObservable().pipe(Pk(this)).subscribe(t=>{this.focused=!1,this.stateChanges.next()})}get empty(){return null==this._value}get shouldLabelFloat(){return this.focused||!this.empty}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required}set required(t){this._required=fg(t),this.stateChanges.next()}get disabled(){return this._disabled}set disabled(t){this._disabled=fg(t),this.stateChanges.next()}get value(){return this._value}set value(t){this._value=t,this.stateChanges.next()}ngOnInit(){this.ngControl?(this._value=this.ngControl.value,this._disabled=this.ngControl.disabled,this.ngControl.statusChanges.pipe(Pk(this)).subscribe(t=>{const e="DISABLED"===t;e!==this._disabled&&(this.disabled=e)}),this.ngControl.valueChanges.pipe(Pk(this)).subscribe(t=>{this._value=t,this.host.detectChanges(),this.stateChanges.next()})):this.host.changeEvent.asObservable().pipe(Pk(this)).subscribe(t=>{this._value=t,this.host.detectChanges(),this.stateChanges.next()})}ngOnDestroy(){}ngDoCheck(){this.updateErrorState()}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}setDescribedByIds(t){this.describedBy=t.join(" ")}onContainerClick(t){t.target.classList.contains("mat-form-field-infix")&&(this.host.focus(),this.host.open())}}return t.nextId=0,t.\u0275fac=function(e){return new(e||t)(Ts(DE),Ts(Tx,10),Ts(ew,8),Ts(hw,8))},t.\u0275dir=Xt({type:t,selectors:[["","ngSelectMat",""]],hostVars:2,hostBindings:function(t,e){2&t&&(ka("id",e.id),Ss("aria-describedby",e.describedBy))},inputs:{id:"id",errorStateMatcher:"errorStateMatcher",placeholder:"placeholder",required:"required",disabled:"disabled",value:"value"},features:[$a([{provide:_k,useExisting:t}])]}),t})();const Mk=function(){return["fal","times"]};function Lk(t,e){if(1&t){const t=zs();Os(0,"fa-icon",7),js("click",function(){Me(t);const e=Gs(),n=ks(5);return e.onClose(n)}),Ms()}2&t&&Ps("icon",Xl(1,Mk))}function Nk(t,e){if(1&t&&(Os(0,"ng-option",8),Ea(1),Ms()),2&t){const t=e.$implicit;Ps("value",t),Xi(1),Sa(t.properties.title)}}const Dk=function(t){return{"search-opened":t}},Rk=function(){return["fal","search"]};let zk=(()=>{class t{constructor(t){this.sidebarService=t,this.searchOpen=!1,this.optionsOpen=!1}ngOnInit(){this.pois=this.sidebarService.sortedPOIs}onSearchOpen(){this.searchOpen=!0}onSearch(t){this.optionsOpen=t.term.length>0}onSelect(t,e){this.sidebarService.onSetEndPoi(t),setTimeout(()=>{this.selectedPoi=null,this.searchOpen=!1,this.optionsOpen=!1,e.blur()})}onClose(t){t.close(),t.blur(),t.searchTerm=null,this.searchOpen=!1,this.optionsOpen=!1}}return t.\u0275fac=function(e){return new(e||t)(Ts(Nv))},t.\u0275cmp=$t({type:t,selectors:[["app-search"]],decls:7,vars:12,consts:[[1,"container",3,"ngClass"],[1,"overlay"],[1,"search-icon",3,"icon","size"],["size","2x","class","close-icon",3,"icon","click",4,"ngIf"],["ngSelectMat","","placeholder","Search",1,"custom",3,"ngModel","isOpen","closeOnSelect","clearSearchOnAdd","ngModelChange","click","search","change"],["select",""],[3,"value",4,"ngFor","ngForOf"],["size","2x",1,"close-icon",3,"icon","click"],[3,"value"]],template:function(t,e){if(1&t){const t=zs();Os(0,"div",0),Ls(1,"div",1),Ls(2,"fa-icon",2),Is(3,Lk,1,2,"fa-icon",3),Os(4,"ng-select",4,5),js("ngModelChange",function(t){return e.selectedPoi=t})("click",function(){return e.onSearchOpen()})("search",function(t){return e.onSearch(t)})("change",function(n){Me(t);const r=ks(5);return e.onSelect(n,r)}),Is(6,Nk,2,2,"ng-option",6),Ms(),Ms()}2&t&&(Ps("ngClass",Yl(9,Dk,e.searchOpen)),Xi(2),Ps("icon",Xl(11,Rk))("size",e.searchOpen?"2x":"lg"),Xi(1),Ps("ngIf",e.searchOpen),Xi(1),Ps("ngModel",e.selectedPoi)("isOpen",e.optionsOpen)("closeOnSelect",!0)("clearSearchOnAdd",!0),Xi(2),Ps("ngForOf",e.pois))},directives:[Kc,Jb,eh,DE,Ok,Ax,iw,Qc,ME],styles:[".container[_ngcontent-%COMP%]{padding:1rem 0 2.5rem 2rem;position:absolute;top:0}.container[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;background-color:hsla(0,0%,100%,0);transition:all .2s linear;z-index:10}.container[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{color:#6b50d0;position:relative;z-index:13;top:34px;transition:all .3s linear}.container[_ngcontent-%COMP%]   fa-icon.search-icon[_ngcontent-%COMP%]{left:15px}.container[_ngcontent-%COMP%]   fa-icon.close-icon[_ngcontent-%COMP%]{right:85px;top:71px;position:fixed;opacity:0;cursor:pointer}.container[_ngcontent-%COMP%]   fa-icon.close-icon[_ngcontent-%COMP%]:hover{color:#e7265b}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]    {min-width:428px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container{cursor:pointer;width:428px;min-height:0;border-radius:50px;height:46px;background-color:hsla(0,0%,100%,.9);border:2px solid rgba(0,0,0,.15);box-shadow:0 5px 10px rgba(0,0,0,.05);transition:all .3s linear}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container:hover{border:2px solid rgba(0,0,0,.25);box-shadow:0 5px 10px rgba(0,0,0,.08)}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container{cursor:pointer;padding-left:50px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input input, .container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-placeholder{cursor:pointer;color:#6b50d0}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input{transition:all .3s linear}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input input{padding-left:65px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-arrow-wrapper, .container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-clear-wrapper{display:none}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel{border:0;border-radius:0;background-color:transparent;box-shadow:none}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items{max-height:420px;overflow:hidden}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items .ng-option{background-color:transparent;color:#6b50d0;padding-left:65px;font-size:28px}.container[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-dropdown-panel .ng-dropdown-panel-items .ng-option.ng-option-marked{font-weight:700}.container.search-opened[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{display:block;background-color:hsla(0,0%,100%,.75);bottom:0}.container.search-opened[_ngcontent-%COMP%]   fa-icon.search-icon[_ngcontent-%COMP%]{top:55px;left:25px}.container.search-opened[_ngcontent-%COMP%]   fa-icon.close-icon[_ngcontent-%COMP%]{opacity:1}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]    {position:fixed;left:2rem;right:2rem;z-index:12}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container{width:100%;border-radius:80px;height:80px;border-width:3px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container{padding-left:75px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input input, .container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-placeholder{font-size:28px}.container.search-opened[_ngcontent-%COMP%]   .ng-select.custom[_ngcontent-%COMP%]     .ng-select-container .ng-value-container .ng-input{top:20px}"]}),t})();const Fk=["th","st","nd","rd"];let Bk=(()=>{class t{transform(t,e=!0){const n=t%100;return(e?t:"")+(Fk[(n-20)%10]||Fk[n]||Fk[0])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Yt({name:"ordinal",type:t,pure:!0}),t})();const jk=function(t){return{active:t}};function Vk(t,e){if(1&t){const t=zs();Os(0,"button",11),js("click",function(){Me(t);const n=e.$implicit;return Gs(2).onFloorPick(n)}),Ea(1),Os(2,"span"),Ea(3),ru(4,"ordinal"),Ms(),Ms()}if(2&t){const t=e.$implicit,n=Gs(2);Ps("ngClass",Yl(6,jk,t.level===n.stateService.state.floor.level)),Xi(1),Ca(" ",t.level+1,""),Xi(2),Sa(ou(4,3,t.level+1,!1))}}function Uk(t,e){if(1&t&&(Os(0,"div",9),Is(1,Vk,5,8,"button",10),Ms()),2&t){const t=Gs();Xi(1),Ps("ngForOf",t.stateService.state.floors)}}const $k=function(t){return{open:t}},qk=function(){return["fal","chevron-up"]},Gk=function(){return["fal","chevron-down"]},Hk=function(){return["fal","chevron-left"]},Zk=function(){return["fal","chevron-right"]},Wk=function(){return["fal","chevron-double-left"]},Xk=function(){return["fal","chevron-double-right"]};let Yk=(()=>{class t{constructor(t,e){this.sidebarService=t,this.stateService=e,this.sidebarOpened=!0,this.pickerOpened=!1}ngOnInit(){}onFloorChange(t){this.sidebarService.floorChangeListener.next(t)}onFloorPick(t){this.sidebarService.floorChangeListener.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Ts(Nv),Ts(Lv))},t.\u0275cmp=$t({type:t,selectors:[["app-floor-picker"]],decls:18,vars:19,consts:[[1,"container",3,"ngClass"],[1,"title"],[1,"selector"],[1,"current-floor",3,"click"],[3,"icon"],[1,"floor-toggle"],[3,"click"],["class","picker",4,"ngIf"],[1,"toggle",3,"click"],[1,"picker"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(t,e){1&t&&(Os(0,"div",0),Os(1,"h3",1),Ea(2,"Floor"),Ms(),Os(3,"div",2),Os(4,"button",3),js("click",function(){return e.pickerOpened=!e.pickerOpened}),Ea(5),Os(6,"span"),Ea(7),ru(8,"ordinal"),Ms(),Ls(9,"fa-icon",4),Ms(),Os(10,"div",5),Os(11,"button",6),js("click",function(){return e.onFloorChange("down")}),Ls(12,"fa-icon",4),Ms(),Os(13,"button",6),js("click",function(){return e.onFloorChange("up")}),Ls(14,"fa-icon",4),Ms(),Ms(),Ms(),Is(15,Uk,2,1,"div",7),Os(16,"div",8),js("click",function(){return e.sidebarOpened=!e.sidebarOpened}),Ls(17,"fa-icon",4),Ms(),Ms()),2&t&&(Ps("ngClass",Yl(11,$k,e.sidebarOpened)),Xi(5),Ca(" ",e.stateService.state.floor.level+1,""),Xi(2),Sa(ou(8,8,e.stateService.state.floor.level+1,!1)),Xi(2),Ps("icon",e.pickerOpened?Xl(13,qk):Xl(14,Gk)),Xi(3),Ps("icon",Xl(15,Hk)),Xi(2),Ps("icon",Xl(16,Zk)),Xi(1),Ps("ngIf",e.pickerOpened),Xi(2),Ps("icon",e.sidebarOpened?Xl(17,Wk):Xl(18,Xk)))},directives:[Kc,Jb,eh,Qc],pipes:[Bk],styles:[".container[_ngcontent-%COMP%]{padding:1rem 4rem 1rem 2rem;background-color:hsla(0,0%,100%,.9);box-shadow:0 0 15px rgba(0,0,0,.1);border-radius:0 10px 10px 0;margin-bottom:1rem;left:0;min-height:143px;z-index:0}.container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;transition:all .25s linear}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#6b50d0}.container[_ngcontent-%COMP%]:not(.open){left:-390px}.container[_ngcontent-%COMP%]:not(.open)   .title[_ngcontent-%COMP%]{position:absolute;right:28px;top:calc(50% - 30px);transform:rotate(-90deg)}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;color:#fff;padding:1rem;cursor:pointer;transition:all .25s linear;margin-right:10px}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{vertical-align:super;font-weight:500}.container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{margin-bottom:15px}.container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:32px;font-weight:700;background-color:#444;padding-left:1.5rem;padding-right:1.5rem;border-radius:15px}.container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2b2b2b}.container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   button.current-floor[_ngcontent-%COMP%]{background-color:#6b50d0}.container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   button.current-floor[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-left:20px}.container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   button.current-floor[_ngcontent-%COMP%]:hover{background-color:#6144cd}.container[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]   .floor-toggle[_ngcontent-%COMP%]{display:inline-block;float:right}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:22px;font-weight:700;background-color:#6b50d0;border-radius:10px}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#7c64d5}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:14px}.container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(.active){background-color:#6144cd}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:calc(50% - 20px);font-size:26px;color:#6b50d0;padding:.5rem;cursor:pointer}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:hover{color:#6144cd}"]}),t})();const Kk=new Hn("CdkAccordion");let Jk=0,Qk=(()=>{class t{constructor(t,e,n){this.accordion=t,this._changeDetectorRef=e,this._expansionDispatcher=n,this._openCloseAllSubscription=h.EMPTY,this.closed=new uu,this.opened=new uu,this.destroyed=new uu,this.expandedChange=new uu,this.id="cdk-accordion-child-"+Jk++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=n.listen((t,e)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===e&&this.id!==t&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=fg(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=fg(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return t.\u0275fac=function(e){return new(e||t)(Ts(Kk,12),Ts(wl),Ts(ly))},t.\u0275dir=Xt({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[$a([{provide:Kk,useValue:void 0}])]}),t})(),tT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})();const eT=["body"];function nT(t,e){}const rT=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],iT=["mat-expansion-panel-header","*","mat-action-row"],oT=new Hn("MAT_ACCORDION"),sT={indicatorRotate:iS("indicatorRotate",[lS("collapsed, void",aS({transform:"rotate(0deg)"})),lS("expanded",aS({transform:"rotate(180deg)"})),uS("expanded <=> collapsed, void => collapsed",oS("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),bodyExpansion:iS("bodyExpansion",[lS("collapsed, void",aS({height:"0px",visibility:"hidden"})),lS("expanded",aS({height:"*",visibility:"visible"})),uS("expanded <=> collapsed, void => collapsed",oS("225ms cubic-bezier(0.4,0.0,0.2,1)"))])};let aT=(()=>{class t{constructor(t){this._template=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kl))},t.\u0275dir=Xt({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),t})(),lT=0;const uT=new Hn("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let cT=(()=>{class t extends Qk{constructor(t,e,n,r,i,o,s){super(t,e,n),this._viewContainerRef=r,this._animationMode=o,this._hideToggle=!1,this.afterExpand=new uu,this.afterCollapse=new uu,this._inputChanges=new E,this._headerId="mat-expansion-panel-header-"+lT++,this._bodyAnimationDone=new E,this.accordion=t,this._document=i,this._bodyAnimationDone.pipe(function(t,e){return e=>e.lift(new Rg(t,undefined))}((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{"void"!==t.fromState&&("expanded"===t.toState?this.afterExpand.emit():"collapsed"===t.toState&&this.afterCollapse.emit())}),s&&(this.hideToggle=s.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=fg(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Zp(null),Zh(()=>this.expanded&&!this._portal),qp(1)).subscribe(()=>{this._portal=new _y(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,e=this._body.nativeElement;return t===e||e.contains(t)}return!1}}return t.\u0275fac=function(e){return new(e||t)(Ts(oT,12),Ts(wl),Ts(ly),Ts(Nl),Ts(Pc),Ts(wI,8),Ts(uT,8))},t.\u0275cmp=$t({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(t,e,n){if(1&t&&Eu(n,aT,1),2&t){let t;xu(t=Su())&&(e._lazyContent=t.first)}},viewQuery:function(t,e){if(1&t&&wu(eT,1),2&t){let t;xu(t=Su())&&(e._body=t.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,e){2&t&&ua("mat-expanded",e.expanded)("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-expansion-panel-spacing",e._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[$a([{provide:oT,useValue:void 0}]),hs,ae],ngContentSelectors:iT,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,e){1&t&&(Zs(rT),Ws(0),Os(1,"div",0,1),js("@bodyExpansion.done",function(t){return e._bodyAnimationDone.next(t)}),Os(3,"div",2),Ws(4,1),Is(5,nT,0,0,"ng-template",3),Ms(),Ws(6,2),Ms()),2&t&&(Xi(1),Ps("@bodyExpansion",e._getExpandedState())("id",e.id),Ss("aria-labelledby",e._headerId),Xi(4),Ps("cdkPortalOutlet",e._portal))},directives:[vy],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[sT.bodyExpansion]},changeDetection:0}),t})(),hT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),t})(),pT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ch,TI,tT,by]]}),t})(),dT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[TI],TI]}),t})();const fT=["*"],_T=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],mT=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"];class gT{}const yT=PI(OI(gT));class vT{}const bT=OI(vT),xT=new Hn("MatList"),wT=new Hn("MatNavList");let ET=(()=>{class t extends yT{constructor(t){super(),this._elementRef=t,this._stateChanges=new E,"action-list"===this._getListType()&&t.nativeElement.classList.add("mat-action-list")}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya))},t.\u0275cmp=$t({type:t,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[$a([{provide:xT,useExisting:t}]),hs,ae],ngContentSelectors:fT,decls:1,vars:0,template:function(t,e){1&t&&(Zs(),Ws(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),t})(),ST=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),t})(),CT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),t})(),IT=(()=>{class t extends bT{constructor(t,e,n,r){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new E,this._disabled=!1,this._isInteractiveList=!!(n||r&&"action-list"===r._getListType()),this._list=n||r;const i=this._getHostElement();"button"!==i.nodeName.toLowerCase()||i.hasAttribute("type")||i.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(qg(this._destroyed)).subscribe(()=>{e.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=fg(t)}ngAfterContentInit(){!function(t,e,n="mat"){t.changes.pipe(Zp(t)).subscribe(({length:t})=>{DI(e,`${n}-2-line`,!1),DI(e,`${n}-3-line`,!1),DI(e,`${n}-multi-line`,!1),2===t||3===t?DI(e,`${n}-${t}-line`,!0):t>3&&DI(e,`${n}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya),Ts(wl),Ts(wT,8),Ts(xT,8))},t.\u0275cmp=$t({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,e,n){if(1&t&&(Eu(n,ST,1),Eu(n,CT,1),Eu(n,NI,1)),2&t){let t;xu(t=Su())&&(e._avatar=t.first),xu(t=Su())&&(e._icon=t.first),xu(t=Su())&&(e._lines=t)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(t,e){2&t&&ua("mat-list-item-disabled",e.disabled)("mat-list-item-avatar",e._avatar||e._icon)("mat-list-item-with-avatar",e._avatar||e._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[hs],ngContentSelectors:mT,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,e){1&t&&(Zs(_T),Os(0,"div",0),Ls(1,"div",1),Ws(2),Os(3,"div",2),Ws(4,1),Ms(),Ws(5,2),Ms()),2&t&&(Xi(1),Ps("matRippleTrigger",e._getHostElement())("matRippleDisabled",e._isRippleDisabled()))},directives:[qI],encapsulation:2,changeDetection:0}),t})(),kT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[RI,GI,TI,HI,ch],RI,TI,HI,dT]}),t})();const TT=function(){return["fal","angle-down"]};function PT(t,e){if(1&t){const t=zs();Os(0,"a",15),js("click",function(){Me(t);const e=Gs(2);return e.limit=e.details.length,e.showingMore=!0}),Ea(1,"Show more "),Ls(2,"fa-icon",3),Ms()}2&t&&(Xi(2),Ps("icon",Xl(1,TT)))}const AT=function(){return["fal","angle-up"]};function OT(t,e){if(1&t){const t=zs();Os(0,"a",15),js("click",function(){Me(t);const e=Gs(2);return e.limit=200,e.showingMore=!1}),Ea(1,"Show less "),Ls(2,"fa-icon",3),Ms()}2&t&&(Xi(2),Ps("icon",Xl(1,AT)))}function MT(t,e){if(1&t&&(Os(0,"mat-list-item"),Os(1,"p",16),Ls(2,"fa-icon",3),Ls(3,"fa-icon",3),Ms(),Os(4,"p",16),Ea(5),Ms(),Ms()),2&t){const t=e.$implicit;Xi(2),Ps("icon",t.directionIcon),Xi(1),Ps("icon",t.stepIcon),Xi(2),Ca(" ",t.description," ")}}const LT=function(){return["fal","times"]},NT=function(t){return{accessibleOnly:t}},DT=function(){return["fal","wheelchair"]},RT=function(){return["fal","route"]},zT=function(){return["fal","walking"]};function FT(t,e){if(1&t){const t=zs();Os(0,"div",1),Os(1,"button",2),js("click",function(){return Me(t),Gs().onDetailsClose()}),Ls(2,"fa-icon",3),Ms(),Os(3,"div",4),Ls(4,"img",5),Ms(),Os(5,"div",6),Os(6,"h2",7),Ea(7),Ms(),Os(8,"h4",8),Ea(9),Ms(),Os(10,"h4",9),Ea(11),ru(12,"ordinal"),Ms(),Os(13,"p"),Ea(14),ru(15,"slice"),Is(16,PT,3,2,"a",10),Is(17,OT,3,2,"a",10),Ms(),Os(18,"button",11),js("click",function(){return Me(t),Gs().toggleInstructions()}),Ls(19,"fa-icon",3),Ea(20),Ms(),Os(21,"button",12),js("click",function(){return Me(t),Gs().toggleAccessibleRoute()}),Ls(22,"fa-icon",3),Ea(23),Ms(),Os(24,"mat-expansion-panel",13),Os(25,"mat-panel-description"),Os(26,"mat-list"),Is(27,MT,6,3,"mat-list-item",14),Ms(),Ms(),Ms(),Ms(),Ms()}if(2&t){const t=Gs();Xi(2),Ps("icon",Xl(24,LT)),Xi(2),Ps("src",t.poi.properties.images[0]?t.getImageUrl():"https://picsum.photos/500/300",ti)("alt",t.poi.properties.title),Xi(1),Ps("ngClass",Yl(25,NT,t.stateService.state.accessibleRoute)),Xi(2),Sa(t.poi.properties.title),Xi(2),Sa(t.getOpenHours()),Xi(2),Ca("",iu(12,18,t.poi.properties.level+1)," floor"),Xi(3),Ia(" ",function(t,e,n,r,i){const o=Ae(),s=be(o,35);return au(o,su(o,35)?nu(o,je(),20,s.transform,n,0,i,s):s.transform(n,0,i))}(0,0,t.details,0,t.limit)," ",t.details.length>t.limit?"...":""," "),Xi(2),Ps("ngIf",t.details.length>t.limit),Xi(1),Ps("ngIf",t.showingMore),Xi(2),Ps("icon",t.showInstructions?Xl(27,TT):t.stateService.state.accessibleRoute?Xl(28,DT):Xl(29,RT)),Xi(1),Ca(" ",t.showInstructions?"Hide":"Show"," instructions "),Xi(2),Ps("icon",t.stateService.state.accessibleRoute?Xl(30,zT):Xl(31,DT)),Xi(1),Ca(" ",t.stateService.state.accessibleRoute?"Show fastest route":"Show accessible route"," "),Xi(1),Ps("disabled",!0)("expanded",t.showInstructions),Xi(3),Ps("ngForOf",t.steps)}}let BT=(()=>{class t{constructor(t,e,n){this.authService=t,this.sidebarService=e,this.stateService=n,this.showInstructions=!1,this.steps=[],this.details="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",this.limit=200,this.showingMore=!1,this.poi=this.sidebarService.selectedEndPoi}ngOnInit(){this.sub=this.sidebarService.getEndPointListener().subscribe(t=>{t&&(this.poi=t,this.poi.properties.metadata&&this.poi.properties.metadata.description&&(this.details=this.poi.properties.metadata.description.en),this.stateService.state.textNavigation&&this.buildNavigationSteps(this.stateService.state.textNavigation.steps))})}onDetailsClose(){this.sidebarService.onSetEndPoi(null)}toggleInstructions(){this.showInstructions=!this.showInstructions}toggleAccessibleRoute(){this.sidebarService.onAccessibleRouteToggle()}getImageUrl(){return`https://api.proximi.fi/v5/geo/${this.poi.properties.images[0]}?token=${this.authService.getToken()}`}getOpenHours(){const t=(new Date).getDay();return this.poi.properties.metadata&&this.poi.properties.metadata.openHours&&this.poi.properties.metadata.openHours[t].en?this.poi.properties.metadata.openHours[t].en:"No open hours available"}buildNavigationSteps(t){t=t.filter(t=>t.instruction),this.steps=t.map(t=>{let e,n;switch(t.direction){case"LEFT":case"SLIGHT_LEFT":e="arrow-left",n="shoe-prints";break;case"RIGHT":case"SLIGHT_RIGHT":e="arrow-right",n="shoe-prints";break;case"UP_ESCALATOR":e="arrow-up",n="caret-square-up";break;case"DOWN_ESCALATOR":e="arrow-up",n="caret-square-down";break;case"FINISH":e="arrow-up",n="pennant";break;default:e="compass",n="shoe-prints"}return{description:t.instruction.join(""),directionIcon:["fal",e],stepIcon:["fal",n]}})}ngOnDestroy(){this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ts(Am),Ts(Nv),Ts(Lv))},t.\u0275cmp=$t({type:t,selectors:[["app-details"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"close",3,"click"],[3,"icon"],[1,"img-holder"],[3,"src","alt"],[1,"content",3,"ngClass"],[1,"title"],[1,"open-hours"],[1,"level"],["href","javascript:;",3,"click",4,"ngIf"],[1,"instructions-toggle",3,"click"],[1,"accessible-toggle",3,"click"],[3,"disabled","expanded"],[4,"ngFor","ngForOf"],["href","javascript:;",3,"click"],["matLine",""]],template:function(t,e){1&t&&Is(0,FT,28,32,"div",0),2&t&&Ps("ngIf",e.poi)},directives:[eh,Jb,Kc,cT,hT,ET,Qc,IT,NI],pipes:[Bk,uh],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 15px rgba(0,0,0,.1);border-radius:0 10px 10px 0;margin-bottom:1rem;position:relative;left:0;transition:all .25s linear;min-height:143px;z-index:0;max-height:calc(100vh - 150px);overflow-x:hidden;overflow-y:auto}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px;color:#fff;background:#6b50d0;border:0;border-radius:15px;padding:.5rem .8rem;font-size:20px}.container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background:#6144cd}.container[_ngcontent-%COMP%]   .img-holder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1rem 4rem 1rem 2rem;background:#fff;position:relative;top:-20px;border-radius:0 20px 0 0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#6b50d0;margin-bottom:5px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .open-hours[_ngcontent-%COMP%]{color:#6b50d0;margin-bottom:0;font-weight:400}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;font-size:14px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:14px;letter-spacing:.5px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-weight:500;color:#222;margin-top:10px;text-decoration:none}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#6b50d0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:.5rem;cursor:pointer;background:#fff;text-align:center;border-radius:5px;font-weight:500;padding:.5rem;outline:0;transition:all .25s linear}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:.5rem}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]:hover{opacity:.7;transform:scale(1.05)}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]{border:2px solid #6b50d0;color:#6b50d0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]{border:0;color:#bd52ff}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]    {box-shadow:none;background:#fff}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-list-item{border-top:1px dashed #6b50d0;color:#222}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-list-item .mat-list-item-content{padding:0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-list-item .mat-list-item-content .mat-list-text p:first-child{color:#6b50d0}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-list-item .mat-list-item-content .mat-list-text p:first-child fa-icon{margin-right:5px}.container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-list-item .mat-list-item-content .mat-list-text p:last-child{margin-top:5px}.container[_ngcontent-%COMP%]   .content.accessibleOnly[_ngcontent-%COMP%]   .instructions-toggle[_ngcontent-%COMP%]{border-color:#bd52ff;color:#bd52ff}.container[_ngcontent-%COMP%]   .content.accessibleOnly[_ngcontent-%COMP%]   .accessible-toggle[_ngcontent-%COMP%]{color:#6b50d0}.container[_ngcontent-%COMP%]   .content.accessibleOnly[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-list-item{border-color:#bd52ff}.container[_ngcontent-%COMP%]   .content.accessibleOnly[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]     .mat-list-item .mat-list-text p:first-child{color:#bd52ff}"]}),t})();function jT(t,e){if(1&t&&(Os(0,"li"),Os(1,"div",6),Ls(2,"fa-icon",5),Ms(),Os(3,"p"),Ea(4),Ms(),Ms()),2&t){const t=e.$implicit;Xi(2),Ps("icon",t.icon),Xi(2),Sa(t.title)}}const VT=function(t){return{open:t}},UT=function(){return["fal","chevron-double-left"]},$T=function(){return["fal","chevron-double-right"]};let qT=(()=>{class t{constructor(){this.sidebarOpened=!0,this.data=[{title:"Caf\xe9s",icon:["fal","coffee"]},{title:"Clothing",icon:["fal","tshirt"]},{title:"Groceries",icon:["fal","shopping-cart"]},{title:"Restaurants",icon:["fal","utensils"]},{title:"Shoes",icon:["fal","boot"]}]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$t({type:t,selectors:[["app-shop-picker"]],decls:7,vars:7,consts:[[1,"container",3,"ngClass"],[1,"title"],[1,"categories"],[4,"ngFor","ngForOf"],[1,"toggle",3,"click"],[3,"icon"],[1,"icon"]],template:function(t,e){1&t&&(Os(0,"div",0),Os(1,"h3",1),Ea(2,"Shops & Restaurants"),Ms(),Os(3,"ul",2),Is(4,jT,5,2,"li",3),Ms(),Os(5,"div",4),js("click",function(){return e.sidebarOpened=!e.sidebarOpened}),Ls(6,"fa-icon",5),Ms(),Ms()),2&t&&(Ps("ngClass",Yl(3,VT,e.sidebarOpened)),Xi(4),Ps("ngForOf",e.data),Xi(2),Ps("icon",e.sidebarOpened?Xl(5,UT):Xl(6,$T)))},directives:[Kc,Qc,Jb],styles:[".container[_ngcontent-%COMP%]{padding:1rem 4rem 1rem 2rem;background-color:hsla(0,0%,100%,.9);box-shadow:0 0 15px rgba(0,0,0,.1);border-radius:0 10px 10px 0;margin-bottom:1rem;left:0;min-height:200px;z-index:0}.container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;transition:all .25s linear}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#6b50d0}.container[_ngcontent-%COMP%]:not(.open){left:-390px}.container[_ngcontent-%COMP%]:not(.open)   .title[_ngcontent-%COMP%]{position:absolute;right:-36px;top:calc(50% - 30px);transform:rotate(-90deg)}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-right:10px;width:60px;vertical-align:top}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#6b50d0;color:#fff;font-size:22px;border-radius:10px;width:60px;height:60px;line-height:60px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:calc(50% - 20px);font-size:26px;color:#6b50d0;padding:.5rem;cursor:pointer}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:hover{color:#6144cd}"]}),t})();function GT(t,e){if(1&t&&(Os(0,"li"),Os(1,"div",6),Ls(2,"fa-icon",5),Ms(),Os(3,"p"),Ea(4),Ms(),Ms()),2&t){const t=e.$implicit;Xi(2),Ps("icon",t.icon),Xi(2),Sa(t.title)}}const HT=function(t){return{open:t}},ZT=function(){return["fal","chevron-double-left"]},WT=function(){return["fal","chevron-double-right"]};let XT=(()=>{class t{constructor(){this.sidebarOpened=!0,this.data=[{title:"Toilet",icon:["fal","toilet"]},{title:"Accessible toilet",icon:["fal","wheelchair"]},{title:"Baby changing",icon:["fal","baby"]},{title:"Emergency care",icon:["fal","stethoscope"]},{title:"ATM",icon:["fal","money-bill"]}]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$t({type:t,selectors:[["app-amenity-picker"]],decls:7,vars:7,consts:[[1,"container",3,"ngClass"],[1,"title"],[1,"categories"],[4,"ngFor","ngForOf"],[1,"toggle",3,"click"],[3,"icon"],[1,"icon"]],template:function(t,e){1&t&&(Os(0,"div",0),Os(1,"h3",1),Ea(2,"Search for amenities"),Ms(),Os(3,"ul",2),Is(4,GT,5,2,"li",3),Ms(),Os(5,"div",4),js("click",function(){return e.sidebarOpened=!e.sidebarOpened}),Ls(6,"fa-icon",5),Ms(),Ms()),2&t&&(Ps("ngClass",Yl(3,HT,e.sidebarOpened)),Xi(4),Ps("ngForOf",e.data),Xi(2),Ps("icon",e.sidebarOpened?Xl(5,ZT):Xl(6,WT)))},directives:[Kc,Qc,Jb],styles:[".container[_ngcontent-%COMP%]{padding:1rem 4rem 1rem 2rem;background-color:hsla(0,0%,100%,.9);box-shadow:0 0 15px rgba(0,0,0,.1);border-radius:0 10px 10px 0;margin-bottom:1rem;left:0;min-height:200px;z-index:0}.container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:relative;transition:all .25s linear}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#bd52ff}.container[_ngcontent-%COMP%]:not(.open){left:-390px}.container[_ngcontent-%COMP%]:not(.open)   .title[_ngcontent-%COMP%]{position:absolute;right:-36px;top:calc(50% - 30px);transform:rotate(-90deg)}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-right:10px;width:60px;vertical-align:top}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#bd52ff;color:#fff;font-size:22px;border-radius:10px;width:60px;height:60px;line-height:60px}.container[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{position:absolute;right:.5rem;top:calc(50% - 20px);font-size:26px;color:#bd52ff;padding:.5rem;cursor:pointer}.container[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]:hover{color:#b743ff}"]}),t})();function YT(t,e){1&t&&(Ns(0),Ls(1,"app-shop-picker"),Ls(2,"app-amenity-picker"),Ds())}let KT=(()=>{class t{constructor(t){this.sidebarService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(Ts(Nv))},t.\u0275cmp=$t({type:t,selectors:[["app-sidebar"]],decls:5,vars:2,consts:[[4,"ngIf"],[3,"hidden"]],template:function(t,e){1&t&&(Ls(0,"app-search"),Ls(1,"app-floor-picker"),Is(2,YT,3,0,"ng-container",0),Ns(3),Ls(4,"app-details",1),Ds()),2&t&&(Xi(2),Ps("ngIf",!e.sidebarService.selectedEndPoi),Xi(2),Ps("hidden",!e.sidebarService.selectedEndPoi))},directives:[zk,Yk,eh,BT,qT,XT],styles:[""]}),t})(),JT=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class QT{constructor(t){this.type=t.type,this.coordinates=t.coordinates}}class tP{constructor(t){this.type="FeatureCollection",this.features=(t.features||[]).map(t=>new eP(t).json)}get json(){return{type:"FeatureCollection",features:this.features.map(t=>t.json)}}}class eP extends Ky{constructor(t){super(t),this.type="Feature",this.id=t.id,this.geometry=new QT(t.geometry),this.properties=t.properties||{},"string"==typeof this.properties.title_i18n&&(this.properties.title_i18n=JSON.parse(this.properties.title_i18n)),this.isPoint&&(this.properties.images||(this.properties.images=[]),this.properties.range||(this.properties.range=3)),"string"==typeof this.properties.images&&(this.properties.images=JSON.parse(this.properties.images)),this.isLevelChanger&&Array.isArray(this.properties.levels)&&this.properties.levels.forEach(t=>this.properties[`__level_${t}`]=!0),"text"===this.properties.type&&Array.isArray(this.properties.textFont)&&(this.properties.textFont=this.properties.textFont[0])}get isEditable(){return this.isPoint||this.isLineString||this.isPolygon}get isPoint(){return"Point"===this.geometry.type}get isPolygon(){return"Polygon"===this.geometry.type||"MultiPolygon"===this.geometry.type}get isLineString(){return"LineString"===this.geometry.type||"MultiLineString"===this.geometry.type}get isHazard(){return"hazard"===this.properties.type}get isLandmark(){return"landmark"===this.properties.type}get isDoor(){return"door"===this.properties.type}get isEntrance(){return"entrance"===this.properties.type}get isDecisionPoint(){return"decision"===this.properties.type}get isTicketGate(){return"ticket_gate"===this.properties.type}get isElevator(){return"elevator"===this.properties.type}get isEscalator(){return"escalator"===this.properties.type}get isStairCase(){return"staircase"===this.properties.type}get isLevelChanger(){return this.isElevator||this.isEscalator||this.isStairCase}get isText(){return"text"===this.properties.type}get isSynthetic(){const t=["id","place_id","floor_id","level"];return"LineString"!==this.geometry.type&&"MultiLineString"!==this.geometry.type||t.push("class"),0===Object.keys(this.properties).map(e=>!t.includes(e)).filter(t=>t).length}get isRoom(){return this.properties.room}get isRouting(){return"routing"===this.properties.usecase}get json(){this.properties.cameFrom&&delete this.properties.cameFrom,this.properties.fixedPointMap&&delete this.properties.fixedPointMap;const t=JSON.parse(JSON.stringify(this));if(t.properties.metadata&&"object"!=typeof t.properties.metadata)try{t.properties.metadata=JSON.parse(t.properties.metadata)}catch(iL){console.log("feature parsing failed:",t.properties.metadata)}return Object.keys(t.properties).forEach(e=>{e.match("__level")&&delete t.properties.key}),t}static point(t,e,n,r){return new eP({id:t,geometry:{type:"Point",coordinates:[n,e]},properties:r})}setTitle(t,e="en"){void 0===this.properties.title_18n&&(this.properties.title_18n={}),this.properties.title_18n[e]=t}hasLevel(t){return this.isLevelChanger?this.properties.levels.includes(t):this.properties.level===t}}class nP extends tv{constructor(t,e){super(),this.id=t,this.type=e}get source(){return{type:this.type}}}class rP extends nP{constructor(t,e){super(t,"geojson"),this.cluster=!1,this.clusterRadius=50,this.clusterMaxZoom=19,this.isEditable=!0,this.data=e||new tP({})}get source(){return{type:this.type,data:this.data,cluster:this.cluster,clusterMaxZoom:this.clusterMaxZoom,clusterRadius:this.clusterRadius}}}var iP=n("WVt+");class oP{constructor(t){let e,n,r=t.features;if(r.forEach(t=>{let r=t.properties.level;(void 0===e||r<e)&&(e=r),(void 0===n||n<r)&&(n=r),void 0!==t.properties.levels&&t.properties.levels.forEach(t=>{(void 0===e||t<e)&&(e=t),(void 0===n||n<t)&&(n=t)})}),void 0===e)throw"No feature with level was supplied!";let i=r.filter(t=>t.properties.routable&&("MultiPolygon"===t.geometry.type||"Polygon"===t.geometry.type)),o=new Map;for(let c=e;c<=n;c++){let t=i.find(t=>t.properties.level===c);o.set(c,iP.featureCollection(void 0!==t?[t]:[]))}let s=r.filter(t=>"path"===t.properties.class),a=r.filter(t=>"elevator"===t.properties.type||"escalator"===t.properties.type||"staircase"===t.properties.type);a.forEach(t=>{void 0===t.id&&(t.id=t.properties.id)});let l=["door","ticket_gate"],u=r.filter(t=>l.includes(t.properties.type));a.forEach(t=>{if(void 0===t.properties.levels&&void 0!==t.properties.level_min&&void 0!==t.properties.level_max){t.properties.levels=[];for(let e=t.properties.level_min;e<=t.properties.level_max;e++)t.properties.levels.push(e)}}),this._legacyConstructor(o,a,s,u)}_legacyConstructor(t,e,n,r){this.wallOffsetDistance=.5,this.floorList=t,this.levelChangerList=e,this.accessibilityPoi=r,this.corridors=[...n.filter(t=>"LineString"===t.geometry.type)],this.rebuildData(),this.configuration={avoidElevators:!1,avoidEscalators:!1,avoidStaircases:!1,avoidRamps:!1,avoidNarrowPaths:!1,avoidRevolvingDoors:!1,avoidTicketGates:!1,avoidBarriers:!1},this.POI_TYPE={ELEVATOR:"elevator",ESCALATOR:"escalator",STAIRCASE:"staircase",RAMP:"ramp",NARROW_PATH:"narrow_path",REVOLVING_DOOR:"door",TICKET_GATE:"ticket_gate",BARRIER:"barrier"},this._pathFixDistance=1}setConfiguration(t,e=1){Object.keys(t).forEach(e=>{this.configuration.hasOwnProperty(e)&&(this.configuration[e]=t[e])}),this._pathFixDistance=e}rebuildData(){let t=new Map;this.floorList.forEach((e,n)=>{let r=[],i=[],o=[];e.features.forEach((t,e)=>{iP.flatten(iP.polygonToLine(t)).features.map(t=>t.geometry).forEach(t=>{let e,o;for(let s=0;s<t.coordinates.length-1;s++){let a;0===s?(e=iP.point(t.coordinates[s]),e.properties.level=n,e.properties.neighbours=[],a=e):a=o,s===t.coordinates.length-2?o=e:(o=iP.point(t.coordinates[s+1]),o.properties.level=n,o.properties.neighbours=[]),a.properties.neighbours.push(o),o.properties.neighbours.push(a),r.push(a),i.push([a,o])}}),o=o.concat(iP.flatten(t).features)}),t.set(n,{areas:o,points:r,walls:i,wallFeatures:i.map(t=>iP.lineString([t[0].geometry.coordinates,t[1].geometry.coordinates]))})}),this.bearingCache=new Map,this.floorData=t,this.floorData.forEach((t,e)=>{this.accessibilityPoi.filter(t=>e===t.properties.level).filter(e=>t.areas.filter(t=>iP.booleanContains(t,e)).length>0).forEach(n=>{let r=[iP.destination(n.geometry.coordinates,n.properties.radius+this.wallOffsetDistance,0,{units:"meters"}),iP.destination(n.geometry.coordinates,n.properties.radius+this.wallOffsetDistance,60,{units:"meters"}),iP.destination(n.geometry.coordinates,n.properties.radius+this.wallOffsetDistance,120,{units:"meters"}),iP.destination(n.geometry.coordinates,n.properties.radius+this.wallOffsetDistance,180,{units:"meters"}),iP.destination(n.geometry.coordinates,n.properties.radius+this.wallOffsetDistance,-120,{units:"meters"}),iP.destination(n.geometry.coordinates,n.properties.radius+this.wallOffsetDistance,-60,{units:"meters"})].filter(e=>t.areas.filter(t=>iP.booleanContains(t,e)).length>0);r.forEach(t=>{t.properties.level=e,t.properties.isDetourPoint=!0}),t.points=t.points.concat(r),this.detourPointList=r})});let e=[],n=[];this.corridors.forEach((t,r)=>{let i=t.geometry.coordinates,o=null;for(let s=0;s<i.length-1;s++){let r;null!=o?r=o:(r=iP.point(i[s]),r.properties.neighbours=[],r.properties.level=t.properties.level);let a=iP.point(i[s+1]);a.properties.level=t.properties.level,a.properties.neighbours=[],0==t.properties.bidirectional&&0==t.properties.swapDirection||r.properties.neighbours.push(a),0==t.properties.bidirectional&&1!=t.properties.swapDirection||a.properties.neighbours.push(r);let l=iP.lineString([r.geometry.coordinates,a.geometry.coordinates]);l.properties.level=t.properties.level,l.properties.bidirectional=t.properties.bidirectional,l.properties.swapDirection=t.properties.swapDirection,t.properties.narrowPath&&(r.properties.narrowPath=!0,a.properties.narrowPath=!0,l.properties.narrowPath=!0),t.properties.ramp&&(r.properties.ramp=!0,a.properties.ramp=!0,l.properties.ramp=!0),e.push([r,a]),n.push(l),o=a}});let r=[],i=new Map,o=0;for(o=0;o<e.length;){let t=e[o],s=n[o];i.has(o)||i.set(o,[]);for(let a=o+1;a<e.length;a++){i.has(a)||i.set(a,[]);let l=e[a];if(s.properties.level!==n[a].properties.level)continue;if(l.includes(t[0])||l.includes(t[1]))continue;let u=n[a],c=iP.lineIntersect(s,u).features;if(c.length>0){let e=c[0];e.properties.level=t[0].properties.level,e.properties.isCorridorPoint=!0,(s.properties.narrowPath||u.properties.narrowPath)&&(e.properties.narrowPath=!0),(s.properties.ramp||u.properties.ramp)&&(e.properties.ramp=!0),i.get(o).push(e),i.get(a).push(e),r.push(e)}}o++}for(o=0;o<e.length;){let t=e[o],r=n[o],s=t[0],a=t[1],l=i.get(o);l.sort((t,e)=>this._comparePointsByDistanceFromReference(s,t,e)),l?(l.forEach(t=>{if(this._setNeighbourhoodBasedOnCorridorDirectionality(r,s,a,t),0!=r.properties.bidirectional)t.properties.neighbours=t.properties.neighbours.concat(l.filter(e=>e!==t));else if(1!=r.properties.swapDirection){let e=l.slice(l.indexOf(t));t.properties.neighbours.push(...e)}else{let e=l.slice(0,l.indexOf(t));t.properties.neighbours.push(...e)}}),n[o].properties.intersectionPointList=l):n[o].properties.intersectionPointList=[],o++}let s=[];for(o=0;o<e.length;){let t=e[o],r=n[o],i=[],a=this.floorData.get(t[0].properties.level).walls;if(this.floorData.get(t[0].properties.level).wallFeatures.forEach((e,n)=>{let o=iP.lineIntersect(r,e).features;if(o.length>0){let e=o[0];e.properties.level=t[0].properties.level,e.properties.neighbours=[],e.properties.bordersArea=!0,r.properties.narrowPath&&(e.properties.narrowPath=!0),r.properties.ramp&&(e.properties.ramp=!0);let s=this._distance(t[0],e);i.push({point:e,distance:s,wallIndex:n})}}),i.length>0){i.sort((t,e)=>t.distance-e.distance);let e=t[0];i.forEach((t,r)=>{e.properties.neighbours.push(t.point),a[t.wallIndex][0].properties.neighbours.push(t.point),a[t.wallIndex][1].properties.neighbours.push(t.point),t.point.properties.neighbours.push(e,a[t.wallIndex][0],a[t.wallIndex][1]),t.point.properties.neighbours.push(...n[o].properties.intersectionPointList),n[o].properties.intersectionPointList.forEach(e=>e.properties.neighbours.push(t.point)),e=t.point,n[o].properties.intersectionPointList.push(t.point)}),iP.lineString([e.geometry.coordinates,t[1].geometry.coordinates]).properties.level=e.properties.level,t[1].properties.neighbours.push(e),e.properties.neighbours.push(t[1]),s.push(...i.map(t=>t.point))}o++}s.forEach(t=>{this.floorData.get(t.properties.level).points.push(t)}),s.forEach(t=>{let e=this._findNeighbours(t,null,null,this.floorData.get(t.properties.level).points);t.properties.neighbours.push(...e)}),this.corridorLinePointPairs=e,this.corridorLineFeatures=n,this.corridorLinePoints=[],this.corridorLinePointPairs.forEach(t=>{t[0].properties.isCorridorPoint=!0,t[1].properties.isCorridorPoint=!0,this.corridorLinePoints.includes(t[0])||this.corridorLinePoints.push(t[0]),this.corridorLinePoints.includes(t[1])||this.corridorLinePoints.push(t[1])}),this.corridorLinePoints=this.corridorLinePoints.concat(r);let a=new Map;this.levelChangerList.forEach(t=>{if(void 0!==t.properties.group){let e=t.properties.group;a.has(e)||a.set(e,[]),a.get(e).push(t)}else a.set(t.id,[t]);t.properties.fixedPointMap=new Map,t.properties.levels.forEach(e=>{let n=this._copyPoint(t);n.properties.level=e;let r=this._getFixPointInArea(n);r.id=t.id,r.properties.amenity=t.properties.amenity,r.properties.direction=t.properties.direction,r.properties.id=t.properties.id,r.properties.level=e,r.properties.type=t.properties.type,void 0===r.properties.neighbours&&(r.properties.neighbours=[]),this._distance(n,r)>5||(t.properties.fixedPointMap.set(e,r),r.properties.onCorridor&&void 0!==r.properties.neighboursLeadingTo&&(r.properties.neighboursLeadingTo.forEach(t=>{void 0===t.properties.neighbours&&(t.properties.neighbours=[]),t.properties.neighbours.push(r)}),this.corridorLineFeatures[r.properties.corridorIndex].properties.intersectionPointList.push(r)))})}),a.forEach((t,e)=>{let n=t.map(t=>t.properties.direction).find(t=>void 0!==t),r=[];t.forEach(t=>{r.push(...t.properties.fixedPointMap.values())}),r.forEach(t=>{null==t.properties.neighbours&&(t.properties.neighbours=[]),"up"===n?t.properties.neighbours.push(...r.filter(e=>e.properties.level>t.properties.level)):"down"===n?t.properties.neighbours.push(...r.filter(e=>e.properties.level<t.properties.level)):t.properties.neighbours.push(...r.filter(e=>e.properties.level!==t.properties.level))})})}_removeItemFromList(t,e){let n=t.indexOf(e);n>=0&&t.splice(n,1)}load(t,e){this.neighbourMap=t,this.rebuildData(),this.wallOffsets=e,this.wallOffsetLineList=[],this._getPointList().forEach((t,e)=>{let n=this.wallOffsets[e];if(!n)return;let r=iP.lineString([t.geometry.coordinates,n.geometry.coordinates]);r.properties.level=t.properties.level,this.wallOffsetLineList.push(r)})}_isPointOnLevel(t,e){return void 0!==t.properties.fixedPointMap?t.properties.fixedPointMap.has(e):t.properties.level===e}_getPointList(){let t=[];return this.floorData.forEach((e,n)=>{t=t.concat(e.points)}),this.levelChangerList.forEach(e=>t.push(...e.properties.fixedPointMap.values())),t=t.concat(),t=t.concat(this.corridorLinePoints),t}preprocess(){return{neighbourhood:this._generateNeighbourhoodMap(),wallOffsets:this._generateWallOffsets()}}_generateNeighbourhoodMap(){let t=this._getPointList(),e={};return this.floorData.forEach((n,r)=>{let i={},o=n.points.concat(this.levelChangerList.filter(t=>this._isPointOnLevel(t,r)).map(t=>t.properties.fixedPointMap.get(r)));o.forEach(e=>{let n=t.indexOf(e),s=this._unwrapLevelChangerPoint(e,r),a=this._findNeighbours(s,s===e?null:s,null,o);i[n]=a.map(e=>t.indexOf(e))}),e[r]=i}),this.corridorLinePoints.forEach(n=>{let r,i=t.indexOf(n),o=n.properties.level,s=e[o];if(n.properties.bordersArea){let e=this.floorData.get(o).points.concat(this.levelChangerList.filter(t=>this._isPointOnLevel(t,o))).concat(this.corridorLinePoints.filter(t=>t.properties.bordersArea&&this._isPointOnLevel(t,o)));r=this._findNeighbours(n,n,null,e),r.forEach(e=>{let n=t.indexOf(e);void 0===s[n]&&(s[n]=[]),s[n].includes(i)||s[n].push(i)})}else r=n.properties.neighbours;void 0===s[i]?s[i]=r.map(e=>t.indexOf(e)):r.forEach(e=>s[i].push(t.indexOf(e)))}),this.neighbourMap=e,e}_generateWallOffsets(){this.wallOffsetLineList=[],this.wallOffsets={};let t=this._getPointList();return t.forEach(e=>{if(null==e.properties.level)return;let n=this.floorData.get(e.properties.level).walls.filter(t=>t.includes(e));if(0===n.length)return;let r=n[1][0]===e?n[1][1]:n[1][0],i=iP.bearing(e,n[0][0]===e?n[0][1]:n[0][0]),o=iP.bearing(e,r),s=this._averageBearing(i,o),a=s>0?s-180:s+180,l=iP.destination(e.geometry.coordinates,.01,s,{units:"meters"}),u=iP.destination(e.geometry.coordinates,.01,a,{units:"meters"}),c=null;for(let t in this.floorData.get(e.properties.level).areas){let n=this.floorData.get(e.properties.level).areas[t];if(iP.booleanContains(n,l)){c=l;break}if(iP.booleanContains(n,u)){c=u;break}}if(null==c)return;let h=iP.destination(e.geometry.coordinates,2*this.wallOffsetDistance,c===l?s:a,{units:"meters"}),p=iP.lineString([e.geometry.coordinates,h.geometry.coordinates]);this.floorData.get(e.properties.level).walls.forEach((t,r)=>{if(n.includes(t))return;let i=this.floorData.get(e.properties.level).wallFeatures[r],o=iP.lineIntersect(p,i);o.features.length>0&&(h=iP.point(o.features[0].geometry.coordinates),p=iP.lineString([e.geometry.coordinates,h.geometry.coordinates]))});let d=iP.midpoint(e.geometry.coordinates,h.geometry.coordinates);d.properties.level=e.properties.level,this.wallOffsets[t.indexOf(e)]=d;let f=iP.lineString([e.geometry.coordinates,d.geometry.coordinates]);f.properties.level=e.properties.level,this.wallOffsetLineList.push(f)}),this.wallOffsets}reconstructPath(t){let e=[],n=t;do{this._calculateWallOffsetPointList(t,e.length>0?e[e.length-1]:n).forEach(r=>{if(n===t||n.geometry.coordinates[0]!==r.geometry.coordinates[0]||n.geometry.coordinates[1]!==r.geometry.coordinates[1]){let i=this._copyPoint(r);i.properties.level=t.properties.level,e.push(i),n=r}}),t=t.properties.cameFrom}while(null!=t);return e.reverse(),e}_calculateWallOffsetPointList(t,e){let n,r=this._getPointList(),i=r.indexOf(t),o=r.indexOf(e),s=[],a=t;i>=0&&this.wallOffsets[i]&&(a=this.wallOffsets[i]),s.push(a);do{let r=iP.lineString([e.geometry.coordinates,a.geometry.coordinates]);n=[],this.wallOffsetLineList.forEach((e,s)=>{if(e.properties.level!==t.properties.level)return;if(s===o||s===i)return;let l=iP.lineIntersect(r,e);if(l.features.length>0){let t=this.wallOffsets[s];t.properties.distance=this._distance(l.features[0],a),t.properties.offsetIndex=s,n.push(t)}}),n.length>0&&(n.sort((t,e)=>t.properties.distance-e.properties.distance),a=n[0],i=a.properties.offsetIndex,s.push(a))}while(n.length>0);return s.reverse()}_getIntersectingOffsetPoints(t,e){if(t===e||t.properties.level!==e.properties.level)return[];let n=iP.lineString([t.geometry.coordinates,e.geometry.coordinates]),r=[];return this.wallOffsetLineList.forEach((e,i)=>{if(e.properties.level===t.properties.level&&iP.lineIntersect(n,e).features.length>0){let n=this.wallOffsets[i];n.properties.distance=iP.pointToLineDistance(t.geometry.coordinates,e,{units:"meters"}),r.push(n)}}),r.sort((t,e)=>e.properties.distance-e.properties.distance),r}clearData(){this.floorData.forEach((t,e)=>{for(let n in t.points){let e=t.points[n];delete e.properties.cameFrom,delete e.properties.gscore,delete e.properties.fscore}}),this.levelChangerList.forEach(t=>{t.properties.fixedPointMap.forEach((t,e)=>{delete t.properties.cameFrom,delete t.properties.gscore,delete t.properties.fscore})}),this.corridorLinePoints.forEach(t=>{delete t.properties.cameFrom,delete t.properties.gscore,delete t.properties.fscore})}runAStar(t,e){this.clearData(),this.nbLines=[],this.bearingCache=new Map;let n=this._getFixPointInArea(t),r=this._getFixEndPoint(e,t.properties.level),i=[n],o=[];for(n.properties.gscore=0,n.properties.fscore=this._heuristic(n,r);i.length>0;){let s=this._getMinFScore(i);if(null===s)break;if(s===r){let i=this.reconstructPath(s);return r!==e&&void 0!==e.properties.levels&&(!r.properties.onCorridor||this._distance(r,e)>this._pathFixDistance)&&(e.properties.fixed=!0,i.push(e)),n!==t&&(!n.properties.onCorridor||this._distance(n,t)>this._pathFixDistance)&&(t.properties.fixed=!0,i.unshift(t)),i[i.length-1].properties.gscore=s.properties.gscore,i}o.push(i.splice(i.indexOf(s),1));let a=this._getNeighbours(s,n,r);a.forEach(t=>this.nbLines.push(iP.lineString([s.geometry.coordinates,t.geometry.coordinates])));for(let t in a){let e=a[t];if(o.indexOf(e)>-1)continue;let n=s.properties.gscore+this._distance(s,e);n<(null!=e.properties.gscore?e.properties.gscore:1/0)&&(e.properties.cameFrom=s,e.properties.gscore=n+.2,e.properties.fscore=n+this._heuristic(e,r),i.indexOf(e)<0&&i.push(e))}}}_getNeighbours(t,e,n){let r=[];if(t===e){let i=this._getPointList().filter(e=>this._isPointOnLevel(e,t.properties.level));r=this._findNeighbours(t,e,n,i),r=r.filter(e=>{let n=t.properties.level,r=this.configuration.avoidRevolvingDoors&&this._testAccessibilityPoiNeighbourhood(t,e,n,this.POI_TYPE.REVOLVING_DOOR),i=this.configuration.avoidTicketGates&&this._testAccessibilityPoiNeighbourhood(t,e,n,this.POI_TYPE.TICKET_GATE);return!r&&!i})}else{let e=this._getPointList(),i=e.indexOf(t);if(i>=0&&this.floorData.forEach((n,o)=>{let s=this.neighbourMap[o];s.hasOwnProperty(i)&&s[i].forEach(n=>{let i=e[n],s=this.configuration.avoidRevolvingDoors&&this._testAccessibilityPoiNeighbourhood(t,i,o,this.POI_TYPE.REVOLVING_DOOR),a=this.configuration.avoidTicketGates&&this._testAccessibilityPoiNeighbourhood(t,i,o,this.POI_TYPE.TICKET_GATE);r.includes(i)||s||a||r.push(i)})}),void 0!==t.properties.level&&t.properties.level===n.properties.level||null!=t.properties.fixedPointMap&&t.properties.fixedPointMap.has(n.properties.level)){let e=this.configuration.avoidRevolvingDoors&&this._testAccessibilityPoiNeighbourhood(t,n,n.properties.level,this.POI_TYPE.REVOLVING_DOOR),i=this.configuration.avoidTicketGates&&this._testAccessibilityPoiNeighbourhood(t,n,n.properties.level,this.POI_TYPE.TICKET_GATE);if(!e&&!i)if(n.properties.onCorridor)n.properties.neighbours.includes(t)?0!=this.corridorLineFeatures[n.properties.corridorIndex].properties.bidirectional&&r.push(n):void 0!==n.properties.neighboursLeadingTo&&n.properties.neighboursLeadingTo.includes(t)&&r.push(n);else{let e=this._unwrapLevelChangerPoint(t,n.properties.level),i=1;(e.properties.isCorridorPoint||e.properties.onCorridor)&&i--,this._countIntersections(e,n,i)&&r.push(n)}}}return r.filter(t=>!(this.configuration.avoidElevators&&t.properties.type===this.POI_TYPE.ELEVATOR||this.configuration.avoidEscalators&&t.properties.type===this.POI_TYPE.ESCALATOR||this.configuration.avoidStaircases&&t.properties.type===this.POI_TYPE.STAIRCASE||this.configuration.avoidNarrowPaths&&t.properties.narrowPath||this.configuration.avoidRamps&&t.properties.ramp))}_testAccessibilityPoiNeighbourhood(t,e,n,r){if(this.configuration.avoidRevolvingDoors){let i=iP.lineString([t.geometry.coordinates,e.geometry.coordinates]),o=this.accessibilityPoi.filter(t=>t.properties.level===n&&t.properties.type===r);for(let t=0;t<o.length;t++){let e=o[t];if(iP.pointToLineDistance(e.geometry.coordinates,i,{units:"meters"})<=e.properties.radius)return!0}}return!1}_findNeighbours(t,e,n,r){let i=[];if(null!=t.properties.neighbours&&(i=[...t.properties.neighbours]),t===e&&t.properties.onCorridor||t.properties.isCorridorPoint&&!t.properties.bordersArea)return n&&n.properties.onCorridor&&e.properties.corridorIndex===n.properties.corridorIndex&&i.push(n),i;let o=0;n&&this._isPointOnLevel(n,t.properties.level)&&r.push(n);let s=this._unwrapLevelChangerPoint(t,t.properties.level);for(let a in r){let n=r[a];if(t===n)continue;if(i.indexOf(n)>=0)continue;let l=this._unwrapLevelChangerPoint(n,t.properties.level);if(o=2,t===e&&o--,n===e&&o--,t!==s&&o--,n!==l&&o--,(n.properties.isCorridorPoint||n.properties.onCorridor)&&o--,this._countIntersections(t,l,o)){let e=iP.midpoint(t.geometry.coordinates,n.geometry.coordinates);for(let r in this.floorData.get(t.properties.level).areas){let o=this.floorData.get(t.properties.level).areas[r];if(iP.booleanContains(o,e)){i.push(n);break}}}}return i}_comparePointLevels(t,e){if(null==t.properties.levels&&null==e.properties.levels)return t.properties.level===e.properties.level;let n=void 0!==t.properties.fixedPointMap?[...t.properties.fixedPointMap.keys()]:[t.properties.level],r=void 0!==e.properties.fixedPointMap?[...e.properties.fixedPointMap.keys()]:[e.properties.level];return n.filter(t=>r.includes(t)).length>0}_unwrapLevelChangerPoint(t,e){let n=t.properties.fixedPointMap;return n&&n.get(e)||t}_countIntersections(t,e,n){let r=t.geometry.coordinates,i=e.geometry.coordinates,o=this._bearing(r,i),s=0,a=[],l=this.floorData.get(t.properties.level).walls,u=this.floorData.get(t.properties.level).wallFeatures;for(let c in l){let e=l[c],h=!1,p=!1;if(t==e[0]||t==e[1])h=!0,p=!0;else{let t=this._bearing(r,e[0].geometry.coordinates),n=this._bearing(r,e[1].geometry.coordinates);if(t>n){let e=t;t=n,n=e}n-t<Math.PI?t<=o&&o<=n&&(h=!0):(t>=o||o>=n)&&(h=!0)}if(h){if(p)this._testIdenticalPointInList(t,a)||(a.push(t),s++);else{let t=iP.lineIntersect(iP.lineString([r,i]),u[c]).features;t.length>0&&(this._testIdenticalPointInList(t[0],a)||(a.push(t[0]),s++))}if(s>n)return!1}}return!0}_averageBearing(t,e){if(t>e){let n=t;t=e,e=n}e-t>180&&(e-=360);let n=(e+t)/2;return n<=-180?360+n:n}_toRadians(t){return t*Math.PI/180}_bearing(t,e){let n=this.bearingCache.get(t);if(n){let t=n.get(e);if(null!=t)return t}let r=this._toRadians(t[0]),i=this._toRadians(t[1]),o=this._toRadians(e[0]),s=this._toRadians(e[1]),a=Math.cos(s),l=Math.sin(o-r)*a,u=Math.cos(i)*Math.sin(s)-Math.sin(i)*a*Math.cos(o-r),c=Math.atan2(l,u);return this._storeBearingCache(t,e,c),c}_storeBearingCache(t,e,n){let r=this.bearingCache.get(t);r||(r=new Map,this.bearingCache.set(t,r)),r.set(e,n),r=this.bearingCache.get(e),r||(r=new Map,this.bearingCache.set(e,r)),n<=0?n+=Math.PI:n-=Math.PI,r.set(t,n)}_testIdenticalPointInList(t,e){let n=t.geometry.coordinates;for(let r in e){let t=e[r].geometry.coordinates;if(t[0]===n[0]&&t[1]===n[1])return!0}return!1}_getMinFScore(t){let e=null,n=1/0;for(let r in t){let i=t[r];i.properties.fscore<n&&(e=i,n=i.properties.fscore)}return e}_heuristic(t,e){if(this._comparePointLevels(t,e)){let n=0;return void 0===t.properties.levels&&void 0===e.properties.levels||(n=20),this._distance(t,e)+n}{let n=this.levelChangerList.filter(n=>n!==t&&n!==e&&this._comparePointLevels(n,t)&&this._comparePointLevels(n,e)),r=1/0;return n.forEach(n=>{let i=this._distance(t,n)+this._distance(n,e)+10;i<r&&(r=i)}),r<1/0?r:2e3}}_distance(t,e){let n=0;return e.properties.level!==t.properties.level&&(n=10),iP.distance(t,e,{units:"meters"})+n}_getFixEndPoint(t,e){if(void 0!==t.properties.fixedPointMap){let n;t.properties.fixedPointMap.keys().forEach(t=>{(void 0===n||Math.abs(n-e)>Math.abs(t-e))&&(n=t)}),(t=this._copyPoint(t)).properties.level=n}return this._getFixPointInArea(t)}_getFixPointInArea(t){let e=this.floorData.get(t.properties.level),n=e.areas;for(let l in n)if(iP.booleanContains(n[l],t))return t;let r=null,i=1/0;e.wallFeatures.forEach(e=>{let n=iP.pointToLineDistance(t.geometry.coordinates,e,{units:"meters"});n<i&&(r=e,i=n)});let o=this.corridorLineFeatures.filter(e=>e.properties.level===t.properties.level),s=null,a=1/0;if(o.forEach(e=>{let n=this.corridorLineFeatures.indexOf(e),r=iP.pointToLineDistance(t.geometry.coordinates,e,{units:"meters"});r<a&&(s=n,a=r)}),null===r&&null===s)return t;{let e;if(void 0!==s&&a<i){let n=this.corridorLineFeatures[s];if(e=iP.nearestPointOnLine(n,t),e.properties.onCorridor=!0,e.properties.corridorIndex=s,e.properties.neighbours||(e.properties.neighbours=[]),0!=this.corridorLineFeatures[s].properties.bidirectional)e.properties.neighbours.push(this.corridorLinePointPairs[s][0],this.corridorLinePointPairs[s][1]),e.properties.neighbours.push(...n.properties.intersectionPointList),e.properties.neighboursLeadingTo=[this.corridorLinePointPairs[s][0],this.corridorLinePointPairs[s][1],...n.properties.intersectionPointList];else if(1!=this.corridorLineFeatures[s].properties.swapDirection){e.properties.neighbours.push(this.corridorLinePointPairs[s][0]);let t=this._distance(e,this.corridorLinePointPairs[s][0]),r=n.properties.intersectionPointList.filter(e=>this._distance(e,this.corridorLinePointPairs[s][0])<t),i=n.properties.intersectionPointList.filter(e=>this._distance(e,this.corridorLinePointPairs[s][0])>=t);e.properties.neighbours.push(...i),e.properties.neighboursLeadingTo=r}else{e.properties.neighbours.push(this.corridorLinePointPairs[s][1]);let t=this._distance(e,this.corridorLinePointPairs[s][0]),r=n.properties.intersectionPointList.filter(e=>this._distance(e,this.corridorLinePointPairs[s][0])<=t),i=n.properties.intersectionPointList.filter(e=>this._distance(e,this.corridorLinePointPairs[s][0])>t);e.properties.neighbours.push(...r),e.properties.neighboursLeadingTo=i}}else if(null!==r){let n=iP.nearestPointOnLine(r,t),o=iP.bearing(t,n);e=iP.destination(t.geometry.coordinates,i+.05,o,{units:"meters"})}return e.properties.level=t.properties.level,e}}_copyPoint(t){let e=iP.point([t.geometry.coordinates[0],t.geometry.coordinates[1]]);return void 0!==t.id&&(e.id=t.id),void 0!==t.properties.id&&(e.properties.id=t.properties.id),void 0!==t.properties.amenity&&(e.properties.amenity=t.properties.amenity),void 0!==t.properties.type&&(e.properties.type=t.properties.type),e}_setNeighbourhoodBasedOnCorridorDirectionality(t,e,n,r){void 0===r.properties.neighbours&&(r.properties.neighbours=[]),0!=t.properties.bidirectional?(r.properties.neighbours.push(e,n),e.properties.neighbours.push(r),n.properties.neighbours.push(r)):!1===t.properties.swapDirection?(e.properties.neighbours.push(r),r.properties.neighbours.push(n)):(n.properties.neighbours.push(r),r.properties.neighbours.push(e))}_comparePointsByDistanceFromReference(t,e,n){let r=iP.distance(t,e),i=iP.distance(t,n);return r>i?1:i>r?-1:0}}function sP(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function aP(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}class lP{constructor(){this.data=new tP({})}setData(t){this.data=t,this.wayfinding=new oP(this.data),this.wayfinding.preprocess()}toggleOnlyAccessible(t){this.wayfinding.setConfiguration(t?{avoidStaircases:!0,avoidBarriers:!0,avoidNarrowPaths:!0,avoidRevolvingDoors:!0,avoidTicketGates:!0}:{avoidElevators:!1,avoidEscalators:!1,avoidStaircases:!1,avoidRamps:!1,avoidNarrowPaths:!1,avoidRevolvingDoors:!1,avoidTicketGates:!1,avoidBarriers:!1})}route(t,e){const n=this.wayfinding.runAStar(t,e);if(!n)return null;const r={};n.forEach(t=>{void 0===r[t.properties.level]&&(r[t.properties.level]=[]),r[t.properties.level].push(t)});const i=Object.keys(r),o={};return i.forEach(t=>{o[t]=new eP(r[t].length>1?function(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return sP({type:"LineString",coordinates:t},void 0,n)}(r[t].map(t=>t.geometry.coordinates)):function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!aP(t[0])||!aP(t[1]))throw new Error("coordinates must contain numbers");return sP({type:"Point",coordinates:t},void 0,n)}(r[t].map(t=>t.geometry.coordinates)))}),{levelPaths:o,points:n}}}class uP extends rP{constructor(){super("route"),this.isEditable=!1,this.changes=[],this.routing=new lP}toggleAccessible(t){this.routing.toggleOnlyAccessible(t)}update(t,e){return cm(this,void 0,void 0,function*(){if(this.start=t,this.finish=e,this.data=new tP({features:[this.start,this.finish].concat(this.lines||[]).filter(t=>t)}),this.notify("feature-updated"),t&&e){this.notify("loading-start");const n=this.routing.route(t,e),r=n.levelPaths;if(this.route=n.levelPaths,this.points=n.points,r){const t=[];Object.keys(r).forEach(e=>{const n=r[e];n.id=`routing-path-${e}`,n.properties.amenity="chevron_right",n.properties.level=e,t.push(n)}),this.lines=t}else this.lines=[],this.notify("route-undefined");this.data=new tP({features:[this.start,this.finish].concat(this.lines||[]).filter(t=>t)}),this.notify("loading-finished"),this.notify("feature-updated")}})}cancel(){this.start=void 0,this.finish=void 0,this.lines=void 0,this.route=void 0,this.data=new tP({features:[this.start,this.finish].concat(this.lines||[]).filter(t=>t)}),this.notify("feature-updated")}}class cP extends rP{constructor(t){super("main"),this.language="en"}fetch(t){this.data=new tP(t),this.mapLanguage()}mapLanguage(){this.data.features.filter(t=>"object"==typeof t.properties.title_i18n).forEach(t=>this.mapFeatureLanguage(t,this.language))}mapFeatureLanguage(t,e){"string"==typeof t.properties.title_i18n&&(t.properties.title_i18n=JSON.parse(t.properties.title_i18n)),"object"==typeof t.properties.title_i18n&&(t.properties.title=t.properties.title_i18n[e])}query(t,e=0){return this.data.features.filter(e=>e.properties.title&&e.properties.title.toLowerCase().match(t.toLowerCase()))}get(t){return this.data.features.find(e=>e.id===t)}getInternal(t){return this.data.features.find(e=>e.properties.id===t)}get collection(){return{type:"FeatureCollection",features:this.data.features.map(t=>t.json)}}}class hP extends rP{constructor(t){super("synthetic"),this.data=t||new tP({})}get(t){return this.data.features.find(e=>e.properties.id===t)}}class pP extends rP{constructor(){super("clusters"),this.cluster=!0,this.data=new tP({})}}const dP=(t=0)=>cm(void 0,void 0,void 0,function*(){return(yield _m.get(`/core/places?skip=${t}&limit=1000`)).data.map(t=>new Qy(t))}),fP=(t=0,e)=>cm(void 0,void 0,void 0,function*(){const n=[`skip=${t}&limit=1000`];return e&&n.push(`'place_id=${e}`),(yield _m.get(`/core/floors?${n.join("&")}`)).data.filter(e?t=>t.place_id===e:t=>t).map(t=>new Jy(t)).reverse()});var _P=fP;class mP extends tv{constructor(){super(),this.sources=[],this.layers=[],this.floors=[],this.belowLayer="proximiio-floors",this.enabled=!0}initialize(){return cm(this,void 0,void 0,function*(){this.floors=yield _P()})}setLevel(t,e){this.layers.forEach(e=>{try{t.getLayer(e)&&t.removeLayer(e)}catch(iL){console.log("unable to remove layer",e)}}),this.sources.forEach(e=>{try{t.getSource(e)&&t.removeSource(e)}catch(iL){console.log("unable to remove source",e)}}),this.enabled&&this.floors.filter(t=>t.hasFloorplan&&t.level===e).forEach(e=>{const n=`image-source-${e.id}`;t.addSource(n,{type:"image",url:e.floorplan_image_url,coordinates:e.anchors}),this.sources.push(n);const r={id:`image-layer-${e.id}`,type:"raster",source:n,layout:{visibility:"visible"}};t.addLayer(r,this.belowLayer),this.layers.push(r.id)})}}const gP={width:120,height:120,data:new Uint8Array(57600),onAdd:function(t,e){const n=document.createElement("canvas");n.width=this.width,n.height=this.height,this.context=n.getContext("2d"),this.map=t},render:function(t,e){const n=performance.now()%1e3/1e3,r=42*n+18,i=this.context,o=this.map;return i.clearRect(0,0,this.width,this.height),i.beginPath(),i.arc(this.width/2,this.height/2,r,0,2*Math.PI),i.fillStyle="rgba(189,82,255,"+(1-n)+")",i.fill(),i.beginPath(),i.arc(this.width/2,this.height/2,18,0,2*Math.PI),i.fillStyle="rgb(189,82,255)",i.strokeStyle="white",i.lineWidth=2+4*(1-n),i.fill(),i.stroke(),this.data=i.getImageData(0,0,this.width,this.height).data,o.triggerRepaint(),!0}};function yP(t,e){}class vP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const bP={dialogContainer:iS("dialogContainer",[lS("void, exit",aS({opacity:0,transform:"scale(0.7)"})),lS("enter",aS({transform:"none"})),uS("* => enter",oS("150ms cubic-bezier(0, 0, 0.2, 1)",aS({transform:"none",opacity:1}))),uS("* => void, * => exit",oS("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",aS({opacity:0})))])};let xP=(()=>{class t extends gy{constructor(t,e,n,r,i,o){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=n,this._config=i,this._focusMonitor=o,this._animationStateChanged=new uu,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=t=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(t)),this._ariaLabelledBy=i.ariaLabelledBy||null,this._document=r}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const e=this._getActiveElement(),n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._getActiveElement())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,e=this._getActiveElement();return t===e||t.contains(e)}_getActiveElement(){var t;const e=this._document.activeElement;return(null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.activeElement)||e}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya),Ts(ZE),Ts(wl),Ts(Pc,8),Ts(vP),Ts(JE))},t.\u0275dir=Xt({type:t,viewQuery:function(t,e){if(1&t&&wu(vy,3),2&t){let t;xu(t=Su())&&(e._portalOutlet=t.first)}},features:[hs]}),t})(),wP=(()=>{class t extends xP{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:e}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:e}))}_onAnimationStart({toState:t,totalTime:e}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:e}):"exit"!==t&&"void"!==t||this._animationStateChanged.next({state:"closing",totalTime:e})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return EP(e||t)},t.\u0275cmp=$t({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&Vs("@dialogContainer.start",function(t){return e._onAnimationStart(t)})("@dialogContainer.done",function(t){return e._onAnimationDone(t)}),2&t&&(ka("id",e._id),Ss("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),Ta("@dialogContainer",e._state))},features:[hs],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&Is(0,yP,0,0,"ng-template",0)},directives:[vy],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[bP.dialogContainer]}}),t})();const EP=Un(wP);let SP=0;class CP{constructor(t,e,n="mat-dialog-"+SP++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new E,this._afterClosed=new E,this._beforeClosed=new E,this._state=0,e._id=n,e._animationStateChanged.pipe(Zh(t=>"opened"===t.state),qp(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(Zh(t=>"closed"===t.state),qp(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(Zh(t=>27===t.keyCode&&!this.disableClose&&!function(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t))).subscribe(t=>{t.preventDefault(),IP(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():IP(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Zh(t=>"closing"===t.state),qp(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function IP(t,e,n){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=e),t.close(n)}const kP=new Hn("MatDialogData"),TP=new Hn("mat-dialog-default-options"),PP=new Hn("mat-dialog-scroll-strategy"),AP={provide:PP,deps:[Zy],useFactory:function(t){return()=>t.scrollStrategies.block()}};let OP=(()=>{class t{constructor(t,e,n,r,i,o,s,a,l){this._overlay=t,this._injector=e,this._defaultOptions=n,this._parentDialog=r,this._overlayContainer=i,this._dialogRefConstructor=s,this._dialogContainerType=a,this._dialogDataToken=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new E,this._afterOpenedAtThisLevel=new E,this._ariaHiddenElements=new Map,this.afterAllClosed=Bp(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Zp(void 0))),this._scrollStrategy=o}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,e){(e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new vP)).id&&this.getDialogById(e.id);const n=this._createOverlay(e),r=this._attachDialogContainer(n,e),i=this._attachDialogContent(t,r,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(i),i.afterClosed().subscribe(()=>this._removeOpenDialog(i)),this.afterOpened.next(i),r._initializeWithAttachedContent(),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new Py({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const n=us.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:vP,useValue:e}]}),r=new fy(this._dialogContainerType,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(r).instance}_attachDialogContent(t,e,n,r){const i=new this._dialogRefConstructor(n,e,r.id);if(t instanceof kl)e.attachTemplatePortal(new _y(t,null,{$implicit:r.data,dialogRef:i}));else{const n=this._createInjector(r,i,e),o=e.attachComponentPortal(new fy(t,r.viewContainerRef,n));i.componentInstance=o.instance}return i.updateSize(r.width,r.height).updatePosition(r.position),i}_createInjector(t,e,n){const r=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:e}];return!t.direction||r&&r.get(sy,null)||i.push({provide:sy,useValue:{value:t.direction,change:Gh()}}),us.create({parent:r||this._injector,providers:i})}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let n=e.length-1;n>-1;n--){let r=e[n];r===t||"SCRIPT"===r.nodeName||"STYLE"===r.nodeName||r.hasAttribute("aria-live")||(this._ariaHiddenElements.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.\u0275fac=function(e){return new(e||t)(Ts(Zy),Ts(us),Ts(void 0),Ts(void 0),Ts(Ry),Ts(void 0),Ts(Wn),Ts(Wn),Ts(Hn))},t.\u0275dir=Xt({type:t}),t})(),MP=(()=>{class t extends OP{constructor(t,e,n,r,i,o,s){super(t,e,r,o,s,i,CP,wP,kP)}}return t.\u0275fac=function(e){return new(e||t)(ur(Zy),ur(us),ur(qc,8),ur(TP,8),ur(PP),ur(t,12),ur(Ry))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})(),LP=0,NP=(()=>{class t{constructor(t,e,n){this.dialogRef=t,this._elementRef=e,this._dialog=n,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=FP(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const e=t._matDialogClose||t._matDialogCloseResult;e&&(this.dialogResult=e.currentValue)}_onButtonClick(t){IP(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return t.\u0275fac=function(e){return new(e||t)(Ts(CP,8),Ts(Ya),Ts(MP))},t.\u0275dir=Xt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,e){1&t&&js("click",function(t){return e._onButtonClick(t)}),2&t&&Ss("aria-label",e.ariaLabel||null)("type",e.type)},inputs:{type:"type",dialogResult:["mat-dialog-close","dialogResult"],ariaLabel:["aria-label","ariaLabel"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[ae]}),t})(),DP=(()=>{class t{constructor(t,e,n){this._dialogRef=t,this._elementRef=e,this._dialog=n,this.id="mat-dialog-title-"+LP++}ngOnInit(){this._dialogRef||(this._dialogRef=FP(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return t.\u0275fac=function(e){return new(e||t)(Ts(CP,8),Ts(Ya),Ts(MP))},t.\u0275dir=Xt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,e){2&t&&ka("id",e.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),t})(),RP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),t})(),zP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xt({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),t})();function FP(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-dialog-container");)n=n.parentElement;return n?e.find(t=>t.id===n.id):null}let BP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[MP,AP],imports:[[Xy,by,TI],TI]}),t})();const jP=["mat-button",""],VP=["*"],UP=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class $P{constructor(t){this._elementRef=t}}const qP=AI(PI(OI($P)));let GP=(()=>{class t extends qP{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const r of UP)this._hasHostAttributes(r)&&this._getHostElement().classList.add(r);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya),Ts(JE),Ts(wI,8))},t.\u0275cmp=$t({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&wu(qI,1),2&t){let t;xu(t=Su())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(Ss("disabled",e.disabled||null),ua("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[hs],attrs:jP,ngContentSelectors:VP,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(Zs(),Os(0,"span",0),Ws(1),Ms(),Ls(2,"span",1),Ls(3,"span",2)),2&t&&(Xi(2),ua("mat-button-ripple-round",e.isRoundButton||e.isIconButton),Ps("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[qI],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),HP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[GI,TI],TI]}),t})();function ZP(t,e){if(1&t&&(Os(0,"p",7),Ea(1),Ms()),2&t){const t=Gs();Xi(1),Sa(null==t.data?null:t.data.message)}}function WP(t,e){if(1&t&&(Os(0,"pre"),Ea(1),ru(2,"json"),Ms()),2&t){const t=Gs();Xi(1),Sa(iu(2,1,t.data.code))}}const XP=function(){return["fal","exclamation-square"]};function YP(t,e){1&t&&(Os(0,"p",8),Ls(1,"fa-icon",9),Ea(2,"We have copied token to "),Os(3,"strong"),Ea(4,"clipboard"),Ms(),Ea(5," for you!"),Ms()),2&t&&(Xi(1),Ps("icon",Xl(1,XP)))}let KP=(()=>{class t{constructor(t){this.data=t}}return t.\u0275fac=function(e){return new(e||t)(Ts(kP))},t.\u0275cmp=$t({type:t,selectors:[["app-notification-dialog"]],decls:9,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["class","mat-body-1 well",4,"ngIf"],[4,"ngIf"],["class","text-success",4,"ngIf"],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],[1,"mat-body-1","well"],[1,"text-success"],[1,"mr-2",3,"icon"]],template:function(t,e){1&t&&(Os(0,"h1",0),Ea(1),Ms(),Os(2,"div",1),Is(3,ZP,2,1,"p",2),Is(4,WP,3,3,"pre",3),Is(5,YP,6,2,"p",4),Ms(),Os(6,"div",5),Os(7,"button",6),Ea(8),Ms(),Ms()),2&t&&(Xi(1),Sa(e.data.header?e.data.header:"An Error Occurred!"),Xi(2),Ps("ngIf",e.data.message),Xi(1),Ps("ngIf",e.data.code),Xi(1),Ps("ngIf",null==e.data?null:e.data.token),Xi(3),Sa(e.data.closeText?e.data.closeText:"Okay"))},directives:[DP,RP,eh,zP,GP,NP,Jb],pipes:[lh],styles:["pre[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.05);border-radius:4px;white-space:pre-wrap}.mat-dialog-content[_ngcontent-%COMP%], .mat-dialog-title[_ngcontent-%COMP%]{text-align:center}.mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-dialog-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}button.mat-button[_ngcontent-%COMP%]{background-color:#2155c4;color:#fff;border-radius:50px;padding:.5rem 2rem;margin:0 auto 1rem;width:100%}  .mat-dialog-container{background-color:#fff!important;color:#444!important;max-width:380px}"]}),t})();const JP=ny({passive:!0});let QP=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return zp;const e=yg(t),n=this._monitoredElements.get(e);if(n)return n.subject;const r=new E,i="cdk-text-field-autofilled",o=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(i)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(i)&&(e.classList.remove(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!1}))):(e.classList.add(i),this._ngZone.run(()=>r.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",o,JP),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:r,unlisten:()=>{e.removeEventListener("animationstart",o,JP)}}),r}stopMonitoring(t){const e=yg(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(ur(Xg),ur(Yu))},t.\u0275prov=ht({factory:function(){return new t(ur(Xg),ur(Yu))},token:t,providedIn:"root"}),t})(),tA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[Yg]]}),t})();const eA=new Hn("MAT_INPUT_VALUE_ACCESSOR"),nA=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let rA=0;class iA{constructor(t,e,n,r){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}}const oA=MI(iA);let sA=(()=>{class t extends oA{constructor(t,e,n,r,i,o,s,a,l,u){super(o,r,i,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._formField=u,this._uid="mat-input-"+rA++,this.focused=!1,this.stateChanges=new E,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>Jg().has(t));const c=this._elementRef.nativeElement,h=c.nodeName.toLowerCase();this._inputValueAccessor=s||c,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&l.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h,this._isTextarea="textarea"===h,this._isNativeSelect&&(this.controlType=c.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=fg(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=fg(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&Jg().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=fg(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,e;const n=(null===(e=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===e?void 0:e.call(t))?null:this.placeholder;if(n!==this._previousPlaceholder){const t=this._elementRef.nativeElement;this._previousPlaceholder=n,n?t.setAttribute("placeholder",n):t.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){nA.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya),Ts(Xg),Ts(Tx,10),Ts(ew,8),Ts(hw,8),Ts(LI),Ts(eA,10),Ts(QP),Ts(Yu),Ts(Ck,8))},t.\u0275dir=Xt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(t,e){1&t&&js("focus",function(){return e._focusChanged(!0)})("blur",function(){return e._focusChanged(!1)})("input",function(){return e._onInput()}),2&t&&(ka("disabled",e.disabled)("required",e.required),Ss("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-invalid",e.errorState&&!e.empty)("aria-required",e.required),ua("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[$a([{provide:_k,useExisting:t}]),hs,ae]}),t})(),aA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[LI],imports:[[tA,kk,TI],tA,kk]}),t})();function lA(t,e){1&t&&(Os(0,"mat-error"),Ea(1,"Please enter a valid latitude."),Ms())}function uA(t,e){1&t&&(Os(0,"mat-error"),Ea(1,"Please enter a valid longitude."),Ms())}function cA(t,e){1&t&&(Os(0,"mat-error"),Ea(1,"Please enter a valid level."),Ms())}function hA(t,e){1&t&&(Os(0,"mat-error"),Ea(1,"Please enter a valid zoom."),Ms())}function pA(t,e){1&t&&(Os(0,"mat-error"),Ea(1,"Please enter a valid bearing."),Ms())}function dA(t,e){1&t&&(Os(0,"mat-error"),Ea(1,"Please enter a valid pitch."),Ms())}let fA=(()=>{class t{constructor(t,e,n){this.dialogRef=t,this.fb=e,this.stateService=n,this.settingsForm=this.fb.group({latitude:[this.stateService.state.defaultLocation.coordinates[1],hx.required],longitude:[this.stateService.state.defaultLocation.coordinates[0],hx.required],level:[this.stateService.state.defaultLocation.level,hx.required],zoom:[this.stateService.state.options.zoom,[hx.required,hx.min(0),hx.max(24)]],bearing:[this.stateService.state.options.bearing,[hx.required,hx.min(-180),hx.max(180)]],pitch:[this.stateService.state.options.pitch,[hx.required,hx.min(0),hx.max(85)]]})}onCancel(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(Ts(CP),Ts(gw),Ts(Lv))},t.\u0275cmp=$t({type:t,selectors:[["app-settings-dialog"]],decls:27,vars:9,consts:[["mat-dialog-title",""],[3,"formGroup"],["mat-dialog-content",""],["matInput","","type","number","placeholder","Latitude","formControlName","latitude"],[4,"ngIf"],["matInput","","type","number","placeholder","Longitude","formControlName","longitude"],["matInput","","type","number","placeholder","Level","formControlName","level"],["matInput","","type","number","placeholder","Zoom","formControlName","zoom"],["matInput","","type","number","placeholder","Bearing","formControlName","bearing"],["matInput","","type","number","placeholder","Pitch","formControlName","pitch"],["mat-dialog-actions",""],["mat-button","","color","warn",1,"cancel",3,"click"],["type","submit","mat-button","","cdkFocusInitial","","color","primary",1,"submit",3,"disabled","mat-dialog-close"]],template:function(t,e){1&t&&(Os(0,"h1",0),Ea(1,"Kiosk Settings"),Ms(),Os(2,"form",1),Os(3,"div",2),Os(4,"mat-form-field"),Ls(5,"input",3),Is(6,lA,2,0,"mat-error",4),Ms(),Os(7,"mat-form-field"),Ls(8,"input",5),Is(9,uA,2,0,"mat-error",4),Ms(),Os(10,"mat-form-field"),Ls(11,"input",6),Is(12,cA,2,0,"mat-error",4),Ms(),Os(13,"mat-form-field"),Ls(14,"input",7),Is(15,hA,2,0,"mat-error",4),Ms(),Os(16,"mat-form-field"),Ls(17,"input",8),Is(18,pA,2,0,"mat-error",4),Ms(),Os(19,"mat-form-field"),Ls(20,"input",9),Is(21,dA,2,0,"mat-error",4),Ms(),Ms(),Os(22,"div",10),Os(23,"button",11),js("click",function(){return e.onCancel()}),Ea(24,"Cancel"),Ms(),Os(25,"button",12),Ea(26,"Submit"),Ms(),Ms(),Ms()),2&t&&(Xi(2),Ps("formGroup",e.settingsForm),Xi(4),Ps("ngIf",e.settingsForm.get("latitude").invalid),Xi(3),Ps("ngIf",e.settingsForm.get("longitude").invalid),Xi(3),Ps("ngIf",e.settingsForm.get("level").invalid),Xi(3),Ps("ngIf",e.settingsForm.get("zoom").invalid),Xi(3),Ps("ngIf",e.settingsForm.get("bearing").invalid),Xi(3),Ps("ngIf",e.settingsForm.get("pitch").invalid),Xi(4),Ps("disabled",!e.settingsForm.valid)("mat-dialog-close",e.settingsForm.value))},directives:[DP,ow,Ox,hw,RP,Ik,sA,aw,ox,Ax,dw,eh,zP,GP,NP,dk],styles:["pre[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.05);border-radius:4px;white-space:pre-wrap}.mat-dialog-content[_ngcontent-%COMP%], .mat-dialog-title[_ngcontent-%COMP%]{text-align:center}.mat-dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .mat-dialog-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}.mat-dialog-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .mat-dialog-title[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}button.mat-button[_ngcontent-%COMP%]{border-radius:50px;padding:.5rem 2rem;margin:0 auto 1rem}button.mat-button.cancel[_ngcontent-%COMP%]{margin-left:0}button.mat-button.submit[_ngcontent-%COMP%]{margin-right:0}  .mat-dialog-container{background-color:#fff!important;color:#444!important}"]}),t})();var _A=n("F0A8"),mA=n("4ZJM");class gA extends E{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(t){return this.hasError?(t.error(this.thrownError),h.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),h.EMPTY):super._subscribe(t)}next(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}error(t){this.hasCompleted||super.error(t)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}class yA{constructor(t){this.value=t}call(t,e){return e.subscribe(new vA(t,this.value))}}class vA extends f{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}n("iFvi");const bA=["content"],xA=["*"],wA=["container"],EA=new Hn("MapboxApiKey");let SA=(()=>{class t{constructor(t,e){this.zone=t,this.MAPBOX_API_KEY=e,this.mapCreated=new gA,this.mapLoaded=new gA,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new h,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(t){this.zone.onStable.pipe(cd()).subscribe(()=>{this.assign(mA,"accessToken",t.accessToken||this.MAPBOX_API_KEY),t.customMapboxApiUrl&&this.assign(mA,"config.API_URL",t.customMapboxApiUrl),this.createMap(t.mapOptions),this.hookEvents(t.mapEvents),this.mapEvents=t.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete()})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(t)})}updateMaxZoom(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(t)})}updateMinPitch(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(t)})}updateMaxPitch(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(t)})}updateRenderWorldCopies(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(t)})}updateScrollZoom(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(t)})}updateMaxBounds(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(t)})}changeCanvasCursor(t){this.mapInstance.getCanvasContainer().style.cursor=t}queryRenderedFeatures(t,e){return this.mapInstance.queryRenderedFeatures(t,e)}panTo(t,e){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(t,e)})}move(t,e,n,r,i,o){return this.zone.runOutsideAngular(()=>{this.mapInstance[t](Object.assign(Object.assign({},e),{zoom:n||this.mapInstance.getZoom(),center:r||this.mapInstance.getCenter(),bearing:i||this.mapInstance.getBearing(),pitch:o||this.mapInstance.getPitch()}))})}addLayer(t,e,n){this.zone.runOutsideAngular(()=>{Object.keys(t.layerOptions).forEach(e=>{void 0===t.layerOptions[e]&&delete t.layerOptions[e]}),this.mapInstance.addLayer(t.layerOptions,n),e&&((t.layerEvents.layerClick.observers.length||t.layerEvents.click.observers.length)&&this.mapInstance.on("click",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerClick.emit(e),t.layerEvents.click.emit(e)})}),(t.layerEvents.layerDblClick.observers.length||t.layerEvents.dblClick.observers.length)&&this.mapInstance.on("dblclick",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerDblClick.emit(e),t.layerEvents.dblClick.emit(e)})}),(t.layerEvents.layerMouseDown.observers.length||t.layerEvents.mouseDown.observers.length)&&this.mapInstance.on("mousedown",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerMouseDown.emit(e),t.layerEvents.mouseDown.emit(e)})}),(t.layerEvents.layerMouseUp.observers.length||t.layerEvents.mouseUp.observers.length)&&this.mapInstance.on("mouseup",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerMouseUp.emit(e),t.layerEvents.mouseUp.emit(e)})}),(t.layerEvents.layerMouseEnter.observers.length||t.layerEvents.mouseEnter.observers.length)&&this.mapInstance.on("mouseenter",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerMouseEnter.emit(e),t.layerEvents.mouseEnter.emit(e)})}),(t.layerEvents.layerMouseLeave.observers.length||t.layerEvents.mouseLeave.observers.length)&&this.mapInstance.on("mouseleave",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerMouseLeave.emit(e),t.layerEvents.mouseLeave.emit(e)})}),(t.layerEvents.layerMouseMove.observers.length||t.layerEvents.mouseMove.observers.length)&&this.mapInstance.on("mousemove",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerMouseMove.emit(e),t.layerEvents.mouseMove.emit(e)})}),(t.layerEvents.layerMouseOver.observers.length||t.layerEvents.mouseOver.observers.length)&&this.mapInstance.on("mouseover",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerMouseOver.emit(e),t.layerEvents.mouseOver.emit(e)})}),(t.layerEvents.layerMouseOut.observers.length||t.layerEvents.mouseOut.observers.length)&&this.mapInstance.on("mouseout",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerMouseOut.emit(e),t.layerEvents.mouseOut.emit(e)})}),(t.layerEvents.layerContextMenu.observers.length||t.layerEvents.contextMenu.observers.length)&&this.mapInstance.on("contextmenu",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerContextMenu.emit(e),t.layerEvents.contextMenu.emit(e)})}),(t.layerEvents.layerTouchStart.observers.length||t.layerEvents.touchStart.observers.length)&&this.mapInstance.on("touchstart",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerTouchStart.emit(e),t.layerEvents.touchStart.emit(e)})}),(t.layerEvents.layerTouchEnd.observers.length||t.layerEvents.touchEnd.observers.length)&&this.mapInstance.on("touchend",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerTouchEnd.emit(e),t.layerEvents.touchEnd.emit(e)})}),(t.layerEvents.layerTouchCancel.observers.length||t.layerEvents.touchCancel.observers.length)&&this.mapInstance.on("touchcancel",t.layerOptions.id,e=>{this.zone.run(()=>{t.layerEvents.layerTouchCancel.emit(e),t.layerEvents.touchCancel.emit(e)})}))})}removeLayer(t){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(t)&&this.mapInstance.removeLayer(t)})}addMarker(t){const e={offset:t.markersOptions.offset,anchor:t.markersOptions.anchor,draggable:!!t.markersOptions.draggable,rotationAlignment:t.markersOptions.rotationAlignment,pitchAlignment:t.markersOptions.pitchAlignment,clickTolerance:t.markersOptions.clickTolerance};t.markersOptions.element.childNodes.length>0&&(e.element=t.markersOptions.element);const n=new mA.Marker(e);return(t.markersEvents.markerDragStart.observers.length||t.markersEvents.dragStart.observers.length)&&n.on("dragstart",e=>{if(e){const{target:n}=e;this.zone.run(()=>{t.markersEvents.markerDragStart.emit(n),t.markersEvents.dragStart.emit(n)})}}),(t.markersEvents.markerDrag.observers.length||t.markersEvents.drag.observers.length)&&n.on("drag",e=>{if(e){const{target:n}=e;this.zone.run(()=>{t.markersEvents.markerDrag.emit(n),t.markersEvents.drag.emit(n)})}}),(t.markersEvents.markerDragEnd.observers.length||t.markersEvents.dragEnd.observers.length)&&n.on("dragend",e=>{if(e){const{target:n}=e;this.zone.run(()=>{t.markersEvents.markerDragEnd.emit(n),t.markersEvents.dragEnd.emit(n)})}}),n.setLngLat(t.markersOptions.feature?t.markersOptions.feature.geometry.coordinates:t.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(n.addTo(this.mapInstance),n))}removeMarker(t){this.markersToRemove.push(t)}createPopup(t,e){return this.zone.runOutsideAngular(()=>{Object.keys(t.popupOptions).forEach(e=>void 0===t.popupOptions[e]&&delete t.popupOptions[e]);const n=new mA.Popup(t.popupOptions);return n.setDOMContent(e),(t.popupEvents.popupClose.observers.length||t.popupEvents.close.observers.length)&&n.on("close",()=>{this.zone.run(()=>{t.popupEvents.popupClose.emit(),t.popupEvents.close.emit()})}),(t.popupEvents.popupOpen.observers.length||t.popupEvents.open.observers.length)&&n.on("open",()=>{this.zone.run(()=>{t.popupEvents.popupOpen.emit(),t.popupEvents.open.emit()})}),n})}addPopupToMap(t,e,n=!1){return this.zone.runOutsideAngular(()=>{n&&t._listeners&&delete t._listeners.open,t.setLngLat(e),t.addTo(this.mapInstance)})}addPopupToMarker(t,e){return this.zone.runOutsideAngular(()=>{t.setPopup(e)})}removePopupFromMap(t,e=!1){e&&t._listeners&&delete t._listeners.close,this.popupsToRemove.push(t)}removePopupFromMarker(t){return this.zone.runOutsideAngular(()=>{t.setPopup(void 0)})}addControl(t,e){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(t,e)})}removeControl(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(t)})}loadAndAddImage(t,e,n){return cm(this,void 0,void 0,function*(){return this.zone.runOutsideAngular(()=>new Promise((r,i)=>{this.mapInstance.loadImage(e,(e,o)=>{e?i(e):(this.addImage(t,o,n),r())})}))})}addImage(t,e,n){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(t,e,n)})}removeImage(t){this.imageIdsToRemove.push(t)}addSource(t,e){return this.zone.runOutsideAngular(()=>{Object.keys(e).forEach(t=>void 0===e[t]&&delete e[t]),this.mapInstance.addSource(t,e)})}getSource(t){return this.mapInstance.getSource(t)}removeSource(t){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(t).forEach(t=>this.mapInstance.removeLayer(t.id)),this.mapInstance.removeSource(t)})}setAllLayerPaintProperty(t,e){return this.zone.runOutsideAngular(()=>{Object.keys(e).forEach(n=>{this.mapInstance.setPaintProperty(t,n,e[n])})})}setAllLayerLayoutProperty(t,e){return this.zone.runOutsideAngular(()=>{Object.keys(e).forEach(n=>{this.mapInstance.setLayoutProperty(t,n,e[n])})})}setLayerFilter(t,e){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(t,e)})}setLayerBefore(t,e){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(t,e)})}setLayerZoomRange(t,e,n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(t,e||0,n||20)})}fitBounds(t,e){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(t,e)})}fitScreenCoordinates(t,e,n){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(t[0],t[1],e,n)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(t){Yu.assertNotInAngularZone(),Object.keys(t).forEach(e=>{void 0===t[e]&&delete t[e]}),this.mapInstance=new mA.Map(t),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(t.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const t of this.markersToRemove)t.remove();this.markersToRemove=[]}removePopups(){for(const t of this.popupsToRemove)t.remove();this.popupsToRemove=[]}removeImages(){for(const t of this.imageIdsToRemove)this.mapInstance.removeImage(t);this.imageIdsToRemove=[]}findLayersBySourceId(t){const e=this.mapInstance.getStyle().layers;return null==e?[]:e.filter(e=>"source"in e&&e.source===t)}hookEvents(t){this.mapInstance.on("load",e=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{t.mapLoad.emit(e.target),t.load.emit(e.target)})}),(t.mapResize.observers.length||t.resize.observers.length)&&this.mapInstance.on("resize",e=>this.zone.run(()=>{t.mapResize.emit(e),t.resize.emit(e)})),(t.mapRemove.observers.length||t.remove.observers.length)&&this.mapInstance.on("remove",e=>this.zone.run(()=>{t.mapRemove.emit(e),t.remove.emit(e)})),(t.mapMouseDown.observers.length||t.mouseDown.observers.length)&&this.mapInstance.on("mousedown",e=>this.zone.run(()=>{t.mapMouseDown.emit(e),t.mouseDown.emit(e)})),(t.mapMouseUp.observers.length||t.mouseUp.observers.length)&&this.mapInstance.on("mouseup",e=>this.zone.run(()=>{t.mapMouseUp.emit(e),t.mouseUp.emit(e)})),(t.mapMouseMove.observers.length||t.mouseMove.observers.length)&&this.mapInstance.on("mousemove",e=>this.zone.run(()=>{t.mapMouseMove.emit(e),t.mouseMove.emit(e)})),(t.mapClick.observers.length||t.click.observers.length)&&this.mapInstance.on("click",e=>this.zone.run(()=>{t.mapClick.emit(e),t.click.emit(e)})),(t.mapDblClick.observers.length||t.dblClick.observers.length)&&this.mapInstance.on("dblclick",e=>this.zone.run(()=>{t.mapDblClick.emit(e),t.dblClick.emit(e)})),(t.mapMouseOver.observers.length||t.mouseOver.observers.length)&&this.mapInstance.on("mouseover",e=>this.zone.run(()=>{t.mapMouseOver.emit(e),t.mouseOver.emit(e)})),(t.mapMouseOut.observers.length||t.mouseOut.observers.length)&&this.mapInstance.on("mouseout",e=>this.zone.run(()=>{t.mapMouseOut.emit(e),t.mouseOut.emit(e)})),(t.mapContextMenu.observers.length||t.contextMenu.observers.length)&&this.mapInstance.on("contextmenu",e=>this.zone.run(()=>{t.mapContextMenu.emit(e),t.contextMenu.emit(e)})),(t.mapTouchStart.observers.length||t.touchStart.observers.length)&&this.mapInstance.on("touchstart",e=>this.zone.run(()=>{t.mapTouchStart.emit(e),t.touchStart.emit(e)})),(t.mapTouchEnd.observers.length||t.touchEnd.observers.length)&&this.mapInstance.on("touchend",e=>this.zone.run(()=>{t.mapTouchEnd.emit(e),t.touchEnd.emit(e)})),(t.mapTouchMove.observers.length||t.touchMove.observers.length)&&this.mapInstance.on("touchmove",e=>this.zone.run(()=>{t.mapTouchMove.emit(e),t.touchMove.emit(e)})),(t.mapTouchCancel.observers.length||t.touchCancel.observers.length)&&this.mapInstance.on("touchcancel",e=>this.zone.run(()=>{t.mapTouchCancel.emit(e),t.touchCancel.emit(e)})),(t.mapWheel.observers.length||t.wheel.observers.length)&&this.mapInstance.on("wheel",e=>this.zone.run(()=>{t.mapWheel.emit(e),t.wheel.emit(e)})),t.moveStart.observers.length&&this.mapInstance.on("movestart",e=>this.zone.run(()=>t.moveStart.emit(e))),t.move.observers.length&&this.mapInstance.on("move",e=>this.zone.run(()=>t.move.emit(e))),t.moveEnd.observers.length&&this.mapInstance.on("moveend",e=>this.zone.run(()=>t.moveEnd.emit(e))),(t.mapDragStart.observers.length||t.dragStart.observers.length)&&this.mapInstance.on("dragstart",e=>this.zone.run(()=>{t.mapDragStart.emit(e),t.dragStart.emit(e)})),(t.mapDrag.observers.length||t.drag.observers.length)&&this.mapInstance.on("drag",e=>this.zone.run(()=>{t.mapDrag.emit(e),t.drag.emit(e)})),(t.mapDragEnd.observers.length||t.dragEnd.observers.length)&&this.mapInstance.on("dragend",e=>this.zone.run(()=>{t.mapDragEnd.emit(e),t.dragEnd.emit(e)})),t.zoomStart.observers.length&&this.mapInstance.on("zoomstart",e=>this.zone.run(()=>t.zoomStart.emit(e))),t.zoomEvt.observers.length&&this.mapInstance.on("zoom",e=>this.zone.run(()=>t.zoomEvt.emit(e))),t.zoomEnd.observers.length&&this.mapInstance.on("zoomend",e=>this.zone.run(()=>t.zoomEnd.emit(e))),t.rotateStart.observers.length&&this.mapInstance.on("rotatestart",e=>this.zone.run(()=>t.rotateStart.emit(e))),t.rotate.observers.length&&this.mapInstance.on("rotate",e=>this.zone.run(()=>t.rotate.emit(e))),t.rotateEnd.observers.length&&this.mapInstance.on("rotateend",e=>this.zone.run(()=>t.rotateEnd.emit(e))),t.pitchStart.observers.length&&this.mapInstance.on("pitchstart",e=>this.zone.run(()=>t.pitchStart.emit(e))),t.pitchEvt.observers.length&&this.mapInstance.on("pitch",e=>this.zone.run(()=>t.pitchEvt.emit(e))),t.pitchEnd.observers.length&&this.mapInstance.on("pitchend",e=>this.zone.run(()=>t.pitchEnd.emit(e))),t.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",e=>this.zone.run(()=>t.boxZoomStart.emit(e))),t.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",e=>this.zone.run(()=>t.boxZoomEnd.emit(e))),t.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",e=>this.zone.run(()=>t.boxZoomCancel.emit(e))),t.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",e=>this.zone.run(()=>t.webGlContextLost.emit(e))),t.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",e=>this.zone.run(()=>t.webGlContextRestored.emit(e))),t.render.observers.length&&this.mapInstance.on("render",e=>this.zone.run(()=>t.render.emit(e))),(t.mapError.observers.length||t.error.observers.length)&&this.mapInstance.on("error",e=>this.zone.run(()=>{t.mapError.emit(e),t.error.emit(e)})),t.data.observers.length&&this.mapInstance.on("data",e=>this.zone.run(()=>t.data.emit(e))),t.styleData.observers.length&&this.mapInstance.on("styledata",e=>this.zone.run(()=>t.styleData.emit(e))),t.sourceData.observers.length&&this.mapInstance.on("sourcedata",e=>this.zone.run(()=>t.sourceData.emit(e))),t.dataLoading.observers.length&&this.mapInstance.on("dataloading",e=>this.zone.run(()=>t.dataLoading.emit(e))),t.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",e=>this.zone.run(()=>t.styleDataLoading.emit(e))),t.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",e=>this.zone.run(()=>t.sourceDataLoading.emit(e))),t.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",e=>this.zone.run(()=>t.styleImageMissing.emit(e))),t.idle.observers.length&&this.mapInstance.on("idle",e=>this.zone.run(()=>t.idle.emit(e)))}assign(t,e,n){if("string"==typeof e&&(e=e.split(".")),e.length>1){const r=e.shift();this.assign(t[r]="[object Object]"===Object.prototype.toString.call(t[r])?t[r]:{},e,n)}else t[e[0]]=n}}return t.\u0275fac=function(e){return new(e||t)(ur(Yu),ur(EA,8))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();class CA{constructor(t){this.container=t}onAdd(){return this.container}onRemove(){return this.container.parentNode.removeChild(this.container)}getDefaultPosition(){return"top-right"}}let IA=(()=>{class t{constructor(t){this.MapService=t,this.controlAdded=!1}ngAfterContentInit(){this.content.nativeElement.childNodes.length&&(this.control=new CA(this.content.nativeElement),this.MapService.mapCreated$.subscribe(()=>{this.MapService.addControl(this.control,this.position),this.controlAdded=!0}))}ngOnDestroy(){this.controlAdded&&this.MapService.removeControl(this.control)}}return t.\u0275fac=function(e){return new(e||t)(Ts(SA))},t.\u0275cmp=$t({type:t,selectors:[["mgl-control"]],viewQuery:function(t,e){if(1&t&&wu(bA,3),2&t){let t;xu(t=Su())&&(e.content=t.first)}},inputs:{position:"position"},ngContentSelectors:xA,decls:3,vars:0,consts:[[1,"mapboxgl-ctrl"],["content",""]],template:function(t,e){1&t&&(Zs(),Os(0,"div",0,1),Ws(2),Ms())},encapsulation:2,changeDetection:0}),t})();function kA(t,e,n){console.warn(`[ngx-mapbox-gl]: ${t}: ${e} is deprecated, please use ${n} instead.`)}const TA=new Hn("MapboxApiKey");let PA=(()=>{class t{constructor(t,e){this.MapService=t,this.ControlComponent=e}ngAfterContentInit(){this.MapService.mapCreated$.subscribe(()=>{if(this.ControlComponent.control)throw new Error("Another control is already set for this control");const t={};void 0!==this.showCompass&&(t.showCompass=this.showCompass),void 0!==this.showZoom&&(t.showZoom=this.showZoom),this.ControlComponent.control=new mA.NavigationControl(t),this.MapService.addControl(this.ControlComponent.control,this.ControlComponent.position)})}}return t.\u0275fac=function(e){return new(e||t)(Ts(SA),Ts(IA,1))},t.\u0275dir=Xt({type:t,selectors:[["","mglNavigation",""]],inputs:{showCompass:"showCompass",showZoom:"showZoom"}}),t})(),AA=(()=>{class t{constructor(t){this.MapService=t,this.layerClick=new uu,this.layerDblClick=new uu,this.layerMouseDown=new uu,this.layerMouseUp=new uu,this.layerMouseEnter=new uu,this.layerMouseLeave=new uu,this.layerMouseMove=new uu,this.layerMouseOver=new uu,this.layerMouseOut=new uu,this.layerContextMenu=new uu,this.layerTouchStart=new uu,this.layerTouchEnd=new uu,this.layerTouchCancel=new uu,this.click=new uu,this.dblClick=new uu,this.mouseDown=new uu,this.mouseUp=new uu,this.mouseEnter=new uu,this.mouseLeave=new uu,this.mouseMove=new uu,this.mouseOver=new uu,this.mouseOut=new uu,this.contextMenu=new uu,this.touchStart=new uu,this.touchEnd=new uu,this.touchCancel=new uu,this.layerAdded=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.MapService.mapLoaded$.pipe(jp(()=>vg(this.MapService.mapInstance,"styledata").pipe((!1,t=>t.lift(new yA(false))),Zh(()=>!this.MapService.mapInstance.getLayer(this.id)),Zp(!0)))).subscribe(t=>this.init(t))}ngOnChanges(t){this.layerAdded&&(t.paint&&!t.paint.isFirstChange()&&this.MapService.setAllLayerPaintProperty(this.id,t.paint.currentValue),t.layout&&!t.layout.isFirstChange()&&this.MapService.setAllLayerLayoutProperty(this.id,t.layout.currentValue),t.filter&&!t.filter.isFirstChange()&&this.MapService.setLayerFilter(this.id,t.filter.currentValue),t.before&&!t.before.isFirstChange()&&this.MapService.setLayerBefore(this.id,t.before.currentValue),(t.minzoom&&!t.minzoom.isFirstChange()||t.maxzoom&&!t.maxzoom.isFirstChange())&&this.MapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&this.MapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}init(t){this.MapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel,click:this.click,dblClick:this.dblClick,mouseDown:this.mouseDown,mouseUp:this.mouseUp,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave,mouseMove:this.mouseMove,mouseOver:this.mouseOver,mouseOut:this.mouseOut,contextMenu:this.contextMenu,touchStart:this.touchStart,touchEnd:this.touchEnd,touchCancel:this.touchCancel}},t,this.before),this.layerAdded=!0}warnDeprecatedOutputs(){const e=kA.bind(void 0,t.name);this.click.observers.length&&e("click","layerClick"),this.dblClick.observers.length&&e("dblClick","layerDblClick"),this.mouseDown.observers.length&&e("mouseDown","layerMouseDown"),this.mouseUp.observers.length&&e("mouseUp","layerMouseUp"),this.mouseEnter.observers.length&&e("mouseEnter","layerMouseEnter"),this.mouseLeave.observers.length&&e("mouseLeave","layerMouseLeave"),this.mouseMove.observers.length&&e("mouseMove","layerMouseMove"),this.mouseOver.observers.length&&e("mouseOver","layerMouseOver"),this.mouseOut.observers.length&&e("mouseOut","layerMouseOut"),this.contextMenu.observers.length&&e("contextMenu","layerContextMenu"),this.touchStart.observers.length&&e("touchStart","layerTouchStart"),this.touchEnd.observers.length&&e("touchEnd","layerTouchEnd"),this.touchCancel.observers.length&&e("touchCancel","layerTouchCancel")}}return t.\u0275fac=function(e){return new(e||t)(Ts(SA))},t.\u0275cmp=$t({type:t,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel",click:"click",dblClick:"dblClick",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseMove:"mouseMove",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchCancel:"touchCancel"},features:[ae],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),OA=(()=>{class t{constructor(t,e){this.MapService=t,this.zone=e,this.updateFeatureData=new E,this.sub=new h,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const t=this.MapService.mapLoaded$.subscribe(()=>{this.init();const t=vg(this.MapService.mapInstance,"styledata").pipe(Zh(()=>!this.MapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(t)});this.sub.add(t)}ngOnChanges(t){this.sourceAdded&&((t.maxzoom&&!t.maxzoom.isFirstChange()||t.attribution&&!t.attribution.isFirstChange()||t.buffer&&!t.buffer.isFirstChange()||t.tolerance&&!t.tolerance.isFirstChange()||t.cluster&&!t.cluster.isFirstChange()||t.clusterRadius&&!t.clusterRadius.isFirstChange()||t.clusterMaxZoom&&!t.clusterMaxZoom.isFirstChange()||t.clusterMinPoints&&!t.clusterMinPoints.isFirstChange()||t.clusterProperties&&!t.clusterProperties.isFirstChange()||t.lineMetrics&&!t.lineMetrics.isFirstChange()||t.generateId&&!t.generateId.isFirstChange()||t.promoteId&&!t.promoteId.isFirstChange()||t.filter&&!t.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),t.data&&!t.data.isFirstChange())&&this.MapService.getSource(this.id).setData(this.data)}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.MapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(t){return cm(this,void 0,void 0,function*(){const e=this.MapService.getSource(this.id);return this.zone.run(()=>cm(this,void 0,void 0,function*(){return new Promise((n,r)=>{e.getClusterExpansionZoom(t,(t,e)=>{t?r(t):n(e)})})}))})}getClusterChildren(t){return cm(this,void 0,void 0,function*(){const e=this.MapService.getSource(this.id);return this.zone.run(()=>cm(this,void 0,void 0,function*(){return new Promise((n,r)=>{e.getClusterChildren(t,(t,e)=>{t?r(t):n(e)})})}))})}getClusterLeaves(t,e,n){return cm(this,void 0,void 0,function*(){const r=this.MapService.getSource(this.id);return this.zone.run(()=>cm(this,void 0,void 0,function*(){return new Promise((i,o)=>{r.getClusterLeaves(t,e,n,(t,e)=>{t?o(t):i(e)})})}))})}_addFeature(t){this.data.features.push(t),this.updateFeatureData.next()}_removeFeature(t){const e=this.data,n=e.features.indexOf(t);n>-1&&e.features.splice(n,1),this.updateFeatureData.next()}_getNewFeatureId(){return++this.featureIdCounter}init(){this.MapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const t=this.updateFeatureData.pipe(yw(0)).subscribe(()=>{this.MapService.getSource(this.id).setData(this.data)});this.sub.add(t),this.sourceAdded=!0}}return t.\u0275fac=function(e){return new(e||t)(Ts(SA),Ts(Yu))},t.\u0275cmp=$t({type:t,selectors:[["mgl-geojson-source"]],inputs:{data:"data",id:"id",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[ae],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})(),MA=(()=>{class t{constructor(t){this.GeoJSONSourceComponent=t,this.type="Feature"}ngOnInit(){this.id||(this.id=this.GeoJSONSourceComponent._getNewFeatureId()),this.feature={type:this.type,geometry:this.geometry,properties:this.properties?this.properties:{}},this.feature.id=this.id,this.GeoJSONSourceComponent._addFeature(this.feature)}ngOnDestroy(){this.GeoJSONSourceComponent._removeFeature(this.feature)}updateCoordinates(t){this.feature.geometry.coordinates=t,this.GeoJSONSourceComponent.updateFeatureData.next()}}return t.\u0275fac=function(e){return new(e||t)(Ts(it(()=>OA)))},t.\u0275cmp=$t({type:t,selectors:[["mgl-feature"]],inputs:{id:"id",geometry:"geometry",properties:"properties"},decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})(),LA=(()=>{class t{constructor(t,e){this.MapService=t,this.zone=e,this.imageError=new uu,this.imageLoaded=new uu,this.error=new uu,this.loaded=new uu,this.isAdded=!1,this.isAdding=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.MapService.mapLoaded$.pipe(jp(()=>vg(this.MapService.mapInstance,"styledata").pipe(Zp(void 0),Zh(()=>!this.isAdding&&!this.MapService.mapInstance.hasImage(this.id))))).subscribe(()=>this.init())}ngOnChanges(t){(t.data&&!t.data.isFirstChange()||t.options&&!t.options.isFirstChange()||t.url&&!t.url.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit())}ngOnDestroy(){this.isAdded&&this.MapService.removeImage(this.id),this.sub&&this.sub.unsubscribe()}init(){return cm(this,void 0,void 0,function*(){if(this.isAdding=!0,this.data)this.MapService.addImage(this.id,this.data,this.options),this.isAdded=!0,this.isAdding=!1;else if(this.url)try{yield this.MapService.loadAndAddImage(this.id,this.url,this.options),this.isAdded=!0,this.isAdding=!1,this.zone.run(()=>{this.imageLoaded.emit(),this.loaded.emit()})}catch(t){this.zone.run(()=>{this.imageError.emit(t),this.error.emit(t)})}})}warnDeprecatedOutputs(){const e=kA.bind(void 0,t.name);this.error.observers.length&&e("error","imageError"),this.loaded.observers.length&&e("loaded","imageLoaded")}}return t.\u0275fac=function(e){return new(e||t)(Ts(SA),Ts(Yu))},t.\u0275cmp=$t({type:t,selectors:[["mgl-image"]],inputs:{id:"id",data:"data",options:"options",url:"url"},outputs:{imageError:"imageError",imageLoaded:"imageLoaded",error:"error",loaded:"loaded"},features:[ae],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),NA=(()=>{class t{constructor(t){this.MapService=t,this.movingMethod="flyTo",this.mapResize=new uu,this.mapRemove=new uu,this.mapMouseDown=new uu,this.mapMouseUp=new uu,this.mapMouseMove=new uu,this.mapClick=new uu,this.mapDblClick=new uu,this.mapMouseOver=new uu,this.mapMouseOut=new uu,this.mapContextMenu=new uu,this.mapTouchStart=new uu,this.mapTouchEnd=new uu,this.mapTouchMove=new uu,this.mapTouchCancel=new uu,this.mapWheel=new uu,this.moveStart=new uu,this.move=new uu,this.moveEnd=new uu,this.mapDragStart=new uu,this.mapDrag=new uu,this.mapDragEnd=new uu,this.zoomStart=new uu,this.zoomEvt=new uu,this.zoomEnd=new uu,this.rotateStart=new uu,this.rotate=new uu,this.rotateEnd=new uu,this.pitchStart=new uu,this.pitchEvt=new uu,this.pitchEnd=new uu,this.boxZoomStart=new uu,this.boxZoomEnd=new uu,this.boxZoomCancel=new uu,this.webGlContextLost=new uu,this.webGlContextRestored=new uu,this.mapLoad=new uu,this.idle=new uu,this.render=new uu,this.mapError=new uu,this.data=new uu,this.styleData=new uu,this.sourceData=new uu,this.dataLoading=new uu,this.styleDataLoading=new uu,this.sourceDataLoading=new uu,this.styleImageMissing=new uu,this.resize=new uu,this.remove=new uu,this.mouseDown=new uu,this.mouseUp=new uu,this.mouseMove=new uu,this.click=new uu,this.dblClick=new uu,this.mouseOver=new uu,this.mouseOut=new uu,this.contextMenu=new uu,this.touchStart=new uu,this.touchEnd=new uu,this.touchMove=new uu,this.touchCancel=new uu,this.wheel=new uu,this.dragStart=new uu,this.drag=new uu,this.dragEnd=new uu,this.load=new uu,this.error=new uu}get mapInstance(){return this.MapService.mapInstance}ngAfterViewInit(){this.warnDeprecatedOutputs(),this.MapService.setup({accessToken:this.accessToken,customMapboxApiUrl:this.customMapboxApiUrl,mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale},mapEvents:this}),this.cursorStyle&&this.MapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.MapService.destroyMap()}ngOnChanges(t){return cm(this,void 0,void 0,function*(){yield this.MapService.mapCreated$.toPromise(),t.cursorStyle&&!t.cursorStyle.isFirstChange()&&this.MapService.changeCanvasCursor(t.cursorStyle.currentValue),t.minZoom&&!t.minZoom.isFirstChange()&&this.MapService.updateMinZoom(t.minZoom.currentValue),t.maxZoom&&!t.maxZoom.isFirstChange()&&this.MapService.updateMaxZoom(t.maxZoom.currentValue),t.minPitch&&!t.minPitch.isFirstChange()&&this.MapService.updateMinPitch(t.minPitch.currentValue),t.maxPitch&&!t.maxPitch.isFirstChange()&&this.MapService.updateMaxPitch(t.maxPitch.currentValue),t.renderWorldCopies&&!t.renderWorldCopies.isFirstChange()&&this.MapService.updateRenderWorldCopies(t.renderWorldCopies.currentValue),t.scrollZoom&&!t.scrollZoom.isFirstChange()&&this.MapService.updateScrollZoom(t.scrollZoom.currentValue),t.dragRotate&&!t.dragRotate.isFirstChange()&&this.MapService.updateDragRotate(t.dragRotate.currentValue),t.touchPitch&&!t.touchPitch.isFirstChange()&&this.MapService.updateTouchPitch(t.touchPitch.currentValue),t.touchZoomRotate&&!t.touchZoomRotate.isFirstChange()&&this.MapService.updateTouchZoomRotate(t.touchZoomRotate.currentValue),t.doubleClickZoom&&!t.doubleClickZoom.isFirstChange()&&this.MapService.updateDoubleClickZoom(t.doubleClickZoom.currentValue),t.keyboard&&!t.keyboard.isFirstChange()&&this.MapService.updateKeyboard(t.keyboard.currentValue),t.dragPan&&!t.dragPan.isFirstChange()&&this.MapService.updateDragPan(t.dragPan.currentValue),t.boxZoom&&!t.boxZoom.isFirstChange()&&this.MapService.updateBoxZoom(t.boxZoom.currentValue),t.style&&!t.style.isFirstChange()&&this.MapService.updateStyle(t.style.currentValue),t.maxBounds&&!t.maxBounds.isFirstChange()&&this.MapService.updateMaxBounds(t.maxBounds.currentValue),t.fitBounds&&t.fitBounds.currentValue&&!t.fitBounds.isFirstChange()&&this.MapService.fitBounds(t.fitBounds.currentValue,this.fitBoundsOptions),t.fitScreenCoordinates&&t.fitScreenCoordinates.currentValue&&((this.center||this.zoom||this.pitch||this.fitBounds)&&t.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),this.MapService.fitScreenCoordinates(t.fitScreenCoordinates.currentValue,this.bearing?this.bearing[0]:0,this.movingOptions)),!this.centerWithPanTo||!t.center||t.center.isFirstChange()||t.zoom||t.bearing||t.pitch?(t.center&&!t.center.isFirstChange()||t.zoom&&!t.zoom.isFirstChange()||t.bearing&&!t.bearing.isFirstChange()&&!t.fitScreenCoordinates||t.pitch&&!t.pitch.isFirstChange())&&this.MapService.move(this.movingMethod,this.movingOptions,t.zoom&&this.zoom?this.zoom[0]:void 0,t.center?this.center:void 0,t.bearing&&this.bearing?this.bearing[0]:void 0,t.pitch&&this.pitch?this.pitch[0]:void 0):this.MapService.panTo(this.center,this.panToOptions)})}warnDeprecatedOutputs(){const e=kA.bind(void 0,t.name);this.resize.observers.length&&e("resize","mapResize"),this.remove.observers.length&&e("remove","mapRemove"),this.mouseDown.observers.length&&e("mouseDown","mapMouseDown"),this.mouseUp.observers.length&&e("mouseUp","mapMouseUp"),this.mouseMove.observers.length&&e("mouseMove","mapMouseMove"),this.click.observers.length&&e("click","mapClick"),this.dblClick.observers.length&&e("dblClick","mapDblClick"),this.mouseOver.observers.length&&e("mouseOver","mapMouseOver"),this.mouseOut.observers.length&&e("mouseOut","mapMouseOut"),this.contextMenu.observers.length&&e("contextMenu","mapContextMenu"),this.touchStart.observers.length&&e("touchStart","mapTouchStart"),this.touchEnd.observers.length&&e("touchEnd","mapTouchEnd"),this.touchMove.observers.length&&e("touchMove","mapTouchMove"),this.touchCancel.observers.length&&e("touchCancel","mapTouchCancel"),this.wheel.observers.length&&e("wheel","mapWheel"),this.dragStart.observers.length&&e("dragStart","mapDragStart"),this.drag.observers.length&&e("drag","mapDrag"),this.dragEnd.observers.length&&e("dragEnd","mapDragEnd"),this.load.observers.length&&e("load","mapLoad"),this.error.observers.length&&e("error","mapError")}}return t.\u0275fac=function(e){return new(e||t)(Ts(SA))},t.\u0275cmp=$t({type:t,selectors:[["mgl-map"]],viewQuery:function(t,e){if(1&t&&wu(wA,3),2&t){let t;xu(t=Su())&&(e.mapContainer=t.first)}},inputs:{movingMethod:"movingMethod",accessToken:"accessToken",collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing",resize:"resize",remove:"remove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseMove:"mouseMove",click:"click",dblClick:"dblClick",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchMove:"touchMove",touchCancel:"touchCancel",wheel:"wheel",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",load:"load",error:"error"},features:[$a([SA]),ae],decls:2,vars:0,consts:[["container",""]],template:function(t,e){1&t&&Ls(0,"div",null,0)},styles:["[_nghost-%COMP%] {\n        display: block;\n      }\n      div[_ngcontent-%COMP%] {\n        height: 100%;\n        width: 100%;\n      }"],changeDetection:0}),t})(),DA=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:EA,useValue:e.accessToken},{provide:TA,useValue:e.geocoderAccessToken||e.accessToken}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ch]]}),t})();const RA=function(t){return{type:"Point",coordinates:t}},zA=function(t){return{level:t}};function FA(t,e){if(1&t&&Ls(0,"mgl-feature",15),2&t){const t=Gs(2);Ps("geometry",Yl(2,RA,t.stateService.state.defaultLocation.coordinates))("properties",Yl(4,zA,t.stateService.state.defaultLocation.level))}}function BA(t,e){if(1&t&&(Ns(0),Ls(1,"mgl-image",16),Ds()),2&t){const t=e.$implicit,n=Gs(2);Xi(1),Ps("id",t)("url",null==n.images[t]?null:n.images[t].uri)}}const jA=function(){return["get","type"]},VA=function(t){return["==",t,"shop-custom"]},UA=function(){return["get","level"]},$A=function(t){return["to-number",t]},qA=function(t,e){return["==",t,e]},GA=function(t,e){return["all",t,e]},HA=function(){return{}},ZA=function(){return["feature-state","selected"]},WA=function(t){return["boolean",t,!1]},XA=function(){return["feature-state","hover"]},YA=function(t,e){return["case",t,"#6945ed",e,"#a58dfa","#dbd7e8"]},KA=function(t){return{"fill-extrusion-height":3,"fill-extrusion-color":t}},JA=function(t){return["==",t,"poi-custom"]},QA=function(){return["exponential",.5]},tO=function(){return["zoom"]},eO=function(t,e){return["interpolate",t,e,17,.1,22,.5]},nO=function(){return[0,2]},rO=function(){return["Open Sans Regular"]},iO=function(t,e,n){return{"icon-image":"{amenity}","icon-size":t,"text-anchor":"top","text-offset":e,"text-font":n,"text-size":14,"symbol-placement":"point","icon-allow-overlap":!0,"text-allow-overlap":!0}},oO=function(t){return["==",t,"shop-label"]},sO=function(){return["Open Sans Bold"]},aO=function(t,e){return["interpolate",t,e,18,6,22,36]},lO=function(t,e){return{"symbol-placement":"line-center","text-anchor":"top","text-ignore-placement":!0,"text-allow-overlap":!0,"text-field":"{title}","text-font":t,"text-size":e,"text-letter-spacing":.005,"text-max-width":7}},uO=function(t,e){return["case",t,"#fff",e,"#fff","#6945ed"]},cO=function(t){return{"text-color":t}},hO=function(){return{"icon-image":"pulsing-dot"}},pO=function(t){return["all",t]};function dO(t,e){if(1&t){const t=zs();Os(0,"mgl-map",6),js("load",function(e){return Me(t),Gs().onLoad(e)}),Ls(1,"mgl-control",7),Os(2,"mgl-layer",8),js("click",function(e){return Me(t),Gs().onShopClick(e)})("mouseEnter",function(){return Me(t),Gs().onShopMouseEnter()})("mouseLeave",function(e){return Me(t),Gs().onShopMouseLeave(e)})("mouseMove",function(e){return Me(t),Gs().onShopMouseMove(e)}),Ms(),Ls(3,"mgl-layer",9),Ls(4,"mgl-layer",10),Os(5,"mgl-geojson-source",11),Is(6,FA,1,6,"mgl-feature",12),Ms(),Ls(7,"mgl-layer",13),Is(8,BA,2,2,"ng-container",14),Ms()}if(2&t){const t=Gs();da(ya,ca,t.stateService.state.style,!1),Xi(1),Ps("showZoom",!1),Xi(1),Ps("minzoom",12)("maxzoom",24)("filter",Kl(31,GA,Yl(23,VA,Xl(22,jA)),Kl(28,qA,Yl(26,$A,Xl(25,UA)),t.stateService.state.floor.level)))("layout",Xl(34,HA))("paint",Yl(44,KA,Kl(41,YA,Yl(36,WA,Xl(35,ZA)),Yl(39,WA,Xl(38,XA))))),Xi(1),Ps("minzoom",17)("maxzoom",24)("filter",Kl(55,GA,Yl(47,JA,Xl(46,jA)),Kl(52,qA,Yl(50,$A,Xl(49,UA)),t.stateService.state.floor.level)))("layout",Jl(65,iO,Kl(60,eO,Xl(58,QA),Xl(59,tO)),Xl(63,nO),Xl(64,rO)))("paint",Xl(69,HA)),Xi(1),Ps("minzoom",12)("maxzoom",24)("filter",Kl(79,GA,Yl(71,oO,Xl(70,jA)),Kl(76,qA,Yl(74,$A,Xl(73,UA)),t.stateService.state.floor.level)))("layout",Kl(88,lO,Xl(82,sO),Kl(85,aO,Xl(83,QA),Xl(84,tO))))("paint",Yl(100,cO,Kl(97,uO,Yl(92,WA,Xl(91,ZA)),Yl(95,WA,Xl(94,XA))))),Xi(2),Ps("ngIf",t.showStartPoint),Xi(1),Ps("layout",Xl(102,hO))("filter",Yl(109,pO,Kl(106,qA,Yl(104,$A,Xl(103,UA)),t.stateService.state.floor.level))),Xi(1),Ps("ngForOf",t.objectKeys(t.images))}}const fO=function(){return["fal","cog"]};let _O=(()=>{class t{constructor(t,e,n,r,i,o){this.mapService=t,this.authService=e,this.sidebarService=n,this.activatedRoute=r,this.stateService=i,this.dialog=o,this.mapLoaded=new uu,this.amenities=[],this.amenityBaseLinks={},this.features={},this.showRaster=!0,this.imagesIteration=0,this.images={},this.objectKeys=Object.keys,this.hoveredPolygon=null,this.selectedPolygon=null,this.geojsonSource=new cP(new tP({})),this.syntheticSource=new hP(new tP({})),this.routingSource=new uP,this.clusterSource=new pP,this.imageSourceManager=new mP,this.showStartPoint=!1,this.subs=[],this.currentUser=this.authService.getCurrentUser(),this.currentUserData=this.authService.getCurrentUserData(),this.features=this.currentUserData.features,this.amenities=this.currentUserData.amenities,this.routeFactory=new _A.RouteFactory(JSON.stringify(this.features.features),"en"),this.onPlaceSelect=this.onPlaceSelect.bind(this),this.onFloorSelect=this.onFloorSelect.bind(this),this.onMapReady=this.onMapReady.bind(this),this.onSourceChange=this.onSourceChange.bind(this),this.onSyntheticChange=this.onSyntheticChange.bind(this),this.onStyleChange=this.onStyleChange.bind(this),this.onStyleSelect=this.onStyleSelect.bind(this),this.onRouteUpdate=this.onRouteUpdate.bind(this),this.onRouteChange=this.onRouteChange.bind(this),this.onRouteCancel=this.onRouteCancel.bind(this),this.onOptionsChange=this.onOptionsChange.bind(this),this.updateImages()}ngOnInit(){this.initialize(),this.subs.push(this.sidebarService.getStartPointListener().subscribe(t=>{this.startPoi=t,t&&!this.endPoi&&this.centerOnPoi(t),this.generateRoute()}),this.sidebarService.getEndPointListener().subscribe(t=>{this.endPoi=t,t&&!this.startPoi&&this.centerOnPoi(t),this.handlePolygonSelection(t),this.generateRoute()}),this.sidebarService.getAccessibleOnlyToggleListener().subscribe(()=>{this.routingSource.toggleAccessible(this.stateService.state.accessibleRoute),this.generateRoute()}),this.sidebarService.getSelectedPlaceListener().subscribe(t=>{t&&this.setPlace(t)}),this.sidebarService.getFloorChangeListener().subscribe(t=>{t instanceof Jy?this.onFloorSelect(t):this.onFloorChange(t)}))}initialize(){return cm(this,void 0,void 0,function*(){this.geojsonSource.observe(this.onSourceChange),this.syntheticSource.observe(this.onSyntheticChange),this.routingSource.observe(this.onRouteChange),yield this.fetch(),this.stateService.state.defaultLocation.isStartPoint&&this.setStartPoint()})}cancelObservers(){return cm(this,void 0,void 0,function*(){this.geojsonSource.cancel(this.onSourceChange),this.syntheticSource.cancel(this.onSyntheticChange),this.stateService.state.style.cancel(this.onStyleChange)})}fetch(){return cm(this,void 0,void 0,function*(){const{places:t,style:e,styles:n}=yield cm(void 0,void 0,void 0,function*(){const t={},e=[dP().then(e=>t.places=e),fP().then(e=>t.floors=e),cm(void 0,void 0,void 0,function*(){let t="/v5/geo/style";const e=yield _m.get(t);return new Mv(e.data)}).then(e=>t.style=e),cm(void 0,void 0,void 0,function*(){return(yield _m.get("/v5/geo/styles")).data.map(t=>new Mv(t))}).then(e=>t.styles=e)];return yield Promise.all(e),t}),r=t.length>0?t[0]:new Qy({});e.center=[r.lng,r.lat],e.zoom=this.stateService.state.options.zoom,e.bearing=this.stateService.state.options.bearing,e.pitch=this.stateService.state.options.pitch,this.geojsonSource.fetch(this.features),this.routingSource.routing.setData(new tP(this.features)),this.onSourceChange(),this.prepareStyle(e),this.imageSourceManager.belowLayer=e.usesPrefixes()?"proximiio-floors":"floors",this.imageSourceManager.initialize(),this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{initializing:!1,place:r,places:t,style:e,styles:n,latitude:r.lat,longitude:r.lng,noPlaces:0===t.length}),e.observe(this.onStyleChange)})}prepareStyle(t){t.setSource("main",this.geojsonSource),t.setSource("synthetic",this.syntheticSource),t.setSource("route",this.routingSource),t.setSource("clusters",this.clusterSource),t.setLevel(this.sidebarService.defaultFloorLevel)}onRouteChange(t){if("loading-start"===t)return void(this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{loadingRoute:!0}));if("loading-finished"===t){const t=this.routingSource.route[this.routingSource.start.properties.level],e=this.routeFactory.generateRoute(JSON.stringify(this.routingSource.points),JSON.stringify(this.endPoi));return this.centerOnRoute(t),void(this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{loadingRoute:!1,textNavigation:e}))}if("route-undefined"===t)return console.log("route not found"),void(this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{loadingRoute:!1}));const e=this.stateService.state.style;e.setSource("route",this.routingSource),this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{style:e}),this.updateMapSource(this.routingSource)}onSourceChange(){this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{style:this.stateService.state.style}),this.updateMapSource(this.geojsonSource),this.updateCluster()}onSyntheticChange(){this.stateService.state.style.setSource("synthetic",this.syntheticSource),this.updateMapSource(this.syntheticSource)}updateMapSource(t){const e=this.map;if(e){const n=e.getSource(t.id);n&&n.setData(t.data)}}onStyleSelect(t){const e=this.map;e&&(this.prepareStyle(t),e.setStyle(t.json)),this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{style:t})}onStyleChange(t,e){const n=this.map;if(n){if("overlay-toggled"===t){const t=this.stateService.state.style.overlay?"visible":"none";n.setLayoutProperty("main-polygon-fill","visibility",t),n.setLayoutProperty("main-polygon-outline","visibility",t)}if("segments-toggled"===t){const t=this.stateService.state.style.segments?"visible":"none";n.setLayoutProperty("main-segment-fill","visibility",t),n.setLayoutProperty("main-segment-outline","visibility",t)}if("routable-toggled"===t){const t=this.stateService.state.style.segments?"visible":"none";n.setLayoutProperty("main-routable-fill","visibility",t),n.setLayoutProperty("main-routable-outline","visibility",t)}"cluster-toggled"===t&&n.setLayoutProperty("clusters-circle","visibility",this.stateService.state.style.cluster?"visible":"none")}if("layer-update"===t&&e){const{layer:t,changes:n}=e,r=n.filter(t=>"E"===t.kind&&"layout"===t.path[0]),i=n.filter(t=>"E"===t.kind&&"paint"===t.path[0]),o=this.map;o&&(r.forEach(e=>{"E"===e.kind&&o.setLayoutProperty(t.id,e.path[1],e.rhs)}),i.forEach(e=>{"E"===e.kind&&o.setPaintProperty(t.id,e.path[1],e.rhs)}))}if("filter-change"===t){const t=this.map;this.map.getStyle().layers.forEach(e=>{t.getLayer(e.id)&&t.removeLayer(e.id),t.addLayer(e)})}this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{style:this.stateService.state.style})}onRasterToggle(t){this.imageSourceManager.enabled=t;const e=this.map;e&&this.imageSourceManager.setLevel(e,this.stateService.state.floor.level)}onLoad(t){this.map=t,this.onMapReady(),this.mapLoaded.emit(!0),this.map.resize()}onMapReady(){return cm(this,void 0,void 0,function*(){const t=this.map;if(t){this.stateService.state.style.togglePaths(!0);const e=t.getLayer("routing-line-completed"),n=void 0===e&&void 0!==t.getLayer("proximiio-routing-line-completed"),r=t.getLayer("shops");n?(t.moveLayer("proximiio-routing-line-completed","proximiio-outer_wall"),t.moveLayer("proximiio-routing-line-remaining","proximiio-outer_wall"),t.moveLayer("proximiio-paths","routing-line-completed")):e&&(r&&(t.moveLayer("routing-line-completed","proximiio-routing-symbols"),t.moveLayer("routing-line-remaining","proximiio-routing-symbols")),t.moveLayer("proximiio-paths","routing-line-completed")),t.setMaxZoom(30);const i=yield new Promise((t,e)=>{const n=new Image;n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABvElEQVRoge3YWUsCURiA4TPdVdBGli1E20XLr+gHB923WFdt0k6aQZlB+guCIHi7mCXBwY7fOJ5Pm/faYc7D6DnjZ0xWls6AEWAXeAE2XK9HVIDY57cGsOV6XR0VIA5orQFsul6fVQHiMAYRVlePCRBHbRBh78C66/XGBoxaIpoxa67X3RKw1wEi7A1YSXttQx1+/ktwjyVjTAFYFlybTsAw8TuVmidjHX/vWP8GU0XZ18x2G+4bTEGIeQYWXBui8M+WYyGmohFzkgAz79oQlRDzpA0zBpwJMWVgzrUhChgfNMy5EFMC8q4NUQHmYlAwEwkwt8C0a0MUMAVcCzFFwLO5T6ev8ZK+jTGfwmtnTW/W2D7838mp8Gk0gG3XhqSIOhrGSiQ7S3RMYPB3KukZomPykhBR04SQnhk1NIyNgEngUoh4GxTEqmuDAXL4rxKSqmiYqASIu35HzCRAvKJhghIg7oWICrDo2tANhI6JCfLX8TIpDxd6MY0vG2N2PM/7EFybTvhnRlHTkxCH/bZbQtNEJC4LjH5EWICJ28Ee0TQBsQl/O35oQtwAOdfrEgXkgSv8v7V6xjdZWd3pB9JxAjY9tg5oAAAAAElFTkSuQmCC",n.onload=()=>t(n),n.onerror=e=>t(n)});t.addImage("chevron_right",i),t.addImage("pulsing-dot",gP,{pixelRatio:2}),this.updateMapSource(this.geojsonSource),this.updateMapSource(this.routingSource),this.updateCluster(),this.imageSourceManager.setLevel(t,this.stateService.state.floor.level),yield this.onPlaceSelect(this.stateService.state.place),this.handleQueryParams()}})}handleQueryParams(){if(this.activatedRoute.snapshot.queryParams.place){const t=this.activatedRoute.snapshot.queryParams.place,e=this.stateService.state.places.find(e=>e.id===t);e?this.sidebarService.selectedPlaceListener.next(e):this.dialog.open(KP,{data:{header:`We couldn't find place that matches id "${t}".`,message:"Try searching other id, or use navigation to find it!",closeText:"Okay, got it"}})}if(this.activatedRoute.snapshot.queryParams.startPoi){const t=this.activatedRoute.snapshot.queryParams.startPoi,e=this.features.features.find(e=>e.properties.id===t);e?this.sidebarService.startPointListener.next(e):this.dialog.open(KP,{data:{header:`We couldn't find starting point that matches id "${t}".`,message:"Try searching other id, or use navigation to find it!",closeText:"Okay, got it"}})}if(this.activatedRoute.snapshot.queryParams.endPoi){const t=this.activatedRoute.snapshot.queryParams.endPoi,e=this.features.features.find(e=>e.properties.id===t);e?this.sidebarService.onSetEndPoi(e):this.dialog.open(KP,{data:{header:`We couldn't find ending point that matches id "${t}".`,message:"Try searching other id, or use navigation to find it!",closeText:"Okay, got it"}})}}updateCluster(){const t=this.map;if(t){const e={type:"FeatureCollection",features:this.geojsonSource.data.features.filter(t=>t.isPoint&&t.hasLevel(this.stateService.state.floor.level)).map(t=>t.json)},n=t.getSource("clusters");n&&n.setData(e)}}setPlace(t){this.onPlaceSelect(new Qy(t))}onPlaceSelect(t){return cm(this,void 0,void 0,function*(){this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{place:t});const e=yield _P(0,t.id),n={floors:e.sort((t,e)=>t.level-e.level)};if(e.length>0){const t=e.find(t=>0===t.level);n.floor=t||e[0]}this.stateService.state=Object.assign(Object.assign({},this.stateService.state),n);const r=this.map;r&&r.flyTo({center:[t.lng,t.lat],bearing:this.stateService.state.options.bearing,pitch:this.stateService.state.options.pitch})})}onFloorChange(t){let e,n="up"===t?this.stateService.state.floor.level+1:this.stateService.state.floor.level-1;this.routingSource.route&&(n=this.getUpcomingFloorNumber(t)),e=this.stateService.state.floors.filter(t=>t.level===n)?this.stateService.state.floors.filter(t=>t.level===n)[0]:this.stateService.state.floor,e&&this.onFloorSelect(new Jy(e))}onFloorSelect(t){const e=this.map,n=this.routingSource.route&&this.routingSource.route[t.level]?this.routingSource.route[t.level]:null;if(e&&(this.stateService.state.style.setLevel(t.level),setTimeout(()=>{[...this.stateService.state.style.getLayers("main"),...this.stateService.state.style.getLayers("route")].forEach(t=>{e.getLayer(t.id)&&e.setFilter(t.id,t.filter)}),this.imageSourceManager.setLevel(e,t.level)}),n)){const t=iP.bbox(n.geometry);e.fitBounds(t,{padding:150,bearing:this.stateService.state.options.bearing,pitch:this.stateService.state.options.pitch})}this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{floor:t,style:this.stateService.state.style}),this.updateCluster()}generateRoute(){this.startPoi&&this.endPoi?this.onRouteUpdate(this.startPoi,this.endPoi):this.startPoi&&this.endPoi||this.onRouteCancel()}onRouteUpdate(t,e){try{this.routingSource.update(t,e)}catch(iL){console.log("catched",iL)}this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{style:this.stateService.state.style})}onRouteCancel(){this.routingSource.cancel()}onOptionsChange(t){this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{options:t})}onMyLocation(){this.map&&this.map.flyTo({center:this.stateService.state.defaultLocation.coordinates,bearing:this.stateService.state.options.bearing,pitch:this.stateService.state.options.pitch})}onSettings(){this.dialog.open(fA,{width:"420px"}).afterClosed().subscribe(t=>{if(t){const e=this.stateService.state.options;e.zoom=t.zoom,e.bearing=t.bearing,e.pitch=t.pitch,this.stateService.state=Object.assign(Object.assign({},this.stateService.state),{options:e}),this.map.setZoom(t.zoom),this.map.setPitch(t.pitch),this.map.setBearing(t.bearing),this.stateService.state.defaultLocation.coordinates=[t.longitude,t.latitude],this.stateService.state.defaultLocation.level=t.level,this.stateService.state.defaultLocation.isStartPoint&&this.setStartPoint()}})}setStartPoint(){this.showStartPoint=!1,setTimeout(()=>{const t=iP.point(this.stateService.state.defaultLocation.coordinates,{level:this.stateService.state.defaultLocation.level});this.sidebarService.startPointListener.next(t),this.showStartPoint=!0})}centerOnPoi(t){if(this.stateService.state.floor.level!==parseInt(t.properties.level,0)){const e=this.stateService.state.floors.find(e=>e.level===t.properties.level);this.onFloorSelect(e)}this.map&&this.map.flyTo({center:t.geometry.coordinates,bearing:this.stateService.state.options.bearing,pitch:this.stateService.state.options.pitch})}centerOnRoute(t){if(t&&t.properties){if(this.stateService.state.floor.level!==parseInt(t.properties.level,0)){const e=this.stateService.state.floors.find(e=>e.level===parseInt(t.properties.level,0));this.onFloorSelect(e)}if(this.map){const e=iP.bbox(t.geometry);this.map.fitBounds(e,{padding:150,bearing:this.stateService.state.options.bearing,pitch:this.stateService.state.options.pitch})}}}getUpcomingFloorNumber(t){if(this.routingSource.route){const e=this.routingSource.lines.findIndex(t=>+t.properties.level===this.stateService.state.floor.level),n=this.routingSource.lines["up"===t?e+1:e-1];return n?+n.properties.level:this.stateService.state.floor.level}}onResized(t){this.map&&this.map.resize()}updateImages(){const t=new Set(this.features.features.filter(t=>t.properties&&"poi"===t.properties.usecase&&t.properties.amenity).map(t=>t.properties.amenity)),e={};t.forEach(t=>{e[t]=this.amenityBaseLinks[t]}),this.amenities.filter(t=>t.icon).forEach(t=>{e[t.id]={uri:t.icon}}),this.images=e,this.imagesIteration++}onShopClick(t){if(t.features.length>0){const e=this.features.features.find(e=>e.properties.id===t.features[0].properties.poi_id);this.sidebarService.onSetEndPoi(e)}}handlePolygonSelection(t){const e=t&&t.properties.metadata?t.properties.metadata.polygon_id:null;this.selectedPolygon&&(this.map.setFeatureState({source:"main",id:this.selectedPolygon.id},{selected:!1}),this.selectedPolygon.properties.label_id&&this.map.setFeatureState({source:"main",id:this.selectedPolygon.properties.label_id},{selected:!1})),e&&(this.selectedPolygon=this.features.features.find(t=>t.properties.id===e),this.map.setFeatureState({source:"main",id:this.selectedPolygon.id},{selected:!0}),this.selectedPolygon.properties.label_id&&this.map.setFeatureState({source:"main",id:this.selectedPolygon.properties.label_id},{selected:!0}))}onShopMouseEnter(){this.map.getCanvas().style.cursor="pointer"}onShopMouseMove(t){t.features.length>0&&(this.hoveredPolygon&&(this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!1}),this.hoveredPolygon.properties.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties.label_id},{hover:!1})),this.hoveredPolygon=t.features[0],this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!0}),this.hoveredPolygon.properties.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties.label_id},{hover:!0}))}onShopMouseLeave(t){this.map.getCanvas().style.cursor="",this.hoveredPolygon&&(this.map.setFeatureState({source:"main",id:this.hoveredPolygon.id},{hover:!1}),this.hoveredPolygon.properties.label_id&&this.map.setFeatureState({source:"main",id:this.hoveredPolygon.properties.label_id},{hover:!1})),this.hoveredPolygon=null}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),this.cancelObservers()}}return t.\u0275fac=function(e){return new(e||t)(Ts(JT),Ts(Am),Ts(Nv),Ts(wf),Ts(Lv),Ts(MP))},t.\u0275cmp=$t({type:t,selectors:[["app-map"]],decls:6,vars:3,consts:[[3,"resized"],[1,"my-location",3,"click"],[1,"icon"],[1,"settings",3,"click"],["size","lg",3,"icon"],[3,"style","load",4,"ngIf"],[3,"load"],["mglNavigation","",3,"showZoom"],["id","shop-custom","type","fill-extrusion","source","main",3,"minzoom","maxzoom","filter","layout","paint","click","mouseEnter","mouseLeave","mouseMove"],["id","poi-custom-icons","type","symbol","source","main",3,"minzoom","maxzoom","filter","layout","paint"],["id","shop-labels","type","symbol","source","main",3,"minzoom","maxzoom","filter","layout","paint"],["id","my-location"],[3,"geometry","properties",4,"ngIf"],["id","my-location-layer","type","symbol","source","my-location",3,"layout","filter"],[4,"ngFor","ngForOf"],[3,"geometry","properties"],[3,"id","url"]],template:function(t,e){1&t&&(Os(0,"div",0),js("resized",function(t){return e.onResized(t)}),Os(1,"button",1),js("click",function(){return e.onMyLocation()}),Ls(2,"span",2),Ms(),Os(3,"button",3),js("click",function(){return e.onSettings()}),Ls(4,"fa-icon",4),Ms(),Is(5,dO,9,111,"mgl-map",5),Ms()),2&t&&(Xi(4),Ps("icon",Xl(2,fO)),Xi(1),Ps("ngIf",!e.stateService.state.initializing))},directives:[Jb,eh,NA,IA,PA,AA,OA,Qc,MA,LA],styles:["[_nghost-%COMP%]{position:relative;display:block;width:100%;height:100%;min-height:320px;z-index:0}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:100%}mgl-map[_ngcontent-%COMP%]{width:100%;height:100%;min-height:320px}mgl-map[_ngcontent-%COMP%]     .mapboxgl-map{min-height:320px}mgl-map[_ngcontent-%COMP%]     .mapboxgl-map .mapboxgl-ctrl-top-right{top:100px;right:20px}mgl-map[_ngcontent-%COMP%]     .mapboxgl-map .mapboxgl-ctrl-group{background-color:#6b50d0;color:#fff;box-shadow:none;border-radius:48px}mgl-map[_ngcontent-%COMP%]     .mapboxgl-map .mapboxgl-ctrl-group>button{width:48px!important;height:48px!important;padding:.8rem;border-radius:48px!important}mgl-map[_ngcontent-%COMP%]     .mapboxgl-map .mapboxgl-ctrl-group>button.mapboxgl-ctrl-compass{margin:.1em 2px!important}mgl-map[_ngcontent-%COMP%]     .mapboxgl-map .mapboxgl-ctrl-group>button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(compass-regular.3aa0d2bcfd6e46847931.svg)}.my-location[_ngcontent-%COMP%], .settings[_ngcontent-%COMP%]{background-color:#6b50d0;color:#fff;box-shadow:none;border-radius:48px;border:0;position:fixed;right:30px;top:45px;z-index:5;width:52px;height:52px;padding:.9rem;cursor:pointer;outline:none}.my-location[_ngcontent-%COMP%]:hover, .settings[_ngcontent-%COMP%]:hover{background-color:#6144cd}.my-location[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-image:url(location-regular.f62593a8f04f0b99c43c.svg);background-repeat:no-repeat;display:block;height:48px;width:48px;background-size:24px}.settings[_ngcontent-%COMP%]{top:auto;bottom:45px}.map-floors[_ngcontent-%COMP%]{position:fixed;z-index:9;right:10px;top:10px}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:absolute;background-color:#fff;display:block;width:20px;height:20px;line-height:20px;font-size:12px;text-align:center;border-radius:50%;left:-5px;top:-5px;font-weight:700;color:#222}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.current-floor[_ngcontent-%COMP%], .map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:block;width:45px;height:45px;line-height:45px;background-color:#10283f;border-radius:50%;color:#fff;text-align:center}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li.current-floor[_ngcontent-%COMP%]{margin:10px 0;font-size:26px;font-weight:300;background-color:rgba(16,40,63,.63)}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:#183c5e}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a.blinking[_ngcontent-%COMP%]{-webkit-animation-name:anim;animation-name:anim;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-direction:alternate;animation-direction:alternate;-webkit-animation-timing-function:linear;animation-timing-function:linear}.map-floors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child > a[_ngcontent-%COMP%]{line-height:48px}@-webkit-keyframes anim{to{background-color:#3daa55}}@keyframes anim{to{background-color:#3daa55}}.toggle-sidebar[_ngcontent-%COMP%]{position:absolute;z-index:9;left:10px;top:10px;display:block;width:45px;height:45px;line-height:45px;background-color:#10283f;border-radius:50%;color:hsla(0,0%,100%,.87);text-align:center}.toggle-sidebar[_ngcontent-%COMP%]:hover{background-color:#183c5e;color:#fff}"]}),t})();function mO(t,e){if(1&t&&(an(),Ls(0,"circle",3)),2&t){const t=Gs();la("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),Ss("r",t._getCircleRadius())}}function gO(t,e){if(1&t&&(an(),Ls(0,"circle",3)),2&t){const t=Gs();la("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),Ss("r",t._getCircleRadius())}}function yO(t,e){if(1&t&&(an(),Ls(0,"circle",3)),2&t){const t=Gs();la("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),Ss("r",t._getCircleRadius())}}function vO(t,e){if(1&t&&(an(),Ls(0,"circle",3)),2&t){const t=Gs();la("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),Ss("r",t._getCircleRadius())}}const bO=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n";class xO{constructor(t){this._elementRef=t}}const wO=AI(xO,"primary"),EO=new Hn("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});let SO=(()=>{class t extends wO{constructor(e,n,r,i,o){super(e),this._elementRef=e,this._document=r,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const s=t._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),s.has(r.head)||s.set(r.head,new Set([100])),this._fallbackAnimation=n.EDGE||n.TRIDENT,this._noopAnimations="NoopAnimations"===i&&!!o&&!o._forceAnimations,o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=_g(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=_g(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,_g(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=iy(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const e=this._styleRoot,n=this._diameter,r=t._diameters;let i=r.get(e);if(!i||!i.has(n)){const t=this._document.createElement("style");t.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),t.textContent=this._getAnimationText(),e.appendChild(t),i||(i=new Set,r.set(e,i)),i.add(n)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya),Ts(Xg),Ts(Pc,8),Ts(wI,8),Ts(EO))},t.\u0275cmp=$t({type:t,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(Ss("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),la("width",e.diameter,"px")("height",e.diameter,"px"),ua("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[hs],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(an(),Os(0,"svg",0),Is(1,mO,1,9,"circle",1),Is(2,gO,1,7,"circle",2),Ms()),2&t&&(la("width",e.diameter,"px")("height",e.diameter,"px"),Ps("ngSwitch","indeterminate"===e.mode),Ss("viewBox",e._getViewBox()),Xi(1),Ps("ngSwitchCase",!0),Xi(1),Ps("ngSwitchCase",!1))},directives:[oh,sh],styles:[bO],encapsulation:2,changeDetection:0}),t._diameters=new WeakMap,t})(),CO=(()=>{class t extends SO{constructor(t,e,n,r,i){super(t,e,n,r,i),this.mode="indeterminate"}}return t.\u0275fac=function(e){return new(e||t)(Ts(Ya),Ts(Xg),Ts(Pc,8),Ts(wI,8),Ts(EO))},t.\u0275cmp=$t({type:t,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(la("width",e.diameter,"px")("height",e.diameter,"px"),ua("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[hs],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(an(),Os(0,"svg",0),Is(1,yO,1,9,"circle",1),Is(2,vO,1,7,"circle",2),Ms()),2&t&&(la("width",e.diameter,"px")("height",e.diameter,"px"),Ps("ngSwitch","indeterminate"===e.mode),Ss("viewBox",e._getViewBox()),Xi(1),Ps("ngSwitchCase",!0),Xi(1),Ps("ngSwitchCase",!1))},directives:[oh,sh],styles:[bO],encapsulation:2,changeDetection:0}),t})(),IO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[TI,ch],TI]}),t})();function kO(t,e){1&t&&(Ns(0),Os(1,"div",1),Ls(2,"app-sidebar"),Ls(3,"app-map"),Ms(),Ds())}function TO(t,e){1&t&&(Os(0,"p",4),Ea(1," Loading..."),Ls(2,"br"),Ls(3,"mat-spinner",5),Ms())}function PO(t,e){if(1&t&&(Ns(0),Os(1,"div",1),Is(2,TO,4,0,"p",2),Ls(3,"router-outlet",null,3),Ms(),Ds()),2&t){const t=Gs();Xi(2),Ps("ngIf",t.isLoading)}}let AO=(()=>{class t{constructor(t,e){this.authService=t,this.userIsAuthenticated=!1,this.isLoading=!1,this.theme$="custom-theme",this.sendAnalytics=!0,e.getContainerElement().classList.add(this.theme$)}ngOnInit(){this.isLoading=!0,this.authService.autoAuthUser(),this.userIsAuthenticated=this.authService.getIsAuth(),this.authListenerSubs=this.authService.getAuthStatusListener().subscribe(t=>{this.isLoading=!1,this.userIsAuthenticated=t,this.currentUserConfig=this.authService.getCurrentUserConfig(),setTimeout(()=>{this.startAhoyTracking()},500)}),this.userIsAuthenticated?(this.currentUserConfig=this.authService.getCurrentUserConfig(),this.startAhoyTracking()):this.authService.login()}startAhoyTracking(){this.sendAnalytics&&Mm.a.get({excludes:{canvas:!0,webgl:!0}},t=>{this.fingerprint=t,dg.configure({urlPrefix:"",visitsUrl:"/wayfinding/analytics/ahoy/visits",eventsUrl:"/wayfinding/analytics/ahoy/events",page:null,platform:"Web",useBeacon:!0,startOnReady:!0,trackVisits:!0,cookies:!0,cookieDomain:null,headers:{Authorization:`Bearer ${this.authService.getToken()}`},visitParams:{fingerprint:t},withCredentials:!1}),dg.trackAll()})}ngOnDestroy(){this.authListenerSubs&&this.authListenerSubs.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ts(Am),Ts(Ry))},t.\u0275cmp=$t({type:t,selectors:[["app-root"]],decls:3,vars:4,consts:[[4,"ngIf"],[1,"content"],["style","margin: 2rem 0; text-align: center;",4,"ngIf"],["o","outlet"],[2,"margin","2rem 0","text-align","center"],["color","accent","diameter","38",2,"margin","2rem auto"]],template:function(t,e){1&t&&(Os(0,"div"),Is(1,kO,4,0,"ng-container",0),Is(2,PO,5,1,"ng-container",0),Ms()),2&t&&(da(tr,ha,"theme-wrapper "+e.theme$,!0),Xi(1),Ps("ngIf",e.userIsAuthenticated),Xi(1),Ps("ngIf",!e.userIsAuthenticated))},directives:[eh,KT,_O,$_,CO],styles:["app-sidebar[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:460px;z-index:1;padding-top:120px}.content[_ngcontent-%COMP%]{height:100vh;position:static}"]}),t})(),OO=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){const n=this.authService.getIsAuth();return n||this.router.navigate(["/login"],{queryParams:t.queryParams,queryParamsHandling:"merge"}),n}}return t.\u0275fac=function(e){return new(e||t)(ur(Am),ur(U_))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const MO=[{path:"",redirectTo:"/map",pathMatch:"full"},{path:"map",component:_O,data:{breadcrumb:"Map"},canActivate:[OO],pathMatch:"full"}];let LO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[Q_.forChild(MO)],Q_]}),t})(),NO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[TI],TI]}),t})(),DO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[TI],TI]}),t})();const RO={provide:new Hn("mat-menu-scroll-strategy"),deps:[Zy],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let zO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[RO],imports:[TI]}),t})(),FO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[RO],imports:[[ch,TI,GI,Xy,zO],hy,TI,zO]}),t})();const BO={provide:new Hn("mat-select-scroll-strategy"),deps:[Zy],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let jO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[BO],imports:[[ch,Xy,ZI,TI],hy,kk,ZI,TI]}),t})();const VO={provide:new Hn("mat-tooltip-scroll-strategy"),deps:[Zy],useFactory:function(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}};let UO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[VO],imports:[[eS,ch,Xy,TI],TI,hy]}),t})(),$O=(()=>{class t{constructor(){this.changes=new E,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,e,n)=>{if(0==n||0==e)return`0 of ${n}`;const r=t*e;return`${r+1} \u2013 ${r<(n=Math.max(n,0))?Math.min(r+e,n):r+e} of ${n}`}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})();const qO={provide:$O,deps:[[new fr,new _r,$O]],useFactory:function(t){return t||new $O}};let GO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[qO],imports:[[ch,HP,jO,UO,TI]]}),t})(),HO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ch,TI,Yg,hy],hy,TI]}),t})(),ZO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({}),t})(),WO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ZO,GI,TI,UE],ZO,TI]}),t})(),XO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[Xy,by,ch,HP,TI],TI]}),t})(),YO=(()=>{class t{constructor(){this.changes=new E,this.sortButtonLabel=t=>`Change sorting for ${t}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ht({factory:function(){return new t},token:t,providedIn:"root"}),t})();const KO={provide:YO,deps:[[new fr,new _r,YO]],useFactory:function(t){return t||new YO}};let JO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({providers:[KO],imports:[[ch,TI]]}),t})(),QO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[py]]}),t})(),tM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[QO,TI],TI]}),t})(),eM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[TI],TI]}),t})(),nM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[HO,eM,kT,DO,HP,FO,IO,aA,NO,tM,GO,UO,JO,jO,XO,BP,WO]}),t})();var rM={prefix:"fal",iconName:"angle-double-left",icon:[320,512,[],"f100","M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"]},iM={prefix:"fal",iconName:"angle-double-right",icon:[320,512,[],"f101","M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"]},oM={prefix:"fal",iconName:"angle-down",icon:[256,512,[],"f107","M119.5 326.9L3.5 209.1c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0L128 287.3l100.4-102.2c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L136.5 327c-4.7 4.6-12.3 4.6-17-.1z"]},sM={prefix:"fal",iconName:"angle-left",icon:[192,512,[],"f104","M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z"]},aM={prefix:"fal",iconName:"angle-right",icon:[192,512,[],"f105","M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z"]},lM={prefix:"fal",iconName:"angle-up",icon:[256,512,[],"f106","M136.5 185.1l116 117.8c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L128 224.7 27.6 326.9c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17l116-117.8c4.7-4.6 12.3-4.6 17 .1z"]},uM={prefix:"fal",iconName:"arrow-down",icon:[448,512,[],"f063","M443.5 248.5l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L241 419.9V44c0-6.6-5.4-12-12-12h-10c-6.6 0-12 5.4-12 12v375.9L28.5 241.4c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l211 211.1c4.7 4.7 12.3 4.7 17 0l211-211.1c4.8-4.8 4.8-12.3.1-17z"]},cM={prefix:"fal",iconName:"arrow-left",icon:[448,512,[],"f060","M231.536 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L60.113 273H436c6.627 0 12-5.373 12-12v-10c0-6.627-5.373-12-12-12H60.113L238.607 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L3.515 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"]},hM={prefix:"fal",iconName:"arrow-right",icon:[448,512,[],"f061","M216.464 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L387.887 239H12c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h375.887L209.393 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L233.434 36.465c-4.686-4.687-12.284-4.687-16.97 0z"]},pM={prefix:"fal",iconName:"arrow-up",icon:[448,512,[],"f062","M4.465 263.536l7.07 7.071c4.686 4.686 12.284 4.686 16.971 0L207 92.113V468c0 6.627 5.373 12 12 12h10c6.627 0 12-5.373 12-12V92.113l178.494 178.493c4.686 4.686 12.284 4.686 16.971 0l7.07-7.071c4.686-4.686 4.686-12.284 0-16.97l-211.05-211.05c-4.686-4.686-12.284-4.686-16.971 0L4.465 246.566c-4.687 4.686-4.687 12.284 0 16.97z"]},dM={prefix:"fal",iconName:"baby",icon:[384,512,[],"f77c","M374.2 160.3c-17.4-25.2-52-32.1-77.9-14.5l-36.4 25c-29.4 20.2-86 34.3-135.9 0l-36.4-25C61.9 128.2 27.2 135 9.8 160.3c-17.5 25.5-11 60.4 14.4 77.9l36.4 24.9c10.9 7.5 22.8 14.1 35.4 19.8v22.6l-54.3 56.2c-19.2 17.8-23.5 46.4-10 69.3L70 487.1c10.3 15.4 27.9 24.9 46.6 24.9 10 0 19.8-2.7 28.4-7.8 13-7.7 52.3-40.5 2-96.5l18.4-11.6c15.1 5.3 37.9 5.3 53.1 0l18.4 11.6c-50.3 56-11 88.8 2 96.5 8.6 5.1 18.4 7.8 28.4 7.8 18.7 0 36.2-9.5 46.6-24.9l38.3-56.1c13.5-22.9 9.1-51.5-10-69.3L288 305.5v-22.6c12.6-5.6 24.4-12.3 35.4-19.8l36.4-24.9c25.4-17.5 31.9-52.5 14.4-77.9zm-237 283.5c6.7 11.4 2.9 26.1-8.5 32.9-3.8 2.3-8 3.3-12.2 3.3-8.2 0-16.2-4.2-20.7-11.8l-36.6-53.4c-6-10.2-3.7-23.3 5.5-30.8l38.8-41.2c.7.8 1 1.8 1.7 2.6l35.2 35.2-29.4 27.7 26.2 35.5zm82.9-85.2c-13.2 13.2-43.5 12.8-56.2 0L128 322.7V312h128v10.7l-35.9 35.9zm99.1 25.4c9.2 7.5 11.5 20.6 5.5 30.8l-36.6 53.4c-4.5 7.6-12.5 11.8-20.7 11.8-4.1 0-8.3-1.1-12.2-3.3-11.4-6.7-15.2-21.5-8.5-32.9l26.1-35.6-29.4-27.7 35.2-35.2c.7-.7 1.1-1.8 1.7-2.6l38.9 41.3zm22.4-172.2l-36.3 24.9c-15.4 10.5-32 18.5-49.3 24.4V280H128v-18.9c-17.3-5.9-33.9-13.8-49.3-24.4l-36.3-24.9c-26.4-18.2 1.2-57.3 27.2-39.6l36.3 24.9c47.2 32.4 117.3 37.7 172.1 0l36.3-24.9c26.1-17.7 53.7 21.4 27.3 39.6zM192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm0-128c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48z"]},fM={prefix:"fal",iconName:"boot",icon:[512,512,[],"f782","M415 247.8L352 232V128c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H32C14.3 0 0 14.3 0 32v434.7c0 8.5 3.4 16.6 9.4 22.6l13.3 13.3c6 6 14.1 9.4 22.6 9.4h37.5c8.5 0 16.6-3.4 22.6-9.4L128 480l22.6 22.6c6 6 14.1 9.4 22.6 9.4h37.5c8.5 0 16.6-3.4 22.6-9.4L256 480l22.6 22.6c6 6 14.1 9.4 22.6 9.4h37.5c8.5 0 16.6-3.4 22.6-9.4L384 480l22.6 22.6c6 6 14.1 9.4 22.6 9.4h37.5c8.5 0 16.6-3.4 22.6-9.4l13.3-13.3c6-6 9.4-14.1 9.4-22.6v-94.8c0-58.7-40-109.9-97-124.1zM32 32h320v64H32V32zm448 434.7L466.7 480h-37.5l-22.6-22.6c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4L338.7 480h-37.5l-22.6-22.6c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4L210.7 480h-37.5l-22.6-22.6c-6-6-14.1-9.4-22.6-9.4s-16.6 3.4-22.6 9.4L82.7 480H45.3L32 466.7V416h448v50.7zm0-82.7H32V128h288v32h-88c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h88v32h-88c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h88l87.3 22.8c42.8 10.7 72.7 49 72.7 93.1V384z"]},_M={prefix:"fal",iconName:"caret-square-down",icon:[448,512,[],"f150","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm16 400c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V80c0-8.8 7.2-16 16-16h352c8.8 0 16 7.2 16 16v352zm-96-208l-96 96-96-96h192m-192-32c-28.4 0-42.8 34.5-22.6 54.6l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c20.1-20.1 5.9-54.6-22.6-54.6H128z"]},mM={prefix:"fal",iconName:"caret-square-up",icon:[448,512,[],"f151","M48 480h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48zM32 80c0-8.8 7.2-16 16-16h352c8.8 0 16 7.2 16 16v352c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V80zm96 208l96-96 96 96H128m192 32c28.4 0 42.8-34.5 22.6-54.6l-96-96c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-20 20.1-5.8 54.6 22.7 54.6h192z"]},gM={prefix:"fal",iconName:"chevron-double-left",icon:[384,512,[],"f323","M349.5 475.5l-211.1-211c-4.7-4.7-4.7-12.3 0-17l211.1-211c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L178.1 256l195.5 195.5c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.6-12.3 4.6-17-.1zm-111 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L50.1 256 245.5 60.5c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0l-211.1 211c-4.7 4.7-4.7 12.3 0 17l211.1 211c4.8 4.8 12.4 4.8 17.1.1z"]},yM={prefix:"fal",iconName:"chevron-double-right",icon:[384,512,[],"f324","M34.5 36.5l211.1 211c4.7 4.7 4.7 12.3 0 17l-211.1 211c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L205.9 256 10.5 60.5c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.6-4.6 12.2-4.6 16.9.1zm111 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L333.9 256 138.5 451.5c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l211.1-211c4.7-4.7 4.7-12.3 0-17l-211.1-211c-4.8-4.8-12.4-4.8-17.1-.1z"]},vM={prefix:"fal",iconName:"chevron-down",icon:[448,512,[],"f078","M443.5 162.6l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L224 351 28.5 155.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l211 211.1c4.7 4.7 12.3 4.7 17 0l211-211.1c4.8-4.7 4.8-12.3.1-17z"]},bM={prefix:"fal",iconName:"chevron-left",icon:[256,512,[],"f053","M238.475 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L50.053 256 245.546 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L10.454 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"]},xM={prefix:"fal",iconName:"chevron-right",icon:[256,512,[],"f054","M17.525 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L205.947 256 10.454 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L34.495 36.465c-4.686-4.687-12.284-4.687-16.97 0z"]},wM={prefix:"fal",iconName:"chevron-up",icon:[448,512,[],"f077","M4.465 366.475l7.07 7.071c4.686 4.686 12.284 4.686 16.971 0L224 178.053l195.494 195.493c4.686 4.686 12.284 4.686 16.971 0l7.07-7.071c4.686-4.686 4.686-12.284 0-16.97l-211.05-211.051c-4.686-4.686-12.284-4.686-16.971 0L4.465 349.505c-4.687 4.686-4.687 12.284 0 16.97z"]},EM={prefix:"fal",iconName:"coffee",icon:[576,512,[],"f0f4","M517.9 448H26.1c-24.5 0-33.1-32-20-32h531.8c13.1 0 4.5 32-20 32zM576 159.1c.5 53.4-42.7 96.9-96 96.9h-32v32c0 53-43 96-96 96H160c-53 0-96-43-96-96V76c0-6.6 5.4-12 12-12h402.8c52.8 0 96.7 42.2 97.2 95.1zM416 96H96v192c0 35.3 28.7 64 64 64h192c35.3 0 64-28.7 64-64V96zm128 64c0-35.3-28.7-64-64-64h-32v128h32c35.3 0 64-28.7 64-64z"]},SM={prefix:"fal",iconName:"cog",icon:[512,512,[],"f013","M482.696 299.276l-32.61-18.827a195.168 195.168 0 0 0 0-48.899l32.61-18.827c9.576-5.528 14.195-16.902 11.046-27.501-11.214-37.749-31.175-71.728-57.535-99.595-7.634-8.07-19.817-9.836-29.437-4.282l-32.562 18.798a194.125 194.125 0 0 0-42.339-24.48V38.049c0-11.13-7.652-20.804-18.484-23.367-37.644-8.909-77.118-8.91-114.77 0-10.831 2.563-18.484 12.236-18.484 23.367v37.614a194.101 194.101 0 0 0-42.339 24.48L105.23 81.345c-9.621-5.554-21.804-3.788-29.437 4.282-26.36 27.867-46.321 61.847-57.535 99.595-3.149 10.599 1.47 21.972 11.046 27.501l32.61 18.827a195.168 195.168 0 0 0 0 48.899l-32.61 18.827c-9.576 5.528-14.195 16.902-11.046 27.501 11.214 37.748 31.175 71.728 57.535 99.595 7.634 8.07 19.817 9.836 29.437 4.283l32.562-18.798a194.08 194.08 0 0 0 42.339 24.479v37.614c0 11.13 7.652 20.804 18.484 23.367 37.645 8.909 77.118 8.91 114.77 0 10.831-2.563 18.484-12.236 18.484-23.367v-37.614a194.138 194.138 0 0 0 42.339-24.479l32.562 18.798c9.62 5.554 21.803 3.788 29.437-4.283 26.36-27.867 46.321-61.847 57.535-99.595 3.149-10.599-1.47-21.972-11.046-27.501zm-65.479 100.461l-46.309-26.74c-26.988 23.071-36.559 28.876-71.039 41.059v53.479a217.145 217.145 0 0 1-87.738 0v-53.479c-33.621-11.879-43.355-17.395-71.039-41.059l-46.309 26.74c-19.71-22.09-34.689-47.989-43.929-75.958l46.329-26.74c-6.535-35.417-6.538-46.644 0-82.079l-46.329-26.74c9.24-27.969 24.22-53.869 43.929-75.969l46.309 26.76c27.377-23.434 37.063-29.065 71.039-41.069V44.464a216.79 216.79 0 0 1 87.738 0v53.479c33.978 12.005 43.665 17.637 71.039 41.069l46.309-26.76c19.709 22.099 34.689 47.999 43.929 75.969l-46.329 26.74c6.536 35.426 6.538 46.644 0 82.079l46.329 26.74c-9.24 27.968-24.219 53.868-43.929 75.957zM256 160c-52.935 0-96 43.065-96 96s43.065 96 96 96 96-43.065 96-96-43.065-96-96-96zm0 160c-35.29 0-64-28.71-64-64s28.71-64 64-64 64 28.71 64 64-28.71 64-64 64z"]},CM={prefix:"fal",iconName:"compass",icon:[496,512,[],"f14e","M264.97 272.97c9.38-9.37 9.38-24.57 0-33.94-9.37-9.37-24.57-9.37-33.94 0-9.38 9.37-9.38 24.57 0 33.94 9.37 9.37 24.57 9.37 33.94 0zM351.44 125c-2.26 0-4.51.37-6.71 1.16l-154.9 55.85c-7.49 2.7-13.1 8.31-15.8 15.8l-55.85 154.91c-5.65 15.67 10.33 34.27 26.4 34.27 2.26 0 4.51-.37 6.71-1.16l154.9-55.85c7.49-2.7 13.1-8.31 15.8-15.8l55.85-154.9c5.64-15.67-10.33-34.28-26.4-34.28zm-58.65 175.79l-140.1 50.51 50.51-140.11 140.11-50.51-50.52 140.11zM248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm0 464c-119.1 0-216-96.9-216-216S128.9 40 248 40s216 96.9 216 216-96.9 216-216 216z"]},IM={prefix:"fal",iconName:"dot-circle",icon:[512,512,[],"f192","M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 464c-118.663 0-216-96.055-216-216 0-118.663 96.055-216 216-216 118.663 0 216 96.055 216 216 0 118.663-96.055 216-216 216zm0-296c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80zm0 128c-26.467 0-48-21.533-48-48s21.533-48 48-48 48 21.533 48 48-21.533 48-48 48z"]},kM={prefix:"fal",iconName:"ellipsis-h",icon:[320,512,[],"f141","M192 256c0 17.7-14.3 32-32 32s-32-14.3-32-32 14.3-32 32-32 32 14.3 32 32zm88-32c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm-240 0c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"]},TM={prefix:"fal",iconName:"ellipsis-v",icon:[64,512,[],"f142","M32 224c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM0 136c0 17.7 14.3 32 32 32s32-14.3 32-32-14.3-32-32-32-32 14.3-32 32zm0 240c0 17.7 14.3 32 32 32s32-14.3 32-32-14.3-32-32-32-32 14.3-32 32z"]},PM={prefix:"fal",iconName:"ellipsis-v-alt",icon:[192,512,[],"f39c","M96 152c39.8 0 72-32.2 72-72S135.8 8 96 8 24 40.2 24 80s32.2 72 72 72zm0-112c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm0 144c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 112c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm0 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 112c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40z"]},AM={prefix:"fal",iconName:"map-marker-alt",icon:[384,512,[],"f3c5","M192 96c-52.935 0-96 43.065-96 96s43.065 96 96 96 96-43.065 96-96-43.065-96-96-96zm0 160c-35.29 0-64-28.71-64-64s28.71-64 64-64 64 28.71 64 64-28.71 64-64 64zm0-256C85.961 0 0 85.961 0 192c0 77.413 26.97 99.031 172.268 309.67 9.534 13.772 29.929 13.774 39.465 0C357.03 291.031 384 269.413 384 192 384 85.961 298.039 0 192 0zm0 473.931C52.705 272.488 32 256.494 32 192c0-42.738 16.643-82.917 46.863-113.137S149.262 32 192 32s82.917 16.643 113.137 46.863S352 149.262 352 192c0 64.49-20.692 80.47-160 281.931z"]},OM={prefix:"fal",iconName:"money-bill",icon:[640,512,[],"f0d6","M320 144c-53 0-96 50.1-96 112 0 61.8 43 112 96 112s96-50.1 96-112-43-112-96-112zm0 192c-35.3 0-64-35.9-64-80s28.7-80 64-80 64 35.9 64 80-28.7 80-64 80zM608 64H32C14.3 64 0 78.3 0 96v320c0 17.7 14.3 32 32 32h576c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zM32 96h64c0 35.3-28.7 64-64 64V96zm0 320v-64c35.3 0 64 28.7 64 64H32zm576 0h-64c0-35.3 28.7-64 64-64v64zm0-96c-52.9 0-96 43.1-96 96H128c0-52.9-43.1-96-96-96V192c52.9 0 96-43.1 96-96h384c0 52.9 43.1 96 96 96v128zm0-160c-35.3 0-64-28.7-64-64h64v64z"]},MM={prefix:"fal",iconName:"pennant",icon:[576,512,[],"f456","M552 191.3c-30 6.2-115.6 12.5-260.7-63.6-87-45.7-158.1-51.8-210-45.2 9-8.8 14.7-21 14.7-34.5C96 21.5 74.5 0 48 0S0 21.5 0 48c0 20.8 13.4 38.4 32 45.1V504c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-79.6c40.2-27.2 102-56.4 179.5-60.2 28.7-1.4 76-5.8 137.9-18.8 4.4-.9 109.4-23.8 190-121.7 11.8-14.3-.7-36.2-19.4-32.4zM48 32c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm326.9 282.1c-59.9 12.5-105.4 16.8-133 18.2-84.8 4.2-145.3 35.1-177.9 54.2V117.7c47.2-10.6 119.5-10.5 212.4 38.3 118.9 62.4 202.3 72.4 249.5 70.4-69.5 69.7-150.1 87.5-151 87.7z"]},LM={prefix:"fal",iconName:"route",icon:[512,512,[],"f4d7","M432 352H320c-26.5 0-48-21.5-48-48s21.5-48 48-48h96s96-107 96-160-43-96-96-96-96 43-96 96c0 34.6 40.9 92.2 69.3 128H320c-44.1 0-80 35.9-80 80s35.9 80 80 80h112c26.5 0 48 21.5 48 48s-21.5 48-48 48H122.7c28.4-35.8 69.3-93.4 69.3-128 0-53-43-96-96-96S0 299 0 352s96 160 96 160h336c44.1 0 80-35.9 80-80s-35.9-80-80-80zM352 96c0-35.3 28.7-64 64-64s64 28.7 64 64c0 20.4-30.1 68-64 110.4-34-42.6-64-90.6-64-110.4zM32 352c0-35.3 28.7-64 64-64s64 28.7 64 64c0 20.4-30.1 68-64 110.4-34-42.6-64-90.6-64-110.4zm64-16c-21.2 0-21.1 32 0 32 21.2 0 21.1-32 0-32zM416 80c-21.2 0-21.1 32 0 32 21.2 0 21.1-32 0-32z"]},NM={prefix:"fal",iconName:"search",icon:[512,512,[],"f002","M508.5 481.6l-129-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3C395 312 416 262.5 416 208 416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c54.5 0 104-21 141.1-55.2V371c0 3.2 1.3 6.2 3.5 8.5l129 129c4.7 4.7 12.3 4.7 17 0l9.9-9.9c4.7-4.7 4.7-12.3 0-17zM208 384c-97.3 0-176-78.7-176-176S110.7 32 208 32s176 78.7 176 176-78.7 176-176 176z"]},DM={prefix:"fal",iconName:"search-location",icon:[512,512,[],"f689","M208 96c-49.53 0-89.81 40.3-89.81 89.83 0 34.66 38.34 87.2 70.53 125.2 4.81 5.7 11.84 8.97 19.28 8.97s14.47-3.27 19.31-8.97c32.16-38 70.5-90.55 70.5-125.2C297.81 136.3 257.53 96 208 96zm0 188.23c-35.31-42.7-57.81-80.89-57.81-98.41 0-31.89 25.94-57.83 57.81-57.83s57.81 25.94 57.81 57.83c0 17.52-22.5 55.71-57.81 98.41zM208 160c-13.25 0-24 10.74-24 24 0 13.25 10.75 24 24 24s24-10.75 24-24c0-13.26-10.75-24-24-24zm300.47 321.58l-128.99-129c-2.3-2.3-5.3-3.5-8.5-3.5h-10.3c34.3-37.1 55.3-86.6 55.3-141.09C415.98 93.1 322.88 0 207.99 0S0 93.1 0 207.99c0 114.89 93.1 207.99 207.99 207.99 54.5 0 103.99-21 141.09-55.2v10.2c0 3.2 1.3 6.2 3.5 8.5l128.99 128.99c4.7 4.7 12.3 4.7 17 0l9.9-9.9c4.71-4.69 4.71-12.29 0-16.99zm-300.48-97.6C110.7 383.98 32 305.29 32 207.99 32 110.69 110.7 32 207.99 32s175.99 78.7 175.99 175.99c0 97.3-78.69 175.99-175.99 175.99z"]},RM={prefix:"fal",iconName:"shoe-prints",icon:[640,512,[],"f54b","M337.46 272c-34.91 0-76.16 14.06-104.73 34.29-24.79 17.55-44.52 34.29-104.73 34.29H64c-35.35 0-64 30.7-64 68.57S28.65 480 64 480h64l57.53 14.82C217.42 504.3 250.17 512 293.3 512 403.84 512 512 456.84 512 374.86 512 306.29 427.82 272 337.46 272zM112 448H64c-17.05 0-32-18.16-32-38.86 0-20.17 14.36-36.57 32-36.57h48V448zm81.51 15.84L144 451.08v-79.11c55.33-2.95 80.75-20.66 103.08-36.62C338.33 270.38 480 316.73 480 374.86c0 62.15-121.49 137.92-286.49 88.98zM421.29 0c-43.42 0-76.17 7.78-107.77 17.17L256 32h-64c-35.35 0-64 32.98-64 70.86 0 37.87 28.65 68.57 64 68.57h64c60.2 0 79.94 16.73 104.73 34.29C389.3 225.94 430.54 240 465.46 240 555.82 240 640 205.71 640 137.14 640 55.84 533.12 0 421.29 0zM240 139.43h-48c-17.64 0-32-16.4-32-36.57C160 82.16 174.95 64 192 64h48v75.43zM465.46 208c-27.58 0-62.24-11.41-86.24-28.4-23.71-16.89-48.76-36.45-107.22-39.56V60.92l50.65-13.07C352.05 39.1 381.72 32 421.29 32 473.38 32 608 58.02 608 137.14c0 46.52-71.71 70.86-142.54 70.86z"]},zM={prefix:"fal",iconName:"shopping-cart",icon:[576,512,[],"f07a","M551.991 64H129.28l-8.329-44.423C118.822 8.226 108.911 0 97.362 0H12C5.373 0 0 5.373 0 12v8c0 6.627 5.373 12 12 12h78.72l69.927 372.946C150.305 416.314 144 431.42 144 448c0 35.346 28.654 64 64 64s64-28.654 64-64a63.681 63.681 0 0 0-8.583-32h145.167a63.681 63.681 0 0 0-8.583 32c0 35.346 28.654 64 64 64 35.346 0 64-28.654 64-64 0-17.993-7.435-34.24-19.388-45.868C506.022 391.891 496.76 384 485.328 384H189.28l-12-64h331.381c11.368 0 21.177-7.976 23.496-19.105l43.331-208C578.592 77.991 567.215 64 551.991 64zM240 448c0 17.645-14.355 32-32 32s-32-14.355-32-32 14.355-32 32-32 32 14.355 32 32zm224 32c-17.645 0-32-14.355-32-32s14.355-32 32-32 32 14.355 32 32-14.355 32-32 32zm38.156-192H171.28l-36-192h406.876l-40 192z"]},FM={prefix:"fal",iconName:"sort",icon:[320,512,[],"f0dc","M288 288H32c-28.4 0-42.8 34.5-22.6 54.6l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c20-20.1 5.7-54.6-22.7-54.6zM160 448L32 320h256L160 448zM32 224h256c28.4 0 42.8-34.5 22.6-54.6l-128-128c-12.5-12.5-32.8-12.5-45.3 0l-128 128C-10.7 189.5 3.6 224 32 224zM160 64l128 128H32L160 64z"]},BM={prefix:"fal",iconName:"stethoscope",icon:[512,512,[],"f0f1","M430.1 96.5c-43.6 1-78.7 37.5-78.1 81.1.5 38.2 27.8 69.9 64 77.2v105.6c0 65.9-57.4 119.5-128 119.5s-128-53.6-128-119.5v-8.9c71.9-8 128-69.1 128-143.1V25.8c0-5.5-3.7-10.3-9.1-11.6L223.5.4c-6.4-1.6-12.9 2.3-14.6 8.7l-1.9 7.8c-1.6 6.4 2.3 12.9 8.7 14.6l40.3 10v165.8c0 61.8-49.5 112.9-111.3 113.2-62.1.4-112.7-50-112.7-112v-167l40.2-10.1c6.4-1.6 10.3-8.1 8.7-14.6L79 9.1C77.4 2.7 70.9-1.2 64.4.4L9.1 14.2C3.7 15.5 0 20.3 0 25.8v182.6c0 74 56.1 135.1 128 143.1v8.9C128 444 199.8 512 288 512s160-68 160-151.5V254.9c36.5-7.4 64-39.7 64-78.4 0-44.9-36.9-81.1-81.9-80zm1.9 128c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm23.5-48c0 13-10.5 23.5-23.5 23.5s-23.5-10.5-23.5-23.5S419 153 432 153s23.5 10.5 23.5 23.5z"]},jM={prefix:"fal",iconName:"times",icon:[320,512,[],"f00d","M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"]},VM={prefix:"fal",iconName:"times-circle",icon:[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 464c-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216 0 118.7-96.1 216-216 216zm94.8-285.3L281.5 256l69.3 69.3c4.7 4.7 4.7 12.3 0 17l-8.5 8.5c-4.7 4.7-12.3 4.7-17 0L256 281.5l-69.3 69.3c-4.7 4.7-12.3 4.7-17 0l-8.5-8.5c-4.7-4.7-4.7-12.3 0-17l69.3-69.3-69.3-69.3c-4.7-4.7-4.7-12.3 0-17l8.5-8.5c4.7-4.7 12.3-4.7 17 0l69.3 69.3 69.3-69.3c4.7-4.7 12.3-4.7 17 0l8.5 8.5c4.6 4.7 4.6 12.3 0 17z"]},UM={prefix:"fal",iconName:"toggle-off",icon:[576,512,[],"f204","M384 96c42.738 0 82.917 16.643 113.137 46.863S544 213.262 544 256s-16.643 82.917-46.863 113.137S426.738 416 384 416H192c-42.738 0-82.917-16.643-113.137-46.863S32 298.738 32 256s16.643-82.917 46.863-113.137S149.262 96 192 96h192m0-32H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zm-192 96c52.935 0 96 43.065 96 96s-43.065 96-96 96-96-43.065-96-96 43.065-96 96-96m0-32c-70.692 0-128 57.307-128 128s57.308 128 128 128 128-57.307 128-128-57.308-128-128-128z"]},$M={prefix:"fal",iconName:"toggle-on",icon:[576,512,[],"f205","M384 96c88.426 0 160 71.561 160 160 0 88.426-71.561 160-160 160H192c-88.426 0-160-71.561-160-160 0-88.425 71.561-160 160-160h192m0-32H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zm0 304c61.856 0 112-50.144 112-112s-50.144-112-112-112-112 50.144-112 112c0 28.404 10.574 54.339 27.999 74.082C320.522 353.335 350.548 368 384 368z"]},qM={prefix:"fal",iconName:"toilet",icon:[384,512,[],"f7d8","M376 32c4.4 0 8-3.6 8-8V8c0-4.4-3.6-8-8-8H8C3.6 0 0 3.6 0 8v16c0 4.4 3.6 8 8 8h24v172.7C11.8 214.8 0 226.9 0 240c0 67.2 34.6 126.2 86.8 160.5l-21.4 70.2C59.1 491.2 74.5 512 96 512h192c21.5 0 36.9-20.8 30.6-41.3l-21.4-70.2C349.4 366.2 384 307.2 384 240c0-13.1-11.8-25.2-32-35.3V32h24zM64 32h256v160.4c-34-10.2-78.8-16.4-128-16.4s-94 6.2-128 16.4V32zm128 176c83.9 0 152 14.3 152 32s-68.1 32-152 32-152-14.3-152-32 68.1-32 152-32zM96 480l19.5-63.9C139 426.3 164.8 432 192 432s53-5.7 76.5-15.9L288 480H96zm96-80c-75.2 0-138.1-52.3-155.1-122.4 34.9 16 91.3 26.4 155.1 26.4s120.2-10.4 155.1-26.4C330.1 347.7 267.2 400 192 400zM152 64h-48c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V72c0-4.4-3.6-8-8-8z"]},GM={prefix:"fal",iconName:"tshirt",icon:[608,512,[],"f553","M606.4 111.6c-2.6-7.8-8-14.1-15.2-17.8L403.8 0l-7.9 11.1c-15.7 22-51.8 36.2-91.9 36.2s-76.2-14.2-91.9-36.2L204.2 0 16.8 93.8c-7.3 3.7-12.7 10-15.2 17.8-2.6 7.8-2 16.1 1.7 23.4l51.5 104c3.6 7.4 9.8 12.9 17.5 15.4 7.7 2.7 16 2 23.2-1.6l48.6-24v237.8c0 25 20.1 45.3 44.8 45.3h230.4c24.7 0 44.8-20.3 44.8-45.3V228.9l48.5 24c7.2 3.7 15.5 4.3 23.3 1.6 7.7-2.6 13.9-8.1 17.5-15.4L604.9 135c3.5-7.3 4.1-15.6 1.5-23.4zm-79.7 112.3L432 177.1v289.7c0 7.1-5.7 12.9-12.8 12.9H188.8c-7.1 0-12.8-5.8-12.8-12.9V177.1l-92.6 47.6-52.3-101.9 164.1-82.2c24 24.3 64.2 39 108.9 39S389 64.9 413 40.6L575.5 122l-48.8 101.9z"]},HM={prefix:"fal",iconName:"utensils",icon:[480,512,[],"f2e7","M344.1 470.3l14.2-164.8c-42.1-33.1-70.4-77-70.4-129.5C288 81.7 376.1 0 440 0c22.1 0 40 17.3 40 38.5v435c0 21.2-17.9 38.5-40 38.5h-56c-22.8 0-41.8-18.7-39.9-41.7zM320 176c0 51 32.2 85.5 71.8 114.5L376 473.1c-.3 3.7 3.4 6.9 8 6.9h56c4.3 0 8-3 8-6.5v-435c0-3.5-3.7-6.5-8-6.5-44.6 0-120 65.8-120 144zM240.7 33.8C237.4 14.3 219.5 0 194.6 0c-11.9 0-24.1 3.4-33.3 11.2C152.9 4.1 141.3 0 128 0s-24.9 4.1-33.3 11.2C85.5 3.4 73.3 0 61.4 0 36.2 0 18.6 14.5 15.3 33.8 13.5 43.2 0 118.4 0 149.9c0 50.9 26.7 91.6 71 110.7L59.6 471.4C58.4 493.4 75.9 512 98 512h60c22 0 39.6-18.5 38.4-40.6L185 260.6c44.2-19.1 71-59.8 71-110.7 0-31.5-13.5-106.7-15.3-116.1zM152.3 240l12.2 233.1c.2 3.7-2.7 6.9-6.5 6.9H98c-3.7 0-6.7-3.1-6.5-6.9L103.7 240C61.3 231.2 32 197 32 149.9c0-29.7 14.8-110.6 14.8-110.6 1.6-9.9 28.3-9.7 29.5.2V162c.9 11.5 28.2 11.7 29.5.2l7.4-122.9c1.6-9.7 27.9-9.7 29.5 0l7.4 122.9c1.3 11.4 28.6 11.2 29.5-.2V39.6c1.2-9.9 27.9-10.1 29.5-.2 0 0 14.8 80.9 14.8 110.6.1 46.8-29 81.2-71.6 90z"]},ZM={prefix:"fal",iconName:"walking",icon:[320,512,[],"f554","M305.5 247.3l-19.6-21.1-8.7-28.5c-7.9-26.1-23.3-47.8-43.2-62.8 19.3-13.4 32-35.7 32-60.9 0-40.8-33.2-74-74-74s-74 33.2-74 74c0 15.7 4.9 30.3 13.3 42.3-14.7 3.8-28.4 9.8-45.3 17.4l-8.6 3.8c-24 10.5-43.4 30.1-54.9 55.2l-11.8 28c-7.3 17.2-5.7 35.7 4.2 50.7C24.6 286 41.2 295 58.4 295c12.5 0 24-4.7 32.9-12.9.2 1.4.4 2.7.6 4.1l-14.2 38.9-16.3 44.6L14 422.1c-18.7 20.4-18.7 52.4 0 72.9 9.6 10.5 23.2 16.6 37.2 16.6 14 0 27.6-6 37.2-16.6l46.7-51.2c9.6-10.6 17-22.9 22-36.5l8.7-23.9 10.6 10.7c.5.5.8 1.3.9 1.9l15.6 74.2C198 494.5 219 512 242.8 512c4 0 8.1-.5 12.1-1.5 27.4-6.9 44-34.6 38-62.9l-15.6-74.1c-2.8-13.2-7.8-25.6-14.7-36.7 1.8.2 3.6.3 5.5.3 20.3 0 38.9-12.6 47.4-32.2 8.6-19.5 4.7-41.6-10-57.6zM192 32c23.2 0 42 18.8 42 42s-18.8 42-42 42-42-18.8-42-42 18.8-42 42-42zm-65 364.3c-3.5 9.7-8.8 18.4-15.6 25.9l-46.7 51.2c-3.7 4.1-8.6 6.2-13.6 6.2-4.9 0-9.8-2.1-13.6-6.2-7.5-8.2-7.5-21.5 0-29.7l46.7-51.2c3.1-3.4 5.5-7.4 7.1-11.8l16.3-44.6.1.1 1 1.2 29 29.3-10.7 29.6zm141.1-91.1c-4.4 0-9-1.8-13-6.2l-23.5-25.3c-5-5.4-8.8-12.1-11-19.4-11.4-37.5-11.5-39.9-17.5-48.5l-20.9 91.7 43 43.4c10.4 10.6 17.7 24.2 20.8 39.3l15.6 74.1c2.4 11.3-4 22.6-14.4 25.2-1.5.4-3 .5-4.4.5-9.4 0-16.7-7.6-18.6-16.3l-15.6-74.2c-1.4-6.9-4.7-13-9.5-17.8L136 307.8c-11.6-13.8-15.7-31.2-11.9-47.7l15.8-69.3c-9 3.2-18.1 7.3-35.4 15-8 3.5-14.5 10-18.3 18.4L75 250.8c-3.7 8.7-10.1 12.3-16.6 12.3-12.5 0-25.2-13.4-18.2-29.9L51.7 206c8.3-18.2 21.9-31.9 38.6-39.2 34.2-15.1 48.7-22.8 76.6-22.8 36.3 0 68.3 25.3 79.8 63l10.3 33.9c.3 1 .8 2 1.6 2.8L282 269c14.1 15.3.9 36.2-13.9 36.2z"]},WM={prefix:"fal",iconName:"wheelchair",icon:[448,512,[],"f193","M443.875 396.323l3.151 7.353c2.611 6.092-.211 13.146-6.303 15.757l-42.421 19.273c-7.658 3.284-17.345.3-21.175-8.797L317.376 288H176a16 16 0 0 1-15.839-13.737C125.779 33.586 128.211 51.165 128 48c0-27.13 22.508-49.003 49.87-47.964 24.878.945 45.15 21.216 46.095 46.094C225.004 73.491 203.131 96 176 96c-3.115 0-6.156-.307-9.105-.874L176.162 160H308c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12H180.734l9.143 64H328a16 16 0 0 1 14.746 9.791l57.752 137.159 27.621-12.929c6.091-2.611 13.146.211 15.756 6.302zm-127.488-28.211C301.755 432.107 244.366 480 176 480c-79.401 0-144-64.599-144-144 0-58.714 35.326-109.325 85.836-131.717l-4.671-32.679C47.059 196.957 0 261.081 0 336c0 97.047 78.953 176 176 176 69.906 0 130.418-40.969 158.801-100.155l-18.414-43.733z"]};let XM=(()=>{class t{constructor(t){t.addIcons(wM,vM,xM,bM,gM,yM,NM,IM,PM,kM,TM,VM,jM,DM,AM,WM,UM,$M,EM,GM,zM,HM,fM,qM,dM,BM,OM,pM,uM,cM,hM,sM,aM,rM,iM,_M,mM,RM,FM,MM,LM,oM,lM,ZM,SM,CM)}}return t.\u0275fac=function(e){return new(e||t)(ur(Wb))},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[Qb]}),t})(),YM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ch,SI,_w,FE,Q_,XM,nM]]}),t})(),KM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ch,YM,XM,LO,DA]]}),t})(),JM=(()=>{class t{constructor(t){this.authService=t}intercept(t,e){const n=this.authService.getToken(),r=t.clone({headers:t.headers.set("Authorization","Bearer "+n)});return e.handle(r)}}return t.\u0275fac=function(e){return new(e||t)(ur(Am))},t.\u0275prov=ht({token:t,factory:t.\u0275fac}),t})();const QM=[{path:"login",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$t({type:t,selectors:[["app-login"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),data:{breadcrumb:"Login"}}];let tL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[Q_.forChild(QM)],Q_]}),t})(),eL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ch,tL]]}),t})(),nL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t}),t.\u0275inj=pt({imports:[[ch,FE,nM,_w,Qb,YM,pT]]}),t})(),rL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Zt({type:t,bootstrap:[AO]}),t.\u0275inj=pt({providers:[OO,{provide:fp,useClass:JM,multi:!0},{provide:bm,useValue:{name:"ngx-wayfinding-",driver:[vm.INDEXED_DB,vm.LOCAL_STORAGE]}}],imports:[[qh,kp,XM,nM,YM,eL,nL,KM,um,mw]]}),t})();(function(){if(uc)throw new Error("Cannot enable prod mode after platform setup.");lc=!1})(),Uh().bootstrapModule(rL).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zuR4:function(t,e,n){"use strict";var r=n("xTJ+"),i=n("HSsa"),o=n("CgaS"),s=n("SntB");function a(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var l=a(n("JEQr"));l.Axios=o,l.create=function(t){return a(s(l.defaults,t))},l.Cancel=n("endd"),l.CancelToken=n("jfS+"),l.isCancel=n("Lmem"),l.all=function(t){return Promise.all(t)},l.spread=n("DfZB"),l.isAxiosError=n("XwJu"),t.exports=l,t.exports.default=l}},[[0,0]]]);